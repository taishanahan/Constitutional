//>>built
define("esri/dijit/analysis/ProjectExtent",["dojo/_base/array","esri/geometry/Extent","esri/geometry/webMercatorUtils","esri/geometry/Polygon","esri/tasks/GeometryService"],function(p,u,q,h,v){function r(b,c){if(b&&c.xmin>c.xmax){var d=b.valid[1]-c.xmin,e=c.xmax-b.valid[0];d>e?c.xmax=b.valid[1]+e:c.xmin=b.valid[0]-d}}return function(b,c,d,e,f,k){var t=[102113,102100,3857],l=b.spatialReference.wkid;if(l===c.wkid)return d([b],null);if(4326==l&&-1<p.indexOf(t,c.wkid))return b.ymin=Math.max(b.ymin,-89.99),
b.ymax=Math.min(b.ymax,89.99),b=q.geographicToWebMercator(b),f=b.spatialReference._getInfo(),r(f,b),b.spatialReference.wkid=c.wkid,d([b],null);if(-1<p.indexOf(t,l)&&4326==c.wkid)return b=q.webMercatorToGeographic(b),f=b.spatialReference._getInfo(),r(f,b),d([b],null);k||(k=new v(window.esriGeowConfig.self.helperServices.geometry.url));if(f&&f.wrapAround180&&"extent"===b.type){var w=b;b=h.fromExtent(b)}k.project([b],c,function(a,m){if(!(a&&0<a.length&&a[0]&&"extent"==a[0].type)||isNaN(a[0].xmin)||isNaN(a[0].ymin)||
isNaN(a[0].xmax)||isNaN(a[0].ymax)){if(a&&0<a.length&&a[0]&&"point"==a[0].type&&!isNaN(a[0].x)&&!isNaN(a[0].y))return d(a,m);if(w&&"polygon"===a[0].type){if(1===a[0].rings.length)a[0]=new u(a[0].getExtent());else{var n=(new h(a[0].spatialReference.toJson())).addRing(a[0].rings[0]).getExtent(),g=(new h(a[0].spatialReference.toJson())).addRing(a[0].rings[1]).getExtent();a[0]=g;a[0].xmin=g.xmin-n.getWidth();a[0].ymin=Math.min(g.ymin,n.ymin);a[0].ymax=Math.max(g.ymax,n.ymax)}return d(a,m)}if(e)return e()}else return d(a,
m)},e)}});