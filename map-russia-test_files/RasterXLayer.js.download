//>>built
require({cache:{"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(g,e){var t=g.matrix={},u={};t._degToRad=function(l){return u[l]||(u[l]=Math.PI*l/180)};t._radToDeg=function(l){return l/Math.PI*180};t.Matrix2D=function(l){if(l)if("number"==typeof l)this.xx=this.yy=l;else if(l instanceof Array){if(0<l.length){for(var q=t.normalize(l[0]),k=1;k<l.length;++k){var a=q,d=t.normalize(l[k]);q=new t.Matrix2D;q.xx=a.xx*d.xx+a.xy*d.yx;q.xy=a.xx*d.xy+a.xy*d.yy;q.yx=a.yx*d.xx+a.yy*d.yx;
q.yy=a.yx*d.xy+a.yy*d.yy;q.dx=a.xx*d.dx+a.xy*d.dy+a.dx;q.dy=a.yx*d.dx+a.yy*d.dy+a.dy}e.mixin(this,q)}}else e.mixin(this,l)};e.extend(t.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});e.mixin(t,{identity:new t.Matrix2D,flipX:new t.Matrix2D({xx:-1}),flipY:new t.Matrix2D({yy:-1}),flipXY:new t.Matrix2D({xx:-1,yy:-1}),translate:function(l,q){return 1<arguments.length?new t.Matrix2D({dx:l,dy:q}):new t.Matrix2D({dx:l.x,dy:l.y})},scale:function(l,q){return 1<arguments.length?new t.Matrix2D({xx:l,yy:q}):"number"==
typeof l?new t.Matrix2D({xx:l,yy:l}):new t.Matrix2D({xx:l.x,yy:l.y})},rotate:function(l){var q=Math.cos(l);l=Math.sin(l);return new t.Matrix2D({xx:q,xy:-l,yx:l,yy:q})},rotateg:function(l){return t.rotate(t._degToRad(l))},skewX:function(l){return new t.Matrix2D({xy:Math.tan(l)})},skewXg:function(l){return t.skewX(t._degToRad(l))},skewY:function(l){return new t.Matrix2D({yx:Math.tan(l)})},skewYg:function(l){return t.skewY(t._degToRad(l))},reflect:function(l,q){1==arguments.length&&(q=l.y,l=l.x);var k=
l*l,a=q*q,d=k+a,n=2*l*q/d;return new t.Matrix2D({xx:2*k/d-1,xy:n,yx:n,yy:2*a/d-1})},project:function(l,q){1==arguments.length&&(q=l.y,l=l.x);var k=l*l,a=q*q,d=k+a,n=l*q/d;return new t.Matrix2D({xx:k/d,xy:n,yx:n,yy:a/d})},normalize:function(l){return l instanceof t.Matrix2D?l:new t.Matrix2D(l)},isIdentity:function(l){return 1==l.xx&&0==l.xy&&0==l.yx&&1==l.yy&&0==l.dx&&0==l.dy},clone:function(l){var q=new t.Matrix2D,k;for(k in l)"number"==typeof l[k]&&"number"==typeof q[k]&&q[k]!=l[k]&&(q[k]=l[k]);
return q},invert:function(l){l=t.normalize(l);var q=l.xx*l.yy-l.xy*l.yx;return l=new t.Matrix2D({xx:l.yy/q,xy:-l.xy/q,yx:-l.yx/q,yy:l.xx/q,dx:(l.xy*l.dy-l.yy*l.dx)/q,dy:(l.yx*l.dx-l.xx*l.dy)/q})},_multiplyPoint:function(l,q,k){return{x:l.xx*q+l.xy*k+l.dx,y:l.yx*q+l.yy*k+l.dy}},multiplyPoint:function(l,q,k){l=t.normalize(l);return"number"==typeof q&&"number"==typeof k?t._multiplyPoint(l,q,k):t._multiplyPoint(l,q.x,q.y)},multiplyRectangle:function(l,q){var k=t.normalize(l);q=q||{x:0,y:0,width:0,height:0};
if(t.isIdentity(k))return{x:q.x,y:q.y,width:q.width,height:q.height};l=t.multiplyPoint(k,q.x,q.y);var a=t.multiplyPoint(k,q.x,q.y+q.height),d=t.multiplyPoint(k,q.x+q.width,q.y);q=t.multiplyPoint(k,q.x+q.width,q.y+q.height);k=Math.min(l.x,a.x,d.x,q.x);var n=Math.min(l.y,a.y,d.y,q.y);return{x:k,y:n,width:Math.max(l.x,a.x,d.x,q.x)-k,height:Math.max(l.y,a.y,d.y,q.y)-n}},multiply:function(l){for(var q=t.normalize(l),k=1;k<arguments.length;++k){var a=q,d=t.normalize(arguments[k]);q=new t.Matrix2D;q.xx=
a.xx*d.xx+a.xy*d.yx;q.xy=a.xx*d.xy+a.xy*d.yy;q.yx=a.yx*d.xx+a.yy*d.yx;q.yy=a.yx*d.xy+a.yy*d.yy;q.dx=a.xx*d.dx+a.xy*d.dy+a.dx;q.dy=a.yx*d.dx+a.yy*d.dy+a.dy}return q},_sandwich:function(l,q,k){return t.multiply(t.translate(q,k),l,t.translate(-q,-k))},scaleAt:function(l,q,k,a){switch(arguments.length){case 4:return t._sandwich(t.scale(l,q),k,a);case 3:return"number"==typeof k?t._sandwich(t.scale(l),q,k):t._sandwich(t.scale(l,q),k.x,k.y)}return t._sandwich(t.scale(l),q.x,q.y)},rotateAt:function(l,q,k){return 2<
arguments.length?t._sandwich(t.rotate(l),q,k):t._sandwich(t.rotate(l),q.x,q.y)},rotategAt:function(l,q,k){return 2<arguments.length?t._sandwich(t.rotateg(l),q,k):t._sandwich(t.rotateg(l),q.x,q.y)},skewXAt:function(l,q,k){return 2<arguments.length?t._sandwich(t.skewX(l),q,k):t._sandwich(t.skewX(l),q.x,q.y)},skewXgAt:function(l,q,k){return 2<arguments.length?t._sandwich(t.skewXg(l),q,k):t._sandwich(t.skewXg(l),q.x,q.y)},skewYAt:function(l,q,k){return 2<arguments.length?t._sandwich(t.skewY(l),q,k):t._sandwich(t.skewY(l),
q.x,q.y)},skewYgAt:function(l,q,k){return 2<arguments.length?t._sandwich(t.skewYg(l),q,k):t._sandwich(t.skewYg(l),q.x,q.y)}});g.Matrix2D=t.Matrix2D;return t})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(g,e,t,u,l,q,k,a,d){var n=e.getObject("dojox.gfx",!0),b=n._base={};n._hasClass=function(m,v){return(m=m.getAttribute("className"))&&0<=
(" "+m+" ").indexOf(" "+v+" ")};n._addClass=function(m,v){var z=m.getAttribute("className")||"";(!z||0>(" "+z+" ").indexOf(" "+v+" "))&&m.setAttribute("className",z+(z?" ":"")+v)};n._removeClass=function(m,v){var z=m.getAttribute("className");z&&m.setAttribute("className",z.replace(new RegExp("(^|\\s+)"+v+"(\\s+|$)"),"$1$2"))};b._getFontMeasurements=function(){var m={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},v;if(u("ie")){var z=
l.doc.documentElement.style.fontSize||"";z||(l.doc.documentElement.style.fontSize="100%")}var A=a.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},l.body());for(v in m)A.style.fontSize=v,m[v]=16*Math.round(12*A.offsetHeight/16)/12/1E3;u("ie")&&(l.doc.documentElement.style.fontSize=z);l.body().removeChild(A);return m};var h=null;b._getCachedFontMeasurements=function(m){if(m||
!h)h=b._getFontMeasurements();return h};var c=null,f={};b._getTextBox=function(m,v,z){var A=arguments.length,D;c||(c=a.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},l.body()));var E=c;E.className="";var F=E.style;F.borderWidth="0";F.margin="0";F.padding="0";F.outline="0";if(1<A&&v)for(D in v)D in f||(F[D]=v[D]);2<A&&z&&(E.className=z);E.innerHTML=m;E.getBoundingClientRect?(F=E.getBoundingClientRect(),F={l:F.left,t:F.top,w:F.width||F.right-F.left,h:F.height||
F.bottom-F.top}):F=d.getMarginBox(E);E.innerHTML="";return F};b._computeTextLocation=function(m,v,z,A){var D={};switch(m.align){case "end":D.x=m.x-v;break;case "middle":D.x=m.x-v/2;break;default:D.x=m.x}D.y=m.y-z*(A?.75:1);return D};b._computeTextBoundingBox=function(m){if(!n._base._isRendered(m))return{x:0,y:0,width:0,height:0};var v=m.getShape();var z=m.getFont()||n.defaultFont;m=m.getTextWidth();z=n.normalizedLength(z.size);v=b._computeTextLocation(v,m,z,!0);return{x:v.x,y:v.y,width:m,height:z}};
b._isRendered=function(m){for(m=m.parent;m&&m.getParent;)m=m.parent;return null!==m};var p=0;b._getUniqueId=function(){do var m=g._scopeName+"xUnique"+ ++p;while(k.byId(m));return m};var r=u("pointer-events")?"touchAction":u("MSPointer")?"msTouchAction":null;b._fixMsTouchAction=r?function(m){m.rawNode.style[r]="none"}:function(){};e.mixin(n,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",
cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,
x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var m={};return function(v){var z=m[v];if(z)return new z;z=m[v]=function(){};z.prototype=n["default"+v];return new z}}(),normalizeColor:function(m){return m instanceof
t?m:new t(m)},normalizeParameters:function(m,v){var z;if(v){var A={};for(z in m)z in v&&!(z in A)&&(m[z]=v[z])}return m},makeParameters:function(m,v){var z=null;if(!v)return e.delegate(m);var A={};for(z in m)z in A||(A[z]=e.clone(z in v?v[z]:m[z]));return A},formatNumber:function(m,v){var z=m.toString();if(0<=z.indexOf("e"))z=m.toFixed(4);else{var A=z.indexOf(".");0<=A&&5<z.length-A&&(z=m.toFixed(4))}return 0>m?z:v?" "+z:z},makeFontString:function(m){return m.style+" "+m.variant+" "+m.weight+" "+
m.size+" "+m.family},splitFontString:function(m){var v=n.getDefault("Font");m=m.split(/\s+/);if(!(5>m.length)){v.style=m[0];v.variant=m[1];v.weight=m[2];var z=m[3].indexOf("/");v.size=0>z?m[3]:m[3].substring(0,z);var A=4;0>z&&("/"==m[4]?A=6:"/"==m[4].charAt(0)&&(A=5));A<m.length&&(v.family=m.slice(A).join(" "))}return v},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return n._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(m){return m*n.px_in_pt()},px2pt:function(m){return m/
n.px_in_pt()},normalizedLength:function(m){if(0===m.length)return 0;if(2<m.length){var v=n.px_in_pt(),z=parseFloat(m);switch(m.slice(-2)){case "px":return z;case "pt":return z*v;case "in":return 72*z*v;case "pc":return 12*z*v;case "mm":return z*n.mm_in_pt*v;case "cm":return z*n.cm_in_pt*v}}return parseFloat(m)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(m,v){return m&&v&&m===
v},switchTo:function(m){var v="string"==typeof m?n[m]:m;v&&(q.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "),function(z){n[z]=v[z]}),"string"==typeof m?n.renderer=m:q.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(z){return n.renderer=n[z]&&n[z].Surface===n.Surface?z:null}))}});return n})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(g,e,t){e.switchTo(t);return e})},
"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(g,e,t,u,l){var q=null;t.add("vml",function(k,a,d){d.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';k="adj"in d.firstChild;d.innerHTML="";return k});return{load:function(k,a,d){function n(){a(["dojox/gfx/"+b],function(f){g.renderer=b;q=f;d(f)})}if(q&&"force"!=k)d(q);else{var b=l.forceGfxRenderer;k=!b&&(e.isString(l.gfxRenderer)?l.gfxRenderer:"svg,vml,canvas,silverlight").split(",");
for(var h,c;!b&&k.length;)switch(k.shift()){case "svg":"SVGAngle"in u.global&&(b="svg");break;case "vml":t("vml")&&(b="vml");break;case "silverlight":try{t("ie")?(h=new ActiveXObject("AgControl.AgControl"),h.IsVersionSupported("1.0"))&&(c=!0):navigator.plugins["Silverlight Plug-In"]&&(c=!0)}catch(f){c=!1}finally{h=null}c&&(b="silverlight");break;case "canvas":u.global.CanvasRenderingContext2D&&(b="canvas")}"canvas"===b&&!1!==l.canvasEvents&&(b="canvasWithEvents");"svg"==b&&"undefined"!=typeof window.svgweb?
window.svgweb.addOnLoad(n):n()}}}})},"dojox/gfx/svg":function(){define("dojo/_base/lang dojo/_base/sniff dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/_base/Color ./_base ./shape ./path".split(" "),function(g,e,t,u,l,q,k,a,d,n,b,h){function c(y,x){return t.doc.createElementNS?t.doc.createElementNS(y,x):t.doc.createElement(x)}function f(y,x,w,C){return y.setAttributeNS?y.setAttributeNS(x,w,C):y.setAttribute(w,C)}function p(y){return r.useSvgWeb?
t.doc.createTextNode(y,!0):t.doc.createTextNode(y)}var r=n.svg={};r.useSvgWeb="undefined"!=typeof window.svgweb;var m=navigator.userAgent,v=e("ios"),z=e("android"),A=e("chrome")||z&&4<=z?"auto":"optimizeLegibility";r.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};r.getRef=function(y){return y&&"none"!=y?y.match(/^url\(#.+\)$/)?u.byId(y.slice(5,-1)):y.match(/^#dojoUnique\d+$/)?u.byId(y.slice(1)):null:null};r.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,
1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var D=0;r.Shape=l("dojox.gfx.svg.Shape",b.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var y=this.rawNode.getAttribute("fill");(y=r.getRef(y))&&y.parentNode.removeChild(y)}this.clip&&(y=this.rawNode.getAttribute("clip-path"))&&(y=u.byId(y.match(/gfx_clip[\d]+/)[0]))&&y.parentNode.removeChild(y);b.Shape.prototype.destroy.apply(this,
arguments)},setFill:function(y){if(!y)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var x=function(C){this.setAttribute(C,w[C].toFixed(8))};if("object"==typeof y&&"type"in y){switch(y.type){case "linear":var w=n.makeParameters(n.defaultLinearGradient,y);y=this._setFillObject(w,"linearGradient");q.forEach(["x1","y1","x2","y2"],x,y);break;case "radial":w=n.makeParameters(n.defaultRadialGradient,y);y=this._setFillObject(w,"radialGradient");
q.forEach(["cx","cy","r"],x,y);break;case "pattern":w=n.makeParameters(n.defaultPattern,y),y=this._setFillObject(w,"pattern"),q.forEach(["x","y","width","height"],x,y)}this.fillStyle=w;return this}this.fillStyle=w=n.normalizeColor(y);this.rawNode.setAttribute("fill",w.toCss());this.rawNode.setAttribute("fill-opacity",w.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(y){var x=this.rawNode;if(!y)return this.strokeStyle=null,x.setAttribute("stroke","none"),x.setAttribute("stroke-opacity",
0),this;if("string"==typeof y||g.isArray(y)||y instanceof d)y={color:y};y=this.strokeStyle=n.makeParameters(n.defaultStroke,y);y.color=n.normalizeColor(y.color);if(y){var w=0>y.width?0:y.width;x.setAttribute("stroke",y.color.toCss());x.setAttribute("stroke-opacity",y.color.a);x.setAttribute("stroke-width",w);x.setAttribute("stroke-linecap",y.cap);"number"==typeof y.join?(x.setAttribute("stroke-linejoin","miter"),x.setAttribute("stroke-miterlimit",y.join)):x.setAttribute("stroke-linejoin",y.join);
var C=y.style.toLowerCase();C in r.dasharray&&(C=r.dasharray[C]);if(C instanceof Array){C=g._toArray(C);var B;for(B=0;B<C.length;++B)C[B]*=w;if("butt"!=y.cap){for(B=0;B<C.length;B+=2)C[B]-=w,1>C[B]&&(C[B]=1);for(B=1;B<C.length;B+=2)C[B]+=w}C=C.join(",")}x.setAttribute("stroke-dasharray",C);x.setAttribute("dojoGfxStrokeStyle",y.style)}return this},_getParentSurface:function(){for(var y=this.parent;y&&!(y instanceof n.Surface);y=y.parent);return y},_setFillObject:function(y,x){var w=r.xmlns.svg;this.fillStyle=
y;var C=this._getParentSurface().defNode,B=this.rawNode.getAttribute("fill");if(B=r.getRef(B))if(B.tagName.toLowerCase()!=x.toLowerCase()){var I=B.id;B.parentNode.removeChild(B);B=c(w,x);B.setAttribute("id",I);C.appendChild(B)}else for(;B.childNodes.length;)B.removeChild(B.lastChild);else B=c(w,x),B.setAttribute("id",n._base._getUniqueId()),C.appendChild(B);if("pattern"==x)B.setAttribute("patternUnits","userSpaceOnUse"),w=c(w,"image"),w.setAttribute("x",0),w.setAttribute("y",0),w.setAttribute("width",
(0>y.width?0:y.width).toFixed(8)),w.setAttribute("height",(0>y.height?0:y.height).toFixed(8)),f(w,r.xmlns.xlink,"xlink:href",y.src),B.appendChild(w);else for(B.setAttribute("gradientUnits","userSpaceOnUse"),x=0;x<y.colors.length;++x){C=y.colors[x];I=c(w,"stop");var N=C.color=n.normalizeColor(C.color);I.setAttribute("offset",C.offset.toFixed(8));I.setAttribute("stop-color",N.toCss());I.setAttribute("stop-opacity",N.a);B.appendChild(I)}this.rawNode.setAttribute("fill","url(#"+B.getAttribute("id")+")");
this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return B},_applyTransform:function(){if(this.matrix){var y=this.matrix;this.rawNode.setAttribute("transform","matrix("+y.xx.toFixed(8)+","+y.yx.toFixed(8)+","+y.xy.toFixed(8)+","+y.yy.toFixed(8)+","+y.dx.toFixed(8)+","+y.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(y){y=this.rawNode=y;"image"!=this.shape.type&&y.setAttribute("fill","none");y.setAttribute("fill-opacity",
0);y.setAttribute("stroke","none");y.setAttribute("stroke-opacity",0);y.setAttribute("stroke-width",1);y.setAttribute("stroke-linecap","butt");y.setAttribute("stroke-linejoin","miter");y.setAttribute("stroke-miterlimit",4);y.__gfxObject__=this},setShape:function(y){this.shape=n.makeParameters(this.shape,y);for(var x in this.shape)if("type"!=x){y=this.shape[x];if("width"===x||"height"===x)y=0>y?0:y;this.rawNode.setAttribute(x,y)}this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);
return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this},setClip:function(y){this.inherited(arguments);var x=y?"width"in y?"rect":"cx"in y?"ellipse":"points"in y?"polyline":"d"in y?"path":null:null;if(y&&!x)return this;"polyline"===x&&(y=g.clone(y),y.points=y.points.join(","));var w,C=a.get(this.rawNode,"clip-path");C&&(w=u.byId(C.match(/gfx_clip[\d]+/)[0]))&&w.removeChild(w.childNodes[0]);y?(w?(x=c(r.xmlns.svg,x),w.appendChild(x)):
(C="gfx_clip"+ ++D,this.rawNode.setAttribute("clip-path","url(#"+C+")"),w=c(r.xmlns.svg,"clipPath"),x=c(r.xmlns.svg,x),w.appendChild(x),this.rawNode.parentNode.insertBefore(w,this.rawNode),a.set(w,"id",C)),a.set(x,y)):(this.rawNode.removeAttribute("clip-path"),w&&w.parentNode.removeChild(w));return this},_removeClipNode:function(){var y,x=a.get(this.rawNode,"clip-path");x&&(y=u.byId(x.match(/gfx_clip[\d]+/)[0]))&&y.parentNode.removeChild(y);return y}});r.Group=l("dojox.gfx.svg.Group",r.Shape,{constructor:function(){b.Container._init.call(this)},
setRawNode:function(y){this.rawNode=y;this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0);r.Shape.prototype.destroy.apply(this,arguments)}});r.Group.nodeType="g";r.Rect=l("dojox.gfx.svg.Rect",[r.Shape,b.Rect],{setShape:function(y){this.shape=n.makeParameters(this.shape,y);this.bbox=null;for(var x in this.shape)if("type"!=x&&"r"!=x){y=this.shape[x];if("width"===x||"height"===x)y=0>y?0:y;this.rawNode.setAttribute(x,y)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),
this.rawNode.setAttribute("rx",this.shape.r));return this}});r.Rect.nodeType="rect";r.Ellipse=l("dojox.gfx.svg.Ellipse",[r.Shape,b.Ellipse],{});r.Ellipse.nodeType="ellipse";r.Circle=l("dojox.gfx.svg.Circle",[r.Shape,b.Circle],{});r.Circle.nodeType="circle";r.Line=l("dojox.gfx.svg.Line",[r.Shape,b.Line],{});r.Line.nodeType="line";r.Polyline=l("dojox.gfx.svg.Polyline",[r.Shape,b.Polyline],{setShape:function(y,x){y&&y instanceof Array?(this.shape=n.makeParameters(this.shape,{points:y}),x&&this.shape.points.length&&
this.shape.points.push(this.shape.points[0])):this.shape=n.makeParameters(this.shape,y);this.bbox=null;this._normalizePoints();y=[];x=this.shape.points;for(var w=0;w<x.length;++w)y.push(x[w].x.toFixed(8),x[w].y.toFixed(8));this.rawNode.setAttribute("points",y.join(" "));return this}});r.Polyline.nodeType="polyline";r.Image=l("dojox.gfx.svg.Image",[r.Shape,b.Image],{setShape:function(y){this.shape=n.makeParameters(this.shape,y);this.bbox=null;y=this.rawNode;for(var x in this.shape)if("type"!=x&&"src"!=
x){var w=this.shape[x];if("width"===x||"height"===x)w=0>w?0:w;y.setAttribute(x,w)}y.setAttribute("preserveAspectRatio","none");f(y,r.xmlns.xlink,"xlink:href",this.shape.src);y.__gfxObject__=this;return this}});r.Image.nodeType="image";r.Text=l("dojox.gfx.svg.Text",[r.Shape,b.Text],{setShape:function(y){this.shape=n.makeParameters(this.shape,y);this.bbox=null;y=this.rawNode;var x=this.shape;y.setAttribute("x",x.x);y.setAttribute("y",x.y);y.setAttribute("text-anchor",x.align);y.setAttribute("text-decoration",
x.decoration);y.setAttribute("rotate",x.rotated?90:0);y.setAttribute("kerning",x.kerning?"auto":0);y.setAttribute("text-rendering",A);y.firstChild?y.firstChild.nodeValue=x.text:y.appendChild(p(x.text));return this},getTextWidth:function(){var y=this.rawNode,x=y.parentNode;y=y.cloneNode(!0);y.style.visibility="hidden";var w=0,C=y.firstChild.nodeValue;x.appendChild(y);if(""!=C)for(;!w;)w=y.getBBox?parseInt(y.getBBox().width):68;x.removeChild(y);return w},getBoundingBox:function(){var y=null;if(this.getShape().text)try{y=
this.rawNode.getBBox()}catch(x){y={x:0,y:0,width:0,height:0}}return y}});r.Text.nodeType="text";r.Path=l("dojox.gfx.svg.Path",[r.Shape,h.Path],{_updateWithSegment:function(y){this.inherited(arguments);"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(y){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});r.Path.nodeType="path";r.TextPath=l("dojox.gfx.svg.TextPath",
[r.Shape,h.TextPath],{_updateWithSegment:function(y){this.inherited(arguments);this._setTextPath()},setShape:function(y){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if("string"==typeof this.shape.path){var y=this.rawNode;if(!y.firstChild){var x=c(r.xmlns.svg,"textPath"),w=p("");x.appendChild(w);y.appendChild(x)}x=(x=y.firstChild.getAttributeNS(r.xmlns.xlink,"href"))&&r.getRef(x);if(!x&&(w=this._getParentSurface())){w=w.defNode;x=c(r.xmlns.svg,"path");var C=n._base._getUniqueId();
x.setAttribute("id",C);w.appendChild(x);f(y.firstChild,r.xmlns.xlink,"xlink:href","#"+C)}x&&x.setAttribute("d",this.shape.path)}},_setText:function(){var y=this.rawNode;if(!y.firstChild){var x=c(r.xmlns.svg,"textPath"),w=p("");x.appendChild(w);y.appendChild(x)}y=y.firstChild;x=this.text;y.setAttribute("alignment-baseline","middle");switch(x.align){case "middle":y.setAttribute("text-anchor","middle");y.setAttribute("startOffset","50%");break;case "end":y.setAttribute("text-anchor","end");y.setAttribute("startOffset",
"100%");break;default:y.setAttribute("text-anchor","start"),y.setAttribute("startOffset","0%")}y.setAttribute("baseline-shift","0.5ex");y.setAttribute("text-decoration",x.decoration);y.setAttribute("rotate",x.rotated?90:0);y.setAttribute("kerning",x.kerning?"auto":0);y.firstChild.data=x.text}});r.TextPath.nodeType="text";var E=534<function(){var y=/WebKit\/(\d*)/.exec(m);return y?y[1]:0}();r.Surface=l("dojox.gfx.svg.Surface",b.Surface,{constructor:function(){b.Container._init.call(this)},destroy:function(){b.Container.clear.call(this,
!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(y,x){if(!this.rawNode)return this;y=0>y?0:y;x=0>x?0:x;this.rawNode.setAttribute("width",y);this.rawNode.setAttribute("height",x);E&&(this.rawNode.style.width=y,this.rawNode.style.height=x);return this},getDimensions:function(){return this.rawNode?{width:n.normalizedLength(this.rawNode.getAttribute("width")),height:n.normalizedLength(this.rawNode.getAttribute("height"))}:null}});r.createSurface=function(y,x,w){var C=new r.Surface;
C.rawNode=c(r.xmlns.svg,"svg");C.rawNode.setAttribute("overflow","hidden");x&&C.rawNode.setAttribute("width",0>x?0:x);w&&C.rawNode.setAttribute("height",0>w?0:w);x=c(r.xmlns.svg,"defs");C.rawNode.appendChild(x);C.defNode=x;C._parent=u.byId(y);C._parent.appendChild(C.rawNode);n._base._fixMsTouchAction(C);return C};e={_setFont:function(){var y=this.fontStyle;this.rawNode.setAttribute("font-style",y.style);this.rawNode.setAttribute("font-variant",y.variant);this.rawNode.setAttribute("font-weight",y.weight);
this.rawNode.setAttribute("font-size",y.size);this.rawNode.setAttribute("font-family",y.family)}};var F=b.Container;l=r.Container={openBatch:function(){if(!this._batch){var y=r.useSvgWeb?t.doc.createDocumentFragment(!0):t.doc.createDocumentFragment();this.fragment=y}++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment);return this},add:function(y){this!=y.getParent()&&(this.fragment?
this.fragment.appendChild(y.rawNode):this.rawNode.appendChild(y.rawNode),F.add.apply(this,arguments),y.setClip(y.clip));return this},remove:function(y,x){this==y.getParent()&&(this.rawNode==y.rawNode.parentNode&&this.rawNode.removeChild(y.rawNode),this.fragment&&this.fragment==y.rawNode.parentNode&&this.fragment.removeChild(y.rawNode),y._removeClipNode(),F.remove.apply(this,arguments));return this},clear:function(){for(var y=this.rawNode;y.lastChild;)y.removeChild(y.lastChild);var x=this.defNode;
if(x){for(;x.lastChild;)x.removeChild(x.lastChild);y.appendChild(x)}return F.clear.apply(this,arguments)},getBoundingBox:F.getBoundingBox,_moveChildToFront:F._moveChildToFront,_moveChildToBack:F._moveChildToBack};h=r.Creator={createObject:function(y,x){if(!this.rawNode)return null;var w=new y;y=c(r.xmlns.svg,y.nodeType);w.setRawNode(y);w.setShape(x);this.add(w);return w}};g.extend(r.Text,e);g.extend(r.TextPath,e);g.extend(r.Group,l);g.extend(r.Group,b.Creator);g.extend(r.Group,h);g.extend(r.Surface,
l);g.extend(r.Surface,b.Creator);g.extend(r.Surface,h);r.fixTarget=function(y,x){y.gfxTarget||(y.gfxTarget=v&&y.target.wholeText?y.target.parentElement.__gfxObject__:y.target.__gfxObject__);return!0};r.useSvgWeb&&(r.createSurface=function(y,x,w){var C=new r.Surface;x=0>x?0:x;w=0>w?0:w;if(!x||!w){var B=k.position(y);x=x||B.w;w=w||B.h}y=u.byId(y);B=y.id?y.id+"_svgweb":n._base._getUniqueId();var I=c(r.xmlns.svg,"svg");I.id=B;I.setAttribute("width",x);I.setAttribute("height",w);svgweb.appendChild(I,y);
I.addEventListener("SVGLoad",function(){C.rawNode=this;C.isLoaded=!0;var N=c(r.xmlns.svg,"defs");C.rawNode.appendChild(N);C.defNode=N;if(C.onLoad)C.onLoad(C)},!1);C.isLoaded=!1;return C},r.Surface.extend({destroy:function(){var y=this.rawNode;svgweb.removeChild(y,y.parentNode)}}),e={connect:function(y,x,w){"on"===y.substring(0,2)&&(y=y.substring(2));w=2==arguments.length?x:g.hitch(x,w);this.getEventSource().addEventListener(y,w,!1);return[this,y,w]},disconnect:function(y){this.getEventSource().removeEventListener(y[1],
y[2],!1);delete y[0]}},g.extend(r.Shape,e),g.extend(r.Surface,e));return r})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(g,e,t,u,l,q,k,a,d,n){function b(c,f){for(var p=c.length-1;f<p;)c[f]=c[++f];c.length=p}var h=g.shape={};h.Shape=t("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=
this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(l("gfxRegistry")){var c=h.register(this);this.getUID=function(){return c}}},destroy:function(){l("gfxRegistry")&&h.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},
getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var c=this.getBoundingBox();if(!c)return null;var f=this._getRealMatrix();return[n.multiplyPoint(f,c.x,c.y),n.multiplyPoint(f,c.x+c.width,c.y),n.multiplyPoint(f,c.x+c.width,c.y+c.height),n.multiplyPoint(f,c.x,c.y+c.height)]},getEventSource:function(){return this.rawNode},setClip:function(c){this.clip=c},getClip:function(){return this.clip},setShape:function(c){this.shape=g.makeParameters(this.shape,c);this.bbox=null;
return this},setFill:function(c){if(!c)return this.fillStyle=null,this;var f=null;if("object"==typeof c&&"type"in c)switch(c.type){case "linear":f=g.makeParameters(g.defaultLinearGradient,c);break;case "radial":f=g.makeParameters(g.defaultRadialGradient,c);break;case "pattern":f=g.makeParameters(g.defaultPattern,c)}else f=g.normalizeColor(c);this.fillStyle=f;return this},setStroke:function(c){if(!c)return this.strokeStyle=null,this;if("string"==typeof c||e.isArray(c)||c instanceof d)c={color:c};c=
this.strokeStyle=g.makeParameters(g.defaultStroke,c);c.color=g.normalizeColor(c.color);return this},setTransform:function(c){this.matrix=n.clone(c?n.normalize(c):n.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var c=this.getParent();c&&(c._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var c=this.getParent();c&&(c._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},
applyRightTransform:function(c){return c?this.setTransform([this.matrix,c]):this},applyLeftTransform:function(c){return c?this.setTransform([c,this.matrix]):this},applyTransform:function(c){return c?this.setTransform([this.matrix,c]):this},removeShape:function(c){this.parent&&this.parent.remove(this,c);return this},_setParent:function(c,f){this.parent=c;return this._updateParentMatrix(f)},_updateParentMatrix:function(c){this.parentMatrix=c?n.clone(c):null;return this._applyTransform()},_getRealMatrix:function(){for(var c=
this.matrix,f=this.parent;f;)f.matrix&&(c=n.multiply(f.matrix,c)),f=f.parent;return c}});h._eventsProcessing={on:function(c,f){return q(this.getEventSource(),c,h.fixCallback(this,g.fixTarget,f))},connect:function(c,f,p){"on"==c.substring(0,2)&&(c=c.substring(2));return this.on(c,p?e.hitch(f,p):f)},disconnect:function(c){return c.remove()}};h.fixCallback=function(c,f,p,r){r||(r=p,p=null);if(e.isString(r)){p=p||u.global;if(!p[r])throw['dojox.gfx.shape.fixCallback: scope["',r,'"] is null (scope\x3d"',
p,'")'].join("");return function(m){return f(m,c)?p[r].apply(p,arguments||[]):void 0}}return p?function(m){return f(m,c)?r.apply(p,arguments||[]):void 0}:function(m){return f(m,c)?r.apply(p,arguments):void 0}};e.extend(h.Shape,h._eventsProcessing);h.Container={_init:function(){this.children=[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(c){var f=c.getParent();f&&f.remove(c,!0);this.children.push(c);return c._setParent(this,this._getRealMatrix())},
remove:function(c,f){for(var p=0;p<this.children.length;++p)if(this.children[p]==c){f||(c.parent=null,c.parentMatrix=null);b(this.children,p);break}return this},clear:function(c){for(var f,p=0;p<this.children.length;++p)f=this.children[p],f.parent=null,f.parentMatrix=null,c&&f.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var c=null;k.forEach(this.children,function(f){var p=f.getBoundingBox();p&&((f=f.getTransform())&&(p=n.multiplyRectangle(f,p)),c?(c.x=Math.min(c.x,
p.x),c.y=Math.min(c.y,p.y),c.endX=Math.max(c.endX,p.x+p.width),c.endY=Math.max(c.endY,p.y+p.height)):c={x:p.x,y:p.y,endX:p.x+p.width,endY:p.y+p.height})});c&&(c.width=c.endX-c.x,c.height=c.endY-c.y);return c}return null},_moveChildToFront:function(c){for(var f=0;f<this.children.length;++f)if(this.children[f]==c){b(this.children,f);this.children.push(c);break}return this},_moveChildToBack:function(c){for(var f=0;f<this.children.length;++f)if(this.children[f]==c){b(this.children,f);this.children.unshift(c);
break}return this}};h.Surface=t("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){k.forEach(this._nodes,a.destroy);this._nodes=[];k.forEach(this._events,function(c){c&&c.remove()});this._events=[];this.rawNode=null;if(l("ie"))for(;this._parent.lastChild;)a.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},
isLoaded:!0,onLoad:function(c){},whenLoaded:function(c,f){var p=e.hitch(c,f);if(this.isLoaded)p(this);else q.once(this,"load",function(r){p(r)})}});e.extend(h.Surface,h._eventsProcessing);h.Rect=t("dojox.gfx.shape.Rect",h.Shape,{constructor:function(c){this.shape=g.getDefault("Rect");this.rawNode=c},getBoundingBox:function(){return this.shape}});h.Ellipse=t("dojox.gfx.shape.Ellipse",h.Shape,{constructor:function(c){this.shape=g.getDefault("Ellipse");this.rawNode=c},getBoundingBox:function(){if(!this.bbox){var c=
this.shape;this.bbox={x:c.cx-c.rx,y:c.cy-c.ry,width:2*c.rx,height:2*c.ry}}return this.bbox}});h.Circle=t("dojox.gfx.shape.Circle",h.Shape,{constructor:function(c){this.shape=g.getDefault("Circle");this.rawNode=c},getBoundingBox:function(){if(!this.bbox){var c=this.shape;this.bbox={x:c.cx-c.r,y:c.cy-c.r,width:2*c.r,height:2*c.r}}return this.bbox}});h.Line=t("dojox.gfx.shape.Line",h.Shape,{constructor:function(c){this.shape=g.getDefault("Line");this.rawNode=c},getBoundingBox:function(){if(!this.bbox){var c=
this.shape;this.bbox={x:Math.min(c.x1,c.x2),y:Math.min(c.y1,c.y2),width:Math.abs(c.x2-c.x1),height:Math.abs(c.y2-c.y1)}}return this.bbox}});h.Polyline=t("dojox.gfx.shape.Polyline",h.Shape,{constructor:function(c){this.shape=g.getDefault("Polyline");this.rawNode=c},setShape:function(c,f){c&&c instanceof Array?(this.inherited(arguments,[{points:c}]),f&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[c]);return this},_normalizePoints:function(){var c=
this.shape.points,f=c&&c.length;if(f&&"number"==typeof c[0]){for(var p=[],r=0;r<f;r+=2)p.push({x:c[r],y:c[r+1]});this.shape.points=p}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var c=this.shape.points,f=c.length,p=c[0],r=p.x,m=p.y,v=p.x,z=p.y,A=1;A<f;++A)p=c[A],r>p.x&&(r=p.x),v<p.x&&(v=p.x),m>p.y&&(m=p.y),z<p.y&&(z=p.y);this.bbox={x:r,y:m,width:v-r,height:z-m}}return this.bbox}});h.Image=t("dojox.gfx.shape.Image",h.Shape,{constructor:function(c){this.shape=g.getDefault("Image");
this.rawNode=c},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});h.Text=t(h.Shape,{constructor:function(c){this.fontStyle=null;this.shape=g.getDefault("Text");this.rawNode=c},getFont:function(){return this.fontStyle},setFont:function(c){this.fontStyle="string"==typeof c?g.splitFontString(c):g.makeParameters(g.defaultFont,c);this._setFont();return this},getBoundingBox:function(){var c=null;this.getShape().text&&(c=g._base._computeTextBoundingBox(this));
return c}});h.Creator={createShape:function(c){switch(c.type){case g.defaultPath.type:return this.createPath(c);case g.defaultRect.type:return this.createRect(c);case g.defaultCircle.type:return this.createCircle(c);case g.defaultEllipse.type:return this.createEllipse(c);case g.defaultLine.type:return this.createLine(c);case g.defaultPolyline.type:return this.createPolyline(c);case g.defaultImage.type:return this.createImage(c);case g.defaultText.type:return this.createText(c);case g.defaultTextPath.type:return this.createTextPath(c)}return null},
createGroup:function(){return this.createObject(g.Group)},createRect:function(c){return this.createObject(g.Rect,c)},createEllipse:function(c){return this.createObject(g.Ellipse,c)},createCircle:function(c){return this.createObject(g.Circle,c)},createLine:function(c){return this.createObject(g.Line,c)},createPolyline:function(c){return this.createObject(g.Polyline,c)},createImage:function(c){return this.createObject(g.Image,c)},createText:function(c){return this.createObject(g.Text,c)},createPath:function(c){return this.createObject(g.Path,
c)},createTextPath:function(c){return this.createObject(g.TextPath,{}).setText(c)},createObject:function(c,f){return null}};return h})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(g,e,t,u,l){l=t("dojox.gfx.path.Path",l.Shape,{constructor:function(q){this.shape=e.clone(g.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=q;this.segmented=!1},setAbsoluteMode:function(q){this._confirmSegmented();
this.absolute="string"==typeof q?"absolute"==q:q;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var q=this.bbox,k=this._getRealMatrix();this.bbox=null;for(var a=0,d=this.segments.length;a<d;++a)this._updateWithSegment(this.segments[a],
k);k=this.bbox;this.bbox=q;return this.tbbox=k?[{x:k.l,y:k.t},{x:k.r,y:k.t},{x:k.r,y:k.b},{x:k.l,y:k.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(q,k,a){a&&(k=u.multiplyPoint(a,q,k),q=k.x,k=k.y);this.bbox&&"l"in this.bbox?(this.bbox.l>q&&(this.bbox.l=q),this.bbox.r<q&&(this.bbox.r=q),this.bbox.t>k&&(this.bbox.t=k),this.bbox.b<k&&(this.bbox.b=k)):
this.bbox={l:q,b:k,r:q,t:k}},_updateWithSegment:function(q,k){var a=q.args,d=a.length,n;switch(q.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(n=0;n<d;n+=2)this._updateBBox(a[n],a[n+1],k);this.last.x=a[d-2];this.last.y=a[d-1];this.absolute=!0;break;case "H":for(n=0;n<d;++n)this._updateBBox(a[n],this.last.y,k);this.last.x=a[d-1];this.absolute=!0;break;case "V":for(n=0;n<d;++n)this._updateBBox(this.last.x,a[n],k);this.last.y=a[d-1];this.absolute=!0;break;case "m":n=0;"x"in this.last||
(this._updateBBox(this.last.x=a[0],this.last.y=a[1],k),n=2);for(;n<d;n+=2)this._updateBBox(this.last.x+=a[n],this.last.y+=a[n+1],k);this.absolute=!1;break;case "l":case "t":for(n=0;n<d;n+=2)this._updateBBox(this.last.x+=a[n],this.last.y+=a[n+1],k);this.absolute=!1;break;case "h":for(n=0;n<d;++n)this._updateBBox(this.last.x+=a[n],this.last.y,k);this.absolute=!1;break;case "v":for(n=0;n<d;++n)this._updateBBox(this.last.x,this.last.y+=a[n],k);this.absolute=!1;break;case "c":for(n=0;n<d;n+=6)this._updateBBox(this.last.x+
a[n],this.last.y+a[n+1],k),this._updateBBox(this.last.x+a[n+2],this.last.y+a[n+3],k),this._updateBBox(this.last.x+=a[n+4],this.last.y+=a[n+5],k);this.absolute=!1;break;case "s":case "q":for(n=0;n<d;n+=4)this._updateBBox(this.last.x+a[n],this.last.y+a[n+1],k),this._updateBBox(this.last.x+=a[n+2],this.last.y+=a[n+3],k);this.absolute=!1;break;case "A":for(n=0;n<d;n+=7)this._updateBBox(a[n+5],a[n+6],k);this.last.x=a[d-2];this.last.y=a[d-1];this.absolute=!0;break;case "a":for(n=0;n<d;n+=7)this._updateBBox(this.last.x+=
a[n+5],this.last.y+=a[n+6],k);this.absolute=!1}q=[q.action];for(n=0;n<d;++n)q.push(g.formatNumber(a[n],!0));if("string"==typeof this.shape.path)this.shape.path+=q.join("");else for(n=0,d=q.length;n<d;++n)this.shape.path.push(q[n])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(q,k){this.tbbox=null;var a=this._validSegments[q.toLowerCase()];"number"==typeof a&&(a?k.length>=a&&(q={action:q,args:k.slice(0,k.length-k.length%a)},this.segments.push(q),this._updateWithSegment(q)):
(q={action:q,args:[]},this.segments.push(q),this._updateWithSegment(q)))},_collectArgs:function(q,k){for(var a=0;a<k.length;++a){var d=k[a];"boolean"==typeof d?q.push(d?1:0):"number"==typeof d?q.push(d):d instanceof Array?this._collectArgs(q,d):"x"in d&&"y"in d&&q.push(d.x,d.y)}},moveTo:function(){this._confirmSegmented();var q=[];this._collectArgs(q,arguments);this._pushSegment(this.absolute?"M":"m",q);return this},lineTo:function(){this._confirmSegmented();var q=[];this._collectArgs(q,arguments);
this._pushSegment(this.absolute?"L":"l",q);return this},hLineTo:function(){this._confirmSegmented();var q=[];this._collectArgs(q,arguments);this._pushSegment(this.absolute?"H":"h",q);return this},vLineTo:function(){this._confirmSegmented();var q=[];this._collectArgs(q,arguments);this._pushSegment(this.absolute?"V":"v",q);return this},curveTo:function(){this._confirmSegmented();var q=[];this._collectArgs(q,arguments);this._pushSegment(this.absolute?"C":"c",q);return this},smoothCurveTo:function(){this._confirmSegmented();
var q=[];this._collectArgs(q,arguments);this._pushSegment(this.absolute?"S":"s",q);return this},qCurveTo:function(){this._confirmSegmented();var q=[];this._collectArgs(q,arguments);this._pushSegment(this.absolute?"Q":"q",q);return this},qSmoothCurveTo:function(){this._confirmSegmented();var q=[];this._collectArgs(q,arguments);this._pushSegment(this.absolute?"T":"t",q);return this},arcTo:function(){this._confirmSegmented();var q=[];this._collectArgs(q,arguments);this._pushSegment(this.absolute?"A":
"a",q);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var q=this.shape.path;this.shape.path=[];this._setPath(q);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(q){q=e.isArray(q)?q:q.match(g.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(q){for(var k="",a=[],d=q.length,n=0;n<d;++n){var b=q[n],h=parseFloat(b);isNaN(h)?(k&&this._pushSegment(k,
a),a=[],k=b):a.push(h)}this._pushSegment(k,a)}},setShape:function(q){this.inherited(arguments,["string"==typeof q?{path:q}:q]);this.segmented=!1;this.segments=[];g.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});t=t("dojox.gfx.path.TextPath",l,{constructor:function(q){"text"in this||(this.text=e.clone(g.defaultTextPath));"fontStyle"in this||(this.fontStyle=e.clone(g.defaultFont))},getText:function(){return this.text},setText:function(q){this.text=g.makeParameters(this.text,
"string"==typeof q?{text:q}:q);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(q){this.fontStyle="string"==typeof q?g.splitFontString(q):g.makeParameters(g.defaultFont,q);this._setFont();return this}});return g.path={Path:l,TextPath:t}})},"dojox/gfx/filters":function(){define(["dojo/_base/lang","dojo/_base/array"],function(g,e){var t={},u={x:"0%",y:"0%",width:"100%",height:"100%"},l={};t.createFilter=function(h,c){h=g.mixin({},u,h);h.primitives||(h.primitives=
[]);c&&Array.prototype.push.apply(h.primitives,c);return h};var q=function(h,c,f){c instanceof Array&&(f=c,c=null);c=g.mixin({},c);c.children=f;c.tag=h;return c};e.forEach("feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feFlood feGaussianBlur feImage feMorphology feOffset feSpecularLighting feTile feTurbulence feDistantLight fePointLight feSpotLight feMergeNode feFuncA feFuncR feFuncG feFuncB".split(" "),function(h){t[h]=function(c,f){return q(h,
c,f)}});t.feMerge=function(h,c){if("string"===typeof h){for(var f=[],p=0;p<arguments.length;++p)f.push(t.feMergeNode({"in":arguments[p]}));return q("feMerge",{},f)}return q("feMerge",h,c)};var k=t.createFilter;l.convolutions=[k({_gfxName:"boxBlur3"},[t.feConvolveMatrix({"in":"SourceGraphic",order:3,divisor:9,kernelMatrix:"1,1,1,1,1,1,1,1,1"})]),k({_gfxName:"boxBlur5"},[t.feConvolveMatrix({"in":"SourceGraphic",order:5,divisor:25,kernelMatrix:"1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1"})]),
k({_gfxName:"verticalEdges",filterUnits:"objectBoundingBox"},[t.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 0 1 -1 0 1 -1 0 1"}),t.feComponentTransfer({"in":"kernel"},[t.feFuncA({type:"table",tableValues:"1,1"})])]),k({_gfxName:"horizontalEdges",filterUnits:"objectBoundingBox"},[t.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"1 1 1 0 0 0 -1 -1 -1"}),t.feComponentTransfer({"in":"kernel"},[t.feFuncA({type:"table",
tableValues:"1,1"})])]),k({_gfxName:"allEdges3",filterUnits:"objectBoundingBox"},[t.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 -1 -1 -1 8 -1 -1 -1 -1"}),t.feComponentTransfer({"in":"kernel"},[t.feFuncA({type:"table",tableValues:"1,1"})])]),k({_gfxName:"edgeEnhance",filterUnits:"objectBoundingBox"},[t.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:-1,kernelMatrix:"0 1 0 1 -5 1 0 1 0"}),t.feComponentTransfer({"in":"kernel"},[t.feFuncA({type:"table",
tableValues:"1,1"})])])];e.forEach(l.convolutions,function(h){g.mixin(h,u)});l.shadows=[k({_gfxName:"fastSmallDropShadow"},[t.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),t.feOffset({dx:3,dy:3,result:"offsetBlur"}),t.feMerge("offsetBlur","SourceGraphic")]),k({_gfxName:"fastDropShadow"},[t.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),
t.feOffset({dx:5,dy:5,result:"offsetBlur"}),t.feMerge("offsetBlur","SourceGraphic")]),k({_gfxName:"fastDropShadowLight"},[t.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.4,0"}),t.feOffset({dx:5,dy:5,result:"offsetBlur"}),t.feMerge("offsetBlur","SourceGraphic")]),k({_gfxName:"dropShadow"},[t.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4}),t.feOffset({dx:5,dy:5,result:"offsetBlur"}),t.feMerge("offsetBlur",
"SourceGraphic")]),k({_gfxName:"dropShadowLight"},[t.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4,result:"blur"}),t.feComponentTransfer({"in":"blur",result:"lessblur"},[t.feFuncA({type:"linear",slope:.5})]),t.feOffset({"in":"lessblur",dx:5,dy:5,result:"offsetBlur"}),t.feMerge("offsetBlur","SourceGraphic")]),k({_gfxName:"smallDropShadow"},[t.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3}),t.feOffset({dx:2,dy:2,result:"offsetBlur"}),t.feMerge("offsetBlur","SourceGraphic")]),k({_gfxName:"smallDropShadowLight"},
[t.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3,result:"blur"}),t.feComponentTransfer({"in":"blur",result:"lessblur"},[t.feFuncA({type:"linear",slope:.5})]),t.feOffset({"in":"lessblur",dx:2,dy:2,result:"offsetBlur"}),t.feMerge("offsetBlur","SourceGraphic")])];var a={x:"-10%",y:"-10%",width:"125%",height:"125%"};e.forEach(l.shadows,function(h){g.mixin(h,a)});l.blurs=[k({_gfxName:"blur1",x:"-5%",y:"-5%",width:"110%",height:"110%"},[t.feGaussianBlur({"in":"SourceGraphic",stdDeviation:1})]),k({_gfxName:"blur2",
x:"-15%",y:"-15%",width:"130%",height:"130%"},[t.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2})]),k({_gfxName:"blur4",x:"-15%",y:"-15%",width:"130%",height:"130%"},[t.feGaussianBlur({"in":"SourceGraphic",stdDeviation:4})]),k({_gfxName:"blur8",x:"-20%",y:"-20%",width:"140%",height:"140%"},[t.feGaussianBlur({"in":"SourceGraphic",stdDeviation:8})]),k({_gfxName:"glow",x:"-10%",y:"-10%",width:"120%",height:"120%"},[t.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2}),t.feComponentTransfer([t.feFuncA({type:"linear",
slope:10})])])];l.colors=[k({_gfxName:"negate"},[t.feComponentTransfer([t.feFuncR({type:"table",tableValues:"1,0"}),t.feFuncG({type:"table",tableValues:"1,0"}),t.feFuncB({type:"table",tableValues:"1,0"})])]),k({_gfxName:"sepia"},[t.feColorMatrix({result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"}),t.feComponentTransfer({"in":"grey"},[t.feFuncR({type:"linear",slope:.5,intercept:.5}),t.feFuncB({type:"table",tableValues:"0,0"})])]),k({_gfxName:"grayscale"},
[t.feColorMatrix({values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"})]),k({_gfxName:"showRed"},[t.feComponentTransfer([t.feFuncG({type:"table",tableValues:"0,0"}),t.feFuncB({type:"table",tableValues:"0,0"})])]),k({_gfxName:"showGreen"},[t.feComponentTransfer([t.feFuncR({type:"table",tableValues:"0,0"}),t.feFuncB({type:"table",tableValues:"0,0"})])]),k({_gfxName:"showBlue"},[t.feComponentTransfer([t.feFuncR({type:"table",tableValues:"0,0"}),t.feFuncG({type:"table",
tableValues:"0,0"})])]),k({_gfxName:"hueRotate60"},[t.feColorMatrix({type:"hueRotate",values:60})]),k({_gfxName:"hueRotate120"},[t.feColorMatrix({type:"hueRotate",values:120})]),k({_gfxName:"hueRotate180"},[t.feColorMatrix({type:"hueRotate",values:180})]),k({_gfxName:"hueRotate270"},[t.feColorMatrix({type:"hueRotate",values:270})])];e.forEach(l.colors,function(h){g.mixin(h,u)});l.miscs=[k({_gfxName:"thinEmbossDropShadow",x:"-5%",y:"-5%",width:"120%",height:"120%"},[t.feGaussianBlur({"in":"SourceAlpha",
stdDeviation:1,result:"blur"}),t.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),t.feSpecularLighting({"in":"blur",surfaceScale:8,specularConstant:1,specularExponent:12,result:"specOut"},[t.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),t.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),t.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),t.feMerge("offsetBlur","litPaint")]),k({_gfxName:"embossDropShadow",
x:"-5%",y:"-5%",width:"120%",height:"120%"},[t.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"4",result:"blur"}),t.feOffset({"in":"blur",dx:4,dy:4,result:"offsetBlur"}),t.feSpecularLighting({"in":"blur",surfaceScale:5,specularConstant:.75,specularExponent:20,"lighting-color":"#bbbbbb",result:"specOut"},[t.fePointLight({x:-5E3,y:-1E4,z:2E4})]),t.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),t.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,
k2:1,k3:1,k4:0,result:"litPaint"}),t.feMerge("offsetBlur","litPaint")]),k({_gfxName:"largeEmbossDropShadow",x:"-20%",y:"-20%",width:"140%",height:"140%"},[t.feGaussianBlur({"in":"SourceAlpha",stdDeviation:5,result:"blur"}),t.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),t.feSpecularLighting({"in":"blur",surfaceScale:8,specularConstant:1,specularExponent:12,result:"spec"},[t.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),t.feComposite({"in":"spec",in2:"SourceGraphic",operator:"in",result:"specOut"}),
t.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),t.feMerge("offsetBlur","litPaint")]),k({_gfxName:"thinEmbossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[t.feGaussianBlur({"in":"SourceAlpha",stdDeviation:1,result:"blur"}),t.feComponentTransfer({"in":"blur",result:"lessblur"},[t.feFuncA({type:"linear",slope:"0.5"})]),t.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),t.feSpecularLighting({"in":"lessblur",surfaceScale:8,
specularConstant:1,specularExponent:"12",result:"specOut"},[t.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),t.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),t.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0}),t.feMerge("offsetBlur","litPaint")]),k({_gfxName:"embossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[t.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",result:"blur"}),t.feComponentTransfer({"in":"blur",
result:"lessblur"},[t.feFuncA({type:"linear",slope:"0.5"})]),t.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),t.feSpecularLighting({"in":"lessblur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[t.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),t.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),t.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"}),t.feMerge("offsetBlur",
"litPaint")]),k({_gfxName:"largeEmbossDropShadowLight",x:"-20%",y:"-20%",width:"140%",height:"140%"},[t.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"5",result:"blur"}),t.feComponentTransfer({"in":"blur",result:"lessblur"},[t.feFuncA({type:"linear",slope:"0.5"})]),t.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),t.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"spec"},[t.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),t.feComposite({"in":"spec",
in2:"SourceGraphic",operator:"in",result:"specOut"}),t.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"}),t.feMerge("offsetBlur","litPaint")]),k({_gfxName:"fuzzy",x:"-10%",y:"-10%",width:"120%",height:"120%"},[t.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"turb2"}),t.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"20",xChannelSelector:"R",yChannelSelector:"G"})]),k({_gfxName:"veryFuzzy",
x:"-20%",y:"-20%",width:"140%",height:"140%"},[t.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"turb2"}),t.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"35",xChannelSelector:"R",yChannelSelector:"G"})]),k({_gfxName:"melting",x:"-10%",y:"-10%",width:"120%",height:"120%"},[t.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"2",result:"turb"}),t.feDisplacementMap({result:"bended","in":"SourceGraphic",in2:"turb",scale:"25",xChannelSelector:"R",
yChannelSelector:"G"}),t.feGaussianBlur({"in":"bended",stdDeviation:"1",result:"bb"}),t.feComponentTransfer({"in":"bb",result:"BendedSource"},[t.feFuncA({type:"linear",slope:10,intercept:"-1"})]),t.feComponentTransfer({"in":"BendedSource",result:"BendedAlpha"},[t.feFuncR({type:"linear",slope:"0",intercept:"0"}),t.feFuncG({type:"linear",slope:"0",intercept:"0"}),t.feFuncB({type:"linear",slope:"0",intercept:"0"}),t.feFuncA({type:"linear",slope:"1",intercept:"0"})]),t.feGaussianBlur({"in":"BendedAlpha",
stdDeviation:"1",result:"blur"}),t.feSpecularLighting({"in":"blur","lighting-color":"rgb(80%, 80%, 80%)",surfaceScale:"5",specularConstant:"1",specularExponent:"10",result:"specularOut"},[t.fePointLight({x:"-5000",y:"-10000",z:"20000"})]),t.feComposite({"in":"specularOut",in2:"BendedAlpha",operator:"in",result:"specularOut"}),t.feComposite({"in":"BendedSource",in2:"specularOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"})]),k({_gfxName:"impressionist",x:"0%",y:"0%",width:"100%",
height:"100%"},[t.feMorphology({"in":"SourceGraphic",operator:"dilate",radius:"2"})]),k({_gfxName:"holes",x:"0%",y:"0%",width:"100%",height:"100%"},[t.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"texture"}),t.feComponentTransfer({"in":"texture",result:"holes"},[t.feFuncA({type:"discrete",tableValues:"0,1"})]),t.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})]),k({_gfxName:"holesComplement",x:"0%",y:"0%",width:"100%",height:"100%"},[t.feTurbulence({type:"fractalNoise",
baseFrequency:"0.1",numOctaves:"1",result:"texture"}),t.feComponentTransfer({"in":"texture",result:"holes"},[t.feFuncA({type:"discrete",tableValues:"1,0"})]),t.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})])];l.reliefs=[k({_gfxName:"bumpIn",x:"0%",y:"0%",width:"100%",height:"100%"},[t.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),t.feComponentTransfer({"in":"lumalpha",result:"invertedalpha"},[t.feFuncA({type:"table",tableValues:"1,0"})]),t.feDiffuseLighting({"in":"invertedalpha",
"lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},[t.feDistantLight({azimuth:"135",elevation:"60"})]),t.feSpecularLighting({"in":"invertedalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[t.feDistantLight({azimuth:"135",elevation:"30"})]),t.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),k({_gfxName:"bumpOut",x:"0%",y:"0%",width:"100%",height:"100%"},[t.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),
t.feDiffuseLighting({"in":"lumalpha","lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},[t.feDistantLight({azimuth:"135",elevation:"60"})]),t.feSpecularLighting({"in":"lumalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[t.feDistantLight({azimuth:"135",elevation:"30"})]),t.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),k({_gfxName:"thinEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[t.feGaussianBlur({"in":"SourceAlpha",
stdDeviation:"1",result:"blur"}),t.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[t.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),t.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),t.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),k({_gfxName:"emboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[t.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",
result:"blur"}),t.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[t.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),t.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),t.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),k({_gfxName:"largeEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[t.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"5",result:"blur"}),
t.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[t.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),t.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),t.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})])];l.textures=[k({_gfxName:"paper",x:"0%",y:"0%",width:"100%",height:"100%"},[t.feTurbulence({type:"turbulence",baseFrequency:"0.01",numOctaves:"5",result:"texture"}),
t.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[t.feDistantLight({azimuth:"135",elevation:"60"})]),t.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),k({_gfxName:"swirl",x:"0%",y:"0%",width:"100%",height:"100%"},[t.feTurbulence({type:"turbulence",baseFrequency:"0.05",numOctaves:"1",result:"texture"}),t.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[t.feDistantLight({azimuth:"135",elevation:"60"})]),
t.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),k({_gfxName:"swirl2",x:"0%",y:"0%",width:"100%",height:"100%"},[t.feTurbulence({type:"turbulence",baseFrequency:"0.15",numOctaves:"1",result:"texture"}),t.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[t.feDistantLight({azimuth:"135",elevation:"60"})]),t.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),k({_gfxName:"gold",
x:"-5%",y:"-5%",width:"115%",height:"110%"},[t.feTurbulence({baseFrequency:"0.2",numOctaves:"1",type:"turbulence",result:"turb"}),t.feComposite({"in":"SourceGraphic",in2:"turb",operator:"arithmetic",k2:"0.6",k3:"0.4",result:"turb"}),t.feComposite({"in":"turb",in2:"SourceGraphic",operator:"in",result:"bump"}),t.feDiffuseLighting({"in":"turb",surfaceScale:"6.0","lighting-color":"rgb(60%, 50%, 0%)",diffuseConstant:"1.0",result:"diffuse"},[t.feDistantLight({azimuth:"135",elevation:"60"})]),t.feSpecularLighting({"in":"bump",
surfaceScale:"6.0",specularConstant:"1.0",specularExponent:"10.0",result:"specularOut"},[t.feDistantLight({azimuth:"135",elevation:"60"})]),t.feComposite({"in":"specularOut",in2:"SourceGraphic",operator:"in",result:"specularOut"}),t.feComposite({"in":"bump",in2:"diffuse",operator:"arithmetic",k1:"0.7",k2:"0.3",result:"litPaint"}),t.feComposite({"in":"litPaint",in2:"specularOut",operator:"arithmetic",k2:"1.0",k3:"0.7",result:"litPaint"})])];for(var d in l)if(l.hasOwnProperty(d)){t[d]={};for(var n=
l[d],b=0;b<n.length;++b)(function(){var h=n[b];t[d][h._gfxName]=function(c){return g.delegate(h,c)}})()}return t})},"dojox/gfx/svgext":function(){define(["dojo/dom","dojo/_base/array","dojo/_base/window","./_base","./svg"],function(g,e,t,u,l){function q(a,d){var n=d.ownerDocument.createElementNS(l.xmlns.svg,a.tag);d.appendChild(n);for(var b in a)b in k||n.setAttribute(b,a[b]);a.children&&e.forEach(a.children,function(h){q(h,n)});return n}t=u.svgext={};var k={primitives:null,tag:null,children:null};
l.Shape.extend({addRenderingOption:function(a,d){this.rawNode.setAttribute(a,d);return this},setFilter:function(a){if(!a)return this.rawNode.removeAttribute("filter"),this.filter=null,this;this.filter=a;a.id=a.id||u._base._getUniqueId();var d=g.byId(a.id);if(!d){d=this.rawNode.ownerDocument.createElementNS(l.xmlns.svg,"filter");d.setAttribute("filterUnits","userSpaceOnUse");for(var n in a)n in k||d.setAttribute(n,a[n]);e.forEach(a.primitives,function(b){q(b,d)});(n=this._getParentSurface())&&n.defNode.appendChild(d)}this.rawNode.setAttribute("filter",
"url(#"+a.id+")");return this},getFilter:function(){return this.filter}});return t})},"dojox/gfx/_gfxBidiSupport":function(){define("./_base dojo/_base/lang dojo/_base/sniff dojo/dom dojo/_base/html dojo/_base/array ./utils ./shape ./path dojox/string/BidiEngine".split(" "),function(g,e,t,u,l,q,k,a,d,n){function b(f,p){var r=h(p);r&&g.utils.forEach(f,function(m){if(m instanceof g.Surface||m instanceof g.Group)m.textDir=r;m instanceof g.Text&&m.setShape({textDir:r});m instanceof g.TextPath&&m.setText({textDir:r})},
f);return f}function h(f){var p=["ltr","rtl","auto"];return f&&(f=f.toLowerCase(),0>q.indexOf(p,f))?null:f}e.getObject("dojox.gfx._gfxBidiSupport",!0);switch(g.renderer){case "vml":g.isVml=!0;break;case "svg":g.isSvg=!0;g.svg.useSvgWeb&&(g.isSvgWeb=!0);break;case "silverlight":g.isSilverlight=!0;break;case "canvas":case "canvasWithEvents":g.isCanvas=!0}var c=new n;e.extend(g.shape.Surface,{textDir:"",setTextDir:function(f){b(this,f)},getTextDir:function(){return this.textDir}});e.extend(g.Group,{textDir:"",
setTextDir:function(f){b(this,f)},getTextDir:function(){return this.textDir}});e.extend(g.Text,{textDir:"",formatText:function(f,p){if(p&&f&&1<f.length){var r="ltr";if("auto"==p){if(g.isVml)return f;p=c.checkContextual(f)}if(g.isVml)return r=c.checkContextual(f),p!=r?"rtl"==p?c.hasBidiChar(f)?"\u200f\u200f"+f:c.bidiTransform(f,"IRNNN","ILNNN"):"\u200e"+f:f;if(g.isSvgWeb)return"rtl"==p?c.bidiTransform(f,"IRNNN","ILNNN"):f;if(g.isSilverlight)return"rtl"==p?c.bidiTransform(f,"IRNNN","VLYNN"):c.bidiTransform(f,
"ILNNN","VLYNN");if(g.isCanvas)return"rtl"==p?"\u202b"+f+"\u202c":"\u202a"+f+"\u202c";if(g.isSvg)return 4>t("ff")?"rtl"==p?c.bidiTransform(f,"IRYNN","VLNNN"):c.bidiTransform(f,"ILYNN","VLNNN"):"\u200e"+("rtl"==p?"\u202b":"\u202a")+f+"\u202c"}return f},bidiPreprocess:function(f){return f}});e.extend(g.TextPath,{textDir:"",formatText:function(f,p){if(p&&f&&1<f.length){var r="ltr";if("auto"==p){if(g.isVml)return f;p=c.checkContextual(f)}if(g.isVml)return r=c.checkContextual(f),p!=r?"rtl"==p?c.hasBidiChar(f)?
"\u200f\u200f"+f:c.bidiTransform(f,"IRNNN","ILNNN"):"\u200e"+f:f;if(g.isSvgWeb)return"rtl"==p?c.bidiTransform(f,"IRNNN","ILNNN"):f;g.isSvg&&(f=t("opera")||4<=t("ff")?"\u200e"+("rtl"==p?"\u202b":"\u202a")+f+"\u202c":"rtl"==p?c.bidiTransform(f,"IRYNN","VLNNN"):c.bidiTransform(f,"ILYNN","VLNNN"))}return f},bidiPreprocess:function(f){f&&"string"==typeof f&&(this.origText=f,f=this.formatText(f,this.textDir));return f}});k=function(f,p,r,m){var v=f.prototype[p];f.prototype[p]=function(){var z;r&&(z=r.apply(this,
arguments));z=v.call(this,z);m&&(z=m.call(this,z,arguments));return z}};a=function(f){f&&(f.textDir&&(f.textDir=h(f.textDir)),f.text&&f.text instanceof Array&&(f.text=f.text.join(",")));!f||void 0==f.text&&!f.textDir||this.textDir==f.textDir&&f.text==this.origText||(this.origText=void 0!=f.text?f.text:this.origText,f.textDir&&(this.textDir=f.textDir),f.text=this.formatText(this.origText,this.textDir));return this.bidiPreprocess(f)};k(g.Text,"setShape",a,null);k(g.TextPath,"setText",a,null);a=function(f){(f=
e.clone(f))&&this.origText&&(f.text=this.origText);return f};k(g.Text,"getShape",null,a);k(g.TextPath,"getText",null,a);a=function(f,p){var r;p&&p[0]&&(r=h(p[0]));f.setTextDir(r?r:this.textDir);return f};k(g.Surface,"createGroup",null,a);k(g.Group,"createGroup",null,a);a=function(f){if(f){var p=f.textDir?h(f.textDir):this.textDir;p&&(f.textDir=p)}return f};k(g.Surface,"createText",a,null);k(g.Surface,"createTextPath",a,null);k(g.Group,"createText",a,null);k(g.Group,"createTextPath",a,null);g.createSurface=
function(f,p,r,m){p=g[g.renderer].createSurface(f,p,r);m=h(m);if(g.isSvgWeb)return p.textDir=m?m:l.style(u.byId(f),"direction"),p;if(g.isVml||g.isSvg||g.isCanvas)p.textDir=m?m:l.style(p.rawNode,"direction");g.isSilverlight&&(p.textDir=m?m:l.style(p._nodes[1],"direction"));return p};return g})},"dojox/gfx/utils":function(){define("dojo/_base/kernel dojo/_base/lang ./_base dojo/_base/html dojo/_base/array dojo/_base/window dojo/_base/json dojo/_base/Deferred dojo/_base/sniff require dojo/_base/config".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b){var h=t.utils={};e.mixin(h,{forEach:function(c,f,p){p=p||g.global;f.call(p,c);(c instanceof t.Surface||c instanceof t.Group)&&l.forEach(c.children,function(r){h.forEach(r,f,p)})},serialize:function(c){var f={},p;if((p=c instanceof t.Surface)||c instanceof t.Group){if(f.children=l.map(c.children,h.serialize),p)return f.children}else f.shape=c.getShape();c.getTransform&&(p=c.getTransform())&&(f.transform=p);c.getStroke&&(p=c.getStroke())&&(f.stroke=p);c.getFill&&(p=c.getFill())&&
(f.fill=p);c.getFont&&(p=c.getFont())&&(f.font=p);return f},toJson:function(c,f){return k.toJson(h.serialize(c),f)},deserialize:function(c,f){if(f instanceof Array)return l.map(f,e.hitch(null,h.deserialize,c));c="shape"in f?c.createShape(f.shape):c.createGroup();"transform"in f&&c.setTransform(f.transform);"stroke"in f&&c.setStroke(f.stroke);"fill"in f&&c.setFill(f.fill);"font"in f&&c.setFont(f.font);"children"in f&&l.forEach(f.children,e.hitch(null,h.deserialize,c));return c},fromJson:function(c,
f){return h.deserialize(c,k.fromJson(f))},toSvg:function(c){var f=new a;if("svg"===t.renderer)try{var p=h._cleanSvg(h._innerXML(c.rawNode));f.callback(p)}catch(m){f.errback(m)}else{h._initSvgSerializerDeferred||h._initSvgSerializer();var r=h.toJson(c);p=function(){try{var m=c.getDimensions(),v=m.width,z=m.height,A=h._gfxSvgProxy.document.createElement("div");h._gfxSvgProxy.document.body.appendChild(A);q.withDoc(h._gfxSvgProxy.document,function(){u.style(A,"width",v);u.style(A,"height",z)},this);h._gfxSvgProxy[dojox._scopeName].gfx.createSurface(A,
v,z).whenLoaded(null,function(D){try{h._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(D,r);var E=h._cleanSvg(A.innerHTML);D.clear();D.destroy();h._gfxSvgProxy.document.body.removeChild(A);f.callback(E)}catch(F){f.errback(F)}})}catch(D){f.errback(D)}};0<h._initSvgSerializerDeferred.fired?p():h._initSvgSerializerDeferred.addCallback(p)}return f},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){h._initSvgSerializerDeferred.callback(!0)},_initSvgSerializer:function(){if(!h._initSvgSerializerDeferred){h._initSvgSerializerDeferred=
new a;var c=q.doc.createElement("iframe");u.style(c,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});var f;d("ie")?c.onreadystatechange=function(){"complete"==c.contentWindow.document.readyState&&(c.onreadystatechange=function(){},f=setInterval(function(){c.contentWindow[g.scopeMap.dojo[1]._scopeName]&&c.contentWindow[g.scopeMap.dojox[1]._scopeName].gfx&&c.contentWindow[g.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(f),c.contentWindow.parent[g.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=
c.contentWindow,c.contentWindow.parent[g.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},50))}:c.onload=function(){c.onload=function(){};f=setInterval(function(){c.contentWindow[g.scopeMap.dojo[1]._scopeName]&&c.contentWindow[g.scopeMap.dojox[1]._scopeName].gfx&&c.contentWindow[g.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(f),c.contentWindow.parent[g.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=c.contentWindow,c.contentWindow.parent[g.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},
50)};var p=b.dojoxGfxSvgProxyFrameUrl||n.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html");c.setAttribute("src",p.toString());q.body().appendChild(c)}},_innerXML:function(c){return c.innerXML?c.innerXML:c.xml?c.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(c):null},_cleanSvg:function(c){c&&(-1==c.indexOf('xmlns\x3d"http://www.w3.org/2000/svg"')&&(c=c.substring(4,c.length),c='\x3csvg xmlns\x3d"http://www.w3.org/2000/svg"'+c),-1==c.indexOf('xmlns:xlink\x3d"http://www.w3.org/1999/xlink"')&&
(c=c.substring(4,c.length),c='\x3csvg xmlns:xlink\x3d"http://www.w3.org/1999/xlink"'+c),-1===c.indexOf("xlink:href")&&(c=c.replace(/href\s*=/g,"xlink:href\x3d")),c=c.replace(/<img\b([^>]*)>/gi,"\x3cimage $1 /\x3e"),c=c.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,""),c=c.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,""),c=c.replace(/[=]([^"']+?)(\s|>)/g,'\x3d"$1"$2'),c=c.replace(/\bstroke-opacity\w*\s*=\s*(['"])undefined\1/g,""));return c}});return h})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang",
"dojo/_base/declare","dojo/Stateful"],function(g,e,t){function u(ua,Ba,Aa,Ga,ya){var Ea=ua;void 0===Ba&&(Ba=ya.defInFormat);void 0===Aa&&(Aa=ya.defOutFormat);void 0===Ga&&(Ga=ya.defSwap);if(Ba!==Aa){var Fa=Ba.substring(0,1);var Ka=Ba.substring(1,4);var Ja=Aa.substring(0,1),Oa=Aa.substring(1,4);"C"===Ka.charAt(0)&&(Ka=l(Ea),Ka="ltr"===Ka||"rtl"===Ka?Ka.toUpperCase():"L"===Ba.charAt(2)?"LTR":"RTL",Ba=Fa+Ka);"C"===Oa.charAt(0)&&(Ka=l(Ea),"rtl"===Ka?Oa="RTL":"ltr"===Ka?(Ea=Ea.split(""),Ea.reverse(),Ka=
l(Ea.join("")),Oa=Ka.toUpperCase()):Oa="L"===Aa.charAt(2)?"LTR":"RTL",Aa=Ja+Oa)}if(Ba===Aa)return ua;Ja=Ba.substring(0,1);Ea=Ba.substring(1,4);Fa=Aa.substring(0,1);Oa=Aa.substring(1,4);ya.inFormat=Ba;ya.outFormat=Aa;ya.swap=Ga;if("L"===Ja&&"VLTR"===Aa){if("LTR"===Ea)return ya.dir=y,q(ua,ya);if("RTL"===Ea)return ya.dir=x,q(ua,ya)}if("V"===Ja&&"V"===Fa)return ya.dir="RTL"===Ea?x:y,a(ua,ya);if("L"===Ja&&"VRTL"===Aa)return ya.dir="LTR"===Ea?y:x,ua=q(ua,ya),a(ua);if("VLTR"===Ba&&"LLTR"===Aa)return ya.dir=
y,q(ua,ya);if("V"===Ja&&"L"===Fa&&Ea!==Oa)return ua=a(ua),"RTL"===Ea?u(ua,"LLTR","VLTR",Ga,ya):u(ua,"LRTL","VRTL",Ga,ya);if("VRTL"===Ba&&"LRTL"===Aa)return u(ua,"LRTL","VRTL",Ga,ya);if("L"===Ja&&"L"===Fa)return Ba=ya.swap,ya.swap=Ba.substr(0,1)+"N","RTL"===Ea?(ya.dir=x,ua=q(ua,ya),ya.swap="N"+Ba.substr(1,2),ya.dir=y,ua=q(ua,ya)):(ya.dir=y,ua=q(ua,ya),ya.swap="N"+Ba.substr(1,2),ua=u(ua,"VLTR","LRTL",ya.swap,ya)),ua}function l(ua){return(ua=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(ua))?
"z">=ua[0]?"ltr":"rtl":""}function q(ua,Ba){ua=ua.split("");var Aa=[];k(ua,Aa,Ba);if(0!==Ba.hiLevel&&Ba.swap.substr(0,1)!==Ba.swap.substr(1,2))for(var Ga=0;Ga<ua.length;Ga++)if(1===Aa[Ga]){var ya=Ga;b:{var Ea=void 0;for(var Fa=ua[Ga],Ka=0,Ja=B.length-1;Ka<=Ja;)if(Ea=Math.floor((Ka+Ja)/2),Fa<B[Ea][0])Ja=Ea-1;else if(Fa>B[Ea][0])Ka=Ea+1;else{Ea=B[Ea][1];break b}Ea=Fa}ua[ya]=Ea}b(2,ua,Aa,Ba);b(1,ua,Aa,Ba);A=Aa;return ua.join("")}function k(ua,Ba,Aa){var Ga=ua.length,ya=Aa.dir?ha:da,Ea=null,Fa=null,Ka=
null;Ea=0;Fa=Fa=null;var Ja=-1,Oa=Fa=null,Da=[],Na=[];Aa.hiLevel=Aa.dir;Aa.lastArabic=!1;Aa.hasUbatAl=!1;Aa.hasUbatB=!1;Aa.hasUbatS=!1;for(Fa=0;Fa<Ga;Fa++){Oa=Fa;Ka=ua[Fa].charCodeAt(0);var Pa=Ca[Ka>>8];Da[Oa]=Pa<ka?Pa:Ma[Pa-ka][Ka&255]}for(Oa=0;Oa<Ga;Oa++){Na[Oa]=Fa=h(ua,Da,Na,Oa,Aa);Ea=ya[Ea][Fa];Fa=Ea&240;Ea&=15;Ba[Oa]=Ka=ya[Ea][E];if(0<Fa){if(16===Fa)for(Fa=Ja;Fa<Oa;Fa++)Ba[Fa]=1;Ja=-1}if(Fa=ya[Ea][F])-1===Ja&&(Ja=Oa);else if(-1<Ja){for(Fa=Ja;Fa<Oa;Fa++)Ba[Fa]=Ka;Ja=-1}Da[Oa]===ia&&(Ba[Oa]=0);
Aa.hiLevel|=Ka}if(Aa.hasUbatS)for(ua=0;ua<Ga;ua++)if(Da[ua]===oa)for(Ba[ua]=Aa.dir,ya=ua-1;0<=ya;ya--)if(Da[ya]===wa)Ba[ya]=Aa.dir;else break}function a(ua,Ba){ua=ua.split("");if(Ba){var Aa=[];k(ua,Aa,Ba);A=Aa}ua.reverse();v.reverse();return ua.join("")}function d(ua){for(var Ba=0;Ba<fa.length;Ba++)if(ua>=fa[Ba]&&ua<=pa[Ba])return!0;return!1}function n(ua,Ba,Aa,Ga){for(;Ba*Aa<Ga&&f(ua[Ba]);)Ba+=Aa;return Ba*Aa<Ga&&d(ua[Ba])?!0:!1}function b(ua,Ba,Aa,Ga){if(!(Ga.hiLevel<ua))if(1!==ua||Ga.dir!==x||
Ga.hasUbatB){Ga=Ba.length;for(var ya=0,Ea,Fa,Ka;ya<Ga;){if(Aa[ya]>=ua){for(Ea=ya+1;Ea<Ga&&Aa[Ea]>=ua;)Ea++;for(Fa=Ea-1;ya<Fa;ya++,Fa--)Ka=Ba[ya],Ba[ya]=Ba[Fa],Ba[Fa]=Ka,Ka=v[ya],v[ya]=v[Fa],v[Fa]=Ka;ya=Ea}ya++}}else Ba.reverse(),v.reverse()}function h(ua,Ba,Aa,Ga,ya){return{UBAT_L:function(){ya.lastArabic=!1;return P},UBAT_R:function(){ya.lastArabic=!1;return aa},UBAT_ON:function(){return S},UBAT_AN:function(){return X},UBAT_EN:function(){return ya.lastArabic?X:ea},UBAT_AL:function(){ya.lastArabic=
!0;ya.hasUbatAl=!0;return aa},UBAT_WS:function(){return S},UBAT_CS:function(){var Ea,Fa;if(1>Ga||Ga+1>=Ba.length||(Ea=Aa[Ga-1])!==ea&&Ea!==X||(Fa=Ba[Ga+1])!==ea&&Fa!==X)return S;ya.lastArabic&&(Fa=X);return Fa===Ea?Fa:S},UBAT_ES:function(){return(0<Ga?Aa[Ga-1]:ia)===ea&&Ga+1<Ba.length&&Ba[Ga+1]===ea?ea:S},UBAT_ET:function(){if(0<Ga&&Aa[Ga-1]===ea)return ea;if(ya.lastArabic)return S;for(var Ea=Ga+1,Fa=Ba.length;Ea<Fa&&Ba[Ea]===Ha;)Ea++;return Ea<Fa&&Ba[Ea]===ea?ea:S},UBAT_NSM:function(){if("VLTR"===
ya.inFormat){for(var Ea=Ba.length,Fa=Ga+1;Fa<Ea&&Ba[Fa]===R;)Fa++;if(Fa<Ea&&(Ea=ua[Ga],Fa=Ba[Fa],(1425<=Ea&&2303>=Ea||64286===Ea)&&(Fa===aa||Fa===qa)))return aa}return 1>Ga||Ba[Ga-1]===ia?S:Aa[Ga-1]},UBAT_B:function(){ya.lastArabic=!0;ya.hasUbatB=!0;return ya.dir},UBAT_S:function(){ya.hasUbatS=!0;return S},UBAT_LRE:function(){ya.lastArabic=!1;return S},UBAT_RLE:function(){ya.lastArabic=!1;return S},UBAT_LRO:function(){ya.lastArabic=!1;return S},UBAT_RLO:function(){ya.lastArabic=!1;return S},UBAT_PDF:function(){ya.lastArabic=
!1;return S},UBAT_BN:function(){return S}}[T[Ba[Ga]]]()}function c(ua,Ba){for(var Aa=0;Aa<Y.length;Aa++)if(ua===Y[Aa])return Ba[Aa];return ua}function f(ua){return"\u064b"<=ua&&"\u0655">=ua?!0:!1}function p(ua){if("L"===ua)return"LTR";if("R"===ua)return"RTL";if("C"===ua)return"CLR";if("D"===ua)return"CRL"}function r(ua,Ba){for(var Aa=0;Aa<I.length;Aa++)if(ua===I[Aa])return Ba[Aa];return ua}function m(ua,Ba,Aa,Ga){for(var ya=0;ya<ua.length;ya++)if(ua[ya]>Ba||!Aa&&ua[ya]===Ba)ua[ya]+=Ga}g.getObject("string",
!0,dojox);g=e("dojox.string.BidiEngine",t,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(ua,Ba,Aa){this.sourceToTarget=[];this.targetToSource=[];if(!ua)return"";var Ga=this.sourceToTarget,ya=this.targetToSource,Ea=ua.length;v=[];A=[];for(var Fa=0;Fa<Ea;Fa++)Ga[Fa]=Fa,ya[Fa]=Fa,v[Fa]=Fa;if(!this.checkParameters(Ba,Aa))return ua;Ba=this.inputFormat;Aa=this.outputFormat;Ga=ua;Ga=D;Fa=p(Ba.charAt(1));ya=p(Aa.charAt(1));var Ka="I"===Ba.charAt(0)?
"L":Ba.charAt(0);Ea="I"===Aa.charAt(0)?"L":Aa.charAt(0);Fa=Ka+Fa;ya=Ea+ya;Ea=Ba.charAt(2)+Aa.charAt(2);Ga.defInFormat=Fa;Ga.defOutFormat=ya;Ga.defSwap=Ea;ua=u(ua,Fa,ya,Ea,Ga);Ga=!1;if("R"===Aa.charAt(1))Ga=!0;else if("C"===Aa.charAt(1)||"D"===Aa.charAt(1))Ga=this.checkContextual(ua);ya=this.sourceToTarget=v;Ea=Array(ya.length);for(Fa=0;Fa<ya.length;Fa++)Ea[ya[Fa]]=Fa;z=this.targetToSource=Ea;if(Ba.charAt(3)===Aa.charAt(3))Ga=ua;else if("S"===Aa.charAt(3))if(Ba=Ga,Aa=!0,0===ua.length)Ga=void 0;else{void 0===
Ba&&(Ba=!0);void 0===Aa&&(Aa=!0);ua=String(ua);ua=ua.split("");var Ja=0;ya=1;Ga=ua.length;Ba||(Ja=ua.length-1,ya=-1,Ga=1);Ea=Ga;Fa=Aa;var Oa=0;Ga=[];for(Ka=0;Ja*ya<Ea;Ja+=ya)if(d(ua[Ja])||f(ua[Ja])){var Da;if(Da="\u0644"===ua[Ja])b:{for(var Na=ua,Pa=Ja+ya,Ta=ya,Xa=Ea;Pa*Ta<Xa&&f(Na[Pa]);)Pa+=Ta;Da=" ";if(Pa*Ta<Xa)for(Da=Na[Pa],Na=0;Na<I.length;Na++)if(I[Na]===Da){Da=!0;break b}Da=!1}if(Da){ua[Ja]=0===Oa?r(ua[Ja+ya],N):r(ua[Ja+ya],V);Ja+=ya;Oa=ua;Da=Ja;Na=ya;for(Pa=Ea;Da*Na<Pa&&f(Oa[Da]);)Da+=Na;Da*
Na<Pa&&(Oa[Da]=" ");Fa&&(Ga[Ka]=Ja,Ka++);Oa=0}else{Da=ua[Ja];if(1===Oa){Na=Ja;if(n(ua,Ja+ya,ya,Ea))b:for(Pa=ua[Ja],Ta=0;Ta<Y.length;Ta++){if(Pa===Y[Ta]){Pa=O[Ta];break b}}else Pa=c(ua[Ja],J);ua[Na]=Pa}else!0===n(ua,Ja+ya,ya,Ea)?ua[Ja]=c(ua[Ja],U):ua[Ja]=c(ua[Ja],ca);f(Da)||(Oa=1);b:{for(Na=0;Na<ba.length;Na++)if(ba[Na]===Da){Da=!0;break b}Da=!1}!0===Da&&(Oa=0)}}else Oa=0;ya="";for(Ea=0;Ea<ua.length;Ea++){if(Fa=Aa){b:{for(Fa=0;Fa<Ga.length;Fa++)if(Ga[Fa]===Ea)break b;Fa=-1}Fa=-1<Fa}Fa?(m(z,Ea,!Ba,
-1),v.splice(Ea,1)):ya+=ua[Ea]}Ga=ya}else if(Ba=ua,Aa=Ga,ua=!0,0===Ba.length)Ga=void 0;else for(void 0===ua&&(ua=!0),void 0===Aa&&(Aa=!0),Ba=String(Ba),Ga="",ya=[],ya=Ba.split(""),Ea=0;Ea<Ba.length;Ea++)Fa=!1,"\ufe70"<=ya[Ea]&&"\ufeff">ya[Ea]?(Ka=Ba.charCodeAt(Ea),"\ufef5"<=ya[Ea]&&"\ufefc">=ya[Ea]?(Aa?(0<Ea&&ua&&" "===ya[Ea-1]?Ga=Ga.substring(0,Ga.length-1)+"\u0644":(Ga+="\u0644",Fa=!0),Ga+=I[(Ka-65269)/2]):(Ga+=I[(Ka-65269)/2],Ga+="\u0644",Ea+1<Ba.length&&ua&&" "===ya[Ea+1]?Ea++:Fa=!0),Fa&&(m(z,
Ea,!0,1),v.splice(Ea,0,v[Ea]))):Ga+=Z[Ka-65136]):Ga+=ya[Ea];this.sourceToTarget=v;this.targetToSource=z;this.levels=A;return Ga},_inputFormatSetter:function(ua){if(!w.test(ua))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=ua},_outputFormatSetter:function(ua){if(!w.test(ua))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=ua},checkParameters:function(ua,Ba){ua?this.set("inputFormat",ua):ua=this.inputFormat;Ba?this.set("outputFormat",
Ba):Ba=this.outputFormat;return ua===Ba?!1:!0},checkContextual:function(ua){ua=l(ua);if("ltr"!==ua&&"rtl"!==ua){try{ua=document.dir.toLowerCase()}catch(Ba){}"ltr"!==ua&&"rtl"!==ua&&(ua="ltr")}return ua},hasBidiChar:function(ua){return C.test(ua)}});var v=[],z=[],A=[],D={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},E=5,F=6,y=0,x=1,w=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,C=/[\u0591-\u06ff\ufb1d-\ufefc]/,
B=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]","["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],I=["\u0622",
"\u0623","\u0625","\u0627"],N=["\ufef5","\ufef7","\ufef9","\ufefb"],V=["\ufef6","\ufef8","\ufefa","\ufefc"],Y="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),ca="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),
J="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),O="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),
U="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),ba="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),Z="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
fa=["\u0621","\u0641"],pa=["\u063a","\u064a"],da=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],ha=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],P=0,aa=1,ea=2,X=3,S=4,ia=5,oa=6,qa=7,wa=8,Ha=11,R=12,T="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),ka=100;e=P;t=aa;var na=ea,ta=X,G=S,ja=ia,ra=oa,K=qa,xa=wa,va=
Ha,la=R,Ca=[ka+0,e,e,e,e,ka+1,ka+2,ka+3,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,ka+4,G,G,G,e,G,e,G,e,G,G,G,e,e,G,G,e,e,e,e,e,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,e,e,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,e,e,e,e,e,e,e,e,e,e,e,e,e,e,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,e,e,G,G,e,e,G,G,e,e,G,G,G,G,G,G,G,G,G,G,G,G,
G,G,G,G,G,G,G,G,G,G,G,e,e,e,ka+5,K,K,ka+6,ka+7],Ma=[[18,18,18,18,18,18,18,18,18,ra,ja,ra,xa,ja,18,18,18,18,18,18,18,18,18,18,18,18,18,18,ja,ja,ja,ra,xa,G,G,va,va,va,G,G,G,G,G,10,9,10,9,9,na,na,na,na,na,na,na,na,na,na,9,G,G,G,G,G,G,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,G,G,G,G,G,G,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,G,G,G,G,18,18,18,18,18,18,ja,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,G,va,va,va,va,G,G,G,G,e,G,G,18,G,G,va,va,na,na,
G,e,G,G,G,na,e,G,G,G,G,G,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,G,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,G,e,e,e,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,G,G,G,G,G,G,G,G,G,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,G,G,e,e,e,e,e,e,e,G,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,G,e,G,G,G,G,G,G,G,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,
la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,t,la,t,la,la,t,la,la,t,la,G,G,G,G,G,G,G,G,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,G,G,G,G,G,t,t,t,t,t,G,G,G,G,G,G,G,G,G,G,G],[ta,ta,ta,ta,G,G,G,G,K,va,va,K,9,K,G,G,la,la,la,la,la,la,la,la,la,la,la,K,G,G,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,ta,ta,ta,ta,ta,ta,ta,ta,ta,ta,va,ta,ta,K,K,K,la,K,K,K,
K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,la,la,la,la,la,la,la,ta,G,la,la,la,la,la,la,K,K,la,la,G,la,la,la,la,K,K,na,na,na,na,na,na,na,na,na,na,K,K,K,K,K,K],[K,K,K,K,K,K,K,K,K,K,K,K,K,K,G,K,K,la,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,G,G,K,K,K,K,
K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,la,la,la,la,la,la,la,la,la,la,la,K,G,G,G,G,G,G,G,G,G,G,G,G,G,G,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,la,la,la,la,la,la,la,la,la,t,t,G,G,G,G,t,G,G,G,G,G],[xa,xa,xa,xa,xa,xa,xa,xa,xa,xa,xa,18,18,18,e,t,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,xa,ja,13,14,15,16,17,9,va,va,va,va,
va,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,9,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,xa,18,18,18,18,18,G,G,G,G,G,18,18,18,18,18,18,na,e,G,G,na,na,na,na,na,na,10,10,G,G,G,e,na,na,na,na,na,na,na,na,na,na,10,10,G,G,G,G,e,e,e,e,e,e,e,e,e,e,e,e,e,G,G,G,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G],
[e,e,e,e,e,e,e,G,G,G,G,G,G,G,G,G,G,G,G,e,e,e,e,e,G,G,G,G,G,t,la,t,t,t,t,t,t,t,t,t,t,10,t,t,t,t,t,t,t,t,t,t,t,t,t,G,t,t,t,t,t,G,t,G,t,t,G,t,t,G,t,t,t,t,t,t,t,t,t,t,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,
K,K,K,K,K,K,K],[la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,la,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,la,la,la,la,la,la,la,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,9,G,9,G,G,9,G,G,G,G,G,G,G,G,G,va,G,G,10,10,G,G,G,G,G,va,va,G,G,G,G,G,K,K,K,K,K,G,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,
K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,G,G,18],[G,G,G,va,va,va,G,G,G,G,G,10,9,10,9,9,na,na,na,na,na,na,na,na,na,na,9,G,G,G,G,G,G,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,G,G,G,G,G,G,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,G,G,G,G,G,G,G,G,G,G,G,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,G,G,G,e,e,e,e,e,e,G,G,e,e,e,e,e,e,G,G,e,e,e,e,e,
e,G,G,e,e,e,G,G,G,va,va,G,G,G,va,va,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G]];return g})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(g,e,t){g.DeferredList=function(u,l,q,k,a){var d=[];e.call(this);var n=this;0!==u.length||l||this.resolve([0,[]]);var b=0;t.forEach(u,function(h,c){function f(p,r){d[c]=[p,r];b++;b===u.length&&n.resolve(d)}h.then(function(p){l?n.resolve([c,p]):f(!0,p)},function(p){q?n.reject(p):f(!1,p);if(k)return null;
throw p;})})};g.DeferredList.prototype=new e;g.DeferredList.prototype.gatherResults=function(u){u=new g.DeferredList(u,!1,!0,!1);u.addCallback(function(l){var q=[];t.forEach(l,function(k){q.push(k[1])});return q});return u};return g.DeferredList})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(g,e,t){g=function(){return this}();var u=g.location,l=u.pathname;t=u.protocol;u={version:"3.46",_appBaseUrl:t+"//"+u.host+l.substring(0,l.lastIndexOf(l.split("/")[l.split("/").length-
1]))};e.noGlobals||(g.esri=u);(u.dijit=u.dijit||{})._arcgisUrl=("http:"===t||"https:"===t?t:"http:")+"//www.arcgis.com/sharing/rest";return u})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(g,e,t,u){t=function(){return this}();var l={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,
labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,zoomAnimationThrottled:!1,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:t.Worker&&!1,io:{errorHandler:function(q,k){e.publish("esri.Error",[q])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,
"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com","tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com","basemaps-api.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com","services7.arcgis.com",
"services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com","cdn-b.arcgis.com","static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com","qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com","staticdev.arcgis.com",
"tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com","basemapsdev-api.arcgis.com","basemapsbetadev.arcgis.com"],corsDetection:t.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},crossOriginNoCorsDomains:null,webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},
workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}}}};u.config=l;g.noGlobals||(t.esriConfig=l);return l})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(g,e,t,u,l,q,k,a,d){function n(v,z,A,D){(z=z&&z[v])?z={formatType:z.formatType,options:z}:D&&-1!==g.indexOf(D.properties||"",v)?z={formatType:D.formatter||"DateString",options:null}:A&&-1!==g.indexOf(A.properties||
"",v)&&(z={formatType:A.formatter||"NumberFormat",options:null});return z}function b(v,z,A){return[u.isString(v)?v.split(""):v,z||t.global,u.isString(A)?new Function("item","index","array",A):A]}function h(v){return void 0!==v&&null!==v}function c(v){return h(v)?v:""}function f(v,z,A,D){var E=A.match(/([^\(]+)(\([^\)]+\))?/i);A=u.trim(E[1]);var F=E[2]?u.trim(E[2]):null;E=z[v];D=D||(F?e.fromJson(F.replace(/^\(/,"({").replace(/\)$/,"})")):{});F=D.utcOffset;if(-1===g.indexOf(r,A))A=u.getObject(A),u.isFunction(A)&&
(E=A(E,v,z,D));else if("number"===typeof E||"string"===typeof E&&E&&!isNaN(Number(E)))switch(E=Number(E),A){case "NumberFormat":return k.format(E,D);case "DateString":v=new Date(E);if(D.local||D.systemLocale)return D.systemLocale?v.toLocaleDateString()+(D.hideTime?"":" "+v.toLocaleTimeString()):v.toDateString()+(D.hideTime?"":" "+v.toTimeString());v=v.toUTCString();D.hideTime&&(v=v.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return v;case "DateFormat":return v=new Date(E),h(F)&&(v=l.add(v,"minute",
v.getTimezoneOffset()-F)),a.format(v,D)}return c(E)}function p(v,z){var A;if(z)for(A in v)v.hasOwnProperty(A)&&(void 0===v[A]?delete v[A]:v[A]instanceof Object&&p(v[A],!0));else for(A in v)v.hasOwnProperty(A)&&void 0===v[A]&&delete v[A];return v}var r=["NumberFormat","DateString","DateFormat"],m=/<\/?[^>]+>/g;q={valueOf:function(v,z){for(var A in v)if(v[A]==z)return A;return null},stripTags:function(v){if(v){var z=typeof v;if("string"===z)v=v.replace(m,"");else if("object"===z)for(var A in v)(z=v[A])&&
"string"===typeof z&&(z=z.replace(m,"")),v[A]=z}return v},substitute:function(v,z,A){if(h(A))if(u.isObject(A)){var D=A.first;var E=A.dateFormat;var F=A.numberFormat;var y=A.format}else D=A;if(z&&"${*}"!==z)return u.replace(z,u.hitch({obj:v},function(w,C){var B=C.split(":");return 1<B.length?(C=B[0],B.shift(),(w=y&&y[B[0]])?B=w.formatType:(B=B.join(":"),w=null),f(C,this.obj,B,w)):(w=n(C,y,F,E))?f(C,this.obj,w.formatType,w.options):c(this.obj[C])}),/\$\{([^\}]+)\}/g);z=[];for(var x in v)if(A=(A=n(x,
y,F,E))?f(x,v,A.formatType,A.options):v[x],z.push(x+" \x3d "+c(A)+"\x3cbr/\x3e"),D)break;return z.join("")},filter:function(v,z,A){z=b(v,A,z);A={};var D;v=z[0];for(D in v)z[2].call(z[D],v[D],D,v)&&(A[D]=v[D]);return A},startsWith:function(v,z,A){A=A||0;return v.indexOf(z,A)===A},endsWith:function(v,z,A){if("number"!==typeof A||!isFinite(A)||Math.floor(A)!==A||A>v.length)A=v.length;A-=z.length;v=v.indexOf(z,A);return-1!==v&&v===A},isDefined:h,fixJson:p,isObject:function(v){return v&&"object"===typeof v},
isString:function(v){return"string"===typeof v},mixin:function(v,z){for(var A in z)z.hasOwnProperty(A)&&(v[A]=z[A]);return v},clone2DArray:function(v){if(v=v?v.slice(0):null){var z,A=v.length;for(z=0;z<A;z++)v[z]=v[z]?v[z].slice(0):null}return v},clone3DArray:function(v){if(v=v?v.slice(0):null){var z,A=v.length;for(z=0;z<A;z++){v[z]=v[z]?v[z].slice(0):null;var D=v[z];if(D){var E,F=D.length;for(E=0;E<F;E++)D[E]=D[E]?D[E].slice(0):null}}}return v}};u.mixin(d,q);d._isDefined=h;d._getParts=b;d._sanitize=
p;return q})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(g,e,t,u,l){var q={show:function(k){if(k=q.getNode(k))k.style.display="block"},getNode:function(k){return k&&k.domNode||k},hide:function(k){if(k=q.getNode(k))k.style.display="none"},toggle:function(k){if(k=q.getNode(k))k.style.display="none"===k.style.display?"block":"none"},documentBox:8>=l("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:
{w:window.innerWidth,h:window.innerHeight},setScrollable:function(k){if(k=this.getNode(k)){var a=0,d=0,n=0,b=0,h=0,c=0;return[e.connect(k,"ontouchstart",function(f){a=f.touches[0].screenX;d=f.touches[0].screenY;n=k.scrollWidth;b=k.scrollHeight;h=k.clientWidth;c=k.clientHeight}),e.connect(k,"ontouchmove",function(f){f.preventDefault();var p=k.firstChild;p instanceof Text&&(p=k.childNodes[1]);var r=p._currentX||0,m=p._currentY||0;r+=f.touches[0].screenX-a;0<r?r=0:0>r&&Math.abs(r)+h>n&&(r=-1*(n-h));
p._currentX=r;m+=f.touches[0].screenY-d;0<m?m=0:0>m&&Math.abs(m)+c>b&&(m=-1*(b-c));p._currentY=m;u.set(p,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+r+"px, "+m+"px)"});a=f.touches[0].screenX;d=f.touches[0].screenY})]}}};t.mixin(g,q);return q})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),function(g,e,t,u,l,q,k,a,d,n){var b={},h=
a.defaults.io,c=/^[a-z][a-z0-9\+\-\.]*:/i,f=/^\s*http:/i,p=/^\s*https:/i,r=/:\d+$/,m=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;b.isHTTP=function(z){var A=u.location.protocol;return null==z?"http:"===A||"https:"===A:z?"https:"===A:"http:"===A};b.getProtocolForWebResource=function(z){return b.isHTTP()?u.location.protocol:z?"https:":"http:"};b.urlToObject=function(z){var A={},D=new t(z),E=z.indexOf("?");null===D.query?A={path:z,query:null}:(A.path=z.substring(0,E),A.query=l.queryToObject(D.query));
D.fragment&&(A.hash=D.fragment,null===D.query&&(A.path=A.path.substring(0,A.path.length-(D.fragment.length+1))));return A};b.getProxyUrl=function(z,A){var D=g.isString(z)?0===g.trim(z).toLowerCase().indexOf("https:"):z,E=h.proxyUrl,F=n.io.proxyNotSet;g.isString(z)&&(z=b.getProxyRule(z))&&(E=z.proxyUrl);if(!E)throw Error(F);if(D&&!1!==A&&0!==u.location.href.toLowerCase().indexOf("https:")&&(A=E,0!==A.toLowerCase().indexOf("http")&&(A=b.getAbsoluteUrl(A)),A=A.replace(/^http:/i,"https:"),b.canUseXhr(A))){E=
A;var y=1}E=b.urlToObject(E);E._xo=y;return E};b.addProxy=function(z){var A=b.getProxyRule(z),D;A?D=b.urlToObject(A.proxyUrl):h.alwaysUseProxy&&(D=b.getProxyUrl());D&&(A=b.urlToObject(z),z=D.path+"?"+A.path,(D=l.objectToQuery(g.mixin(D.query||{},A.query)))&&(z+="?"+D));return z};b.addProxyRule=function(z){var A=z.urlPrefix=b.urlToObject(z.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),D=h.proxyRules,E,F=D.length,y=F;for(E=0;E<F;E++){var x=D[E].urlPrefix;if(0===
A.indexOf(x)){if(A.length===x)return-1;y=E;break}else 0===x.indexOf(A)&&(y=E+1)}D.splice(y,0,z);return y};b.getProxyRule=function(z){var A=h.proxyRules,D=A.length,E=b.urlToObject(z).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase();for(z=0;z<D;z++)if(0===E.indexOf(A[z].urlPrefix)){var F=A[z];break}return F};b.hasSameOrigin=function(z,A,D){z=z.toLowerCase();A=A.toLowerCase();var E=u.location.href.toLowerCase();z=0===z.indexOf("http")?new t(z):E=new t(E);A=0===A.indexOf("http")?
new t(A):g.isString(E)?new t(E):E;return(D||z.scheme===A.scheme)&&z.host===A.host&&z.port===A.port};b.canUseXhr=function(z,A){var D=d("esri-phonegap")?!0:!1,E=b.hasSameOrigin,F=h.corsEnabledServers,y,x=-1;!D&&d("esri-cors")&&F&&F.length&&(D=e.some(F,function(w,C){w=!w||"object"!==typeof w||w instanceof RegExp?w:w.host;if(w instanceof RegExp){if(w.test(z))return x=C,!0}else if(w&&(y=0!==w.trim().toLowerCase().indexOf("http"),E(z,y?"http://"+w:w)||y&&E(z,"https://"+w)))return x=C,!0;return!1}));return A?
x:D};b.getAbsoluteUrl=function(z){var A=b.getProtocolForWebResource();return g.isString(z)&&!c.test(z)?0===z.indexOf("//")?A+z:0===z.indexOf("/")?A+"//"+u.location.host+z:q._appBaseUrl+z:z};b.fixUrl=function(z){z=g.trim(z);z=b.getAbsoluteUrl(z);z=b.normalizeSlashes(z);z=z.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");z=b.downgradeToHTTP(z);return z=b.upgradeToHTTPS(z)};b.normalize=function(z){return b.fixUrl(z)};b.normalizeSlashes=function(z){if(/^https?:\/\//i.test(z)){var A=z.indexOf("?");
if(-1<A){var D=z.slice(0,A);var E=z.slice(A+1)}else D=z;z=D.replace(/\/{2,}/g,"/");z=z.replace("/","//");E&&(z+="?"+E)}return z};b.downgradeToHTTP=function(z){return b.isHTTP(!1)&&p.test(z)&&b.hasSameOrigin(u.location.href,z,!0)&&!b.canUseXhr(z)?z.replace(p,"http:"):z};b.upgradeToHTTPS=function(z){var A=h.httpsDomains,D=b.isHTTP(!1),E=b.isHTTP(!0);if(!f.test(z))return z;z=g.trim(z);var F=z.indexOf("/",7);F=-1===F?z:z.slice(0,F);F=F.toLowerCase().slice(7);if(r.test(F))if(k.endsWith(F,":80"))F=F.slice(0,
-3),z=z.replace(":80","");else return z;if(D&&F===u.location.host&&(!m.test(z)||!b.canUseXhr(z)))return z;D=!1;if(E&&F===u.location.host)D=!0;else if(A)for(var y=0;y<A.length;y++){var x=A[y];if(F===x||k.endsWith(F,"."+x)){D=!0;break}}D||!E||h.alwaysUseProxy||b.getProxyRule(z)||(D=!0);D&&(z=z.replace(f,"https:"));return z};a=n.widgets.popup;var v=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:a.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,
label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:a.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,appName:"Collector",label:a.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:a.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:a.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",
label:a.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:a.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",label:a.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:a.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:a.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:a.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,
appName:"Microsoft Power BI",label:a.NLS_openLinkInApp}];b.getURIInfo=function(z){var A;e.some(v,function(D){D.pattern.test(z)&&(A=D);return!!A});return A};b.isKnownURI=function(z){return!!b.getURIInfo(z)};b.isSecureProxyService=function(z){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(z)};b.base64UrlEncode=function(z){return btoa(String.fromCharCode.apply(null,z)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};g.mixin(q,b);q._getProxyUrl=b.getProxyUrl;q._getProxiedUrl=b.addProxy;
q._hasSameOrigin=b.hasSameOrigin;q._canDoXOXHR=b.canUseXhr;q._getAbsoluteUrl=b.getAbsoluteUrl;q.fixUrl=b.fixUrl;return b})},"esri/sniff":function(){define(["dojo/_base/sniff","dojo/global","./kernel"],function(g,e,t){var u=g("ff"),l=g("ie"),q=void 0===l&&7<=g("trident"),k=g("edge"),a=g("webkit"),d=g("opera"),n=g("chrome"),b=g("safari"),h=navigator.userAgent,c;(c=h.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+_\d+)/i))&&g.add("esri-iphone",parseFloat(c[2].replace("_",".")));(c=h.match(/Android\s+(\d+(\.\d+)*)/i))&&
g.add("esri-android",parseFloat(c[1]));(c=h.match(/Fennec\/(\d+\.\d+)/i))&&g.add("esri-fennec",parseFloat(c[1]));0<=h.indexOf("BlackBerry")&&0<=h.indexOf("WebKit")&&g.add("esri-blackberry",1);g.add("esri-touch",g("esri-iphone")||g("esri-android")||g("esri-blackberry")||6<=g("esri-fennec")||(u||a)&&(document.createTouch||"ontouchstart"in e||e.TouchEvent&&0<navigator.maxTouchPoints)?!0:!1);(c=h.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&g.add("esri-mobile",!!c);g.add("esri-pointer",
!u&&(navigator.pointerEnabled||navigator.msPointerEnabled||!!e.PointerEvent));t._getDOMAccessor=function(p){var r="";u?r="Moz":a?r="Webkit":l?r="ms":d&&(r="O");return r+p.charAt(0).toUpperCase()+p.substr(1)};g.add("esri-phonegap",!!e.cordova);g.add("esri-cors",g("esri-phonegap")||e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);g.add("esri-file-upload",e.FormData&&e.FileList?!0:!1);g.add("esri-script-sandbox",function(){return"MessageChannel"in e&&"HTMLIFrameElement"in e&&"sandbox"in HTMLIFrameElement.prototype});
g.add("esri-secure-context",function(){if("isSecureContext"in e)return e.isSecureContext;if(e.location&&e.location.origin)return 0===e.location.origin.indexOf("https:")});g.add("esri-wasm","WebAssembly"in e);g.add("esri-workers",e.Worker?!0:!1);g.add("esri-featurelayer-webgl",!1);if(h=g("esri-featurelayer-webgl")){var f=g("esri-mobile");c=f?1:2;f=f?1:3;"object"===typeof h?(h.maxDrillLevel=null==h.maxDrillLevel?c:h.maxDrillLevel,h.maxRecordCountFactor=null==h.maxRecordCountFactor?f:h.maxRecordCountFactor,
h.enablePBFQuery=null==h.enablePBFQuery?!0:h.enablePBFQuery):g.add("esri-featurelayer-webgl",{maxDrillLevel:c,maxRecordCountFactor:f,enablePBFQuery:!0},null,!0)}g.add("esri-featurelayer-webgl-labeling",!1);g.add("esri-pbf",!l||10<=l);g.add("esri-featurelayer-pbf",!0);g.add("esri-transforms",q||k||9<=l||3.5<=u||4<=n||3.1<=b||10.5<=d||3.2<=g("esri-iphone")||2.1<=g("esri-android"));g.add("esri-transitions",q||k||10<=l||4<=u||4<=n||3.1<=b||10.5<=d||3.2<=g("esri-iphone")||2.1<=g("esri-android"));g.add("esri-transforms3d",
q||k||10<=u||12<=n||4<=b||3.2<=g("esri-iphone")||3<=g("esri-android"));g.add("esri-url-encodes-apostrophe",function(){if(!e.document)return!1;var p=e.document.createElement("a");p.href="?'";return-1<p.href.indexOf("?%27")});3>g("esri-android")&&(g.add("esri-transforms",!1,!1,!0),g.add("esri-transitions",!1,!1,!0),g.add("esri-transforms3d",!1,!1,!0));g.add("esri-will-change",g("esri-transforms")&&(52<=n||11.1<=b));t._css=function(p){var r=g("esri-transforms3d");void 0!==p&&null!==p?r=p:r&&(n||b&&!g("esri-iphone"))&&
(r=!1);var m=r?"translate3d(":"translate(",v=r?n?",-1px)":",0px)":")",z=r?"scale3d(":"scale(",A=r?",1)":")",D=r?"rotate3d(0,0,1,":"rotate(",E=r?"matrix3d(":"matrix(",F=r?",0,0,":",",y=r?",0,0,0,0,1,0,":",",x=r?",0,1)":")";return{names:{transition:a&&"-webkit-transition"||u&&"MozTransition"||d&&"OTransition"||l&&"msTransition"||"transition",transform:a&&"-webkit-transform"||u&&"MozTransform"||d&&"OTransform"||l&&"msTransform"||"transform",transformName:a&&"-webkit-transform"||u&&"-moz-transform"||
d&&"-o-transform"||l&&"-ms-transform"||"transform",origin:a&&"-webkit-transform-origin"||u&&"MozTransformOrigin"||d&&"OTransformOrigin"||l&&"msTransformOrigin"||"transformOrigin",endEvent:a&&"webkitTransitionEnd"||u&&"transitionend"||d&&"oTransitionEnd"||l&&"MSTransitionEnd"||"transitionend"},translate:function(w,C){return m+w+"px,"+C+"px"+v},scale:function(w){return z+w+","+w+A},rotate:function(w){return D+w+"deg)"},matrix:function(w){return E+w.xx+","+w.xy+F+w.yx+","+w.yy+y+w.dx.toFixed(10)+(u&&
59>=u?"px,":",")+w.dy.toFixed(10)+(u&&59>=u?"px":"")+x},getScaleFromMatrix:function(w){if(!w)return 1;w=w.toLowerCase();var C=-1<w.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(w.substring(C.length,w.indexOf(",")))}}};t.isiPhone=g("esri-iphone");t.isAndroid=g("esri-android");t.isFennec=g("esri-fennec");t.isBlackBerry=g("esri-blackberry");t.isTouchEnabled=g("esri-touch");t.isPointerEnabled=g("esri-pointer");t._hasCors=g("esri-cors");t._hasFileUpload=g("esri-file-upload");t._hasTransforms=
g("esri-transforms");t._hasTransitions=g("esri-transitions");t._has3DTransforms=g("esri-transforms3d");return g})},"esri/graphic":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "),function(g,e,t,u,l,q,k,a,d){function n(){}g=g(null,{declaredClass:"esri.Graphic",constructor:function(b,h,c,f){this._construct();b&&!b.declaredClass?(this.geometry=b.geometry?a.fromJson(b.geometry):null,this.symbol=
b.symbol?d.fromJson(b.symbol):null,this.attributes=b.attributes||null,this.infoTemplate=b.infoTemplate?new k(b.infoTemplate):null):(this.geometry=b,this.symbol=h,this.attributes=c,this.infoTemplate=f)},_geomVersion:0,_resolution:null,_shape:null,_bgShape:null,_dataAttrs:null,_layer:null,_sourceLayer:null,_graphicsLayer:null,_parentGraphic:null,_suspended:!1,size:null,visible:!0,_aggregationSourceLayer:null,_aggregationInfo:null,_computedAttributes:null,_computedVersion:null,_computedGeomVersion:null,
_isSnapTarget:!0,getParentGraphic:function(){return this._parentGraphic},setParentGraphic:function(b){this._parentGraphic=b},setSize:function(b){this.size=b;return this},getAggregationSourceLayer:function(){return this._aggregationSourceLayer},setAggregationSourceLayer:function(b){this._aggregationSourceLayer=b;return this},isAggregate:function(){return!!this._aggregationInfo},getAggregationInfo:function(){return this._aggregationInfo},setAggregationInfo:function(b){this._aggregationInfo=b;return this},
getChildGraphics:function(){var b=this.getAggregationSourceLayer();return b?b.getChildGraphics(this):[]},getDojoShape:function(){return this._shape},getShapes:function(){var b=[];this._shape&&b.push(this._shape);this._bgShape&&b.push(this._bgShape);return b},getNode:function(){var b=this._shape&&this._shape.getNode();return b&&b.nodeType?b:null},getNodes:function(){var b=this.getShapes(),h,c,f=b.length,p=[];for(c=0;c<f;c++)(h=b[c]&&b[c].getNode())&&h.nodeType&&p.push(h);return p},getLayer:function(){return this._layer},
getSourceLayer:function(){return this._sourceLayer||this._layer},clone:function(){var b=new this.constructor(this.toJson());b.visible=this.visible;b._layer=this._layer;b._sourceLayer=this._sourceLayer;b._aggregationSourceLayer=this._aggregationSourceLayer;b._aggregationInfo=this._aggregationInfo;b._resolution=this._resolution;return b},draw:function(){var b=this._graphicsLayer;b&&b._draw(this,!0);return this},setGeometry:function(b){this.geometry=b;this._geomVersion++;var h=this._graphicsLayer;h&&
(h._updateExtent(this),this.draw(),b&&"polyline"===b.type&&h._updateSVGMarkers());return this},setResolution:function(b){this._resolution=b;return this},getResolution:function(){return this._resolution},setSymbol:function(b,h){var c=this._graphicsLayer,f=this._shape;this.symbol=b;c&&(h&&f&&c._removeShape(this),this.draw());return this},setAttributes:function(b){this.attributes=b;this.clearCache();return this},setInfoTemplate:function(b){this.infoTemplate=b;return this},getInfoTemplate:function(){return this._getEffInfoTemplate()},
_getEffInfoTemplate:function(){var b=this.getLayer();return this.infoTemplate||b&&b.infoTemplate},getTitle:function(){var b=this.getInfoTemplate(),h=b&&b.title;if(e.isFunction(h))h=h.call(b,this);else if(e.isString(h)){var c=(b=this.getLayer())&&b._getDateOpts;h=q.substitute(this.attributes,h,{first:!0,dateFormat:c&&c.call(b)})}return h},getContent:function(){var b=this.getInfoTemplate(),h=b&&b.content;if(e.isFunction(h))h=h.call(b,this);else if(e.isString(h)){var c=(b=this.getLayer())&&b._getDateOpts;
h=q.substitute(this.attributes,h,{dateFormat:c&&c.call(b)})}return h},attr:function(b,h){null==h||this._dataAttrs||(this._dataAttrs={});this._dataAttrs&&(this._dataAttrs[b]=h,this._setDataAttr(b,h));return this},_isSuspended:function(){return this._suspended},_suspend:function(){this._suspended=!0;this.draw()},_resume:function(){this._suspended=!1;this.draw()},show:function(){this.visible=!0;this.attr("data-hidden");var b;if(this.getShapes().length){var h=this.getNodes();var c=h.length;for(b=0;b<
c;b++)l.show(h[b])}else this.draw();(h=this._graphicsLayer)&&h._graphicVisibilityChanged(this);return this},hide:function(){this.visible=!1;this.attr("data-hidden","");var b=this._graphicsLayer,h,c;if(b){if("canvas-2d"===b.surfaceType)b._removeShape(this);else{var f=this.getNodes();if(c=f.length)for(h=0;h<c;h++)l.hide(f[h])}b._graphicVisibilityChanged(this)}return this},toJson:function(){var b={};this.geometry&&(b.geometry=this.geometry.toJson());this.attributes&&(b.attributes=e.mixin({},this.attributes));
this.symbol&&(b.symbol=this.symbol.toJson());this.infoTemplate&&(b.infoTemplate=this.infoTemplate.toJson());return b},_setDataAttr:function(b,h){var c=this.getNodes(),f,p=c.length;for(f=0;f<p;f++)this._setDOMDataAttr(c[f],b,h)},_setDOMDataAttr:function(b,h,c){null==c?b.removeAttribute(h):b.setAttribute(h,c)},_applyDataAttrs:function(){var b=this._dataAttrs;if(b){var h=this.getNodes(),c,f=h.length;for(c=0;c<f;c++)for(var p in b)this._setDOMDataAttr(h[c],p,b[p])}},_getViewInfo:function(b){return(b=
(b=b||this.getLayer())&&b.getMap())&&b.getViewInfo()},evaluateExpression:function(b,h){return this._getDataValue(b._attributeDef,b._attributeCache,null,null,b,h)},_getDataValue:function(b,h,c,f,p,r){var m=h.id,v=this.attributes,z=b.field,A=h.isNumeric,D=null;if(m){var E=this._computedAttributes,F=this._computedVersion,y=this._computedGeomVersion;f=this._getViewInfo(f);var x=!(!p||!p.async),w=r&&r.skipCache||x,C=!r||!1!==r.strictReturnType,B=h.dependsOnView||h.isJSFunc,I=h.dependsOnGeometry;E||(E=
this._computedAttributes={});B&&!F&&(F=this._computedVersion={});I&&!y&&(y=this._computedGeomVersion={});var N=B&&F[m]!==f.version||I&&y[m]!==this._geomVersion;D=E[m];if(void 0===D||N||w)D=null,h.hasExpr?D=p?p.evaluate(r&&r.context):c.executeFunction(h.compiledFunc,c.createExecContext(this,f)):h.isJSFunc?D=z(this,b):v&&(D=v[z],A&&this._isValidNumber(D)&&(h=b.normalizationType||"field",c=D,D=null,p=b.normalizationTotal,b=v[b.normalizationField],"log"===h&&0!==c?D=Math.log(c)*Math.LOG10E:"percent-of-total"===
h&&this._isValidNumber(p)&&0!==p?D=c/p*100:"field"===h&&this._isValidNumber(b)&&0!==b&&(D=c/b))),C&&(x?A&&(this._construct(),D=D.then(this._sanitizeNumericValue)):D=this._sanitizeValue(D,A)),w||(E[m]=D,B&&(F[m]=f.version),I&&(y[m]=this._geomVersion))}else v&&(D=this._sanitizeValue(v[z],A));return D},_sanitizeValue:function(b,h){h&&!this._isValidNumber(b)&&(b=null);return b},_sanitizeNumericValue:function(b){return this._sanitizeValue(b,!0)},_construct:function(){this._constructed||(this._sanitizeNumericValue=
e.hitch(this,this._sanitizeNumericValue),this._constructed=!0)},_isValidNumber:function(b){return"number"===typeof b&&!isNaN(b)&&Infinity!==b&&-Infinity!==b},clearCache:function(b){if(null!=b){var h=this._computedAttributes,c=this._computedVersion,f=this._computedGeomVersion;h&&(h[b]=void 0);c&&(c[b]=void 0);f&&(f[b]=void 0)}else this._computedAttributes=this._computedVersion=this._computedGeomVersion=null}});g.prototype.getShape=g.prototype.getDojoShape;n.prototype=g.prototype;g.simpleConstructor=
n;return u.Graphic=g})},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(g,e,t,u,l){g=g(null,{declaredClass:"esri.InfoTemplate",constructor:function(q,k){q&&e.isObject(q)&&!e.isFunction(q)?e.mixin(this,q):(this.title=q||"${*}",this.content=k||"${*}")},setTitle:function(q){this.title=q;return this},setContent:function(q){this.content=q;return this},toJson:function(){return l.fixJson({title:this.title,content:this.content})}});return u.InfoTemplate=
g})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(g,e,t,u,l,q,k,a,d){function n(f,p,r){var m=f.rings||f.paths,v,z;var A=0;for(v=m.length;A<v;A++){var D=m[A];var E=0;for(z=D.length;E<z;E++){var F=D[E];if(0<E)y+=F[0],x+=F[1];else{var y=F[0];var x=F[1]}F[0]=p(y);F[1]=r(x)}}return f}var b={esriGeometryPoint:function(f,p,r){f.x=p(f.x);f.y=r(f.y);return f},esriGeometryPolyline:n,esriGeometryPolygon:n,
esriGeometryEnvelope:function(f,p,r){f.xmin=p(f.xmin);f.ymin=r(f.ymin);f.xmax=p(f.xmax);f.ymax=r(f.ymax);return f},esriGeometryMultipoint:function(f,p,r){var m=f.points,v;var z=0;for(v=m.length;z<v;z++){var A=m[z];if(0<z)D+=A[0],E+=A[1];else{var D=A[0];var E=A[1]}A[0]=p(D);A[1]=r(E)}return f}},h={esriGeometryPoint:function(f,p,r){f.x=p(f.x);f.y=r(f.y);return f}},c={createInstance:function(f,p){f=new f;p&&u.mixin(f,p);return f},fromJson:function(f){if(void 0!==f.x&&void 0!==f.y)return new l(f);if(void 0!==
f.paths)return new q(f);if(void 0!==f.rings)return new k(f);if(void 0!==f.points)return new a(f);if(void 0!==f.xmin&&void 0!==f.ymin&&void 0!==f.xmax&&void 0!==f.ymax)return new d(f)},getJsonType:function(f){return f instanceof l?"esriGeometryPoint":f instanceof q?"esriGeometryPolyline":f instanceof k?"esriGeometryPolygon":f instanceof d?"esriGeometryEnvelope":f instanceof a?"esriGeometryMultipoint":null},getGeometryType:function(f){return"esriGeometryPoint"===f?l:"esriGeometryPolyline"===f?q:"esriGeometryPolygon"===
f?k:"esriGeometryEnvelope"===f?d:"esriGeometryMultipoint"===f?a:null},supportsLazyUnquantization:function(f){return"esriGeometryPoint"===f||"esriGeometryPolyline"===f||"esriGeometryPolygon"===f||"esriGeometryMultipoint"===f},unquantizeFunction:function(f,p){if(f&&p){var r=p.translate[0],m=p.translate[1],v=p.scale[0],z=p.scale[1],A=function(F){return F*v+r},D=function(F){return m-F*z},E=b[f];return function(F){return F?E(F,A,D):null}}},unquantize:function(f,p,r){if(p=c.unquantizeFunction(p,r)){var m=
f.length;for(r=0;r<m;r++)p(f[r].geometry)}},quantizeFunction:function(f,p){if(f&&"esriGeometryPoint"===f&&p){var r=p.translate[0],m=p.translate[1],v=p.scale[0],z=p.scale[1],A=function(F){return Math.round((F-r)/v)},D=function(F){return Math.round((m-F)/z)},E=h[f];return function(F){return F?E(F,A,D):null}}},quantize:function(f,p,r){if(p=c.quantizeFunction(p,r)){var m=f.length;for(r=0;r<m;r++)p(f[r].geometry)}}};g.mixin(g.getObject("geometry",!0,t),c);return c})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),
function(g,e,t,u,l,q,k,a){function d(f,p){89.99999<p?p=89.99999:-89.99999>p&&(p=-89.99999);p*=.017453292519943;return[111319.49079327169*f,3189068.5*Math.log((1+Math.sin(p))/(1-Math.sin(p)))]}function n(f,p,r){f=f/6378137*57.29577951308232;return r?[f,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]:[f-360*Math.floor((f+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]}function b(){}function h(){}function c(f){var p=f._json;f._unquantizeFn?
(p=f._unquantizeFn({x:p.x,y:p.y}),f._xVal=p.x,f._yVal=p.y,f._unquantizeFn=null):(f._xVal=p.x,f._yVal=p.y);f._json=null}t={type:"point",x:0,y:0};g=g(k,{declaredClass:"esri.geometry.Point",type:"point",x:0,y:0,constructor:function(f,p,r){e.isArray(f)?(this.x=f[0],this.y=f[1],this.spatialReference=p):l.isObject(f)?(l.mixin(this,f),null!=this.latitude&&(this.y=this.latitude),null!=this.longitude&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=a.createSpatialReference(this.spatialReference))):
(this.x=f,this.y=p,this.spatialReference=r);this.verifySR()},offset:function(f,p){return new this.constructor(this.x+f,this.y+p,this.spatialReference)},setX:function(f){this.x=f;this.clearCache();return this},setY:function(f){this.y=f;this.clearCache();return this},setLongitude:function(f){var p=this.spatialReference;p&&(p._isWebMercator()?this.setX(d(f,this.y)[0]):4326===p.wkid&&this.setX(f));return this},setLatitude:function(f){var p=this.spatialReference;p&&(p._isWebMercator()?this.setY(d(this.x,
f)[1]):4326===p.wkid&&this.setY(f));return this},getLongitude:function(){var f=this.spatialReference;if(f)if(f._isWebMercator())var p=n(this.x,this.y)[0];else 4326===f.wkid&&(p=this.x);return p},getLatitude:function(){var f=this.spatialReference;if(f)if(f._isWebMercator())var p=n(this.x,this.y)[1];else 4326===f.wkid&&(p=this.y);return p},update:function(f,p){this.x=f;this.y=p;this.clearCache();return this},normalize:function(){var f=this.x,p=this.spatialReference;if(p){var r=p._getInfo();r&&(f=this._normalizeX(f,
r))}return new this.constructor(f,this.y,p)},_normalizeX:function(f,p){var r=p.valid[0],m=p.valid[1];p=2*m;f>m?(r=Math.ceil(Math.abs(f-m)/p),f-=r*p):f<r&&(r=Math.ceil(Math.abs(f-r)/p),f+=r*p);return f},toJson:function(){var f={x:this.x,y:this.y},p=this.spatialReference;p&&(f.spatialReference=p.toJson());return f}});b.prototype=g.prototype;h.prototype=new b;Object.defineProperty(h.prototype,"x",{get:function(){this._json&&c(this);return this._xVal},set:function(f){this._xVal=f}});Object.defineProperty(h.prototype,
"y",{get:function(){this._json&&c(this);return this._yVal},set:function(f){this._yVal=f}});h.prototype.setupLazyUnquantization=function(f,p){this._unquantizeFn=f;this._json=p};g.simpleConstructor=b;g.accessorConstructor=h;g.lngLatToXY=d;g.xyToLngLat=n;g.defaultProps=t;g.metersPerDegree=6378137*Math.PI/180;e.setObject("geometry.Point",g,u);u.geometry.defaultPoint=t;return g})},"esri/SpatialReference":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/has","./kernel","./lang"],function(g,
e,t,u,l){function q(){}t=[-2.0037508342788905E7,2.0037508342788905E7];var k=[-2.0037508342787E7,2.0037508342787E7];g=g(null,{declaredClass:"esri.SpatialReference",constructor:function(a){a&&(l.isObject(a)?l.mixin(this,a):l.isString(a)?this.wkt=a:this.wkid=a)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:t,origin:k,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:t,origin:k,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:t,origin:k,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:t,origin:k,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==e.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==e.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(a){var d=!1;a&&(d=this.isWebMercator()&&4326===a.wkid||a.isWebMercator()&&4326===this.wkid);return d},isWebMercator:function(){return this._isWebMercator()},equals:function(a){var d=!1;a&&(this===a&&
(d=!0),this.wkid||a.wkid?d=this.wkid===a.wkid||this.isWebMercator()&&a.isWebMercator()||this.wkid===a.latestWkid||a.wkid===this.latestWkid:this.wkt&&a.wkt&&(d=this.wkt.toUpperCase()===a.wkt.toUpperCase()));return d},toJson:function(){var a=null;null!=this.wkid?a={wkid:this.wkid}:null!=this.wkt&&(a={wkt:this.wkt});a&&null!=this.latestWkid&&(a.latestWkid=this.latestWkid);return a}});q.prototype=g.prototype;g.simpleConstructor=q;return u.SpatialReference=g})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(g,e,t,u,l){g=g(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(q){this.spatialReference=q;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new l(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(q){return this.cache&&this.cache[q]},setCacheValue:function(q,k){this.cache||
(this.cache={});this.cache[q]=k}});e.setObject("geometry.Geometry",g,u);return g})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(g,e,t,u,l){function q(k){var a=!1;k&&(k.ics||k.icsid)&&(a=!0);return a}u={isICS:q,createSpatialReference:function(k){var a=null;k&&(a=q(k)?new e(k):new g(k));return a}};l.mixin(t,u);return u})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
function(g,e,t,u,l,q){g=g(q,{declaredClass:"esri.ImageSpatialReference",constructor:function(k){k&&e.isObject(k)&&e.mixin(this,k)},icsid:null,icsns:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(k){var a=!1;if(k)if(this.icsid&&k.icsid){if(a=this.icsid===k.icsid,this.icsns||k.icsns)a=a&&this.icsns===k.icsns}else this.ics&&k.ics&&(a=this.ics===k.ics);return a},toJson:function(k){var a=null,d=l.isDefined;k=d(k)?k:!0;d(this.icsid)?(a={icsid:this.icsid},
d(this.icsns)&&(a.icsns=this.icsns)):d(this.ics)&&(a={ics:this.ics});d(this.url)&&d(a)&&k&&(a.url=this.url);return a}});return u.ImageSpatialReference=g})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(g,e,t,u,l,q,k,a,d,n,b){function h(){}function c(){}u={type:"polyline",paths:null};g=g(a,{declaredClass:"esri.geometry.Polyline",type:"polyline",
paths:null,constructor:function(f){this.paths=[];this._path=0;f&&(t.isArray(f)?this.paths=t.isArray(f[0][0])?f:[f]:f.paths?q.mixin(this,f):this.spatialReference=f,this.spatialReference&&(this.spatialReference=b.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(f){this.clearCache();this._path=this.paths.length;this.paths[this._path]=[];t.isArray(f[0])?e.forEach(f,this._addPointArr,this):e.forEach(f,this._addPoint,this);return this},_addPointArr:function(f){this.paths[this._path].push(f)},
_addPoint:function(f){this.paths[this._path].push([f.x,f.y])},_insertPoints:function(f,p){this.clearCache();this._path=p;this.paths[this._path]||(this.paths[this._path]=[]);e.forEach(f,this._addPoint,this)},_validateInputs:function(f,p){return null!==f&&void 0!==f&&(0>f||f>=this.paths.length)||null!==p&&void 0!==f&&(0>p||p>=this.paths[f].length)?!1:!0},getPoint:function(f,p){if(this._validateInputs(f,p))return new d(this.paths[f][p],this.spatialReference)},setPoint:function(f,p,r){if(this._validateInputs(f,
p))return this.clearCache(),this.paths[f][p]=[r.x,r.y],this},insertPoint:function(f,p,r){if(this._validateInputs(f)&&null!=p&&0<=p&&p<=this.paths[f].length)return this.clearCache(),this.paths[f].splice(p,0,[r.x,r.y]),this},removePath:function(f){if(this._validateInputs(f,null)){this.clearCache();f=this.paths.splice(f,1)[0];var p,r=f.length,m=this.spatialReference;for(p=0;p<r;p++)f[p]=new d(f[p],m);return f}},removePoint:function(f,p){if(this._validateInputs(f,p))return this.clearCache(),new d(this.paths[f].splice(p,
1)[0],this.spatialReference)},getExtent:function(){var f=this.getCacheValue("_extent");var p=this.getCacheValue("_partwise");if(f)return f=new n(f),f._partwise=p,f;f=this.paths;var r=f.length;if(r&&f[0].length){var m,v,z,A,D=m=f[0][0][0],E=v=f[0][0][1],F=Math.min,y=Math.max,x=this.spatialReference;p=[];var w,C;for(z=0;z<r;z++){var B=f[z];var I=w=B[0]&&B[0][0];var N=C=B[0]&&B[0][1];var V=B.length;for(A=0;A<V;A++){var Y=B[A];var ca=Y[0];Y=Y[1];D=F(D,ca);E=F(E,Y);m=y(m,ca);v=y(v,Y);I=F(I,ca);N=F(N,Y);
w=y(w,ca);C=y(C,Y)}p.push(new n({xmin:I,ymin:N,xmax:w,ymax:C,spatialReference:x?x.toJson():null}))}f={xmin:D,ymin:E,xmax:m,ymax:v,spatialReference:x?x.toJson():null};p=1<p.length?p:null;this.setCacheValue("_extent",f);this.setCacheValue("_partwise",p);f=new n(f);f._partwise=p;return f}},toJson:function(){var f={paths:q.clone3DArray(this.paths)},p=this.spatialReference;p&&(f.spatialReference=p.toJson());return f}});h.prototype=g.prototype;c.prototype=new h;Object.defineProperty(c.prototype,"paths",
{get:function(){this._unquantizeFn&&(this._pathsVal=this._unquantizeFn({paths:q.clone3DArray(this._pathsVal)}).paths,this._unquantizeFn=null);return this._pathsVal},set:function(f){this._pathsVal=f}});c.prototype.setupLazyUnquantization=function(f,p){this._unquantizeFn=f;this._pathsVal=p.paths};g.simpleConstructor=h;g.accessorConstructor=c;g.defaultProps=u;t.setObject("geometry.Polyline",g,l);l.geometry.defaultPolyline=u;return g})},"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h){function c(){}u={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0};var f=g(a,{declaredClass:"esri.geometry.Extent",type:"extent",xmin:0,ymin:0,xmax:0,ymax:0,constructor:function(p,r,m,v,z){q.isObject(p)?(q.mixin(this,p),this.spatialReference&&(this.spatialReference=h.createSpatialReference(this.spatialReference))):this.update(p,r,m,v,z);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new d((this.xmin+
this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},getTopLeft:function(){return new d(this.xmin,this.ymax,this.spatialReference)},getTopRight:function(){return new d(this.xmax,this.ymax,this.spatialReference)},getBottomLeft:function(){return new d(this.xmin,this.ymin,this.spatialReference)},getBottomRight:function(){return new d(this.xmax,this.ymin,this.spatialReference)},centerAt:function(p){var r=this.getCenter(),m=p.x-r.x;p=p.y-r.y;return new f(this.xmin+m,this.ymin+p,this.xmax+m,this.ymax+
p,this.spatialReference)},update:function(p,r,m,v,z){this.xmin=p;this.ymin=r;this.xmax=m;this.ymax=v;this.spatialReference=z;this.clearCache();return this},offset:function(p,r){return new f(this.xmin+p,this.ymin+r,this.xmax+p,this.ymax+r,this.spatialReference)},expand:function(p){var r=(1-p)/2;p=this.getWidth()*r;r*=this.getHeight();return new f(this.xmin+p,this.ymin+r,this.xmax-p,this.ymax-r,this.spatialReference)},intersects:function(p){if(!p)return!1;var r=p.type,m=this.spatialReference,v=p.spatialReference;
m&&v&&!m.equals(v)&&m._canProject(v)&&(p=m.isWebMercator()?n.geographicToWebMercator(p):n.webMercatorToGeographic(p,!0));switch(r){case "point":return this.contains(p);case "multipoint":return this._intersectsMultipoint(p);case "extent":return this._intersectsExtent(p);case "polygon":return this._intersectsPolygon(p);case "polyline":return this._intersectsPolyline(p)}},normalize:function(){var p=this._normalize(!1,!0);t.isArray(p)||(p=[p]);return p},shiftCentralMeridian:function(){return this._normalize(!0)},
bisect:function(){var p=this.spatialReference,r=p&&p._getInfo(),m=[],v=0;if(r&&this._isOutOfBounds(r)){var z=this;v=z.xmin;var A=z.ymin,D=z.ymax,E=r.valid[0],F=r.valid[1];z.getWidth()>2*F&&(z=z.getCenter(),z=new f(z.x-F,A,z.x+F,D,new k(p.toJson())));v=z.xmin-v;var y=this._normalizeX(z.xmin,r);r=this._normalizeX(z.xmax,r);y.frameId===r.frameId?m.push(new f(y.x,A,r.x,D,new k(p.toJson()))):m.push(new f(y.x,A,F,D,new k(p.toJson())),new f(E,A,r.x,D,new k(p.toJson())))}else m.push(this.getExtent());return{extents:m,
marginLeft:v}},_intersectsMultipoint:function(p){var r=p.points.length,m;for(m=0;m<r;m++)if(this.contains(p.getPoint(m)))return!0;return!1},_intersectsExtent:function(p){var r,m,v=!1;if(this.xmin<=p.xmin){var z=p.xmin;this.xmax<z?v=!0:r=Math.min(this.xmax,p.xmax)-z}else z=this.xmin,p.xmax<z?v=!0:r=Math.min(this.xmax,p.xmax)-z;if(this.ymin<=p.ymin){var A=p.ymin;this.ymax<A?v=!0:m=Math.min(this.ymax,p.ymax)-A}else A=this.ymin,p.ymax<A?v=!0:m=Math.min(this.ymax,p.ymax)-A;return v?null:new f(z,A,z+r,
A+m,this.spatialReference)},_intersectsPolygon:function(p){var r=[this.xmin,this.ymax],m=[this.xmax,this.ymax],v=[this.xmin,this.ymin],z=[this.xmax,this.ymin],A=[r,m,v,z];r=[[v,r],[r,m],[m,z],[z,v]];v=p.rings;z=v.length;var D=new d(0,0,this.spatialReference);var E=A.length;for(m=0;m<E;m++)if(D.update(A[m][0],A[m][1]),p.contains(D))return!0;D.setSpatialReference(p.spatialReference);for(m=0;m<z;m++)if(A=v[m],E=A.length){var F=A[0];D.update(F[0],F[1]);if(this.contains(D))return!0;for(p=1;p<E;p++){var y=
A[p];D.update(y[0],y[1]);if(this.contains(D)||this._intersectsLine([F,y],r))return!0;F=y}}return!1},_intersectsPolyline:function(p){var r=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],m,v=p.paths,z=v.length,A,D=new d(0,0,p.spatialReference);for(p=0;p<z;p++){var E=v[p];if(A=E.length){var F=E[0];D.update(F[0],F[1]);if(this.contains(D))return!0;for(m=1;m<A;m++){var y=
E[m];D.update(y[0],y[1]);if(this.contains(D)||this._intersectsLine([F,y],r))return!0;F=y}}}return!1},_intersectsLine:function(p,r){var m=b._getLineIntersection2,v,z=r.length;for(v=0;v<z;v++)if(m(p,r[v]))return!0;return!1},contains:function(p){if(!p)return!1;var r=p.type;if("point"===r){var m=this.spatialReference,v=p.spatialReference;r=p.x;p=p.y;m&&v&&!m.equals(v)&&m._canProject(v)&&(p=m.isWebMercator()?d.lngLatToXY(r,p):d.xyToLngLat(r,p,!0),r=p[0],p=p[1]);return r>=this.xmin&&r<=this.xmax&&p>=this.ymin&&
p<=this.ymax}return"extent"===r?this._containsExtent(p):!1},_containsExtent:function(p){var r=p.xmin,m=p.ymin,v=p.xmax,z=p.ymax,A=p.spatialReference;p=new d(r,m,A);r=new d(r,z,A);z=new d(v,z,A);m=new d(v,m,A);return this.contains(p)&&this.contains(r)&&this.contains(z)&&this.contains(m)?!0:!1},union:function(p){return new f(Math.min(this.xmin,p.xmin),Math.min(this.ymin,p.ymin),Math.max(this.xmax,p.xmax),Math.max(this.ymax,p.ymax),this.spatialReference)},getExtent:function(){var p=this.spatialReference;
return new f(this.xmin,this.ymin,this.xmax,this.ymax,p&&new k(p.toJson()))},_shiftCM:function(p){var r=this.getCacheValue("_shifted");if(!r){r=new f(this.toJson());var m=r.spatialReference;if(p=p||m._getInfo()){var v=this._getCM(p);if(v){var z=m._isWebMercator()?n.webMercatorToGeographic(v):v;r.xmin-=v.x;r.xmax-=v.x;m._isWebMercator()||(z.x=this._normalizeX(z.x,p).x);r.setSpatialReference(new k(q.substitute({Central_Meridian:z.x},4326===m.wkid?p.altTemplate:p.wkTemplate)))}}this.setCacheValue("_shifted",
r)}return r},_getCM:function(p){var r;this._isOutOfBounds(p)&&(r=this.getCenter());return r},_isOutOfBounds:function(p){var r=p.valid[0];p=p.valid[1];var m=this.xmin,v=this.xmax;return!(m>=r&&m<=p&&v>=r&&v<=p)},_normalize:function(p,r,m){var v=new f(this.toJson()),z=v.spatialReference;if(z&&(m=m||z._getInfo())){var A=e.map(this._getParts(m),function(D){return D.extent});return 2<A.length?p?this._shiftCM(m):v.update(m.valid[0],v.ymin,m.valid[1],v.ymax,z):2===A.length?p?this._shiftCM(m):r?A:{rings:e.map(A,
function(D){return[[D.xmin,D.ymin],[D.xmin,D.ymax],[D.xmax,D.ymax],[D.xmax,D.ymin],[D.xmin,D.ymin]]}),spatialReference:z}:A[0]||v}return v},_getParts:function(p){var r=this.getCacheValue("_parts");if(!r){r=[];var m=this.xmin,v=this.xmax,z=this.ymin,A=this.ymax,D=this.spatialReference,E=this.getWidth(),F=m,y=v,x=0,w=0;p=p||D._getInfo();var C=p.valid[0];var B=p.valid[1];w=this._normalizeX(m,p);m=w.x;x=w.frameId;w=this._normalizeX(v,p);v=w.x;w=w.frameId;p=m===v&&0<E;if(E>2*B){E=new f(F<y?m:v,z,B,A,D);
m=new f(C,z,F<y?v:m,A,D);B=new f(0,z,B,A,D);z=new f(C,z,0,A,D);D=[];C=[];E.contains(B)&&D.push(x);E.contains(z)&&C.push(x);m.contains(B)&&D.push(w);m.contains(z)&&C.push(w);for(A=x+1;A<w;A++)D.push(A),C.push(A);r.push({extent:E,frameIds:[x]},{extent:m,frameIds:[w]},{extent:B,frameIds:D},{extent:z,frameIds:C})}else m>v||p?r.push({extent:new f(m,z,B,A,D),frameIds:[x]},{extent:new f(C,z,v,A,D),frameIds:[w]}):r.push({extent:new f(m,z,v,A,D),frameIds:[x]});this.setCacheValue("_parts",r)}return r},_normalizeX:function(p,
r){var m=0,v=r.valid[0],z=r.valid[1];r=2*z;p>z?(m=Math.ceil(Math.abs(p-z)/r),p-=m*r):p<v&&(m=Math.ceil(Math.abs(p-v)/r),p+=m*r,m=-m);return{x:p,frameId:m}},toJson:function(){var p={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},r=this.spatialReference;r&&(p.spatialReference=r.toJson());return p}});c.prototype=f.prototype;f.simpleConstructor=c;f.defaultProps=u;t.setObject("geometry.Extent",f,l);l.geometry.defaultExtent=u;return f})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),
function(g,e,t,u,l,q){function k(d,n,b,h){if("point"===d.type){var c=n(d.x,d.y,h);return new d.constructor(c[0],c[1],new l(b))}if("extent"===d.type){c=n(d.xmin,d.ymin,h);var f=n(d.xmax,d.ymax,h);return new d.constructor(c[0],c[1],f[0],f[1],new l(b))}if("polyline"===d.type||"polygon"===d.type){c="polyline"===d.type;var p=[],r;g.forEach(c?d.paths:d.rings,function(v){p.push(r=[]);g.forEach(v,function(z){r.push(n(z[0],z[1],h))})});return c?new d.constructor({paths:p,spatialReference:new l(b)}):new d.constructor({rings:p,
spatialReference:new l(b)})}if("multipoint"===d.type){var m=[];g.forEach(d.points,function(v){m.push(n(v[0],v[1],h))});return new d.constructor({points:m,spatialReference:new l(b)})}}function a(d,n){d=d&&(null!=d.wkid?d:d.spatialReference);n=n&&(null!=n.wkid?n:n.spatialReference);return d&&n?n.equals(d)?!0:n._canProject(d):!1}t={canProject:a,project:function(d,n){var b=d&&d.spatialReference;n=n&&(null!=n.wkid?n:n.spatialReference);b&&n?b.equals(n)?d=new d.constructor(d.toJson()):a(b,n)?n.isWebMercator()?
d=k(d,q.lngLatToXY,{wkid:102100}):4326===n.wkid&&(d=k(d,q.xyToLngLat,{wkid:4326})):d=null:d=null;return d},lngLatToXY:q.lngLatToXY,xyToLngLat:q.xyToLngLat,metersPerDegree:q.metersPerDegree,geographicToWebMercator:function(d){return k(d,q.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(d,n){return k(d,q.xyToLngLat,{wkid:4326},n)}};e.mixin(e.getObject("geometry",!0,u),t);return t})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(g,
e,t,u){function l(a,d,n){return a instanceof u?new u(a.x+n*(d.x-a.x),a.y+n*(d.y-a.y)):[a[0]+n*(d[0]-a[0]),a[1]+n*(d[1]-a[1])]}function q(a,d){return 1E-8>Math.abs(a-d)}function k(a,d,n,b){var h=q(a[0],d[0])?1E10:(a[1]-d[1])/(a[0]-d[0]),c=q(n[0],b[0])?1E10:(n[1]-b[1])/(n[0]-b[0]),f=a[1]-h*a[0],p=n[1]-c*n[0];if(q(h,c)){if(q(f,p)){if(q(a[0],d[0]))if(Math.min(a[1],d[1])<Math.max(n[1],b[1])||Math.max(a[1],d[1])>Math.min(n[1],b[1])){a=(a[1]+d[1]+n[1]+b[1]-Math.min(a[1],d[1],n[1],b[1])-Math.max(a[1],d[1],
n[1],b[1]))/2;var r=(a-f)/h}else return null;else if(Math.min(a[0],d[0])<Math.max(n[0],b[0])||Math.max(a[0],d[0])>Math.min(n[0],b[0]))r=(a[0]+d[0]+n[0]+b[0]-Math.min(a[0],d[0],n[0],b[0])-Math.max(a[0],d[0],n[0],b[0]))/2,a=h*r+f;else return null;return[r,a]}return null}q(h,1E10)?(r=a[0],a=c*r+p):q(c,1E10)?(r=n[0],a=h*r+f):(r=-(f-p)/(h-c),a=a[1]===d[1]?a[1]:n[1]===b[1]?n[1]:h*r+f);return[r,a]}e={getLength:function(a,d){var n=d.x-a.x;a=d.y-a.y;return Math.sqrt(n*n+a*a)},_getLength:function(a,d){var n=
d[0]-a[0];a=d[1]-a[1];return Math.sqrt(n*n+a*a)},getPointOnLine:l,getMidpoint:function(a,d){return l(a,d,.5)},_equals:q,_getLineIntersection:k,getLineIntersection:function(a,d,n,b,h){(a=k([a.x,a.y],[d.x,d.y],[n.x,n.y],[b.x,b.y]))&&(a=new u(a[0],a[1],h));return a},_getLineIntersection2:function(a,d){var n=a[0],b=a[1],h=d[0],c=d[1];d=n[0];n=n[1];a=b[0];b=b[1];var f=h[0],p=h[1];h=c[0]-f;f=d-f;var r=a-d;c=c[1]-p;p=n-p;var m=b-n,v=c*r-h*m;if(0===v)return!1;h=(h*p-c*f)/v;f=(r*p-m*f)/v;return 0<=h&&1>=h&&
0<=f&&1>=f?[d+h*(a-d),n+h*(b-n)]:!1},_pointLineDistance:function(a,d){var n=d[0],b=d[1];d=n[0];var h=n[1];n=a[0];a=a[1];var c=b[0]-d,f=b[1]-h,p=n-d,r=a-h;b=Math.sqrt;var m=Math.pow,v=b(m(c,2)+m(f,2));p=(p*c+r*f)/(v*v);h+=p*f;return b(m(n-(d+p*c),2)+m(a-h,2))}};g.mixin(g.getObject("geometry",!0,t),e);return e})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h){function c(){}function f(){}u={type:"polygon",rings:null};var p=g(a,{declaredClass:"esri.geometry.Polygon",type:"polygon",rings:null,constructor:function(r){this.rings=[];this._ring=0;r&&(t.isArray(r)?this.rings=t.isArray(r[0][0])?r:[r]:r.rings?q.mixin(this,r):this.spatialReference=r,this.spatialReference&&(this.spatialReference=h.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(r){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=
[];t.isArray(r[0])?e.forEach(r,this._addPointArr,this):e.forEach(r,this._addPoint,this);return this},_addPointArr:function(r){this.rings[this._ring].push(r)},_addPoint:function(r){this.rings[this._ring].push([r.x,r.y])},_insertPoints:function(r,m){this.clearCache();this._ring=m;this.rings[this._ring]||(this.rings[this._ring]=[]);e.forEach(r,this._addPoint,this)},_validateInputs:function(r,m){return null!==r&&void 0!==r&&(0>r||r>=this.rings.length)||null!==m&&void 0!==r&&(0>m||m>=this.rings[r].length)?
!1:!0},getPoint:function(r,m){if(this._validateInputs(r,m))return new d(this.rings[r][m],this.spatialReference)},setPoint:function(r,m,v){if(this._validateInputs(r,m))return this.clearCache(),this.rings[r][m]=[v.x,v.y],this},insertPoint:function(r,m,v){if(this._validateInputs(r)&&null!=m&&0<=m&&m<=this.rings[r].length)return this.clearCache(),this.rings[r].splice(m,0,[v.x,v.y]),this},removeRing:function(r){if(this._validateInputs(r,null)){this.clearCache();r=this.rings.splice(r,1)[0];var m,v=r.length,
z=this.spatialReference;for(m=0;m<v;m++)r[m]=new d(r[m],z);return r}},removePoint:function(r,m){if(this._validateInputs(r,m))return this.clearCache(),new d(this.rings[r].splice(m,1)[0],this.spatialReference)},getExtent:function(){var r=this.getCacheValue("_extent");var m=this.getCacheValue("_partwise");if(r)return r=new n(r),r._partwise=m,r;r=this.rings;var v=r.length;if(v&&r[0].length){var z,A,D,E,F=z=r[0][0][0],y=A=r[0][0][1],x=Math.min,w=Math.max,C=this.spatialReference;m=[];var B,I;for(D=0;D<
v;D++){var N=r[D];var V=B=N[0]&&N[0][0];var Y=I=N[0]&&N[0][1];var ca=N.length;for(E=0;E<ca;E++){var J=N[E];var O=J[0];J=J[1];F=x(F,O);y=x(y,J);z=w(z,O);A=w(A,J);V=x(V,O);Y=x(Y,J);B=w(B,O);I=w(I,J)}m.push(new n({xmin:V,ymin:Y,xmax:B,ymax:I,spatialReference:C?C.toJson():null}))}r={xmin:F,ymin:y,xmax:z,ymax:A,spatialReference:C?C.toJson():null};m=1<m.length?m:null;this.setCacheValue("_extent",r);this.setCacheValue("_partwise",m);r=new n(r);r._partwise=m;return r}},contains:function(r){var m=this.rings,
v=!1,z,A,D,E=m.length;var F=this.spatialReference;var y=r.spatialReference;var x=r.x;r=r.y;F&&y&&!F.equals(y)&&F._canProject(y)&&(r=F.isWebMercator()?d.lngLatToXY(x,r):d.xyToLngLat(x,r,!0),x=r[0],r=r[1]);for(D=0;D<E;D++){F=m[D];var w=F.length;for(A=z=0;A<w;A++){z++;z===w&&(z=0);y=F[A];var C=F[z];(y[1]<r&&C[1]>=r||C[1]<r&&y[1]>=r)&&y[0]+(r-y[1])/(C[1]-y[1])*(C[0]-y[0])<x&&(v=!v)}}return v},getCentroid:function(){var r=this.getCacheValue("_centroid");if(void 0!==r)return r;r=this.rings;var m,v,z=[],
A,D,E=Infinity,F=-Infinity,y=Infinity,x=-Infinity;e.forEach(r,function(B){w=m=v=0;e.forEach(B,function(I,N){N<B.length-1&&(A=B[N+1],D=I[0]*A[1]-A[0]*I[1],w+=(I[0]+A[0])*D,m+=(I[1]+A[1])*D,v+=D,I[0]<E&&(E=I[0]),I[0]>F&&(F=I[0]),I[1]<y&&(y=I[1]),I[1]>x&&(x=I[1]))});0<v&&(v*=-1);v&&z.push([w,m,v/2])});z.sort(function(B,I){return B[2]-I[2]});var w=m=void 0;if(z[0]){var C=6*z[0][2];w=z[0][0]/C;m=z[0][1]/C;if(w<E||w>F||m<y||m>x)w=m=void 0}if(void 0===w||void 0===m)if(r=r[0]&&r[0].length?this._getLineCentroid(r[0]):
null)w=r.x,m=r.y;r=isNaN(w)||isNaN(m)?null:new d(w,m,this.spatialReference);this.setCacheValue("_centroid",r);return r},_getLineCentroid:function(r){var m=0,v=0,z=0,A={x:0,y:0},D={x:0,y:0},E,F=r.length,y;for(E=0;E<F-1;E++){var x=r[E];var w=r[E+1];if(x&&w){A.x=x[0];A.y=x[1];D.x=w[0];D.y=w[1];var C=b.getLength(A,D);0<C&&(m+=C,x=b.getMidpoint(x,w),v+=C*x[0],z+=C*x[1])}}0<m?y={x:v/m,y:z/m}:r[0]&&(y={x:r[0][0],y:r[0][1]});return y},isClockwise:function(r){var m=0,v,z=r.length,A=t.isArray(r[0])?function(D,
E){return D[0]*E[1]-E[0]*D[1]}:function(D,E){return D.x*E.y-E.x*D.y};for(v=0;v<z;v++)m+=A(r[v],r[(v+1)%z]);return 0>=m/2},isSelfIntersecting:function(r){r=r||this;var m,v,z,A,D,E=r.rings.length;for(z=0;z<E;z++){for(m=0;m<r.rings[z].length-1;m++){var F=[[r.rings[z][m][0],r.rings[z][m][1]],[r.rings[z][m+1][0],r.rings[z][m+1][1]]];for(v=z+1;v<E;v++)for(A=0;A<r.rings[v].length-1;A++){var y=[[r.rings[v][A][0],r.rings[v][A][1]],[r.rings[v][A+1][0],r.rings[v][A+1][1]]];if((D=b._getLineIntersection2(F,y))&&
!(D[0]===F[0][0]&&D[1]===F[0][1]||D[0]===y[0][0]&&D[1]===y[0][1]||D[0]===F[1][0]&&D[1]===F[1][1]||D[0]===y[1][0]&&D[1]===y[1][1]))return!0}}A=r.rings[z].length;if(!(4>=A))for(m=0;m<A-3;m++){var x=A-1;0===m&&(x=A-2);F=[[r.rings[z][m][0],r.rings[z][m][1]],[r.rings[z][m+1][0],r.rings[z][m+1][1]]];for(v=m+2;v<x;v++)if(y=[[r.rings[z][v][0],r.rings[z][v][1]],[r.rings[z][v+1][0],r.rings[z][v+1][1]]],(D=b._getLineIntersection2(F,y))&&!(D[0]===F[0][0]&&D[1]===F[0][1]||D[0]===y[0][0]&&D[1]===y[0][1]||D[0]===
F[1][0]&&D[1]===F[1][1]||D[0]===y[1][0]&&D[1]===y[1][1]))return!0}}return!1},toJson:function(){var r={rings:q.clone3DArray(this.rings)},m=this.spatialReference;m&&(r.spatialReference=m.toJson());return r}});c.prototype=p.prototype;f.prototype=new c;Object.defineProperty(f.prototype,"rings",{get:function(){this._unquantizeFn&&(this._ringsVal=this._unquantizeFn({rings:q.clone3DArray(this._ringsVal)}).rings,this._unquantizeFn=null);return this._ringsVal},set:function(r){this._ringsVal=r}});f.prototype.setupLazyUnquantization=
function(r,m){this._unquantizeFn=r;this._ringsVal=m.rings};p.simpleConstructor=c;p.accessorConstructor=f;p.defaultProps=u;p.createEllipse=function(r){var m=r.center.x,v=r.center.y,z=r.longAxis,A=r.shortAxis,D=r.numberOfPoints,E=r.map,F;r=[];var y=2*Math.PI/D;for(F=0;F<D;F++){var x=Math.cos(F*y);var w=Math.sin(F*y);x=E.toMap({x:z*x+m,y:A*w+v});r.push(x)}r.push(r[0]);m=new p(E.spatialReference);m.addRing(r);return m};p.createCircle=function(r){return p.createEllipse({center:r.center,longAxis:r.r,shortAxis:r.r,
numberOfPoints:r.numberOfPoints,map:r.map})};p.fromExtent=function(r){var m=r.normalize();r=r.spatialReference;return new p({rings:e.map(m,function(v){return[[v.xmin,v.ymin],[v.xmin,v.ymax],[v.xmax,v.ymax],[v.xmax,v.ymin],[v.xmin,v.ymin]]}),spatialReference:r?r.toJson():null})};t.setObject("geometry.Polygon",p,l);l.geometry.defaultPolygon=u;l.geometry.createEllipse=p.createEllipse;l.geometry.createCircle=p.createCircle;l.geometry.isClockwise=p.prototype.isClockwise;l.geometry.polygonSelfIntersecting=
p.prototype.isSelfIntersecting;return p})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(g,e,t,u,l,q,k,a,d,n){function b(){}function h(){}t={type:"multipoint",points:null};g=g(k,{declaredClass:"esri.geometry.Multipoint",type:"multipoint",points:null,constructor:function(c){this.points=[];c&&(c.points?l.mixin(this,c):this.spatialReference=c,this.spatialReference&&
(this.spatialReference=n.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(c){this.clearCache();e.isArray(c)?this.points.push(c):this.points.push([c.x,c.y]);return this},removePoint:function(c){if(this._validateInputs(c))return this.clearCache(),new a(this.points.splice(c,1)[0],this.spatialReference)},getExtent:function(){var c=this.getCacheValue("_extent");if(c)return new d(c);c=this.points;var f=c.length;if(f){var p=c[0],r,m,v=r=p[0],z=m=p[1],A=Math.min,D=Math.max,
E=this.spatialReference,F;for(F=0;F<f;F++){p=c[F];var y=p[0];p=p[1];v=A(v,y);z=A(z,p);r=D(r,y);m=D(m,p)}c={xmin:v,ymin:z,xmax:r,ymax:m,spatialReference:E?E.toJson():null};this.setCacheValue("_extent",c);return new d(c)}},_validateInputs:function(c){return null===c||0>c||c>=this.points.length?!1:!0},getPoint:function(c){if(this._validateInputs(c))return c=this.points[c],new a(c[0],c[1],this.spatialReference)},setPoint:function(c,f){if(this._validateInputs(c))return this.clearCache(),this.points[c]=
[f.x,f.y],this},toJson:function(){var c={points:l.clone2DArray(this.points)},f=this.spatialReference;f&&(c.spatialReference=f.toJson());return c}});b.prototype=g.prototype;h.prototype=new b;Object.defineProperty(h.prototype,"points",{get:function(){this._unquantizeFn&&(this._pointsVal=this._unquantizeFn({points:l.clone2DArray(this._pointsVal)}).points,this._unquantizeFn=null);return this._pointsVal},set:function(c){this._pointsVal=c}});h.prototype.setupLazyUnquantization=function(c,f){this._unquantizeFn=
c;this._pointsVal=f.points};g.simpleConstructor=b;g.accessorConstructor=h;g.defaultProps=t;e.setObject("geometry.Multipoint",g,u);u.geometry.defaultMultipoint=t;return g})},"esri/symbols/jsonUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "),function(g,e,t,u,l,q,k,a,d,n,b){var h={createDefaultSymbol:function(c){switch(c){case "esriGeometryPoint":case "esriGeometryMultipoint":var f=
h.createDefaultMarkerSymbol();break;case "esriGeometryPolyline":f=h.createDefaultLineSymbol();break;case "esriGeometryPolygon":case "esriGeometryEnvelope":case "esriGeometryMultiPatch":f=h.createDefaultFillSymbol()}return f},createDefaultMarkerSymbol:function(){return new l},createDefaultLineSymbol:function(){return new k},createDefaultFillSymbol:function(){return new d},getFirstSupportedSymbol:function(c){var f;e.some(c,function(p){p&&-1<h.supportedSymbolTypes.indexOf(p.type)&&(f=p);return!!f});
return f},isPointSymbol:function(c){return c?-1<h.supportedPointSymbolTypes.indexOf(c.type):!1},supportedPointSymbolTypes:["esriSMS","esriPMS","esriTS"],supportedSymbolTypes:"esriSMS esriPMS esriTS esriSLS esriCLS esriSFS esriPFS".split(" "),fromJson:function(c,f){var p=null;switch(c.type){case "esriSMS":p=new l(c);break;case "esriPMS":p=new q(c);break;case "esriTS":p=new b(c);break;case "esriSLS":p=void 0!==c.cap?new a(c):new k(c);break;case "esriCLS":p=new a(c);break;case "esriSFS":p=new d(c);break;
case "esriPFS":p=new n(c);break;default:p=(c=f&&f.geometryType)?h.createDefaultSymbol(c):null}return p},getShapeDescriptors:function(c){return c&&c.getShapeDescriptors?c.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null}}};g.mixin(g.getObject("symbol",!0,u),h);return h})},"esri/symbols/SimpleMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(g,e,t,u,l,q,
k,a,d){var n={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_TRIANGLE:"triangle",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},b={style:n.STYLE_CIRCLE,color:[255,255,255,.25],size:12,angle:0,xoffset:0,yoffset:0};g=g(a,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",triangle:"esriSMSTriangle",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},
constructor:function(h,c,f,p){h?e.isString(h)?(this.style=h,c&&(this.size=c),f&&(this.outline=f),p&&(this.color=p)):(this.style=k.valueOf(this._styles,this.style),h.outline&&(this.outline=new d(h.outline))):(e.mixin(this,b),this.size=l.pt2px(this.size),this.outline=new d(this.outline),this.color=new t(this.color));this.style||(this.style=n.STYLE_CIRCLE)},setStyle:function(h){this.style=h;return this},setPath:function(h){this.path=h;this.setStyle(n.STYLE_PATH);return this},setOutline:function(h){this.outline=
h;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return this.color},_setDim:function(h,c,f){this._targetWidth=h;this._targetHeight=c;this._spikeSize=f},getShapeDescriptors:function(){var h,c=this.style,f=(this.size||l.pt2px(b.size))/2,p=0-f,r=0+f,m=0-f,v=0+f;switch(c){case n.STYLE_CIRCLE:var z={type:"circle",cx:0,cy:0,r:f};var A=this.getFill();if(h=this.getStroke())h.style=h.style||"Solid";break;case n.STYLE_CROSS:z={type:"path",path:"M "+p+",0 L "+
r+",0 M 0,"+m+" L 0,"+v+" E"};A=null;h=this.getStroke();break;case n.STYLE_DIAMOND:z={type:"path",path:"M "+p+",0 L 0,"+m+" L "+r+",0 L 0,"+v+" L "+p+",0 Z"};A=this.getFill();h=this.getStroke();break;case n.STYLE_SQUARE:z={type:"path",path:"M "+p+","+v+" L "+p+","+m+" L "+r+","+m+" L "+r+","+v+" L "+p+","+v+" Z"};A=this.getFill();h=this.getStroke();break;case n.STYLE_TRIANGLE:z={type:"path",path:"M "+p+","+v+" L 0,"+m+" L "+r+","+v+" L "+p+","+v+" Z"};A=this.getFill();h=this.getStroke();break;case n.STYLE_X:z=
{type:"path",path:"M "+p+","+v+" L "+r+","+m+" M "+p+","+m+" L "+r+","+v+" E"};A=null;h=this.getStroke();break;case n.STYLE_PATH:z={type:"path",path:this.path||""},A=this.getFill(),h=this.getStroke()}return{defaultShape:z,fill:A,stroke:h}},toJson:function(){var h=this.style,c=this.outline,f=e.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[h]||"esriSMSCircle"});c&&(f.outline=c.toJson());"x"===h||"cross"===h?delete f.color:"target"===h&&(f.style="esriSMSSquare",delete f.color,
0<this._targetHeight&&0<this._targetWidth&&(f.size=l.px2pt(Math.max(this._targetHeight,this._targetWidth))));f.path=this.path;return k.fixJson(f)}});e.mixin(g,n);g.defaultProps=b;e.setObject("symbol.SimpleMarkerSymbol",g,q);q.symbol.defaultSimpleMarkerSymbol=b;return g})},"esri/symbols/MarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(g,e,t,u,l,q){g=g(q,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,
size:12,constructor:function(k){k&&e.isObject(k)&&(this.size="auto"===this.size?this.size:u.pt2px(this.size),this.xoffset=u.pt2px(this.xoffset),this.yoffset=u.pt2px(this.yoffset),this.angle&&(this.angle*=-1))},setAngle:function(k){this.angle=k;return this},setSize:function(k){this.size=k;return this},setOffset:function(k,a){this.xoffset=k;this.yoffset=a;return this},toJson:function(){var k=u.px2pt(this.size);k=isNaN(k)?void 0:k;var a=u.px2pt(this.xoffset);a=isNaN(a)?void 0:a;var d=u.px2pt(this.yoffset);
d=isNaN(d)?void 0:d;return e.mixin(this.inherited("toJson",arguments),{size:"auto"===this.size?this.size:k,angle:this.angle&&-1*this.angle,xoffset:a,yoffset:d})}});e.setObject("symbol.MarkerSymbol",g,l);return g})},"esri/symbols/Symbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "),function(g,e,t,u,l,q){g=g(null,{declaredClass:"esri.symbol.Symbol",color:new q([0,0,0,1]),type:null,constructor:function(k){k&&e.isObject(k)&&(e.mixin(this,k),this.color&&
l.isDefined(this.color[0])&&(this.color=q.toDojoColor(this.color)),(k=this.type)&&0===k.indexOf("esri")&&(this.type={esriSMS:"simplemarkersymbol",esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol",esriSHD:"shieldlabelsymbol"}[k]))},setColor:function(k){this.color=k;return this},toJson:function(){return{color:q.toJsonColor(this.color)}}});e.setObject("symbol.Symbol",g,u);return g})},"esri/Color":function(){define(["dojo/_base/declare",
"dojo/_base/Color","dojo/has","./kernel"],function(g,e,t,u){var l=g([e],{declaredClass:"esri.Color"});l.toJsonColor=function(q){return q&&[q.r,q.g,q.b,1<q.a?q.a:Math.round(255*q.a)]};l.toDojoColor=function(q){return q&&new l([q[0],q[1],q[2],q[3]/255])};t="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(g=0;g<t.length;g++)l[t[g]]=e[t[g]];return u.Color=l})},"esri/symbols/SimpleLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "),
function(g,e,t,u,l,q,k,a){var d={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"},n={color:[0,0,0,1],style:d.STYLE_SOLID,width:1};g=g(a,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",marker:null,_styles:{solid:"esriSLSSolid",
dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(b,h,c){b?e.isString(b)?(this.style=b,h&&(this.color=h),c&&(this.width=c)):(this.style=k.valueOf(this._styles,b.style)||d.STYLE_SOLID,this.marker=
b.marker):(e.mixin(this,n),this.color=new t(this.color),this.width=l.pt2px(this.width))},setStyle:function(b){this.style=b;return this},setMarker:function(b){this.marker=b},getStroke:function(){return this.style===d.STYLE_NULL||0===this.width?null:{color:this.color,style:this.style,width:this.width}},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){return k.fixJson(e.mixin(this.inherited("toJson",
arguments),{type:"esriSLS",style:this._styles[this.style],marker:this.marker?e.clone(this.marker):void 0}))}});e.mixin(g,d);g.defaultProps=n;e.setObject("symbol.SimpleLineSymbol",g,q);q.symbol.defaultSimpleLineSymbol=n;return g})},"esri/symbols/LineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(g,e,t,u,l,q){g=g(q,{declaredClass:"esri.symbol.LineSymbol",constructor:function(k){e.isObject(k)?this.width=u.pt2px(this.width):
this.width=12},setWidth:function(k){this.width=k;return this},toJson:function(){var k=u.px2pt(this.width);k=isNaN(k)?void 0:k;return e.mixin(this.inherited("toJson",arguments),{width:k})}});e.setObject("symbol.LineSymbol",g,l);return g})},"esri/symbols/PictureMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "),function(g,e,t,u,l,q,k,a){var d={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};g=
g(a,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(n,b,h){n?e.isString(n)?(this.url=n,b&&(this.width=b),h&&(this.height=h)):(this.width=u.pt2px(null==n.width?d.width:n.width),this.height=u.pt2px(null==n.height?d.height:n.height),b=n.imageData,9>t("ie")||!b||(h=this.url,this.url="data:"+(n.contentType||"image")+";base64,"+b,this.imageData=h)):(e.mixin(this,d),this.width=u.pt2px(this.width),this.height=u.pt2px(this.height))},getStroke:function(){return null},
getFill:function(){return null},setWidth:function(n){this.width=n;return this},setHeight:function(n){this.height=n;return this},setUrl:function(n){n!==this.url&&(delete this.imageData,delete this.contentType);this.url=n;return this},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var n=this.url,b=this.imageData;if(0===n.indexOf("data:")){var h=
n;n=b;b=h.indexOf(";base64,")+8;b=h.substr(b)}!e.isString(n)||0!==n.indexOf("/")&&0!==n.indexOf("//")&&0!==n.indexOf("./")&&0!==n.indexOf("../")||(n=k.getAbsoluteUrl(n));h=u.px2pt(this.width);h=isNaN(h)?void 0:h;var c=u.px2pt(this.height);c=isNaN(c)?void 0:c;n=q.fixJson(e.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:n,imageData:b,contentType:this.contentType,width:h,height:c}));delete n.color;delete n.size;n.imageData||delete n.imageData;return n}});g.defaultProps=d;e.setObject("symbol.PictureMarkerSymbol",
g,l);l.symbol.defaultPictureMarkerSymbol=d;return g})},"esri/symbols/CartographicLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "),function(g,e,t,u,l,q,k,a){var d={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",
STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},n={color:[0,0,0,1],style:d.STYLE_SOLID,width:1,cap:d.CAP_BUTT,join:d.JOIN_MITER,miterLimit:10};g=g(a,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",
bevel:"esriLJSBevel"},constructor:function(b,h,c,f,p,r){b?e.isString(b)?(this.style=b,h&&(this.color=h),void 0!==c&&(this.width=c),f&&(this.cap=f),p&&(this.join=p),void 0!==r&&(this.miterLimit=r)):(this.cap=k.valueOf(this._caps,b.cap),this.join=k.valueOf(this._joins,b.join),this.width=l.pt2px(b.width),this.miterLimit=l.pt2px(b.miterLimit)):(e.mixin(this,n),this.color=new t(this.color),this.width=l.pt2px(this.width),this.miterLimit=l.pt2px(this.miterLimit))},setCap:function(b){this.cap=b;return this},
setJoin:function(b){this.join=b;return this},setMiterLimit:function(b){this.miterLimit=b;return this},getStroke:function(){return e.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===d.JOIN_MITER?this.miterLimit:this.join})},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){var b=l.px2pt(this.miterLimit);b=isNaN(b)?void 0:b;return k.fixJson(e.mixin(this.inherited("toJson",
arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:b}))}});e.mixin(g,d);g.defaultProps=n;e.setObject("symbol.CartographicLineSymbol",g,q);q.symbol.defaultCartographicLineSymbol=n;return g})},"esri/symbols/SimpleFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "),function(g,e,t,u,l,q,k,a,d,n){var b={STYLE_SOLID:"solid",STYLE_NULL:"none",
STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"},h={style:b.STYLE_SOLID,color:[0,0,0,.25]};g=g(a,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",
vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(c,f,p){c?e.isString(c)?(this.style=c,void 0!==f&&(this.outline=f),void 0!==p&&(this.color=p)):this.style=k.valueOf(this._styles,c.style):(e.mixin(this,h),this.outline=new d(this.outline),this.color=new t(this.color))},setStyle:function(c){this.style=c;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},
getFill:function(){var c=this.style;return c===b.STYLE_NULL?null:c===b.STYLE_SOLID?this.color:e.mixin({},l.defaultPattern,{src:n.toUrl("../images/symbol/sfs/"+c+".png"),width:10,height:10})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){return k.fixJson(e.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}))}});e.mixin(g,b);g.defaultProps=
h;e.setObject("symbol.SimpleFillSymbol",g,q);q.symbol.defaultSimpleFillSymbol=h;return g})},"esri/symbols/FillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "),function(g,e,t,u,l,q){g=g(l,{declaredClass:"esri.symbol.FillSymbol",constructor:function(k){k&&e.isObject(k)&&k.outline&&(this.outline=new q(k.outline))},setOutline:function(k){this.outline=k;return this},toJson:function(){var k=this.inherited("toJson",arguments);this.outline&&
(k.outline=this.outline.toJson());return k}});e.setObject("symbol.FillSymbol",g,u);return g})},"esri/symbols/PictureFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "),function(g,e,t,u,l,q,k,a){var d={xoffset:0,yoffset:0,width:12,height:12};g=g(a,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(n,b,h,c){n?e.isString(n)?(this.url=
n,void 0!==b&&(this.outline=b),void 0!==h&&(this.width=h),void 0!==c&&(this.height=c)):(this.xoffset=u.pt2px(n.xoffset),this.yoffset=u.pt2px(n.yoffset),this.width=u.pt2px(n.width),this.height=u.pt2px(n.height),b=n.imageData,9>t("ie")||!b||(h=this.url,this.url="data:"+(n.contentType||"image")+";base64,"+b,this.imageData=h)):(e.mixin(this,d),this.width=u.pt2px(this.width),this.height=u.pt2px(this.height))},setWidth:function(n){this.width=n;return this},setHeight:function(n){this.height=n;return this},
setOffset:function(n,b){this.xoffset=n;this.yoffset=b;return this},setUrl:function(n){n!==this.url&&(delete this.imageData,delete this.contentType);this.url=n;return this},setXScale:function(n){this.xscale=n;return this},setYScale:function(n){this.yscale=n;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return e.mixin({},u.defaultPattern,{src:this.url,width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset})},getShapeDescriptors:function(){return{defaultShape:{type:"path",
path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var n=this.url,b=this.imageData;if(0===n.indexOf("data:")){var h=n;n=b;b=h.indexOf(";base64,")+8;b=h.substr(b)}!e.isString(n)||0!==n.indexOf("/")&&0!==n.indexOf("//")&&0!==n.indexOf("./")&&0!==n.indexOf("../")||(n=k.getAbsoluteUrl(n));h=u.px2pt(this.width);h=isNaN(h)?void 0:h;var c=u.px2pt(this.height);c=isNaN(c)?void 0:c;var f=u.px2pt(this.xoffset);f=isNaN(f)?void 0:f;var p=u.px2pt(this.yoffset);
p=isNaN(p)?void 0:p;n=q.fixJson(e.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:n,imageData:b,contentType:this.contentType,width:h,height:c,xoffset:f,yoffset:p,xscale:this.xscale,yscale:this.yscale}));n.imageData||delete n.imageData;return n}});g.defaultProps=d;e.setObject("symbol.PictureFillSymbol",g,l);l.symbol.defaultPictureFillSymbol=d;return g})},"esri/symbols/TextSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "),
function(g,e,t,u,l,q,k,a,d){var n={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:u.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},b={start:"left",middle:"center",end:"right"},h={left:"start",center:"middle",right:"end",justify:"start"},c={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},f=document.createElement("canvas");g=g(a,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(p,
r,m){e.mixin(this,n);this.font=new d(this.font);this.color=new k(this.color);p&&(e.isObject(p)?(e.mixin(this,p),this.color&&q.isDefined(this.color[0])&&(this.color=k.toDojoColor(this.color)),this.type="textsymbol",this.font=new d(this.font),this.xoffset=u.pt2px(this.xoffset),this.yoffset=u.pt2px(this.yoffset),this.angle&&(this.angle*=-1),this.haloSize&&(this.haloSize=u.pt2px(this.haloSize)),this.haloColor&&(this.haloColor=k.toDojoColor(this.haloColor))):(this.text=p,r&&(this.font=r),m&&(this.color=
m)));this.setAlign(this.align||this.getSVGAlign())},setFont:function(p){this.font=p;return this},setSize:function(p){this.font.size=p;return this},setAngle:function(p){this.angle=p;return this},setOffset:function(p,r){this.xoffset=p;this.yoffset=r;return this},setHaloColor:function(p){this.haloColor=p;return this},setHaloSize:function(p){this.haloSize=p;return this},setAlign:function(p){this.align=p;this.setHorizontalAlignment(p&&b[p.toLowerCase()]||"center");return this},setHorizontalAlignment:function(p){this.horizontalAlignment=
p;return this},getSVGAlign:function(){var p=this.horizontalAlignment;return p=p&&h[p.toLowerCase()]||"middle"},setVerticalAlignment:function(p){this.verticalAlignment=p;return this},getSVGBaseline:function(){var p=this.verticalAlignment;return p&&c[p.toLowerCase()]||"alphabetic"},getSVGBaselineShift:function(){return"bottom"===this.verticalAlignment?"super":null},setDecoration:function(p){this.decoration=p;this.font||this.setFont(new d);this.font.setDecoration(p);return this},setRotated:function(p){this.rotated=
p;return this},setKerning:function(p){this.kerning=p;return this},setText:function(p){this.text=p;return this},getStroke:function(){return null},getFill:function(){return this.color},getWidth:function(){var p=f&&f.getContext&&f.getContext("2d");if(p){var r=this.font;p.font=(r.style?r.style:u.defaultFont.style)+" "+(r.weight?r.weight:u.defaultFont.weight)+" "+(r.size?r.size:u.defaultFont.size)+"px "+(r.family?r.family:u.defaultFont.family);return p.measureText(this.text).width}p=this.getHeight();r=
0;var m;for(m=0;m<this.text.length;m++){var v=this.text.charAt(m);r=v==v.toUpperCase()?r+.7*p:r+.5*p}return r},getHeight:function(){return u.normalizedLength(this.font.size)},getShapeDescriptors:function(){var p=this.font;if(p){var r={};p.size&&(r.size=p.size);p.style&&(r.style=p.style);p.variant&&(r.variant=p.variant);p.decoration&&(r.decoration=p.decoration);p.weight&&(r.weight=p.weight);p.family&&(r.family=p.family)}return{defaultShape:{type:"text",text:this.text,x:0,y:this.getHeight()/4,align:"middle",
decoration:this.decoration||p&&p.decoration,rotated:this.rotated,kerning:this.kerning},font:r,fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var p=u.px2pt(this.xoffset),r=u.px2pt(this.yoffset),m=u.px2pt(this.haloSize);p=isNaN(p)?void 0:p;r=isNaN(r)?void 0:r;m=isNaN(m)?void 0:m;return q.fixJson(e.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:m,haloColor:this.haloColor&&
k.toJsonColor(this.haloColor),verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:p,yoffset:r,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}))}});e.mixin(g,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});g.defaultProps=
n;e.setObject("symbol.TextSymbol",g,l);l.symbol.defaultTextSymbol=n;return g})},"esri/symbols/Font":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "),function(g,e,t,u,l,q){g=g(null,{declaredClass:"esri.symbol.Font",constructor:function(k,a,d,n,b){k?e.isObject(k)?e.mixin(this,k):(this.size=k,parseFloat(this.size)==this.size&&(this.size+="px"),void 0!==a&&(this.style=a),void 0!==d&&(this.variant=d),void 0!==n&&(this.weight=n),void 0!==b&&
(this.family=b)):e.mixin(this,u.defaultFont);parseFloat(this.size)==this.size&&(this.size+="pt");9>t("ie")&&this.size&&e.isString(this.size)&&-1<this.size.indexOf("em")&&(this.size=u.pt2px(12*parseFloat(this.size))+"px");this.size=this._convert2PxSize(this.size)},setSize:function(k){this.size=this._convert2PxSize(k);return this},_convert2PxSize:function(k){var a;parseFloat(k)==k?a=k:e.isString(k)&&(-1<k.indexOf("pt")?a=u.pt2px(parseFloat(k)):-1<k.indexOf("px")?a=parseFloat(k):-1<k.indexOf("em")?a=
u.pt2px(12*parseFloat(k)):-1<k.indexOf("%")&&(a=u.pt2px(.12*parseFloat(k))));return a},setStyle:function(k){this.style=k;return this},setVariant:function(k){this.variant=k;return this},setWeight:function(k){this.weight=k;return this},setFamily:function(k){this.family=k;return this},setDecoration:function(k){this.decoration=k;return this},toJson:function(){return q.fixJson({size:u.px2pt(this.size),style:this.style,decoration:this.decoration,weight:this.weight,family:this.family})}});e.mixin(g,{STYLE_NORMAL:"normal",
STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});e.setObject("symbol.Font",g,l);return g})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils ./support/requestUtils".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h,c,f,p,r,m,v,z){function A(U){U=new q(U);return(U.host+(U.port?":"+U.port:"")).toLowerCase()}function D(U){return this._xhr?this._xhr.getResponseHeader(U):null}function E(U,ba){var Z=h.objectToQuery(U.content);Z&&(U.url+=(-1===U.url.indexOf("?")?"?":"\x26")+Z);if(2E3<U.url.length){if("data:"!==U.url.toLowerCase().slice(0,5))return U=new u,U.reject(l.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),U;if(3E6<U.url.length)return U=
new u,U.reject(l.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),U}var fa=new Image;ba.allowImageDataAccess&&(fa.crossOrigin=U.withCredentials?"use-credentials":"anonymous");var pa=!1,da=new u(function(ha){pa=!0;fa.onload=fa.onerror=fa.onabort=null;fa.src=""});ba=function(ha){fa.onload=fa.onerror=fa.onabort=null;pa||da.reject(Error("Unable to load the resource"))};fa.onload=function(){fa.onload=fa.onerror=fa.onabort=null;pa||da.resolve(this)};
fa.onerror=ba;fa.onabort=ba;fa.alt="";fa.src=U.url;return da}function F(U,ba,Z,fa){var pa=!1,da=!1,ha=!1,P;if(r.isDefined(ba))if(l.isObject(ba)){pa=!!ba.useProxy;da=!!ba.usePost;ha=!!ba.returnProgress;var aa=ba.crossOrigin}else pa=!!ba;U=l.mixin({},U);delete U._credential;U._ssl&&(U.url=U.url.replace(/^http:/i,"https:"));10>p("ie")&&!J.test(U.url)&&(U.url=encodeURI(U.url));var ea=U.content,X=U.url,S=Z&&U.form,ia=V;aa=r.isDefined(aa)?aa:ia.useCors;U.load=function(Da){if(Da){if(Da.error){var Na=l.mixin(Error(),
Da.error);Na.log=!!t.isDebug}else"error"===Da.status&&(Na=l.mixin(Error(),Da),Na.log=!!t.isDebug);Na&&(U.failOk=!Na.log,r.isDefined(Na.httpCode)||(Na.httpCode=Na.code))}return Na||Da};U.error=function(Da,Na){Na&&Na.xhr&&Na.xhr.abort();Da instanceof Error||(Da=l.mixin(Error(),Da));Da.log=!!t.isDebug;U.failOk=!Da.log;ia.errorHandler(Da,Na);return Da};U._token&&(U.content=U.content||{},U.content.token=U._token);var oa=0;if(ea&&X){var qa=h.objectToQuery(ea);oa=qa.length+X.length+1;p("esri-url-encodes-apostrophe")&&
(oa=qa.replace(/'/g,"%27").length+X.length+1)}U.timeout=r.isDefined(U.timeout)?U.timeout:ia.timeout;U.handleAs=U.handleAs||"json";try{var wa=aa&&m.canUseXhr(U.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(U.url),Ha=m.hasSameOrigin(U.url,window.location.href)||wa,R=da||Z||oa>ia.postLength?!0:!1,T=Ha||-1===U.handleAs.indexOf("json")||!U.callbackParamName||Z?!1:!0,ka=m.getProxyRule(U.url)||ia.alwaysUseProxy||pa||!("image"===U.handleAs&&!ba.allowImageDataAccess||T&&!R||Ha)?!0:!1;Z&&!p("esri-file-upload")&&
!ka&&wa&&(ka=!0);if(ka){var na=m.getProxyUrl(X,aa);var ta=na.path;na._xo&&(wa=!0);!R&&ta.length+1+oa>ia.postLength&&(R=!0);U.url=ta+"?"+X;if(R)U.content=l.mixin(na.query||{},ea);else{var G=h.objectToQuery(l.mixin(na.query||{},ea));G&&(U.url+="?"+G);U.content=null}}if(!T||R||ka){var ja=U.headers;!wa||ja&&ja.hasOwnProperty("X-Requested-With")||(ja=U.headers=ja||{},ja["X-Requested-With"]=null);if(Z){var ra=U.callbackParamName||"callback.html",K=U.callbackElementName||"textarea",xa,va,la=S.elements?S.elements.length:
0;if(ea=U.content)for(xa in ea.token&&m.isSecureProxyService(X)&&(X+=(-1===X.indexOf("?")?"?":"\x26")+"token\x3d"+ea.token,U.url=ka?ta+"?"+X:X,delete ea.token),ea){var Ca=ea[xa];if(r.isDefined(Ca)){var Ma=null;for(va=0;va<la;va++){var ua=S.elements[va];if(ua.name===xa){Ma=ua;break}}Ma?Ma.value=Ca:fa?S.append(xa,Ca):S.appendChild(b.create("input",{type:"hidden",name:xa,value:Ca}))}}if(p("esri-file-upload")){e.forEach(S.elements,function(Da){Da.name===ra&&S.removeChild(Da)});var Ba=fa?S:new FormData(S);
if(11<=p("safari")&&"entries"in Ba&&"delete"in Ba){fa=[];for(var Aa=Ba.entries(),Ga=Aa.next();!Ga.done;){var ya=Ga.value;ya[1]instanceof File&&""===ya[1].name&&fa.push(ya[0]);Ga=Aa.next()}fa.forEach(function(Da){Ba.delete(Da)})}U.contentType=!1;U.postData=Ba;delete U.form}else{S.enctype="multipart/form-data";9>p("ie")&&(S.encoding="multipart/form-data");S.method="post";e.some(S.elements,function(Da){return Da.name===ra})||S.appendChild(b.create("input",{type:"hidden",name:ra,value:K}));if(-1!==X.toLowerCase().indexOf("addattachment")||
-1!==X.toLowerCase().indexOf("updateattachment"))X+=(-1===X.indexOf("?")?"?":"\x26")+ra+"\x3d"+K,U.url=ka?ta+"?"+X:X;delete U.content}}if(wa&&!U.hasOwnProperty("withCredentials")&&"with-credentials"===V.useCors){ta=ka?ta:X;var Ea=m.canUseXhr(ta,!0),Fa=-1<Ea?V.corsEnabledServers[Ea]:null;if(Fa&&Fa.hasOwnProperty("withCredentials"))Fa.withCredentials&&(U.withCredentials=!0);else if(c.id){var Ka=c.id.findServerInfo(ta);Ka&&Ka.webTierAuth&&(U.withCredentials=!0)}}U=N?N(U):U;var Ja=function(){if("image"===
U.handleAs)return E(U,ba);if(R){if(Z&&!p("esri-file-upload")){P=new u(function(){Da.cancel()});var Da=n.post(U.url,U).then(function(Pa){P.resolve(Pa)}).otherwise(function(Pa){P.reject(Pa)});P.addCallback(function(Pa){return U.load(Pa)});P.addErrback(function(Pa){return U.error(Pa)});return P}!ka&&p("safari")&&(U.url+=(-1===U.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+ca++);if(ha){U.uploadProgress=!0;U.data=U.postData;U.query=U.content;P=new u(function(){Na.cancel()});var Na=a.post(U.url,
U).then(function(Pa){P.resolve(Pa)},function(Pa){P.reject(Pa)},function(Pa){P.progress({transferType:Pa.transferType,loaded:Pa.loaded,total:Pa.total})});P.addCallback(function(Pa){return U.load(Pa)});P.addErrback(function(Pa){return U.error(Pa)});return P}return k.post(U)}return k.get(U)};return U.withCredentials&&z.isNoCorsRequestRequired(X)?P=z.sendNoCorsRequest(X,ea).addBoth(function(){var Da=Ja();P.ioArgs=Da.ioArgs;return Da}):Ja()}U=N?N(U):U;U.jsonp=U.callbackParamName;U.query=U.content;P=new u(function(){Oa.cancel()});
var Oa=d.get(U.url,U).then(function(Da){P.resolve(Da)}).otherwise(function(Da){P.reject(Da)});P.addCallback(function(Da){return U.load(Da)});P.addErrback(function(Da){return U.error(Da)});return P}catch(Da){return P=new u,P.errback(U.error(Da)),P}}function y(U){var ba=V.corsStatus,Z=m.canUseXhr(U,!0);-1<Z&&V.corsEnabledServers.splice(Z,1);var fa=new u;fa.reject({log:!!t.isDebug});ba[A(U)]=fa.promise;return Z}function x(U){var ba=V.corsStatus;try{var Z=A(U);if(V.corsDetection&&V.useCors&&p("esri-cors")&&
U&&-1!==U.toLowerCase().indexOf("/rest/services")&&!m.hasSameOrigin(U,window.location.href)&&!m.canUseXhr(U)){if(ba[Z]&&!ba[Z].isCanceled())return ba[Z];var fa=new u(v._dfdCanceller);ba[Z]=fa.promise;var pa=k.get({url:U.substring(0,U.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*V.corsDetectionTimeout});fa._pendingDfd=pa;pa.then(function(da){da?(m.canUseXhr(U)||V.corsEnabledServers.push(Z),fa.resolve()):fa.reject()},
function(da){fa.reject(da)});return fa.promise}}catch(da){}return O}function w(U){N=U}function C(U,ba,Z,fa){function pa(wa){wa._pendingDfd=F(Z,fa,S,X);if(!wa._pendingDfd){wa.ioArgs=wa._pendingDfd&&wa._pendingDfd.ioArgs;var Ha=Error("Deferred object is missing");Ha.log=!!t.isDebug;wa.errback(Ha);wa._pendingDfd=null;return wa}wa._pendingDfd.addCallback(function(R){if(!R)return R;var T=wa._pendingDfd&&wa._pendingDfd.ioArgs&&wa._pendingDfd.ioArgs.xhr;if(!T)return R;if(T=T.getResponseHeader("Content-Type"))if(T=
T.toLowerCase(),-1===T.indexOf("text/plain")&&-1===T.indexOf("application/json"))return R;if(R instanceof ArrayBuffer&&750>=R.byteLength)T=new Blob([R]);else if(R instanceof Blob&&750>=R.size)T=R;else return R;var ka=new u,na=new FileReader;na.readAsText(T);na.onloadend=function(){if(!na.error)try{var ta=JSON.parse(na.result);if(ta.error)var G=ta.error}catch(ja){}G?(G=l.mixin(Error(),G),G.log=!!t.isDebug,null==G.httpCode&&(G.httpCode=G.code),ka.reject(G)):ka.resolve(R)};return ka.promise}).addCallback(function(R){wa.ioArgs=
wa._pendingDfd&&wa._pendingDfd.ioArgs;fa.returnFullResponse&&(R={data:R,_xhr:wa.ioArgs&&wa.ioArgs.xhr,getHeader:D});wa.callback(R);wa._pendingDfd=null}).addErrback(function(R){if(R){var T=R.code;var ka=R.subcode;var na=(na=R.messageCode)&&na.toUpperCase()}if(R&&403==T&&(4==ka||R.message&&-1<R.message.toLowerCase().indexOf("ssl")&&-1===R.message.toLowerCase().indexOf("permission"))){if(!Z._ssl){Z._ssl=Z._sslFromServer=!0;C(wa,!0,Z,fa);return}}else if(R&&415==R.status){if(y(Z.url),!Z._err415){Z._err415=
1;C(wa,!0,Z,fa);return}}else if(c.id&&-1!==e.indexOf(c.id._errorCodes,T)&&!c.id._isPublic(Z.url)&&!ha&&(403!=T||-1===e.indexOf(Y,na)&&(!r.isDefined(ka)||2==ka&&Z._token))){wa._pendingDfd=c.id.getCredential(Z.url,{token:Z._token,error:R});wa._pendingDfd.addCallback(function(ta){Z._token=ta.token;Z._credential=ta;Z._ssl=Z._sslFromServer||ta.ssl;C(wa,!0,Z,fa)}).addErrback(function(ta){wa.errback(ta);wa._pendingDfd=null});return}wa.ioArgs=wa._pendingDfd&&wa._pendingDfd.ioArgs;wa.isFulfilled()||wa.errback(R);
wa._pendingDfd=null}).then(null,null,function(R){wa.progress(R)})}var da=Z.form,ha=fa.disableIdentityLookup,P=fa._preLookup,aa=!1;if(p("esri-workers")&&!1!==V.useWorkers)if(!0===fa.useWorkers||!0===V.useWorkers)aa=!0;else if(fa.workerOptions){var ea=fa.workerOptions;if(ea.callback||ea.worker&&ea.worker.worker instanceof Worker)aa=!0}var X=da&&p("esri-file-upload")&&da instanceof FormData,S=da&&(da.elements?e.some(da.elements,function(wa){return"file"===wa.type}):X),ia=-1!==Z.url.toLowerCase().indexOf("token\x3d")||
Z.content&&Z.content.token||S&&e.some(da.elements,function(wa){return"token"===wa.name})?1:0;if(!ba){U.addCallback(function(wa){if(wa&&(/\/sharing\/rest\/accounts\/self/i.test(Z.url)||/\/sharing\/rest\/portals\/self/i.test(Z.url))){if(!ia&&!Z._token&&wa.user&&wa.user.username){V.webTierAuthServers.push(A(Z.url));var Ha=V.corsEnabledServers,R=m.canUseXhr(Z.url,!0),T={host:A(Z.url),withCredentials:!0};if(-1===R)Ha.push(T);else{var ka=Ha[R];ka instanceof RegExp?(T.host=ka,Ha.splice(R,1,T)):"object"===
typeof ka?ka.withCredentials=!0:Ha.splice(R,1,T)}}Array.isArray(wa.authorizedCrossOriginNoCorsDomains)&&z.registerNoCorsDomains(wa.authorizedCrossOriginNoCorsDomains)}if(wa=Z._credential)if(Ha=(Ha=c.id.findServerInfo(wa.server))&&Ha.owningSystemUrl)Ha=Ha.replace(/\/?$/,"/sharing"),(wa=c.id.findCredential(Ha,wa.userId))&&-1===c.id._getIdenticalSvcIdx(Ha,wa)&&wa.resources.splice(0,0,Ha)});U.addBoth(function(wa){delete Z._credential;!wa||p("ie")&&wa.nodeType||(wa._ssl=Z._ssl)});var oa=Z.load,qa=Z.error;
oa&&U.addCallback(function(wa){var Ha=U._pendingDfd;Ha=Ha&&Ha.ioArgs;return oa.call(Ha&&Ha.args,wa,Ha)});qa&&U.addErrback(function(wa){var Ha=U._pendingDfd;Ha=Ha&&Ha.ioArgs;return qa.call(Ha&&Ha.args,wa,Ha)})}!c.id||ia||Z._token||c.id._isPublic(Z.url)||ha&&!P||!(ba=c.id.findCredential(Z.url))||(Z._token=ba.token,Z._ssl=ba.ssl);aa?fa.workerOptions&&fa.workerOptions.worker?(I||(I=k),k=fa.workerOptions.worker,pa(U)):g(["./workers/RequestClient"],function(wa){I||(I=k);if(fa.workerOptions){var Ha=fa.workerOptions;
k=wa.getClient(Ha.callback,Ha.cbFunction)}else k=wa.getClient();pa(U)}):(I&&(k=I,I=null),pa(U));return U}function B(U,ba){U.url=m.fixUrl(U.url);ba=ba||{};var Z=new u(v._dfdCanceller),fa=x(U.url);Z._pendingDfd=fa;fa.always(function(pa){pa&&"cancel"===pa.dojoType?Z.reject(pa):C(Z,!1,U,ba)});return Z}var I=null,N,V=f.defaults.io,Y=["COM_0056","COM_0057","SB_0008"],ca=0,J=/%[0-9A-F]{2}/i,O=function(){var U=new u;U.resolve();return U.promise}();B._makeRequest=F;B._processRequest=C;B._disableCors=y;B._detectCors=
x;B.setRequestPreCallback=w;c.request=B;c._makeRequest=F;c._processRequest=C;c._disableCors=y;c._detectCors=x;c.setRequestPreCallback=w;return B})},"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),function(g,e,t,u,l,q){function k(){var m=document.createElement("iframe");m.name="esri_core_jsonp_iframe";m.style.display="none";m.setAttribute("sandbox","allow-scripts");if(!q("ff")&&"srcdoc"in m){var v=g.toUrl("dojo/dojo.js"),
z=l.replace("../../../dojo/dojo.js",v);v=v.slice(0,-7);z=z.replace("../../../dojo/",v);m.srcdoc=z}else z=g.toUrl("./iframe.html"),"http:"===window.location.protocol&&0===z.indexOf("https:")&&(z=z.replace("https:","http:")),m.src=z;document.body.appendChild(m);return m}function a(){var m=new MessageChannel;m.port1.addEventListener("message",d);m.port1.start();return m}function d(m){var v=m.data;if("ready"===v){v=0;for(var z=p;v<z.length;v++)m=z[v],b(m,c);p=null}else if(m=r[v.id])delete r[v.id],v.isError?
m.dfd.reject(Error(v.message)):m.dfd.resolve(v.response)}function n(m,v){m.addEventListener("load",function(){m.contentWindow.postMessage("init","*",[v.port2])})}function b(m,v){r[m.message.id]=m;v.port1.postMessage(m.message)}Object.defineProperty(e,"__esModule",{value:!0});var h,c,f=0,p=[],r={};e.get=function(m,v){if(!q("esri-script-sandbox"))return u.get(m,v);var z=null;v&&(z={jsonp:v.jsonp,preventCache:v.preventCache,query:v.query,timeout:v.timeout});v=new t(function(){if(p){var D=p.indexOf(A);
-1<D&&p.splice(D,1)}else A.message.id in r&&delete r[A.message.id]});var A={dfd:v,message:{id:"id"+(++f+Math.random()),url:m,options:z}};h||(h=k(),c=a(),n(h,c));p?p.push(A):b(A,c);return v.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(g,e,t,u,l,q,k,a,d,n,b){function h(y,x){y.canDelete&&m._remove(y.id,x.options.frameDoc,!0)}function c(y){F&&F.length&&(l.forEach(F,
function(x){m._remove(x.id,x.frameDoc);x.frameDoc=null}),F=[]);return y.options.jsonp?!y.data:!0}function f(y){return!!this.scriptLoaded}function p(y){return(y=y.options.checkString)&&eval("typeof("+y+') !\x3d\x3d "undefined"')}function r(y,x){if(this.canDelete){var w=this.response.options;F.push({id:this.id,frameDoc:w.ioArgs?w.ioArgs.frameDoc:w.frameDoc});w.ioArgs&&(w.ioArgs.frameDoc=null);w.frameDoc=null}x?this.reject(x):this.resolve(y)}function m(y,x,w){var C=t.parseArgs(y,t.deepCopy({},x));y=
C.url;x=C.options;var B=t.deferred(C,h,c,x.jsonp?null:x.checkString?p:f,r);q.mixin(B,{id:v+z++,canDelete:!1});x.jsonp&&((new RegExp("[?\x26]"+x.jsonp+"\x3d")).test(y)||(y+=(~y.indexOf("?")?"\x26":"?")+x.jsonp+"\x3d"+(x.frameDoc?"parent.":"")+v+"_callbacks."+B.id),B.canDelete=!0,E[B.id]=function(V){C.data=V;B.handleResponse(C)});t.notify&&t.notify.emit("send",C,B.promise.cancel);if(!x.canAttach||x.canAttach(B)){var I=m._attach(B.id,y,x.frameDoc,function(V){if(!(V instanceof Error)){var Y=Error("Error loading "+
(V.target?V.target.src:"script"));Y.source=V;V=Y}B.reject(V);m._remove(B.id,x.frameDoc,!0)});if(!x.jsonp&&!x.checkString)var N=k(I,A,function(V){if("load"===V.type||D.test(I.readyState))N.remove(),B.scriptLoaded=V})}e(B);return w?B:B.promise}n.add("script-readystatechange",function(y,x){return"undefined"!==typeof x.createElement("script").onreadystatechange&&("undefined"===typeof y.opera||"[object Opera]"!==y.opera.toString())});var v=g.id.replace(/[\/\.\-]/g,"_"),z=0,A=n("script-readystatechange")?
"readystatechange":"load",D=/complete|loaded/,E=u.global[v+"_callbacks"]={},F=[];m.get=m;m._attach=function(y,x,w,C){w=w||b.doc;var B=w.createElement("script");if(C)k.once(B,"error",C);B.type="text/javascript";try{B.src=x}catch(I){C&&C(B)}B.id=y;B.async=!0;B.charset="utf-8";return w.getElementsByTagName("head")[0].appendChild(B)};m._remove=function(y,x,w){d.destroy(a.byId(y,x));E[y]&&(w?E[y]=function(){delete E[y]}:delete E[y])};m._callbacksProperty=v+"_callbacks";return m})},"esri/core/sniff":function(){define(["../sniff"],
function(g){return g})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),function(g,e,t,u,l,q,k,a,d,n,b,h){function c(D){return!this.isFulfilled()}function f(D){return!!this._finished}function p(D,E){if(!E)try{var F=D.options,y=m.doc(m._frame),x=F.handleAs;if("html"!==x){if("xml"===x)if("html"===y.documentElement.tagName.toLowerCase()){a("a",
y.documentElement).orphan();var w=y.documentElement.innerText||y.documentElement.textContent;w=w.replace(/>\s+</g,"\x3e\x3c");D.text=q.trim(w)}else D.data=y;else D.text=y.getElementsByTagName("textarea")[0].value;l(D)}else D.data=y}catch(C){E=C}E?this.reject(E):this._finished?this.resolve(D):this.reject(Error("Invalid dojo/request/iframe request state"))}function r(D){this._callNext()}function m(D,E,F){var y=u.parseArgs(D,u.deepCreate(A,E),!0);D=y.url;E=y.options;if("GET"!==E.method&&"POST"!==E.method)throw Error(E.method+
" not supported by dojo/request/iframe");m._frame||(m._frame=m.create(m._iframeName,z+"();"));D=u.deferred(y,null,c,f,p,r);D._callNext=function(){this._calledNext||(this._calledNext=!0,m._currentDfd=null,m._fireNextRequest())};D._legacy=F;m._dfdQueue.push(D);m._fireNextRequest();t(D);return F?D:D.promise}var v=g.id.replace(/[\/\.\-]/g,"_"),z=v+"_onload";h.global[z]||(h.global[z]=function(){var D=m._currentDfd;if(D){var E=n.byId(D.response.options.form)||D._tmpForm;if(E){for(var F=D._contentToClean,
y=0;y<F.length;y++)for(var x=F[y],w=0;w<E.childNodes.length;w++){var C=E.childNodes[w];if(C.name===x){b.destroy(C);break}}D._originalAction&&E.setAttribute("action",D._originalAction);D._originalMethod&&(E.setAttribute("method",D._originalMethod),E.method=D._originalMethod);D._originalTarget&&(E.setAttribute("target",D._originalTarget),E.target=D._originalTarget)}D._tmpForm&&(b.destroy(D._tmpForm),delete D._tmpForm);D._finished=!0}else m._fireNextRequest()});var A={method:"POST"};m.create=function(D,
E,F){if(h.global[D])return h.global[D];if(h.global.frames[D])return h.global.frames[D];F||(d("config-useXDomain")&&d("config-dojoBlankHtmlUrl"),F=d("config-dojoBlankHtmlUrl")||e.toUrl("dojo/resources/blank.html"));E=b.place('\x3ciframe id\x3d"'+D+'" name\x3d"'+D+'" src\x3d"'+F+'" onload\x3d"'+E+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',h.body());return h.global[D]=E};m.doc=function(D){if(D.contentDocument)return D.contentDocument;var E=
D.name;if(E){var F=h.doc.getElementsByTagName("iframe");if(D.document&&F[E].contentWindow&&F[E].contentWindow.document)return F[E].contentWindow.document;if(h.doc.frames[E]&&h.doc.frames[E].document)return h.doc.frames[E].document}return null};m.setSrc=function(D,E,F){D=h.global.frames[D.name];D.contentWindow&&(D=D.contentWindow);try{F?D.location.replace(E):D.location=E}catch(y){}};m._iframeName=v+"_IoIframe";m._notifyStart=function(){};m._dfdQueue=[];m._currentDfd=null;m._fireNextRequest=function(){try{if(!m._currentDfd&&
m._dfdQueue.length){do var D=m._currentDfd=m._dfdQueue.shift();while(D&&(D.canceled||D.isCanceled&&D.isCanceled())&&m._dfdQueue.length);if(!D||D.canceled||D.isCanceled&&D.isCanceled())m._currentDfd=null;else{var E=D.response,F=E.options,y=D._contentToClean=[],x=n.byId(F.form),w=u.notify,C=F.data||null;if(!D._legacy&&"POST"===F.method&&!x)x=D._tmpForm=b.create("form",{name:v+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},h.body());else if("GET"===F.method&&x&&-1<E.url.indexOf("?")){var B=
E.url.slice(E.url.indexOf("?")+1);C=q.mixin(k.queryToObject(B),C)}if(x){if(!D._legacy){var I=x;do I=I.parentNode;while(I&&I!==h.doc.documentElement);I||(x.style.position="absolute",x.style.left="-1000px",x.style.top="-1000px",h.body().appendChild(x));x.name||(x.name=v+"_form")}if(C){I=function(U,ba){b.create("input",{type:"hidden",name:U,value:ba},x);y.push(U)};for(var N in C){var V=C[N];if(q.isArray(V)&&1<V.length)for(B=0;B<V.length;B++)I(N,V[B]);else{var Y=a("input[name\x3d'"+N+"']",x);-1==Y.indexOf()?
I(N,V):Y.val(V)}}}var ca=x.getAttributeNode("action"),J=x.getAttributeNode("method"),O=x.getAttributeNode("target");E.url&&(D._originalAction=ca?ca.value:null,ca?ca.value=E.url:x.setAttribute("action",E.url));D._legacy?J&&J.value||(J?J.value=F.method:x.setAttribute("method",F.method)):(D._originalMethod=J?J.value:null,J?J.value=F.method:x.setAttribute("method",F.method));D._originalTarget=O?O.value:null;O?O.value=m._iframeName:x.setAttribute("target",m._iframeName);x.target=m._iframeName;w&&w.emit("send",
E,D.promise.cancel);m._notifyStart(E);x.submit()}else F="",E.options.data&&(F=E.options.data,"string"!==typeof F&&(F=k.objectToQuery(F))),I=E.url+(-1<E.url.indexOf("?")?"\x26":"?")+F,w&&w.emit("send",E,D.promise.cancel),m._notifyStart(E),m.setSrc(m._frame,I,!0)}}}catch(U){D.reject(U)}};u.addCommonMethods(m,["GET","POST"]);return m})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),function(g,e,t,u,l){function q(d){for(;d.childNodes[0]&&
1==d.childNodes[0].nodeType;)d=d.childNodes[0];return d}function k(d,n){"string"==typeof d?(d=u.toDom(d,n&&n.ownerDocument),11==d.nodeType&&(d=d.childNodes[0])):1==d.nodeType&&d.parentNode&&(d=d.cloneNode(!1));return d}var a=g.NodeList;e.extend(a,{_placeMultiple:function(d,n){d="string"==typeof d||d.nodeType?g(d):d;for(var b=[],h=0;h<d.length;h++)for(var c=d[h],f=this.length,p=f-1,r;r=this[p];p--)0<h&&(r=this._cloneNode(r),b.unshift(r)),p==f-1?u.place(r,c,n):c.parentNode.insertBefore(r,c),c=r;b.length&&
(b.unshift(0),b.unshift(this.length-1),Array.prototype.splice.apply(this,b));return this},innerHTML:function(d){return arguments.length?this.addContent(d,"only"):this[0].innerHTML},text:function(d){if(arguments.length){for(var n=0,b;b=this[n];n++)1==b.nodeType&&l.set(b,"textContent",d);return this}var h="";for(n=0;b=this[n];n++)h+=l.get(b,"textContent");return h},val:function(d){if(arguments.length){for(var n=e.isArray(d),b=0,h;h=this[b];b++){var c=h.nodeName.toUpperCase(),f=h.type,p=n?d[b]:d;if("SELECT"==
c)for(c=h.options,f=0;f<c.length;f++){var r=c[f];r.selected=h.multiple?-1!=t.indexOf(d,r.value):r.value==p}else"checkbox"==f||"radio"==f?h.checked=h.value==p:h.value=p}return this}if((h=this[0])&&1==h.nodeType){d=h.value||"";if("SELECT"==h.nodeName.toUpperCase()&&h.multiple){d=[];c=h.options;for(f=0;f<c.length;f++)r=c[f],r.selected&&d.push(r.value);d.length||(d=null)}return d}},append:function(d){return this.addContent(d,"last")},appendTo:function(d){return this._placeMultiple(d,"last")},prepend:function(d){return this.addContent(d,
"first")},prependTo:function(d){return this._placeMultiple(d,"first")},after:function(d){return this.addContent(d,"after")},insertAfter:function(d){return this._placeMultiple(d,"after")},before:function(d){return this.addContent(d,"before")},insertBefore:function(d){return this._placeMultiple(d,"before")},remove:a.prototype.orphan,wrap:function(d){if(this[0]){d=k(d,this[0]);for(var n=0,b;b=this[n];n++){var h=this._cloneNode(d);b.parentNode&&b.parentNode.replaceChild(h,b);q(h).appendChild(b)}}return this},
wrapAll:function(d){if(this[0]){d=k(d,this[0]);this[0].parentNode.replaceChild(d,this[0]);d=q(d);for(var n=0,b;b=this[n];n++)d.appendChild(b)}return this},wrapInner:function(d){if(this[0]){d=k(d,this[0]);for(var n=0;n<this.length;n++){var b=this._cloneNode(d);this._wrap(e._toArray(this[n].childNodes),null,this._NodeListCtor).wrapAll(b)}}return this},replaceWith:function(d){d=this._normalize(d,this[0]);for(var n=0,b;b=this[n];n++)this._place(d,b,"before",0<n),b.parentNode.removeChild(b);return this},
replaceAll:function(d){d=g(d);for(var n=this._normalize(this,this[0]),b=0,h;h=d[b];b++)this._place(n,h,"before",0<b),h.parentNode.removeChild(h);return this},clone:function(){for(var d=[],n=0;n<this.length;n++)d.push(this._cloneNode(this[n]));return this._wrap(d,this,this._NodeListCtor)}});a.prototype.html||(a.prototype.html=a.prototype.innerHTML);return a})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(g,e,t){e={_dfdCanceller:function(u){u.canceled=!0;
var l=u._pendingDfd;if(!u.isFulfilled()&&l&&!l.isFulfilled()){l.cancel();var q=l.results&&l.results[1]}u._pendingDfd=null;return q},_fixDfd:function(u){var l=u.then;u.then=function(q,k,a){if(q){var d=q;q=function(n){return n&&n._argsArray?d.apply(null,n):d(n)}}return l.call(this,q,k,a)};return u},_resDfd:function(u,l,q){var k=l.length;1===k?q?u.errback(l[0]):u.callback(l[0]):1<k?(l._argsArray=!0,u.callback(l)):u.callback()}};g.mixin(t,e);return e})},"esri/support/requestUtils":function(){define(["dojo/_base/Deferred",
"dojo/_base/url","../config","../urlUtils"],function(g,e,t,u){function l(k){k=new e(k);return k.scheme+"://"+k.authority}var q=t.defaults.io;return{registerNoCorsDomains:function(k){q.crossOriginNoCorsDomains||(q.crossOriginNoCorsDomains={});for(var a=q.crossOriginNoCorsDomains,d=0;d<k.length;d++){var n=k[d];n=n.toLowerCase();/^https?:\/\//.test(n)?a[l(n)]=0:(a[l("http://"+n)]=0,a[l("https://"+n)]=0)}},isNoCorsRequestRequired:function(k){var a=q.crossOriginNoCorsDomains;return a?(k=l(k),k=k.toLowerCase(),
!u.hasSameOrigin(k,window.location.origin)&&a[k]<Date.now()-36E5):!1},sendNoCorsRequest:function(k,a){var d=new g,n=q.crossOriginNoCorsDomains;n&&(n[l(k).toLowerCase()]=Date.now());n=u.urlToObject(k);k=n.path;if(n.query&&"json"===n.query.f||a&&"json"===a.f)k+="?f\x3djson";fetch(k,{mode:"no-cors",credentials:"include"}).then(d.resolve,d.resolve);return d}}})},"esri/renderers/ClassBreaksRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),
function(g,e,t,u,l,q,k,a,d){g=g(a,{declaredClass:"esri.renderer.ClassBreaksRenderer",constructor:function(n,b,h){this.breaks=[];this._symbols={};this.infos=[];this.isMaxInclusive=!0;if(n&&!n.declaredClass){var c=n;b=h&&h.geometryType;this.attributeField=c.field;this.setValueExpression(c.valueExpression);this.valueExpressionTitle=c.valueExpressionTitle;this.legendOptions=c.legendOptions;this.defaultSymbol=(n=c.defaultSymbol)&&(n.declaredClass?n:k.fromJson(n,h));this.backgroundFillSymbol=(n=c.backgroundFillSymbol)&&
(n.declaredClass?n:k.fromJson(n,b?{geometryType:"esriGeometryPolygon"}:null));this._copy(["defaultLabel","classificationMethod:rest","normalizationType:rest","normalizationField","normalizationTotal"],c,this);var f=c.minValue;(n=c.classBreakInfos)&&n[0]&&q.isDefined(n[0].classMaxValue)&&e.forEach(n,function(p){var r=p.classMaxValue;p.minValue=f;f=p.maxValue=r},this);"esriGeometryPolygon"===b&&(this.hasVisualVariables("sizeInfo",!1)||k.isPointSymbol(k.getFirstSupportedSymbol(e.map(n,function(p){return p.symbol}))))&&
(h={geometryType:"esriGeometryPoint"});e.forEach(n,function(p){this._addBreakInfo(p,h)},this)}else this.defaultSymbol=n,this.attributeField=b},addBreak:function(n,b,h){n=t.isObject(n)?n:{minValue:n,maxValue:b,symbol:h};this._addBreakInfo(n)},removeBreak:function(n,b){var h=this.breaks,c,f=h.length,p=this._symbols;for(c=0;c<f;c++){var r=h[c];if(r[0]==n&&r[1]==b){h.splice(c,1);delete p[n+"-"+b];this.infos.splice(c,1);break}}},clearBreaks:function(){this.breaks=[];this._symbols={};this.infos=[]},getBreakIndex:function(n){var b=
this.attributeField,h=n.attributes,c=this.breaks,f=c.length,p=this.isMaxInclusive;if(this.valueExpression)n=this._getDataValue(n,this._cbInfo,null,this._cache.cbInfo);else if(t.isFunction(b))n=b(n);else if(n=parseFloat(h[b]),b=this.normalizationType,b){var r=parseFloat(this.normalizationTotal);h=parseFloat(h[this.normalizationField]);if("log"===b)n=Math.log(n)*Math.LOG10E;else if("percent-of-total"===b&&!isNaN(r))n=n/r*100;else if("field"===b){if(isNaN(n)||isNaN(h))return-1;n/=h}}if(null!=n&&!isNaN(n)&&
"number"===typeof n)for(h=0;h<f;h++)if(b=c[h],b[0]<=n&&(p?n<=b[1]:n<b[1]))return h;return-1},getBreakInfo:function(n){n=this.getBreakIndex(n);return-1!==n?this.infos[n]:null},getSymbol:function(n){return(n=this.breaks[this.getBreakIndex(n)])?this._symbols[n[0]+"-"+n[1]]:this.defaultSymbol},setMaxInclusive:function(n){this.isMaxInclusive=n},setValueExpression:function(n){this.valueExpression=n;this._cbInfo={valueExpression:n};this._cache.cbInfo=this._createCache(this._cbInfo)},getFieldsUsedInExpressions:function(n){var b=
this.inherited(arguments);this.valueExpression&&(b=b.concat(d.extractFieldNames(this.valueExpression,n)));b.sort();return e.filter(b,function(h,c){return 0===c||b[c-1]!==h})},isContinuousRenderer:function(){var n=!1;if(this.infos&&1===this.infos.length){var b=this.attributeField,h=this.normalizationField,c=this.valueExpression;n=this.getVisualVariablesForType("colorInfo",!1)||[];var f=this.getVisualVariablesForType("sizeInfo",!1)||[],p=this.getVisualVariablesForType("opacityInfo",!1)||[];n=n.concat(f).concat(p);
n=e.some(n,function(r){return(r.field===b||r.valueExpression===c)&&r.normalizationField==h})}return n},_normalizationTypeEnums:[["field","esriNormalizeByField"],["log","esriNormalizeByLog"],["percent-of-total","esriNormalizeByPercentOfTotal"]],_classificationMethodEnums:[["natural-breaks","esriClassifyNaturalBreaks"],["equal-interval","esriClassifyEqualInterval"],["quantile","esriClassifyQuantile"],["standard-deviation","esriClassifyStandardDeviation"],["geometrical-interval","esriClassifyGeometricalInterval"],
["defined-interval","esriClassifyDefinedInterval"],["manual-interval","esriClassifyManual"]],_copy:function(n,b,h){e.forEach(n,function(c){var f=c.split(":");if(1<f.length){c=f[0];var p=this["_"+c+"Enums"];if("rest"===f[1]){var r="1";var m="0"}else"sdk"===f[1]&&(r="0",m="1")}f=b[c];if(void 0!==f&&(h[c]=f,p&&r)){var v,z=p.length;for(v=0;v<z;v++)if(p[v][r]===f){h[c]=p[v][m];break}}},this)},_addBreakInfo:function(n,b){var h=n.minValue,c=n.maxValue;this.breaks.push([h,c]);this.infos.push(n);var f=n.symbol;
f&&!f.declaredClass&&(n.symbol=k.fromJson(f,b));this._symbols[h+"-"+c]=n.symbol},toJson:function(){var n=this.infos||[],b=q.fixJson,h=n[0]&&n[0].minValue,c=this.backgroundFillSymbol;n=t.mixin(this.inherited(arguments),{type:"classBreaks",field:this.attributeField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:t.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),backgroundFillSymbol:c&&c.toJson(),minValue:-Infinity===
h?-Number.MAX_VALUE:h,classBreakInfos:e.map(n,function(f){f=t.mixin({},f);f.symbol=f.symbol&&f.symbol.toJson();f.classMaxValue=Infinity===f.maxValue?Number.MAX_VALUE:f.maxValue;delete f.minValue;delete f.maxValue;return b(f)})});this._copy(["defaultLabel","classificationMethod:sdk","normalizationType:sdk","normalizationField","normalizationTotal"],this,n);n.hasOwnProperty("normalizationType")&&!n.normalizationType&&delete n.normalizationType;n.hasOwnProperty("classificationMethod")&&!n.classificationMethod&&
delete n.classificationMethod;return b(n)}});t.setObject("renderer.ClassBreaksRenderer",g,l);return g})},"esri/renderers/Renderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojox/gfx/_base ../kernel ../Color ../layers/support/attributeUtils ../support/expressionUtils ../arcadeProfiles/visualizationProfile".split(" "),function(g,e,t,u,l,q,k,a,d,n){var b=Math.PI;g=g(null,{declaredClass:"esri.renderer.Renderer",constructor:function(h){this._cache={};if(h&&!h.declaredClass){this.rotationInfo=
h.rotationInfo;if(!this.rotationInfo){var c=h.rotationType,f=h.rotationExpression;if(c||f)this.rotationInfo={type:c,expression:f}}this.setRotationInfo(this.rotationInfo);this.setSizeInfo(this._readSizeInfo(h.sizeInfo));this.setColorInfo(this._readColorInfo(h.colorInfo));this.setOpacityInfo(this._readOpacityInfo(h.transparencyInfo));this.setVisualVariables(this._readVariables(h.visualVariables));this.setAuthoringInfo(h.authoringInfo)}this.getSymbol=e.hitch(this,this.getSymbol)},getSymbol:function(h){},
_readSizeInfo:function(h){if(h){var c=h.minSize,f=h.maxSize;c&&(h.minSize="number"===typeof c?l.pt2px(c):this._readSizeInfo(c));f&&(h.maxSize="number"===typeof f?l.pt2px(f):this._readSizeInfo(f));h.stops&&t.forEach(h.stops,function(p){p.size&&"number"===typeof p.size&&(p.size=l.pt2px(p.size))})}return h},_readColorInfo:function(h){h&&(t.forEach(h.colors,function(c,f){e.isArray(c)&&(h.colors[f]=k.toDojoColor(c))}),t.forEach(h.stops,function(c,f){c.color&&e.isArray(c.color)&&(h.stops[f].color=k.toDojoColor(c.color))}));
return h},_readOpacityInfo:function(h){if(h){var c=e.mixin({},h);c.transparencyValues&&(c.opacityValues=t.map(c.transparencyValues,function(f){return 1-f/100}),delete c.transparencyValues);c.stops&&(c.stops=t.map(c.stops,function(f){f=e.mixin({},f);f.opacity=1-f.transparency/100;delete f.transparency;return f}))}return c},_readVariables:function(h){h&&(h=t.map(h,function(c){"sizeInfo"===c.type?c=this._readSizeInfo(c):"colorInfo"===c.type?c=this._readColorInfo(c):"transparencyInfo"===c.type&&(c=this._readOpacityInfo(c),
c.type="opacityInfo");return c},this));return h},setAuthoringInfo:function(h){this.authoringInfo=h},setRotationInfo:function(h){if(h=this.rotationInfo="string"===typeof h?{field:h}:h){if(h.expression&&!e.isFunction(h.expression)&&!h.field){var c=h.expression.match(this.rotationRE);c&&c[1]&&(h.field=c[1])}h.rotationType=h.type}this._cache.rotationInfo=this._processRotationInfo(h);return this},rotationRE:/^\[([^\]]+)\]$/i,_processRotationInfo:function(h){h&&!h.rotationType&&(h.rotationType="geographic");
return this._createCache(h)},getRotationAngle:function(h,c){var f=this._getVarInfo(c&&c.rotationInfo,"rotationInfo");c=f.variable;f=this._cache[f.cacheKey];var p="arithmetic"===this._getRotationType(c),r=f&&f.hasExpr,m=null;if(c.field||r)m=this._getDataValue(h,c,null,f),null!=m&&(m=(m+(p?-90:0))*(p?-1:1));return m},_getRotationType:function(h){return h&&("rotationInfo"===h.type?h.rotationType:h.type)},_getDataValue:function(h,c,f,p,r){p||(p=this._getVarInfo(c,f),c=p.variable,p=this._cache[p.cacheKey],
"sizeInfo"===f&&(p=p.root));return h._getDataValue(c,p,d,r)},setVisualVariables:function(h){var c=this._cache;t.forEach(this.visualVariables,function(f,p){c.hasOwnProperty(p)&&(c[p]=null)},this);this.visualVariables=h;t.some(h,function(f){return!!f.target})&&h.sort(function(f,p){return f.target===p.target?0:f.target?1:-1});t.forEach(h,function(f,p){"colorInfo"===f.type?c[p]=this._processColorInfo(f):"opacityInfo"===f.type?c[p]=this._processOpacityInfo(f):"sizeInfo"===f.type?c[p]=this._processSizeInfo(f):
"rotationInfo"===f.type&&(c[p]=this._processRotationInfo(f))},this);return this},getVisualVariableValues:function(h){var c=this.visualVariables,f;c&&(f=t.map(c,function(p){switch(p.type){case "sizeInfo":var r=this.getSize(h,{sizeInfo:p});break;case "colorInfo":r=this.getColor(h,{colorInfo:p});break;case "opacityInfo":r=this.getOpacity(h,{opacityInfo:p});break;case "rotationInfo":r=this.getRotationAngle(h,{rotationInfo:p})}return{variable:p,value:r}},this));return f},getFieldsUsedInExpressions:function(h){var c=
[];t.forEach(this._getCacheObjects(),function(f){f.syntaxTree&&(c=c.concat(d.extractFieldNames(f.syntaxTree,h)))});c.sort();return t.filter(c,function(f,p){return 0===p||c[p-1]!==f})},hasGeometryOperations:function(){return t.some(this._getCacheObjects(),function(h){return h.syntaxTree?d.hasGeometryOperations(h.syntaxTree):!1})},initializeArcadeEngine:function(){var h=[];t.forEach(this._getCacheObjects(),function(c){c.syntaxTree&&h.push(c.syntaxTree)});return n.initialize(h)},hasVisualVariables:function(h,
c){return h?!!this.getVisualVariablesForType(h,c):!!(this.getVisualVariablesForType("sizeInfo",c)||this.getVisualVariablesForType("colorInfo",c)||this.getVisualVariablesForType("opacityInfo",c)||this.getVisualVariablesForType("rotationInfo",c))},getVisualVariablesForType:function(h,c){var f=this.visualVariables;if(!c&&this[h]){"rotationInfo"===h&&(this[h].rotationType=this[h].type);var p=[this[h]]}else f&&(p=t.filter(f,function(r){return r.type===h&&("string"===typeof c?r.target===c:!1===c?!r.target:
!0)}))&&0===p.length&&(p=void 0);return p},setSizeInfo:function(h){this.sizeInfo=this.proportionalSymbolInfo=h;this._cache.sizeInfo=this._processSizeInfo(h);return this},_processSizeInfo:function(h){return h&&{root:this._createCache(h),minSize:this._createCache(h.minSize),maxSize:this._createCache(h.maxSize)}},_convertExpressionToArcade:function(h){h&&h.expression&&(h.valueExpression="$view.scale")},_getVarInfo:function(h,c){if(h&&h.type===c){var f=t.indexOf(this.visualVariables,h);h=this.visualVariables[f]}else f=
c,h=this[c];return{variable:h,cacheKey:f}},setProportionalSymbolInfo:function(h){this.setSizeInfo(h);return this},getSize:function(h,c){var f=this._getVarInfo(c&&c.sizeInfo,"sizeInfo"),p=f.variable;f=this._cache[f.cacheKey];var r=null;if(p){var m=p.minSize;r=p.maxSize;m="object"===typeof m&&m?this._getSize(h,m,f&&f.minSize,c):m;r="object"===typeof r&&r?this._getSize(h,r,f&&f.maxSize,c):r;r=this._getSize(h,p,f&&f.root,c,[m,r])}return r},_getSize:function(h,c,f,p,r){var m=c.stops,v=0,z=f&&f.hasExpr,
A=f&&f.ipData,D=f&&f.isScaleDriven,E="object"===typeof h&&!!h,F="number"===typeof h?h:null;if(c.field||D||z){var y=p&&p.scale;z=r?r[0]:c.minSize;r=r?r[1]:c.maxSize;var x=c.minDataValue,w=c.maxDataValue,C=c.valueUnit||"unknown",B=c.valueRepresentation,I=c.scaleBy,N=p&&p.shape;D?F=y:"number"!==typeof F&&E&&(F=this._getDataValue(h,c,null,f));if(!this._isValidNumber(F))return null;if(m)z=this._lookupData(F,A),F=z[0],r=z[1],F===r?v=m[F].size:(F=m[F].size,m=m[r].size,v=F+(m-F)*z[2]);else if(null!=z&&null!=
r&&null!=x&&null!=w)F<=x?v=z:F>=w?v=r:(m=(F-x)/(w-x),"area"===I&&N?(z=(F="circle"===N)?b*Math.pow(z/2,2):z*z,m=z+m*((F?b*Math.pow(r/2,2):r*r)-z),v=F?2*Math.sqrt(m/b):Math.sqrt(m)):v=z+m*(r-z));else if("unknown"===C)null!=z&&null!=x&&(z&&x?(m=F/x,v="circle"===N?2*Math.sqrt(m*Math.pow(z/2,2)):"square"===N||"diamond"===N||"image"===N?Math.sqrt(m*Math.pow(z,2)):m*z):v=F+(z||x),v=v<z?z:v,null!=r&&v>r&&(v=r));else{m=(p&&p.resolution?p.resolution:1)*this._meterIn[C];if("area"===B)v=Math.sqrt(F/b)/m,v*=2;
else if(v=F/m,"radius"===B||"distance"===B)v*=2;null!=z&&v<z&&(v=z);null!=r&&v>r&&(v=r)}}else v=m&&m[0]&&m[0].size,null==v&&(v=c.minSize);return v=isNaN(v)?0:v},getSizeRangeAtScale:function(h,c){h=this._getVarInfo(h,"sizeInfo");var f=this._cache[h.cacheKey],p={scale:c};if((h=h.variable)&&c){var r=h.minSize;c=h.maxSize;var m=h.stops;m&&m.length?(h=m[0].size,f=m[m.length-1].size):(h="object"===typeof r&&r?this._getSize({},r,f&&f.minSize,p):r,f="object"===typeof c&&c?this._getSize({},c,f&&f.maxSize,
p):c);if(null!=h||null!=f){if(h>f){var v=f;f=h;h=v}v={minSize:h,maxSize:f}}}return v},setColorInfo:function(h){this.colorInfo=h;this._cache.colorInfo=this._processColorInfo(h);return this},_createCache:function(h,c){if(c=a.createAttributeCache(h,c))c.ipData=this._interpolateData(h);return c},_getCacheObjects:function(h){var c;h=h||this._cache;var f=[];for(c in h){var p=h[c];h.hasOwnProperty(c)&&p&&"object"===typeof p&&(p.hasOwnProperty("idSource")?f.push(p):f=f.concat(this._getCacheObjects(p)))}return f},
_processColorInfo:function(h){h&&(t.forEach(h.colors,function(c,f){e.isArray(c)&&(h.colors[f]=new k(c))}),t.forEach(h.stops,function(c,f){c.color&&e.isArray(c.color)&&(h.stops[f].color=new k(c.color))}));return this._createCache(h)},getColor:function(h,c){c=this._getVarInfo(c&&c.colorInfo,"colorInfo");return this._getColorComponent(h,c.variable,this._cache[c.cacheKey])},setOpacityInfo:function(h){this.opacityInfo=h;this._cache.opacityInfo=this._processOpacityInfo(h);return this},_processOpacityInfo:function(h){return this._createCache(h)},
getOpacity:function(h,c){c=this._getVarInfo(c&&c.opacityInfo,"opacityInfo");return this._getColorComponent(h,c.variable,this._cache[c.cacheKey],!0)},_getColorComponent:function(h,c,f,p,r){var m="number"===typeof h?h:null,v=f&&f.hasExpr,z=f&&f.ipData,A;c&&c.field||v?("number"!==typeof m&&"object"===typeof h&&h&&(m=this._getDataValue(h,c,null,f)),this._isValidNumber(m)||(m=null),null!=m&&(A=p?this._getOpacity(m,c,z):this._getColor(m,c,z))):c&&(h=c.stops,p?(A=h&&h[0]&&h[0].opacity,null==A&&(A=c.opacityValues&&
c.opacityValues[0])):A=h&&h[0]&&h[0].color||c.colors&&c.colors[0]);r&&(r.data=m,r.value=A);return r||A},_isValidNumber:function(h){return"number"===typeof h&&!isNaN(h)&&Infinity!==h&&-Infinity!==h},_interpolateData:function(h){if(h)if(h.colors||h.opacityValues){var c=(h.colors||h.opacityValues).length,f=h.minDataValue,p=(h.maxDataValue-f)/(c-1);var r=[];for(h=0;h<c;h++)r[h]=f+h*p}else h.stops&&(r=t.map(h.stops,function(m){return m.value}));return r},_getOpacity:function(h,c,f){h=this._lookupData(h,
f);c=c||this.opacityInfo;if(h){f=h[0];var p=h[1];f===p?p=this._getOpacValue(c,f):(f=this._getOpacValue(c,f),c=this._getOpacValue(c,p),p=f+(c-f)*h[2])}return p},_getOpacValue:function(h,c){return h.opacityValues?h.opacityValues[c]:h.stops[c].opacity},_getColor:function(h,c,f){h=this._lookupData(h,f);c=c||this.colorInfo;if(h){var p=h[0];f=h[1];p=p===f?this._getColorObj(c,p):k.blendColors(this._getColorObj(c,p),this._getColorObj(c,f),h[2])}return p},_getColorObj:function(h,c){return h.colors?h.colors[c]:
h.stops[c].color},_lookupData:function(h,c){if(c){var f=0,p=c.length-1;t.some(c,function(m,v){if(h<m)return p=v,!0;f=v;return!1});var r=[f,p,(h-c[f])/(c[p]-c[f])]}return r},_meterIn:{inches:1/.0254,feet:1/.3048,yards:1/.9144,miles:1/1609.344,"nautical-miles":1/1852,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,"decimal-degrees":180/20015077},_writeSizeInfo:function(h){if(h){h=e.mixin({},h);this._convertExpressionToArcade(h);var c=h.minSize,f=h.maxSize;c&&(h.minSize="number"===
typeof c?l.px2pt(c):this._writeSizeInfo(c));f&&(h.maxSize="number"===typeof f?l.px2pt(f):this._writeSizeInfo(f));if(c=h.legendOptions)if(h.legendOptions=e.mixin({},c),c=c.customValues)h.legendOptions.customValues=c.slice(0);h.stops&&(h.stops=t.map(h.stops,function(p){p=e.mixin({},p);p.size&&"number"===typeof p.size&&(p.size=l.px2pt(p.size));return p}))}return h},_writeColorInfo:function(h){h&&(h=e.mixin({},h),h.colors&&(h.colors=t.map(h.colors,function(c){return k.toJsonColor(c)})),h.stops&&(h.stops=
t.map(h.stops,function(c){c=e.mixin({},c);c.color&&(c.color=k.toJsonColor(c.color));return c})),h.legendOptions&&(h.legendOptions=e.mixin({},h.legendOptions)));return h},_writeOpacityInfo:function(h){if(h){var c=e.mixin({},h);c.opacityValues&&(c.transparencyValues=t.map(c.opacityValues,function(f){return 100*(1-f)}),delete c.opacityValues);c.stops&&(c.stops=t.map(c.stops,function(f){f=e.mixin({},f);f.transparency=100*(1-f.opacity);delete f.opacity;return f}));c.legendOptions&&(c.legendOptions=e.mixin({},
c.legendOptions))}return c},toJson:function(h){var c=this.visualVariables,f=e.clone(this.authoringInfo),p=h&&h.useLegacyRotationProperties,r=(h=(h=this.getVisualVariablesForType("rotationInfo",!1))&&h[0])&&h.field,m;h&&(h===this.rotationInfo||p)&&(m=h.expression||r&&(e.isFunction(r)?r:"["+r+"]"));c&&(c=t.map(c,function(v){"sizeInfo"===v.type?v=this._writeSizeInfo(v):"colorInfo"===v.type?v=this._writeColorInfo(v):"opacityInfo"===v.type?(v=this._writeOpacityInfo(v),v.type="transparencyInfo"):"rotationInfo"===
v.type&&(v=p?null:e.mixin({},v));return v},this),c=t.filter(c,function(v){return null!=v}));f&&t.forEach(f.visualVariables,function(v){"opacityInfo"===v.type&&(v.type="transparencyInfo")});return{rotationType:m&&(this._getRotationType(h)||"geographic"),rotationExpression:m,colorInfo:this._writeColorInfo(this.colorInfo),transparencyInfo:this._writeOpacityInfo(this.opacityInfo),sizeInfo:this._writeSizeInfo(this.sizeInfo),visualVariables:c,authoringInfo:f}}});e.setObject("renderer.Renderer",g,q);return g})},
"esri/layers/support/attributeUtils":function(){define("dojo/_base/lang dojo/has dojox/encoding/digests/_base dojox/encoding/digests/MD5 ../../kernel ../../support/expressionUtils".split(" "),function(g,e,t,u,l,q){var k={viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,getAttributeId:function(a){return"string"===typeof a?u(a,t.outputTypes.Hex):null},getAttributeIdSource:function(a){if(!a)return null;var d=a.field,n=a.valueExpression,b=null;if(n)b=n;else if(g.isFunction(d))b=d.toString();else if(d){var h=
(n=a.normalizationField)?"field":a.normalizationType;a=parseFloat(a.normalizationTotal);h&&(h=h.toLowerCase(),b=d.toLowerCase()+",norm:"+h,n?b+=","+n.toLowerCase():"percent-of-total"===h&&(d=a,"number"===typeof d&&!isNaN(d)&&Infinity!==d&&-Infinity!==d&&0!==a||(a=null),b+=","+a))}return b},createAttributeCache:function(a,d){if(!a)return null;var n=a.valueExpression,b=q.createSyntaxTree(n),h=k.getAttributeIdSource(a);return{attributeInfo:a,isNumeric:!d,idSource:h,id:k.getAttributeId(h),hasExpr:!!n,
compiledFunc:q.createFunction(b),syntaxTree:b,isScaleDriven:!!a.expression||k.viewScaleRE.test(n),dependsOnView:b?q.dependsOnView(b):!1,dependsOnGeometry:b?q.hasGeometryOperations(b):!1,isJSFunc:g.isFunction(a.field)}}};g.setObject("layers.support.attributeUtils",k,l);return k})},"dojox/encoding/digests/_base":function(){define(["dojo/_base/lang"],function(g){g=g.getObject("dojox.encoding.digests",!0);g.outputTypes={Base64:0,Hex:1,String:2,Raw:3};g.addWords=function(e,t){var u=(e&65535)+(t&65535);
return(e>>16)+(t>>16)+(u>>16)<<16|u&65535};g.stringToWord=function(e){for(var t=[],u=0,l=8*e.length;u<l;u+=8)t[u>>5]|=(e.charCodeAt(u/8)&255)<<u%32;return t};g.wordToString=function(e){for(var t=[],u=0,l=32*e.length;u<l;u+=8)t.push(String.fromCharCode(e[u>>5]>>>u%32&255));return t.join("")};g.wordToHex=function(e){for(var t=[],u=0,l=4*e.length;u<l;u++)t.push("0123456789abcdef".charAt(e[u>>2]>>u%4*8+4&15)+"0123456789abcdef".charAt(e[u>>2]>>u%4*8&15));return t.join("")};g.wordToBase64=function(e){for(var t=
[],u=0,l=4*e.length;u<l;u+=3)for(var q=(e[u>>2]>>u%4*8&255)<<16|(e[u+1>>2]>>(u+1)%4*8&255)<<8|e[u+2>>2]>>(u+2)%4*8&255,k=0;4>k;k++)8*u+6*k>32*e.length?t.push("\x3d"):t.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(q>>6*(3-k)&63));return t.join("")};g.stringToUtf8=function(e){for(var t="",u=-1,l,q;++u<e.length;)l=e.charCodeAt(u),q=u+1<e.length?e.charCodeAt(u+1):0,55296<=l&&56319>=l&&56320<=q&&57343>=q&&(l=65536+((l&1023)<<10)+(q&1023),u++),127>=l?t+=String.fromCharCode(l):
2047>=l?t+=String.fromCharCode(192|l>>>6&31,128|l&63):65535>=l?t+=String.fromCharCode(224|l>>>12&15,128|l>>>6&63,128|l&63):2097151>=l&&(t+=String.fromCharCode(240|l>>>18&7,128|l>>>12&63,128|l>>>6&63,128|l&63));return t};return g})},"dojox/encoding/digests/MD5":function(){define(["./_base"],function(g){function e(k,a,d,n,b,h){var c=g.addWords;k=g.addWords(g.addWords(a,k),g.addWords(n,h));return c.call(g,k<<b|k>>>32-b,d)}function t(k,a,d,n,b,h,c){return e(a&d|~a&n,k,a,b,h,c)}function u(k,a,d,n,b,h,
c){return e(a&n|d&~n,k,a,b,h,c)}function l(k,a,d,n,b,h,c){return e(d^(a|~n),k,a,b,h,c)}function q(k,a){k[a>>5]|=128<<a%32;k[(a+64>>>9<<4)+14]=a;a=1732584193;for(var d=-271733879,n=-1732584194,b=271733878,h=0;h<k.length;h+=16){var c=a,f=d,p=n,r=b;a=t(a,d,n,b,k[h+0],7,-680876936);b=t(b,a,d,n,k[h+1],12,-389564586);n=t(n,b,a,d,k[h+2],17,606105819);d=t(d,n,b,a,k[h+3],22,-1044525330);a=t(a,d,n,b,k[h+4],7,-176418897);b=t(b,a,d,n,k[h+5],12,1200080426);n=t(n,b,a,d,k[h+6],17,-1473231341);d=t(d,n,b,a,k[h+7],
22,-45705983);a=t(a,d,n,b,k[h+8],7,1770035416);b=t(b,a,d,n,k[h+9],12,-1958414417);n=t(n,b,a,d,k[h+10],17,-42063);d=t(d,n,b,a,k[h+11],22,-1990404162);a=t(a,d,n,b,k[h+12],7,1804603682);b=t(b,a,d,n,k[h+13],12,-40341101);n=t(n,b,a,d,k[h+14],17,-1502002290);d=t(d,n,b,a,k[h+15],22,1236535329);a=u(a,d,n,b,k[h+1],5,-165796510);b=u(b,a,d,n,k[h+6],9,-1069501632);n=u(n,b,a,d,k[h+11],14,643717713);d=u(d,n,b,a,k[h+0],20,-373897302);a=u(a,d,n,b,k[h+5],5,-701558691);b=u(b,a,d,n,k[h+10],9,38016083);n=u(n,b,a,d,k[h+
15],14,-660478335);d=u(d,n,b,a,k[h+4],20,-405537848);a=u(a,d,n,b,k[h+9],5,568446438);b=u(b,a,d,n,k[h+14],9,-1019803690);n=u(n,b,a,d,k[h+3],14,-187363961);d=u(d,n,b,a,k[h+8],20,1163531501);a=u(a,d,n,b,k[h+13],5,-1444681467);b=u(b,a,d,n,k[h+2],9,-51403784);n=u(n,b,a,d,k[h+7],14,1735328473);d=u(d,n,b,a,k[h+12],20,-1926607734);a=e(d^n^b,a,d,k[h+5],4,-378558);b=e(a^d^n,b,a,k[h+8],11,-2022574463);n=e(b^a^d,n,b,k[h+11],16,1839030562);d=e(n^b^a,d,n,k[h+14],23,-35309556);a=e(d^n^b,a,d,k[h+1],4,-1530992060);
b=e(a^d^n,b,a,k[h+4],11,1272893353);n=e(b^a^d,n,b,k[h+7],16,-155497632);d=e(n^b^a,d,n,k[h+10],23,-1094730640);a=e(d^n^b,a,d,k[h+13],4,681279174);b=e(a^d^n,b,a,k[h+0],11,-358537222);n=e(b^a^d,n,b,k[h+3],16,-722521979);d=e(n^b^a,d,n,k[h+6],23,76029189);a=e(d^n^b,a,d,k[h+9],4,-640364487);b=e(a^d^n,b,a,k[h+12],11,-421815835);n=e(b^a^d,n,b,k[h+15],16,530742520);d=e(n^b^a,d,n,k[h+2],23,-995338651);a=l(a,d,n,b,k[h+0],6,-198630844);b=l(b,a,d,n,k[h+7],10,1126891415);n=l(n,b,a,d,k[h+14],15,-1416354905);d=l(d,
n,b,a,k[h+5],21,-57434055);a=l(a,d,n,b,k[h+12],6,1700485571);b=l(b,a,d,n,k[h+3],10,-1894986606);n=l(n,b,a,d,k[h+10],15,-1051523);d=l(d,n,b,a,k[h+1],21,-2054922799);a=l(a,d,n,b,k[h+8],6,1873313359);b=l(b,a,d,n,k[h+15],10,-30611744);n=l(n,b,a,d,k[h+6],15,-1560198380);d=l(d,n,b,a,k[h+13],21,1309151649);a=l(a,d,n,b,k[h+4],6,-145523070);b=l(b,a,d,n,k[h+11],10,-1120210379);n=l(n,b,a,d,k[h+2],15,718787259);d=l(d,n,b,a,k[h+9],21,-343485551);a=g.addWords(a,c);d=g.addWords(d,f);n=g.addWords(n,p);b=g.addWords(b,
r)}return[a,d,n,b]}g.MD5=function(k,a){a=a||g.outputTypes.Base64;k=q(g.stringToWord(k),8*k.length);switch(a){case g.outputTypes.Raw:return k;case g.outputTypes.Hex:return g.wordToHex(k);case g.outputTypes.String:return g.wordToString(k);default:return g.wordToBase64(k)}};g.MD5._hmac=function(k,a,d){d=d||g.outputTypes.Base64;var n=g.stringToWord(a);16<n.length&&(n=q(n,8*a.length));var b=[];a=[];for(var h=0;16>h;h++)b[h]=n[h]^909522486,a[h]=n[h]^1549556828;k=q(b.concat(g.stringToWord(k)),512+8*k.length);
k=q(a.concat(k),640);switch(d){case g.outputTypes.Raw:return k;case g.outputTypes.Hex:return g.wordToHex(k);case g.outputTypes.String:return g.wordToString(k);default:return g.wordToBase64(k)}};return g.MD5})},"esri/support/expressionUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../kernel ../arcade/arcade ../arcade/Feature ../arcade/languageUtils".split(" "),function(g,e,t,u,l,q,k,a){function d(p){var r=new u;p.then(function(m){if(!r.isFulfilled())return a.isDate(m)&&
(m=m.toJSDate()),r.resolve(m)},function(m){if(!r.isFulfilled())return r.reject(m)});return r.promise}function n(p){var r=new u;p.then(function(m){if(!r.isFulfilled())return r.resolve(m)},function(m){if(!r.isFulfilled())return r.reject(m)});return r.promise}function b(p){return p.replace(/[|\\{}()[\]^$+*?.]/g,"\\$\x26")}var h={vars:{$feature:"any",$view:"any"}},c=/^\$(feature|aggregatedFeatures)\./i,f={_getSyntaxTree:function(p){return"string"===typeof p?f.createSyntaxTree(p):p},createSyntaxTree:function(p){try{var r=
p?q.parseScript(p):null}catch(m){r=null}return r},createFunction:function(p,r){r=r||g.clone(h);p=f._getSyntaxTree(p);try{var m=p?q.compileScript(p,r):null}catch(v){m=null}return m},createExecContext:function(p,r){return{vars:{$feature:p?k.createFromGraphic(p):new k,$view:r&&r.view},spatialReference:r&&r.sr}},evalSyntaxTree:function(p,r){try{var m=q.executeScript(p,r)}catch(v){m=null}return m},executeFunction:function(p,r){try{var m=p?p(r):null}catch(v){m=null}return a.isDate(m)?m.toJSDate():m},executeAsyncFunction:function(p,
r){try{var m=p?d(p(r)):(new u).reject(Error("expressionUtils.executeAsyncFunction: Invalid argument. compiledFunc is missing."))}catch(v){m=(new u).reject(v)}return m},extractFieldNames:function(p,r){p=f._getSyntaxTree(p);p=q.extractExpectedFieldLiterals(p);var m=[];e.forEach(p,function(z){c.test(z)&&(z=z.replace(c,""),m.push(z))});var v=e.filter(m,function(z){return-1!==z.indexOf("*")});m=e.filter(m,function(z){return-1===v.indexOf(z)});r&&e.forEach(v,function(z){var A=new RegExp("^"+z.split(/\*+/).map(b).join(".*")+
"$","i");e.forEach(r,function(D){A.test(D)&&m.push(D)})});m.sort();return e.filter(m,function(z,A){return 0===A||m[A-1]!==z})},dependsOnView:function(p){return f.hasVariable(p,"$view")},hasGeometryFunctions:function(p){return(p=f._getSyntaxTree(p))?q.scriptTouchesGeometry(p):!1},hasGeometryOperations:function(p){return(p=f._getSyntaxTree(p))?q.scriptUsesGeometryEngine(p):!1},enableGeometryOperations:function(){return n(q.enableGeometrySupport())},hasVariable:function(p,r){return(p=f._getSyntaxTree(p))?
q.referencesMember(p,r):!1},hasFunction:function(p,r){return(p=f._getSyntaxTree(p))?q.referencesFunction(p,r):!1},createFeatureSetFromLayer:function(p,r){r=r||{};var m=q.featureSetUtils();return m?m.constructFeatureSet(p,r.spatialReference,r.outFields,r.returnGeometry,r.cache):null},createFeatureSetFromLayerUrl:function(p,r){r=r||{};var m=q.featureSetUtils();return m?m.constructFeatureSetFromUrlRaw(p,r.spatialReference,r.outFields,r.returnGeometry,r.cache):null},createFeatureSetCollectionFromMap:function(p,
r){var m=q.featureSetUtils();return m?m.createFeatureSetCollectionFromMap(p,p.spatialReference,r&&r.cache):null},createFeatureSetCollectionFromServiceUrl:function(p,r){r=r||{};var m=q.featureSetUtils();return m?m.createFeatureSetCollectionFromService(p,r.spatialReference,r.cache):null},hasFeatureSetOperations:function(p){return(p=f._getSyntaxTree(p))?q.scriptUsesFeatureSet(p):!1},enableFeatureSetOperations:function(){return n(q.enableFeatureSetSupport().then(function(){var p=q.featureSetUtils();p&&
p.initialiseMetaDataCache()}))},enableAsyncOperations:function(){return n(q.enableAsyncSupport())}};g.setObject("support.expressionUtils",f,l);return f})},"esri/arcade/arcade":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./arcadeCompiler ./ArcadeModuleResolver ./arcadeRuntime ./executionError ./parser ./treeAnalysis dojo/has ./polyfill/maybe".split(" "),function(g,e,t,u,l,q,k,a,d,n,b,h){function c(Z,fa){if(null===Y)throw new a.ArcadeExecutionError(null,
a.ExecutionErrorCodes.AsyncNotEnabled,null);if(b("esri-csp-restrictions")||!1===I)return function(pa){return Y.executeScript(Z,pa)};try{return l.compileScript(Z,fa,!0)}catch(pa){if("esri.arcade.arcadeuncompilableerror"===pa.declaredRootClass)return function(da){return Y.executeScript(Z,da)};throw pa;}}function f(Z,fa){void 0===fa&&(fa=[]);return d.parseScript(Z,fa)}function p(Z,fa){if(!0===fa.useAsync||!0===Z.isAsync){if(null===Y)throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.AsyncNotEnabled,
null);return Y.executeScript(Z,fa)}return k.executeScript(Z,fa)}function r(Z,fa){return n.referencesMember(Z,fa)}function m(Z,fa){void 0===fa&&(fa=[]);void 0===Z.usesGeometry&&n.findScriptDependencies(Z,fa);return!0===Z.usesGeometry}function v(){return J?J:J=z()}function z(){return t(this,void 0,void 0,function(){return u(this,function(Z){return[2,new Promise(function(fa,pa){g(["../geometry/geometryEngine","./functions/geomsync"],function(da,ha){V=!0;ha.setGeometryEngine(da);fa(!0)},function(da){pa(da)})})]})})}
function A(){return null!==O?O:O=D()}function D(){return t(this,void 0,void 0,function(){var Z,fa,pa;return u(this,function(da){switch(da.label){case 0:return[4,l.enableAsyncSupport()];case 1:return da.sent(),[4,new Promise(function(ha,P){g(["./arcadeAsyncRuntime"],function(aa){ha(aa)},P)})];case 2:Y=da.sent();Z=0;for(fa=ca;Z<fa.length;Z++)pa=fa[Z],Y.extend(pa),l.extend(pa,"async");ca=null;return[2,!0]}})})}function E(){return Y?!0:!1}function F(){return U?U:U=y()}function y(){return t(this,void 0,
void 0,function(){var Z;return u(this,function(fa){switch(fa.label){case 0:return[4,A()];case 1:return fa.sent(),[4,new Promise(function(pa,da){g(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(ha,P,aa,ea,X){pa({featuresetutils:ha,libraries:[P,aa,ea,X]})},da)})];case 2:return Z=fa.sent(),ba=Z.featuresetutils,Y.extend(Z.libraries),l.extend(Z.libraries,"async"),N=!0,[2,!0]}})})}function x(Z,fa){void 0===
fa&&(fa=[]);void 0===Z.usesFeatureSet&&n.findScriptDependencies(Z,fa);return!0===Z.usesFeatureSet}function w(Z,fa,pa,da,ha,P){void 0===da&&(da=[]);void 0===ha&&(ha=!1);void 0===P&&(P=null);return t(this,void 0,void 0,function(){var aa,ea;return u(this,function(X){switch(X.label){case 0:aa="string"===typeof fa?f(fa):fa;ea=[];if(aa&&(!1===V&&(m(aa)||ha)&&ea.push(v()),!1===E()&&(!0===aa.isAsync||pa)&&ea.push(A()),!1===N)){if(!(X=x(aa)))a:{X=aa;if(da)for(var S=0,ia=da;S<ia.length;S++)if(r(X,ia[S])){X=
!0;break a}X=!1}X&&ea.push(F())}return ea.length?[4,Promise.all(ea)]:[3,2];case 1:X.sent(),X.label=2;case 2:return[4,C(Z,aa,P,pa,ha)];case 3:return X.sent(),[2,!0]}})})}function C(Z,fa,pa,da,ha){void 0===pa&&(pa=null);void 0===da&&(da=!1);void 0===ha&&(ha=!1);return t(this,void 0,void 0,function(){var P,aa,ea,X,S,ia;return u(this,function(oa){switch(oa.label){case 0:P=n.findModuleImports(fa),null===pa&&0<P.length&&(pa=q.ArcadeModuleResolver.getDefault()),fa.loadedModules={},aa=0,ea=P,oa.label=1;case 1:if(!(aa<
ea.length))return[3,5];X=ea[aa];h.assertIsSome(pa);S=pa.normalizeModuleUri(X.source);if(Z.has(S.uri))throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.CircularModules,null);Z.add(S.uri);return[4,pa.fetchModule(S)];case 2:return ia=oa.sent(),[4,w(Z,ia,da,[],ha,pa)];case 3:oa.sent(),Z.delete(S.uri),ia.isAsync&&(fa.isAsync=!0),ia.usesFeatureSet&&(fa.usesFeatureSet=!0),ia.usesGeometry&&(fa.usesGeometry=!0),fa.loadedModules[X.libname]={uri:S.uri,script:ia},oa.label=4;case 4:return aa++,[3,1];
case 5:return[2]}})})}Object.defineProperty(e,"__esModule",{value:!0});e.featureSetUtils=e.scriptTouchesGeometry=e.loadDependentModules=e.scriptUsesModules=e._loadScriptDependenciesImpl=e.loadScriptDependencies=e.scriptIsAsync=e.scriptUsesFeatureSet=e.enableFeatureSetSupportImpl=e.enableFeatureSetSupport=e.isGeometryEnabled=e.isAsyncEnabled=e.isFeatureSetSupportEnabled=e.enableAsyncSupportImpl=e.enableAsyncSupport=e.enableGeometrySupportImpl=e.enableGeometrySupport=e.scriptUsesGeometryEngine=e.extractExpectedFieldLiterals=
e.extractFieldLiterals=e.referencesFunction=e.referencesMember=e.executeScript=e.parseAndExecuteScript=e.parseScript=e.extend=e.compileScript=void 0;var B="feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" "),I=function(){if(b("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(Z){return!1}}(),N=!1,V=!1,Y=null,ca=[];e.compileScript=function(Z,fa){if(!0===fa.useAsync||!0===Z.isAsync)return c(Z,
fa);if(b("esri-csp-restrictions"))return function(pa){return k.executeScript(Z,pa)};try{return l.compileScript(Z,fa)}catch(pa){if("esri.arcade.arcadeuncompilableerror"===pa.declaredRootClass)return function(da){return k.executeScript(Z,da)};throw pa;}};e.extend=function(Z){k.extend(Z);l.extend(Z,"sync");null===Y?ca.push(Z):(l.extend(Z,"async"),Y.extend(Z))};e.parseScript=f;e.parseAndExecuteScript=function(Z,fa,pa){void 0===pa&&(pa=[]);Z=d.parseScript(Z,pa);return p(Z,fa)};e.executeScript=p;e.referencesMember=
r;e.referencesFunction=function(Z,fa){return n.referencesFunction(Z,fa)};e.extractFieldLiterals=function(Z,fa){void 0===fa&&(fa=!1);void 0===fa&&(fa=!1);return n.findFieldLiterals(Z)};e.extractExpectedFieldLiterals=function(Z){return n.findExpectedFieldLiterals(Z)};e.scriptUsesGeometryEngine=m;var J=null;e.enableGeometrySupport=v;e.enableGeometrySupportImpl=z;var O=null;e.enableAsyncSupport=A;e.enableAsyncSupportImpl=D;e.isFeatureSetSupportEnabled=function(){return N};e.isAsyncEnabled=E;e.isGeometryEnabled=
function(){return V};var U=null;e.enableFeatureSetSupport=F;e.enableFeatureSetSupportImpl=y;e.scriptUsesFeatureSet=x;e.scriptIsAsync=function(Z,fa){void 0===fa&&(fa=[]);void 0===Z.isAsync&&n.findScriptDependencies(Z,fa);return!0===Z.isAsync};e.loadScriptDependencies=function(Z,fa,pa,da,ha){void 0===pa&&(pa=[]);void 0===da&&(da=!1);void 0===ha&&(ha=null);return t(this,void 0,void 0,function(){return u(this,function(P){return[2,w(new Set,Z,fa,pa,da,ha)]})})};e._loadScriptDependenciesImpl=w;e.scriptUsesModules=
function(Z,fa){void 0===fa&&(fa=[]);void 0===Z.usesModules&&n.findScriptDependencies(Z,fa);return!0===Z.usesModules};e.loadDependentModules=C;e.scriptTouchesGeometry=function(Z){if(m(Z))return!0;Z=n.findFunctionCalls(Z);for(var fa=!1,pa=0;pa<Z.length;pa++)if(B.includes(Z[pa])){fa=!0;break}return fa};var ba=null;e.featureSetUtils=function(){return ba}})},"esri/arcade/polyfill/tsSupport/awaiter":function(){define([],function(){return function(){return function(g,e,t,u){function l(q){return q instanceof
t?q:new t(function(k){k(q)})}return new (t||(t=Promise))(function(q,k){function a(b){try{n(u.next(b))}catch(h){k(h)}}function d(b){try{n(u["throw"](b))}catch(h){k(h)}}function n(b){b.done?q(b.value):l(b.value).then(a,d)}n((u=u.apply(g,e||[])).next())})}}()})},"esri/arcade/polyfill/tsSupport/generator":function(){define([],function(){return function(){return function(g,e){function t(n){return function(b){return u([n,b])}}function u(n){if(q)throw new TypeError("Generator is already executing.");for(;l;)try{if(q=
1,k&&(a=n[0]&2?k["return"]:n[0]?k["throw"]||((a=k["return"])&&a.call(k),0):k.next)&&!(a=a.call(k,n[1])).done)return a;if(k=0,a)n=[n[0]&2,a.value];switch(n[0]){case 0:case 1:a=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++;k=n[1];n=[0];continue;case 7:n=l.ops.pop();l.trys.pop();continue;default:if(!(a=l.trys,a=0<a.length&&a[a.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3]))l.label=n[1];else if(6===n[0]&&l.label<a[1])l.label=a[1],a=n;else if(a&&
l.label<a[2])l.label=a[2],l.ops.push(n);else{a[2]&&l.ops.pop();l.trys.pop();continue}}n=e.call(g,l)}catch(b){n=[6,b],k=0}finally{q=a=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var l={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},q,k,a,d;return d={next:t(0),"throw":t(1),"return":t(2)},"function"===typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d}}()})},"esri/arcade/arcadeCompiler":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./polyfill/tsSupport/extends ./Dictionary ./Feature ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ./polyfill/promiseUtils ../geometry/Geometry ../SpatialReference ./ArcadeModuleLoader ./ArcadeModule ./FunctionWrapper ./executionError".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h,c,f,p,r,m,v,z,A,D,E,F,y,x){function w(R,T,ka){try{return ka(R,null,T.arguments)}catch(na){throw na;}}function C(R,T){try{switch(T.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return J(R,T);case "VariableDeclaration":for(var ka=[],na=0;na<T.declarations.length;na++)ka.push(C(R,T.declarations[na]));return ka.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":case "Program":return Y(R,T);case "FunctionDeclaration":var ta=
T.id.name.toLowerCase();ca(ta);var G="",ja=!1;void 0!==R.globalScope[ta]?G=ta:void 0!==R.globalScope._SymbolsMap[ta]?G=R.globalScope._SymbolsMap[ta]:R.undeclaredGlobalsInFunctions.has(ta)?(G=R.undeclaredGlobalsInFunctions.get(ta).manglename,R.globalScope._SymbolsMap[ta]=G,R.mangleMap[ta]=G,R.undeclaredGlobalsInFunctions.delete(ta),ja=!0):(G=ba(R),R.globalScope._SymbolsMap[ta]=G,R.mangleMap[ta]=G);ka={isAsync:R.isAsync,console:R.console,exports:R.exports,undeclaredGlobalsInFunctions:R.undeclaredGlobalsInFunctions,
customfunctions:R.customfunctions,moduleFactory:R.moduleFactory,moduleFactoryMap:R.moduleFactoryMap,libraryResolver:R.libraryResolver,lrucache:R.lrucache,interceptor:R.interceptor,services:R.services,symbols:R.symbols,mangleMap:R.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:R.depthCounter,globalScope:R.globalScope};var ra="new lang.UserDefinedCompiledFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(ta=0;ta<T.params.length;ta++){na=T.params[ta].name.toLowerCase();ca(na);var K=ba(R);ka.localScope._SymbolsMap[na]=K;ka.mangleMap[na]=K;ra+="lscope['"+K+"']\x3darguments["+ta.toString()+"];\n"}!0===R.isAsync?(ra=ra+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(Y(ka,T.body)+"\n return lastStatement; "),ra=ra+"});  }, runtimeCtx),"+(T.params.length+")")):ra+=Y(ka,T.body)+"\n return lastStatement; }, runtimeCtx),"+T.params.length+")";ra+="\n lastStatement \x3d lc.voidOperation; \n";
return ja?"gscope[lang.setAssig('"+G+"', runtimeCtx)]\x3d"+ra:"gscope['"+G+"']\x3d"+ra;case "ImportDeclaration":var xa,va,la=T.specifiers[0].local.name.toLowerCase();ca(la);var Ca=null===(xa=R.libraryResolver)||void 0===xa?void 0:xa.loadLibrary(la),Ma=ba(R);void 0===R.moduleFactory[Ca.uri]&&(R.moduleFactory[Ca.uri]=aa(Ca.syntax,{interceptor:R.interceptor,services:R.services,moduleFactory:R.moduleFactory,lrucache:R.lrucache,timeReference:null!==(va=R.timeReference)&&void 0!==va?va:null,libraryResolver:R.libraryResolver,
customfunctions:R.customfunctions,vars:{}},R.isAsync));R.moduleFactoryMap[Ma]=Ca.uri;T="";T=R.isAsync?"(yield lang.loadModule('"+Ma+"', runtimeCtx) ); ":"lang.loadModule('"+Ma+"', runtimeCtx); ";if(void 0!==R.globalScope[la])var ua="gscope['"+la+"']\x3d"+T;else void 0!==R.globalScope._SymbolsMap[la]?ua="gscope['"+R.globalScope._SymbolsMap[la]+"']\x3d"+T:(ka="",R.undeclaredGlobalsInFunctions.has(la)?(ka=R.undeclaredGlobalsInFunctions.get(la).manglename,R.undeclaredGlobalsInFunctions.delete(la)):ka=
ba(R),R.globalScope._SymbolsMap[la]=ka,R.mangleMap[la]=ka,ua="gscope[lang.setAssig('"+ka+"', runtimeCtx)]\x3d"+T);return ua;case "ExportNamedDeclaration":var Ba=C(R,T.declaration);if("FunctionDeclaration"===T.declaration.type)R.exports[T.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===T.declaration.type){ka=0;for(var Aa=T.declaration.declarations;ka<Aa.length;ka++)R.exports[Aa[ka].id.name.toLowerCase()]="variable"}return Ba;case "ReturnStatement":var Ga=null===T.argument?
"return lc.voidOperation":"return "+C(R,T.argument);return Ga;case "IfStatement":return V(R,T);case "ExpressionStatement":var ya="AssignmentExpression"===T.expression.type?"lastStatement \x3d lc.voidOperation; "+C(R,T.expression)+"; \n ":"lastStatement \x3d "+C(R,T.expression)+"; ";return ya;case "AssignmentExpression":return I(R,T);case "UpdateExpression":return B(R,T);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{ka=[];K=na=0;for(ja=T.quasis;K<
ja.length;K++)ra=ja[K],ka.push(ra.value?JSON.stringify(ra.value.cooked):JSON.stringify("")),!1===ra.tail&&(ka.push(T.expressions[na]?"lang.castString(lang.aCheck("+C(R,T.expressions[na])+", 'TemplateLiteral'))":""),na++);G="(["+ka.join(",")+"]).join('')"}catch(Ua){throw Ua;}return G;case "TemplateElement":return JSON.stringify(T.value?T.value.cooked:"");case "ForStatement":ka="lastStatement \x3d lc.voidOperation; \n";null!==T.init&&(ka+=C(R,T.init)+"; ");var Ea=Z(R),Fa=Z(R);ka+="var "+Ea+" \x3d true; \n do { ";
null!==T.update&&(ka+=" if ("+Ea+"\x3d\x3d\x3dfalse) {\n "+C(R,T.update)+"  \n}\n "+Ea+"\x3dfalse; \n");null!==T.test&&(ka+="var "+Fa+" \x3d "+C(R,T.test)+"; ",ka+="if ("+Fa+"\x3d\x3d\x3dfalse) { break; } else if ("+Fa+"!\x3d\x3dtrue) { lang.error('"+x.ExecutionErrorCodes.BooleanConditionRequired+"');   }\n");ka+=C(R,T.body);null!==T.update&&(ka+="\n "+C(R,T.update));return ka+("\n"+Ea+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var Ka=Z(R),Ja=Z(R),
Oa=Z(R),Da="var "+Ka+" \x3d "+C(R,T.right)+";\n";"VariableDeclaration"===T.left.type&&(Da+=C(R,T.left));var Na="VariableDeclaration"===T.left.type?T.left.declarations[0].id.name:T.left.name;Na=Na.toLowerCase();ca(Na);ka="";null!==R.localScope&&(void 0!==R.localScope[Na]?ka="lscope['"+Na+"']":void 0!==R.localScope._SymbolsMap[Na]&&(ka="lscope['"+R.localScope._SymbolsMap[Na]+"']"));na="";if(""===ka)if(void 0!==R.globalScope[Na])ka="gscope['"+Na+"']";else if(void 0!==R.globalScope._SymbolsMap[Na])ka=
"gscope['"+R.globalScope._SymbolsMap[Na]+"']";else if(null!==R.localScope)if(R.undeclaredGlobalsInFunctions.has(Na))ka="gscope['"+R.undeclaredGlobalsInFunctions.get(Na).manglename+"']",na=R.undeclaredGlobalsInFunctions.get(Na).manglename;else{var Pa={manglename:ba(R),node:T.left};R.undeclaredGlobalsInFunctions.set(Na,Pa);ka="gscope['"+Pa.manglename+"']";na=Pa.manglename}na&&(Da+="lang.chkAssig('"+na+"',runtimeCtx); \n");Da=Da+("if ("+Ka+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+
(Ka+") || lc.isString("+Ka+")) {var ")+(Ja+"\x3d"+Ka+".length; \nfor(var ")+(Oa+"\x3d0; "+Oa+"\x3c"+Ja+"; "+Oa+"++) {\n");Da+=ka+"\x3d"+Oa+";\n";Da+=C(R,T.body);Da+="\n}\n";Da+=" lastStatement \x3d lc.voidOperation; \n";Da+=" \n}\n";Da+="else if (lc.isImmutableArray("+Ka+")) {";Da=Da+("var "+Ja+"\x3d"+Ka+".length(); \nfor(var ")+(Oa+"\x3d0; "+Oa+"\x3c"+Ja+"; "+Oa+"++) {\n");Da+=ka+"\x3d"+Oa+";\n";Da+=C(R,T.body);Da+="\n}\n";Da+=" lastStatement \x3d lc.voidOperation; \n";Da+=" \n}\n";Da+="else if (( "+
Ka+" instanceof lang.Dictionary) || ( "+Ka+" instanceof lang.Feature)) {";Da=Da+("var "+Ja+"\x3d"+Ka+".keys(); \nfor(var ")+(Oa+"\x3d0; "+Oa+"\x3c"+Ja+".length; "+Oa+"++) {\n");Da+=ka+"\x3d"+Ja+"["+Oa+"];\n";Da+=C(R,T.body);Da+="\n}\n";Da+=" lastStatement \x3d lc.voidOperation; \n";Da+=" \n}\n";R.isAsync&&(Da+="else if (lc.isFeatureSet("+Ka+")) {",Da=Da+("var "+Ja+"\x3d"+Ka+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(Oa+"\x3dlang. graphicToFeature( yield "+Ja+".next(),"+Ka+", runtimeCtx); "+
Oa+"!\x3dnull; "+Oa+"\x3dlang. graphicToFeature( yield "+Ja+".next(),"+Ka+", runtimeCtx)) {\n")+(ka+"\x3d"+Oa+";\n"),Da+=C(R,T.body),Da+="\n}\n",Da+=" lastStatement \x3d lc.voidOperation; \n",Da+=" \n}\n");return Da+"else { lastStatement \x3d lc.voidOperation; } \n";case "WhileStatement":ka="lastStatement \x3d lc.voidOperation; \n";var Ta=Z(R);return ka+="\n  var "+Ta+" \x3d true;\n    do {\n      "+Ta+" \x3d "+C(R,T.test)+";\n      if ("+Ta+"\x3d\x3dfalse) {\n        break;\n      }\n      if ("+
Ta+"!\x3d\x3dtrue) {\n        lang.error('"+x.ExecutionErrorCodes.BooleanConditionRequired+"');\n      }\n      "+C(R,T.body)+"\n    }\n    while ("+Ta+" !\x3d\x3d false);\n    lastStatement \x3d lc.voidOperation;\n  ";case "Identifier":return O(R,T);case "MemberExpression":try{ka=void 0;!0===T.computed?ka=C(R,T.property):(ka="'"+T.property.name+"'",ca(T.property.name));var Xa="lang.member("+C(R,T.object)+","+ka+")"}catch(Ua){throw Ua;}return Xa;case "Literal":return null===T.value||void 0===T.value?
"null":JSON.stringify(T.value);case "CallExpression":return U(R,T);case "UnaryExpression":try{var ob="lang.unary("+C(R,T.argument)+",'"+T.operator+"')"}catch(Ua){throw Ua;}return ob;case "BinaryExpression":try{var mb="lang.binary("+C(R,T.left)+","+C(R,T.right)+",'"+T.operator+"')"}catch(Ua){throw Ua;}return mb;case "LogicalExpression":try{if("AssignmentExpression"===T.left.type||"UpdateExpression"===T.left.type)throw new x.ArcadeCompilationError(R,x.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,
T);if("AssignmentExpression"===T.right.type||"UpdateExpression"===T.right.type)throw new x.ArcadeCompilationError(R,x.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,T);if("\x26\x26"===T.operator||"||"===T.operator)var ub="(lang.logicalCheck("+C(R,T.left)+") "+T.operator+" lang.logicalCheck("+C(R,T.right)+"))";else throw new x.ArcadeCompilationError(null,x.ExecutionErrorCodes.LogicExpressionOrAnd,null);}catch(Ua){throw Ua;}return ub;case "ArrayExpression":try{ka=[];for(na=0;na<T.elements.length;na++)"Literal"===
T.elements[na].type?ka.push(C(R,T.elements[na])):ka.push("lang.aCheck("+C(R,T.elements[na])+",'ArrayExpression')");var vb="["+ka.join(",")+"]"}catch(Ua){throw Ua;}return vb;case "ObjectExpression":ka="lang.dictionary([";for(na=0;na<T.properties.length;na++){var Va=T.properties[na];ca(Va.key.name);var fb="Identifier"===Va.key.type?"'"+Va.key.name+"'":C(R,Va.key),wb=C(R,Va.value);0<na&&(ka+=",");ka+="lang.strCheck("+fb+",'ObjectExpression'),lang.aCheck("+wb+", 'ObjectExpression')"}return ka+"])";case "Property":throw new x.ArcadeCompilationError(R,
x.ExecutionErrorCodes.NeverReach,T);case "Array":throw new x.ArcadeCompilationError(R,x.ExecutionErrorCodes.NeverReach,T);default:throw new x.ArcadeCompilationError(R,x.ExecutionErrorCodes.Unrecognised,T);}}catch(Ua){throw Ua;}}function B(R,T){var ka=null,na="";if("MemberExpression"===T.argument.type)return ka=C(R,T.argument.object),!0===T.argument.computed?na=C(R,T.argument.property):(na="'"+T.argument.property.name+"'",ca(T.argument.property.name)),"lang.memberupdate("+ka+","+na+",'"+T.operator+
"',"+T.prefix+")";ka=T.argument.name.toLowerCase();ca(ka);if(null!==R.localScope){if(void 0!==R.localScope[ka])return"lang.update(lscope, '"+ka+"','"+T.operator+"',"+T.prefix+")";if(void 0!==R.localScope._SymbolsMap[ka])return"lang.update(lscope, '"+R.localScope._SymbolsMap[ka]+"','"+T.operator+"',"+T.prefix+")"}if(void 0!==R.globalScope[ka])return"lang.update(gscope, '"+ka+"','"+T.operator+"',"+T.prefix+")";if(void 0!==R.globalScope._SymbolsMap[ka])return"lang.update(gscope, '"+R.globalScope._SymbolsMap[ka]+
"','"+T.operator+"',"+T.prefix+")";if(null!==R.localScope){if(R.undeclaredGlobalsInFunctions.has(ka))return"lang.update(gscope,lang.chkAssig( '"+R.undeclaredGlobalsInFunctions.get(ka).manglename+"',runtimeCtx),'"+T.operator+"',"+T.prefix+")";na={manglename:ba(R),node:T.argument};R.undeclaredGlobalsInFunctions.set(ka,na);return"lang.update(gscope, lang.chkAssig('"+na.manglename+"',runtimeCtx),'"+T.operator+"',"+T.prefix+")"}throw new x.ArcadeExecutionError(R,x.ExecutionErrorCodes.InvalidIdentifier,
T);}function I(R,T){var ka=C(R,T.right),na=null,ta="";if("MemberExpression"===T.left.type)return na=C(R,T.left.object),!0===T.left.computed?ta=C(R,T.left.property):(ta="'"+T.left.property.name+"'",ca(T.left.property.name)),"lang.assignmember("+na+","+ta+",'"+T.operator+"',"+ka+")";na=T.left.name.toLowerCase();ca(na);if(null!==R.localScope){if(void 0!==R.localScope[na])return"lscope['"+na+"']\x3dlang.assign("+ka+",'"+T.operator+"', lscope['"+na+"'])";if(void 0!==R.localScope._SymbolsMap[na])return"lscope['"+
R.localScope._SymbolsMap[na]+"']\x3dlang.assign("+ka+",'"+T.operator+"', lscope['"+R.localScope._SymbolsMap[na]+"'])"}if(void 0!==R.globalScope[na])return"gscope['"+na+"']\x3dlang.assign("+ka+",'"+T.operator+"', gscope['"+na+"'])";if(void 0!==R.globalScope._SymbolsMap[na])return"gscope['"+R.globalScope._SymbolsMap[na]+"']\x3dlang.assign("+ka+",'"+T.operator+"', gscope['"+R.globalScope._SymbolsMap[na]+"'])";if(null!==R.localScope){if(R.undeclaredGlobalsInFunctions.has(na))return"gscope[lang.chkAssig('"+
R.undeclaredGlobalsInFunctions.get(na).manglename+"',runtimeCtx)]\x3dlang.assign("+ka+",'"+T.operator+"', gscope['"+R.undeclaredGlobalsInFunctions.get(na).manglename+"'])";ta={manglename:ba(R),node:T.argument};R.undeclaredGlobalsInFunctions.set(na,ta);return"gscope[lang.chkAssig('"+ta.manglename+"',runtimeCtx)]\x3dlang.assign("+ka+",'"+T.operator+"', gscope['"+ta.manglename+"'])"}throw new x.ArcadeExecutionError(R,x.ExecutionErrorCodes.InvalidIdentifier,T);}function N(R,T){return"BlockStatement"===
T.type?C(R,T):"ReturnStatement"===T.type||"BreakStatement"===T.type||"ContinueStatement"===T.type?C(R,T)+"; ":"UpdateExpression"===T.type?"lastStatement \x3d "+C(R,T)+"; ":"ExpressionStatement"===T.type?C(R,T):"ObjectExpression"===T.type?"lastStatement \x3d "+C(R,T)+"; ":C(R,T)+"; "}function V(R,T){if("AssignmentExpression"===T.test.type||"UpdateExpression"===T.test.type)throw new x.ArcadeCompilationError(R,x.ExecutionErrorCodes.BooleanConditionRequired,T);return"if (lang.mustBoolean("+C(R,T.test)+
", runtimeCtx) \x3d\x3d\x3d true) {\n    "+N(R,T.consequent)+"\n  } "+(null!==T.alternate?"IfStatement"===T.alternate.type?" else "+V(R,T.alternate):" else {\n      "+N(R,T.alternate)+"\n    }\n":" else {\n      lastStatement \x3d lc.voidOperation;\n    }\n")}function Y(R,T){for(var ka="",na=0;na<T.body.length;na++)"EmptyStatement"!==T.body[na].type&&(ka="ReturnStatement"===T.body[na].type?ka+(C(R,T.body[na])+"; \n"):"BreakStatement"===T.body[na].type?ka+(C(R,T.body[na])+"; \n"):"ContinueStatement"===
T.body[na].type?ka+(C(R,T.body[na])+"; \n"):"UpdateExpression"===T.body[na].type?ka+("lastStatement \x3d "+C(R,T.body[na])+"; \n"):"ObjectExpression"===T.body[na].type?ka+("lastStatement \x3d "+C(R,T.body[na])+"; \n"):ka+(C(R,T.body[na])+" \n"));return ka}function ca(R){if("iif"===R)throw new x.ArcadeUncompilableError;if("decode"===R)throw new x.ArcadeUncompilableError;if("when"===R)throw new x.ArcadeUncompilableError;}function J(R,T){var ka=null===T.init?null:C(R,T.init);ka===n.voidOperation&&(ka=
null);T=T.id.name.toLowerCase();ca(T);if(null!==R.localScope){if(void 0!==R.localScope[T])return"lscope['"+T+"']\x3d"+ka+"; ";if(void 0!==R.localScope._SymbolsMap[T])return"lscope['"+R.localScope._SymbolsMap[T]+"']\x3d"+ka+"; ";var na=ba(R);R.localScope._SymbolsMap[T]=na;R.mangleMap[T]=na;return"lscope['"+na+"']\x3d"+ka+"; "}if(void 0!==R.globalScope[T])return"gscope['"+T+"']\x3d"+ka+"; ";if(void 0!==R.globalScope._SymbolsMap[T])return"gscope['"+R.globalScope._SymbolsMap[T]+"']\x3d"+ka+"; ";if(R.undeclaredGlobalsInFunctions.has(T))return na=
R.undeclaredGlobalsInFunctions.get(T).manglename,R.globalScope._SymbolsMap[T]=na,R.mangleMap[T]=na,R.undeclaredGlobalsInFunctions.delete(T),"gscope[lang.setAssig('"+na+"', runtimeCtx)]\x3d"+ka+"; ";na=ba(R);R.globalScope._SymbolsMap[T]=na;R.mangleMap[T]=na;return"gscope['"+na+"']\x3d"+ka+"; "}function O(R,T){try{var ka=T.name.toLowerCase();ca(ka);if(null!==R.localScope){if(void 0!==R.localScope[ka])return"lscope['"+ka+"']";if(void 0!==R.localScope._SymbolsMap[ka])return"lscope['"+R.localScope._SymbolsMap[ka]+
"']"}if(void 0!==R.globalScope[ka])return"gscope['"+ka+"']";if(void 0!==R.globalScope._SymbolsMap[ka])return"gscope['"+R.globalScope._SymbolsMap[ka]+"']";if(null!==R.localScope){if(R.undeclaredGlobalsInFunctions.has(ka))return"gscope[lang.chkAssig('"+R.undeclaredGlobalsInFunctions.get(ka).manglename+"',runtimeCtx)]";var na={manglename:ba(R),node:T.argument};R.undeclaredGlobalsInFunctions.set(ka,na);return"gscope[lang.chkAssig('"+na.manglename+"',runtimeCtx)]"}throw new x.ArcadeCompilationError(R,
x.ExecutionErrorCodes.InvalidIdentifier,T);}catch(ta){throw ta;}}function U(R,T){try{if("MemberExpression"===T.callee.type){var ka=void 0;!0===T.callee.computed?ka=C(R,T.callee.property):(ka="'"+T.callee.property.name+"'",ca(T.callee.property.name));for(var na="[",ta=0;ta<T.arguments.length;ta++)0<ta&&(na+=", "),na+=C(R,T.arguments[ta]);na+="]";return R.isAsync?"(yield lang.callModuleFunction("+C(R,T.callee.object)+","+na+","+ka+",runtimeCtx))":"lang.callModuleFunction("+C(R,T.callee.object)+","+
na+","+ka+",runtimeCtx)"}if("Identifier"!==T.callee.type)throw new x.ArcadeCompilationError(R,x.ExecutionErrorCodes.FuncionNotFound,T);var G=T.callee.name.toLowerCase();if("iif"===G){try{if(3!==T.arguments.length)throw new x.ArcadeCompilationError(R,x.ExecutionErrorCodes.WrongNumberOfParameters,T);var ja=Z(R);var ra=(R.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {")+"\n        var "+ja+" \x3d "+C(R,T.arguments[0])+";\n       \n        if ("+
ja+" \x3d\x3d\x3d true) {\n          return  "+C(R,T.arguments[1])+";\n        }\n        else if ("+ja+" \x3d\x3d\x3d false) {\n          return "+C(R,T.arguments[2])+";\n        }\n        else {\n          lang.error('ExecutionErrorCodes.BooleanConditionRequired');\n        }\n      "+(R.isAsync?"})}()))":"}()")}catch(Ma){throw Ma;}return ra}if("when"===G){try{if(3>T.arguments.length)throw new x.ArcadeCompilationError(R,x.ExecutionErrorCodes.WrongNumberOfParameters,T);if(0===T.arguments.length%
2)throw new x.ArcadeCompilationError(R,x.ExecutionErrorCodes.WrongNumberOfParameters,T);var K=Z(R);na="var ";for(ta=0;ta<T.arguments.length-1;ta+=2)na+=K+" \x3d lang.mustBoolean("+C(R,T.arguments[ta])+", runtimeCtx);\n      if ("+K+" \x3d\x3d\x3d true ) {\n        return "+C(R,T.arguments[ta+1])+" \n      }\n";ka=(R.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {")+"\n        "+na+"\n        return "+C(R,T.arguments[T.arguments.length-1])+
"\n        "+(R.isAsync?"})}()))":"}()")}catch(Ma){throw Ma;}return ka}if("decode"===G){try{if(2>T.arguments.length)throw new x.ArcadeCompilationError(R,x.ExecutionErrorCodes.WrongNumberOfParameters,T);if(2===T.arguments.length)var xa="("+C(R,T.arguments[1])+")";else{if(0===(T.arguments.length-1)%2)throw new x.ArcadeCompilationError(R,x.ExecutionErrorCodes.WrongNumberOfParameters,T);var va=Z(R),la=Z(R);na="var ";for(ta=1;ta<T.arguments.length-1;ta+=2)na+=la+" \x3d "+C(R,T.arguments[ta])+";\n      if (lang.binary("+
la+", "+va+', "\x3d\x3d") \x3d\x3d\x3d true ) {\n        return '+C(R,T.arguments[ta+1])+" \n      }\n";xa=(R.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {")+"\n        var "+va+" \x3d "+C(R,T.arguments[0])+";\n        "+na+"\n        return "+C(R,T.arguments[T.arguments.length-1])+"\n        "+(R.isAsync?"})}()))":"}()")}}catch(Ma){throw Ma;}return xa}ka="";null!==R.localScope&&(void 0!==R.localScope[G]?ka="lscope['"+G+"']":void 0!==R.localScope._SymbolsMap[G]&&
(ka="lscope['"+R.localScope._SymbolsMap[G]+"']"));if(""===ka)if(void 0!==R.globalScope[G])ka="gscope['"+G+"']";else if(void 0!==R.globalScope._SymbolsMap[G])ka="gscope['"+R.globalScope._SymbolsMap[G]+"']";else if(null!==R.localScope)if(R.undeclaredGlobalsInFunctions.has(G))ka="gscope[lang.chkAssig('"+R.undeclaredGlobalsInFunctions.get(G).manglename+"',runtimeCtx)]";else{var Ca={manglename:ba(R),node:T.argument};R.undeclaredGlobalsInFunctions.set(G,Ca);ka="gscope[lang.chkAssig('"+Ca.manglename+"',runtimeCtx)]"}if(""!==
ka){na="[";for(ta=0;ta<T.arguments.length;ta++)0<ta&&(na+=", "),na+=C(R,T.arguments[ta]);na+="]";return R.isAsync?"(yield lang.callfunc("+ka+","+na+",runtimeCtx) )":"lang.callfunc("+ka+","+na+",runtimeCtx)"}throw new x.ArcadeCompilationError(R,x.ExecutionErrorCodes.FuncionNotFound,T);}catch(Ma){throw Ma;}}function ba(R){R.symbols.symbolCounter++;return"_T"+R.symbols.symbolCounter.toString()}function Z(R){R.symbols.symbolCounter++;return"_Tvar"+R.symbols.symbolCounter.toString()}function fa(R,T,ka){var na=
{};R||(R={});ka||(ka={});na._SymbolsMap={};na.textformatting=1;na.infinity=1;na.pi=1;for(var ta in T)na[ta]=1;for(ta in ka)na[ta]=1;for(ta in R)na[ta]=1;return na}function pa(R,T,ka,na){ka=ka?new oa:new ia;R||(R={});T||(T={});var ta=new a({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});ta.immutable=!1;ka._SymbolsMap={textformatting:1,infinity:1,pi:1};ka.textformatting=ta;ka.infinity=Number.POSITIVE_INFINITY;ka.pi=Math.PI;for(var G in T)ka[G]=T[G],ka._SymbolsMap[G]=
1;for(G in R)ka._SymbolsMap[G]=1,ka[G]=R[G]&&"esri.Graphic"===R[G].declaredClass?d.createFromGraphic(R[G],null!==na&&void 0!==na?na:null):R[G];return ka}function da(R,T){for(var ka={mode:T,compiled:!0,functions:{},signatures:[],standardFunction:w,standardFunctionAsync:w,evaluateIdentifier:ha},na=0;na<R.length;na++)R[na].registerFunctions(ka);if("sync"===T){for(var ta in ka.functions)ea[ta]=new y.NativeFunction(ka.functions[ta]),ia.prototype[ta]=ea[ta];for(na=0;na<ka.signatures.length;na++)b.addFunctionDeclaration(ka.signatures[na],
"sync")}else{for(ta in ka.functions)X[ta]=new y.NativeFunction(ka.functions[ta]),oa.prototype[ta]=X[ta];for(na=0;na<ka.signatures.length;na++)b.addFunctionDeclaration(ka.signatures[na],"async")}}function ha(R,T){T=T.name;if("_SymbolsMap"===T)throw new x.ArcadeExecutionError(R,x.ExecutionErrorCodes.InvalidIdentifier,null);if(0<R.localStack.length){if("_t"!==T.substr(0,2).toLowerCase()&&void 0!==R.localStack[R.localStack.length-1][T])return R.localStack[R.localStack.length-1][T];var ka=R.mangleMap[T];
if(void 0!==ka&&void 0!==R.localStack[R.localStack.length-1][ka])return R.localStack[R.localStack.length-1][ka]}if("_t"!==T.substr(0,2).toLowerCase()&&void 0!==R.globalScope[T]||1===R.globalScope._SymbolsMap[T])return R.globalScope[T];T=R.mangleMap[T];if(void 0!==T)return R.globalScope[T]}function P(R){}function aa(R,T,ka){var na;void 0===ka&&(ka=!1);var ta={isAsync:ka,moduleFactory:T.moduleFactory,moduleFactoryMap:{},libraryResolver:new E.ArcadeModuleLoader(null,R.loadedModules),globalScope:fa(T.vars,
ka?X:ea,T.customfunctions),customfunctions:T.customfunctions,localScope:null,mangleMap:{},undeclaredGlobalsInFunctions:new Map,depthCounter:{depth:1},exports:{},console:P,lrucache:T.lrucache,timeReference:null!==(na=T.timeReference)&&void 0!==na?na:null,interceptor:T.interceptor,services:T.services,symbols:{symbolCounter:0}};R=C(ta,R);""===R&&(R="lc.voidOperation; ");var G=ta.moduleFactory,ja=ta.moduleFactoryMap,ra=ta.exports,K={},xa;for(xa in ra)K[xa]=void 0!==ta.mangleMap[xa]?ta.mangleMap[xa]:xa;
ta={lc:n,lang:wa,mangles:ta.mangleMap,prepareModule:function(va){return new Ha(va)},prepare:function(va,la){var Ca,Ma=va.spatialReference;if(null===Ma||void 0===Ma)Ma=new D({wkid:102100});var ua=pa(va.vars,va.customfunctions,la,va.timeReference);return{localStack:[],isAsync:la,exports:ra,exportmangle:K,gdefs:{},moduleFactory:G,moduleFactoryMap:ja,moduleSingletons:va.moduleSingletons,mangleMap:this.mangles,spatialReference:Ma,globalScope:ua,abortSignal:void 0===va.abortSignal||null===va.abortSignal?
{aborted:!1}:va.abortSignal,localScope:null,services:va.services,console:va.console?va.console:P,lrucache:va.lrucache,timeReference:null!==(Ca=va.timeReference)&&void 0!==Ca?Ca:null,interceptor:va.interceptor,symbols:{symbolCounter:0},depthCounter:va.depthCounter}}};return(new Function("context","spatialReference",ka?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
R+"\n return lastStatement; }); } \n yield mainBody(); \n return this.prepareModule(runtimeCtx); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+R+"\n return lastStatement; } \n mainBody(); \n return this.prepareModule(runtimeCtx); ")).bind(ta)}Object.defineProperty(e,"__esModule",{value:!0});e.enableAsyncSupport=e.compileScript=e.executeScript=
e.extend=e.functionHelper=e.UserDefinedCompiledFunction=void 0;t=function(R){function T(ka,na){var ta=R.call(this)||this;ta.paramCount=na;ta.fn=ka;return ta}k(T,R);T.prototype.createFunction=function(ka){var na=this;return function(){for(var ta=[],G=0;G<arguments.length;G++)ta[G]=arguments[G];if(ta.length!==na.paramCount)throw new x.ArcadeExecutionError(ka,x.ExecutionErrorCodes.WrongNumberOfParameters,null);return na.fn.apply(na,ta)}};T.prototype.call=function(ka,na){return this.fn.apply(this,na.arguments)};
T.prototype.marshalledCall=function(ka,na,ta,G){var ja=this;return G(ka,na,function(ra,K,xa){xa=xa.map(function(va){return!n.isFunctionParameter(va)||va instanceof y.ScopeMarshalledFunction?va:y.wrapModuleScopedResponse(va,ka,G)});ra=ja.call(ta,{arguments:xa});return z.isPromiseLike(ra)?ra.then(function(va){return y.wrapModuleScopedResponse(va,ta,G)}):ra})};return T}(y.ArcadeFunction);e.UserDefinedCompiledFunction=t;var ea={};c.registerFunctions(ea,w);v.registerFunctions(ea,w);r.registerFunctions(ea,
w);f.registerFunctions(ea,w);m.registerFunctions(ea,w);ea.iif=function(R,T){try{return w(R,T,function(ka,na,ta){throw new x.ArcadeExecutionError(R,x.ExecutionErrorCodes.Unrecognised,T);})}catch(ka){throw ka;}};ea.decode=function(R,T){try{return w(R,T,function(ka,na,ta){throw new x.ArcadeExecutionError(R,x.ExecutionErrorCodes.Unrecognised,T);})}catch(ka){throw ka;}};ea.when=function(R,T){try{return w(R,T,function(ka,na,ta){throw new x.ArcadeExecutionError(R,x.ExecutionErrorCodes.Unrecognised,T);})}catch(ka){throw ka;
}};var X={},S;for(S in ea)X[S]=new y.NativeFunction(ea[S]);p.registerFunctions(ea,w);for(S in ea)ea[S]=new y.NativeFunction(ea[S]);var ia=function(){};ia.prototype=ea;var oa=function(){};oa.prototype=X;e.functionHelper={fixSpatialReference:n.fixSpatialReference,parseArguments:function(R,T){for(var ka=[],na=0;na<T.arguments.length;na++)ka.push(C(R,T.arguments[na]));return ka},standardFunction:w};e.extend=da;da([h],"sync");da([h],"async");e.executeScript=function(R,T){return R(T)};var qa=0,wa={error:function(R){throw new x.ArcadeExecutionError(null,
R,null);},__awaiter:function(R,T,ka,na){return new Promise(function(ta,G){function ja(xa){try{K(na.next(xa))}catch(va){G(va)}}function ra(xa){try{K(na["throw"](xa))}catch(va){G(va)}}function K(xa){xa.done?ta(xa.value):xa.value&&xa.value.then?xa.value.then(ja,ra):(qa++,0===qa%100?setTimeout(function(){qa=0;ja(xa.value)},0):ja(xa.value))}K((na=na.apply(R,T||[])).next())})},functionDepthchecker:function(R,T){return function(){T.depthCounter.depth++;T.localStack.push([]);if(64<T.depthCounter.depth)throw new x.ArcadeExecutionError(null,
x.ExecutionErrorCodes.MaximumCallDepth,null);var ka=R.apply(this,arguments);if(z.isPromiseLike(ka))return ka.then(function(na){T.depthCounter.depth--;--T.localStack.length;return na});T.depthCounter.depth--;--T.localStack.length;return ka}},chkAssig:function(R,T){if(void 0===T.gdefs[R])throw new x.ArcadeExecutionError(T,x.ExecutionErrorCodes.InvalidIdentifier,null);return R},mustBoolean:function(R,T){if(!0===R||!1===R)return R;throw new x.ArcadeExecutionError(T,x.ExecutionErrorCodes.BooleanConditionRequired,
null);},setAssig:function(R,T){T.gdefs[R]=1;return R},castString:function(R){return n.toString(R)},aCheck:function(R,T){if(n.isFunctionParameter(R)){if("ArrayExpression"===T)throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.NoFunctionInArray,null);if("ObjectExpression"===T)throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.NoFunctionInDictionary,null);throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.NoFunctionInTemplateLiteral,null);}return R===n.voidOperation?null:R},
Dictionary:a,Feature:d,UserDefinedCompiledFunction:t,dictionary:function(R){for(var T={},ka=new Map,na=0;na<R.length;na+=2){if(n.isFunctionParameter(R[na+1]))throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.NoFunctionInDictionary,null);if(!1===n.isString(R[na]))throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.KeyMustBeString,null);var ta=R[na].toString(),G=ta.toLowerCase();ka.has(G)?ta=ka.get(G):ka.set(G,ta);T[ta]=R[na+1]===n.voidOperation?null:R[na+1]}R=new a(T);R.immutable=
!1;return R},strCheck:function(R){if(!1===n.isString(R))throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.KeyMustBeString,null);return R},unary:function(R,T){if(n.isBoolean(R)){if("!"===T)return!R;if("-"===T)return-1*n.toNumber(R);if("+"===T)return 1*n.toNumber(R);if("~"===T)return~n.toNumber(R);throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.UnsupportedUnaryOperator,null);}if("-"===T)return-1*n.toNumber(R);if("+"===T)return 1*n.toNumber(R);if("~"===T)return~n.toNumber(R);throw new x.ArcadeExecutionError(null,
x.ExecutionErrorCodes.UnsupportedUnaryOperator,null);},logicalCheck:function(R){if(!1===n.isBoolean(R))throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.LogicExpressionOrAnd,null);return R},logical:function(R,T,ka){if(n.isBoolean(R)&&n.isBoolean(T))switch(ka){case "||":return R||T;case "\x26\x26":return R&&T}throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.LogicExpressionOrAnd,null);},binary:function(R,T,ka){switch(ka){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return n.binaryOperator(n.toNumber(R),
n.toNumber(T),ka);case "\x3d\x3d":return n.equalityTest(R,T);case "\x3d":return n.equalityTest(R,T);case "!\x3d":return!n.equalityTest(R,T);case "\x3c":return n.greaterThanLessThan(R,T,ka);case "\x3e":return n.greaterThanLessThan(R,T,ka);case "\x3c\x3d":return n.greaterThanLessThan(R,T,ka);case "\x3e\x3d":return n.greaterThanLessThan(R,T,ka);case "+":return n.isString(R)||n.isString(T)?n.toString(R)+n.toString(T):n.toNumber(R)+n.toNumber(T);case "-":return n.toNumber(R)-n.toNumber(T);case "*":return n.toNumber(R)*
n.toNumber(T);case "/":return n.toNumber(R)/n.toNumber(T);case "%":return n.toNumber(R)%n.toNumber(T);default:throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.UnsupportedOperator,null);}},assign:function(R,T,ka){switch(T){case "\x3d":return R===n.voidOperation?null:R;case "/\x3d":return n.toNumber(ka)/n.toNumber(R);case "*\x3d":return n.toNumber(ka)*n.toNumber(R);case "-\x3d":return n.toNumber(ka)-n.toNumber(R);case "+\x3d":return n.isString(ka)||n.isString(R)?n.toString(ka)+n.toString(R):
n.toNumber(ka)+n.toNumber(R);case "%\x3d":return n.toNumber(ka)%n.toNumber(R);default:throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.UnsupportedOperator,null);}},update:function(R,T,ka,na){var ta=n.toNumber(R[T]);R[T]="++"===ka?ta+1:ta-1;return!1===na?ta:"++"===ka?ta+1:ta-1},graphicToFeature:function(R,T,ka){return null===R?null:d.createFromGraphicLikeObject(R.geometry,R.attributes,T,ka.timeReference)},memberupdate:function(R,T,ka,na){if(n.isArray(R))if(n.isNumber(T)){0>T&&(T=R.length+
T);if(0>T||T>=R.length)throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.OutOfBounds,null);var ta=n.toNumber(R[T]);R[T]="++"===ka?ta+1:ta-1}else throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.ArrayAccessorMustBeNumber,null);else if(R instanceof a){if(!1===n.isString(T))throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===R.hasField(T))ta=n.toNumber(R.field(T)),R.setField(T,"++"===ka?ta+1:ta-1);else throw new x.ArcadeExecutionError(null,
x.ExecutionErrorCodes.FieldNotFound,null,{key:T});}else if(n.isFeature(R)){if(!1===n.isString(T))throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===R.hasField(T))ta=n.toNumber(R.field(T)),R.setField(T,"++"===ka?ta+1:ta-1);else throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.FieldNotFound,null);}else{if(n.isImmutableArray(R))throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.Immutable,null);if(R instanceof Ha){if(!1===n.isString(T))throw new x.ArcadeExecutionError(null,
x.ExecutionErrorCodes.ModuleAccessorMustBeString,null);if(!0===R.hasGlobal(T))ta=n.toNumber(R.global(T)),R.setGlobal(T,"++"===ka?ta+1:ta-1);else throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.ModuleExportNotFound,null);}else throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.InvalidIdentifier,null);}return!1===na?ta:"++"===ka?ta+1:ta-1},assignmember:function(R,T,ka,na){if(n.isArray(R))if(n.isNumber(T)){0>T&&(T=R.length+T);if(0>T||T>R.length)throw new x.ArcadeExecutionError(null,
x.ExecutionErrorCodes.OutOfBounds,null);if(T===R.length&&"\x3d"!==ka)throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.OutOfBounds,null);R[T]=this.assign(na,ka,R[T])}else throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.ArrayAccessorMustBeNumber,null);else if(R instanceof a){if(!1===n.isString(T))throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===R.hasField(T))R.setField(T,this.assign(na,ka,R.field(T)));else{if("\x3d"!==ka)throw new x.ArcadeExecutionError(null,
x.ExecutionErrorCodes.FieldNotFound,null);R.setField(T,this.assign(na,ka,null))}}else if(n.isFeature(R)){if(!1===n.isString(T))throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===R.hasField(T))R.setField(T,this.assign(na,ka,R.field(T)));else{if("\x3d"!==ka)throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.FieldNotFound,null);R.setField(T,this.assign(na,ka,null))}}else{if(n.isImmutableArray(R))throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.Immutable,
null);if(R instanceof Ha){if(!1===n.isString(T))throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.ModuleAccessorMustBeString,null);if(R.hasGlobal(T))R.setGlobal(T,this.assign(na,ka,R.global(T)));else throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.ModuleExportNotFound,null);}else throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.InvalidIdentifier,null);}},member:function(R,T){if(null===R)throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.MemberOfNull,null);
if(R instanceof a||n.isFeature(R)){if(n.isString(T))return R.field(T);throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(R instanceof A){if(n.isString(T))return f.geometryMember(R,T,null,null);throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(n.isArray(R)){if(n.isNumber(T)&&isFinite(T)&&Math.floor(T)===T){0>T&&(T=R.length+T);if(T>=R.length||0>T)throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.OutOfBounds,
null);return R[T]}throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(n.isString(R)){if(n.isNumber(T)&&isFinite(T)&&Math.floor(T)===T){0>T&&(T=R.length+T);if(T>=R.length||0>T)throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.OutOfBounds,null);return R[T]}throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(n.isImmutableArray(R)){if(n.isNumber(T)&&isFinite(T)&&Math.floor(T)===T){0>T&&(T=R.length()+T);if(T>=R.length()||
0>T)throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.OutOfBounds,null);return R.get(T)}throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(R instanceof Ha&&n.isString(T))return R.global(T);throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.InvalidMemberAccessKey,null);},callfunc:function(R,T,ka){return R.call(ka,{arguments:T,preparsed:!0})},loadModule:function(R,T){R=T.moduleFactoryMap[R];if(T.moduleSingletons[R])return T.moduleSingletons[R];
var ka=T.moduleFactory[R]({vars:{},moduleSingletons:T.moduleSingletons,depthCounter:T.depthCounter,console:T.console,abortSignal:T.abortSignal,isAsync:T.isAsync,services:T.services,lrucache:T.lrucache,timeReference:T.timeReference?T.timeReference:null,interceptor:T.interceptor},T.spatialReference);return T.moduleSingletons[R]=ka},callModuleFunction:function(R,T,ka,na){if(!(R instanceof Ha))throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.FuncionNotFound,null);R=R.global(ka);if(!1===n.isFunctionParameter(R))throw new x.ArcadeExecutionError(null,
x.ExecutionErrorCodes.CallNonFunction,null);return R.call(na,{preparsed:!0,arguments:T})}};e.compileScript=function(R,T,ka){var na;void 0===ka&&(ka=!1);null===T&&(T={vars:{},customfunctions:{}});var ta=null;R.usesModules&&(ta=new E.ArcadeModuleLoader(null,R.loadedModules));ta={isAsync:ka,globalScope:fa(T.vars,ka?X:ea,T.customfunctions),moduleFactory:{},moduleFactoryMap:{},undeclaredGlobalsInFunctions:new Map,customfunctions:T.customfunctions,libraryResolver:ta,localScope:null,mangleMap:{},depthCounter:{depth:1},
exports:{},console:P,lrucache:T.lrucache,timeReference:null!==(na=T.timeReference)&&void 0!==na?na:null,interceptor:T.interceptor,services:T.services,symbols:{symbolCounter:0}};R=C(ta,R);""===R&&(R="lc.voidOperation; ");0<ta.undeclaredGlobalsInFunctions.size&&ta.undeclaredGlobalsInFunctions.forEach(function(va){throw new x.ArcadeCompilationError(T,x.ExecutionErrorCodes.InvalidIdentifier,va.node);});var G=ta.moduleFactory,ja=ta.moduleFactoryMap,ra=ta.exports,K={};for(xa in ra)K[xa]=void 0!==ta.mangleMap[xa]?
ta.mangleMap[xa]:xa;var xa={lc:n,lang:wa,mangles:ta.mangleMap,postProcess:function(va){va instanceof n.ReturnResult&&(va=va.value);va instanceof n.ImplicitResult&&(va=va.value);va===n.voidOperation&&(va=null);if(va===n.breakResult)throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.IllegalResult,null);if(va===n.continueResult)throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.IllegalResult,null);if(n.isFunctionParameter(va))throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.IllegalResult,
null);return va},prepare:function(va,la){var Ca,Ma=va.spatialReference;if(null===Ma||void 0===Ma)Ma=new D({wkid:102100});var ua=pa(va.vars,va.customfunctions,la,va.timeReference);return{localStack:[],isAsync:la,moduleFactory:G,moduleFactoryMap:ja,mangleMap:this.mangles,moduleSingletons:{},exports:ra,gdefs:{},exportmangle:K,spatialReference:Ma,globalScope:ua,abortSignal:void 0===va.abortSignal||null===va.abortSignal?{aborted:!1}:va.abortSignal,localScope:null,services:va.services,console:va.console?
va.console:P,lrucache:va.lrucache,timeReference:null!==(Ca=va.timeReference)&&void 0!==Ca?Ca:null,interceptor:va.interceptor,symbols:{symbolCounter:0},depthCounter:{depth:1}}}};return(new Function("context","spatialReference",ka?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
R+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+R+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(xa)};e.enableAsyncSupport=function(){return new Promise(function(R,T){g(["./functions/geomasync"],function(ka){da([ka],"async");R(!0)},
function(ka){T(ka)})})};var Ha=function(R){function T(ka){var na=R.call(this,null)||this;na.moduleContext=ka;return na}k(T,R);T.prototype.hasGlobal=function(ka){void 0===this.moduleContext.exports[ka]&&(ka=ka.toLowerCase());return void 0!==this.moduleContext.exports[ka]?!0:!1};T.prototype.setGlobal=function(ka,na){var ta=this.moduleContext.globalScope;ka=ka.toLowerCase();if(n.isFunctionParameter(na))throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.AssignModuleFunction,null);ta[this.moduleContext.exportmangle[ka]]=
na};T.prototype.global=function(ka){var na=this.moduleContext.globalScope;ka=ka.toLowerCase();var ta=na[this.moduleContext.exportmangle[ka]];if(void 0===ta)throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.InvalidIdentifier,null);if(n.isFunctionParameter(ta)&&!(ta instanceof y.ScopeMarshalledFunction)){var G=new y.ScopeMarshalledFunction;G.fn=ta;G.parameterEvaluator=w;G.context=this.moduleContext;return na[this.moduleContext.exportmangle[ka]]=G}return ta};return T}(F.ArcadeModule)})},"esri/arcade/polyfill/tsSupport/assign":function(){define([],
function(){return function(){return function(){return(Object.assign||function(g){for(var e,t=1,u=arguments.length;t<u;t++){e=arguments[t];for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(g[l]=e[l])}return g}).apply(this,arguments)}}()})},"esri/arcade/polyfill/tsSupport/spreadarray":function(){define([],function(){return function(){return function(g,e,t){if(t||2===arguments.length)for(var u=0,l=e.length,q;u<l;u++)!q&&u in e||(q||(q=Array.prototype.slice.call(e,0,u)),q[u]=e[u]);return g.concat(q||
Array.prototype.slice.call(e))}}()})},"esri/arcade/polyfill/tsSupport/extends":function(){define([],function(){return function(){var g=function(e,t){g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var q in l)Object.prototype.hasOwnProperty.call(l,q)&&(u[q]=l[q])};return g(e,t)};return function(e,t){function u(){this.constructor=e}if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");
g(e,t);e.prototype=null===t?Object.create(t):(u.prototype=t.prototype,new u)}}()})},"esri/arcade/Dictionary":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./ArcadeDate ./executionError ./ImmutableArray ./languageUtils ../geometry/Geometry".split(" "),function(g,e,t,u,l,q,k,a,d){function n(h,c,f){void 0===f&&(f=!1);if(null===h||void 0===h)return null;if(a.isNumber(h))return a.toNumber(h);if(a.isBoolean(h))return a.toBoolean(h);if(a.isString(h))return a.toString(h);
if(a.isDate(h))return a.toDate(h,c);if(a.isArray(h)){for(var p=[],r=0;r<h.length;r++)p.push(n(h[r],c,f));return p}r=new b;r.immutable=!1;for(var m=0,v=Object.keys(h);m<v.length;m++){var z=v[m];p=h[z];void 0!==p&&r.setField(z,n(p,c,f))}r.immutable=f;return r}var b=function(){function h(c){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=c instanceof h?c.attributes:void 0===c?{}:null===c?{}:c}h.prototype.field=function(c){var f=c.toLowerCase(),
p=this.attributes[c];if(void 0!==p)return p;for(var r in this.attributes)if(r.toLowerCase()===f)return this.attributes[r];throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.FieldNotFound,null,{key:c});};h.prototype.setField=function(c,f){if(this.immutable)throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.Immutable,null);if(a.isFunctionParameter(f))throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.NoFunctionInDictionary,null);var p=c.toLowerCase();f instanceof Date&&(f=
l.ArcadeDate.dateJSToArcadeDate(f));if(void 0===this.attributes[c])for(var r in this.attributes)if(r.toLowerCase()===p){this.attributes[r]=f;return}this.attributes[c]=f};h.prototype.hasField=function(c){var f=c.toLowerCase();if(void 0!==this.attributes[c])return!0;for(var p in this.attributes)if(p.toLowerCase()===f)return!0;return!1};h.prototype.keys=function(){var c=[],f;for(f in this.attributes)c.push(f);return c=c.sort()};h.prototype.castToText=function(c){void 0===c&&(c=!1);var f="",p;for(p in this.attributes){""!==
f&&(f+=",");var r=this.attributes[p];null==r?f+=JSON.stringify(p)+":null":a.isBoolean(r)||a.isNumber(r)||a.isString(r)?f+=JSON.stringify(p)+":"+JSON.stringify(r):r instanceof d?f+=JSON.stringify(p)+":"+a.toStringExplicit(r):r instanceof k?f+=JSON.stringify(p)+":"+a.toStringExplicit(r,null,c):r instanceof Array?f+=JSON.stringify(p)+":"+a.toStringExplicit(r,null,c):r instanceof l.ArcadeDate?f=c?f+(JSON.stringify(p)+":"+JSON.stringify(r.getTime())):f+(JSON.stringify(p)+":"+r.stringify()):null!==r&&"object"===
typeof r&&void 0!==r.castToText&&(f+=JSON.stringify(p)+":"+r.castToText(c))}return"{"+f+"}"};h.convertObjectToArcadeDictionary=function(c,f,p){void 0===p&&(p=!0);var r=new h;r.immutable=!1;for(var m in c){var v=c[m];void 0!==v&&r.setField(m.toString(),n(v,f))}r.immutable=p;return r};h.convertJsonToArcade=function(c,f,p){void 0===p&&(p=!1);return n(c,f,p)};h.prototype.castAsJson=function(c){void 0===c&&(c=null);var f={};for(r in this.attributes){var p=this.attributes[r];if(void 0!==p){if(null===c||
void 0===c?0:c.keyTranslate)var r=c.keyTranslate(r);f[r]=a.castAsJson(p,c)}}return f};h.prototype.castDictionaryValueAsJsonAsync=function(c,f,p,r,m){void 0===r&&(r=null);return t(this,void 0,void 0,function(){var v;return u(this,function(z){switch(z.label){case 0:return[4,a.castAsJsonAsync(p,r,m)];case 1:return v=z.sent(),c[f]=v,[2,v]}})})};h.prototype.castAsJsonAsync=function(c,f){void 0===c&&(c=null);void 0===f&&(f=null);return t(this,void 0,void 0,function(){var p,r,m,v;return u(this,function(z){switch(z.label){case 0:p=
{};r=[];for(m in this.attributes){v=this.attributes[m];if(null===f||void 0===f?0:f.keyTranslate)m=f.keyTranslate(m);void 0!==v&&(a.isSimpleType(v)||v instanceof d||v instanceof l.ArcadeDate?p[m]=a.castAsJson(v,f):r.push(this.castDictionaryValueAsJsonAsync(p,m,v,c,f)))}return 0<r.length?[4,Promise.all(r)]:[3,2];case 1:z.sent(),z.label=2;case 2:return[2,p]}})})};return h}();return b})},"esri/arcade/ArcadeDate":function(){define(["require","exports","./polyfill/tsSupport/extends","./executionError",
"../libs/luxon/luxon"],function(g,e,t,u,l){function q(b){if(b instanceof l.Zone)return b;if("system"===b.toLowerCase())return"system";if("utc"===b.toLowerCase())return"utc";if("unknown"===b.toLowerCase())return a.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(b)){var h=l.FixedOffsetZone.parseSpecifier("UTC"+(b.startsWith("+")||b.startsWith("-")?"":"+")+b);if(h)return h}b=l.IANAZone.create(b);if(!b.isValid)throw new n(d.TimeZoneNotRecognised);return b}var k;Object.defineProperty(e,"__esModule",
{value:!0});e.createDateTimeZone=e.ArcadeDate=e.ArcadeDateError=e.ArcadeDateErrorMessages=e.ArcadeDateErrorCodes=e.UnknownTimeZone=void 0;var a=function(){function b(){}b.instance=new l.IANAZone("Etc/UTC");return b}();e.UnknownTimeZone=a;var d;(d=e.ArcadeDateErrorCodes||(e.ArcadeDateErrorCodes={})).TimeZoneNotRecognised="TimeZoneNotRecognised";e.ArcadeDateErrorMessages=(k={},k[d.TimeZoneNotRecognised]="Timezone identifier has not been recognised.",k);var n=function(b){function h(c,f){c=b.call(this,
u.doSubstitutions(e.ArcadeDateErrorMessages[c],f))||this;c.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(c,h);return c}t(h,b);return h}(Error);e.ArcadeDateError=n;g=function(){function b(h){this._date=h;this.declaredRootClass="esri.arcade.arcadedate"}b.fromParts=function(h,c,f,p,r,m,v,z){void 0===h&&(h=0);void 0===c&&(c=1);void 0===f&&(f=1);void 0===p&&(p=0);void 0===r&&(r=0);void 0===m&&(m=0);void 0===v&&(v=0);if(isNaN(h)||isNaN(c)||isNaN(f)||
isNaN(p)||isNaN(r)||isNaN(m)||isNaN(v))return null;var A=0,D=l.DateTime.local(h,c).daysInMonth;1>f&&(A=f-1,f=1);f>D&&(A=f-D,f=D);D=0;12<c?(D=c-12,c=12):1>c&&(D=c-1,c=1);var E=0;59<r?(E=r-59,r=59):0>r&&(E=r,r=0);var F=0;59<m?(F=m-59,m=59):0>m&&(F=m,m=0);var y=0;999<v?(y=v-999,v=999):0>v&&(y=v,v=0);h=l.DateTime.fromObject({day:f,year:h,month:c,hour:p,minute:r,second:m,millisecond:v},{zone:q(z)});0!==D&&(h=h.plus({months:D}));0!==A&&(h=h.plus({days:A}));0!==E&&(h=h.plus({minutes:E}));0!==F&&(h=h.plus({seconds:F}));
0!==y&&(h=h.plus({milliseconds:y}));return new b(h)};Object.defineProperty(b,"systemTimeZoneCanonicalName",{get:function(){var h;return null!==(h=Intl.DateTimeFormat().resolvedOptions().timeZone)&&void 0!==h?h:"system"},enumerable:!1,configurable:!0});b.arcadeDateAndZoneToArcadeDate=function(h,c){var f=q(c);return h.isUnknownTimeZone||f===a.instance?b.fromParts(h.year,h.monthJS+1,h.day,h.hour,h.minute,h.second,h.millisecond,f):new b(h._date.setZone(c))};b.dateJSToArcadeDate=function(h){return new b(l.DateTime.fromJSDate(h,
{zone:"system"}))};b.dateJSAndZoneToArcadeDate=function(h,c){void 0===c&&(c="system");return new b(l.DateTime.fromJSDate(h,{zone:c}))};b.unknownEpochToArcadeDate=function(h){return new b(l.DateTime.fromMillis(h,{zone:a.instance}))};b.unknownDateJSToArcadeDate=function(h){return b.arcadeDateAndZoneToArcadeDate(b.dateJSToArcadeDate(h),a.instance)};b.epochToArcadeDate=function(h,c){void 0===c&&(c="system");return new b(l.DateTime.fromMillis(h,{zone:c}))};b.dateTimeToArcadeDate=function(h){return new b(h)};
b.prototype.changeTimeZone=function(h){h=q(h);return b.dateTimeToArcadeDate(this._date.setZone(h))};b.dateTimeAndZoneToArcadeDate=function(h,c){c=q(c);return h.zone===a.instance||c===a.instance?b.fromParts(h.year,h.month,h.day,h.hour,h.minute,h.second,h.millisecond,c):new b(h.setZone(c))};b.nowToArcadeDate=function(h){return new b(l.DateTime.fromJSDate(new Date,{zone:h}))};b.nowUTCToArcadeDate=function(){return new b(l.DateTime.utc())};Object.defineProperty(b.prototype,"isSystem",{get:function(){return"system"===
this.timeZone||this.timeZone===b.systemTimeZoneCanonicalName},enumerable:!1,configurable:!0});b.prototype.equals=function(h){return this.isSystem&&h.isSystem?this.toNumber()===h.toNumber():this.isUnknownTimeZone!==h.isUnknownTimeZone?!1:this._date.equals(h._date)};Object.defineProperty(b.prototype,"isUnknownTimeZone",{get:function(){return this._date.zone===a.instance},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"isValid",{get:function(){return this._date.isValid},enumerable:!1,
configurable:!0});Object.defineProperty(b.prototype,"hour",{get:function(){return this._date.hour},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"second",{get:function(){return this._date.second},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"day",{get:function(){return this._date.day},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"dayOfWeekISO",{get:function(){return this._date.weekday},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,
"dayOfWeekJS",{get:function(){var h=this._date.weekday;6<h&&(h=0);return h},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"millisecond",{get:function(){return this._date.millisecond},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"monthISO",{get:function(){return this._date.month},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"weekISO",{get:function(){return this._date.weekNumber},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,
"yearISO",{get:function(){return this._date.weekYear},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"monthJS",{get:function(){return this._date.month-1},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"year",{get:function(){return this._date.year},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"minute",{get:function(){return this._date.minute},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"zone",{get:function(){return this._date.zone},
enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"timeZoneOffset",{get:function(){return this.isUnknownTimeZone?0:this._date.offset},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"timeZone",{get:function(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";var h=this.zone;return"fixed"===h.type?0===h.fixed?"utc":h.formatOffset(0,"short"):h.name},enumerable:!1,configurable:!0});b.prototype.stringify=function(){return JSON.stringify(this.toJSDate())};
b.prototype.plus=function(h){return new b(this._date.plus(h))};b.prototype.diff=function(h,c){void 0===c&&(c="milliseconds");return this._date.diff(h._date,c)[c]};b.prototype.toISOString=function(h){return h?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})};b.prototype.toFormat=function(h,c){return this._date.toFormat(h,c)};b.prototype.toJSDate=function(){return this._date.toJSDate()};b.prototype.toSQLString=
function(){return"timestamp '"+this._date.toFormat("yyyy-LL-dd HH:mm:ss")+"'"};b.prototype.toDateTime=function(){return this._date};b.prototype.toNumber=function(){return this._date.toMillis()};b.prototype.getTime=function(){return this._date.toMillis()};b.prototype.toUTC=function(){return new b(this._date.toUTC())};b.prototype.toLocal=function(){return new b(this._date.toLocal())};b.prototype.toString=function(){return this.toISOString(!0)};return b}();e.ArcadeDate=g;e.createDateTimeZone=q})},"esri/arcade/executionError":function(){define(["require",
"exports","./polyfill/tsSupport/assign","./polyfill/tsSupport/spreadarray","./polyfill/tsSupport/extends"],function(g,e,t,u,l){function q(b){var h,c;return b&&b.loc?"Line : "+(null===(h=b.loc.start)||void 0===h?void 0:h.line)+", "+(null===(c=b.loc.start)||void 0===c?void 0:c.column)+": ":""}function k(b,h){try{if(!h)return b;for(var c in h){var f=h[c];f||(f="");b=b.replace("{"+c+"}",h[c])}}catch(p){}return b}var a,d;Object.defineProperty(e,"__esModule",{value:!0});e.parsingValidationMessage=e.ModuleError=
e.ModuleErrorMessages=e.ModuleErrorCodes=e.ensureArcadeExecutionError=e.doSubstitutions=e.ArcadeUncompilableError=e.ArcadeCompilationError=e.ArcadeExecutionError=e.LocatableArcadeExecutionError=e.ErrorWithCause=e.ExecutionErrorMessages=e.ExecutionErrorCodes=void 0;(function(b){b.AsyncNotEnabled="AsyncNotEnabled";b.ModulesNotSupported="ModulesNotSupported";b.CircularModules="CircularModules";b.NeverReach="NeverReach";b.UnsupportedHashType="UnsupportedHashType";b.InvalidParameter="InvalidParameter";
b.UnexpectedToken="UnexpectedToken";b.Unrecognised="Unrecognised";b.UnrecognisedType="UnrecognisedType";b.MaximumCallDepth="MaximumCallDepth";b.BooleanConditionRequired="BooleanConditionRequired";b.TypeNotAllowedInFeature="TypeNotAllowedInFeature";b.KeyMustBeString="KeyMustBeString";b.WrongNumberOfParameters="WrongNumberOfParameters";b.CallNonFunction="CallNonFunction";b.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";b.NoFunctionInDictionary="NoFunctionInDictionary";b.NoFunctionInArray=
"NoFunctionInArray";b.AssignModuleFunction="AssignModuleFunction";b.LogicExpressionOrAnd="LogicExpressionOrAnd";b.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";b.FuncionNotFound="FunctionNotFound";b.InvalidMemberAccessKey="InvalidMemberAccessKey";b.UnsupportedUnaryOperator="UnsupportUnaryOperator";b.InvalidIdentifier="InvalidIdentifier";b.MemberOfNull="MemberOfNull";b.UnsupportedOperator="UnsupportedOperator";b.Cancelled="Cancelled";b.ModuleAccessorMustBeString="ModuleAccessorMustBeString";
b.ModuleExportNotFound="ModuleExportNotFound";b.Immutable="Immutable";b.OutOfBounds="OutOfBounds";b.IllegalResult="IllegalResult";b.FieldNotFound="FieldNotFound";b.PortalRequired="PortalRequired";b.LogicError="LogicError";b.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";b.KeyAccessorMustBeString="KeyAccessorMustBeString";b.WrongSpatialReference="WrongSpatialReference"})(g=e.ExecutionErrorCodes||(e.ExecutionErrorCodes={}));e.ExecutionErrorMessages=(a={},a[g.TypeNotAllowedInFeature]="Feature attributes only support dates, numbers, strings, guids.",
a[g.LogicError]="Logic error - {reason}",a[g.NeverReach]="Encountered unreachable logic",a[g.AsyncNotEnabled]="Async Arcade must be enabled for this script",a[g.ModuleAccessorMustBeString]="Module accessor must be a string",a[g.ModuleExportNotFound]="Module has no export with provided identifier",a[g.ModulesNotSupported]="Current profile does not support modules",a[g.ArrayAccessorMustBeNumber]="Array accessor must be a number",a[g.FuncionNotFound]="Function not found",a[g.FieldNotFound]="Key not found - {key}",
a[g.CircularModules]="Circular module dependencies are not allowed",a[g.Cancelled]="Execution cancelled",a[g.UnsupportedHashType]="Type not supported in hash function",a[g.IllegalResult]="Value is not a supported return type",a[g.PortalRequired]="Portal is required",a[g.InvalidParameter]="Invalid parameter",a[g.WrongNumberOfParameters]="Call with wrong number of parameters",a[g.Unrecognised]="Unrecognised code structure",a[g.UnrecognisedType]="Unrecognised type",a[g.WrongSpatialReference]="Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",
a[g.BooleanConditionRequired]="Conditions must use booleans",a[g.NoFunctionInDictionary]="Dictionaries cannot contain functions.",a[g.NoFunctionInArray]="Arrays cannot contain functions.",a[g.NoFunctionInTemplateLiteral]="Template Literals do not expect functions by value.",a[g.KeyAccessorMustBeString]="Accessor must be a string",a[g.KeyMustBeString]="Object keys must be a string",a[g.Immutable]="Object is immutable",a[g.InvalidParameter]="Invalid parameter",a[g.UnexpectedToken]="Unexpected token",
a[g.MemberOfNull]="Cannot access property of null object",a[g.MaximumCallDepth]="Exceeded maximum function depth",a[g.OutOfBounds]="Out of bounds",a[g.InvalidIdentifier]="Identifier not recognised",a[g.FuncionNotFound]="Function not found",a[g.CallNonFunction]="Expression is not a function",a[g.InvalidMemberAccessKey]="Cannot access value using a key of this type",a[g.AssignModuleFunction]="Cannot assign function to module variable",a[g.UnsupportedUnaryOperator]="Unsupported unary operator",a[g.UnsupportedOperator]=
"Unsupported operator",a[g.LogicalExpressionOnlyBoolean]="Logical expressions must be boolean",a[g.LogicExpressionOrAnd]="Logical expression can only be combined with || or \x26\x26",a);a=function(b){function h(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];return b.apply(this,c)||this}l(h,b);return h}(Error);e.ErrorWithCause=a;var n=function(b){function h(c,f){c=b.call(this,q(f)+c.message,{cause:c})||this;c.loc=null;Error.captureStackTrace&&Error.captureStackTrace(c,h);f&&f.loc&&(c.loc=
f.loc);return c}l(h,b);return h}(a);e.LocatableArcadeExecutionError=n;a=function(b){function h(c,f,p,r){c=b.call(this,"Execution error - "+q(p)+k(e.ExecutionErrorMessages[f],r))||this;c.loc=null;c.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(c,h);p&&p.loc&&(c.loc=p.loc);return c}l(h,b);return h}(Error);e.ArcadeExecutionError=a;a=function(b){function h(c,f,p,r){c=b.call(this,"Compilation error - "+q(p)+k(e.ExecutionErrorMessages[f],r))||this;
c.loc=null;c.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(c,h);p&&p.loc&&(c.loc=p.loc);return c}l(h,b);return h}(Error);e.ArcadeCompilationError=a;a=function(b){function h(){var c=b.call(this,"Uncompilable code structures")||this;c.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(c,h);return c}l(h,b);return h}(Error);e.ArcadeUncompilableError=a;e.doSubstitutions=k;e.ensureArcadeExecutionError=
function(b,h,c){return"esri.arcade.arcadeexecutionerror"===c.declaredRootClass||"esri.arcade.arcadecompilationerror"===c.declaredRootClass?null===c.loc&&h&&h.loc?new n(c,{cause:c}):c:h&&h.loc?new n(c,{cause:c}):c};(function(b){b.UnrecognisedUri="UnrecognisedUri";b.UnsupportedUriProtocol="UnsupportedUriProtocol"})(a=e.ModuleErrorCodes||(e.ModuleErrorCodes={}));e.ModuleErrorMessages=(d={},d[a.UnrecognisedUri]="Unrecognised uri - {uri}",d[a.UnsupportedUriProtocol]="Unrecognised uri protocol",d);d=function(b){function h(c,
f){c=b.call(this,k(e.ModuleErrorMessages[c],f))||this;c.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(c,h);return c}l(h,b);return h}(Error);e.ModuleError=d;e.parsingValidationMessage=function(b,h,c){return"Parsing error - "+q(b)+k(e.ExecutionErrorMessages[h],c)}})},"esri/libs/luxon/luxon":function(){define(["exports"],function(g){function e(L,Q){for(var H=0;H<Q.length;H++){var M=Q[H];M.enumerable=M.enumerable||!1;M.configurable=!0;"value"in M&&
(M.writable=!0);var W=Object,ma=W.defineProperty;a:{var sa=M.key;if("object"===typeof sa&&null!==sa){var za=sa[Symbol.toPrimitive];if(void 0!==za){sa=za.call(sa,"string");if("object"!==typeof sa)break a;throw new TypeError("@@toPrimitive must return a primitive value.");}sa=String(sa)}}ma.call(W,L,"symbol"===typeof sa?sa:String(sa),M)}}function t(L,Q,H){Q&&e(L.prototype,Q);H&&e(L,H);Object.defineProperty(L,"prototype",{writable:!1});return L}function u(){u=Object.assign?Object.assign.bind():function(L){for(var Q=
1;Q<arguments.length;Q++){var H=arguments[Q],M;for(M in H)Object.prototype.hasOwnProperty.call(H,M)&&(L[M]=H[M])}return L};return u.apply(this,arguments)}function l(L,Q){L.prototype=Object.create(Q.prototype);L.prototype.constructor=L;k(L,Q)}function q(L){q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Q){return Q.__proto__||Object.getPrototypeOf(Q)};return q(L)}function k(L,Q){k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(H,M){H.__proto__=M;return H};return k(L,Q)}function a(){if("undefined"===
typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}function d(L,Q,H){d=a()?Reflect.construct.bind():function(M,W,ma){var sa=[null];sa.push.apply(sa,W);M=new (Function.bind.apply(M,sa));ma&&k(M,ma.prototype);return M};return d.apply(null,arguments)}function n(L){var Q="function"===typeof Map?new Map:void 0;n=function(H){function M(){return d(H,
arguments,q(this).constructor)}if(null===H||-1===Function.toString.call(H).indexOf("[native code]"))return H;if("function"!==typeof H)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof Q){if(Q.has(H))return Q.get(H);Q.set(H,M)}M.prototype=Object.create(H.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}});return k(M,H)};return n(L)}function b(L,Q){if(null==L)return{};var H={},M=Object.keys(L),W;for(W=0;W<M.length;W++){var ma=
M[W];0<=Q.indexOf(ma)||(H[ma]=L[ma])}return H}function h(L,Q){if(L){if("string"===typeof L)return c(L,Q);var H=Object.prototype.toString.call(L).slice(8,-1);"Object"===H&&L.constructor&&(H=L.constructor.name);if("Map"===H||"Set"===H)return Array.from(L);if("Arguments"===H||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H))return c(L,Q)}}function c(L,Q){if(null==Q||Q>L.length)Q=L.length;for(var H=0,M=Array(Q);H<Q;H++)M[H]=L[H];return M}function f(L,Q){var H="undefined"!==typeof Symbol&&L[Symbol.iterator]||
L["@@iterator"];if(H)return(H=H.call(L)).next.bind(H);if(Array.isArray(L)||(H=h(L))||Q&&L&&"number"===typeof L.length){H&&(L=H);var M=0;return function(){return M>=L.length?{done:!0}:{done:!1,value:L[M++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function p(L,Q){void 0===Q&&(Q={});var H=JSON.stringify([L,Q]),M=Tb[H];M||(M=new Intl.DateTimeFormat(L,Q),Tb[H]=M);return M}function r(L){for(var Q=
[],H=1;12>=H;H++){var M=bb.utc(2016,H,1);Q.push(L(M))}return Q}function m(L){for(var Q=[],H=1;7>=H;H++){var M=bb.utc(2016,11,13+H);Q.push(L(M))}return Q}function v(L,Q,H,M,W){L=L.listingMode(H);return"error"===L?null:"en"===L?M(Q):W(Q)}function z(L,Q){if(A(L)||null===L)return Q;if(L instanceof Hb)return L;if("string"===typeof L){var H=L.toLowerCase();return"default"===H?Q:"local"===H||"system"===H?Ub.instance:"utc"===H||"gmt"===H?rb.utcInstance:rb.parseSpecifier(H)||Eb.create(L)}return D(L)?rb.instance(L):
"object"===typeof L&&L.offset&&"number"===typeof L.offset?L:new fc(L)}function A(L){return"undefined"===typeof L}function D(L){return"number"===typeof L}function E(L){return"number"===typeof L&&0===L%1}function F(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(L){return!1}}function y(L,Q,H){if(0!==L.length)return L.reduce(function(M,W){W=[Q(W),W];return M?H(M[0],W[0])===M[0]?M:W:W},null)[1]}function x(L,Q){return Q.reduce(function(H,M){H[M]=L[M];return H},{})}function w(L,Q){return Object.prototype.hasOwnProperty.call(L,
Q)}function C(L,Q,H){return E(L)&&L>=Q&&L<=H}function B(L,Q){void 0===Q&&(Q=2);return 0>L?"-"+(""+-L).padStart(Q,"0"):(""+L).padStart(Q,"0")}function I(L){if(!A(L)&&null!==L&&""!==L)return parseInt(L,10)}function N(L){if(!A(L)&&null!==L&&""!==L)return parseFloat(L)}function V(L){if(!A(L)&&null!==L&&""!==L)return L=1E3*parseFloat("0."+L),Math.floor(L)}function Y(L,Q,H){void 0===H&&(H=!1);Q=Math.pow(10,Q);return(H?Math.trunc:Math.round)(L*Q)/Q}function ca(L){return 0===L%4&&(0!==L%100||0===L%400)}function J(L,
Q){var H=Q-1;H=H-12*Math.floor(H/12)+1;return 2===H?ca(L+(Q-H)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][H-1]}function O(L){var Q=Date.UTC(L.year,L.month-1,L.day,L.hour,L.minute,L.second,L.millisecond);100>L.year&&0<=L.year&&(Q=new Date(Q),Q.setUTCFullYear(Q.getUTCFullYear()-1900));return+Q}function U(L){var Q=L-1;Q=(Q+Math.floor(Q/4)-Math.floor(Q/100)+Math.floor(Q/400))%7;return 4===(L+Math.floor(L/4)-Math.floor(L/100)+Math.floor(L/400))%7||3===Q?53:52}function ba(L){return 99<L?L:L>$a.twoDigitCutoffYear?
1900+L:2E3+L}function Z(L,Q,H,M){void 0===M&&(M=null);L=new Date(L);var W={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};M&&(W.timeZone=M);Q=u({timeZoneName:Q},W);return(H=(new Intl.DateTimeFormat(H,Q)).formatToParts(L).find(function(ma){return"timezonename"===ma.type.toLowerCase()}))?H.value:null}function fa(L,Q){L=parseInt(L,10);Number.isNaN(L)&&(L=0);Q=parseInt(Q,10)||0;Q=0>L||Object.is(L,-0)?-Q:Q;return 60*L+Q}function pa(L){var Q=Number(L);if("boolean"===
typeof L||""===L||Number.isNaN(Q))throw new gb("Invalid unit value "+L);return Q}function da(L,Q){var H={},M;for(M in L)if(w(L,M)){var W=L[M];void 0!==W&&null!==W&&(H[Q(M)]=pa(W))}return H}function ha(L,Q){var H=Math.trunc(Math.abs(L/60)),M=Math.trunc(Math.abs(L%60));L=0<=L?"+":"-";switch(Q){case "short":return""+L+B(H,2)+":"+B(M,2);case "narrow":return""+L+H+(0<M?":"+M:"");case "techie":return""+L+B(H,2)+B(M,2);default:throw new RangeError("Value format "+Q+" is out of range for property format");
}}function P(L){return x(L,["hour","minute","second","millisecond"])}function aa(L){switch(L){case "narrow":return[].concat(Vc);case "short":return[].concat(gc);case "long":return[].concat(Wc);case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function ea(L){switch(L){case "narrow":return[].concat(Xc);case "short":return[].concat(hc);case "long":return[].concat(ic);case "numeric":return"1234567".split("");
default:return null}}function X(L){switch(L){case "narrow":return[].concat(Yc);case "short":return[].concat(Zc);case "long":return[].concat($c);default:return null}}function S(L,Q,H,M){void 0===H&&(H="always");void 0===M&&(M=!1);var W={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},ma=-1===["hours","minutes","seconds"].indexOf(L);if("auto"===H&&ma)switch(H=
"days"===L,Q){case 1:return H?"tomorrow":"next "+W[L][0];case -1:return H?"yesterday":"last "+W[L][0];case 0:return H?"today":"this "+W[L][0]}H=Object.is(Q,-0)||0>Q;Q=Math.abs(Q);ma=1===Q;var sa=W[L];L=M?ma?sa[1]:sa[2]||sa[1]:ma?W[L][0]:L;return H?Q+" "+L+" ago":"in "+Q+" "+L}function ia(L,Q){var H="";L=f(L);for(var M;!(M=L()).done;)M=M.value,H=M.literal?H+M.val:H+Q(M.val);return H}function oa(){for(var L=arguments.length,Q=Array(L),H=0;H<L;H++)Q[H]=arguments[H];L=Q.reduce(function(M,W){return M+
W.source},"");return RegExp("^"+L+"$")}function qa(){for(var L=arguments.length,Q=Array(L),H=0;H<L;H++)Q[H]=arguments[H];return function(M){return Q.reduce(function(W,ma){var sa=W[0],za=W[1];W=ma(M,W[2]);ma=W[1];var Ia=W[2];return[u({},sa,W[0]),ma||za,Ia]},[{},null,1]).slice(0,2)}}function wa(L){if(null==L)return[null,null];for(var Q=arguments.length,H=Array(1<Q?Q-1:0),M=1;M<Q;M++)H[M-1]=arguments[M];for(Q=0;Q<H.length;Q++){var W=H[Q];M=W[1];if(W=W[0].exec(L))return M(W)}return[null,null]}function Ha(){for(var L=
arguments.length,Q=Array(L),H=0;H<L;H++)Q[H]=arguments[H];return function(M,W){var ma={},sa;for(sa=0;sa<Q.length;sa++)ma[Q[sa]]=I(M[W+sa]);return[ma,null,W+sa]}}function R(L,Q,H){L=L[Q];return A(L)?H:I(L)}function T(L,Q){return[{hours:R(L,Q,0),minutes:R(L,Q+1,0),seconds:R(L,Q+2,0),milliseconds:V(L[Q+3])},null,Q+4]}function ka(L,Q){var H=!L[Q]&&!L[Q+1];L=fa(L[Q+1],L[Q+2]);return[{},H?null:rb.instance(L),Q+3]}function na(L,Q){return[{},L[Q]?Eb.create(L[Q]):null,Q+1]}function ta(L){var Q=L[2],H=L[3],
M=L[4],W=L[5],ma=L[6],sa=L[7],za=L[8],Ia="-"===L[0][0],La=sa&&"-"===sa[0],Ra=function(Sa,Qa){void 0===Qa&&(Qa=!1);return void 0!==Sa&&(Qa||Sa&&Ia)?-Sa:Sa};return[{years:Ra(N(L[1])),months:Ra(N(Q)),weeks:Ra(N(H)),days:Ra(N(M)),hours:Ra(N(W)),minutes:Ra(N(ma)),seconds:Ra(N(sa),"-0"===sa),milliseconds:Ra(V(za),La)}]}function G(L,Q,H,M,W,ma,sa){Q={year:2===Q.length?ba(I(Q)):I(Q),month:gc.indexOf(H)+1,day:I(M),hour:I(W),minute:I(ma)};sa&&(Q.second=I(sa));L&&(Q.weekday=3<L.length?ic.indexOf(L)+1:hc.indexOf(L)+
1);return Q}function ja(L){var Q=L[8],H=L[9],M=L[10],W=L[11];L=G(L[1],L[4],L[3],L[2],L[5],L[6],L[7]);Q=Q?ad[Q]:H?0:fa(M,W);return[L,new rb(Q)]}function ra(L){return[G(L[1],L[4],L[3],L[2],L[5],L[6],L[7]),rb.utcInstance]}function K(L){return[G(L[1],L[7],L[2],L[3],L[4],L[5],L[6]),rb.utcInstance]}function xa(L,Q,H){void 0===H&&(H=!1);L={values:H?Q.values:u({},L.values,Q.values||{}),loc:L.loc.clone(Q.loc),conversionAccuracy:Q.conversionAccuracy||L.conversionAccuracy,matrix:Q.matrix||L.matrix};return new db(L)}
function va(L,Q,H,M,W){L=L[W][H];var ma=Q[H]/L;ma=Math.sign(ma)!==Math.sign(M[W])&&0!==M[W]&&1>=Math.abs(ma)?0>ma?Math.floor(ma):Math.ceil(ma):Math.trunc(ma);M[W]+=ma;Q[H]-=ma*L}function la(L,Q){bd.reduce(function(H,M){if(A(Q[M]))return H;H&&va(L,Q,H,Q,M);return M},null)}function Ca(L,Q){var H=function(M){return M.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()};L=H(Q)-H(L);return Math.floor(db.fromMillis(L).as("days"))}function Ma(L,Q,H){for(var M={},W=L,ma,sa,za=0,Ia=[["years",function(Sa,
Qa){return Qa.year-Sa.year}],["quarters",function(Sa,Qa){return Qa.quarter-Sa.quarter+4*(Qa.year-Sa.year)}],["months",function(Sa,Qa){return Qa.month-Sa.month+12*(Qa.year-Sa.year)}],["weeks",function(Sa,Qa){Sa=Ca(Sa,Qa);return(Sa-Sa%7)/7}],["days",Ca]];za<Ia.length;za++){var La=Ia[za],Ra=La[0];La=La[1];0<=H.indexOf(Ra)&&(ma=Ra,M[Ra]=La(L,Q),sa=W.plus(M),sa>Q?(M[Ra]--,L=W.plus(M)):L=sa)}return[L,M,sa,ma]}function ua(L,Q,H,M){var W=Ma(L,Q,H);L=W[0];var ma=W[1],sa=W[2],za=W[3];W=Q-L;H=H.filter(function(Ra){return 0<=
["hours","minutes","seconds","milliseconds"].indexOf(Ra)});if(0===H.length){if(sa<Q){var Ia;sa=L.plus((Ia={},Ia[za]=1,Ia))}sa!==L&&(ma[za]=(ma[za]||0)+W/(sa-L))}Q=db.fromObject(ma,M);if(0<H.length){var La;return(La=db.fromMillis(W,M)).shiftTo.apply(La,H).plus(Q)}return Q}function Ba(L,Q){L=L.numberingSystem;void 0===Q&&(Q="");return new RegExp(""+Vb[L||"latn"]+Q)}function Aa(L,Q){void 0===Q&&(Q=function(H){return H});return{regex:L,deser:function(H){var M=Q;H=H[0];var W=parseInt(H,10);if(isNaN(W)){W=
"";for(var ma=0;ma<H.length;ma++){var sa=H.charCodeAt(ma);if(-1!==H[ma].search(Vb.hanidec))W+=cd.indexOf(H[ma]);else for(La in jc){var za=jc[La],Ia=za[0];za=za[1];sa>=Ia&&sa<=za&&(W+=sa-Ia)}}var La=parseInt(W,10)}else La=W;return M(La)}}}function Ga(L){return L.replace(/\./g,"\\.?").replace(Wb,kc)}function ya(L,Q){return null===L?null:{regex:RegExp(L.map(Ga).join("|")),deser:function(H){var M=H[0];return L.findIndex(function(W){return M.replace(/\./g,"").replace(Wb," ").toLowerCase()===W.replace(/\./g,
"").replace(Wb," ").toLowerCase()})+Q}}}function Ea(L,Q){return{regex:L,deser:function(H){return fa(H[1],H[2])},groups:Q}}function Fa(L){return{regex:L,deser:function(Q){return Q[0]}}}function Ka(L,Q){var H=Ba(Q),M=Ba(Q,"{2}"),W=Ba(Q,"{3}"),ma=Ba(Q,"{4}"),sa=Ba(Q,"{6}"),za=Ba(Q,"{1,2}"),Ia=Ba(Q,"{1,3}"),La=Ba(Q,"{1,6}"),Ra=Ba(Q,"{1,9}"),Sa=Ba(Q,"{2,4}"),Qa=Ba(Q,"{4,6}"),Za=function(Kb){return{regex:RegExp(Kb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:function(dd){return dd[0]},literal:!0}},
pb=function(Kb){if(L.literal)return Za(Kb);switch(Kb.val){case "G":return ya(Q.eras("short",!1),0);case "GG":return ya(Q.eras("long",!1),0);case "y":return Aa(La);case "yy":return Aa(Sa,ba);case "yyyy":return Aa(ma);case "yyyyy":return Aa(Qa);case "yyyyyy":return Aa(sa);case "M":return Aa(za);case "MM":return Aa(M);case "MMM":return ya(Q.months("short",!0,!1),1);case "MMMM":return ya(Q.months("long",!0,!1),1);case "L":return Aa(za);case "LL":return Aa(M);case "LLL":return ya(Q.months("short",!1,!1),
1);case "LLLL":return ya(Q.months("long",!1,!1),1);case "d":return Aa(za);case "dd":return Aa(M);case "o":return Aa(Ia);case "ooo":return Aa(W);case "HH":return Aa(M);case "H":return Aa(za);case "hh":return Aa(M);case "h":return Aa(za);case "mm":return Aa(M);case "m":return Aa(za);case "q":return Aa(za);case "qq":return Aa(M);case "s":return Aa(za);case "ss":return Aa(M);case "S":return Aa(Ia);case "SSS":return Aa(W);case "u":return Fa(Ra);case "uu":return Fa(za);case "uuu":return Aa(H);case "a":return ya(Q.meridiems(),
0);case "kkkk":return Aa(ma);case "kk":return Aa(Sa,ba);case "W":return Aa(za);case "WW":return Aa(M);case "E":case "c":return Aa(H);case "EEE":return ya(Q.weekdays("short",!1,!1),1);case "EEEE":return ya(Q.weekdays("long",!1,!1),1);case "ccc":return ya(Q.weekdays("short",!0,!1),1);case "cccc":return ya(Q.weekdays("long",!0,!1),1);case "Z":case "ZZ":return Ea(new RegExp("([+-]"+za.source+")(?::("+M.source+"))?"),2);case "ZZZ":return Ea(new RegExp("([+-]"+za.source+")("+M.source+")?"),2);case "z":return Fa(/[a-z_+-/]{1,256}?/i);
default:return Za(Kb)}}(L)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};pb.token=L;return pb}function Ja(L){return["^"+L.map(function(Q){return Q.regex}).reduce(function(Q,H){return Q+"("+H.source+")"},"")+"$",L]}function Oa(L,Q,H){if(L=L.match(Q)){Q={};var M=1,W;for(W in H)if(w(H,W)){var ma=H[W],sa=ma.groups?ma.groups+1:1;!ma.literal&&ma.token&&(Q[ma.token.val[0]]=ma.deser(L.slice(M,M+sa)));M+=sa}return[L,Q]}return[L,{}]}function Da(L){var Q=function(W){switch(W){case "S":return"millisecond";
case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}},H=null;A(L.z)||(H=Eb.create(L.z));if(!A(L.Z)){H||(H=new rb(L.Z));var M=L.Z}A(L.q)||(L.M=3*(L.q-1)+1);A(L.h)||(12>L.h&&1===L.a?L.h+=12:12===L.h&&0===L.a&&(L.h=0));0===L.G&&L.y&&(L.y=-L.y);
A(L.u)||(L.S=V(L.u));return[Object.keys(L).reduce(function(W,ma){var sa=Q(ma);sa&&(W[sa]=L[ma]);return W},{}),H,M]}function Na(L,Q){var H;return(H=Array.prototype).concat.apply(H,L.map(function(M){if(!M.literal){var W=sb.macroTokenToFormatOpts(M.val);W=Ta(W,Q);M=null==W||W.includes(void 0)?M:W}return M}))}function Pa(L,Q,H){H=Na(sb.parseFormat(H),L);var M=H.map(function(La){return Ka(La,L)}),W=M.find(function(La){return La.invalidReason});if(W)return{input:Q,tokens:H,invalidReason:W.invalidReason};
W=Ja(M);M=RegExp(W[0],"i");var ma=Oa(Q,M,W[1]);W=ma[0];var sa=(ma=ma[1])?Da(ma):[null,null,void 0],za=sa[0],Ia=sa[1];sa=sa[2];if(w(ma,"a")&&w(ma,"H"))throw new Fb("Can't include meridiem when specifying 24-hour format");return{input:Q,tokens:H,regex:M,rawMatches:W,matches:ma,result:za,zone:Ia,specificOffset:sa}}function Ta(L,Q){if(!L)return null;Q=sb.create(Q,L);var H=Q.formatDateTimeParts;Xb||(Xb=bb.fromMillis(1555555555555));return H.call(Q,Xb).map(function(M){var W=M.type;M=M.value;"literal"===
W?W={literal:!0,val:M}:(M=L[W],W=ed[W],"object"===typeof W&&(W=W[M]),W=W?{literal:!1,val:W}:void 0);return W})}function Xa(L,Q){return new tb("unit out of range","you specified "+Q+" (of type "+typeof Q+") as a "+L+", which is invalid")}function ob(L,Q,H){Q=new Date(Date.UTC(L,Q-1,H));100>L&&0<=L&&Q.setUTCFullYear(Q.getUTCFullYear()-1900);L=Q.getUTCDay();return 0===L?7:L}function mb(L,Q){L=ca(L)?Yb:Zb;var H=L.findIndex(function(M){return M<Q});return{month:H+1,day:Q-L[H]}}function ub(L){var Q=L.year,
H=L.month,M=L.day;var W=M+(ca(Q)?Yb:Zb)[H-1];H=ob(Q,H,M);W=Math.floor((W-H+10)/7);1>W?(--Q,W=U(Q)):W>U(Q)&&(Q+=1,W=1);return u({weekYear:Q,weekNumber:W,weekday:H},P(L))}function vb(L){var Q=L.weekYear,H=L.weekNumber,M=L.weekday,W=ob(Q,1,4),ma=ca(Q)?366:365;H=7*H+M-W-3;1>H?(ma=Q-1,H+=ca(ma)?366:365):H>ma?(ma=Q+1,H-=ca(Q)?366:365):ma=Q;Q=mb(ma,H);return u({year:ma,month:Q.month,day:Q.day},P(L))}function Va(L){var Q=L.year;var H=L.month;H=L.day+(ca(Q)?Yb:Zb)[H-1];return u({year:Q,ordinal:H},P(L))}function fb(L){var Q=
L.year,H=mb(Q,L.ordinal);return u({year:Q,month:H.month,day:H.day},P(L))}function wb(L){var Q=E(L.year),H=C(L.month,1,12),M=C(L.day,1,J(L.year,L.month));return Q?H?M?!1:Xa("day",L.day):Xa("month",L.month):Xa("year",L.year)}function Ua(L){var Q=L.hour,H=L.minute,M=L.second;L=L.millisecond;var W=C(Q,0,23)||24===Q&&0===H&&0===M&&0===L,ma=C(H,0,59),sa=C(M,0,59),za=C(L,0,999);return W?ma?sa?za?!1:Xa("millisecond",L):Xa("second",M):Xa("minute",H):Xa("hour",Q)}function jb(L){return new tb("unsupported zone",
'the zone "'+L.name+'" is not supported')}function qb(L){null===L.weekData&&(L.weekData=ub(L.c));return L.weekData}function kb(L,Q){L={ts:L.ts,zone:L.zone,c:L.c,o:L.o,loc:L.loc,invalid:L.invalid};return new bb(u({},L,Q,{old:L}))}function lb(L,Q,H){var M=L-6E4*Q,W=H.offset(M);if(Q===W)return[M,Q];M-=6E4*(W-Q);Q=H.offset(M);return W===Q?[M,W]:[L-6E4*Math.min(W,Q),Math.max(W,Q)]}function Ab(L,Q){L=new Date(L+6E4*Q);return{year:L.getUTCFullYear(),month:L.getUTCMonth()+1,day:L.getUTCDate(),hour:L.getUTCHours(),
minute:L.getUTCMinutes(),second:L.getUTCSeconds(),millisecond:L.getUTCMilliseconds()}}function yb(L,Q,H){return lb(O(L),Q,H)}function hb(L,Q){var H=L.o,M=L.c.year+Math.trunc(Q.years),W=L.c.month+Math.trunc(Q.months)+3*Math.trunc(Q.quarters);M=u({},L.c,{year:M,month:W,day:Math.min(L.c.day,J(M,W))+Math.trunc(Q.days)+7*Math.trunc(Q.weeks)});Q=db.fromObject({years:Q.years-Math.trunc(Q.years),quarters:Q.quarters-Math.trunc(Q.quarters),months:Q.months-Math.trunc(Q.months),weeks:Q.weeks-Math.trunc(Q.weeks),
days:Q.days-Math.trunc(Q.days),hours:Q.hours,minutes:Q.minutes,seconds:Q.seconds,milliseconds:Q.milliseconds}).as("milliseconds");M=O(M);M=lb(M,H,L.zone);H=M[0];M=M[1];0!==Q&&(H+=Q,M=L.zone.offset(H));return{ts:H,o:M}}function ib(L,Q,H,M,W,ma){var sa=H.setZone,za=H.zone;return L&&0!==Object.keys(L).length?(L=bb.fromObject(L,u({},H,{zone:Q||za,specificOffset:ma})),sa?L:L.setZone(za)):bb.invalid(new tb("unparsable",'the input "'+W+"\" can't be parsed as "+M))}function nb(L,Q,H){void 0===H&&(H=!0);return L.isValid?
sb.create(cb.create("en-US"),{allowZ:H,forceSimple:!0}).formatDateTimeFromString(L,Q):null}function Wa(L,Q){var H=9999<L.c.year||0>L.c.year,M="";H&&0<=L.c.year&&(M+="+");M+=B(L.c.year,H?6:4);Q?(M=M+"-"+B(L.c.month),M=M+"-"+B(L.c.day)):(M+=B(L.c.month),M+=B(L.c.day));return M}function Bb(L,Q,H,M,W,ma){var sa=B(L.c.hour);Q?(sa=sa+":"+B(L.c.minute),0===L.c.second&&H||(sa+=":")):sa+=B(L.c.minute);0===L.c.second&&H||(sa+=B(L.c.second),0===L.c.millisecond&&M||(sa=sa+"."+B(L.c.millisecond,3)));W&&(L.isOffsetFixed&&
0===L.offset&&!ma?sa+="Z":0>L.o?(sa=sa+"-"+B(Math.trunc(-L.o/60)),sa=sa+":"+B(Math.trunc(-L.o%60))):(sa=sa+"+"+B(Math.trunc(L.o/60)),sa=sa+":"+B(Math.trunc(L.o%60))));ma&&(sa+="["+L.zone.ianaName+"]");return sa}function ab(L){var Q={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",
weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[L.toLowerCase()];if(!Q)throw new Gb(L);return Q}function Nb(L,Q){var H=z(Q.zone,$a.defaultZone);Q=cb.fromObject(Q);var M=$a.now();if(A(L.year))L=M;else{var W=0;for(var ma=lc;W<ma.length;W++){var sa=ma[W];A(L[sa])&&(L[sa]=mc[sa])}if(W=wb(L)||Ua(L))return bb.invalid(W);M=H.offset(M);M=yb(L,M,H);L=M[0];W=M[1]}return new bb({ts:L,zone:H,loc:Q,o:W})}function Ya(L,
Q,H){var M=A(H.round)?!0:H.round,W=function(La,Ra){La=Y(La,M||H.calendary?0:2,!0);return Q.loc.clone(H).relFormatter(H).format(La,Ra)},ma=function(La){return H.calendary?Q.hasSame(L,La)?0:Q.startOf(La).diff(L.startOf(La),La).get(La):Q.diff(L,La).get(La)};if(H.unit)return W(ma(H.unit),H.unit);for(var sa=f(H.units),za;!(za=sa()).done;){za=za.value;var Ia=ma(za);if(1<=Math.abs(Ia))return W(Ia,za)}return W(L>Q?-0:0,H.units[H.units.length-1])}function Ib(L){var Q={};0<L.length&&"object"===typeof L[L.length-
1]?(Q=L[L.length-1],L=Array.from(L).slice(0,L.length-1)):L=Array.from(L);return[Q,L]}function Cb(L){if(bb.isDateTime(L))return L;if(L&&L.valueOf&&D(L.valueOf()))return bb.fromJSDate(L);if(L&&"object"===typeof L)return bb.fromObject(L);throw new gb("Unknown datetime argument: "+L+", of type "+typeof L);}var eb=function(L){function Q(){return L.apply(this,arguments)||this}l(Q,L);return Q}(n(Error)),Jb=function(L){function Q(H){return L.call(this,"Invalid DateTime: "+H.toMessage())||this}l(Q,L);return Q}(eb),
Ob=function(L){function Q(H){return L.call(this,"Invalid Interval: "+H.toMessage())||this}l(Q,L);return Q}(eb),zb=function(L){function Q(H){return L.call(this,"Invalid Duration: "+H.toMessage())||this}l(Q,L);return Q}(eb),Fb=function(L){function Q(){return L.apply(this,arguments)||this}l(Q,L);return Q}(eb),Gb=function(L){function Q(H){return L.call(this,"Invalid unit "+H)||this}l(Q,L);return Q}(eb),gb=function(L){function Q(){return L.apply(this,arguments)||this}l(Q,L);return Q}(eb),Db=function(L){function Q(){return L.call(this,
"Zone is an abstract class")||this}l(Q,L);return Q}(eb),Pb={year:"numeric",month:"numeric",day:"numeric"},nc={year:"numeric",month:"short",day:"numeric"},fd={year:"numeric",month:"short",day:"numeric",weekday:"short"},oc={year:"numeric",month:"long",day:"numeric"},pc={year:"numeric",month:"long",day:"numeric",weekday:"long"},qc={hour:"numeric",minute:"numeric"},rc={hour:"numeric",minute:"numeric",second:"numeric"},sc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},tc={hour:"numeric",
minute:"numeric",second:"numeric",timeZoneName:"long"},uc={hour:"numeric",minute:"numeric",hourCycle:"h23"},vc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},wc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},xc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},yc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},zc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",
minute:"numeric",second:"numeric"},Ac={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},Bc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},gd={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},Cc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},Dc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",
timeZoneName:"short"},Ec={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Fc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},Hb=function(){function L(){}var Q=L.prototype;Q.offsetName=function(H,M){throw new Db;};Q.formatOffset=function(H,M){throw new Db;};Q.offset=function(H){throw new Db;};Q.equals=function(H){throw new Db;};t(L,[{key:"type",get:function(){throw new Db;
}},{key:"name",get:function(){throw new Db;}},{key:"ianaName",get:function(){return this.name}},{key:"isUniversal",get:function(){throw new Db;}},{key:"isValid",get:function(){throw new Db;}}]);return L}(),$b=null,Ub=function(L){function Q(){return L.apply(this,arguments)||this}l(Q,L);var H=Q.prototype;H.offsetName=function(M,W){return Z(M,W.format,W.locale)};H.formatOffset=function(M,W){return ha(this.offset(M),W)};H.offset=function(M){return-(new Date(M)).getTimezoneOffset()};H.equals=function(M){return"system"===
M.type};t(Q,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){null===$b&&($b=new Q);return $b}}]);return Q}(Hb),Qb={},hd={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6},Rb={},Eb=function(L){function Q(M){var W=L.call(this)||this;W.zoneName=M;W.valid=Q.isValidZone(M);return W}l(Q,L);Q.create=function(M){Rb[M]||
(Rb[M]=new Q(M));return Rb[M]};Q.resetCache=function(){Rb={};Qb={}};Q.isValidSpecifier=function(M){return this.isValidZone(M)};Q.isValidZone=function(M){if(!M)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:M})).format(),!0}catch(W){return!1}};var H=Q.prototype;H.offsetName=function(M,W){return Z(M,W.format,W.locale,this.name)};H.formatOffset=function(M,W){return ha(this.offset(M),W)};H.offset=function(M){M=new Date(M);if(isNaN(M))return NaN;var W=this.name;Qb[W]||(Qb[W]=new Intl.DateTimeFormat("en-US",
{hour12:!1,timeZone:W,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}));W=Qb[W];if(W.formatToParts){W=W.formatToParts(M);for(var ma=[],sa=0;sa<W.length;sa++){var za=W[sa],Ia=za.type;za=za.value;var La=hd[Ia];"era"===Ia?ma[La]=za:A(La)||(ma[La]=parseInt(za,10))}W=ma}else W=W.format(M).replace(/\u200E/g,""),W=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(W),W=[W[3],W[1],W[2],W[4],W[5],W[6],W[7]];ma=W[0];sa=W[1];Ia=W[2];za=W[4];La=W[5];
var Ra=W[6];"BC"===W[3]&&(ma=-Math.abs(ma)+1);W=O({year:ma,month:sa,day:Ia,hour:24===za?0:za,minute:La,second:Ra,millisecond:0});M=+M;ma=M%1E3;return(W-(M-(0<=ma?ma:1E3+ma)))/6E4};H.equals=function(M){return"iana"===M.type&&M.name===this.name};t(Q,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]);return Q}(Hb),id=["base"],jd=["padTo","floor"],Gc={},Tb={},ac={},
bc={},Sb=null,kd=function(){function L(Q,H,M){this.padTo=M.padTo||0;this.floor=M.floor||!1;M.padTo;M.floor;var W=b(M,jd);if(!H||0<Object.keys(W).length)H=u({useGrouping:!1},M),0<M.padTo&&(H.minimumIntegerDigits=M.padTo),M=H,void 0===M&&(M={}),H=JSON.stringify([Q,M]),W=ac[H],W||(W=new Intl.NumberFormat(Q,M),ac[H]=W),this.inf=W}L.prototype.format=function(Q){if(this.inf)return this.inf.format(this.floor?Math.floor(Q):Q);Q=this.floor?Math.floor(Q):Y(Q,3);return B(Q,this.padTo)};return L}(),ld=function(){function L(H,
M,W){this.opts=W;var ma=void 0;H.zone.isUniversal?(ma=H.offset/60*-1,ma=0<=ma?"Etc/GMT+"+ma:"Etc/GMT"+ma,0!==H.offset&&Eb.create(ma).valid?this.dt=H:(ma="UTC",this.dt=W.timeZoneName?H:0===H.offset?H:bb.fromMillis(H.ts+6E4*H.offset))):"system"===H.zone.type?this.dt=H:(this.dt=H,ma=H.zone.name);H=u({},this.opts);H.timeZone=H.timeZone||ma;this.dtf=p(M,H)}var Q=L.prototype;Q.format=function(){return this.dtf.format(this.dt.toJSDate())};Q.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())};
Q.resolvedOptions=function(){return this.dtf.resolvedOptions()};return L}(),md=function(){function L(H,M,W){this.opts=u({style:"long"},W);if(!M&&F()){M=W;void 0===M&&(M={});W=M;W.base;W=b(W,id);W=JSON.stringify([H,W]);var ma=bc[W];ma||(ma=new Intl.RelativeTimeFormat(H,M),bc[W]=ma);this.rtf=ma}}var Q=L.prototype;Q.format=function(H,M){return this.rtf?this.rtf.format(H,M):S(M,H,this.opts.numeric,"long"!==this.opts.style)};Q.formatToParts=function(H,M){return this.rtf?this.rtf.formatToParts(H,M):[]};
return L}(),cb=function(){function L(H,M,W,ma){var sa=H.indexOf("-x-");-1!==sa&&(H=H.substring(0,sa));sa=H.indexOf("-u-");if(-1===sa)var za=[H];else{try{za=p(H).resolvedOptions();var Ia=H}catch(La){Ia=H.substring(0,sa),za=p(Ia).resolvedOptions()}za=[Ia,za.numberingSystem,za.calendar]}Ia=za[1];H=za[2];this.locale=za[0];this.numberingSystem=M||Ia||null;this.outputCalendar=W||H||null;M=this.locale;W=this.numberingSystem;if((za=this.outputCalendar)||W)M.includes("-u-")||(M+="-u"),za&&(M+="-ca-"+za),W&&
(M+="-nu-"+W);this.intl=M;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=ma;this.fastNumbersCached=null}L.fromOpts=function(H){return L.create(H.locale,H.numberingSystem,H.outputCalendar,H.defaultToEN)};L.create=function(H,M,W,ma){void 0===ma&&(ma=!1);H=H||$a.defaultLocale;var sa;(sa=H)||(ma?ma="en-US":(Sb||(Sb=(new Intl.DateTimeFormat).resolvedOptions().locale),ma=Sb),sa=ma);return new L(sa,M||
$a.defaultNumberingSystem,W||$a.defaultOutputCalendar,H)};L.resetCache=function(){Sb=null;Tb={};ac={};bc={}};L.fromObject=function(H){H=void 0===H?{}:H;return L.create(H.locale,H.numberingSystem,H.outputCalendar)};var Q=L.prototype;Q.listingMode=function(){var H=this.isEnglish(),M=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return H&&M?"en":"intl"};Q.clone=function(H){return H&&0!==Object.getOwnPropertyNames(H).length?
L.create(H.locale||this.specifiedLocale,H.numberingSystem||this.numberingSystem,H.outputCalendar||this.outputCalendar,H.defaultToEN||!1):this};Q.redefaultToEN=function(H){void 0===H&&(H={});return this.clone(u({},H,{defaultToEN:!0}))};Q.redefaultToSystem=function(H){void 0===H&&(H={});return this.clone(u({},H,{defaultToEN:!1}))};Q.months=function(H,M,W){var ma=this;void 0===M&&(M=!1);void 0===W&&(W=!0);return v(this,H,W,aa,function(){var sa=M?{month:H,day:"numeric"}:{month:H},za=M?"format":"standalone";
ma.monthsCache[za][H]||(ma.monthsCache[za][H]=r(function(Ia){return ma.extract(Ia,sa,"month")}));return ma.monthsCache[za][H]})};Q.weekdays=function(H,M,W){var ma=this;void 0===M&&(M=!1);void 0===W&&(W=!0);return v(this,H,W,ea,function(){var sa=M?{weekday:H,year:"numeric",month:"long",day:"numeric"}:{weekday:H},za=M?"format":"standalone";ma.weekdaysCache[za][H]||(ma.weekdaysCache[za][H]=m(function(Ia){return ma.extract(Ia,sa,"weekday")}));return ma.weekdaysCache[za][H]})};Q.meridiems=function(H){var M=
this;void 0===H&&(H=!0);return v(this,void 0,H,function(){return Hc},function(){if(!M.meridiemCache){var W={hour:"numeric",hourCycle:"h12"};M.meridiemCache=[bb.utc(2016,11,13,9),bb.utc(2016,11,13,19)].map(function(ma){return M.extract(ma,W,"dayperiod")})}return M.meridiemCache})};Q.eras=function(H,M){var W=this;void 0===M&&(M=!0);return v(this,H,M,X,function(){var ma={era:H};W.eraCache[H]||(W.eraCache[H]=[bb.utc(-40,1,1),bb.utc(2017,1,1)].map(function(sa){return W.extract(sa,ma,"era")}));return W.eraCache[H]})};
Q.extract=function(H,M,W){return(H=this.dtFormatter(H,M).formatToParts().find(function(ma){return ma.type.toLowerCase()===W}))?H.value:null};Q.numberFormatter=function(H){void 0===H&&(H={});return new kd(this.intl,H.forceSimple||this.fastNumbers,H)};Q.dtFormatter=function(H,M){void 0===M&&(M={});return new ld(H,this.intl,M)};Q.relFormatter=function(H){void 0===H&&(H={});return new md(this.intl,this.isEnglish(),H)};Q.listFormatter=function(H){void 0===H&&(H={});var M=this.intl;void 0===H&&(H={});var W=
JSON.stringify([M,H]),ma=Gc[W];ma||(ma=new Intl.ListFormat(M,H),Gc[W]=ma);return ma};Q.isEnglish=function(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")};Q.equals=function(H){return this.locale===H.locale&&this.numberingSystem===H.numberingSystem&&this.outputCalendar===H.outputCalendar};t(L,[{key:"fastNumbers",get:function(){if(null==this.fastNumbersCached){var H=this.numberingSystem&&"latn"!==this.numberingSystem?
!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=H}return this.fastNumbersCached}}]);return L}(),cc=null,rb=function(L){function Q(M){var W=L.call(this)||this;W.fixed=M;return W}l(Q,L);Q.instance=function(M){return 0===M?Q.utcInstance:new Q(M)};Q.parseSpecifier=function(M){return M&&(M=M.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new Q(fa(M[1],M[2])):null};var H=
Q.prototype;H.offsetName=function(){return this.name};H.formatOffset=function(M,W){return ha(this.fixed,W)};H.offset=function(){return this.fixed};H.equals=function(M){return"fixed"===M.type&&M.fixed===this.fixed};t(Q,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+ha(this.fixed,"narrow")}},{key:"ianaName",get:function(){return 0===this.fixed?"Etc/UTC":"Etc/GMT"+ha(-this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",
get:function(){return!0}}],[{key:"utcInstance",get:function(){null===cc&&(cc=new Q(0));return cc}}]);return Q}(Hb),fc=function(L){function Q(M){var W=L.call(this)||this;W.zoneName=M;return W}l(Q,L);var H=Q.prototype;H.offsetName=function(){return null};H.formatOffset=function(){return""};H.offset=function(){return NaN};H.equals=function(){return!1};t(Q,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",
get:function(){return!1}}]);return Q}(Hb),Ic=function(){return Date.now()},Jc="system",Kc=null,Lc=null,Mc=null,Nc=60,Oc,$a=function(){function L(){}L.resetCaches=function(){cb.resetCache();Eb.resetCache()};t(L,null,[{key:"now",get:function(){return Ic},set:function(Q){Ic=Q}},{key:"defaultZone",get:function(){return z(Jc,Ub.instance)},set:function(Q){Jc=Q}},{key:"defaultLocale",get:function(){return Kc},set:function(Q){Kc=Q}},{key:"defaultNumberingSystem",get:function(){return Lc},set:function(Q){Lc=
Q}},{key:"defaultOutputCalendar",get:function(){return Mc},set:function(Q){Mc=Q}},{key:"twoDigitCutoffYear",get:function(){return Nc},set:function(Q){Nc=Q%100}},{key:"throwOnInvalid",get:function(){return Oc},set:function(Q){Oc=Q}}]);return L}(),Wc="January February March April May June July August September October November December".split(" "),gc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Vc="JFMAMJJASOND".split(""),ic="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),
hc="Mon Tue Wed Thu Fri Sat Sun".split(" "),Xc="MTWTFSS".split(""),Hc=["AM","PM"],$c=["Before Christ","Anno Domini"],Zc=["BC","AD"],Yc=["B","A"],nd={D:Pb,DD:nc,DDD:oc,DDDD:pc,t:qc,tt:rc,ttt:sc,tttt:tc,T:uc,TT:vc,TTT:wc,TTTT:xc,f:yc,ff:Ac,fff:Cc,ffff:Ec,F:zc,FF:Bc,FFF:Dc,FFFF:Fc},sb=function(){function L(H,M){this.opts=M;this.loc=H;this.systemLoc=null}L.create=function(H,M){void 0===M&&(M={});return new L(H,M)};L.parseFormat=function(H){for(var M=null,W="",ma=!1,sa=[],za=0;za<H.length;za++){var Ia=
H.charAt(za);"'"===Ia?(0<W.length&&sa.push({literal:ma,val:W}),M=null,W="",ma=!ma):ma?W+=Ia:Ia===M?W+=Ia:(0<W.length&&sa.push({literal:!1,val:W}),M=W=Ia)}0<W.length&&sa.push({literal:ma,val:W});return sa};L.macroTokenToFormatOpts=function(H){return nd[H]};var Q=L.prototype;Q.formatWithSystemDefault=function(H,M){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(H,u({},this.opts,M)).format()};Q.formatDateTime=function(H,M){void 0===M&&(M={});return this.loc.dtFormatter(H,
u({},this.opts,M)).format()};Q.formatDateTimeParts=function(H,M){void 0===M&&(M={});return this.loc.dtFormatter(H,u({},this.opts,M)).formatToParts()};Q.formatInterval=function(H,M){void 0===M&&(M={});return this.loc.dtFormatter(H.start,u({},this.opts,M)).dtf.formatRange(H.start.toJSDate(),H.end.toJSDate())};Q.resolvedOptions=function(H,M){void 0===M&&(M={});return this.loc.dtFormatter(H,u({},this.opts,M)).resolvedOptions()};Q.num=function(H,M){void 0===M&&(M=0);if(this.opts.forceSimple)return B(H,
M);var W=u({},this.opts);0<M&&(W.padTo=M);return this.loc.numberFormatter(W).format(H)};Q.formatDateTimeFromString=function(H,M){var W=this,ma="en"===this.loc.listingMode(),sa=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,za=function(Qa,Za){return W.loc.extract(H,Qa,Za)},Ia=function(Qa){return H.isOffsetFixed&&0===H.offset&&Qa.allowZ?"Z":H.isValid?H.zone.formatOffset(H.ts,Qa.format):""},La=function(Qa,Za){return ma?aa(Qa)[H.month-1]:za(Za?{month:Qa}:{month:Qa,day:"numeric"},"month")},
Ra=function(Qa,Za){return ma?ea(Qa)[H.weekday-1]:za(Za?{weekday:Qa}:{weekday:Qa,month:"long",day:"numeric"},"weekday")},Sa=function(Qa){return ma?X(Qa)[0>H.year?0:1]:za({era:Qa},"era")};return ia(L.parseFormat(M),function(Qa){switch(Qa){case "S":return W.num(H.millisecond);case "u":case "SSS":return W.num(H.millisecond,3);case "s":return W.num(H.second);case "ss":return W.num(H.second,2);case "uu":return W.num(Math.floor(H.millisecond/10),2);case "uuu":return W.num(Math.floor(H.millisecond/100));
case "m":return W.num(H.minute);case "mm":return W.num(H.minute,2);case "h":return W.num(0===H.hour%12?12:H.hour%12);case "hh":return W.num(0===H.hour%12?12:H.hour%12,2);case "H":return W.num(H.hour);case "HH":return W.num(H.hour,2);case "Z":return Ia({format:"narrow",allowZ:W.opts.allowZ});case "ZZ":return Ia({format:"short",allowZ:W.opts.allowZ});case "ZZZ":return Ia({format:"techie",allowZ:W.opts.allowZ});case "ZZZZ":return H.zone.offsetName(H.ts,{format:"short",locale:W.loc.locale});case "ZZZZZ":return H.zone.offsetName(H.ts,
{format:"long",locale:W.loc.locale});case "z":return H.zoneName;case "a":return ma?Hc[12>H.hour?0:1]:za({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return sa?za({day:"numeric"},"day"):W.num(H.day);case "dd":return sa?za({day:"2-digit"},"day"):W.num(H.day,2);case "c":return W.num(H.weekday);case "ccc":return Ra("short",!0);case "cccc":return Ra("long",!0);case "ccccc":return Ra("narrow",!0);case "E":return W.num(H.weekday);case "EEE":return Ra("short",!1);case "EEEE":return Ra("long",!1);
case "EEEEE":return Ra("narrow",!1);case "L":return sa?za({month:"numeric",day:"numeric"},"month"):W.num(H.month);case "LL":return sa?za({month:"2-digit",day:"numeric"},"month"):W.num(H.month,2);case "LLL":return La("short",!0);case "LLLL":return La("long",!0);case "LLLLL":return La("narrow",!0);case "M":return sa?za({month:"numeric"},"month"):W.num(H.month);case "MM":return sa?za({month:"2-digit"},"month"):W.num(H.month,2);case "MMM":return La("short",!1);case "MMMM":return La("long",!1);case "MMMMM":return La("narrow",
!1);case "y":return sa?za({year:"numeric"},"year"):W.num(H.year);case "yy":return sa?za({year:"2-digit"},"year"):W.num(H.year.toString().slice(-2),2);case "yyyy":return sa?za({year:"numeric"},"year"):W.num(H.year,4);case "yyyyyy":return sa?za({year:"numeric"},"year"):W.num(H.year,6);case "G":return Sa("short");case "GG":return Sa("long");case "GGGGG":return Sa("narrow");case "kk":return W.num(H.weekYear.toString().slice(-2),2);case "kkkk":return W.num(H.weekYear,4);case "W":return W.num(H.weekNumber);
case "WW":return W.num(H.weekNumber,2);case "o":return W.num(H.ordinal);case "ooo":return W.num(H.ordinal,3);case "q":return W.num(H.quarter);case "qq":return W.num(H.quarter,2);case "X":return W.num(Math.floor(H.ts/1E3));case "x":return W.num(H.ts);default:var Za=L.macroTokenToFormatOpts(Qa);Qa=Za?W.formatWithSystemDefault(H,Za):Qa;return Qa}})};Q.formatDurationFromString=function(H,M){var W=this,ma=function(za){switch(za[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";
case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";case "y":return"year";default:return null}};M=L.parseFormat(M);var sa=M.reduce(function(za,Ia){var La=Ia.val;return Ia.literal?za:za.concat(La)},[]);H=H.shiftTo.apply(H,sa.map(ma).filter(function(za){return za}));return ia(M,function(za){return function(Ia){var La=ma(Ia);return La?W.num(za.get(La),Ia.length):Ia}}(H))};return L}(),tb=function(){function L(Q,H){this.reason=Q;this.explanation=H}L.prototype.toMessage=
function(){return this.explanation?this.reason+": "+this.explanation:this.reason};return L}(),Pc=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,Qc=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,dc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Rc=RegExp(""+dc.source+("(?:"+Qc.source+"?(?:\\[("+Pc.source+")\\])?)?")),ec=RegExp("(?:T"+Rc.source+")?"),od=Ha("weekYear","weekNumber","weekDay"),pd=Ha("year","ordinal"),Sc=RegExp(dc.source+" ?(?:"+Qc.source+"|("+Pc.source+"))?"),
qd=RegExp("(?: "+Sc.source+")?"),rd=RegExp("^T?"+dc.source+"$"),sd=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/,ad={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},td=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,
ud=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,vd=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,wd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,xd=oa(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,ec),yd=oa(/(\d{4})-?W(\d\d)(?:-?(\d))?/,
ec),zd=oa(/(\d{4})-?(\d{3})/,ec),Ad=oa(Rc),Tc=qa(function(L,Q){return[{year:R(L,Q),month:R(L,Q+1,1),day:R(L,Q+2,1)},null,Q+3]},T,ka,na),Bd=qa(od,T,ka,na),Cd=qa(pd,T,ka,na),Dd=qa(T,ka,na),Ed=qa(T),Fd=oa(/(\d{4})-(\d\d)-(\d\d)/,qd),Gd=oa(Sc),Hd=qa(T,ka,na),Uc={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},
Id=u({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6}},Uc),Jd=u({years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,
minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3}},Uc),xb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),bd=xb.slice(0).reverse(),db=function(){function L(H){var M="longterm"===H.conversionAccuracy||!1,W=M?Jd:Id;H.matrix&&(W=H.matrix);this.values=H.values;this.loc=H.loc||cb.create();this.conversionAccuracy=M?"longterm":"casual";this.invalid=H.invalid||
null;this.matrix=W;this.isLuxonDuration=!0}L.fromMillis=function(H,M){return L.fromObject({milliseconds:H},M)};L.fromObject=function(H,M){void 0===M&&(M={});if(null==H||"object"!==typeof H)throw new gb("Duration.fromObject: argument expected to be an object, got "+(null===H?"null":typeof H));return new L({values:da(H,L.normalizeUnit),loc:cb.fromObject(M),conversionAccuracy:M.conversionAccuracy,matrix:M.matrix})};L.fromDurationLike=function(H){if(D(H))return L.fromMillis(H);if(L.isDuration(H))return H;
if("object"===typeof H)return L.fromObject(H);throw new gb("Unknown duration argument "+H+" of type "+typeof H);};L.fromISO=function(H,M){var W=wa(H,[sd,ta])[0];return W?L.fromObject(W,M):L.invalid("unparsable",'the input "'+H+"\" can't be parsed as ISO 8601")};L.fromISOTime=function(H,M){var W=wa(H,[rd,Ed])[0];return W?L.fromObject(W,M):L.invalid("unparsable",'the input "'+H+"\" can't be parsed as ISO 8601")};L.invalid=function(H,M){void 0===M&&(M=null);if(!H)throw new gb("need to specify a reason the Duration is invalid");
H=H instanceof tb?H:new tb(H,M);if($a.throwOnInvalid)throw new zb(H);return new L({invalid:H})};L.normalizeUnit=function(H){var M={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[H?H.toLowerCase():H];if(!M)throw new Gb(H);return M};L.isDuration=function(H){return H&&
H.isLuxonDuration||!1};var Q=L.prototype;Q.toFormat=function(H,M){void 0===M&&(M={});M=u({},M,{floor:!1!==M.round&&!1!==M.floor});return this.isValid?sb.create(this.loc,M).formatDurationFromString(this,H):"Invalid Duration"};Q.toHuman=function(H){var M=this;void 0===H&&(H={});var W=xb.map(function(ma){var sa=M.values[ma];return A(sa)?null:M.loc.numberFormatter(u({style:"unit",unitDisplay:"long"},H,{unit:ma.slice(0,-1)})).format(sa)}).filter(function(ma){return ma});return this.loc.listFormatter(u({type:"conjunction",
style:H.listStyle||"narrow"},H)).format(W)};Q.toObject=function(){return this.isValid?u({},this.values):{}};Q.toISO=function(){if(!this.isValid)return null;var H="P";0!==this.years&&(H+=this.years+"Y");if(0!==this.months||0!==this.quarters)H+=this.months+3*this.quarters+"M";0!==this.weeks&&(H+=this.weeks+"W");0!==this.days&&(H+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)H+="T";0!==this.hours&&(H+=this.hours+"H");0!==this.minutes&&(H+=this.minutes+"M");
if(0!==this.seconds||0!==this.milliseconds)H+=Y(this.seconds+this.milliseconds/1E3,3)+"S";"P"===H&&(H+="T0S");return H};Q.toISOTime=function(H){void 0===H&&(H={});if(!this.isValid)return null;var M=this.toMillis();if(0>M||864E5<=M)return null;H=u({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},H);M=this.shiftTo("hours","minutes","seconds","milliseconds");var W="basic"===H.format?"hhmm":"hh:mm";H.suppressSeconds&&0===M.seconds&&0===M.milliseconds||(W+="basic"===H.format?
"ss":":ss",H.suppressMilliseconds&&0===M.milliseconds||(W+=".SSS"));M=M.toFormat(W);H.includePrefix&&(M="T"+M);return M};Q.toJSON=function(){return this.toISO()};Q.toString=function(){return this.toISO()};Q.toMillis=function(){return this.as("milliseconds")};Q.valueOf=function(){return this.toMillis()};Q.plus=function(H){if(!this.isValid)return this;H=L.fromDurationLike(H);for(var M={},W=0;W<xb.length;W++){var ma=xb[W];if(w(H.values,ma)||w(this.values,ma))M[ma]=H.get(ma)+this.get(ma)}return xa(this,
{values:M},!0)};Q.minus=function(H){if(!this.isValid)return this;H=L.fromDurationLike(H);return this.plus(H.negate())};Q.mapUnits=function(H){if(!this.isValid)return this;for(var M={},W=0,ma=Object.keys(this.values);W<ma.length;W++){var sa=ma[W];M[sa]=pa(H(this.values[sa],sa))}return xa(this,{values:M},!0)};Q.get=function(H){return this[L.normalizeUnit(H)]};Q.set=function(H){if(!this.isValid)return this;H=u({},this.values,da(H,L.normalizeUnit));return xa(this,{values:H})};Q.reconfigure=function(H){H=
void 0===H?{}:H;var M=H.conversionAccuracy,W=H.matrix;H={loc:this.loc.clone({locale:H.locale,numberingSystem:H.numberingSystem}),matrix:W,conversionAccuracy:M};return xa(this,H)};Q.as=function(H){return this.isValid?this.shiftTo(H).get(H):NaN};Q.normalize=function(){if(!this.isValid)return this;var H=this.toObject();la(this.matrix,H);return xa(this,{values:H},!0)};Q.rescale=function(){if(!this.isValid)return this;var H=this.normalize().shiftToAll().toObject(),M={},W=0;for(H=Object.entries(H);W<H.length;W++){var ma=
H[W],sa=ma[0];ma=ma[1];0!==ma&&(M[sa]=ma)}return xa(this,{values:M},!0)};Q.shiftTo=function(){for(var H=arguments.length,M=Array(H),W=0;W<H;W++)M[W]=arguments[W];if(!this.isValid||0===M.length)return this;M=M.map(function(pb){return L.normalizeUnit(pb)});H={};W={};for(var ma=this.toObject(),sa,za=0;za<xb.length;za++){var Ia=xb[za];if(0<=M.indexOf(Ia)){sa=Ia;var La=0,Ra;for(Ra in W)La+=this.matrix[Ra][Ia]*W[Ra],W[Ra]=0;D(ma[Ia])&&(La+=ma[Ia]);var Sa=Math.trunc(La);H[Ia]=Sa;W[Ia]=(1E3*La-1E3*Sa)/1E3;
for(var Qa in ma)xb.indexOf(Qa)>xb.indexOf(Ia)&&va(this.matrix,ma,Qa,H,Ia)}else D(ma[Ia])&&(W[Ia]=ma[Ia])}for(var Za in W)0!==W[Za]&&(H[sa]+=Za===sa?W[Za]:W[Za]/this.matrix[sa][Za]);return xa(this,{values:H},!0).normalize()};Q.shiftToAll=function(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this};Q.negate=function(){if(!this.isValid)return this;for(var H={},M=0,W=Object.keys(this.values);M<W.length;M++){var ma=W[M];H[ma]=0===this.values[ma]?
0:-this.values[ma]}return xa(this,{values:H},!0)};Q.equals=function(H){if(!this.isValid||!H.isValid||!this.loc.equals(H.loc))return!1;for(var M=0;M<xb.length;M++){var W=xb[M];var ma=this.values[W];W=H.values[W];ma=void 0===ma||0===ma?void 0===W||0===W:ma===W;if(!ma)return!1}return!0};t(L,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||
0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?
this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]);return L}(),Lb=function(){function L(H){this.s=H.start;this.e=H.end;this.invalid=H.invalid||null;this.isLuxonInterval=!0}L.invalid=function(H,M){void 0===
M&&(M=null);if(!H)throw new gb("need to specify a reason the Interval is invalid");H=H instanceof tb?H:new tb(H,M);if($a.throwOnInvalid)throw new Ob(H);return new L({invalid:H})};L.fromDateTimes=function(H,M){H=Cb(H);M=Cb(M);var W=H&&H.isValid?M&&M.isValid?M<H?Lb.invalid("end before start","The end of an interval must be after its start, but you had start\x3d"+H.toISO()+" and end\x3d"+M.toISO()):null:Lb.invalid("missing or invalid end"):Lb.invalid("missing or invalid start");return null==W?new L({start:H,
end:M}):W};L.after=function(H,M){M=db.fromDurationLike(M);H=Cb(H);return L.fromDateTimes(H,H.plus(M))};L.before=function(H,M){M=db.fromDurationLike(M);H=Cb(H);return L.fromDateTimes(H.minus(M),H)};L.fromISO=function(H,M){var W=(H||"").split("/",2),ma=W[0];W=W[1];if(ma&&W){try{var sa=bb.fromISO(ma,M);var za=sa.isValid}catch(Ra){za=!1}try{var Ia=bb.fromISO(W,M);var La=Ia.isValid}catch(Ra){La=!1}if(za&&La)return L.fromDateTimes(sa,Ia);if(za){if(Ia=db.fromISO(W,M),Ia.isValid)return L.after(sa,Ia)}else if(La&&
(sa=db.fromISO(ma,M),sa.isValid))return L.before(Ia,sa)}return L.invalid("unparsable",'the input "'+H+"\" can't be parsed as ISO 8601")};L.isInterval=function(H){return H&&H.isLuxonInterval||!1};var Q=L.prototype;Q.length=function(H){void 0===H&&(H="milliseconds");return this.isValid?this.toDuration.apply(this,[H]).get(H):NaN};Q.count=function(H){void 0===H&&(H="milliseconds");if(!this.isValid)return NaN;var M=this.start.startOf(H),W=this.end.startOf(H);return Math.floor(W.diff(M,H).get(H))+1};Q.hasSame=
function(H){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,H):!1};Q.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()};Q.isAfter=function(H){return this.isValid?this.s>H:!1};Q.isBefore=function(H){return this.isValid?this.e<=H:!1};Q.contains=function(H){return this.isValid?this.s<=H&&this.e>H:!1};Q.set=function(H){H=void 0===H?{}:H;return this.isValid?L.fromDateTimes(H.start||this.s,H.end||this.e):this};Q.splitAt=function(){var H=this;if(!this.isValid)return[];for(var M=
arguments.length,W=Array(M),ma=0;ma<M;ma++)W[ma]=arguments[ma];M=W.map(Cb).filter(function(Ia){return H.contains(Ia)}).sort();W=[];ma=this.s;for(var sa=0;ma<this.e;){var za=M[sa]||this.e;za=+za>+this.e?this.e:za;W.push(L.fromDateTimes(ma,za));ma=za;sa+=1}return W};Q.splitBy=function(H){H=db.fromDurationLike(H);if(!this.isValid||!H.isValid||0===H.as("milliseconds"))return[];for(var M=this.s,W=1,ma,sa=[];M<this.e;)ma=this.start.plus(H.mapUnits(function(za){return za*W})),ma=+ma>+this.e?this.e:ma,sa.push(L.fromDateTimes(M,
ma)),M=ma,W+=1;return sa};Q.divideEqually=function(H){return this.isValid?this.splitBy(this.length()/H).slice(0,H):[]};Q.overlaps=function(H){return this.e>H.s&&this.s<H.e};Q.abutsStart=function(H){return this.isValid?+this.e===+H.s:!1};Q.abutsEnd=function(H){return this.isValid?+H.e===+this.s:!1};Q.engulfs=function(H){return this.isValid?this.s<=H.s&&this.e>=H.e:!1};Q.equals=function(H){return this.isValid&&H.isValid?this.s.equals(H.s)&&this.e.equals(H.e):!1};Q.intersection=function(H){if(!this.isValid)return this;
var M=this.s>H.s?this.s:H.s;H=this.e<H.e?this.e:H.e;return M>=H?null:L.fromDateTimes(M,H)};Q.union=function(H){return this.isValid?L.fromDateTimes(this.s<H.s?this.s:H.s,this.e>H.e?this.e:H.e):this};L.merge=function(H){var M=H.sort(function(W,ma){return W.s-ma.s}).reduce(function(W,ma){var sa=W[0];return(W=W[1])?W.overlaps(ma)||W.abutsStart(ma)?[sa,W.union(ma)]:[sa.concat([W]),ma]:[sa,ma]},[[],null]);H=M[0];(M=M[1])&&H.push(M);return H};L.xor=function(H){var M,W=null,ma=0,sa=[];H=H.map(function(Ia){return[{time:Ia.s,
type:"s"},{time:Ia.e,type:"e"}]});var za=(M=Array.prototype).concat.apply(M,H).sort(function(Ia,La){return Ia.time-La.time});for(M=f(za);!(H=M()).done;)H=H.value,ma+="s"===H.type?1:-1,1===ma?W=H.time:(W&&+W!==+H.time&&sa.push(L.fromDateTimes(W,H.time)),W=null);return L.merge(sa)};Q.difference=function(){for(var H=this,M=arguments.length,W=Array(M),ma=0;ma<M;ma++)W[ma]=arguments[ma];return L.xor([this].concat(W)).map(function(sa){return H.intersection(sa)}).filter(function(sa){return sa&&!sa.isEmpty()})};
Q.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":"Invalid Interval"};Q.toLocaleString=function(H,M){void 0===H&&(H=Pb);void 0===M&&(M={});return this.isValid?sb.create(this.s.loc.clone(M),H).formatInterval(this):"Invalid Interval"};Q.toISO=function(H){return this.isValid?this.s.toISO(H)+"/"+this.e.toISO(H):"Invalid Interval"};Q.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():"Invalid Interval"};Q.toISOTime=function(H){return this.isValid?
this.s.toISOTime(H)+"/"+this.e.toISOTime(H):"Invalid Interval"};Q.toFormat=function(H,M){M=(void 0===M?{}:M).separator;M=void 0===M?" \u2013 ":M;return this.isValid?""+this.s.toFormat(H)+M+this.e.toFormat(H):"Invalid Interval"};Q.toDuration=function(H,M){return this.isValid?this.e.diff(this.s,H,M):db.invalid(this.invalidReason)};Q.mapEndpoints=function(H){return L.fromDateTimes(H(this.s),H(this.e))};t(L,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?
this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]);return L}(),Mb=function(){function L(){}L.hasDST=function(Q){void 0===Q&&(Q=$a.defaultZone);var H=bb.now().setZone(Q).set({month:12});return!Q.isUniversal&&H.offset!==H.set({month:6}).offset};L.isValidIANAZone=function(Q){return Eb.isValidZone(Q)};
L.normalizeZone=function(Q){return z(Q,$a.defaultZone)};L.months=function(Q,H){void 0===Q&&(Q="long");var M=void 0===H?{}:H;H=M.locale;var W=M.numberingSystem,ma=M.locObj;M=M.outputCalendar;return((void 0===ma?null:ma)||cb.create(void 0===H?null:H,void 0===W?null:W,void 0===M?"gregory":M)).months(Q)};L.monthsFormat=function(Q,H){void 0===Q&&(Q="long");var M=void 0===H?{}:H;H=M.locale;var W=M.numberingSystem,ma=M.locObj;M=M.outputCalendar;return((void 0===ma?null:ma)||cb.create(void 0===H?null:H,void 0===
W?null:W,void 0===M?"gregory":M)).months(Q,!0)};L.weekdays=function(Q,H){void 0===Q&&(Q="long");var M=void 0===H?{}:H;H=M.locale;var W=M.numberingSystem;M=M.locObj;return((void 0===M?null:M)||cb.create(void 0===H?null:H,void 0===W?null:W,null)).weekdays(Q)};L.weekdaysFormat=function(Q,H){void 0===Q&&(Q="long");var M=void 0===H?{}:H;H=M.locale;var W=M.numberingSystem;M=M.locObj;return((void 0===M?null:M)||cb.create(void 0===H?null:H,void 0===W?null:W,null)).weekdays(Q,!0)};L.meridiems=function(Q){Q=
(void 0===Q?{}:Q).locale;return cb.create(void 0===Q?null:Q).meridiems()};L.eras=function(Q,H){void 0===Q&&(Q="short");H=(void 0===H?{}:H).locale;return cb.create(void 0===H?null:H,null,"gregory").eras(Q)};L.features=function(){return{relative:F()}};return L}(),Vb={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",
khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},jc={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,
3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},cd=Vb.hanidec.replace(/[\[|\]]/g,"").split(""),kc="[ "+String.fromCharCode(160)+"]",Wb=new RegExp(kc,"g"),ed={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},
second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}},Xb=null,Zb=[0,31,59,90,120,151,181,212,243,273,304,334],Yb=[0,31,60,91,121,152,182,213,244,274,305,335],mc={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Kd={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Ld={ordinal:1,hour:0,minute:0,second:0,millisecond:0},lc="year month day hour minute second millisecond".split(" "),Md="weekYear weekNumber weekday hour minute second millisecond".split(" "),Nd="year ordinal hour minute second millisecond".split(" "),
bb=function(){function L(H){var M=H.zone||$a.defaultZone,W=H.invalid||(Number.isNaN(H.ts)?new tb("invalid input"):null)||(M.isValid?null:jb(M));this.ts=A(H.ts)?$a.now():H.ts;var ma=null,sa=null;W||(H.old&&H.old.ts===this.ts&&H.old.zone.equals(M)?(sa=[H.old.c,H.old.o],ma=sa[0],sa=sa[1]):(sa=M.offset(this.ts),ma=Ab(this.ts,sa),ma=(W=Number.isNaN(ma.year)?new tb("invalid input"):null)?null:ma,sa=W?null:sa));this._zone=M;this.loc=H.loc||cb.create();this.invalid=W;this.weekData=null;this.c=ma;this.o=sa;
this.isLuxonDateTime=!0}L.now=function(){return new L({})};L.local=function(){var H=Ib(arguments),M=H[1];return Nb({year:M[0],month:M[1],day:M[2],hour:M[3],minute:M[4],second:M[5],millisecond:M[6]},H[0])};L.utc=function(){var H=Ib(arguments),M=H[0],W=H[1];H=W[0];var ma=W[1],sa=W[2],za=W[3],Ia=W[4],La=W[5];W=W[6];M.zone=rb.utcInstance;return Nb({year:H,month:ma,day:sa,hour:za,minute:Ia,second:La,millisecond:W},M)};L.fromJSDate=function(H,M){void 0===M&&(M={});H="[object Date]"===Object.prototype.toString.call(H)?
H.valueOf():NaN;if(Number.isNaN(H))return L.invalid("invalid input");var W=z(M.zone,$a.defaultZone);return W.isValid?new L({ts:H,zone:W,loc:cb.fromObject(M)}):L.invalid(jb(W))};L.fromMillis=function(H,M){void 0===M&&(M={});if(D(H))return-864E13>H||864E13<H?L.invalid("Timestamp out of range"):new L({ts:H,zone:z(M.zone,$a.defaultZone),loc:cb.fromObject(M)});throw new gb("fromMillis requires a numerical input, but received a "+typeof H+" with value "+H);};L.fromSeconds=function(H,M){void 0===M&&(M={});
if(D(H))return new L({ts:1E3*H,zone:z(M.zone,$a.defaultZone),loc:cb.fromObject(M)});throw new gb("fromSeconds requires a numerical input");};L.fromObject=function(H,M){void 0===M&&(M={});H=H||{};var W=z(M.zone,$a.defaultZone);if(!W.isValid)return L.invalid(jb(W));var ma=$a.now(),sa=A(M.specificOffset)?W.offset(ma):M.specificOffset,za=da(H,ab),Ia=!A(za.ordinal),La=!A(za.year),Ra=!A(za.month)||!A(za.day);La=La||Ra;var Sa=za.weekYear||za.weekNumber;M=cb.fromObject(M);if((La||Ia)&&Sa)throw new Fb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");
if(Ra&&Ia)throw new Fb("Can't mix ordinal dates with month/day");Ra=Sa||za.weekday&&!La;Sa=Ab(ma,sa);if(Ra){var Qa=Md;ma=Kd;Sa=ub(Sa)}else Ia?(Qa=Nd,ma=Ld,Sa=Va(Sa)):(Qa=lc,ma=mc);var Za=!1;Qa=f(Qa);for(var pb;!(pb=Qa()).done;)pb=pb.value,A(za[pb])?za[pb]=Za?ma[pb]:Sa[pb]:Za=!0;Ra?(ma=E(za.weekYear),Sa=C(za.weekNumber,1,U(za.weekYear)),Za=C(za.weekday,1,7),ma=ma?Sa?Za?!1:Xa("weekday",za.weekday):Xa("week",za.week):Xa("weekYear",za.weekYear)):Ia?(ma=E(za.year),Sa=C(za.ordinal,1,ca(za.year)?366:365),
ma=ma?Sa?!1:Xa("ordinal",za.ordinal):Xa("year",za.year)):ma=wb(za);if(ma=ma||Ua(za))return L.invalid(ma);Ia=Ra?vb(za):Ia?fb(za):za;sa=yb(Ia,sa,W);W=new L({ts:sa[0],zone:W,o:sa[1],loc:M});return za.weekday&&La&&H.weekday!==W.weekday?L.invalid("mismatched weekday","you can't specify both a weekday of "+za.weekday+" and a date of "+W.toISO()):W};L.fromISO=function(H,M){void 0===M&&(M={});var W=wa(H,[xd,Tc],[yd,Bd],[zd,Cd],[Ad,Dd]);return ib(W[0],W[1],M,"ISO 8601",H)};L.fromRFC2822=function(H,M){void 0===
M&&(M={});var W=wa(H.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[td,ja]);return ib(W[0],W[1],M,"RFC 2822",H)};L.fromHTTP=function(H,M){void 0===M&&(M={});H=wa(H,[ud,ra],[vd,ra],[wd,K]);return ib(H[0],H[1],M,"HTTP",M)};L.fromFormat=function(H,M,W){void 0===W&&(W={});if(A(H)||A(M))throw new gb("fromFormat requires an input string and a format");var ma=W,sa=ma.locale;ma=ma.numberingSystem;sa=cb.fromOpts({locale:void 0===sa?null:sa,numberingSystem:void 0===ma?null:ma,defaultToEN:!0});
sa=Pa(sa,H,M);var za=[sa.result,sa.zone,sa.specificOffset,sa.invalidReason];sa=za[0];ma=za[1];var Ia=za[2];return(za=za[3])?L.invalid(za):ib(sa,ma,W,"format "+M,H,Ia)};L.fromString=function(H,M,W){void 0===W&&(W={});return L.fromFormat(H,M,W)};L.fromSQL=function(H,M){void 0===M&&(M={});var W=wa(H,[Fd,Tc],[Gd,Hd]);return ib(W[0],W[1],M,"SQL",H)};L.invalid=function(H,M){void 0===M&&(M=null);if(!H)throw new gb("need to specify a reason the DateTime is invalid");H=H instanceof tb?H:new tb(H,M);if($a.throwOnInvalid)throw new Jb(H);
return new L({invalid:H})};L.isDateTime=function(H){return H&&H.isLuxonDateTime||!1};L.parseFormatForOpts=function(H,M){void 0===M&&(M={});return(H=Ta(H,cb.fromObject(M)))?H.map(function(W){return W?W.val:null}).join(""):null};L.expandFormat=function(H,M){void 0===M&&(M={});return Na(sb.parseFormat(H),cb.fromObject(M)).map(function(W){return W.val}).join("")};var Q=L.prototype;Q.get=function(H){return this[H]};Q.resolvedLocaleOptions=function(H){void 0===H&&(H={});H=sb.create(this.loc.clone(H),H).resolvedOptions(this);
return{locale:H.locale,numberingSystem:H.numberingSystem,outputCalendar:H.calendar}};Q.toUTC=function(H,M){void 0===H&&(H=0);void 0===M&&(M={});return this.setZone(rb.instance(H),M)};Q.toLocal=function(){return this.setZone($a.defaultZone)};Q.setZone=function(H,M){var W=void 0===M?{}:M;M=W.keepLocalTime;M=void 0===M?!1:M;W=W.keepCalendarTime;W=void 0===W?!1:W;H=z(H,$a.defaultZone);if(H.equals(this.zone))return this;if(H.isValid){var ma=this.ts;if(M||W)M=H.offset(this.ts),W=this.toObject(),ma=yb(W,
M,H)[0];return kb(this,{ts:ma,zone:H})}return L.invalid(jb(H))};Q.reconfigure=function(H){H=void 0===H?{}:H;H=this.loc.clone({locale:H.locale,numberingSystem:H.numberingSystem,outputCalendar:H.outputCalendar});return kb(this,{loc:H})};Q.setLocale=function(H){return this.reconfigure({locale:H})};Q.set=function(H){if(!this.isValid)return this;H=da(H,ab);var M=!A(H.weekYear)||!A(H.weekNumber)||!A(H.weekday),W=!A(H.ordinal),ma=!A(H.year),sa=!A(H.month)||!A(H.day),za=H.weekYear||H.weekNumber;if((ma||sa||
W)&&za)throw new Fb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(sa&&W)throw new Fb("Can't mix ordinal dates with month/day");M?M=vb(u({},ub(this.c),H)):A(H.ordinal)?(M=u({},this.toObject(),H),A(H.day)&&(M.day=Math.min(J(M.year,M.month),M.day))):M=fb(u({},Va(this.c),H));H=yb(M,this.o,this.zone);return kb(this,{ts:H[0],o:H[1]})};Q.plus=function(H){if(!this.isValid)return this;H=db.fromDurationLike(H);return kb(this,hb(this,H))};Q.minus=function(H){if(!this.isValid)return this;
H=db.fromDurationLike(H).negate();return kb(this,hb(this,H))};Q.startOf=function(H){if(!this.isValid)return this;var M={};H=db.normalizeUnit(H);switch(H){case "years":M.month=1;case "quarters":case "months":M.day=1;case "weeks":case "days":M.hour=0;case "hours":M.minute=0;case "minutes":M.second=0;case "seconds":M.millisecond=0}"weeks"===H&&(M.weekday=1);"quarters"===H&&(M.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(M)};Q.endOf=function(H){var M;return this.isValid?this.plus((M={},M[H]=
1,M)).startOf(H).minus(1):this};Q.toFormat=function(H,M){void 0===M&&(M={});return this.isValid?sb.create(this.loc.redefaultToEN(M)).formatDateTimeFromString(this,H):"Invalid DateTime"};Q.toLocaleString=function(H,M){void 0===H&&(H=Pb);void 0===M&&(M={});return this.isValid?sb.create(this.loc.clone(M),H).formatDateTime(this):"Invalid DateTime"};Q.toLocaleParts=function(H){void 0===H&&(H={});return this.isValid?sb.create(this.loc.clone(H),H).formatDateTimeParts(this):[]};Q.toISO=function(H){var M=
void 0===H?{}:H,W=M.format;H=M.suppressSeconds;H=void 0===H?!1:H;var ma=M.suppressMilliseconds;ma=void 0===ma?!1:ma;var sa=M.includeOffset;sa=void 0===sa?!0:sa;M=M.extendedZone;M=void 0===M?!1:M;if(!this.isValid)return null;W="extended"===(void 0===W?"extended":W);var za=Wa(this,W);return za=za+"T"+Bb(this,W,H,ma,sa,M)};Q.toISODate=function(H){H=(void 0===H?{}:H).format;return this.isValid?Wa(this,"extended"===(void 0===H?"extended":H)):null};Q.toISOWeekDate=function(){return nb(this,"kkkk-'W'WW-c")};
Q.toISOTime=function(H){var M=void 0===H?{}:H;H=M.suppressMilliseconds;var W=M.suppressSeconds,ma=M.includeOffset,sa=M.includePrefix,za=M.extendedZone;M=M.format;return this.isValid?((void 0===sa?0:sa)?"T":"")+Bb(this,"extended"===(void 0===M?"extended":M),void 0===W?!1:W,void 0===H?!1:H,void 0===ma?!0:ma,void 0===za?!1:za):null};Q.toRFC2822=function(){return nb(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)};Q.toHTTP=function(){return nb(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")};Q.toSQLDate=function(){return this.isValid?
Wa(this,!0):null};Q.toSQLTime=function(H){var M=void 0===H?{}:H;H=M.includeOffset;H=void 0===H?!0:H;var W=M.includeZone;W=void 0===W?!1:W;M=M.includeOffsetSpace;M=void 0===M?!0:M;var ma="HH:mm:ss.SSS";if(W||H)M&&(ma+=" "),W?ma+="z":H&&(ma+="ZZ");return nb(this,ma,!0)};Q.toSQL=function(H){void 0===H&&(H={});return this.isValid?this.toSQLDate()+" "+this.toSQLTime(H):null};Q.toString=function(){return this.isValid?this.toISO():"Invalid DateTime"};Q.valueOf=function(){return this.toMillis()};Q.toMillis=
function(){return this.isValid?this.ts:NaN};Q.toSeconds=function(){return this.isValid?this.ts/1E3:NaN};Q.toUnixInteger=function(){return this.isValid?Math.floor(this.ts/1E3):NaN};Q.toJSON=function(){return this.toISO()};Q.toBSON=function(){return this.toJSDate()};Q.toObject=function(H){void 0===H&&(H={});if(!this.isValid)return{};var M=u({},this.c);H.includeConfig&&(M.outputCalendar=this.outputCalendar,M.numberingSystem=this.loc.numberingSystem,M.locale=this.loc.locale);return M};Q.toJSDate=function(){return new Date(this.isValid?
this.ts:NaN)};Q.diff=function(H,M,W){void 0===M&&(M="milliseconds");void 0===W&&(W={});if(!this.isValid||!H.isValid)return db.invalid("created by diffing an invalid DateTime");W=u({locale:this.locale,numberingSystem:this.numberingSystem},W);var ma=(Array.isArray(M)?M:[M]).map(db.normalizeUnit);M=H.valueOf()>this.valueOf();H=ua(M?this:H,M?H:this,ma,W);return M?H.negate():H};Q.diffNow=function(H,M){void 0===H&&(H="milliseconds");void 0===M&&(M={});return this.diff(L.now(),H,M)};Q.until=function(H){return this.isValid?
Lb.fromDateTimes(this,H):this};Q.hasSame=function(H,M){if(!this.isValid)return!1;var W=H.valueOf();H=this.setZone(H.zone,{keepLocalTime:!0});return H.startOf(M)<=W&&W<=H.endOf(M)};Q.equals=function(H){return this.isValid&&H.isValid&&this.valueOf()===H.valueOf()&&this.zone.equals(H.zone)&&this.loc.equals(H.loc)};Q.toRelative=function(H){void 0===H&&(H={});if(!this.isValid)return null;var M=H.base||L.fromObject({},{zone:this.zone}),W=H.padding?this<M?-H.padding:H.padding:0,ma="years months days hours minutes seconds".split(" "),
sa=H.unit;Array.isArray(H.unit)&&(ma=H.unit,sa=void 0);return Ya(M,this.plus(W),u({},H,{numeric:"always",units:ma,unit:sa}))};Q.toRelativeCalendar=function(H){void 0===H&&(H={});return this.isValid?Ya(H.base||L.fromObject({},{zone:this.zone}),this,u({},H,{numeric:"auto",units:["years","months","days"],calendary:!0})):null};L.min=function(){for(var H=arguments.length,M=Array(H),W=0;W<H;W++)M[W]=arguments[W];if(!M.every(L.isDateTime))throw new gb("min requires all arguments be DateTimes");return y(M,
function(ma){return ma.valueOf()},Math.min)};L.max=function(){for(var H=arguments.length,M=Array(H),W=0;W<H;W++)M[W]=arguments[W];if(!M.every(L.isDateTime))throw new gb("max requires all arguments be DateTimes");return y(M,function(ma){return ma.valueOf()},Math.max)};L.fromFormatExplain=function(H,M,W){void 0===W&&(W={});var ma=W;W=ma.locale;ma=ma.numberingSystem;W=cb.fromOpts({locale:void 0===W?null:W,numberingSystem:void 0===ma?null:ma,defaultToEN:!0});return Pa(W,H,M)};L.fromStringExplain=function(H,
M,W){void 0===W&&(W={});return L.fromFormatExplain(H,M,W)};t(L,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?
this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",
get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?qb(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?qb(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?qb(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?Va(this.c).ordinal:NaN}},
{key:"monthShort",get:function(){return this.isValid?Mb.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?Mb.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?Mb.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?Mb.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?
+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}},
{key:"isInLeapYear",get:function(){return ca(this.year)}},{key:"daysInMonth",get:function(){return J(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?ca(this.year)?366:365:NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?U(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return Pb}},{key:"DATE_MED",get:function(){return nc}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return fd}},{key:"DATE_FULL",get:function(){return oc}},{key:"DATE_HUGE",get:function(){return pc}},
{key:"TIME_SIMPLE",get:function(){return qc}},{key:"TIME_WITH_SECONDS",get:function(){return rc}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return sc}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return tc}},{key:"TIME_24_SIMPLE",get:function(){return uc}},{key:"TIME_24_WITH_SECONDS",get:function(){return vc}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return wc}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return xc}},{key:"DATETIME_SHORT",get:function(){return yc}},{key:"DATETIME_SHORT_WITH_SECONDS",
get:function(){return zc}},{key:"DATETIME_MED",get:function(){return Ac}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return Bc}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return gd}},{key:"DATETIME_FULL",get:function(){return Cc}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return Dc}},{key:"DATETIME_HUGE",get:function(){return Ec}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return Fc}}]);return L}();g.DateTime=bb;g.Duration=db;g.FixedOffsetZone=rb;g.IANAZone=Eb;g.Info=Mb;g.Interval=
Lb;g.InvalidZone=fc;g.Settings=$a;g.SystemZone=Ub;g.VERSION="3.2.1";g.Zone=Hb;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(g,e){return function(){function t(u){void 0===u&&(u=[]);this._elements=u}t.prototype.length=function(){return this._elements.length};t.prototype.get=function(u){return this._elements[u]};t.prototype.toArray=function(){for(var u=[],l=0;l<this.length();l++)u.push(this.get(l));return u};return t}()})},
"esri/arcade/languageUtils":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ./ArcadeDate ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../libs/luxon/luxon dojo/number dojo/_base/kernel ./featureset/support/shared ./ArcadeModule ./executionError".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h,c,f,p,r,m,v,z,A,D,E,F){function y(G,ja,ra){return""===ja||null===ja||void 0===ja||ja===ra||ja===ra?G:G=G.split(ja).join(ra)}function x(G){return G instanceof k.ArcadeFunction}function w(G){return G instanceof E.ArcadeModule}function C(G){return B(G)||N(G)||U(G)||I(G)||null===G||G===e.voidOperation||"number"===typeof G?!0:!1}function B(G){return"string"===typeof G||G instanceof String}function I(G){return"boolean"===typeof G}function N(G){return"number"===typeof G}
function V(G){return G instanceof Array}function Y(G){return"esri.arcade.Feature"===(null===G||void 0===G?void 0:G.arcadeDeclaredClass)?!0:!1}function ca(G){return"esri.arcade.featureset.support.FeatureSet"===(null===G||void 0===G?void 0:G.declaredRootClass)}function J(G){return"esri.arcade.featureSetCollection"===(null===G||void 0===G?void 0:G.declaredRootClass)}function O(G){return G instanceof a}function U(G){return G instanceof b.ArcadeDate}function ba(G){return null!=G&&"object"===typeof G}function Z(G){return G instanceof
Date}function fa(G,ja){if(!isNaN(G)){if(void 0===ja||null===ja||""===ja)return G.toString();ja=y(ja,"\u2030","");ja=y(ja,"\u00a4","");return z.format(G,{pattern:ja})}return G.toString()}function pa(G,ja){return void 0===ja||null===ja||""===ja?G.toISOString(!0):G.toFormat(da(ja),{locale:A.locale,numberingSystem:"latn"})}function da(G){G=G.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");var ja="",ra=0;for(G=G.match(/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g)||
[];ra<G.length;ra++){var K=G[ra];switch(K){case "D":ja+="d";break;case "DD":ja+="dd";break;case "DDD":ja+="o";break;case "d":ja+="c";break;case "ddd":ja+="ccc";break;case "dddd":ja+="cccc";break;case "M":ja+="L";break;case "MM":ja+="LL";break;case "MMM":ja+="LLL";break;case "MMMM":ja+="LLLL";break;case "YY":ja+="yy";break;case "Y":case "YYYY":ja+="yyyy";break;case "Q":ja+="q";break;case "Z":ja+="ZZ";break;case "ZZ":ja+="ZZZ";break;case "S":ja+="'S'";break;case "SS":ja+="'SS'";break;case "SSS":ja+=
"u";break;case "A":case "a":ja+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":ja+=K;break;default:ja=2<=K.length&&"["===K.slice(0,1)&&"]"===K.slice(-1)?ja+("'"+K.slice(1,-1)+"'"):ja+("'"+K+"'")}}return ja}function ha(G,ja,ra){switch(ra){case "\x3e":return G>ja;case "\x3c":return G<ja;case "\x3e\x3d":return G>=ja;case "\x3c\x3d":return G<=ja}return!1}function P(G,ja){if(G===ja||null===G&&ja===e.voidOperation||null===ja&&G===e.voidOperation)return!0;
if(U(G)&&U(ja))return G.equals(ja);if(G instanceof d||G instanceof n)return G.equalityTest(ja);if(G instanceof p&&ja instanceof p){var ra=G.getCacheValue("_arcadeCacheId"),K=ja.getCacheValue("_arcadeCacheId");if(void 0!==ra&&null!==ra)return ra===K}return ba(G)&&ba(ja)&&(G._arcadeCacheId===ja._arcadeCacheId&&void 0!==G._arcadeCacheId&&null!==G._arcadeCacheId||G._underlyingGraphic===ja._underlyingGraphic&&void 0!==G._underlyingGraphic&&null!==G._underlyingGraphic)?!0:!1}function aa(G,ja){if(B(G))return G;
if(null===G)return"";if(N(G))return fa(G,ja);if(I(G))return G.toString();if(U(G))return pa(G,ja);if(G instanceof c)return JSON.stringify(G.toJson());if(V(G)){ja=[];for(var ra=0;ra<G.length;ra++)ja[ra]=X(G[ra]);return"["+ja.join(",")+"]"}if(G instanceof a){ja=[];for(ra=0;ra<G.length();ra++)ja[ra]=X(G.get(ra));return"["+ja.join(",")+"]"}return null!==G&&"object"===typeof G&&void 0!==G.castToText?G.castToText():x(G)?"object, Function":G===e.voidOperation?"":w(G)?"object, Module":""}function ea(G,ja,
ra){void 0===ra&&(ra=!1);if(B(G))return G;if(null===G)return"";if(N(G))return fa(G,ja);if(I(G))return G.toString();if(U(G))return pa(G,ja);if(G instanceof c)return G instanceof h?'{"xmin":'+G.xmin.toString()+',"ymin":'+G.ymin.toString()+","+(G.hasZ?'"zmin":'+G.zmin.toString()+",":"")+(G.hasM?'"mmin":'+G.mmin.toString()+",":"")+'"xmax":'+G.xmax.toString()+',"ymax":'+G.ymax.toString()+","+(G.hasZ?'"zmax":'+G.zmax.toString()+",":"")+(G.hasM?'"mmax":'+G.mmax.toString()+",":"")+'"spatialReference":'+Ha(G.spatialReference)+
"}":Ha(G.toJson(),function(xa,va){return xa.key===va.key?0:"spatialReference"===xa.key?1:"spatialReference"===va.key||xa.key<va.key?-1:xa.key>va.key?1:0});if(V(G)){ja=[];for(var K=0;K<G.length;K++)ja[K]=X(G[K],ra);return"["+ja.join(",")+"]"}if(G instanceof a){ja=[];for(K=0;K<G.length();K++)ja[K]=X(G.get(K),ra);return"["+ja.join(",")+"]"}return null!==G&&"object"===typeof G&&void 0!==G.castToText?G.castToText(ra):x(G)?"object, Function":G===e.voidOperation?"":w(G)?"object, Module":""}function X(G,
ja){void 0===ja&&(ja=!1);return null===G?"null":I(G)||N(G)||B(G)?JSON.stringify(G):G instanceof c||G instanceof a||G instanceof Array?ea(G,null,ja):U(G)?ja?JSON.stringify(G.getTime()):JSON.stringify(pa(G,"")):null!==G&&"object"===typeof G&&void 0!==G.castToText?G.castToText(ja):"null"}function S(G,ja){return N(G)?G:null===G||""===G?0:U(G)?NaN:I(G)?G?1:0:V(G)||""===G||void 0===G?NaN:void 0!==ja&&B(G)?(ja=y(ja,"\u2030",""),ja=y(ja,"\u00a4",""),z.parse(G,{pattern:ja})):G===e.voidOperation?0:Number(G)}
function ia(G,ja){if(!G||!G.domain)return ja;var ra=null;if("string"===G.field.type||"esriFieldTypeString"===G.field.type)ja=aa(ja);else{if(null===ja||void 0===ja)return null;if(""===ja)return ja;ja=S(ja)}for(var K=0;K<G.domain.codedValues.length;K++){var xa=G.domain.codedValues[K];xa.code===ja&&(ra=xa)}return null===ra?ja:ra.name}function oa(G,ja){if(!G||!G.domain)return ja;var ra=null;ja=aa(ja);for(var K=0;K<G.domain.codedValues.length;K++){var xa=G.domain.codedValues[K];xa.name===ja&&(ra=xa)}return null===
ra?ja:ra.code}function qa(G,ja,ra,K){void 0===ra&&(ra=null);void 0===K&&(K=null);if(!ja||!ja.fields)return null;for(var xa=null,va=0;va<ja.fields.length;va++){var la=ja.fields[va];la.name.toLowerCase()===G.toString().toLowerCase()&&(xa=la)}if(null===xa)throw new F.ArcadeExecutionError(null,F.ExecutionErrorCodes.FieldNotFound,null,{key:G});var Ca,Ma;null===K&&ra&&ja.typeIdField&&(K=ra.hasField(ja.typeIdField)?ra.field(ja.typeIdField):null);null!==K&&void 0!==K&&ja.types.some(function(ua){return ua.id===
K?((Ca=ua.domains&&ua.domains[xa.name])&&"inherited"===Ca.type&&(Ca=wa(xa.name,ja),Ma=!0),!0):!1});Ma||Ca||(Ca=wa(G,ja));return{field:xa,domain:Ca}}function wa(G,ja){var ra;ja.fields.some(function(K){K.name.toLowerCase()===G.toLowerCase()&&(ra=K.domain);return!!ra});return ra}function Ha(G,ja){ja||(ja={});"function"===typeof ja&&(ja={cmp:ja});var ra="boolean"===typeof ja.cycles?ja.cycles:!1,K=ja.cmp&&function(va){return function(la){return function(Ca,Ma){return va({key:Ca,value:la[Ca]},{key:Ma,value:la[Ma]})}}}(ja.cmp),
xa=[];return function Ca(la){la&&la.toJson&&"function"===typeof la.toJson&&(la=la.toJson());if(void 0!==la){if("number"===typeof la)return isFinite(la)?""+la:"null";if("object"!==typeof la)return JSON.stringify(la);var Ma;if(Array.isArray(la)){var ua="[";for(Ma=0;Ma<la.length;Ma++)Ma&&(ua+=","),ua+=Ca(la[Ma])||"null";return ua+"]"}if(null===la)return"null";if(xa.includes(la)){if(ra)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var Ba=xa.push(la)-
1,Aa=Object.keys(la).sort(K&&K(la));ua="";for(Ma=0;Ma<Aa.length;Ma++){var Ga=Aa[Ma],ya=Ca(la[Ga]);ya&&(ua&&(ua+=","),ua+=JSON.stringify(Ga)+":"+ya)}xa.splice(Ba,1);return"{"+ua+"}"}}(G)}function R(G,ja){if(ja instanceof p)G.push([ja.x,ja.y]);else throw new F.ArcadeExecutionError(null,F.ExecutionErrorCodes.InvalidParameter,null);}function T(G,ja){void 0===ja&&(ja=null);if(null!=G){if(I(G)||N(G)||B(G))return G;if(G instanceof c)return!0===(null===ja||void 0===ja?void 0:ja.keepGeometryType)?G:G.toJson();
if(G instanceof a)return G.toArray().map(function(ra){return T(ra,ja)});if(G instanceof Array)return G.map(function(ra){return T(ra,ja)});if(Z(G))return G;if(U(G))return G.toJSDate();if(null!==G&&"object"===typeof G&&void 0!==G.castAsJson)return G.castAsJson(ja)}return null}function ka(G,ja,ra,K,xa){return t(this,void 0,void 0,function(){var va;return u(this,function(la){switch(la.label){case 0:return[4,na(G,ja,ra)];case 1:return va=la.sent(),xa[K]=va,[2]}})})}function na(G,ja,ra){void 0===ja&&(ja=
null);void 0===ra&&(ra=null);return t(this,void 0,void 0,function(){var K,xa,va,la,Ca;return u(this,function(Ma){switch(Ma.label){case 0:return G instanceof a&&(G=G.toArray()),null!=G?[3,1]:[2,null];case 1:return C(G)||G instanceof c||Z(G)||U(G)?[2,T(G,ra)]:[3,2];case 2:if(!(G instanceof Array))return[3,5];K=[];xa=[];va=0;for(la=G;va<la.length;va++)Ca=la[va],null===Ca||C(Ca)||Ca instanceof c||Z(Ca)||U(Ca)?xa.push(T(Ca,ra)):(xa.push(null),K.push(ka(Ca,ja,ra,xa.length-1,xa)));return 0<K.length?[4,Promise.all(K)]:
[3,4];case 3:Ma.sent(),Ma.label=4;case 4:return[2,xa];case 5:if(null!==G&&"object"===typeof G&&void 0!==G.castAsJsonAsync)return[2,G.castAsJsonAsync(ja,ra)];Ma.label=6;case 6:return[2,null]}})})}Object.defineProperty(e,"__esModule",{value:!0});e.featureSchema=e.defaultTimeZone=e.featureDomainCodeLookup=e.featureDomainValueLookup=e.featureSubtypes=e.featureFullDomain=e.castAsJsonAsync=e.castAsJson=e.binaryOperator=e.tick=e.toStringArray=e.autoCastArrayOfPointsToMultiPoint=e.autoCastArrayOfPointsToPolyline=
e.autoCastArrayOfPointsToPolygon=e.autoCastFeatureToGeometry=e.stableStringify=e.getDomain=e.getDomainCode=e.getDomainValue=e.fixNullGeometry=e.fixSpatialReference=e.toBoolean=e.toDate=e.toNumber=e.toStringExplicit=e.toNumberArray=e.toString=e.equalityTest=e.greaterThanLessThan=e.standardiseDateFormat=e.formatDate=e.formatNumber=e.generateUUID=e.absRound=e.pcCheck=e.isJsDate=e.isObject=e.isDate=e.isImmutableArray=e.isFeatureSetCollection=e.isFeatureSet=e.isFeature=e.isArray=e.isInteger=e.isNumber=
e.isBoolean=e.isString=e.getType=e.defaultUndefined=e.isSimpleType=e.isModule=e.isFunctionParameter=e.multiReplace=e.continueResult=e.breakResult=e.voidOperation=e.ReturnResult=e.ImplicitResult=e.ImplicitResultE=e.ReturnResultE=void 0;g=function(){return function(G){this.value=G}}();e.ReturnResultE=g;l=function(){return function(G){this.value=G}}();e.ImplicitResultE=l;e.ImplicitResult=l;e.ReturnResult=g;e.voidOperation={type:"VOID"};e.breakResult={type:"BREAK"};e.continueResult={type:"CONTINUE"};
e.multiReplace=y;e.isFunctionParameter=x;e.isModule=w;e.isSimpleType=C;e.defaultUndefined=function(G,ja){return void 0===G?ja:G};e.getType=function(G){return null==G?"":V(G)||O(G)?"Array":U(G)?"Date":B(G)?"String":I(G)?"Boolean":N(G)?"Number":"esri.arcade.Attachment"===(null===G||void 0===G?void 0:G.declaredClass)?"Attachment":"esri.arcade.Portal"===(null===G||void 0===G?void 0:G.declaredClass)?"Portal":"esri.arcade.Dictionary"===(null===G||void 0===G?void 0:G.declaredClass)?"Dictionary":G instanceof
E.ArcadeModule?"Module":Y(G)?"Feature":G instanceof p?"Point":G instanceof r?"Polygon":G instanceof m?"Polyline":G instanceof f?"Multipoint":G instanceof h?"Extent":x(G)?"Function":ca(G)?"FeatureSet":J(G)?"FeatureSetCollection":G===e.voidOperation?"":"number"===typeof G&&isNaN(G)?"Number":"Unrecognised Type"};e.isString=B;e.isBoolean=I;e.isNumber=N;e.isInteger=function(G){return"number"===typeof G&&isFinite(G)&&Math.floor(G)===G};e.isArray=V;e.isFeature=Y;e.isFeatureSet=ca;e.isFeatureSetCollection=
J;e.isImmutableArray=O;e.isDate=U;e.isObject=ba;e.isJsDate=Z;e.pcCheck=function(G,ja,ra,K,xa){if(G.length<ja||G.length>ra)throw new F.ArcadeExecutionError(K,F.ExecutionErrorCodes.WrongNumberOfParameters,xa);};e.absRound=function(G){return 0>G?-Math.round(-G):Math.round(G)};e.generateUUID=function(){var G=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ja){var ra=(G+16*Math.random())%16|0;G=Math.floor(G/16);return("x"===ja?ra:ra&3|8).toString(16)})};e.formatNumber=
fa;e.formatDate=pa;e.standardiseDateFormat=da;e.greaterThanLessThan=function(G,ja,ra){if(null===G){if(null===ja||ja===e.voidOperation)return ha(null,null,ra);if(N(ja))return ha(0,ja,ra);if(B(ja)||I(ja))return ha(0,S(ja),ra);if(U(ja))return ha(0,ja.toNumber(),ra)}if(G===e.voidOperation){if(null===ja||ja===e.voidOperation)return ha(null,null,ra);if(N(ja))return ha(0,ja,ra);if(B(ja)||I(ja))return ha(0,S(ja),ra);if(U(ja))return ha(0,ja.toNumber(),ra)}else if(N(G)){if(N(ja))return ha(G,ja,ra);if(I(ja))return ha(G,
S(ja),ra);if(null===ja||ja===e.voidOperation)return ha(G,0,ra);if(B(ja))return ha(G,S(ja),ra);if(U(ja))return ha(G,ja.toNumber(),ra)}else if(B(G)){if(B(ja))return ha(aa(G),aa(ja),ra);if(U(ja))return ha(S(G),ja.toNumber(),ra);if(N(ja))return ha(S(G),ja,ra);if(null===ja||ja===e.voidOperation)return ha(S(G),0,ra);if(I(ja))return ha(S(G),S(ja),ra)}else if(U(G)){if(U(ja))return ha(G.toNumber(),ja.toNumber(),ra);if(null===ja||ja===e.voidOperation)return ha(G.toNumber(),0,ra);if(N(ja))return ha(G.toNumber(),
ja,ra);if(I(ja)||B(ja))return ha(G.toNumber(),S(ja),ra)}else if(I(G)){if(I(ja))return ha(G,ja,ra);if(N(ja))return ha(S(G),S(ja),ra);if(U(ja))return ha(S(G),ja.toNumber(),ra);if(null===ja||ja===e.voidOperation)return ha(S(G),0,ra);if(B(ja))return ha(S(G),S(ja),ra)}return!P(G,ja)||"\x3c\x3d"!==ra&&"\x3e\x3d"!==ra?!1:!0};e.equalityTest=P;e.toString=aa;e.toNumberArray=function(G){var ja=[];if(!V(G))return null;if(G instanceof a){for(var ra=0;ra<G.length();ra++)ja[ra]=S(G.get(ra));return ja}for(ra=0;ra<
G.length;ra++)ja[ra]=S(G[ra]);return ja};e.toStringExplicit=ea;e.toNumber=S;e.toDate=function(G,ja){if(U(G))return G;if(B(G)){a:{var ra=/ (\d\d)/,K=b.createDateTimeZone(ja);K=v.DateTime.fromISO(G,{zone:K});if(K.isValid)ja=K;else{if(ra.test(G)&&(G=G.replace(ra,"T$1"),K=v.DateTime.fromISO(G,{zone:ja}),K.isValid)){ja=K;break a}ja=null}}if(ja)return b.ArcadeDate.dateTimeToArcadeDate(ja)}return null};e.toBoolean=function(G){return I(G)?G:B(G)?(G=G.toLowerCase(),"true"===G?!0:!1):N(G)?0===G||isNaN(G)?!1:
!0:!1};e.fixSpatialReference=function(G,ja){if(null===G||void 0===G)return null;if(null===G.spatialReference||void 0===G.spatialReference)G.spatialReference=ja;return G};e.fixNullGeometry=function(G){if(null===G)return null;if(G instanceof p)return"NaN"===G.x||null===G.x||isNaN(G.x)?null:G;if(G instanceof r){if(0===G.rings.length)return null;for(var ja=0,ra=G.rings;ja<ra.length;ja++){var K=ra[ja];if(0<K.length)return G}return null}if(G instanceof m){if(0===G.paths.length)return null;ja=0;for(ra=G.paths;ja<
ra.length;ja++)if(K=ra[ja],0<K.length)return G;return null}return G instanceof f?0===G.points.length?null:G:G instanceof h?"NaN"===G.xmin||null===G.xmin||isNaN(G.xmin)?null:G:null};e.getDomainValue=ia;e.getDomainCode=oa;e.getDomain=qa;e.stableStringify=Ha;e.autoCastFeatureToGeometry=function(G){if(null===G)return null;for(var ja=[],ra=0;ra<G.length;ra++){var K=G[ra];K&&K.arcadeDeclaredClass&&"esri.arcade.Feature"===K.arcadeDeclaredClass?ja.push(K.geometry()):ja.push(K)}return ja};e.autoCastArrayOfPointsToPolygon=
function(G,ja){if(V(G)||O(G)){var ra=!1,K=!1,xa=[];if(V(G)){for(var va=0;va<G.length;va++){var la=G[va];R(xa,la)}0<xa.length&&(ja=G[0].spatialReference,ra=G[0].hasZ,K=G[0].hasM)}else if(G instanceof n)xa=G._elements,0<xa.length&&(ra=G._hasZ,K=G._hasM,ja=G.get(0).spatialReference);else if(O(G)){va=0;for(var Ca=G.toArray();va<Ca.length;va++)la=Ca[va],R(xa,la);0<xa.length&&(ja=G.get(0).spatialReference,ra=!0===G.get(0).hasZ,K=!0===G.get(0).hasM)}else throw new F.ArcadeExecutionError(null,F.ExecutionErrorCodes.InvalidParameter,
null);if(0===xa.length)return null;(new r({rings:[],spatialReference:{wkid:4326}})).isClockwise(xa)||(xa=xa.slice(0).reverse());return new r({rings:[xa],spatialReference:ja,hasZ:ra,hasM:K})}return G};e.autoCastArrayOfPointsToPolyline=function(G,ja){if(V(G)||O(G)){var ra=!1,K=!1,xa=[];if(V(G)){for(var va=0;va<G.length;va++){var la=G[va];R(xa,la)}0<xa.length&&(ja=G[0].spatialReference,ra=!0===G[0].hasZ,K=!0===G[0].hasM)}else if(G instanceof n)xa=G._elements,0<xa.length&&(ra=G._hasZ,K=G._hasM,ja=G.get(0).spatialReference);
else if(O(G)){va=0;for(var Ca=G.toArray();va<Ca.length;va++)la=Ca[va],R(xa,la);0<xa.length&&(ja=G.get(0).spatialReference,ra=!0===G.get(0).hasZ,K=!0===G.get(0).hasM)}return 0===xa.length?null:new m({paths:[xa],spatialReference:ja,hasZ:ra,hasM:K})}return G};e.autoCastArrayOfPointsToMultiPoint=function(G,ja){if(V(G)||O(G)){var ra=!1,K=!1,xa=[];if(V(G)){for(var va=0;va<G.length;va++){var la=G[va];R(xa,la)}0<xa.length&&(ja=G[0].spatialReference,ra=!0===G[0].hasZ,K=!0===G[0].hasM)}else if(G instanceof
n)xa=G._elements,0<xa.length&&(ra=G._hasZ,K=G._hasM,ja=G.get(0).spatialReference);else if(O(G)){va=0;for(var Ca=G.toArray();va<Ca.length;va++)la=Ca[va],R(xa,la);0<xa.length&&(ja=G.get(0).spatialReference,ra=!0===G.get(0).hasZ,K=!0===G.get(0).hasM)}return 0===xa.length?null:new f({points:xa,spatialReference:ja,hasZ:ra,hasM:K})}return G};e.toStringArray=function(G,ja){void 0===ja&&(ja=!1);var ra=[];if(null===G)return ra;if(!0===V(G)){for(var K=0;K<G.length;K++){var xa=aa(G[K]);""===xa&&!0!==ja||ra.push(xa)}return ra}if(G instanceof
a){for(K=0;K<G.length();K++)xa=aa(G.get(K)),""===xa&&!0!==ja||ra.push(xa);return ra}return C(G)?(xa=aa(G),""===xa&&!0!==ja||ra.push(xa),ra):[]};var ta=0;e.tick=function(G){ta++;return 0===ta%100?(ta=0,new Promise(function(ja){setTimeout(function(){ja(G)},0)})):G};e.binaryOperator=function(G,ja,ra){switch(ra){case "\x26":return G&ja;case "|":return G|ja;case "^":return G^ja;case "\x3c\x3c":return G<<ja;case "\x3e\x3e":return G>>ja;case "\x3e\x3e\x3e":return G>>>ja}};e.castAsJson=T;e.castAsJsonAsync=
na;e.featureFullDomain=function(G,ja,ra){var K=G.fullSchema();return null!==K&&K.fields?qa(ja,K,G,ra):null};e.featureSubtypes=function(G){G=G.fullSchema();return null!==G&&G.fields?G.typeIdField?{subtypeField:G.typeIdField,subtypes:G.types?G.types.map(function(ja){return{name:ja.name,code:ja.id}}):[]}:null:null};e.featureDomainValueLookup=function(G,ja,ra,K){var xa=G.fullSchema();if(null===xa||!xa.fields)return null;K=qa(ja,xa,G,K);if(void 0===ra)try{ra=G.field(ja)}catch(va){return null}return ia(K,
ra)};e.featureDomainCodeLookup=function(G,ja,ra,K){var xa=G.fullSchema();if(null===xa||!xa.fields)return null;if(void 0===ra){try{ra=G.field(ja)}catch(va){return null}return ra}G=qa(ja,xa,G,K);return oa(G,ra)};e.defaultTimeZone=function(G){var ja,ra;return(null===(ja=null===G||void 0===G?void 0:G.timeReference)||void 0===ja?0:ja.timeZone)?null===(ra=null===G||void 0===G?void 0:G.timeReference)||void 0===ra?void 0:ra.timeZone:"system"};e.featureSchema=function(G){G=G.fullSchema();if(null===G||!G.fields)return null;
for(var ja=[],ra=0,K=G.fields;ra<K.length;ra++)ja.push(D.esriFieldToJson(K[ra]));return{objectIdField:G.objectIdField,globalIdField:G.globalIdField,geometryType:void 0===D.layerGeometryEsriRestConstants[G.geometryType]?"":D.layerGeometryEsriRestConstants[G.geometryType],fields:ja}}})},"esri/arcade/FunctionWrapper":function(){define("require exports ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./polyfill/tsSupport/extends ./polyfill/promiseUtils".split(" "),function(g,e,t,u,l,q){function k(n,
b,h){if(n instanceof a&&!(n instanceof d)){var c=new d;c.fn=n;c.parameterEvaluator=h;c.context=b;return c}return n}Object.defineProperty(e,"__esModule",{value:!0});e.ScopeMarshalledFunction=e.NativeFunction=e.wrapModuleScopedResponse=e.ArcadeFunction=void 0;var a=function(){return function(){}}();e.ArcadeFunction=a;e.wrapModuleScopedResponse=k;g=function(n){function b(h){var c=n.call(this)||this;c.fn=h;return c}l(b,n);b.prototype.createFunction=function(h){var c=this;return function(){for(var f=[],
p=0;p<arguments.length;p++)f[p]=arguments[p];return c.fn(h,{preparsed:!0,arguments:f})}};b.prototype.call=function(h,c){return this.fn(h,c)};b.prototype.marshalledCall=function(h,c,f,p){var r=this;return p(h,c,function(m,v,z){z=z.map(function(A){return A instanceof a&&!(A instanceof d)?k(A,h,p):A});m=r.call(f,{args:z});return q.isPromiseLike(m)?m.then(function(A){return k(A,f,p)}):m})};return b}(a);e.NativeFunction=g;var d=function(n){function b(){var h=null!==n&&n.apply(this,arguments)||this;h.fn=
null;h.context=null;return h}l(b,n);b.prototype.createFunction=function(h){return this.fn.createFunction(this.context)};b.prototype.call=function(h,c){return this.fn.marshalledCall(h,c,this.context,this.parameterEvaluator)};b.prototype.marshalledCall=function(h,c,f){return this.fn.marshalledCall(h,c,this.context,this.parameterEvaluator)};return b}(a);e.ScopeMarshalledFunction=d})},"esri/arcade/polyfill/promiseUtils":function(){define(["require","exports","dojo/Deferred"],function(g,e,t){function u(q){void 0===
q&&(q=void 0);var k=new t;k.resolve(q);return k.promise}function l(q){return q&&"function"===typeof q.then?q:u(q)}Object.defineProperty(e,"__esModule",{value:!0});e.create=e.when=e.resolve=e.isPromiseLike=void 0;e.isPromiseLike=function(q){return q&&"function"===typeof q.then};e.resolve=u;e.when=l;e.create=function(q,k){var a=new t(k);q(function(d){return l(d).then(a.resolve)},a.reject);return a.promise}})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","./polyfill/tsSupport/extends",
"./ImmutableArray","./ImmutablePointArray"],function(g,e,t,u,l){return function(q){function k(a,d,n,b,h){a=q.call(this,a)||this;a._lazyPath=[];a._hasZ=!1;a._hasM=!1;a._hasZ=n;a._hasM=b;a._spRef=d;a._cacheId=h;return a}t(k,q);k.prototype.get=function(a){if(void 0===this._lazyPath[a]){var d=this._elements[a];if(void 0===d)return;this._lazyPath[a]=new l(d,this._spRef,this._hasZ,this._hasM,this._cacheId,a)}return this._lazyPath[a]};k.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===
a instanceof k?!1:a.getUniqueHash()===this.getUniqueHash()};k.prototype.getUniqueHash=function(){return this._cacheId.toString()};return k}(u)})},"esri/arcade/ImmutablePointArray":function(){define(["require","exports","./polyfill/tsSupport/extends","./ImmutableArray","../geometry/Point"],function(g,e,t,u,l){return function(q){function k(a,d,n,b,h,c){a=q.call(this,a)||this;a._lazyPt=[];a._hasZ=!1;a._hasM=!1;a._spRef=d;a._hasZ=n;a._hasM=b;a._cacheId=h;a._partId=c;return a}t(k,q);k.prototype.get=function(a){if(void 0===
this._lazyPt[a]){var d=this._elements[a];if(void 0===d)return;var n=this._hasZ,b=this._hasM,h=null;h=n&&!b?new l(d[0],d[1],d[2],void 0,this._spRef):b&&!n?new l(d[0],d[1],void 0,d[2],this._spRef):n&&b?new l(d[0],d[1],d[2],d[3],this._spRef):new l(d[0],d[1],this._spRef);h.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+a.toString());this._lazyPt[a]=h}return this._lazyPt[a]};k.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof k?!1:
a.getUniqueHash()===this.getUniqueHash()};k.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return k}(u)})},"esri/arcade/featureset/support/shared":function(){define("require exports ../../polyfill/tsSupport/assign ../../polyfill/tsSupport/spreadarray ../../ArcadeDate ../../../geometry/Extent ../../../layers/Field".split(" "),function(g,e,t,u,l,q,k){function a(b){var h=null;b.domain&&(h="range"===b.domain.type?{type:"range",range:[b.domain.minValue,
b.domain.maxValue]}:{type:"codedValue",codedValues:b.domain.toJson().codedValues});return t(t({name:b.name,type:b.type,alias:b.alias},void 0!==b.length?{length:b.length}:{}),{editable:!0===b.editable,nullable:!0===b.nullable,domain:h})}function d(b){return b instanceof Date}function n(b){return b instanceof l.ArcadeDate}Object.defineProperty(e,"__esModule",{value:!0});e.stableStringify=e.extractServiceUrl=e.toEsriGeometryType=e.layerFieldEsriConstants=e.layerGeometryEsriRestConstants=e.layerGeometryEsriConstants=
e.callback=e.errback=e.defaultMaxRecords=e.sameGeomType=e.convertLinearUnitsToCode=e.shapeExtent=e.convertSquareUnitsToCode=e.cloneAttributes=e.equalityTest=e.isArcadeDate=e.isDate=e.isArray=e.isNumber=e.isBoolean=e.isString=e.IdState=e.esriFieldToJson=e.cloneField=e.FeatureServiceDatabaseType=void 0;(function(b){b[b.Standardised=0]="Standardised";b[b.StandardisedNoInterval=1]="StandardisedNoInterval";b[b.SqlServer=2]="SqlServer";b[b.Oracle=3]="Oracle";b[b.Postgres=4]="Postgres";b[b.PGDB=5]="PGDB";
b[b.FILEGDB=6]="FILEGDB";b[b.NotEvaluated=7]="NotEvaluated"})(e.FeatureServiceDatabaseType||(e.FeatureServiceDatabaseType={}));e.cloneField=function(b){return new k(a(b))};e.esriFieldToJson=a;(function(b){b[b.InFeatureSet=0]="InFeatureSet";b[b.NotInFeatureSet=1]="NotInFeatureSet";b[b.Unknown=2]="Unknown"})(e.IdState||(e.IdState={}));e.isString=function(b){return"string"===typeof b||b instanceof String};e.isBoolean=function(b){return"boolean"===typeof b};e.isNumber=function(b){return"number"===typeof b};
e.isArray=function(b){return b instanceof Array};e.isDate=d;e.isArcadeDate=n;e.equalityTest=function(b,h){return b===h?!0:(d(b)||n(b))&&(d(h)||n(h))?b.getTime()===h.getTime():!1};e.cloneAttributes=function(b){var h={},c;for(c in b)h[c]=b[c];return h};e.convertSquareUnitsToCode=function(b){if(null==b)return null;if("number"===typeof b)return b;switch(b.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109439;case "kilometers":case "kilometer":case "km":return 109414}return null};
e.shapeExtent=function(b){if(null==b)return null;switch(b.type){case "polygon":case "multipoint":case "polyline":return b.getExtent();case "point":return new q({xmin:b.x,ymin:b.y,xmax:b.x,ymax:b.y,spatialReference:b.spatialReference});case "extent":return b}return null};e.convertLinearUnitsToCode=function(b){if(null==b)return null;if("number"===typeof b||"number"===typeof b)return b;switch(b.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9093;case "kilometers":case "kilometer":case "km":return 9036}return null};
e.sameGeomType=function(b,h){return b===h||"point"===b&&"esriGeometryPoint"===h||"polyline"===b&&"esriGeometryPolyline"===h||"polygon"===b&&"esriGeometryPolygon"===h||"extent"===b&&"esriGeometryEnvelope"===h||"multipoint"===b&&"esriGeometryMultipoint"===h||"point"===h&&"esriGeometryPoint"===b||"polyline"===h&&"esriGeometryPolyline"===b||"polygon"===h&&"esriGeometryPolygon"===b||"extent"===h&&"esriGeometryEnvelope"===b||"multipoint"===h&&"esriGeometryMultipoint"===b?!0:!1};e.defaultMaxRecords=1E3;
e.errback=function(b){return function(h){b.reject(h)}};e.callback=function(b,h){return function(){try{b.apply(null,arguments)}catch(c){h.reject(c)}}};e.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};e.layerGeometryEsriRestConstants={point:"esriGeometryPoint",
polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};e.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger","long":"esriFieldTypeLong",
single:"esriFieldTypeSingle","double":"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",
esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};e.toEsriGeometryType=function(b){switch(b){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";
case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};e.extractServiceUrl=function(b){if(void 0===b)return"";b=b.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");b=b.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return b=b.split("?")[0]};e.stableStringify=function(b,h){h||(h={});"function"===typeof h&&(h={cmp:h});var c="boolean"===typeof h.cycles?h.cycles:!1,f=h.cmp&&function(r){return function(m){return function(v,z){return r({key:v,value:m[v]},{key:z,value:m[z]})}}}(h.cmp),
p=[];return function v(m){m&&m.toJson&&"function"===typeof m.toJson&&(m=m.toJson());if(void 0!==m){if("number"===typeof m)return isFinite(m)?""+m:"null";if("object"!==typeof m)return JSON.stringify(m);var z;if(Array.isArray(m)){var A="[";for(z=0;z<m.length;z++)z&&(A+=","),A+=v(m[z])||"null";return A+"]"}if(null===m)return"null";if(p.includes(m)){if(c)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var D=p.push(m)-1,E=Object.keys(m).sort(f&&f(m));A=
"";for(z=0;z<E.length;z++){var F=E[z],y=v(m[F]);y&&(A&&(A+=","),A+=JSON.stringify(F)+":"+y)}p.splice(D,1);return"{"+A+"}"}}(b)}})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./RangeDomain ./CodedValueDomain".split(" "),function(g,e,t,u,l,q,k){g=g(null,{declaredClass:"esri.layers.Field",constructor:function(a){if(a&&e.isObject(a)&&(this.name=a.name,this.type=a.type,this.alias=a.alias,this.length=a.length,this.editable=a.editable,this.nullable=
a.nullable,this.defaultValue=a.defaultValue,this.description=a.description?JSON.parse(a.description):null,this.isViewOverride=!!a.isViewOverride,(a=a.domain)&&e.isObject(a)))switch(a.type){case "range":this.domain=new q(a);break;case "codedValue":this.domain=new k(a)}},toJson:function(){return l.fixJson({name:this.name,type:this.type,alias:this.alias,length:this.length,editable:this.editable,nullable:this.nullable,defaultValue:this.defaultValue,description:this.description?JSON.stringify(this.description):
null,domain:this.domain?this.domain.toJson():null,isViewOverride:this.isViewOverride||void 0})},toJSON:function(){return this.toJson()}});e.setObject("layers.Field",g,u);return g})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(g,e,t,u,l,q){g=g([q],{declaredClass:"esri.layers.RangeDomain",constructor:function(k){k&&e.isObject(k)&&(this.minValue=k.range[0],this.maxValue=k.range[1])},toJson:function(){var k=this.inherited(arguments);
k.range=[this.minValue,this.maxValue];return l.fixJson(k)}});e.setObject("layers.RangeDomain",g,u);return g})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(g,e,t,u,l){g=g(null,{declaredClass:"esri.layers.Domain",constructor:function(q){q&&e.isObject(q)&&(this.name=q.name,this.type=q.type)},toJson:function(){return l.fixJson({name:this.name,type:this.type})}});e.setObject("layers.Domain",g,u);return g})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),
function(g,e,t,u,l,q,k){g=g([k],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(a){a&&e.isObject(a)&&(this.codedValues=a.codedValues)},getName:function(a){var d;t.some(this.codedValues,function(n){n.code==a&&(d=n.name);return!!d});return d},toJson:function(){var a=this.inherited(arguments);a.codedValues=e.clone(this.codedValues);return q.fixJson(a)}});e.setObject("layers.CodedValueDomain",g,l);return g})},"esri/arcade/ArcadeModule":function(){define(["require","exports"],function(g,
e){Object.defineProperty(e,"__esModule",{value:!0});e.ArcadeModule=void 0;g=function(){return function(t){this.source=t}}();e.ArcadeModule=g})},"esri/arcade/Feature":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils ./polyfill/maybe ./ArcadeDate ./executionError".split(" "),function(g,e,
t,u,l,q,k,a,d,n,b,h,c,f,p){return function(){function r(){this.arcadeDeclaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=null;this._datesfixed=!0;this.contextTimeReference=this.dateTimeReferenceFieldIndex=null;this.immutable=!0;this._datefields=null;this.immutable=!0}r.createFromGraphic=function(m,v){var z=new r;z.contextTimeReference=null!==v&&void 0!==v?v:null;z._geometry=c.isSome(m.geometry)?m.geometry:null;z.attributes=void 0===m.attributes?{}:null===m.attributes?{}:
m.attributes;m._sourceLayer?(z._layer=m._sourceLayer,z._datesfixed=!1):m._layer?(z._layer=m._layer,z._datesfixed=!1):m.layer&&"fields"in m.layer?(z._layer=m.layer,z._datesfixed=!1):m.sourceLayer&&"fields"in m.sourceLayer&&(z._layer=m.sourceLayer,z._datesfixed=!1);return z};r.createFromArcadeFeature=function(m){var v=new r;v._datesfixed=m._datesfixed;v.attributes=m.attributes;v._geometry=m._geometry;m._layer&&(v._layer=m._layer);v.dateTimeReferenceFieldIndex=m.dateTimeReferenceFieldIndex;v.contextTimeReference=
m.contextTimeReference;return v};r.createFromArcadeDictionary=function(m){var v=new r;v.attributes=m.field("attributes");null!==v.attributes?v.attributes instanceof k?(v.attributes=v.attributes.attributes,null===v.attributes&&(v.attributes={})):v.attributes={}:v.attributes={};v._geometry=m.field("geometry");null!==v._geometry&&(v._geometry instanceof k?v._geometry=r.parseGeometryFromDictionary(v._geometry):v._geometry instanceof n||(v._geometry=null));return v};r.createFromGraphicLikeObject=function(m,
v,z,A){void 0===z&&(z=null);var D=new r;D.contextTimeReference=null!==A&&void 0!==A?A:null;null===v&&(v={});D.attributes=v;D._geometry=m?m:null;D._layer=z;D._layer&&(D._datesfixed=!1);return D};r.prototype.repurposeFromGraphicLikeObject=function(m,v,z){void 0===z&&(z=null);null===v&&(v={});this.attributes=v;this._geometry=m?m:null;this._datesfixed=(this._layer=z)?!1:!0};Object.defineProperty(r.prototype,"layerPreferredTimeZone",{get:function(){var m,v;return null!==(v=null===(m=this.dateTimeReferenceFieldIndex)||
void 0===m?void 0:m.layerPreferredTimeZone)&&void 0!==v?v:""},enumerable:!1,configurable:!0});r.prototype.fieldSourceTimeZone=function(m){var v,z;return null!==(z=null===(v=this.dateTimeReferenceFieldIndex)||void 0===v?void 0:v.fieldTimeZone(m))&&void 0!==z?z:""};r.prototype.castToText=function(m){void 0===m&&(m=!1);var v="";!1===this._datesfixed&&this._fixDates();for(var z in this.attributes){""!==v&&(v+=",");var A=this.attributes[z];null==A?v+=JSON.stringify(z)+":null":d.isBoolean(A)||d.isNumber(A)||
d.isString(A)?v+=JSON.stringify(z)+":"+JSON.stringify(A):A instanceof n?v+=JSON.stringify(z)+":"+d.toStringExplicit(A):A instanceof a?v+=JSON.stringify(z)+":"+d.toStringExplicit(A,null,m):A instanceof Array?v+=JSON.stringify(z)+":"+d.toStringExplicit(A,null,m):A instanceof f.ArcadeDate?v=m?v+(JSON.stringify(z)+":"+JSON.stringify(A.getTime())):v+(JSON.stringify(z)+":"+A.stringify()):null!==A&&"object"===typeof A&&void 0!==A.castToText&&(v+=JSON.stringify(z)+":"+A.castToText(m))}return'{"geometry":'+
(null===this.geometry()?"null":d.toStringExplicit(this.geometry()))+',"attributes":{'+v+"}}"};r.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);else{for(var m=[],v=this._layer.fields,z=0;z<v.length;z++){var A=v[z],D=A.type;"date"!==D&&"esriFieldTypeDate"!==D||m.push(A.name)}this._datefields=m;0<m.length&&this._fixDateFields(m)}this._datesfixed=!0};r.prototype.isUnknownDateTimeField=function(m){var v;return"unknown"===(null===
(v=this.dateTimeReferenceFieldIndex)||void 0===v?void 0:v.fieldTimeZone(m))};r.prototype._fixDateFields=function(m){var v,z;this.attributes=l({},this.attributes);var A=null!==(z=null===(v=this.contextTimeReference)||void 0===v?void 0:v.timeZone)&&void 0!==z?z:"system";for(v=0;v<m.length;v++)if(z=this.attributes[m[v]],null!==z)if(void 0===z)for(var D in this.attributes){if(D.toLowerCase()===m[v].toLowerCase()){z=this.attributes[D];if(null!==z){var E=this.isUnknownDateTimeField(D);d.isDate(z)?this.attributes[D]=
z:this.attributes[D]=z instanceof Date?E?f.ArcadeDate.unknownDateJSToArcadeDate(z):f.ArcadeDate.dateJSAndZoneToArcadeDate(z,A):E?f.ArcadeDate.unknownEpochToArcadeDate(z):f.ArcadeDate.epochToArcadeDate(z,A)}break}}else E=this.isUnknownDateTimeField(m[v]),d.isDate(z)?this.attributes[m[v]]=z:this.attributes[m[v]]=z instanceof Date?E?f.ArcadeDate.unknownDateJSToArcadeDate(z):f.ArcadeDate.dateJSAndZoneToArcadeDate(z,A):E?f.ArcadeDate.unknownEpochToArcadeDate(z):f.ArcadeDate.epochToArcadeDate(z,A)};r.prototype.geometry=
function(){if(null===this._geometry)return this._geometry;this._geometry instanceof n||(this._geometry=h.fromJson(this._geometry));return this._geometry};r.prototype.field=function(m){!1===this._datesfixed&&this._fixDates();var v=this.attributes[m];if(void 0!==v)return v;v=m.toLowerCase();for(var z in this.attributes)if(z.toLowerCase()===v)return this.attributes[z];if(this._hasFieldDefinition(v))return null;throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.FieldNotFound,null,{key:m});};
r.prototype._hasFieldDefinition=function(m){if(null===this._layer)return!1;for(var v=0;v<this._layer.fields.length;v++)if(this._layer.fields[v].name.toLowerCase()===m)return!0;return!1};r.prototype.setField=function(m,v){if(this.immutable)throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.Immutable,null);v instanceof Date&&(v=this.isUnknownDateTimeField(m)?f.ArcadeDate.unknownDateJSToArcadeDate(v):f.ArcadeDate.dateJSToArcadeDate(v));if(!1===d.isSimpleType(v))throw new p.ArcadeExecutionError(null,
p.ExecutionErrorCodes.TypeNotAllowedInFeature,null);var z=m.toLowerCase();if(void 0===this.attributes[m])for(var A in this.attributes)if(A.toLowerCase()===z){this.attributes[A]=v;return}this.attributes[m]=v};r.prototype.hasField=function(m){var v=m.toLowerCase();if(void 0!==this.attributes[m])return!0;for(var z in this.attributes)if(z.toLowerCase()===v)return!0;return this._hasFieldDefinition(v)?!0:!1};r.prototype.keys=function(){var m=[],v={},z;for(z in this.attributes)m.push(z),v[z.toLowerCase()]=
1;if(null!==this._layer)for(z=0;z<this._layer.fields.length;z++){var A=this._layer.fields[z];1!==v[A.name.toLowerCase()]&&m.push(A.name)}return m=m.sort()};r.parseGeometryFromDictionary=function(m){m=r._convertDictionaryToJson(m,!0);void 0!==m.hasm&&(m.hasM=m.hasm,delete m.hasm);void 0!==m.hasz&&(m.hasZ=m.hasz,delete m.hasz);void 0!==m.spatialreference&&(m.spatialReference=m.spatialreference,delete m.spatialreference);void 0!==m.rings&&(m.rings=this._fixPathArrays(m.rings,!0===m.hasZ,!0===m.hasZ));
void 0!==m.paths&&(m.paths=this._fixPathArrays(m.paths,!0===m.hasZ,!0===m.hasM));void 0!==m.points&&(m.points=this._fixPointArrays(m.points,!0===m.hasZ,!0===m.hasM));return h.fromJson(m)};r._fixPathArrays=function(m,v,z){var A=[];if(m instanceof Array)for(var D=0;D<m.length;D++)A.push(this._fixPointArrays(m[D],v,z));else if(m instanceof a)for(D=0;D<m.length();D++)A.push(this._fixPointArrays(m.get(D),v,z));return A};r._fixPointArrays=function(m,v,z){var A=[];if(m instanceof Array)for(var D=0;D<m.length;D++){var E=
m[D];E instanceof b?v&&z?A.push([E.x,E.y,E.z,E.m]):v?A.push([E.x,E.y,E.z]):z?A.push([E.x,E.y,E.m]):A.push([E.x,E.y]):E instanceof a?A.push(E.toArray()):A.push(E)}else if(m instanceof a)for(D=0;D<m.length();D++)E=m.get(D),E instanceof b?v&&z?A.push([E.x,E.y,E.z,E.m]):v?A.push([E.x,E.y,E.z]):z?A.push([E.x,E.y,E.m]):A.push([E.x,E.y]):E instanceof a?A.push(E.toArray()):A.push(E);return A};r._convertDictionaryToJson=function(m,v){void 0===v&&(v=!1);var z={},A;for(A in m.attributes){var D=m.attributes[A];
D instanceof k&&(D=r._convertDictionaryToJson(D));v?z[A.toLowerCase()]=D:z[A]=D}return z};r.parseAttributesFromDictionary=function(m){var v={},z;for(z in m.attributes){var A=m.attributes[z];if(d.isSimpleType(A))v[z]=A;else throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.InvalidParameter,null);}return v};r.fromJson=function(m,v){var z=null;null!==m.geometry&&void 0!==m.geometry&&(z=h.fromJson(m.geometry));var A={};if(null!==m.attributes&&void 0!==m.attributes)for(var D in m.attributes){var E=
m.attributes[D];if(null===E)A[D]=E;else if(d.isString(E)||d.isNumber(E)||d.isBoolean(E)||d.isDate(E))A[D]=E;else throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.InvalidParameter,null);}return r.createFromGraphicLikeObject(z,A,null,null!==v&&void 0!==v?v:null)};r.prototype.fullSchema=function(){return this._layer};r.prototype.gdbVersion=function(){if(null===this._layer)return"";var m=this._layer.gdbVersion;return void 0===m?"":""===m&&this._layer.capabilities&&this._layer.capabilities.isVersioned?
"SDE.DEFAULT":m};r.prototype.castAsJson=function(m){var v,z,A={attributes:{},geometry:!0===(null===m||void 0===m?void 0:m.keepGeometryType)?this.geometry():null!==(z=null===(v=this.geometry())||void 0===v?void 0:v.toJson())&&void 0!==z?z:null},D;for(D in this.attributes)v=this.attributes[D],void 0!==v&&(A.attributes[D]=d.castAsJson(v,m));return A};r.prototype.castAsJsonAsync=function(m,v){void 0===m&&(m=null);return t(this,void 0,void 0,function(){return u(this,function(z){return[2,this.castAsJson(v)]})})};
return r}()})},"esri/arcade/polyfill/maybe":function(){define(["require","exports"],function(g,e){function t(u,l){if(null==u)throw Error(null!==l&&void 0!==l?l:"value is None");}Object.defineProperty(e,"__esModule",{value:!0});e.unwrapOrThrow=e.assertIsSome=e.isNone=e.isSome=e.none=void 0;e.none=null;e.isSome=function(u){return null!=u};e.isNone=function(u){return null==u};e.assertIsSome=t;e.unwrapOrThrow=function(u,l){t(u,l);return u}})},"esri/arcade/treeAnalysis":function(){define(["require","exports",
"./polyfill/tsSupport/awaiter","./polyfill/tsSupport/generator"],function(g,e,t,u){function l(p){return"string"===typeof p||p instanceof String}function q(p,r){if(p)for(var m=0;m<p.length;m++)k(p[m],r)}function k(p,r){if(p&&!1!==r(p))switch(p.type){case "ImportDeclaration":q(p.specifiers,r);k(p.source,r);break;case "ExportNamedDeclaration":k(p.declaration,r);break;case "ArrayExpression":q(p.elements,r);break;case "AssignmentExpression":case "BinaryExpression":k(p.left,r);k(p.right,r);break;case "BlockStatement":q(p.body,
r);break;case "Program":q(p.body,r);break;case "CallExpression":k(p.callee,r);q(p.arguments,r);break;case "ExpressionStatement":k(p.expression,r);break;case "ForInStatement":k(p.left,r);k(p.right,r);k(p.body,r);break;case "ForStatement":k(p.init,r);k(p.test,r);k(p.update,r);k(p.body,r);break;case "WhileStatement":k(p.test,r);k(p.body,r);break;case "FunctionDeclaration":k(p.id,r);q(p.params,r);k(p.body,r);break;case "IfStatement":k(p.test,r);k(p.consequent,r);k(p.alternate,r);break;case "LogicalExpression":k(p.left,
r);k(p.right,r);break;case "MemberExpression":k(p.object,r);k(p.property,r);break;case "ObjectExpression":q(p.properties,r);break;case "Property":k(p.key,r);k(p.value,r);break;case "ReturnStatement":k(p.argument,r);break;case "UnaryExpression":k(p.argument,r);break;case "UpdateExpression":k(p.argument,r);break;case "VariableDeclaration":q(p.declarations,r);break;case "VariableDeclarator":k(p.id,r);k(p.init,r);break;case "TemplateLiteral":q(p.expressions,r),q(p.quasis,r)}}function a(p,r){var m=!1,
v=r.toLowerCase();k(p,function(z){if(m)return!1;"Identifier"===z.type&&z.name&&z.name.toLowerCase()===v&&(m=!0);return!0});return m}function d(p){var r=[];k(p,function(m){"ImportDeclaration"===m.type&&m.source&&m.source.value&&r.push({libname:m.specifiers[0].local.name.toLowerCase(),source:m.source.value});return!0});return r}function n(p){var r=[];k(p,function(m){"CallExpression"===m.type&&"Identifier"===m.callee.type&&r.push(m.callee.name.toLowerCase());return!0});return r}Object.defineProperty(e,
"__esModule",{value:!0});e.scriptUsesFeatureSet=e.findScriptDependencies=e.findFunctionCalls=e.extractFunctionDeclaration=e.findExpectedFieldLiterals=e.findFieldLiterals=e.referencesFunction=e.findModuleImports=e.referencesMember=e.walk=e.addFunctionDeclaration=e.fullArcadeApiAsync=e.fullArcadeApiSync=void 0;g={all:{min:2,max:2},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,
max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,
max:1},includes:{min:2,max:2},array:{min:1,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,
max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:2},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,
max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,
max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},
contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,
max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,max:1},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1}};e.fullArcadeApiSync={functionDefinitions:new Map,
constantDefinitions:new Map};e.fullArcadeApiAsync={functionDefinitions:new Map,constantDefinitions:new Map};t=0;for(u=["pi","infinity"];t<u.length;t++){var b=u[t];e.fullArcadeApiAsync.constantDefinitions.set(b,{type:"constant"});e.fullArcadeApiSync.constantDefinitions.set(b,{type:"constant"})}e.fullArcadeApiAsync.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},
{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"newline",type:"constant"}]});e.fullArcadeApiSync.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"newline",type:"constant"}]});for(var h in g)t=g[h],e.fullArcadeApiAsync.functionDefinitions.set(h,{overloads:[{type:"function",
parametersInfo:{min:t.min,max:t.max}}]}),e.fullArcadeApiSync.functionDefinitions.set(h,{overloads:[{type:"function",parametersInfo:{min:t.min,max:t.max}}]});var c="featureset featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl getfeatureset getuser attachments featuresetbyportalitem".split(" "),f="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length length3d lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple convexhull simplify multiparttosinglepart".split(" ");
e.addFunctionDeclaration=function(p,r){var m;r="sync"===r?e.fullArcadeApiSync:e.fullArcadeApiAsync;r.functionDefinitions.has(p.name.toLowerCase())?null===(m=r.functionDefinitions.get(p.name.toLowerCase()))||void 0===m?void 0:m.overloads.push({type:"function",parametersInfo:{min:p.min,max:p.max}}):r.functionDefinitions.set(p.name.toLowerCase(),{overloads:[{type:"function",parametersInfo:{min:p.min,max:p.max}}]})};e.walk=k;e.referencesMember=a;e.findModuleImports=d;e.referencesFunction=function(p,r){var m=
!1,v=r.toLowerCase();k(p,function(z){return m?!1:"CallExpression"===z.type&&"Identifier"===z.callee.type&&z.callee.name&&z.callee.name.toLowerCase()===v?(m=!0,!1):!0});return m};e.findFieldLiterals=function(p){var r=[];k(p,function(m){var v;if("MemberExpression"!==m.type||"Identifier"!==m.object.type)return!0;!1===m.computed&&m.object&&m.object.name&&m.property&&"Identifier"===m.property.type&&m.property.name?r.push(m.object.name.toLowerCase()+"."+m.property.name.toLowerCase()):m.object&&m.object.name&&
m.property&&"Literal"===m.property.type&&"string"===typeof m.property.value&&r.push(m.object.name.toLowerCase()+"."+(null===(v=m.property.value)||void 0===v?void 0:v.toString().toLowerCase()));return!1});return r};e.findExpectedFieldLiterals=function(p){var r=[];k(p,function(m){if("CallExpression"===m.type){if("Identifier"===m.callee.type&&"expects"===m.callee.name.toLowerCase()){var v="";for(var z=0;z<(m.arguments||[]).length;z++)0===z?"Identifier"===m.arguments[z].type&&(v=m.arguments[z].name.toLowerCase()):
v&&"Literal"===m.arguments[z].type&&l(m.arguments[z].value)&&r.push(v+"."+m.arguments[z].value.toLowerCase());return!1}if("Identifier"===m.callee.type&&["domainname","domaincode","domain","haskey"].includes(m.callee.name.toLowerCase())&&2<=m.arguments.length)return v="","Identifier"===m.arguments[0].type&&(v=m.arguments[0].name.toLowerCase()),v&&"Literal"===m.arguments[1].type&&l(m.arguments[1].value)&&r.push(v+"."+m.arguments[1].value.toLowerCase()),!1}if("MemberExpression"!==m.type||"Identifier"!==
m.object.type)return!0;!1===m.computed&&m.object&&m.object.name&&m.property&&"Identifier"===m.property.type&&m.property.name?r.push(m.object.name.toLowerCase()+"."+m.property.name.toLowerCase()):m.object&&m.object.name&&m.property&&"Literal"===m.property.type&&"string"===typeof m.property.value&&r.push(m.object.name.toLowerCase()+"."+(null===(v=m.property.value)||void 0===v?void 0:v.toString().toLowerCase()));return!1});return r};e.extractFunctionDeclaration=function(p,r){var m=[];if(void 0!==r.params&&
null!==r.params)for(var v=0;v<r.params.length;v++)m.push("any");return{name:p,return:"any",params:m}};e.findFunctionCalls=n;e.findScriptDependencies=function(p,r){void 0===r&&(r=[]);var m=null;if(void 0===p.usesFeatureSet){null===m&&(m=n(p));p.usesFeatureSet=!1;for(var v=0;v<m.length;v++)c.includes(m[v])&&(p.usesFeatureSet=!0,p.isAsync=!0);if(!1===p.usesFeatureSet&&r&&0<r.length)for(v=0;v<r.length;v++)if(a(p,r[v])){p.usesFeatureSet=!0;p.isAsync=!0;break}}void 0===p.usesModules&&(p.usesModules=!1,
0<d(p).length&&(p.usesModules=!0));if(void 0===p.usesGeometry)for(p.usesGeometry=!1,null===m&&(m=n(p)),v=0;v<m.length;v++)f.includes(m[v])&&(p.usesGeometry=!0)};e.scriptUsesFeatureSet=function(p){p=n(p);for(var r=0;r<p.length;r++)if(c.includes(p[r]))return!0;return!1}})},"esri/arcade/functions/array":function(){define("require exports ../polyfill/tsSupport/awaiter ../polyfill/tsSupport/generator ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../executionError ../ImmutableArray ../languageUtils ../polyfill/promiseUtils".split(" "),
function(g,e,t,u,l,q,k,a,d,n){Object.defineProperty(e,"__esModule",{value:!0});e.registerFunctions=void 0;e.registerFunctions=function(b){function h(m,v,z){if(m instanceof a)return m.toArray();if(d.isArray(m))return m;throw new k.ArcadeExecutionError(v,k.ExecutionErrorCodes.InvalidParameter,z);}function c(m,v){var z=m.length,A=Math.floor(z/2);if(0===z)return[];if(1===z)return[m[0]];var D=c(m.slice(0,A),v);m=c(m.slice(A,z),v);for(z=[];0<D.length||0<m.length;)0<D.length&&0<m.length?(A=v(D[0],m[0]),
isNaN(A)&&(A=0),0>=A?(z.push(D[0]),D=D.slice(1)):(z.push(m[0]),m=m.slice(1))):0<D.length?(z.push(D[0]),D=D.slice(1)):0<m.length&&(z.push(m[0]),m=m.slice(1));return z}function f(m,v){return t(this,void 0,void 0,function(){var z,A,D,E;return u(this,function(F){switch(F.label){case 0:return z=m.length,A=Math.floor(z/2),0===z?[2,[]]:1===z?[2,[m[0]]]:[4,f(m.slice(0,A),v)];case 1:return E=[F.sent()],[4,f(m.slice(A,z),v)];case 2:return D=E.concat([F.sent()]),[2,p(D[0],D[1],v,[])]}})})}function p(m,v,z,A){return t(this,
void 0,void 0,function(){var D,E;return u(this,function(F){switch(F.label){case 0:return D=A,0<m.length||0<v.length?0<m.length&&0<v.length?[4,z(m[0],v[0])]:[3,2]:[3,4];case 1:return E=F.sent(),isNaN(E)&&(E=1),0>=E?(D.push(m[0]),m=m.slice(1)):(D.push(v[0]),v=v.slice(1)),[2,p(m,v,z,A)];case 2:if(0<m.length)return D.push(m[0]),m=m.slice(1),[2,p(m,v,z,A)];if(0<v.length)return D.push(v[0]),v=v.slice(1),[2,p(m,v,z,A)];F.label=3;case 3:return[3,5];case 4:return[2,A];case 5:return[2]}})})}function r(m,v,
z,A){d.pcCheck(z,1,2,m,v);var D=z[0];d.isImmutableArray(D)&&(D=D.toArray());if(!1===d.isArray(D))throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.InvalidParameter,v);if(1<z.length){if(!1===d.isFunctionParameter(z[1]))throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.InvalidParameter,v);var E=D,F=z[1].createFunction(m);return A?f(E,F):E=c(E,function(y,x){return F(y,x)})}m=D;if(0===m.length)return[];z={};for(A=0;A<m.length;A++)v=d.getType(m[A]),""!==v&&(z[v]=!0);if(!0===z.Array||!0===
z.Dictionary||!0===z.Feature||!0===z.Point||!0===z.Polygon||!0===z.Polyline||!0===z.Multipoint||!0===z.Extent||!0===z.Function)return m.slice(0);A=0;v="";for(E in z)A++,v=E;return m=1<A||"String"===v?c(m,function(y,x){if(null===y||void 0===y||y===d.voidOperation)return null===x||void 0===x||x===d.voidOperation?0:1;if(null===x||void 0===x||x===d.voidOperation)return-1;y=d.toString(y);x=d.toString(x);return y<x?-1:y===x?0:1}):"Number"===v?c(m,function(y,x){return y-x}):"Boolean"===v?c(m,function(y,
x){return y===x?0:x?-1:1}):"Date"===v?c(m,function(y,x){return x-y}):m.slice(0)}b.functions.array=function(m,v){return b.standardFunction(m,v,function(z,A,D){d.pcCheck(D,1,2,m,v);z=d.toNumber(D[0]);if(isNaN(z)||!1===d.isInteger(z))throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.InvalidParameter,v);D=d.defaultUndefined(D[1],null);z=Array(z);z.fill(D);return z})};b.functions.front=function(m,v){return b.standardFunction(m,v,function(z,A,D){d.pcCheck(D,1,1,m,v);if(d.isImmutableArray(D[0])){if(0>=
D[0].length())throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.OutOfBounds,v);return D[0].get(0)}if(d.isArray(D[0])){if(0>=D[0].length)throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.OutOfBounds,v);return D[0][0]}throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.InvalidParameter,v);})};b.functions.back=function(m,v){return b.standardFunction(m,v,function(z,A,D){d.pcCheck(D,1,1,m,v);if(d.isImmutableArray(D[0])){if(0>=D[0].length())throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.OutOfBounds,
v);return D[0].get(D[0].length()-1)}if(d.isArray(D[0])){if(0>=D[0].length)throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.OutOfBounds,v);return D[0][D[0].length-1]}throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.InvalidParameter,v);})};b.functions.push=function(m,v){return b.standardFunction(m,v,function(z,A,D){d.pcCheck(D,1,2,m,v);if(d.isArray(D[0]))return D[0][D[0].length]=D[1],D[0].length;throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.InvalidParameter,v);})};b.functions.pop=
function(m,v){return b.standardFunction(m,v,function(z,A,D){d.pcCheck(D,1,1,m,v);if(d.isArray(D[0])){if(0>=D[0].length)throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.OutOfBounds,v);z=D[0][D[0].length-1];--D[0].length;return z}throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.InvalidParameter,v);})};b.functions.erase=function(m,v){return b.standardFunction(m,v,function(z,A,D){d.pcCheck(D,2,2,m,v);if(d.isArray(D[0])){z=d.toNumber(D[1]);if(isNaN(z)||!1===d.isInteger(z))throw new k.ArcadeExecutionError(m,
k.ExecutionErrorCodes.InvalidParameter,v);D=D[0];if(0>=D.length)throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.OutOfBounds,v);0>z&&(z=D.length+z);if(0>z)throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.OutOfBounds,v);if(z>=D.length)throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.OutOfBounds,v);D.splice(z,1);return d.voidOperation}throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.InvalidParameter,v);})};b.functions.insert=function(m,v){return b.standardFunction(m,
v,function(z,A,D){d.pcCheck(D,3,3,m,v);if(d.isArray(D[0])){z=d.toNumber(D[1]);if(isNaN(z)||!1===d.isInteger(z))throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.InvalidParameter,v);A=D[2];D=D[0];if(z>D.length)throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.OutOfBounds,v);if(0>z&&z<-1*D.length)throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.OutOfBounds,v);if(z===D.length)return D[z]=A,d.voidOperation;D.splice(z,0,A);return d.voidOperation}throw new k.ArcadeExecutionError(m,
k.ExecutionErrorCodes.InvalidParameter,v);})};b.functions.resize=function(m,v){return b.standardFunction(m,v,function(z,A,D){d.pcCheck(D,2,3,m,v);if(d.isArray(D[0])){A=d.toNumber(D[1]);if(isNaN(A)||!1===d.isInteger(A))throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.InvalidParameter,v);if(0>A)throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.InvalidParameter,v);z=d.defaultUndefined(D[2],null);D=D[0];if(D.length>=A)return D.length=A,d.voidOperation;var E=D.length;D.length=A;for(A=E;A<
D.length;A++)D[A]=z;return d.voidOperation}throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.InvalidParameter,v);})};b.functions.includes=function(m,v){return b.standardFunction(m,v,function(z,A,D){d.pcCheck(D,2,2,m,v);if(d.isArray(D[0])){var E=D[1];z=D[0];return-1<z.findIndex(function(y){return d.equalityTest(y,E)})?!0:!1}if(d.isImmutableArray(D[0])){var F=D[1];z=D[0].toArray();return-1<z.findIndex(function(y){return d.equalityTest(y,F)})?!0:!1}throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.InvalidParameter,
v);})};b.functions.slice=function(m,v){return b.standardFunction(m,v,function(z,A,D){d.pcCheck(D,1,3,m,v);if(d.isArray(D[0])){z=d.toNumber(d.defaultUndefined(D[1],0));A=d.toNumber(d.defaultUndefined(D[2],D[0].length));if(isNaN(z)||!1===d.isInteger(z))throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.InvalidParameter,v);if(isNaN(A)||!1===d.isInteger(A))throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.InvalidParameter,v);var E=D[0];return E.slice(z,A)}if(d.isImmutableArray(D[0])){E=D[0];
z=d.toNumber(d.defaultUndefined(D[1],0));A=d.toNumber(d.defaultUndefined(D[2],E.length()));if(isNaN(z)||!1===d.isInteger(z))throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.InvalidParameter,v);if(isNaN(A)||!1===d.isInteger(A))throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.InvalidParameter,v);return E.toArray().slice(z,A)}throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.InvalidParameter,v);})};b.functions.splice=function(m,v){return b.standardFunction(m,v,function(z,A,D){z=
[];for(A=0;A<D.length;A++)d.isArray(D[A])?z.push.apply(z,D[A]):d.isImmutableArray(D[A])?z.push.apply(z,D[A].toArray()):z.push(D[A]);return z})};b.functions.top=function(m,v){return b.standardFunction(m,v,function(z,A,D){d.pcCheck(D,2,2,m,v);if(d.isArray(D[0]))return d.toNumber(D[1])>=D[0].length?D[0].slice(0):D[0].slice(0,d.toNumber(D[1]));if(d.isImmutableArray(D[0]))return d.toNumber(D[1])>=D[0].length()?D[0].slice(0):D[0].slice(0,d.toNumber(D[1]));throw new k.ArcadeExecutionError(m,k.ExecutionErrorCodes.InvalidParameter,
v);})};b.functions.first=function(m,v){return b.standardFunction(m,v,function(z,A,D){d.pcCheck(D,1,1,m,v);return d.isArray(D[0])?0===D[0].length?null:D[0][0]:d.isImmutableArray(D[0])?0===D[0].length()?null:D[0].get(0):null})};"sync"===b.mode&&(b.functions.sort=function(m,v){return b.standardFunction(m,v,function(z,A,D){return r(m,v,D,!1)})},b.functions.any=function(m,v){return b.standardFunction(m,v,function(z,A,D){d.pcCheck(D,2,2,m,v);z=D[1].createFunction(m);A=0;for(D=h(D[0],m,v);A<D.length;A++){var E=
z(D[A]);if(d.isBoolean(E)&&!0===E)return!0}return!1})},b.functions.all=function(m,v){return b.standardFunction(m,v,function(z,A,D){d.pcCheck(D,2,2,m,v);z=D[1].createFunction(m);A=0;for(D=h(D[0],m,v);A<D.length;A++)if(!0!==z(D[A]))return!1;return!0})},b.functions.none=function(m,v){return b.standardFunction(m,v,function(z,A,D){d.pcCheck(D,2,2,m,v);z=D[1].createFunction(m);A=0;for(D=h(D[0],m,v);A<D.length;A++)if(!0===z(D[A]))return!1;return!0})},b.functions.reduce=function(m,v){return b.standardFunction(m,
v,function(z,A,D){d.pcCheck(D,2,3,m,v);var E=D[1].createFunction(m);z=h(D[0],m,v);return 2===D.length?0===z.length?null:z.reduce(function(F,y){F=E(F,y);return F=void 0!==F&&F!==d.voidOperation?F:null}):z.reduce(function(F,y){F=E(F,y);return F=void 0!==F&&F!==d.voidOperation?F:null},D[2])})},b.functions.map=function(m,v){return b.standardFunction(m,v,function(z,A,D){d.pcCheck(D,2,2,m,v);z=D[1].createFunction(m);A=[];var E=0;for(D=h(D[0],m,v);E<D.length;E++){var F=z(D[E]);void 0!==F&&F!==d.voidOperation?
A.push(F):A.push(null)}return A})},b.functions.filter=function(m,v){return b.standardFunction(m,v,function(z,A,D){d.pcCheck(D,2,2,m,v);z=D[1].createFunction(m);A=[];var E=0;for(D=h(D[0],m,v);E<D.length;E++){var F=D[E];!0===z(F)&&A.push(F)}return A})});"async"===b.mode&&(b.functions.sort=function(m,v){return b.standardFunctionAsync(m,v,function(z,A,D){return r(m,v,D,!0)})},b.functions.any=function(m,v){var z=this;return b.standardFunctionAsync(m,v,function(A,D,E){return t(z,void 0,void 0,function(){var F,
y,x,w,C,B,I;return u(this,function(N){switch(N.label){case 0:d.pcCheck(E,2,2,m,v),F=E[1].createFunction(m),y=h(E[0],m,v),x=0,w=y,N.label=1;case 1:if(!(x<w.length))return[3,7];C=w[x];return[4,F(C)];case 2:return B=N.sent(),I=null,n.isPromiseLike(I)?[4,B]:[3,4];case 3:return I=N.sent(),[3,5];case 4:I=B,N.label=5;case 5:if(d.isBoolean(I)&&!0===I)return[2,!0];N.label=6;case 6:return x++,[3,1];case 7:return[2,!1]}})})})},b.functions.all=function(m,v){var z=this;return b.standardFunctionAsync(m,v,function(A,
D,E){return t(z,void 0,void 0,function(){var F,y,x,w,C,B,I;return u(this,function(N){switch(N.label){case 0:d.pcCheck(E,2,2,m,v),F=E[1].createFunction(m),y=h(E[0],m,v),x=0,w=y,N.label=1;case 1:if(!(x<w.length))return[3,7];C=w[x];return[4,F(C)];case 2:return B=N.sent(),I=null,n.isPromiseLike(I)?[4,B]:[3,4];case 3:return I=N.sent(),[3,5];case 4:I=B,N.label=5;case 5:if(!0!==I)return[2,!1];N.label=6;case 6:return x++,[3,1];case 7:return[2,!0]}})})})},b.functions.none=function(m,v){var z=this;return b.standardFunctionAsync(m,
v,function(A,D,E){return t(z,void 0,void 0,function(){var F,y,x,w,C,B,I;return u(this,function(N){switch(N.label){case 0:d.pcCheck(E,2,2,m,v),F=E[1].createFunction(m),y=h(E[0],m,v),x=0,w=y,N.label=1;case 1:if(!(x<w.length))return[3,7];C=w[x];return[4,F(C)];case 2:return B=N.sent(),I=null,n.isPromiseLike(I)?[4,B]:[3,4];case 3:return I=N.sent(),[3,5];case 4:I=B,N.label=5;case 5:if(!0===I)return[2,!1];N.label=6;case 6:return x++,[3,1];case 7:return[2,!0]}})})})},b.functions.filter=function(m,v){var z=
this;return b.standardFunctionAsync(m,v,function(A,D,E){return t(z,void 0,void 0,function(){var F,y,x,w,C,B,I,N;return u(this,function(V){switch(V.label){case 0:d.pcCheck(E,2,2,m,v),F=E[1].createFunction(m),y=h(E[0],m,v),x=[],w=0,C=y,V.label=1;case 1:if(!(w<C.length))return[3,7];B=C[w];return[4,F(B)];case 2:return I=V.sent(),N=null,n.isPromiseLike(N)?[4,I]:[3,4];case 3:return N=V.sent(),[3,5];case 4:N=I,V.label=5;case 5:!0===N&&x.push(B),V.label=6;case 6:return w++,[3,1];case 7:return[2,x]}})})})},
b.functions.reduce=function(m,v){var z=this;return b.standardFunctionAsync(m,v,function(A,D,E){d.pcCheck(E,2,3,m,v);var F=E[1].createFunction(m);A=h(E[0],m,v);D=null;if(2<E.length)E=d.defaultUndefined(E[2],null),D=A.reduce(function(y,x){return t(z,void 0,void 0,function(){var w;return u(this,function(C){switch(C.label){case 0:return[4,y];case 1:w=C.sent();if(void 0===w||w===d.voidOperation)w=null;return[2,F(w,x)]}})})},Promise.resolve(E));else{if(0===A.length)return null;D=A.reduce(function(y,x,w){return t(z,
void 0,void 0,function(){var C;return u(this,function(B){switch(B.label){case 0:return 1>=w?[2,F(y,x)]:[4,y];case 1:C=B.sent();if(void 0===C||C===d.voidOperation)C=null;return[2,F(C,x)]}})})})}return D.then(function(y){return void 0!==y&&y!==d.voidOperation?y:null})})},b.functions.map=function(m,v){var z=this;return b.standardFunctionAsync(m,v,function(A,D,E){return t(z,void 0,void 0,function(){var F,y,x,w,C,B,I,N;return u(this,function(V){switch(V.label){case 0:d.pcCheck(E,2,2,m,v),F=E[1].createFunction(m),
y=h(E[0],m,v),x=[],w=0,C=y,V.label=1;case 1:if(!(w<C.length))return[3,7];B=C[w];return[4,F(B)];case 2:return I=V.sent(),N=null,n.isPromiseLike(N)?[4,I]:[3,4];case 3:return N=V.sent(),[3,5];case 4:N=I,V.label=5;case 5:void 0!==N&&N!==d.voidOperation?x.push(N):x.push(null),V.label=6;case 6:return w++,[3,1];case 7:return[2,x]}})})})})}})},"esri/arcade/functions/date":function(){define("require exports ../ArcadeDate ../languageUtils ../executionError ../../libs/luxon/luxon dojo/_base/kernel".split(" "),
function(g,e,t,u,l,q,k){function a(h){return null===h?h:!1===h.isValid?null:h}function d(h,c){return""===h||"default"===h.toLowerCase().trim()?u.defaultTimeZone(c):h}Object.defineProperty(e,"__esModule",{value:!0});e.registerFunctions=void 0;var n=[0,31,59,90,120,151,181,212,243,273,304,334],b=[0,31,60,91,121,152,182,213,244,274,305,335];e.registerFunctions=function(h,c){h.today=function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,0,0,f,p);r=new Date;r.setHours(0,0,0,0);return t.ArcadeDate.dateJSAndZoneToArcadeDate(r,
u.defaultTimeZone(f))})};h.changetimezone=function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,2,2,f,p);r=u.toDate(v[0],u.defaultTimeZone(f));if(null===r)return null;v=t.ArcadeDate.arcadeDateAndZoneToArcadeDate(r,d(u.toString(v[1]),f));return!1===v.isValid?null:v})};h.timezone=function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,1,2,f,p);r=u.toDate(v[0],u.defaultTimeZone(f));if(null===r)return null;r=r.timeZone;return"system"===r?t.ArcadeDate.systemTimeZoneCanonicalName:r})};h.timezoneoffset=
function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,1,1,f,p);r=u.toDate(v[0],u.defaultTimeZone(f));return null===r?null:r.timeZoneOffset})};h.now=function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,0,0,f,p);r=t.ArcadeDate.nowToArcadeDate(u.defaultTimeZone(f));return!1===r.isValid?null:r})};h.timestamp=function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,0,0,f,p);r=t.ArcadeDate.nowUTCToArcadeDate();return!1===r.isValid?null:r})};h.toutc=function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,
1,1,f,p);r=u.toDate(v[0],u.defaultTimeZone(f));return null===r?null:r.toUTC()})};h.tolocal=function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,1,1,f,p);r=u.toDate(v[0],u.defaultTimeZone(f));return null===r?null:r.toLocal()})};h.day=function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,1,1,f,p);r=u.toDate(v[0],u.defaultTimeZone(f));return null===r?NaN:r.day})};h.month=function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,1,1,f,p);r=u.toDate(v[0],u.defaultTimeZone(f));return null===r?NaN:r.monthJS})};
h.year=function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,1,1,f,p);r=u.toDate(v[0],u.defaultTimeZone(f));return null===r?NaN:r.year})};h.hour=function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,1,1,f,p);r=u.toDate(v[0],u.defaultTimeZone(f));return null===r?NaN:r.hour})};h.second=function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,1,1,f,p);r=u.toDate(v[0],u.defaultTimeZone(f));return null===r?NaN:r.second})};h.millisecond=function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,1,1,f,p);r=
u.toDate(v[0],u.defaultTimeZone(f));return null===r?NaN:r.millisecond})};h.minute=function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,1,1,f,p);r=u.toDate(v[0],u.defaultTimeZone(f));return null===r?NaN:r.minute})};h.week=function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,1,2,f,p);m=u.toDate(v[0],u.defaultTimeZone(f));if(null===m)return NaN;v=u.toNumber(u.defaultUndefined(v[1],0));if(0>v||6<v)throw new l.ArcadeExecutionError(f,l.ExecutionErrorCodes.InvalidParameter,p);r=m.dayOfWeekJS;var z=m.year;
m=m.day+(0!==z%4||0===z%100&&0!==z%400?n:b)[m.monthJS]-1;z=Math.floor(m/7);return r-v+(0>r-v?7:0)<m-7*z?z+1:z})};h.weekday=function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,1,1,f,p);r=u.toDate(v[0],u.defaultTimeZone(f));return null===r?NaN:r.dayOfWeekJS})};h.isoweekday=function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,1,1,f,p);r=u.toDate(v[0],u.defaultTimeZone(f));return null===r?NaN:r.dayOfWeekISO})};h.isomonth=function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,1,1,f,p);r=u.toDate(v[0],
u.defaultTimeZone(f));return null===r?NaN:r.monthISO})};h.isoweek=function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,1,1,f,p);r=u.toDate(v[0],u.defaultTimeZone(f));return null===r?NaN:r.weekISO})};h.isoyear=function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,1,1,f,p);r=u.toDate(v[0],u.defaultTimeZone(f));return null===r?NaN:r.yearISO})};h.date=function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,0,8,f,p);if(3===v.length)return a(t.ArcadeDate.fromParts(u.toNumber(v[0]),u.toNumber(v[1])+1,
u.toNumber(v[2]),0,0,0,0,u.defaultTimeZone(f)));if(4===v.length)return a(t.ArcadeDate.fromParts(u.toNumber(v[0]),u.toNumber(v[1])+1,u.toNumber(v[2]),u.toNumber(v[3]),0,0,0,u.defaultTimeZone(f)));if(5===v.length)return a(t.ArcadeDate.fromParts(u.toNumber(v[0]),u.toNumber(v[1])+1,u.toNumber(v[2]),u.toNumber(v[3]),u.toNumber(v[4]),0,0,u.defaultTimeZone(f)));if(6===v.length)return a(t.ArcadeDate.fromParts(u.toNumber(v[0]),u.toNumber(v[1])+1,u.toNumber(v[2]),u.toNumber(v[3]),u.toNumber(v[4]),u.toNumber(v[5]),
0,u.defaultTimeZone(f)));if(7===v.length)return a(t.ArcadeDate.fromParts(u.toNumber(v[0]),u.toNumber(v[1])+1,u.toNumber(v[2]),u.toNumber(v[3]),u.toNumber(v[4]),u.toNumber(v[5]),u.toNumber(v[6]),u.defaultTimeZone(f)));if(8===v.length)return a(t.ArcadeDate.fromParts(u.toNumber(v[0]),u.toNumber(v[1])+1,u.toNumber(v[2]),u.toNumber(v[3]),u.toNumber(v[4]),u.toNumber(v[5]),u.toNumber(v[6]),d(u.toString(v[7]),f)));if(2===v.length){r=u.toString(v[1]);if(""===r)return null;r=u.standardiseDateFormat(r);m=void 0;
m="X"===r?q.DateTime.fromSeconds(u.toNumber(v[0])):"x"===r?q.DateTime.fromMillis(u.toNumber(v[0])):q.DateTime.fromFormat(u.toString(v[0]),r,{locale:k.locale,numberingSystem:"latn"});return m.isValid?t.ArcadeDate.dateTimeToArcadeDate(m):null}if(1===v.length){if(u.isString(v[0])){if(""===v[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(v[0]))return u.toDate(v[0]+"-01-01",u.defaultTimeZone(f))}r=u.toNumber(v[0]);return!1===isNaN(r)?(m=q.DateTime.fromMillis(r),
m.isValid?t.ArcadeDate.dateTimeAndZoneToArcadeDate(m,u.defaultTimeZone(f)):null):u.toDate(v[0],u.defaultTimeZone(f))}return 0===v.length?t.ArcadeDate.nowToArcadeDate(u.defaultTimeZone(f)):null})};h.datediff=function(f,p){return c(f,p,function(r,m,v){u.pcCheck(v,2,4,f,p);r=u.toDate(v[0],u.defaultTimeZone(f));m=u.toDate(v[1],u.defaultTimeZone(f));if(null===r||null===m)return NaN;var z=u.defaultUndefined(v[3],"");""!==z&&null!==z?(z=u.toString(z),r=t.ArcadeDate.arcadeDateAndZoneToArcadeDate(r,z),m=t.ArcadeDate.arcadeDateAndZoneToArcadeDate(m,
z)):r.timeZone!==m.timeZone&&(r.isUnknownTimeZone?r=t.ArcadeDate.arcadeDateAndZoneToArcadeDate(r,m.timeZone):m=t.ArcadeDate.arcadeDateAndZoneToArcadeDate(m,r.timeZone));switch(u.toString(v[2]).toLowerCase()){case "days":case "day":case "d":return r.diff(m,"days");case "months":case "month":return r.diff(m,"months");case "minutes":case "minute":case "m":return"M"===v[2]?r.diff(m,"months"):r.diff(m,"minutes");case "seconds":case "second":case "s":return r.diff(m,"seconds");case "milliseconds":case "millisecond":case "ms":return r.diff(m);
case "hours":case "hour":case "h":return r.diff(m,"hours");case "years":case "year":case "y":return r.diff(m,"years");default:return r.diff(m)}})};h.dateadd=function(f,p){return c(f,p,function(r,m,v){var z;u.pcCheck(v,2,3,f,p);r=u.toDate(v[0],u.defaultTimeZone(f));if(null===r)return null;m=u.toNumber(v[1]);if(isNaN(m))return r;var A="milliseconds";switch(u.toString(v[2]).toLowerCase()){case "days":case "day":case "d":A="days";m=u.absRound(m);break;case "months":case "month":A="months";m=u.absRound(m);
break;case "minutes":case "minute":case "m":A="M"===v[2]?"months":"minutes";break;case "seconds":case "second":case "s":A="seconds";break;case "milliseconds":case "millisecond":case "ms":A="milliseconds";break;case "hours":case "hour":case "h":A="hours";break;case "years":case "year":case "y":A="years"}return r.plus((z={},z[A]=m,z))})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils ../executionError ../ImmutablePathArray".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h,c,f,p,r,m,v){function z(E){return E&&"esri.arcade.Feature"===E.arcadeDeclaredClass}function A(E,F,y,x,w){void 0===w&&(w=1);F=F.toLowerCase();switch(F){case "hasz":return E=E.hasZ,void 0===E?!1:E;case "hasm":return E=E.hasM,void 0===E?!1:E;case "spatialreference":return F=E.spatialReference._arcadeCacheId,void 0===F&&(y=!0,Object.freeze&&Object.isFrozen(E.spatialReference)&&(y=!1),y&&(D++,F=E.spatialReference._arcadeCacheId=D)),E=new l({wkt:E.spatialReference.wkt,wkid:E.spatialReference.wkid}),
void 0!==F&&(E._arcadeCacheId="SPREF"+F.toString()),E}switch(E.type){case "extent":switch(F){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return E=E[F],void 0!==E?E:null;case "type":return"Extent"}break;case "polygon":switch(F){case "rings":return F=E.getCacheValue("_arcadeCacheId"),void 0===F&&(D++,F=D,E.setCacheValue("_arcadeCacheId",F)),E=new v(E.rings,E.spatialReference,!0===E.hasZ,!0===E.hasM,F);case "type":return"Polygon"}break;case "point":switch(F){case "x":case "y":case "z":case "m":return void 0!==
E[F]?E[F]:null;case "type":return"Point"}break;case "polyline":switch(F){case "paths":return F=E.getCacheValue("_arcadeCacheId"),void 0===F&&(D++,F=D,E.setCacheValue("_arcadeCacheId",F)),E=new v(E.paths,E.spatialReference,!0===E.hasZ,!0===E.hasM,F);case "type":return"Polyline"}break;case "multipoint":switch(F){case "points":return F=E.getCacheValue("_arcadeCacheId"),void 0===F&&(D++,F=D,E.setCacheValue("_arcadeCacheId",F)),E=new k(E.points,E.spatialReference,!0===E.hasZ,!0===E.hasM,F,1);case "type":return"Multipoint"}}if(1===
w)throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidIdentifier,x);return 2===w?{keystate:"notfound"}:null}Object.defineProperty(e,"__esModule",{value:!0});e.geometryMember=e.registerFunctions=void 0;e.registerFunctions=function(E,F){E.ringisclockwise=function(y,x){return F(y,x,function(w,C,B){a.pcCheck(B,1,1,y,x);w=[];if(null===B[0])return!1;if(a.isArray(B[0])){var I=0;for(B=B[0];I<B.length;I++)if(C=B[I],C instanceof h)w.push([C.x,C.y]);else throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,
x);}else if(B[0]instanceof k)w=B[0]._elements;else if(a.isImmutableArray(B[0])){I=0;for(var N=B[0].toArray();I<N.length;I++)if(C=N[I],C instanceof h)w.push([C.x,C.y]);else throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,x);0<w.length&&(B[0].get(0),B[0].get(0))}else throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,x);return 3>w.length?!1:(new c({rings:[],spatialReference:{wkid:4326}})).isClockwise(w)})};E.polygon=function(y,x){return F(y,x,function(w,
C,B){a.pcCheck(B,1,1,y,x);w=null;if(B[0]instanceof l){if(w=a.fixSpatialReference(q.parseGeometryFromDictionary(B[0]),y.spatialReference),!1===w instanceof c)throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,x);}else w=B[0]instanceof c?r.fromJson(B[0].toJson()):a.fixSpatialReference(new c(JSON.parse(B[0])),y.spatialReference);if(null!==w&&!1===w.spatialReference.equals(y.spatialReference))throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.WrongSpatialReference,x);return a.fixNullGeometry(w)})};
E.polyline=function(y,x){return F(y,x,function(w,C,B){a.pcCheck(B,1,1,y,x);w=null;if(B[0]instanceof l){if(w=a.fixSpatialReference(q.parseGeometryFromDictionary(B[0]),y.spatialReference),!1===w instanceof f)throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,x);}else w=B[0]instanceof f?r.fromJson(B[0].toJson()):a.fixSpatialReference(new f(JSON.parse(B[0])),y.spatialReference);if(null!==w&&!1===w.spatialReference.equals(y.spatialReference))throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.WrongSpatialReference,
x);return a.fixNullGeometry(w)})};E.point=function(y,x){return F(y,x,function(w,C,B){a.pcCheck(B,1,1,y,x);w=null;if(B[0]instanceof l){if(w=a.fixSpatialReference(q.parseGeometryFromDictionary(B[0]),y.spatialReference),!1===w instanceof h)throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,x);}else w=B[0]instanceof h?r.fromJson(B[0].toJson()):a.fixSpatialReference(new h(JSON.parse(B[0])),y.spatialReference);if(null!==w&&!1===w.spatialReference.equals(y.spatialReference))throw new m.ArcadeExecutionError(y,
m.ExecutionErrorCodes.WrongSpatialReference,x);return a.fixNullGeometry(w)})};E.multipoint=function(y,x){return F(y,x,function(w,C,B){a.pcCheck(B,1,1,y,x);w=null;if(B[0]instanceof l){if(w=a.fixSpatialReference(q.parseGeometryFromDictionary(B[0]),y.spatialReference),!1===w instanceof b)throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,x);}else w=B[0]instanceof b?r.fromJson(B[0].toJson()):a.fixSpatialReference(new b(JSON.parse(B[0])),y.spatialReference);if(null!==w&&!1===w.spatialReference.equals(y.spatialReference))throw new m.ArcadeExecutionError(y,
m.ExecutionErrorCodes.WrongSpatialReference,x);return a.fixNullGeometry(w)})};E.extent=function(y,x){return F(y,x,function(w,C,B){B=a.autoCastFeatureToGeometry(B);a.pcCheck(B,1,1,y,x);w=null;B[0]instanceof l?w=a.fixSpatialReference(q.parseGeometryFromDictionary(B[0]),y.spatialReference):B[0]instanceof h?(w={xmin:B[0].x,ymin:B[0].y,xmax:B[0].x,ymax:B[0].y,spatialReference:B[0].spatialReference.toJson()},B=B[0],B.hasZ?(w.zmin=B.z,w.zmax=B.z):B.hasM&&(w.mmin=B.m,w.mmax=B.m),w=r.fromJson(w)):w=B[0]instanceof
c?r.fromJson(B[0].getExtent().toJson()):B[0]instanceof f?r.fromJson(B[0].getExtent().toJson()):B[0]instanceof b?r.fromJson(B[0].getExtent().toJson()):B[0]instanceof d?r.fromJson(B[0].toJson()):a.fixSpatialReference(new d(JSON.parse(B[0])),y.spatialReference);if(null!==w&&!1===w.spatialReference.equals(y.spatialReference))throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.WrongSpatialReference,x);return a.fixNullGeometry(w)})};E.geometry=function(y,x){return F(y,x,function(w,C,B){a.pcCheck(B,
1,1,y,x);w=null;if(null===B[0])return null;w=z(B[0])?a.fixSpatialReference(B[0].geometry(),y.spatialReference):B[0]instanceof l?a.fixSpatialReference(q.parseGeometryFromDictionary(B[0]),y.spatialReference):a.fixSpatialReference(r.fromJson(JSON.parse(B[0])),y.spatialReference);if(null!==w&&!1===w.spatialReference.equals(y.spatialReference))throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.WrongSpatialReference,x);return a.fixNullGeometry(w)})};E.setgeometry=function(y,x){return F(y,x,function(w,
C,B){a.pcCheck(B,2,2,y,x);if(z(B[0])){if(!0===B[0].immutable)throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.Immutable,x);if(B[1]instanceof n||null===B[1])B[0]._geometry=B[1];else throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,x);}else throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,x);return a.voidOperation})};E.feature=function(y,x){return F(y,x,function(w,C,B){if(0===B.length)throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.WrongNumberOfParameters,
x);w=null;if(1===B.length)if(a.isString(B[0]))w=q.fromJson(JSON.parse(B[0]),y.timeReference);else if(z(B[0]))w=q.createFromArcadeFeature(B[0]);else if(B[0]instanceof n)w=q.createFromGraphicLikeObject(B[0],null,null,y.timeReference);else if(B[0]instanceof l)w=B[0].hasField("geometry")?B[0].field("geometry"):null,C=B[0].hasField("attributes")?B[0].field("attributes"):null,null!==w&&w instanceof l&&(w=q.parseGeometryFromDictionary(w)),null!==C&&(C=q.parseAttributesFromDictionary(C)),w=q.createFromGraphicLikeObject(w,
C,null,y.timeReference);else throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,x);else{if(2===B.length){C=w=null;if(null!==B[0])if(B[0]instanceof n)w=B[0];else if(w instanceof l)w=q.parseGeometryFromDictionary(B[0]);else throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,x);if(null!==B[1])if(B[1]instanceof l)C=q.parseAttributesFromDictionary(B[1]);else throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,x);}else{w=null;C={};if(null!==
B[0])if(B[0]instanceof n)w=B[0];else if(w instanceof l)w=q.parseGeometryFromDictionary(B[0]);else throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,x);for(var I=1;I<B.length;I+=2){var N=a.toString(B[I]),V=B[I+1];if(null===V||void 0===V||a.isString(V)||isNaN(V)||a.isDate(V)||a.isNumber(V)||a.isBoolean(V)){if(a.isFunctionParameter(V)||!1===a.isSimpleType(V))throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,x);C[N]=V===a.voidOperation?null:V}else throw new m.ArcadeExecutionError(y,
m.ExecutionErrorCodes.InvalidParameter,x);}}w=q.createFromGraphicLikeObject(w,C,null,y.timeReference)}w._geometry=a.fixSpatialReference(w.geometry(),y.spatialReference);w.immutable=!1;return w})};E.dictionary=function(y,x){return F(y,x,function(w,C,B){if(0===B.length)return B=new l,B.immutable=!1,B;if(1===B.length&&a.isString(B[0]))try{var I=JSON.parse(B[0]),N=l.convertObjectToArcadeDictionary(I,a.defaultTimeZone(y),!1);N.immutable=!1;return N}catch(V){throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,
x);}if(0!==B.length%2)throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.WrongNumberOfParameters,x);w={};for(C=0;C<B.length;C+=2)if(I=a.toString(B[C]),N=B[C+1],null===N||void 0===N||a.isString(N)||isNaN(N)||a.isDate(N)||a.isNumber(N)||a.isBoolean(N)||a.isArray(N)||a.isImmutableArray(N)){if(a.isFunctionParameter(N))throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,x);w[I]=N===a.voidOperation?null:N}else throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,
x);B=new l(w);B.immutable=!1;return B})};E.haskey=function(y,x){return F(y,x,function(w,C,B){a.pcCheck(B,2,2,y,x);w=a.toString(B[1]);if(z(B[0])||B[0]instanceof l)return B[0].hasField(w);if(B[0]instanceof n)return(B=A(B[0],w,null,null,2))&&"notfound"===B.keystate?!1:!0;throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,x);})};E.hasvalue=function(y,x){return F(y,x,function(w,C,B){a.pcCheck(B,2,2,y,x);if(null===B[0]||null===B[1])return!1;w=a.toString(B[1]);return a.isFeature(B[0])||
B[0]instanceof l?B[0].hasField(w)&&null!==B[0].field(w)?!0:!1:B[0]instanceof n?null===A(B[0],w,null,null,0)?!1:!0:!1})};E.indexof=function(y,x){return F(y,x,function(w,C,B){a.pcCheck(B,2,2,y,x);w=B[1];if(a.isArray(B[0])){for(C=0;C<B[0].length;C++)if(a.equalityTest(w,B[0][C]))return C;return-1}if(a.isImmutableArray(B[0])){var I=B[0].length();for(C=0;C<I;C++)if(a.equalityTest(w,B[0].get(C)))return C;return-1}throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,x);})};E.angle=function(y,
x){return F(y,x,function(w,C,B){B=a.autoCastFeatureToGeometry(B);a.pcCheck(B,2,3,y,x);if(!(B[0]instanceof h))throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,x);if(!(B[1]instanceof h))throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,x);if(2<B.length&&!(B[2]instanceof h))throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,x);return 2===B.length?p.angle2D(B[0],B[1]):p.angleBetween2D(B[0],B[1],B[2])})};E.bearing=function(y,x){return F(y,
x,function(w,C,B){B=a.autoCastFeatureToGeometry(B);a.pcCheck(B,2,3,y,x);if(!(B[0]instanceof h))throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,x);if(!(B[1]instanceof h))throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,x);if(2<B.length&&!(B[2]instanceof h))throw new m.ArcadeExecutionError(y,m.ExecutionErrorCodes.InvalidParameter,x);return 2===B.length?p.bearing2D(B[0],B[1]):p.bearingBetween2D(B[0],B[1],B[2])})};E.isselfintersecting=function(y,x){return F(y,
x,function(w,C,B){B=a.autoCastFeatureToGeometry(B);a.pcCheck(B,1,1,y,x);w=B[0];if(w instanceof c)return w.isSelfIntersecting(w);if(w instanceof f)return w=w.paths,p.pathsSelfIntersecting(w);if(w instanceof b)for(C=w.points,B=0;B<C.length;B++)for(var I=0;I<C.length;I++)if(I!==B){for(var N=!0,V=0;V<C[B].length;V++)if(C[B][V]!==C[I][V]){N=!1;break}if(!0===N)return!0}return a.isArray(w)||a.isImmutableArray(w)?(w=a.autoCastArrayOfPointsToPolyline(w,y.spatialReference),null!==w&&(w=w.paths),p.pathsSelfIntersecting(w)):
!1})}};var D=0;e.geometryMember=A})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(g,e,t){function u(b,h,c){var f={x:0,y:0};h&&(f.z=0);c&&(f.m=0);for(var p=0,r=b[0],m=0;m<b.length;m++){var v=b[m];a:if(v.length!==r.length)var z=!1;else{for(z=0;z<v.length;z++)if(v[z]!==r[z]){z=!1;break a}z=!0}if(!1===z){z=l(r,v,h);var A=v,D=h,E=c,F={x:(r[0]+A[0])/2,y:(r[1]+A[1])/2};D&&(F.z=(r[2]+A[2])/2);D&&E?F.m=(r[3]+A[3])/2:E&&(F.m=(r[2]+A[2])/2);r=F;r.x*=
z;r.y*=z;f.x+=r.x;f.y+=r.y;h&&(r.z*=z,f.z+=r.z);c&&(r.m*=z,f.m+=r.m);p+=z;r=v}}0<p?(f.x/=p,f.y/=p,h&&(f.z/=p),c&&(f.m/=p)):(f.x=b[0][0],f.y=b[0][1],h&&(f.z=b[0][2]),c&&h?f.m=b[0][3]:c&&(f.m=b[0][2]));return f}function l(b,h,c){var f=h[0]-b[0];b=h[1]-b[1];return c?(h=h[2]-h[2],Math.sqrt(f*f+b*b+h*h)):Math.sqrt(f*f+b*b)}function q(b,h,c){for(void 0===c&&(c=0);b<c;)b+=h;for(c+=h;b>=c;)b-=h;return b}function k(b,h){return Math.atan2(h.y-b.y,h.x-b.x)}function a(b,h,c){var f=b.x-h.x;b=b.y-h.y;var p=c.x-
h.x;h=c.y-h.y;return Math.atan2(f*h-p*b,f*p+b*h)}function d(b,h,c,f,p){var r=b[0];b=b[1];var m=h[0];h=h[1];var v=c[0],z=c[1];c=f[0]-v;v=r-v;var A=m-r;f=f[1]-z;z=b-z;var D=h-b,E=f*A-c*D;if(0===E)return!1;c=(c*z-f*v)/E;v=(A*z-D*v)/E;return 0<=c&&1>=c&&0<=v&&1>=v?(p&&(p[0]=r+c*(m-r),p[1]=b+c*(h-b)),!0):!1}Object.defineProperty(e,"__esModule",{value:!0});e.pathsSelfIntersecting=e.bearingBetween2D=e.angleBetween2D=e.angleBetweenRad=e.bearing2D=e.angle2D=e.angleRad=e.centroidMultiPoint=e.centroidPolyline=
void 0;e.centroidPolyline=function(b){for(var h={x:0,y:0,spatialReference:b.spatialReference.toJson()},c={x:0,y:0,spatialReference:b.spatialReference.toJson()},f=0,p=0,r=0;r<b.paths.length;r++)if(0!==b.paths[r].length){var m=b.paths[r];var v=!0===b.hasZ;if(1>=m.length)m=0;else{for(var z=0,A=1;A<m.length;A++)z+=l(m[A-1],m[A],v);m=z}0===m?(v=u(b.paths[r],!0===b.hasZ,!0===b.hasM),h.x+=v.x,h.y+=v.y,!0===b.hasZ&&(h.z+=v.z),!0===b.hasM&&(h.m+=v.m),++f):(v=u(b.paths[r],!0===b.hasZ,!0===b.hasM),c.x+=v.x*
m,c.y+=v.y*m,!0===b.hasZ&&(c.z+=v.z*m),!0===b.hasM&&(c.m+=v.m*m),p+=m)}return 0<p?(c.x/=p,c.y/=p,!0===b.hasZ&&(c.z/=p),!0===b.hasM&&(c.m/=p),new t(c)):0<f?(h.x/=f,h.y/=f,!0===b.hasZ&&(c.z/=f),!0===b.hasM&&(h.m/=f),new t(h)):null};e.centroidMultiPoint=function(b){if(0===b.points.length)return null;for(var h=0,c=0,f=0,p=0,r=0;r<b.points.length;r++){var m=b.getPoint(r);!0===m.hasZ&&(f+=m.z);!0===m.hasM&&(p+=m.m);h+=m.x;c+=m.y;p+=m.m}h={x:h/b.points.length,y:c/b.points.length,spatialReference:null};h.spatialReference=
b.spatialReference.toJson();!0===b.hasZ&&(h.z=f/b.points.length);!0===b.hasM&&(h.m=p/b.points.length);return new t(h)};e.angleRad=k;e.angle2D=function(b,h){return q(k(b,h),2*Math.PI)*(180/Math.PI)};e.bearing2D=function(b,h){return q(Math.PI/2-k(b,h),2*Math.PI)*(180/Math.PI)};e.angleBetweenRad=a;e.angleBetween2D=function(b,h,c){return q(a(b,h,c),2*Math.PI)*(180/Math.PI)};e.bearingBetween2D=function(b,h,c){return q(-1*a(b,h,c),2*Math.PI)*(180/Math.PI)};var n=[0,0];e.pathsSelfIntersecting=function(b){for(var h=
0;h<b.length;h++){for(var c=b[h],f=0;f<c.length-1;f++)for(var p=c[f],r=c[f+1],m=h+1;m<b.length;m++)for(var v=0;v<b[m].length-1;v++){var z=b[m][v],A=b[m][v+1],D=d(p,r,z,A,n);if(D&&!(n[0]===p[0]&&n[1]===p[1]||n[0]===z[0]&&n[1]===z[1]||n[0]===r[0]&&n[1]===r[1]||n[0]===A[0]&&n[1]===A[1]))return!0}v=c.length;if(!(3>v))for(f=0;f<=v-2;f++)for(p=c[f],r=c[f+1],m=f+2;m<=v-2;m++)if(z=c[m],A=c[m+1],(D=d(p,r,z,A,n))&&!(n[0]===p[0]&&n[1]===p[1]||n[0]===z[0]&&n[1]===z[1]||n[0]===r[0]&&n[1]===r[1]||n[0]===A[0]&&
n[1]===A[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils ../executionError".split(" "),function(g,e,t,u,l,q,k,a,d,n,b,h,c,f){function p(m){return 0===t.version.indexOf("4.")?b.fromExtent(m):new b({spatialReference:m.spatialReference,rings:[[[m.xmin,
m.ymin],[m.xmin,m.ymax],[m.xmax,m.ymax],[m.xmax,m.ymin],[m.xmin,m.ymin]]]})}Object.defineProperty(e,"__esModule",{value:!0});e.registerFunctions=e.setGeometryEngine=void 0;var r=null;e.setGeometryEngine=function(m){r=m};e.registerFunctions=function(m,v){function z(A,D,E){l.pcCheck(E,2,2,A,D);if(!(E[0]instanceof a&&E[1]instanceof a||E[0]instanceof a&&null===E[1]||E[1]instanceof a&&null===E[0]||null===E[0]&&null===E[1]))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);}m.disjoint=
function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);z(A,D,y);return null===y[0]||null===y[1]?!0:r.disjoint(y[0],y[1])})};m.intersects=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);z(A,D,y);return null===y[0]||null===y[1]?!1:r.intersects(y[0],y[1])})};m.touches=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);z(A,D,y);return null===y[0]||null===y[1]?!1:r.touches(y[0],y[1])})};m.crosses=function(A,D){return v(A,D,function(E,
F,y){y=l.autoCastFeatureToGeometry(y);z(A,D,y);return null===y[0]||null===y[1]?!1:r.crosses(y[0],y[1])})};m.within=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);z(A,D,y);return null===y[0]||null===y[1]?!1:r.within(y[0],y[1])})};m.contains=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);z(A,D,y);return null===y[0]||null===y[1]?!1:r.contains(y[0],y[1])})};m.overlaps=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);
z(A,D,y);return null===y[0]||null===y[1]?!1:r.overlaps(y[0],y[1])})};m.equals=function(A,D){return v(A,D,function(E,F,y){l.pcCheck(y,2,2,A,D);return y[0]===y[1]?!0:y[0]instanceof a&&y[1]instanceof a?r.equals(y[0],y[1]):l.isDate(y[0])&&l.isDate(y[1])?y[0].equals(y[1]):!1})};m.relate=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);l.pcCheck(y,3,3,A,D);if(y[0]instanceof a&&y[1]instanceof a)return r.relate(y[0],y[1],l.toString(y[2]));if(y[0]instanceof a&&null===y[1]||y[1]instanceof
a&&null===y[0]||null===y[0]&&null===y[1])return!1;throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);})};m.intersection=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);z(A,D,y);return null===y[0]||null===y[1]?null:r.intersect(y[0],y[1])})};m.union=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);E=[];if(0===y.length)throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.WrongNumberOfParameters,D);if(1===y.length)if(l.isArray(y[0]))for(y=
l.autoCastFeatureToGeometry(y[0]),F=0;F<y.length;F++){if(null!==y[F]){if(!(y[F]instanceof a))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);E.push(y[F])}}else if(l.isImmutableArray(y[0]))for(y=l.autoCastFeatureToGeometry(y[0].toArray()),F=0;F<y.length;F++){if(null!==y[F]){if(!(y[F]instanceof a))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);E.push(y[F])}}else{if(y[0]instanceof a)return l.fixSpatialReference(u.cloneGeometry(y[0]),A.spatialReference);
if(null===y[0])return null;throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);}else for(F=0;F<y.length;F++)if(null!==y[F]){if(!(y[F]instanceof a))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);E.push(y[F])}return 0===E.length?null:r.union(E)})};m.difference=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);z(A,D,y);return null!==y[0]&&null===y[1]?u.cloneGeometry(y[0]):null===y[0]?null:r.difference(y[0],y[1])})};m.symmetricdifference=
function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);z(A,D,y);return null===y[0]&&null===y[1]?null:null===y[0]?u.cloneGeometry(y[1]):null===y[1]?u.cloneGeometry(y[0]):r.symmetricDifference(y[0],y[1])})};m.clip=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);l.pcCheck(y,2,2,A,D);if(!(y[1]instanceof k)&&null!==y[1])throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);if(null===y[0])return null;if(!(y[0]instanceof a))throw new f.ArcadeExecutionError(A,
f.ExecutionErrorCodes.InvalidParameter,D);return null===y[1]?null:r.clip(y[0],y[1])})};m.cut=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);l.pcCheck(y,2,2,A,D);if(!(y[1]instanceof h)&&null!==y[1])throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);if(null===y[0])return[];if(!(y[0]instanceof a))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);return null===y[1]?[u.cloneGeometry(y[0])]:r.cut(y[0],y[1])})};m.area=function(A,
D){return v(A,D,function(E,F,y){l.pcCheck(y,1,2,A,D);y=l.autoCastFeatureToGeometry(y);if(null===y[0])return 0;if(l.isArray(y[0])||l.isImmutableArray(y[0]))return E=l.autoCastArrayOfPointsToPolygon(y[0],A.spatialReference),null===E?0:r.planarArea(E,u.convertSquareUnitsToCode(l.defaultUndefined(y[1],-1)));if(!(y[0]instanceof a))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);return r.planarArea(y[0],u.convertSquareUnitsToCode(l.defaultUndefined(y[1],-1)))})};m.areageodetic=
function(A,D){return v(A,D,function(E,F,y){l.pcCheck(y,1,2,A,D);y=l.autoCastFeatureToGeometry(y);if(null===y[0])return 0;if(l.isArray(y[0])||l.isImmutableArray(y[0]))return E=l.autoCastArrayOfPointsToPolygon(y[0],A.spatialReference),null===E?0:r.geodesicArea(E,u.convertSquareUnitsToCode(l.defaultUndefined(y[1],-1)));if(!(y[0]instanceof a))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);return r.geodesicArea(y[0],u.convertSquareUnitsToCode(l.defaultUndefined(y[1],-1)))})};
m.length=function(A,D){return v(A,D,function(E,F,y){l.pcCheck(y,1,2,A,D);y=l.autoCastFeatureToGeometry(y);if(null===y[0])return 0;if(l.isArray(y[0])||l.isImmutableArray(y[0]))return E=l.autoCastArrayOfPointsToPolyline(y[0],A.spatialReference),null===E?0:r.planarLength(E,u.convertLinearUnitsToCode(l.defaultUndefined(y[1],-1)));if(!(y[0]instanceof a))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);return r.planarLength(y[0],u.convertLinearUnitsToCode(l.defaultUndefined(y[1],
-1)))})};m.length3d=function(A,D){return v(A,D,function(E,F,y){l.pcCheck(y,1,2,A,D);y=l.autoCastFeatureToGeometry(y);if(null===y[0])return 0;if(l.isArray(y[0])||l.isImmutableArray(y[0]))return E=l.autoCastArrayOfPointsToPolyline(y[0],A.spatialReference),null===E?0:r.planarLength(E,u.convertLinearUnitsToCode(l.defaultUndefined(y[1],-1)));if(!(y[0]instanceof a))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);return r.planarLength(y[0],u.convertLinearUnitsToCode(l.defaultUndefined(y[1],
-1)))})};m.lengthgeodetic=function(A,D){return v(A,D,function(E,F,y){l.pcCheck(y,1,2,A,D);y=l.autoCastFeatureToGeometry(y);if(null===y[0])return 0;if(l.isArray(y[0])||l.isImmutableArray(y[0]))return E=l.autoCastArrayOfPointsToPolyline(y[0],A.spatialReference),null===E?0:r.geodesicLength(E,u.convertLinearUnitsToCode(l.defaultUndefined(y[1],-1)));if(!(y[0]instanceof a))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);return r.geodesicLength(y[0],u.convertLinearUnitsToCode(l.defaultUndefined(y[1],
-1)))})};m.distance=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);l.pcCheck(y,2,3,A,D);E=y[0];if(l.isArray(y[0])||l.isImmutableArray(y[0]))E=l.autoCastArrayOfPointsToMultiPoint(y[0],A.spatialReference);F=y[1];if(l.isArray(y[1])||l.isImmutableArray(y[1]))F=l.autoCastArrayOfPointsToMultiPoint(y[1],A.spatialReference);if(!(E instanceof a))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);if(!(F instanceof a))throw new f.ArcadeExecutionError(A,
f.ExecutionErrorCodes.InvalidParameter,D);return r.distance(E,F,u.convertLinearUnitsToCode(l.defaultUndefined(y[2],-1)))})};m.distancegeodetic=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);l.pcCheck(y,2,3,A,D);E=y[0];F=y[1];if(!(E instanceof n))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);if(!(F instanceof n))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);var x=new h({paths:[],spatialReference:E.spatialReference});
x.addPath([E,F]);return r.geodesicLength(x,u.convertLinearUnitsToCode(l.defaultUndefined(y[2],-1)))})};m.densify=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);l.pcCheck(y,2,3,A,D);if(null===y[0])return null;if(!(y[0]instanceof a))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);E=l.toNumber(y[1]);if(isNaN(E))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);if(0>=E)throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,
D);return y[0]instanceof b||y[0]instanceof h?r.densify(y[0],E,u.convertLinearUnitsToCode(l.defaultUndefined(y[2],-1))):y[0]instanceof k?r.densify(p(y[0]),E,u.convertLinearUnitsToCode(l.defaultUndefined(y[2],-1))):y[0]})};m.densifygeodetic=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);l.pcCheck(y,2,3,A,D);if(null===y[0])return null;if(!(y[0]instanceof a))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);E=l.toNumber(y[1]);if(isNaN(E))throw new f.ArcadeExecutionError(A,
f.ExecutionErrorCodes.InvalidParameter,D);if(0>=E)throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);return y[0]instanceof b||y[0]instanceof h?r.geodesicDensify(y[0],E,u.convertLinearUnitsToCode(l.defaultUndefined(y[2],-1))):y[0]instanceof k?r.geodesicDensify(p(y[0]),E,u.convertLinearUnitsToCode(l.defaultUndefined(y[2],-1))):y[0]})};m.generalize=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);l.pcCheck(y,2,4,A,D);if(null===y[0])return null;if(!(y[0]instanceof
a))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);E=l.toNumber(y[1]);if(isNaN(E))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);return r.generalize(y[0],E,l.toBoolean(l.defaultUndefined(y[2],!0)),u.convertLinearUnitsToCode(l.defaultUndefined(y[3],-1)))})};m.buffer=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);l.pcCheck(y,2,3,A,D);if(null===y[0])return null;if(!(y[0]instanceof a))throw new f.ArcadeExecutionError(A,
f.ExecutionErrorCodes.InvalidParameter,D);E=l.toNumber(y[1]);if(isNaN(E))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);return 0===E?u.cloneGeometry(y[0]):r.buffer(y[0],E,u.convertLinearUnitsToCode(l.defaultUndefined(y[2],-1)))})};m.buffergeodetic=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);l.pcCheck(y,2,3,A,D);if(null===y[0])return null;if(!(y[0]instanceof a))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);
E=l.toNumber(y[1]);if(isNaN(E))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);return 0===E?u.cloneGeometry(y[0]):r.geodesicBuffer(y[0],E,u.convertLinearUnitsToCode(l.defaultUndefined(y[2],-1)))})};m.offset=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);l.pcCheck(y,2,6,A,D);if(null===y[0])return null;if(!(y[0]instanceof b||y[0]instanceof h))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);E=l.toNumber(y[1]);if(isNaN(E))throw new f.ArcadeExecutionError(A,
f.ExecutionErrorCodes.InvalidParameter,D);F=l.toNumber(l.defaultUndefined(y[4],10));if(isNaN(F))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);var x=l.toNumber(l.defaultUndefined(y[5],0));if(isNaN(x))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);return r.offset(y[0],E,u.convertLinearUnitsToCode(l.defaultUndefined(y[2],-1)),l.toString(l.defaultUndefined(y[3],"round")).toLowerCase(),F,x)})};m.rotate=function(A,D){return v(A,D,function(E,F,
y){y=l.autoCastFeatureToGeometry(y);l.pcCheck(y,2,3,A,D);E=y[0];if(null===E)return null;if(!(E instanceof a))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);E instanceof k&&(E=b.fromExtent(E));F=l.toNumber(y[1]);if(isNaN(F))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);y=l.defaultUndefined(y[2],null);if(null===y)return r.rotate(E,F);if(y instanceof n)return r.rotate(E,F,y);throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,
D);})};m.centroid=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);l.pcCheck(y,1,1,A,D);if(null===y[0])return null;E=y[0];if(l.isArray(y[0])||l.isImmutableArray(y[0]))E=l.autoCastArrayOfPointsToMultiPoint(y[0],A.spatialReference);if(null===E)return null;if(!(E instanceof a))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);return E instanceof n?l.fixSpatialReference(u.cloneGeometry(y[0]),A.spatialReference):E instanceof b?E.getCentroid():E instanceof
h?q.centroidPolyline(E):E instanceof d?q.centroidMultiPoint(E):E instanceof k?E.getCenter():null})};m.multiparttosinglepart=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);l.pcCheck(y,1,1,A,D);F=[];if(null===y[0])return null;if(!(y[0]instanceof a))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);if(y[0]instanceof n||y[0]instanceof k)return[l.fixSpatialReference(u.cloneGeometry(y[0]),A.spatialReference)];E=r.simplify(y[0]);if(E instanceof b){F=
[];var x=[];for(y=0;y<E.rings.length;y++)if(E.isClockwise(E.rings[y])){var w=c.fromJson({rings:[E.rings[y]],hasZ:!0===E.hasZ,hasM:!0===E.hasM,spatialReference:E.spatialReference.toJson()});F.push(w)}else x.push({ring:E.rings[y],pt:E.getPoint(y,0)});for(E=0;E<x.length;E++)for(y=0;y<F.length;y++)if(F[y].contains(x[E].pt)){F[y].addRing(x[E].ring);break}return F}if(E instanceof h){F=[];for(y=0;y<E.paths.length;y++)x=c.fromJson({paths:[E.paths[y]],hasZ:!0===E.hasZ,hasM:!0===E.hasM,spatialReference:E.spatialReference.toJson()}),
F.push(x);return F}if(y[0]instanceof d){E=l.fixSpatialReference(u.cloneGeometry(y[0]),A.spatialReference);for(y=0;y<E.points.length;y++)F.push(E.getPoint(y));return F}return null})};m.issimple=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);l.pcCheck(y,1,1,A,D);if(null===y[0])return!0;if(!(y[0]instanceof a))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);return r.isSimple(y[0])})};m.simplify=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);
l.pcCheck(y,1,1,A,D);if(null===y[0])return null;if(!(y[0]instanceof a))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);return r.simplify(y[0])})};m.convexhull=function(A,D){return v(A,D,function(E,F,y){y=l.autoCastFeatureToGeometry(y);l.pcCheck(y,1,1,A,D);if(null===y[0])return null;if(!(y[0]instanceof a))throw new f.ArcadeExecutionError(A,f.ExecutionErrorCodes.InvalidParameter,D);return r.convexHull(y[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports",
"../geometry/Extent","../geometry/jsonUtils"],function(g,e,t,u){Object.defineProperty(e,"__esModule",{value:!0});e.cloneGeometry=e.sameGeomType=e.convertLinearUnitsToCode=e.shapeExtent=e.convertSquareUnitsToCode=void 0;e.convertSquareUnitsToCode=function(l){if(null==l)return null;if("number"===typeof l)return l;l=l.toLowerCase();l=l.replace(/\s/g,"");l=l.replace(/-/g,"");switch(l){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;
case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};
e.shapeExtent=function(l){if(null==l)return null;switch(l.type){case "polygon":case "multipoint":case "polyline":return l.extent;case "point":return new t({xmin:l.x,ymin:l.y,xmax:l.x,ymax:l.y,spatialReference:l.spatialReference});case "extent":return l}return null};e.convertLinearUnitsToCode=function(l){if(null==l)return null;if("number"===typeof l)return l;l=l.toLowerCase();l=l.replace(/\s/g,"");l=l.replace(/-/g,"");switch(l){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};e.sameGeomType=function(l,q){return l===
q||"point"===l&&"esriGeometryPoint"===q||"polyline"===l&&"esriGeometryPolyline"===q||"polygon"===l&&"esriGeometryPolygon"===q||"extent"===l&&"esriGeometryEnvelope"===q||"multipoint"===l&&"esriGeometryMultipoint"===q||"point"===q&&"esriGeometryPoint"===l||"polyline"===q&&"esriGeometryPolyline"===l||"polygon"===q&&"esriGeometryPolygon"===l||"extent"===q&&"esriGeometryEnvelope"===l||"multipoint"===q&&"esriGeometryMultipoint"===l?!0:!1};e.cloneGeometry=function(l){if(null==l)return null;var q=u.fromJson(l.toJson());
l.getCacheValue("_geVersion")&&q.setCacheValue("_geVersion",l.getCacheValue("_geVersion"));return q}})},"esri/arcade/functions/maths":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../languageUtils dojo/number".split(" "),function(g,e,t,u,l,q){function k(a,d,n){if("undefined"===typeof n||0===+n)return Math[a](d);d=+d;n=+n;if(isNaN(d)||"number"!==typeof n||0!==n%1)return NaN;d=d.toString().split("e");d=Math[a](+(d[0]+"e"+(d[1]?+d[1]-n:-n)));d=d.toString().split("e");
return+(d[0]+"e"+(d[1]?+d[1]+n:n))}Object.defineProperty(e,"__esModule",{value:!0});e.registerFunctions=void 0;e.registerFunctions=function(a,d){function n(b,h,c){b=l.toNumber(b);return isNaN(b)?b:isNaN(h)||isNaN(c)||h>c?NaN:b<h?h:b>c?c:b}a.number=function(b,h){return d(b,h,function(c,f,p){l.pcCheck(p,1,2,b,h);c=p[0];return l.isNumber(c)?c:null===c?0:l.isDate(c)?c.toNumber():l.isBoolean(c)?Number(c):l.isArray(c)?NaN:""===c||void 0===c?Number(c):l.isString(c)?void 0!==p[1]?(p=l.multiReplace(p[1],"\u2030",
""),p=l.multiReplace(p,"\u00a4",""),q.parse(c,{pattern:p})):Number(c.trim()):Number(c)})};a.abs=function(b,h){return d(b,h,function(c,f,p){l.pcCheck(p,1,1,b,h);return Math.abs(l.toNumber(p[0]))})};a.acos=function(b,h){return d(b,h,function(c,f,p){l.pcCheck(p,1,1,b,h);return Math.acos(l.toNumber(p[0]))})};a.asin=function(b,h){return d(b,h,function(c,f,p){l.pcCheck(p,1,1,b,h);return Math.asin(l.toNumber(p[0]))})};a.atan=function(b,h){return d(b,h,function(c,f,p){l.pcCheck(p,1,1,b,h);return Math.atan(l.toNumber(p[0]))})};
a.atan2=function(b,h){return d(b,h,function(c,f,p){l.pcCheck(p,2,2,b,h);return Math.atan2(l.toNumber(p[0]),l.toNumber(p[1]))})};a.ceil=function(b,h){return d(b,h,function(c,f,p){l.pcCheck(p,1,2,b,h);return 2===p.length?(c=l.toNumber(p[1]),isNaN(c)&&(c=0),k("ceil",l.toNumber(p[0]),-1*c)):Math.ceil(l.toNumber(p[0]))})};a.round=function(b,h){return d(b,h,function(c,f,p){l.pcCheck(p,1,2,b,h);return 2===p.length?(c=l.toNumber(p[1]),isNaN(c)&&(c=0),k("round",l.toNumber(p[0]),-1*c)):Math.round(l.toNumber(p[0]))})};
a.floor=function(b,h){return d(b,h,function(c,f,p){l.pcCheck(p,1,2,b,h);return 2===p.length?(c=l.toNumber(p[1]),isNaN(c)&&(c=0),k("floor",l.toNumber(p[0]),-1*c)):Math.floor(l.toNumber(p[0]))})};a.cos=function(b,h){return d(b,h,function(c,f,p){l.pcCheck(p,1,1,b,h);return Math.cos(l.toNumber(p[0]))})};a.isnan=function(b,h){return d(b,h,function(c,f,p){l.pcCheck(p,1,1,b,h);return"number"===typeof p[0]&&isNaN(p[0])})};a.exp=function(b,h){return d(b,h,function(c,f,p){l.pcCheck(p,1,1,b,h);return Math.exp(l.toNumber(p[0]))})};
a.log=function(b,h){return d(b,h,function(c,f,p){l.pcCheck(p,1,1,b,h);return Math.log(l.toNumber(p[0]))})};a.pow=function(b,h){return d(b,h,function(c,f,p){l.pcCheck(p,2,2,b,h);return Math.pow(l.toNumber(p[0]),l.toNumber(p[1]))})};a.random=function(b,h){return d(b,h,function(c,f,p){l.pcCheck(p,0,0,b,h);return Math.random()})};a.sin=function(b,h){return d(b,h,function(c,f,p){l.pcCheck(p,1,1,b,h);return Math.sin(l.toNumber(p[0]))})};a.sqrt=function(b,h){return d(b,h,function(c,f,p){l.pcCheck(p,1,1,
b,h);return Math.sqrt(l.toNumber(p[0]))})};a.tan=function(b,h){return d(b,h,function(c,f,p){l.pcCheck(p,1,1,b,h);return Math.tan(l.toNumber(p[0]))})};a.defaultvalue=function(b,h){return d(b,h,function(c,f,p){l.pcCheck(p,2,2,b,h);return null===p[0]||""===p[0]||void 0===p[0]?p[1]:p[0]})};a.isempty=function(b,h){return d(b,h,function(c,f,p){l.pcCheck(p,1,1,b,h);return null===p[0]||""===p[0]||void 0===p[0]?!0:!1})};a["boolean"]=function(b,h){return d(b,h,function(c,f,p){l.pcCheck(p,1,1,b,h);return l.toBoolean(p[0])})};
a.constrain=function(b,h){return d(b,h,function(c,f,p){l.pcCheck(p,3,3,b,h);c=l.toNumber(p[1]);f=l.toNumber(p[2]);if(l.isArray(p[0])){var r=[],m=0;for(p=p[0];m<p.length;m++)r.push(n(p[m],c,f));return r}if(l.isImmutableArray(p[0])){r=[];for(m=0;m<p[0].length();m++)r.push(n(p[0].get(m),c,f));return r}return n(p[0],c,f)})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../executionError","../languageUtils","./fieldStats"],function(g,e,t,u,l){function q(k,a,d,n){if(1===n.length){if(u.isArray(n[0]))return l.calculateStat(k,
n[0],-1);if(u.isImmutableArray(n[0]))return l.calculateStat(k,n[0].toArray(),-1)}return l.calculateStat(k,n,-1)}Object.defineProperty(e,"__esModule",{value:!0});e.registerFunctions=void 0;e.registerFunctions=function(k,a){k.stdev=function(d,n){return a(d,n,function(b,h,c){return q("stdev",b,h,c)})};k.variance=function(d,n){return a(d,n,function(b,h,c){return q("variance",b,h,c)})};k.average=function(d,n){return a(d,n,function(b,h,c){return q("mean",b,h,c)})};k.mean=function(d,n){return a(d,n,function(b,
h,c){return q("mean",b,h,c)})};k.sum=function(d,n){return a(d,n,function(b,h,c){return q("sum",b,h,c)})};k.min=function(d,n){return a(d,n,function(b,h,c){return q("min",b,h,c)})};k.max=function(d,n){return a(d,n,function(b,h,c){return q("max",b,h,c)})};k.distinct=function(d,n){return a(d,n,function(b,h,c){return q("distinct",b,h,c)})};k.count=function(d,n){return a(d,n,function(b,h,c){u.pcCheck(c,1,1,d,n);if(u.isArray(c[0])||u.isString(c[0]))return c[0].length;if(u.isImmutableArray(c[0]))return c[0].length();
throw new t.ArcadeExecutionError(d,t.ExecutionErrorCodes.InvalidParameter,n);})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(g,e,t){function u(q){for(var k=0,a=0;a<q.length;a++)k+=q[a];return k/q.length}function l(q){for(var k=u(q),a=0,d=0;d<q.length;d++)a+=Math.pow(k-q[d],2);return a/q.length}Object.defineProperty(e,"__esModule",{value:!0});e.calculateStat=e.decodeStatType=void 0;e.decodeStatType=function(q){switch(q.toLowerCase()){case "distinct":return"distinct";
case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};e.calculateStat=function(q,k,a){void 0===a&&(a=1E3);switch(q.toLowerCase()){case "distinct":a:{q=a;a=[];for(var d={},n=[],b=0;b<k.length;b++){if(void 0!==k[b]&&null!==k[b]&&k[b]!==t.voidOperation){var h=k[b];if(t.isNumber(h)||t.isString(h))void 0===d[h]&&(a.push(h),d[h]=1);else{for(var c=
!1,f=0;f<n.length;f++)!0===t.equalityTest(n[f],h)&&(c=!0);!1===c&&(n.push(h),a.push(h))}}if(a.length>=q&&-1!==q){k=a;break a}}k=a}return k;case "avg":case "mean":return u(t.toNumberArray(k));case "min":return Math.min.apply(Math,t.toNumberArray(k));case "sum":k=t.toNumberArray(k);for(a=q=0;a<k.length;a++)q+=k[a];return q;case "max":return Math.max.apply(Math,t.toNumberArray(k));case "stdev":case "stddev":return Math.sqrt(l(t.toNumberArray(k)));case "var":case "variance":return l(t.toNumberArray(k));
case "count":return k.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../ArcadePortal ../Attachment ../Dictionary ../executionError ../languageUtils ../featureset/support/shared ./convertdirection ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../SpatialReference ../../arcgis/Portal".split(" "),function(g,e,t,u,l,q,k,a,
d,n,b,h,c,f,p,r,m,v,z){function A(E,F){return E&&F?E.x===F.x&&E.y===F.y?!0:!1:E===F}function D(E,F,y){if(null===E)F.updateUint8Array([0,139]);else if(d.isArray(E)){F.updateUint8Array([61]);if(y.map.has(E))E=y.map.get(E),F.updateIntArray([E^61237541]);else{y.map.set(E,y.currentLength++);for(var x=0;x<E.length;x++){var w=E[x];D(w,F,y)}y.map.delete(E);y.currentLength--}F.updateUint8Array([199])}else if(d.isImmutableArray(E)){F.updateUint8Array([61]);if(y.map.has(E))E=y.map.get(E),F.updateIntArray([E^
61237541]);else{y.map.set(E,y.currentLength++);x=0;for(var C=E.toArray();x<C.length;x++)w=C[x],D(w,F,y);y.map.delete(E);y.currentLength--}F.updateUint8Array([199])}else if(d.isDate(E))F.updateIntArray([E.toNumber()]),F.updateUint8Array([241]);else if(d.isString(E))F.updateIntArray([E.length]),F.updateWithString(E),F.updateUint8Array([41]);else if(d.isBoolean(E))F.updateUint8Array([!0===E?1:0,113]);else if(d.isNumber(E))F.updateFloatArray([E]),F.updateUint8Array([173]);else{if(E instanceof q)throw new a.ArcadeExecutionError(y.context,
a.ExecutionErrorCodes.UnsupportedHashType,y.node);if(E instanceof l)throw new a.ArcadeExecutionError(y.context,a.ExecutionErrorCodes.UnsupportedHashType,y.node);if(E instanceof k){F.updateUint8Array([223]);if(y.map.has(E))E=y.map.get(E),F.updateIntArray([E^61237541]);else{y.map.set(E,y.currentLength++);x=0;for(C=E.keys();x<C.length;x++)w=C[x],F.updateIntArray([w.length]),F.updateWithString(w),F.updateUint8Array([251]),w=E.field(w),D(w,F,y),F.updateUint8Array([239]);y.map.delete(E);y.currentLength--}F.updateUint8Array([73])}else{if(d.isFeature(E))throw new a.ArcadeExecutionError(y.context,
a.ExecutionErrorCodes.UnsupportedHashType,y.node);if(E instanceof p)F.updateIntArray([3833836621]),F.updateIntArray([0]),F.updateFloatArray([E.x]),F.updateIntArray([1]),F.updateFloatArray([E.y]),F.updateIntArray([3765347959]),D(E.spatialReference.wkid,F,y);else if(E instanceof r){F.updateIntArray([1266616829]);for(x=0;x<E.rings.length;x++){C=E.rings[x];var B=[],I=null,N=null;for(w=0;w<C.length;w++){var V=E.getPoint(x,w);if(0===w)I=V;else if(A(N,V))continue;N=V;w===C.length-1&&A(I,V)||B.push(V)}F.updateIntArray([1397116793,
B.length]);for(w=0;w<B.length;w++)V=B[w],F.updateIntArray([3962308117,w]),D(V,F,y),F.updateIntArray([2716288009]);F.updateIntArray([2278822459])}F.updateIntArray([3878477243]);D(E.spatialReference.wkid,F,y)}else if(E instanceof m){F.updateIntArray([4106883559]);for(x=0;x<E.paths.length;x++){C=E.paths[x];F.updateIntArray([1397116793,C.length]);for(w=0;w<C.length;w++)F.updateIntArray([3962308117,w]),D(E.getPoint(x,w),F,y),F.updateIntArray([2716288009]);F.updateIntArray([2278822459])}F.updateIntArray([2568784753]);
D(E.spatialReference.wkid,F,y)}else if(E instanceof f){F.updateIntArray([588535921,E.points.length]);for(w=0;w<E.points.length;w++)x=E.getPoint(w),F.updateIntArray([w]),D(x,F,y);F.updateIntArray([1700171621]);D(E.spatialReference.wkid,F,y)}else if(E instanceof c)F.updateIntArray([3483648373]),F.updateIntArray([0]),F.updateFloatArray([E.xmax]),F.updateIntArray([1]),F.updateFloatArray([E.xmin]),F.updateIntArray([2]),F.updateFloatArray([E.ymax]),F.updateIntArray([3]),F.updateFloatArray([E.ymin]),F.updateIntArray([3622027469]),
D(E.spatialReference.wkid,F,y);else if(E instanceof v)F.updateIntArray([14]),void 0!==E.wkid&&null!==E.wkid&&F.updateIntArray([E.wkid]),E.wkt&&F.updateWithString(E.wkt);else{if(d.isFunctionParameter(E))throw new a.ArcadeExecutionError(y.context,a.ExecutionErrorCodes.UnsupportedHashType,y.node);if(d.isFeatureSet(E))throw new a.ArcadeExecutionError(y.context,a.ExecutionErrorCodes.UnsupportedHashType,y.node);d.isFeatureSetCollection(E);throw new a.ArcadeExecutionError(y.context,a.ExecutionErrorCodes.UnsupportedHashType,
y.node);}}}}Object.defineProperty(e,"__esModule",{value:!0});e.registerFunctions=void 0;e.registerFunctions=function(E,F){E.portal=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,1,1,y,x);return new l(d.toString(B[0]))})};E.typeof=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,1,1,y,x);w=d.getType(B[0]);if("Unrecognised Type"===w)throw new a.ArcadeExecutionError(y,a.ExecutionErrorCodes.UnrecognisedType,x);return w})};E.trim=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,1,1,
y,x);return d.toString(B[0]).trim()})};E.tohex=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,1,1,y,x);w=d.toNumber(B[0]);return isNaN(w)?w:w.toString(16)})};E.upper=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,1,1,y,x);return d.toString(B[0]).toUpperCase()})};E.proper=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,1,2,y,x);w=1;2===B.length&&"firstword"===d.toString(B[1]).toLowerCase()&&(w=2);C=/\s/;B=d.toString(B[0]);for(var I="",N=!0,V=0;V<B.length;V++){var Y=B[V];C.test(Y)?
1===w&&(N=!0):Y.toUpperCase()!==Y.toLowerCase()&&(N?(Y=Y.toUpperCase(),N=!1):Y=Y.toLowerCase());I+=Y}return I})};E.lower=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,1,1,y,x);return d.toString(B[0]).toLowerCase()})};E.guid=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,0,1,y,x);if(0<B.length)switch(d.toString(B[0]).toLowerCase()){case "digits":return d.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return d.generateUUID();case "digits-hyphen-parentheses":return"("+
d.generateUUID()+")"}return"{"+d.generateUUID()+"}"})};E.standardizeguid=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,2,2,y,x);w=d.toString(B[0]);if(""===w||null===w)return"";w=/^(\{|\()?([0-9a-z]{8})(\-?)([0-9a-z]{4})(\-?)([0-9a-z]{4})(\-?)([0-9a-z]{4})(\-?)([0-9a-z]{12})(\}|\))?$/gim.exec(w);if(!w)return"";C=[];for(var I=1;I<w.length;I++){var N=w[I];void 0!==N&&""!==N&&null!==N&&0>["-","}","{","(",")"].indexOf(N)&&C.push(N)}if(5!==C.length)return"";w=C[0]+"-"+C[1]+"-"+C[2]+"-"+C[3]+"-"+
C[4];switch(d.toString(B[1]).toLowerCase()){case "digits":return w.replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return w;case "digits-hyphen-parentheses":return"("+w+")"}return"{"+w+"}"})};E.console=function(y,x){return F(y,x,function(w,C,B){0!==B.length&&(1===B.length?y.console(d.toString(B[0])):y.console(d.toString(B)));return d.voidOperation})};E.mid=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,2,3,y,x);w=d.toNumber(B[1]);if(isNaN(w))return"";0>
w&&(w=0);if(2===B.length)return d.toString(B[0]).substr(w);C=d.toNumber(B[2]);if(isNaN(C))return"";0>C&&(C=0);return d.toString(B[0]).substr(w,C)})};E.find=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,2,3,y,x);w=0;if(2<B.length){w=d.toNumber(d.defaultUndefined(B[2],0));if(isNaN(w))return-1;0>w&&(w=0)}return d.toString(B[1]).indexOf(d.toString(B[0]),w)})};E.left=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,2,2,y,x);w=d.toNumber(B[1]);if(isNaN(w))return"";0>w&&(w=0);return d.toString(B[0]).substr(0,
w)})};E.right=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,2,2,y,x);w=d.toNumber(B[1]);if(isNaN(w))return"";0>w&&(w=0);return d.toString(B[0]).substr(-1*w,w)})};E.split=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,2,4,y,x);w=d.toNumber(d.defaultUndefined(B[2],-1));C=d.toBoolean(d.defaultUndefined(B[3],!1));-1===w||null===w||!0===C?B=d.toString(B[0]).split(d.toString(B[1])):(isNaN(w)&&(w=-1),-1>w&&(w=-1),B=d.toString(B[0]).split(d.toString(B[1]),w));if(!1===C)return B;C=[];for(var I=
0;I<B.length&&!(-1!==w&&C.length>=w);I++)""!==B[I]&&void 0!==B[I]&&C.push(B[I]);return C})};E.text=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,1,2,y,x);return d.toStringExplicit(B[0],B[1])})};E.concatenate=function(y,x){return F(y,x,function(w,C,B){w=[];if(1>B.length)return"";if(d.isArray(B[0])){C=d.defaultUndefined(B[2],"");for(var I=0;I<B[0].length;I++)w[I]=d.toStringExplicit(B[0][I],C);return 1<B.length?w.join(B[1]):w.join("")}if(d.isImmutableArray(B[0])){C=d.defaultUndefined(B[2],"");
for(I=0;I<B[0].length();I++)w[I]=d.toStringExplicit(B[0].get(I),C);return 1<B.length?w.join(B[1]):w.join("")}for(I=0;I<B.length;I++)w[I]=d.toStringExplicit(B[I]);return w.join("")})};E.reverse=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,1,1,y,x);if(d.isArray(B[0]))return w=B[0].slice(0),w.reverse(),w;if(d.isImmutableArray(B[0]))return w=B[0].toArray().slice(0),w.reverse(),w;throw new a.ArcadeExecutionError(y,a.ExecutionErrorCodes.InvalidParameter,x);})};E.replace=function(y,x){return F(y,
x,function(w,C,B){d.pcCheck(B,3,4,y,x);w=d.toString(B[0]);C=d.toString(B[1]);var I=d.toString(B[2]);return(4===B.length?d.toBoolean(B[3]):1)?d.multiReplace(w,C,I):w.replace(C,I)})};E.schema=function(y,x){return F(y,x,function(w,C,B){if(d.isFeature(B[0]))return(w=d.featureSchema(B[0]))?k.convertObjectToArcadeDictionary(w,d.defaultTimeZone(y)):null;throw new a.ArcadeExecutionError(y,a.ExecutionErrorCodes.InvalidParameter,x);})};E.subtypes=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,1,1,y,
x);if(d.isFeature(B[0]))return(w=d.featureSubtypes(B[0]))?k.convertObjectToArcadeDictionary(w,d.defaultTimeZone(y)):null;throw new a.ArcadeExecutionError(y,a.ExecutionErrorCodes.InvalidParameter,x);})};E.subtypecode=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,1,1,y,x);if(d.isFeature(B[0])){C=d.featureSubtypes(B[0]);if(!C)return null;if(C.subtypeField&&B[0].hasField(C.subtypeField))for(B=B[0].field(C.subtypeField),w=0,C=C.subtypes;w<C.length;w++){var I=C[w];if(I.code===B)return I.code}return null}throw new a.ArcadeExecutionError(y,
a.ExecutionErrorCodes.InvalidParameter,x);})};E.subtypename=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,1,1,y,x);if(d.isFeature(B[0])){C=d.featureSubtypes(B[0]);if(!C)return"";if(C.subtypeField&&B[0].hasField(C.subtypeField))for(B=B[0].field(C.subtypeField),w=0,C=C.subtypes;w<C.length;w++){var I=C[w];if(I.code===B)return I.name}return""}throw new a.ArcadeExecutionError(y,a.ExecutionErrorCodes.InvalidParameter,x);})};E.gdbversion=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,1,
1,y,x);if(d.isFeature(B[0]))return B[0].gdbVersion();throw new a.ArcadeExecutionError(y,a.ExecutionErrorCodes.InvalidParameter,x);})};E.domain=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,2,3,y,x);if(d.isFeature(B[0]))return(w=d.featureFullDomain(B[0],d.toString(B[1]),void 0===B[2]?void 0:d.toNumber(B[2])))&&w.domain?"coded-value"===w.domain.type||"codedValue"===w.domain.type?k.convertObjectToArcadeDictionary({type:"codedValue",name:w.domain.name,dataType:n.layerFieldEsriConstants[w.field.type],
codedValues:w.domain.codedValues.map(function(I){return{name:I.name,code:I.code}})},d.defaultTimeZone(y)):k.convertObjectToArcadeDictionary({type:"range",name:w.domain.name,dataType:n.layerFieldEsriConstants[w.field.type],min:w.domain.min,max:w.domain.max},d.defaultTimeZone(y)):null;throw new a.ArcadeExecutionError(y,a.ExecutionErrorCodes.InvalidParameter,x);})};E.domainname=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,2,4,y,x);if(d.isFeature(B[0]))return d.featureDomainValueLookup(B[0],
d.toString(B[1]),B[2],void 0===B[3]?void 0:d.toNumber(B[3]));throw new a.ArcadeExecutionError(y,a.ExecutionErrorCodes.InvalidParameter,x);})};E.domaincode=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,2,4,y,x);if(d.isFeature(B[0]))return d.featureDomainCodeLookup(B[0],d.toString(B[1]),B[2],void 0===B[3]?void 0:d.toNumber(B[3]));throw new a.ArcadeExecutionError(y,a.ExecutionErrorCodes.InvalidParameter,x);})};E.urlencode=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,1,1,y,x);if(null===
B[0])return"";if(B[0]instanceof k){w="";C=0;for(var I=B[0].keys();C<I.length;C++){var N=I[C],V=B[0].field(N);""!==w&&(w+="\x26");w=null===V?w+(encodeURIComponent(N)+"\x3d"):w+(encodeURIComponent(N)+"\x3d"+encodeURIComponent(V))}return w}return encodeURIComponent(d.toString(B[0]))})};E.hash=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,1,1,y,x);w=new h.XXH(0);D(B[0],w,{context:y,node:x,map:new Map,currentLength:0});return w.digest()})};E.convertdirection=function(y,x){return F(y,x,function(w,
C,B){d.pcCheck(B,3,3,y,x);return b.convertDirection(B[0],B[1],B[2])})};E.fromjson=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,1,1,y,x);if(!1===d.isString(B[0]))throw new a.ArcadeExecutionError(y,a.ExecutionErrorCodes.InvalidParameter,x);return k.convertJsonToArcade(JSON.parse(d.toString(B[0])),d.defaultTimeZone(y))})};E.expects=function(y,x){return F(y,x,function(w,C,B){if(1>B.length)throw new a.ArcadeExecutionError(y,a.ExecutionErrorCodes.WrongNumberOfParameters,x);return d.voidOperation})};
E.tocharcode=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,1,2,y,x);w=d.toNumber(d.defaultUndefined(B[1],0));C=d.toString(B[0]);if(0===C.length&&1===B.length)return null;if(C.length<=w||0>w)throw new a.ArcadeExecutionError(y,a.ExecutionErrorCodes.OutOfBounds,x);return C.charCodeAt(w)})};E.tocodepoint=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,1,2,y,x);w=d.toNumber(d.defaultUndefined(B[1],0));C=d.toString(B[0]);if(0===C.length&&1===B.length)return null;if(C.length<=w||0>w)throw new a.ArcadeExecutionError(y,
a.ExecutionErrorCodes.OutOfBounds,x);return C.codePointAt(w)})};E.fromcharcode=function(y,x){return F(y,x,function(w,C,B){if(1>B.length)throw new a.ArcadeExecutionError(y,a.ExecutionErrorCodes.WrongNumberOfParameters,x);w=B.map(function(I){return Math.trunc(d.toNumber(I))}).filter(function(I){return 0<=I&&65535>=I});return 0===w.length?null:String.fromCharCode.apply(null,w)})};E.fromcodepoint=function(y,x){return F(y,x,function(w,C,B){if(1>B.length)throw new a.ArcadeExecutionError(y,a.ExecutionErrorCodes.WrongNumberOfParameters,
x);try{var I=B.map(function(N){return Math.trunc(d.toNumber(N))}).filter(function(N){return 1114111>=N&&N>>>0===N})}catch(N){return null}return 0===I.length?null:String.fromCodePoint.apply(null,I)})};E.getuser=function(y,x){return F(y,x,function(w,C,B){d.pcCheck(B,0,2,y,x);w=d.defaultUndefined(B[1],"");w=!0===w||!1===w?"":d.toString(w);if(null!==w&&""!==w)return null;if(0===B.length||B[0]instanceof l){C=null;y.services&&y.services.portal&&(C=y.services.portal);if(0<B.length){B=B[0].field("url");var I=
C;B=B?(new z.Portal(B)).portalUrl===((null===I||void 0===I?void 0:I.portalUrl)||""):!1;if(!B)return null}if(!C)return null;if(""===w){a:{w=C;if(w.getPortalUser()&&(w=w.getPortalUser())){C={};B=0;for(I="username id fullName availableCredits assignedCredits firstName lastName preferredView description email idpUsername favGroupId lastLogin mfaEnabled access storageUsage storageQuota orgId role privileges".split(" ");B<I.length;B++){var N=I[B];void 0!==w[N]&&(C[N]=w[N])}w=C;break a}w=null}if(w){w=JSON.parse(JSON.stringify(w));
C=0;for(B=["lastLogin","created","modified"];C<B.length;C++)I=B[C],void 0!==w[I]&&null!==w[I]&&(w[I]=new Date(w[I]));return k.convertObjectToArcadeDictionary(w,d.defaultTimeZone(y))}}return null}throw new a.ArcadeExecutionError(y,a.ExecutionErrorCodes.InvalidParameter,x);})}}})},"esri/arcade/ArcadePortal":function(){define(["require","exports","./polyfill/tsSupport/extends","./Dictionary"],function(g,e,t,u){return function(l){function q(k){var a=l.call(this)||this;a.declaredClass="esri.arcade.Portal";
a.immutable=!1;a.setField("url",k);a.immutable=!0;return a}t(q,l);return q}(u)})},"esri/arcade/Attachment":function(){define(["require","exports","./polyfill/tsSupport/extends","./Dictionary"],function(g,e,t,u){return function(l){function q(k,a,d,n,b,h){var c=l.call(this)||this;c.attachmentUrl=b;c.declaredClass="esri.arcade.Attachment";c.immutable=!1;c.setField("id",k);c.setField("name",a);c.setField("contenttype",d);c.setField("size",n);c.setField("exifinfo",h);c.immutable=!0;return c}t(q,l);return q}(u)})},
"esri/arcade/functions/convertdirection":function(){define("require exports ../Dictionary ../executionError ../languageUtils ../polyfill/maybe".split(" "),function(g,e,t,u,l,q){function k(da){if(!1===l.isString(da))throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.InvalidParameter,null);return da}function a(da,ha){ha=Math.pow(10,ha);return Math.round(da*ha)/ha}function d(da){var ha=parseFloat,P=da.toString(),aa=P.replace;var ea=+da;ea=isFinite(ea)?ea-ea%1||(0>ea?-0:0===ea?ea:0):ea;ha=ha(aa.call(P,
ea.toString(),"0"))*((0<da)-(0>da)||+da);return 0>da?{fraction:ha,integer:Math.ceil(da)}:{fraction:ha,integer:Math.floor(da)}}function n(da,ha){switch(da){case 0:return"SHORT"===ha?"N":"North";case 1:return"SHORT"===ha?"E":"East";case 2:return"SHORT"===ha?"S":"South";case 3:return"SHORT"===ha?"W":"West"}}function b(da,ha,P){for(;da.length<P;)da=ha+da;return da}function h(da,ha){return da-Math.floor(da/ha)*ha}function c(da){switch(da){case 6:case 1:return 360;case 4:return I;case 5:return 400;case 2:return 1296E3;
case 7:return 60;case 8:return 60;default:throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.LogicError,null,{reason:"unsupported evaluations"});}}function f(da){switch(da.toUpperCase().trim()){case "NORTH":case "NORTHAZIMUTH":case "NORTH AZIMUTH":return 1;case "POLAR":return 2;case "QUADRANT":return 3;case "SOUTH":case "SOUTHAZIMUTH":case "SOUTH AZIMUTH":return 4}throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.LogicError,null,{reason:"unsupported directionType"});}function p(da){switch(da.toUpperCase().trim()){case "D":case "DD":case "DECIMALDEGREE":case "DECIMAL DEGREE":case "DEGREE":case "DECIMALDEGREES":case "DECIMAL DEGREES":case "DEGREES":return 1;
case "DMS":case "DEGREESMINUTESSECONDS":case "DEGREES MINUTES SECONDS":return 3;case "R":case "RAD":case "RADS":case "RADIAN":case "RADIANS":return 4;case "G":case "GON":case "GONS":case "GRAD":case "GRADS":case "GRADIAN":case "GRADIANS":return 5}throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.LogicError,null,{reason:"unsupported units"});}function r(da,ha,P){var aa=null;switch(ha){case 1:aa=e.preciseMultiply(da,3600);break;case 2:aa=da;break;case 5:aa=e.preciseMultiply(da,3240);break;
case 4:aa=e.preciseMultiply(da,N);break;default:throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}switch(P){case 1:return e.preciseDivide(aa,3600);case 2:return aa;case 5:return e.preciseDivide(aa,3240);case 4:return aa/N;default:throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}}function m(da){q.assertIsSome(da);switch(da){case 1:case 6:case 3:return 1;case 5:return 5;case 7:return 7;
case 4:return 4;case 2:case 8:return 2}}function v(da){switch(l.toNumber(da)){case 1:return{first:0,second:1};case 2:return{first:2,second:1};case 3:return{first:2,second:3};case 4:return{first:0,second:3}}return null}function z(da){switch(da.toUpperCase().trim()){case "N":case "NORTH":return 0;case "E":case "EAST":return 1;case "S":case "SOUTH":return 2;case "W":case "WEST":return 3}return null}function A(da){da=parseFloat(da);if(l.isNumber(da)){if(isNaN(da))throw new u.ArcadeExecutionError(null,
u.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});return da}throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}function D(da,ha,P){var aa=3===P,ea=null,X=null,S=0,ia=0;ia=0;if(aa){if(2>da.length)throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});ia=1;(X=v(l.toString(da[da.length-1])))?(ea=X.first,X=X.second):(S=1,ea=z(l.toString(da[0])),X=z(l.toString(da[da.length-1])));
if(null===ea||null===X)throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}switch(ha){case 1:case 4:case 5:if(0===da.length)break;return aa?Z.createFromAngleMeridianAndDirection(fa.createFromAngleAndUnits(A(da[S]),m(ha)),ea,X):Z.createFromAngleAndDirection(fa.createFromAngleAndUnits(A(da[S]),m(ha)),P);case 3:ia=da.length-ia-S;if(3===ia)return da=fa.createFromDegreesMinutesSeconds(A(da[S]),A(da[S+1]),A(da[S+2])),aa?Z.createFromAngleMeridianAndDirection(da,
ea,X):Z.createFromAngleAndDirection(da,P);if(1===ia)return da=A(da[S]),da=U.numberToDms(da),da=fa.createFromDegreesMinutesSeconds(da.m_degrees,da.m_minutes,da.m_seconds),aa?Z.createFromAngleMeridianAndDirection(da,ea,X):Z.createFromAngleAndDirection(da,P)}throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}function E(da){for(var ha=[" ","-","/","'",'"',"\\","^","\u00b0",V,"\t","\r","\n","*"],P="",aa=0;aa<da.length;aa++){var ea=da.charAt(aa);
P=ha.includes(ea)?P+"RRSPLITRRSPLITRR":P+ea}return P.split("RRSPLITRRSPLITRR").filter(function(X){return""!==X})}function F(da,ha,P){for(var aa={padding:0,rounding:0,newpos:ha},ea=!1;ha<da.length;){var X=da[ha];if(X===P)ea?aa.rounding++:aa.padding++,ha++;else if("."===X)ea=!0,ha++;else break}aa.newpos=ha-1;return aa}Object.defineProperty(e,"__esModule",{value:!0});e.convertDirection=e.preciseDivide=e.preciseMultiply=e.preciseMinus=e.preciseAdd=void 0;var y=function(da){return function(ha,P,aa){aa=
aa||14;return+da(ha,P).toFixed(aa)}},x=function(da,ha){return da+ha},w=function(da,ha){return da-ha},C=function(da,ha){return da*ha},B=function(da,ha){return da/ha};e.preciseAdd=function(da,ha,P){return y(x)(da,ha,P)};e.preciseMinus=function(da,ha,P){return y(w)(da,ha,P)};e.preciseMultiply=function(da,ha,P){return y(C)(da,ha,P)};e.preciseDivide=function(da,ha,P){return y(B)(da,ha,P)};var I=2*Math.PI,N=648E3/Math.PI,V=String.fromCharCode(7501),Y;(function(da){da[da.north=0]="north";da[da.east=1]="east";
da[da.south=2]="south";da[da.west=3]="west"})(Y||(Y={}));var ca;(function(da){da[da.decimal_degrees=1]="decimal_degrees";da[da.seconds=2]="seconds";da[da.degrees_minutes_seconds=3]="degrees_minutes_seconds";da[da.radians=4]="radians";da[da.gradians=5]="gradians";da[da.truncated_degrees=6]="truncated_degrees";da[da.fractional_degree_minutes=7]="fractional_degree_minutes";da[da.fractional_minute_seconds=8]="fractional_minute_seconds"})(ca||(ca={}));var J;(function(da){da[da.north_azimuth=1]="north_azimuth";
da[da.polar=2]="polar";da[da.quadrant=3]="quadrant";da[da.south_azimuth=4]="south_azimuth"})(J||(J={}));var O;(function(da){da[da.meridian=0]="meridian";da[da.direction=1]="direction"})(O||(O={}));var U=function(){function da(ha,P,aa){this.m_degrees=ha;this.m_minutes=P;this.m_seconds=aa}da.prototype.getField=function(ha){switch(ha){case 1:case 6:return this.m_degrees;case 7:return this.m_minutes;case 2:case 8:return this.m_seconds;default:throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.LogicError,
null,{reason:"unexpected evaluation"});}};da.secondsToDMS=function(ha){var P=d(ha).fraction;ha=d(ha).integer;var aa=Math.floor(ha/3600);ha-=3600*aa;var ea=Math.floor(ha/60);return new da(aa,ea,ha-60*ea+P)};da.numberToDms=function(ha){var P=d(ha).fraction;ha=d(ha).integer;var aa=e.preciseMultiply(d(100*P).fraction,100);P=d(100*P).integer;return new da(ha,P,aa)};da.prototype.format=function(ha,P){P=a(this.m_seconds,P);var aa=this.m_minutes,ea=this.m_degrees;if(2===ha||8===ha)60<=P&&(P-=60,++aa),60<=
aa&&(aa=0,++ea),360<=ea&&(ea=0);else if(7===ha)P=0,aa=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,ea=this.m_degrees,60<=aa&&(aa=0,++ea),360<=ea&&(ea=0);else if(1===ha||6===ha)ha=e.preciseDivide(this.m_seconds,3600),P=e.preciseDivide(this.m_minutes,60),ea=Math.round(this.m_degrees+P+ha),P=aa=0;return new da(ea,aa,P)};da.dmsToSeconds=function(ha,P,aa){return 3600*ha+60*P+aa};return da}(),ba=function(){function da(ha,P,aa){this.meridian=ha;this.angle=P;this.direction=aa}da.prototype.fetchAzimuth=
function(ha){return ha===O.meridian?this.meridian:this.direction};return da}(),Z=function(){function da(ha){this._angle=ha}da.createFromAngleAndDirection=function(ha,P){return new da(new fa(da._convertDirectionFormat(ha.extractAngularUnits(2),P,1)))};da.prototype.getAngle=function(ha){var P=this._angle.extractAngularUnits(2);switch(ha){case 1:case 4:case 2:return ha=new fa(da._convertDirectionFormat(P,1,ha));case 3:return ha=da.secondsNorthAzimuthToQuadrant(P),ha=new fa(ha.angle)}};da.prototype.getMeridian=
function(ha){var P=this._angle.extractAngularUnits(2);switch(ha){case 1:return 0;case 4:return 2;case 2:return 1;case 3:return da.secondsNorthAzimuthToQuadrant(P).meridian}};da.prototype.getDirection=function(ha){var P=this._angle.extractAngularUnits(2);switch(ha){case 1:return 1;case 4:return 3;case 2:return 0;case 3:return da.secondsNorthAzimuthToQuadrant(P).direction}};da.secondsNorthAzimuthToQuadrant=function(ha){var P=324E3>=ha||972E3<=ha?0:2;return new ba(P,0===P?Math.min(1296E3-ha,ha):Math.abs(ha-
648E3),648E3<ha?3:1)};da.createFromAngleMeridianAndDirection=function(ha,P,aa){return new da(new fa(da.secondsQuadrantToNorthAzimuth(ha.extractAngularUnits(2),P,aa)))};da.secondsQuadrantToNorthAzimuth=function(ha,P,aa){return 0===P?1===aa?ha:1296E3-ha:1===aa?648E3-ha:648E3+ha};da._convertDirectionFormat=function(ha,P,aa){var ea=0;switch(P){case 1:ea=ha;break;case 2:ea=324E3-ha;break;case 3:throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});
case 4:ea=ha+648E3}ha=0;switch(aa){case 1:ha=ea;break;case 2:ha=324E3-ea;break;case 3:throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});case 4:ha=ea-648E3}ha%=1296E3;return 0>ha?1296E3+ha:ha};return da}(),fa=function(){function da(ha){this._seconds=ha}da.createFromAngleAndUnits=function(ha,P){return new da(r(ha,P,2))};da.prototype.extractAngularUnits=function(ha){return r(this._seconds,2,m(ha))};da.createFromDegreesMinutesSeconds=function(ha,
P,aa){return new da(e.preciseAdd(e.preciseAdd(e.preciseMultiply(ha,3600),e.preciseMultiply(P,60)),aa))};return da}(),pa=function(){function da(ha,P,aa,ea){this.view=ha;this.angle=P;this.merdian=aa;this.direction=ea;this._formattedDms=this._dms=null}da.createFromStringAndBearing=function(ha,P,aa){return new da(ha,P.getAngle(aa),P.getMeridian(aa),P.getDirection(aa))};da.prototype.fetchAngle=function(){return this.angle};da.prototype.fetchMeridian=function(){return this.merdian};da.prototype.fetchDirection=
function(){return this.direction};da.prototype.fetchView=function(){return this.view};da.prototype.fetchDms=function(){null===this._dms&&this._calculateDms();return this._dms};da.prototype.fetchFormattedDms=function(){null===this._formattedDms&&this._calculateDms();return this._formattedDms};da.prototype._calculateDms=function(){var ha=null,P=6,aa=0;for(ha=0;ha<this.view.length;ha++){var ea=this.view[ha];switch(ea){case "m":ha=F(this.view,ha,ea);P=6===P?7:P;ha=ha.newpos;continue;case "s":ha=F(this.view,
ha,ea),P=8,aa=aa<ha.rounding?ha.rounding:aa,ha=ha.newpos}}this._dms=U.secondsToDMS(this.angle.extractAngularUnits(2));this._formattedDms=U.secondsToDMS(this.angle.extractAngularUnits(2)).format(P,aa)};return da}();e.convertDirection=function(da,ha,P){if(!(ha instanceof t))throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.InvalidParameter,null);if(!1===ha.hasField("directionType"))throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.LogicError,null,{reason:"missing directionType"});
if(!1===ha.hasField("angleType"))throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.LogicError,null,{reason:"missing angleType"});var aa=f(k(ha.field("directiontype")));ha=p(k(ha.field("angletype")));if(l.isNumber(da)){da=l.toNumber(da);if(3===aa)throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});3===ha?(da=U.numberToDms(da),ha=Z.createFromAngleAndDirection(fa.createFromDegreesMinutesSeconds(da.m_degrees,da.m_minutes,da.m_seconds),aa)):
ha=Z.createFromAngleAndDirection(fa.createFromAngleAndUnits(da,m(ha)),aa)}else if(l.isString(da))ha=D(E(da),ha,aa);else if(l.isArray(da))ha=D(da,ha,aa);else if(l.isImmutableArray(da))ha=D(da.toArray(),ha,aa);else throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});if(!(P instanceof t))throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.InvalidParameter,null);if(!1===P.hasField("directionType"))throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.LogicError,
null,{reason:"missing directionType"});if(!1===P.hasField("outputType"))throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.LogicError,null,{reason:"missing angleType"});aa=f(k(P.field("directiontype")));da=P.hasField("angleType")?p(k(P.field("angletype"))):null;var ea=k(P.field("outputType")).toUpperCase().trim();if(!aa||!ea)throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});if(!(da||"TEXT"===ea&&P.hasField("format")))throw new u.ArcadeExecutionError(null,
u.ExecutionErrorCodes.LogicError,null,{reason:"invalid unit"});switch(ea){case "VALUE":if(3===aa||3===da)return P=ha,ha=P.getAngle(aa),3===aa&&3===da?(da=U.secondsToDMS(ha.extractAngularUnits(2)),aa=[n(P.getMeridian(aa),"SHORT"),da.m_degrees,da.m_minutes,da.m_seconds,n(P.getDirection(aa),"SHORT")]):3===da?(da=U.secondsToDMS(ha.extractAngularUnits(2)),aa=[da.m_degrees,da.m_minutes,da.m_seconds]):aa=3===aa?[n(P.getMeridian(aa),"SHORT"),ha.extractAngularUnits(da),n(P.getDirection(aa),"SHORT")]:[ha.extractAngularUnits(da)],
aa;P=ha;if((ha=m(da))&&3!==da)aa=P.getAngle(aa).extractAngularUnits(ha);else throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});return aa;case "TEXT":ea="";P.hasField("format")&&(ea=l.toString(P.field("format")));if(null===ea||""===ea){P="";switch(da){case 1:P=3===aa?"DD.DD\u00b0":"DDD.DD\u00b0";break;case 3:P=3===aa?"dd\u00b0 mm' ss\"":"ddd\u00b0 mm' ss.ss\"";break;case 4:P="R.RR";break;case 5:P="GGG.GG"+V;break;default:throw new u.ArcadeExecutionError(null,
u.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});}3===aa&&(P="p "+P+" b");ea=P}P=ha;da=ea;var X="",S=null,ia=null;ha=pa.createFromStringAndBearing(da,P,aa);ea={D:1,d:6,m:7,s:8,R:4,G:5};for(ia=0;ia<da.length;ia++){var oa=da[ia];switch(oa){case "[":S=da;oa={escaped:"",newpos:ia};for(ia++;ia<S.length;){var qa=S[ia];ia++;if("]"===qa)break;oa.escaped+=qa}oa.newpos=ia-1;S=oa;X+=S.escaped;ia=S.newpos;continue;case "D":case "d":case "m":case "s":case "R":case "G":S=F(da,ia,oa);ia=P.getAngle(aa);
a:{oa=ea[oa];qa=S.padding;var wa=S.rounding,Ha=ha,R=null;switch(oa){case 1:case 4:case 5:R=h(a(ia.extractAngularUnits(oa),wa),c(oa));ia=b(R.toFixed(wa),"0",qa+wa+(0<wa?1:0));break a;case 6:case 7:R=h(Ha.fetchFormattedDms().getField(oa),c(oa));ia=b(R.toFixed(wa),"0",qa+wa+(0<wa?1:0));break a;case 8:R=h(a(Ha.fetchDms().getField(oa),wa),c(oa));ia=b(R.toFixed(wa),"0",qa+wa+(0<wa?1:0));break a;default:throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});
}}X+=ia;ia=S.newpos;continue;case "P":case "p":X+=n(ha.fetchMeridian(),"p"===oa?"SHORT":"LONG");continue;case "B":case "b":X+=n(ha.fetchDirection(),"b"===oa?"SHORT":"LONG");continue;default:X+=oa}}return X;default:throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.InvalidParameter,null);}}})},"esri/arcade/functions/hash":function(){define(["require","exports"],function(g,e){function t(u){for(var l=[],q=0,k=u.length;q<k;q++){var a=u.charCodeAt(q);128>a?l.push(a):2048>a?l.push(192|a>>6,128|
a&63):55296>a||57344<=a?l.push(224|a>>12,128|a>>6&63,128|a&63):(q++,a=65536+((a&1023)<<10|u.charCodeAt(q)&1023),l.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|a&63))}return new Uint8Array(l)}Object.defineProperty(e,"__esModule",{value:!0});e.XXH=void 0;g=function(){function u(l){this._seed=l;this._totallen=0;this._bufs=[];this.init()}u.prototype.init=function(){this._bufs=[];this._totallen=0;return this};u.prototype.updateFloatArray=function(l){for(var q=[],k=0;k<l.length;k++){var a=l[k];isNaN(a)?
q.push("NaN"):Infinity===a?q.push("Infinity"):-Infinity===a?q.push("-Infinity"):0===a?q.push("0"):q.push(a.toString(16))}this.update(t(q.join("")))};u.prototype.updateIntArray=function(l){l=Int32Array.from(l);this.update(new Uint8Array(l.buffer))};u.prototype.updateUint8Array=function(l){this.update(Uint8Array.from(l))};u.prototype.updateWithString=function(l){return this.update(t(l))};u.prototype.update=function(l){this._bufs.push(l);this._totallen+=l.length;return this};u.prototype.digest=function(){for(var l=
new Uint8Array(this._totallen),q=0,k=0,a=this._bufs;k<a.length;k++){var d=a[k];l.set(d,q);q+=d.length}this.init();return this._xxHash32(l,this._seed)};u.prototype._xxHash32=function(l,q){void 0===q&&(q=0);var k=q+374761393&4294967295,a=0;if(16<=l.length){k=[q+2654435761+2246822519&4294967295,q+2246822519&4294967295,q+0&4294967295,q-2654435761&4294967295];var d=l.length-16;for(a=q=0;(a&4294967280)<=d;a+=4){var n=a,b=l[n+0]+(l[n+1]<<8);n=l[n+2]+(l[n+3]<<8);b=k[q]+(2246822519*b+(2246822519*n<<16))&4294967295;
b=b<<13|b>>>19;k[q]=2654435761*(b&65535)+(2654435761*(b>>>16)<<16)&4294967295;q=q+1&3}k=(k[0]<<1|k[0]>>>31)+(k[1]<<7|k[1]>>>25)+(k[2]<<12|k[2]>>>20)+(k[3]<<18|k[3]>>>14)&4294967295}k=k+l.length&4294967295;for(q=l.length-4;a<=q;a+=4)n=a,b=l[n+0]+(l[n+1]<<8),n=l[n+2]+(l[n+3]<<8),k=k+(3266489917*b+(3266489917*n<<16))&4294967295,k=k<<17|k>>>15,k=668265263*(k&65535)+(668265263*(k>>>16)<<16)&4294967295;for(;a<l.length;++a)q=l[a],k+=374761393*q,k=k<<11|k>>>21,k=2654435761*(k&65535)+(2654435761*(k>>>16)<<
16)&4294967295;k^=k>>>15;k=(2246822519*(k&65535)&4294967295)+(2246822519*(k>>>16)<<16);k^=k>>>13;k=(3266489917*(k&65535)&4294967295)+(3266489917*(k>>>16)<<16);k^=k>>>16;return 0>k?k+4294967296:k};return u}();e.XXH=g})},"esri/arcgis/Portal":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/_base/Deferred dojo/_base/array dojo/_base/sniff require ../config ../kernel ../lang ../request ../urlUtils ../Evented ../IdentityManager".split(" "),function(g,e,t,u,l,q,k,a,d,n,b,h,c){var f=
{options:{disableIdentityLookup:!0},requestParams:{f:"json"}},p=function(x){function w(C){x[C]||(x[C]=function(){var B=arguments;return u.when(x,function(I){Array.prototype.unshift.call(B,I.results||I);return p(l[C].apply(l,B))})})}if(!x)return x;x.then&&(x=e.delegate(x));x.total||(x.total=u.when(x,function(C){return n.isDefined(C.total)?C.total:C.length||0}));w("forEach");w("filter");w("map");w("some");w("every");return x},r={useSSL:function(x,w){var C=f&&f.self||{};if(C&&!C.isPortal)return-1!==
x.indexOf("https:")||C.allSSL?w.replace("http:","https:"):w;var B=r.getLocation(w);return-1<C.portalHostname.toLowerCase().indexOf(B.hostname.toLowerCase())&&B.port&&"80"!==B.port&&"443"!==B.port?(w=B.pathname,w=0===w.indexOf("/")?w:"/"+w,C.allSSL||-1<x.indexOf("https:")?"https://"+B.hostname+(C.httpsPort&&"443"!==C.httpsPort?":"+C.httpsPort:"")+w+B.search:"http://"+B.hostname+(C.httpPort&&"80"!==C.httpPort?":"+C.httpPort:"")+w+B.search):-1!==x.indexOf("https:")||C.allSSL?w.replace("http:","https:"):
w},formatUrl:function(x){var w=f.currentToken;return-1!==x.indexOf("null")?null:r.useSSL(window.location.protocol,w?x+(-1!==x.indexOf("?")?"\x26":"?")+("token\x3d"+w):x)},getLocation:function(x){var w=document.createElement("a");w.href=x;return{protocol:w.protocol,hostname:w.hostname,port:w.port,pathname:w.pathname,search:w.search,hash:w.hash,host:w.host}},resultsToTypedArray:function(x,w,C){C=C?C.listings||C.notifications||C.userInvitations||C.tags||C.items||C.groups||C.comments||C.provisions||C.results||
C:[];return l.map(C,function(B){B=e.mixin(B,w||{});return x?new x(B):B})},clearFieldsFromObject:function(x,w){var C,B=x.length;if(e.isArray(x))for(C=0;C<B;C++)delete w[x[C]];else for(C in x)delete w[C];return w},requestToTypedArray:function(x,w,C,B,I){return p(r.request(x,w,C).then(e.partial(r.resultsToTypedArray,B,I)))},request:function(x,w,C){if(w){w.portal&&delete w.portal;if(w.form){var B=w.form;delete w.form}if(w.hasOwnProperty("withCredentials")){var I=w.withCredentials;delete w.withCredentials}}w=
e.mixin(e.mixin({},w||{}),f.requestParams);x={url:r.useSSL(window.location.protocol,x.url||x),content:w,callbackParamName:"callback",timeout:N&&N.timeout||0,form:B};null!=I&&(x.withCredentials=I);var N=e.mixin(C||{},f.options);return b(x,N)},formatQueryParams:function(x,w,C){x=e.mixin(e.mixin({},x),e.isString(w)?{q:w}:w||{});x.q=!C&&f.extraQuery?"("+x.q+")"+f.extraQuery:x.q;return x}},m=g([],{declaredClass:"esri.arcgis.PortalComment",constructor:function(x){e.mixin(this,x);this.url=this.item.itemUrl+
"/comments/"+this.id;this.created=this.created?new Date(this.created):null}}),v=g([],{declaredClass:"esri.arcgis.PortalRating",constructor:function(x){e.mixin(this,x);this.url=this.item.itemUrl+"/rating";this.created=this.created?new Date(this.created):null}}),z=g([],{declaredClass:"esri.arcgis.PortalItem",constructor:function(x){e.mixin(this,x);this.folderId=this.ownerFolder||this.folderId;this.itemUrl=(this.portal&&this.portal.portalUrl)+"content/items/"+this.id;this.userItemUrl=this.hasOwnProperty("ownerFolder")?
this.itemUrl.replace("/content/","/content/users/"+this.owner+(this.folderId?"/"+this.folderId:"")+"/"):null;this.itemDataUrl=r.formatUrl(this.itemUrl+"/data");this.thumbnailUrl=r.formatUrl(this.itemUrl+"/info/"+this.thumbnail);this.displayName=this._getDisplayName();this.iconUrl=this._getIconUrl();this.isPremiumContent=this._getIsPremiumContent();this.created=this.created?new Date(this.created):null;this.uploaded=this.uploaded?new Date(this.uploaded):null;this.modified=this.modified?new Date(this.modified):
null},getTypeInfo:function(){var x=this.type;return{source:-1<l.indexOf(this.typeKeywords||[],"ArcGIS Server")||"Feature Collection"===x?x:null,displayName:this.displayName,iconUrl:this.iconUrl,isPremiumContent:this.isPremiumContent,premiumIconUrl:this._getPremiumIconUrl()}},addComment:function(x){var w=e.isString(x)?{comment:x}:x;return r.request(this.itemUrl+"/addComment",w,{usePost:!0}).then(e.hitch(this,function(C){return new m(e.mixin(w,{id:C.commentId,item:this}))}))},updateComment:function(x){if(x&&
x.url&&x.comment)return r.request(x.url+"/update",{comment:x.comment},{usePost:!0}).then(function(w){x.id=w.commentId;return x});throw Error();},getComments:function(){return r.requestToTypedArray(this.itemUrl+"/comments",null,null,m,{item:this})},deleteComment:function(x){if(x&&x.url)return r.request(x.url+"/delete",null,{usePost:!0});throw Error();},addRating:function(x){var w=e.isObject(x)?x:{rating:parseFloat(x)};return r.request(this.itemUrl+"/addRating",w,{usePost:!0}).then(e.hitch(this,function(C){return new v(e.mixin(w,
{id:C.ratingId,item:this}))}))},getRating:function(){return r.request(this.itemUrl+"/rating").then(e.hitch(this,function(x){return new v(e.mixin(x,{item:this}))}))},deleteRating:function(){return r.request(this.itemUrl+"/deleteRating",null,{usePost:!0})},_getDisplayName:function(){var x=this.type,w=this.typeKeywords||[],C=x;"Feature Service"===x||"Feature Collection"===x?C=w.includes("Table")?"Table":w.includes("Route Layer")?"Route Layer":w.includes("Markup")?"Markup":"Feature Layer":"Image Service"===
x?C=w.includes("Elevation 3D Layer")?"Elevation Layer":w.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===x?C="Scene Layer":"Video Service"===x?C="Video Layer":"Scene Package"===x?C="Scene Layer Package":"Stream Service"===x?C="Feature Layer":"Geoprocessing Service"===x?C=w.includes("Web Tool")?"Tool":"Geoprocessing Service":"Geoenrichment Service"===x?C="GeoEnrichment Service":"Geocoding Service"===x?C="Locator":"Microsoft Powerpoint"===x?C="Microsoft PowerPoint":
"GeoJson"===x?C="GeoJSON":"Globe Service"===x?C="Globe Layer":"Vector Tile Service"===x?C="Tile Layer":"netCDF"===x?C="NetCDF":"Map Service"===x?C=w.includes("Spatiotemporal")||!w.includes("Hosted Service")&&!w.includes("Tiled")||w.includes("Relational")?"Map Image Layer":"Tile Layer":x&&x.toLowerCase().includes("add in")?C=x.replaceAll(/(add in)/gi,"Add-In"):"datastore catalog service"===x?C="Big Data File Share":"Compact Tile Package"===x?C="Tile Package (tpkx)":"Raster function template"===x?C=
"Raster Function Template":"OGCFeatureServer"===x?C="OGC Feature Layer":"web mapping application"===x&&w.includes("configurableApp")?C="Instant App":"Insights Page"===x?C="Insights Report":"Excalibur Imagery Project"===x?C="Excalibur Project":"3DTiles Service"===x?C="3D tiles layer":"3DTiles Package"===x&&(C="3D tiles package");return C},_getIconUrl:function(){var x=this.type&&this.type.toLowerCase()||"",w=this.typeKeywords||[],C=!1,B=!1,I=!1,N=!1,V=!1,Y=!1;C=B=!1;0<x.indexOf("service")||"feature collection"===
x||"kml"===x||"wms"===x||"wmts"===x||"wfs"===x?(C=w.includes("Hosted Service"),"feature service"===x||"feature collection"===x||"kml"===x||"wfs"===x?(N=w.includes("Table"),B=w.includes("Route Layer"),I=w.includes("Markup"),V=w.includes("Spatiotemporal"),Y=w.includes("UtilityNetwork"),x=V&&N?"spatiotemporaltable":N?"table":B?"routelayer":I?"markup":V?"spatiotemporal":Y?"utilitynetwork":C?"featureshosted":"features"):"map service"===x||"wms"===x||"wmts"===x?(V=w.includes("Spatiotemporal"),B=w.includes("Relational"),
x=V||B?"mapimages":C||w.includes("Tiled")||"wmts"===x?"maptiles":"mapimages"):x="scene service"===x?w.includes("Line")?"sceneweblayerline":w.includes("3DObject")?"sceneweblayermultipatch":w.includes("Point")?"sceneweblayerpoint":w.includes("IntegratedMesh")?"sceneweblayermesh":w.includes("PointCloud")?"sceneweblayerpointcloud":w.includes("Polygon")?"sceneweblayerpolygon":w.includes("Building")?"sceneweblayerbuilding":w.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===x?w.includes("Elevation 3D Layer")?
"elevationlayer":w.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===x?"streamlayer":"vector tile service"===x?"vectortile":"datastore catalog service"===x?"datastorecollection":"geocoding service"===x?"geocodeservice":"video service"===x?w.includes("Live Stream")?"livestreamvideolayer":"videolayer":"geoprocessing service"===x?w.includes("Web Tool")?"tool":"layers":"geodata service"===x?"geodataservice":"3dtiles service"===x?w.includes("3DObject")?"3dobjecttileslayer":w.includes("IntegratedMesh")?
"integratedmeshtileslayer":"3dtileslayer":"layers"):x="web map"===x||"cityengine web scene"===x?"maps":"web scene"===x?w.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===x&&w.includes("configurableApp")?"instantapps":"web mapping application"===x||"mobile application"===x||"application"===x||"operation view"===x||"desktop application"===x?"apps":"map document"===x||"map package"===x||"published map"===x||"scene document"===x||"globe document"===x||"basemap package"===
x||"mobile basemap package"===x||"mobile map package"===x||"project package"===x||"project template"===x||"pro map"===x||"layout"===x||"layer"===x&&w.includes("ArcGIS Pro")||"explorer map"===x&&w.indexOf("Explorer Document")?"mapsgray":"service definition"===x||"shapefile"===x||"cad drawing"===x||"geojson"===x||"netcdf"===x||"administrative report"===x?"datafiles":"360 vr experience"===x?"360vr":"explorer add in"===x||"desktop add in"===x||"windows viewer add in"===x||"windows viewer configuration"===
x?"appsgray":"arcgis pro add in"===x||"arcgis pro configuration"===x?"addindesktop":"pdf"===x?"pdf":"microsoft word"===x?"word":"microsoft excel"===x?"excel":"microsoft powerpoint"===x?"ppt":"rule package"===x||"file geodatabase"===x||"sqlite geodatabase"===x||"csv collection"===x||"kml collection"===x||"windows mobile package"===x||"map template"===x||"desktop application template"===x||"gml"===x||"arcpad package"===x||"code sample"===x||"document link"===x||"earth configuration"===x||"operations dashboard add in"===
x||"rules package"===x||"workflow manager package"===x||"explorer map"===x&&w.includes("Explorer Mapping Application")||w.includes("Document")?"datafilesgray":"network analysis service"===x||"geoprocessing service"===x||"geodata service"===x||"geometry service"===x||"geoprocessing package"===x||"locator package"===x||"geoprocessing sample"===x||"workflow manager service"===x?"toolsgray":"layer"===x||"layer package"===x||"explorer layer"===x?"layersgray":"scene package"===x?"scenepackage":"3dtiles package"===
x?"3dtileslayerpackage":"3dtiles service"===x?"3dtileslayer":"mobile scene package"===x?"mobilescenepackage":"tile package"===x||"compact tile package"===x?"tilepackage":"task file"===x?"taskfile":"report template"===x?"report-template":"statistical data collection"===x?"statisticaldatacollection":"insights workbook"===x?"workbook":"insights model"===x?"insightsmodel":"insights page"===x?"insightspage":"insights theme"===x?"insightstheme":"hub initiative"===x?"hubinitiative":"hub page"===x?"hubpage":
"hub site application"===x?"hubsite":"hub event"===x?"hubevent":"hub project"===x?"hubproject":"relational database connection"===x?"relationaldatabaseconnection":"big data file share"===x?"datastorecollection":"image collection"===x?"imagecollection":"desktop style"===x?"desktopstyle":"style"===x?"style":"dashboard"===x?"dashboard":"raster function template"===x?"rasterprocessingtemplate":"vector tile package"===x?"vectortilepackage":"ortho mapping project"===x?"orthomappingproject":"ortho mapping template"===
x?"orthomappingtemplate":"solution"===x?"solutions":"geopackage"===x?"geopackage":"deep learning package"===x?"deeplearningpackage":"real time analytic"===x?"realtimeanalytics":"big data analytic"===x?"bigdataanalytics":"feed"===x?"feed":"excalibur imagery project"===x?"excaliburimageryproject":"notebook"===x?"notebook":"storymap"===x?"storymap":"survey123 add in"===x?"survey123addin":"mission"===x?"mission":"mission report"===x?"missionreport":"mission template"===x?"missiontemplate":"quickcapture project"===
x?"quickcaptureproject":"pro report"===x?"proreport":"pro report template"===x?"proreporttemplate":"urban model"===x?"urbanmodel":"web experience"===x?"experiencebuilder":"web experience template"===x?"webexperiencetemplate":"experience builder widget"===x?"experiencebuilderwidget":"experience builder widget package"===x?"experiencebuilderwidgetpackage":"workflow"===x?"workflow":"kernel gateway connection"===x?"kernelgatewayconnection":"insights script"===x?"insightsscript":"hub initiative template"===
x?"hubinitiativetemplate":"storymap theme"===x?"storymaptheme":"knowledge graph"===x?"knowledgegraph":"knowledge studio project"===x?"knowledgestudio":"native application"===x?"nativeapp":"native application installer"===x?"nativeappinstaller":"web link chart"===x?"linkchart":"knowledge graph web investigation"===x?"investigation":"ogcfeatureserver"===x?"features":"pro project"===x?"proproject":"insights workbook package"===x?"insightsworkbookpackage":"apache parquet"===x?"apacheparquet":"notebook code snippets"===
x||"notebook code snippet library"===x?"notebookcodesnippets":"suitability model"===x?"suitabilitymodel":"esri classifier definition"===x?"classifierdefinition":"esri classification schema"===x?"classificationschema":"insights data engineering workbook"===x?"dataengineeringworkbook":"insights data engineering model"===x?"dataengineeringmodel":"deep learning studio project"===x?"deeplearningproject":"discussion"===x?"discussion":"allsource project"===x?"allsourceproject":"api key"===x?"apikey":"data pipeline"===
x?"datapipelines":"group layer"===x?(C=w.includes("Map"))?"layergroup2d":"layergroup":"media layer"===x?"onlinemedialayer":"form"===x?w.includes("Survey123")?"survey":"datafilesgray":"csv"===x?"csv":"image"===x?"image":"maps";return x?k.toUrl("../css/images/item_type_icons/"+x+"16.png"):null},_getIsPremiumContent:function(){var x=this.typeKeywords,w=!1;if(-1<l.indexOf(x,"Requires Subscription")||-1<l.indexOf(x,"Requires Credits"))w=!0;return w},_getPremiumIconUrl:function(){var x=this.typeKeywords,
w;this.isPremiumContent&&(w=-1<l.indexOf(x,"Requires Credits")?"premiumcredits":"premiumitem");return w?k.toUrl("../css/images/item_type_icons/"+w+"16.png"):null},getThumbnailUrl:function(x){var w=this.thumbnailUrl;w&&x&&(w+=(-1===w.indexOf("?")?"?":"\x26")+"w\x3d"+x);return w}}),A=g([],{declaredClass:"esri.arcgis.PortalListing",constructor:function(x){e.mixin(this,x);this.id=this.itemId;this.url=(this.portal&&this.portal.portalUrl)+"content/"+(this.userItemUrl?"items/":"listings/")+this.itemId;this.commentsUrl=
this.url+"/comments";this.created=this.created?new Date(this.created):null;this.banner=this.banner?r.formatUrl(this.url+"/info/"+this.banner):"";this.thumbnail=this.thumbnail?r.formatUrl(this.url+"/info/"+this.thumbnail):"";this.largeThumbnail=this.largeThumbnail?r.formatUrl(this.url+"/info/"+this.largeThumbnail):"";this.avgRating=this.avgRating||0;this.numRatings=this.numRatings||0;this.numComments=this.numComments||0;this.listingProperties=this.listingProperties||{priceDesc:"",creditsPerTransaction:0,
licenseType:"free",trialSupported:!1,trialDuration:0,listingAccess:"private"};for(var w in this.listingProperties)this[w]&&(this.listingProperties[w]=this[w]);this.properties=this.properties||{systemRequirements:"",termsAndConditions:"",version:"1.0"};this.screenshots=l.map(this.screenshots,e.hitch(this,function(C){return r.formatUrl(this.url+"/info/"+C)}));this.vendorName=this.vendor.name;this.vendor.thumbnail=this.vendor.thumbnail?this.userItemUrl?r.formatUrl(this.portal.portalUrl+"/portals/self/resources/"+
this.vendor.thumbnail):r.formatUrl(this.url+"/vendorinfo/"+this.vendor.thumbnail):""},getComments:function(){return r.requestToTypedArray(this.commentsUrl,null,null,m,{item:this})},getVendor:function(){return this.vendor}}),D=g([],{declaredClass:"esri.arcgis.PortalProvision",constructor:function(x){e.mixin(this,x);this.created=this.created?new Date(this.created):null;this.startDate=this.startDate?new Date(this.startDate):null;this.endDate=this.endDate&&-1!==this.endDate?new Date(this.endDate):null;
this.listing=x.listing?new A(e.mixin(x.listing,{portal:this.portal})):null}}),E=g([],{declaredClass:"esri.arcgis.PortalGroup",constructor:function(x){e.mixin(this,x);this.url=(this.portal&&this.portal.portalUrl)+"community/groups/"+this.id;this.thumbnailUrl=r.formatUrl(this.url+"/info/"+this.thumbnail);this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getMembers:function(){return r.request(this.url+"/users")},queryItems:function(x,w){x=
r.formatQueryParams({},x,w);x.q="group:"+this.id+(x.q?" "+x.q:"");return this.portal.queryItems(x)},getThumbnailUrl:function(x){var w=this.thumbnailUrl;w&&x&&(w+=(-1===w.indexOf("?")?"?":"\x26")+"w\x3d"+x);return w}}),F=g([],{declaredClass:"esri.arcgis.PortalFolder",constructor:function(x){e.mixin(this,x);this.url=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username+"/"+this.id;this.created=this.created?new Date(this.created):null},getItems:function(){return r.requestToTypedArray(this.url,
null,null,z,{portal:this.portal,folderId:this.id})}}),y=g([],{declaredClass:"esri.arcgis.PortalUser",constructor:function(x){e.mixin(this,x);this.url=(this.portal&&this.portal.portalUrl)+"community/users/"+this.username;this.userContentUrl=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username;this.thumbnailUrl=this.thumbnail?r.formatUrl(this.url+"/info/"+this.thumbnail):null;this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},
getGroups:function(){return p(r.request(this.url).then(e.hitch(this,function(x){return r.resultsToTypedArray(E,{portal:this.portal},x.groups)})))},getNotifications:function(){return r.requestToTypedArray(this.url+"/notifications",null,null,null,{portal:this.portal})},getGroupInvitations:function(){return r.requestToTypedArray(this.url+"/invitations",null,null,null,{portal:this.portal})},getTags:function(){return r.requestToTypedArray(this.url+"/tags",null,null,null,{portal:this.portal})},getFolders:function(){return p(this.getContent(null,
{num:1}).then(function(x){return x.folders}))},getItems:function(x){return p(this.getContent(x).then(function(w){return w.items}))},getItem:function(x){return r.request(this.portal.portalUrl+"content/items/"+x).then(e.hitch(this,function(w){return new z(e.mixin(w,{portal:this.portal}))}))},getContent:function(x,w){var C=this.url.replace("/community/","/content/")+(x?"/"+x:"");return r.request(C,w).then(e.hitch(this,function(B){B.folders=r.resultsToTypedArray(F,{portal:this.portal},B.folders);B.items=
r.resultsToTypedArray(z,{portal:this.portal,folderId:x},B.items);return B}))},getThumbnailUrl:function(x){var w=this.thumbnailUrl;w&&x&&(w+=(-1===w.indexOf("?")?"?":"\x26")+"w\x3d"+x);return w}});g={Portal:g([c],{declaredClass:"esri.arcgis.Portal",onLoad:function(){},onError:function(){},constructor:function(x){x=e.isObject(x)?x:{url:x};this.registerConnectEvents();f={options:{disableIdentityLookup:!0},requestParams:{f:"json"}};x.self?(f.self=x.self,e.mixin(this,{url:x.url||h.getProtocolForWebResource()+
"//"+(x.self.urlKey?x.self.urlKey+"."+x.self.customBaseUrl:x.self.portalHostname)}),this.portalUrl=-1!==this.url.indexOf("/sharing")?this.url+"/":this.url+"/sharing/rest/",x=x.self.user?this.signIn():this.init(this.url)):(x.url&&e.mixin(this,{url:x.url}),x=this.init(this.url));x.then(e.hitch(this,function(){this.emit("ready",this);this.onLoad(this)}))},init:function(x,w){x=(x||this.portalUrl).replace(/\/+$/,"");this.portalUrl=-1!==x.indexOf("/sharing")?x+"/":x+"/sharing/rest/";h.canUseXhr(this.portalUrl)||
a.defaults.io.corsEnabledServers.push(this.portalUrl.replace(/^https?:\/\//i,""));return this._getSelf(this.portalUrl).then(e.hitch(this,function(C){f.self=e.mixin({},C);(C=C.user)&&w&&(f.currentToken=w&&w.token,f.loggedInUser=new y(e.mixin(C,{portal:this,credential:w})));f.self.id&&!1===f.self.canSearchPublic&&(f.extraQuery=" AND orgid:"+f.self.id);e.mixin(this,f.self);this.thumbnailUrl=r.formatUrl(this.portalUrl+"portals/self/resources/"+this.thumbnail);this.isOrganization=this.access&&this.access.length?
!0:!1;this.created=this.created?new Date(this.created):null;this.modified=this.modified?new Date(this.modified):null;return this}),e.hitch(this,function(C){this.onError(C);throw C;}))},signIn:function(){var x=new u,w=e.hitch(this,function(){this._onSignIn().then(e.hitch(this,function(){x.resolve(f.loggedInUser)}),e.hitch(this,function(C){x.reject(C)}))});if(f&&f.self)f&&f.loggedInUser?setTimeout(function(){x.resolve(f.loggedInUser)},0):w();else this.on("load",e.hitch(this,function(){w()}));return x},
signOut:function(){f.loggedInUser.credential&&f.loggedInUser.credential.destroy();f.loggedInUser=null;f.options.disableIdentityLookup=!0;r.clearFieldsFromObject(f.self,this);f.self=null;return this.init(this.url)},getPortalUser:function(){return f.loggedInUser},addResource:function(x,w){return r.request(this.portalUrl+"portals/self/addResource",{key:x,text:w},{usePost:!0})},update:function(x){return r.request(this.portalUrl+"portals/self/update",x,{usePost:!0})},queryGroups:function(x,w){return this._queryPortal(this.portalUrl+
"community/groups",r.formatQueryParams({},x,w),E)},queryItems:function(x,w){return this._queryPortal(this.portalUrl+"search",r.formatQueryParams({},x,w),z)},queryListings:function(x){x=r.formatQueryParams({},x,!0);var w="";x.q&&-1<x.q.toLowerCase().indexOf("mylistings:true")?(x.q=x.q.toLowerCase().replace("mylistings:true",""),w="?mylistings\x3dtrue"):x.q||(x.q='""');return this._queryPortal(this.portalUrl+"content/listings"+w,x,A)},queryCustomerList:function(x,w){x=r.formatQueryParams({},x,!0);return this._queryPortal(this.portalUrl+
"portals/self/customersList",x)},getProvisions:function(){return this.getCustomers().then(e.hitch(this,function(x){return x.purchases}))},getInterests:function(){return this.getCustomers().then(e.hitch(this,function(x){return x.interests}))},getTrials:function(){return this.getCustomers().then(e.hitch(this,function(x){return x.trials}))},getCustomers:function(x){return r.request(this.portalUrl+"portals/self/customers",{status:x||"all"})},getMyPurchases:function(){return this.getPurchases().then(function(x){return x.purchases})},
getMyInterests:function(){return this.getPurchases().then(function(x){return x.interests})},getPurchases:function(){return r.request(this.portalUrl+"portals/self/purchases").then(e.hitch(this,function(x){x.interests=l.map(x.interests,function(w){return e.mixin(w.provision,{listing:w.listing})});x.purchases=l.map(x.purchases,function(w){return e.mixin(w.provision,{listing:w.listing})});x.trials=l.map(x.trials,function(w){return e.mixin(w.provision,{listing:w.listing})});x.interests=r.resultsToTypedArray(D,
{portal:this},x.interests);x.trials=r.resultsToTypedArray(D,{portal:this},x.trials);x.purchases=r.resultsToTypedArray(D,{portal:this},x.purchases);return x}))},queryUsers:function(x,w){return this._queryPortal(this.portalUrl+"community/users",r.formatQueryParams({sortField:"username"},x,w),y)},_onSignIn:function(){f.options.disableIdentityLookup=!1;f.self=null;return d.id.getCredential(this.portalUrl).then(e.hitch(this,"init",this.url)).then(function(){return f.loggedInUser},e.hitch(this,function(x){f.options.disableIdentityLookup=
!0;this.onError(x);throw x;}))},_getSelf:function(x){x+="portals/self";if(f.self){var w=new u;setTimeout(function(){w.resolve(f.self)},0)}else w=r.request(x,{culture:t.locale,withCredentials:!0});return w},_queryPortal:function(x,w,C){var B=e.mixin({num:10,start:0,sortField:"title",sortOrder:"asc"},w),I=["start","query","num","nextStart"];x=r.request(x,B).then(e.hitch(this,function(N){N.results=r.resultsToTypedArray(C,{portal:this},N);N.queryParams=e.mixin({},B);N.nextQueryParams=e.mixin(B,{start:N.nextStart});
return r.clearFieldsFromObject(I,N)}));x=e.delegate(x);x.queryParams=e.mixin({},B);x.nextQueryParams=u.when(x,function(N){return N.nextQueryParams});return p(x)}}),PortalFolder:F,PortalGroup:E,PortalItem:z,PortalUser:y,PortalComment:m,PortalRating:v,PortalUtil:r,PortalResult:p,PortalListing:A};e.mixin(e.getObject("arcgis",!0,d),g);return g})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),function(g,e,t,u,l,q){g=g([u],{declaredClass:"esri.Evented",
registerConnectEvents:function(){var k=this.constructor,a=this.constructor._meta.parents,d=[{}],n={},b,h=function(f,p){e.isArray(f)||(f=[f]);for(var r=0;r<f.length;r++){var m=f[r];m._meta&&m._meta.parents&&h(m._meta.parents,p);m.prototype._eventMap&&p.push(e.mixin({},m.prototype._eventMap))}return p};if(!k._onMap){h(a,d);d.push(this._eventMap);a=e.mixin.apply(this,d);for(c in this)/^on\w/.test(c)&&e.isFunction(this[c])&&(d=this._hyphenLower(c).toLowerCase(),a[d]||(n[d]={method:c}));for(b in a){var c=
this._onCamelCase(b);n[b]={method:c,argKeys:a[b]}}k._onMap=n;return k._onMap}},on:function(k,a){if(-1<k.indexOf(",")){for(var d=k.split(/\s*,\s*/),n=d.length,b=[];n--;)b.push(this.on(d[n],a));b.remove=function(){for(var f=0;f<b.length;f++)b[f].remove()};return b}d=this.constructor._onMap||this.registerConnectEvents();n="string"==typeof k&&k.toLowerCase();var h=this._onCamelCase(n),c=d&&d[n];return(h=c&&c.method||this[h]&&e.isFunction(this[h])&&h)?c&&e.isArray(c.argKeys)?(d=this._onArr2Obj(a,d[n].argKeys),
t.after(this,h,d,!0)):t.after(this,h,function(f){f=f||{};f.target||(f.target=this);a.call(this,f)},!0):this.inherited(arguments)},emit:function(k,a){var d,n,b=k.toLowerCase();var h=this._onCamelCase(k);var c=this.constructor._onMap||this.registerConnectEvents();h=(n=c&&c[b]&&c[b].method||e.isFunction(this[h])&&h)&&this[n];n&&c&&c[b]&&this._onObj2Arr(function(){d=Array.prototype.slice.call(arguments)},c[b].argKeys)(a);a=a||{};a.target||(a.target=this);if(h){var f=d&&d.length?d:[a];f=h.apply(this,f)}this.inherited(arguments,
[k,a]);return f},_onObj2Arr:function(k,a){if(a){var d=this;return function(n){var b,h=[],c=a.length;for(b=0;b<c;b++)h[b]=n[a[b]];k.apply(d,h)}}return k},_onArr2Obj:function(k,a){if(a){var d=this;return function(){var n,b={},h=arguments.length;for(n=0;n<h;n++)b[a[n]]=arguments[n];b.target||(b.target=d);k.call(d,b)}}return k},_hyphenLower:function(k){return k.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(a,d){return(d?"-":"")+a.toLowerCase()})},_onCamelCase:function(k){return"on"+k.substr(0,
1).toUpperCase()+k.substr(1).replace(/\-([a-z])/g,function(a,d){return d.toUpperCase()})}});return q.Evented=g})},"esri/IdentityManager":function(){define(["./IdentityManagerDialog","./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(g,e,t,u){g=new g;e.id=u.safeMixin(g,t);return e.id})},"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h,c,f,p,r){e=e([p],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(m){l.mixin(this,m);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(m,v,z){this._nls||(this._nls=r.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var A=this._loginDialog,D=z&&z.error,E=z&&z.token,F=new u(function(){A.onCancel()});if(A.open)return m=Error("BUSY"),m.name="identity-manager:busy",m.code="IdentityManager.1",m.log=!!t.isDebug,F.errback(m),F;c.hide(A.errMsg_);D&&403==D.code&&E&&(k.set(A.errMsg_,"innerHTML",this._nls.forbidden),
c.show(A.errMsg_));A.dfd_=F;A.serverInfo_=v;A.resUrl_=m;A.admin_=z&&z.isAdmin;k.set(A.resLink_,{title:m,innerHTML:"("+(this.getResourceName(m)||this._nls.lblItem)+")"});k.set(A.serverLink_,{title:v.server,innerHTML:(-1!==v.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":v.server)+" "});A.txtPwd_.set("value","");A.show();return F},_createLoginDialog:function(){var m=this._nls,v=h.substitute(m,this._dialogContent);v=h.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},v);var z=new n({title:m.title,content:v,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(A){A.charOrCode===a.ENTER&&this.execute_()},execute_:function(){var A=this.txtUser_.get("value"),D=this.txtPwd_.get("value"),E=this.dfd_,F=this;if(this.form_.validate()&&A&&D){this.btnSubmit_.set("label",m.lblSigning);var y=b.id.findCredential(F.resUrl_,A),x=function(w){F.btnSubmit_.set("label",
m.lblOk);F.btnSubmit_.set("disabled",!1);c.hide(F.errMsg_);F.hide();n._DialogLevelManager.hide(F);var C=F.serverInfo_;F.dfd_=F.serverInfo_=F.generateDfd_=F.resUrl_=null;var B=y;if(w){var I=w.token;var N=h.isDefined(w.expires)?Number(w.expires):null;var V=!!w.ssl;B?(B.userId=A,B.token=I,B.expires=N,B.validity=w.validity,B.ssl=V,B.creationTime=(new Date).getTime()):B=new f({userId:A,server:C.server,token:I,expires:N,ssl:V,isAdmin:F.admin_,validity:w.validity})}E.callback(B)};y&&!y._enqueued?x():(F.btnSubmit_.set("disabled",
!0),F.generateDfd_=b.id.generateToken(this.serverInfo_,{username:A,password:D},{isAdmin:this.admin_}).addCallback(x).addErrback(function(w){F.btnSubmit_.set("disabled",!1);F.generateDfd_=null;F.btnSubmit_.set("label",m.lblOk);k.set(F.errMsg_,"innerHTML",w&&w.code?m.invalidUser:m.noAuthService);c.show(F.errMsg_)}))}},cancel_:function(){z.generateDfd_&&z.generateDfd_.cancel();var A=z.dfd_,D=z.resUrl_,E=z.serverInfo_;z.btnSubmit_.set("disabled",!1);z.dfd_=z.serverInfo_=z.generateDfd_=z.resUrl_=null;
c.hide(z.errMsg_);n._DialogLevelManager.hide(z);z.esriIdMgr_.onDialogCancel({resourceUrl:D,serverInfo:E});D=Error("ABORTED");D.name="identity-manager:user-aborted";D.code="IdentityManager.2";D.log=!!t.isDebug;A.errback(D)}});v=z.domNode;z.form_=d.byNode(g.query(".esriIdForm",v)[0]);z.txtUser_=d.byNode(g.query(".esriIdUser",v)[0]);z.txtPwd_=d.byNode(g.query(".esriIdPwd",v)[0]);z.btnSubmit_=d.byNode(g.query(".esriIdSubmit",v)[0]);z.btnCancel_=d.byNode(g.query(".esriIdCancel",v)[0]);z.resLink_=g.query(".resLink",
v)[0];z.serverLink_=g.query(".serverLink",v)[0];z.errMsg_=g.query(".esriErrorMsg",v)[0];z.connect(z.txtUser_,"onKeyPress",z.keypressed_);z.connect(z.txtPwd_,"onKeyPress",z.keypressed_);z.connect(z.btnSubmit_,"onClick",z.execute_);z.connect(z.btnCancel_,"onClick",z.onCancel);z.connect(z,"onCancel",z.cancel_);return z}});return b.IdentityManagerDialog=b.IdentityManager=e})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h,c,f,p,r,m,v,z,A,D,E,F,y,x,w,C,B,I,N,V){function Y(){}var ca=new l;ca.resolve(!0);E=u("dijit._DialogBase"+(r("dojo-bidi")?"_NoBidi":""),[y,w,C,x],{templateString:V,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:E.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(ba){this._set("draggable",ba)},maxRatio:.9,
closable:!0,_setClosableAttr:function(ba){this.closeButtonNode.style.display=ba?"":"none";this._set("closable",ba)},postMixInProperties:function(){var ba=b.getLocalization("dijit","common");c.mixin(this,ba);this.inherited(arguments)},postCreate:function(){d.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);t.after(this,"onExecute",c.hitch(this,"hide"),!0);t.after(this,"onCancel",c.hitch(this,"hide"),!0);f(this.closeButtonNode,
m.press,function(ba){ba.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&O.isTop(this)&&(this._getFocusItems(),D.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();D.focus(this._firstFocusItem)},_endDrag:function(){var ba=a.position(this.domNode),Z=v.getBox(this.ownerDocument);ba.y=Math.min(Math.max(ba.y,0),Z.h-ba.h);ba.x=Math.min(Math.max(ba.x,0),Z.w-ba.w);this._relativePosition=ba;this._position()},
_setup:function(){var ba=this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==r("ie")?A:z)(ba,{handle:this.titleBar}),t.after(this._moveable,"onMoveStop",c.hitch(this,"_endDrag"),!0)):k.add(ba,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":e.map(this["class"].split(/\s/),function(Z){return Z+"_underlay"}).join(" "),_onKeyDown:c.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!k.contains(this.ownerDocumentBody,
"dojoMove")){var ba=this.domNode,Z=v.getBox(this.ownerDocument),fa=this._relativePosition,pa=a.position(ba);d.set(ba,{left:Math.floor(Z.l+(fa?Math.min(fa.x,Z.w-pa.w):(Z.w-pa.w)/2))+"px",top:Math.floor(Z.t+(fa?Math.min(fa.y,Z.h-pa.h):(Z.h-pa.h)/2))+"px"})}},_onKey:function(ba){if(ba.keyCode==h.TAB){this._getFocusItems();var Z=ba.target;this._firstFocusItem==this._lastFocusItem?(ba.stopPropagation(),ba.preventDefault()):Z==this._firstFocusItem&&ba.shiftKey?(D.focus(this._lastFocusItem),ba.stopPropagation(),
ba.preventDefault()):Z!=this._lastFocusItem||ba.shiftKey||(D.focus(this._firstFocusItem),ba.stopPropagation(),ba.preventDefault())}else this.closable&&ba.keyCode==h.ESCAPE&&(this.onCancel(),ba.stopPropagation(),ba.preventDefault())},show:function(){if(this.open)return ca.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),O.hide(this));var ba=v.get(this.ownerDocument);this._modalconnects.push(f(ba,
"scroll",c.hitch(this,"resize",null)));this._modalconnects.push(f(this.domNode,"keydown",c.hitch(this,"_onKey")));d.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();this._fadeInDeferred=new l(c.hitch(this,function(){Z.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,Y);ba=this._fadeInDeferred.promise;var Z=n.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:c.hitch(this,function(){O.show(this,this.underlayAttrs)}),
onEnd:c.hitch(this,function(){this.autofocus&&O.isTop(this)&&(this._getFocusItems(),D.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return ba},hide:function(){if(!this._alreadyInitialized||!this.open)return ca.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred=new l(c.hitch(this,function(){Z.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,Y);this._fadeOutDeferred.then(c.hitch(this,"onHide"));
var ba=this._fadeOutDeferred.promise;var Z=n.fadeOut({node:this.domNode,duration:this.duration,onEnd:c.hitch(this,function(){this.domNode.style.display="none";O.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var fa;fa=this._modalconnects.pop();)fa.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return ba},resize:function(ba){if("none"!=this.domNode.style.display){this._checkIfSingleChild();
if(!ba){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),e.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(da){da&&d.set(da,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var Z=v.getBox(this.ownerDocument);Z.w*=this.maxRatio;Z.h*=this.maxRatio;var fa=a.position(this.domNode);
this._shrunk=!1;fa.w>=Z.w&&(ba={w:Z.w},a.setMarginBox(this.domNode,ba),fa=a.position(this.domNode),this._shrunk=!0);fa.h>=Z.h&&(ba||(ba={w:fa.w}),ba.h=Z.h,this._shrunk=!0);ba&&(ba.w||(ba.w=fa.w),ba.h||(ba.h=fa.h))}if(ba){a.setMarginBox(this.domNode,ba);Z=[];this.titleBar&&Z.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&Z.push({domNode:this.actionBarNode,region:"bottom"});fa={domNode:this.containerNode,region:"center"};Z.push(fa);var pa=N.marginBox2contentBox(this.domNode,ba);N.layoutChildren(this.domNode,
pa,Z);this._singleChild?(Z=N.marginBox2contentBox(this.containerNode,fa),this._singleChild.resize({w:Z.w,h:Z.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();r("touch")||ba||this._position()}},_layoutChildren:function(){e.forEach(this.getChildren(),function(ba){ba.resize&&ba.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();
for(var ba;ba=this._modalconnects.pop();)ba.remove();O.hide(this);this.inherited(arguments)}});r("dojo-bidi")&&(E=u("dijit._DialogBase",E,{_setTitleAttr:function(ba){this._set("title",ba);this.titleNode.innerHTML=ba;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(ba){this._created&&this.textDir!=ba&&(this._set("textDir",ba),this.set("title",this.title))}}));var J=u("dijit.Dialog",[I,E],{});J._DialogBase=E;var O=J._DialogLevelManager={_beginZIndex:950,show:function(ba,Z){U[U.length-1].focus=
D.curNode;var fa=U[U.length-1].dialog?U[U.length-1].zIndex+2:J._DialogLevelManager._beginZIndex;d.set(ba.domNode,"zIndex",fa);B.show(Z,fa-1);U.push({dialog:ba,underlayAttrs:Z,zIndex:fa})},hide:function(ba){if(U[U.length-1].dialog==ba){U.pop();var Z=U[U.length-1];1==U.length?B.hide():B.show(Z.underlayAttrs,Z.zIndex-1);if(ba.refocus&&(ba=Z.focus,!Z.dialog||ba&&q.isDescendant(ba,Z.dialog.domNode)||(Z.dialog._getFocusItems(),ba=Z.dialog._firstFocusItem),ba))try{ba.focus()}catch(fa){}}else Z=e.indexOf(e.map(U,
function(fa){return fa.dialog}),ba),-1!=Z&&U.splice(Z,1)},isTop:function(ba){return U[U.length-1].dialog==ba}},U=J._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];D.watch("curNode",function(ba,Z,fa){ba=U[U.length-1].dialog;if(fa&&ba&&!ba._fadeOutDeferred&&fa.ownerDocument==ba.ownerDocument){do if(fa==ba.domNode||k.contains(fa,"dijitPopup"))return;while(fa=fa.parentNode);ba.focus()}});r("dijit-legacy-requires")&&p(0,function(){g(["dijit/TooltipDialog"])});return J})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare",
"./Moveable"],function(g,e){var t=e.prototype.onMove;return g("dojo.dnd.TimedMoveable",e,{timeout:40,constructor:function(u,l){l||(l={});l.timeout&&"number"==typeof l.timeout&&0<=l.timeout&&(this.timeout=l.timeout)},onMoveStop:function(u){u._timer&&(clearTimeout(u._timer),t.call(this,u,u._leftTop));e.prototype.onMoveStop.apply(this,arguments)},onMove:function(u,l){u._leftTop=l;if(!u._timer){var q=this;u._timer=setTimeout(function(){u._timer=null;t.call(q,u,u._leftTop)},this.timeout)}}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),
function(g,e,t,u,l,q){return e("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(k){var a=[];g.forEach(k||this.getChildren(),function(d){"value"in d?a.push(d):a=a.concat(this._getDescendantFormWidgets(d.getChildren()))},this);return a},reset:function(){g.forEach(this._getDescendantFormWidgets(),function(k){k.reset&&k.reset()})},validate:function(){var k=!1;return g.every(g.map(this._getDescendantFormWidgets(),function(a){a._hasBeenBlurred=!0;var d=a.disabled||!a.validate||
a.validate();d||k||(q.scrollIntoView(a.containerNode||a.domNode),a.focus(),k=!0);return d}),function(a){return a})},setValues:function(k){t.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",k)},_setValueAttr:function(k){var a={};g.forEach(this._getDescendantFormWidgets(),function(h){h.name&&(a[h.name]||(a[h.name]=[])).push(h)});for(var d in a)if(a.hasOwnProperty(d)){var n=a[d],b=u.getObject(d,!1,k);void 0!==b&&(b=[].concat(b),
"boolean"==typeof n[0].checked?g.forEach(n,function(h){h.set("value",-1!=g.indexOf(b,h._get("value")))}):n[0].multiple?n[0].set("value",b):g.forEach(n,function(h,c){h.set("value",b[c])}))}},getValues:function(){t.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var k={};g.forEach(this._getDescendantFormWidgets(),function(a){var d=a.name;if(d&&!a.disabled){var n=a.get("value");"boolean"==typeof a.checked?
/Radio/.test(a.declaredClass)?!1!==n?u.setObject(d,n,k):(n=u.getObject(d,!1,k),void 0===n&&u.setObject(d,null,k)):(a=u.getObject(d,!1,k),a||(a=[],u.setObject(d,a,k)),!1!==n&&a.push(n)):(a=u.getObject(d,!1,k),"undefined"!=typeof a?u.isArray(a)?a.push(n):u.setObject(d,[a,n],k):u.setObject(d,n,k))}});return k},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var k=g.map(this._descendants,function(a){return a.get("state")||""});return 0<=g.indexOf(k,"Error")?
"Error":0<=g.indexOf(k,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(k){this._descendants=this._getDescendantFormWidgets();g.forEach(this._descendants,function(a){a._started||a.startup()});k||this._onChildChange()},_onChildChange:function(k){k&&"state"!=k&&"disabled"!=k||this._set("state",this._getState());k&&"value"!=k&&"disabled"!=k&&"checked"!=k||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;
this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var k=this;this.own(l(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(a){a.target!=k.domNode&&k._onChildChange(a.type.replace("attrmodified-",""))}));this.watch("state",function(a,d,n){this.onValidStateChange(""==n)})},destroy:function(){this.inherited(arguments)}})})},
"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(g,e){return g("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var t=e._getTabNavigable(this.domNode);this._firstFocusItem=t.lowest||t.first||this.closeButtonNode||this.domNode;this._lastFocusItem=t.last||t.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h){var c=g("dijit.DialogUnderlay",[a,d],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(f){u.set(this.node,"id",f+"_underlay");this._set("dialogId",f)},_setClassAttr:function(f){this.node.className="dijitDialogUnderlay "+f;this._set("class",f)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(q(this.domNode,"keydown",e.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var f=this.node.style,p=this.domNode.style;p.display="none";var r=k.getBox(this.ownerDocument);p.top=r.t+"px";p.left=r.l+"px";f.width=r.w+"px";f.height=r.h+"px";p.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new n(this.domNode);var f=k.get(this.ownerDocument);this._modalConnects=[b.on("resize",e.hitch(this,"layout")),q(f,"scroll",
e.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});c.show=function(f,p){var r=c._singleton;!r||r._destroyed?r=h._underlay=c._singleton=new c(f):f&&r.set(f);l.set(r.domNode,"zIndex",p);r.open||r.show()};c.hide=function(){var f=
c._singleton;f&&!f._destroyed&&f.hide()};return c})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),function(g,e,t,u,l,q,k,a,d,n,b,h,c,f,p,r){return d("dijit.layout.ContentPane",[t,u,l],{href:"",content:"",extractContent:!1,parseOnLoad:!0,
parserScope:g._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(m,
v,z){var A=new z(m,v);return!A.href&&A._contentSetter&&A._contentSetter.parseDeferred&&!A._contentSetter.parseDeferred.isFulfilled()?A._contentSetter.parseDeferred.then(function(){return A}):A},create:function(m,v){if(!(m&&m.template||!v||"href"in m||"content"in m)){v=b.byId(v);for(var z=v.ownerDocument.createDocumentFragment();v.firstChild;)z.appendChild(v.firstChild);m=e.delegate(m,{content:z})}this.inherited(arguments,[m,v])},postMixInProperties:function(){this.inherited(arguments);var m=p.getLocalization("dijit",
"loading",this.lang);this.loadingMessage=q.substitute(this.loadingMessage,m);this.errorMessage=q.substitute(this.errorMessage,m)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&a.forEach(this._contentSetter.parseResults,function(m){m._started||m._destroyed||!e.isFunction(m.startup)||(m.startup(),m._started=!0)},this)},_startChildren:function(){a.forEach(this.getChildren(),
function(m){m._started||m._destroyed||!e.isFunction(m.startup)||(m.startup(),m._started=!0)});this._contentSetter&&a.forEach(this._contentSetter.parseResults,function(m){m._started||m._destroyed||!e.isFunction(m.startup)||(m.startup(),m._started=!0)},this)},setHref:function(m){g.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",m)},_setHrefAttr:function(m){this.cancel();this.onLoadDeferred=new n(e.hitch(this,"cancel"));this.onLoadDeferred.then(e.hitch(this,
"onLoad"));this._set("href",m);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(m){g.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",m)},_setContentAttr:function(m){this._set("href","");this.cancel();this.onLoadDeferred=new n(e.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(e.hitch(this,"onLoad"));this._setContent(m||"");this._isDownloaded=
!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(m){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},
refresh:function(){this.cancel();this.onLoadDeferred=new n(e.hitch(this,"cancel"));this.onLoadDeferred.then(e.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var m=this,v={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};e.isObject(this.ioArgs)&&e.mixin(v,this.ioArgs);var z=this._xhrDfd=(this.ioMethod||f.get)(v),A;z.then(function(D){A=D;try{return m._isDownloaded=!0,m._setContent(D,!1)}catch(E){m._onError("Content",
E)}},function(D){z.canceled||m._onError("Download",D);delete m._xhrDfd;return D}).then(function(){m.onDownloadEnd();delete m._xhrDfd;return A});delete this._hrefChanged},_onLoadHandler:function(m){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(m)}catch(v){}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(m){}},destroyDescendants:function(m){this.isLoaded&&this._onUnloadHandler();var v=this._contentSetter;a.forEach(this.getChildren(),function(z){z.destroyRecursive?
z.destroyRecursive(m):z.destroy&&z.destroy(m);z._destroyed=!0});v&&(a.forEach(v.parseResults,function(z){z._destroyed||(z.destroyRecursive?z.destroyRecursive(m):z.destroy&&z.destroy(m),z._destroyed=!0)}),delete v.parseResults);m||c.empty(this.containerNode);delete this._singleChild},_setContent:function(m,v){m=this.preprocessContent(m);this.destroyDescendants();var z=this._contentSetter;z&&z instanceof k._ContentSetter||(z=this._contentSetter=new k._ContentSetter({node:this.containerNode,_onError:e.hitch(this,
this._onError),onContentError:e.hitch(this,function(E){E=this.onContentError(E);try{this.containerNode.innerHTML=E}catch(F){}})}));var A=e.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!m.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});A=z.set(e.isObject(m)&&m.domNode?m.domNode:m,A);var D=this;return r(A&&A.then?A:z.parseDeferred,function(){delete D._contentSetterParams;
v||(D._started&&(D._startChildren(),D._scheduleLayout()),D._onLoadHandler(m))})},preprocessContent:function(m){return m},_onError:function(m,v,z){this.onLoadDeferred.reject(v);m=this["on"+m+"Error"].call(this,v);z||m&&this._setContent(m,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
function(g,e,t,u,l,q,k,a,d,n){return e("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var b=this.getParent();this._childOfLayoutWidget=b&&b.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(d.on("resize",q.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var b=[],h=!1;k("\x3e *",this.containerNode).some(function(c){var f=
a.byNode(c);f&&f.resize?b.push(f):!/script|link|style/i.test(c.nodeName)&&c.offsetHeight&&(h=!0)});this._singleChild=1!=b.length||h?null:b[0];t.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(b,h){this._resizeCalled=!0;this._scheduleLayout(b,h)},_scheduleLayout:function(b,h){this._isShown()?this._layout(b,h):(this._needLayout=!0,this._changeSize=b,this._resultSize=h)},_layout:function(b,h){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();
b&&u.setMarginBox(this.domNode,b);var c=this.containerNode;c===this.domNode?(h=h||{},q.mixin(h,b||{}),"h"in h&&"w"in h||(h=q.mixin(u.getMarginBox(c),h)),this._contentBox=n.marginBox2contentBox(c,h)):this._contentBox=u.getContentBox(c);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var b=this._contentBox||u.getContentBox(this.containerNode);this._singleChild.resize({w:b.w,h:b.h})}else{b=this.getChildren();for(var h,c=0;h=
b[c++];)h.resize&&h.resize()}},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var b=this.domNode,h=this.domNode.parentNode;return"none"!=b.style.display&&"hidden"!=b.style.visibility&&!t.contains(b,"dijitHidden")&&h&&h.style&&"none"!=h.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(g,e,t,u,l){function q(a,d){var n=a.resize?a.resize(d):t.setMarginBox(a.domNode,d);n?l.mixin(a,n):(l.mixin(a,t.getMarginBox(a.domNode)),l.mixin(a,d))}var k={marginBox2contentBox:function(a,d){var n=u.getComputedStyle(a),b=t.getMarginExtents(a,n),h=t.getPadBorderExtents(a,n);return{l:u.toPixelValue(a,n.paddingLeft),t:u.toPixelValue(a,n.paddingTop),w:d.w-(b.w+h.w),h:d.h-(b.h+h.h)}},layoutChildren:function(a,d,n,b,h){d=
l.mixin({},d);e.add(a,"dijitLayoutContainer");n=g.filter(n,function(c){return"center"!=c.region&&"client"!=c.layoutAlign}).concat(g.filter(n,function(c){return"center"==c.region||"client"==c.layoutAlign}));g.forEach(n,function(c){var f=c.domNode,p=c.region||c.layoutAlign;if(!p)throw Error("No region setting for "+c.id);var r=f.style;r.left=d.l+"px";r.top=d.t+"px";r.position="absolute";var m=e.add;var v=p;v=v.substring(0,1).toUpperCase()+v.substring(1);m.call(e,f,"dijitAlign"+v);f={};b&&b==c.id&&(f["top"==
c.region||"bottom"==c.region?"h":"w"]=h);"leading"==p&&(p=c.isLeftToRight()?"left":"right");"trailing"==p&&(p=c.isLeftToRight()?"right":"left");"top"==p||"bottom"==p?(f.w=d.w,q(c,f),d.h-=c.h,"top"==p?d.t+=c.h:r.top=d.t+d.h+"px"):"left"==p||"right"==p?(f.h=d.h,q(c,f),d.w-=c.w,"left"==p?d.l+=c.w:r.left=d.l+d.w+"px"):"client"!=p&&"center"!=p||q(c,d)})}};l.setObject("dijit.layout.utils",k);return k})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(g,e,t,u,l,q,k){var a=0,d={_secureForInnerHtml:function(n){return n.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:q.empty,_setNodeContent:function(n,b){q.empty(n);if(b)if("number"==typeof b&&(b=b.toString()),"string"==typeof b&&(b=q.toDom(b,n.ownerDocument)),!b.nodeType&&e.isArrayLike(b))for(var h=b.length,c=0;c<b.length;c=h==b.length?c+1:0)q.place(b[c],n,"last");else q.place(b,n,"last");return n},_ContentSetter:u("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:g._scopeName,startup:!0,constructor:function(n,b){e.mixin(this,n||{});b=this.node=l.byId(this.node||b);this.id||(this.id=["Setter",b?b.id||b.tagName:"",a++].join("_"))},set:function(n,b){void 0!==n&&(this.content=n);"number"==typeof n&&(n=n.toString());b&&this._mixin(b);this.onBegin();this.setContent();return(n=this.onEnd())&&n.then?n:this.node},setContent:function(){var n=this.node;if(!n)throw Error(this.declaredClass+
": setContent given no node");try{n=d._setNodeContent(n,this.content)}catch(h){var b=this.onContentError(h);try{n.innerHTML=b}catch(c){}}this.node=n},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(t.forEach(this.parseResults,function(n){n.destroy&&n.destroy()}),delete this.parseResults);q.empty(this.node)},onBegin:function(){var n=this.content;if(e.isString(n)&&(this.cleanContent&&
(n=d._secureForInnerHtml(n)),this.extractContent)){var b=n.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(n=b[1])}this.empty();this.content=n;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(n){return"Error occurred setting content: "+n},onExecError:function(n){return"Error occurred executing scripts: "+n},_mixin:function(n){var b=
{},h;for(h in n)h in b||(this[h]=n[h])},_parse:function(){var n=this.node;try{var b={};t.forEach(["dir","lang","textDir"],function(c){this[c]&&(b[c]=this[c])},this);var h=this;this.parseDeferred=k.parse({rootNode:n,noStart:!this.startup,inherited:b,scope:this.parserScope}).then(function(c){return h.parseResults=c},function(c){h._onError("Content",c,"Error parsing in _ContentSetter#"+h.id)})}catch(c){this._onError("Content",c,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(n,b,h){n=
this["on"+n+"Error"].call(this,b);h||n&&d._setNodeContent(this.node,n,!0)}}),set:function(n,b,h){void 0==b&&(b="");"number"==typeof b&&(b=b.toString());return h?(new d._ContentSetter(e.mixin(h,{content:b,node:n}))).set():d._setNodeContent(n,b,!0)}};e.setObject("dojo.html",d);return d})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./json5 ./query ./on ./ready".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h,c,f,p,r,m){function v(E){var F=E._nameCaseMap,y=E.prototype;if(!F||F._extendCnt<D){F=E._nameCaseMap={};for(var x in y)"_"!==x.charAt(0)&&(F[x.toLowerCase()]=x);F._extendCnt=D}return F}function z(E,F){F||(F=g);var y=F._dojoParserCtorMap||(F._dojoParserCtorMap={}),x=E.join();if(!y[x]){for(var w=[],C=0,B=E.length;C<B;C++){var I=E[C];w[w.length]=y[I]=y[I]||t.getObject(I)||~I.indexOf("/")&&F(I)}E=w.shift();y[x]=w.length?E.createSubclass?E.createSubclass(w):E.extend.apply(E,
w):E}return y[x]}new Date("X");var A=c("csp-restrictions")?f.parse:function(E){return eval("("+E+")")};var D=0;d.after(t,"extend",function(){D++},!0);f={_clearCache:function(){D++;_ctorMap={}},_functionFromScript:function(E,F){var y="",x="",w=E.getAttribute(F+"args")||E.getAttribute("args");F=E.getAttribute("with");w=(w||"").split(/\s*,\s*/);F&&F.length&&u.forEach(F.split(/\s*,\s*/),function(C){y+="with("+C+"){";x+="}"});return new Function(w,y+E.innerHTML+x)},instantiate:function(E,F,y){F=F||{};
y=y||{};var x=(y.scope||e._scopeName)+"Type",w="data-"+(y.scope||e._scopeName)+"-",C=w+"type",B=w+"mixins",I=[];u.forEach(E,function(N){var V=x in F?F[x]:N.getAttribute(C)||N.getAttribute(x);if(V){var Y=N.getAttribute(B);V=Y?[V].concat(Y.split(/\s*,\s*/)):[V];I.push({node:N,types:V})}});return this._instantiate(I,F,y)},_instantiate:function(E,F,y,x){function w(C){F._started||y.noStart||u.forEach(C,function(B){"function"!==typeof B.startup||B._started||B.startup()});return C}E=u.map(E,function(C){var B=
C.ctor||z(C.types,y.contextRequire);if(!B)throw Error("Unable to resolve constructor for: '"+C.types.join()+"'");return this.construct(B,C.node,F,y,C.scripts,C.inherited)},this);return x?n(E).then(w):w(E)},construct:function(E,F,y,x,w,C){function B(aa){U&&t.setObject(U,aa);for(J=0;J<pa.length;J++)d[pa[J].advice||"after"](aa,pa[J].method,t.hitch(aa,pa[J].func),!0);for(J=0;J<da.length;J++)da[J].call(aa);for(J=0;J<ha.length;J++)aa.watch(ha[J].prop,ha[J].func);for(J=0;J<P.length;J++)r(aa,P[J].event,P[J].func);
return aa}var I=E&&E.prototype;x=x||{};var N={};x.defaults&&t.mixin(N,x.defaults);C&&t.mixin(N,C);if(c("dom-attributes-explicit"))var V=F.attributes;else c("dom-attributes-specified-flag")?V=u.filter(F.attributes,function(aa){return aa.specified}):(C=(/^input$|^img$/i.test(F.nodeName)?F:F.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),V=u.map(C.split(/\s+/),function(aa){var ea=aa.toLowerCase();return{name:aa,value:"LI"==
F.nodeName&&"value"==aa||"enctype"==ea?F.getAttribute(ea):F.getAttributeNode(ea).value}}));var Y=x.scope||e._scopeName;C="data-"+Y+"-";var ca={};"dojo"!==Y&&(ca[C+"props"]="data-dojo-props",ca[C+"type"]="data-dojo-type",ca[C+"mixins"]="data-dojo-mixins",ca[Y+"type"]="dojotype",ca[C+"id"]="data-dojo-id");var J=0,O;Y=[];for(var U,ba;O=V[J++];){var Z=O.name,fa=Z.toLowerCase();O=O.value;switch(ca[fa]||fa){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":ba=O;
break;case "data-dojo-id":case "jsid":U=O;break;case "data-dojo-attach-point":case "dojoattachpoint":N.dojoAttachPoint=O;break;case "data-dojo-attach-event":case "dojoattachevent":N.dojoAttachEvent=O;break;case "class":N["class"]=F.className;break;case "style":N.style=F.style&&F.style.cssText;break;default:if(Z in I||(Z=v(E)[fa]||Z),Z in I)switch(typeof I[Z]){case "string":N[Z]=O;break;case "number":N[Z]=O.length?Number(O):NaN;break;case "boolean":N[Z]="false"!=O.toLowerCase();break;case "function":""===
O||-1!=O.search(/[^\w\.]+/i)?N[Z]=new Function(O):N[Z]=t.getObject(O,!1)||new Function(O);Y.push(Z);break;default:fa=I[Z];try{N[Z]=fa&&"length"in fa?O?O.split(/\s*,\s*/):[]:fa instanceof Date?""==O?new Date(""):"now"==O?new Date:b.fromISOString(O):fa instanceof a?e.baseUrl+O:A(O)}catch(aa){}}else N[Z]=O}}for(V=0;V<Y.length;V++)ca=Y[V].toLowerCase(),F.removeAttribute(ca),F[ca]=null;if(ba)try{ba=A.call(x.propsThis,"{"+ba+"}"),t.mixin(N,ba)}catch(aa){throw Error(aa.toString()+" in data-dojo-props\x3d'"+
ba+"'");}t.mixin(N,y);w||(w=E&&(E._noScript||I._noScript)?[]:p("\x3e script[type^\x3d'dojo/']",F));var pa=[],da=[],ha=[],P=[];if(w)for(J=0;J<w.length;J++)ca=w[J],F.removeChild(ca),y=ca.getAttribute(C+"event")||ca.getAttribute("event"),x=ca.getAttribute(C+"prop"),ba=ca.getAttribute(C+"method"),Y=ca.getAttribute(C+"advice"),V=ca.getAttribute("type"),ca=this._functionFromScript(ca,C),y?"dojo/connect"==V?pa.push({method:y,func:ca}):"dojo/on"==V?P.push({event:y,func:ca}):N[y]=ca:"dojo/aspect"==V?pa.push({method:ba,
advice:Y,func:ca}):"dojo/watch"==V?ha.push({prop:x,func:ca}):da.push(ca);E=(w=E.markupFactory||I.markupFactory)?w(N,F,E):new E(N,F);return E.then?E.then(B):B(E)},scan:function(E,F){function y(fa){if(!fa.inherited){fa.inherited={};var pa=fa.node,da=y(fa.parent);pa={dir:pa.getAttribute("dir")||da.dir,lang:pa.getAttribute("lang")||da.lang,textDir:pa.getAttribute(V)||da.textDir};for(var ha in pa)pa[ha]&&(fa.inherited[ha]=pa[ha])}return fa.inherited}var x=[],w=[],C={},B=(F.scope||e._scopeName)+"Type",
I="data-"+(F.scope||e._scopeName)+"-",N=I+"type",V=I+"textdir";I+="mixins";var Y=E.firstChild,ca=F.inherited;if(!ca){ca=function ha(pa,da){return pa.getAttribute&&pa.getAttribute(da)||pa.parentNode&&ha(pa.parentNode,da)};ca={dir:ca(E,"dir"),lang:ca(E,"lang"),textDir:ca(E,V)};for(var J in ca)ca[J]||delete ca[J]}J={inherited:ca};for(var O,U;;)if(Y)if(1!=Y.nodeType)Y=Y.nextSibling;else if(O&&"script"==Y.nodeName.toLowerCase())(ca=Y.getAttribute("type"))&&/^dojo\/\w/i.test(ca)&&O.push(Y),Y=Y.nextSibling;
else if(U)Y=Y.nextSibling;else if(ca=Y.getAttribute(N)||Y.getAttribute(B),E=Y.firstChild,ca||E&&(3!=E.nodeType||E.nextSibling)){U=null;if(ca){var ba=Y.getAttribute(I);O=ba?[ca].concat(ba.split(/\s*,\s*/)):[ca];try{U=z(O,F.contextRequire)}catch(fa){}U||u.forEach(O,function(fa){~fa.indexOf("/")&&!C[fa]&&(C[fa]=!0,w[w.length]=fa)});ba=U&&!U.prototype._noScript?[]:null;J={types:O,ctor:U,parent:J,node:Y,scripts:ba};J.inherited=y(J);x.push(J)}else J={node:Y,scripts:O,parent:J};O=ba;U=Y.stopParser||U&&U.prototype.stopParser&&
!F.template;Y=E}else Y=Y.nextSibling;else{if(!J||!J.node)break;Y=J.node.nextSibling;U=!1;J=J.parent;O=J.scripts}var Z=new h;w.length?(F.contextRequire||g)(w,function(){Z.resolve(u.filter(x,function(fa){if(!fa.ctor)try{fa.ctor=z(fa.types,F.contextRequire)}catch(ha){}for(var pa=fa.parent;pa&&!pa.types;)pa=pa.parent;var da=fa.ctor&&fa.ctor.prototype;fa.instantiateChildren=!(da&&da.stopParser&&!F.template);fa.instantiate=!pa||pa.instantiate&&pa.instantiateChildren;return fa.instantiate}))}):Z.resolve(x);
return Z.promise},_require:function(E,F){E=A("{"+E.innerHTML+"}");var y=[],x=[],w=new h;F=F&&F.contextRequire||g;for(var C in E)y.push(C),x.push(E[C]);F(x,function(){for(var B=0;B<y.length;B++)t.setObject(y[B],arguments[B]);w.resolve(arguments)});return w.promise},_scanAmd:function(E,F){var y=new h,x=y.promise;y.resolve(!0);var w=this;p("script[type\x3d'dojo/require']",E).forEach(function(C){x=x.then(function(){return w._require(C,F)});C.parentNode.removeChild(C)});return x},parse:function(E,F){!E||
"string"==typeof E||"nodeType"in E||(F=E,E=F.rootNode);var y=E?q.byId(E):k.body();F=F||{};var x=F.template?{template:!0}:{},w=[],C=this;E=this._scanAmd(y,F).then(function(){return C.scan(y,F)}).then(function(B){return C._instantiate(B,x,F,!0)}).then(function(B){return w=w.concat(B)}).otherwise(function(B){throw B;});t.mixin(w,E);return w}};e.parser=f;l.parseOnLoad&&m(100,f,"parse");return f})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(g,
e,t,u){var l=g.some;return function(q){var k,a;e.isArray(q)?a=q:q&&"object"===typeof q&&(k=q);var d=[];if(k){a=[];for(var n in k)Object.hasOwnProperty.call(k,n)&&(d.push(n),a.push(k[n]));var b={}}else a&&(b=[]);if(!a||!a.length)return(new t).resolve(b);var h=new t;h.promise.always(function(){b=d=null});var c=a.length;l(a,function(f,p){k||d.push(p);u(f,function(r){h.isFulfilled()||(b[d[p]]=r,0===--c&&h.resolve(b))},h.reject);return h.isFulfilled()});return h.promise}})},"dojo/json5":function(){define(["./json5/parse"],
function(g){return{parse:g}})},"dojo/json5/parse":function(){define(["../string","./util"],function(g,e){function t(Y,ca,J){var O=Y[ca];if(null!=O&&"object"===typeof O)for(var U in O){var ba=t(O,U,J);void 0===ba?delete O[U]:O[U]=ba}return J.call(Y,ca,O)}function u(){if(r[z])return g.fromCodePoint(g.codePointAt(r,z))}function l(){var Y=u();"\n"===Y?(A++,D=0):Y?D+=Y.length:D++;Y&&(z+=Y.length);return Y}function q(Y,ca){return{type:Y,value:ca,line:A,column:D}}function k(Y){for(var ca=0;ca<Y.length;ca++){var J=
Y[ca];if(u()!==J)throw h(l());l()}}function a(){switch(u()){case "b":return l(),"\b";case "f":return l(),"\f";case "n":return l(),"\n";case "r":return l(),"\r";case "t":return l(),"\t";case "v":return l(),"\v";case "0":l();if(e.isDigit(u()))throw h(l());return"\x00";case "x":l();var Y="",ca=u();if(!e.isHexDigit(ca))throw h(l());Y+=l();ca=u();if(!e.isHexDigit(ca))throw h(l());Y+=l();return g.fromCodePoint(parseInt(Y,16));case "u":return l(),d();case "\n":case "\u2028":case "\u2029":return l(),"";case "\r":return l(),
"\n"===u()&&l(),"";case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":throw h(l());case void 0:throw h(l());}return l()}function d(){for(var Y="",ca=4;0<ca--;){var J=u();if(!e.isHexDigit(J))throw h(l());Y+=l()}return g.fromCodePoint(parseInt(Y,16))}function n(){switch(E.type){case "punctuator":switch(E.value){case "{":var Y={};break;case "[":Y=[]}break;case "null":case "boolean":case "numeric":case "string":Y=E.value}if(void 0===y)y=Y;else{var ca=v[v.length-1];Array.isArray(ca)?
ca.push(Y):ca[F]=Y}null!==Y&&"object"===typeof Y?(v.push(Y),m=Array.isArray(Y)?"beforeArrayValue":"beforePropertyName"):(Y=v[v.length-1],m=null==Y?"end":Array.isArray(Y)?"afterArrayValue":"afterPropertyValue")}function b(){v.pop();var Y=v[v.length-1];m=null==Y?"end":Array.isArray(Y)?"afterArrayValue":"afterPropertyValue"}function h(Y){if(void 0===Y)Y=p("JSON5: invalid end of input at "+A+":"+D);else{var ca={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v",
"\x00":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};ca[Y]?Y=ca[Y]:" ">Y&&(Y=Y.charCodeAt(0).toString(16),Y="\\x"+("00"+Y).substring(Y.length));Y=p("JSON5: invalid character '"+Y+"' at "+A+":"+D)}return Y}function c(){return p("JSON5: invalid end of input at "+A+":"+D)}function f(){D-=5;return p("JSON5: invalid identifier character at "+A+":"+D)}function p(Y){Y=new SyntaxError(Y);Y.lineNumber=A;Y.columnNumber=D;return Y}var r,m,v,z,A,D,E,F,y,x,w,C,B,I,N={"default":function(){switch(I){case "\t":case "\v":case "\f":case " ":case "\u00a0":case "\ufeff":case "\n":case "\r":case "\u2028":case "\u2029":l();
return;case "/":l();x="comment";return;case void 0:return l(),q("eof")}if(e.isSpaceSeparator(I))l();else return N[m]()},comment:function(){switch(I){case "*":l();x="multiLineComment";return;case "/":l();x="singleLineComment";return}throw h(l());},multiLineComment:function(){switch(I){case "*":l();x="multiLineCommentAsterisk";return;case void 0:throw h(l());}l()},multiLineCommentAsterisk:function(){switch(I){case "*":l();return;case "/":l();x="default";return;case void 0:throw h(l());}l();x="multiLineComment"},
singleLineComment:function(){switch(I){case "\n":case "\r":case "\u2028":case "\u2029":l();x="default";return;case void 0:return l(),q("eof")}l()},value:function(){switch(I){case "{":case "[":return q("punctuator",l());case "n":return l(),k("ull"),q("null",null);case "t":return l(),k("rue"),q("boolean",!0);case "f":return l(),k("alse"),q("boolean",!1);case "-":case "+":"-"===l()&&(B=-1);x="sign";return;case ".":w=l();x="decimalPointLeading";return;case "0":w=l();x="zero";return;case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":w=
l();x="decimalInteger";return;case "I":return l(),k("nfinity"),q("numeric",Infinity);case "N":return l(),k("aN"),q("numeric",NaN);case '"':case "'":C='"'===l();w="";x="string";return}throw h(l());},identifierNameStartEscape:function(){if("u"!==I)throw h(l());l();var Y=d();switch(Y){case "$":case "_":break;default:if(!e.isIdStartChar(Y))throw f();}w+=Y;x="identifierName"},identifierName:function(){switch(I){case "$":case "_":case "\u200c":case "\u200d":w+=l();return;case "\\":l();x="identifierNameEscape";
return}if(e.isIdContinueChar(I))w+=l();else return q("identifier",w)},identifierNameEscape:function(){if("u"!==I)throw h(l());l();var Y=d();switch(Y){case "$":case "_":case "\u200c":case "\u200d":break;default:if(!e.isIdContinueChar(Y))throw f();}w+=Y;x="identifierName"},sign:function(){switch(I){case ".":w=l();x="decimalPointLeading";return;case "0":w=l();x="zero";return;case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":w=l();x="decimalInteger";return;case "I":return l(),
k("nfinity"),q("numeric",Infinity*B);case "N":return l(),k("aN"),q("numeric",NaN)}throw h(l());},zero:function(){switch(I){case ".":w+=l();x="decimalPoint";return;case "e":case "E":w+=l();x="decimalExponent";return;case "x":case "X":w+=l();x="hexadecimal";return}return q("numeric",0*B)},decimalInteger:function(){switch(I){case ".":w+=l();x="decimalPoint";return;case "e":case "E":w+=l();x="decimalExponent";return}if(e.isDigit(I))w+=l();else return q("numeric",B*Number(w))},decimalPointLeading:function(){if(e.isDigit(I))w+=
l(),x="decimalFraction";else throw h(l());},decimalPoint:function(){switch(I){case "e":case "E":w+=l();x="decimalExponent";return}if(e.isDigit(I))w+=l(),x="decimalFraction";else return q("numeric",B*Number(w))},decimalFraction:function(){switch(I){case "e":case "E":w+=l();x="decimalExponent";return}if(e.isDigit(I))w+=l();else return q("numeric",B*Number(w))},decimalExponent:function(){switch(I){case "+":case "-":w+=l();x="decimalExponentSign";return}if(e.isDigit(I))w+=l(),x="decimalExponentInteger";
else throw h(l());},decimalExponentSign:function(){if(e.isDigit(I))w+=l(),x="decimalExponentInteger";else throw h(l());},decimalExponentInteger:function(){if(e.isDigit(I))w+=l();else return q("numeric",B*Number(w))},hexadecimal:function(){if(e.isHexDigit(I))w+=l(),x="hexadecimalInteger";else throw h(l());},hexadecimalInteger:function(){if(e.isHexDigit(I))w+=l();else return q("numeric",B*Number(w))},string:function(){switch(I){case "\\":l();w+=a();return;case '"':if(C)return l(),q("string",w);w+=l();
return;case "'":if(!C)return l(),q("string",w);w+=l();return;case "\n":case "\r":throw h(l());case void 0:throw h(l());}w+=l()},start:function(){switch(I){case "{":case "[":return q("punctuator",l())}x="value"},beforePropertyName:function(){switch(I){case "$":case "_":w=l();x="identifierName";return;case "\\":l();x="identifierNameStartEscape";return;case "}":return q("punctuator",l());case '"':case "'":C='"'===l();x="string";return}if(e.isIdStartChar(I))w+=l(),x="identifierName";else throw h(l());
},afterPropertyName:function(){if(":"===I)return q("punctuator",l());throw h(l());},beforePropertyValue:function(){x="value"},afterPropertyValue:function(){switch(I){case ",":case "}":return q("punctuator",l())}throw h(l());},beforeArrayValue:function(){if("]"===I)return q("punctuator",l());x="value"},afterArrayValue:function(){switch(I){case ",":case "]":return q("punctuator",l())}throw h(l());},end:function(){throw h(l());}},V={start:function(){if("eof"===E.type)throw c();n()},beforePropertyName:function(){switch(E.type){case "identifier":case "string":F=
E.value;m="afterPropertyName";break;case "punctuator":b();break;case "eof":throw c();}},afterPropertyName:function(){if("eof"===E.type)throw c();m="beforePropertyValue"},beforePropertyValue:function(){if("eof"===E.type)throw c();n()},beforeArrayValue:function(){if("eof"===E.type)throw c();"punctuator"===E.type&&"]"===E.value?b():n()},afterPropertyValue:function(){if("eof"===E.type)throw c();switch(E.value){case ",":m="beforePropertyName";break;case "}":b()}},afterArrayValue:function(){if("eof"===
E.type)throw c();switch(E.value){case ",":m="beforeArrayValue";break;case "]":b()}},end:function(){}};return function(Y,ca){r=String(Y);m="start";v=[];z=0;A=1;D=0;y=F=E=void 0;do{a:for(x="default",w="",C=!1,B=1;;)if(I=u(),Y=N[x]()){E=Y;break a}V[m]()}while("eof"!==E.type);return"function"===typeof ca?t({"":y},"",ca):y}})},"dojo/json5/util":function(){define(["./unicode"],function(g){return{isSpaceSeparator:function(e){return"string"===typeof e&&g.Space_Separator.test(e)},isIdStartChar:function(e){return"string"===
typeof e&&("a"<=e&&"z">=e||"A"<=e&&"Z">=e||"$"===e||"_"===e||g.ID_Start.test(e))},isIdContinueChar:function(e){return"string"===typeof e&&("a"<=e&&"z">=e||"A"<=e&&"Z">=e||"0"<=e&&"9">=e||"$"===e||"_"===e||"\u200c"===e||"\u200d"===e||g.ID_Continue.test(e))},isDigit:function(e){return"string"===typeof e&&/[0-9]/.test(e)},isHexDigit:function(e){return"string"===typeof e&&/[0-9A-Fa-f]/.test(e)}}})},"dojo/json5/unicode":function(){define({Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/})},
"esri/Credential":function(){define(["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],function(g,e,t,u){g=g(u.Credential,{});return t.Credential=g})},"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/url dojo/sniff dojo/io-query dojo/on ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),function(g,e,t,
u,l,q,k,a,d,n,b,h,c,f,p,r,m,v,z){var A={},D=function(w){var C=(new q(w.owningSystemUrl)).host;w=(new q(w.server)).host;var B=/.+\.arcgis\.com$/i;return B.test(C)&&B.test(w)},E=function(w,C){return!!(D(w)&&C&&u.some(C,function(B){return B.test(w.server)}))},F=null,y=null;try{F=window.localStorage,y=window.sessionStorage}catch(w){}k=g(m,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=t.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=
[];this._soReqs=[];this._xoReqs=[];this._portals=[];this._getOAuthLocationParams();d(window,"pageshow",t.hitch(this,this._pageShowHandler))},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,normalizeWebTierAuth:!1,_appUrlObj:f.urlToObject(window.location.href),_postMessageAuthHandle:null,_busy:null,_rejectOnPersistedPageShow:!1,_oAuthLocationParams:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,
_adminSvcs:/\/rest\/admin\/services(\/|$)/i,_gwDomains:[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},
{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MissionServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer|VideoServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(w){var C=this.serverInfos;C?(w=u.filter(w,function(B){return!this.findServerInfo(B.server)},this),this.serverInfos=C.concat(w)):
this.serverInfos=w;u.forEach(w,function(B){B.owningSystemUrl&&this._portals.push(B.owningSystemUrl);if(B.hasPortal){this._portals.push(B.server);var I=b.defaults.io.corsEnabledServers,N=this._getOrigin(B.tokenServiceUrl);f.canUseXhr(B.server)||I.push(B.server.replace(/^https?:\/\//i,""));f.canUseXhr(N)||I.push(N.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(w){var C=this.oAuthInfos;C?(u.forEach(w,function(B){(B=this.findOAuthInfo(B.portalUrl))&&C.splice(C.indexOf(B),1)},this),
this.oAuthInfos=C.concat(w)):this.oAuthInfos=w},registerToken:function(w){w=h.mixin({},w);var C=this._sanitizeUrl(w.server),B=this.findServerInfo(C),I=!0,N;B||(B=new c,B.server=this._getServerInstanceRoot(C),B.tokenServiceUrl=this._getTokenSvcUrl(C),B.hasPortal=!0,this.registerServers([B]));(N=this.findCredential(C,w.userId))?(delete w.server,t.mixin(N,w),I=!1):(N=new x({userId:w.userId,server:B.server,token:w.token,expires:w.expires,ssl:w.ssl,scope:this._isServerRsrc(C)?"server":"portal"}),N.resources=
[C],this.credentials.push(N));N.onTokenChange(!1);I||N.refreshServerTokens()},toJson:function(){return h.fixJson({serverInfos:u.map(this.serverInfos,function(w){return w.toJson()}),oAuthInfos:u.map(this.oAuthInfos,function(w){return w.toJson()}),credentials:u.map(this.credentials,function(w){return w.toJson()})})},initialize:function(w){if(w){t.isString(w)&&(w=JSON.parse(w));var C=w.serverInfos,B=w.oAuthInfos;w=w.credentials;if(C){var I=[];u.forEach(C,function(V){V.server&&V.tokenServiceUrl&&I.push(V.declaredClass?
V:new c(V))});I.length&&this.registerServers(I)}if(B){var N=[];u.forEach(B,function(V){V.appId&&N.push(V.declaredClass?V:new z(V))});N.length&&this.registerOAuthInfos(N)}w&&u.forEach(w,function(V){V.userId&&V.server&&V.token&&V.expires&&V.expires>(new Date).getTime()&&(V=V.declaredClass?V:new x(V),V.onTokenChange(),this.credentials.push(V))},this)}},findServerInfo:function(w){var C;w=this._sanitizeUrl(w);u.some(this.serverInfos,function(B){this._hasSameServerInstance(B.server,w)&&(C=B);return!!C},
this);return C},findOAuthInfo:function(w){var C;w=this._sanitizeUrl(w);u.some(this.oAuthInfos,function(B){this._hasSameServerInstance(B.portalUrl,w)&&(C=B);return!!C},this);return C},findCredential:function(w,C){var B;w=this._sanitizeUrl(w);var I=this._isServerRsrc(w)?"server":"portal";C?u.some(this.credentials,function(N){this._hasSameServerInstance(N.server,w)&&C===N.userId&&N.scope===I&&(B=N);return!!B},this):u.some(this.credentials,function(N){this._hasSameServerInstance(N.server,w)&&-1!==this._getIdenticalSvcIdx(w,
N)&&N.scope===I&&(B=N);return!!B},this);return B},getCredential:function(w,C){var B=!0;if(h.isDefined(C))if(t.isObject(C)){var I=!!C.token;var N=C.error;B=!1!==C.prompt}else I=C;w=this._sanitizeUrl(w);var V=new l(p._dfdCanceller),Y=this._isAdminResource(w);if((I=I?this.findCredential(w):null)&&N&&498===N.code)I.destroy();else if(I)return w=Error("You are currently signed in as: '"+I.userId+"'. You do not have access to this resource: "+w),w.name="identity-manager:not-authorized",w.code="IdentityManagerBase.1",
w.httpCode=N&&N.httpCode,w.messageCode=N?N.messageCode:null,w.subcode=N?N.subcode:null,w.details=N?N.details:null,w.log=!!e.isDebug,V.errback(w),V;if(N=this._findCredential(w,C))return V.callback(N),V;var ca=this.findServerInfo(w);if(ca)!ca.hasPortal&&ca.server&&ca.owningSystemUrl&&this._hasSameServerInstance(ca.server,ca.owningSystemUrl)&&(ca.hasPortal=!0),!ca.hasServer&&this._isServerRsrc(w)&&(ca._restInfoDfd=this._getTokenSvcUrl(w,!0),ca.hasServer=!0);else{N=this._getTokenSvcUrl(w);if(!N)return w=
Error("Unknown resource - could not find token service endpoint."),w.name="identity-manager:unknown-resource",w.code="IdentityManagerBase.2",w.log=!!e.isDebug,V.errback(w),V;ca=new c;ca.server=this._getServerInstanceRoot(w);t.isString(N)?(ca.tokenServiceUrl=N,ca.hasPortal=!0):(ca._restInfoDfd=N,ca.hasServer=!0);this.registerServers([ca])}ca.hasPortal&&void 0===ca._selfReq&&(B||f.hasSameOrigin(ca.tokenServiceUrl,window.location.origin)||this._gwDomains.some(function(J){return J.tokenServiceUrl===ca.tokenServiceUrl}))&&
(ca._selfReq={owningTenant:C&&C.owningTenant,selfDfd:this._getPortalSelf(ca.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),w)});return this._enqueue(w,ca,C,V,Y)},getResourceName:function(w){return this._isRESTService(w)?w.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(w)&&w.replace(this._gwUser,"$1")||this._gwItem.test(w)&&w.replace(this._gwItem,"$1")||this._gwGroup.test(w)&&w.replace(this._gwGroup,"$1")||""},generateToken:function(w,
C,B){var I=this._rePortalTokenSvc.test(w.tokenServiceUrl),N=new q(window.location.href.toLowerCase()),V=!C;var Y=w.shortLivedTokenValidity;if(C){var ca=n.id.tokenValidity||Y||n.id.defaultTokenValidity;ca>Y&&(ca=Y)}if(B){var J=B.isAdmin;var O=B.serverUrl;var U=B.token;var ba=B.ssl;w.customParameters=B.customParameters}if(J)Y=w.adminTokenServiceUrl;else{Y=w.tokenServiceUrl;var Z=new q(Y.toLowerCase());w.webTierAuth&&B&&B.serverUrl&&!ba&&"http"===N.scheme&&(f.hasSameOrigin(N.uri,Y,!0)||"https"===Z.scheme&&
N.host===Z.host&&"7080"===N.port&&"7443"===Z.port)&&(Y=Y.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));V&&I&&(Y=Y.replace(/\/rest/i,""))}J=t.mixin({url:Y,content:t.mixin({request:"getToken",username:C&&C.username,password:C&&C.password,serverUrl:O,token:U,expiration:ca,referer:J||I?window.location.host:null,client:J?"referer":null,f:"json"},w.customParameters),handleAs:"json",callbackParamName:V?"callback":void 0},B&&B.ioArgs);B={usePost:!V,disableIdentityLookup:!0,useProxy:this._useProxy(w,
B)};I||(J.withCredentials=!1);I=r(J,B);I.addCallback(function(fa){if(!fa||!fa.token)return fa=Error("Unable to generate token"),fa.name="identity-manager:authentication-failed",fa.code="IdentityManagerBase.3",fa.log=!!e.isDebug,fa;var pa=w.server;A[pa]||(A[pa]={});C&&(A[pa][C.username]=C.password);fa.validity=ca;return fa});I.addErrback(function(fa){});return I},isBusy:function(){return!!this._busy},checkSignInStatus:function(w){var C=new l;this.checkAppAccess(w,"").then(function(B){C.resolve(B.credential)}).catch(function(B){C.reject(B)});
return C},checkAppAccess:function(w,C,B){var I=this,N=!1;return this.getCredential(w,{prompt:!1}).then(function(V){var Y={f:"json"};if("portal"===V.scope)if(C&&(I._doPortalSignIn(w)||B&&B.force)){var ca=V.server+"/sharing/rest/oauth2/validateAppAccess";Y.client_id=C}else if(V.token)ca=V.server+"/sharing/rest";else return{credential:V};else if(V.token)ca=V.server+"/rest/services";else return{credential:V};V.token&&(Y.token=V.token);return r({url:ca,content:Y,callbackParamName:"callback"},{disableIdentityLookup:!0}).then(function(J){if(!1===
J.valid){var O=Error("You are currently signed in as: '"+V.userId+"'.  You do not have access to this app: '"+C+"'.");O.name="identity-manager:not-authorized";O.code="IdentityManagerBase.1";O.log=!!e.isDebug;O.details=J;throw O;}N=!!J.viewOnlyUserTypeApp;return{credential:V}}).catch(function(J){if("IdentityManagerBase.1"===J.code||400===J.code)throw 400===J.code&&(J.name="identity-manager:invalid-request"),J;if(498===J.code)throw V.destroy(),J=Error("User is not signed in."),J.name="identity-manager:not-authenticated",
J.code="IdentityManagerBase.6",J.log=!!e.isDebug,J;return{credential:V}})}).then(function(V){return{credential:V.credential,viewOnly:N}})},setProtocolErrorHandler:function(w){this._protocolFunc=w},signIn:function(){},oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var w=this.credentials.slice();u.forEach(w,function(C){C.destroy()})}this.onCredentialsDestroy()},enablePostMessageAuth:function(w){w||(w="https://www.arcgis.com/sharing/rest");
this._postMessageAuthHandle&&this._postMessageAuthHandle.remove();this._postMessageAuthHandle=d(window,"message",function(C){(C.origin===window.location.origin||h.endsWith(C.origin,".arcgis.com"))&&C.data&&"arcgis:auth:requestCredential"===C.data.type&&this.getCredential(w).then(function(B){C.source.postMessage({type:"arcgis:auth:credential",credential:{expires:B.expires,server:B.server,ssl:B.ssl,token:B.token,userId:B.userId}},C.origin)}).catch(function(B){C.source.postMessage({type:"arcgis:auth:error",
error:{name:B.name,message:B.message}},C.origin)})}.bind(this))},disablePostMessageAuth:function(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)},_getOAuthLocationParams:function(){var w=window.location.hash;if(w){"#"===w.charAt(0)&&(w=w.substring(1));w=a.queryToObject(w);var C=!1;if(w.access_token&&w.expires_in&&w.state&&w.hasOwnProperty("username"))try{w.state=JSON.parse(w.state),w.state.portalUrl&&(this._oAuthLocationParams=w,C=!0)}catch(I){}else if(w.error&&
w.error_description&&"access_denied"===w.error&&(C=!0,w.state))try{w.state=JSON.parse(w.state)}catch(I){}C&&(window.location.hash=w.state&&w.state.hash||"")}if(w=window.location.search){"?"===w.charAt(0)&&(w=w.substring(1));w=a.queryToObject(w);C=!1;if(w.code&&w.state)try{w.state=JSON.parse(w.state),w.state.portalUrl&&w.state.uid&&(this._oAuthLocationParams=w,C=!0)}catch(I){}else if(w.error&&w.error_description&&"access_denied"===w.error&&(C=!0,w.state))try{w.state=JSON.parse(w.state)}catch(I){}if(C){var B=
h.mixin({},w);"code error error_description message_code persist state".split(" ").forEach(function(I){delete B[I]});C=a.objectToQuery(B);window.history.replaceState(window.history.state,"",window.location.pathname+(C?"?"+C:"")+(w.state&&w.state.hash||""))}}},_getOAuthToken:function(w,C,B,I,N){w=w.replace(/^http:/i,"https:");return r({url:w+"/sharing/rest/oauth2/token",content:I&&N?{grant_type:"authorization_code",code:C,redirect_uri:I,client_id:B,code_verifier:N}:{grant_type:"refresh_token",refresh_token:C,
client_id:B}},{disableIdentityLookup:!0,usePost:!0})},_pageShowHandler:function(w){w.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow&&(w=Error("ABORTED"),w.name="identity-manager:user-aborted",w.code="IdentityManager.2",w.log=!!e.isDebug,this._errbackFunc(w))},_findCredential:function(w,C){var B=-1,I,N,V=C&&C.token;C=C&&C.resource;var Y=this._isServerRsrc(w)?"server":"portal",ca=u.filter(this.credentials,function(ba){return this._hasSameServerInstance(ba.server,w)&&ba.scope===Y},this);w=
C||w;if(ca.length)if(1===ca.length){C=ca[0];var J=(I=(N=this.findServerInfo(C.server))&&N.owningSystemUrl)&&this.findCredential(I,C.userId);B=this._getIdenticalSvcIdx(w,C);if(V)-1!==B&&(C.resources.splice(B,1),this._removeResource(w,J));else return-1===B&&C.resources.push(w),this._addResource(w,J),C}else{var O,U;u.some(ca,function(ba){U=this._getIdenticalSvcIdx(w,ba);return-1!==U?(O=ba,J=(I=(N=this.findServerInfo(O.server))&&N.owningSystemUrl)&&this.findCredential(I,O.userId),B=U,!0):!1},this);if(V)O&&
(O.resources.splice(B,1),this._removeResource(w,J));else if(O)return this._addResource(w,J),O}},_findOAuthInfo:function(w){var C=this.findOAuthInfo(w);C||u.some(this.oAuthInfos,function(B){this._isIdProvider(B.portalUrl,w)&&(C=B);return!!C},this);return C},_addResource:function(w,C){C&&-1===this._getIdenticalSvcIdx(w,C)&&C.resources.push(w)},_removeResource:function(w,C){var B=-1;C&&(B=this._getIdenticalSvcIdx(w,C),-1<B&&C.resources.splice(B,1))},_useProxy:function(w,C){return C&&C.isAdmin&&!f.hasSameOrigin(w.adminTokenServiceUrl,
window.location.href)||!this._isPortalDomain(w.tokenServiceUrl)&&10.1==w.currentVersion&&!f.hasSameOrigin(w.tokenServiceUrl,window.location.href)},_getOrigin:function(w){w=new q(w);return w.scheme+"://"+w.host+(h.isDefined(w.port)?":"+w.port:"")},_getServerInstanceRoot:function(w){var C=w.toLowerCase(),B=C.indexOf(this._agsRest);-1===B&&this._isAdminResource(w)&&(B=this._agsAdmin.test(w)?w.replace(this._agsAdmin,"$1").length:w.search(this._adminSvcs));-1!==B||f.isSecureProxyService(C)||(B=C.indexOf("/sharing"));
-1===B&&"/"===C.substr(-1)&&(B=C.length-1);return-1<B?w.substring(0,B):w},_hasSameServerInstance:function(w,C){"/"===w.substr(-1)&&(w=w.slice(0,-1));w=w.toLowerCase();C=this._getServerInstanceRoot(C).toLowerCase();w=this._normalizeAGOLorgDomain(w);C=this._normalizeAGOLorgDomain(C);w=w.substr(w.indexOf(":"));C=C.substr(C.indexOf(":"));return w===C},_normalizeAGOLorgDomain:function(w){var C=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,B=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,
I=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;C.test(w)?w=w.replace(C,"https://www.arcgis.com"):B.test(w)?w=w.replace(B,"https://devext.arcgis.com"):I.test(w)&&(w=w.replace(I,"https://qaext.arcgis.com"));return w},_sanitizeUrl:function(w){var C=(b.defaults.io.proxyUrl||"").toLowerCase(),B=C?w.toLowerCase().indexOf(C+"?"):-1;-1!==B&&(w=w.substring(B+C.length+1));w=f.normalize(w);return f.urlToObject(w).path},_isRESTService:function(w){return-1<w.indexOf(this._agsRest)},_isAdminResource:function(w){return this._agsAdmin.test(w)||
this._adminSvcs.test(w)},_isServerRsrc:function(w){return this._isRESTService(w)||this._isAdminResource(w)},_isIdenticalService:function(w,C){if(this._isRESTService(w)&&this._isRESTService(C)){w=this._getSuffix(w).toLowerCase();C=this._getSuffix(C).toLowerCase();var B=w===C;B||(B=/(.*)\/(MapServer|FeatureServer).*/ig,B=w.replace(B,"$1")===C.replace(B,"$1"))}else this._isAdminResource(w)&&this._isAdminResource(C)?B=!0:this._isServerRsrc(w)||this._isServerRsrc(C)||!this._isPortalDomain(w)||(B=!0);return B},
_isPortalDomain:function(w){var C=new q(w.toLowerCase()),B=this._portalConfig;w=u.some(this._gwDomains,function(I){return I.regex.test(C.uri)});!w&&B&&(w=this._hasSameServerInstance(this._getServerInstanceRoot(B.restBaseUrl),C.uri));w||(!this._arcgisUrl&&(B=t.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new q(B)).authority),this._arcgisUrl&&(w=this._arcgisUrl.toLowerCase()===C.authority));w||(w=u.some(this._portals,function(I){return this._hasSameServerInstance(I,C.uri)},this));return w=
w||this._agsPortal.test(C.path)},_isIdProvider:function(w,C){var B=-1,I=-1;u.forEach(this._gwDomains,function(ca,J){-1===B&&ca.regex.test(w)&&(B=J);-1===I&&ca.regex.test(C)&&(I=J)});var N=!1;if(-1<B&&-1<I)if(0===B||4===B){if(0===I||4===I)N=!0}else if(1===B){if(1===I||2===I)N=!0}else 2===B?2===I&&(N=!0):3===B&&3===I&&(N=!0);if(!N){var V=this.findServerInfo(C),Y=V&&V.owningSystemUrl;Y&&D(V)&&this._isPortalDomain(Y)&&this._isIdProvider(w,Y)&&(N=!0)}return N},_isPublic:function(w){w=this._sanitizeUrl(w);
return u.some(this._publicUrls,function(C){return C.test(w)})},_getIdenticalSvcIdx:function(w,C){var B=-1;u.some(C.resources,function(I,N){return this._isIdenticalService(w,I)?(B=N,!0):!1},this);return B},_getSuffix:function(w){return w.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(w){if(this._isRESTService(w)||this._isAdminResource(w)){var C=this._getServerInstanceRoot(w);var B=C+"/admin/generateToken";w=C+"/rest/info";C=r({url:w,content:{f:"json"},
handleAs:"json",callbackParamName:"callback"});C.adminUrl_=B;return C}if(this._isPortalDomain(w)){var I="";u.some(this._gwDomains,function(N){N.regex.test(w)&&(I=N.tokenServiceUrl);return!!I});I||u.some(this._portals,function(N){this._hasSameServerInstance(N,w)&&(I=N+this._gwTokenUrl);return!!I},this);I||(B=w.toLowerCase().indexOf("/sharing"),-1!==B&&(I=w.substring(0,B)+this._gwTokenUrl));I||(I=this._getOrigin(w)+this._gwTokenUrl);I&&(B=(new q(w)).port,/^http:\/\//i.test(w)&&"7080"===B&&(I=I.replace(/:7080/i,
":7443")),I=I.replace(/http:/i,"https:"));return I}if(-1!==w.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},_exchangeToken:function(w,C,B){return r({url:w+"/sharing/rest/oauth2/exchangeToken",content:{f:"json",client_id:C,token:B}},{disableIdentityLookup:!0,usePost:!0}).then(function(I){return I.token})},_getPlatformSelf:function(w,C){w=w.replace(/^http:/i,"https:");return r({url:w+"/sharing/rest/oauth2/platformSelf",content:{f:"json",expiration:30},
headers:{"X-Esri-Auth-Client-Id":C,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},withCredentials:!0},{disableIdentityLookup:!0,usePost:!0})},_getPortalSelf:function(w,C){var B="";u.some(this._gwDomains,function(I){I.regex.test(w)&&(B=I.customBaseUrl);return!!B});if(B)return C=new l,C.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:B,portalMode:"multitenant",supportsOAuth:!0}),C;"https:"===window.location.protocol?w=w.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):
/^http:/i.test(C)&&(w=w.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return r({url:w,content:{f:"json"},callbackParamName:"callback",withCredentials:!0},{disableIdentityLookup:!0})},_doPortalSignIn:function(w){var C=this._portalConfig,B=window.location.href,I=this.findServerInfo(w);return(C||this._isPortalDomain(B))&&(I?I.hasPortal||I.owningSystemUrl&&this._isPortalDomain(I.owningSystemUrl):this._isPortalDomain(w))&&(this._isIdProvider(B,w)||C&&(this._hasSameServerInstance(this._getServerInstanceRoot(C.restBaseUrl),
w)||this._isIdProvider(C.restBaseUrl,w))||f.hasSameOrigin(B,w,!0))?!0:!1},_checkProtocol:function(w,C,B,I){var N=!0;I=I?C.adminTokenServiceUrl:C.tokenServiceUrl;0!==t.trim(I).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||b.defaults.io.useCors&&(f.canUseXhr(I)||f.canUseXhr(f.getProxyUrl(!0).path))||(N=this._protocolFunc?!!this._protocolFunc({resourceUrl:w,serverInfo:C}):!1,N||(w=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),
w.name="identity-manager:aborted",w.code="IdentityManagerBase.4",w.log=!!e.isDebug,B(w)));return N},_enqueue:function(w,C,B,I,N,V){I||(I=new l(p._dfdCanceller));I.resUrl_=w;I.sinfo_=C;I.options_=B;I.admin_=N;I.refresh_=V;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(w),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(I)):this._xoReqs.push(I):this._doSignIn(I);return I},_doSignIn:function(w){this._busy=w;this._rejectOnPersistedPageShow=
!1;var C=this,B=function(O){var U=w.options_&&w.options_.resource,ba=w.resUrl_,Z=w.refresh_,fa=!1;-1===u.indexOf(C.credentials,O)&&(Z&&-1!==u.indexOf(C.credentials,Z)?(Z.userId=O.userId,Z.token=O.token,Z.expires=O.expires,Z.validity=O.validity,Z.ssl=O.ssl,Z.creationTime=O.creationTime,fa=!0,O=Z):C.credentials.push(O));O.resources||(O.resources=[]);-1===O.resources.indexOf(U||ba)&&O.resources.push(U||ba);O.scope=C._isServerRsrc(ba)?"server":"portal";O.onTokenChange();U=C._soReqs;var pa={};C._soReqs=
[];u.forEach(U,function(da){if(!this._isIdenticalService(ba,da.resUrl_)){var ha=this._getSuffix(da.resUrl_);pa[ha]||(pa[ha]=!0,O.resources.push(da.resUrl_))}},C);w.callback(O);u.forEach(U,function(da){this._hasSameServerInstance(this._getServerInstanceRoot(ba),da.resUrl_)?da.callback(O):this._soReqs.push(da)},C);C._busy=w.resUrl_=w.sinfo_=w.refresh_=null;if(!fa)C.onCredentialCreate({credential:O});C._soReqs.length?C._doSignIn(C._soReqs.shift()):C._xoReqs.length&&C._doSignIn(C._xoReqs.shift())},I=
function(O){w.errback(O);C._busy=w.resUrl_=w.sinfo_=w.refresh_=null;C._soReqs.length?C._doSignIn(C._soReqs.shift()):C._xoReqs.length&&C._doSignIn(C._xoReqs.shift())},N=function(O,U,ba,Z){var fa=w.sinfo_,pa=!w.options_||!1!==w.options_.prompt,da=fa.hasPortal&&C._findOAuthInfo(w.resUrl_);if(O)B(new x({userId:O,server:fa.server,token:ba||null,expires:h.isDefined(Z)?Number(Z):null,ssl:!!U}));else if(window!==window.parent&&C._appUrlObj.query&&C._appUrlObj.query["arcgis-auth-origin"]&&C._appUrlObj.query["arcgis-auth-portal"]&&
C._hasSameServerInstance(C._getServerInstanceRoot(C._appUrlObj.query["arcgis-auth-portal"]),w.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},C._appUrlObj.query["arcgis-auth-origin"]);var ha=d(window,"message",function(ia){if(ia.source===window.parent&&ia.data)if("arcgis:auth:credential"===ia.data.type&&ia.data.credential.expires<Date.now()&&(ia.data.type="arcgis:auth:error",ia.data.error={name:"tokenExpiredError"}),"arcgis:auth:credential"===ia.data.type)ha.remove(),B(new x(ia.data.credential));
else if("arcgis:auth:error"===ia.data.type){ha.remove();ia=ia.data.error;switch(ia.name){case "identity-manager:busy":case "identity-manager:not-authorized":var oa="IdentityManager.1";break;case "identity-manager:server-identification-failed":case "identity-manager:unknown-resource":case "identity-manager:user-aborted":oa="IdentityManager.2";break;case "identity-manager:authentication-failed":case "identity-manager:credential-request-failed":case "tokenExpiredError":oa="IdentityManager.3";"tokenExpiredError"===
ia.name&&(ia.name="identity-manager:credential-request-failed",ia.message="Parent application's token has expired.");break;case "identity-manager:aborted":oa="IdentityManager.4";break;case "identity-manager:not-authenticated":oa="IdentityManager.6";break;case "identity-manager:invalid-request":oa=400}var qa=Error(ia.message);qa.name=ia.name;qa.code=oa;qa.log=!!e.isDebug;I(qa)}})}else if(da){var P=da._oAuthCred;P||(O=new v(da,F),U=new v(da,y),O.isValid()&&U.isValid()?O.expires>U.expires?(P=O,U.destroy()):
(P=U,O.destroy()):P=O.isValid()?O:U,da._oAuthCred=P);if(P.isValid()){var aa=new x({userId:P.userId,server:fa.server,token:P.token,expires:P.expires,ssl:P.ssl,_oAuthCred:P});var ea=da.appId!==P.appId&&C._doPortalSignIn(w.resUrl_);ea||P.refreshToken?(P.refreshToken?w._pendingDfd=C._getOAuthToken(fa.server,P.refreshToken,P.appId).then(function(ia){aa.expires=Date.now()+1E3*ia.expires_in;aa.token=ia.access_token;return aa}):(O=new l,O.resolve(aa),w._pendingDfd=O),w._pendingDfd.then(function(ia){return ea?
C._exchangeToken(ia.server,da.appId,ia.token).then(function(oa){ia.token=oa;return ia}).catch(function(){return ia}):ia}).then(function(ia){B(ia)}).catch(function(){P.destroy();N()})):B(aa)}else if(C._oAuthLocationParams&&C._hasSameServerInstance(da.portalUrl,C._oAuthLocationParams.state.portalUrl)&&(C._oAuthLocationParams.access_token||C._oAuthLocationParams.code&&C._oAuthLocationParams.state.uid===P.stateUID&&P.codeVerifier))O=C._oAuthLocationParams,C._oAuthLocationParams=null,w._pendingDfd=C._processOAuthResponseParams(O,
da,fa).then(function(ia){B(ia)}).catch(I);else{var X=function(){pa?w._pendingDfd=C.oAuthSignIn(w.resUrl_,fa,da,w.options_).addCallbacks(B,I):(S=Error("User is not signed in."),S.name="identity-manager:not-authenticated",S.code="IdentityManagerBase.6",S.log=!!e.isDebug,I(S))};C._doPortalSignIn(w.resUrl_)?w._pendingDfd=C._getPlatformSelf(fa.server,da.appId).then(function(ia){var oa=ia.portalUrl;!oa||f.hasSameOrigin(oa,window.location.origin,!0)?(aa=new x({userId:ia.username,server:fa.server,expires:Date.now()+
1E3*ia.expires_in,token:ia.token}),B(aa)):X()}).catch(X):X()}}else if(pa)C._checkProtocol(w.resUrl_,fa,I,w.admin_)&&(O=w.options_,w.admin_&&(O=O||{},O.isAdmin=!0),w._pendingDfd=C.signIn(w.resUrl_,fa,O).addCallbacks(B,I));else{var S=Error("User is not signed in.");S.name="identity-manager:not-authenticated";S.code="IdentityManagerBase.6";S.log=!!e.isDebug;I(S)}},V=function(){var O=w.sinfo_,U=O.owningSystemUrl,ba=w.options_,Z;if(ba){var fa=ba.token;var pa=ba.error;var da=ba.prompt}(Z=C._findCredential(U,
{token:fa,resource:w.resUrl_}))||u.some(C.credentials,function(ha){this._isIdProvider(U,ha.server)&&(Z=ha);return!!Z},C);Z?(ba=C.findCredential(w.resUrl_,Z.userId))?B(ba):E(O,C._legacyFed)?(ba=Z.toJson(),ba.server=O.server,ba.resources=null,B(new x(ba))):(w._pendingDfd=C.generateToken(C.findServerInfo(Z.server),null,{serverUrl:w.resUrl_,token:Z.token,ssl:Z.ssl})).addCallbacks(function(ha){B(new x({userId:Z.userId,server:O.server,token:ha.token,expires:h.isDefined(ha.expires)?Number(ha.expires):null,
ssl:!!ha.ssl,isAdmin:w.admin_,validity:ha.validity}))},I):(C._busy=null,fa&&(w.options_.token=null),(w._pendingDfd=C.getCredential(U.replace(/\/?$/,"/sharing"),{resource:w.resUrl_,owningTenant:O.owningTenant,token:fa,error:pa,prompt:da})).addCallbacks(function(ha){C._enqueue(w.resUrl_,w.sinfo_,w.options_,w,w.admin_)},function(ha){I(ha)}))};this._errbackFunc=I;var Y=w.sinfo_.owningSystemUrl,ca=this._isServerRsrc(w.resUrl_),J=w.sinfo_._restInfoDfd;J?J.addCallbacks(function(O){var U=w.sinfo_;U._restInfoDfd&&
(U.adminTokenServiceUrl=U._restInfoDfd.adminUrl_,U._restInfoDfd=null,U.tokenServiceUrl=t.getObject("authInfo.tokenServicesUrl",!1,O)||t.getObject("authInfo.tokenServiceUrl",!1,O)||t.getObject("tokenServiceUrl",!1,O),U.shortLivedTokenValidity=t.getObject("authInfo.shortLivedTokenValidity",!1,O),U.currentVersion=O.currentVersion,U.owningTenant=O.owningTenant,(O=U.owningSystemUrl=O.owningSystemUrl)&&C._portals.push(O));ca&&U.owningSystemUrl?V():N()},function(){w.sinfo_._restInfoDfd=null;var O=Error("Unknown resource - could not find token service endpoint.");
O.name="identity-manager:server-identification-failed";O.code="IdentityManagerBase.2";O.log=!!e.isDebug;I(O)}):ca&&Y?V():w.sinfo_._selfReq?w.sinfo_._selfReq.selfDfd.then(function(O){var U={};if(O){var ba=O.user&&O.user.username;U.username=ba;U.allSSL=O.allSSL;var Z=O.supportsOAuth;var fa=parseFloat(O.currentVersion);if("multitenant"===O.portalMode)var pa=O.customBaseUrl;w.sinfo_.currentVersion=fa}w.sinfo_.webTierAuth=!!ba;return ba&&C.normalizeWebTierAuth?C.generateToken(w.sinfo_,null,{ssl:U.allSSL}).addBoth(function(da){U.portalToken=
da&&da.token;U.tokenExpiration=da&&da.expires;return U}):!ba&&Z&&4.4<=fa&&!C._findOAuthInfo(w.resUrl_)?C._generateOAuthInfo({portalUrl:w.sinfo_.server,customBaseUrl:pa,owningTenant:w.sinfo_._selfReq.owningTenant}).always(function(){return U}):U}).always(function(O){w.sinfo_._selfReq=null;O?N(O.username,O.allSSL,O.portalToken,O.tokenExpiration):N()}):N()},_generateOAuthInfo:function(w){var C=this,B=w.portalUrl,I=w.customBaseUrl,N=w.owningTenant;if(w=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&
!this._hasTestedIfAppIsOnPortal){var V=window.location.href;var Y=V.indexOf("?");-1<Y&&(V=V.slice(0,Y));Y=V.search(/\/(apps|home)\//);V=-1<Y?V.slice(0,Y):null}w&&V?(this._hasTestedIfAppIsOnPortal=!0,w=r({url:V+"/sharing/rest",content:{f:"json"},handleAs:"json"}).then(function(){C.defaultOAuthInfo=new z({appId:"arcgisonline",popupCallbackUrl:V+"/home/oauth-callback.html"})})):(w=new l,w.resolve(),w=w.promise);return w.then(function(){if(C.defaultOAuthInfo)return B=B.replace(/^http:/i,"https:"),r({url:B+
"/sharing/rest/oauth2/validateRedirectUri",content:{accountId:N,client_id:C.defaultOAuthInfo.appId,redirect_uri:f.getAbsoluteUrl(C.defaultOAuthInfo.popupCallbackUrl),f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(ca){if(ca.valid){var J=C.defaultOAuthInfo.clone();J.portalUrl=ca.urlKey&&I?"https://"+ca.urlKey.toLowerCase()+"."+I:B;J.popup=window!==window.top||!(f.hasSameOrigin(B,window.location.origin)||C._gwDomains.some(function(O){return O.regex.test(B)&&O.regex.test(window.location.origin)}));
C.oAuthInfos.push(J)}})})}});var x=g(m,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,constructor:function(w){t.mixin(this,w);this.resources=this.resources||[];h.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var w=this,C=this.resources&&this.resources[0],B=n.id.findServerInfo(this.server),I=B&&B.owningSystemUrl,N=!!I&&"server"===this.scope,V=N&&E(B,n.id._legacyFed),Y=N&&n.id.findServerInfo(I),ca,J=(ca=B.webTierAuth)&&n.id.normalizeWebTierAuth,
O=A[this.server];O=O&&O[this.userId];var U={username:this.userId,password:O};if(!ca||J)if(N&&!Y&&u.some(n.id.serverInfos,function(fa){n.id._isIdProvider(I,fa.server)&&(Y=fa);return!!Y}),ca=Y&&n.id.findCredential(Y.server,this.userId),!N||ca)if(V)ca.refreshToken();else{if(N)var ba={serverUrl:C,token:ca&&ca.token,ssl:ca&&ca.ssl};else if(J)U=null,ba={ssl:this.ssl};else if(O)this.isAdmin&&(ba={isAdmin:!0});else{if(C){C=n.id._sanitizeUrl(C);this._enqueued=1;var Z=n.id._enqueue(C,B,null,null,this.isAdmin,
this);Z.addCallback(function(){w._enqueued=0;w.refreshServerTokens()}).addErrback(function(){w._enqueued=0})}return Z}return n.id.generateToken(N?Y:B,N?null:U,ba).addCallback(function(fa){w.token=fa.token;w.expires=h.isDefined(fa.expires)?Number(fa.expires):null;w.creationTime=(new Date).getTime();w.validity=fa.validity;w.onTokenChange();w.refreshServerTokens()}).addErrback(function(){})}},refreshServerTokens:function(){"portal"===this.scope&&u.forEach(n.id.credentials,function(w){var C=n.id.findServerInfo(w.server),
B=C&&C.owningSystemUrl;w!==this&&w.userId===this.userId&&B&&"server"===w.scope&&(n.id._hasSameServerInstance(this.server,B)||n.id._isIdProvider(B,this.server))&&(E(C,n.id._legacyFed)?(w.token=this.token,w.expires=this.expires,w.creationTime=this.creationTime,w.validity=this.validity,w.onTokenChange()):w.refreshToken())},this)},onTokenChange:function(w){clearTimeout(this._refreshTimer);var C=this.server&&n.id.findServerInfo(this.server),B=(C=C&&C.owningSystemUrl)&&n.id.findServerInfo(C);!1!==w&&(!C||
"portal"===this.scope||B&&B.webTierAuth&&!n.id.normalizeWebTierAuth)&&(h.isDefined(this.expires)||h.isDefined(this.validity))&&this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var w=u.indexOf(n.id.credentials,this);-1<w&&n.id.credentials.splice(w,1);this.onTokenChange();this.onDestroy()},toJson:function(){return this._toJson()},
_toJson:function(){var w=h.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),C=this.resources;C&&0<C.length&&(w.resources=C.slice());return w},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var w=6E4*this.tokenRefreshBuffer,C=Math.pow(2,31)-1,B=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>B?B=0:B>C&&
(B=C);this._refreshTimer=setTimeout(t.hitch(this,this.refreshToken),B>w?B-w:B)}});k.Credential=x;return n.IdentityManagerBase=k})},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(g,e,t,u,l){g=g(null,{declaredClass:"esri.ServerInfo",constructor:function(q){e.mixin(this,q)},toJson:function(){return l.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,
owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}});return u.ServerInfo=g})},"esri/OAuthCredential":function(){define(["./kernel","dojo/_base/declare","dojo/has"],function(g,e,t){e=e(null,{declaredClass:"esri.OAuthCredential",oAuthInfo:null,storage:null,appId:null,codeVerifier:null,expires:null,refreshToken:null,ssl:null,stateUID:null,token:null,userId:null,constructor:function(u,
l){this.oAuthInfo=u;this.storage=l;this._init()},isValid:function(){var u=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token))if(null==this.expires&&this.refreshToken)u=!0;else{var l=Date.now();this.expires>l&&(this.expires-l)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(u=!0)}return u},save:function(){if(!this.storage)return!1;var u=this._load(),l=this.oAuthInfo;if(l&&l.authNamespace&&l.portalUrl){var q=u[l.authNamespace];q||(q=u[l.authNamespace]={});this.appId||(this.appId=l.appId);
q[l.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(u))}catch(k){return!1}return!0}return!1},destroy:function(){var u=this._load(),l=this.oAuthInfo;if(l&&l.appId&&l.portalUrl&&(null==this.expires||this.expires>Date.now())&&(this.refreshToken||this.token)){var q=l.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",
k=new FormData;k.append("f","json");k.append("auth_token",this.refreshToken||this.token);k.append("client_id",l.appId);k.append("token_type_hint",this.refreshToken?"refresh_token":"access_token");if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(q,k);else{var a=new XMLHttpRequest;a.open("POST",q);a.send(k)}}if(l&&l.authNamespace&&l.portalUrl&&this.storage&&(q=u[l.authNamespace])){delete q[l.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(u))}catch(d){}}l&&(this.oAuthInfo=
l._oAuthCred=null)},_init:function(){var u=this._load(),l=this.oAuthInfo;l&&l.authNamespace&&l.portalUrl&&(u=u[l.authNamespace])&&(u=u[l.portalUrl])&&(this.appId=u.appId,this.codeVerifier=u.codeVerifier,this.expires=u.expires,this.refreshToken=u.refreshToken,this.ssl=u.ssl,this.stateUID=u.stateUID,this.token=u.token,this.userId=u.userId)},_load:function(){var u={};if(this.storage){var l=this.storage.getItem("esriJSAPIOAuth");if(l)try{u=JSON.parse(l)}catch(q){}}return u}});return g.OAuthCredential=
e})},"esri/arcgis/OAuthInfo":function(){define(["../kernel","../lang","dojo/_base/declare","dojo/_base/lang","dojo/has"],function(g,e,t,u,l){var q=t(null,{declaredClass:"esri.arcgis.OAuthInfo",constructor:function(k){u.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",authNamespace:"/",forceLogin:!1,popup:!1,popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d490,width\x3d800,resizable,scrollbars,status",preserveUrlHash:!1,flowType:"auto"},
k)},_oAuthCred:null,toJson:function(){return e.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,forceLogin:this.forceLogin,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures,preserveUrlHash:this.preserveUrlHash,flowType:this.flowType})},clone:function(){return new q(this.toJson())}});u.setObject("arcgis.OAuthInfo",q,g);
return q})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(g,e,t,u,l,q,k,a){return g("dijit.form.Form",[l,q,k,a],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",
postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(d){e.set(this.domNode,"encType",d);u("ie")&&(this.domNode.encoding=d);this._set("encType",d)},reset:function(d){var n={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:d?d.target:this.domNode,target:d?d.target:this.domNode};!1!==this.onReset(n)&&n.returnValue&&
this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(d){this.reset(d);d.stopPropagation();d.preventDefault();return!1},_onSubmit:function(d){var n=this.constructor.prototype;if(this.execute!=n.execute||this.onExecute!=n.onExecute)t.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(d)&&(d.stopPropagation(),d.preventDefault())},onSubmit:function(){return this.isValid()},
submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"esri/OAuthSignInHandler":function(){define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query ./core/events dijit/form/Button dojo/query".split(" "),function(g,e,t,u,l,q,k,a,d,n,b,h,c){var f=null,p=null;try{f=window.localStorage,p=window.sessionStorage}catch(m){}var r=window.crypto||window.msCrypto;
return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(m){this._oAuthRedirectFunc=m},oAuthSignIn:function(m,v,z,A){var D=this._oAuthDfd=new a;D.resUrl_=m;D.sinfo_=v;D.oinfo_=z;var E=z._oAuthCred;if(E.storage&&("authorization-code"===z.flowType||"auto"===z.flowType&&8.4<=v.currentVersion)){var F=r.getRandomValues(new Uint8Array(32));var y=u.base64UrlEncode(F);E.codeVerifier=y;F=r.getRandomValues(new Uint8Array(32));E.stateUID=u.base64UrlEncode(F);E.save()||(E.codeVerifier=y=null)}else E.codeVerifier=null;var x=this;
this._getCodeChallenge(y).then(function(w){var C=!A||!1!==A.oAuthPopupConfirmation;if(!z.popup||!C)return x._doOAuthSignIn(m,v,z,w),D;D.codeChallenge_=w;x._nls||(x._nls=b.identity);x.oAuthDialog||(x.oAuthDialog=x._createOAuthDialog());w=x.oAuthDialog;C=A&&A.error;var B=A&&A.token;e.hide(w.errMsg_);C&&403==C.code&&B&&(n.set(w.errMsg_,"innerHTML",x._nls.forbidden),e.show(w.errMsg_));n.set(w.serverLink_,{title:v.server,innerHTML:-1!==v.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":v.server});
w.show()});return D},setOAuthResponseHash:function(m){m&&("#"===m.charAt(0)&&(m=m.substring(1)),this._processOAuthPopupParams(h.queryToObject(m)))},_createOAuthDialog:function(){var m=this._nls,v=t.substitute(m,this._oAuthDialogContent);v=t.substitute({server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},v);var z=new l({title:m.title,content:v,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var A=z.esriIdMgr_._oAuthDfd;
z.hide_();z.esriIdMgr_._doOAuthSignIn(A.resUrl_,A.sinfo_,A.oinfo_,A.codeChallenge_)},cancel_:function(){var A=z.esriIdMgr_._oAuthDfd;z.esriIdMgr_._oAuthDfd=null;z.hide_();var D=Error("ABORTED");D.code="IdentityManager.2";D.log=!!k.isDebug;A.errback(D)},hide_:function(){e.hide(z.errMsg_);z.hide();l._DialogLevelManager.hide(z)}});m=z.domNode;z.btnSubmit_=q.byNode(d.query(".esriIdSubmit",m)[0]);z.btnCancel_=q.byNode(d.query(".esriIdCancel",m)[0]);z.serverLink_=d.query(".serverLink",m)[0];z.errMsg_=d.query(".esriErrorMsg",
m)[0];z.connect(z.btnSubmit_,"onClick",z.execute_);z.connect(z.btnCancel_,"onClick",z.onCancel);z.connect(z,"onCancel",z.cancel_);return z},_doOAuthSignIn:function(m,v,z,A){var D=this,E=z._oAuthCred,F={portalUrl:z.portalUrl};!z.popup&&z.preserveUrlHash&&window.location.hash&&(F.hash=window.location.hash);E.stateUID&&(F.uid=E.stateUID);F={client_id:z.appId,response_type:E.codeVerifier?"code":"token",state:JSON.stringify(F),expiration:z.expiration,locale:z.locale,redirect_uri:this._getRedirectURI(z,
!!E.codeVerifier)};z.forceLogin&&(F.force_login=!0);z.forceUserId&&z.userId&&(F.prepopulatedusername=z.userId);!z.popup&&this._doPortalSignIn(m)&&(F.redirectToUserOrgUrl=!0);E.codeVerifier&&(F.code_challenge=A||E.codeVerifier,F.code_challenge_method=A?"S256":"plain");A=z.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize";E=A+"?"+h.objectToQuery(F);if(z.popup){var y=window.open(E,"esriJSAPIOAuth",z.popupWindowFeatures);y?(y.focus(),this._oAuthDfd.oAuthWin_=y,this._oAuthIntervalId=setInterval(function(){if(y.closed){clearInterval(D._oAuthIntervalId);
D._oAuthOnPopupHandle.remove();var x=D._oAuthDfd;if(x){var w=Error("ABORTED");w.code="IdentityManager.2";w.log=!!k.isDebug;x.errback(w)}}},500),D._oAuthOnPopupHandle=c.on(window,["arcgis:auth:hash","arcgis:auth:location:search"],function(x){"arcgis:auth:hash"===x.type?D.setOAuthResponseHash(x.detail):D._setOAuthResponseQueryString(x.detail)})):(m=Error("ABORTED"),m.name="identity-manager:user-aborted",m.code="IdentityManager.2",m.log=!!k.isDebug,this._oAuthDfd.errback(m))}else this._rejectOnPersistedPageShow=
!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:F,authorizeUrl:A,resourceUrl:m,serverInfo:v,oAuthInfo:z}):window.location.href=E},_getCodeChallenge:function(m){if(m&&window.isSecureContext)return m=(new TextEncoder).encode(m),r.subtle.digest("SHA-256",m).then(function(v){return u.base64UrlEncode(new Uint8Array(v))});m=new a;m.resolve(null);return m},_getRedirectURI:function(m,v){var z=window.location.href.replace(/#.*$/,"");if(m.popup)return u.getAbsoluteUrl(m.popupCallbackUrl);
if(v){var A=u.urlToObject(z);if(A.query)return"code error error_description message_code persist state".split(" ").forEach(function(D){delete A.query[D]}),(m=h.objectToQuery(A.query))?A.path+"?"+m:A.path}return z},_processOAuthPopupParams:function(m){var v=this._oAuthDfd;this._oAuthDfd=null;if(v)if(clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle&&this._oAuthOnPopupHandle.remove(),m.error){var z="access_denied"===m.error;m=Error(z?"ABORTED":"OAuth: "+m.error+" - "+m.error_description);
m.name=z?"identity-manager:user-aborted":"identity-manager:authentication-failed";m.code="IdentityManagerBase."+(z?2:3);m.log=!!k.isDebug;v.errback(m)}else this._processOAuthResponseParams(m,v.oinfo_,v.sinfo_).then(function(A){v.resolve(A)}).catch(function(A){v.reject(A)})},_processOAuthResponseParams:function(m,v,z){var A=v._oAuthCred;if(m.code){var D=A.codeVerifier;A.codeVerifier=null;A.stateUID=null;A.save();return this._getOAuthToken(z.server,m.code,v.appId,this._getRedirectURI(v,!0),D).then(function(F){var y=
new g({userId:F.username,server:z.server,token:F.access_token,expires:Date.now()+1E3*F.expires_in,ssl:F.ssl,oAuthState:m.state,_oAuthCred:A});v.userId=y.userId;A.storage=F.persist?f:p;A.refreshToken=F.refresh_token;A.token=null;A.expires=F.refresh_token_expires_in?Date.now()+1E3*F.refresh_token_expires_in:null;A.userId=y.userId;A.ssl=y.ssl;A.save();return y})}D=new g({userId:m.username,server:z.server,token:m.access_token,expires:Date.now()+1E3*Number(m.expires_in),ssl:"true"===m.ssl,oAuthState:m.state,
_oAuthCred:A});v.userId=D.userId;A.storage=m.persist?f:p;A.refreshToken=null;A.token=D.token;A.expires=D.expires;A.userId=D.userId;A.ssl=D.ssl;A.save();var E=new a;E.resolve(D);return E},_setOAuthResponseQueryString:function(m){m&&("?"===m.charAt(0)&&(m=m.substring(1)),this._processOAuthPopupParams(h.queryToObject(m)))}}})},"esri/core/events":function(){define([],function(){return{on:function(g,e,t){if(!g||"function"!==typeof g.on&&"function"!==typeof g.addEventListener)throw new TypeError("target is not a Evented or EventTarget object");
if("on"in g)return g.on(e,t);if(Array.isArray(e)){for(var u=e.slice(),l=0;l<u.length;l++)g.addEventListener(u[l],t);return{remove:function(){for(var q=0;q<u.length;q++)g.removeEventListener(u[q],t)}}}g.addEventListener(e,t);return{remove:function(){g.removeEventListener(e,t)}}}}})},"esri/arcade/ArcadeModuleLoader":function(){define(["require","exports"],function(g,e){Object.defineProperty(e,"__esModule",{value:!0});e.ArcadeModuleLoader=void 0;g=function(){function t(u,l){this._moduleSingletons=u;
this._syntaxModules=l}t.prototype.loadLibrary=function(u){return null==this._syntaxModules?null:(u=this._syntaxModules[u.toLowerCase()])?{syntax:u.script,uri:u.uri}:null};return t}();e.ArcadeModuleLoader=g})},"esri/arcade/ArcadeModuleResolver":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ../request ./parser ./featureset/support/RecentlyUsedCache ./executionError".split(" "),function(g,e,
t,u,l,q,k,a,d,n){Object.defineProperty(e,"__esModule",{value:!0});e.ArcadeModuleResolver=void 0;g=function(){function b(h){this.portalUri=h}b.prototype.extractRegexGroups=function(h,c){for(var f=[],p=0;p<c.length;p++)f[c[p]]="";p=0;for(var r=1;r<h.length;r++){var m=h[r];if(null!==m&&void 0!==m&&(f[c[p]]=m,p++,p>=c.length))break}return f};b.prototype.normalizeModuleUri=function(h){var c=/^[a-z0-9A-Z]+(@[0-9]+\.[0-9]+\.[0-9]+)?([\?|\/].*)?$/gi,f=/(.+)\/home\/item\.html\?id=(.+)$/gi,p=/(.+)\/sharing\/rest\/content\/users\/[a-zA-Z0-9]+\/items\/(.+)$/gi,
r=/(.+)\/sharing\/rest\/content\/items\/(.+)$/gi,m=/(.*)@([0-9]+\.[0-9]+\.[0-9]+)([\?|\/].*)?$/gi;if(h.startsWith("portal+")){var v=h.substring(7),z="",A=v,D=!1,E=0;for(f=[f,r,p];E<f.length;E++)if(p=f[E].exec(v),null!==p){D=this.extractRegexGroups(p,["portalurl","itemid"]);A=D.itemid;z=D.portalurl;D=!0;break}if(!1===D)if(c.test(v))A=v,z=this.portalUri;else throw new n.ModuleError(n.ModuleErrorCodes.UnsupportedUriProtocol,{uri:h});A.includes("/")&&(A=A.split("/")[0]);A.includes("?")&&(A=A.split("?")[0]);
h="current";m=m.exec(A);null!==m&&(D=this.extractRegexGroups(m,["itemid","versionstring"]),A=D.itemid,h=D.versionstring);z=(v||z).replace(/\/+$/,"");v=(-1!==z.indexOf("/sharing")?z+"/":z+"/sharing/rest/")+"content/items/"+A+"/resources/"+h+".arc";return{url:v,scheme:"portal",uri:"PO:"+v}}if(h.startsWith("mock")){if("mock"===h)return{url:"",scheme:"mock",data:'\n      export var hello \x3d 1;\n      export function helloWorld() {\n          return "Hello World " + hello;\n      }\n  ',uri:"mock"};
v=h.replace("mock:","");if(void 0!==b.mocks[v])return{url:"",scheme:"mock",data:b.mocks[v],uri:h}}throw new n.ModuleError(n.ModuleErrorCodes.UnrecognisedUri,{uri:h});};b.prototype.fetchModule=function(h){return t(this,void 0,void 0,function(){var c,f,p,r;return u(this,function(m){switch(m.label){case 0:if(c=b.cachedModules.getFromCache(h.uri))return[2,c];f=this.fetchSource(h);b.cachedModules.addToCache(h.uri,f);p=null;m.label=1;case 1:return m.trys.push([1,3,,4]),[4,f];case 2:return p=m.sent(),[3,
4];case 3:throw r=m.sent(),b.cachedModules.removeFromCache(h.uri),r;case 4:return[2,p]}})})};b.prototype.fetchSource=function(h){var c;return t(this,void 0,void 0,function(){var f;return u(this,function(p){switch(p.label){case 0:return"portal"!==h.scheme?[3,2]:[4,k({url:h.url,handleAs:"text",content:{},callbackParamName:"callback"})];case 1:if(f=p.sent())return[2,a.parseScript(f,[])];p.label=2;case 2:if("mock"===h.scheme)return[2,a.parseScript(null!==(c=h.data)&&void 0!==c?c:"",[])];throw new n.ModuleError(n.ModuleErrorCodes.UnsupportedUriProtocol);
}})})};b.create=function(h){return new b(h)};b.getDefault=function(){var h;return null!==(h=this._default)&&void 0!==h?h:b._default=b._moduleResolverFactory()};Object.defineProperty(b,"moduleResolverClass",{set:function(h){this._moduleResolverFactory=h;this._default=null},enumerable:!1,configurable:!0});b.mocks={};b.cachedModules=new d(30);b._default=null;b._moduleResolverFactory=function(){return new b("https://www.arcgis.com")};return b}();e.ArcadeModuleResolver=g})},"esri/arcade/parser":function(){define(["require",
"exports","./treeAnalysis","./lib/arcade-parser","./lib/arcade-parser"],function(g,e,t,u,l){Object.defineProperty(e,"__esModule",{value:!0});e.parseScript=void 0;e.parseScript=function(q,k){void 0===k&&(k=[]);q=u.parse(q);if(null===q.body||void 0===q.body)throw new l.ParsingError({index:0,line:0,column:0,data:null,description:"",code:l.ParsingErrorCodes.InvalidExpression});if(0===q.body.length)throw new l.ParsingError({index:0,line:0,column:0,data:null,description:"",code:l.ParsingErrorCodes.InvalidExpression});
if(0===q.body.length)throw new l.ParsingError({index:0,line:0,column:0,data:null,description:"",code:l.ParsingErrorCodes.InvalidExpression});q.loadedModules={};t.findScriptDependencies(q,k);return q}})},"esri/arcade/lib/arcade-parser":function(){define("require exports ../polyfill/tsSupport/exportstar ./parser ./tokenizer ./types".split(" "),function(g,e,t,u,l,q){Object.defineProperty(e,"__esModule",{value:!0});e.tokenize=e.parse=void 0;t(q,e);e.parse=function(k,a,d){return(new u.Parser(k,a,d)).parseScript()};
e.tokenize=function(k,a,d){k=new l.Tokenizer(k,a);a=[];var n=void 0;try{for(var b=void 0;b=k.getNextToken();)d&&(b=d(b)),a.push(b)}catch(h){k.errorHandler.tolerate(h)}k.errorHandler.tolerant&&(n=k.errors());return{tokens:a,errors:n}}})},"esri/arcade/polyfill/tsSupport/exportstar":function(){define([],function(){return function(){var g=this&&this.__createBinding||(Object.create?function(e,t,u,l){void 0===l&&(l=u);Object.defineProperty(e,l,{enumerable:!0,get:function(){return t[u]}})}:function(e,t,
u,l){void 0===l&&(l=u);e[l]=t[u]});return function(e,t){for(var u in e)"default"===u||Object.prototype.hasOwnProperty.call(t,u)||g(t,e,u)}}()})},"esri/arcade/lib/parser":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../polyfill/tsSupport/extends ./comment-handler ./error-handler ./scanner ./types".split(" "),function(g,e,t,u,l,q,k,a,d){function n(p,r){void 0===r&&(r=0);var m=p.start-p.lineStart,v=p.lineNumber;0>m&&(m+=r,v--);return{index:p.start,
line:v,column:m}}function b(p){return[t({index:p.range[0]},p.loc.start),t({index:p.range[1]},p.loc.end)]}function h(p){var r;return null!==(r=d.OperatorPrecedence[p])&&void 0!==r?r:0}Object.defineProperty(e,"__esModule",{value:!0});e.Parser=e.binaryOperatorPrecedence=void 0;var c;(function(p){p[p.None=0]="None";p[p.Function=1]="Function";p[p.IfClause=2]="IfClause";p[p.ForLoop=4]="ForLoop";p[p.WhileLoop=8]="WhileLoop"})(c||(c={}));var f;(function(p){p[p.AsObject=0]="AsObject";p[p.Automatic=1]="Automatic"})(f||
(f={}));e.binaryOperatorPrecedence=h;g=function(){function p(r,m,v){void 0===m&&(m={});this.delegate=v;this.hasLineTerminator=!1;this.options={tokens:"boolean"===typeof m.tokens&&m.tokens,comments:"boolean"===typeof m.comments&&m.comments,tolerant:"boolean"===typeof m.tolerant&&m.tolerant};this.options.comments&&(this.commentHandler=new q.CommentHandler);this.errorHandler=new k.ErrorHandler(this.options.tolerant);this.scanner=new a.Scanner(r,this.errorHandler);this.context={isAssignmentTarget:!1,
blockContext:c.None,curlyParsingType:f.AsObject};this.rawToken={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};this.endMarker={index:0,line:this.scanner.lineNumber,column:0};this.readNextRawToken();this.endMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}p.prototype.throwIfInvalidType=function(r,m,v){var z=v.validTypes;v=v.invalidTypes;
(null===z||void 0===z?0:z.some(function(A){return r.type===A}))||null!==v&&void 0!==v&&v.some(function(A){return r.type===A})&&this.throwError(d.ParsingErrorCodes.InvalidExpression,m)};p.prototype.throwError=function(r,m,v){void 0===v&&(v=this.endMarker);var z=m.index;this.errorHandler.throwError({code:r,index:z,line:m.line,column:m.column+1,len:v.index-z-1})};p.prototype.tolerateError=function(r,m){throw Error("######################################### !!!");};p.prototype.unexpectedTokenError=function(r){void 0===
r&&(r={});var m=r.rawToken,v=r.code;r=r.data;if(m){if(!v)switch(m.type){case 2:v=d.ParsingErrorCodes.UnexpectedEndOfScript;break;case 3:v=d.ParsingErrorCodes.UnexpectedIdentifier;break;case 6:v=d.ParsingErrorCodes.UnexpectedNumber;break;case 8:v=d.ParsingErrorCodes.UnexpectedString;break;case 10:v=d.ParsingErrorCodes.UnexpectedTemplate}var z=m.value.toString()}else z="ILLEGAL";v=null!==v&&void 0!==v?v:d.ParsingErrorCodes.UnexpectedToken;r||(r={value:z});z=k.formatErrorDescription(v,r);if(m)return new d.ParsingError({code:v,
index:m.start,line:m.lineNumber,column:m.start-m.lineStart+1,len:m.end-m.start-1,data:r,description:z});m=this.endMarker;return new d.ParsingError({code:v,index:m.index,line:m.line,column:this.endMarker.column+1,data:r,description:z})};p.prototype.throwUnexpectedToken=function(r){var m;void 0===r&&(r={});r.rawToken=null!==(m=r.rawToken)&&void 0!==m?m:this.rawToken;throw this.unexpectedTokenError(r);};p.prototype.collectComments=function(r){var m=this,v=this.commentHandler;v&&r.length&&r.forEach(function(z){z=
{type:z.multiLine?"BlockComment":"LineComment",value:m.getSourceValue(z),range:z.range,loc:z.loc};v.collectComment(z)})};p.prototype.peekAhead=function(r){var m=this,v=this.scanner.saveState();r=r.call(this,function(){m.scanner.scanComments();return m.scanner.lex()});this.scanner.restoreState(v);return r};p.prototype.getSourceValue=function(r){return this.scanner.source.slice(r.start,r.end)};p.prototype.convertToToken=function(r){return{type:d.TokenNames[r.type],value:this.getSourceValue(r),range:[r.start,
r.end],loc:{start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}}};p.prototype.readNextRawToken=function(){this.endMarker.index=this.scanner.index;this.endMarker.line=this.scanner.lineNumber;this.endMarker.column=this.scanner.index-this.scanner.lineStart;var r=this.rawToken;this.collectComments(this.scanner.scanComments());this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,
this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);this.rawToken=this.scanner.lex();this.hasLineTerminator=r.lineNumber!==this.rawToken.lineNumber;this.options.tokens&&2!==this.rawToken.type&&this.tokens.push(this.convertToToken(this.rawToken))};p.prototype.captureStartMarker=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};p.prototype.getItemLocation=function(r){return{range:[r.index,
this.endMarker.index],loc:{start:{line:r.line,column:r.column},end:{line:this.endMarker.line,column:this.endMarker.column}}}};p.prototype.finalize=function(r){var m,v;if(this.delegate||this.commentHandler)null===(m=this.commentHandler)||void 0===m?void 0:m.attachComments(r),null===(v=this.delegate)||void 0===v?void 0:v.call(this,r);return r};p.prototype.expectPunctuator=function(r){var m=this.rawToken;this.matchPunctuator(r)?this.readNextRawToken():this.throwUnexpectedToken({rawToken:m,code:d.ParsingErrorCodes.PunctuatorExpected,
data:{value:r}})};p.prototype.expectKeyword=function(r){4===this.rawToken.type&&this.rawToken.value.toLowerCase()===r?this.readNextRawToken():this.throwUnexpectedToken({rawToken:this.rawToken})};p.prototype.expectContextualKeyword=function(r){3===this.rawToken.type&&this.rawToken.value.toLowerCase()===r?this.readNextRawToken():this.throwUnexpectedToken({rawToken:this.rawToken})};p.prototype.matchKeyword=function(r){return 4===this.rawToken.type&&this.rawToken.value.toLowerCase()===r};p.prototype.matchContextualKeyword=
function(r){return 3===this.rawToken.type&&this.rawToken.value===r};p.prototype.matchPunctuator=function(r){return 7===this.rawToken.type&&this.rawToken.value===r};p.prototype.getMatchingPunctuator=function(r){"string"===typeof r&&(r=r.split(""));if(7===this.rawToken.type&&null!==r&&void 0!==r&&r.length)return r.find(this.matchPunctuator,this)};p.prototype.isolateCoverGrammar=function(r){var m=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;r=r.call(this);this.context.isAssignmentTarget=
m;return r};p.prototype.inheritCoverGrammar=function(r){var m=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;r=r.call(this);this.context.isAssignmentTarget=this.context.isAssignmentTarget&&m;return r};p.prototype.withBlockContext=function(r,m){var v=this.context.blockContext;this.context.blockContext|=r;r=this.context.curlyParsingType;this.context.curlyParsingType=f.Automatic;m=m.call(this);this.context.blockContext=v;this.context.curlyParsingType=r;return m};p.prototype.consumeSemicolon=
function(){this.matchPunctuator(";")?this.readNextRawToken():this.hasLineTerminator||(2===this.rawToken.type||this.matchPunctuator("}")?(this.endMarker.index=this.startMarker.index,this.endMarker.line=this.startMarker.line,this.endMarker.column=this.startMarker.column):this.throwUnexpectedToken({rawToken:this.rawToken}))};p.prototype.parsePrimaryExpression=function(){var r=this.captureStartMarker(),m=this.rawToken;switch(m.type){case 3:return this.readNextRawToken(),this.finalize(t({type:"Identifier",
name:m.value},this.getItemLocation(r)));case 6:case 8:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize(t({type:"Literal",value:m.value,raw:this.getSourceValue(m),isString:"string"===typeof m.value},this.getItemLocation(r)));case 1:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize(t({type:"Literal",value:m.value.toLowerCase()===d.Keywords.True,raw:this.getSourceValue(m),isString:!1},this.getItemLocation(r)));case 5:return this.context.isAssignmentTarget=
!1,this.readNextRawToken(),this.finalize(t({type:"Literal",value:null,raw:this.getSourceValue(m),isString:!1},this.getItemLocation(r)));case 10:return this.parseTemplateLiteral();case 7:switch(m.value){case "(":return this.inheritCoverGrammar(this.parseGroupExpression);case "[":return this.inheritCoverGrammar(this.parseArrayInitializer);case "{":return this.inheritCoverGrammar(this.parseObjectExpression);default:return this.throwUnexpectedToken({rawToken:this.rawToken})}case 4:return this.context.isAssignmentTarget=
!1,this.throwUnexpectedToken({rawToken:this.rawToken});default:return this.throwUnexpectedToken({rawToken:this.rawToken})}};p.prototype.parseArrayInitializer=function(){var r=this.captureStartMarker();this.expectPunctuator("[");for(var m=[];!this.matchPunctuator("]");){var v=this.captureStartMarker();this.matchPunctuator(",")?(this.readNextRawToken(),this.throwError(d.ParsingErrorCodes.InvalidExpression,v)):(m.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.matchPunctuator("]")||
this.expectPunctuator(","))}this.expectPunctuator("]");return this.finalize(t({type:"ArrayExpression",elements:m},this.getItemLocation(r)))};p.prototype.parseObjectPropertyKey=function(){var r=this.captureStartMarker(),m=this.rawToken;switch(m.type){case 8:return this.readNextRawToken(),this.finalize(t({type:"Literal",value:m.value,raw:this.getSourceValue(m),isString:!0},this.getItemLocation(r)));case 3:case 1:case 5:case 4:return this.readNextRawToken(),this.finalize(t({type:"Identifier",name:m.value},
this.getItemLocation(r)));default:this.throwError(d.ParsingErrorCodes.KeyMustBeString,r)}};p.prototype.parseObjectProperty=function(){var r=this.rawToken,m=this.captureStartMarker(),v=this.parseObjectPropertyKey(),z=!1,A=null;this.matchPunctuator(":")?(this.readNextRawToken(),A=this.inheritCoverGrammar(this.parseAssignmentExpression)):3===r.type?(z=!0,A=this.finalize(t({type:"Identifier",name:r.value},this.getItemLocation(m)))):this.throwUnexpectedToken({rawToken:this.rawToken});return this.finalize(t({type:"Property",
kind:"init",key:v,value:A,shorthand:z},this.getItemLocation(m)))};p.prototype.parseObjectExpression=function(){var r=this.captureStartMarker();this.expectPunctuator("{");for(var m=[];!this.matchPunctuator("}");)m.push(this.parseObjectProperty()),this.matchPunctuator("}")||this.expectPunctuator(",");this.expectPunctuator("}");return this.finalize(t({type:"ObjectExpression",properties:m},this.getItemLocation(r)))};p.prototype.parseTemplateElement=function(r){void 0===r&&(r=!1);var m=this.rawToken;10!==
m.type&&this.throwUnexpectedToken({rawToken:m});r&&!m.head&&this.throwUnexpectedToken({code:d.ParsingErrorCodes.InvalidTemplateHead,rawToken:m});var v=this.captureStartMarker();this.readNextRawToken();r=m.tail;m=this.finalize(t({type:"TemplateElement",value:{raw:m.value,cooked:m.cooked},tail:r},this.getItemLocation(v)));m.loc.start.column++;m.loc.end.column-=r?1:2;return m};p.prototype.parseTemplateLiteral=function(){var r=this.captureStartMarker(),m=[],v=[],z=this.parseTemplateElement(!0);for(v.push(z);!z.tail;)m.push(this.parseExpression()),
z=this.parseTemplateElement(),v.push(z);return this.finalize(t({type:"TemplateLiteral",quasis:v,expressions:m},this.getItemLocation(r)))};p.prototype.parseGroupExpression=function(){this.expectPunctuator("(");var r=this.inheritCoverGrammar(this.parseAssignmentExpression);this.expectPunctuator(")");return r};p.prototype.parseArguments=function(){this.expectPunctuator("(");var r=[];if(!this.matchPunctuator(")"))for(;;){var m=this.isolateCoverGrammar(this.parseAssignmentExpression);r.push(m);if(this.matchPunctuator(")"))break;
this.expectPunctuator(",");if(this.matchPunctuator(")"))break}this.expectPunctuator(")");return r};p.prototype.parseMemberName=function(){var r=this.rawToken,m=this.captureStartMarker();this.readNextRawToken();5!==r.type&&3!==r.type&&4!==r.type&&1!==r.type&&this.throwUnexpectedToken({rawToken:r});return this.finalize(t({type:"Identifier",name:r.value},this.getItemLocation(m)))};p.prototype.parseLeftHandSideExpression=function(){for(var r=this.captureStartMarker(),m=this.inheritCoverGrammar(this.parsePrimaryExpression),
v=this.captureStartMarker(),z;z=this.getMatchingPunctuator("([.");)switch(z){case "(":this.context.isAssignmentTarget=!1;"Identifier"!==m.type&&"MemberExpression"!==m.type&&this.throwError(d.ParsingErrorCodes.IdentiferExpected,r,v);z=this.parseArguments();m=this.finalize(t({type:"CallExpression",callee:m,arguments:z},this.getItemLocation(r)));continue;case "[":this.context.isAssignmentTarget=!0;this.expectPunctuator("[");z=this.isolateCoverGrammar(this.parseExpression);this.expectPunctuator("]");
m=this.finalize(t({type:"MemberExpression",computed:!0,object:m,property:z},this.getItemLocation(r)));continue;case ".":this.context.isAssignmentTarget=!0,this.expectPunctuator("."),z=this.parseMemberName(),m=this.finalize(t({type:"MemberExpression",computed:!1,object:m,property:z},this.getItemLocation(r)))}return m};p.prototype.parseUpdateExpression=function(){var r=this.captureStartMarker(),m=this.getMatchingPunctuator(d.UpdateOperators);if(m){this.readNextRawToken();var v=this.captureStartMarker(),
z=this.inheritCoverGrammar(this.parseUnaryExpression);"Identifier"!==z.type&&"MemberExpression"!==z.type&&"CallExpression"!==z.type&&this.throwError(d.ParsingErrorCodes.InvalidExpression,v);this.context.isAssignmentTarget||this.tolerateError(d.ParsingErrorCodes.InvalidLeftHandSideInAssignment,r);this.context.isAssignmentTarget=!1;return this.finalize(t({type:"UpdateExpression",operator:m,argument:z,prefix:!0},this.getItemLocation(r)))}v=this.captureStartMarker();z=this.inheritCoverGrammar(this.parseLeftHandSideExpression);
var A=this.captureStartMarker();if(this.hasLineTerminator)return z;m=this.getMatchingPunctuator(d.UpdateOperators);if(!m)return z;"Identifier"!==z.type&&"MemberExpression"!==z.type&&this.throwError(d.ParsingErrorCodes.InvalidExpression,v,A);this.context.isAssignmentTarget||this.tolerateError(d.ParsingErrorCodes.InvalidLeftHandSideInAssignment,r);this.readNextRawToken();this.context.isAssignmentTarget=!1;return this.finalize(t({type:"UpdateExpression",operator:m,argument:z,prefix:!1},this.getItemLocation(r)))};
p.prototype.parseUnaryExpression=function(){var r=this.getMatchingPunctuator(d.UnaryOperators);if(r){var m=this.captureStartMarker();this.readNextRawToken();var v=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.isAssignmentTarget=!1;return this.finalize(t({type:"UnaryExpression",operator:r,argument:v,prefix:!0},this.getItemLocation(m)))}return this.parseUpdateExpression()};p.prototype.parseBinaryExpression=function(){var r=this.rawToken,m=this.inheritCoverGrammar(this.parseUnaryExpression);
if(7!==this.rawToken.type)return m;var v=this.rawToken.value,z=h(v);if(0===z)return m;this.readNextRawToken();this.context.isAssignmentTarget=!1;r=[r,this.rawToken];var A=this.inheritCoverGrammar(this.parseUnaryExpression);v=[m,v,A];for(var D=[z];7===this.rawToken.type&&0<(z=h(this.rawToken.value));){for(;2<v.length&&z<=D[D.length-1];){A=v.pop();var E=v.pop();D.pop();m=v.pop();r.pop();var F=r[r.length-1];F=n(F,F.lineStart);v.push(this.finalize(this.createBinaryOrLogicalExpression(F,E,m,A)))}v.push(this.rawToken.value);
D.push(z);r.push(this.rawToken);this.readNextRawToken();v.push(this.inheritCoverGrammar(this.parseUnaryExpression))}z=v.length-1;m=v[z];for(F=r.pop();1<z;){A=r.pop();if(!A)break;F=n(A,null===F||void 0===F?void 0:F.lineStart);m=this.finalize(this.createBinaryOrLogicalExpression(F,v[z-1],v[z-2],m));z-=2;F=A}return m};p.prototype.createBinaryOrLogicalExpression=function(r,m,v,z){var A=d.LogicalOperators.includes(m)?"LogicalExpression":"BinaryExpression";if("BinaryExpression"===A)return t({type:A,operator:m,
left:v,right:z},this.getItemLocation(r));"AssignmentExpression"!==v.type&&"UpdateExpression"!==v.type||this.throwError.apply(this,u([d.ParsingErrorCodes.InvalidExpression],b(v)));"AssignmentExpression"!==z.type&&"UpdateExpression"!==z.type||this.throwError.apply(this,u([d.ParsingErrorCodes.InvalidExpression],b(v)));return t({type:A,operator:m,left:v,right:z},this.getItemLocation(r))};p.prototype.parseAssignmentExpression=function(){var r=this.captureStartMarker(),m=this.inheritCoverGrammar(this.parseBinaryExpression),
v=this.captureStartMarker(),z=this.getMatchingPunctuator(d.AssignmentOperators);if(!z)return m;"Identifier"!==m.type&&"MemberExpression"!==m.type&&this.throwError(d.ParsingErrorCodes.InvalidExpression,r,v);this.context.isAssignmentTarget||this.tolerateError(d.ParsingErrorCodes.InvalidLeftHandSideInAssignment,r);this.matchPunctuator("\x3d")||(this.context.isAssignmentTarget=!1);this.readNextRawToken();v=this.isolateCoverGrammar(this.parseAssignmentExpression);return this.finalize(t({type:"AssignmentExpression",
left:m,operator:z,right:v},this.getItemLocation(r)))};p.prototype.parseExpression=function(){return this.isolateCoverGrammar(this.parseAssignmentExpression)};p.prototype.parseStatements=function(r){for(var m=[];2!==this.rawToken.type&&!this.matchPunctuator(r);){var v=this.parseStatementListItem();d.isEmptyStatement(v)||m.push(v)}return m};p.prototype.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;return this.matchKeyword(d.Keywords.Function)?this.parseFunctionDeclaration():this.matchKeyword(d.Keywords.Export)?
this.parseExportDeclaration():this.matchKeyword(d.Keywords.Import)?this.parseImportDeclaration():this.parseStatement()};p.prototype.parseBlock=function(){var r=this.captureStartMarker();this.expectPunctuator("{");var m=this.parseStatements("}");this.expectPunctuator("}");return this.finalize(t({type:"BlockStatement",body:m},this.getItemLocation(r)))};p.prototype.parseObjectStatement=function(){var r=this.captureStartMarker(),m=this.parseObjectExpression();return this.finalize(t({type:"ExpressionStatement",
expression:m},this.getItemLocation(r)))};p.prototype.parseBlockOrObjectStatement=function(){return this.context.curlyParsingType===f.AsObject||this.peekAhead(function(r){var m=r();if(3!==m.type&&8!==m.type)return!1;m=r();return 7!==m.type||":"!==m.value?!1:!0})?this.parseObjectStatement():this.parseBlock()};p.prototype.parseIdentifier=function(){var r=this.rawToken;if(3!==r.type)return null;var m=this.captureStartMarker();this.readNextRawToken();return this.finalize(t({type:"Identifier",name:r.value},
this.getItemLocation(m)))};p.prototype.parseVariableDeclarator=function(){var r=this.captureStartMarker(),m=this.parseIdentifier();m||this.throwUnexpectedToken({code:d.ParsingErrorCodes.IdentiferExpected});var v=null;if(this.matchPunctuator("\x3d")){this.readNextRawToken();var z=this.rawToken;try{v=this.isolateCoverGrammar(this.parseAssignmentExpression)}catch(A){this.throwUnexpectedToken({rawToken:z,code:d.ParsingErrorCodes.InvalidVariableAssignment})}}return this.finalize(t({type:"VariableDeclarator",
id:m,init:v},this.getItemLocation(r)))};p.prototype.parseVariableDeclarationList=function(){for(var r=[this.parseVariableDeclarator()];this.matchPunctuator(",");)this.readNextRawToken(),r.push(this.parseVariableDeclarator());return r};p.prototype.parseVariableDeclaration=function(){var r=this.captureStartMarker();this.expectKeyword(d.Keywords.Var);var m=this.parseVariableDeclarationList();this.consumeSemicolon();return this.finalize(t({type:"VariableDeclaration",declarations:m,kind:"var"},this.getItemLocation(r)))};
p.prototype.parseEmptyStatement=function(){var r=this.captureStartMarker();this.expectPunctuator(";");return this.finalize(t({type:"EmptyStatement"},this.getItemLocation(r)))};p.prototype.parseExpressionStatement=function(){var r=this.captureStartMarker(),m=this.parseExpression();this.consumeSemicolon();return this.finalize(t({type:"ExpressionStatement",expression:m},this.getItemLocation(r)))};p.prototype.parseIfClause=function(){return this.withBlockContext(c.IfClause,this.parseStatement)};p.prototype.parseIfStatement=
function(){var r=this.captureStartMarker();this.expectKeyword(d.Keywords.If);this.expectPunctuator("(");var m=this.captureStartMarker(),v=this.parseExpression(),z=this.captureStartMarker();this.expectPunctuator(")");"AssignmentExpression"!==v.type&&"UpdateExpression"!==v.type||this.throwError(d.ParsingErrorCodes.InvalidExpression,m,z);m=this.parseIfClause();z=null;this.matchKeyword(d.Keywords.Else)&&(this.readNextRawToken(),z=this.parseIfClause());return this.finalize(t({type:"IfStatement",test:v,
consequent:m,alternate:z},this.getItemLocation(r)))};p.prototype.parseWhileStatement=function(){var r=this.captureStartMarker();this.expectKeyword(d.Keywords.While);this.expectPunctuator("(");var m=this.captureStartMarker(),v=this.parseExpression(),z=this.captureStartMarker();this.expectPunctuator(")");"AssignmentExpression"!==v.type&&"UpdateExpression"!==v.type||this.throwError(d.ParsingErrorCodes.InvalidExpression,m,z);m=this.withBlockContext(c.WhileLoop,this.parseStatement);return this.finalize(t({type:"WhileStatement",
test:v,body:m},this.getItemLocation(r)))};p.prototype.parseForStatement=function(){var r=this,m=null,v=null,z=null,A=null,D=null,E=this.captureStartMarker();this.expectKeyword(d.Keywords.For);this.expectPunctuator("(");if(this.matchPunctuator(";"))this.readNextRawToken();else if(this.matchKeyword(d.Keywords.Var)){var F=this.captureStartMarker();this.readNextRawToken();var y=this.parseVariableDeclarationList();1===y.length&&this.matchKeyword(d.Keywords.In)?(y[0].init&&this.throwError(d.ParsingErrorCodes.ForInOfLoopInitializer,
F),A=this.finalize(t({type:"VariableDeclaration",declarations:y,kind:"var"},this.getItemLocation(F))),this.readNextRawToken(),D=this.parseExpression()):(this.matchKeyword(d.Keywords.In)&&this.throwError(d.ParsingErrorCodes.InvalidLeftHandSideInForIn,F),m=this.finalize(t({type:"VariableDeclaration",declarations:y,kind:"var"},this.getItemLocation(F))),this.expectPunctuator(";"))}else y=this.context.isAssignmentTarget,F=this.captureStartMarker(),m=this.inheritCoverGrammar(this.parseAssignmentExpression),
this.matchKeyword(d.Keywords.In)?(this.context.isAssignmentTarget||this.tolerateError(d.ParsingErrorCodes.InvalidLeftHandSideInForIn,F),"Identifier"!==m.type&&this.throwError(d.ParsingErrorCodes.InvalidLeftHandSideInForIn,F),this.readNextRawToken(),A=m,D=this.parseExpression(),m=null):(this.context.isAssignmentTarget=y,this.expectPunctuator(";"));A||(this.matchPunctuator(";")||(v=this.isolateCoverGrammar(this.parseExpression)),this.expectPunctuator(";"),this.matchPunctuator(")")||(z=this.isolateCoverGrammar(this.parseExpression)));
this.expectPunctuator(")");F=this.withBlockContext(c.ForLoop,function(){return r.isolateCoverGrammar(r.parseStatement)});return A&&D?this.finalize(t({type:"ForInStatement",left:A,right:D,body:F},this.getItemLocation(E))):this.finalize(t({type:"ForStatement",init:m,test:v,update:z,body:F},this.getItemLocation(E)))};p.prototype.parseContinueStatement=function(){var r=this.captureStartMarker();this.expectKeyword(d.Keywords.Continue);this.consumeSemicolon();return this.finalize(t({type:"ContinueStatement"},
this.getItemLocation(r)))};p.prototype.parseBreakStatement=function(){var r=this.captureStartMarker();this.expectKeyword(d.Keywords.Break);this.consumeSemicolon();return this.finalize(t({type:"BreakStatement"},this.getItemLocation(r)))};p.prototype.parseReturnStatement=function(){var r=this.captureStartMarker();this.expectKeyword(d.Keywords.Return);var m=(this.matchPunctuator(";")||this.matchPunctuator("}")||this.hasLineTerminator||2===this.rawToken.type)&&8!==this.rawToken.type&&10!==this.rawToken.type?
null:this.parseExpression();this.consumeSemicolon();return this.finalize(t({type:"ReturnStatement",argument:m},this.getItemLocation(r)))};p.prototype.parseStatement=function(){switch(this.rawToken.type){case 1:case 5:case 6:case 8:case 10:case 3:return this.parseExpressionStatement();case 7:return"{"===this.rawToken.value?this.parseBlockOrObjectStatement():"("===this.rawToken.value?this.parseExpressionStatement():";"===this.rawToken.value?this.parseEmptyStatement():this.parseExpressionStatement();
case 4:switch(this.rawToken.value.toLowerCase()){case d.Keywords.Break:return this.parseBreakStatement();case d.Keywords.Continue:return this.parseContinueStatement();case d.Keywords.For:return this.parseForStatement();case d.Keywords.Function:return this.parseFunctionDeclaration();case d.Keywords.If:return this.parseIfStatement();case d.Keywords.Return:return this.parseReturnStatement();case d.Keywords.Var:return this.parseVariableDeclaration();case d.Keywords.While:return this.parseWhileStatement();
default:return this.parseExpressionStatement()}default:return this.throwUnexpectedToken({rawToken:this.rawToken})}};p.prototype.parseFormalParameters=function(){var r=[];this.expectPunctuator("(");if(!this.matchPunctuator(")"))for(;2!==this.rawToken.type;){var m=this.parseIdentifier();m||this.throwUnexpectedToken({rawToken:this.rawToken,code:d.ParsingErrorCodes.IdentiferExpected});r.push(m);if(this.matchPunctuator(")"))break;this.expectPunctuator(",");if(this.matchPunctuator(")"))break}this.expectPunctuator(")");
return r};p.prototype.parseFunctionDeclaration=function(){(this.context.blockContext&c.Function)===c.Function&&this.throwUnexpectedToken({code:d.ParsingErrorCodes.NoFunctionInsideFunction});(this.context.blockContext&c.WhileLoop)!==c.WhileLoop&&(this.context.blockContext&c.IfClause)!==c.IfClause||this.throwUnexpectedToken({code:d.ParsingErrorCodes.NoFunctionInsideBlock});var r=this.captureStartMarker();this.expectKeyword(d.Keywords.Function);var m=this.parseIdentifier();m||this.throwUnexpectedToken({code:d.ParsingErrorCodes.InvalidFunctionIdentifier});
var v=this.parseFormalParameters(),z=this.context.blockContext;this.context.blockContext|=c.Function;var A=this.parseBlock();this.context.blockContext=z;return this.finalize(t({type:"FunctionDeclaration",id:m,params:v,body:A},this.getItemLocation(r)))};p.prototype.parseScript=function(){var r=this.captureStartMarker(),m=this.parseStatements();r=this.finalize(t({type:"Program",body:m},this.getItemLocation(r)));this.options.tokens&&(r.tokens=this.tokens);this.options.tolerant&&(r.errors=this.errorHandler.errors);
return r};p.prototype.parseExportDeclaration=function(){this.context.blockContext!==c.None&&this.throwUnexpectedToken({code:d.ParsingErrorCodes.ModuleExportRootOnly});var r=null,m=this.captureStartMarker();this.expectKeyword(d.Keywords.Export);this.matchKeyword(d.Keywords.Var)?r=this.parseVariableDeclaration():this.matchKeyword("function")?r=this.parseFunctionDeclaration():this.throwUnexpectedToken({code:d.ParsingErrorCodes.InvalidExpression});return this.finalize(t({type:"ExportNamedDeclaration",
declaration:r,specifiers:[],source:null},this.getItemLocation(m)))};p.prototype.parseModuleSpecifier=function(){var r=this.captureStartMarker(),m=this.rawToken;if(8===m.type)return this.readNextRawToken(),this.finalize(t({type:"Literal",value:m.value,raw:this.getSourceValue(m),isString:!0},this.getItemLocation(r)));this.throwError(d.ParsingErrorCodes.InvalidModuleUri,r)};p.prototype.parseDefaultSpecifier=function(){var r=this.captureStartMarker(),m=this.parseIdentifier();m||this.throwUnexpectedToken({code:d.ParsingErrorCodes.IdentiferExpected});
return this.finalize(t({type:"ImportDefaultSpecifier",local:m},this.getItemLocation(r)))};p.prototype.parseImportDeclaration=function(){this.context.blockContext!==c.None&&this.throwUnexpectedToken({code:d.ParsingErrorCodes.ModuleImportRootOnly});var r=this.captureStartMarker();this.expectKeyword(d.Keywords.Import);var m=this.parseDefaultSpecifier();this.expectContextualKeyword(d.Keywords.From);var v=this.parseModuleSpecifier();return this.finalize(t({type:"ImportDeclaration",specifiers:[m],source:v},
this.getItemLocation(r)))};return p}();e.Parser=g})},"esri/arcade/lib/comment-handler":function(){define(["require","exports","../polyfill/tsSupport/assign","../polyfill/tsSupport/spreadarray","./types"],function(g,e,t,u,l){function q(k,a){return a?a.loc.end.line===k.loc.start.line&&a.loc.end.column<=k.loc.start.column:!1}Object.defineProperty(e,"__esModule",{value:!0});e.CommentHandler=void 0;g=function(){function k(){this.comments=[];this._nodeStack=[];this._newComments=[]}k.prototype.insertInnerComments=
function(a){if(l.isBlockStatement(a)&&0===a.body.length){for(var d=[],n=this._newComments.length-1;0<=n;--n){var b=this._newComments[n];a.range[1]>=b.range[0]&&(d.unshift(b),this._newComments.splice(n,1))}d.length&&(a.innerComments=d)}};k.prototype.attachTrailingComments=function(a){var d,n;if(a){var b=this._nodeStack[this._nodeStack.length-1];if(l.isBlockStatement(a)&&b.range[0]>=a.range[0]&&b.range[1]<=a.range[1])for(var h=this._newComments.length-1;0<=h;--h){var c=this._newComments[h];c.range[0]>=
a.range[0]&&c.range[1]<=a.range[1]&&(b.trailingComments=u(u([],null!==(d=b.trailingComments)&&void 0!==d?d:[]),[c]),this._newComments.splice(h,1))}d=[];if(0<this._newComments.length)for(h=this._newComments.length-1;0<=h;--h)c=this._newComments[h],q(c,b)?(b.trailingComments=u(u([],null!==(n=b.trailingComments)&&void 0!==n?n:[]),[c]),this._newComments.splice(h,1)):q(c,a)&&(d.unshift(c),this._newComments.splice(h,1));(null===b||void 0===b?0:b.trailingComments)&&q(b.trailingComments[0],a)&&(d=u(u([],
d),b.trailingComments),delete b.trailingComments);0<d.length&&(a.trailingComments=d)}};k.prototype.attachLeadingComments=function(a){var d,n,b,h;if(a){for(var c;0<this._nodeStack.length;){var f=this._nodeStack[this._nodeStack.length-1];if(a.range[0]<=f.range[0])c=f,this._nodeStack.pop();else break}f=[];var p=[];if(c){for(var r=(null!==(n=null===(d=c.leadingComments)||void 0===d?void 0:d.length)&&void 0!==n?n:0)-1;0<=r;--r)d=c.leadingComments[r],a.range[0]>=d.range[1]?(f.unshift(d),c.leadingComments.splice(r,
1)):l.isVariableDeclarator(a)&&!l.isBlockComment(d)&&(p.unshift(d),c.leadingComments.splice(r,1));0===(null===(b=c.leadingComments)||void 0===b?void 0:b.length)&&delete c.leadingComments;f.length&&(a.leadingComments=f);p.length&&(a.trailingComments=u(u([],p),null!==(h=a.trailingComments)&&void 0!==h?h:[]))}else{for(r=this._newComments.length-1;0<=r;--r)d=this._newComments[r],a.range[0]>=d.range[0]&&(f.unshift(d),this._newComments.splice(r,1));f.length&&(a.leadingComments=f)}}};k.prototype.attachComments=
function(a){var d;if(l.isProgram(a)&&0<a.body.length){var n=this._nodeStack[this._nodeStack.length-1];n?(n.trailingComments=u(u([],null!==(d=n.trailingComments)&&void 0!==d?d:[]),this._newComments),this._newComments.length=0,this._nodeStack.pop()):(a.trailingComments=u([],this._newComments),this._newComments.length=0)}else this.attachTrailingComments(a),this.attachLeadingComments(a),this.insertInnerComments(a),this._nodeStack.push(a)};k.prototype.collectComment=function(a){this.comments.push(a);this._newComments.push(a)};
return k}();e.CommentHandler=g})},"esri/arcade/lib/types":function(){define(["require","exports","../polyfill/tsSupport/extends"],function(g,e,t){var u;Object.defineProperty(e,"__esModule",{value:!0});e.isTemplateElement=e.isProperty=e.isVariableDeclarator=e.isUpdateExpression=e.isUnaryExpression=e.isMemberExpression=e.isTemplateLiteral=e.isObjectExpression=e.isLogicalExpression=e.isLiteral=e.isIdentifier=e.isCallExpression=e.isBinaryExpression=e.isAssignmentExpression=e.isArrayExpression=e.isExpression=
e.isVariableDeclaration=e.isReturnStatement=e.isIfStatement=e.isFunctionDeclaration=e.isForStatement=e.isForInStatement=e.isExpressionStatement=e.isEmptyStatement=e.isContinueStatement=e.isBreakStatement=e.isBlockComment=e.isBlockStatement=e.isStatement=e.isProgram=e.ParsingError=e.ParsingErrorMessages=e.ParsingErrorCodes=e.TokenNames=e.TokenType=e.OperatorPrecedence=e.BinaryOperators=e.LogicalOperators=e.AssignmentOperators=e.UnaryOperators=e.UpdateOperators=e.Syntax=e.Keywords=void 0;(function(l){l.Break=
"break";l.Continue="continue";l.Else="else";l.False="false";l.For="for";l.From="from";l.Function="function";l.If="if";l.Import="import";l.Export="export";l.In="in";l.Null="null";l.Return="return";l.True="true";l.Var="var";l.While="while"})(e.Keywords||(e.Keywords={}));(function(l){l.AssignmentExpression="AssignmentExpression";l.ArrayExpression="ArrayExpression";l.BlockComment="BlockComment";l.BlockStatement="BlockStatement";l.BinaryExpression="BinaryExpression";l.BreakStatement="BreakStatement";l.CallExpression=
"CallExpression";l.ContinueStatement="ContinueStatement";l.EmptyStatement="EmptyStatement";l.ExpressionStatement="ExpressionStatement";l.ExportNamedDeclaration="ExportNamedDeclaration";l.ExportSpecifier="ExportSpecifier";l.ForStatement="ForStatement";l.ForInStatement="ForInStatement";l.FunctionDeclaration="FunctionDeclaration";l.Identifier="Identifier";l.IfStatement="IfStatement";l.ImportDeclaration="ImportDeclaration";l.ImportDefaultSpecifier="ImportDefaultSpecifier";l.LineComment="LineComment";
l.Literal="Literal";l.LogicalExpression="LogicalExpression";l.MemberExpression="MemberExpression";l.ObjectExpression="ObjectExpression";l.Program="Program";l.Property="Property";l.ReturnStatement="ReturnStatement";l.TemplateElement="TemplateElement";l.TemplateLiteral="TemplateLiteral";l.UnaryExpression="UnaryExpression";l.UpdateExpression="UpdateExpression";l.VariableDeclaration="VariableDeclaration";l.VariableDeclarator="VariableDeclarator";l.WhileStatement="WhileStatement"})(e.Syntax||(e.Syntax=
{}));e.UpdateOperators=["++","--"];e.UnaryOperators=["-","+","!","~"];e.AssignmentOperators="\x3d /\x3d *\x3d %\x3d +\x3d -\x3d".split(" ");e.LogicalOperators=["||","\x26\x26"];e.BinaryOperators="| \x26 \x3e\x3e \x3c\x3c \x3e\x3e\x3e ^ \x3d\x3d !\x3d \x3c \x3c\x3d \x3e \x3e\x3d + - * / %".split(" ");e.OperatorPrecedence={"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":10,"/":10,"%":10};
(function(l){l[l.Unknown=0]="Unknown";l[l.BooleanLiteral=1]="BooleanLiteral";l[l.EOF=2]="EOF";l[l.Identifier=3]="Identifier";l[l.Keyword=4]="Keyword";l[l.NullLiteral=5]="NullLiteral";l[l.NumericLiteral=6]="NumericLiteral";l[l.Punctuator=7]="Punctuator";l[l.StringLiteral=8]="StringLiteral";l[l.Template=10]="Template"})(e.TokenType||(e.TokenType={}));e.TokenNames="Unknown Boolean \x3cend\x3e Identifier Keyword Null Numeric Punctuator String RegularExpression Template".split(" ");(function(l){l.InvalidModuleUri=
"InvalidModuleUri";l.ForInOfLoopInitializer="ForInOfLoopInitializer";l.IdentiferExpected="IdentiferExpected";l.InvalidEscapedReservedWord="InvalidEscapedReservedWord";l.InvalidExpression="InvalidExpression";l.InvalidFunctionIdentifier="InvalidFunctionIdentifier";l.InvalidHexEscapeSequence="InvalidHexEscapeSequence";l.InvalidLeftHandSideInAssignment="InvalidLeftHandSideInAssignment";l.InvalidLeftHandSideInForIn="InvalidLeftHandSideInForIn";l.InvalidTemplateHead="InvalidTemplateHead";l.InvalidVariableAssignment=
"InvalidVariableAssignment";l.KeyMustBeString="KeyMustBeString";l.NoFunctionInsideBlock="NoFunctionInsideBlock";l.NoFunctionInsideFunction="NoFunctionInsideFunction";l.ModuleExportRootOnly="ModuleExportRootOnly";l.ModuleImportRootOnly="ModuleImportRootOnly";l.PunctuatorExpected="PunctuatorExpected";l.TemplateOctalLiteral="TemplateOctalLiteral";l.UnexpectedBoolean="UnexpectedBoolean";l.UnexpectedEndOfScript="UnexpectedEndOfScript";l.UnexpectedIdentifier="UnexpectedIdentifier";l.UnexpectedKeyword="UnexpectedKeyword";
l.UnexpectedNull="UnexpectedNull";l.UnexpectedNumber="UnexpectedNumber";l.UnexpectedPunctuator="UnexpectedPunctuator";l.UnexpectedString="UnexpectedString";l.UnexpectedTemplate="UnexpectedTemplate";l.UnexpectedToken="UnexpectedToken"})(g=e.ParsingErrorCodes||(e.ParsingErrorCodes={}));e.ParsingErrorMessages=(u={},u[g.InvalidModuleUri]="Module uri must be a text literal.",u[g.ForInOfLoopInitializer]="for-in loop variable declaration may not have an initializer.",u[g.IdentiferExpected]="'${value}' is an invalid identifier.",
u[g.InvalidEscapedReservedWord]="Keyword cannot contain escaped characters.",u[g.InvalidExpression]="Invalid expression.",u[g.InvalidFunctionIdentifier]="'${value}' is an invalid function identifier.",u[g.InvalidHexEscapeSequence]="Invalid hexadecimal escape sequence.",u[g.InvalidLeftHandSideInAssignment]="Invalid left-hand side in assignment.",u[g.InvalidLeftHandSideInForIn]="Invalid left-hand side in for-in.",u[g.InvalidTemplateHead]="Invalid template structure.",u[g.InvalidVariableAssignment]=
"Invalid variable assignment.",u[g.KeyMustBeString]="Object property keys must be a word starting with a letter.",u[g.NoFunctionInsideBlock]="Functions cannot be declared inside of code blocks.",u[g.NoFunctionInsideFunction]="Functions cannot be declared inside another function.",u[g.ModuleExportRootOnly]="Module exports cannot be declared inside of code blocks.",u[g.ModuleImportRootOnly]="Module import cannot be declared inside of code blocks.",u[g.PunctuatorExpected]="'${value}' expected.",u[g.TemplateOctalLiteral]=
"Octal literals are not allowed in template literals.",u[g.UnexpectedBoolean]="Unexpected boolean literal.",u[g.UnexpectedEndOfScript]="Unexpected end of Arcade expression.",u[g.UnexpectedIdentifier]="Unexpected identifier.",u[g.UnexpectedKeyword]="Unexpected keyword.",u[g.UnexpectedNull]="Unexpected null literal.",u[g.UnexpectedNumber]="Unexpected number.",u[g.UnexpectedPunctuator]="Unexpected ponctuator.",u[g.UnexpectedString]="Unexpected text literal.",u[g.UnexpectedTemplate]="Unexpected quasi '${value}'.",
u[g.UnexpectedToken]="Unexpected token '${value}'.",u);u=function(l){function q(k){var a=k.code,d=k.index,n=k.line,b=k.column,h=k.len;h=void 0===h?0:h;var c=k.description;k=k.data;var f,p,r=l.call(this,""+(null!==c&&void 0!==c?c:a))||this;r.declaredRootClass="esri.arcade.lib.parsingerror";r.name="ParsingError";r.code=a;r.index=d;r.line=n;r.column=b;r.len=h;r.data=k;r.description=c;r.range={start:{line:n,column:b-1},end:{line:n,column:b+h}};null===(p=(f=Error).captureStackTrace)||void 0===p?void 0:
p.call(f,r,q);return r}t(q,l);return q}(Error);e.ParsingError=u;e.isProgram=function(l){return"Program"===(null===l||void 0===l?void 0:l.type)};e.isStatement=function(l){switch(null===l||void 0===l?void 0:l.type){case "BlockStatement":case "BreakStatement":case "ContinueStatement":case "EmptyStatement":case "ExpressionStatement":case "ForInStatement":case "ForStatement":case "FunctionDeclaration":case "IfStatement":case "ReturnStatement":case "VariableDeclaration":return!0;default:return!1}};e.isBlockStatement=
function(l){return"BlockStatement"===(null===l||void 0===l?void 0:l.type)};e.isBlockComment=function(l){return"BlockComment"===(null===l||void 0===l?void 0:l.type)};e.isBreakStatement=function(l){return"BreakStatement"===(null===l||void 0===l?void 0:l.type)};e.isContinueStatement=function(l){return"ContinueStatement"===(null===l||void 0===l?void 0:l.type)};e.isEmptyStatement=function(l){return"EmptyStatement"===(null===l||void 0===l?void 0:l.type)};e.isExpressionStatement=function(l){return"ExpressionStatement"===
(null===l||void 0===l?void 0:l.type)};e.isForInStatement=function(l){return"ForInStatement"===(null===l||void 0===l?void 0:l.type)};e.isForStatement=function(l){return"ForStatement"===(null===l||void 0===l?void 0:l.type)};e.isFunctionDeclaration=function(l){return"FunctionDeclaration"===(null===l||void 0===l?void 0:l.type)};e.isIfStatement=function(l){return"IfStatement"===(null===l||void 0===l?void 0:l.type)};e.isReturnStatement=function(l){return"ReturnStatement"===(null===l||void 0===l?void 0:
l.type)};e.isVariableDeclaration=function(l){return"VariableDeclaration"===(null===l||void 0===l?void 0:l.type)};e.isExpression=function(l){switch(null===l||void 0===l?void 0:l.type){case "ArrayExpression":case "AssignmentExpression":case "BinaryExpression":case "CallExpression":case "Identifier":case "Literal":case "LogicalExpression":case "MemberExpression":case "ObjectExpression":case "TemplateLiteral":case "UpdateExpression":case "UnaryExpression":return!0;default:return!1}};e.isArrayExpression=
function(l){return"ArrayExpression"===(null===l||void 0===l?void 0:l.type)};e.isAssignmentExpression=function(l){return"AssignmentExpression"===(null===l||void 0===l?void 0:l.type)};e.isBinaryExpression=function(l){return"BinaryExpression"===(null===l||void 0===l?void 0:l.type)};e.isCallExpression=function(l){return"CallExpression"===(null===l||void 0===l?void 0:l.type)};e.isIdentifier=function(l){return"Identifier"===(null===l||void 0===l?void 0:l.type)};e.isLiteral=function(l){return"Literal"===
(null===l||void 0===l?void 0:l.type)};e.isLogicalExpression=function(l){return"LogicalExpression"===(null===l||void 0===l?void 0:l.type)};e.isObjectExpression=function(l){return"ObjectExpression"===(null===l||void 0===l?void 0:l.type)};e.isTemplateLiteral=function(l){return"TemplateLiteral"===(null===l||void 0===l?void 0:l.type)};e.isMemberExpression=function(l){return"MemberExpression"===(null===l||void 0===l?void 0:l.type)};e.isUnaryExpression=function(l){return"UnaryExpression"===(null===l||void 0===
l?void 0:l.type)};e.isUpdateExpression=function(l){return"UpdateExpression"===(null===l||void 0===l?void 0:l.type)};e.isVariableDeclarator=function(l){return"VariableDeclarator"===(null===l||void 0===l?void 0:l.type)};e.isProperty=function(l){return"Property"===(null===l||void 0===l?void 0:l.type)};e.isTemplateElement=function(l){return"TemplateElement"===(null===l||void 0===l?void 0:l.type)}})},"esri/arcade/lib/error-handler":function(){define(["require","exports","./types"],function(g,e,t){function u(l,
q){l=t.ParsingErrorMessages[l];return q?l.replace(/\${(.*?)}/g,function(k,a){var d,n;return null!==(n=null===(d=q[a])||void 0===d?void 0:d.toString())&&void 0!==n?n:""}):l}Object.defineProperty(e,"__esModule",{value:!0});e.ErrorHandler=e.formatErrorDescription=void 0;e.formatErrorDescription=u;g=function(){function l(q){void 0===q&&(q=!1);this.tolerant=q;this.errors=[]}l.prototype.recordError=function(q){this.errors.push(q)};l.prototype.tolerate=function(q){if(this.tolerant)this.recordError(q);else throw q;
};l.prototype.throwError=function(q){var k;q.description=null!==(k=q.description)&&void 0!==k?k:u(q.code,q.data);throw new t.ParsingError(q);};l.prototype.tolerateError=function(q){var k;q.description=null!==(k=q.description)&&void 0!==k?k:u(q.code,q.data);q=new t.ParsingError(q);if(this.tolerant)this.recordError(q);else throw q;};return l}();e.ErrorHandler=g})},"esri/arcade/lib/scanner":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../polyfill/tsSupport/extends ./assert ./character ./types".split(" "),
function(g,e,t,u,l,q,k,a){Object.defineProperty(e,"__esModule",{value:!0});e.Scanner=void 0;var d=[[],[],[]];a.UpdateOperators.forEach(function(n){return d[n.length-1].push(n)});a.UnaryOperators.forEach(function(n){return d[n.length-1].push(n)});a.LogicalOperators.forEach(function(n){return d[n.length-1].push(n)});a.AssignmentOperators.forEach(function(n){return d[n.length-1].push(n)});a.BinaryOperators.forEach(function(n){return d[n.length-1].push(n)});g=function(){function n(b,h){this.source=b;
this.errorHandler=h;this._length=b.length;this.index=0;this.lineNumber=1;this.lineStart=0;this.curlyStack=[]}n.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}};n.prototype.restoreState=function(b){this.index=b.index;this.lineNumber=b.lineNumber;this.lineStart=b.lineStart;this.curlyStack=b.curlyStack};n.prototype.eof=function(){return this.index>=this._length};n.prototype.throwUnexpectedToken=function(b){void 0===
b&&(b=a.ParsingErrorCodes.UnexpectedToken);this.errorHandler.throwError({code:b,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})};n.prototype.tolerateUnexpectedToken=function(b){void 0===b&&(b=a.ParsingErrorCodes.UnexpectedToken);this.errorHandler.tolerateError({code:b,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})};n.prototype.skipSingleLineComment=function(b){for(var h=[],c=this.index-b,f={start:{line:this.lineNumber,column:this.index-this.lineStart-
b},end:{line:0,column:0}};!this.eof();){var p=this.source.charCodeAt(this.index);++this.index;if(k.Character.isLineTerminator(p))return f&&(f.end={line:this.lineNumber,column:this.index-this.lineStart-1},b={multiLine:!1,start:c+b,end:this.index-1,range:[c,this.index-1],loc:f},h.push(b)),13===p&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,h}f&&(f.end={line:this.lineNumber,column:this.index-this.lineStart},b={multiLine:!1,start:c+b,end:this.index,
range:[c,this.index],loc:f},h.push(b));return h};n.prototype.skipMultiLineComment=function(){for(var b=[],h=this.index-2,c={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}};!this.eof();){var f=this.source.charCodeAt(this.index);if(k.Character.isLineTerminator(f))13===f&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===f&&47===this.source.charCodeAt(this.index+1))return this.index+=2,
c&&(c.end={line:this.lineNumber,column:this.index-this.lineStart},h={multiLine:!0,start:h+2,end:this.index-2,range:[h,this.index],loc:c},b.push(h)),b;++this.index}}c&&(c.end={line:this.lineNumber,column:this.index-this.lineStart},h={multiLine:!0,start:h+2,end:this.index,range:[h,this.index],loc:c},b.push(h));this.tolerateUnexpectedToken();return b};n.prototype.scanComments=function(){for(var b=[];!this.eof();){var h=this.source.charCodeAt(this.index);if(k.Character.isWhiteSpace(h))++this.index;else if(k.Character.isLineTerminator(h))++this.index,
13===h&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index;else if(47===h)if(h=this.source.charCodeAt(this.index+1),47===h)this.index+=2,h=this.skipSingleLineComment(2),b=u(u([],b),h);else if(42===h)this.index+=2,h=this.skipMultiLineComment(),b=u(u([],b),h);else break;else break}return b};n.prototype.isKeyword=function(b){b=b.toLowerCase();switch(b.length){case 2:return b===a.Keywords.If||b===a.Keywords.In;case 3:return b===a.Keywords.Var||b===a.Keywords.For;
case 4:return b===a.Keywords.Else;case 5:return b===a.Keywords.Break||b===a.Keywords.While;case 6:return b===a.Keywords.Return||b===a.Keywords.Import||b===a.Keywords.Export;case 8:return b===a.Keywords.Function||b===a.Keywords.Continue;default:return!1}};n.prototype.codePointAt=function(b){var h=this.source.charCodeAt(b);55296<=h&&56319>=h&&(b=this.source.charCodeAt(b+1),56320<=b&&57343>=b&&(h=1024*(h-55296)+b-56320+65536));return h};n.prototype.scanHexEscape=function(b){b="u"===b?4:2;for(var h=0,
c=0;c<b;++c)if(!this.eof()&&k.Character.isHexDigit(this.source.charCodeAt(this.index)))h=16*h+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(h)};n.prototype.scanUnicodeCodePointEscape=function(){var b=this.source[this.index],h=0;for("}"===b&&this.throwUnexpectedToken();!this.eof();){b=this.source[this.index++];if(!k.Character.isHexDigit(b.charCodeAt(0)))break;h=16*h+"0123456789abcdef".indexOf(b.toLowerCase())}(1114111<h||"}"!==b)&&this.throwUnexpectedToken();
return k.Character.fromCodePoint(h)};n.prototype.getIdentifier=function(){for(var b=this.index++;!this.eof();){var h=this.source.charCodeAt(this.index);if(92===h||55296<=h&&57343>h)return this.index=b,this.getComplexIdentifier();if(k.Character.isIdentifierPart(h))++this.index;else break}return this.source.slice(b,this.index)};n.prototype.getComplexIdentifier=function(){var b=this.codePointAt(this.index),h=k.Character.fromCodePoint(b);this.index+=h.length;if(92===b){117!==this.source.charCodeAt(this.index)&&
this.throwUnexpectedToken();++this.index;if("{"===this.source[this.index]){++this.index;var c=this.scanUnicodeCodePointEscape()}else c=this.scanHexEscape("u"),null!==c&&"\\"!==c&&k.Character.isIdentifierStart(c.charCodeAt(0))||this.throwUnexpectedToken();h=c}for(;!this.eof();){b=this.codePointAt(this.index);if(!k.Character.isIdentifierPart(b))break;c=k.Character.fromCodePoint(b);h+=c;this.index+=c.length;92===b&&(h=h.substring(0,h.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),
++this.index,"{"===this.source[this.index]?(++this.index,c=this.scanUnicodeCodePointEscape()):(c=this.scanHexEscape("u"),null!==c&&"\\"!==c&&k.Character.isIdentifierPart(c.charCodeAt(0))||this.throwUnexpectedToken()),h+=c)}return h};n.prototype.octalToDecimal=function(b){var h="0"!==b,c="01234567".indexOf(b);!this.eof()&&k.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(h=!0,c=8*c+"01234567".indexOf(this.source[this.index++]),"0123".includes(b)&&!this.eof()&&k.Character.isOctalDigit(this.source.charCodeAt(this.index))&&
(c=8*c+"01234567".indexOf(this.source[this.index++])));return{code:c,octal:h}};n.prototype.scanIdentifier=function(){var b=this.index,h=92===this.source.charCodeAt(b)?this.getComplexIdentifier():this.getIdentifier();var c=1===h.length?3:this.isKeyword(h)?4:h.toLowerCase()===a.Keywords.Null?5:h.toLowerCase()===a.Keywords.True||h.toLowerCase()===a.Keywords.False?1:3;if(3!==c&&b+h.length!==this.index){var f=this.index;this.index=b;this.tolerateUnexpectedToken(a.ParsingErrorCodes.InvalidEscapedReservedWord);
this.index=f}return{type:c,value:h,lineNumber:this.lineNumber,lineStart:this.lineStart,start:b,end:this.index}};n.prototype.scanPunctuator=function(){var b=this.index,h=this.source[this.index];switch(h){case "(":case "{":"{"===h&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;break;case "}":++this.index;this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;break;default:for(var c=d.length;0<c;c--)if(h=this.source.substring(this.index,
this.index+c),d[c-1].includes(h)){this.index+=c;break}}this.index===b&&this.throwUnexpectedToken();return{type:7,value:h,lineNumber:this.lineNumber,lineStart:this.lineStart,start:b,end:this.index}};n.prototype.scanHexLiteral=function(b){for(var h="";!this.eof()&&k.Character.isHexDigit(this.source.charCodeAt(this.index));)h+=this.source[this.index++];0===h.length&&this.throwUnexpectedToken();k.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,
value:parseInt("0x"+h,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:b,end:this.index}};n.prototype.scanBinaryLiteral=function(b){for(var h="";!this.eof();){var c=this.source[this.index];if("0"!==c&&"1"!==c)break;h+=this.source[this.index++]}0===h.length&&this.throwUnexpectedToken();this.eof()||(c=this.source.charCodeAt(this.index),(k.Character.isIdentifierStart(c)||k.Character.isDecimalDigit(c))&&this.throwUnexpectedToken());return{type:6,value:parseInt(h,2),lineNumber:this.lineNumber,
lineStart:this.lineStart,start:b,end:this.index}};n.prototype.scanOctalLiteral=function(b,h){var c="",f=!1;k.Character.isOctalDigit(b.charCodeAt(0))?(f=!0,c="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&k.Character.isOctalDigit(this.source.charCodeAt(this.index));)c+=this.source[this.index++];f||0!==c.length||this.throwUnexpectedToken();(k.Character.isIdentifierStart(this.source.charCodeAt(this.index))||k.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken();
return{type:6,value:parseInt(c,8),lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}};n.prototype.scanNumericLiteral=function(){var b=this.index,h=this.source[b];q.assert(k.Character.isDecimalDigit(h.charCodeAt(0))||"."===h,"Numeric literal must start with a decimal digit or a decimal point");var c="";if("."!==h){c=this.source[this.index++];h=this.source[this.index];if("0"===c){if("x"===h||"X"===h)return++this.index,this.scanHexLiteral(b);if("b"===h||"B"===h)return++this.index,
this.scanBinaryLiteral(b);if("o"===h||"O"===h)return this.scanOctalLiteral(h,b)}for(;k.Character.isDecimalDigit(this.source.charCodeAt(this.index));)c+=this.source[this.index++];h=this.source[this.index]}if("."===h){for(c+=this.source[this.index++];k.Character.isDecimalDigit(this.source.charCodeAt(this.index));)c+=this.source[this.index++];h=this.source[this.index]}if("e"===h||"E"===h){c+=this.source[this.index++];h=this.source[this.index];if("+"===h||"-"===h)c+=this.source[this.index++];if(k.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;k.Character.isDecimalDigit(this.source.charCodeAt(this.index));)c+=
this.source[this.index++];else this.throwUnexpectedToken()}k.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,value:parseFloat(c),lineNumber:this.lineNumber,lineStart:this.lineStart,start:b,end:this.index}};n.prototype.scanStringLiteral=function(){var b=this.index,h=this.source[b];q.assert("'"===h||'"'===h,"String literal must starts with a quote");++this.index;for(var c="";!this.eof();){var f=this.source[this.index++];if(f===h){h="";break}if("\\"===
f)if((f=this.source[this.index++])&&k.Character.isLineTerminator(f.charCodeAt(0)))++this.lineNumber,"\r"===f&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(f){case "u":"{"===this.source[this.index]?(++this.index,c+=this.scanUnicodeCodePointEscape()):(f=this.scanHexEscape(f),null===f&&this.throwUnexpectedToken(),c+=f);break;case "x":f=this.scanHexEscape(f);null===f&&this.throwUnexpectedToken(a.ParsingErrorCodes.InvalidHexEscapeSequence);c+=f;break;case "n":c+="\n";
break;case "r":c+="\r";break;case "t":c+="\t";break;case "b":c+="\b";break;case "f":c+="\f";break;case "v":c+="\v";break;case "8":case "9":c+=f;this.tolerateUnexpectedToken();break;default:f&&k.Character.isOctalDigit(f.charCodeAt(0))?(f=this.octalToDecimal(f),c+=String.fromCharCode(f.code)):c+=f}else if(k.Character.isLineTerminator(f.charCodeAt(0)))break;else c+=f}""!==h&&(this.index=b,this.throwUnexpectedToken());return{type:8,value:c,lineNumber:this.lineNumber,lineStart:this.lineStart,start:b,end:this.index}};
n.prototype.scanTemplate=function(){var b="",h=!1,c=this.index,f="`"===this.source[c],p=!1,r=2;for(++this.index;!this.eof();){var m=this.source[this.index++];if("`"===m){r=1;h=p=!0;break}if("$"===m){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;h=!0;break}b+=m}else if("\\"===m)if(m=this.source[this.index++],k.Character.isLineTerminator(m.charCodeAt(0)))++this.lineNumber,"\r"===m&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(m){case "n":b+=
"\n";break;case "r":b+="\r";break;case "t":b+="\t";break;case "u":if("{"===this.source[this.index])++this.index,b+=this.scanUnicodeCodePointEscape();else{var v=this.index,z=this.scanHexEscape(m);null!==z?b+=z:(this.index=v,b+=m)}break;case "x":m=this.scanHexEscape(m);null===m&&this.throwUnexpectedToken(a.ParsingErrorCodes.InvalidHexEscapeSequence);b+=m;break;case "b":b+="\b";break;case "f":b+="\f";break;case "v":b+="\v";break;default:"0"===m?(k.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&
this.throwUnexpectedToken(a.ParsingErrorCodes.TemplateOctalLiteral),b+="\x00"):k.Character.isOctalDigit(m.charCodeAt(0))?this.throwUnexpectedToken(a.ParsingErrorCodes.TemplateOctalLiteral):b+=m}else k.Character.isLineTerminator(m.charCodeAt(0))?(++this.lineNumber,"\r"===m&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,b+="\n"):b+=m}h||this.throwUnexpectedToken();f||this.curlyStack.pop();return{type:10,value:this.source.slice(c+1,this.index-r),cooked:b,head:f,tail:p,lineNumber:this.lineNumber,
lineStart:this.lineStart,start:c,end:this.index}};n.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var b=this.source.charCodeAt(this.index);return k.Character.isIdentifierStart(b)?this.scanIdentifier():40===b||41===b||59===b?this.scanPunctuator():39===b||34===b?this.scanStringLiteral():46===b?k.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():
k.Character.isDecimalDigit(b)?this.scanNumericLiteral():96===b||125===b&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():55296<=b&&57343>b&&k.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()};return n}();e.Scanner=g})},"esri/arcade/lib/assert":function(){define(["require","exports"],function(g,e){Object.defineProperty(e,"__esModule",{value:!0});e.assert=void 0;e.assert=function(t,u){if(!t)throw Error("ASSERT: "+u);}})},"esri/arcade/lib/character":function(){define(["require",
"exports"],function(g,e){Object.defineProperty(e,"__esModule",{value:!0});e.Character=void 0;var t=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
u=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
e.Character={fromCodePoint:function(l){return 65536>l?String.fromCharCode(l):String.fromCharCode(55296+(l-65536>>10))+String.fromCharCode(56320+(l-65536&1023))},isWhiteSpace:function(l){return 32===l||9===l||11===l||12===l||160===l||5760<=l&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(l)},isLineTerminator:function(l){return 10===l||13===l||8232===l||8233===l},isIdentifierStart:function(l){return 36===l||95===l||65<=l&&90>=l||97<=l&&122>=l||92===l||
128<=l&&t.test(e.Character.fromCodePoint(l))},isIdentifierPart:function(l){return 36===l||95===l||65<=l&&90>=l||97<=l&&122>=l||48<=l&&57>=l||92===l||128<=l&&u.test(e.Character.fromCodePoint(l))},isDecimalDigit:function(l){return 48<=l&&57>=l},isHexDigit:function(l){return 48<=l&&57>=l||65<=l&&70>=l||97<=l&&102>=l},isOctalDigit:function(l){return 48<=l&&55>=l}}})},"esri/arcade/lib/tokenizer":function(){define(["require","exports","./error-handler","./scanner","./types"],function(g,e,t,u,l){Object.defineProperty(e,
"__esModule",{value:!0});e.Tokenizer=void 0;g=function(){function q(k,a){this.errorHandler=new t.ErrorHandler;this.errorHandler.tolerant=a?"boolean"===typeof a.tolerant&&a.tolerant:!1;this.scanner=new u.Scanner(k,this.errorHandler);this.trackComments=a?"boolean"===typeof a.comment&&a.comment:!1;this.buffer=[]}q.prototype.errors=function(){return this.errorHandler.errors};q.prototype.getNextToken=function(){var k=this;if(0===this.buffer.length){var a=this.scanner.scanComments();this.trackComments&&
a&&a.forEach(function(b){var h=k.scanner.source.slice(b.start,b.end);k.buffer.push({type:b.multiLine?"BlockComment":"LineComment",value:h,range:b.range,loc:b.loc})});if(!this.scanner.eof()){a={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart};var d=this.scanner.lex(),n={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart};a={type:l.TokenNames[d.type],value:this.scanner.source.slice(d.start,d.end),range:[d.start,d.end],loc:{start:a,end:n}};this.buffer.push(a)}}return this.buffer.shift()};
return q}();e.Tokenizer=g})},"esri/arcade/featureset/support/RecentlyUsedCache":function(){define(["require","exports"],function(g,e){var t=function(){function l(q){var k=this;k._keys=[];k._values=[];k.length=0;q&&q.forEach(function(a){k.set(a[0],a[1])})}l.prototype.entries=function(){var q=this;return[].slice.call(this.keys().map(function(k,a){return[k,q._values[a]]}))};l.prototype.keys=function(){return[].slice.call(this._keys)};l.prototype.values=function(){return[].slice.call(this._values)};l.prototype.has=
function(q){return this._keys.includes(q)};l.prototype.get=function(q){q=this._keys.indexOf(q);return-1<q?this._values[q]:null};l.prototype.deepGet=function(q){if(!q||!q.length)return null;var k=function(a,d){return null==a?null:d.length?k(a instanceof l?a.get(d[0]):a[d[0]],d.slice(1)):a};return k(this.get(q[0]),q.slice(1))};l.prototype.set=function(q,k){var a=this._keys.indexOf(q);-1<a?this._values[a]=k:(this._keys.push(q),this._values.push(k),this.length=this._values.length);return this};l.prototype.sortedSet=
function(q,k,a,d){var n=this._keys.length;a=a||0;d=void 0!==d?d:n-1;if(0===n)return this._keys.push(q),this._values.push(k),this;if(q===this._keys[a])return this._values.splice(a,0,k),this;if(q===this._keys[d])return this._values.splice(d,0,k),this;if(q>this._keys[d])return this._keys.splice(d+1,0,q),this._values.splice(d+1,0,k),this;if(q<this._keys[a])return this._values.splice(a,0,k),this._keys.splice(a,0,q),this;if(a>=d)return this;n=a+Math.floor((d-a)/2);return q<this._keys[n]?this.sortedSet(q,
k,a,n-1):q>this._keys[n]?this.sortedSet(q,k,n+1,d):this};l.prototype.size=function(){return this.length};l.prototype.clear=function(){this._keys.length=this.length=this._values.length=0;return this};l.prototype.delete=function(q){q=this._keys.indexOf(q);return-1<q?(this._keys.splice(q,1),this._values.splice(q,1),this.length=this._keys.length,!0):!1};l.prototype.forEach=function(q){var k=this;this._keys.forEach(function(a,d){q(k._values[d],a,d)})};l.prototype.map=function(q){var k=this;return this.keys().map(function(a,
d){return q(k._values[d],a,d)})};l.prototype.filter=function(q){var k=this;k._keys.forEach(function(a,d){!1===q(k._values[d],a,d)&&k.delete(a)});return this};l.prototype.clone=function(){return new l(this.entries())};return l}(),u=function(){function l(q){void 0===q&&(q=20);this._maxEntries=q;this._values=new t}l.prototype.delete=function(q){this._values.has(q)&&this._values.delete(q)};l.prototype.get=function(q){var k=null;this._values.has(q)&&(k=this._values.get(q),this._values.delete(q),this._values.set(q,
k));return k};l.prototype.put=function(q,k){if(this._values.size()>=this._maxEntries){var a=this._values.keys()[0];this._values.delete(a)}this._values.set(q,k)};return l}();return function(){function l(q){void 0===q&&(q=20);this._maxEntries=q;this._cache=new u(this._maxEntries)}l.prototype.clear=function(){this._cache=new u(this._maxEntries)};l.prototype.addToCache=function(q,k){this._cache.put(q,k)};l.prototype.removeFromCache=function(q){this._cache.delete(q)};l.prototype.getFromCache=function(q){return this._cache.get(q)};
return l}()})},"esri/arcade/arcadeRuntime":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./polyfill/tsSupport/extends ./ArcadeModule ./ArcadeModuleLoader ./Dictionary ./executionError ./Feature ./FunctionWrapper ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Geometry ../SpatialReference".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h,c,f,p,r,m,v,z,A,D,E,F,y){function x(X,S){for(var ia=[],oa=0;oa<S.arguments.length;oa++)ia.push(C(X,S.arguments[oa]));return ia}function w(X,S,ia){try{return!0===S.preparsed?ia(X,null,S.arguments):ia(X,S,x(X,S))}catch(oa){throw oa;}}function C(X,S){try{switch(null===S||void 0===S?void 0:S.type){case "EmptyStatement":return f.voidOperation;case "VariableDeclarator":var ia=null===S.init?null:C(X,S.init);ia===f.voidOperation&&(ia=null);if("Identifier"!==S.id.type)throw new b.ArcadeExecutionError(X,
b.ExecutionErrorCodes.InvalidIdentifier,S);var oa=S.id.name.toLowerCase();null!=X.localScope?X.localScope[oa]={value:ia,valueset:!0,node:S.init}:X.globalScope[oa]={value:ia,valueset:!0,node:S.init};return f.voidOperation;case "VariableDeclaration":for(var qa=0;qa<S.declarations.length;qa++)C(X,S.declarations[qa]);return f.voidOperation;case "ImportDeclaration":var wa,Ha,R=S.specifiers[0].local.name.toLowerCase(),T=X.libraryResolver.loadLibrary(R);qa=null;(null===(wa=X.libraryResolver._moduleSingletons)||
void 0===wa?0:wa.has(T.uri))?qa=X.libraryResolver._moduleSingletons.get(T.uri):(qa=new ha(T),qa.loadModule(X),null===(Ha=X.libraryResolver._moduleSingletons)||void 0===Ha?void 0:Ha.set(T.uri,qa));X.globalScope[R]={value:qa,valueset:!0,node:S};return f.voidOperation;case "ExportNamedDeclaration":C(X,S.declaration);if("FunctionDeclaration"===S.declaration.type)X.exports[S.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===S.declaration.type){qa=0;for(var ka=S.declaration.declarations;qa<
ka.length;qa++)X.exports[ka[qa].id.name.toLowerCase()]="variable"}return f.voidOperation;case "BlockStatement":case "Program":a:{var na=f.voidOperation;for(qa=0;qa<S.body.length;qa++)if(na=C(X,S.body[qa]),na instanceof f.ReturnResult||na===f.breakResult||na===f.continueResult){var ta=na;break a}ta=na}return ta;case "FunctionDeclaration":var G=S.id.name.toLowerCase();X.globalScope[G]={valueset:!0,node:null,value:new da(S,X)};return f.voidOperation;case "ReturnStatement":if(null===S.argument)var ja=
new f.ReturnResult(f.voidOperation);else{var ra=C(X,S.argument);ja=new f.ReturnResult(ra)}return ja;case "IfStatement":var K=C(X,S.test);if(!0===K)var xa=C(X,S.consequent);else if(!1===K)xa=null!==S.alternate?C(X,S.alternate):f.voidOperation;else throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.BooleanConditionRequired,S);return xa;case "ExpressionStatement":if("AssignmentExpression"===S.expression.type||"UpdateExpression"===S.expression.type)var va=C(X,S.expression);else{var la=C(X,S.expression);
va=la===f.voidOperation?f.voidOperation:new f.ImplicitResult(la)}return va;case "AssignmentExpression":qa=null;var Ca="";if("MemberExpression"===S.left.type){qa=C(X,S.left.object);if(!0===S.left.computed)Ca=C(X,S.left.property);else if("Identifier"===S.left.property.type)Ca=S.left.property.name;else throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.InvalidIdentifier,S);var Ma=C(X,S.right);if(f.isArray(qa))if(f.isNumber(Ca)){0>Ca&&(Ca=qa.length+Ca);if(0>Ca||Ca>qa.length)throw new b.ArcadeExecutionError(X,
b.ExecutionErrorCodes.OutOfBounds,S);if(Ca===qa.length&&"\x3d"!==S.operator)throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.OutOfBounds,S);qa[Ca]=I(Ma,S.operator,qa[Ca],S,X)}else throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.ArrayAccessorMustBeNumber,S);else if(qa instanceof n){if(!1===f.isString(Ca))throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.KeyAccessorMustBeString,S);if(!0===qa.hasField(Ca))qa.setField(Ca,I(Ma,S.operator,qa.field(Ca),S,X));else{if("\x3d"!==S.operator)throw new b.ArcadeExecutionError(X,
b.ExecutionErrorCodes.FieldNotFound,S,{key:Ca});qa.setField(Ca,I(Ma,S.operator,null,S,X))}}else if(f.isFeature(qa)){if(!1===f.isString(Ca))throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.KeyAccessorMustBeString,S);if(!0===qa.hasField(Ca))qa.setField(Ca,I(Ma,S.operator,qa.field(Ca),S,X));else{if("\x3d"!==S.operator)throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.FieldNotFound,S,{key:Ca});qa.setField(Ca,I(Ma,S.operator,null,S,X))}}else{if(f.isImmutableArray(qa))throw new b.ArcadeExecutionError(X,
b.ExecutionErrorCodes.Immutable,S);if(qa instanceof ha){if(!1===f.isString(Ca))throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.ModuleAccessorMustBeString,S);if(!0===qa.hasGlobal(Ca))qa.setGlobal(Ca,I(Ma,S.operator,qa.global(Ca),S,X));else throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.ModuleExportNotFound,S);}else throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.InvalidIdentifier,S);}var ua=f.voidOperation}else{qa=S.left.name.toLowerCase();var Ba=C(X,S.right);if(null!=X.localScope&&
void 0!==X.localScope[qa])X.localScope[qa]={value:I(Ba,S.operator,X.localScope[qa].value,S,X),valueset:!0,node:S.right},ua=f.voidOperation;else if(void 0!==X.globalScope[qa])X.globalScope[qa]={value:I(Ba,S.operator,X.globalScope[qa].value,S,X),valueset:!0,node:S.right},ua=f.voidOperation;else throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.InvalidIdentifier,S);}return ua;case "UpdateExpression":qa=null;Ca="";if("MemberExpression"===S.argument.type){qa=C(X,S.argument.object);!0===S.argument.computed?
Ca=C(X,S.argument.property):"Identifier"===S.argument.property.type&&(Ca=S.argument.property.name);if(f.isArray(qa))if(f.isNumber(Ca)){0>Ca&&(Ca=qa.length+Ca);if(0>Ca||Ca>=qa.length)throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.OutOfBounds,S);var Aa=f.toNumber(qa[Ca]);qa[Ca]="++"===S.operator?Aa+1:Aa-1}else throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.ArrayAccessorMustBeNumber,S);else if(qa instanceof n){if(!1===f.isString(Ca))throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.KeyAccessorMustBeString,
S);if(!0===qa.hasField(Ca))Aa=f.toNumber(qa.field(Ca)),qa.setField(Ca,"++"===S.operator?Aa+1:Aa-1);else throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.FieldNotFound,S);}else if(f.isFeature(qa)){if(!1===f.isString(Ca))throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.KeyAccessorMustBeString,S);if(!0===qa.hasField(Ca))Aa=f.toNumber(qa.field(Ca)),qa.setField(Ca,"++"===S.operator?Aa+1:Aa-1);else throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.FieldNotFound,S);}else{if(f.isImmutableArray(qa))throw new b.ArcadeExecutionError(X,
b.ExecutionErrorCodes.Immutable,S);if(qa instanceof ha){if(!1===f.isString(Ca))throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.ModuleAccessorMustBeString,S);if(!0===qa.hasGlobal(Ca))Aa=f.toNumber(qa.global(Ca)),qa.setGlobal(Ca,"++"===S.operator?Aa+1:Aa-1);else throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.ModuleExportNotFound,S);}else throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.InvalidParameter,S);}var Ga=!1===S.prefix?Aa:"++"===S.operator?Aa+1:Aa-1}else{qa="Identifier"===
S.argument.type?S.argument.name.toLowerCase():"";if(!qa)throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.InvalidIdentifier,S);if(null!=X.localScope&&void 0!==X.localScope[qa])Aa=f.toNumber(X.localScope[qa].value),X.localScope[qa]={value:"++"===S.operator?Aa+1:Aa-1,valueset:!0,node:S},Ga=!1===S.prefix?Aa:"++"===S.operator?Aa+1:Aa-1;else if(void 0!==X.globalScope[qa])Aa=f.toNumber(X.globalScope[qa].value),X.globalScope[qa]={value:"++"===S.operator?Aa+1:Aa-1,valueset:!0,node:S},Ga=!1===S.prefix?
Aa:"++"===S.operator?Aa+1:Aa-1;else throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.InvalidIdentifier,S);}return Ga;case "BreakStatement":return f.breakResult;case "ContinueStatement":return f.continueResult;case "TemplateElement":return S.value?S.value.cooked:"";case "TemplateLiteral":var ya="",Ea=0;ua=0;for(qa=S.quasis;ua<qa.length;ua++)if(Ca=qa[ua],ya+=Ca.value?Ca.value.cooked:"",!1===Ca.tail){if(S.expressions[Ea]){Ma=f;var Fa=Ma.toString,Ka=C(X,S.expressions[Ea]);Ba=X;Ga=S;if(f.isFunctionParameter(Ka))throw new b.ArcadeExecutionError(Ba,
b.ExecutionErrorCodes.NoFunctionInTemplateLiteral,Ga);var Ja=Fa.call(Ma,Ka)}else Ja="";ya+=Ja;Ea++}return ya;case "ForStatement":null!==S.init&&C(X,S.init);Ea={testResult:!0,lastAction:f.voidOperation};do b:{qa=X;Ca=S;Ja=Ea;if(null!==Ca.test){Ja.testResult=C(qa,Ca.test);if(!1===Ja.testResult)break b;if(!0!==Ja.testResult)throw new b.ArcadeExecutionError(qa,b.ExecutionErrorCodes.BooleanConditionRequired,Ca);}Ja.lastAction=C(qa,Ca.body);Ja.lastAction===f.breakResult?Ja.testResult=!1:Ja.lastAction instanceof
f.ReturnResult?Ja.testResult=!1:null!==Ca.update&&C(qa,Ca.update)}while(!0===Ea.testResult);ya=Ea.lastAction instanceof f.ReturnResult?Ea.lastAction:f.voidOperation;return ya;case "ForInStatement":return B(X,S);case "WhileStatement":qa=!0;var Oa=f.voidOperation;qa=C(X,S.test);if(!1===qa)var Da=f.voidOperation;else{if(!0!==qa)throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.BooleanConditionRequired,S);for(;!0===qa;){Oa=C(X,S.body);if(Oa===f.breakResult)break;if(Oa instanceof f.ReturnResult)break;
qa=C(X,S.test);if(!0!==qa&&!1!==qa)throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.BooleanConditionRequired,S);}Da=Oa instanceof f.ReturnResult?Oa:f.voidOperation}return Da;case "Identifier":return J(X,S);case "MemberExpression":return N(X,S);case "Literal":return S.value;case "CallExpression":a:try{if("MemberExpression"===S.callee.type){var Na=C(X,S.callee.object);if(!(Na instanceof ha))throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.FuncionNotFound,S);var Pa=!1===S.callee.computed?
S.callee.property.name:C(X,S.callee.property);if(!Na.hasGlobal(Pa))throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.FuncionNotFound,S);var Ta=Na.global(Pa);if(!f.isFunctionParameter(Ta))throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.CallNonFunction,S);var Xa=Ta.call(X,S)}else{if("Identifier"!==S.callee.type)throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.FuncionNotFound,S);if(null!=X.localScope&&void 0!==X.localScope[S.callee.name.toLowerCase()]){var ob=X.localScope[S.callee.name.toLowerCase()];
if(f.isFunctionParameter(ob.value)){Xa=ob.value.call(X,S);break a}throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.CallNonFunction,S);}if(void 0!==X.globalScope[S.callee.name.toLowerCase()]){ob=X.globalScope[S.callee.name.toLowerCase()];if(f.isFunctionParameter(ob.value)){Xa=ob.value.call(X,S);break a}throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.CallNonFunction,S);}throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.FuncionNotFound,S);}}catch(jb){throw jb;}return Xa;case "UnaryExpression":return V(X,
S);case "BinaryExpression":return Y(X,S);case "LogicalExpression":return ca(X,S);case "ArrayExpression":try{qa=[];for(Ca=0;Ca<S.elements.length;Ca++){var mb=C(X,S.elements[Ca]);if(f.isFunctionParameter(mb))throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.NoFunctionInArray,S);mb===f.voidOperation?qa.push(null):qa.push(mb)}var ub=qa}catch(jb){throw jb;}return ub;case "ObjectExpression":qa={};var vb=new Map;for(Ca=0;Ca<S.properties.length;Ca++){var Va=C(X,S.properties[Ca]);if(f.isFunctionParameter(Va.value))throw new b.ArcadeExecutionError(X,
b.ExecutionErrorCodes.NoFunctionInDictionary,S);if(!1===f.isString(Va.key))throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.KeyMustBeString,S);var fb=Va.key.toString(),wb=fb.toLowerCase();vb.has(wb)?fb=vb.get(wb):vb.set(wb,fb);qa[fb]=Va.value===f.voidOperation?null:Va.value}var Ua=new n(qa);Ua.immutable=!1;return Ua;case "Property":return{key:"Identifier"===S.key.type?S.key.name:C(X,S.key),value:C(X,S.value)};default:throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.Unrecognised,S);
}}catch(jb){throw b.ensureArcadeExecutionError(X,S,jb);}}function B(X,S){var ia=C(X,S.right);"VariableDeclaration"===S.left.type&&C(X,S.left);var oa=null,qa="";if("VariableDeclaration"===S.left.type){var wa=S.left.declarations[0].id;"Identifier"===wa.type&&(qa=wa.name)}else"Identifier"===S.left.type&&(qa=S.left.name);if(!qa)throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.InvalidIdentifier,S);qa=qa.toLowerCase();null!=X.localScope&&void 0!==X.localScope[qa]&&(oa=X.localScope[qa]);null===oa&&
void 0!==X.globalScope[qa]&&(oa=X.globalScope[qa]);if(null===oa)throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.InvalidIdentifier,S);if(f.isArray(ia)||f.isString(ia)){ia=ia.length;for(wa=0;wa<ia;wa++){oa.value=wa;qa=C(X,S.body);if(qa===f.breakResult)break;if(qa instanceof f.ReturnResult)return qa}return f.voidOperation}if(f.isImmutableArray(ia)){for(wa=0;wa<ia.length();wa++){oa.value=wa;qa=C(X,S.body);if(qa===f.breakResult)break;if(qa instanceof f.ReturnResult)return qa}return f.voidOperation}if(ia instanceof
n||f.isFeature(ia))for(ia=ia.keys(),wa=0;wa<ia.length;wa++){oa.value=ia[wa];qa=C(X,S.body);if(qa===f.breakResult)break;if(qa instanceof f.ReturnResult)return qa}else return f.voidOperation}function I(X,S,ia,oa,qa){switch(S){case "\x3d":return X===f.voidOperation?null:X;case "/\x3d":return f.toNumber(ia)/f.toNumber(X);case "*\x3d":return f.toNumber(ia)*f.toNumber(X);case "-\x3d":return f.toNumber(ia)-f.toNumber(X);case "+\x3d":return f.isString(ia)||f.isString(X)?f.toString(ia)+f.toString(X):f.toNumber(ia)+
f.toNumber(X);case "%\x3d":return f.toNumber(ia)%f.toNumber(X);default:throw new b.ArcadeExecutionError(qa,b.ExecutionErrorCodes.UnsupportedOperator,oa);}}function N(X,S){try{var ia=C(X,S.object);if(null===ia)throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.MemberOfNull,S);if(!1===S.computed){if("Identifier"===S.property.type){if(ia instanceof n||f.isFeature(ia))return ia.field(S.property.name);if(ia instanceof F)return v.geometryMember(ia,S.property.name,S,X);if(ia instanceof ha){if(!ia.hasGlobal(S.property.name))throw new b.ArcadeExecutionError(X,
b.ExecutionErrorCodes.InvalidIdentifier,S);return ia.global(S.property.name)}}throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.InvalidMemberAccessKey,S);}var oa=C(X,S.property);if(ia instanceof n||f.isFeature(ia)){if(f.isString(oa))return ia.field(oa);throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.InvalidMemberAccessKey,S);}if(ia instanceof ha){if(f.isString(oa))return ia.global(oa);throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.InvalidMemberAccessKey,S);}if(ia instanceof
F){if(f.isString(oa))return v.geometryMember(ia,oa,S,X);throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.InvalidMemberAccessKey,S);}if(f.isArray(ia)){if(f.isNumber(oa)&&isFinite(oa)&&Math.floor(oa)===oa){0>oa&&(oa=ia.length+oa);if(oa>=ia.length||0>oa)throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.OutOfBounds,S);return ia[oa]}throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.InvalidMemberAccessKey,S);}if(f.isString(ia)){if(f.isNumber(oa)&&isFinite(oa)&&Math.floor(oa)===oa){0>
oa&&(oa=ia.length+oa);if(oa>=ia.length||0>oa)throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.OutOfBounds,S);return ia[oa]}throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.InvalidMemberAccessKey,S);}if(f.isImmutableArray(ia)&&f.isNumber(oa)&&isFinite(oa)&&Math.floor(oa)===oa){0>oa&&(oa=ia.length()+oa);if(oa>=ia.length()||0>oa)throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.OutOfBounds,S);return ia.get(oa)}throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.InvalidMemberAccessKey,
S);}catch(qa){throw qa;}}function V(X,S){try{var ia=C(X,S.argument);if(f.isBoolean(ia)){if("!"===S.operator)return!ia;if("-"===S.operator)return-1*f.toNumber(ia);if("+"===S.operator)return 1*f.toNumber(ia);if("~"===S.operator)return~f.toNumber(ia);throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.UnsupportedUnaryOperator,S);}if("~"===S.operator)return~f.toNumber(ia);if("-"===S.operator)return-1*f.toNumber(ia);if("+"===S.operator)return 1*f.toNumber(ia);throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.UnsupportedUnaryOperator,
S);}catch(oa){throw oa;}}function Y(X,S){try{var ia=[C(X,S.left),C(X,S.right)],oa=ia[0],qa=ia[1];switch(S.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return f.binaryOperator(f.toNumber(oa),f.toNumber(qa),S.operator);case "\x3d\x3d":return f.equalityTest(oa,qa);case "!\x3d":return!f.equalityTest(oa,qa);case "\x3c":return f.greaterThanLessThan(oa,qa,S.operator);case "\x3e":return f.greaterThanLessThan(oa,qa,S.operator);case "\x3c\x3d":return f.greaterThanLessThan(oa,
qa,S.operator);case "\x3e\x3d":return f.greaterThanLessThan(oa,qa,S.operator);case "+":return f.isString(oa)||f.isString(qa)?f.toString(oa)+f.toString(qa):f.toNumber(oa)+f.toNumber(qa);case "-":return f.toNumber(oa)-f.toNumber(qa);case "*":return f.toNumber(oa)*f.toNumber(qa);case "/":return f.toNumber(oa)/f.toNumber(qa);case "%":return f.toNumber(oa)%f.toNumber(qa);default:throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.UnsupportedOperator,S);}}catch(wa){throw wa;}}function ca(X,S){try{var ia=
C(X,S.left);if(f.isBoolean(ia))switch(S.operator){case "||":if(!0===ia)return ia;var oa=C(X,S.right);if(f.isBoolean(oa))return oa;throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.LogicExpressionOrAnd,S);case "\x26\x26":if(!1===ia)return ia;oa=C(X,S.right);if(f.isBoolean(oa))return oa;throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.LogicExpressionOrAnd,S);default:throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.LogicExpressionOrAnd,S);}throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,
S);}catch(qa){throw qa;}}function J(X,S){try{var ia=S.name.toLowerCase();if(null!=X.localScope&&void 0!==X.localScope[ia]){var oa=X.localScope[ia];if(!0===oa.valueset)return oa.value;oa.value=C(X,oa.node);oa.valueset=!0;return oa.value}if(void 0!==X.globalScope[ia]){oa=X.globalScope[ia];if(!0===oa.valueset)return oa.value;oa.value=C(X,oa.node);oa.valueset=!0;return oa.value}throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.InvalidIdentifier,S);}catch(qa){throw qa;}}function O(X,S,ia,oa){try{var qa=
C(X,S.arguments[ia]);if(f.equalityTest(qa,oa))return C(X,S.arguments[ia+1]);var wa=S.arguments.length-ia;return 1===wa?C(X,S.arguments[ia]):2===wa?null:3===wa?C(X,S.arguments[ia+2]):O(X,S,ia+2,oa)}catch(Ha){throw Ha;}}function U(X,S,ia,oa){try{if(!0===oa)return C(X,S.arguments[ia+1]);if(3===S.arguments.length-ia)return C(X,S.arguments[ia+2]);var qa=C(X,S.arguments[ia+2]);if(!1===f.isBoolean(qa))throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.BooleanConditionRequired,S.arguments[ia+2]);return U(X,
S,ia+2,qa)}catch(wa){throw wa;}}function ba(X,S,ia,oa){try{var qa=X.body;if(ia.length!==X.params.length)throw new b.ArcadeExecutionError(S,b.ExecutionErrorCodes.WrongNumberOfParameters,oa);if(null!=S.localScope)for(var wa=0;wa<ia.length;wa++)S.localScope[X.params[wa].name.toLowerCase()]={value:ia[wa],valueset:!0,node:null};var Ha=C(S,qa);if(Ha instanceof f.ReturnResult)return Ha.value;if(Ha===f.breakResult)throw new b.ArcadeExecutionError(S,b.ExecutionErrorCodes.UnexpectedToken,oa);if(Ha===f.continueResult)throw new b.ArcadeExecutionError(S,
b.ExecutionErrorCodes.UnexpectedToken,oa);return Ha instanceof f.ImplicitResult?Ha.value:Ha}catch(R){throw R;}}function Z(X,S,ia){var oa=new ea;X||(X={});S||(S={});var qa=new n({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});qa.immutable=!1;oa.textformatting={value:qa,valueset:!0,node:null};for(var wa in S)oa[wa]={value:new c.NativeFunction(S[wa]),native:!0,valueset:!0,node:null};for(wa in X)oa[wa]=X[wa]&&"esri.Graphic"===X[wa].declaredClass?{value:h.createFromGraphic(X[wa],
ia),valueset:!0,node:null}:{value:X[wa],valueset:!0,node:null};return oa}function fa(X){}function pa(X){for(var S={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:w,evaluateIdentifier:J},ia=0;ia<X.length;ia++)X[ia].registerFunctions(S);for(var oa in S.functions)P[oa]={value:new c.NativeFunction(S.functions[oa]),valueset:!0,node:null},ea.prototype[oa]=P[oa];for(ia=0;ia<S.signatures.length;ia++)p.addFunctionDeclaration(S.signatures[ia],"sync")}Object.defineProperty(e,"__esModule",
{value:!0});e.executeScript=e.extend=e.functionHelper=void 0;var da=function(X){function S(ia,oa){var qa=X.call(this)||this;qa.definition=null;qa.context=null;qa.definition=ia;qa.context=oa;return qa}k(S,X);S.prototype.createFunction=function(ia){var oa=this;return function(){for(var qa=[],wa=0;wa<arguments.length;wa++)qa[wa]=arguments[wa];wa={spatialReference:oa.context.spatialReference,console:oa.context.console,timeReference:oa.context.timeReference?oa.context.timeReference:null,lrucache:oa.context.lrucache,
exports:oa.context.exports,libraryResolver:oa.context.libraryResolver,interceptor:oa.context.interceptor,localScope:{},depthCounter:{depth:ia.depthCounter.depth+1},globalScope:oa.context.globalScope};if(64<wa.depthCounter.depth)throw new b.ArcadeExecutionError(ia,b.ExecutionErrorCodes.MaximumCallDepth,null);return ba(oa.definition,wa,qa,null)}};S.prototype.call=function(ia,oa){var qa=this;return w(ia,oa,function(wa,Ha,R){var T;wa={spatialReference:ia.spatialReference,globalScope:ia.globalScope,depthCounter:{depth:ia.depthCounter.depth+
1},libraryResolver:ia.libraryResolver,exports:ia.exports,timeReference:null!==(T=ia.timeReference)&&void 0!==T?T:null,console:ia.console,lrucache:ia.lrucache,interceptor:ia.interceptor,localScope:{}};if(64<wa.depthCounter.depth)throw new b.ArcadeExecutionError(ia,b.ExecutionErrorCodes.MaximumCallDepth,oa);return ba(qa.definition,wa,R,oa)})};S.prototype.marshalledCall=function(ia,oa,qa,wa){var Ha=this;return wa(ia,oa,function(R,T,ka){var na;R={spatialReference:ia.spatialReference,globalScope:qa.globalScope,
depthCounter:{depth:ia.depthCounter.depth+1},libraryResolver:ia.libraryResolver,exports:ia.exports,console:ia.console,timeReference:null!==(na=ia.timeReference)&&void 0!==na?na:null,lrucache:ia.lrucache,interceptor:ia.interceptor,localScope:{}};ka=ka.map(function(ta){return!f.isFunctionParameter(ta)||ta instanceof c.ScopeMarshalledFunction?ta:c.wrapModuleScopedResponse(ta,ia,wa)});return c.wrapModuleScopedResponse(ba(Ha.definition,R,ka,oa),qa,wa)})};return S}(c.ArcadeFunction),ha=function(X){function S(ia){return X.call(this,
ia)||this}k(S,X);S.prototype.global=function(ia){ia=this.executingContext.globalScope[ia.toLowerCase()];ia.valueset||(ia.value=C(this.executingContext,ia.node),ia.valueset=!0);if(f.isFunctionParameter(ia.value)&&!(ia.value instanceof c.ScopeMarshalledFunction)){var oa=new c.ScopeMarshalledFunction;oa.fn=ia.value;oa.parameterEvaluator=w;oa.context=this.executingContext;ia.value=oa}return ia.value};S.prototype.setGlobal=function(ia,oa){if(f.isFunctionParameter(oa))throw new b.ArcadeExecutionError(null,
b.ExecutionErrorCodes.AssignModuleFunction,null);this.executingContext.globalScope[ia.toLowerCase()]={value:oa,valueset:!0,node:null}};S.prototype.hasGlobal=function(ia){void 0===this.executingContext.exports[ia]&&(ia=ia.toLowerCase());return void 0!==this.executingContext.exports[ia]?!0:!1};S.prototype.loadModule=function(ia){var oa,qa=ia.spatialReference;if(null===qa||void 0===qa)qa=new y({wkid:102100});this.moduleScope=Z({},ia.customfunctions,ia.timeReference);this.executingContext={spatialReference:qa,
globalScope:this.moduleScope,localScope:null,libraryResolver:new d.ArcadeModuleLoader(ia.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),exports:{},console:ia.console?ia.console:fa,timeReference:null!==(oa=ia.timeReference)&&void 0!==oa?oa:null,lrucache:ia.lrucache,interceptor:ia.interceptor,depthCounter:{depth:1}};C(this.executingContext,this.source.syntax)};return S}(a.ArcadeModule),P={};m.registerFunctions(P,w);E.registerFunctions(P,w);A.registerFunctions(P,w);v.registerFunctions(P,
w);D.registerFunctions(P,w);z.registerFunctions(P,w);P.iif=function(X,S){try{f.pcCheck(null===S.arguments?[]:S.arguments,3,3,X,S);var ia=C(X,S.arguments[0]);if(!1===f.isBoolean(ia))throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.BooleanConditionRequired,S);return!0===ia?C(X,S.arguments[1]):C(X,S.arguments[2])}catch(oa){throw oa;}};P.decode=function(X,S){try{if(2>S.arguments.length)throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.WrongNumberOfParameters,S);if(2===S.arguments.length)return C(X,
S.arguments[1]);if(0===(S.arguments.length-1)%2)throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.WrongNumberOfParameters,S);var ia=C(X,S.arguments[0]);return O(X,S,1,ia)}catch(oa){throw oa;}};P.when=function(X,S){try{if(3>S.arguments.length)throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.WrongNumberOfParameters,S);if(0===S.arguments.length%2)throw new b.ArcadeExecutionError(X,b.ExecutionErrorCodes.WrongNumberOfParameters,S);var ia=C(X,S.arguments[0]);if(!1===f.isBoolean(ia))throw new b.ArcadeExecutionError(X,
b.ExecutionErrorCodes.BooleanConditionRequired,S.arguments[0]);return U(X,S,0,ia)}catch(oa){throw oa;}};for(var aa in P)P[aa]={value:new c.NativeFunction(P[aa]),valueset:!0,node:null};var ea=function(){};ea.prototype=P;ea.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};ea.prototype.pi={value:Math.PI,valueset:!0,node:null};e.functionHelper={fixSpatialReference:f.fixSpatialReference,parseArguments:x,standardFunction:w};e.extend=pa;pa([r]);e.executeScript=function(X,S){var ia,
oa=S.spatialReference;if(null===oa||void 0===oa)oa=new y({wkid:102100});var qa=null;X.usesModules&&(qa=new d.ArcadeModuleLoader(new Map,X.loadedModules));var wa=Z(S.vars,S.customfunctions,S.timeReference);oa={spatialReference:oa,globalScope:wa,localScope:null,exports:{},libraryResolver:qa,console:S.console?S.console:fa,timeReference:null!==(ia=S.timeReference)&&void 0!==ia?ia:null,lrucache:S.lrucache,interceptor:S.interceptor,depthCounter:{depth:1}};X=C(oa,X);X instanceof f.ReturnResult&&(X=X.value);
X instanceof f.ImplicitResult&&(X=X.value);X===f.voidOperation&&(X=null);if(X===f.breakResult)throw new b.ArcadeExecutionError(oa,b.ExecutionErrorCodes.IllegalResult,null);if(X===f.continueResult)throw new b.ArcadeExecutionError(oa,b.ExecutionErrorCodes.IllegalResult,null);if(f.isFunctionParameter(X))throw new b.ArcadeExecutionError(oa,b.ExecutionErrorCodes.IllegalResult,null);return X}})},"esri/arcadeProfiles/visualizationProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../support/expressionUtils ./utils".split(" "),
function(g,e,t,u,l,q,k){g=new (g(null,{declaredClass:"esri.arcadeProfiles.VisualizationProfile",initialize:function(a){var d=[];k.hasGeometryOperations(a)&&d.push(q.enableGeometryOperations());return l(d)}}));e.setObject("arcadeProfiles.visualizationProfile",g,u);return g})},"esri/promiseList":function(){define(["dojo/_base/array","dojo/Deferred","dojo/when"],function(g,e,t){var u=g.forEach;return function(l){function q(f,p){b[p]=f;h.progress([f,p]);0===--c&&h.resolve(b)}var k,a;l instanceof Array?
a=l:l&&"object"===typeof l&&(k=l);var d=[];if(k){a=[];for(var n in k)Object.hasOwnProperty.call(k,n)&&(d.push(n),a.push(k[n]));var b={}}else a&&(b=[]);if(!a||!a.length)return(new e).resolve(b);var h=new e;h.promise.always(function(){b=d=null});var c=a.length;u(a,function(f,p){k||d.push(p);t(f,function(r){h.isFulfilled()||q(r,d[p])},function(r){h.isFulfilled()||q(r,d[p])})});return h.promise}})},"esri/arcadeProfiles/utils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","../kernel",
"../support/expressionUtils"],function(g,e,t,u,l){var q=/(\/(MapServer|FeatureServer)).*/ig;t={hasGeometryOperations:function(k){return e.some(k,function(a){return a.hasGeometryOperations?a.hasGeometryOperations():l.hasGeometryOperations(a)})},hasFeatureSetOperations:function(k){return e.some(k,function(a){return a.hasFeatureSetOperations?a.hasFeatureSetOperations():l.hasFeatureSetOperations(a)})},hasVariables:function(k,a){return e.some(k,function(d){return e.some(a,function(n){return d.hasVariable?
d.hasVariable(n):l.hasVariable(d,n)})})},isAsync:function(k){return e.some(k,function(a){return a.async})},getServiceUrl:function(k){return q.test(k)?k.replace(q,"$1"):null}};g.setObject("arcadeProfiles.utils",t,u);return t})},"esri/renderers/StretchRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),function(g,e,t,u,l,q,k,a){var d={TYPE_NONE:"none",TYPE_STANDARDDEVIATION:"standardDeviation",
TYPE_HISTOGRAMEQUALIZATION:"histogramEqualization",TYPE_MINMAX:"minMax",TYPE_PERCENTCLIP:"percentClip",TYPE_SIGMOID:"sigmoid"};g=g(null,{declaredClass:"esri.renderer.StretchRenderer",constructor:function(n){n=n||{};this.stretchType=d.TYPE_NONE;this.dra=!0;this.statistics=[];this.gamma=[];this.computeGamma=this.useGamma=!1;this.sigmoidStrengthLevel=this.numberOfStandardDeviations=this.minPercent=this.maxPercent=this.min=this.max=null;t.mixin(this,n);this.colorRamp=a.fromJson(n.colorRamp)},toJson:function(){var n=
{type:"rasterStretch",stretchType:this.stretchType,colorRamp:this.colorRamp&&this.colorRamp.toJson(),min:this.min,max:this.max,numberOfStandardDeviations:this.numberOfStandardDeviations,statistics:t.clone(this.statistics),dra:this.dra,minPercent:this.minPercent,maxPercent:this.maxPercent,useGamma:this.useGamma,gamma:t.clone(this.gamma),computeGamma:this.computeGamma,sigmoidStrengthLevel:this.sigmoidStrengthLevel};return q.fixJson(n)},toRenderingRule:function(n){n=n||{};var b=new k;b.functionName=
"Stretch";var h=this._convertStretchTypeEnumToIndex(this.stretchType),c={StretchType:h,Statistics:this.statistics,DRA:this.dra,UseGamma:this.useGamma,Gamma:this.gamma,ComputeGamma:this.computeGamma};q.isDefined(this.min)&&(c.Min=this.min);q.isDefined(this.min)&&(c.Max=this.max);3===h?(c.NumberOfStandardDeviations=this.numberOfStandardDeviations,b.outputPixelType="U8"):6===h?(c.MinPercent=parseFloat(this.minPercent),c.MaxPercent=parseFloat(this.maxPercent),b.outputPixelType="U8"):5===h?b.outputPixelType=
"U8":9===h&&(c.SigmoidStrengthLevel=this.sigmoidStrengthLevel);b.functionArguments=c;b.variableName="Raster";return this.colorRamp?(h=new k,h.functionArguments=n.convertToColormap?{Colormap:a.convertColorRampToColormap(this.colorRamp,256)}:{colorRamp:this.colorRamp.toJson()},h.variableName="Raster",h.functionName="Colormap",h.functionArguments.Raster=b,h):b},_convertStretchTypeEnumToIndex:function(n){var b=0;n===d.TYPE_STANDARDDEVIATION?b=3:n===d.TYPE_HISTOGRAMEQUALIZATION?b=4:n===d.TYPE_MINMAX?b=
5:n===d.TYPE_PERCENTCLIP?b=6:n===d.TYPE_SIGMOID&&(b=9);return b},_convertStretchTypeIndexToEnum:function(n){var b=d.TYPE_NONE;3===n?b=d.TYPE_STANDARDDEVIATION:4===n?b=d.TYPE_HISTOGRAMEQUALIZATION:5===n?b=d.TYPE_MINMAX:6===n?b=d.TYPE_PERCENTCLIP:9===n&&(b=d.TYPE_SIGMOID);return b}});t.mixin(g,d);t.setObject("renderer.StretchRenderer",g,l);return g})},"esri/layers/RasterFunction":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(g,e,t,u,l){var q=g(null,
{declaredClass:"esri.layers.RasterFunction",functionName:null,arguments:null,functionArguments:null,variableName:null,outputPixelType:null,_isTemplate:null,_templateJson:null,constructor:function(k){if(e.isObject(k)){this._isRFTJson(k)&&(this._isTemplate=!0,this._templateJson=k);var a=0;this.functionName=k.rasterFunction||k.name;this.functionArguments=e.clone(k.rasterFunctionArguments||k.arguments);e.mixin(this,k);if(k=this.functionArguments)if(k.Raster=this._toRasterFunction(k.Raster),k.Raster2=
this._toRasterFunction(k.Raster2),k.DEM=this._toRasterFunction(k.DEM),k.FillRaster=this._toRasterFunction(k.FillRaster),k.Rasters&&k.Rasters.length)for(a=0;a<k.Rasters.length;a++)k.Rasters[a]=this._toRasterFunction(k.Rasters[a])}},_isRFTJson:function(k){return k.name&&k.arguments&&k.function&&k.hasOwnProperty("functionType")},_toRasterFunction:function(k){return k&&(k.rasterFunction||k.functionName)?new q(k):k},_rfToJson:function(k){k&&"esri.layers.RasterFunction"===k.declaredClass&&(k=k.toJson());
return k},toJson:function(){if(this._isTemplate)return this._templateJson;var k=e.clone(this.functionArguments||this.arguments);if(k&&(k.Raster=this._rfToJson(k.Raster),k.Raster2=this._rfToJson(k.Raster2),k.DEM=this._rfToJson(k.DEM),k.FillRaster=this._rfToJson(k.FillRaster),k.Rasters&&k.Rasters.length)){var a,d=[];for(a=0;a<k.Rasters.length;a++)d.push(this._rfToJson(k.Rasters[a]));k.Rasters=d}return l.filter({rasterFunction:this.functionName,rasterFunctionArguments:k,variableName:this.variableName,
outputPixelType:this.outputPixelType?this.outputPixelType:null},function(n){if(null!==n&&void 0!==n)return!0})}});e.setObject("layers.RasterFunction",q,u);return q})},"esri/renderers/colorRampUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/store/Memory ../tasks/AlgorithmicColorRamp ../tasks/MultipartColorRamp ../Color ./colorUtils".split(" "),function(g,e,t,u,l,q,k){function a(z){if(null==z||"algorithmic"!==z.type&&!z.fromColor)return z;var A=z.declaredClass?new u:g.clone(z);A.fromColor=
z.toColor;A.toColor=z.fromColor;A.algorithm=z.algorithm;return A}function d(z){if(null==z)return null;if("multipart"===z.type||z.colorRamps&&0<z.colorRamps.length){var A=z.declaredClass?new l:g.clone(z);A.colorRamps=e.map(z.colorRamps.slice().reverse(),function(D){return a(D)});return A}return a(z)}function n(z,A,D){if(!z)return{id:null,isInverted:!1};var E=z.name;E&&(z.fromColor||z.colorRamps)&&(z.name=void 0);var F=b(z,A,D);if(F)return E&&(z.name=E),{id:F,isInverted:!1};F=b(z,A,D,!0);E&&(z.name=
E);return F?{id:F,isInverted:!0}:E&&(F=b(z,A,D))?{id:F,isInverted:!1}:{id:null,isInverted:!1}}function b(z,A,D,E){if(z){E&&(z=d(z));A=A||r;D=D||m;var F=null;E=z.declaredClass;var y,x;if((y="string"===typeof z?z:z.name)&&e.some(D,function(w){if(w.name===y)return F=w.id,!0})&&F)return F;"esri.tasks.AlgorithmicColorRamp"===E?e.some(A,function(w){if(c(z.fromColor.toRgb(),w.fromColor)&&c(z.toColor.toRgb(),w.toColor))return F=w.id,!0},this):"esri.tasks.MultipartColorRamp"===E&&e.some(A,function(w){if(z.colorRamps&&
w.colorRamps&&z.colorRamps.length===w.colorRamps.length&&(x=z.colorRamps,!e.some(w.colorRamps,function(C,B){if(!c(x[B].fromColor.toRgb(),C.fromColor)||!c(x[B].toColor.toRgb(),C.toColor))return!0},this))){if(F)return!0;F=w.id}},this);return F}}function h(z){var A=new u,D=z.algorithm;A.fromColor=q.toDojoColor(z.fromColor);A.toColor=q.toDojoColor(z.toColor);D?"esriCIELabAlgorithm"===D?A.algorithm="cie-lab":"esriHSVAlgorithm"===D?A.algorithm="hsv":"esriLabLChAlgorithm"===D&&(A.algorithm="lab-lch"):A.algorithm=
"hsv";return A}function c(z,A){if(!z||!A)return!1;z=z.slice(0,3);A=A.slice(0,3);return!e.some(z,function(D,E){if(D>A[E]+2||D<A[E]-2)return!0})}function f(z,A,D){z=k.toLAB(z);A=k.toLAB(A);return k.toRGB({l:z.l*(1-D)+D*A.l,a:z.a*(1-D)+D*A.a,b:z.b*(1-D)+D*A.b})}var p={},r=[{id:"none",selected:!0},{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,
52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",
fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},
{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"cividis_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,32,77,255],toColor:[0,33,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,33,79,255],toColor:[0,34,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,34,80,255],toColor:[0,35,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,35,82,255],toColor:[0,35,84,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[0,35,84,255],toColor:[0,36,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,36,85,255],toColor:[0,37,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,37,87,255],toColor:[0,38,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,38,89,255],toColor:[0,38,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,38,91,255],toColor:[0,39,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[0,39,92,255],toColor:[0,40,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,40,94,255],toColor:[0,40,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,40,96,255],toColor:[0,41,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,41,98,255],toColor:[0,42,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,42,100,255],toColor:[0,42,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
42,101,255],toColor:[0,43,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,43,103,255],toColor:[0,44,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,44,105,255],toColor:[0,45,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,45,107,255],toColor:[0,45,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,45,109,255],toColor:[0,46,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
46,110,255],toColor:[0,47,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,111,255],toColor:[0,47,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,112,255],toColor:[0,47,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,112,255],toColor:[0,48,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,48,112,255],toColor:[0,49,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
49,112,255],toColor:[0,49,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,49,112,255],toColor:[0,50,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,50,112,255],toColor:[0,51,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,51,111,255],toColor:[0,52,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,52,111,255],toColor:[0,52,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
52,111,255],toColor:[0,53,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,53,111,255],toColor:[1,54,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,54,111,255],toColor:[6,55,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,55,110,255],toColor:[11,55,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,55,110,255],toColor:[15,56,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[15,
56,110,255],toColor:[18,57,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,57,110,255],toColor:[21,57,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,57,110,255],toColor:[24,58,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,58,110,255],toColor:[26,59,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[26,59,109,255],toColor:[29,60,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[29,60,109,255],toColor:[31,60,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,60,109,255],toColor:[33,61,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,61,109,255],toColor:[35,62,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,62,109,255],toColor:[37,63,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,63,109,255],toColor:[38,63,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[38,63,109,255],toColor:[40,64,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,64,108,255],toColor:[42,65,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,65,108,255],toColor:[43,65,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,65,108,255],toColor:[45,66,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,66,108,255],toColor:[46,67,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[46,67,108,255],toColor:[48,68,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,68,108,255],toColor:[49,68,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,68,108,255],toColor:[51,69,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,69,108,255],toColor:[52,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,70,108,255],toColor:[53,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[53,70,108,255],toColor:[55,71,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,71,108,255],toColor:[56,72,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,72,108,255],toColor:[57,73,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,73,108,255],toColor:[58,73,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,73,108,255],toColor:[60,74,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[60,74,108,255],toColor:[61,75,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,75,108,255],toColor:[62,75,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,75,108,255],toColor:[63,76,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,76,108,255],toColor:[64,77,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,77,108,255],toColor:[65,78,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,78,108,255],toColor:[67,78,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,78,108,255],toColor:[68,79,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,79,108,255],toColor:[69,80,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,80,108,255],toColor:[70,80,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,80,108,255],toColor:[71,81,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[71,81,108,255],toColor:[72,82,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,82,108,255],toColor:[73,83,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,83,108,255],toColor:[74,83,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[74,83,108,255],toColor:[75,84,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,84,108,255],toColor:[76,85,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[76,85,108,255],toColor:[77,86,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[77,86,108,255],toColor:[78,86,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,86,108,255],toColor:[79,87,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[79,87,108,255],toColor:[80,88,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,88,108,255],toColor:[81,88,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[81,88,109,255],toColor:[82,89,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,89,109,255],toColor:[83,90,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,90,109,255],toColor:[84,91,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,91,109,255],toColor:[85,91,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[85,91,109,255],toColor:[86,92,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[86,92,109,255],toColor:[87,93,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[87,93,109,255],toColor:[88,93,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,93,109,255],toColor:[89,94,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,94,110,255],toColor:[90,95,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[90,95,110,255],toColor:[91,96,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[91,96,110,255],toColor:[92,96,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,96,110,255],toColor:[93,97,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[93,97,110,255],toColor:[94,98,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,98,110,255],toColor:[94,99,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,99,111,255],toColor:[95,99,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,99,111,255],toColor:[96,100,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[96,100,111,255],toColor:[97,101,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,101,111,255],toColor:[98,101,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,101,111,255],toColor:[99,102,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,102,112,255],toColor:[100,103,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[100,103,112,255],toColor:[101,104,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,104,112,255],toColor:[102,104,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,104,112,255],toColor:[103,105,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[103,105,113,255],toColor:[104,106,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[104,106,113,255],toColor:[104,107,113,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[104,107,113,255],toColor:[105,107,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,107,113,255],toColor:[106,108,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[106,108,114,255],toColor:[107,109,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,109,114,255],toColor:[108,109,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,109,114,255],toColor:[109,
110,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[109,110,115,255],toColor:[110,111,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,111,115,255],toColor:[111,112,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,112,115,255],toColor:[111,112,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,112,115,255],toColor:[112,113,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,
113,116,255],toColor:[113,114,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,114,116,255],toColor:[114,115,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[114,115,116,255],toColor:[115,115,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,115,117,255],toColor:[116,116,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,116,117,255],toColor:[117,117,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[117,117,117,255],toColor:[117,118,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,118,118,255],toColor:[118,118,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,118,118,255],toColor:[119,119,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[119,119,119,255],toColor:[120,120,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,120,119,255],toColor:[121,121,119,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[121,121,119,255],toColor:[122,121,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,121,120,255],toColor:[123,122,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,122,120,255],toColor:[124,123,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,123,120,255],toColor:[124,124,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,124,121,255],toColor:[125,
124,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,124,121,255],toColor:[126,125,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[126,125,121,255],toColor:[127,126,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,126,121,255],toColor:[128,127,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,127,121,255],toColor:[129,127,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[129,
127,121,255],toColor:[130,128,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,128,121,255],toColor:[131,129,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[131,129,121,255],toColor:[132,130,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,130,121,255],toColor:[133,130,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,130,121,255],toColor:[134,131,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[134,131,121,255],toColor:[135,132,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[135,132,121,255],toColor:[136,133,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,133,121,255],toColor:[137,134,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,134,121,255],toColor:[138,134,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,134,121,255],toColor:[139,135,121,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[139,135,121,255],toColor:[140,136,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,136,121,255],toColor:[141,137,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,137,121,255],toColor:[142,137,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[142,137,121,255],toColor:[143,138,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[143,138,121,255],toColor:[144,
139,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,139,121,255],toColor:[145,140,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,140,121,255],toColor:[146,141,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,141,121,255],toColor:[147,141,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,141,121,255],toColor:[148,142,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,
142,121,255],toColor:[149,143,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[149,143,121,255],toColor:[150,144,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,144,121,255],toColor:[151,145,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,145,120,255],toColor:[152,145,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[152,145,120,255],toColor:[153,146,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[153,146,120,255],toColor:[154,147,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,147,120,255],toColor:[155,148,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,148,120,255],toColor:[156,149,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[156,149,120,255],toColor:[157,149,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[157,149,120,255],toColor:[158,150,120,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[158,150,120,255],toColor:[159,151,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[159,151,119,255],toColor:[160,152,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,152,119,255],toColor:[161,153,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[161,153,119,255],toColor:[162,153,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,153,119,255],toColor:[163,
154,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,154,119,255],toColor:[164,155,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,155,118,255],toColor:[165,156,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,156,118,255],toColor:[166,157,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[166,157,118,255],toColor:[167,158,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,
158,118,255],toColor:[168,158,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[168,158,118,255],toColor:[169,159,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,159,117,255],toColor:[170,160,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,160,117,255],toColor:[171,161,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[171,161,117,255],toColor:[172,162,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[172,162,117,255],toColor:[173,162,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,162,116,255],toColor:[174,163,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,163,116,255],toColor:[175,164,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[175,164,116,255],toColor:[177,165,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[177,165,115,255],toColor:[178,166,115,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[178,166,115,255],toColor:[179,167,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,167,115,255],toColor:[180,168,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,168,115,255],toColor:[181,168,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[181,168,114,255],toColor:[182,169,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,169,114,255],toColor:[183,
170,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[183,170,114,255],toColor:[184,171,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,171,113,255],toColor:[185,172,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,172,113,255],toColor:[186,173,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[186,173,113,255],toColor:[187,173,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,
173,112,255],toColor:[188,174,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,174,112,255],toColor:[189,175,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[189,175,111,255],toColor:[190,176,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,176,111,255],toColor:[191,177,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,177,111,255],toColor:[192,178,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[192,178,110,255],toColor:[194,179,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[194,179,110,255],toColor:[195,180,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,180,109,255],toColor:[196,180,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,180,109,255],toColor:[197,181,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[197,181,109,255],toColor:[198,182,108,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[198,182,108,255],toColor:[199,183,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[199,183,108,255],toColor:[200,184,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,184,107,255],toColor:[201,185,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,185,107,255],toColor:[202,186,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,186,106,255],toColor:[203,
187,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,187,106,255],toColor:[204,187,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,187,105,255],toColor:[205,188,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,188,105,255],toColor:[207,189,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,189,104,255],toColor:[208,190,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[208,
190,104,255],toColor:[209,191,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,191,103,255],toColor:[210,192,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[210,192,103,255],toColor:[211,193,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,193,102,255],toColor:[212,194,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,194,101,255],toColor:[213,195,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[213,195,101,255],toColor:[214,196,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,196,100,255],toColor:[215,196,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[215,196,100,255],toColor:[217,197,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[217,197,99,255],toColor:[218,198,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,198,98,255],toColor:[219,199,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[219,199,98,255],toColor:[220,200,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,200,97,255],toColor:[221,201,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,201,96,255],toColor:[222,202,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[222,202,96,255],toColor:[223,203,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,203,95,255],toColor:[224,204,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[224,204,94,255],toColor:[226,205,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,205,94,255],toColor:[227,206,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,206,93,255],toColor:[228,207,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,207,92,255],toColor:[229,208,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,208,91,255],toColor:[230,209,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[230,209,91,255],toColor:[231,209,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,209,90,255],toColor:[233,210,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,210,89,255],toColor:[234,211,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,211,88,255],toColor:[235,212,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,212,87,255],toColor:[236,213,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[236,213,86,255],toColor:[237,214,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,214,86,255],toColor:[238,215,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,215,85,255],toColor:[239,216,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,216,84,255],toColor:[241,217,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,217,83,255],toColor:[242,218,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,218,82,255],toColor:[243,219,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,219,81,255],toColor:[244,220,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,220,80,255],toColor:[245,221,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,221,79,255],toColor:[246,222,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,222,78,255],toColor:[248,223,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[248,223,77,255],toColor:[249,224,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,224,75,255],toColor:[250,225,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,225,74,255],toColor:[251,226,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,226,73,255],toColor:[252,227,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,227,72,255],toColor:[254,228,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,228,71,255],toColor:[255,229,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,229,69,255],toColor:[255,230,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,230,68,255],toColor:[255,231,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,231,67,255],toColor:[255,232,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,232,66,255],toColor:[255,233,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,233,67,255],toColor:[255,234,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,234,69,255],toColor:[255,235,70,255]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,
255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},
{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,
96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,
204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"inferno_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,0,4,255],toColor:[1,0,5,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,0,5,255],toColor:[1,1,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,6,255],toColor:[1,1,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,8,255],toColor:[2,1,10,
255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,1,10,255],toColor:[2,2,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,12,255],toColor:[2,2,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,14,255],toColor:[3,2,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[3,2,16,255],toColor:[4,3,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,3,18,255],toColor:[4,3,21,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[4,3,21,255],toColor:[5,4,23,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[5,4,23,255],toColor:[6,4,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,4,25,255],toColor:[7,5,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[7,5,27,255],toColor:[8,6,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[8,6,29,255],toColor:[9,6,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[9,6,32,255],toColor:[10,7,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[10,7,34,255],toColor:[11,7,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,7,36,255],toColor:[12,8,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[12,8,38,255],toColor:[13,8,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,8,41,255],toColor:[14,9,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[14,
9,43,255],toColor:[16,9,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,9,45,255],toColor:[17,10,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[17,10,48,255],toColor:[18,10,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,10,50,255],toColor:[20,11,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[20,11,53,255],toColor:[21,11,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,
11,55,255],toColor:[22,11,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[22,11,58,255],toColor:[24,12,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,12,60,255],toColor:[25,12,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,12,62,255],toColor:[27,12,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[27,12,65,255],toColor:[28,12,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[28,
12,67,255],toColor:[30,12,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[30,12,70,255],toColor:[31,12,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,12,72,255],toColor:[33,12,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,12,74,255],toColor:[35,12,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,12,77,255],toColor:[36,12,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,
12,79,255],toColor:[38,12,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,12,81,255],toColor:[40,11,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,11,83,255],toColor:[42,11,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,11,85,255],toColor:[43,11,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,11,87,255],toColor:[45,11,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,
11,89,255],toColor:[47,10,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,10,91,255],toColor:[49,10,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,10,93,255],toColor:[51,10,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,10,94,255],toColor:[52,10,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,10,96,255],toColor:[54,9,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,
9,97,255],toColor:[56,9,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,9,98,255],toColor:[58,9,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,9,99,255],toColor:[59,9,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,9,100,255],toColor:[61,9,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,9,101,255],toColor:[63,9,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,9,
102,255],toColor:[64,10,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,10,103,255],toColor:[66,10,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,10,104,255],toColor:[68,10,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,10,105,255],toColor:[69,10,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,10,105,255],toColor:[71,11,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,
11,106,255],toColor:[73,11,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,11,107,255],toColor:[74,12,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[74,12,107,255],toColor:[76,12,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,12,108,255],toColor:[78,13,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,13,108,255],toColor:[79,13,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[79,13,108,255],toColor:[81,14,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[81,14,109,255],toColor:[83,14,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,14,109,255],toColor:[84,15,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,15,109,255],toColor:[86,15,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,15,110,255],toColor:[87,16,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[87,16,110,255],toColor:[89,17,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,17,110,255],toColor:[91,17,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,17,110,255],toColor:[92,18,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,18,110,255],toColor:[94,18,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,18,111,255],toColor:[95,19,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,19,111,255],toColor:[97,20,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,20,111,255],toColor:[99,20,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,20,111,255],toColor:[100,21,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[100,21,111,255],toColor:[102,21,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,21,111,255],toColor:[103,22,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[103,22,111,255],toColor:[105,23,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,23,111,255],toColor:[107,23,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,23,111,255],toColor:[108,24,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,24,111,255],toColor:[110,24,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,24,111,255],toColor:[111,25,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[111,25,111,255],toColor:[113,25,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,25,110,255],toColor:[115,26,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,26,110,255],toColor:[116,27,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,27,110,255],toColor:[118,27,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,27,110,255],toColor:[119,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[119,28,110,255],toColor:[121,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[121,28,110,255],toColor:[123,29,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,29,109,255],toColor:[124,29,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,29,109,255],toColor:[126,30,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[126,30,109,255],toColor:[127,31,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[127,31,109,255],toColor:[129,31,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[129,31,108,255],toColor:[130,32,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,32,108,255],toColor:[132,32,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,32,108,255],toColor:[134,33,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,33,107,255],toColor:[135,33,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[135,33,107,255],toColor:[137,34,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,34,107,255],toColor:[138,34,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,34,106,255],toColor:[140,35,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,35,106,255],toColor:[142,36,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[142,36,105,255],toColor:[143,36,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[143,36,105,255],toColor:[145,37,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,37,105,255],toColor:[146,37,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,37,104,255],toColor:[148,38,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,38,104,255],toColor:[150,38,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,38,103,255],toColor:[151,39,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[151,39,102,255],toColor:[153,40,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[153,40,102,255],toColor:[154,40,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,40,101,255],toColor:[156,41,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[156,41,101,255],toColor:[158,41,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,41,100,255],toColor:[159,42,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[159,42,100,255],toColor:[161,43,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[161,43,99,255],toColor:[162,43,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,43,98,255],toColor:[164,44,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,44,98,255],toColor:[165,45,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,45,97,255],toColor:[167,45,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[167,45,96,255],toColor:[169,46,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,46,95,255],toColor:[170,46,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,46,95,255],toColor:[172,47,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[172,47,94,255],toColor:[173,48,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,48,93,255],toColor:[175,49,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[175,49,92,255],toColor:[176,49,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,49,92,255],toColor:[178,50,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[178,50,91,255],toColor:[179,51,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,51,90,255],toColor:[181,51,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[181,51,89,255],toColor:[182,52,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[182,52,88,255],toColor:[184,53,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,53,87,255],toColor:[185,54,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,54,86,255],toColor:[187,54,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,54,85,255],toColor:[188,55,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,55,85,255],toColor:[190,56,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[190,56,84,255],toColor:[191,57,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,57,83,255],toColor:[193,58,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,58,82,255],toColor:[194,59,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[194,59,81,255],toColor:[196,60,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,60,80,255],toColor:[197,60,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[197,60,79,255],toColor:[198,61,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,61,78,255],toColor:[200,62,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,62,77,255],toColor:[201,63,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,63,76,255],toColor:[203,64,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,64,75,255],toColor:[204,65,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[204,65,74,255],toColor:[205,66,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,66,72,255],toColor:[207,67,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,67,71,255],toColor:[208,68,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[208,68,70,255],toColor:[209,69,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,69,69,255],toColor:[211,70,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[211,70,68,255],toColor:[212,72,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,72,67,255],toColor:[213,73,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[213,73,66,255],toColor:[214,74,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,74,65,255],toColor:[216,75,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,75,64,255],toColor:[217,76,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[217,76,62,255],toColor:[218,77,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,77,61,255],toColor:[219,79,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,79,60,255],toColor:[220,80,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,80,59,255],toColor:[221,81,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,81,58,255],toColor:[223,82,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[223,82,57,255],toColor:[224,84,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,84,56,255],toColor:[225,85,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[225,85,54,255],toColor:[226,86,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,86,53,255],toColor:[227,88,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,88,52,255],toColor:[228,89,51,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[228,89,51,255],toColor:[229,90,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,90,50,255],toColor:[230,92,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,92,48,255],toColor:[231,93,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,93,47,255],toColor:[232,95,46,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,95,46,255],toColor:[233,96,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[233,96,45,255],toColor:[234,98,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,98,43,255],toColor:[235,99,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,99,42,255],toColor:[235,101,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,101,41,255],toColor:[236,102,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,102,40,255],toColor:[237,104,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[237,104,38,255],toColor:[238,105,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,105,37,255],toColor:[239,107,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,107,36,255],toColor:[240,109,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,109,35,255],toColor:[240,110,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,110,33,255],toColor:[241,112,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[241,112,32,255],toColor:[242,113,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,113,31,255],toColor:[242,115,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,115,30,255],toColor:[243,117,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,117,28,255],toColor:[244,118,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,118,27,255],toColor:[244,120,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[244,120,26,255],toColor:[245,122,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,122,24,255],toColor:[246,123,23,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,123,23,255],toColor:[246,125,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,125,22,255],toColor:[247,127,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,127,20,255],toColor:[247,129,19,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,129,19,255],toColor:[248,130,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,130,18,255],toColor:[248,132,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,132,16,255],toColor:[249,134,15,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,134,15,255],toColor:[249,136,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,136,14,255],toColor:[249,137,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[249,137,12,255],toColor:[250,139,11,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,139,11,255],toColor:[250,141,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,141,10,255],toColor:[250,143,9,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,143,9,255],toColor:[251,145,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,145,8,255],toColor:[251,146,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,146,7,255],toColor:[251,148,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,148,7,255],toColor:[252,150,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,150,6,255],toColor:[252,152,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,152,6,255],toColor:[252,154,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,154,6,255],toColor:[252,156,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,156,6,255],toColor:[252,158,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,158,7,255],toColor:[253,160,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,160,7,255],toColor:[253,161,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,161,8,255],toColor:[253,163,9,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,163,9,255],toColor:[253,165,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,165,10,255],toColor:[253,167,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,167,12,255],toColor:[253,169,13,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,169,13,255],toColor:[253,171,15,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,171,15,255],toColor:[253,173,17,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,173,17,255],toColor:[253,175,19,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,175,19,255],toColor:[253,177,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,177,20,255],toColor:[253,179,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,179,22,255],toColor:[253,181,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,181,25,255],toColor:[252,183,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,183,27,255],toColor:[252,185,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,185,29,255],toColor:[252,186,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,186,31,255],toColor:[252,188,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,188,33,255],toColor:[252,190,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,190,35,255],toColor:[251,192,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,192,38,255],toColor:[251,194,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,194,40,255],toColor:[251,196,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,196,43,255],toColor:[251,198,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,198,45,255],toColor:[250,200,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,200,48,255],toColor:[250,202,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,202,50,255],toColor:[250,204,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[250,204,53,255],toColor:[249,206,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,206,56,255],toColor:[249,208,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,208,58,255],toColor:[248,210,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,210,61,255],toColor:[248,212,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,212,64,255],toColor:[247,214,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,214,67,255],toColor:[247,216,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,216,70,255],toColor:[246,218,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,218,73,255],toColor:[246,220,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,220,76,255],toColor:[245,222,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,222,80,255],toColor:[245,224,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[245,224,83,255],toColor:[244,226,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,226,86,255],toColor:[244,228,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,228,90,255],toColor:[244,229,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,229,94,255],toColor:[243,231,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,231,97,255],toColor:[243,233,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[243,233,101,255],toColor:[243,235,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,235,105,255],toColor:[242,237,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,237,109,255],toColor:[242,238,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,238,113,255],toColor:[242,240,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,240,117,255],toColor:[242,242,122,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[242,242,122,255],toColor:[243,243,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,243,126,255],toColor:[243,245,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,245,130,255],toColor:[244,246,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,246,134,255],toColor:[244,247,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,247,138,255],toColor:[245,
249,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,249,142,255],toColor:[246,250,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,250,146,255],toColor:[247,251,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,251,150,255],toColor:[249,252,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,252,154,255],toColor:[250,253,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,
253,158,255],toColor:[251,254,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,254,162,255],toColor:[253,255,165,255]}]},{id:"magma_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,0,4,255],toColor:[1,0,5,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,0,5,255],toColor:[1,1,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,6,255],toColor:[1,1,8,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[1,1,8,255],toColor:[2,1,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,1,10,255],toColor:[2,2,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,12,255],toColor:[2,2,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,14,255],toColor:[3,3,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[3,3,16,255],toColor:[4,3,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[4,3,18,255],toColor:[4,4,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,4,20,255],toColor:[5,4,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[5,4,22,255],toColor:[6,5,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,5,24,255],toColor:[6,5,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,5,26,255],toColor:[7,6,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[7,6,28,
255],toColor:[8,7,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[8,7,30,255],toColor:[9,7,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[9,7,32,255],toColor:[10,8,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[10,8,34,255],toColor:[11,9,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,9,36,255],toColor:[12,9,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[12,9,38,255],toColor:[13,
10,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,10,41,255],toColor:[14,11,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[14,11,43,255],toColor:[16,11,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,11,45,255],toColor:[17,12,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[17,12,47,255],toColor:[18,13,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,13,50,255],toColor:[19,
13,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[19,13,52,255],toColor:[20,14,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[20,14,54,255],toColor:[21,14,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,14,57,255],toColor:[23,15,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[23,15,59,255],toColor:[24,15,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,15,61,255],toColor:[25,
16,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,16,64,255],toColor:[26,16,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[26,16,66,255],toColor:[28,16,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[28,16,68,255],toColor:[29,17,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[29,17,71,255],toColor:[30,17,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[30,17,73,255],toColor:[32,
17,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,17,76,255],toColor:[33,17,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,17,78,255],toColor:[35,18,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,18,81,255],toColor:[36,18,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,18,83,255],toColor:[38,18,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,18,86,255],toColor:[39,
18,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,18,88,255],toColor:[41,18,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,18,90,255],toColor:[42,17,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,17,93,255],toColor:[44,17,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,17,95,255],toColor:[46,17,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,17,97,255],toColor:[47,
17,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,17,99,255],toColor:[49,17,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,17,101,255],toColor:[51,16,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,16,103,255],toColor:[52,16,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,16,105,255],toColor:[54,16,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,16,107,255],
toColor:[56,16,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,16,109,255],toColor:[58,15,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,15,111,255],toColor:[59,15,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,15,112,255],toColor:[61,15,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,15,113,255],toColor:[63,15,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,
15,115,255],toColor:[65,15,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,15,116,255],toColor:[66,15,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,15,117,255],toColor:[68,15,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,15,118,255],toColor:[70,16,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,16,119,255],toColor:[71,16,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[71,16,120,255],toColor:[73,16,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,16,121,255],toColor:[75,17,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,17,122,255],toColor:[76,17,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,17,122,255],toColor:[78,17,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,17,123,255],toColor:[79,18,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[79,18,124,255],toColor:[81,18,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[81,18,124,255],toColor:[83,19,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,19,125,255],toColor:[84,19,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,19,125,255],toColor:[86,20,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,20,126,255],toColor:[87,21,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[87,21,126,255],toColor:[89,21,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,21,126,255],toColor:[91,22,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,22,127,255],toColor:[92,22,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,22,127,255],toColor:[94,23,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,23,127,255],toColor:[95,24,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,24,128,255],toColor:[97,24,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,24,128,255],toColor:[98,25,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,25,128,255],toColor:[100,26,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[100,26,128,255],toColor:[101,26,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,26,129,255],toColor:[103,27,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[103,27,129,255],toColor:[105,28,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,28,129,255],toColor:[106,28,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[106,28,129,255],toColor:[108,29,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,29,129,255],toColor:[109,30,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[109,30,129,255],toColor:[111,30,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[111,30,130,255],toColor:[112,31,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,31,130,255],toColor:[114,31,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[114,31,130,255],toColor:[116,32,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,32,130,255],toColor:[117,33,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,33,130,255],toColor:[119,33,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[119,33,130,255],toColor:[120,34,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,34,130,255],toColor:[122,34,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,34,130,255],toColor:[123,35,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,35,130,255],toColor:[125,36,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,36,130,255],toColor:[127,36,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[127,36,130,255],toColor:[128,37,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,37,130,255],toColor:[130,37,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,37,130,255],toColor:[131,38,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[131,38,130,255],toColor:[133,39,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,39,130,255],toColor:[134,39,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[134,39,130,255],toColor:[136,40,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,40,130,255],toColor:[138,40,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,40,130,255],toColor:[139,41,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[139,41,130,255],toColor:[141,41,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,41,129,255],toColor:[142,42,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[142,42,129,255],toColor:[144,42,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,42,129,255],toColor:[146,43,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,43,129,255],toColor:[147,43,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,43,129,255],toColor:[149,44,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[149,44,129,255],toColor:[151,44,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[151,44,129,255],toColor:[152,45,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[152,45,128,255],toColor:[154,46,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,46,128,255],toColor:[155,46,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,46,128,255],toColor:[157,47,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[157,47,128,255],toColor:[159,47,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[159,47,127,255],toColor:[160,48,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,48,127,255],toColor:[162,48,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,48,127,255],toColor:[164,49,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,49,127,255],toColor:[165,49,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,49,126,255],toColor:[167,50,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[167,50,126,255],toColor:[169,50,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,50,126,255],toColor:[170,51,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,51,125,255],toColor:[172,51,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[172,51,125,255],toColor:[174,52,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,52,124,255],toColor:[175,52,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[175,52,124,255],toColor:[177,53,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[177,53,124,255],toColor:[178,53,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[178,53,123,255],toColor:[180,54,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,54,123,255],toColor:[182,54,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,54,122,255],toColor:[183,55,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[183,55,122,255],toColor:[185,56,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,56,121,255],toColor:[187,56,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,56,121,255],toColor:[188,57,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,57,120,255],toColor:[190,57,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,57,120,255],toColor:[192,58,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[192,58,119,255],toColor:[193,59,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,59,118,255],toColor:[195,59,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,59,118,255],toColor:[196,60,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,60,117,255],toColor:[198,60,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,60,117,255],toColor:[200,61,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[200,61,116,255],toColor:[201,62,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,62,115,255],toColor:[203,63,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,63,115,255],toColor:[204,63,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,63,114,255],toColor:[206,64,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,64,113,255],toColor:[208,65,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[208,65,112,255],toColor:[209,66,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,66,112,255],toColor:[211,66,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,66,111,255],toColor:[212,67,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,67,110,255],toColor:[214,68,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,68,109,255],toColor:[215,69,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[215,69,109,255],toColor:[217,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[217,70,108,255],toColor:[218,71,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,71,107,255],toColor:[220,72,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,72,106,255],toColor:[221,73,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,73,106,255],toColor:[222,74,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[222,74,105,255],toColor:[224,75,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,75,104,255],toColor:[225,76,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[225,76,103,255],toColor:[226,77,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,77,102,255],toColor:[228,78,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,78,102,255],toColor:[229,79,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[229,79,101,255],toColor:[230,81,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,81,100,255],toColor:[231,82,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,82,99,255],toColor:[233,83,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,83,99,255],toColor:[234,84,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,84,98,255],toColor:[235,86,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[235,86,97,255],toColor:[236,87,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,87,97,255],toColor:[237,89,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,89,96,255],toColor:[238,90,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,90,95,255],toColor:[239,92,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,92,95,255],toColor:[240,93,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[240,93,94,255],toColor:[241,95,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,95,94,255],toColor:[242,97,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,97,93,255],toColor:[242,98,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,98,93,255],toColor:[243,100,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,100,93,255],toColor:[244,102,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[244,102,93,255],toColor:[245,104,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,104,92,255],toColor:[245,105,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,105,92,255],toColor:[246,107,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,107,92,255],toColor:[247,109,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,109,92,255],toColor:[247,111,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,111,92,255],toColor:[248,113,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,113,92,255],toColor:[248,114,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,114,92,255],toColor:[249,116,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,116,92,255],toColor:[249,118,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,118,93,255],toColor:[250,120,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[250,120,93,255],toColor:[250,122,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,122,93,255],toColor:[250,124,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,124,94,255],toColor:[251,126,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,126,94,255],toColor:[251,128,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,128,95,255],toColor:[251,130,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,130,95,255],toColor:[252,131,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,131,96,255],toColor:[252,133,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,133,96,255],toColor:[252,135,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,135,97,255],toColor:[253,137,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,137,98,255],toColor:[253,139,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,139,99,255],toColor:[253,141,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,141,99,255],toColor:[253,143,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,143,100,255],toColor:[253,145,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,145,101,255],toColor:[254,147,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,147,102,255],toColor:[254,149,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,149,103,255],toColor:[254,150,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,150,104,255],toColor:[254,152,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,152,105,255],toColor:[254,154,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,154,106,255],toColor:[254,156,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,156,107,255],toColor:[255,158,108,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[255,158,108,255],toColor:[255,160,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,160,109,255],toColor:[255,162,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,162,111,255],toColor:[255,164,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,164,112,255],toColor:[255,165,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,165,113,255],toColor:[255,
167,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,167,114,255],toColor:[255,169,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,169,116,255],toColor:[255,171,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,171,117,255],toColor:[255,173,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,173,118,255],toColor:[255,175,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,
175,119,255],toColor:[255,177,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,177,121,255],toColor:[255,179,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,179,122,255],toColor:[255,180,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,180,124,255],toColor:[255,182,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,182,125,255],toColor:[255,184,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,184,126,255],toColor:[255,186,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,186,128,255],toColor:[255,188,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,188,129,255],toColor:[255,190,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,190,131,255],toColor:[255,191,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,191,132,255],toColor:[255,193,134,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[255,193,134,255],toColor:[255,195,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,195,135,255],toColor:[255,197,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,197,137,255],toColor:[255,199,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,199,139,255],toColor:[255,201,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,201,140,255],toColor:[255,
203,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,203,142,255],toColor:[255,204,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,204,143,255],toColor:[255,206,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,206,145,255],toColor:[255,208,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,208,147,255],toColor:[255,210,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,
210,148,255],toColor:[255,212,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,212,150,255],toColor:[255,214,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,214,152,255],toColor:[255,215,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,215,153,255],toColor:[255,217,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,217,155,255],toColor:[254,219,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,219,157,255],toColor:[254,221,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,221,159,255],toColor:[254,223,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,223,160,255],toColor:[254,225,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,225,162,255],toColor:[254,226,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,226,164,255],toColor:[254,228,166,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[254,228,166,255],toColor:[254,230,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,230,167,255],toColor:[254,232,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,232,169,255],toColor:[254,234,171,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,234,171,255],toColor:[254,236,173,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,236,173,255],toColor:[253,
237,175,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,237,175,255],toColor:[253,239,177,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,239,177,255],toColor:[253,241,179,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,241,179,255],toColor:[253,243,180,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,243,180,255],toColor:[253,245,182,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,
245,182,255],toColor:[253,247,184,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,247,184,255],toColor:[253,248,186,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,248,186,255],toColor:[253,250,188,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,250,188,255],toColor:[253,252,190,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,252,190,255],toColor:[253,254,192,255]}]},{id:"orangeBright_predefined",fromColor:[255,
235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,
255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,
191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"plasma_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,8,135,255],toColor:[16,7,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,7,136,255],toColor:[19,7,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[19,7,138,255],toColor:[22,7,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[22,7,139,255],toColor:[25,6,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,6,140,255],toColor:[27,6,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[27,6,141,255],toColor:[29,6,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[29,6,142,255],toColor:[32,6,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[32,6,143,255],toColor:[34,6,144,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,6,144,255],toColor:[36,6,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,6,145,255],toColor:[38,5,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,5,146,255],toColor:[40,5,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,5,147,255],toColor:[42,5,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[42,5,148,255],toColor:[44,5,149,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,5,149,255],toColor:[46,5,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,5,150,255],toColor:[48,5,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,5,150,255],toColor:[50,5,151,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,5,151,255],toColor:[51,5,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[51,5,152,255],toColor:[53,4,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,4,153,255],toColor:[55,4,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,4,153,255],toColor:[57,4,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,4,154,255],toColor:[58,4,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,4,155,255],toColor:[60,4,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[60,4,156,255],toColor:[62,4,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,4,156,255],toColor:[64,4,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,4,157,255],toColor:[65,4,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,4,158,255],toColor:[67,3,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,3,158,255],toColor:[69,3,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[69,3,159,255],toColor:[70,3,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,3,159,255],toColor:[72,3,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,3,160,255],toColor:[73,3,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,3,161,255],toColor:[75,3,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,3,161,255],toColor:[77,2,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[77,2,162,255],toColor:[78,2,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,2,162,255],toColor:[80,2,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,2,163,255],toColor:[82,2,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,2,163,255],toColor:[83,2,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,2,164,255],toColor:[85,2,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[85,2,164,255],toColor:[86,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,1,165,255],toColor:[88,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,1,165,255],toColor:[90,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[90,1,165,255],toColor:[91,1,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,1,166,255],toColor:[93,1,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[93,1,166,255],toColor:[94,1,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,1,167,255],toColor:[96,1,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[96,1,167,255],toColor:[98,0,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,0,167,255],toColor:[99,0,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,0,167,255],toColor:[101,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[101,0,168,255],toColor:[102,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,0,168,255],toColor:[104,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[104,0,168,255],toColor:[105,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,0,168,255],toColor:[107,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,0,169,255],toColor:[108,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[108,0,169,255],toColor:[110,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,0,169,255],toColor:[112,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,0,169,255],toColor:[113,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,0,169,255],toColor:[115,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,1,169,255],toColor:[116,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[116,1,169,255],toColor:[118,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,1,169,255],toColor:[119,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[119,1,169,255],toColor:[121,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[121,1,169,255],toColor:[122,2,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,2,169,255],toColor:[124,2,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[124,2,169,255],toColor:[125,3,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,3,169,255],toColor:[127,3,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,3,168,255],toColor:[128,4,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,4,168,255],toColor:[130,4,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,4,168,255],toColor:[131,5,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[131,5,168,255],toColor:[133,6,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,6,167,255],toColor:[134,6,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,6,167,255],toColor:[136,7,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,7,167,255],toColor:[137,8,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,8,166,255],toColor:[138,9,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[138,9,166,255],toColor:[140,10,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,10,166,255],toColor:[141,11,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,11,165,255],toColor:[143,12,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[143,12,165,255],toColor:[144,13,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,13,164,255],toColor:[145,14,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[145,14,164,255],toColor:[147,15,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,15,163,255],toColor:[148,16,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,16,163,255],toColor:[150,18,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,18,162,255],toColor:[151,19,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,19,161,255],toColor:[152,20,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[152,20,161,255],toColor:[154,21,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,21,160,255],toColor:[155,22,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,22,159,255],toColor:[156,23,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[156,23,159,255],toColor:[158,24,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,24,158,255],toColor:[159,25,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[159,25,157,255],toColor:[160,26,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,26,156,255],toColor:[162,28,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,28,156,255],toColor:[163,29,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,29,155,255],toColor:[164,30,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,30,154,255],toColor:[165,31,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[165,31,153,255],toColor:[167,32,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,32,152,255],toColor:[168,33,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[168,33,152,255],toColor:[169,34,151,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,34,151,255],toColor:[170,35,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,35,150,255],toColor:[171,37,149,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[171,37,149,255],toColor:[173,38,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,38,148,255],toColor:[174,39,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,39,147,255],toColor:[175,40,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[175,40,146,255],toColor:[176,41,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,41,145,255],toColor:[177,42,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[177,42,145,255],toColor:[179,43,144,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,43,144,255],toColor:[180,45,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,45,143,255],toColor:[181,46,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[181,46,142,255],toColor:[182,47,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,47,141,255],toColor:[183,48,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[183,48,140,255],toColor:[184,49,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,49,139,255],toColor:[185,50,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,50,138,255],toColor:[186,51,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[186,51,137,255],toColor:[187,52,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,52,136,255],toColor:[188,54,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[188,54,135,255],toColor:[189,55,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[189,55,134,255],toColor:[191,56,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,56,133,255],toColor:[192,57,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[192,57,132,255],toColor:[193,58,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,58,131,255],toColor:[194,59,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[194,59,130,255],toColor:[195,60,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,60,129,255],toColor:[196,62,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,62,129,255],toColor:[197,63,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[197,63,128,255],toColor:[198,64,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,64,127,255],toColor:[199,65,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[199,65,126,255],toColor:[200,66,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,66,125,255],toColor:[201,67,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,67,124,255],toColor:[202,68,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,68,123,255],toColor:[202,69,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,69,122,255],toColor:[203,71,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[203,71,121,255],toColor:[204,72,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,72,120,255],toColor:[205,73,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,73,119,255],toColor:[206,74,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,74,118,255],toColor:[207,75,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,75,117,255],toColor:[208,76,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[208,76,117,255],toColor:[209,77,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,77,116,255],toColor:[210,79,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[210,79,115,255],toColor:[211,80,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,80,114,255],toColor:[212,81,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,81,113,255],toColor:[212,82,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[212,82,112,255],toColor:[213,83,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[213,83,111,255],toColor:[214,84,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,84,110,255],toColor:[215,85,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[215,85,109,255],toColor:[216,87,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,87,109,255],toColor:[217,88,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[217,88,108,255],toColor:[218,89,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,89,107,255],toColor:[218,90,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,90,106,255],toColor:[219,91,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,91,105,255],toColor:[220,92,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,92,104,255],toColor:[221,93,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[221,93,103,255],toColor:[222,95,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[222,95,102,255],toColor:[223,96,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,96,102,255],toColor:[223,97,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,97,101,255],toColor:[224,98,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,98,100,255],toColor:[225,99,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[225,99,99,255],toColor:[226,100,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,100,98,255],toColor:[226,102,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,102,97,255],toColor:[227,103,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,103,96,255],toColor:[228,104,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,104,96,255],toColor:[229,105,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[229,105,95,255],toColor:[229,106,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,106,94,255],toColor:[230,108,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,108,93,255],toColor:[231,109,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,109,92,255],toColor:[232,110,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,110,91,255],toColor:[232,111,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[232,111,90,255],toColor:[233,112,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,112,90,255],toColor:[234,114,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,114,89,255],toColor:[234,115,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,115,88,255],toColor:[235,116,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,116,87,255],toColor:[236,117,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[236,117,86,255],toColor:[236,119,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,119,85,255],toColor:[237,120,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,120,84,255],toColor:[238,121,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,121,83,255],toColor:[238,122,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,122,83,255],toColor:[239,124,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[239,124,82,255],toColor:[240,125,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,125,81,255],toColor:[240,126,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,126,80,255],toColor:[241,127,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,127,79,255],toColor:[241,129,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,129,78,255],toColor:[242,130,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,130,77,255],toColor:[242,131,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,131,77,255],toColor:[243,133,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,133,76,255],toColor:[244,134,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,134,75,255],toColor:[244,135,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,135,74,255],toColor:[245,136,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[245,136,73,255],toColor:[245,138,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,138,72,255],toColor:[246,139,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,139,71,255],toColor:[246,140,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,140,70,255],toColor:[247,142,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,142,70,255],toColor:[247,143,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,143,69,255],toColor:[248,144,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,144,68,255],toColor:[248,146,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,146,67,255],toColor:[248,147,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,147,66,255],toColor:[249,149,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,149,65,255],toColor:[249,150,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[249,150,64,255],toColor:[250,151,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,151,64,255],toColor:[250,153,63,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,153,63,255],toColor:[250,154,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,154,62,255],toColor:[251,156,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,156,61,255],toColor:[251,157,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,157,60,255],toColor:[251,158,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,158,59,255],toColor:[252,160,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,160,58,255],toColor:[252,161,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,161,58,255],toColor:[252,163,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,163,57,255],toColor:[253,164,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,164,56,255],toColor:[253,166,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,166,55,255],toColor:[253,167,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,167,54,255],toColor:[253,168,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,168,53,255],toColor:[253,170,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,170,52,255],toColor:[254,171,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,171,52,255],toColor:[254,173,51,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,173,51,255],toColor:[254,174,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,174,50,255],toColor:[254,176,49,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,176,49,255],toColor:[254,177,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,177,48,255],toColor:[254,179,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,179,48,255],toColor:[254,180,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,180,47,255],toColor:[254,182,46,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,182,46,255],toColor:[255,183,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,183,45,255],toColor:[255,185,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,185,45,255],toColor:[255,187,44,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,187,44,255],toColor:[255,188,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,188,43,255],toColor:[255,190,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,190,43,255],toColor:[255,191,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,191,42,255],toColor:[255,193,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,193,41,255],toColor:[254,194,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,194,41,255],toColor:[254,196,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,196,40,255],toColor:[254,198,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,198,40,255],toColor:[254,199,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,199,39,255],toColor:[254,201,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,201,39,255],toColor:[254,202,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,202,38,255],toColor:[254,204,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,204,38,255],toColor:[253,206,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,206,38,255],toColor:[253,207,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,207,37,255],toColor:[253,209,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,209,37,255],toColor:[253,211,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,211,37,255],toColor:[252,212,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,212,37,255],toColor:[252,214,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,214,36,255],toColor:[252,216,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,216,36,255],toColor:[251,217,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,217,36,255],toColor:[251,219,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,219,36,255],toColor:[250,221,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,221,37,255],toColor:[250,222,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,222,37,255],toColor:[249,224,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,224,37,255],toColor:[249,226,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,226,37,255],toColor:[248,227,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[248,227,37,255],toColor:[248,229,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,229,38,255],toColor:[247,231,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,231,38,255],toColor:[247,232,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,232,38,255],toColor:[246,234,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,234,39,255],toColor:[246,236,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[246,236,39,255],toColor:[245,238,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,238,39,255],toColor:[244,239,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,239,39,255],toColor:[244,241,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,241,39,255],toColor:[243,243,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,243,39,255],toColor:[242,245,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,245,38,255],toColor:[242,246,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,246,38,255],toColor:[241,248,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,248,36,255],toColor:[241,250,34,255]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,
153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,
14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",
fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,
245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",
type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,
255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,
255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"viridis_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,1,84,255],toColor:[69,2,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,2,86,255],toColor:[69,4,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,4,87,255],toColor:[69,5,89,
255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,5,89,255],toColor:[70,7,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,7,90,255],toColor:[70,8,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,8,92,255],toColor:[70,10,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,10,93,255],toColor:[71,11,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,11,95,255],toColor:[71,13,96,255]},
{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,13,96,255],toColor:[71,14,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,14,98,255],toColor:[71,16,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,16,99,255],toColor:[72,17,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,17,100,255],toColor:[72,19,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,19,102,255],toColor:[72,20,103,
255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,20,103,255],toColor:[72,22,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,22,104,255],toColor:[72,23,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,23,106,255],toColor:[72,24,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,24,107,255],toColor:[72,26,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,26,108,255],toColor:[72,
27,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,27,109,255],toColor:[72,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,28,110,255],toColor:[73,30,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,30,112,255],toColor:[73,31,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,31,113,255],toColor:[72,32,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,32,114,255],
toColor:[72,34,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,34,115,255],toColor:[72,35,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,35,116,255],toColor:[72,36,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,36,117,255],toColor:[72,37,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,37,118,255],toColor:[72,39,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,
39,119,255],toColor:[72,40,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,40,120,255],toColor:[72,41,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,41,121,255],toColor:[72,42,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,42,122,255],toColor:[72,44,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,44,123,255],toColor:[71,45,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[71,45,124,255],toColor:[71,46,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,46,125,255],toColor:[71,47,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,47,125,255],toColor:[71,49,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,49,126,255],toColor:[70,50,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,50,127,255],toColor:[70,51,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[70,51,128,255],toColor:[70,52,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,52,128,255],toColor:[70,54,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,54,129,255],toColor:[69,55,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,55,130,255],toColor:[69,56,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,56,130,255],toColor:[69,57,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[69,57,131,255],toColor:[68,58,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,58,132,255],toColor:[68,60,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,60,132,255],toColor:[68,61,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,61,133,255],toColor:[67,62,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,62,133,255],toColor:[67,63,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[67,63,134,255],toColor:[66,64,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,64,134,255],toColor:[66,66,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,66,135,255],toColor:[65,67,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,67,135,255],toColor:[65,68,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,68,136,255],toColor:[65,69,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,69,136,255],toColor:[64,70,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,70,136,255],toColor:[64,71,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,71,137,255],toColor:[63,73,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,73,137,255],toColor:[63,74,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,74,138,255],toColor:[62,75,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[62,75,138,255],toColor:[62,76,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,76,138,255],toColor:[61,77,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,77,138,255],toColor:[61,78,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,78,139,255],toColor:[60,79,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,79,139,255],toColor:[60,80,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[60,80,139,255],toColor:[59,81,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,81,139,255],toColor:[59,83,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,83,140,255],toColor:[58,84,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,84,140,255],toColor:[58,85,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,85,140,255],toColor:[57,86,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[57,86,140,255],toColor:[57,87,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,87,140,255],toColor:[56,88,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,88,141,255],toColor:[56,89,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,89,141,255],toColor:[55,90,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,90,141,255],toColor:[55,91,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[55,91,141,255],toColor:[54,92,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,92,141,255],toColor:[54,93,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,93,141,255],toColor:[53,94,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,94,141,255],toColor:[53,95,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,95,142,255],toColor:[52,96,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[52,96,142,255],toColor:[52,97,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,97,142,255],toColor:[52,98,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,98,142,255],toColor:[51,99,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,99,142,255],toColor:[51,100,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,100,142,255],toColor:[50,101,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[50,101,142,255],toColor:[50,102,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,102,142,255],toColor:[49,103,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,103,142,255],toColor:[49,104,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,104,142,255],toColor:[48,105,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,105,142,255],toColor:[48,106,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[48,106,142,255],toColor:[48,107,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,107,143,255],toColor:[47,108,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,108,143,255],toColor:[47,109,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,109,143,255],toColor:[46,110,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,110,143,255],toColor:[46,111,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[46,111,143,255],toColor:[45,112,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,112,143,255],toColor:[45,113,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,113,143,255],toColor:[45,114,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,114,143,255],toColor:[44,115,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,115,143,255],toColor:[44,116,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[44,116,143,255],toColor:[43,117,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,117,143,255],toColor:[43,118,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,118,143,255],toColor:[43,119,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,119,143,255],toColor:[42,120,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,120,143,255],toColor:[42,121,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[42,121,143,255],toColor:[42,122,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,122,143,255],toColor:[41,123,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,123,143,255],toColor:[41,123,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,123,143,255],toColor:[40,124,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,124,143,255],toColor:[40,125,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[40,125,143,255],toColor:[40,126,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,126,143,255],toColor:[39,127,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,127,143,255],toColor:[39,128,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,128,143,255],toColor:[39,129,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,129,143,255],toColor:[38,130,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[38,130,143,255],toColor:[38,131,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,131,143,255],toColor:[37,132,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,132,143,255],toColor:[37,133,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,133,142,255],toColor:[37,134,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,134,142,255],toColor:[36,135,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[36,135,142,255],toColor:[36,136,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,136,142,255],toColor:[36,137,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,137,142,255],toColor:[35,138,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,138,142,255],toColor:[35,139,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,139,142,255],toColor:[35,139,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[35,139,142,255],toColor:[34,140,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,140,142,255],toColor:[34,141,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,141,142,255],toColor:[34,142,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,142,141,255],toColor:[33,143,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,143,141,255],toColor:[33,144,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[33,144,141,255],toColor:[33,145,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,145,141,255],toColor:[32,146,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,146,141,255],toColor:[32,147,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,147,141,255],toColor:[32,148,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,148,140,255],toColor:[32,149,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[32,149,140,255],toColor:[31,150,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,150,140,255],toColor:[31,151,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,151,140,255],toColor:[31,152,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,152,139,255],toColor:[31,153,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,153,139,255],toColor:[31,154,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[31,154,139,255],toColor:[31,155,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,155,139,255],toColor:[31,156,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,156,138,255],toColor:[31,156,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,156,138,255],toColor:[31,157,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,157,138,255],toColor:[31,158,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[31,158,137,255],toColor:[31,159,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,159,137,255],toColor:[31,160,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,160,137,255],toColor:[31,161,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,161,136,255],toColor:[31,162,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,162,136,255],toColor:[32,163,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[32,163,135,255],toColor:[32,164,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,164,135,255],toColor:[32,165,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,165,134,255],toColor:[33,166,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,166,134,255],toColor:[33,167,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,167,134,255],toColor:[34,168,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[34,168,133,255],toColor:[34,169,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,169,133,255],toColor:[35,170,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,170,132,255],toColor:[36,170,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,170,131,255],toColor:[37,171,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,171,131,255],toColor:[38,172,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[38,172,130,255],toColor:[38,173,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,173,130,255],toColor:[39,174,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,174,129,255],toColor:[40,175,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,175,128,255],toColor:[41,176,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,176,128,255],toColor:[43,177,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[43,177,127,255],toColor:[44,178,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,178,126,255],toColor:[45,179,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,179,126,255],toColor:[46,180,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,180,125,255],toColor:[48,180,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,180,124,255],toColor:[49,181,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[49,181,123,255],toColor:[50,182,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,182,123,255],toColor:[52,183,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,183,122,255],toColor:[53,184,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,184,121,255],toColor:[55,185,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,185,120,255],toColor:[56,186,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[56,186,119,255],toColor:[58,187,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,187,118,255],toColor:[60,187,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,187,118,255],toColor:[61,188,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,188,117,255],toColor:[63,189,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,189,116,255],toColor:[65,190,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,190,115,255],toColor:[67,191,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,191,114,255],toColor:[68,192,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,192,113,255],toColor:[70,193,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,193,112,255],toColor:[72,193,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,193,111,255],toColor:[74,194,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[74,194,110,255],toColor:[76,195,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,195,109,255],toColor:[78,196,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,196,108,255],toColor:[80,197,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,197,106,255],toColor:[82,197,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,197,105,255],toColor:[84,198,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[84,198,104,255],toColor:[86,199,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,199,103,255],toColor:[88,200,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,200,102,255],toColor:[90,200,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[90,200,101,255],toColor:[92,201,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,201,99,255],toColor:[95,202,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,202,98,255],toColor:[97,203,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,203,97,255],toColor:[99,203,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,203,95,255],toColor:[101,204,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,204,94,255],toColor:[103,205,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[103,205,93,255],toColor:[106,206,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[106,206,91,255],toColor:[108,206,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,206,90,255],toColor:[110,207,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,207,89,255],toColor:[113,208,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,208,87,255],toColor:[115,208,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,208,86,255],toColor:[117,209,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[117,209,84,255],toColor:[120,210,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,210,83,255],toColor:[122,210,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,210,81,255],toColor:[125,211,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,211,80,255],toColor:[127,212,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,212,78,255],toColor:[130,212,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[130,212,77,255],toColor:[132,213,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,213,75,255],toColor:[135,213,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[135,213,74,255],toColor:[137,214,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,214,72,255],toColor:[140,215,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,215,71,255],toColor:[142,215,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[142,215,69,255],toColor:[145,216,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,216,67,255],toColor:[147,216,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,216,66,255],toColor:[150,217,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,217,64,255],toColor:[153,217,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[153,217,62,255],toColor:[155,218,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[155,218,61,255],toColor:[158,218,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,218,59,255],toColor:[160,219,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,219,57,255],toColor:[163,219,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,219,55,255],toColor:[166,220,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[166,220,54,255],toColor:[168,220,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[168,220,52,255],toColor:[171,221,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[171,221,50,255],toColor:[174,221,49,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,221,49,255],toColor:[176,222,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,222,47,255],toColor:[179,222,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,222,45,255],toColor:[182,222,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[182,222,43,255],toColor:[184,223,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,223,42,255],toColor:[187,223,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,223,40,255],toColor:[190,224,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,224,38,255],toColor:[192,224,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[192,224,37,255],toColor:[195,224,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[195,224,35,255],toColor:[198,225,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,225,34,255],toColor:[201,225,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,225,32,255],toColor:[203,225,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,225,31,255],toColor:[206,226,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,226,29,255],toColor:[209,226,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[209,226,28,255],toColor:[211,226,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,226,27,255],toColor:[214,227,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,227,26,255],toColor:[216,227,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,227,26,255],toColor:[219,227,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,227,25,255],toColor:[222,228,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[222,228,25,255],toColor:[224,228,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,228,24,255],toColor:[227,228,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,228,24,255],toColor:[229,229,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,229,25,255],toColor:[232,229,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,229,25,255],toColor:[235,229,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[235,229,26,255],toColor:[237,230,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,230,27,255],toColor:[240,230,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,230,28,255],toColor:[242,230,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,230,29,255],toColor:[245,231,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,231,30,255],toColor:[247,231,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,231,32,255],toColor:[249,231,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,231,33,255],toColor:[252,232,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,232,35,255],toColor:[254,232,37,255]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",
type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],m=[{name:"Aspect",id:"aspect_predefined"},{name:"Black to White",id:"blackToWhite_predefined"},{name:"Blue Bright",
id:"blueBright_predefined"},{name:"Blue Light to Dark",id:"blueLightToDark_predefined"},{name:"Blue-Green Bright",id:"blueGreenBright_predefined"},{name:"Blue-Green Light to Dark",id:"blueGreenLightToDark_predefined"},{name:"Brown Light to Dark",id:"brownLightToDark_predefined"},{name:"Brown to Blue Green Diverging, Bright",id:"brownToBlueGreenDivergingBright_predefined"},{name:"Brown to Blue Green Diverging, Dark",id:"brownToBlueGreenDivergingDark_predefined"},{name:"Cividis",id:"cividis_predefined"},
{name:"Coefficient Bias",id:"coefficientBias_predefined"},{name:"Cold to Hot Diverging",id:"coldToHotDiverging_predefined"},{name:"Condition Number",id:"conditionNumber_predefined"},{name:"Cyan to Purple",id:"cyanToPurple_predefined"},{name:"Cyan-Light to Blue-Dark",id:"cyanLightToBlueDark_predefined"},{name:"Distance",id:"distance_predefined"},{id:"elevation1_predefined",name:"Elevation #1"},{id:"elevation2_predefined",name:"Elevation #2"},{id:"errors_predefined",name:"Errors"},{id:"grayLightToDark_predefined",
name:"Gray Light to Dark"},{id:"greenBright_predefined",name:"Green Bright"},{id:"greenLightToDark_predefined",name:"Green Light to Dark"},{name:"Green to Blue",id:"greenToBlue_predefined"},{name:"Inferno",id:"inferno_predefined"},{name:"Magma",id:"magma_predefined"},{name:"Orange Bright",id:"orangeBright_predefined"},{name:"Orange Light to Dark",id:"orangeLightToDark_predefined"},{id:"partialSpectrum_predefined",name:"Partial Spectrum"},{id:"partialSpectrum1Diverging_predefined",name:"Partial Spectrum 1 Diverging",
type:"multipart"},{id:"partialSpectrum2Diverging_predefined",name:"Partial Spectrum 2 Diverging"},{name:"Plasma",id:"plasma_predefined"},{name:"Pink to YellowGreen Diverging, Bright",id:"pinkToYellowGreenDivergingBright_predefined"},{name:"Pink to YellowGreen Diverging, Dark",id:"pinkToYellowGreenDivergingDark_predefined"},{id:"precipitation_predefined",name:"Precipitation"},{id:"prediction_predefined",name:"Prediction"},{name:"Purple Bright",id:"purpleBright_predefined"},{id:"purpleToGreenDivergingBright_predefined",
name:"Purple to Green Diverging, Bright"},{id:"purpleToGreenDivergingDark_predefined",name:"Purple to Green Diverging, Dark"},{name:"Purple-Blue Bright",id:"purpleBlueBright_predefined"},{name:"Purple-Blue Light to Dark",id:"purpleBlueLightToDark_predefined"},{name:"Purple-Red Bright",id:"purpleRedBright_predefined"},{name:"Purple-Red Light to Dark",id:"purpleRedLightToDark_predefined"},{name:"Red Bright",id:"redBright_predefined"},{name:"Red Light to Dark",id:"redLightToDark_predefined"},{id:"redToBlueDivergingBright_predefined",
name:"Red to Blue Diverging, Bright"},{id:"redToBlueDivergingDark_predefined",name:"Red to Blue Diverging, Dark"},{id:"redToGreen_predefined",name:"Red to Green"},{id:"redToGreenDivergingBright_predefined",name:"Red to Green Diverging, Bright"},{id:"redToGreenDivergingDark_predefined",name:"Red to Green Diverging, Dark"},{name:"Slope",id:"slope_predefined"},{id:"spectrumFullBright_predefined",name:"Spectrum-Full Bright"},{id:"spectrumFullDark_predefined",name:"Spectrum-Full Dark"},{id:"spectrumFullLight_predefined",
name:"Spectrum-Full Light"},{id:"surface_predefined",name:"Surface"},{id:"temperature_predefined",name:"Temperature"},{name:"Viridis",id:"viridis_predefined"},{name:"White to Black",id:"whiteToBlack_predefined"},{id:"yellowToDarkRed_predefined",name:"Yellow to Dark Red"},{id:"yellowToGreenToDarkBlue_predefined",name:"Yellow to Green to Dark Blue"},{name:"Yellow to Red",id:"yellowToRed_predefined"},{name:"Yellow-Green Bright",id:"yellowGreenBright_predefined"},{name:"Yellow-Green Light to Dark",id:"yellowGreenLightToDark_predefined"}],
v=new t({data:m});g.mixin(p,{predefinedColorRamps:r,predefinedColorRampNameMap:m,getColorRampName:function(z){z=n(z);return z.id?(z=v.query({id:z.id}),z[0]?z[0].name:null):null},fromJson:function(z){var A=null;if(!z)return A;"multipart"===z.type?(A=new l,A.colorRamps=e.map(z.colorRamps,function(D){return h(D)},this)):"algorithmic"===z.type&&(A=h(z));return A},colorsEqual:c,getColorRampId:n,invertColorRamp:d,convertColorRampToColormap:function(z,A){if(z&&A){var D=z.colorRamps?z.colorRamps.length:1,
E=[],F=[],y,x,w,C,B=0,I=0;for(B=0;B<D;B++)E[B]={},E[B].start=I,E[B].end=I+1/D,I=E[B].end;for(B=0;B<A;B++){var N=(B+.5)/A;e.forEach(E,function(V,Y){N>=V.start&&N<V.end&&(C=(N-V.start)/(V.end-V.start),1<E.length?(y=k.getDojoColor(z.colorRamps[Y].fromColor),x=k.getDojoColor(z.colorRamps[Y].toColor)):(y=k.getDojoColor(z.fromColor),x=k.getDojoColor(z.toColor)),w=f(y,x,C),F.push([B,w.r,w.g,w.b]))},this)}return F}},interpolateLabColor:f});return p})},"esri/tasks/AlgorithmicColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../Color ./ColorRamp".split(" "),
function(g,e,t,u,l,q){g=g(q,{declaredClass:"esri.tasks.AlgorithmicColorRamp",type:"algorithmic",fromColor:null,toColor:null,algorithm:null,toJson:function(){switch(this.algorithm&&this.algorithm.toLowerCase()){case "cie-lab":var k="esriCIELabAlgorithm";break;case "hsv":k="esriHSVAlgorithm";break;case "lab-lch":k="esriLabLChAlgorithm"}k={type:"algorithmic",algorithm:k};k.fromColor=l.toJsonColor(this.fromColor);k.toColor=l.toJsonColor(this.toColor);return k}});e.setObject("tasks.AlgorithmicColorRamp",
g,u);return g})},"esri/tasks/ColorRamp":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(g,e,t,u){g=g(null,{declaredClass:"esri.tasks.ColorRamp",type:null});e.setObject("tasks.ColorRamp",g,u);return g})},"esri/tasks/MultipartColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../symbols/Symbol ./ColorRamp".split(" "),function(g,e,t,u,l,q){g=g(q,{declaredClass:"esri.tasks.MultipartColorRamp",type:"multipart",
constructor:function(){this.colorRamps=[]},addColorRamp:function(k){this.colorRamps.push(k)},toJson:function(){return{type:"multipart",colorRamps:t.map(this.colorRamps,function(k){return k.toJson()})}}});e.setObject("tasks.MultipartColorRamp",g,l);return g})},"esri/renderers/colorUtils":function(){define(["dojo/_base/Color","dojo/_base/array"],function(g,e){var t={COEF_RGB2XYZ:[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],COEF_XYZ2RGB:[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],
[.0557,-.204,1.057]],matrixProduct:function(l,q){var k=[],a,d;if(l[0].length!==q.length)throw"dimensions do not match";var n=l.length,b=l[0].length,h=0;for(a=0;a<n;a++){for(d=h=0;d<b;d++)h+=l[a][d]*q[d];k.push(h)}return k},rgb2xyz:function(l){l=[l.r/255,l.g/255,l.b/255].map(function(q){return.04045>=q?q/12.92:Math.pow((q+.055)/1.055,2.4)});l=this.matrixProduct(this.COEF_RGB2XYZ,l);return{x:100*l[0],y:100*l[1],z:100*l[2]}},xyz2rgb:function(l){l=this.matrixProduct(this.COEF_XYZ2RGB,[l.x/100,l.y/100,
l.z/100]).map(function(q){return Math.min(1,Math.max(.0031308>=q?12.92*q:1.055*Math.pow(q,1/2.4)-.055,0))});return{r:Math.round(255*l[0]),g:Math.round(255*l[1]),b:Math.round(255*l[2])}},xyz2lab:function(l){l=[l.x/95.047,l.y/100,l.z/108.883].map(function(q){return q>Math.pow(6/29,3)?Math.pow(q,1/3):1/3*Math.pow(29/6,2)*q+4/29});return{l:116*l[1]-16,a:500*(l[0]-l[1]),b:200*(l[1]-l[2])}},lab2xyz:function(l){var q=l.l;l=[(q+16)/116+l.a/500,(q+16)/116,(q+16)/116-l.b/200].map(function(k){return k>6/29?
Math.pow(k,3):3*Math.pow(6/29,2)*(k-4/29)});return{x:95.047*l[0],y:100*l[1],z:108.883*l[2]}},lab2lch:function(l){var q=l.l,k=l.a,a=l.b;l=Math.sqrt(k*k+a*a);k=Math.atan2(a,k);k=0<k?k:k+2*Math.PI;return{l:q,c:l,h:k}},lch2lab:function(l){var q=l.c,k=l.h;return{l:l.l,a:q*Math.cos(k),b:q*Math.sin(k)}},rgb2lab:function(l){return this.xyz2lab(this.rgb2xyz(l))},lab2rgb:function(l){return this.xyz2rgb(this.lab2xyz(l))},rgb2lch:function(l){return this.lab2lch(this.xyz2lab(this.rgb2xyz(l)))},lch2rgb:function(l){return this.xyz2rgb(this.lab2xyz(this.lch2lab(l)))}},
u={rgb2hsv:function(l){var q=l.r,k=l.g;l=l.b;var a=Math.max(q,k,l),d=a-Math.min(q,k,l),n;0===d?n=0:a===q?n=(k-l)/d%6:a===k?n=(l-q)/d+2:a===l&&(n=(q-k)/d+4);0>n&&(n+=6);return{h:60*n,s:100*(0===d?0:d/a),v:100/255*a}},hsv2rgb:function(l){var q=(l.h+360)%360/60,k=l.v/100*255;l=l.s/100*k;var a=l*(1-Math.abs(q%2-1));switch(Math.floor(q)){case 0:q={r:l,g:a,b:0};break;case 1:q={r:a,g:l,b:0};break;case 2:q={r:0,g:l,b:a};break;case 3:q={r:0,g:a,b:l};break;case 4:q={r:a,g:0,b:l};break;case 5:case 6:q={r:l,
g:0,b:a};break;default:q={r:0,g:0,b:0}}q.r=Math.round(q.r+k-l);q.g=Math.round(q.g+k-l);q.b=Math.round(q.b+k-l);return q}};return{toRGB:function(l){var q;void 0!==l.r&&void 0!==l.g&&void 0!==l.b?q=l:void 0!==l.l&&void 0!==l.c&&void 0!==l.h?q=t.lch2rgb(l):void 0!==l.l&&void 0!==l.a&&void 0!==l.b?q=t.lab2rgb(l):void 0!==l.x&&void 0!==l.y&&void 0!==l.z?q=t.xyz2rgb(l):void 0!==l.h&&void 0!==l.s&&void 0!==l.v&&(q=u.hsv2rgb(l));return q},toHSV:function(l){if(void 0!==l.h&&void 0!==l.s&&void 0!==l.v)return l;
l=this.toRGB(l);return u.rgb2hsv(l)},toLAB:function(l){return void 0!==l.l&&void 0!==l.a&&void 0!==l.b?l:t.rgb2lab(this.toRGB(l))},toLCH:function(l){return void 0!==l.l&&void 0!==l.c&&void 0!==l.h?l:t.rgb2lch(this.toRGB(l))},toXYZ:function(l){return void 0!==l.x&&void 0!==l.y&&void 0!==l.z?l:t.rgb2xyz(this.toRGB(l))},getDojoColor:function(l){if(l){if(Array.isArray(l))return g.fromArray(l);if(void 0!==l.r&&void 0!==l.g&&void 0!==l.b)return l}},correctRGBLimits:function(l){var q=[l.r,l.g,l.b];e.forEach(q,
function(k,a){0>q[a]?q[a]=0:255<q[a]&&(q[a]=255);q[a]=Math.floor(q[a])});return{r:q[0],g:q[1],b:q[2],a:1}}}})},"esri/renderers/UniqueValueRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),function(g,e,t,u,l,q,k,a,d){g=g(a,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(n,b,h,c,f,p){this.values=[];this._symbols={};this.infos=[];n&&!n.declaredClass?
(b=n,h=p&&p.geometryType,this.defaultSymbol=(n=b.defaultSymbol)&&(n.declaredClass?n:k.fromJson(n,p)),this.attributeField=b.field1,this.attributeField2=b.field2,this.attributeField3=b.field3,this.fieldDelimiter=b.fieldDelimiter,this.defaultLabel=b.defaultLabel,this.setValueExpression(b.valueExpression),this.valueExpressionTitle=b.valueExpressionTitle,this.legendOptions=b.legendOptions,b.backgroundFillSymbol&&(this.backgroundFillSymbol=k.fromJson(b.backgroundFillSymbol,h?{geometryType:"esriGeometryPolygon"}:
null)),"esriGeometryPolygon"===h&&this.hasVisualVariables("sizeInfo",!1)&&(p={geometryType:"esriGeometryPoint"}),e.forEach(b.uniqueValueInfos,function(r){this._addValueInfo(r,p)},this)):(this.defaultSymbol=n,this.attributeField=b,this.attributeField2=h,this.attributeField3=c,this.fieldDelimiter=f);this._multiple=!!this.attributeField2},addValue:function(n,b){n=t.isObject(n)?n:{value:n,symbol:b};this._addValueInfo(n)},removeValue:function(n){var b=e.indexOf(this.values,n);-1!==b&&(this.values.splice(b,
1),this._hasNullKeyword=this._evalNullKeyword(this.values),delete this._symbols[n],this.infos.splice(b,1))},getUniqueValueInfo:function(n){var b=this.attributeField,h=n.attributes;if(this.valueExpression)b=this._getDataValue(n,this._uvInfo,null,this._cache.uvInfo),b=this._normalizeNullValue(b);else if(this._multiple){n=this.attributeField2;var c=this.attributeField3,f=[];b&&f.push(this._normalizeNullValue(h[b]));n&&f.push(this._normalizeNullValue(h[n]));c&&f.push(this._normalizeNullValue(h[c]));b=
f.join(this.fieldDelimiter||"")}else b=t.isFunction(b)?b(n):h[b],b=this._normalizeNullValue(b);return this._symbols[b]},setValueExpression:function(n){this.valueExpression=n;this._uvInfo={valueExpression:n};this._cache.uvInfo=this._createCache(this._uvInfo,!0)},getFieldsUsedInExpressions:function(n){var b=this.inherited(arguments);this.valueExpression&&(b=b.concat(d.extractFieldNames(this.valueExpression,n)));b.sort();return e.filter(b,function(h,c){return 0===c||b[c-1]!==h})},getSymbol:function(n){return(n=
this.getUniqueValueInfo(n))&&n.symbol||this.defaultSymbol},_addValueInfo:function(n,b){var h=n.value;this.values.push(h);this._hasNullKeyword=this._evalNullKeyword(this.values);this.infos.push(n);var c=n.symbol;c&&!c.declaredClass&&(n.symbol=k.fromJson(c,b));this._symbols[h]=n},_nullCode:"\x3cNull\x3e",_normalizeNullValue:function(n){return this._hasNullKeyword&&null==n?this._nullCode:n},_evalNullKeyword:function(n){var b=this.fieldDelimiter||"",h=new RegExp("(^|"+b+")("+this._nullCode+")("+b+"|$)");
return e.some(n,function(c){return h.test(c)})},toJson:function(){var n=q.fixJson;var b={type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:t.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:e.map(this.infos||[],function(h){h=t.mixin({},
h);h.symbol=h.symbol&&h.symbol.toJson();h.value+="";return n(h)})};this.backgroundFillSymbol&&(b.backgroundFillSymbol=this.backgroundFillSymbol.toJson());b=t.mixin(this.inherited(arguments),b);return n(b)}});t.setObject("renderer.UniqueValueRenderer",g,l);return g})},"esri/renderers/ColormapRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ./arcadeUtils".split(" "),function(g,e,t,u,l,q,k,a,d){g=g(a,{declaredClass:"esri.renderer.ColormapRenderer",
constructor:function(n){this.colormapInfos=n&&n.colormapInfos},toJson:function(){var n=q.fixJson;var b={type:"rasterColormap",colormapInfos:e.map(this.colormapInfos||[],function(h,c){var f={};h.color&&null!==h.color&&3<=h.color.length&&(f.color=h.color,f.value=h.value||c,f.label=(h.label||c)+"");return n(f)})};b=t.mixin(this.inherited(arguments),b);return n(b)}});t.setObject("renderer.ColormapRenderer",g,l);return g})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel",
"../support/expressionUtils"],function(g,e,t,u){g.setObject("renderer.arcadeUtils",u,t);return u})},"esri/renderers/ShadedReliefRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),function(g,e,t,u,l,q,k,a){g=g(null,{declaredClass:"esri.renderer.ShadedReliefRenderer",constructor:function(d){d=d||{};this.hillshadeType=d.hillshadeType||"traditional";this.azimuth=null!=d.azimuth?d.azimuth:315;
this.altitude=null!=d.altitude?d.altitude:45;this.zFactor=d.zFactor||1;this.scalingType=d.scalingType||"none";this.pixelSizePower=null!=d.pixelSizePower?d.pixelSizePower:.664;this.pixelSizeFactor=null!=d.pixelSizeFactor?d.pixelSizeFactor:.024;this.removeEdgeEffect=d.removeEdgeEffect||!1;this.colorRamp=a.fromJson(d.colorRamp)},toJson:function(){var d={type:"rasterShadedRelief",hillshadeType:this.hillshadeType,azimuth:this.azimuth,altitude:this.altitude,zFactor:this.zFactor,scalingType:this.scalingType,
pixelSizePower:this.pixelSizePower,pixelSizeFactor:this.pixelSizeFactor,colorRamp:this.colorRamp&&this.colorRamp.toJson()};return q.fixJson(d)},toRenderingRule:function(d){}});t.setObject("renderer.ShadedReliefRenderer",g,l);return g})},"esri/layers/TimeInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../TimeExtent ./TimeReference ./LayerTimeOptions".split(" "),function(g,e,t,u,l,q,k){g=g(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(a){null!==a&&(e.mixin(this,
a),a.exportOptions&&(this.exportOptions=new k(a.exportOptions)),this.timeExtent=null,a.timeExtent&&2===a.timeExtent.length&&(this.timeExtent=new l(a.timeExtent)),this.timeReference=new q(a.timeReference))}});e.mixin(g,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",
UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",UNIT_YEARS:"esriTimeUnitsYears"});e.setObject("layers.TimeInfo",g,u);return g})},"esri/TimeExtent":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel"],function(g,e,t,u){var l=g(null,{declaredClass:"esri.TimeExtent",constructor:function(q){if(1<arguments.length)this._create(arguments[0],arguments[1]);else if(q)if(e.isArray(q)){var k=q[0],a=q[1];this.startTime=null===k||"null"===k?null:new Date(k);this.endTime=
null===a||"null"===a?null:new Date(a)}else q instanceof Date&&this._create(q,null)},offset:function(q,k){var a=new l,d=this.startTime,n=this.endTime;d&&(a.startTime=this._getOffsettedDate(d,q,k));n&&(a.endTime=this._getOffsettedDate(n,q,k));return a},intersection:function(q){return this._intersection(this,q)},toJson:function(){var q=[],k=this.startTime;q.push(k?k.getTime():"null");k=this.endTime;q.push(k?k.getTime():"null");return q},_create:function(q,k){this.startTime=q?new Date(q.getTime()):null;
this.endTime=k?new Date(k.getTime()):null},_refData:{esriTimeUnitsMilliseconds:{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},esriTimeUnitsSeconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},esriTimeUnitsMinutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},esriTimeUnitsHours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},esriTimeUnitsDays:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},esriTimeUnitsWeeks:{getter:"getUTCDate",
setter:"setUTCDate",multiplier:7},esriTimeUnitsMonths:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},esriTimeUnitsYears:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},esriTimeUnitsDecades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},esriTimeUnitsCenturies:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(q,k){if(q&&k){var a=q.startTime;q=q.endTime;var d=k.startTime;k=k.endTime;a=a?a.getTime():-Infinity;d=d?d.getTime():
-Infinity;q=q?q.getTime():Infinity;k=k?k.getTime():Infinity;var n,b;d>=a&&d<=q?n=d:a>=d&&a<=k&&(n=a);q>=d&&q<=k?b=q:k>=a&&k<=q&&(b=k);if(isNaN(n)||isNaN(b))return null;a=new l;a.startTime=-Infinity===n?null:new Date(n);a.endTime=Infinity===b?null:new Date(b);return a}return null},_getOffsettedDate:function(q,k,a){var d=this._refData;q=new Date(q.getTime());k&&a&&(d=d[a],q[d.setter](q[d.getter]()+k*d.multiplier));return q}});return u.TimeExtent=l})},"esri/layers/TimeReference":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(g,e,t,u){g=g(null,{declaredClass:"esri.layers.TimeReference",constructor:function(l){l&&e.mixin(this,l)}});e.setObject("layers.TimeReference",g,u);return g})},"esri/layers/LayerTimeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(g,e,t,u,l){g=g(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(q){q&&e.mixin(this,q)},toJson:function(){return l.fixJson({timeDataCumulative:this.timeDataCumulative,
timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime})}});e.setObject("layers.LayerTimeOptions",g,u);return g})},"esri/layers/MosaicRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../geometry/Point ./RasterFunction".split(" "),function(g,e,t,u,l,q,k){var a=g(null,{declaredClass:"esri.layers.MosaicRule",method:null,where:null,sortField:null,sortValue:null,ascending:!1,lockRasterIds:null,viewpoint:null,objectIds:null,operation:null,
multidimensionalDefinition:[],itemRenderingRule:null,constructor:function(d){e.isObject(d)&&(e.mixin(this,d),d.mosaicMethod&&(this.method=d.mosaicMethod),this.method&&"esri"!==this.method.toLowerCase().substring(0,4)&&(this.method=this._getMethodEnum(this.method)),d.mosaicOperation&&(this.operation=d.mosaicOperation),this.operation&&"MT_"!==this.operation.toUpperCase().substring(0,3)&&(this.operation=this._getOperatorEnum(this.operation)),d.fids&&(this.objectIds=d.fids),d.viewpoint&&(this.viewpoint=
new q(d.viewpoint)),d.itemRenderingRule&&(this.itemRenderingRule=new k(d.itemRenderingRule)),this.multidimensionalDefinition=d.multidimensionalDefinition||[])},toJson:function(){var d=null,n=this.multidimensionalDefinition?this.multidimensionalDefinition.length:0;if(n){d=[];for(var b=0;b<n;b++)d.push("esri.layers.DimensionalDefinition"===this.multidimensionalDefinition[b].declaredClass?this.multidimensionalDefinition[b].toJson():this.multidimensionalDefinition[b])}d={mosaicMethod:this.method,where:this.where,
sortField:this.sortField,sortValue:this.sortValue,ascending:this.ascending,lockRasterIds:e.clone(this.lockRasterIds),viewpoint:this.viewpoint?this.viewpoint.toJson():null,fids:e.clone(this.objectIds),mosaicOperation:this.operation,multidimensionalDefinition:d,itemRenderingRule:this.itemRenderingRule?this.itemRenderingRule.toJson():null};return l.filter(d,function(h){if(null!==h)return!0})},_getMethodEnum:function(d){if(d){var n=a.METHOD_NONE;switch(d.toLowerCase()){case "byattribute":n=a.METHOD_ATTRIBUTE;
break;case "center":n=a.METHOD_CENTER;break;case "lockraster":n=a.METHOD_LOCKRASTER;break;case "nadir":n=a.METHOD_NADIR;break;case "northwest":n=a.METHOD_NORTHWEST;break;case "seamline":n=a.METHOD_SEAMLINE;break;case "viewpoint":n=a.METHOD_VIEWPOINT}return n}},_getOperatorEnum:function(d){if(d)switch(d.toLowerCase()){case "first":return a.OPERATION_FIRST;case "last":return a.OPERATION_LAST;case "max":return a.OPERATION_MAX;case "min":return a.OPERATION_MIN;case "blend":return a.OPERATION_BLEND;case "mean":return a.OPERATION_MEAN;
case "sum":return a.OPERATION_SUM}}});e.mixin(a,{METHOD_NONE:"esriMosaicNone",METHOD_CENTER:"esriMosaicCenter",METHOD_NADIR:"esriMosaicNadir",METHOD_VIEWPOINT:"esriMosaicViewpoint",METHOD_ATTRIBUTE:"esriMosaicAttribute",METHOD_LOCKRASTER:"esriMosaicLockRaster",METHOD_NORTHWEST:"esriMosaicNorthwest",METHOD_SEAMLINE:"esriMosaicSeamline",OPERATION_FIRST:"MT_FIRST",OPERATION_LAST:"MT_LAST",OPERATION_MIN:"MT_MIN",OPERATION_MAX:"MT_MAX",OPERATION_MEAN:"MT_MEAN",OPERATION_BLEND:"MT_BLEND",OPERATION_SUM:"MT_SUM"});
e.setObject("layers.MosaicRule",a,u);return a})},"esri/layers/DimensionalDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(g,e,t,u,l){g=g(null,{declaredClass:"esri.layers.DimensionalDefinition",variableName:null,dimensionName:null,values:[],isSlice:!1,constructor:function(q){e.isObject(q)&&e.mixin(this,q)},toJson:function(){var q={variableName:this.variableName,dimensionName:this.dimensionName,values:e.clone(this.values),isSlice:this.isSlice};
return l.filter(q,function(k){return null!==k})}});e.setObject("layers.DimensionalDefinition",g,u);return g})},"esri/layers/PixelBlock":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(g,e,t,u){g=g([],{declaredClass:"esri.layers.PixelBlock",planes:null,width:null,height:null,pixelType:null,pixels:[],statistics:[],maskIsAlpha:!1,validPixelCount:null,constructor:function(l){if(l){if(!l.width||Math.floor(l.width)!==l.width)throw"PixelBlock: incorrect width";
if(!l.height||Math.floor(l.height)!==l.height)throw"PixelBlock: incorrect height";if(!l.pixels)throw"PixelBlock: pixel data not present";this.width=l.width;this.height=l.height;this.pixels=l.pixels;this.pixelType=l.pixelType||null;this.statistics=l.statistics;this.mask=l.mask||null;this.maskIsAlpha=l.maskIsAlpha||!1;l=l.validPixelCount;null==l&&(l=this.mask?this._getValidPixelCount(this.mask):this.width*this.height);this.validPixelCount=l}},getPlaneCount:function(){return this.pixels.length!==this.statistics.length?
0:this.statistics.length},addData:function(l){if(!l.pixels||!l.statistics)throw"Pixel data or statistics are not present";if(l.pixels.length!==this.width*this.height)throw"Inconsistent pixel data size";this.statistics.push(l.statistics);this.pixels.push(l.pixels)},getAsRGBA:function(){var l=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "S8":case "S16":case "U16":case "S32":case "U32":case "F32":case "F64":this._fillFromNon8Bit(l);break;default:this._fillFrom8Bit(l)}return new Uint8ClampedArray(l)},
getAsRGBAFloat:function(){var l=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(l);return l},clone:function(l){l=l||this;var q=new this.constructor;q.width=l.width;q.height=l.height;q.pixelType=l.pixelType;q.maskIsAlpha=l.maskIsAlpha;l.mask&&(q.mask=new Uint8Array(l.mask));var k,a;if(l.pixels){q.pixels=[];var d=(a=l.pixels.length)&&l.pixels[0].slice;for(k=0;k<a;k++)q.pixels[k]=d?l.pixels[k].slice(0,l.pixels[k].length):new l.pixels[k].constructor(l.pixels[k])}if(l.statistics)for(q.statistics=
[],a=l.statistics.length,k=0;k<a;k++)q.statistics[k]=e.clone(l.statistics[k]);l=l.validPixelCount;null==l&&(l=q.mask?this._getValidPixelCount(q.mask):q.width*q.height);return q},clamp:function(l){if("F64"!==l&&"F32"!==l){switch(l){case "U8":var q=[0,255];break;case "U16":q=[0,65535];break;case "U32":q=[0,4294967295];break;case "S8":q=[-128,127];break;case "S16":q=[-32768,32767];break;case "S32":q=[-2147483648,2147483647];break;default:q=[-3.4*1E39,3.4*1E39]}var k=q[0];q=q[1];var a=this.pixels,d=this.width*
this.height,n=a.length,b,h,c=[];for(b=0;b<n;b++){var f=this._createEmptyBand(l,d);var p=a[b];for(h=0;h<d;h++){var r=p[h];f[h]=r>q?q:r<k?k:r}c.push(f)}this.pixels=c;this.pixelType=l}},calculateStatistics:function(){var l,q=[],k=this.mask;for(l=0;l<this.pixels.length;l++){var a=this.pixels[l];q.push(this._calculateBandStatistics(a,k))}this.statistics=q},_getValidPixelCount:function(l){var q,k=0;for(q=0;q<l.length;q++)l[q]&&k++;return k},_createEmptyBand:function(l,q){switch(l){case "U8":l=new Uint8Array(q);
break;case "U16":l=new Uint16Array(q);break;case "U32":l=new Uint32Array(q);break;case "S8":l=new Int8Array(q);break;case "S16":l=new Int16Array(q);break;case "S32":l=new Int32Array(q);break;case "U32":l=new Uint32Array(q);break;case "F32":l=new Float32Array(q);break;case "F64":l=new Float64Array(q);break;default:l=new Float32Array(q)}return l},_fillFrom8Bit:function(l){var q=this.pixels,k=this.mask;if(!l||!q||!q.length)return 0;var a,d;var n=a=d=q[0];3<=q.length&&(a=q[1],d=q[2]);q=new Uint32Array(l);
var b=this.width*this.height;if(n.length!==b)return 0;if(k&&k.length===b)if(this.maskIsAlpha)for(l=0;l<b;l++)k[l]&&(q[l]=k[l]<<24|d[l]<<16|a[l]<<8|n[l]);else for(l=0;l<b;l++)k[l]&&(q[l]=-16777216|d[l]<<16|a[l]<<8|n[l]);else for(l=0;l<b;l++)q[l]=-16777216|d[l]<<16|a[l]<<8|n[l]},_fillFromNon8Bit:function(l){var q=this.pixels,k=this.mask,a=this.statistics;if(!l||!q||!q.length)return 0;var d=1,n=0;d=1;a&&0<a.length?(n=a.map(function(f){return f.minValue}).reduce(function(f,p){return Math.min(f,p)}),d=
a.map(function(f){return f.maxValue-f.minValue}).reduce(function(f,p){return Math.max(f,p)}),d=255/d):(d=255,"S8"===this.pixelType?(n=-128,d=127):"U16"===this.pixelType?d=65535:"S16"===this.pixelType?(n=-32768,d=32767):"U32"===this.pixelType?d=4294967295:"S32"===this.pixelType?(n=-2147483648,d=2147483647):"F32"===this.pixelType?(n=-3.4*1E39,d=3.4*1E39):"F64"===this.pixelType&&(n=-Number.MAX_VALUE,d=Number.MAX_VALUE),d=255/(d-n));l=new Uint32Array(l);a=this.width*this.height;var b=q[0];if(b.length!==
a)return 0;if(3<=q.length){var h=q[1];var c=q[2];if(k&&k.length===a)for(q=0;q<a;q++)k[q]&&(l[q]=-16777216|(c[q]-n)*d<<16|(h[q]-n)*d<<8|(b[q]-n)*d);else for(q=0;q<a;q++)l[q]=-16777216|(c[q]-n)*d<<16|(h[q]-n)*d<<8|(b[q]-n)*d}else if(k&&k.length===a)for(q=0;q<a;q++)h=(b[q]-n)*d,k[q]&&(l[q]=-16777216|h<<16|h<<8|h);else for(q=0;q<a;q++)h=(b[q]-n)*d,l[q]=-16777216|h<<16|h<<8|h},_fillFrom32Bit:function(l){var q=this.pixels,k=this.mask;if(!l||!q||!q.length)return 0;var a,d;var n=a=d=q[0];3<=q.length&&(a=
q[1],d=q[2]);var b=this.width*this.height;if(n.length!==b)return 0;var h=0;if(k&&k.length===b)for(q=0;q<b;q++)l[h++]=n[q],l[h++]=a[q],l[h++]=d[q],l[h++]=k[q]&1;else for(q=0;q<b;q++)l[h++]=n[q],l[h++]=a[q],l[h++]=d[q],l[h++]=1},_calculateBandStatistics:function(l,q){var k=Infinity,a=-Infinity,d=l.length,n,b=0;if(q)for(n=0;n<d;n++)q[n]&&(b=l[n],k=b<k?b:k,a=b>a?b:a);else for(n=0;n<d;n++)b=l[n],k=b<k?b:k,a=b>a?b:a;return{minValue:k,maxValue:a}}});e.setObject("layers.PixelBlock",g,u);return g})},"esri/layers/ImageServiceLayerMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/json dojo/_base/config dojo/_base/connect dojo/has dojo/io-query dojo/DeferredList dojo/debounce ../kernel ../config ../lang ../request ../deferredUtils ../urlUtils ../geometry/Extent ../geometry/Point ../geometry/Polygon ../renderers/colorRampUtils ./MosaicRule ./RasterFunction ./DimensionalDefinition ./Raster ./PixelBlock ./pixelFilters/VectorFieldPixelFilter ./rasterFormats/ImageCanvasDecoder ./TimeInfo ./Field ../graphic ../tasks/ImageServiceIdentifyTask ../tasks/ImageServiceIdentifyParameters".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h,c,f,p,r,m,v,z,A,D,E,F,y,x,w,C,B,I,N,V,Y,ca){g=g(null,{declaredClass:"esri.layers.ImageServiceLayerMixin",_rasterFieldPrefix:"Raster.",_renderingRuleFieldSubPrefix:"ServicePixelValue.",_rasterFunctionServiceInfoProps:"bandCount pixelType hasRasterAttributeTable hasColormap hasHistograms minValues maxValues meanValues stdvValues serviceDataType".split(" "),_pixelTypeRanges:{U1:[0,1],U2:[0,3],U4:[0,15],U8:[0,255],S8:[-128,127],U16:[0,65535],S16:[-32768,32767]},_eventMap:{"rendering-change":!0,
"mosaic-rule-change":!0,"spatial-reference-change":!0,"renderer-change":!0},_cachedVariableStats:{},_cachedVariableHistogram:{},constructor:function(J,O){this.useMapTime=O&&O.hasOwnProperty("useMapTime")?!!O.useMapTime:!0},_initialize:function(J,O){this._url=m.urlToObject(J);this.raster=new x(this._url.path);this._rasterFunctionTemplateInfos={};this._rasterFunctionTemplatePromise={};this._customRenderingRuleId={};this.infoTemplate=O&&O.infoTemplate;this.format=(J=O&&O.imageServiceParameters)&&J.format;
this.compressionTolerance=J&&J.compressionTolerance?J.compressionTolerance:.01;this.interpolation=J?J.interpolation:null;this.compressionQuality=J?J.compressionQuality:null;this.bandIds=J?J.bandIds:null;this.mosaicRule=J?J.mosaicRule:null;this.renderingRule=J?J.renderingRule:null;this.renderer=J?J.renderer:null;this.useMapDimensionValue=O&&O.hasOwnProperty("useMapDimensionValue")?!!O.useMapDimensionValue:!0;this.hasImageFilter=O&&O.hasImageFilter;this.activeMapDimensions=O&&O.activeMapDimensions;
this._params=e.mixin({},this._url.query,{f:"image",interpolation:this.interpolation,format:this.format,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null},J?J.toJson():{});this.pixelFilter=O&&O.pixelFilter;this.originalPixelData=this.pixelData=null;this.hasDataChanged=!0;this._requestDataHandler=e.hitch(this,this._requestDataHandler);this._requestDataErrorHandler=e.hitch(this,this._requestDataErrorHandler);this._rasterReadPromise=null;this._initLayer=e.hitch(this,
this._initLayer);this._queryVisibleRastersHandler=e.hitch(this,this._queryVisibleRastersHandler);this._visibleRasters=[];this._rasterAttributeTableFields=[];this._rasterAttributeTableFeatures=[];this._renderingRuleAttributeTable={};this._renderingRuleColormap={};this._useRenderingRuleAttributeTable=!1;this._loadCallback=O&&O.loadCallback;J&&J.renderer&&(J.renderer.outputUnit||J.renderer.inputUnit)&&(this.vectorFieldPixelFilter=new C,this.vectorFieldPixelFilter.setUnits(J.renderer.inputUnit,J.renderer.outputUnit));
(O=O&&O.resourceInfo)?this._initLayer(O):p({url:this._url.path,content:e.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});this.registerConnectEvents()},disableClientCaching:!1,_initLayer:function(J,O){if(null!==J&&void 0!==J){this._findCredential();(this.credential&&this.credential.ssl||J&&J._ssl)&&this._useSSL();O=this.minScale;var U=this.maxScale;e.mixin(this,J);this.minScale=O;this.maxScale=U;this.initialExtent=this.fullExtent=this.extent=
new v(J.extent);this.spatialReference=this.initialExtent.spatialReference;this.pixelSizeX=parseFloat(this.pixelSizeX);this.pixelSizeY=parseFloat(this.pixelSizeY);var ba=this.minValues,Z=this.maxValues,fa=this.meanValues,pa=this.stdvValues,da=this.bands=[];O=0;for(U=this.bandCount;O<U;O++)da[O]={min:ba[O],max:Z[O],mean:fa[O],stddev:pa[O]};this.timeInfo=(O=this.timeInfo)&&O.timeExtent?new I(O):null;U=this.fields=[];if(ba=J.fields)for(O=0;O<ba.length;O++)U.push(new N(ba[O]));this._updateInfoTemplateFields(this.fields);
this.version=J.currentVersion;this.version||(this.version="fields"in J||"objectIdField"in J||"timeInfo"in J?10:9.3);f.isDefined(J.minScale)&&!this._hasMin&&"Raster"!==J.cacheType&&this.setMinScale(J.minScale);f.isDefined(J.maxScale)&&!this._hasMax&&"Raster"!==J.cacheType&&this.setMaxScale(J.maxScale);O={};J.defaultMosaicMethod?(O.method=J.defaultMosaicMethod,O.operation=J.mosaicOperator,O.sortField=J.sortField,O.sortValue=J.sortValue):O.method=E.METHOD_NONE;this.defaultMosaicRule=new E(O);this.defaultMosaicRule.ascending=
!0;this._useRenderingRuleAttributeTable=10<this.version&&"esriImageServiceDataTypeThematic"===this.serviceDataType;this._setDefaultRenderingRule(!0);this._getRenderingRuleAttributeTableAndColormap();this._isScientificData()&&(!this.mosaicRule||this.mosaicRule&&!this.mosaicRule.multidimensionalDefinition)&&this._setDefaultMultidimensionalDefinition(!0);10<this.version&&this.hasRasterAttributeTable&&this.getRasterAttributeTable().then(e.hitch(this,function(ha){ha&&(ha.features&&ha.fields&&(this.rasterAttributeTable=
e.clone(ha)),ha.features&&0<ha.features.length&&(this._rasterAttributeTableFeatures=e.clone(ha.features)),ha.fields&&0<ha.fields.length&&(this._rasterAttributeTableFields=e.clone(ha.fields)),this.renderingRule||!this.renderer||"esri.renderer.ClassBreaksRenderer"!==this.renderer.declaredClass&&"esri.renderer.UniqueValueRenderer"!==this.renderer.declaredClass||this.refresh())}));this._initVectorPixelFilter();this.bandIds||2!==this.bandCount||this.renderingRule||"esri.layers.ArcGISImageServiceLayer"!==
this.declaredClass||this.setBandIds([0,0,0],!0);!(10.3<=this.version&&this.rasterFunctionInfos&&this.rasterFunctionInfos.length)||this._url.query&&this._url.query.raster||this.getRasterFunctionInfos().then(e.hitch(this,function(ha){if(ha&&ha.length){this.rasterFunctionInfos=ha;var P=[],aa;u.forEach(ha,function(ea){if(ea){var X=ea.functionType;aa=aa||1===X||2===X;P.push(ea.name)}},this);this._hasItemLevelRFT=aa;this._rasterFunctionNames=P;aa&&(this._initVectorPixelFilter(),this.refresh())}}));this.loaded=
!0;this._setDefaultFilter();this.onLoad(this);if(J=this._loadCallback)delete this._loadCallback,J(this)}},_updateInfoTemplateFields:function(J){if(J&&!(1>J.length)&&this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.fieldInfos&&!(1>this.infoTemplate.info.fieldInfos.length)){var O,U;var ba=this.infoTemplate.info.fieldInfos;for(O=0;O<J.length;O++){var Z=J[O];for(U=0;U<ba.length;U++)if(ba[U].fieldName.toLowerCase()===Z.name.toLowerCase()&&ba[U].fieldName!==Z.name){ba[U].fieldName=Z.name;
break}}}},getKeyProperties:function(J){var O=this._url.path+"/keyProperties",U=new t(r._dfdCanceller),ba={f:"json"};J&&J.renderingRule&&(ba.renderingRule=l.toJson(J.renderingRule.toJson()));10<this.version?(U._pendingDfd=p({url:O,content:ba,handleAs:"json",callbackParamName:"callback"}),U._pendingDfd.then(function(Z){U.callback(Z)},function(Z){U.errback(Z)})):(J=Error("Layer does not have key properties"),J.log=!!q.isDebug,U.errback(J));return U},getRasterAttributeTable:function(J){var O=this._url.path+
"/rasterAttributeTable",U=new t(r._dfdCanceller),ba={f:"json"},Z=this.hasRasterAttributeTable;J&&J.renderingRule&&(ba.renderingRule=l.toJson(J.renderingRule.toJson()),Z=!0);!this.loaded||10<this.version&&Z?(U._pendingDfd=p({url:O,content:ba,handleAs:"json",callbackParamName:"callback"}),U._pendingDfd.then(function(fa){U.callback(fa)},function(fa){U.errback(fa)})):(J=Error("Layer does not support raster attribute table"),J.log=!!q.isDebug,U.errback(J));return U},getRenderingRuleAttributeTable:function(J){var O=
new t(r._dfdCanceller);if(!J||!J.renderingRule)return O.errback(Error("Rendering rule is not specified")),O;J=J.renderingRule;var U=this._getRenderingRuleId(J);this._renderingRuleAttributeTable&&U&&this._renderingRuleAttributeTable.hasOwnProperty(U)?O.resolve(this._renderingRuleAttributeTable[U]):O=this.getRasterAttributeTable({renderingRule:J}).then(e.hitch(this,function(ba){if(ba&&ba.features&&ba.features.length&&ba.fields&&ba.fields.length){var Z={features:e.clone(ba.features),fields:e.clone(ba.fields)};
U&&(this._renderingRuleAttributeTable[U]=Z)}return Z}));return O},_initVectorPixelFilter:function(){var J;this._hasItemLevelRFT&&this.renderingRule&&(J=this._getItemLevelRenderingRule(this.renderingRule));if(J=J||this.renderingRule)return this.getRenderingRuleServiceInfo(J).then(e.hitch(this,function(O){!O||!this._isVectorData(O)&&"esri.layers.ArcGISImageServiceVectorLayer"!==this.declaredClass||f.isDefined(this.pixelFilter)||(this.vectorFieldPixelFilter=this.vectorFieldPixelFilter||new C,this.vectorFieldPixelFilter.isDataUV=
"esriImageServiceDataTypeVector-UV"===O.serviceDataType,this.pixelFilter=this.vectorFieldPixelFilter.computeMagnitudeAndDirection,this.getKeyProperties().then(e.hitch(this,this._setFlowRepresentation)),this._applyVectorResamplingType(O.serviceDataType))}))},_applyVectorResamplingType:function(J){if(J){var O=this.renderingRule;O&&"Resample"===O.functionName&&((O.functionArguments||{}).ResamplingType="esriImageServiceDataTypeVector-UV"===J?7:10,this.setRenderingRule(new F(O.toJson())))}},_getRasterAttributeTableFeatures:function(){var J=
new t;if(this._rasterAttributeTableFeatures&&0<this._rasterAttributeTableFeatures.length)return J.resolve(this._rasterAttributeTableFeatures),J;if(10<this.version&&this.hasRasterAttributeTable)return J=this.getRasterAttributeTable(),J.then(e.hitch(this,function(O){O&&O.features&&0<O.features.length&&(this._rasterAttributeTableFeatures=e.clone(O.features))})),J;J.resolve(this._rasterAttributeTableFeatures);return J},_getRenderingRuleAttributeTableFeatures:function(J){J=J&&J.renderingRule;return J?
this.getRenderingRuleAttributeTable({renderingRule:J}).then(function(O){return O&&O.features}):(J=new t,J.errback(Error("Rendering rule is not specified")),J)},_getRenderingRuleAttributeTableAndColormap:function(){this.renderingRule&&this.getRenderingRuleServiceInfo(this.renderingRule).then(e.hitch(this,function(J){J.hasRasterAttributeTable&&this.getRenderingRuleAttributeTable({renderingRule:this.renderingRule}).then(e.hitch(this,function(){!this.renderer||"esri.renderer.ClassBreaksRenderer"!==this.renderer.declaredClass&&
"esri.renderer.UniqueValueRenderer"!==this.renderer.declaredClass||this.refresh()}));J.hasColormap&&this.getRenderingRuleColormap({renderingRule:this.renderingRule}).then(e.hitch(this,function(){this.renderer&&"esri.renderer.ColormapRenderer"===this.renderer.declaredClass&&this.refresh()}))}))},getCustomRasterFields:function(J){var O=J?J.rasterAttributeTableFieldPrefix:this._rasterFieldPrefix;J=10.3<=this.version?"esriFieldTypeDouble":"esriFieldTypeString";var U={name:this._rasterFieldPrefix+"ItemPixelValue",
alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:J},ba={name:this._rasterFieldPrefix+"ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:J},Z={name:this._rasterFieldPrefix+"ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"esriFieldTypeDouble"},fa=this.fields?e.clone(this.fields):[];J=fa.length;fa[J]=ba;10.4<=this.version&&"esri.layers.ArcGISImageServiceLayer"===this.declaredClass&&(!this.rasterFunctionInfos||
!this.rasterFunctionInfos.length||this._isRenderingRuleAProcessingTemplate({functionName:"none"}))&&(J++,fa[J]=Z);if(this.capabilities&&-1<this.capabilities.toLowerCase().indexOf("catalog")||this.fields&&0<this.fields.length)J++,fa[J]=U;!f.isDefined(this.pixelFilter)||"esriImageServiceDataTypeVector-UV"!==this.serviceDataType&&"esriImageServiceDataTypeVector-MagDir"!==this.serviceDataType||(U={name:this._rasterFieldPrefix+"Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"esriFieldTypeDouble"},
ba={name:this._rasterFieldPrefix+"Direction",alias:"Direction",domain:null,editable:!1,type:"esriFieldTypeDouble"},J++,fa[J]=U,J++,fa[J]=ba);J=this._rasterAttributeTableFields;(U=this.renderingRule&&this._getRenderingRuleId(this.renderingRule))&&this._renderingRuleAttributeTable&&this._renderingRuleAttributeTable.hasOwnProperty(U)&&(J=this._renderingRuleAttributeTable[U].fields);J&&0<J.length&&(J=u.filter(J,function(da){return"esriFieldTypeOID"!==da.type&&"value"!==da.name.toLowerCase()}),J=u.map(J,
function(da){var ha=e.clone(da);ha.name=O+da.name;return ha}),fa=fa.concat(J));var pa=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;10.4<=this.version&&this.rasterFunctionInfos&&u.forEach(this.rasterFunctionInfos,function(da){da&&da.name&&"none"!==da.name.toLowerCase()&&(da={name:pa+da.name.replace(/ /gi,"_"),alias:da.name,domain:null,editable:!1,type:"esriFieldTypeDouble"},fa.push(da))});return fa},_applyTimeToMultidimensionalCRF:function(J,O){var U=this._isTimeSupportedOnCRF();if(U&&
(!J||!J.multidimensionalDefinition))return J;var ba=this.timeInfo&&this.timeInfo.startTimeField;if((O=O||this._params.time)&&ba&&this._isMultidimensionalCRF()){J=e.clone(J||this.defaultMosaicRule)||new E;J.multidimensionalDefinition=J.multidimensionalDefinition||[];var Z=J.multidimensionalDefinition.filter(function(pa){return pa.dimensionName===ba}),fa=O.split(",").map(function(pa){return parseInt(pa,10)});2===fa.length&&fa[0]===fa[1]&&(fa.length=1);0<Z.length?U?J.multidimensionalDefinition.forEach(function(pa){pa.dimensionName===
ba&&(pa.declaredClass?(pa.dimensionName=null,pa.isSlice=null,pa.values=null):(delete pa.dimensionName,delete pa.isSlice,delete pa.values))}):J.multidimensionalDefinition.forEach(function(pa){pa.dimensionName===ba&&(pa.isSlice=1===fa.length,pa.values=1===fa.length?fa:[fa])}):U||(J.multidimensionalDefinition.some(function(pa){return null!=pa.variableName&&null==pa.dimensionName})?J.multidimensionalDefinition.forEach(function(pa){null!=pa.variableName&&null==pa.dimensionName&&(pa.dimensionName=ba,pa.isSlice=
1===fa.length,pa.values=1===fa.length?fa:[fa])}):J.multidimensionalDefinition.push(new y({variableName:"",dimensionName:ba,isSlice:1===fa.length,values:1===fa.length?fa:[fa]})));this._cleanupMultidimensionalDefinition(J)}return J},_prepareGetImageParameters:function(J,O,U,ba){ba=f.isDefined(ba)?ba:this._params;if(this.renderer||this._hasItemLevelRFT&&this.renderingRule){var Z=this.getExportImageRenderingRule();ba.renderingRule=Z?l.toJson(Z.toJson()):null}Z=this.getExportImageMosaicRule(ba);ba.mosaicRule=
Z?l.toJson(Z.toJson()):null;Z=J.spatialReference.wkid||l.toJson(J.spatialReference.toJson(!1));delete ba._ts;e.mixin(ba,{bbox:J.xmin+","+J.ymin+","+J.xmax+","+J.ymax,imageSR:Z,bboxSR:Z,size:O+","+U},this.disableClientCaching?{_ts:(new Date).getTime()}:{});delete ba.compressionTolerance;ba.format&&"LERC"===ba.format.toUpperCase()&&(ba.compressionTolerance=this.compressionTolerance);ba.token=this._getToken()},getImageUrl:function(J,O,U,ba,Z){Z=f.isDefined(Z)?Z:this._params;this._prepareGetImageParameters(J,
O,U,Z);J=e.clone(Z);this._cleanupRequestParams(J);O=this._url.path+"/exportImage?";U=m.addProxy(O+d.objectToQuery(e.mixin(J,{f:"image"})));var fa=J.token;U.length>c.defaults.io.postLength||this.useMapImage?this._jsonRequest=p({url:O,content:e.mixin(J,{f:"json"}),callbackParamName:"callback",load:function(pa,da){pa=pa.href;fa&&(pa+=-1===pa.indexOf("?")?"?token\x3d"+fa:"\x26token\x3d"+fa);ba(m.addProxy(pa))},error:this._errorHandler}):ba(U)},onRenderingChange:function(){},onMosaicRuleChange:function(){},
onRendererChange:function(){},setInterpolation:function(J,O){this.interpolation=this._params.interpolation=J;O||this.refresh(!0)},setCompressionQuality:function(J,O){this.compressionQuality=this._params.compressionQuality=J;O||this.refresh(!0)},setCompressionTolerance:function(J,O){this.compressionTolerance=J;O||this.refresh(!0)},setBandIds:function(J,O){var U=!1;this.bandIds!==J&&(U=!0);this.bandIds=J;this._params.bandIds=J?J.join(","):null;if(U&&!O)this.onRenderingChange();O||this.refresh(!0)},
setDefaultBandIds:function(J){this.bandIds=this._params.bandIds=null;J||this.refresh(!0)},setDisableClientCaching:function(J){this.disableClientCaching=J},setMosaicRule:function(J,O){var U=!1;this.mosaicRule!==J&&(U=!0);this.mosaicRule=J;this._params.mosaicRule=l.toJson(J.toJson());if(U&&!O)this.onMosaicRuleChange();O||this.refresh(!0)},getRasterFunctionInfos:function(){if(!(10.3>this.version)&&this.rasterFunctionInfos&&this.rasterFunctionInfos.length)return p({url:this._url.path+"/rasterFunctionInfos",
content:{f:"json"},handleAs:"json",load:function(J){return J&&J.rasterFunctionInfos}})},setRenderingRule:function(J,O){var U=!1;this.renderingRule!==J&&(U=!0);this.renderingRule=J;this._params.renderingRule=J?l.toJson(J.toJson()):null;this._useRenderingRuleAttributeTable?this.getRenderingRuleAttributeTable({renderingRule:J}):"esri.layers.RasterXLayer"!==this.declaredClass&&this._getRenderingRuleAttributeTableAndColormap();if(U)this.onRenderingChange();this._setDefaultFilter();O||this.refresh(!0)},
setImageFormat:function(J,O){this.format=this._params.format=J;this._setDefaultFilter();O||this.refresh(!0)},setInfoTemplate:function(J){this.infoTemplate=J;this._updateInfoTemplateFields(this.fields)},setDefinitionExpression:function(J,O){var U=this.mosaicRule?this.mosaicRule.toJson():{};this.mosaicRule||(this.defaultMosaicRule?U=this.defaultMosaicRule.toJson():U.method=E.METHOD_NONE);U.where=J;J=new E(U);this.setMosaicRule(J,O);return this},getDefinitionExpression:function(){return this.mosaicRule?
this.mosaicRule.where:null},setPixelFilter:function(J){this.pixelFilter=J;this._isDefaultPixelFilter=!1},getPixelData:function(J){return J?(this._useBrowserDecoding()&&(this.originalPixelData={pixelBlock:this._getPixelBlockFromCanvas(this._context,this._map.width,this._map.height),extent:this._map.extent}),this.originalPixelData):this.pixelData},getExportImageRenderingRule:function(){var J;this._hasItemLevelRFT&&this.renderingRule&&(J=this._getServiceLevelRenderingRule(this.renderingRule));J=J||this.renderingRule;
this._isItemLevelRasterFunction(this.renderingRule)&&(J=void 0);return this._combineRenderingRule(this._convertRendererToRenderingRule(this.renderer),J)},getExportImageMosaicRule:function(){var J=this.mosaicRule,O;this._hasItemLevelRFT&&this.renderingRule&&(O=this._getItemLevelRenderingRule(this.renderingRule));O&&(J=J||this.defaultMosaicRule||new E,J.itemRenderingRule=O);return J=this._applyTimeToMultidimensionalCRF(J)},redraw:function(){this.hasDataChanged=!1;this._setPixelData(this.originalPixelData)},
getHistograms:function(J){var O=J.variableName,U=(J=(J=J.renderingRule||this.renderingRule||this.defaultRenderingRule)&&"none"!==J.functionName.toLowerCase()?J.toJson():null)?J.functionName:"",ba=new t(r._dfdCanceller);if((O||""===O)&&this._cachedVariableHistogram[O]&&this._cachedVariableHistogram[O][U])return ba.resolve(this._cachedVariableHistogram[O][U]),ba;if(this.hasHistograms){var Z={f:"json"};O&&(Z.variable=O);J&&10.9<this.version&&(Z.renderingRule=JSON.stringify(J));ba._pendingDfd=p({url:this._url.path+
"/histograms",content:Z,handleAs:"json",callbackParamName:"callback"});ba._pendingDfd.then(e.hitch(this,function(fa){if(O||""===O)this._cachedVariableHistogram[O]=this._cachedVariableHistogram[O]||{},this._cachedVariableHistogram[O][U]=fa;ba.callback(fa)}),function(fa){ba.errback(fa)})}else J=Error("Layer does not have histograms."),J.log=!!q.isDebug,ba.errback(J);return ba},computeHistograms:function(J){var O=new t(r._dfdCanceller);if(10.1<=this.currentVersion){J=J||{};var U=J.geometry||this.fullExtent,
ba=(J.geometry||this.fullExtent).toJson();U="extent"===U.type?"esriGeometryEnvelope":"esriGeometryPolygon";var Z=J.renderingRule||this.renderingRule||this.defaultRenderingRule;Z=Z?Z.toJson():null;var fa=J.mosaicRule||this.mosaicRule||this.defaultMosaicRule;fa=fa?fa.toJson():null;J=J.pixelSize||{x:this.pixelSizeX,y:this.pixelSizeY};O._pendingDfd=p({url:this._url.path+"/computeHistograms",content:e.mixin({f:"json",geometry:JSON.stringify(ba),geometryType:U,renderingRule:JSON.stringify(Z),mosaicRule:JSON.stringify(fa),
pixelSize:JSON.stringify(J),callbackParamName:"callback"}),handleAs:"json"});O._pendingDfd.then(function(pa){O.callback(pa)},function(pa){O.errback(pa)})}else ba=Error("Layer doesn't support computeHistograms."),ba.log=!!q.isDebug,O.errback(ba);return O},getRenderingRuleServiceInfo:function(J,O){function U(fa){return fa.name&&fa.arguments&&fa.function&&fa.hasOwnProperty("functionType")}var ba=new r._fixDfd(new t(r._dfdCanceller));if(!J)return ba.errback(Error("Rendering rule is not specified")),ba;
if(U(J))"ClipFunction"===J.function.type&&(J=this._handleClipFunctionInRenderingRule(J));else{var Z=this._getRenderingRuleId(J);if(Z){if(this._rasterFunctionTemplateInfos[Z])return ba.resolve(this._rasterFunctionTemplateInfos[Z]),ba;if(this._rasterFunctionTemplatePromise[Z])return ba=this._rasterFunctionTemplatePromise[Z]}}ba=p({url:this._url.path,content:e.mixin(e.mixin({f:"json",renderingRule:JSON.stringify(J.toJson())},this._url.query)),callbackParamName:"callback",load:e.hitch(this,function(fa){var pa=
{};u.forEach(this._rasterFunctionServiceInfoProps,function(da){pa[da]=fa[da]});U(J)||(this._rasterFunctionTemplateInfos[Z]=pa);return pa}),error:O||this._errorHandler});Z&&!this._rasterFunctionTemplatePromise[Z]&&(this._rasterFunctionTemplatePromise[Z]=ba);return ba},queryVisibleRasters:function(J,O,U,ba){var Z=this._map,fa=r._fixDfd(new t(r._dfdCanceller));this._visibleRasters=[];var pa,da,ha=!0,P=!0,aa=null,ea=this.infoTemplate?this.infoTemplate.info:null,X=ea?e.clone(this.infoTemplate.info.fieldInfos):
null;O=O||{};if(ea&&this.infoTemplate.info.mediaInfos&&this.infoTemplate.info.mediaInfos.length){var S=[];u.forEach(this.infoTemplate.info.mediaInfos,function(T){S=S.concat(T&&T.value&&T.value.fields||[])});S.length&&u.forEach(X,function(T){T&&-1<S.indexOf(T.fieldName)&&(T.visible=!0)})}var ia=function(T){var ka=ea&&ea.title&&-1<ea.title.toLowerCase().indexOf(T.toLowerCase());T=ea&&ea.description&&-1<ea.description.toLowerCase().indexOf(T.toLowerCase());return ka||T};if(X&&0<X.length)for(ha=!1,pa=
0;pa<X.length;pa++)if((da=X[pa])&&da.fieldName.toLowerCase()!==this._rasterFieldPrefix.toLowerCase()+"servicepixelvalue"&&(da.visible||ia(da.fieldName))){ha=!0;break}this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.layerOptions&&this.infoTemplate.info.layerOptions.hasOwnProperty("returnTopmostRaster")&&(aa=this.infoTemplate.info.layerOptions.returnTopmostRaster?1:null);X&&0<X.length&&(P=!1,u.some(X,function(T){if(T&&T.fieldName.toLowerCase()===this._rasterFieldPrefix.toLowerCase()+
"itempixelvalue"&&T.visible)return P=!0},this),ia(this._rasterFieldPrefix.toLowerCase()+"itempixelvalue")&&(P=!0));var oa=(da=this._removeVisualizationStretchFunction(this.renderingRule))&&da.functionName,qa=[];if(10.4<=this.version){var wa=!1;if(this.rasterFunctionInfos&&X){var Ha=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;u.forEach(this.rasterFunctionInfos,function(T){var ka=Ha+T.name.replace(/ /gi,"_");u.some(X,function(na){return na.visible&&na.fieldName===ka})&&(wa=wa||oa&&oa===
T.name,qa.push(new F({rasterFunction:T.name})))})}da&&!wa&&qa.push(da)}pa=new ca;pa.geometry=J.geometry;pa.returnGeometry=this._map.spatialReference.equals(this.spatialReference);pa.returnCatalogItems=ha;pa.timeExtent=this.timeInfo?J.timeExtent:null;pa.returnPixelValues=P;pa.maxItemCount=aa||J.maxItemCount;this._params.time&&this.mosaicRule?(J=e.clone(this.mosaicRule),J=this._filterOutTimeDimension(J),pa.mosaicRule=J):pa.mosaicRule=this.mosaicRule||null;this._isMultidimensionalCRF()&&pa.timeExtent&&
(pa.mosaicRule=this._applyTimeToMultidimensionalCRF(pa.mosaicRule,pa.timeExtent.toJson().join(",")),this._isTimeSupportedOnCRF()||delete pa.timeExtent);pa.renderingRule=10.4>this.version&&da||null;pa.renderingRules=qa||null;10.8>this.version&&(pa.returnPixelValues=void 0,pa.maxItemCount=void 0);Z&&(Z=new z((Z.extent.xmax-Z.extent.xmin)/Z.width,(Z.extent.ymax-Z.extent.ymin)/Z.height,Z.extent.spatialReference),pa.pixelSize=Z);O.requestParams=pa;var R=this;Z=new Y(this.url);(fa._pendingDfd=Z.execute(pa)).addCallbacks(function(T){R._queryVisibleRastersHandler(T,
O,U,ba,fa)},function(T){R._resolve([T],null,ba,fa,!0)});return fa},_queryVisibleRastersHandler:function(J,O,U,ba,Z){function fa(){var ra=this.getCustomRasterFields(O),K=this._getDomainFields(ra),xa=O?O.returnDomainValues:!1,va=O&&O.rasterAttributeTableFieldPrefix,la,Ca,Ma,ua,Ba,Aa,Ga,ya,Ea,Fa;ra=(ra=this._getRenderingRuleId(this.renderingRule))&&this._rasterFunctionTemplateInfos[ra];this.renderingRule&&(this._useRenderingRuleAttributeTable||ra)?(ra=this._getRenderingRuleAttributeTableFeatures({renderingRule:this.renderingRule}),
this.hasRasterAttributeTable||(Fa=pa)):ra=this._getRasterAttributeTableFeatures();ra.then(e.hitch(this,function(Ka){for(la=0;la<R.length;la++){G=R[la];G.setInfoTemplate(this.infoTemplate);G._layer=this;if(pa){Ea=pa.replace(/ /gi,"").split(",");Ca=pa;Ma=Ea;T&&T.length>=la&&(Ca=T[la].replace(/ /gi,", "),Ma=T[la].split(" "));G.attributes[this._rasterFieldPrefix+"ItemPixelValue"]=Ma;G.attributes[this._rasterFieldPrefix+"ServicePixelValue"]=Ea;da&&(G.attributes[this._rasterFieldPrefix+"ServicePixelValue.Raw"]=
da.replace(/ /gi,"").split(","));if(this.pixelFilter){var Ja=new w({height:1,width:1,pixelType:"F32",pixels:[],statistics:[]});u.forEach(Ma,function(Da){Ja.addData({pixels:[Da],statistics:{minValue:Da,maxValue:Da,noDataValue:null}})});this.pixelFilter({pixelBlock:Ja,extent:new v(0,0,0,0,this._map.spatialReference)});if("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType)G.attributes[this._rasterFieldPrefix+"Magnitude"]=Ja.pixels[0][0],
G.attributes[this._rasterFieldPrefix+"Direction"]=Ja.pixels[1][0]}u.forEach(X,function(Da){G.attributes[Da.name]=Da.value});var Oa=0<this.fields.length?Fa||Ca:Fa||da;if(Ka&&0<Ka.length&&(ua=u.filter(Ka,function(Da){if(Da&&Da.attributes)return Da.attributes.hasOwnProperty("Value")?Da.attributes.Value==Oa:Da.attributes.VALUE==Oa}),0<ua.length&&(Ba=e.clone(ua[0]),va&&Ba))){ya={};for(Aa in Ba.attributes)Ba.attributes.hasOwnProperty(Aa)&&(Ga=va+Aa,ya[Ga]=Ba.attributes[Aa]);Ba.attributes=ya;G.attributes=
e.mixin(G.attributes,Ba.attributes)}}xa&&K&&0<K.length&&u.forEach(K,function(Da){if(Da){var Na=G.attributes[Da.name];f.isDefined(Na)&&(Na=this._getDomainValue(Da.domain,Na),f.isDefined(Na)&&(G.attributes[Da.name]=Na))}},this);ja.push(G);this._visibleRasters.push(G)}this._resolve([ja,null,!0],null,U,Z)}))}var pa=J.value,da=J.value,ha=0,P=0,aa=this,ea=this.objectIdField,X=[];ba=O.requestParams.renderingRules;var S=J.processedValues,ia=this.renderingRule&&l.toJson(this._removeVisualizationStretchFunction(this.renderingRule).toJson());
if(ba&&S&&ba.length===S.length){var oa=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;u.forEach(ba,function(ra,K){if(ra.functionName){var xa={name:oa+ra.functionName.replace(/ /gi,"_"),value:S[K].replace(/ /gi,"").split(",")};X.push(xa);ia&&ia===l.toJson(ra.toJson())&&(pa=S[K])}})}ba=this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.layerOptions&&this.infoTemplate.info.layerOptions.hasOwnProperty("showNoDataRecords")?this.infoTemplate.info.layerOptions.showNoDataRecords:
!0;if(J.catalogItems){var qa=0,wa=J.catalogItems.features.length;var Ha=0;var R=Array(wa);var T=Array(wa);var ka=Array(wa);if(J.properties&&J.properties.Values){wa=J.properties.Values.length;for(ha=0;ha<wa;ha++)-1<J.properties.Values[ha].toLowerCase().indexOf("nodata")&&Ha++;var na=wa-Ha;for(ha=0;ha<wa;ha++){Ha=!0;if(-1<J.properties.Values[ha].toLowerCase().indexOf("nodata")){var ta=na++;ba||(Ha=!1,R.length--,T.length--,ka.length--)}else ta=qa++;Ha&&(R[ta]=J.catalogItems.features[ha],T[ta]=J.properties.Values[ha],
ka[ta]=R[ta].attributes[ea])}}else{for(ha=0;ha<wa;ha++)R[ha]=J.catalogItems.features[ha],ka[ha]=R[ha].attributes[ea];T=null}}this._visibleRasters=[];(J=-1<pa.toLowerCase().indexOf("nodata"))&&!ba&&(R=[],T=[],ka=[]);if(pa&&!R&&!J){ea="ObjectId";R=[];var G=new V(new v(this.fullExtent),null,{ObjectId:0});R.push(G)}var ja=[];R?!this._map.spatialReference.equals(this.spatialReference)&&ka&&0<ka.length?p({url:this._url.path+"/query",content:{f:"json",objectIds:ka.join(","),returnGeometry:!0,outSR:l.toJson(aa._map.spatialReference.toJson()),
outFields:ea},handleAs:"json",callbackParamName:"callback",load:function(ra){if(0===ra.features.length)aa._resolve([ja,null,null],null,U,Z);else{for(ha=0;ha<ra.features.length;ha++)for(P=0;P<R.length;P++)R[P].attributes[ea]==ra.features[ha].attributes[ea]&&(R[P].geometry=new A(ra.features[ha].geometry),R[P].geometry.setSpatialReference(aa._map.spatialReference));fa.call(aa)}},error:function(ra){aa._resolve([ja,null,null],null,U,Z)}}):fa.call(this):this._resolve([ja,null,null],null,U,Z)},getVisibleRasters:function(){var J=
this._visibleRasters,O=[],U;for(U in J)J.hasOwnProperty(U)&&O.push(J[U]);return O},_getDomainFields:function(J){if(J){var O=[];u.forEach(J,function(U){if(U.domain){var ba={};ba.name=U.name;ba.domain=U.domain;O.push(ba)}});return O}},_getDomainValue:function(J,O){if(J&&J.codedValues){var U;u.some(J.codedValues,function(ba){return ba.code===O?(U=ba.name,!0):!1});return U}},_requestData:function(J,O,U){this._rasterReadPromise&&this._rasterReadPromise.cancel();J=e.clone(J);var ba=J._normalize(!0);this._prepareGetImageParameters(ba,
O,U);O=e.clone(this._params);this._cleanupRequestParams(O);O.extent=J;O.format=O.format||(10.3<=this.version?"lerc":"jpgpng");"lerc"===O.format.toLowerCase()&&!O.lercVersion&&10.5<=this.version&&(O.lercVersion=2);this._params.time&&this._isMultidimensionalCRF()&&!this._isTimeSupportedOnCRF()&&delete O.time;U=null;this._useBrowserDecoding()&&(U=new B({ctx:this._context}));O={imageServiceParameters:O,nBands:Math.min(this.bandCount,3),pixelType:this.pixelType,decodeFunc:U?e.hitch(U,"decode"):null};this._rasterReadPromise=
this.raster.read(O,this._requestDataHandler,this._requestDataErrorHandler)},_requestDataHandler:function(J){this._rasterReadPromise&&this._rasterReadPromise.isCanceled()||(this.originalPixelData=J,this.hasDataChanged=!0,this._setPixelData(J))},_setPixelData:function(J){J=this._clonePixelData(J);this.pixelFilter&&this.pixelFilter(J);this.pixelData=J;this._rasterReadPromise&&this._rasterReadPromise.isCanceled()||(this._drawPixelData(),this._rasterReadPromise=null)},_clonePixelData:function(J){if(null===
J||void 0===J)return J;var O={};J.extent&&(O.extent=e.clone(J.extent));J=J.pixelBlock;if(null===J||void 0===J)return O;O.pixelBlock=J.clone();return O},_setDefaultFilter:function(){},_getPixelBlockFromCanvas:function(J,O,U){J=J.getImageData(0,0,O,U).data;var ba=O*U,Z=0,fa=0,pa=new Uint8Array(ba),da=new Uint8Array(ba),ha=new Uint8Array(ba),P=new Uint8Array(ba),aa=Infinity,ea=Infinity,X=Infinity,S=-Infinity,ia=-Infinity,oa=-Infinity;for(Z=0;Z<ba;Z++){var qa=J[fa++];var wa=J[fa++];var Ha=J[fa++];aa=
aa<qa?aa:qa;S=S>qa?S:qa;ea=ea<wa?ea:wa;ia=ia>wa?ia:wa;X=X<Ha?X:Ha;oa=oa>Ha?oa:Ha;pa[Z]=qa;da[Z]=wa;ha[Z]=Ha;P[Z]=J[fa++]&1}return new w({width:O,height:U,pixels:[pa,da,ha],pixelType:"U8",mask:P,statistics:[{minValue:aa,maxValue:S},{minValue:ea,maxValue:ia},{minValue:X,maxValue:oa}]})},_useBrowserDecoding:function(){return(void 0===this.pixelFilter||null===this.pixelFilter)&&("jpeg"===this.format.toLowerCase()||"jpg"===this.format.toLowerCase()||-1<this.format.toLowerCase().indexOf("png"))},getMultidimensionalInfo:function(){var J=
this._url.path+"/multiDimensionalInfo",O=new t(r._dfdCanceller);if(this._multidimensionalInfo)return O.resolve(this._multidimensionalInfo),O;!this.loaded||10.3<=this.version&&this.hasMultidimensions?(O._pendingDfd=p({url:J,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),O._pendingDfd.then(e.hitch(this,function(U){this._multidimensionalInfo=U.multidimensionalInfo;O.callback(U.multidimensionalInfo)}),function(U){O.errback(U)})):(J=Error("Layer does not support multidimensional info"),
J.log=!!q.isDebug,O.errback(J));return O},getStatistics:function(J){var O=new t(r._dfdCanceller);if(J&&this._cachedVariableStats[J])O.resolve(this._cachedVariableStats[J]);else{var U={f:"json"};J&&(U.variable=J);O._pendingDfd=p({url:this._url.path+"/statistics",content:U,handleAs:"json",callbackParamName:"callback"});O._pendingDfd.then(e.hitch(this,function(ba){ba=ba.statistics||ba.statitsics;var Z=[];ba&&ba[0]&&null!=ba[0].min?ba.forEach(function(fa){Z.push([fa.min,fa.max,fa.mean,fa.standardDeviation])}):
Z=this.minValues&&this.minValues.length?this.minValues.map(function(fa,pa){return[fa,this.maxValues[pa],this.meanValues[pa],this.stdvValues[pa]]}.bind(this)):ba;J&&(this._cachedVariableStats[J]=Z);O.callback(Z)}),function(ba){O.errback(ba)})}return O},getDefaultMultidimensionalDefinition:function(){var J=new t(r._dfdCanceller);if(this._defaultMultidimensionalDefinition)return J.resolve(e.clone(this._defaultMultidimensionalDefinition)),J;J._pendingDfd=this.getMultidimensionalInfo();J._pendingDfd.then(e.hitch(this,
function(O){O=this._getDefaultMultidimensionalDefinition(O);J.callback(O)}),function(O){J.errback(O)});return J},_getDefaultMultidimensionalDefinition:function(J,O,U){var ba,Z=[],fa=this.defaultVariable||this.raster&&this.raster.defaultVariable;variableName=fa||"";dimensions=variableName.length?J.variables.filter(function(pa){return pa.name===variableName})[0].dimensions:J.variables[0].dimensions;U&&(variableName=fa||J.variables[0].name);for(ba in dimensions)dimensions.hasOwnProperty(ba)&&(O||"StdTime"!==
dimensions[ba].name)&&(J=dimensions[ba],Z.push(new y({variableName,dimensionName:J.name,isSlice:!J.hasRanges,values:[this._getDefaultDimensionValue(J)]})));this._defaultMultidimensionalDefinition=Z;return e.clone(Z)},_getDefaultDimensionValue:function(J){if(J&&J.values&&J.values.length){var O=Infinity,U;if(J.hasRanges)return J.values[0];if(J.name&&"stdz"===J.name.toLowerCase()){for(U=0;U<J.values.length;U++){var ba=J.values[U];var Z=Math.abs(ba-0);if(Z<O){O=Z;var fa=ba}if(0===Z)break}return fa}return J.extent[0]}},
_setDefaultMultidimensionalDefinition:function(J){var O,U={};this.getDefaultMultidimensionalDefinition().then(e.hitch(this,function(ba){O=ba;0<O.length&&(this.mosaicRule?(U=e.clone(this.mosaicRule),U.multidimensionalDefinition=O):this.defaultMosaicRule?(U=e.clone(this.defaultMosaicRule),U.multidimensionalDefinition=O):U=new E({multidimensionalDefinition:O}),this.setMosaicRule(U,J))}))},_setDefaultRenderingRule:function(J){var O={},U=this.renderingRule;if(!U&&"esri.layers.ArcGISImageServiceVectorLayer"!==
this.declaredClass&&!this.bandIds&&this.rasterFunctionInfos&&this.rasterFunctionInfos.length&&"none"!==this.rasterFunctionInfos[0].name.toLowerCase())O.rasterFunction=this.rasterFunctionInfos[0].name;else if("esri.layers.ArcGISImageServiceVectorLayer"===this.declaredClass&&10.3<this.version&&(!U||"Resample"!==U.functionName)){var ba="esriImageServiceDataTypeVector-UV"===this.serviceDataType?7:10;O.rasterFunction="Resample";O.rasterFunctionArguments={ResamplingType:ba,InputCellSize:{x:this.pixelSizeX,
y:this.pixelSizeY}};U&&(O.rasterFunctionArguments.Raster=U.toJson())}O.hasOwnProperty("rasterFunction")&&(this.defaultRenderingRule=new F(O),this.setRenderingRule(this.defaultRenderingRule,J))},_cleanupRequestParams:function(J){if(!J)return J;if(J.time&&J.mosaicRule){var O=new E(l.fromJson(J.mosaicRule));O=this._filterOutTimeDimension(O);J.mosaicRule=l.toJson(O.toJson())}O="displayOnPan drawMode styling id opacity visible resourceInfo useMapDimensionValue extent renderer".split(" ");for(var U in O)J.hasOwnProperty(O[U])&&
delete J[O[U]];return J},_filterOutTimeDimension:function(J){if(this._isMultidimensionalCRF())return J;if(J&&J.multidimensionalDefinition&&0<J.multidimensionalDefinition.length){var O=u.filter(J.multidimensionalDefinition,function(U){return"StdTime"!==U.dimensionName});J.multidimensionalDefinition=O}return J},_removeVisualizationStretchFunction:function(J){var O=J&&J.functionName;if(!O||"stretch"!==O.toLowerCase())return J;var U=J.functionArguments.Raster;return U&&U.functionName&&u.some(this.rasterFunctionInfos,
function(ba){return U.functionName===ba.name})?U:J},_isMultidimensionalCRF:function(){return 10.71<=this.version&&this.hasMultidimensions&&this.timeInfo&&!(this.objectIdField&&this.fields&&1<this.fields.length)},_isTimeSupportedOnCRF:function(){return 10.8<=this.version},_cleanupMultidimensionalDefinition:function(J){J&&J.multidimensionalDefinition&&(J.multidimensionalDefinition=J.multidimensionalDefinition.filter(function(O){return!(!O.variableName&&!O.dimensionName)}),0===J.multidimensionalDefinition.length&&
(J.multidimensionalDefinition=null))},_isScientificData:function(){return"esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType||"esriImageServiceDataTypeScientific"===this.serviceDataType||this.hasMultidimensions},_isVectorData:function(J){J=(J=J||this)&&J.serviceDataType;return"esriImageServiceDataTypeVector-UV"===J||"esriImageServiceDataTypeVector-MagDir"===J},_isRenderingRuleAProcessingTemplate:function(J){var O=J&&J.functionName;
return!O||J.functionArguments?!1:u.some(O&&(this.rasterFunctionInfos||[]),function(U){return U&&U.name&&U.name.toLowerCase()===O.toLowerCase()})},_getRenderingRuleId:function(J){var O=J&&J.functionName;if(O){if(this._isRenderingRuleAProcessingTemplate(J))return O;var U=this._customRenderingRuleId[O];if(U){if(U!==J){for(var ba in this._customRenderingRuleId)if(this._customRenderingRuleId[ba]===J)return ba;for(U=0;this._customRenderingRuleId[Z];)U+=1;var Z;this._customRenderingRuleId[O+U]=J}}else this._customRenderingRuleId[O]=
J;return O}},_createPixelData:function(J){J=new w({width:2,height:2,pixels:J,pixelType:this.pixelType,statistics:J});var O=this.fullExtent.getCenter();O=new v(O.x,O.y,O.x+this.pixelSizeX,O.y+this.pixelSizeY,this.spatialReference);return{pixelBlock:J,extent:O}},_convertRendererToRenderingRule:function(J){var O=J&&J.declaredClass;if(!O||"esri.renderer.UniqueValueRenderer"!==O&&"esri.renderer.ClassBreaksRenderer"!==O&&"esri.renderer.StretchRenderer"!==O&&"esri.renderer.ShadedReliefRenderer"!==O&&"esri.renderer.ColormapRenderer"!==
O)return null;var U=null;"esri.renderer.StretchRenderer"===O?U=J.toRenderingRule({convertToColormap:10.6>this.version}):"esri.renderer.ClassBreaksRenderer"===O?U=this._convertClassifyRenderer(J):"esri.renderer.UniqueValueRenderer"===O?U=this._convertUniqueValueRenderer(J):"esri.renderer.ShadedReliefRenderer"===O?U=this._convertShadedReliefRenderer(J):"esri.renderer.ColormapRenderer"===O&&(U=this._convertColormapRenderer(J));return U},_getValueField:function(J){if(J&&J.length){var O,U;u.some(J,function(ba){if((U=
ba.name)&&"value"===U.toLowerCase())return O=U,!0});return O}},_convertColormapRenderer:function(J){var O=new F;O.functionName="Colormap";O.functionArguments={};J=J.colormapInfos.map(function(U){return[U.value].concat(U.color)});O.functionArguments.Colormap=J;return O},_convertShadedReliefRenderer:function(J){var O=new F;O.functionName="Hillshade";var U="traditional"===J.hillshadeType?0:1,ba="none"===J.scalingType?1:3,Z={HillshadeType:U,SlopeType:ba,ZFactor:J.zFactor};0===U&&(Z.Azimuth=J.azimuth,
Z.Altitude=J.altitude);3===ba&&(Z.PSPower=J.pixelSizePower,Z.PSZFactor=J.pixelSizeFactor);O.functionArguments=Z;O.variableName="Raster";J.colorRamp&&(O.functionName="ShadedRelief",Z.Colormap=D.convertColorRampToColormap(J.colorRamp,256));return O},_convertClassifyRenderer:function(J){var O=[],U=[],ba=[],Z=[],fa;var pa=this.renderingRule&&this._getRenderingRuleId(this.renderingRule);var da=this.hasRasterAttributeTable;if(pa){da=this._rasterFunctionTemplateInfos[pa]?this._rasterFunctionTemplateInfos[pa].hasRasterAttributeTable:
this.hasRasterAttributeTable;var ha=this._renderingRuleAttributeTable[pa];var P=this._rasterFunctionTemplateInfos[pa]}var aa=ha&&ha.features?ha.features:this._rasterAttributeTableFeatures;var ea=this._getValueField(ha&&ha.fields?ha.fields:this._rasterAttributeTableFields);da&&aa?(u.forEach(J.infos,function(X,S){var ia,oa=X.symbol.color;oa.a&&u.forEach(aa,function(qa){ia=qa.attributes[J.attributeField];(ia>=X.minValue&&ia<X.maxValue||S===J.infos.length-1&&ia>=X.minValue)&&Z.push([qa.attributes[ea],
oa.r,oa.g,oa.b])},this)},this),pa=P&&P.pixelType||this.pixelType,this._adjustColormapToPixelTypeRange(Z,pa),pa=new F,pa.functionName="Colormap",pa.functionArguments={},pa.functionArguments.Colormap=Z,pa.variableName="Raster"):(u.forEach(J.infos,function(X,S){fa=X.symbol&&X.symbol.color;fa.a?(0===S?O.push.call(O,X.minValue,X.maxValue+1E-4):O.push.call(O,X.minValue+1E-4,X.maxValue+1E-4),U.push(S),Z.push([S,fa.r,fa.g,fa.b])):ba.push(X.minValue,X.maxValue)}),pa=P&&P.pixelType||this.pixelType,this._adjustColormapToPixelTypeRange(Z,
pa),pa=new F,pa.functionName="Remap",pa.functionArguments={InputRanges:O,OutputValues:U,NoDataRanges:ba},pa.variableName="Raster",ha=new F,ha.functionName="Colormap",ha.functionArguments={Colormap:Z,Raster:pa},pa=ha);return pa},_convertUniqueValueRenderer:function(J){var O=[],U=this.renderingRule&&this._getRenderingRuleId(this.renderingRule);if(U){var ba=this._renderingRuleAttributeTable[U];var Z=this._rasterFunctionTemplateInfos[U]}var fa=ba&&ba.features?ba.features:this._rasterAttributeTableFeatures;
var pa=(U=ba&&ba.fields?ba.fields:this._rasterAttributeTableFields)&&U.length?this._getValueField(U):"Value";u.forEach(J.infos,function(da){var ha=da.symbol.color;ha.a&&(J.attributeField.toLowerCase()!==pa.toLowerCase()&&fa.length?u.forEach(fa,function(P){P.attributes[J.attributeField]==da.value&&O.push([P.attributes[pa],ha.r,ha.g,ha.b])},this):O.push([da.value,ha.r,ha.g,ha.b]))},this);this._adjustColormapToPixelTypeRange(O,Z&&Z.pixelType||this.pixelType);Z=new F;Z.functionName="Colormap";Z.functionArguments=
{};Z.functionArguments.Colormap=O;Z.variableName="Raster";return Z},_adjustColormapToPixelTypeRange:function(J,O){(O=this._pixelTypeRanges[O])&&J.push([Math.floor(O[0]-1),0,0,0],[Math.ceil(O[1]+1),0,0,0]);return J},_combineRenderingRule:function(J,O){if(!J||!O)return J||O;var U=function(ba){var Z=ba.Raster;return Z=Z&&"esri.layers.RasterFunction"===Z.declaredClass?U(Z.functionArguments):ba};J=e.clone(J);"none"!==O.functionName.toLocaleLowerCase()&&(U(J.functionArguments).Raster=O);return J},_isItemLevelRasterFunction:function(J){var O=
J&&J.functionName;if(!O||!this._hasItemLevelRFT)return!1;var U=!1;u.some(this.rasterFunctionInfos,function(ba){if(ba&&ba.name===O){if(1===ba.functionType||2===ba.functionType)U=!0;return!0}});return U},_getServiceLevelRenderingRule:function(J){if(!this._hasItemLevelRFT||!J)return J;J=new F(J.toJson());var O=J.functionArguments;for(var U;;)if((U=O&&O.Raster)&&U.functionArguments&&U.functionArguments.Raster)O=U,O=O.functionArguments;else{this._isItemLevelRasterFunction(U)&&delete O.Raster;break}return J},
_getItemLevelRenderingRule:function(J){if(!this._hasItemLevelRFT||!J)return null;if(this._isItemLevelRasterFunction(J))return J;J=new F(J.toJson());for(J=J.functionArguments;;)if((J=J&&J.Raster)&&J.functionArguments&&J.functionArguments.Raster)J=J.functionArguments;else{if(this._isItemLevelRasterFunction(J))return J;break}},_resolve:function(J,O,U,ba,Z){O&&this[O].apply(this,J);U&&U.apply(null,J);ba&&r._resDfd(ba,J,Z)},_toggleTime:function(){var J=this._map;this.timeInfo&&this.useMapTime&&J&&!this.suspended?
(this._timeConnect||(this._timeConnect=k.connect(J,"onTimeExtentChange",this,this._onTimeExtentChangeHandler)),this._setTime(J.timeExtent)):(k.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},setUseMapTime:function(J,O){this.useMapTime=J;this._toggleTime();!O&&this._map&&this.refresh(!0)},_setTime:function(J){this._params&&(this._params.time=J?J.toJson().join(","):null)},onResume:function(){if(this._isScientificData()||this.timeInfo)this._originalGetImageUrl=this._originalGetImageUrl||
this.getImageUrl.bind(this),this.getImageUrl=b(this._originalGetImageUrl,200),this._debounceGetImageTimer&&clearTimeout(this._debounceGetImageTimer),this._debounceGetImageTimer=setTimeout(function(){this.getImageUrl=this._originalGetImageUrl}.bind(this),5E3);this.inherited(arguments)},_onTimeExtentChangeHandler:function(J){this.suspended||(this._setTime(J),this.refresh(!0))},handleSpatialReferenceChange:function(){this.onSpatialReferenceChange()},getColormap:function(J){var O=this._url.path+"/colormap",
U=new t(r._dfdCanceller),ba={f:"json"};J&&J.renderingRule&&(ba.renderingRule=l.toJson(J.renderingRule.toJson()));this.hasColormap?(U._pendingDfd=p({url:O,content:ba,handleAs:"json",callbackParamName:"callback"}),U._pendingDfd.then(function(Z){U.callback(Z)},function(Z){U.errback(Z)})):(J=Error("Layer does not support colormap"),J.log=!!q.isDebug,U.errback(J));return U},getRenderingRuleColormap:function(J){var O=new t(r._dfdCanceller);if(!J||!J.renderingRule)return O.errback(Error("Rendering rule is not specified")),
O;J=J.renderingRule;var U=this._getRenderingRuleId(J);this._renderingRuleColormap&&U&&this._renderingRuleColormap.hasOwnProperty(U)?O.resolve(this._renderingRuleColormap[U]):O=this.getColormap({renderingRule:J}).then(e.hitch(this,function(ba){ba=ba&&ba.colormap;U&&(this._renderingRuleColormap[U]=ba);return ba}));return O},_handleClipFunctionInRenderingRule:function(J){J=e.clone(J);var O=J.arguments,U=O.ClippingGeometry&&O.ClippingGeometry.value,ba=O.Extent&&O.Extent.value;O.ClippingRaster&&O.ClippingRaster.value||
U||ba||(O=this._map.extent.toJson(),J.arguments.Extent.value=O,J.functionArguments.Extent.value=O,J._isTemplate&&(J._templateJson.arguments.Extent.value=O));return J}});e.setObject("layers.ImageServiceLayerMixin",g,h);return g})},"dojo/debounce":function(){define([],function(){return function(g,e){var t;return function(){t&&clearTimeout(t);var u=this,l=arguments;t=setTimeout(function(){g.apply(u,l)},e)}}})},"esri/layers/Raster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/json dojo/sniff ../kernel ../Evented ../request ../geometry/Extent ../SpatialReference ../deferredUtils ./PixelBlock ./rasterFormats/LercCodec ./rasterFormats/Lerc2Codec".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h,c,f,p,r,m){var v,z,A,D,E,F;e=e(n,{declaredClass:"esri.layers.Raster",imageServiceUrl:null,validPixelTypes:"U1 U2 U4 U8 U16 U32 S8 S16 S32 F32".split(" "),validFormats:"lerc jpeg jpg jpgpng png png8 png24 png32 bip bsq tiff".split(" "),_eventMap:{"raster-read-complete":["pixelData","params"]},constructor:function(B){this.imageServiceUrl=B;this.registerConnectEvents();this._loadRasterFormatModules()},read:function(B,I,N){var V=this,Y=new u(f._dfdCanceller);if(10>a("ie"))throw"This browser is not supported.";
if(!B.imageServiceParameters)throw"Insufficient parameters to read data";var ca=t.clone(B.imageServiceParameters),J=B.pixelType;l.some(this.validPixelTypes,function(pa){return pa===J})||(ca.pixelType="F32");l.some(this.validFormats,function(pa){return pa.toLowerCase()===ca.format.toLowerCase()})||(ca.format="lerc");var O=B.decodeFunc,U;this._prepareGetImageParameters(ca);var ba=ca.width,Z=ca.height,fa=ca.extent;delete ca.width;delete ca.height;delete ca.extent;Y._pendingDfd=b({url:this.imageServiceUrl+
"/exportImage",handleAs:"arraybuffer",content:t.mixin(ca,{f:"image"}),load:function(pa){V.decode(pa,{width:ba,height:Z,planes:null,pixelType:J,noDataValue:ca.noData,format:ca.format,decodeFunc:O}).then(function(da){U={pixelBlock:da,extent:fa};V._resolve([U,ca],"onRasterReadComplete",I,Y)},function(da){V._resolve([da],null,N,Y,!0)})},error:function(pa){V._resolve([pa],null,N,Y,!0)}});return Y.promise},decode:function(B,I){if(void 0===I||null===I)throw"missing decode options";var N;I.format&&(N=I.format.toUpperCase());
"BSQ"!==N&&"BIP"!==N&&(N=this._getFormat(B));var V=I.decodeFunc;if(void 0===V||null===V)V=this._getFormatDecoderDfd(N);return V(B,I)},onRasterReadComplete:function(){},_prepareGetImageParameters:function(B){if(B.size&&B.bbox){var I=B.size.split(",");B.width=parseFloat(I[0]);B.height=parseFloat(I[1]);B.extent||(I=B.bbox.split(","),B.extent=new h(parseFloat(I[0]),parseFloat(I[1]),parseFloat(I[2]),parseFloat(I[3]),new c(B.bboxSR)))}else{if(!B.width||Math.floor(B.width)!==B.width||!B.height||Math.floor(B.height)!==
B.height)throw"Incorrect Image Dimensions";if(!B.extent||"esri.geometry.Extent"!==B.extent.declaredClass)throw"Incorrect extent";I=B.extent;var N=I.spatialReference.wkid||k.toJson(I.spatialReference.toJson());delete B._ts;t.mixin(B,{bbox:I.xmin+","+I.ymin+","+I.xmax+","+I.ymax,imageSR:N,bboxSR:N,size:B.width+","+B.height},B.disableClientCaching?{_ts:(new Date).getTime()}:{})}},_adjustExtent:function(B,I,N){var V=B.ymax-B.ymin,Y=B.xmax-B.xmin;N>=I?B.ymax=B.ymin+Y*I/N:B.xmax=B.xmin+V*N/I;return B},
_resolve:function(B,I,N,V,Y){I&&this[I].apply(this,B);N&&N.apply(null,B);V&&f._resDfd(V,B,Y)},_getFormatDecoderDfd:function(B){var I=null;switch(B){case "LERC":I=this._decodeLerc;break;case "LERC2":I=this._decodeLerc2;break;case "JPEG":I=this._decodeJpeg;break;case "PNG":I=this._decodePng;break;case "BSQ":I=this._decodeBsq;break;case "BIP":I=this._decodeBip;break;case "TIFF":I=this._decodeTiff;break;default:I=function(N,V){throw"The raster format is not supported";}}I=t.hitch(this,I);return function(N,
V){var Y=new u;try{if("LERC"===B||!0===E){var ca=I(N,V);Y.resolve(ca)}else F.then(function(){ca=I(N,V);Y.resolve(ca)})}catch(J){Y.reject(J)}return Y}},_getFormat:function(B){B=new Uint8Array(B,0,10);var I="";if(255===B[0]&&216===B[1])I="JPEG";else if(137===B[0]&&80===B[1]&&78===B[2]&&71===B[3])I="PNG";else if(67===B[0]&&110===B[1]&&116===B[2]&&90===B[3]&&73===B[4]&&109===B[5]&&97===B[6]&&103===B[7]&&101===B[8]&&32===B[9])I="LERC";else if(76===B[0]&&101===B[1]&&114===B[2]&&99===B[3]&&50===B[4]&&32===
B[5])I="LERC2";else if(-1<String.fromCharCode.apply(null,B).toLowerCase().indexOf("error"))I="ERROR";else if(73===B[0]&&73===B[1]&&42===B[2]&&0===B[3]||77===B[0]&&77===B[1]&&0===B[2]&&42===B[3])I="TIFF";return I},_validateDecodeParams:function(B){if(!B.height||Math.floor(B.height)!==B.height)throw"Height not provided.";if(!B.width||Math.floor(B.width)!==B.width)throw"Width not provided.";},_decodeJpeg:function(B,I){if(!v)throw"The jpeg decoder module is not loaded.";this._validateDecodeParams(I);
B=(new v).decode(B);if(!C(B,I))throw"The decoded image dimensions are incorrect.";I=[];var N;for(N=0;N<B.pixels.length;N++){var V=B.pixels[N];I.push(this._calculateBandStatistics(V))}return new p({width:B.width,height:B.height,pixels:B.pixels,pixelType:"U8",mask:B.mask,statistics:I})},_decodePng:function(B,I){if(!z)throw"The png decoder module is not loaded.";this._validateDecodeParams(I);B=new Uint8Array(B);var N=new z(B);B=new Uint8Array(I.width*I.height*4);N.copyToImageData(B,N.decodePixels());
var V=N=0;V=new Uint8Array(I.width*I.height);for(N=0;N<I.width*I.height;N++)V[N]=B[4*N+3];var Y=new p({width:I.width,height:I.height,pixels:[],pixelType:"U8",mask:V,statistics:[]});for(N=0;3>N;N++){var ca=new Uint8Array(I.width*I.height);for(V=0;V<I.width*I.height;V++)ca[V]=B[4*V+N];Y.addData({pixels:ca,statistics:this._calculateBandStatistics(ca)})}return Y},_decodeBsq:function(B,I){if(!A)throw"The bsq decoder module is not loaded.";this._validateDecodeParams(I);x=I.noDataValue;I.pixelType=w(I.pixelType);
B=A.decodeBSQ(B,{bandCount:I.planes,width:I.width,height:I.height,pixelType:y,noDataValue:x});var N=[],V,Y=null;for(V=0;V<B.pixels.length;V++)Y=B.pixels[V],N.push(this._calculateBandStatistics(Y));return new p({width:I.width,height:I.height,pixels:B.pixels,pixelType:I.pixelType,mask:B.maskData,statistics:N})},_decodeBip:function(B,I){this._validateDecodeParams(I);x=I.noDataValue;I.pixelType=w(I.pixelType);B=A.decodeBIP(B,{bandCount:I.planes,width:I.width,height:I.height,pixelType:y,noDataValue:x});
var N=[],V,Y=null;for(V=0;V<B.pixels.length;V++)Y=B.pixels[V],N.push(this._calculateBandStatistics(Y));return new p({width:I.width,height:I.height,pixels:B.pixels,pixelType:I.pixelType,mask:B.maskData,statistics:N})},_decodeTiff:function(B,I){this._validateDecodeParams(I);x=I.noDataValue;I.pixelType=w(I.pixelType);B=D.decode(B);I=[];var N,V=null;for(N=0;N<B.pixels.length;N++)V=B.pixels[N],I.push(this._calculateBandStatistics(V,B.maskData));return new p({width:B.width,height:B.height,pixels:B.pixels,
pixelType:B.pixelType,mask:B.maskData,statistics:I})},_decodeLerc:function(B,I){this._validateDecodeParams(I);x=I.noDataValue;I.pixelType=w(I.pixelType);for(var N=0,V,Y=0,ca,J=B.byteLength-10;Y<J;){var O=r.decode(B,{inputOffset:Y,encodedMaskData:V,returnMask:0===N?!0:!1,returnEncodedMask:0===N?!0:!1,returnFileInfo:!0,pixelType:y,noDataValue:x});Y=O.fileInfo.eofOffset;0===N&&(V=O.encodedMaskData,ca=new p({width:I.width,height:I.height,pixels:[],pixelType:I.pixelType,mask:O.maskData,statistics:[]}));
N++;if(!C(O,I))throw"The decoded image dimensions are incorrect";ca.addData({pixels:O.pixelData,statistics:{minValue:O.minValue,maxValue:O.maxValue,noDataValue:O.noDataValue}})}return ca},_decodeLerc2:function(B,I){this._validateDecodeParams(I);x=I.noDataValue;I.pixelType=w(I.pixelType);for(var N=0,V,Y,ca=0,J,O=B.byteLength-10,U=[];ca<O;){Y=m.decode(B,{inputOffset:ca,maskData:V,returnFileInfo:!0});ca=Y.fileInfo.eofOffset;0===N&&(V=Y.maskData,J=new p({width:I.width,height:I.height,pixels:[],pixelType:Y.fileInfo.pixelType,
mask:Y.maskData,statistics:[]}));Y.fileInfo.mask&&0<Y.fileInfo.mask.numBytes&&U.push(Y.maskData);N++;if(!C(Y,I))throw"The decoded image dimensions are incorrect";if(1<Y.dimCount&&Y.pixelData&&Y.pixelData.length===Y.width*Y.height*Y.dimCount){Y.pixelData=Y.pixelData.slice(-Y.width*Y.height);var ba=Y.dimStats&&Y.dimStats.minValues&&Y.dimStats.minValues[Y.dimCount-1],Z=Y.dimStats&&Y.dimStats.maxValues&&Y.dimStats.maxValues[Y.dimCount-1];null!=ba&&null!=Z&&(Y.minValue=ba,Y.maxValue=Z)}J.addData({pixels:Y.pixelData,
statistics:{minValue:Y.minValue,maxValue:Y.maxValue,noDataValue:Y.noDataValue}})}if(1<U.length){Y=J.width*J.height;J.bandMasks=U;V=new Uint8Array(Y);V.set(U[0]);for(I=1;I<U.length;I++)for(B=U[I],N=0;N<Y;N++)V[N]&=B[N];J.maskData=V}return J},_calculateBandStatistics:function(B,I){var N=Infinity,V=-Infinity,Y=B.length,ca,J=0;if(I)for(ca=0;ca<Y;ca++)I[ca]&&(J=B[ca],N=J<N?J:N,V=J>V?J:V);else for(ca=0;ca<Y;ca++)J=B[ca],N=J<N?J:N,V=J>V?J:V;return{minValue:N,maxValue:V}},_loadRasterFormatModules:function(){E||
(F||(F=new u),10>a("ie")?F.isRejected()||F.reject("unsupported browser version"):g(["./rasterFormats/JpgPlus","./rasterFormats/Png","./rasterFormats/Raw","./rasterFormats/TiffDecoder","./rasterFormats/Zlib"],function(B,I,N,V){v=B;z=I;A=N;D=V;E=!0;F.isResolved()||F.resolve(!0)}))}});var y=null,x=null,w=function(B){if("U1"===B||"U2"===B||"U4"===B||"U8"===B)return x=Math.pow(2,8)-1,y=Uint8Array,"U8";"U16"===B?(x=x||Math.pow(2,16)-1,y=Uint16Array):"U32"===B?(x=x||Math.pow(2,32)-1,y=Uint32Array):"S8"===
B?(x=x||0-Math.pow(2,7),y=Int8Array):"S16"===B?(x=x||0-Math.pow(2,15),y=Int16Array):"S32"===B?(x=x||0-Math.pow(2,31),y=Int32Array):y=Float32Array;return B},C=function(B,I){return B.height!==I.height||B.width!==I.width?!1:!0};t.setObject("layers.Raster",e,d);return e})},"esri/layers/rasterFormats/LercCodec":function(){define([],function(){var g={defaultNoDataValue:-3.4027999387901484E38,decode:function(t,u){u=u||{};var l=u.inputOffset||0,q=u.encodedMaskData||null===u.encodedMaskData,k={},a=new Uint8Array(t,
l,10);k.fileIdentifierString=String.fromCharCode.apply(null,a);if("CntZImage"!=k.fileIdentifierString.trim())throw"Unexpected file identifier string: "+k.fileIdentifierString;l+=10;a=new DataView(t,l,24);k.fileVersion=a.getInt32(0,!0);k.imageType=a.getInt32(4,!0);k.height=a.getUint32(8,!0);k.width=a.getUint32(12,!0);k.maxZError=a.getFloat64(16,!0);l+=24;if(!q)if(a=new DataView(t,l,16),k.mask={},k.mask.numBlocksY=a.getUint32(0,!0),k.mask.numBlocksX=a.getUint32(4,!0),k.mask.numBytes=a.getUint32(8,!0),
k.mask.maxValue=a.getFloat32(12,!0),l+=16,0<k.mask.numBytes){q=new Uint8Array(Math.ceil(k.width*k.height/8));a=new DataView(t,l,k.mask.numBytes);var d=a.getInt16(0,!0),n=2,b=0;do{if(0<d)for(;d--;)q[b++]=a.getUint8(n++);else{var h=a.getUint8(n++);for(d=-d;d--;)q[b++]=h}d=a.getInt16(n,!0);n+=2}while(n<k.mask.numBytes);if(-32768!==d||b<q.length)throw"Unexpected end of mask RLE encoding";k.mask.bitset=q;l+=k.mask.numBytes}else 0===(k.mask.numBytes|k.mask.numBlocksY|k.mask.maxValue)&&(q=new Uint8Array(Math.ceil(k.width*
k.height/8)),k.mask.bitset=q);a=new DataView(t,l,16);k.pixels={};k.pixels.numBlocksY=a.getUint32(0,!0);k.pixels.numBlocksX=a.getUint32(4,!0);k.pixels.numBytes=a.getUint32(8,!0);k.pixels.maxValue=a.getFloat32(12,!0);l+=16;q=k.pixels.numBlocksX;a=k.pixels.numBlocksY;q+=0<k.width%q?1:0;d=a+(0<k.height%a?1:0);k.pixels.blocks=Array(q*d);for(b=n=0;b<d;b++)for(h=0;h<q;h++){var c=0;a=new DataView(t,l,Math.min(10,t.byteLength-l));var f={};k.pixels.blocks[n++]=f;var p=a.getUint8(0);c++;f.encoding=p&63;if(3<
f.encoding)throw"Invalid block encoding ("+f.encoding+")";if(2===f.encoding)l++;else{if(0!==p&&2!==p){p>>=6;f.offsetType=p;if(2===p)f.offset=a.getInt8(1),c++;else if(1===p)f.offset=a.getInt16(1,!0),c+=2;else if(0===p)f.offset=a.getFloat32(1,!0),c+=4;else throw"Invalid block offset type";if(1===f.encoding)if(p=a.getUint8(c),c++,f.bitsPerPixel=p&63,p>>=6,f.numValidPixelsType=p,2===p)f.numValidPixels=a.getUint8(c),c++;else if(1===p)f.numValidPixels=a.getUint16(c,!0),c+=2;else if(0===p)f.numValidPixels=
a.getUint32(c,!0),c+=4;else throw"Invalid valid pixel count type";}l+=c;if(3!=f.encoding)if(0===f.encoding){p=(k.pixels.numBytes-1)/4;if(p!==Math.floor(p))throw"uncompressed block has invalid length";a=new ArrayBuffer(4*p);c=new Uint8Array(a);c.set(new Uint8Array(t,l,4*p));a=new Float32Array(a);f.rawData=a;l+=4*p}else 1===f.encoding&&(p=Math.ceil(f.numValidPixels*f.bitsPerPixel/8),a=new ArrayBuffer(4*Math.ceil(p/4)),c=new Uint8Array(a),c.set(new Uint8Array(t,l,p)),f.stuffedData=new Uint32Array(a),
l+=p)}}k.eofOffset=l;t=null!=u.noDataValue?u.noDataValue:g.defaultNoDataValue;q=u.encodedMaskData;p=u.returnMask;d=0;n=k.pixels.numBlocksX;b=k.pixels.numBlocksY;h=Math.floor(k.width/n);f=Math.floor(k.height/b);c=2*k.maxZError;l=Number.MAX_VALUE;q=q||(k.mask?k.mask.bitset:null);var r;a=new (u.pixelType||Float32Array)(k.width*k.height);p&&q&&(r=new Uint8Array(k.width*k.height));p=new Float32Array(h*f);for(var m,v,z=0;z<=b;z++){var A=z!==b?f:k.height%b;if(0!==A)for(var D=0;D<=n;D++){var E=D!==n?h:k.width%
n;if(0!==E){var F=z*k.width*f+D*h,y=k.width-E,x=k.pixels.blocks[d],w;if(2>x.encoding){if(0===x.encoding)var C=x.rawData;else{var B=w=C=void 0;m=x.stuffedData;v=x.bitsPerPixel;var I=x.numValidPixels,N=x.offset,V=c,Y=p,ca=k.pixels.maxValue,J=(1<<v)-1,O=0,U=0,ba=Math.ceil((ca-N)/V);m[m.length-1]<<=8*(4*m.length-Math.ceil(v*I/8));for(B=0;B<I;B++)0===U&&(C=m[O++],U=32),U>=v?(w=C>>>U-v&J,U-=v):(U=v-U,w=(C&J)<<U&J,C=m[O++],U=32-U,w+=C>>>U),Y[B]=w<ba?N+w*V:ca;C=p}w=0}else var Z=2===x.encoding?0:x.offset;
if(q)for(v=0;v<A;v++){if(F&7){var fa=q[F>>3];fa<<=F&7}for(m=0;m<E;m++)F&7||(fa=q[F>>3]),fa&128?(r&&(r[F]=1),B=2>x.encoding?C[w++]:Z,l=l>B?B:l,a[F++]=B):(r&&(r[F]=0),a[F++]=t),fa<<=1;F+=y}else if(2>x.encoding)for(v=0;v<A;v++){for(m=0;m<E;m++)B=C[w++],l=l>B?B:l,a[F++]=B;F+=y}else for(l=l>Z?Z:l,v=0;v<A;v++){for(m=0;m<E;m++)a[F++]=Z;F+=y}if(1===x.encoding&&w!==x.numValidPixels)throw"Block and Mask do not match";d++}}}Z=r;r={width:k.width,height:k.height,pixelData:a,minValue:l,maxValue:k.pixels.maxValue,
noDataValue:t};Z&&(r.maskData=Z);u.returnEncodedMask&&k.mask&&(r.encodedMaskData=k.mask.bitset?k.mask.bitset:null);if(u.returnFileInfo&&(r.fileInfo=e(k),u.computeUsedBitDepths)){u=r.fileInfo;Z=k.pixels.numBlocksX*k.pixels.numBlocksY;fa={};for(C=0;C<Z;C++)w=k.pixels.blocks[C],0===w.encoding?fa.float32=!0:1===w.encoding?fa[w.bitsPerPixel]=!0:fa[0]=!0;k=Object.keys(fa);u.bitDepths=k}return r}},e=function(t){return{fileIdentifierString:t.fileIdentifierString,fileVersion:t.fileVersion,imageType:t.imageType,
height:t.height,width:t.width,maxZError:t.maxZError,eofOffset:t.eofOffset,mask:t.mask?{numBlocksX:t.mask.numBlocksX,numBlocksY:t.mask.numBlocksY,numBytes:t.mask.numBytes,maxValue:t.mask.maxValue}:null,pixels:{numBlocksX:t.pixels.numBlocksX,numBlocksY:t.pixels.numBlocksY,numBytes:t.pixels.numBytes,maxValue:t.pixels.maxValue,noDataValue:this.noDataValue}}};return g})},"esri/layers/rasterFormats/Lerc2Codec":function(){define([],function(){var g={unstuff:function(u,l,q,k,a,d,n,b){var h=(1<<q)-1,c=0,f,
p=0;u[u.length-1]<<=8*(4*u.length-Math.ceil(q*k/8));if(a)for(f=0;f<k;f++){if(0===p){var r=u[c++];p=32}if(p>=q){var m=r>>>p-q&h;p-=q}else p=q-p,m=(r&h)<<p&h,r=u[c++],p=32-p,m+=r>>>p;l[f]=a[m]}else for(a=Math.ceil((b-d)/n),f=0;f<k;f++)0===p&&(r=u[c++],p=32),p>=q?(m=r>>>p-q&h,p-=q):(p=q-p,m=(r&h)<<p&h,r=u[c++],p=32-p,m+=r>>>p),l[f]=m<a?d+m*n:b},unstuffLUT:function(u,l,q,k,a,d){var n=(1<<l)-1,b=0,h=0,c=0,f=c=0,p=[];u[u.length-1]<<=8*(4*u.length-Math.ceil(l*q/8));var r=Math.ceil((d-k)/a);for(h=0;h<q;h++){if(0===
c){var m=u[b++];c=32}c>=l?(f=m>>>c-l&n,c-=l):(c=l-c,f=(m&n)<<c&n,m=u[b++],c=32-c,f+=m>>>c);p[h]=f<r?k+f*a:d}p.unshift(k);return p},unstuff2:function(u,l,q,k,a,d,n,b){var h=(1<<q)-1,c=0,f,p=0,r=0;if(a)for(f=0;f<k;f++){if(0===p){var m=u[c++];p=32;r=0}if(p>=q){var v=m>>>r&h;p-=q;r+=q}else{var z=q-p;v=m>>>r&h;m=u[c++];p=32-z;v|=(m&(1<<z)-1)<<q-z;r=z}l[f]=a[v]}else for(a=Math.ceil((b-d)/n),f=0;f<k;f++)0===p&&(m=u[c++],p=32,r=0),p>=q?(v=m>>>r&h,p-=q,r+=q):(z=q-p,v=m>>>r&h,m=u[c++],p=32-z,v|=(m&(1<<z)-1)<<
q-z,r=z),l[f]=v<a?d+v*n:b;return l},unstuffLUT2:function(u,l,q,k,a,d){var n=(1<<l)-1,b=0,h=0,c=0,f=0,p=0,r=0,m=[],v=Math.ceil((d-k)/a);for(h=0;h<q;h++){if(0===f){var z=u[b++];f=32;r=0}f>=l?(p=z>>>r&n,f-=l,r+=l):(c=l-f,p=z>>>r&n,z=u[b++],f=32-c,p|=(z&(1<<c)-1)<<l-c,r=c);m[h]=p<v?k+p*a:d}m.unshift(k);return m},originalUnstuff:function(u,l,q,k){var a=(1<<q)-1,d=0,n,b=0;u[u.length-1]<<=8*(4*u.length-Math.ceil(q*k/8));for(n=0;n<k;n++){if(0===b){var h=u[d++];b=32}if(b>=q){var c=h>>>b-q&a;b-=q}else b=q-
b,c=(h&a)<<b&a,h=u[d++],b=32-b,c+=h>>>b;l[n]=c}return l},originalUnstuff2:function(u,l,q,k){var a=(1<<q)-1,d=0,n,b=0,h=0;for(n=0;n<k;n++){if(0===b){var c=u[d++];b=32;h=0}if(b>=q){var f=c>>>h&a;b-=q;h+=q}else{var p=q-b;f=c>>>h&a;c=u[d++];b=32-p;f|=(c&(1<<p)-1)<<q-p;h=p}l[n]=f}return l}},e={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(u){for(var l=65535,q=65535,k=u.length,a=Math.floor(k/2),d=0;a;){var n=359<=a?359:a;a-=n;do l+=u[d++]<<8,q+=l+=u[d++];while(--n);l=(l&65535)+(l>>>16);q=(q&
65535)+(q>>>16)}k&1&&(q+=l+=u[d]<<8);return((q&65535)+(q>>>16)<<16|(l&65535)+(l>>>16))>>>0},readHeaderInfo:function(u,l){var q=l.ptr,k=new Uint8Array(u,q,6),a={};a.fileIdentifierString=String.fromCharCode.apply(null,k);if(0!==a.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+a.fileIdentifierString;q+=6;k=new DataView(u,q,8);var d=k.getInt32(0,!0);a.fileVersion=d;q+=4;3<=d&&(a.checksum=k.getUint32(4,!0),q+=4);k=new DataView(u,q,12);a.height=k.getUint32(0,
!0);a.width=k.getUint32(4,!0);q+=8;4<=d?(a.numDims=k.getUint32(8,!0),q+=4):a.numDims=1;k=new DataView(u,q,40);a.numValidPixel=k.getUint32(0,!0);a.microBlockSize=k.getInt32(4,!0);a.blobSize=k.getInt32(8,!0);a.imageType=k.getInt32(12,!0);a.maxZError=k.getFloat64(16,!0);a.zMin=k.getFloat64(24,!0);a.zMax=k.getFloat64(32,!0);q+=40;l.headerInfo=a;l.ptr=q;if(3<=d&&(u=this.computeChecksumFletcher32(new Uint8Array(u,q-(4<=d?52:48),a.blobSize-14)),u!==a.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(u,
l){var q=l.headerInfo,k=this.getDataTypeArray(q.imageType),a=q.numDims*this.getDataTypeSize(q.imageType),d=this.readSubArray(u,l.ptr,k,a);u=this.readSubArray(u,l.ptr+a,k,a);l.ptr+=2*a;a=!0;for(l=0;l<q.numDims;l++)if(d[l]!==u[l]){a=!1;break}q.minValues=d;q.maxValues=u;return a},readSubArray:function(u,l,q,k){if(q===Uint8Array)u=new Uint8Array(u,l,k);else{var a=new ArrayBuffer(k);(new Uint8Array(a)).set(new Uint8Array(u,l,k));u=new q(a)}return u},readMask:function(u,l){var q=l.ptr,k=l.headerInfo,a=
k.width*k.height,d=k.numValidPixel,n=new DataView(u,q,4);k={};k.numBytes=n.getUint32(0,!0);q+=4;if((0===d||a===d)&&0!==k.numBytes)throw"invalid mask";if(0===d)d=new Uint8Array(Math.ceil(a/8)),k.bitset=d,n=new Uint8Array(a),l.pixels.resultMask=n,q+=k.numBytes;else if(0<k.numBytes){d=new Uint8Array(Math.ceil(a/8));n=new DataView(u,q,k.numBytes);u=n.getInt16(0,!0);var b=2,h=0,c=0;do{if(0<u)for(;u--;)d[h++]=n.getUint8(b++);else for(c=n.getUint8(b++),u=-u;u--;)d[h++]=c;u=n.getInt16(b,!0);b+=2}while(b<
k.numBytes);if(-32768!==u||h<d.length)throw"Unexpected end of mask RLE encoding";n=new Uint8Array(a);for(b=b=u=0;b<a;b++)b&7?(u=d[b>>3],u<<=b&7):u=d[b>>3],u&128&&(n[b]=1);l.pixels.resultMask=n;k.bitset=d;q+=k.numBytes}l.ptr=q;l.mask=k;return!0},readDataOneSweep:function(u,l,q,k){var a=l.ptr,d=l.headerInfo,n=d.numDims,b=d.width*d.height;d=d.numValidPixel*e.getDataTypeSize(d.imageType)*n;var h=l.pixels.resultMask;if(q===Uint8Array)u=new Uint8Array(u,a,d);else{var c=new ArrayBuffer(d);(new Uint8Array(c)).set(new Uint8Array(u,
a,d));u=new q(c)}if(u.length===b*n)l.pixels.resultPixels=k?e.swapDimensionOrder(u,b,n,q,!0):u;else{l.pixels.resultPixels=new q(b*n);var f=c=q=0,p=0;if(1<n)if(k)for(c=0;c<b;c++){if(h[c])for(p=c,f=0;f<n;f++,p+=b)l.pixels.resultPixels[p]=u[q++]}else for(c=0;c<b;c++){if(h[c])for(p=c*n,f=0;f<n;f++)l.pixels.resultPixels[p+f]=u[q++]}else for(c=0;c<b;c++)h[c]&&(l.pixels.resultPixels[c]=u[q++])}l.ptr=a+d;return!0},readHuffmanTree:function(u,l){var q=this.HUFFMAN_LUT_BITS_MAX,k=new DataView(u,l.ptr,16);l.ptr+=
16;if(2>k.getInt32(0,!0))throw"unsupported Huffman version";var a=k.getInt32(4,!0),d=k.getInt32(8,!0);k=k.getInt32(12,!0);if(d>=k)return!1;var n=new Uint32Array(k-d);e.decodeBits(u,l,n);var b=[],h;for(h=d;h<k;h++){var c=h-(h<a?0:a);b[c]={first:n[h-d],second:null}}h=u.byteLength-l.ptr;n=new ArrayBuffer(4*Math.ceil(h/4));(new Uint8Array(n)).set(new Uint8Array(u,l.ptr,h));u=new Uint32Array(n);l=0;n=0;var f=u[0];for(h=d;h<k;h++){c=h-(h<a?0:a);var p=b[c].first;0<p&&(b[c].second=f<<l>>>32-p,32-l>=p?(l+=
p,32===l&&(l=0,n++,f=u[n])):(l+=p-32,n++,f=u[n],b[c].second|=f>>>32-l))}var r=f=0,m=new t;for(h=0;h<b.length;h++)void 0!==b[h]&&(f=Math.max(f,b[h].first));r=f>=q?q:f;q=[];var v;for(h=d;h<k;h++)if(c=h-(h<a?0:a),p=b[c].first,0<p)if(d=[p,c],p<=r){c=b[c].second<<r-p;var z=1<<r-p;for(p=0;p<z;p++)q[c|p]=d}else for(c=b[c].second,z=m,--p;0<=p;p--)(v=c>>>p&1)?(z.right||(z.right=new t),z=z.right):(z.left||(z.left=new t),z=z.left),0!==p||z.val||(z.val=d[1]);return{decodeLut:q,numBitsLUTQick:r,numBitsLUT:f,tree:m,
stuffedData:u,srcPtr:n,bitPos:l}},readHuffman:function(u,l,q,k){var a=l.headerInfo.numDims,d=l.headerInfo.height,n=l.headerInfo.width,b=n*d,h=this.readHuffmanTree(u,l);u=h.decodeLut;var c=h.tree,f=h.stuffedData,p=h.srcPtr,r=h.bitPos,m=h.numBitsLUTQick;h=h.numBitsLUT;var v=0===l.headerInfo.imageType?128:0,z=l.pixels.resultMask,A,D,E,F,y,x,w=0;0<r&&(p++,r=0);var C=f[p],B=1===l.encodeMode,I=new q(b*a),N=I,V;if(2>a||B)for(V=0;V<a;V++)if(1<a&&(N=new q(I.buffer,b*V,b),w=0),l.headerInfo.numValidPixel===
n*d)for(E=y=0;E<d;E++)for(F=0;F<n;F++,y++){var Y=0;var ca=A=C<<r>>>32-m;32-r<m&&(ca=A|=f[p+1]>>>64-r-m);if(u[ca])Y=u[ca][1],r+=u[ca][0];else for(ca=A=C<<r>>>32-h,32-r<h&&(ca=A|=f[p+1]>>>64-r-h),ca=c,x=0;x<h;x++)if(ca=(D=A>>>h-x-1&1)?ca.right:ca.left,!ca.left&&!ca.right){Y=ca.val;r=r+x+1;break}32<=r&&(r-=32,p++,C=f[p]);Y-=v;B?(Y=0<F?Y+w:0<E?Y+N[y-n]:Y+w,Y&=255,w=N[y]=Y):N[y]=Y}else for(E=y=0;E<d;E++)for(F=0;F<n;F++,y++){if(z[y]){Y=0;ca=A=C<<r>>>32-m;32-r<m&&(ca=A|=f[p+1]>>>64-r-m);if(u[ca])Y=u[ca][1],
r+=u[ca][0];else for(ca=A=C<<r>>>32-h,32-r<h&&(ca=A|=f[p+1]>>>64-r-h),ca=c,x=0;x<h;x++)if(ca=(D=A>>>h-x-1&1)?ca.right:ca.left,!ca.left&&!ca.right){Y=ca.val;r=r+x+1;break}32<=r&&(r-=32,p++,C=f[p]);Y-=v;B?(Y=0<F&&z[y-1]?Y+w:0<E&&z[y-n]?Y+N[y-n]:Y+w,Y&=255,w=N[y]=Y):N[y]=Y}}else for(E=y=0;E<d;E++)for(F=0;F<n;F++)if(y=E*n+F,!z||z[y])for(V=0;V<a;V++,y+=b){Y=0;ca=A=C<<r>>>32-m;32-r<m&&(ca=A|=f[p+1]>>>64-r-m);if(u[ca])Y=u[ca][1],r+=u[ca][0];else for(ca=A=C<<r>>>32-h,32-r<h&&(ca=A|=f[p+1]>>>64-r-h),ca=c,
x=0;x<h;x++)if(ca=(D=A>>>h-x-1&1)?ca.right:ca.left,!ca.left&&!ca.right){Y=ca.val;r=r+x+1;break}32<=r&&(r-=32,p++,C=f[p]);Y-=v;N[y]=Y}l.ptr=l.ptr+4*(p+1)+(0<r?4:0);l.pixels.resultPixels=I;1<a&&!k&&(l.pixels.resultPixels=e.swapDimensionOrder(I,b,a,q))},decodeBits:function(u,l,q,k,a){var d=l.headerInfo,n=d.fileVersion,b=0,h=new DataView(u,l.ptr,5<=u.byteLength-l.ptr?5:u.byteLength-l.ptr),c=h.getUint8(0);b++;var f=c>>6,p=0===f?4:3-f,r=0<(c&32)?!0:!1;f=c&31;c=0;if(1===p)c=h.getUint8(b),b++;else if(2===
p)c=h.getUint16(b,!0),b+=2;else if(4===p)c=h.getUint32(b,!0),b+=4;else throw"Invalid valid pixel count type";p=2*d.maxZError;a=1<d.numDims?d.maxValues[a]:d.zMax;if(r){l.counter.lut++;r=h.getUint8(b);b++;d=Math.ceil((r-1)*f/8);var m=Math.ceil(d/4);m=new ArrayBuffer(4*m);var v=new Uint8Array(m);l.ptr+=b;v.set(new Uint8Array(u,l.ptr,d));b=new Uint32Array(m);l.ptr+=d;for(h=0;r-1>>>h;)h++;d=Math.ceil(c*h/8);m=Math.ceil(d/4);m=new ArrayBuffer(4*m);v=new Uint8Array(m);v.set(new Uint8Array(u,l.ptr,d));u=
new Uint32Array(m);l.ptr+=d;l=3<=n?g.unstuffLUT2(b,f,r-1,k,p,a):g.unstuffLUT(b,f,r-1,k,p,a);3<=n?g.unstuff2(u,q,h,c,l):g.unstuff(u,q,h,c,l)}else l.counter.bitstuffer++,h=f,l.ptr+=b,0<h&&(d=Math.ceil(c*h/8),m=Math.ceil(d/4),m=new ArrayBuffer(4*m),v=new Uint8Array(m),v.set(new Uint8Array(u,l.ptr,d)),u=new Uint32Array(m),l.ptr+=d,3<=n?null==k?g.originalUnstuff2(u,q,h,c):g.unstuff2(u,q,h,c,!1,k,p,a):null==k?g.originalUnstuff(u,q,h,c):g.unstuff(u,q,h,c,!1,k,p,a))},readTiles:function(u,l,q,k){var a=l.headerInfo,
d=a.width,n=a.height,b=d*n,h=a.microBlockSize,c=a.imageType,f=e.getDataTypeSize(c),p=Math.ceil(d/h),r=Math.ceil(n/h);l.pixels.numBlocksY=r;l.pixels.numBlocksX=p;var m=l.pixels.ptr=0,v=0,z=0,A=0,D=0,E=0,F=0,y=0,x=m=0,w=0,C=0,B=F=0;F=F=0;var I=new q(h*h);n=n%h||h;var N=d%h||h,V=a.numDims,Y,ca=l.pixels.resultMask,J=l.pixels.resultPixels,O=5<=a.fileVersion?14:15,U=a.zMax;for(z=0;z<r;z++)for(D=z!==r-1?h:n,A=0;A<p;A++)for(E=A!==p-1?h:N,w=z*d*h+A*h,C=d-E,Y=0;Y<V;Y++){1<V?(B=J,w=z*d*h+A*h,J=new q(l.pixels.resultPixels.buffer,
b*Y*f,b),U=a.maxValues[Y]):B=null;F=u.byteLength-l.ptr;v=new DataView(u,l.ptr,Math.min(10,F));var ba={};F=0;y=v.getUint8(0);F++;var Z=5<=a.fileVersion?y&4:0;m=y>>6&255;x=y>>2&O;if(x!==(A*h>>3&O))throw"integrity issue";if(Z&&0===Y)throw"integrity issue";y&=3;if(3<y)throw l.ptr+=F,"Invalid block encoding ("+y+")";if(2===y){if(Z)if(ca)for(m=0;m<D;m++)for(v=0;v<E;v++)ca[w]&&(J[w]=B[w]),w++;else for(m=0;m<D;m++)for(v=0;v<E;v++)J[w]=B[w],w++;l.counter.constant++;l.ptr+=F}else if(0===y){if(Z)throw"integrity issue";
l.counter.uncompressed++;l.ptr+=F;F=D*E*f;B=u.byteLength-l.ptr;F=F<B?F:B;B=new ArrayBuffer(0===F%f?F:F+f-F%f);Z=new Uint8Array(B);Z.set(new Uint8Array(u,l.ptr,F));B=new q(B);F=0;if(ca)for(m=0;m<D;m++){for(v=0;v<E;v++)ca[w]&&(J[w]=B[F++]),w++;w+=C}else for(m=0;m<D;m++){for(v=0;v<E;v++)J[w++]=B[F++];w+=C}l.ptr+=F*f}else if(m=e.getDataTypeUsed(Z&&6>c?4:c,m),ba=e.getOnePixel(ba,F,m,v),F+=e.getDataTypeSize(m),3===y)if(l.ptr+=F,l.counter.constantoffset++,ca)for(m=0;m<D;m++){for(v=0;v<E;v++)ca[w]&&(J[w]=
Z?Math.min(U,B[w]+ba):ba),w++;w+=C}else for(m=0;m<D;m++){for(v=0;v<E;v++)J[w]=Z?Math.min(U,B[w]+ba):ba,w++;w+=C}else if(l.ptr+=F,e.decodeBits(u,l,I,ba,Y),F=0,Z)if(ca)for(m=0;m<D;m++){for(v=0;v<E;v++)ca[w]&&(J[w]=I[F++]+B[w]),w++;w+=C}else for(m=0;m<D;m++){for(v=0;v<E;v++)J[w]=I[F++]+B[w],w++;w+=C}else if(ca)for(m=0;m<D;m++){for(v=0;v<E;v++)ca[w]&&(J[w]=I[F++]),w++;w+=C}else for(m=0;m<D;m++){for(v=0;v<E;v++)J[w++]=I[F++];w+=C}}1<V&&!k&&(l.pixels.resultPixels=e.swapDimensionOrder(l.pixels.resultPixels,
b,V,q))},formatFileInfo:function(u){return{fileIdentifierString:u.headerInfo.fileIdentifierString,fileVersion:u.headerInfo.fileVersion,imageType:u.headerInfo.imageType,height:u.headerInfo.height,width:u.headerInfo.width,numValidPixel:u.headerInfo.numValidPixel,microBlockSize:u.headerInfo.microBlockSize,blobSize:u.headerInfo.blobSize,maxZError:u.headerInfo.maxZError,pixelType:e.getPixelType(u.headerInfo.imageType),eofOffset:u.eofOffset,mask:u.mask?{numBytes:u.mask.numBytes}:null,pixels:{numBlocksX:u.pixels.numBlocksX,
numBlocksY:u.pixels.numBlocksY,maxValue:u.headerInfo.zMax,minValue:u.headerInfo.zMin,noDataValue:u.noDataValue}}},constructConstantSurface:function(u,l){var q=u.headerInfo.zMax,k=u.headerInfo.zMin,a=u.headerInfo.maxValues,d=u.headerInfo.numDims,n=u.headerInfo.height*u.headerInfo.width,b=0,h=0,c=0,f=u.pixels.resultMask;u=u.pixels.resultPixels;if(f)if(1<d)if(l)for(b=0;b<d;b++)for(c=b*n,q=a[b],h=0;h<n;h++)f[h]&&(u[c+h]=q);else for(h=0;h<n;h++){if(f[h])for(c=h*d,b=0;b<d;b++)u[c+d]=a[b]}else for(h=0;h<
n;h++)f[h]&&(u[h]=q);else if(1<d&&k!==q)if(l)for(b=0;b<d;b++)for(c=b*n,q=a[b],h=0;h<n;h++)u[c+h]=q;else for(h=0;h<n;h++)for(c=h*d,b=0;b<d;b++)u[c+b]=a[b];else for(h=0;h<n*d;h++)u[h]=q},getDataTypeArray:function(u){switch(u){case 0:u=Int8Array;break;case 1:u=Uint8Array;break;case 2:u=Int16Array;break;case 3:u=Uint16Array;break;case 4:u=Int32Array;break;case 5:u=Uint32Array;break;case 6:u=Float32Array;break;case 7:u=Float64Array;break;default:u=Float32Array}return u},getPixelType:function(u){switch(u){case 0:u=
"S8";break;case 1:u="U8";break;case 2:u="S16";break;case 3:u="U16";break;case 4:u="S32";break;case 5:u="U32";break;case 6:u="F32";break;case 7:u="F64";break;default:u="F32"}return u},isValidPixelValue:function(u,l){if(null==l)return!1;switch(u){case 0:u=-128<=l&&127>=l;break;case 1:u=0<=l&&255>=l;break;case 2:u=-32768<=l&&32767>=l;break;case 3:u=0<=l&&65536>=l;break;case 4:u=-2147483648<=l&&2147483647>=l;break;case 5:u=0<=l&&4294967296>=l;break;case 6:u=-3.4027999387901484E38<=l&&3.4027999387901484E38>=
l;break;case 7:u=4.9E-324<=l&&1.7976931348623157E308>=l;break;default:u=!1}return u},getDataTypeSize:function(u){var l=0;switch(u){case 0:case 1:l=1;break;case 2:case 3:l=2;break;case 4:case 5:case 6:l=4;break;case 7:l=8;break;default:l=u}return l},getDataTypeUsed:function(u,l){var q=u;switch(u){case 2:case 4:q=u-l;break;case 3:case 5:q=u-2*l;break;case 6:q=0===l?u:1===l?2:1;break;case 7:q=0===l?u:u-2*l+1;break;default:q=u}return q},getOnePixel:function(u,l,q,k){u=0;switch(q){case 0:u=k.getInt8(l);
break;case 1:u=k.getUint8(l);break;case 2:u=k.getInt16(l,!0);break;case 3:u=k.getUint16(l,!0);break;case 4:u=k.getInt32(l,!0);break;case 5:u=k.getUInt32(l,!0);break;case 6:u=k.getFloat32(l,!0);break;case 7:u=k.getFloat64(l,!0);break;default:throw"the decoder does not understand this pixel type";}return u},swapDimensionOrder:function(u,l,q,k,a){var d=0,n=0,b=0,h=0,c=u;if(1<q)if(c=new k(l*q),a)for(d=0;d<l;d++)for(h=d,b=0;b<q;b++,h+=l)c[h]=u[n++];else for(d=0;d<l;d++)for(h=d,b=0;b<q;b++,h+=l)c[n++]=
u[h];return c}},t=function(u,l,q){this.val=u;this.left=l;this.right=q};return{decode:function(u,l){l=l||{};var q=l.noDataValue,k=0,a={};a.ptr=l.inputOffset||0;a.pixels={};if(e.readHeaderInfo(u,a)){k=a.headerInfo;var d=k.fileVersion,n=e.getDataTypeArray(k.imageType);if(5<d)throw"unsupported lerc version 2."+d;e.readMask(u,a);k.numValidPixel===k.width*k.height||a.pixels.resultMask||(a.pixels.resultMask=l.maskData);var b=k.width*k.height;a.pixels.resultPixels=new n(b*k.numDims);a.counter={onesweep:0,
uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var h=!l.returnPixelInterleavedDims;if(0!==k.numValidPixel)if(k.zMax===k.zMin)e.constructConstantSurface(a,h);else if(4<=d&&e.checkMinMaxRanges(u,a))e.constructConstantSurface(a,h);else{var c=new DataView(u,a.ptr,2),f=c.getUint8(0);a.ptr++;if(f)e.readDataOneSweep(u,a,n,h);else if(1<d&&1>=k.imageType&&1E-5>Math.abs(k.maxZError-.5)){c=c.getUint8(1);a.ptr++;a.encodeMode=c;if(2<c||4>d&&1<c)throw"Invalid Huffman flag "+c;c?e.readHuffman(u,
a,n,h):e.readTiles(u,a,n,h)}else e.readTiles(u,a,n,h)}a.eofOffset=a.ptr;l.inputOffset?(u=a.headerInfo.blobSize+l.inputOffset-a.ptr,1<=Math.abs(u)&&(a.eofOffset=l.inputOffset+a.headerInfo.blobSize)):(u=a.headerInfo.blobSize-a.ptr,1<=Math.abs(u)&&(a.eofOffset=a.headerInfo.blobSize));u={width:k.width,height:k.height,pixelData:a.pixels.resultPixels,minValue:k.zMin,maxValue:k.zMax,validPixelCount:k.numValidPixel,dimCount:k.numDims,dimStats:{minValues:k.minValues,maxValues:k.maxValues},maskData:a.pixels.resultMask};
if(a.pixels.resultMask&&e.isValidPixelValue(k.imageType,q)){d=a.pixels.resultMask;for(k=0;k<b;k++)d[k]||(u.pixelData[k]=q);u.noDataValue=q}a.noDataValue=q;l.returnFileInfo&&(u.fileInfo=e.formatFileInfo(a));return u}},getBandCount:function(u){for(var l=0,q=0,k={ptr:0,pixels:{}};q<u.byteLength-58;)e.readHeaderInfo(u,k),q+=k.headerInfo.blobSize,l++,k.ptr=q;return l}}})},"esri/layers/pixelFilters/VectorFieldPixelFilter":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../../kernel ../../lang dojo/_base/array".split(" "),
function(g,e,t,u,l,q){g=g(null,{declaredClass:"esri.layers.pixelFilters.VectorFieldPixelFilter",speedUnits:["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"],constructor:function(k){e.mixin(this,k);this.isDataUV=k&&k.isDataUV?k.isDataUV:!1;this.computeMagnitudeAndDirection=e.hitch(this,this.computeMagnitudeAndDirection);this.unitConversionFactor=1;this._updateUnitConvFactor()},setUnits:function(k,a){this.inputUnit=k;this.outputUnit=a;this.unitConversionFactor=
1;this._updateUnitConvFactor()},_updateUnitConvFactor:function(){var k=q.indexOf(this.speedUnits,this.inputUnit),a=q.indexOf(this.speedUnits,this.outputUnit);if(this.inputUnit&&this.outputUnit&&0<=k&&0<=a){var d=[1,.277778,.514444,.3048,.44704,0];this.unitConversionFactor=d[k]/d[a]}},computeMagnitudeAndDirection:function(k){if(!l.isDefined(k))throw"Could not compute magnitude and direction. No pixel data is available.";var a=k.pixelBlock;if(!l.isDefined(a)||2!==a.getPlaneCount())throw"Could not compute magnitude and direction. Pixel data does not contain two bands.";
var d=k.extent,n=(d.xmax-d.xmin)/a.width,b=(d.ymax-d.ymin)/a.height,h=d.xmin+n/2;d=d.ymax-b/2;a.statistics[0].minValue=0;a.statistics[0].maxValue=0;var c=180/Math.PI,f=[],p=0,r=0,m=0,v=!l.isDefined(a.mask),z,A,D,E;var F=D=Infinity;var y=E=-Infinity;for(p=0;p<a.height;p++)for(r=0;r<a.width;r++,m++)if(f.push([h+n*r,d-b*p]),v||a.mask[m]){var x=z=a.pixels[0][m];var w=A=a.pixels[1][m];this.isDataUV&&(x=Math.sqrt(z*z+A*A),w=90-c*Math.atan2(A,z));a.pixels[0][m]=x*this.unitConversionFactor;a.pixels[1][m]=
w;x>y&&(y=x);x<F&&(F=x);w>E&&(E=w);w<D&&(D=w)}a.statistics[0].maxValue=y;a.statistics[0].minValue=F;a.statistics[1].maxValue=E;a.statistics[1].minValue=D;k.locations=f;return k}});e.setObject("layers.pixelFilters.VectorFieldPixelFilter",g,u);return g})},"esri/layers/rasterFormats/ImageCanvasDecoder":function(){define(["require","dojo/_base/declare","dojo/Deferred","dojo/sniff"],function(g,e,t,u){var l;return e(null,{constructor:function(q){this.ctx=q.ctx;this._loadRasterFormatModule()},decode:function(q,
k){if(!k.width||!k.height)throw"Native decoding requires the image format, width and height";var a=new t,d,n=new Uint8Array(q);q=this._getFormat(q);if("error"===q)throw"invalid format";"jpeg"===q&&(d=this._getMask(n,k));var b="",h;for(h=0;h<n.length;h+=65535){var c=n.subarray(h,h+65535>n.length-1?n.length-1:h+65535);b+=String.fromCharCode.apply(null,c)}n="data:image/"+q+";base64,"+window.btoa(b);var f=new Image,p;f.src=n;var r=this;f.onload=function(){r.ctx.clearRect(0,0,k.width,k.height);r.ctx.drawImage(f,
0,0);var m=r.ctx.getImageData(0,0,f.width,f.height);p=m.data;if(d)for(h=0;h<d.length;h++)p[4*h+3]=d[h]?255:0;r.ctx.putImageData(m,0,0);a.resolve(null)};f.onerror=function(){a.reject("cannot load image")};return a},_getFormat:function(q){q=new Uint8Array(q,0,10);var k="error";255===q[0]&&216===q[1]?k="jpeg":137===q[0]&&80===q[1]&&78===q[2]&&71===q[3]&&(k="png");return k},_getMask:function(q,k){try{if(!l)throw"The zlib decoder module is not loaded.";var a=0,d=0,n=Math.round(q.length/2);1===n%2&&(n+=
1);var b=q.length-2;for(a=n;a<b&&(255!==q[a]||217!==q[a+1]);a++);n=a+=2;if(n<q.length-1){var h=(new l(q.subarray(n))).getBytes();var c=new Uint8Array(k.width*k.height);for(a=q=0;a<h.length;a++)for(d=7;0<=d;d--)c[q++]=h[a]>>d&1}}catch(f){}return c},_loadRasterFormatModule:function(){10>u("ie")||g(["./Zlib"],function(q){l=q})}})})},"esri/tasks/ImageServiceIdentifyTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../request ../geometry/normalizeUtils ./Task ./ImageServiceIdentifyResult".split(" "),
function(g,e,t,u,l,q,k,a){g=g(k,{declaredClass:"esri.tasks.ImageServiceIdentifyTask",constructor:function(d){this._url.path+="/identify";this._handler=e.hitch(this,this._handler)},__msigns:[{n:"execute",c:3,a:[{i:0,p:["geometry"]}],e:2}],_handler:function(d,n,b,h,c){try{var f=new a(d);this._successHandler([f],"onComplete",b,c)}catch(p){this._errorHandler(p,h,c)}},execute:function(d,n,b,h){var c=h.assembly;d=this._encode(e.mixin({},this._url.query,{f:"json"},d.toJson(c&&c[0])));var f=this._handler,
p=this._errorHandler;return l({url:this._url.path,content:d,callbackParamName:"callback",load:function(r,m){f(r,m,n,b,h.dfd)},error:function(r){p(r,b,h.dfd)}})},onComplete:function(){}});q._createWrappers(g);e.setObject("tasks.ImageServiceIdentifyTask",g,u);return g})},"esri/geometry/normalizeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has ../kernel ../config ../deferredUtils ./Extent ./Polyline ./Polygon ./webMercatorUtils ./jsonUtils".split(" "),function(g,
e,t,u,l,q,k,a,d,n,b,h){function c(y,x){return Math.ceil((y-x)/(2*x))}function f(y,x){var w=y.paths||y.rings,C,B,I=w.length;for(C=0;C<I;C++){var N=w[C].length;for(B=0;B<N;B++){var V=y.getPoint(C,B);y.setPoint(C,B,V.offset(x,0))}}return y}function p(y,x){if(!(y instanceof d||y instanceof n))throw Error("_straightLineDensify: the input geometry is neither polyline nor polygon");var w=y instanceof d,C=[],B;g.forEach(w?y.paths:y.rings,function(I){C.push(B=[]);B.push([I[0][0],I[0][1]]);var N,V;for(N=0;N<
I.length-1;N++){var Y=I[N][0];var ca=I[N][1];var J=I[N+1][0];var O=I[N+1][1];var U=Math.sqrt((J-Y)*(J-Y)+(O-ca)*(O-ca));var ba=(O-ca)/U;var Z=(J-Y)/U;var fa=U/x;if(1<fa){for(V=1;V<=fa-1;V++){var pa=V*x;var da=Z*pa+Y;pa=ba*pa+ca;B.push([da,pa])}V=(U+Math.floor(fa-1)*x)/2;da=Z*V+Y;pa=ba*V+ca;B.push([da,pa])}B.push([J,O])}});return w?new d({paths:C,spatialReference:y.spatialReference}):new n({rings:C,spatialReference:y.spatialReference})}function r(y,x,w){x&&(y=p(y,1E6),y=b.webMercatorToGeographic(y,
!0));w&&(y=f(y,w));return y}function m(y,x,w){var C=y.x||y[0];if(C>x){var B=c(C,x);y.x?y=y.offset(-2*B*x,0):y[0]=C+-2*B*x}else C<w&&(B=c(C,w),y.x?y=y.offset(-2*B*w,0):y[0]=C+-2*B*w);return y}function v(y,x){var w=-1;g.forEach(x.cutIndexes,function(C,B){var I=x.geometries[B];g.forEach(I.rings||I.paths,function(N,V){g.some(N,function(Y){if(!(180>Y[0])){Y=0;var ca,J=N.length;for(ca=0;ca<J;ca++){var O=N[ca][0];Y=O>Y?O:Y}Y=Number(Y.toFixed(9));Y=-360*c(Y,180);J=N.length;for(ca=0;ca<J;ca++)O=I.getPoint(V,
ca),I.setPoint(V,ca,O.offset(Y,0))}return!0})});C===w?I.rings?g.forEach(I.rings,function(N){y[C]=y[C].addRing(N)}):g.forEach(I.paths,function(N){y[C]=y[C].addPath(N)}):(w=C,y[C]=I)});return y}function z(y,x,w,C){var B=new t;B.addCallbacks(w,C);x=x||q.defaults.geometryService;var I=[],N=[],V,Y,ca,J,O,U,ba,Z,fa=0;g.forEach(y,function(P){if(P)if(V||(V=P.spatialReference,Y=V._getInfo(),J=(ca=V._isWebMercator())?2.0037508342788905E7:180,O=ca?-2.0037508342788905E7:-180,U=ca?102100:4326,ba=new d({paths:[[[J,
O],[J,J]]],spatialReference:{wkid:U}}),Z=new d({paths:[[[O,O],[O,J]]],spatialReference:{wkid:U}})),Y){var aa=h.fromJson(P.toJson()),ea=P.getExtent();"point"===P.type?I.push(m(aa,J,O)):"multipoint"===P.type?(aa.points=g.map(aa.points,function(X){return m(X,J,O)}),I.push(aa)):"extent"===P.type?(aa=ea._normalize(null,null,Y),I.push(aa.rings?new n(aa):aa)):ea?(P=2*c(ea.xmin,O)*J,aa=0===P?aa:f(aa,P),ea=ea.offset(P,0),ea.intersects(ba)&&ea.xmax!==J?(fa=ea.xmax>fa?ea.xmax:fa,aa=r(aa,ca),N.push(aa),I.push("cut")):
ea.intersects(Z)&&ea.xmin!==O?(fa=2*ea.xmax*J>fa?2*ea.xmax*J:fa,aa=r(aa,ca,360),N.push(aa),I.push("cut")):I.push(aa)):I.push(aa)}else I.push(P);else I.push(P)});w=new d;C=c(fa,J);for(var pa=-90,da=C;0<C;){var ha=-180+360*C;w.addPath([[ha,pa],[ha,-1*pa]]);pa*=-1;C--}0<N.length&&0<da?x?x.cut(N,w,function(P){N=v(N,P);var aa=[];g.forEach(I,function(ea,X){"cut"===ea&&(ea=N.shift(),y[X].rings&&1<y[X].rings.length&&ea.rings.length>=y[X].rings.length?(I[X]="simplify",aa.push(ea)):I[X]=!0===ca?b.geographicToWebMercator(ea):
ea)});0<aa.length?x.simplify(aa,function(ea){g.forEach(I,function(X,S){"simplify"===X&&(I[S]=!0===ca?b.geographicToWebMercator(ea.shift()):ea.shift())});B.callback(I)},function(ea){B.errback(ea)}):B.callback(I)},function(P){B.errback(P)}):B.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):(g.forEach(I,function(P,aa){"cut"===P&&(P=N.shift(),I[aa]=!0===ca?b.geographicToWebMercator(P):P)}),B.callback(I));return B}function A(y,x,w,C){var B=!1,I;e.isObject(y)&&
y&&(e.isArray(y)?y.length&&((I=y[0]&&y[0].declaredClass)&&-1!==I.indexOf("Graphic")?(y=g.map(y,function(N){return N.geometry}),B=y.length?!0:!1):I&&-1!==I.indexOf("esri.geometry.")&&(B=!0)):(I=y.declaredClass)&&-1!==I.indexOf("FeatureSet")?(y=g.map(y.features||[],function(N){return N.geometry}),B=y.length?!0:!1):I&&-1!==I.indexOf("esri.geometry.")&&(B=!0));B&&x.push({index:w,property:C,value:y})}function D(y,x){var w=[];g.forEach(x,function(C){var B=C.i,I=y[B];C=C.p;var N;if(e.isObject(I)&&I)if(C)if("*"===
C[0])for(N in I)I.hasOwnProperty(N)&&A(I[N],w,B,N);else g.forEach(C,function(V){A(e.getObject(V,!1,I),w,B,V)});else A(I,w,B)});return w}function E(y,x){var w=0,C={};g.forEach(x,function(B){var I=B.index,N=B.property,V=B.value,Y=V.length||1,ca=y.slice(w,w+Y);e.isArray(V)||(ca=ca[0]);w+=Y;delete B.value;N?(C[I]=C[I]||{},C[I][N]=ca):C[I]=ca});return C}function F(y){for(var x=[],w=0,C=0,B=Math.min,I=Math.max,N=0;N<y.length;N++){for(var V=y[N],Y=null,ca=0;ca<V.length;ca++)Y=V[ca],x.push(Y),0===ca?C=w=
Y[0]:(w=B(w,Y[0]),C=I(C,Y[0]));Y&&x.push([(w+C)/2,0])}return x}u={normalizeCentralMeridian:z,_foldCutResults:v,_prepareGeometryForCut:r,_offsetMagnitude:c,_pointNormalization:m,_updatePolyGeometry:f,_straightLineDensify:p,_createWrappers:function(y){var x=e.isObject(y)?y.prototype:e.getObject(y+".prototype");g.forEach(x.__msigns,function(w){var C=x[w.n];x[w.n]=function(){var B=this,I=[],N,V=new t(k._dfdCanceller);w.f&&k._fixDfd(V);for(N=0;N<w.c;N++)I[N]=arguments[N];var Y={dfd:V};I.push(Y);var ca=
[],J;if(B.normalization&&!B._isTable){var O=D(I,w.a);g.forEach(O,function(U){ca=ca.concat(U.value)});ca.length&&(J=z(ca))}J?(V._pendingDfd=J,J.addCallbacks(function(U){V.canceled||(Y.assembly=E(U,O),V._pendingDfd=C.apply(B,I))},function(U){var ba=B.declaredClass;ba&&-1!==ba.indexOf("FeatureLayer")?B._resolve([U],null,I[w.e],V,!0):B._errorHandler(U,I[w.e],V)})):V._pendingDfd=C.apply(B,I);return V}})},_disassemble:D,_addToBucket:A,_reassemble:E,getDenormalizedExtent:function(y){if(!y)return null;var x=
y.getExtent();if(!x)return null;var w=y.spatialReference&&y.spatialReference._getInfo();if(!w)return x;var C=w.valid[0];w=w.valid[1];var B=2*w,I=x.getWidth(),N=x.xmax,V=x.xmin;if("extent"===y.type||0===I||I<=w||I>B||N<C||V>w)return x;switch(y.type){case "polygon":if(1<y.rings.length)var Y=F(y.rings);else return x;break;case "polyline":if(1<y.paths.length)Y=F(y.paths);else return x;break;case "multipoint":Y=y.points}y=Math.min;C=Math.max;B=new a(x.toJson());for(var ca=0;ca<Y.length;ca++){var J=Y[ca][0];
0>J?(J+=w,V=C(J,V)):(J-=w,N=y(J,N))}B.xmin=N;B.xmax=V;return B.getWidth()<I?(B.xmin-=w,B.xmax-=w,B):x}};e.mixin(e.getObject("geometry",!0,l),u);return u})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(g,e,t,u,l,q,k,a){g=g(a,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(d,n){d&&e.isString(d)&&(this._url=k.urlToObject(this.url=
d));n&&n.requestOptions&&(this.requestOptions=n.requestOptions);this.normalization=!0;this._errorHandler=e.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var d=this._url,n=/^http:/i;this.url&&(this.url=this.url.replace(n,"https:"));d&&d.path&&(d.path=d.path.replace(n,"https:"))},_encode:function(d,n,b){var h={},c;for(c in d)if("declaredClass"!==c){var f=d[c];var p=typeof f;if(null!==f&&void 0!==f&&"function"!==p)if(e.isArray(f)){h[c]=[];var r=f.length;for(p=0;p<r;p++)h[c][p]=
this._encode(f[p])}else"object"===p?f.toJson&&(p=f.toJson(b&&b[c]),"esri.tasks.FeatureSet"===f.declaredClass&&p.spatialReference&&(p.sr=p.spatialReference,delete p.spatialReference),h[c]=n?p:t.toJson(p)):h[c]=f}return h},_successHandler:function(d,n,b,h){n&&this[n].apply(this,d);b&&b.apply(null,d);h&&q._resDfd(h,d)},_errorHandler:function(d,n,b){this.onError(d);n&&n(d);b&&b.errback(d)},setNormalization:function(d){this.normalization=d},onError:function(){}});return l.Task=g})},"esri/tasks/ImageServiceIdentifyResult":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../geometry/jsonUtils ./FeatureSet".split(" "),
function(g,e,t,u,l,q){g=g(null,{declaredClass:"esri.tasks.ImageServiceIdentifyResult",constructor:function(k){k.catalogItems&&(this.catalogItems=new q(k.catalogItems));k.location&&(this.location=l.fromJson(k.location));this.catalogItemVisibilities=k.catalogItemVisibilities;this.name=k.name;this.objectId=k.objectId;this.value=k.value;this.processedValues=k.processedValues;this.properties=k.properties}});e.setObject("tasks.ImageServiceIdentifyResult",g,u);return g})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/Polygon ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h){g=g(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(c,f){if(c){e.mixin(this,c);var p=this.features=this.features||[],r=c.spatialReference;r=this.spatialReference=b.createInstance(a.simpleConstructor,r);var m=b.getGeometryType(c.geometryType);this.geometryType=c.geometryType;c.fields&&(this.fields=c.fields);c=b.supportsLazyUnquantization(this.geometryType);var v=b.unquantizeFunction(this.geometryType,this.transform),z=!!(f&&c&&v),A=m&&(z?m.accessorConstructor:
m.simpleConstructor);t.forEach(p,function(D,E){var F=b.createInstance(k.simpleConstructor),y=D.geometry;if(m&&y){var x=F.geometry=b.createInstance(A,z?null:y);x.setSpatialReference(y.spatialReference?b.createInstance(a.simpleConstructor,y.spatialReference):r);z&&x.setupLazyUnquantization(v,y)}F.symbol=D.symbol?h.fromJson(D.symbol):null;F.attributes=D.attributes;p[E]=F});z||this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(c){var f=
{};this.displayFieldName&&(f.displayFieldName=this.displayFieldName);this.fields&&(f.fields=this.fields);this.spatialReference?f.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(f.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(f.geometryType=b.getJsonType(this.features[0].geometry)),f.features=d._encodeGraphics(this.features,c));f.geometryType=f.geometryType||this.geometryType;f.exceededTransferLimit=
this.exceededTransferLimit;f.transform=this.transform;return q.fixJson(f)},_hydrate:function(){b.unquantize(this.features,this.geometryType,this.transform);this.transform=null},quantize:function(c){if(!this.geometryType)return this.transform=null,this;var f=c.translate[0],p=c.translate[1],r=c.scale[0],m=c.scale[1],v=this.features,z=function(F,y,x){var w,C=[];var B=0;for(w=F.length;B<w;B++){var I=F[B];if(0<B){var N=y(I[0]);I=x(I[1]);if(N!==V||I!==Y){C.push([N-V,I-Y]);var V=N;var Y=I}}else V=y(I[0]),
Y=x(I[1]),C.push([V,Y])}return 0<C.length?C:null},A=function(F,y,x){if("esriGeometryPoint"===F)return function(w){w.x=y(w.x);w.y=x(w.y);return w};if("esriGeometryPolyline"===F||"esriGeometryPolygon"===F)return function(w){var C;var B=w.rings||w.paths;var I=[];var N=0;for(C=B.length;N<C;N++){var V=B[N];(V=z(V,y,x))&&I.push(V)}return 0<I.length?(w.rings?w.rings=I:w.paths=I,w):null};if("esriGeometryMultipoint"===F)return function(w){var C=z(w.points,y,x);return 0<C.length?(w.points=C,w):null};if("esriGeometryEnvelope"===
F)return function(w){return w}}(this.geometryType,function(F){return Math.round((F-f)/r)},function(F){return Math.round((p-F)/m)}),D;var E=0;for(D=v.length;E<D;E++)v[E].geometry&&(A(v[E].geometry)||v[E].setGeometry(null));this.transform=c;return this}});g.createGraphics=function(c){var f=c.geometryType,p=b.createInstance(a.simpleConstructor,c.spatialReference),r=b.getGeometryType(f).accessorConstructor,m=b.unquantizeFunction(f,c.transform);return t.map(c.features,function(v,z){z=b.createInstance(k.simpleConstructor);
var A=v.geometry;if(A){var D=z.geometry=b.createInstance(r);D.setSpatialReference(p);D.setupLazyUnquantization(m,A)}z.attributes=v.attributes;return z})};g.createPolygon=function(c,f,p){if(c){var r=b.createInstance(n.accessorConstructor);r.setSpatialReference(f);f=b.unquantizeFunction("esriGeometryPolygon",p);r.setupLazyUnquantization(f,c)}return r};e.setObject("tasks.FeatureSet",g,l);return g})},"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","./kernel","./geometry/Extent"],
function(g,e,t,u,l){t={graphicsExtent:function(q){if(!q||!q.length)return null;var k=null,a,d=q.length;for(a=0;a<d;a++){var n=q[a].geometry;if(n){var b=n.getExtent();b||"point"!==n.type||null==n.x||null==n.y||(b=new l(n.x,n.y,n.x,n.y,n.spatialReference));b&&(k=k?k.union(b):b)}}return 0>k.getWidth()&&0>k.getHeight()?null:k},getGeometries:function(q){return e.map(q,function(k){return k.geometry})},_encodeGraphics:function(q,k){return e.map(q,function(a,d){a=a.toJson();var n={};a.geometry&&(d=k&&k[d],
n.geometry=d&&d.toJson()||a.geometry);a.attributes&&(n.attributes=a.attributes);return n})}};g.mixin(u,t);return t})},"esri/tasks/ImageServiceIdentifyParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/_base/array dojo/has ../kernel ../lang ../geometry/jsonUtils".split(" "),function(g,e,t,u,l,q,k,a){g=g(null,{declaredClass:"esri.tasks.ImageServiceIdentifyParameters",geometry:null,mosaicRule:null,renderingRule:null,renderingRules:null,pixelSizeX:null,pixelSizeY:null,
pixelSize:null,returnGeometry:!1,returnCatalogItems:!0,timeExtent:null,maxItemCount:null,returnPixelValues:!0,toJson:function(d){var n=d&&d.geometry||this.geometry;d={geometry:n,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,mosaicRule:this.mosaicRule?t.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?t.toJson(this.renderingRule.toJson()):null};n&&(d.geometryType=a.getJsonType(n));n=this.timeExtent;d.time=n?n.toJson().join(","):null;k.isDefined(this.pixelSizeX)&&
k.isDefined(this.pixelSizeY)?d.pixelSize=t.toJson({x:parseFloat(this.pixelSizeX),y:parseFloat(this.pixelSizeY)}):this.pixelSize&&(d.pixelSize=this.pixelSize?t.toJson(this.pixelSize.toJson()):null);this.renderingRules&&(d.renderingRules=t.toJson(u.map(this.renderingRules,function(b){return b.toJson()})));k.isDefined(this.returnPixelValues)&&(d.returnPixelValues=this.returnPixelValues);k.isDefined(this.maxItemCount)&&(d.maxItemCount=this.maxItemCount);return d}});e.setObject("tasks.ImageServiceIdentifyParameters",
g,q);return g})},"esri/layers/rasterLib/function/StretchFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./vertexShaders ./pixelShaders ./RasterFunctionWebGLMixin".split(" "),function(g,e,t,u,l,q,k){return g([t,k],{declaredClass:"esri.layers.rasterLib.function.StretchFunction",functionName:"Stretch",supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({stretchType:0,min:0,max:255,numberOfStandardDeviations:2,
statistics:null,histograms:null,dra:!1,minPercent:.25,maxPercent:.5,useGamma:!1,gamma:null,raster:null,computeGamma:!1},a);this.functionArguments.statistics=this._convertStats(this.functionArguments.statistics);-1===[0,3,5,6].indexOf(this.functionArguments.stretchType)&&(this.functionArguments.stretchType=5);this.min=null==this.min?0:this.min;this.max=null==this.max?255:this.max},bind:function(a){a=this.getSourceRasterInfo(a);if(!a.raster)return Error("The raster input to stretch function is invalid.");
a.raster.statistics&&(this.srcStatistics=this._convertStats(a.raster.statistics));a.raster.histograms&&(this.srcHistograms=a.raster.histograms);this.rasterInfo=e.mixin({},a.raster,{bandCount:a.raster.bandCount,pixelType:this._calculatePixelType(this.pixelType,"U8"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(a){a=a.raster;this._stretch(a);return a},hasTilingEffects:function(a){a=
a||this.functionArguments;return!!(a.dra||a.raster&&"object"===typeof a.raster&&a.raster.dra)},_convertStats:function(a){return a?a.map(function(d){return d&&null!=d.min?[d.min,d.max,d.mean,d.stddev]:d}):null},_updateStatistisHistograms:function(a){var d=this.functionArguments,n=d.histograms||this.srcHistograms;if(a&&a.pixelBlock&&a.pixelBlock.pixels){if(0===d.stretchType)this._statistics=d.statistics&&0<d.statistics.length?d.statistics:this.srcStatistics,this._histograms=n;else{var b=a.pixelBlock,
h=b.pixels.length,c=6===d.stretchType&&(d.dra||!n)||3===d.stretchType&&d.dra;c&&(b.statistics||b.calculateStatistics(),this._calculateStatisticsHistograms(a));if(d.dra)if(b.statistics||b.calculateStatistics(),c)this._statistics=b.statistics,this._histograms=b.histograms;else for(d=b.statistics,this._statistics=[],a=0;a<h;a++)this._statistics[a]=[d[a].minValue,d[a].maxValue,0,0];else this._statistics=d.statistics&&0<d.statistics.length?d.statistics:this.srcStatistics,this._histograms=n}this._statistics=
this._convertStats(this._statistics);this._gammaCorrection=this._getGammaCorrection()}else this._statistics=d.statistics&&0<d.statistics.length?d.statistics:this.srcStatistics,this._histograms=n,this._gammaCorrection=this._getGammaCorrection(),this._statistics=this._convertStats(this._statistics)},_getGammaCorrection:function(){var a=this.functionArguments.gamma;if(a){var d=[],n;for(n=0;n<a.length;n++)d[n]=1<a[n]?2<a[n]?6.5+Math.pow(a[n]-2,2.5):6.5+100*Math.pow(2-a[n],4):1;return d}},_stretch:function(a){if(null!==
a&&null!==a.pixelBlock&&null!==a.pixelBlock.pixels&&0!==this.functionArguments.stretchType){this._updateStatistisHistograms(a);var d=a.pixelBlock,n=d.pixels;d=d.width*d.height;var b=n.length,h,c;this._createLUT(a);if(null==this.LUT)return this._filterNoLUT(a);var f=this.LUT,p=this.LUTOffset;for(h=0;h<b;h++){var r=f[h];for(c=0;c<d;c++){var m=n[h][c];n[h][c]=r[m-p]}}a.pixelBlock.pixelType="U8"}},_calculateStatisticsHistograms:function(a){a=a.pixelBlock;var d=a.pixelType,n=a.pixels,b=a.mask,h=n.length,
c,f,p=function(x){this.min=-.5;this.max=255.5;this.size=256;e.mixin(this,x);this.counts=this.counts||new Uint32Array(this.size)},r=[],m,v;for(c=0;c<h;c++){var z=new p;var A=z.counts;var D=n[c];if("U8"===d)if(b)for(f=0;f<a.width*a.height;f++)b[f]&&A[D[f]]++;else for(f=0;f<a.width*a.height;f++)A[D[f]]++;else{var E=a.statistics[c].minValue;var F=a.statistics[c].maxValue;z.min=E;z.max=F;F=(F-E)/256;var y=new Uint32Array(257);if(b)for(f=0;f<a.width*a.height;f++)b[f]&&y[Math.floor((D[f]-E)/F)]++;else for(f=
0;f<a.width*a.height;f++)y[Math.floor((D[f]-E)/F)]++;for(f=0;255>f;f++)A[f]=y[f];A[255]=y[255]+y[256]}r.push(z);D=[];E=a.statistics[c].minValue;F=a.statistics[c].maxValue;for(f=v=m=y=0;f<z.size;f++)y+=A[f],m+=f*A[f];m/=y;for(f=0;f<z.size;f++)v+=A[f]*Math.pow(f-m,2);A=Math.sqrt(v/(y-1));f=(m+.5)*(z.max-z.min)/z.size+z.min;z=A*(z.max-z.min)/z.size;D.push(E);D.push(F);D.push(f);D.push(z);a.statistics[c]={min:E,minValue:E,max:F,maxValue:F,mean:f,stddev:z}}a.histograms=r},_getCutOffPoints:function(a){var d=
this.functionArguments,n=999;a&&a.pixelBlock?n=a.pixelBlock.pixels.length:a&&a.texture&&(n=3);a=Math.min(n,this._statistics.length);var b=[],h=[],c,f;switch(d.stretchType){case 5:for(c=0;c<a;c++)b[c]=this._statistics[c][0],h[c]=this._statistics[c][1];break;case 3:for(c=0;c<a;c++)b[c]=this._statistics[c][2]-d.numberOfStandardDeviations*this._statistics[c][3],h[c]=this._statistics[c][2]+d.numberOfStandardDeviations*this._statistics[c][3],b[c]<this._statistics[c][0]&&(b[c]=this._statistics[c][0]),h[c]>
this._statistics[c][1]&&(h[c]=this._statistics[c][1]);break;case 6:for(c=0;c<a;c++){n=this._histograms[c];var p=new Uint32Array(n.size);var r=n.counts;var m=0;var v=-.5===n.min&&1===(n.max-n.min)/r?.5:0;for(f=0;f<n.size;f++)m+=r[f],p[f]=m;r=d.minPercent*m/100;for(f=0;f<n.size;f++)if(p[f]>r){b[c]=n.min+(n.max-n.min)/n.size*(f+v);break}r=(1-d.maxPercent/100)*m;for(f=n.size-2;0<=f;f--)if(p[f]<r){h[c]=n.min+(n.max-n.min)/n.size*(f+2-v);break}}break;default:for(c=0;c<n;c++)b[c]=0,h[c]=255}return{minCutOff:b,
maxCutOff:h}},_createLUT:function(a){var d=this.functionArguments,n=a.pixelBlock,b=n.pixelType;if("U8"===b||"U16"===b||"S8"===b||"S16"===b){if(this._LUTSignature&&(b=this._computeLutSignature(),b.length===this._LUTSignature.length&&!b.some(function(w,C){return w!==this._LUTSignature[C]}.bind(this))))return;b=n.pixels.length;var h=[],c=[],f=d.max,p=d.min,r=d.gamma,m=f-p,v=this._getCutOffPoints(a);a=v.minCutOff;v=v.maxCutOff;var z=0,A=256;"S8"===n.pixelType?z=-127:"S16"===n.pixelType&&(z=-32767);if("U16"===
n.pixelType||"S16"===n.pixelType)A=65536;for(n=0;n<b;n++)h[n]=v[n]-a[n];var D=this._gammaCorrection;if(d.useGamma)for(n=0;n<b;n++){var E=[];for(d=0;d<A;d++){var F=d+z;var y=(F-a[n])/h[n];var x=1;1<r[n]&&(x-=Math.pow(1/m,y*D[n]));F<v[n]&&F>a[n]?E[d]=Math.floor(x*m*Math.pow(y,1/r[n]))+p:F>v[n]?E[d]=f:F<a[n]&&(E[d]=p)}c[n]=E}else for(n=0;n<b;n++){E=[];for(d=0;d<A;d++)F=d+z,E[d]=F<a[n]?p:F>v[n]?f:Math.floor((F-a[n])/h[n]*m)+p;c[n]=E}this.LUT=c;this.LUTOffset=z;this._LUTSignature=this._computeLutSignature()}},
_computeLutSignature:function(){var a=this.functionArguments,d=[],n,b;d.push(a.stretchType);d.push(a.min);d.push(a.max);d.push(a.numberOfStandardDeviations);if(this._statistics)for(n=0;n<this._statistics.length;n++)for(b=0;b<this._statistics[n].length;b++)d.push(this._statistics[n][b]);d.push(a.dra?1:0);d.push(a.minPercent);d.push(a.maxPercent);if(a.gamma)for(n=0;n<this._statistics.length;n++)d.push(a.gamma[n]);d.push(a.useGamma?1:0);return d},_filterNoLUT:function(a){if(null!==a&&null!==a.pixelBlock&&
null!==a.pixelBlock.pixels){var d=this.functionArguments,n=a.pixelBlock,b=n.pixels,h=n.mask;n=n.width*n.height;var c=b.length,f=[],p=[],r=d.max,m=d.min,v=d.gamma,z=r-m;var A=this._getCutOffPoints(a);var D=A.minCutOff,E=A.maxCutOff;for(A=0;A<c;A++)f[A]=E[A]-D[A];if(d.useGamma&&null!==v&&v.length>=c)for(A=0;A<c;A++)p[A]=1<v[A]?2<v[A]?6.5+Math.pow(v[A]-2,2.5):6.5+100*Math.pow(2-v[A],4):1;if(d.useGamma)if(void 0!==h&&null!==h)for(d=0;d<n;d++){if(h[d])for(A=0;A<c;A++){var F=b[A][d];var y=(F-D[A])/f[A];
var x=1;1<v[A]&&(x-=Math.pow(1/z,y*p[A]));F<E[A]&&F>D[A]?b[A][d]=Math.floor(x*z*Math.pow(y,1/v[A]))+m:F>E[A]?b[A][d]=r:F<D[A]&&(b[A][d]=m)}}else for(d=0;d<n;d++)for(A=0;A<c;A++)F=b[A][d],y=(F-D[A])/f[A],x=1,1<v[A]&&(x-=Math.pow(1/z,y*p[A])),F<E[A]&&F>D[A]?b[A][d]=Math.floor(x*z*Math.pow(y,1/v[A]))+m:F>E[A]?b[A][d]=r:F<D[A]&&(b[A][d]=m);else if(void 0!==h&&null!==h)for(d=0;d<n;d++){if(h[d])for(A=0;A<c;A++)F=b[A][d],F<E[A]&&F>D[A]?b[A][d]=Math.floor((F-D[A])/f[A]*z)+m:F>E[A]?b[A][d]=r:F<D[A]&&(b[A][d]=
m)}else for(d=0;d<n;d++)for(A=0;A<c;A++)F=b[A][d],F<E[A]&&F>D[A]?b[A][d]=Math.floor((F-D[A])/f[A]*z)+m:F>E[A]?b[A][d]=r:F<D[A]&&(b[A][d]=m);a.pixelBlock.pixelType="U8";return a}},_computeGammaValues:function(a){var d=this._statistics.length,n,b=[];for(n=0;n<d;n++){var h=this._statistics[n][2];"U8"!==a&&(h=255*(h-this._statistics[n][0])/(this._statistics[n][1]-this._statistics[n][0]));b.push(this._computeGammaValue(h))}return b},_computeGammaValue:function(a){if(0!==a&&!(255<a||0>a)){var d=0;0<a&&
150!=a&&255>a&&(d=150>=a?45*Math.cos(.01047*a):17*Math.sin(.021*a));d=Math.log((a+d)/255);if(0!==d&&(a=Math.log(a/255)/d,!isNaN(a)))return Math.min(9.9,Math.max(.01,a))}},readGL:function(a){return this._stretchGL(a.raster)},_stretchGL:function(a){this._performance.start();var d=this.renderTexture,n,b=a.pixelBlock&&a.pixelBlock.pixels&&a.pixelBlock.pixels.length||this.sourceRasterInfo.raster.bandCount,h=a.pixelBlock,c=this.gl,f=c.drawingBufferWidth,p=c.drawingBufferHeight;if(!h&&this.functionArguments.dra){var r=
new Float32Array(f*p*4),m=new Uint8Array(f*p);var v=new Float32Array(f*p);var z=new Float32Array(f*p);var A=new Float32Array(f*p);c.checkFramebufferStatus(c.FRAMEBUFFER)==c.FRAMEBUFFER_COMPLETE&&c.readPixels(0,0,f,p,c.RGBA,c.FLOAT,r);for(n=0;n<f*p;n++)v[n]=r[4*n],z[n]=r[4*n+1],A[n]=r[4*n+2],m[n]=r[4*n+3];a.pixelBlock=new u({width:f,height:p,pixels:[v,z,A],mask:m});a.pixelBlock.calculateStatistics()}!h&&this.functionArguments.dra&&this._useGPUStats?(v=new Float32Array(b),z=new Float32Array(b)):(this._updateStatistisHistograms(a),
r=this._getCutOffPoints(a),v=new Float32Array(b),z=new Float32Array(b),v.set(r.minCutOff.slice(0,b)),z.set(r.maxCutOff.slice(0,b)));this._initializeProgram({fragment:q.stretch,fragmentName:"Stretch"});r=this._setupTextureData(a);m=this.bindFrameBuffer();this.renderTexture=!1;this._performance.start();if(!h&&this.functionArguments.dra&&this._useGPUStats){this._setUniforms({u_sourceDim:[f,p],u_bandCount:b});if(1===b)var D=this._readMinMax(r,2);else{D=this._readMinMax(r,0);var E=this._readMinMax(r,1)}if(6===
this.functionArguments.stretchType||3===this.functionArguments.stretchType&&this.functionArguments.dra)n=this._readHistogram(D,E,a),v=n.minCutOff||v,z=n.minCutOff||z}A=this.functionArguments.max-this.functionArguments.min;a=new Float32Array(b);for(n=0;n<b;n++)a[n]=A/(z[n]-v[n]);this._useGPUStats&&this._initializeProgram({fragment:q.stretch,fragmentName:"Stretch"});c.blendFunc(c.SRC_ALPHA,c.ZERO);A=new Float32Array(3);var F=new Float32Array(3);for(n=0;3>n;n++)A[n]=this.functionArguments.min,F[n]=this.functionArguments.max;
n=this.functionArguments.useGamma;var y=this.functionArguments.gamma,x=this._gammaCorrection;Array.isArray(y)&&y.length>=b||(n=!1);this._setUniforms({u_sourceDim:[f,p],u_bandCount:b,u_minOutput:A,u_maxOutput:F,u_minCutOff:v,u_maxCutOff:z,u_factor:a,u_state:100,u_useGamma:n,u_gamma:y,u_scaled:!d,u_gammaCorrection:x,u_minMaxTexture:!h&&this.functionArguments.dra&&this._useGPUStats?!0:!1});this.renderTexture=d;c.viewport(0,0,f,p);this._bindTexture(r.texture,"u_image");!h&&this.functionArguments.dra&&
this._useGPUStats&&(d=c.getUniformLocation(this.rasterProgram,"u_image1"),c.uniform1i(d,1),c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,D.texture),1<b&&(b=c.getUniformLocation(this.rasterProgram,"u_image2"),c.uniform1i(b,2),c.activeTexture(c.TEXTURE2),c.bindTexture(c.TEXTURE_2D,E.texture)));this._drawGL();return{extent:r.extent,texture:m.texture}},_readMinMax:function(a,d){var n=this.gl,b=a.width||n.drawingBufferWidth,h=a.height||n.drawingBufferHeight;this._setUniforms({u_state:d});this.renderTexture=
!1;var c=a.texture;for(n.activeTexture(n.TEXTURE0);1<b||1<h;){var f=this._createTexture();d=Math.max(Math.ceil(b/2),1);var p=Math.max(Math.ceil(h/2),1);n.getExtension("OES_texture_float");n.texImage2D(n.TEXTURE_2D,0,n.RGBA,d,p,0,n.RGBA,n.FLOAT,null);a=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,a);n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,f,0);n.viewport(0,0,d,p);n.bindTexture(n.TEXTURE_2D,c);this._setUniforms({u_sourceDim:[b,h]});b=d;h=p;this._drawGL(!0);c=f}a=
new Float32Array(b*h*4);n.checkFramebufferStatus(n.FRAMEBUFFER)==n.FRAMEBUFFER_COMPLETE&&n.readPixels(0,0,b,h,n.RGBA,n.FLOAT,a);return{texture:f,minmax:a}},_readHistogram:function(a,d,n){if(a)try{var b=this.gl,h=b.drawingBufferWidth,c=b.drawingBufferHeight,f,p,r;if(a.texture instanceof WebGLTexture){var m=!0;var v=[1,0,0,1];if(d){var z=a.minmax;var A=d.minmax}else z=[a.minmax[0]],A=[a.minmax[1]]}else for(A=d,z=a,v=new Float32Array(A.length),f=0;f<A.length;f++)v[f]=256/(A[f]-z[f]);var D=new Float32Array(h*
c);for(r=0;r<D.length;r++)D[r]=r;if(!this.histogramProgram){var E=l.getShader(b,l.histogram),F=q.getShader(b,q.constant);this.histogramProgram=this._loadProgram(E,F)}b.blendFunc(b.ONE,b.ONE);b.enable(b.BLEND);b.useProgram(this.histogramProgram);var y=b.getAttribLocation(this.histogramProgram,"a_pixelIndex"),x=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,x);b.bufferData(b.ARRAY_BUFFER,D,b.STATIC_DRAW);b.enableVertexAttribArray(y);b.vertexAttribPointer(y,1,b.FLOAT,!1,0,0);var w=this._setupHistTexture(n),
C=this._createTexture();b.getExtension("OES_texture_float");b.texImage2D(b.TEXTURE_2D,0,b.RGBA,257,1,0,b.RGBA,b.FLOAT,null);var B=b.createFramebuffer();b.bindFramebuffer(b.FRAMEBUFFER,B);b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,C,0);b.viewport(0,0,257,1);var I=b.getUniformLocation(this.histogramProgram,"u_image");b.uniform1i(I,0);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,w);var N=b.getUniformLocation(this.histogramProgram,"u_sourceDim");b.uniform2f(N,h,c);
var V=b.getUniformLocation(this.histogramProgram,"u_bandCount");b.uniform1i(V,3);var Y=b.getUniformLocation(this.histogramProgram,"u_halfPixel");b.uniform2f(Y,.5/h,.5/c);var ca=b.getUniformLocation(this.histogramProgram,"u_minMaxTexture");if(m){b.uniform1i(ca,1);var J=b.getUniformLocation(this.histogramProgram,"u_image1");b.uniform1i(J,1);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,a.texture);if(d){var O=b.getUniformLocation(this.histogramProgram,"u_image2");b.uniform1i(O,2);b.activeTexture(b.TEXTURE2);
b.bindTexture(b.TEXTURE_2D,d.texture)}}else{var U=b.getUniformLocation(this.histogramProgram,"u_mins");b.uniform4f(U,z[0],z[0],z[0],z[0]);b.uniform1i(ca,0)}var ba=b.getUniformLocation(this.histogramProgram,"u_color"),Z=b.getUniformLocation(this.histogramProgram,"u_factors"),fa=b.getUniformLocation(this.histogramProgram,"u_size");b.uniform1f(fa,256);a=[];d=[];b.uniform4fv(ba,[1,0,0,1]);b.uniform4fv(Z,[v[0],0,0,1]);b.drawArrays(b.POINTS,0,D.length);var pa=this.sourceRasterInfo.raster.bandCount;1<pa&&
(b.uniform4fv(ba,[0,1,0,1]),b.uniform4fv(Z,[0,v[0],0,1]),b.drawArrays(b.POINTS,0,D.length),b.uniform4fv(ba,[0,0,1,1]),b.uniform4fv(Z,[0,0,v[0],1]),b.drawArrays(b.POINTS,0,D.length));if(b.checkFramebufferStatus(b.FRAMEBUFFER)==b.FRAMEBUFFER_COMPLETE){var da=new Float32Array(1028);b.readPixels(0,0,257,1,b.RGBA,b.FLOAT,da);b=0;var ha=-.5===z[0]&&1===(A[0]-z[0])/256?.5:0;for(f=0;f<pa;f++){var P=new Float32Array(257);var aa=new Float32Array(257);for(r=b=0;256>r;r++)b+=da[4*r+f],P[r]=b,aa[r]=da[4*r+f];
aa[256]=da[1024+f];P[256]=b+da[1024+f];var ea=this.functionArguments.minPercent*b/100;if(A){for(p=0;256>p;p++)if(P[p]>ea){a[f]=z[0]+(A[0]-z[0])/256*(p+ha);break}ea=(1-this.functionArguments.maxPercent/100)*b;for(p=254;0<=p;p--)if(P[p]<ea){d[f]=z[0]+(A[0]-z[0])/256*(p+2-ha);break}}}}return{histogram:da,minCutOff:a,maxCutOff:d}}catch(X){}},_setupHistTexture:function(a){if(a instanceof WebGLTexture)return a;var d=this.originalHistTexture=this._createTexture(),n=this.gl;a=a.pixelBlock;var b=a.width,h=
a.height;n.getExtension("OES_texture_float");this.rgbaFloatData=a.getAsRGBAFloat();n.texImage2D(n.TEXTURE_2D,0,n.RGBA,b,h,0,n.RGBA,n.FLOAT,this.rgbaFloatData);return d}})})},"esri/layers/rasterLib/function/RasterFunctionX":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/config ../raster/RasterInfo ../../../geometry/Extent ../../PixelBlock".split(" "),function(g,e,t,u,l,q){return g(null,{functionName:null,functionArguments:null,pixelType:"Unknown",rasterInfo:null,constructor:function(k){k&&
(this.pixelType=k.outputPixelType||k.OutputPixelType||this.pixelType,this.renderTexture=k.renderTexture,this._initFunction())},mixinIgnoreCase:function(k,a){var d=Object.keys(k),n=Object.keys(a),b,h,c=d.length;for(b=0;b<n.length;b++){var f=a[n[b]];if(null!=f)for(h=0;h<c;h++)if(d[h].toLowerCase()===n[b].toLowerCase()){k[d[h]]=f;break}}return k},bind:function(k){},setProcessingContext:function(k){if(!k)throw"cannot bind to layer without options";this.useWebGL=!!k.useWebGL;this._tileMode=!!k.tileMode;
this._glSetting=k.glSetting;this._rawRasterInfo=k.rawRasterInfo;this._xformSetting=k.xformSetting||this._xformSetting;if(!this.useWebGL||this._glSetting&&this._glSetting.gl){this.gl=this.useWebGL?this._glSetting.gl:null;this._glSetting&&(this._glSetting.pingpong=null,this._glSetting.branches=null);var a=this.functionArguments.raster,d=this.functionArguments.raster2,n=this.functionArguments.dem,b=this.functionArguments.fillRaster,h=this.functionArguments.rasters;a&&a.functionArguments&&a.setProcessingContext(k);
d&&d.functionArguments&&d.setProcessingContext(k);n&&n.functionArguments&&n.setProcessingContext(k);b&&b.functionArguments&&b.setProcessingContext(k);if(h)for(a=0;a<h.length;a++)h[a]&&h[a].functionArguments&&h[a].setProcessingContext(k);this.bind()}},updateBranchStructure:function(){var k=0,a=this.functionArguments;a.raster&&a.raster.read&&a.raster.functionArguments&&(k+=a.raster.updateBranchStructure());a.raster2&&a.raster2.read&&a.raster2.functionArguments&&(k+=a.raster2.updateBranchStructure(),
a.raster2.isBranch=!0,a.raster&&a.raster.read&&(a.raster.isBranch=!0));a.rasters&&(k=a.rasters.length,a.rasters.forEach(function(d){d.read&&d.functionArguments&&(d.isBranch=!0)}));a.dem&&a.dem.read&&a.dem.functionArguments&&(k+=a.dem.updateBranchStructure());return 1===k?0:k},read:function(k){k=this.processRasterArgument(k);return this.useWebGL?this.readGL(k):this.read2D(k)},hasTilingEffects:function(){return!1},read2D:function(){},readGL:function(){},getSourceRasterInfo:function(){var k,a={};if(this.functionArguments.raster2)a.functionArguments.raster=
this._bindRaster(this.functionArguments.raster),a.functionArguments.raster2=this._bindRaster(this.functionArguments.raster2);else if(this.functionArguments.rasters)for(a.rasters=[],k=0;k<this.functionArguments.rasters.length;k++)a.rasters[k]=this._bindRaster(this.functionArguments.rasters[k]);else a.raster=this._bindRaster(this.functionArguments.raster);return this.sourceRasterInfo=a},processRasterArgument:function(k){var a=this.bind();if(!0!==a)throw a;var d={};if(this.functionArguments.raster2)d.raster=
this._readRaster(this.functionArguments.raster,k),d.raster2=this._readRaster(this.functionArguments.raster2,k);else if(this.functionArguments.rasters)for(d.rasters=[],a=0;a<this.functionArguments.rasters.length;a++)d.rasters[a]=this._readRaster(this.functionArguments.rasters[a],k);else d.raster=this._readRaster(this.functionArguments.raster,k);return d},toJson:function(){var k=this.functionArguments,a=k.raster,d=k.raster2;k=k.rasters;a=a?a.toJson?a.toJson():a:null;d=d?d.toJson?d.toJson():d:null;var n;
k&&0<k.length&&(n=k.map(function(b){return b.toJson?b.toJson():b}));k=e.mixin({},this.functionArguments);k.raster=a;k.raster2=d;k.rasters=n;k=this._fixRasterFunctionJson(k);return{rasterFunction:this.functionName,rasterFunctionArguments:k,outputPixelType:this.pixelType}},_initFunction:function(k){},_getIntegerRange:function(k){switch(k){case "U8":var a=[0,255];break;case "U16":a=[0,65535];break;case "U32":a=[0,4294967295];break;case "S8":a=[-128,127];break;case "S16":a=[-32768,32767];break;case "S32":a=
[-2147483648,2147483647]}return a},_calculatePixelType:function(k,a){return k&&"unknown"!==k.toLowerCase()?k:a},_clonePixelData:function(k){if(null==k)return k;var a={};k.extent&&(a.extent=new l(k.extent.xmin,k.extent.ymin,k.extent.xmax,k.extent.ymax,k.extent.spatialReference));k=k.pixelBlock;if(null==k)return a;a.pixelBlock=k.clone?k.clone():q.prototype.clone(k);return a},_readRaster:function(k,a){if(null==k||"$$"===k)var d=this._clonePixelData(a.src[Object.keys(a.src)[0]]);else k&&k.rasterInfo&&
!k.functionArguments?d=this._clonePixelData(a.src[k._rasterId]):isNaN(k)?k.read&&(d=k.functionArguments?k.read(a):this._clonePixelData(a)):(d=a.src?a.src[Object.keys(a.src)[0]]:a,a=d.pixelBlock,a=new Float32Array(a.width*a.height),a.fill(parseFloat(k)),d=this._clonePixelData(d),d.pixelBlock.pixels=[a],d.isConstant=!0);return d},_bindRaster:function(k){if(k&&"$$"!==k)isNaN(k)?k.rasterInfo?a=k.rasterInfo:k.bind&&k.bind()&&(a=k.rasterInfo):a={};else var a=this._rawRasterInfo;a&&(a=a.clone?a.clone():
new u(a),a.bandCount=a.bandCount||3);return a},_getOutputBand:function(k,a){switch(k){case "U8":k=new Uint8Array(a);break;case "U16":k=new Uint16Array(a);break;case "U32":k=new Uint32Array(a);break;case "S8":k=new Int8Array(a);break;case "S16":k=new Int16Array(a);break;case "S32":k=new Int32Array(a);break;case "U32":k=new Uint32Array(a);break;case "F32":k=new Float32Array(a);break;case "F64":k=new Float64Array(a);break;default:k=new Float32Array(a)}return k},_clampBand:function(k,a,d){if(("F64"===
a||"F32"===a)&&!d)return k;var n,b=this._getIntegerRange(a),h=k.length;if(b)for(d=b[1],b=b[0],a=this._getOutputBand(a,h),n=0;n<h;n++){var c=k[n];a[n]=c>d?d:c<b?b:c}else a=k;return a},_performance:{start:function(){return this._start=self.performance&&self.performance.now()||new Date}.bind(this),elapsed:function(){return(self.performance&&self.performance.now()||new Date)-this._start}.bind(this)},_addPerformanceMetric:function(k){t.isDebug&&(self.rasterFunctionPerformance||(self.rasterFunctionPerformance=
[]),self.rasterFunctionPerformance.push(k),50<self.rasterFunctionPerformance.length&&self.rasterFunctionPerformance.shift())},_fixRasterFunctionJson:function(k){for(var a in k)k.hasOwnProperty(a)&&(null==k[a]?delete k[a]:k[a]instanceof Object&&!k[a].sourceType&&this._fixRasterFunctionJson(k[a],!0));return k}})})},"esri/layers/rasterLib/raster/RasterInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","../../../geometry/Extent","../../../SpatialReference","../tile/RasterTileInfo"],function(g,
e,t,u,l){return g(null,{declaredClass:"esri.layers.rasterLib.raster.RasterInfo",bandCount:null,pixelType:null,extent:null,spatialReference:null,width:null,height:null,colormap:null,attributeTable:null,multiDimensionalInfo:null,statistics:null,histograms:null,catalogInfo:null,keyProperties:null,cellSize:null,format:null,compression:null,compressionQuality:null,packetSize:null,geodataXform:null,constructor:function(q){e.mixin(this,q);this.extent=this.extent?this.extent.toJson?this.extent:new t(this.extent):
null;this.spatialReference=this.spatialReference?this.spatialReference.toJson?this.spatialReference:new u(this.spatialReference):null;this.tileInfo=this.tileInfo?this.tileInfo.toJson?this.tileInfo:new l(this.tileInfo):null},toJson:function(){return{bandCount:this.bandCount,pixelType:this.pixelType,extent:this.extent&&this.extent.toJson?this.extent.toJson():this.extent,spatialReference:this.spatialReference&&this.spatialReference.toJson?this.spatialReference.toJson():this.spatialReference,width:this.width,
height:this.height,colormap:this.colormap?e.clone(this.colormap):null,attributeTable:this.attributeTable?e.clone(this.attributeTable):null,multiDimensionalInfo:this.multiDimensionalInfo?e.clone(this.multiDimensionalInfo):null,statistics:this.statistics?e.clone(this.statistics):null,histograms:this.histograms?e.clone(this.histograms):null,catalogInfo:this.catalogInfo?e.clone(this.catalogInfo):null,keyProperties:this.keyProperties?e.clone(this.keyProperties):null,cellSize:this.cellSize&&this.cellSize.toJson?
this.cellSize.toJson():this.cellSize,tileInfo:this.tileInfo&&this.tileInfo.toJson?this.tileInfo.toJson():this.tileInfo,format:this.format,compression:this.compression,compressionQuality:this.compressionQuality,packetSize:this.packetSize,geodataXform:this.geodataXform?e.clone(this.geodataXform):null}},clone:function(){return new this.constructor(this.toJson())}})})},"esri/layers/rasterLib/tile/RasterTileInfo":function(){define("dojo/_base/declare dojo/_base/lang ../../../geometry/Extent ../../../SpatialReference ../../../geometry/Point ../../../lang ../../TileInfo".split(" "),
function(g,e,t,u,l,q,k){return g([k],{declaredClass:"esri.layers.rasterLib.tile.RasterTileInfo",rows:512,cols:512,compressionQuality:95,lercError:.01,spatialReference:null,origin:null,virtual:!0,tileType:"Raster",constructor:function(a,d){if(a||d){var n=d&&d.refTileInfo;a?this.virtual=!1:(this.virtual=!0,e.mixin(this,{rows:d.rows||this.rows,cols:d.cols||this.cols,compressionQuality:d.compressionQuality||95,lercError:d.compressionTolerance||.01,spatialReference:d.spatialReference,origin:d.origin}),
this.width=this.cols,this.height=this.rows,this.origin||(n?this.origin=n.origin:d.spatialReference.isWebMercator()||d.extent&&360<=Math.max(Math.abs(d.extent.xmin),Math.abs(d.extent.xmax))?this.origin={x:-2.0037508342787E7,y:2.0037508342787E7}:-1<[4326,4269].indexOf(d.spatialReference.wkid)||360>Math.max(Math.abs(d.extent.xmin),Math.abs(d.extent.xmax))?this.origin={x:-180,y:90}:this.origin={x:d.extent.xmin,y:d.extent.ymax}))}},toJson:function(){var a=k.prototype.toJson.apply(this);a.tileType=this.tileType;
a.virtual=this.virtual;a.lercError=this.lercError;return a},clone:function(){return new this.prototype(this.toJson())}})})},"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),function(g,e,t,u,l,q,k,a,d){g=g(null,{declaredClass:"esri.layers.TileInfo",constructor:function(n){e.mixin(this,n);this.width=this.cols;this.height=this.rows;this._levelToLOD={};n=this.spatialReference;
var b=this.origin;n&&(n=this.spatialReference=new k(n.toJson?n.toJson():n));b&&(this.origin=new a(b.toJson?b.toJson():b),!b.spatialReference&&n&&this.origin.setSpatialReference(new k(n.toJson())));this.lods=t.map(this.lods,function(f){return new d(f)});t.forEach(this.lods,function(f){this._levelToLOD[f.level]=f},this);n=!1;b=this.spatialReference;var h=this.origin;if(b&&h){var c=b._getInfo();c&&(n=b._isWrappable()&&Math.abs(c.origin[0]-h.x)<=c.dx)}this.isWrappable=n;this._initializeUpsampleLevels()},
toJson:function(){return q.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&t.map(this.lods,function(n){return n.toJson()})})},lodAt:function(n){return this._levelToLOD&&this._levelToLOD[n]||null},updateTileInfo:function(n){var b=this.lodAt(n.level),h=b.resolution*this.width;b=b.resolution*this.height;n.id=
n.level+"/"+n.row+"/"+n.col;n.extent||(n.extent=[0,0,0,0]);n.extent[0]=this.origin.x+n.col*h;n.extent[1]=this.origin.y-(n.row+1)*b;n.extent[2]=n.extent[0]+h;n.extent[3]=n.extent[1]+b},upsampleTile:function(n){var b=this._upsampleLevels[n.level];if(!b||-1===b.parentLevel)return!1;n.level=b.parentLevel;n.row=Math.floor(n.row/b.factor+.001);n.col=Math.floor(n.col/b.factor+.001);this.updateTileInfo(n);return!0},_initializeUpsampleLevels:function(){var n=this.lods;this._upsampleLevels=[];for(var b=null,
h=0;h<n.length;h++){var c=n[h];this._upsampleLevels[c.level]={parentLevel:b?b.level:-1,factor:b?b.resolution/c.resolution:0};b=c}}});e.setObject("layers.TileInfo",g,l);return g})},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(g,e,t,u,l){g=g(null,{declaredClass:"esri.layers.LOD",constructor:function(q){e.mixin(this,q)},toJson:function(){return l.fixJson({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}});
e.setObject("layers.LOD",g,u);return g})},"esri/layers/rasterLib/function/vertexShaders":function(){define(["dojo/_base/declare","dojo/_base/lang","./vertexShaderScripts"],function(g,e,t){g={shaderType:"vertex",getShader:function(u,l){var q=u.createShader(u.VERTEX_SHADER);u.shaderSource(q,l);u.compileShader(q);u.getShaderParameter(q,u.COMPILE_STATUS)||(q=null);return q}};e.mixin(g,t);return g})},"esri/layers/rasterLib/function/vertexShaderScripts":function(){define([],function(){return{basic:"varying vec2 v_texCoord;\nattribute vec2 a_texCoord;\nuniform vec2 u_xformOffset;\nuniform vec2 u_xformScale;\nuniform bool u_flipY;\nvoid main() {\nv_texCoord \x3d u_xformOffset + a_texCoord * u_xformScale;\nif (u_flipY) {\nv_texCoord.t \x3d 1.0 - v_texCoord.t;\n}\nvec2 position \x3d a_texCoord * 2.0 - 1.0;\ngl_Position \x3d vec4(position, 0.0, 1.0);\n}",
histogram:"attribute float a_pixelIndex;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nuniform sampler2D u_image2;\nuniform vec2 u_sourceDim;\nuniform vec2 u_halfPixel;\nuniform vec4 u_bandSelection;\nuniform vec4 u_mins;\nuniform vec4 u_factors;\nuniform float u_size;\nuniform int u_bandCount;\nuniform bool u_minMaxTexture;\nvoid main() {\nfloat row \x3d a_pixelIndex/u_sourceDim.s;\nvec2 coord \x3d vec2(fract(row), floor(row)/u_sourceDim.t);\nvec4 pv \x3d texture2D(u_image, coord + u_halfPixel);\nvec4 minVal, maxVal, pvm;\nif (u_minMaxTexture){\nif (u_bandCount \x3d\x3d1){ //min \x3d red, max \x3d green\nvec4 minmax \x3d texture2D(u_image1, vec2(0.5,0.5));\nminVal \x3d vec4(minmax.r, minmax.r, minmax.r, 0.0);\nmaxVal \x3d vec4(minmax.g, minmax.g, minmax.g, 0.0);\n}\nelse if (u_bandCount \x3d\x3d3){ //min \x3d red, max \x3d green\nminVal \x3d texture2D(u_image1, vec2(0.5,0.5));\nmaxVal \x3d texture2D(u_image2, vec2(0.5,0.5));\n}\nvec4 factors \x3d u_size/(maxVal-minVal+vec4(0.0,0.0,0.0,1.0)) * u_factors;\npvm \x3d (pv - minVal) * factors;\n}\nelse {\npvm \x3d (pv - u_mins) * u_factors;\n}\nfloat histVal \x3d min(floor(pvm.r+pvm.g+pvm.b), u_size-1.0);\nhistVal \x3d pv.a \x3d\x3d 1.0? histVal: u_size;\ngl_Position \x3d vec4((histVal+0.1) / (u_size+1.0) * 2.0 - 1.0, 0.5, 0, 1);\ngl_PointSize \x3d 1.0;\n}",
mesh:"varying vec2 v_texCoord;\nattribute vec2 a_texCoord;\nuniform bool u_drawMeshLines;\nuniform bool u_flipY;\nuniform vec2 u_xformOffset;\nuniform vec2 u_xformScale;\nuniform sampler2D u_transformGrid;\nuniform vec2 u_transformSpacing;\nuniform vec2 u_transformGridSize;\nuniform vec2 u_targetImageSize;\nuniform vec2 u_srcImageSize;\nuniform bool u_projection;\nvec2 projectPixelLocation(vec2 coords) {\nvec2 index_image \x3d floor(coords * u_targetImageSize);\nvec2 oneTransformPixel \x3d vec2(0.25 / u_transformGridSize.s, 1.0 / u_transformGridSize.t);\nvec2 index_transform \x3d floor(index_image / u_transformSpacing) / u_transformGridSize;\nvec2 pos \x3d fract((index_image + vec2(0.5, 0.5)) / u_transformSpacing);\nvec2 srcLocation;\nvec2 transform_location \x3d index_transform + oneTransformPixel * 0.5;\nif (pos.s \x3c\x3d pos.t) {\nvec4 ll_abc \x3d texture2D(u_transformGrid, vec2(transform_location.s, transform_location.t));\nvec4 ll_def \x3d texture2D(u_transformGrid, vec2(transform_location.s + oneTransformPixel.s, transform_location.t));\nsrcLocation.s \x3d dot(ll_abc.rgb, vec3(pos, 1.0));\nsrcLocation.t \x3d dot(ll_def.rgb, vec3(pos, 1.0));\n} else {\nvec4 ur_abc \x3d texture2D(u_transformGrid, vec2(transform_location.s + 2.0 * oneTransformPixel.s, transform_location.t));\nvec4 ur_def \x3d texture2D(u_transformGrid, vec2(transform_location.s + 3.0 * oneTransformPixel.s, transform_location.t));\nsrcLocation.s \x3d dot(ur_abc.rgb, vec3(pos, 1.0));\nsrcLocation.t \x3d dot(ur_def.rgb, vec3(pos, 1.0));\n}\nreturn srcLocation;// + halfPixel;\n}\nvoid main() {\nif (u_projection) {\nv_texCoord \x3d projectPixelLocation(a_texCoord);\n} else {\nv_texCoord \x3d u_xformOffset + a_texCoord * u_xformScale;\n}\nif (u_flipY) {\nv_texCoord.t \x3d 1.0 - v_texCoord.t;\n}\nvec2 position \x3d a_texCoord * 2.0 - 1.0;\nif (u_drawMeshLines){\nvec2 adjustedPos \x3d (v_texCoord - u_xformOffset) / u_xformScale;\ngl_Position \x3d vec4( adjustedPos * 2.0 - 1.0, 0.0, 1.0);\n}\nelse {\ngl_Position \x3d vec4(position, 0.0, 1.0);\n}\n}"}})},
"esri/layers/rasterLib/function/pixelShaders":function(){define(["dojo/_base/declare","dojo/_base/lang","./pixelShaderScripts"],function(g,e,t){g={shaderType:"fragment",getShader:function(u,l){var q=u.createShader(u.FRAGMENT_SHADER);u.shaderSource(q,l);u.compileShader(q);u.getShaderParameter(q,u.COMPILE_STATUS)||(q=null);return q}};e.mixin(g,t);return g})},"esri/layers/rasterLib/function/pixelShaderScripts":function(){define([],function(){return{aspect:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec2 u_resolution;\nuniform vec2 u_cellSize;\nfloat getNeighborHoodAlpha(float a, float b, float c, float d, float e, float f, float g, float h, float i){\nif (a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0) {\nreturn 0.0;\n}\nelse {\nreturn e;\n}\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nfloat pi \x3d 3.141592653589793238;\nfloat dz_dx \x3d 0.0;\nfloat dz_dy \x3d 0.0;\nvec4 va, vb, vc,vd,ve,vf,vg,vh,vi;\nvec2 axy \x3d vec2(-1.0,-1.0);\nvec2 bxy \x3d vec2(0.0, -1.0);\nvec2 cxy \x3d vec2(1.0, -1.0);\nvec2 dxy \x3d vec2(-1.0, 0.0);\nvec2 fxy \x3d vec2(1.0, 0.0);\nvec2 gxy \x3d vec2(-1.0, 1.0);\nvec2 hxy \x3d vec2(0.0, 1.0);\nvec2 ixy \x3d vec2(1.0, 1.0);\nif (v_texCoord.s \x3c u_resolution.s)\n{\naxy[0] \x3d 1.0;\ndxy[0] \x3d 1.0;\ngxy[0] \x3d 1.0;\n}\nif (v_texCoord.t \x3c u_resolution.t)\n{\naxy[1] \x3d 1.0;\nbxy[1] \x3d 1.0;\ncxy[1] \x3d 1.0;\n}\nif (v_texCoord.s \x3e1.0-u_resolution.s)\n{\ncxy[0] \x3d -1.0;\nfxy[0] \x3d -1.0;\nixy[0] \x3d -1.0;\n}\nif (v_texCoord.t \x3e 1.0- u_resolution.t)\n{\ngxy[1] \x3d -1.0;\nhxy[1] \x3d -1.0;\nixy[1] \x3d -1.0;\n}\nif (v_texCoord.s \x3e\x3d u_resolution.s \x26\x26 (1.0-u_resolution.s)\x3e\x3dv_texCoord.s \x26\x26 v_texCoord.t \x3e\x3d u_resolution.t \x26\x26 (1.0-u_resolution.t)\x3e\x3dv_texCoord.t)\n{\nva \x3d texture2D(u_image, v_texCoord + u_resolution* axy);\nvb \x3d texture2D(u_image, v_texCoord + u_resolution* bxy);\nvc \x3d texture2D(u_image, v_texCoord + u_resolution* cxy);\nvd \x3d texture2D(u_image, v_texCoord + u_resolution* dxy);\nve \x3d texture2D(u_image, v_texCoord + u_resolution* vec2(0, 0));\nvf \x3d texture2D(u_image, v_texCoord + u_resolution* fxy);\nvg \x3d texture2D(u_image, v_texCoord + u_resolution* gxy);\nvh \x3d texture2D(u_image, v_texCoord + u_resolution* hxy);\nvi \x3d texture2D(u_image, v_texCoord + u_resolution* ixy);\n}\ndz_dx \x3d (vc+2.0*vf+vi - va - 2.0*vd - vg).r/(8.0*u_cellSize[0]);\ndz_dy \x3d -(vg+2.0*vh+vi - va - 2.0*vb - vc).r/(8.0*u_cellSize[1]);\nfloat alpha \x3d getNeighborHoodAlpha(va.a, vb.a, vc.a, vd.a, ve.a, vf.a, vg.a, vh.a, vi.a);\nfloat aspect_rad \x3d 0.0;\nif (dz_dx \x3d\x3d 0.0)\n{\nif (dz_dy \x3e 0.0)\naspect_rad \x3d 0.5 * pi;\nelse if (dz_dy \x3c 0.0)\naspect_rad \x3d 1.5 * pi;\nelse\nalpha \x3d 0.0;//undefined make it nodata\n}\nelse\n{\naspect_rad \x3d 0.5*pi + atan(dz_dy, -dz_dx);\nif (aspect_rad \x3c 0.0)\naspect_rad \x3d 2.0*pi + aspect_rad;\n}\nfloat aspect \x3d aspect_rad * 180.0 / pi;\ngl_FragColor \x3d vec4(aspect, aspect, aspect, alpha);\n}",
bandArithmetic:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform int u_bandId_nir;\nuniform int u_bandId_red;\nuniform bool u_scaled;\nuniform int u_bandCount;\nuniform int u_method;\nuniform float u_constants[6];\nvec4 calculateNDVI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat ndvi_denom \x3d nir + red;\nfloat ndvi;\nif (ndvi_denom \x3d\x3d 0.0) {\nndvi \x3d 0.0;\n} else {\nndvi \x3d (nir - red) / ndvi_denom;\nif (u_scaled) {\nndvi \x3d float(floor(ndvi * 100.0 + 100.5));\n}\n}\nreturn vec4(ndvi, ndvi, ndvi, currentPixel.a);\n}\nvec4 calculateSAVI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat savi_denom \x3d nir + red + u_constants[0];\nfloat savi;\nif (savi_denom \x3d\x3d 0.0) {\nsavi \x3d 0.0;\n} else {\nsavi \x3d (nir - red) / savi_denom * (1.0 + u_constants[0]);\n}\nreturn vec4(savi, savi, savi, currentPixel.a);\n}\nvec4 calculateMSAVI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat msavi \x3d 0.5 * (2.0 * (nir + 1.0) - sqrt(pow((2.0 * nir + 1.0), 2.0) - 8.0 * (nir - red)));\nreturn vec4(msavi, msavi, msavi, currentPixel.a);\n}\nvec4 calculateTSAVI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat s \x3d u_constants[0];\nfloat a \x3d u_constants[1];\nfloat x \x3d u_constants[2];\nfloat tsavi_denom \x3d a * nir + red - a * s + x * (1.0 + s * s);\nfloat tsavi;\nif (tsavi_denom \x3d\x3d 0.0) {\ntsavi \x3d 0.0;\n} else {\ntsavi \x3d s * (nir - s * red - a) / tsavi_denom;\n}\nreturn vec4(tsavi, tsavi, tsavi, currentPixel.a);\n}\nvec4 calculatePVI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat a \x3d u_constants[0];\nfloat b \x3d u_constants[1];\nfloat pvi \x3d (nir - a * red - b) / sqrt(1.0 + a * 2.0);\nreturn vec4(pvi, pvi, pvi, currentPixel.a);\n}\nvec4 calculateGEMI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat gemi;\nif (red \x3d\x3d 1.0) {\ngemi \x3d 0.0;\n} else {\nfloat eta \x3d (2.0 * (nir * nir - red * red) + 1.5 * nir + 0.5 * red) / (nir + red + 0.5);\nfloat gemi \x3d eta * (1.0 - 0.25*eta) - (red - 0.125) / (1.0 - red);\n}\nreturn vec4(gemi, gemi, gemi, currentPixel.a);\n}\nvec4 calculateVARI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(currentPixel.r);\nfloat green \x3d float(currentPixel.g);\nfloat blue \x3d float(currentPixel.b);\nfloat vari \x3d (green - red) /(green + red - blue);\nreturn vec4(vari, vari, vari, currentPixel.a);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nvec4 pv;\nif (u_method \x3c 4) {\nif (u_method \x3d\x3d 1) {\npv \x3d calculateNDVI();\n} else if (u_method \x3d\x3d 2) {\npv \x3d calculateSAVI();\n} else if (u_method \x3d\x3d 3) {\npv \x3d calculateTSAVI();\n} else if (u_method \x3d\x3d 4) {\npv \x3d calculateMSAVI();\n}\n} else {\nif (u_method \x3d\x3d 5) {\npv \x3d calculateGEMI();\n} else if (u_method \x3d\x3d 6) {\npv \x3d calculatePVI();\n} else if (u_method \x3d\x3d 7) {\npv \x3d calculateGEMI();\n} else if (u_method \x3d\x3d 9) {\npv \x3d calculateVARI();\n}\n}\ngl_FragColor \x3d pv;\n}",
colormap:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nvarying vec2 v_texCoord;\nuniform float u_indexedColormapOffset;\nuniform float u_indexedColormapMaxIndex;\nvec4 colorize() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat clrIndex \x3d currentPixel.r - u_indexedColormapOffset;\nvec4 result;\nif (currentPixel.a \x3d\x3d 0.0 || clrIndex \x3e u_indexedColormapMaxIndex) {\nresult \x3d vec4(0.0, 0.0, 0.0, 0.0);\n}\nelse {\nvec2 clrPosition \x3d vec2(clrIndex / u_indexedColormapMaxIndex, 0.0);\nvec4 color \x3d texture2D(u_image1, clrPosition);\nresult \x3d vec4(color.r, color.g, color.b, color.a);\n}\nreturn result;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d colorize();\n}",
compositeBand:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nuniform sampler2D u_image2;\nvarying vec2 v_texCoord;\nuniform int u_rasterCount;\nvec4 composite() {\nvec4 p0, p1, p2;\np0 \x3d texture2D(u_image, v_texCoord);\nvec4 result;\nif (u_rasterCount \x3d\x3d 1){\nresult \x3d p0;\n}\nelse if (u_rasterCount \x3d\x3d 2){\np1 \x3d texture2D(u_image1, v_texCoord);\nresult \x3d vec4(p0.r,p1.r,0.0,min(p0.a,p1.a));\n}\nelse if (u_rasterCount \x3d\x3d 3){\np1 \x3d texture2D(u_image1, v_texCoord);\np2 \x3d texture2D(u_image2, v_texCoord);\nresult \x3d vec4(p0.r,p1.r,p2.r,min(min(p0.a,p1.a),p2.a));\n}\nreturn result;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d composite();\n}",
constant:"precision mediump float;\nuniform vec4 u_color;\nvoid main() {\ngl_FragColor \x3d u_color;\n}",contrastBrightness:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform float u_contrastOffset;\nuniform float u_brightnessOffset;\nuniform float u_scaleFactor;\nvec4 adjustContrastBrightness() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat c \x3d u_contrastOffset;\nfloat b \x3d u_brightnessOffset;\nfloat maxI \x3d 255.0;\nfloat mid \x3d 128.0;\nvec4 v;\nif (c \x3e 0.0 \x26\x26 c \x3c 100.0) {\nv \x3d (200.0 * currentPixel - 100.0 * maxI + 2.0 * maxI * b) / (2.0 * (100.0 - c)) + mid;\n} else if (c \x3c\x3d 0.0 \x26\x26 c \x3e -100.0) {\nv \x3d (200.0 * currentPixel - 100.0 * maxI + 2.0 * maxI * b) * (100.0 + c) / 20000.0 + mid;\n} else if (c \x3d\x3d 100.0) {\nv \x3d (200.0 * currentPixel - 100.0 * maxI + (maxI + 1.0) * (100.0 - c) + 2.0 * maxI * b);\nv \x3d (sign(v) + 1.0) / 2.0; //binary contrast with extra mid tone at 0.5\n} else if (c \x3d\x3d -100.0) {\nv \x3d vec4(mid, mid, mid, currentPixel.a); //no contrast\n}\nreturn vec4(v.r / u_scaleFactor, v.g / u_scaleFactor, v.b / u_scaleFactor, currentPixel.a);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d adjustContrastBrightness();\n}",
convolution:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec2 u_resolution;\nuniform float u_kernel[25];\nuniform int u_kernelSize;\nvec4 convolve33(){\nvec4 vp11, vp12, vp13, vp21, vp22, vp23, vp31, vp32, vp33;\nvec2 xy11 \x3d vec2(-1.0, -1.0);\nvec2 xy12 \x3d vec2(0.0, -1.0);\nvec2 xy13 \x3d vec2(1.0, -1.0);\nvec2 xy21 \x3d vec2(-1.0, 0.0);\nvec2 xy23 \x3d vec2(1.0, 0.0);\nvec2 xy31 \x3d vec2(-1.0, 1.0);\nvec2 xy32 \x3d vec2(0.0, 1.0);\nvec2 xy33 \x3d vec2(1.0, 1.0);\nif (v_texCoord.s \x3c u_resolution.s) {\nxy11[0] \x3d 1.0;\nxy21[0] \x3d 1.0;\nxy31[0] \x3d 1.0;\n}\nif (v_texCoord.t \x3c u_resolution.t) {\nxy11[1] \x3d 1.0;\nxy12[1] \x3d 1.0;\nxy13[1] \x3d 1.0;\n}\nif (v_texCoord.s \x3e 1.0 - u_resolution.s) {\nxy13[0] \x3d -1.0;\nxy23[0] \x3d -1.0;\nxy33[0] \x3d -1.0;\n}\nif (v_texCoord.t \x3e 1.0 - u_resolution.t) {\nxy31[1] \x3d -1.0;\nxy32[1] \x3d -1.0;\nxy33[1] \x3d -1.0;\n}\nvec4 convolResult \x3d\ntexture2D(u_image, v_texCoord + u_resolution * xy11) * u_kernel[0] +\ntexture2D(u_image, v_texCoord + u_resolution * xy12) * u_kernel[1] +\ntexture2D(u_image, v_texCoord + u_resolution * xy13) * u_kernel[2] +\ntexture2D(u_image, v_texCoord + u_resolution * xy21) * u_kernel[3] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(0, 0)) * u_kernel[4] +\ntexture2D(u_image, v_texCoord + u_resolution * xy23) * u_kernel[5] +\ntexture2D(u_image, v_texCoord + u_resolution * xy31) * u_kernel[6] +\ntexture2D(u_image, v_texCoord + u_resolution * xy32) * u_kernel[7] +\ntexture2D(u_image, v_texCoord + u_resolution * xy33) * u_kernel[8];\nreturn vec4(convolResult.rgb, texture2D(u_image, v_texCoord).a);\n}\nvec4 convolve55(){\nvec4 vp11, vp12, vp13, vp21, vp22, vp23, vp31, vp32, vp33;\nfloat xdif[5];//https://www.opengl.org/wiki/Data_Type_(GLSL) array constructor ES3.0\nfloat ydif[5];\nfloat a \x3d -2.0;\nfor (int i\x3d0; i\x3c5; i++){\nxdif[i] \x3d a;\nydif[i] \x3d a;\na++;\n}\nif (v_texCoord.s \x3c u_resolution.s *2.0) { //2 pixel\nxdif[0] \x3d 2.0;\nif (v_texCoord.s \x3c u_resolution.s) { //1 pixel\nxdif[1] \x3d 1.0;\n}\n}\nelse if (v_texCoord.s \x3e 1.0 - u_resolution.s *2.0) {\nxdif[0] \x3d -2.0;\nif (v_texCoord.s \x3e 1.0 - u_resolution.s) {\nxdif[1] \x3d -1.0;\n}\n}\nif (v_texCoord.t \x3c u_resolution.t *2.0) {\nydif[0] \x3d 2.0;\nif (v_texCoord.t \x3c u_resolution.t) {\nydif[1] \x3d 1.0;\n}\n}\nelse if (v_texCoord.t \x3e 1.0 - u_resolution.t*2.0) {\nydif[0] \x3d -2.0;\nif (v_texCoord.t \x3e 1.0 - u_resolution.t) {\nydif[1] \x3d -1.0;\n}\n}\nvec4 convolResult \x3d\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[0], ydif[0])) * u_kernel[0] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[1], ydif[0])) * u_kernel[1] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[2], ydif[0])) * u_kernel[2] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[3], ydif[0])) * u_kernel[3] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[4], ydif[0])) * u_kernel[4] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[0], ydif[1])) * u_kernel[5] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[1], ydif[1])) * u_kernel[6] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[2], ydif[1])) * u_kernel[7] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[3], ydif[1])) * u_kernel[8] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[4], ydif[1])) * u_kernel[9] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[0], ydif[2])) * u_kernel[10] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[1], ydif[2])) * u_kernel[11] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[2], ydif[2])) * u_kernel[12] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[3], ydif[2])) * u_kernel[13] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[4], ydif[2])) * u_kernel[14] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[0], ydif[3])) * u_kernel[15] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[1], ydif[3])) * u_kernel[16] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[2], ydif[3])) * u_kernel[17] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[3], ydif[3])) * u_kernel[18] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[4], ydif[3])) * u_kernel[19] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[0], ydif[4])) * u_kernel[20] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[1], ydif[4])) * u_kernel[21] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[2], ydif[4])) * u_kernel[22] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[3], ydif[4])) * u_kernel[23] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[4], ydif[4])) * u_kernel[24];\nreturn vec4(convolResult.rgb, texture2D(u_image, v_texCoord).a);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nif (u_kernelSize \x3d\x3d 9){\ngl_FragColor \x3d convolve33();\n}\nelse {\ngl_FragColor \x3d convolve55();\n}\n}",
extractBand:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform int u_bandIDs[3];\nuniform bool u_alterBand;\nvec4 extractBand() {\nvec4 p \x3d texture2D(u_image, v_texCoord);\nif (!u_alterBand){\nreturn p;\n}\nfloat r, g, b;\nif (u_bandIDs[0] \x3d\x3d0){\nr \x3d p.r;\n}\nelse if (u_bandIDs[0] \x3d\x3d1){\nr \x3d p.g;\n}\nelse if (u_bandIDs[0] \x3d\x3d2){\nr \x3d p.b;\n}\nif (u_bandIDs[1] \x3d\x3d0){\ng \x3d p.r;\n}\nelse if (u_bandIDs[1] \x3d\x3d1){\ng \x3d p.g;\n}\nelse if (u_bandIDs[1] \x3d\x3d2){\ng \x3d p.b;\n}\nif (u_bandIDs[2] \x3d\x3d0){\nb \x3d p.r;\n}\nelse if (u_bandIDs[2] \x3d\x3d1){\nb \x3d p.g;\n}\nelse if (u_bandIDs[2] \x3d\x3d2){\nb \x3d p.b;\n}\nreturn vec4(r, g, b, p.a);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d extractBand();\n}",
hillshade:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nvarying vec2 v_texCoord;\nuniform vec2 u_resolution;\nuniform int u_slopeType;\nuniform int u_hillshadeType;\nuniform int u_lightSourceCount;\nuniform float u_sinZcosA;\nuniform float u_sinZsinA;\nuniform float u_cosZ;\nuniform float u_sinZcosAs[6];\nuniform float u_sinZsinAs[6];\nuniform float u_cosZs[6];\nuniform float u_weights[6];\nuniform float u_xFactor;\nuniform float u_yFactor;\nuniform bool u_scaled;\nuniform float u_minValue;\nuniform float u_maxValue;\nuniform bool u_applyColorramp;\nuniform float u_indexedColormapOffset;\nuniform float u_indexedColormapMaxIndex;\nuniform vec2 u_rawResolution;\nuniform int u_resampling;\nvec4 getPixelValue(vec2 coords) {\nif (u_resampling \x3d\x3d 0) {\nreturn texture2D(u_image, coords);\n}\nvec2 pos_ul \x3d floor(coords / u_rawResolution) * u_rawResolution;\nvec2 pos_ur \x3d pos_ul + vec2(1.0, 0.0) * u_rawResolution;\nvec2 pos_ll \x3d pos_ul + vec2(0.0, 1.0) * u_rawResolution;\nvec2 pos_lr \x3d pos_ul + vec2(1.0, 1.0) * u_rawResolution;\nvec2 weight \x3d fract(coords / u_rawResolution);\nvec4 vp_ul \x3d texture2D(u_image, pos_ul);\nvec4 vp_ur \x3d texture2D(u_image, pos_ur);\nvec4 vp_ll \x3d texture2D(u_image, pos_ll);\nvec4 vp_lr \x3d texture2D(u_image, pos_lr);\nvec4 vp \x3d mix(mix(vp_ul, vp_ur, weight.x), mix(vp_ll, vp_lr, weight.x), weight.y);\nreturn vp;\n}\nfloat getNeighborHoodAlpha(float a, float b, float c, float d, float e, float f, float g, float h, float i){\nif (a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0) {\nreturn 0.0;\n}\nelse {\nreturn e;\n}\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvec3 rgb2hsv(vec3 c) {\nvec4 K \x3d vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\nvec4 p \x3d c.g \x3c c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\nvec4 q \x3d c.r \x3c p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\nfloat d \x3d q.x - min(q.w, q.y);\nfloat e \x3d 1.0e-10;\nreturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);\n}\nvec3 hsv2rgb(vec3 c) {\nvec4 K \x3d vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\nvec3 p \x3d abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\nreturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\nvec4 overlay(float val, float minValue, float maxValue, float hillshade, float alpha) {\nfloat clrIndex \x3d clamp((val - minValue) / (maxValue - minValue), 0.0, 1.0);\nvec4 rgb \x3d texture2D(u_image1, vec2(clrIndex, 0.0));\nvec3 hsv \x3d rgb2hsv(rgb.xyz);\nhsv.z \x3d hillshade;\nreturn vec4(hsv2rgb(hsv) * alpha, alpha);\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nvec4 va, vb, vc, vd, ve, vf, vg, vh, vi;\nvec2 axy \x3d vec2(-1.0, -1.0);\nvec2 bxy \x3d vec2(0.0, -1.0);\nvec2 cxy \x3d vec2(1.0, -1.0);\nvec2 dxy \x3d vec2(-1.0, 0.0);\nvec2 fxy \x3d vec2(1.0, 0.0);\nvec2 gxy \x3d vec2(-1.0, 1.0);\nvec2 hxy \x3d vec2(0.0, 1.0);\nvec2 ixy \x3d vec2(1.0, 1.0);\nif (v_texCoord.s \x3c u_resolution.s) {\naxy[0] \x3d 1.0;\ndxy[0] \x3d 1.0;\ngxy[0] \x3d 1.0;\n}\nif (v_texCoord.t \x3c u_resolution.t) {\naxy[1] \x3d 1.0;\nbxy[1] \x3d 1.0;\ncxy[1] \x3d 1.0;\n}\nif (v_texCoord.s \x3e 1.0 - u_resolution.s) {\ncxy[0] \x3d -1.0;\nfxy[0] \x3d -1.0;\nixy[0] \x3d -1.0;\n}\nif (v_texCoord.t \x3e 1.0 - u_resolution.t) {\ngxy[1] \x3d -1.0;\nhxy[1] \x3d -1.0;\nixy[1] \x3d -1.0;\n}\nva \x3d texture2D(u_image, v_texCoord + u_resolution * axy);\nvb \x3d texture2D(u_image, v_texCoord + u_resolution * bxy);\nvc \x3d texture2D(u_image, v_texCoord + u_resolution * cxy);\nvd \x3d texture2D(u_image, v_texCoord + u_resolution * dxy);\nve \x3d texture2D(u_image, v_texCoord + u_resolution * vec2(0, 0));\nvf \x3d texture2D(u_image, v_texCoord + u_resolution * fxy);\nvg \x3d texture2D(u_image, v_texCoord + u_resolution * gxy);\nvh \x3d texture2D(u_image, v_texCoord + u_resolution * hxy);\nvi \x3d texture2D(u_image, v_texCoord + u_resolution * ixy);\nfloat alpha \x3d getNeighborHoodAlpha(va.a, vb.a, vc.a, vd.a, ve.a, vf.a, vg.a, vh.a, vi.a);\nfloat dzx \x3d (vc + 2.0 * vf + vi - va - 2.0 * vd - vg).r * u_xFactor;\nfloat dzy \x3d (vg + 2.0 * vh + vi - va - 2.0 * vb - vc).r * u_yFactor; //flip\nfloat s2 \x3d sqrt(1.0 + dzx * dzx + dzy * dzy);\nfloat hillshade \x3d 0.0;\nif (u_hillshadeType \x3d\x3d 0){\nfloat cosDelta \x3d u_sinZsinA * dzy - u_sinZcosA * dzx;\nfloat z \x3d (u_cosZ + cosDelta) / s2;\nif (z \x3c 0.0)  z \x3d 0.0;\nhillshade \x3d z;\n}\nelse if (u_hillshadeType \x3d\x3d 1){\nfor (int k \x3d 0; k \x3c 6; k++) {\nfloat cosDelta \x3d u_sinZsinAs[k] * dzy - u_sinZcosAs[k] * dzx;\nfloat z \x3d (u_cosZs[k] + cosDelta) / s2;\nif (z \x3c 0.0) z \x3d 0.0;\nhillshade \x3d hillshade + z * u_weights[k];\nif (k \x3d\x3d u_lightSourceCount-1) break;\n}\n}\nif (u_applyColorramp) {\nvec4 result \x3d overlay(ve.r, u_minValue, u_maxValue, hillshade, alpha);\nif (u_scaled) {\nresult \x3d vec4(result.rgb * 255.0, result.a);\n}\ngl_FragColor \x3d result;\n} else {\nif (u_scaled) {\nhillshade \x3d hillshade * 255.0;\nif (hillshade\x3e 255.0) {\nhillshade \x3d 255.0;\n}\n}\ngl_FragColor \x3d vec4(hillshade, hillshade, hillshade, alpha);\n}\n}",
identity:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform int u_bandCount;\nfloat shift_right(float v, float amt) {\nv \x3d floor(v) + 0.5;\nreturn floor(v / exp2(amt));\n}\nfloat shift_left(float v, float amt) {\nreturn floor(v * exp2(amt) + 0.5);\n}\nfloat mask_last(float v, float bits) {\nreturn mod(v, shift_left(1.0, bits));\n}\nfloat extract_bits(float num, float from, float to) {\nfrom \x3d floor(from + 0.5);\nto \x3d floor(to + 0.5);\nreturn mask_last(shift_right(num, from), to - from);\n}\nvec4 encode_float(float val) {\nif (val \x3d\x3d 0.0)\nreturn vec4(0, 0, 0, 0);\nfloat sign \x3d val \x3e 0.0 ? 0.0 : 1.0;\nval \x3d abs(val);\nfloat exponent \x3d floor(log2(val));\nfloat biased_exponent \x3d exponent + 127.0;\nfloat fraction \x3d ((val / exp2(exponent)) - 1.0) * 8388608.0;\nfloat t \x3d biased_exponent / 2.0;\nfloat last_bit_of_biased_exponent \x3d fract(t) * 2.0;\nfloat remaining_bits_of_biased_exponent \x3d floor(t);\nfloat byte4 \x3d extract_bits(fraction, 0.0, 8.0) / 255.0;\nfloat byte3 \x3d extract_bits(fraction, 8.0, 16.0) / 255.0;\nfloat byte2 \x3d (last_bit_of_biased_exponent * 128.0 + extract_bits(fraction, 16.0, 23.0)) / 255.0;\nfloat byte1 \x3d (sign * 128.0 + remaining_bits_of_biased_exponent) / 255.0;\nreturn vec4(byte4, byte3, byte2, byte1);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nvec4 currentPixel \x3d  texture2D(u_image, v_texCoord);\ngl_FragColor \x3d vec4( currentPixel.rgb, currentPixel.a); //encode_float(currentPixel.r);\n}",
local:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nuniform sampler2D u_image2;\nvarying vec2 v_texCoord;\nuniform int u_rasterCount;\nvec4 polyfill;\nvec4 localOp1() {\nvec4 a \x3d texture2D(u_image, v_texCoord);\nvec4 result;\nvec4 replaceme1;\nreturn result;\n}\nvec4 localOp2() {\nvec4 a \x3d texture2D(u_image, v_texCoord);\nvec4 b \x3d texture2D(u_image1, v_texCoord);\nvec4 result;\nvec4 replaceme2;\nreturn result;\n}\nvec4 localOp3() {\nvec4 a \x3d texture2D(u_image, v_texCoord);\nvec4 b \x3d texture2D(u_image1, v_texCoord);\nvec4 c \x3d texture2D(u_image2, v_texCoord);\nvec4 result;\nvec4 replaceme3;\nreturn result;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d localOp1();\n}",
local0:"precision mediump float;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_texCoord;\nuniform float u_minCutOff[3];\nuniform float u_maxCutOff[3];\nuniform float u_minOutput[3];\nuniform float u_maxOutput[3];\nuniform float u_factor[3];\nuniform int u_operation;\nuniform int u_constant[3];\nuniform vec4 gamma;\nfloat localOperate1(float a, float b, float c){\nfloat result;\nif (u_operation \x3d\x3d 1){\nresult \x3d a + b;\n}\nelse if (u_operation \x3d\x3d 2){\nresult \x3d a - b;\n}\nelse if (u_operation \x3d\x3d3){\nresult \x3d a * b;\n}\nelse if (u_operation \x3d\x3d4){\nresult \x3d sqrt(a);\n}\nelse if (u_operation \x3d\x3d5){\nresult \x3d pow(a, b);\n}\nelse if (u_operation \x3d\x3d6){\nresult \x3d acos(a);\n}\nelse if (u_operation \x3d\x3d7){\nresult \x3d asin(a);\n}\nelse if (u_operation \x3d\x3d8){\nresult \x3d atan(a);\n}\nelse if (u_operation \x3d\x3d9){\nresult \x3d 999.0; //atanh not available\n}\nelse if (u_operation \x3d\x3d10){\nresult \x3d abs(a);\n}\nelse if (u_operation \x3d\x3d13){\nresult \x3d 999.0; //bitwise not available\n}\nelse if (u_operation \x3d\x3d17){\nresult \x3d a !\x3d 0.0 \x26\x26 b !\x3d0.0;\n}\nelse if (u_operation \x3d\x3d18){\nresult \x3d a \x3d\x3d0.0? 1.0:0.0;\n}\nelse if (u_operation \x3d\x3d19){\nresult \x3d a !\x3d 0.0 || b !\x3d0.0;\n}\nelse if (u_operation \x3d\x3d20){\nresult \x3d a !\x3d 0.0 ^^ b !\x3d0.0; //exclusive or\n}\nelse if (u_operation \x3d\x3d21){\nresult \x3d cos(a);\n}\nelse if (u_operation \x3d\x3d23){\nresult \x3d a / b;\n}\nelse if (u_operation \x3d\x3d24){\nresult \x3d a \x3d\x3d b ? 1.0:0.0;\n}\nelse if (u_operation \x3d\x3d25){\nresult \x3d exp(a);\n}\nelse if (u_operation \x3d\x3d26){\nresult \x3d pow(10.0, a);\n}\nelse if (u_operation \x3d\x3d27){\nresult \x3d exp2(a);\n}\nelse if (u_operation \x3d\x3d28){\nresult \x3d a \x3e b? 1.0 : 0.0;\n}\nelse if (u_operation \x3d\x3d29){\nresult \x3d  a \x3e\x3d b? 1.0 : 0.0;\n}\nelse if (u_operation \x3d\x3d30){\nresult \x3d floor(a); //int\n}\nelse if (u_operation \x3d\x3d31){\nresult \x3d a \x3d\x3d0? 1.0:0.0; //null pass mask\n}\nelse if (u_operation \x3d\x3d32){\nresult \x3d a; //float\n}\nelse if (u_operation \x3d\x3d33){\nresult \x3d a \x3c b? 1.0 : 0.0;\n}\nelse if (u_operation \x3d\x3d34){\nresult \x3d a \x3c\x3d b? 1.0 : 0.0;\n}\nelse if (u_operation \x3d\x3d35){\nresult \x3d log(a);\n}\nelse if (u_operation \x3d\x3d36){\nresult \x3d log2(a) / log2(10.0);\n}\nelse if (u_operation \x3d\x3d37){\nresult \x3d log2(a);\n}\nelse if (u_operation \x3d\x3d44){\nresult \x3d mod(a, b);\n}\nelse if (u_operation \x3d\x3d45){\nresult \x3d -a;\n}\nelse if (u_operation \x3d\x3d46){\nresult \x3d a !\x3d b? 1.0 : 0.0;\n}\nelse if (u_operation \x3d\x3d48){\nresult \x3d ceil(a);\n}\nelse if (u_operation \x3d\x3d49){\nresult \x3d floor(a);\n}\nelse if (u_operation \x3d\x3d51){\nresult \x3d sin(a);\n}\nelse if (u_operation \x3d\x3d53){\nresult \x3d a * a;\n}\nelse if (u_operation \x3d\x3d56){\nresult \x3d tan(a);\n}\nelse if (u_operation \x3d\x3d57){\nresult \x3d 999.0; //tanh not available\n}\nelse if (u_operation \x3d\x3d59){\nresult \x3d 999.0; //acosh not available\n}\nelse if (u_operation \x3d\x3d60){\nresult \x3d 999.0; //asinh not available\n}\nelse if (u_operation \x3d\x3d61){\nresult \x3d atan(a, b);\n}\nelse if (u_operation \x3d\x3d64){\nresult \x3d a / b;\n}\nelse if (u_operation \x3d\x3d65){\nresult \x3d floor(a/b);\n}\nelse if (u_operation \x3d\x3d76){\nresult \x3d a !\x3d0? b:c;\n}\n}\nvoid main() {\nvec4 currentPixel0 \x3d  texture2D(u_image0, v_texCoord);\nfloat graya, reda, greena, bluea;\nif (u_bandCount \x3d\x3d 1) {\ngraya \x3d stretchOneaue(float(currentPixel.r), u_minCutOff[0], u_maxCutOff[0], u_minOutput[0], u_maxOutput[0], u_factor[0]);\ngl_FragColor \x3d vec4(graya, graya, graya, currentPixel.a);\n}\nelse if (u_bandCount \x3d\x3d 3) {\nreda \x3d stretchOneaue(float(currentPixel.r), u_minCutOff[0], u_maxCutOff[0], u_minOutput[0], u_maxOutput[0], u_factor[0]);\ngreena \x3d stretchOneaue(float(currentPixel.g), u_minCutOff[1], u_maxCutOff[1], u_minOutput[1], u_maxOutput[1], u_factor[1]);\nbluea \x3d stretchOneaue(float(currentPixel.b), u_minCutOff[2], u_maxCutOff[2], u_minOutput[2], u_maxOutput[2], u_factor[2]);\ngl_FragColor \x3d vec4(reda, greena, bluea, currentPixel.a);\n}\n}",
mask:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform float u_includedRanges[6];\nuniform bool u_includedRanges_specified;\nuniform float u_noDataValues[6];\nuniform bool u_noDataValues_specified;\nuniform int u_noDataInterpretation;\nuniform int u_bandCount;\nvec4 mask() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nvec4 processedPixel \x3d currentPixel;\nif (u_includedRanges_specified) {\nif (u_bandCount \x3d\x3d 1) {\nif (currentPixel.r \x3e u_includedRanges[0] \x26\x26 currentPixel.r \x3c u_includedRanges[1])\nprocessedPixel \x3d vec4(currentPixel.rgb, currentPixel.a);\nelse\nprocessedPixel \x3d vec4(currentPixel.rgb, 0);\n} else if (u_bandCount \x3d\x3d 3) {\nif (currentPixel.r \x3e u_includedRanges[0] \x26\x26 currentPixel.r \x3c u_includedRanges[1] \x26\x26 currentPixel.g \x3e u_includedRanges[2] \x26\x26 currentPixel.g \x3c u_includedRanges[3] \x26\x26 currentPixel.b \x3e u_includedRanges[4] \x26\x26 currentPixel.b \x3c u_includedRanges[5])\nprocessedPixel \x3d vec4(currentPixel.rgb, currentPixel.a);\nelse\nprocessedPixel \x3d vec4(currentPixel.rgb, 0);\n}\n}\nif (u_noDataValues_specified) {\nif (u_bandCount \x3d\x3d 1) {\nif (processedPixel.r \x3d\x3d u_noDataValues[0])\nprocessedPixel \x3d vec4(processedPixel.rgb, 0);\nelse\nprocessedPixel \x3d vec4(processedPixel.rgb, processedPixel.a);\n} else if (u_bandCount \x3d\x3d 3) {\nif (u_noDataInterpretation \x3d\x3d1 \x26\x26 processedPixel.r \x3d\x3d u_noDataValues[0] \x26\x26 processedPixel.g \x3d\x3d u_noDataValues[1] \x26\x26 processedPixel.b \x3d\x3d u_noDataValues[2])\nprocessedPixel \x3d vec4(processedPixel.rgb, 0);\nelse if (processedPixel.r \x3d\x3d u_noDataValues[0] || processedPixel.g \x3d\x3d u_noDataValues[1] || processedPixel.b \x3d\x3d u_noDataValues[2])\nprocessedPixel \x3d vec4(processedPixel.rgb, 0);\nelse\nprocessedPixel \x3d vec4(processedPixel.rgb, processedPixel.a);\n}\n}\nreturn processedPixel;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d mask();\n}",
ndvi:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform int u_bandId_red;\nuniform int u_bandId_nir;\nuniform bool u_scaled;\nuniform int u_bandCount;\nvec4 calculateNDVI(){\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat ndvi_denom \x3d nir + red;\nfloat ndvi;\nif (ndvi_denom \x3d\x3d 0.0) {\nndvi \x3d 0.0;\n}\nelse {\nndvi \x3d (nir - red) / ndvi_denom;\nif (u_scaled) {\nndvi \x3d float(floor(ndvi * 100.0 + 100.5));\n}\n}\nreturn vec4(ndvi, ndvi, ndvi, currentPixel.a);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d calculateNDVI();\n}",
remap:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nvarying vec2 v_texCoord;\nuniform float u_indexedColormapOffset;\nuniform float u_indexedColormapMaxIndex;\nuniform float u_breaks[16];\nuniform vec2 u_rawResolution;\nuniform int u_resampling;\nvec4 getPixelValue(vec2 coords) {\nif (u_resampling \x3d\x3d 0) {\nreturn texture2D(u_image, coords);\n}\nvec2 pos_ul \x3d floor(coords / u_rawResolution) * u_rawResolution;\nvec2 pos_ur \x3d pos_ul + vec2(1.0, 0.0) * u_rawResolution;\nvec2 pos_ll \x3d pos_ul + vec2(0.0, 1.0) * u_rawResolution;\nvec2 pos_lr \x3d pos_ul + vec2(1.0, 1.0) * u_rawResolution;\nvec2 weight \x3d fract(coords / u_rawResolution);\nvec4 vp_ul \x3d texture2D(u_image, pos_ul);\nvec4 vp_ur \x3d texture2D(u_image, pos_ur);\nvec4 vp_ll \x3d texture2D(u_image, pos_ll);\nvec4 vp_lr \x3d texture2D(u_image, pos_lr);\nvec4 vp \x3d mix(mix(vp_ul, vp_ur, weight.x), mix(vp_ll, vp_lr, weight.x), weight.y);\nreturn vp;\n}\nfloat getRemapIndex(float pixelValue) {\nif (pixelValue \x3c u_breaks[0] || pixelValue \x3e u_breaks[15]) {\nreturn -1.0;\n}\nfor (int i \x3d 0; i \x3c 16; i++) {\nif (pixelValue \x3c u_breaks[i]) {\nreturn float(i - 1);\n}\n}\nif (pixelValue \x3d\x3d u_breaks[15]) {\nreturn 15.0;\n}\nreturn 0.0;\n}\nvec4 colorize(float pv) {\nfloat clrIndex \x3d pv - u_indexedColormapOffset;\nvec4 result;\nif (clrIndex \x3e u_indexedColormapMaxIndex) {\nresult \x3d vec4(0.0, 0.0, 0.0, 0.0);\n}\nelse {\nvec2 clrPosition \x3d vec2(clrIndex / u_indexedColormapMaxIndex, 0.0);\nvec4 color \x3d texture2D(u_image1, clrPosition);\nresult \x3d vec4(color.r, color.g, color.b, color.a);\n}\nreturn result;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nif (currentPixel.a \x3d\x3d 0.0) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn;\n}\nfloat remappedIndex \x3d getRemapIndex(currentPixel.r);\nif (remappedIndex \x3c 0.0) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn;\n}\ngl_FragColor \x3d colorize(remappedIndex);\n}",
resample:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec2 u_resamplingRatio;\nuniform int u_resamplingType;\nuniform vec2 u_anchor;\nuniform vec2 u_resolution;\nvec4 resample(){\nvec2 pos_nn, pos_ul, pos_ur, pos_ll, pos_lr, pos_offset;\nfloat weight,weight_total, weight_ul, weight_ur, weight_ll, weight_lr;\nvec4 vp;  //v_texCoord is canvas space 0-1\nvec2 originalResolution \x3d vec2(u_resolution.s*u_resamplingRatio.s, u_resolution.t*u_resamplingRatio.t);\nvec2 pos \x3d vec2(u_anchor.s+(v_texCoord.s-u_anchor.s),(u_anchor.t+(v_texCoord.t-u_anchor.t)));\nif (u_resamplingType \x3d\x3d 0)\n{//shift and scaling, y \x3d ax+b so x \x3d (y-b)/a\npos_nn \x3d vec2(floor(pos.s/originalResolution.s+0.5)*originalResolution.s,floor(pos.t/originalResolution.t+0.5)*originalResolution.t);\nif (pos_nn.s \x3c0.0 || pos_nn.s \x3e 1.0 || pos_nn.t \x3c0.0 || pos_nn.t \x3e 1.0){\nvp \x3d vec4(1.0, 0.0, 0.0, 1.0);//vec4(0.0, 1.0, 0.0, vp.a);\n}\nelse {\nvp \x3d texture2D(u_image, vec2(pos_nn.s, pos_nn.t));\n}\n}\nelse if (u_resamplingType \x3d\x3d 1)\n{//shift and scaling, 4 neighbors y \x3d ax+b so x \x3d (y-b)/a\npos_ul \x3d vec2(floor(pos.s/originalResolution.s)*originalResolution.s,floor(pos.t/originalResolution.t)*originalResolution.t);\npos_ur \x3d vec2(pos_ul.s+originalResolution.s, pos_ul.t);\npos_ll \x3d vec2(pos_ul.s, pos_ul.t+originalResolution.t);\npos_lr \x3d vec2(pos_ul.s+originalResolution.s, pos_ul.t+originalResolution.t);\npos_offset \x3d vec2(pos.s - floor(pos_ul.s),pos.t - floor(pos_ul.t));\nweight_lr \x3d sqrt(pow(pos_offset.s,2.0) + pow(pos_offset.t,2.0));\nweight_ul \x3d sqrt(pow( originalResolution.s- pos_offset.s,2.0)+ pow(originalResolution.t- pos_offset.t,2.0));\nweight_ur \x3d sqrt(pow( pos_offset.s,2.0)+ 1.0- pow(originalResolution.t - pos_offset.t,2.0));\nweight_ll \x3d sqrt(pow( originalResolution.s- pos_offset.s,2.0)+ pow(pos_offset.t,2.0));\nvp \x3d (texture2D(u_image, pos_ul) * weight_ul + texture2D(u_image, pos_ur) * weight_ur + texture2D(u_image, pos_ll) * weight_ll + texture2D(u_image, pos_lr) * weight_lr)/(weight_ul+weight_ur+weight_ll+weight_lr);\n}\nelse if (u_resamplingType \x3d\x3d 2)\n{//shift and scaling, 16 neighbors\nweight_total \x3d 0.0;\nvp \x3d vec4(0.0,0.0,0.0,0.0);\npos_ul \x3d vec2(floor(pos.s/originalResolution.s)*originalResolution.s-originalResolution.s,floor(pos.t/originalResolution.t)*originalResolution.t-originalResolution.t);\npos_offset \x3d vec2(pos.s - floor(pos_ul.s),pos.t - floor(pos_ul.t));\nfor (int i\x3d0; i\x3c4; i++){//row\nfor (int j\x3d0; j\x3c4; j++){//col\nweight \x3d sqrt(pow(pos_offset.s-float(j),2.0)+ pow(pos_offset.t-float(i),2.0));\nvp +\x3dtexture2D(u_image, vec2(pos_ul.s+float(i)*originalResolution.s,pos_ul.t+float(j)*originalResolution.t)) * weight;\nweight_total +\x3d weight;\n}\n}\nvp \x3d vp/weight_total;\n}\nreturn vp;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d resample();\n}",
slope:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec2 u_resolution;\nuniform vec2 u_cellSize;\nuniform float u_zfactor;\nuniform float u_altitude;\nuniform float u_azimuth;\nfloat shift_right(float v, float amt) {\nv \x3d floor(v) + 0.5;\nreturn floor(v / exp2(amt));\n}\nfloat shift_left(float v, float amt) {\nreturn floor(v * exp2(amt) + 0.5);\n}\nfloat mask_last(float v, float bits) {\nreturn mod(v, shift_left(1.0, bits));\n}\nfloat extract_bits(float num, float from, float to) {\nfrom \x3d floor(from + 0.5);\nto \x3d floor(to + 0.5);\nreturn mask_last(shift_right(num, from), to - from);\n}\nvec4 encode_float(float val) {\nif (val \x3d\x3d 0.0)\nreturn vec4(0, 0, 0, 0);\nfloat sign \x3d val \x3e 0.0 ? 0.0 : 1.0;\nval \x3d abs(val);\nfloat exponent \x3d floor(log2(val));\nfloat biased_exponent \x3d exponent + 127.0;\nfloat fraction \x3d ((val / exp2(exponent)) - 1.0) * 8388608.0;\nfloat t \x3d biased_exponent / 2.0;\nfloat last_bit_of_biased_exponent \x3d fract(t) * 2.0;\nfloat remaining_bits_of_biased_exponent \x3d floor(t);\nfloat byte4 \x3d extract_bits(fraction, 0.0, 8.0) / 255.0;\nfloat byte3 \x3d extract_bits(fraction, 8.0, 16.0) / 255.0;\nfloat byte2 \x3d (last_bit_of_biased_exponent * 128.0 + extract_bits(fraction, 16.0, 23.0)) / 255.0;\nfloat byte1 \x3d (sign * 128.0 + remaining_bits_of_biased_exponent) / 255.0;\nreturn vec4(byte4, byte3, byte2, byte1);\n}\nfloat getNeighborHoodAlpha(float a, float b, float c, float d, float e, float f, float g, float h, float i){\nif (a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0) {\nreturn 0.0;\n}\nelse {\nreturn e;\n}\n}\nvec4 calculateSlope() {\nfloat pi \x3d 3.141592653589793238;\nfloat dzx \x3d 0.0;\nfloat dzy \x3d 0.0;\nvec4 va,  vb,  vc,  vd,  ve,  vf,  vg,  vh,  vi;\nvec2 axy \x3d vec2(-1.0, -1.0);\nvec2 bxy \x3d vec2(0.0, -1.0);\nvec2 cxy \x3d vec2(1.0, -1.0);\nvec2 dxy \x3d vec2(-1.0, 0.0);\nvec2 fxy \x3d vec2(1.0, 0.0);\nvec2 gxy \x3d vec2(-1.0, 1.0);\nvec2 hxy \x3d vec2(0.0, 1.0);\nvec2 ixy \x3d vec2(1.0, 1.0);\nif (v_texCoord.s \x3c u_resolution.s) {\naxy[0] \x3d 1.0;\ndxy[0] \x3d 1.0;\ngxy[0] \x3d 1.0;\n}\nif (v_texCoord.t \x3c u_resolution.t) {\naxy[1] \x3d 1.0;\nbxy[1] \x3d 1.0;\ncxy[1] \x3d 1.0;\n}\nif (v_texCoord.s \x3e 1.0 - u_resolution.s) {\ncxy[0] \x3d -1.0;\nfxy[0] \x3d -1.0;\nixy[0] \x3d -1.0;\n}\nif (v_texCoord.t \x3e 1.0 - u_resolution.t) {\ngxy[1] \x3d -1.0;\nhxy[1] \x3d -1.0;\nixy[1] \x3d -1.0;\n}\nif (v_texCoord.s \x3e\x3d u_resolution.s \x26\x26 (1.0 - u_resolution.s) \x3e\x3d v_texCoord.s \x26\x26 v_texCoord.t \x3e\x3d u_resolution.t \x26\x26 (1.0 - u_resolution.t) \x3e\x3d v_texCoord.t) {\nva \x3d texture2D(u_image, v_texCoord + u_resolution * axy);\nvb \x3d texture2D(u_image, v_texCoord + u_resolution * bxy);\nvc \x3d texture2D(u_image, v_texCoord + u_resolution * cxy);\nvd \x3d texture2D(u_image, v_texCoord + u_resolution * dxy);\nve \x3d texture2D(u_image, v_texCoord + u_resolution * vec2(0, 0));\nvf \x3d texture2D(u_image, v_texCoord + u_resolution * fxy);\nvg \x3d texture2D(u_image, v_texCoord + u_resolution * gxy);\nvh \x3d texture2D(u_image, v_texCoord + u_resolution * hxy);\nvi \x3d texture2D(u_image, v_texCoord + u_resolution * ixy);\n}\ndzx \x3d (vc + 2.0 * vf + vi - va - 2.0 * vd - vg).r / (8.0 * u_cellSize[0]);\ndzy \x3d -(vg + 2.0 * vh + vi - va - 2.0 * vb - vc).r / (8.0 * u_cellSize[1]);\nfloat alpha \x3d getNeighborHoodAlpha(va.a, vb.a, vc.a, vd.a, ve.a, vf.a, vg.a, vh.a, vi.a);\nfloat slope \x3d atan(u_zfactor * sqrt(dzx * dzx + dzy * dzy)) * 57.2957795;\nreturn vec4(slope, slope, slope, alpha);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d calculateSlope();\n}",
stretch:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nuniform sampler2D u_image2;\nvarying vec2 v_texCoord;\nuniform float u_minCutOff[3];\nuniform float u_maxCutOff[3];\nuniform float u_minOutput[3];\nuniform float u_maxOutput[3];\nuniform float u_factor[3];\nuniform int u_bandCount;\nuniform vec2 u_sourceDim;\nuniform vec2 u_targetDim;\nuniform int u_state;\nuniform bool u_minMaxTexture;\nuniform bool u_useGamma;\nuniform float u_gamma[4];\nuniform float u_gammaCorrection[4];\nuniform bool u_scaled;\nuniform vec2 u_rawResolution;\nuniform int u_resampling;\nvec4 getPixelValue(vec2 coords) {\nif (u_resampling \x3d\x3d 0) {\nreturn texture2D(u_image, coords);\n}\nvec2 pos_ul \x3d floor(coords / u_rawResolution) * u_rawResolution;\nvec2 pos_ur \x3d pos_ul + vec2(1.0, 0.0) * u_rawResolution;\nvec2 pos_ll \x3d pos_ul + vec2(0.0, 1.0) * u_rawResolution;\nvec2 pos_lr \x3d pos_ul + vec2(1.0, 1.0) * u_rawResolution;\nvec2 weight \x3d fract(coords / u_rawResolution);\nvec4 vp_ul \x3d texture2D(u_image, pos_ul);\nvec4 vp_ur \x3d texture2D(u_image, pos_ur);\nvec4 vp_ll \x3d texture2D(u_image, pos_ll);\nvec4 vp_lr \x3d texture2D(u_image, pos_lr);\nvec4 vp \x3d mix(mix(vp_ul, vp_ur, weight.x), mix(vp_ll, vp_lr, weight.x), weight.y);\nif (u_bandCount \x3d\x3d 1) {\nfloat alpha \x3d vp_ul.a * vp_ur.a * vp_ll.a * vp_lr.a;\nvec4 vp_nn \x3d texture2D(u_image, coords);\nreturn alpha \x3d\x3d 0.0 ? vp_nn : vec4(vp.rgb, alpha);\n}\nreturn vp;\n}\nvec4 findMin(vec4 p1, vec4 p2) {\nif (p1.a \x3d\x3d 0.0) {\nreturn p2;\n} else if (p2.a \x3d\x3d 0.0) {\nreturn p1;\n} else {\nreturn vec4(min(p1.r, p2.r),min(p1.g, p2.g),min(p1.b, p2.b),p1.a);\n}\n}\nvec4 findMax(vec4 p1, vec4 p2) {\nif (p1.a \x3d\x3d 0.0) {\nreturn p2;\n} else if (p2.a \x3d\x3d 0.0) {\nreturn p1;\n} else {\nreturn vec4(max(p1.r, p2.r),max(p1.g, p2.g),max(p1.b, p2.b),p1.a);\n}\n}\nvec4 findMinMax(vec4 p1, vec4 p2) {\nif (p1.a \x3d\x3d 0.0) {\nreturn p2;\n} else if (p2.a \x3d\x3d 0.0) {\nreturn p1;\n} else {\nreturn vec4(min(p1.r, p2.r), max(p1.g, p2.g), 0.0, p1.a);\n}\n}\nvec4 minMax(int state) {\nvec2 pixelFract \x3d fract(v_texCoord * u_sourceDim);\nfloat xshift \x3d ((pixelFract.s \x3e\x3d 0.5 || pixelFract.s \x3d\x3d 0.0) ? -1.0 : 1.0) / u_sourceDim.s; //take left pixel if \x3e 0.5\nfloat yshift \x3d ((pixelFract.s \x3e\x3d 0.5 || pixelFract.s \x3d\x3d 0.0) ? -1.0 : 1.0) / u_sourceDim.t; //take bottom pixel if \x3e 0.5\nif (u_sourceDim.s \x3d\x3d 1.0) {\nxshift \x3d 0.0;\n}\nif (u_sourceDim.t \x3d\x3d 1.0) {\nyshift \x3d 0.0;\n}\nvec4 p1 \x3d texture2D(u_image, v_texCoord);\nvec4 p2 \x3d texture2D(u_image, v_texCoord + vec2(xshift, 0.0));\nvec4 p3 \x3d texture2D(u_image, v_texCoord + vec2(0.0, yshift));\nvec4 p4 \x3d texture2D(u_image, v_texCoord + vec2(xshift, yshift));\nvec4 pval;\nif (state \x3d\x3d 2) {\npval \x3d findMinMax(findMinMax(p1, p2), findMinMax(p3, p4));\n} else if (state \x3d\x3d 1) {\npval \x3d findMax(findMax(p1, p2), findMax(p3, p4));\n} else if (state \x3d\x3d 0) {\npval \x3d findMin(findMin(p1, p2), findMin(p3, p4));\n}\nreturn pval;\n}\nfloat stretchOneValue(float val, float minCutOff, float maxCutOff, float minOutput, float maxOutput, float factor, bool scaled) {\nfloat stretchedVal;\nif (val \x3e minCutOff \x26\x26 val \x3c maxCutOff) {\nstretchedVal \x3d minOutput + (val - minCutOff) * factor;\n} else if (val \x3e\x3d maxCutOff) {\nstretchedVal \x3d maxOutput;\n} else {\nstretchedVal \x3d minOutput;\n}\nif (scaled) {\nreturn stretchedVal;\n}\nelse {\nreturn stretchedVal / maxOutput; //0-1\n}\n}\nfloat stretchOneValueGamma(float val, float minCutOff, float maxCutOff, float minOutput, float maxOutput, float factor, float gamma, float gammaCorrection, bool scaled) {\nfloat stretchedVal;\nfloat tempf \x3d 1.0;\nfloat outRange \x3d maxOutput - minOutput;\nfloat relativeVal \x3d (val - minCutOff) / (maxCutOff - minCutOff);\nif (val \x3e minCutOff \x26\x26 val \x3c maxCutOff) {\nif (gamma \x3e 1.0) {\ntempf -\x3d pow(1.0 / outRange, relativeVal * gammaCorrection);\n}\nstretchedVal \x3d floor(tempf * outRange * pow(relativeVal, 1.0 / gamma)) + minOutput;\n}\nelse if (val \x3e\x3d maxCutOff) {\nstretchedVal \x3d maxOutput;\n} else {\nstretchedVal \x3d minOutput;\n}\nif (scaled) {\nreturn stretchedVal;\n}\nelse {\nreturn stretchedVal / maxOutput; //0-1\n}\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nif (u_state \x3d\x3d 100) {\nvec4 currentPixel \x3d getPixelValue(v_texCoord);\nfloat grayVal,\nredVal,\ngreenVal,\nblueVal;\nfloat min0,\nmax0,\nmin1,\nmax1,\nmin2,\nmax2,\nfactor0,\nfactor1,\nfactor2;\nvec4 minV, maxV;\nif (u_minMaxTexture) {\nif (u_bandCount \x3d\x3d 1) {\nminV \x3d texture2D(u_image1, v_texCoord);\nmin0 \x3d minV.r;\nmax0 \x3d minV.g;\nfactor0 \x3d (u_maxOutput[0] - u_minOutput[0]) / (max0 - min0);\n} else {\nminV \x3d texture2D(u_image1, v_texCoord);\nmaxV \x3d texture2D(u_image2, v_texCoord);\nmin0 \x3d minV.r;\nmax0 \x3d maxV.r;\nmin1 \x3d minV.g;\nmax1 \x3d maxV.g;\nmin2 \x3d minV.b;\nmax2 \x3d maxV.b;\nfactor0 \x3d (u_maxOutput[0] - u_minOutput[0]) / (max0 - min0);\nfactor1 \x3d (u_maxOutput[1] - u_minOutput[1]) / (max1 - min1);\nfactor2 \x3d (u_maxOutput[2] - u_minOutput[2]) / (max2 - min2);\n}\n} else {\nmin0 \x3d u_minCutOff[0];\nmax0 \x3d u_maxCutOff[0];\nmin1 \x3d u_minCutOff[1];\nmax1 \x3d u_maxCutOff[1];\nmin2 \x3d u_minCutOff[2];\nmax2 \x3d u_maxCutOff[2];\nfactor0 \x3d u_factor[0];\nfactor1 \x3d u_factor[1];\nfactor2 \x3d u_factor[2];\n}\nif (u_useGamma){\nif (u_bandCount \x3d\x3d 1) {\ngrayVal \x3d stretchOneValueGamma(float(currentPixel.r), min0, max0, u_minOutput[0], u_maxOutput[0], factor0, u_gamma[0], u_gammaCorrection[0], u_scaled);\ngl_FragColor \x3d vec4(grayVal, grayVal, grayVal, currentPixel.a);\n} else {\nredVal \x3d stretchOneValueGamma(float(currentPixel.r), min0, max0, u_minOutput[0], u_maxOutput[0], factor0, u_gamma[0], u_gammaCorrection[0], u_scaled);\ngreenVal \x3d stretchOneValueGamma(float(currentPixel.g), min1, max1, u_minOutput[1], u_maxOutput[1], factor1, u_gamma[1], u_gammaCorrection[1], u_scaled);\nblueVal \x3d stretchOneValueGamma(float(currentPixel.b), min2, max2, u_minOutput[2], u_maxOutput[2], factor2, u_gamma[1], u_gammaCorrection[2], u_scaled);\ngl_FragColor \x3d vec4(redVal, greenVal, blueVal, currentPixel.a);\n}\n}\nelse {\nif (u_bandCount \x3d\x3d 1) {\ngrayVal \x3d stretchOneValue(float(currentPixel.r), min0, max0, u_minOutput[0], u_maxOutput[0], factor0, u_scaled);\ngl_FragColor \x3d vec4(grayVal, grayVal, grayVal, currentPixel.a);\n} else {\nredVal \x3d stretchOneValue(float(currentPixel.r), min0, max0, u_minOutput[0], u_maxOutput[0], factor0, u_scaled);\ngreenVal \x3d stretchOneValue(float(currentPixel.g), min1, max1, u_minOutput[1], u_maxOutput[1], factor1, u_scaled);\nblueVal \x3d stretchOneValue(float(currentPixel.b), min2, max2, u_minOutput[2], u_maxOutput[2], factor2, u_scaled);\ngl_FragColor \x3d vec4(redVal, greenVal, blueVal, currentPixel.a);\n}\n}\n} else {\nvec4 currentPixel \x3d minMax(u_state);\ngl_FragColor \x3d currentPixel;\n}\n}"}})},
"esri/layers/rasterLib/function/RasterFunctionWebGLMixin":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ./pixelShaders ./vertexShaders ./webglHelper ./convolutionKernel".split(" "),function(g,e,t,u,l,q,k){return g(null,{gl:null,rgbaFloatData:null,originalTexture:null,lastTexture:null,renderTexture:!1,constructor:function(a){this._isProgramInitialized=!1;this.gl=a&&a.gl;a&&a.renderTexture&&(this.renderTexture=a.renderTexture);this._xformSetting=a&&a._xformSetting||{requireProjection:!1,
meshSize:[20,20]}},bindFrameBuffer:function(){var a=this.gl;this._setupPingPongTextures();this._setupBranchingTextures();var d=this._glSetting;this.isBranch?(d.branchIndex=(d.branchIndex+1)%d.branchCount,d=d.branches[d.branchIndex]):(d.pingpongIndex=(d.pingpongIndex+1)%d.pingpong.length,d=d.pingpong[d.pingpongIndex]);a.bindFramebuffer(a.FRAMEBUFFER,d.frameBuffer);a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight);return d},_initializeProgram:function(a){if(this.gl)try{var d=this.gl;d.viewport(0,
0,d.drawingBufferWidth,d.drawingBufferHeight);var n=this._glSetting.programUniforms,b="local"===this.functionName?"local"+this.functionArguments.operation:this.functionName,h=n[b];if(h)this._uniforms=h.uniforms,this.rasterProgram=h.program;else{var c=(this._useMesh=this._tileMode&&this._xformSetting.requireProjection)?l.mesh:l.basic,f=l.getShader(d,a.vertex||c),p=u.getShader(d,a.fragment),r=this._loadProgram(f,p),m={rasterProgram:q.getUniforms(d,r)};n[b]={uniforms:m,program:r};this.rasterProgram=
r;this._uniforms=m}d.useProgram(this.rasterProgram);var v=d.getAttribLocation(this.rasterProgram,"a_texCoord"),z=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,z);var A=q.createMesh(this._xformSetting.meshSize);d.bufferData(d.ARRAY_BUFFER,A,d.STATIC_DRAW);d.enableVertexAttribArray(v);d.vertexAttribPointer(v,2,d.FLOAT,!1,0,0);d.disable(d.DEPTH_TEST);d.blendFunc(d.SRC_ALPHA,d.ZERO);d.disable(d.BLEND);d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,!1);this._shaderInfo=
{fragment:a.fragmentName}}catch(D){}},_setUniform:function(a,d,n){null!=d&&(n&&!this._uniforms[n]&&(this._uniforms[n]=q.getUniforms(this.gl,this[n])),n=n?this._uniforms[n]:this._uniforms.rasterProgram,(a=n[a]||n[a+"[0]"])&&q.setUniform(this.gl,a,d))},_setUniforms:function(a,d){var n=Object.keys(a),b,h=n.length;for(b=0;b<h;b++)this._setUniform(n[b],a[n[b]],d);this.rawInput?this._setUniform("u_flipY",!0,d):this._setUniform("u_flipY",!1,d);this._tileMode?(this.rawInput?(a=this._xformSetting.offset,n=
this._xformSetting.scale):(a=[0,0],n=[1,1]),this._setUniform("u_xformOffset",a,d),this._setUniform("u_xformScale",n,d),this._xformSetting.requireProjection&&(this.rawInput?(this._setupXformTexture(),this._setUniform("u_projection",!0,d),this._setUniform("u_transformGridSize",this._xformSetting.gridConfig.size,d),this._setUniform("u_transformSpacing",this._xformSetting.gridConfig.spacing,d),this._setUniform("u_targetImageSize",new Float32Array([this.gl.drawingBufferWidth,this.gl.drawingBufferHeight]),
d)):this._setUniform("u_projection",!1,d))):(a=[0,0],n=[1,1],this._setUniform("u_xformOffset",a,d),this._setUniform("u_xformScale",n,d));this.rawInput&&this._rawResolution&&("RSP_BilinearInterpolation"===this.interpolation||"RSP_CubicConvolution"===this.interpolation)?(this._setUniform("u_resampling",1),this._setUniform("u_rawResolution",this._rawResolution)):this._setUniform("u_resampling",0)},_setupTextureData:function(a,d){if(a.texture)return a;a.raster&&a.raster.pixelBlock&&(a=a.raster);this.rawInput=
!0;var n=d&&d.notOriginal,b=d&&d.bandIDs;d&&d.reCreate?d=!1:(d=this._tileMode?!this._xformSetting.hasNewTexture:!this._glSetting.hasNewTexture)&&this._originalBandIDs&&(d=b?this._originalBandIDs.join("")===b.join(""):!1);0<this._glSetting.branchCount&&(d=!1);if(d&&this.originalTexture)return{extent:a.extent,texture:this.originalTexture};d=this._createTexture();n||(this.originalTexture=d,this._originalBandIDs=b);n=this.gl;var h=a.pixelBlock;this._rawResolution=h?[1/a.pixelBlock.width,1/a.pixelBlock.height]:
[1/this.gl.drawingBufferWidth,1/this.gl.drawingBufferHeight];var c=0;b&&0<b.length&&h&&(c=Math.max.apply(null,b),h.pixels.length>c&&b&&(h.pixels=b.map(function(p){return h.pixels[p]}),h.statistics&&(h.statistics=b.map(function(p){return h.statistics[p]}))));b=h.width;c=h.height;n.getExtension("OES_texture_float");var f=h.getAsRGBAFloat();n.texImage2D(n.TEXTURE_2D,0,n.RGBA,b,c,0,n.RGBA,n.FLOAT,f);return{extent:a.extent,texture:d}},_setupPingPongTextures:function(){var a=this._glSetting;if(!a||!a.pingpong){a.pingpong=
[];var d=q.createBufferTexture(this.gl,!1);a.pingpong.push(d);d=q.createBufferTexture(this.gl,!1);a.pingpong.push(d);a.pingpongIndex=1}},_setupBranchingTextures:function(){var a=this._glSetting;if(!a||!a.branches){a.branches=[];var d=0,n=a.branchCount;if(0<n){for(d=0;d<n;d++){var b=q.createBufferTexture(this.gl,!1);a.branches.push(b)}a.branchIndex=n-1}}},_setupXformTexture:function(a){for(var d=this._createTexture(),n=this.gl,b=4*this._xformSetting.gridConfig.size[0],h=this._xformSetting.gridConfig.size[1],
c=new Float32Array(b*h*4),f=0,p=0;p<this._xformSetting.gridConfig.coefficients.length;p++)c[f++]=this._xformSetting.gridConfig.coefficients[p],2===p%3&&(c[f++]=1);n.getExtension("OES_texture_float");n.texImage2D(n.TEXTURE_2D,0,n.RGBA,b,h,0,n.RGBA,n.FLOAT,c);this._bindTexture(d,"u_transformGrid",a)},_createTexture:function(a){return q.createTexture(this.gl,a)},_bindTexture:function(a,d,n){d=d||"u_image";n=this._uniforms[n||"rasterProgram"];var b=this._getTextureIndex(d);if(-1!==b){var h=this.gl;h.uniform1i(n[d].location,
b);h.activeTexture(h.TEXTURE0+b);h.bindTexture(h.TEXTURE_2D,a)}},_getTextureIndex:function(a,d){d=this._uniforms[d||"rasterProgram"];if(!d||!d[a]||d[a].info.type!==this.gl.SAMPLER_2D)return-1;if("u_transformGrid"===a)return 0;a="u_image"===a?0:parseInt(a.replace("u_image",""));return this._xformSetting.requireProjection?a+1:a},_drawGL:function(a){var d=this.gl;this.renderTexture?(d.enable(d.BLEND),d.bindFramebuffer(d.FRAMEBUFFER,null)):d.disable(d.BLEND);a||d.viewport(0,0,d.drawingBufferWidth,d.drawingBufferHeight);
a=this._xformSetting.meshSize||[1,1];d.drawArrays(d.TRIANGLES,0,a[0]*a[1]*6);this._drawMesh()},_drawMesh:function(){if(this.renderTexture&&this._glSetting.drawMesh){this.meshProgram=this.meshProgram||this._setupMeshProgram();var a=this.gl;a.useProgram(this.meshProgram);a.bindFramebuffer(a.FRAMEBUFFER,null);var d=a.getAttribLocation(this.meshProgram,"a_texCoord"),n=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,n);n=this._xformSetting.meshSize||[1,1];var b=q.createMesh(n,!0);a.bufferData(a.ARRAY_BUFFER,
b,a.STATIC_DRAW);a.enableVertexAttribArray(d);a.vertexAttribPointer(d,2,a.FLOAT,!1,0,0);a.disable(a.DEPTH_TEST);a.blendFunc(a.ONE,a.ZERO);this._setUniforms({u_color:[0,0,1,1],u_drawMeshLines:!0},"meshProgram");a.drawArrays(a.LINES,0,n[0]*n[1]*10)}},_setupMeshProgram:function(){var a=l.getShader(this.gl,l.mesh),d=u.getShader(this.gl,u.constant);return this._loadProgram(a,d)},_loadProgram:function(a,d){return q.loadProgram(this.gl,a,d)},_getShaderScript:function(a,d){d=document.getElementById(d);if(!d)return null;
a="";for(d=d.firstChild;d;)3==d.nodeType&&(a+=d.textContent),d=d.nextSibling;return a}})})},"esri/layers/rasterLib/function/webglHelper":function(){define([],function(){var g={getUniforms:function(e,t){var u=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),l,q,k={};for(l=0;l<u;l++)(q=e.getActiveUniform(t,l))&&(k[q.name]={location:e.getUniformLocation(t,q.name),info:q});return k},setUniform:function(e,t,u){var l=t.info;t=t.location;var q=l.type;if(null!=u)switch(q){case e.FLOAT:1<l.size?0!==u.length&&e.uniform1fv(t,
u):e.uniform1f(t,u);break;case e.FLOAT_VEC2:if(0===u.length)break;e.uniform2fv(t,u);break;case e.FLOAT_VEC3:if(0===u.length)break;e.uniform3fv(t,u);break;case e.FLOAT_VEC4:if(0===u.length)break;e.uniform4fv(t,u);break;case e.INT:case e.BOOL:1<l.size?0!==u.length&&e.uniform1iv(t,u):e.uniform1i(t,u);break;case e.INT_VEC2:case e.BOOL_VEC2:if(0===u.length)break;e.uniform2iv(t,u);break;case e.INT_VEC3:case e.BOOL_VEC3:if(0===u.length)break;e.uniform3iv(t,u);break;case e.INT_VEC4:case e.BOOL_VEC4:0!==u.length&&
e.uniform4iv(t,u)}},createTexture:function(e,t){var u=e.createTexture();e.bindTexture(e.TEXTURE_2D,u);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST);return u},createBufferTexture:function(e,t,u){t=g.createTexture(e,t);e.getExtension("OES_texture_float");u=u||[e.drawingBufferWidth,
e.drawingBufferHeight];e.texImage2D(e.TEXTURE_2D,0,e.RGBA,u[0],u[1],0,e.RGBA,e.FLOAT,null);u=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,u);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);return{texture:t,frameBuffer:u}},getShader:function(e,t,u){u=u?e.createShader(e.VERTEX_SHADER):e.createShader(e.FRAGMENT_SHADER);e.shaderSource(u,t);e.compileShader(u);e.getShaderParameter(u,e.COMPILE_STATUS)||(u=null);return u},loadProgram:function(e,t,u){var l=e.createProgram();
e.attachShader(l,t);e.attachShader(l,u);e.linkProgram(l);e.getProgramParameter(l,e.LINK_STATUS)||(e.deleteProgram(l),l=null);return l},createMesh:function(e,t){if(!e||1===e[0]&&1===e[1])return new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]);var u=e&&t?new Float32Array(e[0]*e[1]*20):new Float32Array(e[0]*e[1]*12);var l=.9998/e[1],q=.9998/e[0],k,a,d=0;for(k=0;k<e[1];k++)for(a=0;a<e[0];a++){var n=1E-4+l*k;var b=1E-4+q*a;e&&!t?(u[d++]=n,u[d++]=b,u[d++]=n+l,u[d++]=b,u[d++]=n,u[d++]=b+q,u[d++]=n,u[d++]=b+q,
u[d++]=n+l,u[d++]=b,u[d++]=n+l,u[d++]=b+q):(u[d++]=n,u[d++]=b,u[d++]=n,u[d++]=b+q,u[d++]=n,u[d++]=b+q,u[d++]=n+l,u[d++]=b+q,u[d++]=n+l,u[d++]=b+q,u[d++]=n+l,u[d++]=b,u[d++]=n,u[d++]=b,u[d++]=n+l,u[d++]=b,u[d++]=n,u[d++]=b+q,u[d++]=n+l,u[d++]=b)}return u}};return g})},"esri/layers/rasterLib/function/convolutionKernel":function(){define([],function(){var g={Default:[0,0,0,0,1,0,0,0,0],LineDetectionHorizontal:[-1,-1,-1,2,2,2,-1,-1,-1],LineDetectionVertical:[-1,2,-1,-1,2,-1,-1,2,-1],LineDetectionLeftDiagonal:[2,
-1,-1,-1,2,-1,-1,-1,2],LineDetectionRightDiagonal:[-1,-1,2,-1,2,-1,2,-1,-1],GradientNorth:[-1,-2,-1,0,0,0,1,2,1],GradientWest:[-1,0,1,-2,0,2,-1,0,1],GradientEast:[1,0,-1,2,0,-2,1,0,-1],GradientSouth:[1,2,1,0,0,0,-1,-2,-1],GradientNorthEast:[0,-1,-2,1,0,-1,2,1,0],GradientNorthWest:[-2,-1,0,-1,0,1,0,1,2],SmoothArithmeticMean:[.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111],Smoothing3x3:[.0625,.125,.0625,.125,.25,.125,.0625,
.125,.0625],Smoothing5x5:[1,1,1,1,1,1,4,4,4,1,1,4,12,4,1,1,4,4,4,1,1,1,1,1,1],Sharpening3x3:[-1,-1,-1,-1,9,-1,-1,-1,-1],Sharpening5x5:[-1,-3,-4,-3,-1,-3,0,6,0,-3,-4,6,21,6,-4,-3,0,6,0,-3,-1,-3,-4,-3,-1],Laplacian3x3:[0,-1,0,-1,4,-1,0,-1,0],Laplacian5x5:[0,0,-1,0,0,0,-1,-2,-1,0,-1,-2,17,-2,-1,0,-1,-2,-1,0,0,0,-1,0,0],SobelHorizontal:[-1,-2,-1,0,0,0,1,2,1],SobelVertical:[-1,0,1,-2,0,2,-1,0,1],Sharpen:[0,-.25,0,-.25,2,-.25,0,-.25,0],Sharpen2:[-.25,-.25,-.25,-.25,3,-.25,-.25,-.25,-.25],PointSpread:[-.627,
.352,-.627,.352,2.923,.352,-.627,.352,-.627],getKernel:function(e){switch(e){case 0:return g.LineDetectionHorizontal;case 1:return g.LineDetectionVertical;case 2:return g.LineDetectionLeftDiagonal;case 3:return g.LineDetectionRightDiagonal;case 4:return g.GradientNorth;case 5:return g.GradientWest;case 6:return g.GradientEast;case 7:return g.GradientSouth;case 8:return g.GradientNorthEast;case 9:return g.GradientNorthWest;case 10:return g.SmoothArithmeticMean;case 11:return g.Smoothing3x3;case 12:return g.Smoothing5x5;
case 13:return g.Sharpening3x3;case 14:return g.Sharpening5x5;case 15:return g.Laplacian3x3;case 16:return g.Laplacian5x5;case 17:return g.SobelHorizontal;case 18:return g.SobelVertical;case 19:return g.Sharpen;case 20:return g.Sharpen2;case 21:return g.PointSpread;default:return g.Default}}};return g})},"esri/layers/rasterLib/raster/rasterFactory":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/sniff dojo/when ../../../kernel ../../../Evented ../../../request ../../../deferredUtils ../../../urlUtils ./ImageServiceRaster ./TileServiceRaster ./TileRaster ./FunctionRaster".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h,c,f,p,r,m){g={customDrivers:[],create:function(v){if(v){if(v.url){var z=c.urlToObject(v.url);var A=z.path;var D=z.query}z=v.serviceInfo;var E=v.rasterFxArgs||{},F=new u,y=t.hitch(this,function(B){this._trycustomDrivers(t.mixin({url:A},v),0,F)});if(A)if(-1===A.toLowerCase().indexOf("imageserver")&&-1===A.toLowerCase().indexOf("mapserver")){var x=new r(t.mixin({},v,{url:A}));v.rasterFx&&(x=new m({rasterFx:v.rasterFx,rasterFxArgs:t.mixin({},E,{raster:x})}));var w=x}else{w=
new u;z=z||this._getServiceInfo(A,D);var C=t.hitch(this,function(B){B.bandCount?x=new f(t.mixin({},{serviceInfo:B},D,v,{url:A})):B.tileInfo&&(x=new p(t.mixin({},{serviceInfo:B},D,this._options,{url:A})));v.rasterFx&&(x=new m({rasterFx:v.rasterFx,rasterFxArgs:t.mixin({},E,{raster:x})}));w.resolve(x)});a(z,C,y)}else w=x=new m({rasterFx:v.rasterFx,rasterFxArgs:t.mixin({},E,{raster:x})});a(w,t.hitch(this,function(B){B?B.open().then(t.hitch(this,function(I){F.resolve(B)}),y):y(Error("There is no raster to open"))}),
y);return F.promise}},register:function(v){this.customDrivers=this.customDrivers||[];0<this.customDrivers.filter(function(z){return z.sourceType===v.prototype.sourceType}).length||this.customDrivers.push(v)},_trycustomDrivers:function(v,z,A){A=A||new u;var D=this.customDrivers[z];if(D){var E=new D(v);E.open().then(t.hitch(this,function(F){A.resolve(E)}),t.hitch(this,function(F){this._trycustomDrivers(v,z+1,A)}))}else A.reject("cannot load layer "+(v&&v.url||""));return A.promise},_getServiceInfo:function(v,
z){z=z||{};var A=z.bandIds;z=z.renderingRule;var D=new u(h._dfdCanceller),E={f:"json"};A&&(E.bandIds=A);z&&(E.renderingRule=z.toJson?JSON.stringify(z.toJson()):JSON.stringify(z));D._pendingDfd=b({url:v,content:E,handleAs:"json",callbackParamName:"callback"});D._pendingDfd.then(function(F){D.callback(F)},function(F){D.errback(F)});return D.promise}};t.setObject("layers.rasterLib.raster.rasterFactory",g,d);return g})},"esri/layers/rasterLib/raster/ImageServiceRaster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/_base/json dojo/sniff dojo/DeferredList dojo/when ../../../kernel ../../../Evented ../../../request ../../../geometry/Extent ../../../geometry/Point ../../../SpatialReference ../../../WKIDUnitConversion ../../../deferredUtils ../../../urlUtils ../../MosaicRule ../../ImageServiceParameters ../../PixelBlock ./RasterInfo ./BasicRaster ../../rasterFormats/rasterCodec ../tile/RasterTileInfo".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h,c,f,p,r,m,v,z,A,D,E,F,y,x,w){g=e([y],{declaredClass:"esri.layers.rasterLib.raster.ImageServiceRaster",sourceType:"ImageService",constructor:function(C){C&&(this._imageServiceParams=C.imageServiceParameters,this._commonReqParams=C._commonReqParams,this._imageServiceParams||(this._imageServiceParams={interpolation:C.interpolation,pixelType:C.pixelType,format:C.format||"lerc",compressionQuality:C.compressionQuality,bandIds:C.bandIds,noDataInterpretation:C.noDataInterpretation,
adjustAspectRatio:C.adjustAspectRatio,mosaicRule:C.mosaicRule,renderingRule:C.interpolation}))},open:function(){var C=new u;if(this.serviceInfo&&this.rasterInfo)return this.loaded=!0,this._findCredential(),this.setFetchParameters(this._imageServiceParams),C.resolve(this),C.promise;var B=this.serviceInfo||this._generateServiceInfo(this._imageServiceParams&&this._imageServiceParams.renderingRule),I=t.hitch(this,function(V){this._fixServiceInfo(V);this.serviceInfo=V;this._findCredential();var Y=this._parseRasterInfo(V),
ca={};V.defaultMosaicMethod?(ca.method=V.defaultMosaicMethod,ca.operation=V.mosaicOperator,ca.sortField=V.sortField,ca.sortValue=V.sortValue):ca.method=A.METHOD_NONE;this.serviceInfo.defaultMosaicRule=new A(ca);this.serviceInfo.defaultMosaicRule.ascending=!0;V=this._getColormap(this);ca=this._getHistograms(this);var J=this._getRasterAttributeTable(this),O=this._getKeyProperties(this),U=this._getMultidimensionalInfo(),ba=this._getSlices();(new d([V,ca,J,O,U,ba])).then(t.hitch(this,function(Z){Z[0][0]&&
(Y.colormap=Z[0][1]);Z[1][0]&&(Y.histograms=Z[1][1]);Z[2][0]&&(Y.vat=Z[2][1]);Z[3][0]&&(Y.keyProperties=Z[3][1]);Z[4][0]&&(Y.multidimensionalInfo=Z[4][1],Y.multidimensionalInfo&&Y.multidimensionalInfo.variables&&Y.multidimensionalInfo.variables.forEach(function(fa){fa.statistics&&(fa.statistics.forEach(function(pa){pa.stddev=pa.standardDeviation}),Y.statistics||fa.statistics.length!==Y.bandCount||(Y.statistics=fa.statistics));!Y.histograms&&fa.histograms&&fa.histograms.length===Y.bandCount&&(Y.histograms=
fa.histograms)}));Y.keyProperties=Y.keyProperties||{};this._slices=Z[5][0]?Z[5][1]:null;Y.keyProperties&&Y.keyProperties.DataType&&(this.dataType=Y.keyProperties.DataType);Y.keyProperties&&Y.keyProperties.DefaultVariable&&(this.defaultVariable=Y.keyProperties.DefaultVariable);this.loaded=!0;this.rasterInfo=Y;this.setFetchParameters(this._imageServiceParams);C.resolve(this)}))}),N=t.hitch(this,function(V){this.loaded=!0;C.reject(V)});n(B,I,N);return C.promise},setFetchParameters:function(C,B){if(B)this.imageServiceParams=
C;else{var I=this.imageServiceParams;I&&C?Object.keys(C).forEach(function(N){I[N]=C[N]}):this.imageServiceParams=C}this._constructGetImageParams();this._getRasterIdentifier(!0)},read:function(C){if(C.pixelBlock||C.texture){var B=new u;B.resolve(C);return B.promise}if(!1===C.virtual&&this.tileInfo&&!this.tileInfo.virtual)return this.readTile(C);if(this._slices){var I=this._getSliceId();if(null==I)return B=new u,B.resolve(C),B.promise}var N=C.extent,V=N.spatialReference.wkid||k.toJson(N.spatialReference.toJson(!1)),
Y=C.timeExtent?C.timeExtent.toJson().join(","):null;B=this.url+"/exportImage";var ca={};this._slices&&(ca.sliceid=I);this.disableClientCaching&&(ca._ts=(new Date).getTime());I=t.mixin({},this._commonReqParams,{bbox:N.xmin+","+N.ymin+","+N.xmax+","+N.ymax,imageSR:V,bboxSR:V,size:C.width+","+C.height,time:Y},ca);return this._requestPixels({url:B,payload:I,decodeParams:{width:C.width,height:C.height,planes:null,pixelType:null,format:null,decodeFunc:null,isPoint:!1},tileOptions:C})},readTile:function(C){var B=
this.tileBoundary&&this.tileBoundary[C.level];if(B&&(B.minRow>C.row||B.maxRow<C.row||B.minCol>C.col||B.maxCol<C.col)){var I=new u;I.resolve(C);return I.promise}if(this._slices&&(I=this._getSliceId(),null==I))return I=new u,I.resolve(C),I.promise;B=this.url+"/tile/"+C.level+"/"+C.row+"/"+C.col;var N={width:this.tileInfo.cols,height:this.tileInfo.rows,planes:null,pixelType:null,format:null,decodeFunc:null,useWasm:!0,isPoint:"elevation"===C.tileType.toLowerCase()?!0:!1};I=this._slices?"sliceid\x3d"+
I+"\x26":"";I=this.disableClientCaching?"_ts\x3d "+(new Date).getTime():I.replace(/&$/,"");return this._requestPixels({url:B+(0<I.length?"?"+I:""),payload:{},decodeParams:N,tileOptions:C})},toJson:function(){return{url:this.url,tileInfo:this.tileInfo,rasterInfo:this.rasterInfo,serviceInfo:this.serviceInfo,sourceType:this.sourceType,_commonReqParams:this._commonReqParams,_rasterId:this._rasterId}},_getSliceId:function(){var C=t.clone(this._imageServiceParams.multidimensionalDefinition),B=t.clone(this._imageServiceParams.time);
if(null==this._slices||null==B&&(null==C||0===C.length))return 0;var I=C||this.defaultMultidimensionalDefinition,N=I[0].variableName;I=this._getAllDimensionDefinition(I,N).definition;C=null;if(null==I||0===I.length)return null;if(B&&this.serviceInfo.timeInfo){if(null==B[1]||B[1]===B[0])var V=B[0];else{var Y=this.serviceInfo.timeInfo.startTimeField;V=this.rasterInfo.multidimensionalInfo.variables.find(function(O){return O.name===N}).dimensions.find(function(O){return O.name===Y}).values.filter(function(O){return Array.isArray(O)?
Math.max(O[0],B[0])<Math.min(O[1],B[1]):O>=B[0]&&O<=B[1]}).sort(function(O,U){O=Array.isArray(O)?O[1]:O;U=Array.isArray(U)?O[1]:U;return Math.abs(B[1]-O)-Math.abs(B[1]-U)})[0]||[B[1]]}I.some(function(O){if(O.dimensionName===Y)return O.values[0]=V,!0;if(!O.dimensionName)return O.dimensionName=Y,O.isSlice=!0,O.values=[V],!0})||I.push({variableName:N,dimensionName:Y,isSlice:!0,values:[V]})}for(var ca=0;ca<this._slices.length;ca++){var J=this._slices[ca].multidimensionalDefinition;if(J.length===I.length&&
!J.some(function(O){var U=I.filter(function(Z){return O.variableName===Z.variableName&&Z.dimensionName===O.dimensionName})[0];if(!U)return!0;var ba=Array.isArray(O.values[0])?O.values[0][0]:O.values[0];U=Array.isArray(U.values[0])?U.values[0][0]:U.values[0];return ba!==U})){C=ca;break}}return C},_getAllDimensionDefinition:function(C,B){var I=C.map(function(V){return V.dimensionName}),N=!1;this.rasterInfo.multidimensionalInfo.variables.forEach(function(V){V.name!==B||V.dimensions.length===C.length&&
I[0]||(V.dimensions.forEach(function(Y){0>I.indexOf(Y.name)&&(I[0]?C.push({variableName:B,dimensionName:Y.name,values:[Y.values[0]]}):(C[0].dimensionName=Y.name,C[0].values=[Y.values[0]],Y[0]=Y.name))}),N=!0)},this);return{defChanged:N,definition:C}},_generateServiceInfo:function(C){var B=this.url,I=new u(v._dfdCanceller);I._pendingDfd=c({url:B,content:{f:"json",renderingRule:C?k.toJson(C.toJson()):null},handleAs:"json",callbackParamName:"callback"});I._pendingDfd.then(function(N){I.callback(N)},
function(N){I.errback(N)});return I},_fixServiceInfo:function(C){var B=C.spatialReference.wkid;C.tileInfo&&0===C.extent.xmin&&360===C.extent.xmax&&B&&null==m[B]&&(C.tileInfo.applyGCS360Transform=!0)},_parseRasterInfo:function(C){var B=new F;B.bandCount=C.bandCount;B.extent=new f(C.fullExtent);B.spatialReference=C.spatialReference;B.pixelType=C.pixelType;B.width=Math.floor((C.fullExtent.xmax-C.fullExtent.xmin)/C.pixelSizeX+.5);B.height=Math.floor((C.fullExtent.ymax-C.fullExtent.ymin)/C.pixelSizeY+
.5);B.cellSize=new p({x:C.pixelSizeX,y:C.pixelSizeY,spatialReference:C.spatialReference});var I;if(C.minValues&&0<C.minValues.length&&C.maxValues&&C.stdvValues&&C.meanValues){var N=[];for(I=0;I<C.minValues.length;I++)N.push({min:C.minValues[I],max:C.maxValues[I],mean:C.meanValues[I],stddev:C.stdvValues[I]});C.bandCount!==N.length&&(N=null)}this.dataType=C.serviceDataType?C.serviceDataType.replace("esriImageServiceDataType",""):"Generic";B.statistics=N;C.objectIdField&&C.fields&&(B.catalogInfo={objectIdField:C.objectIdField,
fields:C.fields});B.timeInfo=C.timeInfo;if(C.tileInfo){this.tileInfo=new w(C.tileInfo);this.tileInfo.tileType=C.cacheType||"Map";B.tileInfo=this.tileInfo;var V=B.extent,Y=this.tileInfo.origin,ca=this.tileInfo.cols,J=this.tileInfo.rows;this.tileBoundary=this.tileInfo.lods.map(function(O){return{minCol:Math.floor((V.xmin-Y.x+.1*O.resolution)/ca/O.resolution),maxCol:Math.floor((V.xmax-Y.x-.1*O.resolution)/ca/O.resolution),minRow:Math.floor((Y.y-V.ymax+.1*O.resolution)/J/O.resolution),maxRow:Math.floor((Y.y-
V.ymin-.1*O.resolution)/J/O.resolution)}})}return B},_getColormap:function(C){C=this.url+"/colormap";var B=new u(v._dfdCanceller),I={f:"json"},N=this.serviceInfo.hasColormap||this.rasterInfo&&this.rasterInfo.hasColormap;10<this.serviceInfo.currentVersion&&N?(B._pendingDfd=c({url:C,content:I,handleAs:"json",callbackParamName:"callback"}),B._pendingDfd.then(function(V){B.callback(V.colormap)},function(V){B.errback(V)})):B.callback(null);return B},_getHistograms:function(C){var B=this.url+"/histograms",
I=new u(v._dfdCanceller),N={f:"json"},V=this.serviceInfo.hasHistograms||this.rasterInfo&&this.rasterInfo.hasHistograms;C&&C.renderingRule&&(N.renderingRule=k.toJson(C.renderingRule.toJson()),V=!0);10<this.serviceInfo.currentVersion&&V?(I._pendingDfd=c({url:B,content:N,handleAs:"json",callbackParamName:"callback"}),I._pendingDfd.then(function(Y){I.callback(Y.histograms)},function(Y){I.errback(Y)})):I.callback(null);return I},_getRasterAttributeTable:function(C){var B=this.url+"/rasterAttributeTable",
I=new u(v._dfdCanceller),N={f:"json"},V=this.serviceInfo.hasRasterAttributeTable;C&&C.renderingRule&&(N.renderingRule=k.toJson(C.renderingRule.toJson()),V=!0);10<this.serviceInfo.currentVersion&&V?(I._pendingDfd=c({url:B,content:N,handleAs:"json",callbackParamName:"callback"}),I._pendingDfd.then(function(Y){I.callback(Y)},function(Y){I.errback(Y)})):I.callback(null);return I},_getKeyProperties:function(C){var B=this.url+"/keyProperties",I=new u(v._dfdCanceller),N={f:"json"};C&&C.renderingRule&&(N.renderingRule=
k.toJson(C.renderingRule.toJson()));10<this.serviceInfo.currentVersion?(I._pendingDfd=c({url:B,content:N,handleAs:"json",callbackParamName:"callback"}),I._pendingDfd.then(function(V){I.callback(V)},function(V){I.errback(V)})):I.callback(null);return I},_getMultidimensionalInfo:function(){var C=this.url+"/multidimensionalInfo",B=new u(v._dfdCanceller);10.3<=this.serviceInfo.currentVersion&&this.serviceInfo.hasMultidimensions?(B._pendingDfd=c({url:C,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),
B._pendingDfd.then(t.hitch(this,function(I){B.callback(I.multidimensionalInfo)}),function(I){B.errback(I)})):B.callback(null);return B},_getSlices:function(){var C=this.url+"/slices",B=new u(v._dfdCanceller);this.serviceInfo.hasMultidimensions?(B._pendingDfd=c({url:C,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),B._pendingDfd.then(t.hitch(this,function(I){B.callback(I.slices)}),function(I){B.errback(I)})):B.callback(null);return B},_initializationFailed:function(){},_constructGetImageParams:function(){var C=
this.imageServiceParams||{},B=t.mixin({},this._query,{f:"image",interpolation:C.interpolation,pixelType:C.pixelType,format:C.format||"lerc",compressionQuality:C.compressionQuality,bandIds:C.bandIds?C.bandIds.join(","):null,noData:null!=C.noData?C.noData.join(","):null,noDataInterpretation:C.noDataInterpretation,adjustAspectRatio:null==C.adjustAspectRatio?null:C.adjustAspectRatio,mosaicRule:C.mosaicRule?k.toJson(C.mosaicRule.toJson()):null,renderingRule:C.renderingRule?k.toJson(C.renderingRule.toJson()):
null,token:this.credential&&this.credential.token||null});"lerc"===B.format.toLowerCase()?(B.compressionTolerance=C.compressionTolerance,10.5<=this.serviceInfo.currentVersion&&(B.lercVersion=C.lercVersion||2)):"tiff"===B.format.toLowerCase()?B.compression=C.compression:-1<["jpg","jpeg","jpg","jpgpng"].indexOf(B.format.toLowerCase())&&(B.compression=C.compression);this._commonReqParams=B},_getRasterIdentifier:function(C){if(this._rasterId)return this._rasterId;C=this.url.replace("http:","").replace("https:",
"");var B=[],I=this.imageServiceParams||{};B.push(C);B.push(I.interpolation);B.push(I.pixelType);B.push(I.compressionQuality);B.push(I.bandIds?I.bandIds.join(","):"");B.push(I.mosaicRule?k.toJson(I.mosaicRule.toJson()):"");B.push(I.renderingRule?k.toJson(I.renderingRule.toJson()):"");C=B.join("|");return this._rasterId=this._computeSignature(C)},_wrapExtent:function(C){var B=C.spatialReference._getInfo();if(B){var I=B.valid[0];B=B.valid[1];if(C.xmin<I-this.resolution.x||C.xmax>B+this.resolution.y){var N=
new f((C.xmin-I)%(B-I),C.ymin,(C.xmax-B)%(B-I),C.ymax,C.spatialReference);N.xmax<N.xmin&&(N=null)}}return N||C}});t.setObject("layers.rasterLib.raster.ImageServiceRaster",g,b);return g})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(g,e){var t={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,
8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,
8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,
8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,
10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,
24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,
31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,
102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,
103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,
103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,
103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(g=2E3;2045>=g;g++)t[g]=0;for(g=2056;2065>=g;g++)t[g]=0;for(g=2067;2135>=g;g++)t[g]=0;for(g=2137;2154>=
g;g++)t[g]=0;for(g=2161;2170>=g;g++)t[g]=0;for(g=2172;2193>=g;g++)t[g]=0;for(g=2195;2198>=g;g++)t[g]=0;for(g=2200;2203>=g;g++)t[g]=0;for(g=2205;2217>=g;g++)t[g]=0;for(g=2222;2224>=g;g++)t[g]=1;for(g=2225;2250>=g;g++)t[g]=2;for(g=2251;2253>=g;g++)t[g]=1;for(g=2257;2264>=g;g++)t[g]=2;for(g=2274;2279>=g;g++)t[g]=2;for(g=2280;2282>=g;g++)t[g]=1;for(g=2283;2289>=g;g++)t[g]=2;for(g=2290;2292>=g;g++)t[g]=0;for(g=2308;2313>=g;g++)t[g]=0;for(g=2315;2491>=g;g++)t[g]=0;for(g=2494;2866>=g;g++)t[g]=0;for(g=2867;2869>=
g;g++)t[g]=1;for(g=2870;2888>=g;g++)t[g]=2;for(g=2891;2895>=g;g++)t[g]=2;for(g=2896;2898>=g;g++)t[g]=1;for(g=2902;2908>=g;g++)t[g]=2;for(g=2915;2920>=g;g++)t[g]=2;for(g=2921;2923>=g;g++)t[g]=1;for(g=2924;2930>=g;g++)t[g]=2;for(g=2931;2962>=g;g++)t[g]=0;for(g=2964;2968>=g;g++)t[g]=2;for(g=2969;2973>=g;g++)t[g]=0;for(g=2975;2991>=g;g++)t[g]=0;for(g=2995;3051>=g;g++)t[g]=0;for(g=3054;3079>=g;g++)t[g]=0;for(g=3081;3088>=g;g++)t[g]=0;for(g=3092;3101>=g;g++)t[g]=0;for(g=3106;3138>=g;g++)t[g]=0;for(g=3146;3151>=
g;g++)t[g]=0;for(g=3153;3166>=g;g++)t[g]=0;for(g=3168;3172>=g;g++)t[g]=0;for(g=3174;3203>=g;g++)t[g]=0;for(g=3294;3358>=g;g++)t[g]=0;for(g=3367;3403>=g;g++)t[g]=0;for(g=3408;3416>=g;g++)t[g]=0;for(g=3417;3438>=g;g++)t[g]=2;for(g=3441;3446>=g;g++)t[g]=2;for(g=3447;3450>=g;g++)t[g]=0;for(g=3451;3459>=g;g++)t[g]=2;for(g=3460;3478>=g;g++)t[g]=0;for(g=3554;3559>=g;g++)t[g]=0;for(g=3560;3570>=g;g++)t[g]=2;for(g=3571;3581>=g;g++)t[g]=0;for(g=3594;3597>=g;g++)t[g]=0;for(g=3601;3604>=g;g++)t[g]=0;for(g=3637;3639>=
g;g++)t[g]=0;for(g=3665;3667>=g;g++)t[g]=0;for(g=3693;3695>=g;g++)t[g]=0;for(g=3701;3727>=g;g++)t[g]=0;for(g=3728;3739>=g;g++)t[g]=2;for(g=3740;3751>=g;g++)t[g]=0;for(g=3753;3760>=g;g++)t[g]=2;for(g=3761;3773>=g;g++)t[g]=0;for(g=3775;3777>=g;g++)t[g]=0;for(g=3779;3781>=g;g++)t[g]=0;for(g=3783;3785>=g;g++)t[g]=0;for(g=3788;3791>=g;g++)t[g]=0;for(g=3797;3802>=g;g++)t[g]=0;for(g=3814;3816>=g;g++)t[g]=0;for(g=3825;3829>=g;g++)t[g]=0;for(g=3832;3841>=g;g++)t[g]=0;for(g=3844;3852>=g;g++)t[g]=0;for(g=3873;3885>=
g;g++)t[g]=0;for(g=3890;3893>=g;g++)t[g]=0;for(g=3907;3912>=g;g++)t[g]=0;for(g=3942;3950>=g;g++)t[g]=0;for(g=3968;3970>=g;g++)t[g]=0;for(g=3973;3976>=g;g++)t[g]=0;for(g=3986;3989>=g;g++)t[g]=0;for(g=3994;3997>=g;g++)t[g]=0;for(g=4048;4051>=g;g++)t[g]=0;for(g=4056;4063>=g;g++)t[g]=0;for(g=4093;4096>=g;g++)t[g]=0;for(g=4390;4398>=g;g++)t[g]=0;for(g=4399;4413>=g;g++)t[g]=2;for(g=4418;4433>=g;g++)t[g]=2;for(g=4455;4457>=g;g++)t[g]=2;for(g=4484;4489>=g;g++)t[g]=0;for(g=4491;4554>=g;g++)t[g]=0;for(g=4568;4589>=
g;g++)t[g]=0;for(g=4652;4656>=g;g++)t[g]=0;for(g=4766;4800>=g;g++)t[g]=0;for(g=5014;5016>=g;g++)t[g]=0;for(g=5069;5072>=g;g++)t[g]=0;for(g=5105;5130>=g;g++)t[g]=0;for(g=5167;5188>=g;g++)t[g]=0;for(g=5253;5259>=g;g++)t[g]=0;for(g=5269;5275>=g;g++)t[g]=0;for(g=5292;5311>=g;g++)t[g]=0;for(g=5329;5331>=g;g++)t[g]=0;for(g=5343;5349>=g;g++)t[g]=0;for(g=5355;5357>=g;g++)t[g]=0;for(g=5387;5389>=g;g++)t[g]=0;for(g=5459;5463>=g;g++)t[g]=0;for(g=5479;5482>=g;g++)t[g]=0;for(g=5518;5520>=g;g++)t[g]=0;for(g=5530;5539>=
g;g++)t[g]=0;for(g=5550;5552>=g;g++)t[g]=0;for(g=5562;5583>=g;g++)t[g]=0;for(g=5623;5625>=g;g++)t[g]=2;for(g=5631;5639>=g;g++)t[g]=0;for(g=5649;5653>=g;g++)t[g]=0;for(g=5663;5680>=g;g++)t[g]=0;for(g=5682;5685>=g;g++)t[g]=0;for(g=5875;5877>=g;g++)t[g]=0;for(g=5896;5899>=g;g++)t[g]=0;for(g=5921;5940>=g;g++)t[g]=0;for(g=6050;6125>=g;g++)t[g]=0;for(g=6244;6275>=g;g++)t[g]=0;for(g=6328;6348>=g;g++)t[g]=0;for(g=6350;6356>=g;g++)t[g]=0;for(g=6366;6372>=g;g++)t[g]=0;for(g=6381;6387>=g;g++)t[g]=0;for(g=6393;6404>=
g;g++)t[g]=0;for(g=6480;6483>=g;g++)t[g]=0;for(g=6511;6514>=g;g++)t[g]=0;for(g=6579;6581>=g;g++)t[g]=0;for(g=6619;6624>=g;g++)t[g]=0;for(g=6625;6627>=g;g++)t[g]=2;for(g=6628;6632>=g;g++)t[g]=0;for(g=6634;6637>=g;g++)t[g]=0;for(g=6669;6692>=g;g++)t[g]=0;for(g=6707;6709>=g;g++)t[g]=0;for(g=6720;6723>=g;g++)t[g]=0;for(g=6732;6738>=g;g++)t[g]=0;for(g=6931;6933>=g;g++)t[g]=0;for(g=6956;6959>=g;g++)t[g]=0;for(g=7005;7007>=g;g++)t[g]=0;for(g=7057;7070>=g;g++)t[g]=2;for(g=7074;7082>=g;g++)t[g]=0;for(g=7109;7118>=
g;g++)t[g]=0;for(g=7119;7127>=g;g++)t[g]=1;for(g=7374;7376>=g;g++)t[g]=0;for(g=7528;7586>=g;g++)t[g]=0;for(g=7587;7645>=g;g++)t[g]=2;for(g=7692;7696>=g;g++)t[g]=0;for(g=7755;7787>=g;g++)t[g]=0;for(g=7791;7795>=g;g++)t[g]=0;for(g=7799;7801>=g;g++)t[g]=0;for(g=7803;7805>=g;g++)t[g]=0;for(g=7825;7831>=g;g++)t[g]=0;for(g=7845;7859>=g;g++)t[g]=0;for(g=8013;8032>=g;g++)t[g]=0;for(g=8065;8068>=g;g++)t[g]=1;for(g=8518;8529>=g;g++)t[g]=2;for(g=8533;8536>=g;g++)t[g]=2;for(g=8538;8540>=g;g++)t[g]=2;for(g=8677;8679>=
g;g++)t[g]=0;for(g=8836;8840>=g;g++)t[g]=0;for(g=8857;8859>=g;g++)t[g]=0;for(g=8908;8910>=g;g++)t[g]=0;for(g=9154;9159>=g;g++)t[g]=0;for(g=9205;9218>=g;g++)t[g]=0;for(g=9271;9273>=g;g++)t[g]=0;for(g=9295;9297>=g;g++)t[g]=0;for(g=9356;9360>=g;g++)t[g]=0;for(g=9404;9407>=g;g++)t[g]=0;for(g=9476;9482>=g;g++)t[g]=0;for(g=9487;9494>=g;g++)t[g]=0;for(g=9697;9699>=g;g++)t[g]=0;for(g=9821;9865>=g;g++)t[g]=0;for(g=10285;10291>=g;g++)t[g]=0;for(g=10314;10317>=g;g++)t[g]=0;for(g=10448;10465>=g;g++)t[g]=0;for(g=
11114;11118>=g;g++)t[g]=0;for(g=20004;20032>=g;g++)t[g]=0;for(g=20047;20049>=g;g++)t[g]=0;for(g=20062;20092>=g;g++)t[g]=0;for(g=20135;20138>=g;g++)t[g]=0;for(g=20248;20258>=g;g++)t[g]=0;for(g=20348;20358>=g;g++)t[g]=0;for(g=20436;20440>=g;g++)t[g]=0;for(g=20822;20824>=g;g++)t[g]=0;for(g=20904;20932>=g;g++)t[g]=0;for(g=20934;20936>=g;g++)t[g]=0;for(g=21004;21032>=g;g++)t[g]=0;for(g=21035;21037>=g;g++)t[g]=0;for(g=21095;21097>=g;g++)t[g]=0;for(g=21148;21150>=g;g++)t[g]=0;for(g=21207;21264>=g;g++)t[g]=
0;for(g=21307;21364>=g;g++)t[g]=0;for(g=21413;21423>=g;g++)t[g]=0;for(g=21453;21463>=g;g++)t[g]=0;for(g=21473;21483>=g;g++)t[g]=0;for(g=21780;21782>=g;g++)t[g]=0;for(g=21891;21894>=g;g++)t[g]=0;for(g=21896;21899>=g;g++)t[g]=0;for(g=22171;22177>=g;g++)t[g]=0;for(g=22181;22187>=g;g++)t[g]=0;for(g=22191;22197>=g;g++)t[g]=0;for(g=22207;22222>=g;g++)t[g]=0;for(g=22229;22232>=g;g++)t[g]=0;for(g=22234;22236>=g;g++)t[g]=0;for(g=22243;22250>=g;g++)t[g]=0;for(g=22262;22265>=g;g++)t[g]=0;for(g=22307;22322>=
g;g++)t[g]=0;for(g=22348;22357>=g;g++)t[g]=0;for(g=22407;22422>=g;g++)t[g]=0;for(g=22462;22465>=g;g++)t[g]=0;for(g=22521;22525>=g;g++)t[g]=0;for(g=22607;22622>=g;g++)t[g]=0;for(g=22641;22646>=g;g++)t[g]=0;for(g=22648;22657>=g;g++)t[g]=0;for(g=22707;22722>=g;g++)t[g]=0;for(g=22762;22765>=g;g++)t[g]=0;for(g=22807;22822>=g;g++)t[g]=0;for(g=22991;22994>=g;g++)t[g]=0;for(g=23028;23038>=g;g++)t[g]=0;for(g=23301;23333>=g;g++)t[g]=2;for(g=23830;23853>=g;g++)t[g]=0;for(g=23866;23872>=g;g++)t[g]=0;for(g=23877;23884>=
g;g++)t[g]=0;for(g=23886;23894>=g;g++)t[g]=0;for(g=23946;23948>=g;g++)t[g]=0;for(g=24311;24313>=g;g++)t[g]=0;for(g=24342;24347>=g;g++)t[g]=0;for(g=24370;24374>=g;g++)t[g]=10;for(g=24375;24381>=g;g++)t[g]=0;for(g=24718;24721>=g;g++)t[g]=0;for(g=24817;24821>=g;g++)t[g]=0;for(g=24877;24882>=g;g++)t[g]=0;for(g=24891;24893>=g;g++)t[g]=0;for(g=25391;25395>=g;g++)t[g]=0;for(g=25828;25838>=g;g++)t[g]=0;for(g=26191;26195>=g;g++)t[g]=0;for(g=26391;26393>=g;g++)t[g]=0;for(g=26701;26722>=g;g++)t[g]=0;for(g=26729;26799>=
g;g++)t[g]=2;for(g=26801;26803>=g;g++)t[g]=2;for(g=26811;26813>=g;g++)t[g]=2;for(g=26847;26870>=g;g++)t[g]=2;for(g=26891;26899>=g;g++)t[g]=0;for(g=26901;26923>=g;g++)t[g]=0;for(g=26929;26946>=g;g++)t[g]=0;for(g=26948;26998>=g;g++)t[g]=0;for(g=27037;27040>=g;g++)t[g]=0;for(g=27205;27232>=g;g++)t[g]=0;for(g=27258;27260>=g;g++)t[g]=0;for(g=27391;27398>=g;g++)t[g]=0;for(g=27561;27564>=g;g++)t[g]=0;for(g=27571;27574>=g;g++)t[g]=0;for(g=27581;27584>=g;g++)t[g]=0;for(g=27591;27594>=g;g++)t[g]=0;for(g=28191;28193>=
g;g++)t[g]=0;for(g=28348;28358>=g;g++)t[g]=0;for(g=28402;28432>=g;g++)t[g]=0;for(g=28462;28492>=g;g++)t[g]=0;for(g=29118;29122>=g;g++)t[g]=0;for(g=29168;29172>=g;g++)t[g]=0;for(g=29177;29185>=g;g++)t[g]=0;for(g=29187;29195>=g;g++)t[g]=0;for(g=29900;29903>=g;g++)t[g]=0;for(g=30161;30179>=g;g++)t[g]=0;for(g=30491;30494>=g;g++)t[g]=0;for(g=30729;30732>=g;g++)t[g]=0;for(g=31251;31259>=g;g++)t[g]=0;for(g=31265;31268>=g;g++)t[g]=0;for(g=31275;31279>=g;g++)t[g]=0;for(g=31281;31297>=g;g++)t[g]=0;for(g=31461;31469>=
g;g++)t[g]=0;for(g=31491;31495>=g;g++)t[g]=0;for(g=31917;31922>=g;g++)t[g]=0;for(g=31965;32E3>=g;g++)t[g]=0;for(g=32001;32003>=g;g++)t[g]=2;for(g=32005;32031>=g;g++)t[g]=2;for(g=32033;32060>=g;g++)t[g]=2;for(g=32064;32067>=g;g++)t[g]=2;for(g=32074;32077>=g;g++)t[g]=2;for(g=32081;32086>=g;g++)t[g]=0;for(g=32107;32130>=g;g++)t[g]=0;for(g=32133;32159>=g;g++)t[g]=0;for(g=32164;32167>=g;g++)t[g]=2;for(g=32180;32199>=g;g++)t[g]=0;for(g=32201;32260>=g;g++)t[g]=0;for(g=32301;32360>=g;g++)t[g]=0;for(g=32401;32460>=
g;g++)t[g]=0;for(g=32501;32560>=g;g++)t[g]=0;for(g=32601;32662>=g;g++)t[g]=0;for(g=32664;32667>=g;g++)t[g]=2;for(g=32701;32761>=g;g++)t[g]=0;for(g=53001;53004>=g;g++)t[g]=0;for(g=53008;53019>=g;g++)t[g]=0;for(g=53021;53032>=g;g++)t[g]=0;for(g=53034;53037>=g;g++)t[g]=0;for(g=53042;53046>=g;g++)t[g]=0;for(g=53074;53080>=g;g++)t[g]=0;for(g=54001;54004>=g;g++)t[g]=0;for(g=54008;54019>=g;g++)t[g]=0;for(g=54021;54032>=g;g++)t[g]=0;for(g=54034;54037>=g;g++)t[g]=0;for(g=54042;54046>=g;g++)t[g]=0;for(g=54048;54053>=
g;g++)t[g]=0;for(g=54074;54080>=g;g++)t[g]=0;for(g=54098;54101>=g;g++)t[g]=0;for(g=102001;102040>=g;g++)t[g]=0;for(g=102042;102063>=g;g++)t[g]=0;for(g=102065;102067>=g;g++)t[g]=0;for(g=102070;102117>=g;g++)t[g]=0;for(g=102122;102216>=g;g++)t[g]=0;for(g=102221;102377>=g;g++)t[g]=0;for(g=102382;102388>=g;g++)t[g]=0;for(g=102389;102398>=g;g++)t[g]=2;for(g=102399;102444>=g;g++)t[g]=0;for(g=102445;102447>=g;g++)t[g]=2;for(g=102448;102458>=g;g++)t[g]=0;for(g=102459;102468>=g;g++)t[g]=2;for(g=102469;102499>=
g;g++)t[g]=0;for(g=102500;102519>=g;g++)t[g]=1;for(g=102520;102524>=g;g++)t[g]=0;for(g=102525;102529>=g;g++)t[g]=2;for(g=102530;102588>=g;g++)t[g]=0;for(g=102590;102598>=g;g++)t[g]=0;for(g=102601;102603>=g;g++)t[g]=0;for(g=102605;102628>=g;g++)t[g]=0;for(g=102629;102646>=g;g++)t[g]=2;for(g=102648;102700>=g;g++)t[g]=2;for(g=102701;102703>=g;g++)t[g]=0;for(g=102707;102730>=g;g++)t[g]=2;for(g=102733;102758>=g;g++)t[g]=2;for(g=102767;102900>=g;g++)t[g]=0;for(g=102901;102933>=g;g++)t[g]=2;for(g=102934;102950>=
g;g++)t[g]=13;for(g=102951;102955>=g;g++)t[g]=0;for(g=102961;102963>=g;g++)t[g]=0;for(g=102965;102969>=g;g++)t[g]=0;for(g=102971;102973>=g;g++)t[g]=0;for(g=102975;102989>=g;g++)t[g]=0;for(g=102990;102992>=g;g++)t[g]=1;for(g=102997;103002>=g;g++)t[g]=0;for(g=103003;103008>=g;g++)t[g]=2;for(g=103009;103011>=g;g++)t[g]=0;for(g=103012;103014>=g;g++)t[g]=2;for(g=103019;103021>=g;g++)t[g]=0;for(g=103022;103024>=g;g++)t[g]=2;for(g=103029;103031>=g;g++)t[g]=0;for(g=103032;103034>=g;g++)t[g]=2;for(g=103065;103068>=
g;g++)t[g]=0;for(g=103074;103076>=g;g++)t[g]=0;for(g=103077;103079>=g;g++)t[g]=1;for(g=103080;103082>=g;g++)t[g]=0;for(g=103083;103085>=g;g++)t[g]=2;for(g=103090;103093>=g;g++)t[g]=0;for(g=103097;103099>=g;g++)t[g]=0;for(g=103100;103102>=g;g++)t[g]=2;for(g=103107;103109>=g;g++)t[g]=0;for(g=103110;103112>=g;g++)t[g]=2;for(g=103113;103116>=g;g++)t[g]=0;for(g=103117;103120>=g;g++)t[g]=2;for(g=103153;103157>=g;g++)t[g]=0;for(g=103158;103162>=g;g++)t[g]=2;for(g=103163;103165>=g;g++)t[g]=0;for(g=103166;103168>=
g;g++)t[g]=1;for(g=103169;103171>=g;g++)t[g]=2;for(g=103186;103188>=g;g++)t[g]=0;for(g=103189;103191>=g;g++)t[g]=2;for(g=103192;103195>=g;g++)t[g]=0;for(g=103196;103199>=g;g++)t[g]=2;for(g=103200;103224>=g;g++)t[g]=0;for(g=103225;103227>=g;g++)t[g]=1;for(g=103232;103237>=g;g++)t[g]=0;for(g=103238;103243>=g;g++)t[g]=2;for(g=103244;103246>=g;g++)t[g]=0;for(g=103247;103249>=g;g++)t[g]=2;for(g=103254;103256>=g;g++)t[g]=0;for(g=103257;103259>=g;g++)t[g]=2;for(g=103264;103266>=g;g++)t[g]=0;for(g=103267;103269>=
g;g++)t[g]=2;for(g=103300;103375>=g;g++)t[g]=0;for(g=103381;103383>=g;g++)t[g]=0;for(g=103384;103386>=g;g++)t[g]=1;for(g=103387;103389>=g;g++)t[g]=0;for(g=103390;103392>=g;g++)t[g]=2;for(g=103397;103399>=g;g++)t[g]=0;for(g=103400;103471>=g;g++)t[g]=2;for(g=103476;103478>=g;g++)t[g]=0;for(g=103479;103481>=g;g++)t[g]=2;for(g=103486;103488>=g;g++)t[g]=0;for(g=103489;103491>=g;g++)t[g]=2;for(g=103492;103495>=g;g++)t[g]=0;for(g=103496;103499>=g;g++)t[g]=2;for(g=103528;103543>=g;g++)t[g]=0;for(g=103544;103548>=
g;g++)t[g]=2;for(g=103549;103551>=g;g++)t[g]=0;for(g=103552;103554>=g;g++)t[g]=1;for(g=103555;103557>=g;g++)t[g]=2;for(g=103558;103560>=g;g++)t[g]=0;for(g=103571;103573>=g;g++)t[g]=0;for(g=103574;103576>=g;g++)t[g]=2;for(g=103577;103580>=g;g++)t[g]=0;for(g=103581;103583>=g;g++)t[g]=2;for(g=103595;103694>=g;g++)t[g]=0;for(g=103696;103699>=g;g++)t[g]=0;for(g=103700;103793>=g;g++)t[g]=2;for(g=103794;103890>=g;g++)t[g]=0;for(g=103891;103896>=g;g++)t[g]=2;for(g=103900;103971>=g;g++)t[g]=2;for(g=103972;103977>=
g;g++)t[g]=0;for(g=112E3;112101>=g;g++)t[g]=0;return e.WKIDUnitConversion=t})},"esri/layers/ImageServiceParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang".split(" "),function(g,e,t,u,l,q){g=g(null,{declaredClass:"esri.layers.ImageServiceParameters",extent:null,width:null,height:null,imageSpatialReference:null,format:null,interpolation:null,compressionQuality:null,bandIds:null,timeExtent:null,mosaicRule:null,renderingRule:null,renderer:null,
noData:null,compressionTolerance:null,adjustAspectRatio:null,lercVersion:null,toJson:function(k){var a=this.bbox||this.extent;k=(a=a&&k&&a._normalize(!0))?a.spatialReference.wkid||t.toJson(a.spatialReference.toJson()):null;var d=this.imageSpatialReference;a={bbox:a?a.xmin+","+a.ymin+","+a.xmax+","+a.ymax:null,bboxSR:k,size:null!==this.width&&null!==this.height?this.width+","+this.height:null,imageSR:d?d.wkid||t.toJson(d.toJson()):k,format:this.format,interpolation:this.interpolation,compressionQuality:this.compressionQuality,
bandIds:this.bandIds?this.bandIds.join(","):null,mosaicRule:this.mosaicRule?t.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?t.toJson(this.renderingRule.toJson()):null,renderer:this.renderer?t.toJson(this.renderer.toJson()):null,noData:this.noData,noDataInterpretation:this.noDataInterpretation,compressionTolerance:this.compressionTolerance,adjustAspectRatio:this.adjustAspectRatio,lercVersion:this.lercVersion};k=this.timeExtent;a.time=k?k.toJson().join(","):null;return q.filter(a,
function(n){if(null!==n&&void 0!==n)return!0})}});e.mixin(g,{INTERPOLATION_BILINEAR:"RSP_BilinearInterpolation",INTERPOLATION_CUBICCONVOLUTION:"RSP_CubicConvolution",INTERPOLATION_MAJORITY:"RSP_Majority",INTERPOLATION_NEARESTNEIGHBOR:"RSP_NearestNeighbor",NODATA_MATCH_ALL:"esriNoDataMatchAll",NODATA_MATCH_ANY:"esriNoDataMatchAny"});e.setObject("layers.ImageServiceParameters",g,l);return g})},"esri/layers/rasterLib/raster/BasicRaster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/_base/json dojo/sniff dojo/DeferredList dojo/when ../../../kernel ../../../Evented ../../../request ../../../geometry/Extent ../../../geometry/Point ../../../SpatialReference ../../../deferredUtils ../../../urlUtils ../../MosaicRule ../../ImageServiceParameters ../../PixelBlock ../../rasterFormats/rasterCodec ../tile/RasterHandler ./rasterProjectionHelper ./RasterInfo".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h,c,f,p,r,m,v,z,A,D,E,F,y,x){return e([h],{url:null,dataType:null,rasterInfo:null,tileInfo:null,serviceInfo:null,loaded:null,constructor:function(w){if(w){var C=w.url;C&&(C=v.urlToObject(C),this.url=C.path,this._query=C.query);this.dataType=w.dataType;this.serviceInfo=w.serviceInfo;this.rasterInfo=w.rasterInfo;this.tileInfo=w.tileInfo;this.serviceInfo=w.serviceInfo}},open:function(){},read:function(w){},identify:function(w){var C=new u,B=this.rasterInfo.extent;if(y.requirePE(B.spatialReference,
w.spatialReference))y.load().then(t.hitch(this,function(){I=y.project(w,B.spatialReference);C.resolve(I)}),function(){C.reject(Error("cannot project into this spatial reference"))});else{var I=y.project(w,B.spatialReference);C.resolve(I)}return C.then(t.hitch(this,function(N){var V=this.tileInfo,Y=V.origin,ca=V.lods[V.lods.length-1],J=(N.x-Y.x)/V.cols/ca.resolution;N=(Y.y-N.y)/V.rows/ca.resolution;var O=Math.round((N-Math.floor(N))*V.rows)*V.cols+Math.round((J-Math.floor(J))*V.cols);Y=new f(Y.x+ca.resolution*
V.cols*J,Y.y-ca.resolution*V.rows*(N+1),Y.x+ca.resolution*V.cols*(J+1),Y.y-ca.resolution*V.rows*N,B.spatialReference);var U=this.getMemberRasters?this.getMemberRasters()[0]:this;return U.read({level:ca.level,row:Math.floor(N),col:Math.floor(J),extent:Y,width:V.cols,height:V.rows,virtual:U.tileInfo.virtual,tileType:U.tileInfo.tileType}).then(function(ba){return(ba=ba&&ba.pixelBlock)&&ba.pixels&&0<ba.pixels.length&&(!ba.mask||ba.mask[O])?{pixelValue:ba.pixels.map(function(Z){return Z[O]})}:{pixelValue:null}})}))},
getProjectedFullExtent:function(w,C){var B=new u;if(this.projectedFullExtent&&!C)return B.resolve(this.projectedFullExtent),B.promise;var I=this.rasterInfo.extent;if(y.requirePE(this.rasterInfo.extent.spatialReference,w))y.load().then(t.hitch(this,function(){N=y.project(I,w);this.projectedFullExtent=N=new f(N.toJson());B.resolve(N)}),function(){B.reject(Error("cannot project into this spatial reference"))});else{var N=y.project(I,w);this.projectedFullExtent=N=new f(N.toJson());B.resolve(N)}return B.promise},
setFetchParameters:function(w,C){},_setRasterHandler:function(w){this._rasterHandler=w;this.getMemberRasters&&this.getMemberRasters().forEach(t.hitch(this,function(C){C._rasterHandler=w}))},_findCredential:function(){this.url&&((this._credential=b.id&&b.id.findCredential(this.url))&&this._credential.ssl||this.serviceInfo&&this.serviceInfo._ssl)&&(this.url=this.url.replace(/^http:/i,"https:"))},_initWorker:function(){this._rasterHandler=new F;this._rasterHandler.start().then(function(){this._rasterHandlerInitialized=
!0}.bind(this))},_requestPixels:function(w){var C=w.url,B=w.payload,I=w.decodeParams,N=w.tileOptions,V=new u(m._dfdCanceller);this._rasterHandler||this._initWorker();var Y=this._rasterHandler,ca={};C={url:C,handleAs:"arraybuffer",content:B};w.headers&&(C.headers=w.headers);V._pendingDfd=c(C).then(t.hitch(this,function(J){(Y&&this._rasterHandlerInitialized?Y.decode({encodedData:J,decodeParams:I}):E.decode(J,I)).then(function(O){ca.pixelBlock=new D(O);ca.extent=N.extent;ca.level=N.level;ca.row=N.row;
ca.col=N.col;ca.width=N.width;ca.height=N.height;m._resDfd(V,[ca])},function(O){m._resDfd(V,[O],!0)})}),function(J){m._resDfd(V,[J],!0)});return V},_computeSignature:function(w){if("string"===typeof w){for(var C=new Uint8Array(w.length),B=0;B<w.length;B++)C[B]=w.charCodeAt(B);w=C}B=C=65535;for(var I=w.length,N=Math.floor(I/2),V=0;N;){var Y=359<=N?359:N;N-=Y;do C+=w[V++]<<8,B+=C+=w[V++];while(--Y);C=(C&65535)+(C>>>16);B=(B&65535)+(B>>>16)}I&1&&(B+=C+=w[V]<<8);return((B&65535)+(B>>>16)<<16|(C&65535)+
(C>>>16))>>>0}})})},"esri/layers/rasterFormats/rasterCodec":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred ../PixelBlock ./LercCodec ./Lerc2Codec ./Lerc ./JpgPlus ./Png ./Raw ./TiffDecoder".split(" "),function(g,e,t,u,l,q,k,a,d,n,b,h){return{validPixelTypes:"U1 U2 U4 U8 U16 U32 S8 S16 S32 F32".split(" "),supportedFormats:"lerc jpeg jpg jpgpng png png8 png24 png32 bip bsq tiff".split(" "),_isPlatformLittleEndian:function(){var c=new ArrayBuffer(4),f=new Uint8Array(c);
(new Uint32Array(c))[0]=1;return 1===f[0]}(),decode:function(c,f){if(void 0===f||null===f)throw"missing decode options";var p;f.format&&(p=f.format.toUpperCase());"BSQ"!==p&&"BIP"!==p&&(p=this._getFormat(c));var r=f.decodeFunc;if(void 0===r||null===r)r=this._getFormatDecoderDfd(p,f.useWasm);return r(c,f)},_getFormatDecoderDfd:function(c,f){if(f&&("LERC"===c||"LERC2"===c))return this._decodeLercWasm.bind(this);var p=null;switch(c){case "LERC":p=this._decodeLerc;break;case "LERC2":p=this._decodeLerc2;
break;case "JPEG":p=this._decodeJpeg;break;case "PNG":p=this._decodePng;break;case "BSQ":p=this._decodeBsq;break;case "BIP":p=this._decodeBip;break;case "TIFF":p=this._decodeTiff;break;default:p=function(r,m){throw"The raster format is not supported";}}p=t.hitch(this,p);return function(r,m){var v=new u;m.isPoint&&m.width&&(m.width++,m.height++);r=p(r,m);m.isPoint&&m.width&&(this._interpolatePointGrid(r),m.width--,m.height--);v.resolve(r);return v}.bind(this)},_getFormat:function(c){c=new Uint8Array(c,
0,10);var f="";if(255===c[0]&&216===c[1])f="JPEG";else if(137===c[0]&&80===c[1]&&78===c[2]&&71===c[3])f="PNG";else if(67===c[0]&&110===c[1]&&116===c[2]&&90===c[3]&&73===c[4]&&109===c[5]&&97===c[6]&&103===c[7]&&101===c[8]&&32===c[9])f="LERC";else if(76===c[0]&&101===c[1]&&114===c[2]&&99===c[3]&&50===c[4]&&32===c[5])f="LERC2";else if(-1<String.fromCharCode.apply(null,c).toLowerCase().indexOf("error"))f="ERROR";else if(73===c[0]&&73===c[1]&&42===c[2]&&0===c[3]||77===c[0]&&77===c[1]&&0===c[2]&&42===c[3])f=
"TIFF";return f},_validateDecodeParams:function(c){if(!c.height||Math.floor(c.height)!==c.height)throw"Height not provided.";if(!c.width||Math.floor(c.width)!==c.width)throw"Width not provided.";},_decodeJpeg:function(c,f){if(!d)throw"The jpeg decoder module is not loaded.";this._validateDecodeParams(f);c=(new d).decode(c);if(!this._verifyResult(c,f))throw"The decoded image dimensions are incorrect.";f=new l({width:c.width,height:c.height,pixels:c.pixels,pixelType:"U8",mask:c.mask,statistics:null});
f.calculateStatistics();return f},_decodePng:function(c,f){if(!n)throw"The png decoder module is not loaded.";this._validateDecodeParams(f);c=new Uint8Array(c);var p=new n(c);c=new Uint8Array(f.width*f.height*4);p.copyToImageData(c,p.decodePixels());var r=p=0;r=new Uint8Array(f.width*f.height);for(p=0;p<f.width*f.height;p++)r[p]=c[4*p+3];var m=new l({width:f.width,height:f.height,pixels:[],pixelType:"U8",mask:r,statistics:[]});for(p=0;3>p;p++){var v=new Uint8Array(f.width*f.height);for(r=0;r<f.width*
f.height;r++)v[r]=c[4*r+p];m.addData({pixels:v})}m.calculateStatistics();return m},_decodeBsq:function(c,f){if(!b)throw"The bsq decoder module is not loaded.";this._validateDecodeParams(f);var p=f.noDataValue;f.pixelType=this._getpixelTypeAndNoData(f.pixelType);c=b.decodeBSQ(c,{bandCount:f.planes,width:f.width,height:f.height,pixelType:f.pixelType,noDataValue:p});f=new l({width:f.width,height:f.height,pixels:c.pixels,pixelType:f.pixelType,mask:c.maskData,statistics:null});f.calculateStatistics();
return f},_decodeBip:function(c,f){this._validateDecodeParams(f);var p=f.noDataValue;f.pixelType=this._getpixelTypeAndNoData(f.pixelType);c=b.decodeBIP(c,{bandCount:f.planes,width:f.width,height:f.height,pixelType:f.pixelType,noDataValue:p});f=new l({width:f.width,height:f.height,pixels:c.pixels,pixelType:f.pixelType,mask:c.maskData,statistics:null});f.calculateStatistics();return f},_decodeTiff:function(c,f){this._validateDecodeParams(f);f.pixelType=this._getpixelTypeAndNoData(f.pixelType);c=h.decode(c);
c=new l({width:c.width,height:c.height,pixels:c.pixels,pixelType:c.pixelType,mask:c.maskData,statistics:null});c.calculateStatistics();return c},_decodeLerc:function(c,f){if(!this._isPlatformLittleEndian)throw"lerc decoder is not supported on big endian platform";this._validateDecodeParams(f);var p=f.noDataValue;f.pixelType=this._getpixelTypeAndNoData(f.pixelType);for(var r=0,m,v=0,z,A=c.byteLength-10;v<A;){var D=q.decode(c,{inputOffset:v,encodedMaskData:m,returnMask:0===r?!0:!1,returnEncodedMask:0===
r?!0:!1,returnFileInfo:!0,pixelType:f.pixelType,noDataValue:p});v=D.fileInfo.eofOffset;0===r&&(m=D.encodedMaskData,z=new l({width:f.width,height:f.height,pixels:[],pixelType:f.pixelType,mask:D.maskData,statistics:[]}));r++;if(!this._verifyResult(D,f))throw"The decoded image dimensions are incorrect";z.addData({pixels:D.pixelData,statistics:{minValue:D.minValue,maxValue:D.maxValue,noDataValue:D.noDataValue}})}return z},_decodeLerc2:function(c,f){if(!this._isPlatformLittleEndian)throw"lerc2 decoder is not supported on big endian platform";
this._validateDecodeParams(f);f.pixelType=this._getpixelTypeAndNoData(f.pixelType);for(var p=0,r,m,v,z=0,A,D=c.byteLength-10,E=[],F,y=0;z<D;){m=k.decode(c,{inputOffset:z,maskData:r,returnFileInfo:!0});z=m.fileInfo.eofOffset;r=m.maskData;0===p&&(v=m.fileInfo.numValidPixel,A=new l({width:f.width,height:f.height,pixels:[],dimCount:m.dimCount||1,pixelType:m.fileInfo.pixelType,mask:r,statistics:[]}));m.fileInfo.mask&&0<m.fileInfo.mask.numBytes&&y++;r&&E.push(r);p++;if(!this._verifyResult(m,f))throw"The decoded image dimensions are incorrect";
A.addData({pixels:m.pixelData,statistics:{minValue:m.minValue,maxValue:m.maxValue,noDataValue:m.noDataValue,dimStats:m.dimStats}})}if(1<y){f=A.width*A.height;A.bandMasks=E;r=new Uint8Array(f);r.set(E[0]);for(v=1;v<E.length;v++)for(F=E[v],c=0;c<f;c++)r[c]&=F[c];for(c=v=0;c<f;c++)v+=F[c];A.mask=r}A.validPixelCount=v;return A},_decodeLercWasm:function(c,f){if(!this._isPlatformLittleEndian)throw"lerc decoder is not supported on big endian platform";this._validateDecodeParams(f);var p=new u;a.load().then(function(){var r=
a.decode(c,{inputOffset:0,noDataValue:f.noDataValue,pixelType:f.pixelType&&f.pixelType.toUpperCase()});r=new l({width:r.width,height:r.height,pixelType:r.pixelType.toUpperCase(),pixels:r.pixels,mask:r.mask,statistics:r.statistics,validPixelCount:r.validPixelCount});f.isPoint&&f.width&&(this._interpolatePointGrid(r),f.width--,f.height--);p.resolve(r)}.bind(this),function(){p.reject("Cannot load lerc wasm decoder")});return p},_interpolatePointGrid:function(c,f){var p=c.pixels;if(p&&0!==p.length){var r=
p.length,m=c.width,v=c.mask,z=m-1,A=c.height-1,D=[],E,F;if(0===(null==f?1:f)){for(f=0;f<r;f++){var y=p[f];var x=new y.constructor(z*A);for(E=0;E<A;E++){var w=E*m;for(F=0;F<z;F++)x[E*z+F]=y[w+F]}D.push(x)}if(v){var C=new Uint8Array(z*A);for(E=0;E<A;E++)for(w=E*m,F=0;F<z;F++)C[E*z+F]=v[w+F]}}else{for(f=0;f<r;f++){y=p[f];x=new y.constructor(z*A);for(E=0;E<A;E++)for(w=E*m,F=0;F<z;F++)x[E*z+F]=(y[w+F]+y[w+F+1]+y[w+m+F]+y[w+m+F+1])/4;D.push(x)}if(v)for(C=new Uint8Array(z*A),E=0;E<A;E++)for(w=E*m,F=0;F<
z;F++)C[E*z+F]=Math.min.apply(null,[v[w+F],v[w+F+1],v[w+m+F],v[w+m+F+1]])}c.width=z;c.height=A;c.mask=C;c.pixels=D;return c}},_getpixelTypeAndNoData:function(c){return"U1"===c||"U2"===c||"U4"===c||"U8"===c?"U8":c},_verifyResult:function(c,f){return c.height!==f.height||c.width!==f.width?!1:!0}}})},"esri/layers/rasterFormats/Lerc":function(){var g=this&&this.__createBinding||(Object.create?function(l,q,k,a){void 0===a&&(a=k);Object.defineProperty(l,a,{enumerable:!0,get:function(){return q[k]}})}:function(l,
q,k,a){void 0===a&&(a=k);l[a]=q[k]}),e=this&&this.__setModuleDefault||(Object.create?function(l,q){Object.defineProperty(l,"default",{enumerable:!0,value:q})}:function(l,q){l["default"]=q}),t=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var q={};if(null!=l)for(var k in l)"default"!==k&&Object.prototype.hasOwnProperty.call(l,k)&&g(q,l,k);e(q,l);return q},u=this&&this.__read||function(l,q){var k="function"===typeof Symbol&&l[Symbol.iterator];if(!k)return l;l=k.call(l);var a,d=[];
try{for(;(void 0===q||0<q--)&&!(a=l.next()).done;)d.push(a.value)}catch(b){var n={error:b}}finally{try{a&&!a.done&&(k=l["return"])&&k.call(l)}finally{if(n)throw n.error;}}return d};define(["require","exports"],function(l,q){function k(h){var c=h._malloc,f=h._free,p=h._lerc_getBlobInfo,r=h._lerc_getDataRanges,m=h._lerc_decode_4D,v,z=Object.values(h.asm).find(function(D){return D&&"buffer"in D&&D.buffer===h.HEAPU8.buffer}),A=function(D){D=D.map(function(x){return(x>>3<<3)+16});var E=D.reduce(function(x,
w){return x+w}),F=c(E);v=new Uint8Array(z.buffer);E=D[0];D[0]=F;for(F=1;F<D.length;F++){var y=D[F];D[F]=D[F-1]+E;E=y}return D};b.getBlobInfo=function(D){var E,F=new Uint8Array(48),y=new Uint8Array(24),x=u(A([D.length,F.length,y.length]),3),w=x[0],C=x[1];x=x[2];v.set(D,w);v.set(F,C);v.set(y,x);if(E=p(w,D.length,C,x,12,3))throw f(w),"lerc-getBlobInfo: error code is ".concat(E);v=new Uint8Array(z.buffer);F.set(v.slice(C,C+F.length));y.set(v.slice(x,x+y.length));F=new Uint32Array(F.buffer);x=new Float64Array(y.buffer);
C=u(F,11);y=C[2];F=C[5];var B=C[10];C={version:C[0],dimCount:y,width:C[3],height:C[4],validPixelCount:C[6],bandCount:F,blobSize:C[7],maskCount:C[8],dataType:C[1],minValue:x[0],maxValue:x[1],maxZerror:x[2],statistics:[],bandCountWithNoData:B};if(B)return C;if(1===y&&1===F)return f(w),C.statistics.push({minValue:x[0],maxValue:x[1]}),C;var I=y*F*8,N=new Uint8Array(I),V=new Uint8Array(I);x=w;B=0;var Y=!1;if(v.byteLength<w+2*I){f(w);Y=!0;E=u(A([D.length,I,I]),3);x=E[0];B=E[1];var ca=E[2];v.set(D,x)}else E=
u(A([I,I]),2),B=E[0],ca=E[1];v.set(N,B);v.set(V,ca);if(E=r(w,D.length,y,F,B,ca))throw f(x),Y||f(B),"lerc-getDataRanges: error code is ".concat(E);v=new Uint8Array(z.buffer);N.set(v.slice(B,B+I));V.set(v.slice(ca,ca+I));D=new Float64Array(N.buffer);w=new Float64Array(V.buffer);E=C.statistics;for(V=0;V<F;V++)if(1<y){I=D.slice(V*y,(V+1)*y);N=w.slice(V*y,(V+1)*y);ca=Math.min.apply(null,I);var J=Math.max.apply(null,N);E.push({minValue:ca,maxValue:J,dimStats:{minValues:I,maxValues:N}})}else E.push({minValue:D[V],
maxValue:w[V]});f(x);Y||f(B);return C};b.decode=function(D,E){var F=E.maskCount,y=E.dimCount,x=E.bandCount,w=E.width,C=E.height,B=E.dataType,I=E.bandCountWithNoData,N=a[B],V=w*C;E=new Uint8Array(V*x);var Y=V*y*x*N.size;N=new Uint8Array(Y);V=new Uint8Array(x);var ca=8*x,J=new Uint8Array(ca),O=u(A([D.length,E.length,N.length,V.length,J.length]),5),U=O[0],ba=O[1],Z=O[2],fa=O[3];O=O[4];v.set(D,U);v.set(E,ba);v.set(N,Z);v.set(V,fa);v.set(J,O);if(D=m(U,D.length,F,ba,y,w,C,x,B,Z,fa,O))throw f(U),"lerc-decode: error code is ".concat(D);
v=new Uint8Array(z.buffer);N.set(v.slice(Z,Z+Y));E.set(v.slice(ba,ba+E.length));D=null;if(I)for(V.set(v.slice(fa,fa+x)),J.set(v.slice(O,O+ca)),D=[],x=0;x<V.length;x++)D.push(V[x]?J[x]:null);f(U);return{data:N,maskData:E,noDataValues:D}}}Object.defineProperty(q,"__esModule",{value:!0});q.getBlobInfo=q.decode=q.isLoaded=q.load=void 0;var a=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,128]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,
32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-3.4027999387901484E38,3.4027999387901484E38]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-1.7976931348623157E308,1.7976931348623157E308]}],d=null,n=!1;q.load=function(){return d?d:d=(new Promise(function(h,c){l(["./lerc-wasm"],h,c)})).then(t).then(function(h){h=
h.default;return h({locateFile:function(c){return l.toUrl("./"+c)}})}).then(function(h){k(h);n=!0})};q.isLoaded=function(){return n};var b={getBlobInfo:null,decode:null};q.decode=function(h,c){var f;void 0===c&&(c={});var p=null!==(f=c.inputOffset)&&void 0!==f?f:0;f=h instanceof Uint8Array?h.subarray(p):new Uint8Array(h,p);h=b.getBlobInfo(f);var r=b.decode(f,h),m=r.maskData;f=h.width;p=h.height;var v=h.bandCount,z=h.dimCount,A=h.maskCount,D=h.statistics,E=a[h.dataType],F=new E.ctor(r.data.buffer);
r=[];for(var y=[],x=f*p,w=x*z,C=0;C<v;C++){var B=F.subarray(C*w,(C+1)*w);if(c.returnPixelInterleavedDims)r.push(B);else{var I=x,N=z;if(!(2>N)){for(var V=new E.ctor(I*N),Y=0,ca=0;Y<I;Y++)for(var J=0,O=Y;J<N;J++,O+=I)V[O]=B[ca++];B=V}r.push(B)}y.push(m.subarray(C*w,(C+1)*w))}m=0===A?null:1===A?y[0]:new Uint8Array(x);if(1<A)for(m.set(y[0]),C=1;C<y.length;C++)for(F=y[C],w=0;w<x;w++)m[w]&=F[w];C=c.noDataValue;C=null!=C&&E.range[0]<=C&&E.range[1]>=C;if(0<A&&C)for(I=c.noDataValue,C=0;C<v;C++)for(B=r[C],
F=y[C]||m,w=0;w<x;w++)0===F[w]&&(B[w]=I);return{width:f,height:p,bandCount:v,pixelType:c.pixelType&&0===h.version?c.pixelType:E.pixelType,dimCount:z,statistics:D,pixels:r,mask:m,bandMasks:A===v&&1<v?y:null}};q.getBlobInfo=function(h,c){var f,p;void 0===c&&(c={});var r=h instanceof Uint8Array?h.subarray(null!==(f=c.inputOffset)&&void 0!==f?f:0):new Uint8Array(h,null!==(p=c.inputOffset)&&void 0!==p?p:0);return b.getBlobInfo(r)}})},"esri/layers/rasterFormats/JpgPlus":function(){define(["dojo/_base/declare",
"./Zlib","./Jpg"],function(g,e,t){return g(null,{constructor:function(){},decode:function(u){var l=new Uint8Array(u);u=new t;u.parse(l);var q=u.numComponents,k=u.getData(u.width,u.height,!0),a=u.width*u.height,d=u.eof,n=0,b=0,h=0;if(d<l.length-1){b=(new e(l.subarray(d))).getBytes();var c=new Uint8Array(a);for(n=l=0;n<b.length;n++)for(h=7;0<=h;h--)c[l++]=b[n]>>h&1}l=[];if(1===q&&k.length===a)l=[k,k,k];else{for(n=0;3>n;n++)q=new Uint8Array(a),l.push(q);for(b=h=0;b<a;b++)for(n=0;3>n;n++)l[n][b]=k[h++]}return{width:u.width,
height:u.height,pixels:l,mask:c}}})})},"esri/layers/rasterFormats/Zlib":function(){define([],function(){var g=function(){function e(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}e.prototype={ensureBuffer:function(t){var u=this.buffer,l=u?u.byteLength:0;if(t<l)return u;for(var q=512;q<t;)q<<=1;t=new Uint8Array(q);for(q=0;q<l;++q)t[q]=u[q];return this.buffer=t},getByte:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},
getBytes:function(t){var u=this.pos;if(t){this.ensureBuffer(u+t);for(t=u+t;!this.eof&&this.bufferLength<t;)this.readBlock();var l=this.bufferLength;t>l&&(t=l)}else{for(;!this.eof;)this.readBlock();t=this.bufferLength}this.pos=t;return this.buffer.subarray(u,t)},lookChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;
this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(t,u,l){for(var q=t+u;this.bufferLength<=q&&!this.eof;)this.readBlock();return new Stream(this.buffer,t,u,l)},skip:function(t){t||(t=1);this.pos+=t},reset:function(){this.pos=0}};return e}();return function(){function e(d){throw Error(d);}function t(d){var n=0,b=d[n++],h=d[n++];-1!=b&&-1!=h||e("Invalid header in flate stream");8!=(b&15)&&e("Unknown compression method in flate stream");0!=((b<<8)+h)%31&&e("Bad FCHECK in flate stream");
h&32&&e("FDICT bit set in flate stream");this.bytes=d;this.bytesPos=n;this.codeBuf=this.codeSize=0;g.call(this)}if(!self||!self.Uint32Array)return null;var u=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),q=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,
393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),k=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,
524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,
524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,
524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,
524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,
524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,
524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,
524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],a=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];t.prototype=Object.create(g.prototype);t.prototype.getBits=function(d){for(var n=
this.codeSize,b=this.codeBuf,h=this.bytes,c=this.bytesPos,f;n<d;)"undefined"==typeof(f=h[c++])&&e("Bad encoding in flate stream"),b|=f<<n,n+=8;this.codeBuf=b>>d;this.codeSize=n-=d;this.bytesPos=c;return b&(1<<d)-1};t.prototype.getCode=function(d){var n=d[0],b=d[1];d=this.codeSize;for(var h=this.codeBuf,c=this.bytes,f=this.bytesPos;d<b;){var p;"undefined"==typeof(p=c[f++])&&e("Bad encoding in flate stream");h|=p<<d;d+=8}b=n[h&(1<<b)-1];n=b>>16;b&=65535;(0==d||d<n||0==n)&&e("Bad encoding in flate stream");
this.codeBuf=h>>n;this.codeSize=d-n;this.bytesPos=f;return b};t.prototype.generateHuffmanTable=function(d){for(var n=d.length,b=0,h=0;h<n;++h)d[h]>b&&(b=d[h]);for(var c=1<<b,f=new Uint32Array(c),p=1,r=0,m=2;p<=b;++p,r<<=1,m<<=1)for(var v=0;v<n;++v)if(d[v]==p){var z=0,A=r;for(h=0;h<p;++h)z=z<<1|A&1,A>>=1;for(h=z;h<c;h+=m)f[h]=p<<16|v;++r}return[f,b]};t.prototype.readBlock=function(){function d(z,A,D,E,F){for(z=z.getBits(D)+E;0<z--;)A[r++]=F}var n=this.getBits(3);n&1&&(this.eof=!0);n>>=1;if(0==n){var b=
this.bytes,h=this.bytesPos,c;"undefined"==typeof(c=b[h++])&&e("Bad block header in flate stream");var f=c;"undefined"==typeof(c=b[h++])&&e("Bad block header in flate stream");f|=c<<8;"undefined"==typeof(c=b[h++])&&e("Bad block header in flate stream");n=c;"undefined"==typeof(c=b[h++])&&e("Bad block header in flate stream");(n|c<<8)!=(~f&65535)&&e("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;c=this.bufferLength;n=this.ensureBuffer(c+f);this.bufferLength=f=c+f;for(var p=
c;p<f;++p){if("undefined"==typeof(c=b[h++])){this.eof=!0;break}n[p]=c}this.bytesPos=h}else{if(1==n)h=k,c=a;else if(2==n){n=this.getBits(5)+257;c=this.getBits(5)+1;b=this.getBits(4)+4;h=Array(u.length);for(var r=0;r<b;)h[u[r++]]=this.getBits(3);h=this.generateHuffmanTable(h);r=b=0;c=n+c;for(f=Array(c);r<c;)p=this.getCode(h),16==p?d(this,f,2,3,b):17==p?d(this,f,3,3,b=0):18==p?d(this,f,7,11,b=0):f[r++]=b=p;h=this.generateHuffmanTable(f.slice(0,n));c=this.generateHuffmanTable(f.slice(n,c))}else e("Unknown block type in flate stream");
f=(n=this.buffer)?n.length:0;for(p=this.bufferLength;;){var m=this.getCode(h);if(256>m)p+1>=f&&(n=this.ensureBuffer(p+1),f=n.length),n[p++]=m;else{if(256==m){this.bufferLength=p;break}m-=257;m=l[m];var v=m>>16;0<v&&(v=this.getBits(v));b=(m&65535)+v;m=this.getCode(c);m=q[m];v=m>>16;0<v&&(v=this.getBits(v));m=(m&65535)+v;p+b>=f&&(n=this.ensureBuffer(p+b),f=n.length);for(v=0;v<b;++v,++p)n[p]=n[p-m]}}}};return t}()})},"esri/layers/rasterFormats/Jpg":function(){define([],function(){var g=function(){function e(t){this.message=
"JPEG error: "+t}e.prototype=Error();e.prototype.name="JpegError";return e.constructor=e}();return function(){function e(){this.decodeTransform=null;this.colorTransform=-1}function t(a,d){for(var n=0,b=[],h,c,f=16;0<f&&!a[f-1];)f--;b.push({children:[],index:0});var p=b[0],r;for(h=0;h<f;h++){for(c=0;c<a[h];c++){p=b.pop();for(p.children[p.index]=d[n];0<p.index;)p=b.pop();p.index++;for(b.push(p);b.length<=h;)b.push(r={children:[],index:0}),p.children[p.index]=r.children,p=r;n++}h+1<f&&(b.push(r={children:[],
index:0}),p.children[p.index]=r.children,p=r)}return b[0].children}function u(a,d,n,b,h,c,f,p,r){function m(){if(0<I)return I--,B>>I&1;B=a[d++];if(255===B){var P=a[d++];if(P)throw new g("unexpected marker "+(B<<8|P).toString(16));}I=7;return B>>>7}function v(P){for(;;){P=P[m()];if("number"===typeof P)return P;if("object"!==typeof P)throw new g("invalid huffman sequence");}}function z(P){for(var aa=0;0<P;)aa=aa<<1|m(),P--;return aa}function A(P){if(1===P)return 1===m()?1:-1;var aa=z(P);return aa>=
1<<P-1?aa:aa+(-1<<P)+1}function D(P,aa){var ea=v(P.huffmanTableDC);ea=0===ea?0:A(ea);P.blockData[aa]=P.pred+=ea;for(ea=1;64>ea;){var X=v(P.huffmanTableAC),S=X&15;X>>=4;if(0===S){if(15>X)break;ea+=16}else ea+=X,P.blockData[aa+k[ea]]=A(S),ea++}}function E(P,aa){var ea=v(P.huffmanTableDC);ea=0===ea?0:A(ea)<<r;P.blockData[aa]=P.pred+=ea}function F(P,aa){P.blockData[aa]|=m()<<r}function y(P,aa){if(0<N)N--;else for(var ea=c;ea<=f;){var X=v(P.huffmanTableAC),S=X&15;X>>=4;if(0===S){if(15>X){N=z(X)+(1<<X)-
1;break}ea+=16}else ea+=X,P.blockData[aa+k[ea]]=A(S)*(1<<r),ea++}}function x(P,aa){for(var ea=c,X=0,S;ea<=f;){S=k[ea];switch(V){case 0:X=v(P.huffmanTableAC);S=X&15;X>>=4;if(0===S)15>X?(N=z(X)+(1<<X),V=4):(X=16,V=1);else{if(1!==S)throw new g("invalid ACn encoding");Y=A(S);V=X?2:3}continue;case 1:case 2:P.blockData[aa+S]?P.blockData[aa+S]+=m()<<r:(X--,0===X&&(V=2===V?3:0));break;case 3:P.blockData[aa+S]?P.blockData[aa+S]+=m()<<r:(P.blockData[aa+S]=Y<<r,V=0);break;case 4:P.blockData[aa+S]&&(P.blockData[aa+
S]+=m()<<r)}ea++}4===V&&(N--,0===N&&(V=0))}var w=n.mcusPerLine,C=d,B=0,I=0,N=0,V=0,Y,ca=b.length,J,O,U,ba;p=n.progressive?0===c?0===p?E:F:0===p?y:x:D;var Z=0;n=1===ca?b[0].blocksPerLine*b[0].blocksPerColumn:w*n.mcusPerColumn;for(var fa,pa;Z<n;){var da=h?Math.min(n-Z,h):n;for(J=0;J<ca;J++)b[J].pred=0;N=0;if(1===ca){var ha=b[0];for(ba=0;ba<da;ba++)p(ha,64*((ha.blocksPerLine+1)*(Z/ha.blocksPerLine|0)+Z%ha.blocksPerLine)),Z++}else for(ba=0;ba<da;ba++){for(J=0;J<ca;J++)for(ha=b[J],fa=ha.h,pa=ha.v,O=0;O<
pa;O++)for(U=0;U<fa;U++)p(ha,64*((ha.blocksPerLine+1)*((Z/w|0)*ha.v+O)+(Z%w*ha.h+U)));Z++}I=0;(ha=q(a,d))&&ha.invalid&&(d=ha.offset);ha=ha&&ha.marker;if(!ha||65280>=ha)throw new g("marker was not found");if(65488<=ha&&65495>=ha)d+=2;else break}(ha=q(a,d))&&ha.invalid&&(d=ha.offset);return d-C}function l(a,d){a=d.blocksPerLine;for(var n=d.blocksPerColumn,b=new Int16Array(64),h=0;h<n;h++)for(var c=0;c<a;c++){var f=void 0,p=void 0,r=void 0,m=void 0,v=void 0,z=void 0,A=void 0,D=void 0,E=v=z=m=p=f=void 0,
F=void 0,y=void 0,x=void 0,w=64*((d.blocksPerLine+1)*h+c),C=b,B=d.quantizationTable,I=d.blockData;if(!B)throw new g("missing required Quantization Table.");for(var N=0;64>N;N+=8)f=I[w+N],D=I[w+N+1],A=I[w+N+2],z=I[w+N+3],v=I[w+N+4],m=I[w+N+5],r=I[w+N+6],p=I[w+N+7],f*=B[N],0===(D|A|z|v|m|r|p)?(f=5793*f+512>>10,C[N]=f,C[N+1]=f,C[N+2]=f,C[N+3]=f,C[N+4]=f,C[N+5]=f,C[N+6]=f,C[N+7]=f):(D*=B[N+1],A*=B[N+2],z*=B[N+3],v*=B[N+4],m*=B[N+5],r*=B[N+6],p*=B[N+7],x=5793*f+128>>8,y=5793*v+128>>8,F=A,E=r,v=2896*(D-
p)+128>>8,p=2896*(D+p)+128>>8,z<<=4,m<<=4,x=x+y+1>>1,y=x-y,f=3784*F+1567*E+128>>8,F=1567*F-3784*E+128>>8,E=f,v=v+m+1>>1,m=v-m,p=p+z+1>>1,z=p-z,x=x+E+1>>1,E=x-E,y=y+F+1>>1,F=y-F,f=2276*v+3406*p+2048>>12,v=3406*v-2276*p+2048>>12,p=f,f=799*z+4017*m+2048>>12,z=4017*z-799*m+2048>>12,m=f,C[N]=x+p,C[N+7]=x-p,C[N+1]=y+m,C[N+6]=y-m,C[N+2]=F+z,C[N+5]=F-z,C[N+3]=E+v,C[N+4]=E-v);for(B=0;8>B;++B)f=C[B],D=C[B+8],A=C[B+16],z=C[B+24],v=C[B+32],m=C[B+40],r=C[B+48],p=C[B+56],0===(D|A|z|v|m|r|p)?(f=5793*f+8192>>14,
f=-2040>f?0:2024<=f?255:f+2056>>4,I[w+B]=f,I[w+B+8]=f,I[w+B+16]=f,I[w+B+24]=f,I[w+B+32]=f,I[w+B+40]=f,I[w+B+48]=f,I[w+B+56]=f):(x=5793*f+2048>>12,y=5793*v+2048>>12,F=A,E=r,v=2896*(D-p)+2048>>12,p=2896*(D+p)+2048>>12,x=(x+y+1>>1)+4112,y=x-y,f=3784*F+1567*E+2048>>12,F=1567*F-3784*E+2048>>12,E=f,v=v+m+1>>1,m=v-m,p=p+z+1>>1,z=p-z,x=x+E+1>>1,E=x-E,y=y+F+1>>1,F=y-F,f=2276*v+3406*p+2048>>12,v=3406*v-2276*p+2048>>12,p=f,f=799*z+4017*m+2048>>12,z=4017*z-799*m+2048>>12,m=f,f=x+p,p=x-p,D=y+m,r=y-m,A=F+z,m=F-
z,z=E+v,v=E-v,f=16>f?0:4080<=f?255:f>>4,D=16>D?0:4080<=D?255:D>>4,A=16>A?0:4080<=A?255:A>>4,z=16>z?0:4080<=z?255:z>>4,v=16>v?0:4080<=v?255:v>>4,m=16>m?0:4080<=m?255:m>>4,r=16>r?0:4080<=r?255:r>>4,p=16>p?0:4080<=p?255:p>>4,I[w+B]=f,I[w+B+8]=D,I[w+B+16]=A,I[w+B+24]=z,I[w+B+32]=v,I[w+B+40]=m,I[w+B+48]=r,I[w+B+56]=p)}return d.blockData}function q(a,d,n){var b=a.length-1;n=n<d?n:d;if(d>=b)return null;var h=a[d]<<8|a[d+1];if(65472<=h&&65534>=h)return{invalid:null,marker:h,offset:d};for(d=a[n]<<8|a[n+1];!(65472<=
d&&65534>=d);){if(++n>=b)return null;d=a[n]<<8|a[n+1]}return{invalid:h.toString(16),marker:d,offset:n}}if(!self||!self.Uint8ClampedArray)return null;var k=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);e.prototype={parse:function(a){function d(){var B=a[h]<<8|a[h+1];h+=2;return B}function n(){var B=d();B=h+B-2;var I=q(a,B,h);I&&I.invalid&&(B=I.offset);
B=a.subarray(h,B);h+=B.length;return B}function b(B){for(var I=Math.ceil(B.samplesPerLine/8/B.maxH),N=Math.ceil(B.scanLines/8/B.maxV),V=0;V<B.components.length;V++){C=B.components[V];var Y=Math.ceil(Math.ceil(B.samplesPerLine/8)*C.h/B.maxH),ca=Math.ceil(Math.ceil(B.scanLines/8)*C.v/B.maxV);C.blockData=new Int16Array(64*N*C.v*(I*C.h+1));C.blocksPerLine=Y;C.blocksPerColumn=ca}B.mcusPerLine=I;B.mcusPerColumn=N}var h=0,c=null,f=null,p=[],r=[],m=[],v=d();if(65496!==v)throw new g("SOI not found");for(v=
d();65497!==v;){switch(v){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var z=n();65504===v&&74===z[0]&&70===z[1]&&73===z[2]&&70===z[3]&&0===z[4]&&(c={version:{major:z[5],minor:z[6]},densityUnits:z[7],xDensity:z[8]<<8|z[9],yDensity:z[10]<<8|z[11],thumbWidth:z[12],thumbHeight:z[13],thumbData:z.subarray(14,14+3*z[12]*z[13])});65518===v&&65===z[0]&&100===z[1]&&
111===z[2]&&98===z[3]&&101===z[4]&&(f={version:z[5]<<8|z[6],flags0:z[7]<<8|z[8],flags1:z[9]<<8|z[10],transformCode:z[11]});break;case 65499:v=d()+h-2;for(var A;h<v;){var D=a[h++],E=new Uint16Array(64);if(0===D>>4)for(z=0;64>z;z++)A=k[z],E[A]=a[h++];else if(1===D>>4)for(z=0;64>z;z++)A=k[z],E[A]=d();else throw new g("DQT - invalid table spec");p[D&15]=E}break;case 65472:case 65473:case 65474:if(F)throw new g("Only single frame JPEGs supported");d();var F={};F.extended=65473===v;F.progressive=65474===
v;F.precision=a[h++];F.scanLines=d();F.samplesPerLine=d();F.components=[];F.componentIds={};z=a[h++];for(v=E=D=0;v<z;v++){A=a[h];var y=a[h+1]>>4;var x=a[h+1]&15;D<y&&(D=y);E<x&&(E=x);y=F.components.push({h:y,v:x,quantizationId:a[h+2],quantizationTable:null});F.componentIds[A]=y-1;h+=3}F.maxH=D;F.maxV=E;b(F);break;case 65476:A=d();for(v=2;v<A;){D=a[h++];E=new Uint8Array(16);for(z=y=0;16>z;z++,h++)y+=E[z]=a[h];x=new Uint8Array(y);for(z=0;z<y;z++,h++)x[z]=a[h];v+=17+y;(0===D>>4?m:r)[D&15]=t(E,x)}break;
case 65501:d();var w=d();break;case 65498:d();A=a[h++];z=[];for(v=0;v<A;v++){D=F.componentIds[a[h++]];var C=F.components[D];D=a[h++];C.huffmanTableDC=m[D>>4];C.huffmanTableAC=r[D&15];z.push(C)}v=a[h++];A=a[h++];D=a[h++];v=u(a,h,F,z,w,v,A,D>>4,D&15);h+=v;break;case 65535:255!==a[h]&&h--;break;default:if(255===a[h-3]&&192<=a[h-2]&&254>=a[h-2])h-=3;else throw new g("unknown marker "+v.toString(16));}v=d()}this.width=F.samplesPerLine;this.height=F.scanLines;this.jfif=c;this.eof=h;this.adobe=f;this.components=
[];for(v=0;v<F.components.length;v++){C=F.components[v];if(c=p[C.quantizationId])C.quantizationTable=c;this.components.push({output:l(F,C),scaleX:C.h/F.maxH,scaleY:C.v/F.maxV,blocksPerLine:C.blocksPerLine,blocksPerColumn:C.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(a,d){var n=this.width/a,b=this.height/d,h,c,f=0,p=this.components.length,r=a*d*p,m=new Uint8ClampedArray(r),v=new Uint32Array(a);for(c=0;c<p;c++){var z=this.components[c];var A=z.scaleX*
n;var D=z.scaleY*b;f=c;var E=z.output;var F=z.blocksPerLine+1<<3;for(h=0;h<a;h++)z=0|h*A,v[h]=(z&4294967288)<<3|z&7;for(A=0;A<d;A++)for(z=0|A*D,z=F*(z&4294967288)|(z&7)<<3,h=0;h<a;h++)m[f]=E[z+v[h]],f+=p}if(d=this.decodeTransform)for(c=0;c<r;)for(a=z=0;z<p;z++,c++,a+=2)m[c]=(m[c]*d[a]>>8)+d[a+1];return m},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(a){for(var d,
n,b,h=0,c=a.length;h<c;h+=3)d=a[h],n=a[h+1],b=a[h+2],a[h]=d-179.456+1.402*b,a[h+1]=d+135.459-.344*n-.714*b,a[h+2]=d-226.816+1.772*n;return a},_convertYcckToRgb:function(a){for(var d,n,b,h,c=0,f=0,p=a.length;f<p;f+=4)d=a[f],n=a[f+1],b=a[f+2],h=a[f+3],a[c++]=-122.67195406894+n*(-6.60635669420364E-5*n+4.37130475926232E-4*b-5.4080610064599E-5*d+4.8449797120281E-4*h-.154362151871126)+b*(-9.57964378445773E-4*b+8.17076911346625E-4*d-.00477271405408747*h+1.53380253221734)+d*(9.61250184130688E-4*d-.00266257332283933*
h+.48357088451265)+h*(-3.36197177618394E-4*h+.484791561490776),a[c++]=107.268039397724+n*(2.19927104525741E-5*n-6.40992018297945E-4*b+6.59397001245577E-4*d+4.26105652938837E-4*h-.176491792462875)+b*(-7.78269941513683E-4*b+.00130872261408275*d+7.70482631801132E-4*h-.151051492775562)+d*(.00126935368114843*d-.00265090189010898*h+.25802910206845)+h*(-3.18913117588328E-4*h-.213742400323665),a[c++]=-20.810012546947+n*(-5.70115196973677E-4*n-2.63409051004589E-5*b+.0020741088115012*d-.00288260236853442*h+
.814272968359295)+b*(-1.53496057440975E-5*b-1.32689043961446E-4*d+5.60833691242812E-4*h-.195152027534049)+d*(.00174418132927582*d-.00255243321439347*h+.116935020465145)+h*(-3.43531996510555E-4*h+.24165260232407);return a},_convertYcckToCmyk:function(a){for(var d,n,b,h=0,c=a.length;h<c;h+=4)d=a[h],n=a[h+1],b=a[h+2],a[h]=434.456-d-1.402*b,a[h+1]=119.541-d+.344*n+.714*b,a[h+2]=481.816-d-1.772*n;return a},_convertCmykToRgb:function(a){for(var d,n,b,h,c=0,f=1/255,p=0,r=a.length;p<r;p+=4)d=a[p]*f,n=a[p+
1]*f,b=a[p+2]*f,h=a[p+3]*f,a[c++]=255+d*(-4.387332384609988*d+54.48615194189176*n+18.82290502165302*b+212.25662451639585*h-285.2331026137004)+n*(1.7149763477362134*n-5.6096736904047315*b-17.873870861415444*h-5.497006427196366)+b*(-2.5217340131683033*b-21.248923337353073*h+17.5119270841813)-h*(21.86122147463605*h+189.48180835922747),a[c++]=255+d*(8.841041422036149*d+60.118027045597366*n+6.871425592049007*b+31.159100130055922*h-79.2970844816548)+n*(-15.310361306967817*n+17.575251261109482*b+131.35250912493976*
h-190.9453302588951)+b*(4.444339102852739*b+9.8632861493405*h-24.86741582555878)-h*(20.737325471181034*h+187.80453709719578),a[c++]=255+d*(.8842522430003296*d+8.078677503112928*n+30.89978309703729*b-.23883238689178934*h-14.183576799673286)+n*(10.49593273432072*n+63.02378494754052*b+50.606957656360734*h-112.23884253719248)+b*(.03296041114873217*b+115.60384449646641*h-193.58209356861505)-h*(22.33816807309886*h+180.12613974708367);return a},getData:function(a,d,n){if(4<this.numComponents)throw new g("Unsupported color mode");
a=this._getLinearizedBlockData(a,d);if(1===this.numComponents&&n){n=a.length;d=new Uint8ClampedArray(3*n);for(var b=0,h=0;h<n;h++){var c=a[h];d[b++]=c;d[b++]=c;d[b++]=c}return d}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(a);if(4===this.numComponents){if(this._isColorConversionNeeded())return n?this._convertYcckToRgb(a):this._convertYcckToCmyk(a);if(n)return this._convertCmykToRgb(a)}return a}};return e}()})},"esri/layers/rasterFormats/Png":function(){define(["./Zlib"],
function(g){return function(){function e(u){var l,q;this.data=u;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(q=null;;){var k=this.readUInt32();var a=u=void 0;u=[];for(a=0;4>a;++a)u.push(String.fromCharCode(this.data[this.pos++]));u=u.join("");switch(u){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=
this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(k);break;case "fcTL":q&&this.animation.frames.push(q);this.pos+=4;q={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};u=this.readUInt16();k=this.readUInt16()||100;q.delay=1E3*u/k;q.disposeOp=this.data[this.pos++];q.blendOp=this.data[this.pos++];
q.data=[];break;case "IDAT":case "fdAT":"fdAT"===u&&(this.pos+=4,k-=4);u=(null!=q?q.data:void 0)||this.imgData;for(a=0;0<=k?a<k:a>k;0<=k?++a:--a)u.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(k);k=255-this.transparency.indexed.length;if(0<k)for(u=0;0<=k?u<k:u>k;0<=k?++u:--u)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(k)[0];break;case 2:this.transparency.rgb=this.read(k)}break;
case "tEXt":a=this.read(k);k=a.indexOf(0);u=String.fromCharCode.apply(String,a.slice(0,k));this.text[u]=String.fromCharCode.apply(String,a.slice(k+1));break;case "IEND":q&&this.animation.frames.push(q);a:{switch(this.colorType){case 0:case 3:case 4:q=1;break a;case 2:case 6:q=3;break a}q=void 0}this.colors=q;this.hasAlphaChannel=4===(l=this.colorType)||6===l;l=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*l;a:{switch(this.colors){case 1:l="DeviceGray";break a;case 3:l="DeviceRGB";
break a}l=void 0}this.colorSpace=l;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=k}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}e.load=function(u,l,q){"function"===typeof l&&(q=l);var k=new XMLHttpRequest;k.open("GET",u,!0);k.responseType="arraybuffer";k.onload=function(){var a=new Uint8Array(k.response||k.mozResponseArrayBuffer);a=new e(a);"function"===typeof(null!=l?l.getContext:void 0)&&a.render(l);return"function"===typeof q?q(a):
void 0};return k.send(null)};e.prototype.read=function(u){var l;var q=[];for(l=0;0<=u?l<u:l>u;0<=u?++l:--l)q.push(this.data[this.pos++]);return q};e.prototype.readUInt32=function(){var u=this.data[this.pos++]<<24;var l=this.data[this.pos++]<<16;var q=this.data[this.pos++]<<8;var k=this.data[this.pos++];return u|l|q|k};e.prototype.readUInt16=function(){var u=this.data[this.pos++]<<8;var l=this.data[this.pos++];return u|l};e.prototype.decodePixels=function(u){var l,q,k,a,d,n,b,h;null==u&&(u=this.imgData);
if(0===u.length)return new Uint8Array(0);u=new g(u);u=u.getBytes();var c=this.pixelBitlength/8;var f=c*this.width;var p=new Uint8Array(f*this.height);var r=u.length;for(q=a=d=0;a<r;){switch(u[a++]){case 0:for(k=l=0;l<f;k=l+=1)p[q++]=u[a++];break;case 1:for(k=n=0;n<f;k=n+=1){l=u[a++];var m=k<c?0:p[q-c];p[q++]=(l+m)%256}break;case 2:for(k=m=0;m<f;k=m+=1){l=u[a++];var v=(k-k%c)/c;n=d&&p[(d-1)*f+v*c+k%c];p[q++]=(n+l)%256}break;case 3:for(k=h=0;h<f;k=h+=1)l=u[a++],v=(k-k%c)/c,m=k<c?0:p[q-c],n=d&&p[(d-
1)*f+v*c+k%c],p[q++]=(l+Math.floor((m+n)/2))%256;break;case 4:for(k=h=0;h<f;k=h+=1){l=u[a++];v=(k-k%c)/c;m=k<c?0:p[q-c];0===d?n=b=0:(n=p[(d-1)*f+v*c+k%c],b=v&&p[(d-1)*f+(v-1)*c+k%c]);var z=m+n-b;k=Math.abs(z-m);v=Math.abs(z-n);z=Math.abs(z-b);m=k<=v&&k<=z?m:v<=z?n:b;p[q++]=(l+m)%256}break;default:throw Error("Invalid filter algorithm: "+u[a-1]);}d++}return p};e.prototype.decodePalette=function(){var u,l,q,k,a;var d=this.palette;var n=this.transparency.indexed||[];var b=new Uint8Array((n.length||0)+
d.length);var h=q=u=l=0;for(k=d.length;q<k;h=q+=3)b[l++]=d[h],b[l++]=d[h+1],b[l++]=d[h+2],b[l++]=null!=(a=n[u++])?a:255;return b};e.prototype.copyToImageData=function(u,l){var q,k;var a=this.colors;var d=null;var n=this.hasAlphaChannel;this.palette.length&&(d=null!=(q=this._decodedPalette)?q:this._decodedPalette=this.decodePalette(),a=4,n=!0);u=u.data||u;var b=u.length;var h=d||l;q=k=0;if(1===a)for(;q<b;)a=d?4*l[q/4]:k,k=h[a++],u[q++]=k,u[q++]=k,u[q++]=k,u[q++]=n?h[a++]:this.transparency.grayscale&&
this.transparency.grayscale===k?0:255,k=a;else for(;q<b;)a=d?4*l[q/4]:k,u[q++]=h[a++],u[q++]=h[a++],u[q++]=h[a++],u[q++]=n?h[a++]:this.transparency.rgb&&this.transparency.rgb[1]===h[a-3]&&this.transparency.rgb[3]===h[a-2]&&this.transparency.rgb[5]===h[a-1]?0:255,k=a};e.prototype.decode=function(){var u=new Uint8Array(this.width*this.height*4);this.copyToImageData(u,this.decodePixels());return u};var t=function(u){(void 0).clearRect(0,0,u.width,u.height);(void 0).putImageData(u,0,0);u=new Image;u.src=
(void 0).toDataURL();return u};e.prototype.decodeFrames=function(u){var l,q;if(this.animation){var k=this.animation.frames;var a=[];var d=l=0;for(q=k.length;l<q;d=++l){d=k[d];var n=u.createImageData(d.width,d.height);var b=this.decodePixels(new Uint8Array(d.data));this.copyToImageData(n,b);d.imageData=n;a.push(d.image=t(n))}return a}};e.prototype.renderFrame=function(u,l){var q=this.animation.frames;var k=q[l];q=q[l-1];0===l&&u.clearRect(0,0,this.width,this.height);1===(null!=q?q.disposeOp:void 0)?
u.clearRect(q.xOffset,q.yOffset,q.width,q.height):2===(null!=q?q.disposeOp:void 0)&&u.putImageData(q.imageData,q.xOffset,q.yOffset);0===k.blendOp&&u.clearRect(k.xOffset,k.yOffset,k.width,k.height);return u.drawImage(k.image,k.xOffset,k.yOffset)};e.prototype.animate=function(u){var l,q=this;var k=0;var a=this.animation;var d=a.numFrames;var n=a.frames;var b=a.numPlays;return(l=function(){var h=k++%d;var c=n[h];q.renderFrame(u,h);if(1<d&&k/d<b)return q.animation._timeout=setTimeout(l,c.delay)})()};
e.prototype.stopAnimation=function(){var u;return clearTimeout(null!=(u=this.animation)?u._timeout:void 0)};e.prototype.render=function(u){u._png&&u._png.stopAnimation();u._png=this;u.width=this.width;u.height=this.height;u=u.getContext("2d");if(this.animation)return this.decodeFrames(u),this.animate(u);var l=u.createImageData(this.width,this.height);this.copyToImageData(l,this.decodePixels());return u.putImageData(l,0,0)};return e}()})},"esri/layers/rasterFormats/Raw":function(){define([],function(){return{decodeBIP:function(g,
e){var t=e.pixelType,u=e.bandCount,l=[],q=e.width*e.height,k=this.getBandCount(g,e);u=u||k;var a=g.byteLength-g.byteLength%(q*this._getPixelLength(t)),d=new t(g,0,q*k),n,b,h;for(n=0;n<u;n++){var c=new t(q);for(b=0;b<q;b++)c[b]=d[b*k+n];l.push(c)}a<g.byteLength-1&&(h=this._decodeMask(g.slice(a),e));return{pixels:l,maskData:h}},decodeBSQ:function(g,e){var t=e.pixelType,u=e.bandCount;if(void 0===u||null===u)u=this.getBandCount(g,e);var l=[],q=e.width*e.height,k=q*u,a=g.byteLength-g.byteLength%(q*this._getPixelLength(t));
t=new t(g,0,k);var d;for(k=0;k<u;k++)l.push(t.subarray(k*q,(k+1)*q));a<g.byteLength-1&&(d=this._decodeMask(g.slice(a),e));return{pixels:l,maskData:d}},getBandCount:function(g,e){return Math.floor(g.byteLength/(e.width*e.height*this._getPixelLength(e.pixelType)))},_getPixelLength:function(g){var e=1;switch(g){case Uint8Array:case Int8Array:case Uint8ClampedArray:e=1;break;case Uint16Array:case Int16Array:e=2;break;case Uint32Array:case Int32Array:case Float32Array:e=4;break;case Float64Array:e=8}return e},
_decodeMask:function(g,e){var t=e.width*e.height;if(8*g.byteLength<t)return null;g=new Uint8Array(g,0,Math.ceil(t/8));e=new Uint8Array(e.width*e.height);var u=0,l=0,q=0,k=0;for(q=0;q<g.length-1;q++)for(l=g[q],k=7;0<=k;k--)e[u++]=l>>k&1;for(k=7;u<t-1;)l=g[g.length-1],e[u++]=l>>k&1,k--;return e}}})},"esri/layers/rasterFormats/TiffDecoder":function(){define(["./Jpg","./Zlib"],function(g,e){var t=function(){var k=new ArrayBuffer(4),a=new Uint8Array(k);k=new Uint32Array(k);a[0]=1;a[1]=2;a[2]=3;a[3]=4;
return 67305985===k[0]},u=function(){var k=[];k[254]="NEWSUBFILETYPE";k[255]="SUBFILETYPE";k[256]="IMAGEWIDTH";k[257]="IMAGELENGTH";k[258]="BITSPERSAMPLE";k[259]="COMPRESSION";k[262]="PHOTOMETRICINTERPRETATION";k[263]="THRESHHOLDING";k[264]="CELLWIDTH";k[265]="CELLLENGTH";k[266]="FILLORDER";k[269]="DOCUMENTNAME";k[270]="IMAGEDESCRIPTION";k[271]="MAKE";k[272]="MODEL";k[273]="STRIPOFFSETS";k[274]="ORIENTATION";k[277]="SAMPLESPERPIXEL";k[278]="ROWSPERSTRIP";k[279]="STRIPBYTECOUNTS";k[280]="MINSAMPLEVALUE";
k[281]="MAXSAMPLEVALUE";k[282]="XRESOLUTION";k[283]="YRESOLUTION";k[284]="PLANARCONFIGURATION";k[285]="PAGENAME";k[286]="XPOSITION";k[287]="YPOSITION";k[288]="FREEOFFSETS";k[289]="FREEBYTECOUNTS";k[290]="GRAYRESPONSEUNIT";k[291]="GRAYRESPONSECURVE";k[292]="T4OPTIONS";k[293]="T6OPTIONS";k[296]="RESOLUTIONUNIT";k[297]="PAGENUMBER";k[300]="COLORRESPONSEUNIT";k[301]="TRANSFERFUNCTION";k[305]="SOFTWARE";k[306]="DATETIME";k[315]="ARTIST";k[316]="HOSTCOMPUTER";k[317]="PREDICTOR";k[318]="WHITEPOINT";k[319]=
"PRIMARYCHROMATICITIES";k[320]="COLORMAP";k[321]="HALFTONEHINTS";k[322]="TILEWIDTH";k[323]="TILELENGTH";k[324]="TILEOFFSETS";k[325]="TILEBYTECOUNTS";k[326]="BADFAXLINES";k[327]="CLEANFAXDATA";k[328]="CONSECUTIVEBADFAXLINES";k[330]="SUBIFD";k[332]="INKSET";k[333]="INKNAMES";k[334]="NUMBEROFINKS";k[336]="DOTRANGE";k[337]="TARGETPRINTER";k[338]="EXTRASAMPLES";k[339]="SAMPLEFORMAT";k[340]="SMINSAMPLEVALUE";k[341]="SMAXSAMPLEVALUE";k[342]="TRANSFERRANGE";k[347]="JPEGTABLES";k[512]="JPEGPROC";k[513]="JPEGIFOFFSET";
k[514]="JPEGIFBYTECOUNT";k[515]="JPEGRESTARTINTERVAL";k[517]="JPEGLOSSLESSPREDICTORS";k[518]="JPEGPOINTTRANSFORM";k[519]="JPEGQTABLES";k[520]="JPEGDCTABLES";k[521]="JPEGACTABLES";k[529]="YCBCRCOEFFICIENTS";k[530]="YCBCRSUBSAMPLING";k[531]="YCBCRPOSITIONING";k[532]="REFERENCEBLACKWHITE";k[33550]="GEOPIXELSCALE";k[33922]="GEOTIEPOINTS";k[33432]="COPYRIGHT";k[42112]="GDAL_METADATA";k[42113]="GDAL_NODATA";k[50844]="RPCCOEFFICIENT";k[34735]="GEOKEYDIRECTORY";k[34736]="GEODOUBLEPARAMS";k[34737]="GEOASCIIPARAMS";
return k}(),l=[0,1,1,2,4,8,1,1,2,4,8,4,8],q=function(k,a){var d="UNKNOWN";3===k?d="F32":1===k?8>=a?d="U8":16>=a?d="U16":32>=a&&(d="U32"):2===k&&(8>=a?d="S8":16>=a?d="S16":32>=a&&(d="S32"));return d};return{decode:function(k){var a=new DataView(k,0,8),d=a.getUint16(0,!1);if(18761===d)var n=!0;else if(19789===d)n=!1;else throw"unexpected endianess byte";if(42!==a.getUint16(2,n))throw"unexpected tiff identifier";var b=a.getUint32(4,n);var h=n;var c,f;var p=b;for(var r=[];p;){var m=(new DataView(k,p,
2)).getUint16(0,h);var v=p+2;p=(new DataView(k,v+12*m,4)).getUint32(0,h);var z={};for(c=0;c<m;c++){var A=new DataView(k,v,12);var D=A.getUint16(0,h);var E=A.getUint16(2,h);var F=A.getUint32(4,h);var y=A.getUint32(8,h);v+=12;if(!(7===E||12<E)){var x=f={fieldTag:D,fieldType:E,fieldValueCount:F,fieldValueOffset:y},w=void 0,C=void 0,B=k,I=h,N=[],V=f.fieldType,Y=f.fieldValueCount,ca=f.fieldValueOffset,J=ca,O=l[V],U=8*O,ba=Y*O,Z=Y*l[V]*8;if(32>=Z)if(I||(ca>>>=32-Z),1===Y)N=[ca];else for(w=0;w<Y;w++)N.push(ca<<
U*w>>>32-U);else for(J=ca;J<ca+ba;J+=O){switch(V){case 1:C=(new DataView(B,J,1)).getUint8(0);break;case 2:C=(new DataView(B,J,1)).getUint8(0);break;case 3:C=(new DataView(B,J,2)).getUint16(0,I);break;case 4:C=(new DataView(B,J,4)).getUint32(0,I);break;case 5:C=(new DataView(B,J,4)).getUint32(0,I)/(new DataView(B,J+4,4)).getUint32(0,I);break;case 6:C=(new DataView(B,J,1)).getInt8(0);break;case 8:C=(new DataView(B,J,2)).getInt16(0,I);break;case 9:C=(new DataView(B,J,4)).getInt32(0,I);break;case 10:C=
(new DataView(B,J,4)).getInt32(0,I)/(new DataView(B,J+4,4)).getInt32(0,I);break;case 11:C=(new DataView(B,J,4)).getFloat32(0,I);break;case 12:C=(new DataView(B,J,8)).getFloat64(0,I);break;case 7:C=null;break;default:C=null}N.push(C)}if(2===V){var fa="",pa=N;N=[];for(w=0;w<pa.length;w++)0===pa[w]&&""!==fa?(N.push(fa),fa=""):fa+=String.fromCharCode(pa[w]);""===fa&&0!==N.length||N.push(fa)}x.fieldValues=N;var da=z,ha=u[D];void 0===ha&&(ha="unknown"+D);da[ha]={type:E,values:f.fieldValues}}}r.push(z)}if(0===
r.length)throw"no valid image file directory";var P,aa=r[0],ea=void 0===aa.GDAL_NODATA||null===aa.GDAL_NODATA?null:parseFloat(aa.GDAL_NODATA.values[0]);if(aa.TILEOFFSETS){var X=t()===h,S=aa.TILEOFFSETS?aa.TILEOFFSETS.values:void 0;if(void 0===S)var ia=void 0;else{var oa=aa.TILEBYTECOUNTS.values,qa=aa.TILEWIDTH.values[0],wa=aa.TILELENGTH.values[0],Ha=aa.IMAGEWIDTH.values[0],R=aa.IMAGELENGTH.values[0],T=Ha*R,ka=aa.BITSPERSAMPLE.values[0],na=aa.SAMPLESPERPIXEL.values[0],ta=aa.SAMPLEFORMAT?aa.SAMPLEFORMAT.values[0]:
1,G=q(ta,ka);if(1!==(aa.PLANARCONFIGURATION?aa.PLANARCONFIGURATION.values[0]:1))throw"can only handle PLANARCONFIGURATION\x3d1";var ja=aa.COMPRESSION?aa.COMPRESSION.values[0]:1;if(1!==ja&&6!==ja&&8!==ja&&32946!==ja)throw"this compression is not supported at this moment";if(3<ta)ia=void 0;else{if(3===ta){var ra=new Float32Array(T*na);var K=Float32Array}else 1===ta?8>=ka?(ra=new Uint8Array(T*na),K=Uint8Array):16>=ka?(ra=new Uint16Array(T*na),K=Uint16Array):32>=ka&&(ra=new Uint32Array(T*na),K=Uint32Array):
2===ta&&(8>=ka?(ra=new Int8Array(T*na),K=Int8Array):16>=ka?(ra=new Int16Array(T*na),K=Int16Array):32>=ka&&(ra=new Int32Array(T*na),K=Int32Array));var xa,va,la,Ca,Ma,ua=Math.ceil(Ha/qa);if(0===ka%8)for(xa=0;xa<S.length;xa++){var Ba=Math.floor(xa/ua)*wa;var Aa=xa%ua*qa;var Ga=(Ba*Ha+Aa)*na;if("U8"===G||"S8"===G||X)if(8===ja||32946===ja){var ya=new Uint8Array(k,S[xa],oa[xa]);var Ea=new e(ya);var Fa=Ea.getBytes();var Ka=new ArrayBuffer(Fa.length);ya=new Uint8Array(Ka);ya.set(Fa)}else if(6===ja){ya=new Uint8Array(k,
S[xa],oa[xa]);var Ja=new g;Ja.parse(ya);var Oa=Ja.getData(Ja.width,Ja.height);Ka=new ArrayBuffer(Oa.length);ya=new Uint8Array(Ka);ya.set(Oa)}else 1===ja&&(Ka=k.slice(S[xa],S[xa]+oa[xa]));else{if(8===ja||32946===ja){ya=new Uint8Array(k,S[xa],oa[xa]);Ea=new e(ya);ya=Ea.getBytes();Ka=new ArrayBuffer(ya.length);var Da=new Uint8Array(Ka)}else 1===ja&&(Ka=new ArrayBuffer(oa[xa]),ya=new Uint8Array(k,S[xa],oa[xa]),Da=new Uint8Array(Ka));switch(G){case "U16":case "S16":for(la=0;la<ya.length;la+=2)Da[la]=ya[la+
1],Da[la+1]=ya[la];break;case "U32":case "S32":case "F32":for(la=0;la<ya.length;la+=4)Da[la]=ya[la+3],Da[la+1]=ya[la+2],Da[la+2]=ya[la+1],Da[la+3]=ya[la]}}var Na=new K(Ka);var Pa=0;var Ta=Ga;var Xa=Math.min(qa,Ha-Aa);var ob=Math.min(wa,R-Ba);for(Ca=0;Ca<ob;Ca++)for(Ta=Ga+Ca*Ha*na,Pa=Ca*qa*na,Ma=0;Ma<Xa*na;Ma++,Ta++,Pa++)ra[Ta]=Na[Pa]}var mb={width:Ha,height:R,pixelType:G};if(1===na)mb.pixels=[ra];else for(mb.pixels=[],xa=0;xa<na;xa++){var ub=new K(T);for(va=0;va<T;va++)ub[va]=ra[va*na+xa];mb.pixels.push(ub)}ia=
mb}}}else if(aa.STRIPOFFSETS){var vb=t()===h,Va=aa.STRIPOFFSETS?aa.STRIPOFFSETS.values:void 0;if(void 0===Va)ia=void 0;else{var fb=aa.STRIPBYTECOUNTS.values,wb=aa.ROWSPERSTRIP.values,Ua=aa.IMAGEWIDTH.values[0],jb=aa.IMAGELENGTH.values[0],qb=Ua*jb,kb=aa.BITSPERSAMPLE.values[0],lb=aa.SAMPLESPERPIXEL.values[0],Ab=aa.SAMPLEFORMAT?aa.SAMPLEFORMAT.values[0]:1,yb=q(Ab,kb);if(1!==(aa.PLANARCONFIGURATION?aa.PLANARCONFIGURATION.values[0]:1))throw"can only handle PLANARCONFIGURATION\x3d1";var hb=aa.COMPRESSION?
aa.COMPRESSION.values[0]:1;if(1!==hb&&6!==hb&&8!==hb&&32946!==hb)throw"compressed tiff is not supported at this moment";if(3<Ab)ia=void 0;else{if(3===Ab){var ib=new Float32Array(qb*lb);var nb=Float32Array}else 1===Ab?8>=kb?(ib=new Uint8Array(qb*lb),nb=Uint8Array):16>=kb?(ib=new Uint16Array(qb*lb),nb=Uint16Array):32>=kb&&(ib=new Uint32Array(qb*lb),nb=Uint32Array):2===Ab&&(8>=kb?(ib=new Int8Array(qb*lb),nb=Int8Array):16>=kb?(ib=new Int16Array(qb*lb),nb=Int16Array):32>=kb&&(ib=new Int32Array(Ua*jb*lb),
nb=Int32Array));var Wa,Bb,ab;if(0===kb%8)for(Wa=0;Wa<Va.length;Wa++){var Nb=Wa*wb*Ua*lb;if("U8"===yb||"S8"===yb||vb)if(8===hb||32946===hb){var Ya=new Uint8Array(k,Va[Wa],fb[Wa]);var Ib=new e(Ya);var Cb=Ib.getBytes();var eb=new ArrayBuffer(Cb.length);Ya=new Uint8Array(eb);Ya.set(Cb)}else if(6===hb){Ya=new Uint8Array(k,Va[Wa],fb[Wa]);var Jb=new g;Jb.parse(Ya);var Ob=Jb.getData(Jb.width,Jb.height);eb=new ArrayBuffer(Ob.length);Ya=new Uint8Array(eb);Ya.set(Ob)}else 1===hb&&(eb=k.slice(Va[Wa],Va[Wa]+fb[Wa]));
else{if(6===hb||8===hb||32946===hb){Ya=new Uint8Array(k,Va[Wa],fb[Wa]);Ib=new e(Ya);Ya=Ib.getBytes();eb=new ArrayBuffer(Ya.length);var zb=new Uint8Array(eb)}else 1===hb&&(eb=new ArrayBuffer(fb[Wa]),Ya=new Uint8Array(k,Va[Wa],fb[Wa]),zb=new Uint8Array(eb));switch(yb){case "U16":case "S16":for(ab=0;ab<Ya.length;ab+=2)zb[ab]=Ya[ab+1],zb[ab+1]=Ya[ab];break;case "U32":case "S32":case "F32":for(ab=0;ab<Ya.length;ab+=4)zb[ab]=Ya[ab+3],zb[ab+1]=Ya[ab+2],zb[ab+2]=Ya[ab+1],zb[ab+3]=Ya[ab]}}var Fb=new nb(eb);
ib.set(Fb,Nb)}var Gb={width:Ua,height:jb,pixelType:yb};if(1===lb)Gb.pixels=[ib];else for(Gb.pixels=[],Wa=0;Wa<lb;Wa++){var gb=new nb(qb);for(Bb=0;Bb<qb;Bb++)gb[Bb]=ib[Bb*lb+Wa];Gb.pixels.push(gb)}ia=Gb}}}if(null!==ea){ia.maskData=new Uint8Array(ia.width*ia.height);if(1E24<Math.abs(ea))for(P=0;P<ia.width*ia.height;P++)ia.maskData[P]=1E-6>Math.abs((ia.pixels[0][P]-ea)/ea)?0:1;else for(P=0;P<ia.width*ia.height;P++)ia.maskData[P]=ia.pixels[0][P]===ea?0:1;ia.noDataValue=ea}return ia}}})},"esri/layers/rasterLib/tile/RasterHandler":function(){define("require exports module dojo/Deferred dojo/promise/all ../../PixelBlock ../../vectorTiles/core/workers ../../vectorTiles/core/promiseUtils ../../vectorTiles/core/requireUtils ../../vectorTiles/request ../../rasterLib/function/rasterFunctionHelper ../../rasterLib/renderer/rasterRendererHelper".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h){function c(f){var p=new u;l(f).then(function(r){p.resolve()});return p.promise}return function(){function f(p){this.customModules=p&&p.customModules}f.prototype.destroy=function(){this.stop();this.customModules=this.rasterLayer=null};f.prototype.start=function(){this.stop();var p=new u,r=0,m=this.customModules?this.customModules.length+1:1,v=d.getAbsMid("esri/layers/rasterLib/tile/RasterWorker",g,t),z=k.open(v,{client:this}).then(function(A){this._connection=A;r++;
r===m&&(this._connected=!0,p.resolve())}.bind(this));this._openDL=[z];this.customModules&&this.customModules.forEach(function(A){z=k.open(A,{client:this}).then(function(D){r++;r===m&&(this._connected=!0,p.resolve())});this._openDL.push(z)}.bind(this));return this._connectionPromise=p.promise};f.prototype.stop=function(){this._openDL?this._openDL.forEach(function(p){p.isFulfilled()||p.cancel()}.bind(this)):this._connectionPromise&&!this._connectionPromise.isFulfilled()&&this._connectionPromise.cancel();
this._connection&&(this._connection.close(),this._connection=null)};f.prototype.decode=function(p){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));var r={id:null};return this._connection.invoke("decode",p,[],r).then(function(m){m.targetWorker=r;return m})};f.prototype.process=function(p){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));var r={id:null};p.layerId=this.rasterLayer.layerId;var m=new u;
this._connection.invoke("process",p,[],r).then(function(v){v.targetWorker=r;v.src?Object.keys(v.src).forEach(function(z){v.src[z].pixelBlock=new q(v.src[z].pixelBlock)}):v.src=null;v.pixelBlock&&(v.pixelBlock=new q(v.pixelBlock));m.resolve(v)});return m.promise};f.prototype.render=function(p){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));var r={id:null};p.layerId=this.rasterLayer.layerId;return this._connection.invoke("render",p,[],r).then(function(m){m.targetWorker=
r;m.pixelBlock=m.pixelBlock?new q(m.pixelBlock):null;return m})};f.prototype.setLayer=function(p){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));this.rasterLayer=p;p=this._connection.broadcast("setLayer",p,[],{id:null});return c(p)};f.prototype.setRasterFunction=function(p){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));p=this._connection.broadcast("setRasterFunction",p,[],{id:null});return c(p)};
f.prototype.setRasterRenderer=function(p){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));p=this._connection.broadcast("setRasterRenderer",p,[],{id:null});return c(p)};return f}()})},"esri/layers/vectorTiles/core/workers":function(){define(["require","exports","./workers/workers"],function(g,e,t){Object.defineProperty(e,"__esModule",{value:!0});for(var u in t)e.hasOwnProperty(u)||(e[u]=t[u])})},"esri/layers/vectorTiles/core/workers/workers":function(){define("require exports dojo/sniff dojo/promise/all ../Logger ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),
function(g,e,t,u,l,q,k,a,d){function n(){if(r)return r;for(var m=b+h,v=[],z=function(D){var E=d.create(D).then(function(F){return p[D]=F});v.push(E)},A=0;A<m;A++)z(A);return r=u(v).then(function(){})}Object.defineProperty(e,"__esModule",{value:!0});e.Connection=k;e.RemoteClient=a;(k=navigator.hardwareConcurrency)||(k=t("safari")&&t("mac")||t("trident")?8:2);var b=t("esri-workers-debug")?1:Math.max(1,Math.ceil(k/2)),h=t("esri-workers-debug")?1:Math.max(1,Math.floor(k/2)),c=l.getLogger("esri.core.workers"),
f=0,p=[];e.initialize=function(){n()};e.open=function(m,v,z){void 0===v&&(v={});if(Array.isArray(m))return new e.Connection(m.map(function(E){return new e.RemoteClient(E,v.client)}));if("string"!==typeof m){c.warn("workers-open:signature-deprecated","DEPRECATED: workers.open() changed signature.");var A=m;m=v;v={client:A,strategy:z?"dedicated":"distributed"}}var D=v.strategy||"distributed";return"local"===D?q.create(function(E){g([m],function(F){E(e.RemoteClient.connect(F))})}).then(function(E){return new e.Connection([new e.RemoteClient(E,
v.client)])}):n().then(function(){if("dedicated"===D){var E=b+f++;f%=h;return p[E].open(m).then(function(F){return new e.Connection([new e.RemoteClient(F,v.client)])})}return q.all(p.map(function(F){return F.open(m)})).then(function(F){return new e.Connection(F.map(function(y){return new e.RemoteClient(y,v.client)}))})})};e.terminate=function(){for(var m=0;m<p.length;m++)p[m]&&p[m].terminate();p.length=0};var r})},"esri/layers/vectorTiles/core/Logger":function(){define(["require","exports","dojo/has"],
function(g,e,t){var u={info:0,warn:1,error:2};g=function(){function l(q){void 0===q&&(q={});this.module=q.module||"";this.writer=q.writer||null;this.level=q.level||null;null!=q.enabled&&(this.enabled=!!q.enabled);l._loggers[this.module]=this;q=this.module.lastIndexOf(".");-1!==q&&(this.parent=l.getLogger(this.module.slice(0,q)))}l.prototype.log=function(q){for(var k=[],a=1;a<arguments.length;a++)k[a-1]=arguments[a];this._isEnabled()&&this._matchLevel(q)&&(a=this._inheritedWriter())&&a.apply(void 0,
[q,this.module].concat(k))};l.prototype.error=function(){for(var q=[],k=0;k<arguments.length;k++)q[k]=arguments[k];this.log.apply(this,["error"].concat(q))};l.prototype.warn=function(){for(var q=[],k=0;k<arguments.length;k++)q[k]=arguments[k];this.log.apply(this,["warn"].concat(q))};l.prototype.info=function(){for(var q=[],k=0;k<arguments.length;k++)q[k]=arguments[k];this.log.apply(this,["info"].concat(q))};l.prototype.getLogger=function(q){return l.getLogger(this.module+"."+q)};l.getLogger=function(q){var k=
l._loggers[q];k||(k=new l({module:q}));return k};l.prototype._parentWithMember=function(q,k){for(var a=this;a&&null==a[q];)a=a.parent;return a?a[q]:k};l.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};l.prototype._consoleWriter=function(q,k){for(var a=[],d=2;d<arguments.length;d++)a[d-2]=arguments[d];console[q].apply(console,["["+k+"]"].concat(a))};l.prototype._matchLevel=function(q){return u[this._parentWithMember("level","error")]<=u[q]};l.prototype._isEnabled=
function(){return this._parentWithMember("enabled",!0)};l._loggers={};return l}();g.getLogger("esri").level="warn";return g})},"esri/layers/vectorTiles/core/promiseUtils":function(){define("require exports dojo/Deferred dojo/when dojo/promise/all ./Error".split(" "),function(g,e,t,u,l,q){function k(a){if(a){if("function"!==typeof a.forEach){var d=Object.keys(a),n=d.map(function(f){return a[f]});return k(n).then(function(f){var p={};d.forEach(function(r,m){return p[r]=f[m]});return p})}var b=new t,
h=[],c=a.length;0===c&&b.resolve(h);a.forEach(function(f){var p={promise:f};h.push(p);f.then(function(r){p.value=r}).catch(function(r){p.error=r}).then(function(){--c;0===c&&b.resolve(h)})});return b.promise}}Object.defineProperty(e,"__esModule",{value:!0});e.all=function(a){return l(a)};e.filter=function(a,d){var n=a.slice();return l(a.map(function(b,h){return d(b,h)})).then(function(b){return n.filter(function(h,c){return b[c]})})};e.eachAlways=k;e.create=function(a,d){var n=new t(d);a(function(b){void 0===
b&&(b=null);return u(b).then(n.resolve)},n.reject);return n.promise};e.reject=function(a){var d=new t;d.reject(a);return d.promise};e.resolve=function(a){void 0===a&&(a=null);var d=new t;d.resolve(a);return d.promise};e.after=function(a,d){void 0===d&&(d=null);var n=0,b=new t(function(){n&&(clearTimeout(n),n=0)});n=setTimeout(function(){b.resolve(d)},a);return b.promise};e.timeout=function(a,d,n){var b=0,h=new t(a.cancel);a.then(function(c){h.isFulfilled()||(h.resolve(c),b&&(clearTimeout(b),b=0))});
a.catch(function(c){h.isFulfilled()||(h.reject(c),b&&(clearTimeout(b),b=0))});b=setTimeout(function(){var c=n||new q("promiseUtils:timeout","The wrapped promise did not resolve within "+d+" ms");h.reject(c)},d);return h.promise};e.wrapCallback=function(a){var d=!1,n=new t(function(){return d=!0});a(function(b){d||n.resolve(b)});return n.promise};e.isThenable=function(a){return a&&"function"===typeof a.then};e.when=function(a){return u(a)}})},"esri/layers/vectorTiles/core/Error":function(){define(["require",
"exports","./tsSupport/extendsHelper","./lang","./Message"],function(g,e,t,u,l){g=function(q){function k(a,d,n){var b=q.call(this,a,d,n)||this;return b instanceof k?b:new k(a,d,n)}t(k,q);k.prototype.toJSON=function(){return{name:this.name,message:this.message,details:u.clone(this.details),dojoType:this.dojoType}};k.fromJSON=function(a){var d=new k(a.name,a.message,a.details);null!=a.dojoType&&(d.dojoType=a.dojoType);return d};return k}(l);g.prototype.type="error";return g})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],
function(){return function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var u in t)t.hasOwnProperty(u)&&(e[u]=t[u])};return function(e,t){function u(){this.constructor=e}g(e,t);e.prototype=null===t?Object.create(t):(u.prototype=t.prototype,new u)}}()})},"esri/layers/vectorTiles/core/lang":function(){define("dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),function(g,e,t,u,
l,q){function k(f){return void 0!==f&&null!==f}function a(f){return k(f)?f:""}function d(f,p,r){var m=r.match(/([^\(]+)(\([^\)]+\))?/i),v=e.trim(m[1]);r=p[f];m=JSON.parse((m[2]?e.trim(m[2]):"{}").replace(/^\(/,"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z_]+)\s*:/gi,'$1"$2":').replace(/"\s*:\s*'/gi,'":"').replace(/'\s*(,|\})/gi,'"$1'));var z=m.utcOffset;if(-1===h.indexOf(v))v=e.getObject(v),e.isFunction(v)&&(r=v(r,f,p,m));else if("number"===typeof r||"string"===typeof r&&r&&!isNaN(Number(r)))switch(r=
Number(r),v){case "NumberFormat":f=e.mixin({},m);p=parseFloat(f.places);if(isNaN(p)||0>p)f.places=Infinity;return u.format(r,f);case "DateString":r=new Date(r);if(m.local||m.systemLocale)return m.systemLocale?r.toLocaleDateString()+(m.hideTime?"":" "+r.toLocaleTimeString()):r.toDateString()+(m.hideTime?"":" "+r.toTimeString());r=r.toUTCString();m.hideTime&&(r=r.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return r;case "DateFormat":return r=new Date(r),k(z)&&(r=t.add(r,"minute",r.getTimezoneOffset()-
z)),l.format(r,m)}return a(r)}function n(f,p){var r;if(p)for(r in f)f.hasOwnProperty(r)&&(void 0===f[r]?delete f[r]:f[r]instanceof Object&&n(f[r],!0));else for(r in f)f.hasOwnProperty(r)&&void 0===f[r]&&delete f[r];return f}function b(f){if(!f||"object"!=typeof f||e.isFunction(f))return f;if(f instanceof Int8Array||f instanceof Uint8Array||f instanceof Uint8ClampedArray||f instanceof Int16Array||f instanceof Int32Array||f instanceof Uint16Array||f instanceof Uint32Array||f instanceof Float32Array||
f instanceof Float64Array||f instanceof Date)return new f.constructor(f);if(f instanceof ArrayBuffer)return f.slice(0,f.byteLength);if("function"===typeof f.clone)f=f.clone();else if("function"===typeof f.map&&"function"===typeof f.forEach)f=f.map(b);else if("function"===typeof f.notifyChange&&"function"===typeof f.watch)f=f.clone();else{var p={},r,m={};for(r in f){var v=f[r];var z=!(r in m)||m[r]!==v;if(!(r in p)||p[r]!==v&&z)p[r]=b?b(v):v}f=p}return f}var h=["NumberFormat","DateString","DateFormat"],
c=/<\/?[^>]+>/g;return{equals:function(f,p){return f===p||"number"===typeof f&&isNaN(f)&&"number"===typeof p&&isNaN(p)||e.isFunction((f||{}).getTime)&&e.isFunction((p||{}).getTime)&&f.getTime()==p.getTime()||e.isFunction((f||{}).equals)&&f.equals(p)||e.isFunction((p||{}).equals)&&p.equals(f)||!1},mixin:e.mixin,valueOf:function(f,p){for(var r in f)if(f[r]==p)return r;return null},stripTags:function(f){if(f){var p=typeof f;if("string"===p)f=f.replace(c,"");else if("object"===p)for(var r in f)(p=f[r])&&
"string"===typeof p&&(p=p.replace(c,"")),f[r]=p}return f},substitute:function(f,p,r){if(k(r))if(e.isObject(r)){var m=r.first;var v=r.dateFormat;var z=r.numberFormat}else m=r;if(p&&"{*}"!==p)return e.replace(p,e.hitch({obj:f},function(D,E){D=E.split(":");return 1<D.length?(E=D[0],D.shift(),d(E,this.obj,D.join(":"))):v&&-1!==(v.properties||[]).indexOf(E)?d(E,this.obj,v.formatter||"DateString"):z&&-1!==(z.properties||[]).indexOf(E)?d(E,this.obj,z.formatter||"NumberFormat"):a(this.obj[E])}));p=[];var A;
p.push('\x3ctable class\x3d"esri-widget__table" summary\x3d"'+q.fieldsSummary+'"\x3e\x3ctbody\x3e');for(A in f)if(r=f[A],v&&-1!==(v.properties||[]).indexOf(A)?r=d(A,f,v.formatter||"DateString"):z&&-1!==(z.properties||[]).indexOf(A)&&(r=d(A,f,z.formatter||"NumberFormat")),p.push("\x3ctr\x3e\x3cth\x3e"+A+"\x3c/th\x3e\x3ctd\x3e"+a(r)+"\x3c/td\x3e\x3c/tr\x3e"),m)break;p.push("\x3c/tbody\x3e\x3c/table\x3e");return p.join("")},filter:function(f,p,r){p=[e.isString(f)?f.split(""):f,r||g.global,e.isString(p)?
new Function("item","index","array",p):p];r={};var m;f=p[0];for(m in f)p[2].call(p[m],f[m],m,f)&&(r[m]=f[m]);return r},startsWith:function(f,p,r){r=r||0;return f.indexOf(p,r)===r},endsWith:function(f,p,r){if("number"!==typeof r||!isFinite(r)||Math.floor(r)!==r||r>f.length)r=f.length;r-=p.length;f=f.indexOf(p,r);return-1!==f&&f===r},isDefined:k,fixJson:n,clone:b}})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","dojo/string"],function(g,e,t){return function(){function u(l,
q,k){this instanceof u&&(this.name=l,this.message=q&&t.substitute(q,k,function(a){return null==a?"":a})||"",this.details=k)}u.prototype.toString=function(){return"["+this.name+"]: "+this.message};return u}()})},"esri/layers/vectorTiles/core/workers/Connection":function(){define(["require","exports","../promiseUtils"],function(g,e,t){return function(){function u(l){this._clientIdx=0;this._clients=l}u.prototype.broadcast=function(l,q,k){for(var a=[],d=0,n=this._clients;d<n.length;d++)a.push(n[d].invoke(l,
q,k));return a};u.prototype.close=function(){for(var l=0,q=this._clients;l<q.length;l++)q[l].close();this._clients=[]};u.prototype.invoke=function(l,q,k,a){var d=a&&a.client;if(!this._clients||!this._clients.length)return t.reject(Error("Connection closed"));null!=d&&-1!==this._clients.indexOf(d)||this._clients.some(function(n){return n.isBusy()?!1:(d=n,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,d=this._clients[this._clientIdx]);l=d.invoke(l,q,k);a&&(a.client=d);return l};u.prototype.openPorts=
function(){return t.all(this._clients.map(function(l){return l.openPort()}))};return u}()})},"esri/layers/vectorTiles/core/workers/RemoteClient":function(){define("require exports dojo/Deferred ../Error ../promiseUtils ./utils".split(" "),function(g,e,t,u,l,q){function k(f,p){f["delete"](p)}var a=q.MessageType.CLOSE,d=q.MessageType.CANCEL,n=q.MessageType.INVOKE,b=q.MessageType.RESPONSE,h=q.MessageType.OPEN_PORT,c=function(){function f(p){this._timer=null;this._cancelledJobIds=new Set;this._invokeMessages=
[];this._invoke=p;this._timer=null;this._process=this._process.bind(this)}f.prototype.push=function(p){p.type===q.MessageType.CANCEL?this._cancelledJobIds.add(p.jobId):(this._invokeMessages.push(p),null===this._timer&&(this._timer=setTimeout(this._process,0)))};f.prototype.clear=function(){this._invokeMessages.length=0;this._cancelledJobIds.clear();this._timer=null};f.prototype._process=function(){this._timer=null;for(var p=0,r=this._invokeMessages;p<r.length;p++){var m=r[p];this._cancelledJobIds.has(m.jobId)||
this._invoke(m)}this._cancelledJobIds.clear();this._invokeMessages.length=0};return f}();return function(){function f(p,r,m){this._outJobs=new Map;this._inJobs=new Map;this._queue=new c(this._onInvoke.bind(this));this._onMessage=this._onMessage.bind(this);this._client=r;this._port=p;this._port.addEventListener("message",this._onMessage);this._port.start();this._channel=m}f.connect=function(p){var r=new MessageChannel;p="function"===typeof p?new p:"default"in p&&"function"===typeof p.default?new p.default:
p;p.remoteClient=new f(r.port1,p,r);return r.port2};f.prototype.close=function(){this._post({type:a});this._close()};f.prototype.isBusy=function(){return 0<this._outJobs.size};f.prototype.invoke=function(p,r,m){var v=this;if(!this._port)return l.reject(new u("remote-client:port-closed","Can't invoke(), port is closed"));var z=q.newJobId(),A=new t(function(){k(v._outJobs,z);v._post({type:d,jobId:z})});this._outJobs.set(z,A);this._post({type:n,jobId:z,methodName:p},r,m);return A.promise};f.prototype.openPort=
function(){var p=this,r=q.newJobId(),m=new t(function(){k(p._outJobs,r);p._post({type:d,jobId:r})});this._outJobs.set(r,m);this._post({type:h,jobId:r});return m.promise};f.prototype._close=function(){this._channel&&(this._channel=null);this._port.removeEventListener("message",this._onMessage);this._port.close();this._outJobs.forEach(function(p){p.cancel()});this._inJobs.clear();this._outJobs.clear();this._queue.clear();this._port=this._client=null};f.prototype._onMessage=function(p){if(p=q.receiveMessage(p))switch(p.type){case b:this._onResponse(p);
break;case n:this._queue.push(p);break;case d:this._onCancel(p);break;case a:this._close();break;case h:this._onOpenPort(p)}};f.prototype._onCancel=function(p){var r=this._inJobs,m=p.jobId,v=r.get(m);this._queue.push(p);v&&(k(r,m),v.cancel())};f.prototype._onInvoke=function(p){var r=this,m=p.methodName,v=p.jobId;p=p.data;var z=this._inJobs,A=this._client,D=A[m];try{if(!D&&m&&-1!==m.indexOf("."))for(var E=m.split("."),F=0;F<E.length-1;F++)A=A[E[F]],D=A[E[F+1]];if("function"!==typeof D)throw new TypeError(m+
" is not a function");var y=D.call(A,p,this)}catch(x){this._post({type:b,jobId:v,error:q.toInvokeError(x)});return}l.isThenable(y)?(z.set(v,y),y.then(function(x){z.has(v)&&(k(z,v),r._post({type:b,jobId:v},x))}).catch(function(x){z.has(v)&&(k(z,v),x&&"cancel"===x.dojoType||r._post({type:b,jobId:v,error:q.toInvokeError(x||{message:"Error encountered at method "+m})}))})):this._post({type:b,jobId:v},y)};f.prototype._onOpenPort=function(p){var r=new MessageChannel;new f(r.port1,this._client);this._post({type:b,
jobId:p.jobId},r.port2,[r.port2])};f.prototype._onResponse=function(p){var r=p.jobId,m=p.error;p=p.data;var v=this._outJobs;if(v.has(r)){var z=v.get(r);k(v,r);m?z.reject(u.fromJSON(JSON.parse(m))):z.resolve(p)}};f.prototype._post=function(p,r,m){return q.postMessage(this._port,p,r,m)};return f}()})},"esri/layers/vectorTiles/core/workers/utils":function(){define(["require","exports","dojo/has"],function(g,e,t){function u(q){return q&&"object"===typeof q&&("result"in q||"transferList"in q)}Object.defineProperty(e,
"__esModule",{value:!0});(function(q){q[q.HANDSHAKE=0]="HANDSHAKE";q[q.CONFIGURE=1]="CONFIGURE";q[q.CONFIGURED=2]="CONFIGURED";q[q.OPEN=3]="OPEN";q[q.OPENED=4]="OPENED";q[q.RESPONSE=5]="RESPONSE";q[q.INVOKE=6]="INVOKE";q[q.CANCEL=7]="CANCEL";q[q.CLOSE=8]="CLOSE";q[q.OPEN_PORT=9]="OPEN_PORT"})(e.MessageType||(e.MessageType={}));var l=0;e.newJobId=function(){return l++};e.isTranferableResult=u;e.toInvokeError=function(q){return q?q.toJSON?JSON.stringify(q):JSON.stringify({name:q.name,message:q.message,
details:q.details,stack:q.stack}):null};e.postMessage=function(q,k,a,d){2===arguments.length||void 0===a&&void 0===d?q.postMessage(k):(t("esri-workers-supports-transfer-arraybuffer")||(d?(d=d.filter(function(n){return!(n instanceof ArrayBuffer)}),d.length||(d=null)):u(a)&&a.transferList&&(a.transferList=a.transferList.filter(function(n){return!(n instanceof ArrayBuffer)}),a.transferList.length||(a.transferList=null))),d?(k.data=a,q.postMessage(k,d)):u(a)?(k.data=a.result,a.transferList?q.postMessage(k,
a.transferList):q.postMessage(k)):(k.data=a,q.postMessage(k)))};e.receiveMessage=function(q){return q?(q=q.data)?"string"===typeof q?JSON.parse(q):q:null:null}})},"esri/layers/vectorTiles/core/workers/WorkerOwner":function(){define("require exports dojo/Deferred ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),function(g,e,t,u,l,q,k,a,d){var n=q.getLogger("esri.core.workers"),b=a.MessageType.CANCEL,h=a.MessageType.INVOKE,c=a.MessageType.OPEN,f=a.MessageType.OPENED,
p=a.MessageType.RESPONSE;return function(){function r(m,v){this._outJobs=new Map;this._inJobs=new Map;this.worker=m;this.id=v;m.addEventListener("message",this._onMessage.bind(this));m.addEventListener("error",function(z){z.preventDefault();n.error(z)})}r.create=function(m){return d.createWorker().then(function(v){return new r(v,m)})};r.prototype.terminate=function(){this.worker.terminate()};r.prototype.open=function(m){var v=this,z=a.newJobId(),A=new t(function(D){v._outJobs["delete"](z);v._post({type:b,
jobId:z})});this._outJobs.set(z,A);this._post({type:c,jobId:z,modulePath:m});return A.promise};r.prototype._onMessage=function(m){if(m=a.receiveMessage(m))switch(m.type){case f:case p:this._onResponse(m);break;case b:this._onCancel(m);break;case h:this._onInvoke(m)}};r.prototype._onCancel=function(m){(m=this._inJobs.get(m.jobId))&&m.cancel()};r.prototype._onInvoke=function(m){var v=this,z=m.methodName,A=m.jobId;m=m.data;var D=this._inJobs,E=u.workerMessages[z];try{if("function"!==typeof E)throw new TypeError(z+
" is not a function");var F=E.call(null,m)}catch(y){this._post({type:p,jobId:A,error:a.toInvokeError(y)});return}k.isThenable(F)?(D.set(A,F),F.then(function(y){D["delete"](A);v._post({type:p,jobId:A},y)}).catch(function(y){D["delete"](A);y||(y={message:"Error encountered at method"+z});y.dojoType&&"cancel"===y.dojoType||v._post({type:p,jobId:A,error:a.toInvokeError(y)})})):this._post({type:p,jobId:A},F)};r.prototype._onResponse=function(m){var v=m.jobId,z=m.error;m=m.data;var A=this._outJobs.get(v);
A&&(this._outJobs["delete"](v),z?A.reject(l.fromJSON(JSON.parse(z))):A.resolve(m))};r.prototype._post=function(m,v,z){return a.postMessage(this.worker,m,v,z)};return r}()})},"esri/layers/vectorTiles/kernel":function(){define(["require","exports","esri/kernel","./identity/IdentityManager"],function(g,e,t,u){return function(){function l(){}Object.defineProperty(l,"id",{get:function(){return t.id?u:null},enumerable:!0,configurable:!0});l.workerMessages={};return l}()})},"esri/layers/vectorTiles/identity/IdentityManager":function(){define(["require",
"exports","esri/IdentityManager"],function(g,e,t){Object.defineProperty(e,"__esModule",{value:!0});e.findCredential=function(u){return t.findCredential(u)}})},"esri/layers/vectorTiles/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper dojo/_base/kernel ../../config ../../request ../Logger ../promiseUtils ../sniff ../urlUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),function(g,e,t,u,l,q,k,a,d,n,b,h,c){function f(E){return a.create(function(F){function y(w){if(w=
h.receiveMessage(w))switch(w.type){case D:w=E;var C=l.workers.loaderUrl||b.DEFAULT_LOADER_URL;if(null!=l["default"]){var B=t({},l);delete B["default"];B=JSON.parse(JSON.stringify(B))}else B=JSON.parse(JSON.stringify(l));var I=l.workers.loaderConfig;I=b.default({baseUrl:I.baseUrl,locale:u.locale,has:t({"config-deferredInstrumentation":0,"dojo-test-sniff":0,"esri-cors":1,"esri-secure-context":d("esri-secure-context"),"esri-workers-supports-transfer-arraybuffer":d("esri-workers-supports-transfer-arraybuffer"),
"events-keypress-typed":0,"host-webworker":1},I.has),map:t({},I.map),paths:t({},I.paths),packages:I.packages||[]});w.postMessage({type:A,configure:{esriConfig:B,loaderUrl:C,loaderConfig:I}});break;case z:E.removeEventListener("message",y),E.removeEventListener("error",x),F(E)}}function x(w){w.preventDefault();E.removeEventListener("message",y);E.removeEventListener("error",x);m.warn("Failed to create Worker. Fallback to execute module in main thread",w);E=new c;E.addEventListener("message",y);E.addEventListener("error",
x)}E.addEventListener("message",y);E.addEventListener("error",x)})}Object.defineProperty(e,"__esModule",{value:!0});var p=n.normalize(g.toUrl("./worker.js")),r=!n.hasSameOrigin(p,location.href),m=k.getLogger("esri.core.workers"),v=null,z=h.MessageType.CONFIGURED,A=h.MessageType.CONFIGURE,D=h.MessageType.HANDSHAKE;e.createWorker=function(){if(!d("esri-workers"))return f(new c);if(!r){var E=void 0;try{E=new Worker(p)}catch(F){m.warn("Failed to create Worker. Fallback to execute module in main thread",
event),E=new c}return f(E)}v||(v=q(p,{responseType:"text"}));return v.then(function(F){return new Worker(URL.createObjectURL(new Blob([F.data],{type:"text/javascript"})))}).catch(function(F){m.warn("Failed to create Worker. Fallback to execute module in main thread",F);return new c}).then(function(F){return f(F)})}})},"esri/layers/vectorTiles/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(g){for(var e,t=1,u=arguments.length;t<u;t++){e=arguments[t];for(var l in e)Object.prototype.hasOwnProperty.call(e,
l)&&(g[l]=e[l])}return g}})},"esri/layers/vectorTiles/config":function(){define(["require","exports","esri/config"],function(g,e,t){Object.defineProperty(t,"workers",{get:function(){return t.defaults.workers},set:function(u){return t.defaults.workers=u}});return t})},"esri/layers/vectorTiles/request":function(){define(["require","exports","esri/request","dojo/_base/lang","dojo/Deferred"],function(g,e,t,u,l){return function(q,k){q=u.mixin({},{url:q,failOk:!0},k);"array-buffer"===k.responseType?(q.handleAs=
"arraybuffer",delete q.responseType):k.responseType&&(q.handleAs=k.responseType,delete q.responseType);null!==k.query&&(q.content=q.query,delete q.query);if(k.hasOwnProperty("allowImageDataAccess")){var a={allowImageDataAccess:k.allowImageDataAccess};delete q.allowImageDataAccess}var d=new l(function(){n.isFulfilled()||n.cancel()});var n=t(q,a).then(function(b){d.resolve({data:b})}).catch(function(b){b&&null!=b.httpCode&&(b.details=b.details||{},b.details.httpStatus=b.httpCode);d.reject(b)});return d.promise}})},
"esri/layers/vectorTiles/core/sniff":function(){define(["require","exports","dojo/sniff","./global","../views/webgl/context-util"],function(g,e,t,u,l){function q(){var n={available:!1,version:0,majorPerformanceCaveat:!1,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1},b=document.createElement("canvas");if(!b)return n;var h=l.createContext(b,{failIfMajorPerformanceCaveat:!0},"webgl");!h&&(h=l.createContext(b,{},"webgl"))&&
(n.majorPerformanceCaveat=!0);if(!h)return n;b=h.getParameter(h.VERSION);if(!b)return n;if(b=b.match(/^WebGL\s+([\d.]*)/))n.version=parseFloat(b[1]),n.available=.94<=n.version,b=h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.HIGH_FLOAT),n.supportsHighPrecisionFragment=b&&0<b.precision,n.supportsVertexShaderSamplers=0<h.getParameter(h.MAX_VERTEX_TEXTURE_IMAGE_UNITS),n.supportsElementIndexUint=null!==h.getExtension("OES_element_index_uint"),n.supportsStandardDerivatives=null!==h.getExtension("OES_standard_derivatives");
return n}function k(){var n={available:!1,version:0},b=document.createElement("canvas");if(!b)return n;b=l.createContext(b,{},"webgl2");if(!b)return n;n.available=!0;b=b.getParameter(b.VERSION);if(!b)return n;if(b=b.match(/^WebGL\s+([\d.]*)/))n.version=parseFloat(b[1]);return n}(function(){var n=navigator.userAgent,b=n.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i);n=n.match(/iPhone/i);b&&t.add("esri-mobile",b);n&&t.add("esri-iPhone",n);t.add("esri-phonegap",!!u.cordova);
t.add("esri-cors",t("esri-phonegap")||"XMLHttpRequest"in u&&"withCredentials"in new XMLHttpRequest);t.add("esri-geolocation",function(){return!!navigator.geolocation});t.add("esri-canvas-svg-support",function(){return!(t("trident")||t("ie"))});t.add("esri-secure-context",function(){if("isSecureContext"in u)return u.isSecureContext;if(u.location&&u.location.origin)return 0===u.location.origin.indexOf("https:")});t.add("esri-wasm","WebAssembly"in u);t("host-webworker")||(t.add("esri-workers","Worker"in
u),t.add("esri-script-sandbox",function(){return"MessageChannel"in u&&"HTMLIFrameElement"in u&&"sandbox"in HTMLIFrameElement.prototype}),t.add("esri-url-encodes-apostrophe",function(){var h=u.document.createElement("a");h.href="?'";return-1<h.href.indexOf("?%27")}),a||(a=q()),t.add("esri-webgl",a.available),t.add("esri-webgl-high-precision-fragment",a.supportsHighPrecisionFragment),t.add("esri-webgl-vertex-shader-samplers",a.supportsVertexShaderSamplers),t.add("esri-webgl-element-index-uint",a.supportsElementIndexUint),
t.add("esri-webgl-standard-derivatives",a.supportsStandardDerivatives),t.add("esri-webgl-major-performance-caveat",a.majorPerformanceCaveat),t.add("esri-featurelayer-webgl-labeling",!0),d||(d=k()),t.add("esri-webgl2",d.available))})();var a=null,d=null;return t})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(g,e){return function(){if("undefined"!==typeof global)return global;if("undefined"!==typeof window)return window;if("undefined"!==typeof self)return self}()})},
"esri/layers/vectorTiles/views/webgl/context-util":function(){define(["require","exports"],function(g,e){function t(k,a,d){void 0===a&&(a={});switch(d){case "webgl":var n=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case "webgl2":n=["webgl2"];break;default:n=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}d=null;for(var b=0;b<n.length;b++){var h=n[b];try{d=k.getContext(h,a)}catch(c){}if(d)break}return d}function u(k,a){(k=k.parentNode)&&(k.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
a+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}Object.defineProperty(e,"__esModule",{value:!0});e.createContextOrErrorHTML=function(k,a,d){void 0===a&&(a={});if(!window.WebGLRenderingContext)return u(k,l),null;a=t(k,a,d);return a?a:(u(k,q),null)};e.createContext=t;var l='This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e',q='It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'})},
"esri/layers/vectorTiles/core/urlUtils":function(){define(["require","exports","esri/urlUtils","dojo/_base/url"],function(g,e,t,u){function l(A){return t.normalize(A)}function q(A){return"data:"===A.slice(0,5)}function k(A){return a(A)||v.test(A)}function a(A){return A&&"/"===A[0]&&"/"===A[1]}function d(A){return t.urlToObject(A)}function n(A){if("string"===typeof A)return new u(h(A));A.scheme||(A.scheme=e.appUrl.scheme);return A}function b(A){if(q(A))return null;var D=A.indexOf("://");if(-1===D&&
a(A))D=2;else if(-1!==D)D+=3;else return null;D=A.indexOf("/",D);return-1===D?A:A.slice(0,D)}function h(A,D,E){void 0===D&&(D=e.appBaseUrl);if(a(A))return E&&E.preserveProtocolRelative?A:"http"===e.appUrl.scheme&&e.appUrl.authority===b(A).slice(2)?"http:"+A:"https:"+A;if(v.test(A))return A;E=f;if("/"===A[0]){var F=D.indexOf("//");F=D.indexOf("/",F+2);D=-1===F?D:D.slice(0,F)}return E(D,A)}function c(A,D,E){void 0===E&&(E=!1);A=n(A);D=n(D);return E||A.scheme===D.scheme?A.host.toLowerCase()===D.host.toLowerCase()&&
A.port===D.port:!1}function f(){for(var A=[],D=0;D<arguments.length;D++)A[D]=arguments[D];if(A&&A.length){D=[];if(k(A[0])){var E=A[0],F=E.indexOf("//");D.push(E.slice(0,F+1));m.test(A[0])&&(D[0]+="/");A[0]=E.slice(F+2)}else"/"===A[0][0]&&D.push("");A=A.reduce(function(y,x){return x?y.concat(x.split("/")):y},[]);for(E=0;E<A.length;E++)F=A[E],".."===F&&0<D.length?D.pop():!F||"."===F&&0!==D.length||D.push(F);return D.join("/")}}function p(A,D,E){if(!(D&&E&&A&&k(A)))return A;var F=A.indexOf("//"),y=A.indexOf("/",
F+2),x=A.indexOf(":",F+2);y=Math.min(0>y?A.length:y,0>x?A.length:x);if(A.slice(F+2,y).toLowerCase()!==D.toLowerCase())return A;D=A.slice(0,F+2);A=A.slice(y);return""+D+E+A}function r(A,D,E){void 0===D&&(D=e.appBaseUrl);if(!k(A))return A;var F=l(A),y=F.toLowerCase();D=l(D).toLowerCase().replace(/\/+$/,"");if((E=E?l(E).toLowerCase().replace(/\/+$/,""):null)&&0!==D.indexOf(E))return A;for(var x=function(B,I,N){N=B.indexOf(I,N);return-1===N?B.length:N},w=x(y,"/",y.indexOf("//")+2),C=-1;y.slice(0,w+1)===
D.slice(0,w)+"/";){C=w+1;if(w===y.length)break;w=x(y,"/",w+1)}if(-1===C||E&&C<E.length)return A;A=F.slice(C);F=D.slice(C-1).replace(/[^/]+/g,"").length;if(0<F)for(y=0;y<F;y++)A="../"+A;else A="./"+A;return A}Object.defineProperty(e,"__esModule",{value:!0});e.normalize=l;e.canUseXhr=function(A){return t.canUseXhr(A)};e.removeTrailingSlash=function(A){return A.replace(/\/+$/,"")};g=Function("return this")();e.appUrl=new u(g.location);e.appBaseUrl=function(){var A=e.appUrl.path;A=A.substring(0,A.lastIndexOf(A.split("/")[A.split("/").length-
1]));return e.appUrl.scheme+"://"+e.appUrl.host+(null!=e.appUrl.port?":"+e.appUrl.port:"")+A}();var m=/^\s*file:/i,v=/^\s*[a-z][a-z0-9-+.]*:[^0-9]/i;e.isDataProtocol=q;e.isAbsolute=k;e.isProtocolRelative=a;e.urlToObject=d;e.getOrigin=b;e.makeAbsolute=h;e.hasSameOrigin=c;e.join=f;e.removeFile=function(A){var D=0;if(k(A)){var E=A.indexOf("//");-1!==E&&(D=E+2)}E=A.lastIndexOf("/");return E<D?A:A.slice(0,E+1)};e.addProxy=function(A){return t.addProxy(A)};e.makeData=function(A){return A.isBase64?"data:"+
A.mediaType+";base64,"+A.data:"data:"+A.mediaType+","+A.data};var z=/^data:(.*?)(;base64)?,(.*)$/;e.dataComponents=function(A){return(A=A.match(z))?{mediaType:A[1],isBase64:!!A[2],data:A[3]}:null};e.changeDomain=p;e.read=function(A,D){var E=D&&D.url&&D.url.path;A&&E&&(A=h(A,E,{preserveProtocolRelative:!0}));(D=D&&D.portal)&&!D.isPortal&&D.urlKey&&D.customBaseUrl?(E=D.urlKey+"."+D.customBaseUrl,D=c(e.appUrl,e.appUrl.scheme+"://"+E)?p(A,D.portalHostname,E):p(A,E,D.portalHostname)):D=A;return D};e.write=
function(A,D){if(!A)return A;!k(A)&&D&&D.blockedRelativeUrls&&D.blockedRelativeUrls.push(A);var E=h(A);if(D){var F=D.verifyItemRelativeUrls&&D.verifyItemRelativeUrls.rootPath||D.url&&D.url.path;F&&(E=r(E,F,F),E!==A&&D.verifyItemRelativeUrls&&D.verifyItemRelativeUrls.writtenUrls.push(E))}A=E;E=(D=D&&D.portal)&&!D.isPortal&&D.urlKey&&D.customBaseUrl?p(A,D.urlKey+"."+D.customBaseUrl,D.portalHostname):A;return E};e.makeRelative=r;e.removeQueryParameters=function(A){A=d(A);Object.keys(A.query||{});return A.path}})},
"esri/layers/vectorTiles/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper","dojo/has","../urlUtils"],function(g,e,t,u,l){Object.defineProperty(e,"__esModule",{value:!0});e.DEFAULT_LOADER_URL=l.makeAbsolute(l.removeQueryParameters(g.toUrl("./worker-init.js")));e.DEFAULT_CONFIG={baseUrl:function(){var q=l.removeQueryParameters(g.toUrl("dojo/x.js"));return l.makeAbsolute(q.slice(0,q.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},
{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},{name:"globalize",main:"dist/globalize"},{name:"maquette",main:"dist/maquette.umd"},{name:"maquette-css-transitions",main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}};e.default=
function(q){var k={async:q.async,isDebug:q.isDebug,locale:q.locale,baseUrl:q.baseUrl,has:t({},q.has),map:t({},q.map),packages:q.packages&&q.packages.concat()||[],paths:t({},q.paths)};q.hasOwnProperty("async")||(k.async=!0);q.hasOwnProperty("isDebug")||(k.isDebug=!1);q.baseUrl||(k.baseUrl=e.DEFAULT_CONFIG.baseUrl);e.DEFAULT_CONFIG.packages.forEach(function(b){a:{for(var h=k.packages,c=0;c<h.length;c++)if(h[c].name===b.name)break a;b=t({},b);c=l.removeQueryParameters(g.toUrl(b.name+"/x.js"));c=c.slice(0,
c.length-5);b.location=l.makeAbsolute(c);h.push(b)}});q=k.map=k.map||{};for(var a=0,d=Object.keys(e.DEFAULT_CONFIG.map);a<d.length;a++){var n=d[a];q[n]||(q[n]=e.DEFAULT_CONFIG.map[n])}return k}})},"esri/layers/vectorTiles/core/workers/WorkerFallback":function(){define(["require","exports","dojo/has","../global","./utils"],function(g,e,t,u,l){var q=function(){return function(){var d=this,n=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(b){d[b]=
function(){for(var h=[],c=0;c<arguments.length;c++)h[c]=arguments[c];return n[b].apply(n,h)}})}}(),k=u.MutationObserver||u.WebKitMutationObserver,a=function(){if(u.process&&u.process.nextTick)var d=function(h){u.process.nextTick(h)};else if(u.Promise)d=function(h){u.Promise.resolve().then(h)};else if(k){var n=[],b=document.createElement("div");(new k(function(){for(;0<n.length;)n.shift()()})).observe(b,{attributes:!0});d=function(h){n.push(h);b.setAttribute("queueStatus","1")}}return d}();return function(){function d(){this._dispatcher=
new q;this._isInitialized=!1;this._workerPostMessage({type:l.MessageType.HANDSHAKE})}d.prototype.terminate=function(){};Object.defineProperty(d.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(n){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=n)&&this.addEventListener("message",n)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(n){this._onerrorHandler&&
this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=n)&&this.addEventListener("error",n)},enumerable:!0,configurable:!0});d.prototype.postMessage=function(n,b){var h=this;a(function(){h._workerMessageHandler(new MessageEvent("message",{data:n}))})};d.prototype.dispatchEvent=function(n){return this._dispatcher.dispatchEvent(n)};d.prototype.addEventListener=function(n,b,h){this._dispatcher.addEventListener(n,b,h)};d.prototype.removeEventListener=function(n,b,h){this._dispatcher.removeEventListener(n,
b,h)};d.prototype._workerPostMessage=function(n,b){var h=this;a(function(){h.dispatchEvent(new MessageEvent("message",{data:n}))})};d.prototype._workerMessageHandler=function(n){var b=this;if(n=l.receiveMessage(n)){var h=n.jobId;switch(n.type){case l.MessageType.CONFIGURE:this._isInitialized||this._workerPostMessage({type:l.MessageType.CONFIGURED});break;case l.MessageType.OPEN:n=n.modulePath,t("esri-webpack")?g(["esri/core/workers/RemoteClient","esri/views/vectorTiles/WorkerTileHandler","esri/views/2d/layers/features/Pipeline",
"esri/views/3d/layers/PointCloudWorker","esri/views/3d/layers/SceneLayerWorker","esri/layers/graphics/sources/support/CSVSourceWorker","esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker",n],function(c,f,p,r,m,v,z,A){switch(A){case "esri/views/vectorTiles/WorkerTileHandler":break;case "esri/views/2d/layers/features/Pipeline":f=p;break;case "esri/views/3d/layers/PointCloudWorker":f=r;break;case "esri/views/3d/layers/SceneLayerWorker":f=m;break;case "esri/layers/graphics/sources/support/CSVSourceWorker":f=
v;break;case "esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker":f=z;break;default:f=A}c=c.connect(f);b._workerPostMessage({type:l.MessageType.OPENED,jobId:h,data:c})}):g(["./RemoteClient",n],function(c,f){c=c.connect(f);b._workerPostMessage({type:l.MessageType.OPENED,jobId:h,data:c})})}}};return d}()})},"esri/layers/vectorTiles/core/requireUtils":function(){define(["require","exports","dojo/Deferred"],function(g,e,t){function u(l,q){if(Array.isArray(q)){var k=new t;l(q,function(){for(var a=
[],d=0;d<arguments.length;d++)a[d]=arguments[d];k.resolve(a)});return k.promise}return u(l,[q]).then(function(a){return a[0]})}Object.defineProperty(e,"__esModule",{value:!0});e.when=u;e.getAbsMid=function(l,q,k){return q.toAbsMid?q.toAbsMid(l):k.id.replace(/\/[^\/]*$/gi,"/")+l}})},"esri/layers/rasterLib/function/rasterFunctionHelper":function(){define(["dojo/_base/declare","dojo/_base/lang","./rasterFunctionRegistry"],function(g,e,t){return{create:function(u,l){if(u){var q=u.renderTexture,k=Object.keys(u);
if(u.read&&!l)return u;u.read&&l&&(u=u.toJson());-1<k.indexOf("name")&&k.indexOf(!1)?(u=e.mixin({},u),l=this._parseV2(u,l)):(u="esri.layers.RasterFunction"===u.declaredClass?u.toJson():e.mixin({},u),l=this._parseV1(u,l));l.branchCount=l.updateBranchStructure();l.renderTexture||(l.renderTexture=!!q);return l}},_parseV1:function(u,l){var q=u.rasterFunction,k=u.rasterFunctionArguments,a=u.renderTexture||u.rasterFunctionArguments.renderTexture||!1,d,n,b,h,c,f,p;(h=k.raster||k.Raster)&&h.rasterFunction&&
(d=this._parseV1(h,l));(h=k.raster2||k.Raster2)&&h.rasterFunction&&(n=this._parseV1(h,l));(h=k.rasters||k.Rasters)&&0<h.length&&(b=h.map(e.hitch(this,function(r){return r&&r.rasterFunction?this._parseV1(r,l):r})));(h=k.dem||k.DEM)&&(h.functionName||h.rasterFunction)&&(c=this._parseV1(h,l));(h=k.fillRaster||k.FillRaster)&&(h.functionName||h.rasterFunction)&&(f=this._parseV1(h,l));h=t.functions[q];if(!h)return null;q=new h(k);q.variableName&&(h=k[q.variableName])&&(h.functionName||h.rasterFunction)&&
(p=this._parseV1(h,l));u.outputPixelType&&(q.pixelType=u.outputPixelType);"$$"===d?q.functionArguments.raster=l&&l.raster:null!=d?q.functionArguments.raster=d:q.functionArguments.raster||(q.functionArguments.raster=l&&l.raster);null!=n&&(q.functionArguments.raster2=n);null!=b&&(q.functionArguments.rasters=b.map(function(r){"$$"===r&&(r=l&&l.raster);return r}));null!=c&&(q.functionArguments.dem=c);null!=f&&(q.functionArguments.fillRaster=f);null!=p&&(q.functionArguments[q.variableName]=p);q.renderTexture=
a;return q},_parseV2:function(u,l){if(!u)return null;u=e.clone(u);this._bindV2Args(u,l);var q={};this._convertTov1(u,q);return this._parseV1(q,l)},_bindV2Args:function(u,l){(u||l)&&Object.keys(u).forEach(function(q){u[q]["function"]&&u[q].arguments?this._bindV2Args(u[q].arguments,l):null!=l[u[q].name]&&(u[q].value=l[u[q].name])}.bind(this))},_convertV2Types:function(u){if(!u)return null;"ArgumentArray"===u.type?u.elements&&"RasterStatistics"===u.elements[0].type&&(u=u.elements):u instanceof Array&&
0===u.length&&(u=null);return u},_convertTov1:function(u,l){if((u||l)&&u["function"]){var q=u["function"],k=u.arguments;l.rasterFunction=q.type.replace("Function","");l.outputPixelType="UNKNOWN"===q.pixelType?"Unknown":q.pixelType;l.rasterFunctionArguments={};var a;Object.keys(k).forEach(function(d){k[d]["function"]&&k[d].arguments?(l.rasterFunctionArguments[d]={},this._convertTov1(k[d],l.rasterFunctionArguments[d])):(a=k[d].value,l.rasterFunctionArguments[d]="object"!==typeof a||a.functionArguments?
a:this._convertV2Types(a))}.bind(this))}}}})},"esri/layers/rasterLib/function/rasterFunctionRegistry":function(){define("dojo/_base/declare dojo/_base/lang ../../rasterLib/function/AspectFunction ../../rasterLib/function/BandArithmeticFunction ../../rasterLib/function/ColormapFunction ../../rasterLib/function/CompositeBandFunction ../../rasterLib/function/ContrastBrightnessFunction ../../rasterLib/function/ConvolutionFunction ../../rasterLib/function/ExtractBandFunction ../../rasterLib/function/HillshadeFunction ../../rasterLib/function/LocalFunction ../../rasterLib/function/MaskFunction ../../rasterLib/function/NDVIFunction ../../rasterLib/function/SlopeFunction ../../rasterLib/function/StretchFunction ../../rasterLib/function/RemapFunction ../../rasterLib/function/IdentityFunction ../../rasterLib/function/ResampleFunction".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h,c,f,p,r,m,v){return function(){function z(F){F.prototype.supportWebGL&&(D[F.prototype.functionName]=F);F.prototype.support2D&&(A[F.prototype.functionName]=F);E[F.prototype.functionName]=F}var A={},D={},E={};z(t);z(u);z(l);z(q);z(k);z(a);z(d);z(n);z(b);z(h);z(c);z(f);z(p);z(r);z(m);z(v);return{cpu:A,gpu:D,functions:E,register:z,getFunction:function(F){return E[F]},support:function(F,y){return!!("gpu"===y?D:"cpu"===y?A:E)[F]}}}()})},"esri/layers/rasterLib/function/AspectFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../../WKIDUnitConversion ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./surfaceUtils".split(" "),
function(g,e,t,u,l,q,k,a){return g([t,k],{declaredClass:"esri.layers.rasterLib.function.AspectFunction",functionName:"Aspect",supportWebGL:!0,support2D:!0,constructor:function(d){this.functionArguments=this.mixinIgnoreCase({raster:null},d)},bind:function(){var d=this.getSourceRasterInfo();if(!d.raster)return Error("The raster input to aspect function is invalid.");this.rasterInfo=e.mixin(d.raster,{bandCount:1,pixelType:this._calculatePixelType(this.pixelType,"F32"),statistics:[{min:0,max:360}],histograms:null});
this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(d){this._performance.start();d=a.aspect(d.raster);this._addPerformanceMetric(this._performance.elapsed());return d},readGL:function(d){this._performance.start();this._initializeProgram({fragment:q.aspect,fragmentName:"Aspect"});var n=this._setupTextureData(d.raster),b=this.bindFrameBuffer(),h=this.gl,c=h.drawingBufferWidth;h=h.drawingBufferHeight;var f=n.extent;
this._setUniforms({u_resolution:d&&d.raster&&d.raster.pixelBlock?[1/d.raster.pixelBlock.width,1/d.raster.pixelBlock.height]:[1/c,1/h],u_cellSize:[(f.xmax-f.xmin)/c,(f.ymax-f.ymin)/h]});this._bindTexture(n.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:n.extent,texture:b.texture}}})})},"esri/layers/rasterLib/function/surfaceUtils":function(){define(["dojo/_base/lang"],function(g){return{hillshade:function(e,t){if(null!==e&&null!==e.pixelBlock&&
null!==e.pixelBlock.pixels){var u=this._clonePixelBlock(e.pixelBlock),l=t.altitude,q=t.azimuth,k=t.zFactor,a=t.psPower,d=t.psFactor,n=t.hillshadeType,b=t.slopeType,h=t.isGCS;1===n&&(k*=2);t=u.width;var c=u.height,f=u.pixels[0],p=u.mask,r=new Uint8Array(t*c);p&&r.set(p);var m=new Uint8Array(t*c),v=(e.extent.xmax-e.extent.xmin)/t,z=(e.extent.ymax-e.extent.ymin)/c,A=k/(8*v),D=k/(8*z);.001<k&&h&&(A/=111E3,D/=111E3);3===b&&(h?(A=111E3*v,D=111E3*z,A=(k+Math.pow(A,a)*d)/(8*A),D=(k+Math.pow(D,a)*d)/(8*D)):
(A=(k+Math.pow(v,a)*d)/(8*v),D=(k+Math.pow(z,a)*d)/(8*z)));h=(90-l)*Math.PI/180;l=Math.cos(h);var E=(360-q+90)*Math.PI/180;q=Math.sin(h)*Math.cos(E);h=Math.sin(h)*Math.sin(E);k=[];a=[];d=[];v=[315,270,225,360,180,0];var F=[60,60,60,60,60,90];b=[3,5,3,2,1,4];var y=b.reduce(function(ca,J){return ca+J});z=b.map(function(ca){return ca/y});if(1===n){var x=v.length;for(b=0;b<x;b++)l=F[b],q=v[b],h=(90-l)*Math.PI/180,l=Math.cos(h),E=(360-q+90)*Math.PI/180,q=Math.sin(h)*Math.cos(E),h=Math.sin(h)*Math.sin(E),
k.push(l),a.push(q),d.push(h)}var w=0;for(b=1;b<c-1;b++)for(F=b*t,v=1;v<t-1;v++)if(p&&!p[F+v])m[F+v]=0;else{E=0;if(p&&(E=p[F-t+v-1]+p[F-t+v]+p[F-t+v+1]+p[F+v-1]+p[F+v+1]+p[F+t+v-1]+p[F+t+v]+p[F+t+v+1],7>E)){m[F+v]=0;r[F+v]=0;continue}if(7===E){var C=p[F-t+v-1]?f[F-t+v-1]:f[F+v];var B=p[F-t+v]?f[F-t+v]:f[F+v];var I=p[F-t+v+1]?f[F-t+v+1]:f[F+v];E=p[F+v-1]?f[F+v-1]:f[F+v];var N=p[F+v+1]?f[F+v+1]:f[F+v];w=p[F+t+v-1]?f[F+t+v-1]:f[F+v];var V=p[F+t+v]?f[F+t+v]:f[F+v];var Y=p[F+t+v+1]?f[F+t+v+1]:f[F+v]}else C=
f[F-t+v-1],B=f[F-t+v],I=f[F-t+v+1],E=f[F+v-1],N=f[F+v+1],w=f[F+t+v-1],V=f[F+t+v],Y=f[F+t+v+1];E=(I+N+N+Y-(C+E+E+w))*A;B=(w+V+V+Y-(C+B+B+I))*D;I=Math.sqrt(1+E*E+B*B);w=0;if(0===n)V=h*B-q*E,V=255*(l+V)/I,0>V&&(V=0),w=V;else if(1===n)for(C=0;C<x;C++)V=d[C]*B-a[C]*E,V=255*(k[C]+V)/I,0>V&&(V=0),w+=V*z[C];m[F+v]=w}for(b=0;b<c;b++)m[b*t]=m[b*t+1],m[(b+1)*t-1]=m[(b+1)*t-2];for(b=1;b<t-1;b++)m[b]=m[b+t],m[b+(c-1)*t]=m[b+(c-2)*t];u.pixelType="U8";u.pixels=[m];u.statistics=[{minValue:0,maxValue:255}];p&&(u.mask=
r);return{extent:e.extent,pixelBlock:u}}},slope:function(e,t){if(null!==e&&null!==e.pixelBlock&&null!==e.pixelBlock.pixels){var u=this._clonePixelBlock(e.pixelBlock),l=t.zFactor,q=t.psPower,k=t.psFactor,a=t.slopeType,d=t.isGCS;t=u.width;var n=u.height,b=u.pixels[0],h=u.mask,c=new Uint8Array(t*n);h&&c.set(h);var f=new Float32Array(t*n),p=(e.extent.xmax-e.extent.xmin)/t,r=(e.extent.ymax-e.extent.ymin)/n,m=l/(8*p),v=l/(8*r);1E-4>Math.abs(l-1)&&d&&(m/=111E3,v/=111E3);3===a&&(d?(m=111E3*p,v=111E3*r,m=
(l+Math.pow(m,q)*k)/(8*m),v=(l+Math.pow(v,q)*k)/(8*v)):(m=(l+Math.pow(p,q)*k)/(8*p),v=(l+Math.pow(r,q)*k)/(8*r)));for(l=1;l<n-1;l++)for(k=l*t,q=1;q<t-1;q++)if(h&&!h[k+q])f[k+q]=0;else{r=0;if(h&&(r=h[k-t+q-1]+h[k-t+q]+h[k-t+q+1]+h[k+q-1]+h[k+q+1]+h[k+t+q-1]+h[k+t+q]+h[k+t+q+1],7>r)){f[k+q]=0;c[k+q]=0;continue}if(7===r){r=h[k-t+q-1]?b[k-t+q-1]:b[k+q];d=h[k-t+q]?b[k-t+q]:b[k+q];p=h[k-t+q+1]?b[k-t+q+1]:b[k+q];var z=h[k+q-1]?b[k+q-1]:b[k+q];var A=h[k+q+1]?b[k+q+1]:b[k+q];var D=h[k+t+q-1]?b[k+t+q-1]:b[k+
q];var E=h[k+t+q]?b[k+t+q]:b[k+q];var F=h[k+t+q+1]?b[k+t+q+1]:b[k+q]}else r=b[k-t+q-1],d=b[k-t+q],p=b[k-t+q+1],z=b[k+q-1],A=b[k+q+1],D=b[k+t+q-1],E=b[k+t+q],F=b[k+t+q+1];z=(p+A+A+F-(r+z+z+D))*m;r=(D+E+E+F-(r+d+d+p))*v;r=Math.sqrt(z*z+r*r);f[k+q]=1===a||3===a?57.2957795*Math.atan(r):100*r}for(l=0;l<n;l++)f[l*t]=f[l*t+1],f[(l+1)*t-1]=f[(l+1)*t-2];for(l=1;l<t-1;l++)f[l]=f[l+t],f[l+(n-1)*t]=f[l+(n-2)*t];u.pixelType="F32";u.pixels=[f];u.statistics=[{minValue:0,maxValue:255}];h&&(u.mask=c);return{extent:e.extent,
pixelBlock:u}}},aspect:function(e){if(null!==e&&null!==e.pixelBlock&&null!==e.pixelBlock.pixels){var t=this._clonePixelBlock(e.pixelBlock),u=t.width,l=t.height,q=t.pixels[0],k=t.mask,a=new Uint8Array(u*l);k&&a.set(k);var d=new Float32Array(u*l),n=1/((e.extent.xmax-e.extent.xmin)/u),b=1/((e.extent.ymax-e.extent.ymin)/l),h,c;for(h=1;h<l-1;h++){var f=h*u;for(c=1;c<u-1;c++)if(k&&!k[f+c])d[f+c]=0;else{var p=0;if(k&&(p=k[f-u+c-1]+k[f-u+c]+k[f-u+c+1]+k[f+c-1]+k[f+c+1]+k[f+u+c-1]+k[f+u+c]+k[f+u+c+1],7>p)){d[f+
c]=0;a[f+c]=0;continue}if(7===p){p=k[f-u+c-1]?q[f-u+c-1]:q[f+c];var r=k[f-u+c]?q[f-u+c]:q[f+c];var m=k[f-u+c+1]?q[f-u+c+1]:q[f+c];var v=k[f+c-1]?q[f+c-1]:q[f+c];var z=k[f+c+1]?q[f+c+1]:q[f+c];var A=k[f+u+c-1]?q[f+u+c-1]:q[f+c];var D=k[f+u+c]?q[f+u+c]:q[f+c];var E=k[f+u+c+1]?q[f+u+c+1]:q[f+c]}else p=q[f-u+c-1],r=q[f-u+c],m=q[f-u+c+1],v=q[f+c-1],z=q[f+c+1],A=q[f+u+c-1],D=q[f+u+c],E=q[f+u+c+1];v=(m+z+z+E-(p+v+v+A))*n;p=(A+D+D+E-(p+r+r+m))*b;0===v&&0===p?p=-1:(p=90-57.29578*Math.atan2(p,-v),0>p&&(p+=
360),360===p?p=0:360<p&&(p%=360));d[f+c]=p}}for(h=0;h<l;h++)d[h*u]=d[h*u+1],d[(h+1)*u-1]=d[(h+1)*u-2];for(h=1;h<u-1;h++)d[h]=d[h+u],d[h+(l-1)*u]=d[h+(l-2)*u];t.pixelType="F32";t.pixels=[d];t.statistics={minValue:0,maxValue:360};k&&(t.mask=a);return{extent:e.extent,pixelBlock:t}}},_clonePixelBlock:function(e){return e.clone?e.clone():g.clone(e)}}})},"esri/layers/rasterLib/function/BandArithmeticFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./rasterIndex".split(" "),
function(g,e,t,u,l,q,k){return g([t,q],{declaredClass:"esri.layers.rasterLib.function.BandArithmeticFunction",functionName:"BandArithmetic",supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({method:1,bandIndexes:"",raster:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);if(!a.raster)return Error("The raster input to band arithmetic function is invalid.");this.rasterInfo=e.mixin(a.raster,{bandCount:8===this.functionArguments.method?a.raster.bandCount:
1,pixelType:this._calculatePixelType(this.pixelType,"F32"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(a){this._performance.start();a=a.raster;var d=k.calculate(a.pixelBlock,{bandIndexes:this.functionArguments.bandIndexes,method:this.functionArguments.method});this._addPerformanceMetric(this._performance.elapsed());"Unknown"!==this.pixelType&&(d.pixelType=this.pixelType);
return{extent:a.extent,pixelBlock:d}},readGL:function(a){this._performance.start();this._initializeProgram({fragment:l.bandArithmetic,fragmentName:"bandArithmetic"});var d=this.functionArguments.bandIndexes.trim().split(" ").map(function(c){return parseInt(c,10)});this._infraredBandID=d[0]-1;this._visibleBandID=d[1]-1;this._alterBand=2<Math.max(this._infraredBandID,this._visibleBandID)?!0:!1;a=this._setupTextureData(a.raster,this._alterBand&&2==d.length?{bandIDs:[this._infraredBandID,this._visibleBandID,
this._infraredBandID]}:{bandIDs:[d[0]-1,d[1]-1,d[2]-1]});var n=this.bindFrameBuffer(),b=this.functionArguments.method,h=2<d.length?d.slice(2):null;this._alterBand?this._setUniforms({u_method:b,u_bandId_nir:0,u_bandId_red:1,u_constants:h}):this._setUniforms({u_method:b,u_bandId_nir:d[0]-1,u_bandId_red:d[1]-1,u_constants:h});this._bindTexture(a.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,texture:n.texture}}})})},"esri/layers/rasterLib/function/rasterIndex":function(){define(["dojo/_base/lang"],
function(g){return{calculate:function(e,t){if(e&&e.pixels&&e.pixels.length){var u=t&&t.bandIndexes;t=t&&t.method;var l=u.trim().split(" ").map(function(a){return parseInt(a,10)}).filter(function(a){return null!=a});e=this._clonePixelBlock(e);var q=e.pixels,k=e.mask;switch(t){case 1:q=this._calculateNDVI(k,q[l[0]-1],q[l[1]-1]);break;case 2:q=this._calculateSAVI(k,q[l[0]-1],q[l[1]-1],l[2]);break;case 3:q=this._calculateTSAVI(k,q[l[0]-1],q[l[1]-1],l[2],l[3],l[4]);break;case 4:q=this._calculateMSAVI(k,
q[l[0]-1],q[l[1]-1]);break;case 5:q=this._calculateGEMI(k,q[l[0]-1],q[l[1]-1]);break;case 6:q=this._calculatePVI(k,q[l[0]-1],q[l[1]-1],l[2],l[3]);break;case 7:q=this._calculateGVITM(k,q[l[0]-1],q[l[1]-1],q[l[2]-1],q[l[3]-1],q[l[4]-1],q[l[5]-1]);break;case 8:q=this._calculateSultan(k,q[l[0]-1],q[l[1]-1],q[l[2]-1],q[l[3]-1],q[l[4]-1],q[l[5]-1]);break;case 9:q=this._calculateVARI(k,q[l[0]-1],q[l[1]-1],q[l[2]-1]);break;case 0:q=this._calculateUserDefined(k,q,u)}e.pixels=q;e.pixelType="F32";e.calculateStatistics();
return e}},_clonePixelBlock:function(e){return e.clone?e.clone():g.clone(e)},_parseUserDefined:function(e,t){e=e.replace(" ","");0===e.indexOf("-")&&(e="0"+e);0===e.indexOf("+")&&(e=e.slice(1,e.length));e=e.split("");var u=[],l=[],q="+-*/()".split(""),k,a="";for(k=0;k<e.length;k++){var d=e[k];q.some(function(n){return n===d})?(""!==a&&l.push(parseFloat(a)),u.push(d),a=""):"b"===d.toLowerCase()?(k++,a=d.concat(e[k]),l.push(t[parseInt(a[1],10)-1]),a=""):(a=a.concat(d),k===e.length-1&&l.push(parseFloat(a)))}return{ops:u,
nums:l}},_op:function(e,t,u,l){if(u.constructor===Number&&l.constructor===Number)return u+l;var q;if(u.constructor===Number){var k=l.length;var a=u;u=new Float32Array(k);for(q=0;q<k;q++)u[q]=a}else if(k=u.length,l.constructor===Number)for(a=l,l=new Float32Array(k),q=0;q<k;q++)l[q]=a;a=new Float32Array(k);if(null==e)if("+"===t)for(q=0;q<k;q++)a[q]=u[q]+l[q];else if("-"===t)for(q=0;q<k;q++)a[q]=u[q]-l[q];else if("*"===t)for(q=0;q<k;q++)a[q]=u[q]*l[q];else{if("/"===t)for(q=0;q<k;q++)a[q]=u[q]/l[q]}else if("+"===
t)for(q=0;q<k;q++)e[q]&&(a[q]=u[q]+l[q]);else if("-"===t)for(q=0;q<k;q++)e[q]&&(a[q]=u[q]-l[q]);else if("*"===t)for(q=0;q<k;q++)e[q]&&(a[q]=u[q]*l[q]);else if("/"===t)for(q=0;q<k;q++)e[q]&&(a[q]=u[q]/l[q]);return a},_shrinkOp:function(e,t){e.splice(t,1);var u=t=0,l=0;do{for(t=l=u=0;t<e.length;t++)if("("===e[t])u=t;else if(")"===e[t]){l=t;break}l===u+1&&e.splice(u,2)}while(l===u+1);return e},_getPriorityOpIndex:function(e,t){if(1===e.length)return{opIndex:0,numIndex:0};var u=t=0,l=0,q=-1,k=0;for(t=
0;t<e.length;t++)if("("===e[t])u=t;else if(")"===e[t]){l=t;break}var a=0===l?e:e.slice(u+1,l);for(t=0;t<a.length;t++)if("*"===a[t]||"/"===a[t]){q=t;break}if(!(-1<q))for(t=0;t<a.length;t++)if("+"===a[t]||"-"===a[t]){q=t;break}0<l&&(q+=u+1);for(t=0;t<q;t++)"("===e[t]&&k++;return{opIndex:q,numIndex:q-k}},_calculateUserDefined:function(e,t,u){t=this._parseUserDefined(u,t);u=t.ops;for(var l=t.nums,q,k,a;0<u.length&&(t=this._getPriorityOpIndex(u,l),q=u[t.opIndex],k=l[t.numIndex],a=l[t.numIndex+1],q=this._op(e,
q,k,a),1!==u.length);)u=this._shrinkOp(u,t.opIndex),l.splice(t.numIndex,2,q);return[q]},_calculateNDVI:function(e,t,u){var l=u.length,q=new Float32Array(l),k;if(null==e)for(k=0;k<l;k++){var a=u[k];var d=t[k];q[k]=(d-a)/(d+a)}else for(k=0;k<l;k++)e[k]&&(a=u[k],d=t[k],q[k]=(d-a)/(d+a));return[q]},_calculateSAVI:function(e,t,u,l){var q=u.length,k=new Float32Array(q),a;if(null==e)for(a=0;a<q;a++){var d=u[a];var n=t[a];k[a]=(n-d)/(n+d+l)*(1+l)}else for(a=0;a<q;a++)e[a]&&(d=u[a],n=t[a],k[a]=(n-d)/(n+d+
l)*(1+l));return[k]},_calculateTSAVI:function(e,t,u,l,q,k){var a=u.length,d=new Float32Array(a),n=-q*l+k*(1+l*l);if(null==e)for(k=0;k<a;k++){var b=u[k];var h=t[k];d[k]=l*(h-l*b-q)/(q*h+b+n)}else for(k=0;k<a;k++)e[k]&&(b=u[k],h=t[k],d[k]=l*(h-l*b-q)/(q*h+b+n));return[d]},_calculateMSAVI:function(e,t,u){var l=u.length,q=new Float32Array(l),k;if(null==e)for(k=0;k<l;k++){var a=u[k];var d=t[k];q[k]=.5*(2*(d+1)-Math.sqrt(Math.pow(2*d+1,2)-8*(d-a)))}else for(k=0;k<l;k++)e[k]&&(q[k]=.5*(2*(d+1)-Math.sqrt(Math.pow(2*
d+1,2)-8*(d-a))));return[q]},_calculateGEMI:function(e,t,u){var l=u.length,q=new Float32Array(l),k;if(null==e)for(k=0;k<l;k++){var a=u[k];var d=t[k];d=(2*(d*d-a*a)+1.5*d+.5*a)/(d+a+.5);q[k]=d*(1-.25*d)-(a-.125)/(1-a)}else for(k=0;k<l;k++)e[k]&&(a=u[k],d=t[k],d=(2*(d*d-a*a)+1.5*d+.5*a)/(d+a+.5),q[k]=d*(1-.25*d)-(a-.125)/(1-a));return[q]},_calculatePVI:function(e,t,u,l,q){var k=u.length,a=new Float32Array(k),d,n=Math.sqrt(1+l*l);if(null==e)for(d=0;d<k;d++){var b=u[d];var h=t[d];a[d]=(h-l*b-q)/n}else for(d=
0;d<k;d++)e[d]&&(b=u[d],h=t[d],a[d]=(h-l*b-q)/n);return[a]},_calculateGVITM:function(e,t,u,l,q,k,a){var d=t.length,n=new Float32Array(d),b;if(null==e)for(b=0;b<d;b++)n[b]=-.2848*t[b]-.2435*u[b]-.5436*l[b]+.7243*q[b]+.084*k[b]-1.18*a[b];else for(b=0;b<d;b++)e[b]&&(n[b]=-.2848*t[b]-.2435*u[b]-.5436*l[b]+.7243*q[b]+.084*k[b]-1.18*a[b]);return[n]},_calculateSultan:function(e,t,u,l,q,k,a){u=t.length;var d=new Float32Array(u),n=new Float32Array(u),b=new Float32Array(u),h;if(null==e)for(h=0;h<u;h++)d[h]=
k[h]/a[h]*100,n[h]=k[h]/t[h]*100,b[h]=l[h]/q[h]*(k[h]/q[h])*100;else for(h=0;h<u;h++)e[h]&&(d[h]=k[h]/a[h]*100,n[h]=k[h]/t[h]*100,b[h]=l[h]/q[h]*(k[h]/q[h])*100);return[d,n,b]},_calculateVARI:function(e,t,u,l){var q=t.length,k=new Float32Array(q),a;if(null==e)for(a=0;a<q;a++){var d=t[a];var n=u[a];var b=l[a];k[a]=(n-d)/(n+d-b)}else for(a=0;a<q;a++)if(e[a])for(a=0;a<q;a++)d=t[a],n=u[a],b=l[a],k[a]=(n-d)/(n+d-b);return[k]}}})},"esri/layers/rasterLib/function/ColormapFunction":function(){define("dojo/_base/declare dojo/_base/lang ../../../renderers/colorRampGenerator ./RasterFunctionX ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),
function(g,e,t,u,l,q,k){return g([u,q],{declaredClass:"esri.layers.rasterLib.function.ColormapFunction",functionName:"Colormap",pixelType:"U8",renderTexture:!1,supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({colormap:null,colorRampName:null,colorRamp:null,colorMapName:null,raster:null},a);this.invert=a&&a.invert;a=a.colormap||a.Colormap;if(a){if(a.features||a[0].attributes){a=a.features||a;var d=Object.keys(a[0].attributes);var n=d.filter(function(r){return"alpha"===
r.toLowerCase()})[0];var b=d.filter(function(r){return"value"===r.toLowerCase()})[0];var h=d.filter(function(r){return"red"===r.toLowerCase()})[0];var c=d.filter(function(r){return"green"===r.toLowerCase()})[0];var f=d.filter(function(r){return"blue"===r.toLowerCase()})[0];if(!(b&&h&&c&&f))throw"invalid colormap";a=a.map(function(r){return n?[r.attributes[b],r.attributes[h],r.attributes[c],r.attributes[f],r.attributes[n]]:[r.attributes[b],r.attributes[h],r.attributes[c],r.attributes[f]]});var p=1.1>
Math.max.apply(null,a.map(function(r){return r[1]}));d=n&&1.1>Math.max.apply(null,a.map(function(r){return r[4]}));if(p)for(p=0;p<a.length;p++)a[p][1]=Math.round(255*a[p][1]),a[p][2]=Math.round(255*a[p][2]),a[p][3]=Math.round(255*a[p][3]),d&&(a[p][4]=Math.round(255*a[p][4]))}this.functionArguments.colormap=this._sortClr(a)}this._initialize()},bind:function(a){this._initialize();a=this.getSourceRasterInfo(a);if(!a.raster||"F32"===a.raster.pixelType)return Error("The raster input to colormap function is invalid. It must be integer type.");
this.rasterInfo=e.mixin(a.raster,{bandCount:3,pixelType:this._calculatePixelType(this.pixelType,"U8"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Processed";return!0},read2D:function(a){return this._colorize(a.raster)},readGL:function(a){return this._colorizeGL(a.raster)},_colorize:function(a){this._performance.start();var d=k.colorize(a.pixelBlock,{indexedColormap:this._indexedColormap,indexedColormapOffset:this._indexedColormapOffset,
indexed2DColormap:this._indexed2DColormap,alphaSpecified:this._alphaSpecified});this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,pixelBlock:d}},_binarySearchClr:function(a,d){for(var n=0,b=a.length-1,h=0,c=0;n<b;)if(h=Math.floor((n+b)/2),c=a[h],c[0]<d)n=h;else if(c[0]>d)b=h;else return c.slice(1);return null},_sortClr:function(a,d){var n,b=[];for(n=0;n<a.length;n++)b.push(a[n]);for(n=0;n<b.length-1;n++){var h=b[n];for(a=n+1;a<b.length;a++)h[0]>b[a][0]&&(h=b[a],b[a]=b[n],
b[n]=h)}if(d)for(n=0;n<b.length/2;n++)h=b[n],b[b.length-1-n]=b[n],b[n]=h;return b},_invertColorRamp:function(a){if(!a)return a;var d={type:a.type};"random"===a.type?d=a:"multipart"===a.type?d.colorRamps=a.colorRamps.map(function(n){return{fromColor:n.toColor,toColor:n.fromColor}}).reverse():(d.fromColor=a.toColor,d.toColor=a.fromColor);return d},_initialize:function(){this._indexedColormapOffset=0;if(this.functionArguments.colormap){var a=k.buildIndexedColormap(this.functionArguments.colormap);this._alphaSpecified=
a&&a.alphaSpecified;this._indexedColormap=a&&a.indexedColormap;this._indexedColormapOffset=a&&a.offset;this._indexedColormap||(this._indexed2DColormap=this._getIndexed2DColormap())}else this.functionArguments.colorRamp?this._indexedColormap="multipart"===this.functionArguments.colorRamp.type?this.invert?t.createMultiPartColorRamp(this._invertColorRamp(this.functionArguments.colorRamp)):t.createMultiPartColorRamp(this.functionArguments.colorRamp):this.invert?t.createAlgorithmicColorRamp(this._invertColorRamp(this.functionArguments.colorRamp)):
t.createAlgorithmicColorRamp(this.functionArguments.colorRamp):this.functionArguments.colormapName&&"random"===this.functionArguments.colormapName.toLowerCase()&&(this._indexedColormap=t.createRandomColorRamp())},_getIndexed2DColormap:function(){var a=this.functionArguments.colormap;if(!a)return null;var d=0;0>a[0][0]&&(d=a[0][0]);var n=[],b=5===a[0].length,h;for(h=0;h<a.length;h++)n[a[h][0]-d]=b?a[h].slice(1):a[h].slice(1).concat([255]);return n},_colorizeGL:function(a){this._performance.start();
this._initializeProgram({fragment:l.colormap,fragmentName:"Colormap"});var d=this._indexedColormap,n=this._indexedColormapOffset;this._clrTexture||(this._clrTexture=this._setupColormapTexture(d));var b=this._clrTexture,h=this.bindFrameBuffer();a=this._setupTextureData(a);this._setUniforms({u_indexedColormapOffset:n,u_indexedColormapMaxIndex:d.length/4-1});this._bindTexture(b,"u_image1");this._bindTexture(a.texture,"u_image");this._drawGL();return{extent:a.extent,texture:h.texture}},_setupColormapTexture:function(a){var d=
this._createTexture(),n=this.gl,b=a.length/4,h=new Float32Array(a.length),c,f=this.renderTexture?255:1;for(c=0;c<a.length;c++)h[c]=a[c]/f;n.getExtension("OES_texture_float");n.texImage2D(n.TEXTURE_2D,0,n.RGBA,b,1,0,n.RGBA,n.FLOAT,h);return d}})})},"esri/renderers/colorRampGenerator":function(){define(["dojo/_base/declare","dojo/_base/lang","../renderers/colorUtils"],function(g,e,t){return{createAlgorithmicColorRamp:function(u,l){if(!u)return null;var q=u.fromColor,k=u.toColor;if(!q||!k)return null;
void 0===q.r&&3<=q.length&&(q={r:q[0],g:q[1],b:q[2]});void 0===k.r&&3<=k.length&&(k={r:k[0],g:k[1],b:k[2]});var a=u.size||256;u=u.algorithm||"cie-lab";if(1===a)var d=[q.r,q.g,q.b,255];else if(2===a)d=[q.r,q.g,q.b,255,k.r,k.g,q.b,255];else if(-1<u.toLowerCase().indexOf("hsv")){d=t.toHSV(q);k=t.toHSV(k);a=a||256;var n=0===d.s,b=0===k.s;q=d.h;u=k.h;n&&!b?q=d.h=u:b&&!n&&(u=k.h=q);n=Math.abs(u-q);180>n?u=(u-q)/(a-1):(n=360-n,u=q>u?n/(a-1):-n/(a-1));n=(k.s-d.s)/(a-1);b=(k.v-d.v)/(a-1);var h=d.s;d=d.v;var c,
f=new Uint8Array(4*a);for(c=0;c<a-1;c++){var p=t.toRGB({h:q,s:h,v:d});f[4*c]=p.r;f[4*c+1]=p.g;f[4*c+2]=p.b;f[4*c+3]=255;q+=u;h+=n;d+=b;360<q?q-=360:0>q&&(q+=360)}p=t.toRGB(k);f[4*(a-1)]=p.r;f[4*(a-1)+1]=p.g;f[4*(a-1)+2]=p.b;f[4*(a-1)+3]=255;d=f}else if(-1<u.toLowerCase().indexOf("lch")){h=t.toLCH(q);k=t.toLCH(k);a=a||256;d=(k.l-h.l)/(a-1);q=(k.c-h.c)/(a-1);u=(k.h-h.h)/(a-1);n=h.l;b=h.c;h=h.h;f=new Uint8Array(4*a);for(c=0;c<a-1;c++)p=t.toRGB({l:n,c:b,h}),f[4*c]=p.r,f[4*c+1]=p.g,f[4*c+2]=p.b,f[4*c+
3]=255,n+=d,b+=q,h+=u;p=t.toRGB(k);f[4*(a-1)]=p.r;f[4*(a-1)+1]=p.g;f[4*(a-1)+2]=p.b;f[4*(a-1)+3]=255;d=f}else if(-1<u.toLowerCase().indexOf("lab")){h=t.toLAB(q);k=t.toLAB(k);a=a||256;d=(k.l-h.l)/(a-1);q=(k.a-h.a)/(a-1);u=(k.b-h.b)/(a-1);n=h.l;b=h.a;h=h.b;f=new Uint8Array(4*a);for(c=0;c<a-1;c++)p=t.toRGB({l:n,a:b,b:h}),f[4*c]=p.r,f[4*c+1]=p.g,f[4*c+2]=p.b,f[4*c+3]=255,n+=d,b+=q,h+=u;p=t.toRGB(k);f[4*(a-1)]=p.r;f[4*(a-1)+1]=p.g;f[4*(a-1)+2]=p.b;f[4*(a-1)+3]=255;d=f}if(l&&!1===l.flattened)for(l=d,d=
[],k=0;k<d/4;k++)d[k]=l.slice(4*k,4*k+4);return d},createMultiPartColorRamp:function(u,l){if(!u)return null;l=l&&e.clone(l)||{flattened:!0};var q=u.colorRamps;if(!q||0===q.length)return null;var k=u.size||256;u=Math.max(Math.floor(k/q.length),1);var a=Math.max(u,k-(q.length-1)*u),d=!1!==l.flattened;l.flattened=!0;k=(q.length-1)*u+a;var n=new Uint8Array(4*k);for(k=0;k<q.length;k++){var b={fromColor:q[k].fromColor,toColor:q[k].toColor,size:k===q.length-1?a:u};n instanceof Array?n.concat(this.createAlgorithmicColorRamp(b,
l)):n.set(this.createAlgorithmicColorRamp(b,l),u*k*4)}if(!d)for(l=n,n=[],k=0;k<n/4;k++)n[k]=l.slice(4*k,4*k+4);return n},createRandomColorRamp:function(u){u=u||{};var l=u.size||256,q=!1===u.flattened;var k=q?new Uint8Array(4*l):[];for(u=0;u<l;u++)q?(k[4*u]=Math.round(255*Math.random()),k[4*u+1]=Math.round(255*Math.random()),k[4*u+2]=Math.round(255*Math.random()),k[4*u+3]=255):k[u]=[Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random()),255];return k}}})},"esri/layers/rasterLib/function/rasterUtils":function(){define(["dojo/_base/lang"],
function(g){return{mask:function(e,t){if(e&&e.pixels&&e.pixels.length){e=this._clonePixelBlock(e);var u=t.includedRanges,l=t.noDataInterpretation;t=t.noDataValues;if(null===u&&null===t)return e;var q=e.pixels,k=e.mask,a=e.width*e.height,d=q.length,n;if(null!==t&&t.length!==d)throw"expect "+d+" elements in noDataValues";if(null!==u&&u.length!==2*d)throw"expect "+2*d+" elements in IncludeRanges";if(null==k){k=new Uint8Array(a);for(n=0;n<a;n++)k[n]=1;e.mask=k}if(0===l)for(l=0;l<d;l++){var b=q[l];var h=
null===u?null:u[2*l];var c=null===u?null:u[2*l+1];var f=null===t?null:parseFloat(t[l]);if(null===h||null===c)for(n=0;n<a;n++){if(k[n]){var p=b[n];p===f&&(k[n]=0)}}else if(null===f)for(n=0;n<a;n++)k[n]&&(p=b[n],p<h||p>c)&&(k[n]=0);else for(n=0;n<a;n++)k[n]&&(p=b[n],p<h||p>c||p===f)&&(k[n]=0)}else{var r=new Uint8Array(a);for(n=0;n<a;n++)r[n]=k[n];for(l=0;l<d;l++)if(b=q[l],h=null===u?null:u[2*l],c=null===u?null:u[2*l+1],f=null===t?null:parseFloat(t[l]),null===h||null===c)for(n=0;n<a;n++)r[n]&&(p=b[n],
p!==f&&(r=0));else if(null===f)for(n=0;n<a;n++)r[n]&&(p=b[n],p<=h&&p<=c&&(r=0));else for(n=0;n<a;n++)r[n]&&(p=b[n],p<=h&&p<=c&&p!==f&&(r=0));for(n=0;n<a;n++)k[n]&&r[n]&&(k[n]=0)}return e}},calculateStatisticsHistograms:function(e,t){e=this._clonePixelBlock(e);t=e.pixelType;var u=e.pixels,l=e.mask,q=u.length,k,a,d=[],n;for(k=0;k<q;k++){var b={min:-.5,max:255.5,size:256,counts:new Uint32Array(256)};var h=b.counts;var c=u[k];if("U8"===t)if(l)for(a=0;a<e.width*e.height;a++)l[a]&&h[c[a]]++;else for(a=
0;a<e.width*e.height;a++)h[c[a]]++;else{var f=e.statistics[k].minValue;var p=e.statistics[k].maxValue;b.min=f;b.max=p;p=(p-f)/256;var r=new Uint32Array(257);if(l)for(a=0;a<e.width*e.height;a++)l[a]&&r[Math.floor((c[a]-f)/p)]++;else for(a=0;a<e.width*e.height;a++)r[Math.floor((c[a]-f)/p)]++;for(a=0;255>a;a++)h[a]=r[a];h[255]=r[255]+r[256]}d.push(b);f=e.statistics[k].minValue;p=e.statistics[k].maxValue;for(a=r=n=c=0;a<b.size;a++)c+=h[a],n+=a*h[a];n/=c;for(a=0;a<b.size;a++)r+=h[a]*Math.pow(a-n,2);h=
Math.sqrt(r/(c-1));a=(n+.5)*(b.max-b.min)/b.size+b.min;b=h*(b.max-b.min)/b.size;e.statistics[k]={min:f,minValue:f,max:p,maxValue:p,mean:a,stddev:b}}e.histograms=d;return e},buildIndexedColormap:function(e,t){if(!e)return null;var u=0;0>e[0][0]&&(u=e[0][0]);var l=Math.max(256,e[e.length-1][0]-u);if(65536<l)return null;var q=new Uint8Array(4*l),k=[],a=0,d=5===e[0].length;if(t)for(k=e[a],t=k[0]-u;t<l;t++)q[4*t]=k[1],q[4*t+1]=k[2],q[4*t+2]=k[3],q[4*t+3]=d?k[4]:255,t===k[0]-u&&(k=a===e.length-1?k:e[++a]);
else for(t=0;t<e.length;t++)k=e[t],a=4*(k[0]-u),q[a]=k[1],q[a+1]=k[2],q[a+2]=k[3],q[a+3]=d?k[4]:255;return{indexedColormap:q,offset:u,alphaSpecified:d}},colorize:function(e,t){if(null!==e&&null!==e.pixels){e=this._clonePixelBlock(e);var u=e.pixels,l=e.width*e.height,q=e.mask,k=t.indexedColormap,a=t.indexedColormapOffset,d=k&&k.length-1,n=t.indexed2DColormap;t=t.alphaSpecified;if(3<=u.length)throw"colormap only works on single band image";var b=u[0],h=new Uint8Array(b.length),c=new Uint8Array(b.length),
f=new Uint8Array(b.length),p=0;if(k)if(q)for(u=0;u<l;u++)q[u]&&(p=4*(b[u]-a),p<a||p>d?q[u]=0:(h[u]=k[p],c[u]=k[p+1],f[u]=k[p+2],q[u]=k[p+3]));else{q=new Uint8Array(l);for(u=0;u<l;u++)p=4*(b[u]-a),p<a||p>d?q[u]=0:(h[u]=k[p],c[u]=k[p+1],f[u]=k[p+2],q[u]=k[p+3]);e.mask=q}else if(q)for(u=0;u<l;u++)q[u]&&(k=n[b[u]],h[u]=k[0],c[u]=k[1],f[u]=k[2],q[u]=k[3]);else{q=new Uint8Array(l);for(u=0;u<l;u++)k=n[b[u]],h[u]=k[0],c[u]=k[1],f[u]=k[2],q[u]=k[3];e.mask=q}e.pixels=[h,c,f];e.statistics=null;e.pixelType="U8";
e.maskIsAlpha=t;return e}},convolute:function(e,t){e=this._clonePixelBlock(e);var u=e.pixels,l=e.width,q=e.height,k=l*q,a=u.length,d,n,b,h,c=[],f=[],p=t.normalizedKernel,r=t.kernelRows,m=t.kernelCols;for(t=0;t<a;t++){var v=u[t];var z=new Float32Array(k);z.set(v);for(b=1;b<q-1;b++){var A=b*l;for(h=1;h<l-1;h++){for(d=f=0;d<r;d++)for(n=0;n<m;n++)f+=v[A+h+(d-1)*l+n-1]*p[d*m+n];z[A+h]=f}}c.push(z)}e.pixels=c;return e},contrastBrightnessStretch:function(e,t){if(null!==e&&null!==e.pixels){e=this._clonePixelBlock(e);
var u=e.pixels,l=e.mask,q=e.width*e.height,k=u.length;var a=t&&t.contrastOffset;t=t&&t.brightnessOffset;if("U8"!==e.pixelType)throw"the contrast and brightness function only supports 8 bit unsigned integer data";var d=this._createContrastBrightnessLUT(a,t);if(null==l)for(a=0;a<q;a++)for(t=0;t<k;t++)u[t][a]=d[u[t][a]];else for(a=0;a<q;a++)if(l[a])for(t=0;t<k;t++)u[t][a]=d[u[t][a]];e.pixelType="U8";return e}},isNull:function(e,t){if(null!==e&&null!==e.pixels){e=this._clonePixelBlock(e);t=e.mask;var u=
e.pixels[0],l=u.length,q;if(t){for(q=0;q<l;q++)u[q]=t[q]?0:1;e.mask=null}else if(u.fill)u.fill(0);else for(q=0;q<l;q++)u[q]=0;return e}},setNull:function(e){if(null!==t&&null!==t.pixels){var t=this._clonePixelBlock(e);e=t.mask;var u=t.pixels[0],l=u.length,q;e=e||new Uint8Array(l);for(q=0;q<l;q++)e[q]=u[q]?0:1;t.mask=e;return t}},local:function(e,t){if(!t)return e[0];var u=t.rasterCountNeeded;t=t.functor;var l=this._clonePixelBlock(e[0]);if(null!==l&&null!==l.pixels){var q=l.width*l.height,k;e=(k=
e[1])&&k.pixels[0];var a=k&&k.mask,d=l.mask,n=l.pixels[0];if(2===u)if(!d&&a)d=a;else if(d&&a)for(k=0;k<q;k++)d[k]=d[k]&&a[k]?1:0;l.mask=d;if(1===u)if(null==d)for(k=0;k<q;k++)n[k]=t(n[k]);else for(k=0;k<q;k++)d[k]&&(n[k]=t(n[k]));else if(2===u)if(null==d)for(k=0;k<q;k++)n[k]=t(n[k],e[k]);else for(k=0;k<q;k++)d[k]&&(n[k]=t(n[k],e[k]));l.mask=d;l.calculateStatistics();return l}},remapColor:function(e,t){e=this._clonePixelBlock(e);var u=e.width*e.height,l=t.length,q=Math.floor(l/2),k=t[Math.floor(q)],
a=t[0].value,d=t[t.length-1].value,n=e.pixels[0],b,h,c=!1,f=new Uint8Array(u),p=new Uint8Array(u),r=new Uint8Array(u),m=e.mask,v=4===t[0].mappedColor.length;m&&0!==m.length||(m=new Uint8Array(u),m.fill(v?255:1),e.mask=m);for(h=0;h<u;h++)if(m[h]){var z=n[h];if(z<a||z>d)f[h]=p[h]=r[h]=m[h]=0;else{c=!1;var A=q;var D=k;var E=0;for(b=l-1;1<b-E;){if(z===D.value){c=!0;break}z>D.value?E=A:b=A;A=Math.floor((E+b)/2);D=t[Math.floor(A)]}c||(D=z===t[b].value?t[b]:t[E]);f[h]=D.mappedColor[0];p[h]=D.mappedColor[1];
r[h]=D.mappedColor[2];m[h]=D.mappedColor[3]}}e.pixels=[f,p,r];e.mask=m;e.pixelType="u8";e.maskIsAlpha=v;return e},_clonePixelBlock:function(e){if(e.clone)return e.clone();var t=g.clone(e),u;if(e.pixels&&e.pixels[0]&&0<e.pixels[0].length&&!(t.pixels&&t.pixels[0]&&0<t.pixels[0].length)){t.pixels=[];var l=e.pixels.length;for(u=0;u<l;u++)t.pixels[u]=new e.pixels[u].constructor(e.pixels[u])}if(e.statistics)for(t.statistics=[],l=e.statistics.length,u=0;u<l;u++)t.statistics[u]=g.clone(e.statistics[u]);e.mask&&
(t.mask=new Uint8Array(e.mask));return t},_createContrastBrightnessLUT:function(e,t){if(this._contrastCache&&this._contrastCache.contrastOffset===e&&this._contrastCache.brightnessOffset===t)return this._contrastCache.lut;var u=Math.min(Math.max(e,-100),100),l=Math.min(Math.max(t,-100),100),q,k=new Uint8Array(256);for(q=0;256>q;q++){if(0<u&&100>u)var a=(200*q-25500+510*l)/(2*(100-u))+128;else 0>=u&&-100<u?a=(200*q-25500+510*l)*(100+u)/2E4+128:100===u?(a=200*q-25500+256*(100-u)+510*l,a=0<a?255:0):-100===
u&&(a=128);k[q]=255<a?255:0>a?0:a}this._contrastCache={contrastOffset:e,brightnessOffset:t,lut:k};return k}}})},"esri/layers/rasterLib/function/CompositeBandFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin".split(" "),function(g,e,t,u,l,q){return g([t,q],{declaredClass:"esri.layers.rasterLib.function.CompositeBandFunction",functionName:"CompositeBand",supportWebGL:!0,support2D:!0,constructor:function(k){this.functionArguments=
this.mixinIgnoreCase({rasters:null},k)},bind:function(k){k=this.getSourceRasterInfo(k);if(!k.rasters)return Error("The rasters input to composite band function is invalid.");var a=[],d=[],n=k.rasters.length,b;if(k.rasters[0].statistics)for(b=0;b<n;b++)a.push(k.rasters[b].statistics[0]);if(k.rasters[0].histograms)for(b=0;b<n;b++)d.push(k.rasters[b].histograms[0]);this.rasterInfo=e.mixin(k.rasters[0],{bandCount:n,pixelType:this._calculatePixelType(this.pixelType,k.rasters[0].pixelType),statistics:a,
histograms:d});return!0},read2D:function(k){k=k.rasters;if(null!=k&&0!==k.length){var a=this._clonePixelData(k[0]),d=a.pixelBlock,n=[],b=[];for(h=0;h<k.length;h++)n.push(k[h].pixelBlock.pixels[0]),b.push(k[h].pixelBlock.statistics[0]);d.pixels=n;d.stackedStatistics=b;d.planes=k.length;var h;b=d.width*d.height;for(h=0;h<k.length;h++)if(d=k[h].pixelBlock.mask,c&&d)for(n=0;n<b;n++)c[n]&=d[n];else var c=c||d;a.maks=c;return a}},readGL:function(k){this._performance.start();this._initializeProgram({fragment:l.compositeBand,
fragmentName:"CompositeBand"});var a=k.rasters;if(null!=a&&0!==a.length){a=a.length;var d,n=this.bindFrameBuffer();for(d=0;d<a;d++){var b=this._setupTextureData(k.rasters[d],{notOriginal:0<d});var h=0<d?d.toString():"";this._bindTexture(b.texture,"u_image"+h)}this._setUniforms({u_rasterCount:a});this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:b.extent,texture:n.texture}}}})})},"esri/layers/rasterLib/function/ContrastBrightnessFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),
function(g,e,t,u,l,q,k){return g([t,q],{declaredClass:"esri.layers.rasterLib.function.ContrastBrightnessFunction",renderTexture:!0,functionName:"ContrastBrightness",supportWebGL:!0,support2D:!0,pixelType:"U8",constructor:function(a){this.functionArguments=this.mixinIgnoreCase({contrastOffset:0,brightnessOffset:0,raster:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);if(!a.raster)return Error("The raster input to contrast and brightness function is invalid.");this.rasterInfo=e.mixin(a.raster,
{bandCount:a.raster.bandCount,pixelType:this._calculatePixelType(this.pixelType,"U8"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Processed";return!0},read2D:function(a){a=a.raster;if(null!==a&&null!==a.pixelBlock&&null!==a.pixelBlock.pixels){var d=k.contrastBrightnessStretch(a.pixelBlock,{contrastOffset:this.functionArguments.contrastOffset,brightnessOffset:this.functionArguments.brightnessOffset});"Unknown"!==
this.pixelType&&(d.pixelType=this.pixelType,d.pixels=d.pixels.map(e.hitch(this,function(n){return this._clampBand(n,d.pixelType)})));return{extent:a.extent,pixelBlock:d}}},readGL:function(a){return this._cbGL(a.raster)},_cbGL:function(a){this._performance.start();this._initializeProgram({fragment:l.contrastBrightness,fragmentName:"ContrastBrightness"});a=this._setupTextureData(a);this._setUniforms({u_contrastOffset:Math.min(Math.max(this.functionArguments.contrastOffset,-100),100),u_brightnessOffset:Math.min(Math.max(this.functionArguments.brightnessOffset,
-100),100),u_scaleFactor:this.renderTexture?255:1});this._bindTexture(a.texture,"u_image");var d=this.bindFrameBuffer();this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,texture:d.texture}}})})},"esri/layers/rasterLib/function/ConvolutionFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./convolutionKernel ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),function(g,e,t,u,l,q,k,a){return g([t,
k],{declaredClass:"esri.layers.rasterLib.function.ConvolutionFunction",functionName:"Convolution",supportWebGL:!0,support2D:!0,constructor:function(d){this.functionArguments=this.mixinIgnoreCase({columns:3,rows:3,type:0,kernel:null,raster:null},d)},bind:function(d){d=this.getSourceRasterInfo(d);if(!d.raster)return Error("The raster input to convolution function is invalid.");this.rasterInfo=e.mixin(d.raster,{bandCount:d.raster.bandCount,pixelType:this._calculatePixelType(this.pixelType,d.raster.pixelType),
statistics:d.raster.statistics,histograms:d.raster.histograms});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(d){this._performance.start();d=d.raster;var n=this._analyzeKernel(),b=a.convolute(d.pixelBlock,{normalizedKernel:n.normalizedKernel,kernelCols:this.functionArguments.columns,kernelRows:this.functionArguments.rows});this._addPerformanceMetric(this._performance.elapsed());"Unknown"!==this.pixelType&&
(b.pixelType=this.pixelType);b.pixels=b.pixels.map(e.hitch(this,function(h){return this._clampBand(h,b.pixelType)}));return{extent:d.extent,pixelBlock:b}},readGL:function(d){this._performance.start();this._initializeProgram({fragment:q.convolution,fragmentName:"Convolution"});var n=this._setupTextureData(d.raster),b=this.bindFrameBuffer(),h=this.gl,c=h.drawingBufferWidth;h=h.drawingBufferHeight;var f=this.functionArguments.kernel;this._setUniforms({u_resolution:d&&d.raster&&d.raster.pixelBlock?[1/
d.raster.pixelBlock.width,1/d.raster.pixelBlock.height]:[1/c,1/h],u_kernel:f,u_kernelSize:f.length});this._bindTexture(n.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:n.extent,texture:b.texture}},_analyzeKernel:function(){var d=this.functionArguments.kernel,n=d.reduce(function(c,f){return c+f});0!==n&&1!==n&&(d=d.map(function(c){return c/n}));var b,h=[];for(b=0;b<d.length;b++)h.some(function(c){return c===d[b]})||h.push(d[b]);return{normalizedKernel:d,
distinctValues:h}},_analyzeKernelPattern:function(){var d=this.functionArguments.rows,n=this.functionArguments.columns,b=this.functionArguments.kernel,h=[],c,f;for(c=0;c<d;c++)h.push({weights:b.slice(c*n,(c+1)*n)});var p;for(c=1;c<d;c++){var r=h[c].weights;for(b=0;b<c;b++)if(p=h[b].weights){var m=r[0]/p[0];for(f=1;f<n;f++)r[f]/p[f]!==m&&(m=null);null!==m&&(h[c]={row:b,factor:m})}}return h}})})},"esri/layers/rasterLib/function/ExtractBandFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin".split(" "),
function(g,e,t,u,l,q){return g([t,q],{declaredClass:"esri.layers.rasterLib.function.ExtractBandFunction",functionName:"ExtractBand",supportWebGL:!0,support2D:!0,constructor:function(k){this.functionArguments=this.mixinIgnoreCase({bandIDs:[],missingBandAction:0,raster:null},k)},bind:function(k){k=this.getSourceRasterInfo(k);if(!k.raster)return Error("The raster input to extract band function is invalid.");var a=[],d=k.raster.statistics,n=[],b=k.raster.histograms,h=this.functionArguments.bandIDs.length||
k.raster.bandCount;this.functionArguments.bandIDs.forEach(e.hitch(this,function(c){if(c>=h-1){if(1===this.functionArguments.missingBandAction)return Error("missing band "+c);c=h-1}if(0>c)return Error("missing band "+c);void 0!==d&&null!==d&&0<d.length&&a.push(d[c]);void 0!==b&&null!==b&&0<b.length&&n.push(b[c])}));this.rasterInfo=e.mixin(k.raster,{bandCount:h,pixelType:this._calculatePixelType(this.pixelType,k.raster.pixelType),statistics:a,histograms:n});return!0},read2D:function(k){k=this._clonePixelData(k.raster);
if(null!==k&&null!==k.pixelBlock&&null!==k.pixelBlock.pixels){this._performance.start();var a=k.pixelBlock,d=a.statistics,n=a.pixels,b=n.length;if(null==this.functionArguments.bandIDs)throw"missing bandIDs parameter";if(0===this.functionArguments.bandIDs.length)return k;var h=[],c=[];this.functionArguments.bandIDs.forEach(function(f){if(f>=b-1){if(1===this.functionArguments.missingBandAction)throw"missing band "+f;f=b-1}if(0>f)throw"missing band "+f;h.push(n[f]);void 0!==d&&null!==d&&0<d.length&&
c.push(d[f])});a.pixels=h;a.statistics=c;a.planes=this.functionArguments.bandIDs.length;return k}},readGL:function(k){this._performance.start();if(null==this.functionArguments.bandIDs)throw"missing bandIDs parameter";if(3<this.functionArguments.bandIDs.length)throw"this version does not support more than 3 bands yet";this._initializeProgram({fragment:l.extractBand,fragmentName:"ExtractBand"});var a=this.functionArguments.bandIDs;1===a.length&&(a=[a[0],a[0],a[0]]);this._bandIDs=a;this._alterBand=!(0===
this.functionArguments.bandIDs.length||0===a[0]&&1===a[1]&&2===a[2]);var d=!!(this._alterBand&&k.raster&&k.raster.texture);k=this._setupTextureData(k.raster,{bandIDs:a});var n=this.bindFrameBuffer();d?this._setUniforms({u_bandIDs:a,u_alterBand:this._alterBand}):this._setUniforms({u_bandIDs:a,u_alterBand:!1});this._bindTexture(k.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:k.extent,texture:n.texture}}})})},"esri/layers/rasterLib/function/HillshadeFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../../renderers/colorRampGenerator ../../../WKIDUnitConversion ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./surfaceUtils ./rasterUtils".split(" "),
function(g,e,t,u,l,q,k,a,d,n){return g([t,a],{declaredClass:"esri.layers.rasterLib.function.HillshadeFunction",functionName:"Hillshade",supportWebGL:!0,support2D:!0,renderTexture:!0,constructor:function(b){this.functionArguments=this.mixinIgnoreCase({hillshadeType:0,altitude:45,azimuth:315,zFactor:1,slopeType:1,psPower:.664,psFactor:.024,colorRamp:null,raster:null},b);this._azimuths=[315,270,225,360,180,0];this._altitudes=[60,60,60,60,60,90];this._weights=[3,5,3,2,1,4];var h=this._weights.reduce(function(c,
f){return c+f});this._weights=this._weights.map(function(c){return c/h})},bind:function(b){b=this.getSourceRasterInfo(b);if(!b.raster)return Error("The raster input to hillshade function is invalid.");b.raster.statistics&&(this.srcStatistics=b.raster.statistics);this.rasterInfo=e.mixin(b.raster,{bandCount:1,pixelType:this._calculatePixelType(this.pixelType,"U8"),statistics:[{min:0,max:255}],histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType=
"Generic";this._initializeColormap();return!0},read2D:function(b){this._performance.start();b=b.raster;b=d.hillshade(b,{altitude:this.functionArguments.altitude,azimuth:this.functionArguments.azimuth,zFactor:this.functionArguments.zFactor,psPower:this.functionArguments.psPower,psFactor:this.functionArguments.psFactor,hillshadeType:this.functionArguments.hillshadeType,slopeType:this.functionArguments.slopeType,isGCS:b.extent.spatialReference.wkid&&null==l[b.extent.spatialReference.wkid]});this._addPerformanceMetric(this._performance.elapsed());
return b},readGL:function(b){this._performance.start();this._initializeProgram({fragment:k.hillshade,fragmentName:"Hillshade"});this.functionArguments.colorRamp&&this._indexedColormap&&!this._clrTexture&&(this._clrTexture=this._setupColormapTexture(this._indexedColormap));var h=this._setupTextureData(b.raster),c=this.bindFrameBuffer(),f=this.gl,p=f.drawingBufferWidth;f=f.drawingBufferHeight;var r=h.extent,m=(r.xmax-r.xmin)/p,v=(r.ymax-r.ymin)/f,z=this.functionArguments.altitude,A=this.functionArguments.azimuth,
D=this.functionArguments.zFactor;1===this.functionArguments.hillshadeType&&(D*=2);var E=D/(8*m),F=D/(8*v);.001<D&&r.spatialReference.wkid&&null==l[r.spatialReference.wkid]&&(E/=111E3,F/=111E3);var y=this.functionArguments.psPower,x=this.functionArguments.psFactor;3===this.functionArguments.slopeType&&((E=r.spatialReference.wkid&&null==l[r.spatialReference.wkid])?(E=111E3*m,F=111E3*v,E=(D+Math.pow(E,y)*x)/(8*E),F=(D+Math.pow(F,y)*x)/(8*F)):(E=(D+Math.pow(m,y)*x)/(8*m),F=(D+Math.pow(v,y)*x)/(8*v)));
var w=(90-z)*Math.PI/180;z=Math.cos(w);var C=(360-A+90)*Math.PI/180;A=Math.sin(w)*Math.cos(C);w=Math.sin(w)*Math.sin(C);y=Array(6);x=Array(6);r=Array(6);var B=this._weights,I;if(1===this.functionArguments.hillshadeType){var N=this._azimuths.length;for(I=0;I<N;I++)z=this._altitudes[I],A=this._azimuths[I],w=(90-z)*Math.PI/180,z=Math.cos(w),C=(360-A+90)*Math.PI/180,A=Math.sin(w)*Math.cos(C),w=Math.sin(w)*Math.sin(C),y[I]=z,x[I]=A,r[I]=w}else y[0]=z,x[0]=A,r[0]=w;y=y.map(function(V){return parseFloat(V)});
x=x.map(function(V){return parseFloat(V)});r=r.map(function(V){return parseFloat(V)});this._setUniforms({u_cellSize:[m,v],u_zfactor:D,u_xFactor:E,u_yFactor:F,u_sinZcosA:A,u_sinZsinA:w,u_cosZ:z,u_sinZcosAs:x,u_sinZsinAs:r,u_cosZs:y,u_weights:B,u_hillshadeType:this.functionArguments.hillshadeType,u_resolution:b&&b.raster&&b.raster.pixelBlock?[1/b.raster.pixelBlock.width,1/b.raster.pixelBlock.height]:[1/p,1/f],u_scaled:!this.renderTexture,u_applyColorramp:this._clrTexture?!0:!1,u_minValue:this.srcStatistics[0].min,
u_maxValue:this.srcStatistics[0].max,u_indexedColormapOffset:this._indexedColormapOffset||0,u_indexedColormapMaxIndex:this._indexedColormap?this._indexedColormap.length/4-1:0});this._clrTexture&&this._bindTexture(this._clrTexture,"u_image1");this._bindTexture(h.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:h.extent,texture:c.texture}},_initializeColormap:function(){this._indexedColormapOffset=0;var b=this._indexedColormap,h=this.functionArguments.colorRamp;
this.functionArguments.colormap?(this._alphaSpecified=(h=n.buildIndexedColormap(this.functionArguments.colormap))&&h.alphaSpecified,this._indexedColormap=h&&h.indexedColormap,this._indexedColormapOffset=h&&h.offset):h?(this._indexedColormap="multipart"===h.type?this.invert?u.createMultiPartColorRamp(this._invertColorRamp(h)):u.createMultiPartColorRamp(h):this.invert?u.createAlgorithmicColorRamp(this._invertColorRamp(h)):u.createAlgorithmicColorRamp(h),h.fromColor&&h.toColor&&"000"===h.fromColor.slice(0,
3).join("")&&"255255255"===h.toColor.slice(0,3).join("")&&(this._clrTexture=this._indexedColormap=null)):this.functionArguments.colormapName?"random"===this.functionArguments.colormapName.toLowerCase()&&(this._indexedColormap=u.createRandomColorRamp()):this._clrTexture=this._indexedColormap=null;if(b&&this._indexedColormap){h=!0;for(var c=0;c<b.length;c++)if(b[c]!==this._indexedColormap[c]){h=!1;break}h||(this._clrTexture=null)}},_setupColormapTexture:function(b){var h=this._createTexture(),c=this.gl,
f=b.length/4,p=new Float32Array(b.length),r;for(r=0;r<b.length;r++)p[r]=b[r]/255;c.getExtension("OES_texture_float");c.texImage2D(c.TEXTURE_2D,0,c.RGBA,f,1,0,c.RGBA,c.FLOAT,p);return h}})})},"esri/layers/rasterLib/function/LocalFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),function(g,e,t,u,l,q,k){return g([t,q],{declaredClass:"esri.layers.rasterLib.function.LocalFunction",functionName:"Local",
supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({operation:null,rasters:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);var d=0;a.raster?d=a.raster.bandCount:a.rasters&&(d=Math.max.apply(null,a.rasters.map(function(n){return n.bandCount})));if(0===d)return Error("The raster input to local function is invalid. It only takes single band input.");a=a.raster||a.rasters.filter(function(n){return!!n.extent})[0];this.rasterInfo=e.mixin(a,{bandCount:1,
pixelType:this._calculatePixelType(this.pixelType,"F32"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(a){var d=[];d=a.raster?a.raster2?[a.raster,a.raster2]:[a.raster]:a.rasters;a=d.map(function(f){return f.pixelBlock});var n=this.functionArguments.operation;if(null===n)return d[0];this._performance.start();var b=this._getOperations(),h=b.operators[n-1];b=b.functors[n-1];
if(!this.functionArguments.rasters){if(1!==h)throw"no sufficient rasters, require "+h;}else if(999!==h&&this.functionArguments.rasters.length!==h)throw"number of rasters does not meet (short or exceed) the operation requirment, require "+h;var c=31===n?k.isNull(a[0]):50===n?k.setNull(a[0]):k.local(a,{rasterCountNeeded:h,functor:b});"Unknown"!==this.pixelType&&(c.pixelType=this.pixelType,c.pixels=c.pixels.map(e.hitch(this,function(f){return this._clampBand(f,c.pixelType)})));c.statistics||c.calculateStatistics();
return{extent:d[0].extent,pixelBlock:c}},readGL:function(a){this._performance.start();var d=this.functionArguments.operation,n=this._getWebGLOperations(),b=n.operators[d-1],h=l.local;n="result\x3d"+n.functors[d-1]+";";31!==d&&50!==d&&(n+="result \x3d vec4(result.rgb, a.a);");h=h.replace("vec4 replaceme"+b+";",n);n=this.gl.getParameter(this.gl.VERSION);var c="";if(-1<n.toLowerCase().indexOf("webgl 1.0")||-1<n.toLowerCase().indexOf("webgl 0."))c=this._getPolyfill(d);h=h.replace("vec4 polyfill;",c);
1<b&&(h=h.replace("gl_FragColor \x3d localOp1();","gl_FragColor \x3d localOp1();".replace("1",b.toString())));this._initializeProgram({fragment:h,fragmentName:"Local"});d=a.rasters;if(null!=d&&0!==d.length){d=d.length;n=this.bindFrameBuffer();for(b=0;b<d;b++){h=0<b?b.toString():"";var f=this._setupTextureData(a.rasters[b],{reCreate:!0});this._bindTexture(f.texture,"u_image"+h)}this._setUniforms({});this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:f.extent,texture:n.texture}}},
_getOperations:function(){return{operators:[2,2,2,1,2,1,1,1,1,1,2,2,1,2,2,2,2,1,2,2,1,1,2,2,1,1,1,2,2,1,1,1,2,2,1,1,1,999,999,999,999,999,999,2,1,2,999,1,1,1,1,1,1,999,999,1,1,999,1,1,2,2,2,999,999,999,999,999,999,999,999,999,999,3],functors:[function(a,d){return a+d},function(a,d){return a-d},function(a,d){return a*d},function(a){return Math.sqrt(a)},function(a,d){return Math.pow(a,d)},function(a){return Math.acos(a)},function(a){return Math.asin(a)},function(a){return Math.atan(a)},function(a){return Math.atanh(a)},
function(a){return Math.abs(a)},function(a,d){return a&d},function(a,d){return a<<d},function(a){return~a},function(a,d){return a|d},function(a,d){return a>>d},function(a,d){return a^d},function(a,d){return a&&d},function(a){return!a},function(a,d){return a||d},function(a,d){return a!=d},function(a){return Math.cos(a)},function(a,d){return Math.cosh(a)},function(a,d){return a/d},function(a,d){return a==d},function(a){return Math.exp(a)},function(a){return Math.pow(10,a)},function(a){return Math.pow(2,
a)},function(a,d){return a>d?1:0},function(a,d){return a>=d?1:0},function(a,d){return Math.floor(a)},function(a){return!a},function(a){return a},function(a,d){return a<d?1:0},function(a,d){return a<=d?1:0},function(a){return Math.log(a)},function(a,d){return Math.log10(a)},function(a,d){return Math.log2(a)},999,999,999,999,999,999,function(a,d){return a%d},function(a){return-a},function(a,d){return a!=d?1:0},999,function(a,d){return Math.floor(a)},function(a,d){return Math.ceil(a)},function(a,d){return d?
0:a},function(a,d){return Math.sin(a)},function(a,d){return Math.sinh(a)},function(a,d){return a*a},999,999,function(a){return Math.tan(a)},function(a){return Math.tanh(a)},999,function(a){return Math.acosh(a)},function(a){return Math.asinh(a)},function(a,d){return Math.atan2(a,d)},function(a,d){return a/d},function(a,d){return Math.floor(a/d)},999,999,999,999,999,999,999,999,999,999,function(a,d,n){return a?d:n}]}},_polyfill:{sinh:"vec4 sinh(vec4 x) {\nvec4 halfexp \x3d exp(x)/2.0;\nreturn halfexp - 1.0/halfexp;\n}",
asinh:"vec4 asinh(vec4 x) {\nvec4 halfexp \x3d exp(x)/2.0;\nreturn 1.0/(halfexp - 1.0/halfexp);\n}",cosh:"vec4 cosh(vec4 x) {\nvec4 halfexp \x3d exp(x)/2.0;\nreturn halfexp + 1.0/halfexp;\n}",acosh:"vec4 acosh(vec4 x) {\nvec4 halfexp \x3d exp(x)/2.0;\nreturn 1.0/(halfexp + 1.0/halfexp);\n}",tanh:"vec4 tanh(vec4 x) {\nvec4 expx \x3d exp(x);\nreturn (expx - 1.0/expx)/(expx + 1.0/expx);\n}",atanh:"vec4 atanh(vec4 x) {\nvec4 expx \x3d exp(x);\nreturn (expx + 1.0/expx)/(expx - 1.0/expx);\n}"},_getPolyfill:function(a){var d=
"";switch(a){case 9:d=this._polyfill.atanh;break;case 22:d=this._polyfill.cosh;break;case 52:d=this._polyfill.sinh;break;case 57:d=this._polyfill.tanh;break;case 59:d=this._polyfill.acosh;break;case 60:d=this._polyfill.asinh}return d},_getWebGLOperations:function(){return{operators:[2,2,2,1,2,1,1,1,1,1,2,2,1,2,2,2,2,1,2,2,1,1,2,2,1,1,1,2,2,1,1,1,2,2,1,1,1,999,999,999,999,999,999,2,1,2,999,1,1,1,1,1,1,999,999,1,1,999,1,1,2,2,2,999,999,999,999,999,999,999,999,999,999,3],functors:["(a + b)","(a - b)",
"(a * b)","sqrt(a)","pow(a, b)","acos(a)","asin(a)","atan(a)","atanh(a)","abs(a)","a","a","a","a","a","a","(a.r\x3d\x3d0.0 || b.r\x3d\x3d0.0) ? vec4(0.0,0.0,0.0,a.a) : vec4(1.0,1.0,1.0,a.a)","a.r\x3d\x3d0.0?vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","(a.r\x3d\x3d0.0 \x26\x26 b.r\x3d\x3d0.0) ? vec4(0.0,0.0,0.0,a.a) : vec4(1.0,1.0,1.0,a.a)","(a.r\x3d\x3d0.0 ^^ b.r\x3d\x3d0.0) ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","cos(a)","cosh(a)","a / b","a.r \x3d\x3d b.r? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)",
"exp(a)","pow(10.0, a)","pow(2.0, a)","a.r \x3e b.r ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","a.r \x3e\x3d b.r ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","floor(a)","a.a \x3d\x3d 0.0? vec4(1.0,1.0,1.0,1.0) : vec4(0.0,0.0,0.0,1.0)","a","a.r \x3c b.r ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","a.r \x3c\x3d b.r ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","log(a)","log2(a) / log2(10.0)","log2(a)",999,999,999,999,999,999,"mod(a, b)","-a","a.r !\x3d b.r ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)",
999,"floor(a)","ceil(a)","a.r !\x3d 0.0 ? vec4(0.0,0.0,0.0,0.0) : a","sin(a)","sinh(a)","a * a",999,999,"tan(a)","tanh(a)",999,"acosh(a)","asinh(a)","atan(a, b)","a / b","floor(a / b)",999,999,999,999,999,999,999,999,999,999,"a.r!\x3d0 ? b : c"]}}})})},"esri/layers/rasterLib/function/MaskFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),function(g,e,t,u,l,q,k){return g([t,q],{declaredClass:"esri.layers.rasterLib.function.MaskFunction",
functionName:"Mask",supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({includedRanges:null,noDataInterpretation:0,noDataValues:null,raster:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);if(!a.raster)return Error("The raster input to mask function is invalid.");this.rasterInfo=e.mixin(a.raster,{bandCount:a.raster.bandCount,pixelType:this._calculatePixelType(this.pixelType,a.raster.pixelType),statistics:a.raster.statistics,histograms:a.raster.histograms});
return!0},read2D:function(a){this._performance.start();a=a.raster;var d=k.mask(a.pixelBlock,{includedRanges:this.functionArguments.includedRanges,noDataInterpretation:this.functionArguments.noDataInterpretation,noDataValues:this.functionArguments.noDataValues});this._addPerformanceMetric(this._performance.elapsed());"Unknown"!==this.pixelType&&(d.pixelType=this.pixelType);return{extent:a.extent,pixelBlock:d}},readGL:function(a){this._performance.start();this._initializeProgram({fragment:l.mask,fragmentName:"Mask"});
a=this._setupTextureData(a.raster);var d=this.bindFrameBuffer(),n=this.functionArguments.includedRanges,b=this.functionArguments.noDataValues?this.functionArguments.noDataValues.map(function(h){return parseFloat(h,10)}):null;this._setUniforms({u_includedRanges:n,u_includedRanges_specified:n?!0:!1,u_noDataValues:b,u_noDataValues_specified:b?!0:!1,u_noDataInterpretation:this.functionArguments.noDataInterpretation,u_bandCount:Math.min(this.sourceRasterInfo.raster.bandCount,3)});this._bindTexture(a.texture,
"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,texture:d.texture}}})})},"esri/layers/rasterLib/function/NDVIFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./rasterIndex".split(" "),function(g,e,t,u,l,q,k){return g([t,q],{declaredClass:"esri.layers.rasterLib.function.NDVIFunction",functionName:"NDVI",supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=
this.mixinIgnoreCase({visibleBandID:1,infraredBandID:2,scaled:!0,raster:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);if(!(a.raster&&1<a.raster.bandCount))return Error("The raster input to ndvi function is invalid. It requires more than 1 band.");this.rasterInfo=e.mixin(a.raster,{bandCount:1,pixelType:this._calculatePixelType(this.pixelType,this.scaled?"U8":"F32"),statistics:this.scaled?[{min:0,max:200}]:[{min:-1,max:1}],histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||
{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(a){this._performance.start();a=a.raster;var d=k.calculate(a.pixelBlock,{bandIndexes:[this.functionArguments.infraredBandID+1,this.functionArguments.visibleBandID+1].join(" "),method:1}),n;if(this.functionArguments.scaled){var b=d.pixels[0];var h=d.mask;var c=b.length;var f=new Uint8Array(c);if(null==h)for(n=0;n<c;n++)f[n]=100*b[n]+100&255;else for(n=0;n<c;n++)h[n]&&(f[n]=100*b[n]+100&255);d.pixels[0]=f;d.pixelType="U8"}this._addPerformanceMetric(this._performance.elapsed());
"Unknown"!==this.pixelType&&(d.pixelType=this.pixelType);return{extent:a.extent,pixelBlock:d}},readGL:function(a){this._performance.start();this._initializeProgram({fragment:l.ndvi,fragmentName:"NDVI"});var d=this.functionArguments.visibleBandID,n=this.functionArguments.infraredBandID,b=this.functionArguments.scaled||!1;this._alterBand=2<Math.max(n,d)?!0:!1;a=this._setupTextureData(a.raster,{bandIDs:this._alterBand?{bandIDs:[n,d,n]}:null});var h=this.bindFrameBuffer();this._alterBand?this._setUniforms({u_bandId_nir:0,
u_bandId_red:1,u_scaled:b}):this._setUniforms({u_bandId_nir:n,u_bandId_red:d,u_scaled:b});this._bindTexture(a.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,texture:h.texture}}})})},"esri/layers/rasterLib/function/SlopeFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../../WKIDUnitConversion ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./surfaceUtils".split(" "),function(g,e,t,u,l,q,
k,a){return g([t,k],{declaredClass:"esri.layers.rasterLib.function.SlopeFunction",functionName:"Slope",supportWebGL:!0,support2D:!0,constructor:function(d){this.functionArguments=this.mixinIgnoreCase({zFactor:1,slopeType:1,psPower:.664,psFactor:.024,raster:null},d)},bind:function(d){d=this.getSourceRasterInfo(d);if(!d.raster)return Error("The raster input to slope function is invalid.");this.rasterInfo=e.mixin(d.raster,{bandCount:1,pixelType:this._calculatePixelType(this.outputPixelType,"F32"),statistics:1===
this.slopeType||3===this.slopeType?[{min:0,max:90}]:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(d){this._performance.start();d=d.raster;d=a.slope(d,{zFactor:this.functionArguments.zFactor,psPower:this.functionArguments.psPower,psFactor:this.functionArguments.psFactor,slopeType:this.functionArguments.slopeType,isGCS:d.extent.spatialReference.wkid&&null==u[d.extent.spatialReference.wkid]});
this._addPerformanceMetric(this._performance.elapsed());return d},readGL:function(d){this._performance.start();this._initializeProgram({fragment:q.slope,fragmentName:"Slope"});var n=this._setupTextureData(d.raster),b=this.bindFrameBuffer(),h=this.gl,c=h.drawingBufferWidth;h=h.drawingBufferHeight;var f=n.extent;this._setUniforms({u_resolution:d&&d.raster&&d.raster.pixelBlock?[1/d.raster.pixelBlock.width,1/d.raster.pixelBlock.height]:[1/c,1/h],u_cellSize:[(f.xmax-f.xmin)/c,(f.ymax-f.ymin)/h],u_zfactor:this.functionArguments.zFactor});
this._bindTexture(n.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:n.extent,texture:b.texture}}})})},"esri/layers/rasterLib/function/RemapFunction":function(){define("dojo/_base/declare dojo/_base/lang ../../../renderers/colorRampGenerator ./RasterFunctionX ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),function(g,e,t,u,l,q,k){return g([u,q],{declaredClass:"esri.layers.rasterLib.function.RemapFunction",functionName:"Remap",
pixelType:"U8",renderTexture:!1,supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({inputRanges:null,outputValues:null,outputColors:null,colorBreaks:null,raster:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);if(!a.raster)return Error("The raster input is not available.");var d=!(!this.functionArguments.outputColors&&!this.functionArguments.colorBreaks);this.rasterInfo=e.mixin(a.raster,{bandCount:d?3:1,pixelType:this._calculatePixelType(this.pixelType,
"U8"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType=d?"Processed":"Thematic";return!0},read2D:function(a){return this._remap(a.raster)},readGL:function(a){return this._remapGL(a.raster)},_remap:function(a){this._performance.start();var d=k.remapColor(a.pixelBlock,this.functionArguments.colorBreaks);this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,pixelBlock:d}},_remapGL:function(a){this._performance.start();
this._initializeProgram({fragment:l.remap,fragmentName:"Remap"});var d=new Uint8Array(64),n=this.functionArguments.colorBreaks;n.forEach(function(f,p){d[4*p]=f.mappedColor[0];d[4*p+1]=f.mappedColor[1];d[4*p+2]=f.mappedColor[2];d[4*p+3]=1>=f.mappedColor[3]?255*f.mappedColor[3]:f.mappedColor[3]});var b=n[n.length-1],h=b.mappedColor;d[60]=h[0];d[61]=h[1];d[62]=h[2];d[63]=1>=h[3]?255*h[3]:h[3];var c=new Float32Array(16);n.forEach(function(f,p){c[p]=f.value});c[15]=b.value;this._clrTexture||(this._clrTexture=
this._setupColormapTexture(d));n=this._clrTexture;b=this.bindFrameBuffer();a=this._setupTextureData(a);this._setUniforms({u_indexedColormapOffset:0,u_indexedColormapMaxIndex:d.length/4-1,u_breaks:c});this._bindTexture(n,"u_image1");this._bindTexture(a.texture,"u_image");this._drawGL();return{extent:a.extent,texture:b.texture}},_setupColormapTexture:function(a){var d=this._createTexture(),n=a.length/4,b=new Float32Array(a.length),h=this.renderTexture?255:1,c,f=this.gl;for(c=0;c<a.length;c++)b[c]=a[c]/
h;f.getExtension("OES_texture_float");f.texImage2D(f.TEXTURE_2D,0,f.RGBA,n,1,0,f.RGBA,f.FLOAT,b);return d}})})},"esri/layers/rasterLib/function/IdentityFunction":function(){define(["dojo/_base/declare","dojo/_base/lang","./pixelShaders","./RasterFunctionX","./RasterFunctionWebGLMixin"],function(g,e,t,u,l){return g([u,l],{declaredClass:"esri.layers.rasterLib.function.IdentityFunction",functionName:"Identity",supportWebGL:!0,support2D:!0,constructor:function(q){this.functionArguments={raster:null}},
bind:function(q){q=this.getSourceRasterInfo(q);if(!q.raster)return Error("The raster input to identity function is invalid.");this.rasterInfo=e.mixin(q.raster,{});return!0},read2D:function(q){return q.raster},readGL:function(q){this._initializeProgram({fragment:t.identity,fragmentName:"identity"});q=this._setupTextureData(q.raster);var k=this.bindFrameBuffer();this._bindTexture(q.texture,"u_image");this._drawGL();return{extent:q.extent,texture:k.texture}}})})},"esri/layers/rasterLib/function/ResampleFunction":function(){define(["dojo/_base/declare",
"dojo/_base/lang","./pixelShaders","./RasterFunctionX","./RasterFunctionWebGLMixin"],function(g,e,t,u,l){return g([u,l],{declaredClass:"esri.layers.rasterLib.function.ResampleFunction",renderTexture:!0,resamplingOrigin:null,resamplingRatio:null,zFactor:1,functionName:"Resample",supportWebGL:!0,support2D:!1,constructor:function(q){this.functionArguments=this.mixinIgnoreCase({resamplingType:0},q)},bind:function(q){q=this.getSourceRasterInfo(q);if(!q.raster)return Error("The raster input to convolution function is invalid.");
this.rasterInfo=e.mixin(q.raster,{bandCount:q.raster.bandCount,pixelType:this._calculatePixelType(this.pixelType,q.raster.pixelType),statistics:q.raster.statistics,histograms:q.raster.histograms});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};return!0},readGL:function(q){this._performance.start();this._initializeProgram({fragment:t.resample,fragmentName:"Resample"});var k=this._setupTextureData(q.raster),a=this.bindFrameBuffer(),d=this.gl,n=d.drawingBufferWidth;d=d.drawingBufferHeight;
var b=q.raster;void 0!==b.pixelBlock?(k=k||this._setupTextureData(b),q=b.pixelBlock.width,b=b.pixelBlock.height):(k=k||b,q=n,b=d);this._setUniforms({u_resamplingRatio:this.resamplingRatio||[q/n,b/d],u_anchor:this.resamplingOrigin||[0,1],u_resamplingType:this.functionArguments.resamplingType,u_resolution:[1/n,1/d]});this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:k.extent,texture:a.texture}}})})},"esri/layers/rasterLib/renderer/rasterRendererHelper":function(){define("dojo/_base/declare dojo/_base/lang ../../PixelBlock ./RasterColormapRenderer ./RasterUniqueValueRenderer ./RasterRGBRenderer ./RasterStretchColorRampRenderer ./RasterClassBreaksRenderer ./RasterShadedReliefRenderer".split(" "),
function(g,e,t,u,l,q,k,a,d){var n=function(){function b(c){h[c.prototype.rendererName]=c}var h={};b(u);b(q);b(k);b(l);b(a);b(d);return h}();return{wellKnownRenderers:n,isSupported:function(b){if(!b)return!1;var h=!0;n[b.rendererName]||(h=!1);return h},create:function(b){if(!b)return null;if(b.rendererName){var h=b.rendererName;b=b.rendererArguments}else h="uniqueValue rasterStretch rasterShadedRelief rgb rasterColormap classBreaks".split(" ").indexOf(b.type),h="UniqueValue Stretch ShadedRelief RGB Colormap ClassBreaks".split(" ")[h],
"rasterStretch"===b.type&&b.bandIndex&&1<b.bandIndex.length&&(h="RGB");return(h=n[h])?new h(b):null},createDefaultRenderer:function(b){if(b&&b.raster){var h=b.raster.rasterInfo,c=b.raster.dataType;if(h){var f=b.raster.rasterFunction,p=["Stretch","Colormap","ContrastAndBrightness"];if(f&&"U8"===h.pixelType&&-1<p.indexOf(f.functionName))f.renderTexture=!0;else if("Processed"!==c||!(b.useWebGL&&f&&f.renderTexture||!b.useWebGL&&"U8"===h.pixelType)){f&&(h=f.rasterInfo);f=h.bandCount;var r=h.colormap,m=
h.vat;p=h.histograms;p&&0===p.length&&(p=null);var v=h.statistics&&h.statistics.map(function(D){return[D.min,D.max,D.mean,D.stddev]});if(1===f&&r&&0<r.length)var z=this._getDefaultColormapRenderer(m,r);else if(1===f&&m&&m.features&&0<m.features.length)z=new l({});else{r=0;m=!1;c||!b.raster||!b.raster.tileInfo||void 0!==b.raster.tileInfo.tileType&&"Map"!==b.raster.tileInfo.tileType?"U8"===h.pixelType&&"Processed"===c?(r=5,v=v||[[0,255,0,0],[0,255,0,0],[0,255,0,0]],m=!1):"U8"===h.pixelType||"Elevation"===
c?(r=5,m=v?!1:!0):"Scientific"===c||"StdTime"===c?(r=5,m=v?!1:!0,z=this._getDefaultScientificColorRamp()):p&&0<p.length?(r=6,m=!1):v?(r=5,m=!1):(r=6,m=!0):(v=[[0,255,0,0],[0,255,0,0],[0,255,0,0]],r=5,m=!1);v||(r=5,m=!0);b=b.bandIds||b.raster&&b.raster.imageServiceParams&&b.raster.imageServiceParams.bandIds;var A;3<=f&&(A=b&&3===b.length?b.slice():this.getDefaultBandCombination(h));A&&v&&(v=A.map(function(D){return v[D]}));h={stretchType:r,min:0,max:255,dra:m,minPercent:.25,maxPercent:.25,useGamma:!1,
computeGamma:!1,statistics:v,histograms:p,numberOfStandardDeviations:2.5,bandIndex:A};1===f||A&&1===A.length?(z&&(h.colorRamp=z,h.invert=!1),z=new k(h)):z=new q(h)}return z}}}},getDefaultBandCombination:function(b){var h=b.bandCount;if(1===h)return null;if(2===h)return[0];var c=(b=b.keyProperties)&&b.ChangeAnalysisParameters&&b.ChangeAnalysisParameters.AnalysisType;if(c&&("ccdc"===c.toLowerCase()||"landtrendr"===c.toLowerCase()))return[0];b=b&&b.BandProperties;var f;if(b&&b.length===h){var p=this.getWellKnownBandIndexes(b);
b=p.red;c=p.green;var r=p.blue;p=p.nir;null!=b&&null!=c&&null!=r?f=[b,c,r]:null!=p&&null!=b&&null!=c&&(f=[p,b,c])}!f&&3<=h&&(f=[0,1,2]);return f},getWellKnownBandIndexes:function(b){for(var h={},c=0;c<b.length;c++){var f=b[c],p=f.BandName&&f.BandName.toLowerCase();"red"===p?h.red=c:"green"===p?h.green=c:"blue"===p?h.blue=c:"nearinfrared"===p||"nearinfrared_1"===p||"nir"===p?h.nir=c:f.WavelengthMax&&f.WavelengthMin&&(p=f.WavelengthMin,f=f.WavelengthMax,null==h.blue&&410<=p&&480>=p&&480<=f&&540>=f?
h.blue=c:null==h.green&&490<=p&&560>=p&&560<=f&&610>=f?h.green=c:null==h.red&&595<=p&&670>=p&&660<=f&&730>=f?h.red=c:null==h.nir&&700<=p&&860>=p&&800<=f&&950>=f&&(h.nir=c))}return h},_getDefaultColormapRenderer:function(b,h){if(h||h.length){var c=[],f=this._ratContainsColormap(b);if(f)var p=this._getRATValueClassNameMap(b);h.forEach(function(r){var m=p?p[r[0]]:r[0];c.push({color:[r[1],r[2],r[3]],value:r[0],label:f?null!=m?m:"":r[0]})});return new u({colormapInfos:c})}},_ratContainsColormap:function(b){if(!b||
!b.fields)return!1;var h,c,f;return b.fields.some(function(p){p&&p.name&&(p=p.name.toLowerCase(),"red"===p&&(h=!0),"green"===p&&(c=!0),"blue"===p&&(f=!0));return h&&c&&f})},_getRATValueClassNameMap:function(b){if(!b||!b.fields)return null;var h={},c,f;b.fields.forEach(function(p){if("classname"===p.name.toLowerCase()||"class_name"===p.name.toLowerCase())c=p.name;"value"===p.name.toLowerCase()&&(f=p.name)});b.features.forEach(function(p){p=p.attributes;h[p[f]]=c?p[c]:p[f]});return h},_getDefaultScientificColorRamp:function(){return{type:"multipart",
colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}].map(function(b){return{fromColor:b.toColor,toColor:b.fromColor}}).reverse()}}}})},"esri/layers/rasterLib/renderer/RasterColormapRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","./RasterRenderer","../function/ColormapFunction"],function(g,e,t,u){return g([t],{declaredClass:"esri.layers.rasterLib.renderer.RasterColormapRenderer",rendererName:"Colormap",
renderTexture:!0,constructor:function(l){l&&l.colormapInfos&&(l.colormap=l.colormapInfos.map(function(q){return[q.value].concat(q.color)}));this._function=new u(l);this._function.outputPixelType="U8";this._function.renderTexture=!0},draw2D:function(l){this._updateColormapParameters();l=this._clonePixelData(l);return l=this._function._colorize(l)},drawGL:function(l){this._updateColormapParameters();this._function._colorizeGL(l)},toJson:function(){var l=this._function.toJson().rasterFunctionArguments;
return{rendererName:this.rendererName,rendererArguments:l}},toCommonRendererJson:function(){return{type:"rasterColormap",colormapInfos:this.colormapInfos||this.colormap.map(function(l){return{value:l[0],color:l.slice(1),label:l[0]}})}},_updateColormapParameters:function(){var l=this._function.functionArguments;l.colormap=this.colormap;l.colormapName=this.colormapName;l.colorRamp=this.colorRamp;l.colorRampName=this.colorRampName}})})},"esri/layers/rasterLib/renderer/RasterRenderer":function(){define(["dojo/_base/declare",
"dojo/_base/lang","../../../geometry/Extent","../../PixelBlock"],function(g,e,t,u){return g(null,{declaredClass:"esri.layers.rasterLib.renderer.RasterRenderer",raster:null,constructor:function(l){l=l||{};this.raster=l.raster||l.Raster||this.raster;this.draw=e.hitch(this,this.draw);this.bind=e.hitch(this,this.bind);l=e.clone(l);Object.keys(l).forEach(function(q){null==l[q]&&delete l[q]});e.mixin(this,l)},bind:function(l){if(!l)throw"failed to bind without options";var q=l;l.layer&&(l=l.layer,q={id:l.id,
rawRasterInfo:l.raster.rasterInfo,glSetting:l._glSetting,xformSetting:l.tileManager&&l.tileManager.xformSetting,useWebGL:l.useWebGL,resampling:l.tileMode&&l.tileManager&&l.tileManager.xformSetting.requireProjection&&!l._hasTilingEffects&&"Thematic"!==l.raster.dataType?1:0,tileMode:l.tileMode});this._rawRasterInfo=q.rawRasterInfo;this.useWebGL=q.useWebGL;this._function&&this._function.setProcessingContext(e.mixin({useProcessedData:!0},q));this._processingContext=q},hasTilingEffects:function(){},draw:function(l){return this.useWebGL?
this.drawGL(l):this.draw2D(l)},toJson:function(){},_clonePixelData:function(l){if(null==l)return l;var q={};l.extent&&(q.extent=new t(l.extent.xmin,l.extent.ymin,l.extent.xmax,l.extent.ymax,l.extent.spatialReference));l=l.processedPixelBlock||l.pixelBlock;if(null==l)return q;q.pixelBlock=l.clone?l.clone():u.prototype.clone(l);return q}})})},"esri/layers/rasterLib/renderer/RasterUniqueValueRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","./RasterRenderer","../function/ColormapFunction",
"../../../renderers/colorRampGenerator"],function(g,e,t,u,l){return g([t],{declaredClass:"esri.layers.rasterLib.renderer.RasterUniqueValueRenderer",rendererName:"UniqueValue",field:"",alias:"",uniqueValueInfos:null,constructor:function(q){q&&q.colormap&&(this.colormap=q.colormap,this._function=new u(q),this._function.outputPixelType="U8",this._function.renderTexture=!0)},bind:function(q){this.inherited(arguments);if(!this._function){var k=(this.raster&&this.raster.rasterInfo||this._rawRasterInfo).vat;
if(!k)throw"uv renderer requires data source to have raster attribute table";var a=this.attributeField||this.field1||this.field,d=this.infos||this.uniqueValueInfos;this.defaultColor=this.defaultColor||this.defaultSymbol&&this.defaultSymbol.color;var n=k.fields.filter(function(z){return"value"===z.name.toLowerCase()})[0];if(n)var b=n.name;a||((a=k.fields.filter(function(z){return-1<["classname","category"].indexOf(z.name.toLowerCase())})[0])||(a=k.fields.filter(function(z){return"esriFieldTypeString"===
z.type})[0]),this.alias=(this.field=a=a&&a.name||b)&&a.alias||b);var h=[],c;if(!d){d=[];var f=k.fields.filter(function(z){return"alpha"===z.name.toLowerCase()})[0];var p=k.fields.filter(function(z){return"red"===z.name.toLowerCase()})[0];var r=k.fields.filter(function(z){return"green"===z.name.toLowerCase()})[0];var m=k.fields.filter(function(z){return"blue"===z.name.toLowerCase()})[0];for(n=0;n<k.features.length;n++){var v=k.features[n].attributes;(c=d.some(function(z){z.value===v[a]}))||(f&&p&&
r&&m?d.push({value:v[a],alias:v[a],color:[v[p.name],v[r.name],v[m.name],v[f.name]]}):p&&r&&m?d.push({value:v[a],alias:v[a],color:[v[p.name],v[r.name],v[m.name]]}):d.push({value:v[a],alias:v[a]}))}if(!(p&&r&&m))for(c=l.createRandomColorRamp({size:d.length}),n=0;n<d.length;n++)d[n].color=c[n];this.uniqueValueInfos=d}if(d)d.forEach(function(z){h=h.concat(k.features.filter(function(A){return z.value==A.attributes[a]}).map(function(A){return[A.attributes[b]].concat(z.color||z.symbol&&z.symbol.color)}))}),
this.defaultColor&&k.features.filter(function(z){h.some(function(A){return A[0]===z.attributes[b]})||h.push([z.attributes[b]].concat(this.defaultColor))});else throw"missing uniqueValueInfos property";this._function=new u({colormap:h});this.colormap=h;this._function.outputPixelType="U8";this._function.renderTexture=!0;this._function.setProcessingContext(this._processingContext)}},draw2D:function(q){q=this._clonePixelData(q);return q=this._function._colorize(q)},drawGL:function(q){this._function._colorizeGL(q)},
toJson:function(q){var k={field:this.field,uniqueValueInfos:this.uniqueValueInfos,defaultColor:this.defaultColor};q&&(k.colormap=this.colormap);return{rendererName:this.rendererName,rendererArguments:k}},toCommonRendererJson:function(){var q=this.attributeField||this.field1||this.field,k=(this.infos||this.uniqueValueInfos).map(function(a){return{value:a.value,label:a.alias+"",symbol:{color:3===a.color.length?a.color.concat([255]):a.color,type:"esriSFS",style:"esriSFSSolid"}}});return{type:"uniqueValue",
field1:q,uniqueValueInfos:k}}})})},"esri/layers/rasterLib/renderer/RasterRGBRenderer":function(){define("dojo/_base/declare dojo/_base/lang ./RasterRenderer ../function/StretchFunction ../function/ContrastBrightnessFunction ../function/rasterUtils".split(" "),function(g,e,t,u,l,q){return g([t],{declaredClass:"esri.layers.rasterLib.renderer.RasterRGBRenderer",rendererName:"RGB",bandIndex:null,stretchType:0,min:0,max:255,numberOfStandardDeviations:2,statistics:null,histograms:null,dra:!1,minPercent:.25,
maxPercent:.5,useGamma:!1,gamma:null,computeGamma:!1,sigmoidStrengthLevel:1,constructor:function(k){this.stretchType="number"===typeof this.stretchType?this.stretchType:"none   standardDeviation histogramEqualization minMax percentClip   sigmoid".split(" ").indexOf(this.stretchType);k=e.mixin({},k,{stretchType:this.stretchType});this._stretchFunction=new u(k);this._stretchFunction.outputPixelType="U8";this._stretchFunction.renderTexture=!1;this.bandIndex=k.bandIndex||k.BandIndex;this._function=new l(k);
this._function.functionArguments.raster=this._stretchFunction;this._function.renderTexture=!0},hasTilingEffects:function(){return this._stretchFunction.hasTilingEffects()},draw2D:function(k){this._updateStretchParameters();k=this._clonePixelData(k);if("U8"===k.pixelBlock.pixelType&&!this.contrastOffset&&!this.brightnessOffset)return k;this._stretchFunction._stretch(k);var a=k.pixelBlock,d=this.bandIndex,n=Math.max.apply(null,d);a&&a.pixels.length>n&&d&&(a.pixels=d.map(function(b){return a.pixels[b]}),
a.statistics&&(a.statistics=d.map(function(b){return a.statistics[b]})));if(this.contrastOffset||this.brightnessOffset)k.pixelBlock=q.contrastBrightnessStretch(k.pixelBlock,{contrastOffset:this.contrastOffset,brightnessOffset:this.brightnessOffset});return k},drawGL:function(k){this._updateStretchParameters();k.pixelBlock&&(k=this._clonePixelData(k));var a=k.pixelBlock,d=this.bandIndex,n=Math.max.apply(null,d),b=this.statistics&&0<this.statistics.length?this.statistics:this._stretchFunction&&this._stretchFunction.srcStatistics,
h=this.histograms&&0<this.histograms.length?this.histograms:this._stretchFunction&&this._stretchFunction.srcHistograms,c,f;a&&a.pixels.length>n&&d&&(a.pixels=d.map(function(p){return a.pixels[p]}),a.statistics&&(a.statistics=d.map(function(p){return a.statistics[p]})),b&&0<b.length&&b.length!==d.length&&(c=d.map(function(p){return b[p]})),h&&0<h.length&&h.length!==d.length&&(f=d.map(function(p){return h[p]})));this._stretchFunction.functionArguments.statistics=c||b;this._stretchFunction.functionArguments.histograms=
f||h;this.contrastOffset||this.brightnessOffset?(this._stretchFunction.renderTexture=!1,this._function.renderTexture=!0,k=this._stretchFunction._stretchGL(k),this._function._cbGL(k)):(this._stretchFunction.renderTexture=!0,this._stretchFunction._stretchGL(k))},toJson:function(){var k=this._stretchFunction.toJson().rasterFunctionArguments;k.bandIndex=this.bandIndex;k.contrastOffset=this.contrastOffset;k.brightnessOffset=this.brightnessOffset;return{rendererName:this.rendererName,rendererArguments:k}},
toCommonRendererJson:function(){return{type:"rasterStretch",stretchType:"none   standardDeviation histogramEqualization minMax percentClip   sigmoid".split(" ")[this.stretchType]||"minMax",min:this.min,max:this.max,numberOfStandardDeviations:this.numberOfStandardDeviations,statistics:e.clone(this.statistics),dra:this.dra,minPercent:this.minPercent,maxPercent:this.maxPercent,useGamma:this.useGamma,gamma:e.clone(this.gamma),computeGamma:this.computeGamma,sigmoidStrengthLevel:this.sigmoidStrengthLevel}},
_updateStretchParameters:function(){var k=this._stretchFunction.functionArguments;k.stretchType=this.stretchType;k.min=this.min;k.max=this.max;k.numberOfStandardDeviations=this.numberOfStandardDeviations;k.statistics=this.statistics;k.histograms=this.histograms;k.dra=this.dra;k.minPercent=this.minPercent;k.maxPercent=this.maxPercent;k.useGamma=this.useGamma;k.gamma=this.gamma;k.computeGamma=this.computeGamma;this._stretchFunction.interpolation=this.interpolation}})})},"esri/layers/rasterLib/renderer/RasterStretchColorRampRenderer":function(){define("dojo/_base/declare dojo/_base/lang ./RasterRenderer ../function/ResampleFunction ../function/StretchFunction ../function/ContrastBrightnessFunction ../function/ColormapFunction ../function/rasterUtils".split(" "),
function(g,e,t,u,l,q,k,a){return g([t],{declaredClass:"esri.layers.rasterLib.renderer.RasterStretchColorRampRenderer",rendererName:"Stretch",bandIndex:[0],colorRamp:null,invert:!1,stretchType:0,min:0,max:255,numberOfStandardDeviations:2,statistics:null,histograms:null,dra:!1,minPercent:.25,maxPercent:.5,useGamma:!1,gamma:null,computeGamma:!1,sigmoidStrengthLevel:1,constructor:function(d){this.stretchType="number"===typeof this.stretchType?this.stretchType:"none   standardDeviation histogramEqualization minMax percentClip   sigmoid".split(" ").indexOf(this.stretchType);
d=e.mixin({},d,{stretchType:this.stretchType});Object.keys(d).forEach(function(n){null==d[n]&&delete d[n]});this._function=new q(d);this._stretchFunction=new l(d);this._stretchFunction.outputPixelType="U8";this._stretchFunction.renderTexture=!1;this._clrFunction=new k(d);this._clrFunction.functionArguments.raster=this._stretchFunction;this._clrFunction.renderTexture=!1;this._function.functionArguments.raster=this._clrFunction},hasTilingEffects:function(){return this._stretchFunction.hasTilingEffects()},
draw2D:function(d){this._updateStretchParameters();d=this._clonePixelData(d);if("U8"===d.pixelBlock.pixelType&&!(this.contrastOffset||this.brightnessOffset||this.colorRamp))return d;this._stretchFunction._stretch(d);var n=d.pixelBlock,b=this.bandIndex?this.bandIndex[0]:0;n&&1<n.pixels.length&&n.pixels.length>b&&(n.pixels=[n.pixels[b]],n.statistics&&(n.statistics=[n.statistics[b]]));this.colorRamp&&(d=this._clrFunction._colorize(d));if(this.contrastOffset||this.brightnessOffset)d.pixelBlock=a.contrastBrightnessStretch(d.pixelBlock,
{contrastOffset:this.contrastOffset,brightnessOffset:this.brightnessOffset});return d},drawGL:function(d){this._updateStretchParameters();d.pixelBlock&&(d=this._clonePixelData(d));var n=d.pixelBlock,b=this.bandIndex?this.bandIndex[0]||0:0,h=this.statistics&&0<this.statistics.length?this.statistics:this._stretchFunction&&this._stretchFunction.srcStatistics,c=this.histograms&&0<this.histograms.length?this.histograms:this._stretchFunction&&this._stretchFunction.srcHistograms,f,p;n&&1<n.pixels.length&&
n.pixels.length>b&&(n.pixels=[n.pixels[b]],n.statistics&&(n.statistics=[n.statistics[b]]),h&&h.length>b&&(f=[h[b]]),c&&c.length>b&&(p=[c[b]]));this._stretchFunction.functionArguments.statistics=f||h;this._stretchFunction.functionArguments.histograms=p||c;n=!!this.colorRamp;this.contrastOffset||this.brightnessOffset?(this._stretchFunction.renderTexture=!1,this._clrFunction.renderTexture=!1,this._function.renderTexture=!0,d=this._stretchFunction._stretchGL(d),n&&(d=this._clrFunction._colorizeGL(d)),
this._function._cbGL(d)):n?(this._stretchFunction.renderTexture=!1,this._clrFunction.renderTexture=!0,d=this._stretchFunction._stretchGL(d),this._clrFunction._colorizeGL(d)):(this._stretchFunction.renderTexture=!0,this._stretchFunction._stretchGL(d))},toJson:function(){var d=this._stretchFunction.toJson().rasterFunctionArguments;d.colorRamp=this.colorRamp||"";this.invert&&(d.invert=!0);d.contrastOffset=this.contrastOffset;d.brightnessOffset=this.brightnessOffset;return{rendererName:this.rendererName,
rendererArguments:d}},toCommonRendererJson:function(){return{type:"rasterStretch",stretchType:"none   standardDeviation histogramEqualization minMax percentClip   sigmoid".split(" ")[this.stretchType]||"minMax",colorRamp:this.colorRamp&&this.colorRamp.toJson?this.colorRamp.toJson():this.colorRamp,min:this.min,max:this.max,numberOfStandardDeviations:this.numberOfStandardDeviations,statistics:e.clone(this.statistics),dra:this.dra,minPercent:this.minPercent,maxPercent:this.maxPercent,useGamma:this.useGamma,
gamma:e.clone(this.gamma),computeGamma:this.computeGamma,sigmoidStrengthLevel:this.sigmoidStrengthLevel}},_updateStretchParameters:function(){var d=this._stretchFunction.functionArguments;d.stretchType=this.stretchType;d.min=this.min;d.max=this.max;d.numberOfStandardDeviations=this.numberOfStandardDeviations;d.statistics=this.statistics;d.histograms=this.histograms;d.dra=this.dra;d.minPercent=this.minPercent;d.maxPercent=this.maxPercent;d.useGamma=this.useGamma;d.gamma=this.gamma;d.computeGamma=this.computeGamma;
this._stretchFunction.interpolation=this.interpolation}})})},"esri/layers/rasterLib/renderer/RasterClassBreaksRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","./RasterRenderer","../function/ColormapFunction","../function/RemapFunction"],function(g,e,t,u,l){return g([t],{declaredClass:"esri.layers.rasterLib.renderer.RasterClassBreaksRenderer",rendererName:"ClassBreaks",renderTexture:!0,constructor:function(q){q=q||{};this._function=new l(q);this._function.outputPixelType="U8";var k=
q.classBreakInfos;q=q.minValue;null!=q&&k&&(this._function.functionArguments.colorBreaks=this._getSortedColorBreaks(q,k))},bind:function(q){this.inherited(arguments);this.isColormapFunction=!1;var k=this.raster&&this.raster.rasterInfo||this._rawRasterInfo,a=k&&k.vat;if(a&&"u8"===k.pixelType.toLowerCase()&&this.classBreakInfos){var d=this.field;if(k=a.fields.filter(function(p){return"value"===p.name.toLowerCase()})[0])var n=k.name;var b=a.features.sort(function(p,r){return parseFloat(p.attributes[d])-
parseFloat(r.attributes[d])})[0].attributes[d];this.isColormapFunction=!0;var h=[],c=this.field,f=this.classBreakInfos;f.forEach(function(p,r){a.features.forEach(function(m){var v=f[r-1]&&f[r-1].classMaxValue||b;m.attributes[c]<=p.classMaxValue&&(m.attributes[c]>v||m.attributes[c]===b)&&(v=p.symbol.color,h.some(function(z){return z[0]===m.attributes[n]})||h.push([m.attributes[n]].concat(v)))})});this._function=new u({colormap:h});this.colormap=h;this._function.outputPixelType="U8";this._function.renderTexture=
!0}this._function&&this._function.setProcessingContext(e.mixin({useProcessedData:!0},this._processingContext))},draw2D:function(q){if(this.isColormapFunction)return this._updateColormapParameters(),q=this._clonePixelData(q),q=this._function._colorize(q);this._updateRemapParameters();return this._function._remap(q)},drawGL:function(q){this.isColormapFunction?(this._updateColormapParameters(),this._function._colorizeGL(q)):(this._function.renderTexture=!0,this._updateRemapParameters(),this._function._remapGL(q))},
toJson:function(){var q=this._function.toJson().rasterFunctionArguments;return{rendererName:this.rendererName,rendererArguments:q}},toCommonRendererJson:function(){var q,k=this.classBreakInfos,a=this.colorBreaks;if(null==k&&a)for(k=[],q=0;q<a.length-1;q++)k.push({classMaxValue:a[q+1].value,symbol:{color:a[q].mappedColor,type:"esriSFS",style:"esriSFSSolid"},label:a[q].value+" - "+a[q+1].value});return{type:"classBreaks",field:"Value",minValue:null!=this.minValue?this.minValue:a[0].value,classBreakInfos:k}},
_updateRemapParameters:function(){var q=this.classBreakInfos,k=this.minValue;null!=k&&q&&(this._function.functionArguments.colorBreaks=this._getSortedColorBreaks(k,q))},_getSortedColorBreaks:function(q,k){k=k.map(function(d){return{maxValue:d.classMaxValue,color:d.symbol.color}}).sort(function(d,n){return d.maxValue-n.maxValue});var a=[{value:q,mappedColor:k[0].color}];for(q=0;q<k.length;q++)a.push({value:k[q].maxValue,mappedColor:q===k.length-1?k[q].color:k[q+1].color});return a},_updateColormapParameters:function(){this._function.functionArguments.colormap=
this.colormap;this._function.interpolation=this.interpolation}})})},"esri/layers/rasterLib/renderer/RasterShadedReliefRenderer":function(){define("dojo/_base/declare dojo/_base/lang ./RasterRenderer ../function/HillshadeFunction ../function/ContrastBrightnessFunction ../function/ColormapFunction ../function/rasterUtils".split(" "),function(g,e,t,u,l,q,k){return g([t],{declaredClass:"esri.layers.rasterLib.renderer.RasterShadedReliefRenderer",rendererName:"ShadedRelief",hillshadeType:null,azimuth:315,
altitude:45,zFactor:1,slopeType:null,psPower:.664,psFactor:.024,raster:null,constructor:function(a){this.hillshadeType="number"===typeof this.hillshadeType?this.hillshadeType:["traditional","multi-directional"].indexOf(this.hillshadeType);a&&a.scalingType&&(this.slopeType="adjusted"===a.scalingType?3:1);a&&a.pixelSizePower&&(this.psPower=a.pixelSizePower);a&&a.pixelSizeFactor&&(this.psFactor=a.pixelSizeFactor);a=e.mixin({},a,{hillshadeType:this.hillshadeType,psPower:this.psPower,psFactor:this.psFactor,
slopeType:this.slopeType});Object.keys(a).forEach(function(d){null==a[d]&&delete a[d]});this._function=new l(a);this._hillshadeFunction=new u(a);this._hillshadeFunction.outputPixelType="U8";this._hillshadeFunction.renderTexture=!1;this._function.functionArguments.raster=this._hillshadeFunction},hasTilingEffects:function(){return this._hillshadeFunction.hasTilingEffects()},draw2D:function(a){this._updateHillshadeParameters();a=this._clonePixelData(a);a=this._hillshadeFunction.read2D({raster:a});if(this.contrastOffset||
this.brightnessOffset)a.pixelBlock=k.contrastBrightnessStretch(a.pixelBlock,{contrastOffset:this.contrastOffset,brightnessOffset:this.brightnessOffset});return a},drawGL:function(a){this._updateHillshadeParameters();this.contrastOffset||this.brightnessOffset?(this._hillshadeFunction.renderTexture=!1,this._function.renderTexture=!0,a=this._hillshadeFunction.readGL({raster:a}),this._function._cbGL(a)):(this._hillshadeFunction.renderTexture=!0,this._hillshadeFunction.readGL({raster:a}))},toJson:function(){var a=
this._hillshadeFunction.toJson().rasterFunctionArguments;a.colorRamp=this.colorRamp||"";this.invert&&(a.invert=!0);a.contrastOffset=this.contrastOffset;a.brightnessOffset=this.brightnessOffset;return{rendererName:this.rendererName,rendererArguments:a}},toCommonRendererJson:function(){return{type:"rasterShadedRelief",hillshadeType:["traditional","multi-directional"][this.hillshadeType]||"traditional",azimuth:this.azimuth,altitude:this.altitude,zFactor:this.zFactor,scalingType:3===this.slopeType?"adjusted":
"none",pixelSizePower:this.psPower,pixelSizeFactor:this.psFactor,colorRamp:this.colorRamp&&this.colorRamp.toJson?this.colorRamp.toJson():this.colorRamp}},_updateHillshadeParameters:function(){var a=this._hillshadeFunction.functionArguments;a.hillshadeType=this.hillshadeType;a.azimuth=this.azimuth;a.altitude=this.altitude;a.zFactor=this.zFactor;a.slopeType=this.slopeType;a.psPower=this.psPower;a.psFactor=this.psFactor}})})},"esri/layers/rasterLib/raster/rasterProjectionHelper":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/sniff ../../../kernel ../../../WKIDUnitConversion ../../../geometry/Extent ../../../geometry/projection ../../../geometry/webMercatorUtils ../../../SpatialReference ../../../geometry/Point".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b){g={requirePE:function(c,f){return!(c.equals(f)||c._canProject(f))},load:function(){var c=new t;if(!this._loadPromise)if(a.isSupported())this._loadPromise=a.load();else{var f=new t;f.reject("projection engine is not supported on this version of the browser, please try with a modern browser");this._loadPromise=f.promise}this._loadPromise.isFulfilled()?this._loadPromise.isResolved()?c.resolve():this._loadPromise.isRejected()&&c.resolve():(this._pendingdfds=this._pendingdfds||
[],this._pendingdfds.push(c),this._loadPromise.then(e.hitch(this,function(){this._pendingdfds.forEach(function(p){p.isFulfilled()||p.resolve()})}),e.hitch(this,function(){this._pendingdfds.forEach(function(p){p.isFulfilled()||p.reject()})})));return c.promise},computeError:function(c,f){return[Math.abs((c[0]+c[4]+c[4*f.rows]+c[4*f.rows+4])/4-c[2*f.rows+2]),Math.abs((c[1]+c[5]+c[4*f.rows+1]+c[4*f.rows+5])/4-c[2*f.rows+3])]},getDefaultDatumTransformationForDataset:function(c,f,p){if(!(f&&c.spatialReference&&
this.requirePE(c.spatialReference,f)&&a.isLoaded()))return null;c=new k(c.toJson());f=new n(f.toJson());return p?a.getTransformation(f,c.spatialReference,c):a.getTransformation(c.spatialReference,f,c)},project:function(c,f,p){if(!f||c.spatialReference.equals(f))return c;var r=a.isLoaded()?a:d;"esri.geometry.Extent"===c.declaredClass?c=new k(c.toJson()):"esri.geometry.Point"===c.declaredClass&&(c=new b(c.toJson()));f=new n(f.toJson());(c=r.project(c,f))&&"esri.geometry.Extent"===c.declaredClass?(c=
new k(c.toJson()),p&&(1E-5>Math.abs(c.xmin+180)&&1E-5>Math.abs(c.xmax-180)?(c.xmin=0,c.xmax=360):(0>c.xmin&&(c.xmin+=360,c.xmax+=360),0>c.xmax&&(c.xmax+=360)))):c&&"esri.geometry.Point"===c.declaredClass&&(c=new b(c.toJson()),p&&0>c.x&&(c.x+=360));return c},projectResolution:function(c,f,p){var r=p.xmin+(p.xmax-p.xmin)/2;p=p.ymin+(p.ymax-p.ymin)/2;c=new k(r,p,r+c.x,p+c.y,c.spatialReference);c=this.project(c,f);return new b(c.xmax-c.xmin,c.ymax-c.ymin,f)},getProjectionOffsetGrid:function(c,f,p,r,m,
v,z){null==z&&(z=[32,32]);var A=c.xmin,D=c.ymin,E=c.xmax,F=c.ymax,y=c.spatialReference,x=f.spatialReference,w=a.isLoaded()?a:d,C=m?-m:null,B=z[0]*p.x,I=z[1]*p.y;E={cols:Math.ceil((E-A)/B)+1,rows:Math.ceil((F-D)/I)+1};c=[];for(F=0;F<E.cols;F++){var N=V;var V=[];for(p=0;p<E.rows;p++){var Y=new b({x:A+B*F,y:D+I*p,spatialReference:y});Y=w.project(Y,x,v);if(!Y)return null;r&&0>Y.x&&(Y.x+=360);V.push(Y);0<F&&null!=C&&Y.x<N[p].x&&(Y.x+=m-C,Y.x<N[p].x&&(Y.x+=m-C));c.push((Y.x-f.xmin)/(f.xmax-f.xmin));c.push((Y.y-
f.ymin)/(f.ymax-f.ymin))}}f=this.computeError(c,E);r=new Float32Array((E.cols-1)*(E.rows-1)*12);m=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]);v=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(F=0;F<E.cols-1;F++)for(p=0;p<E.rows-1;p++){B=F*E.rows*2+2*p;A=c[B];D=c[B+1];V=c[B+2];y=c[B+3];B+=2*E.rows;x=c[B];w=c[B+1];C=c[B+2];I=c[B+3];N=0;Y=12*(p*(E.cols-1)+F);for(B=0;3>B;B++)r[Y++]=m[N++]*A+m[N++]*V+m[N++]*C;for(B=N=0;3>B;B++)r[Y++]=m[N++]*D+m[N++]*y+m[N++]*I;for(B=N=0;3>B;B++)r[Y++]=v[N++]*A+v[N++]*x+v[N++]*
C;for(B=N=0;3>B;B++)r[Y++]=v[N++]*D+v[N++]*w+v[N++]*I}return{offsets:c,error:f,coefficients:r,spacing:z,size:[E.cols-1,E.rows-1]}},getHalfWorldWidth:function(c){var f=c&&c.wkid;if(null!=f)return c.isWebMercator()&&(f=3857),null==q[f]?180:h[f]}};e.setObject("layers.rasterLib.raster.rasterProjectionHelper",g,l);var h={3395:2.0037508342789244E7,3410:1.7334193943686873E7,3857:2.0037508342788905E7,3975:1.7367530445161372E7,4087:2.0037508342789244E7,4088:2.0015108787169147E7,6933:1.7367530445161372E7,32662:2.0037508342789244E7,
53001:2.001508679602057E7,53002:1.000754339801029E7,53003:2.001508679602057E7,53004:2.001508679602057E7,53016:1.4152803599503474E7,53017:1.7333573624304302E7,53034:2.001508679602057E7,53079:2.0015114352186374E7,53080:2.0015114352186374E7,54001:2.0037508342789244E7,54002:1.0018754171394624E7,54003:2.0037508342789244E7,54004:2.0037508342789244E7,54016:1.4168658027268292E7,54017:1.736753044516137E7,54034:2.0037508342789244E7,54079:2.0037508342789244E7,54080:2.0037508342789244E7,54100:2.0037508342789244E7,
54101:2.0037508342789244E7};return g})},"esri/geometry/projection":function(){define("require exports dojo/Deferred ./pe ../SpatialReference ./GeographicTransformation".split(" "),function(g,e,t,u,l,q){function k(h,c,f,p,r){void 0===p&&(p=null);void 0===r&&(r=!1);if(null===p){var m=q.cacheKey(c,f);void 0!==b[m]?p=b[m]:(p=a(c,f,null),null===p&&(p=new q),b[m]=p)}return d._project(h,c,f instanceof l||!1===r?f:new l(f),p,r)}function a(h,c,f){void 0===f&&(f=null);h=d._getTransformation(h,c,f);return null!==
h?q.fromGE(h):null}Object.defineProperty(e,"__esModule",{value:!0});var d=null;e.isLoaded=function(){return!!d&&u.isLoaded()};e.isSupported=function(){return u.isSupported()};var n=null;e.load=function(){if(n)return n.promise;n=new t;var h=u.load();g(["./geometryEngine"],function(c){d=c;h.then(function(){d._enableProjection(u);n.resolve()},function(f){n.reject(f)})});return n.promise};e.project=function(h,c,f){void 0===f&&(f=null);return h instanceof Array?0===h.length?[]:k(h,h[0].spatialReference,
c,f):k([h],h.spatialReference,c,f)[0]};var b={};e.projectMany=k;e.getTransformation=a;e.getTransformations=function(h,c,f){void 0===f&&(f=null);h=d._getTransformationBySuitability(h,c,f);if(null!==h){c=[];for(f=0;f<h.length;f++)c.push(q.fromGE(h[f]));return c}return[]}})},"esri/geometry/pe":function(){define(["require","exports","../core/tsSupport/extendsHelper","dojo/Deferred","../core/sniff"],function(g,e,t,u,l){function q(m){function v(E,F,y){E[F]=y(E[F])}e._pe=m;h.init();c.init();f.init();p.init();
r.init();e.PeGCSExtent=function(E){function F(){return null!==E&&E.apply(this,arguments)||this}t(F,E);F.prototype.destroy=function(){e._pe.destroy(this)};return F}(e._pe.PeGCSExtent);for(var z=0,A=[e._pe.PeDatum,e._pe.PeGeogcs,e._pe.PeGeogtran,e._pe.PeObject,e._pe.PeParameter,e._pe.PePrimem,e._pe.PeProjcs,e._pe.PeSpheroid,e._pe.PeUnit];z<A.length;z++)m=A[z],v(m.prototype,"getName",function(E){return function(){return E.call(this,Array(h.PE_NAME_MAX))}});z=0;for(A=[e._pe.PeGeogtran,e._pe.PeProjcs];z<
A.length;z++)m=A[z],v(m.prototype,"getParameters",function(E){return function(){for(var F=Array(h.PE_PARM_MAX),y=E.call(this),x=0;x<F.length;x++){var w=e._pe.getValue(y,"*");F[x]=w?e._pe.wrapPointer(w,e._pe.PeParameter):null;y+=Int32Array.BYTES_PER_ELEMENT}return F}});v(e._pe.PeHorizon.prototype,"getCoord",function(E){return function(){var F=this.getSize();if(!F)return null;var y=[],x=E.call(this);n(y,F,x);return y}});v(e._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(E){var F=e._pe._pe_getPeGTlistExtendedGTsSize();
return function(){var y=null,x=E.call(this);if(!e._pe.compare(x,e._pe.NULL)){y=[x];var w=this.getSteps();if(1<w){x=e._pe.getPointer(x);for(var C=1;C<w;C++)y.push(e._pe.wrapPointer(x+F*C,e._pe.PeGTlistExtendedGTs))}}return y}});var D=e._pe._pe_getPeHorizonSize();m=function(E){return function(){var F=this._cache;F||(this._cache=F=new Map);if(F.has(E))return F.get(E);var y=null,x=E.call(this);if(!e._pe.compare(x,e._pe.NULL)){y=[x];var w=x.getNump();if(1<w){x=e._pe.getPointer(x);for(var C=1;C<w;C++)y.push(e._pe.wrapPointer(x+
D*C,e._pe.PeHorizon))}}F.set(E,y);return y}};v(e._pe.PeProjcs.prototype,"horizonGcsGenerate",m);v(e._pe.PeProjcs.prototype,"horizonPcsGenerate",m);e._pe.PeObject.prototype.toString=function(E){void 0===E&&(E=h.PE_STR_OPTS_NONE);e._pe.ensureCache.prepare();var F=e._pe.getPointer(this),y=e._pe.ensureInt8(Array(h.PE_BUFFER_MAX));return e._pe.UTF8ToString(e._pe._pe_object_to_string_ext(F,E,y))}}function k(m){if(m){var v=e._pe.getClass(m);v&&(v=e._pe.getCache(v))&&(m=e._pe.getPointer(m))&&delete v[m]}}
function a(m,v){var z=[];v=Array(v);for(var A=0;A<m;A++)z.push(e._pe.ensureInt8(v));return z}function d(m){if(Array.isArray(m[0])){var v=[];m.forEach(function(z){v.push(z[0],z[1])})}else v=m;return v}function n(m,v,z,A){void 0===A&&(A=!1);if(A)for(A=0;A<2*v;A++)m[A]=e._pe.getValue(z+A*Float64Array.BYTES_PER_ELEMENT,"double");else{var D=0===m.length;for(A=0;A<v;A++)D&&(m[A]=Array(2)),m[A][0]=e._pe.getValue(z,"double"),m[A][1]=e._pe.getValue(z+Float64Array.BYTES_PER_ELEMENT,"double"),z+=2*Float64Array.BYTES_PER_ELEMENT}}
Object.defineProperty(e,"__esModule",{value:!0});var b;e._pe=null;e.isLoaded=function(){return!!e._pe};e.isSupported=function(){return!!l("esri-wasm")};e.load=function(){if(b)return b.promise;b=new u;g(["./support/pe-wasm"],function(m){m({locateFile:function(v){return g.toUrl("./support/"+v)},onAbort:function(v){b.reject(Error(v))}}).then(function(v){q(v);b.resolve()})});return b.promise};(function(m){function v(D,E,F){e._pe.ensureCache.prepare();var y=d(F),x=F===y;y=e._pe.ensureFloat64(y);(D=e._pe._pe_geog_to_proj(e._pe.getPointer(D),
E,y))&&n(F,E,y,x);return D}function z(D,E,F){return A(D,E,F,0)}function A(D,E,F,y){e._pe.ensureCache.prepare();var x=d(F),w=F===x;x=e._pe.ensureFloat64(x);(D=e._pe._pe_proj_to_geog_center(e._pe.getPointer(D),E,x,y))&&n(F,E,x,w);return D}m.geogToProj=v;m.projGeog=function(D,E,F,y){switch(y){case h.PE_TRANSFORM_P_TO_G:return z(D,E,F);case h.PE_TRANSFORM_G_TO_P:return v(D,E,F)}return 0};m.projToGeog=z;m.projToGeogCenter=A})(e.PeCSTransformations||(e.PeCSTransformations={}));var h;(function(m){m.init=
function(){m.PE_BUFFER_MAX=e._pe.PeDefs.prototype.PE_BUFFER_MAX;m.PE_NAME_MAX=e._pe.PeDefs.prototype.PE_NAME_MAX;m.PE_MGRS_MAX=e._pe.PeDefs.prototype.PE_MGRS_MAX;m.PE_USNG_MAX=e._pe.PeDefs.prototype.PE_USNG_MAX;m.PE_DD_MAX=e._pe.PeDefs.prototype.PE_DD_MAX;m.PE_DDM_MAX=e._pe.PeDefs.prototype.PE_DDM_MAX;m.PE_DMS_MAX=e._pe.PeDefs.prototype.PE_DMS_MAX;m.PE_UTM_MAX=e._pe.PeDefs.prototype.PE_UTM_MAX;m.PE_PARM_MAX=e._pe.PeDefs.prototype.PE_PARM_MAX;m.PE_TYPE_NONE=e._pe.PeDefs.prototype.PE_TYPE_NONE;m.PE_TYPE_GEOGCS=
e._pe.PeDefs.prototype.PE_TYPE_GEOGCS;m.PE_TYPE_PROJCS=e._pe.PeDefs.prototype.PE_TYPE_PROJCS;m.PE_TYPE_GEOGTRAN=e._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;m.PE_TYPE_COORDSYS=e._pe.PeDefs.prototype.PE_TYPE_COORDSYS;m.PE_TYPE_UNIT=e._pe.PeDefs.prototype.PE_TYPE_UNIT;m.PE_STR_OPTS_NONE=e._pe.PeDefs.prototype.PE_STR_OPTS_NONE;m.PE_STR_AUTH_NONE=e._pe.PeDefs.prototype.PE_STR_AUTH_NONE;m.PE_STR_AUTH_TOP=e._pe.PeDefs.prototype.PE_STR_AUTH_TOP;m.PE_STR_NAME_CANON=e._pe.PeDefs.prototype.PE_STR_NAME_CANON;m.PE_PARM_X0=
e._pe.PeDefs.prototype.PE_PARM_X0;m.PE_PARM_ND=e._pe.PeDefs.prototype.PE_PARM_ND;m.PE_TRANSFORM_1_TO_2=e._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;m.PE_TRANSFORM_2_TO_1=e._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;m.PE_TRANSFORM_P_TO_G=e._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;m.PE_TRANSFORM_G_TO_P=e._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;m.PE_HORIZON_RECT=e._pe.PeDefs.prototype.PE_HORIZON_RECT;m.PE_HORIZON_POLY=e._pe.PeDefs.prototype.PE_HORIZON_POLY;m.PE_HORIZON_LINE=e._pe.PeDefs.prototype.PE_HORIZON_LINE;
m.PE_HORIZON_DELTA=e._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(h=e.PeDefs||(e.PeDefs={}));(function(m){function v(E,F){var y=null,x=A[E];x||(x={},A[E]=x);x.hasOwnProperty(String(F))?y=x[F]:(E=e._pe.PeFactory.prototype.factoryByType(E,F),e._pe.compare(E,e._pe.NULL)||(y=E,x[F]=y));return y=z(y)}function z(E){if(E){var F=E.getType();switch(F){case h.PE_TYPE_GEOGCS:E=e._pe.castObject(E,e._pe.PeGeogcs);break;case h.PE_TYPE_PROJCS:E=e._pe.castObject(E,e._pe.PeProjcs);break;case h.PE_TYPE_GEOGTRAN:E=e._pe.castObject(E,
e._pe.PeGeogtran);break;default:F&h.PE_TYPE_UNIT&&(E=e._pe.castObject(E,e._pe.PeUnit))}}return E}var A={},D={};m.initialize=function(){e._pe.PeFactory.prototype.initialize(null)};m.coordsys=function(E){return v(h.PE_TYPE_COORDSYS,E)};m.factoryByType=v;m.fromString=function(E,F){var y=null,x=D[E];x||(x={},D[E]=x);x.hasOwnProperty(F)?y=x[F]:(E=e._pe.PeFactory.prototype.fromString(E,F),e._pe.compare(E,e._pe.NULL)||(y=E,x[F]=y));return y=z(y)};m.geogcs=function(E){return v(h.PE_TYPE_GEOGCS,E)};m.geogtran=
function(E){return v(h.PE_TYPE_GEOGTRAN,E)};m.getCode=function(E){return e._pe.PeFactory.prototype.getCode(E)};m.projcs=function(E){return v(h.PE_TYPE_PROJCS,E)};m.unit=function(E){return v(h.PE_TYPE_UNIT,E)}})(e.PeFactory||(e.PeFactory={}));e.PeGCSExtent=null;var c;(function(m){var v;m.init=function(){m.PE_GTLIST_OPTS_COMMON=e._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;v=e._pe._pe_getPeGTlistExtendedEntrySize()};m.getGTlist=function(z,A,D,E,F,y){var x=null,w=new e._pe.PeInteger(y);try{var C=
e._pe.PeGTlistExtended.prototype.getGTlist(z,A,D,E,F,w);if(y=w.val)if(x=[C],1<y){var B=e._pe.getPointer(C);for(z=1;z<y;z++)x.push(e._pe.wrapPointer(B+v*z,e._pe.PeGTlistExtendedEntry))}}finally{e._pe.destroy(w)}return x}})(c=e.PeGTlistExtended||(e.PeGTlistExtended={}));(function(m){m.destroy=function(v){if(v&&v.length){for(var z=0;z<v.length;z++){var A=v[z];k(A);A.getEntries().forEach(function(D){k(D);D=D.getGeogtran();k(D);D.getParameters().forEach(k);[D.getGeogcs1(),D.getGeogcs2()].forEach(function(E){k(E);
var F=E.getDatum();k(F);k(F.getSpheroid());k(E.getPrimem());k(E.getUnit())})})}e._pe.PeGTlistExtendedEntry.prototype.Delete(v[0])}}})(e.PeGTlistExtendedEntry||(e.PeGTlistExtendedEntry={}));(function(m){m.geogToGeog=function(v,z,A,D,E){e._pe.ensureCache.prepare();var F=d(A),y=A===F;F=e._pe.ensureFloat64(F);var x=0;D&&(x=e._pe.ensureFloat64(D));(v=e._pe._pe_geog_to_geog(e._pe.getPointer(v),z,F,x,E))&&n(A,z,F,y);return v}})(e.PeGTTransformations||(e.PeGTTransformations={}));(function(m){function v(A,
D,E,F,y,x){e._pe.ensureCache.prepare();switch(A){case "dd":var w=e._pe._pe_geog_to_dd;var C=h.PE_DD_MAX;break;case "ddm":w=e._pe._pe_geog_to_ddm;C=h.PE_DDM_MAX;break;case "dms":w=e._pe._pe_geog_to_dms,C=h.PE_DMS_MAX}A=0;D&&(A=e._pe.getPointer(D));D=d(F);D=e._pe.ensureFloat64(D);C=a(E,C);F=e._pe.ensureInt32(C);if(y=w(A,E,D,y,F))for(w=0;w<E;w++)x[w]=e._pe.UTF8ToString(C[w]);return y}function z(A,D,E,F,y){e._pe.ensureCache.prepare();switch(A){case "dd":var x=e._pe._pe_dd_to_geog;break;case "ddm":x=e._pe._pe_ddm_to_geog;
break;case "dms":x=e._pe._pe_dms_to_geog}A=0;D&&(A=e._pe.getPointer(D));D=F.map(function(w){return e._pe.ensureString(w)});F=e._pe.ensureInt32(D);D=e._pe.ensureFloat64(Array(2*E));(x=x(A,E,F,D))&&n(y,E,D);return x}m.geog_to_dms=function(A,D,E,F,y){return v("dms",A,D,E,F,y)};m.dms_to_geog=function(A,D,E,F){return z("dms",A,D,E,F)};m.geog_to_ddm=function(A,D,E,F,y){return v("ddm",A,D,E,F,y)};m.ddm_to_geog=function(A,D,E,F){return z("ddm",A,D,E,F)};m.geog_to_dd=function(A,D,E,F,y){return v("dd",A,D,
E,F,y)};m.dd_to_geog=function(A,D,E,F){return z("dd",A,D,E,F)}})(e.PeNotationDms||(e.PeNotationDms={}));var f;(function(m){m.init=function(){m.PE_MGRS_STYLE_NEW=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;m.PE_MGRS_STYLE_OLD=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;m.PE_MGRS_STYLE_AUTO=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;m.PE_MGRS_180_ZONE_1_PLUS=e._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;m.PE_MGRS_ADD_SPACES=e._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};
m.geog_to_mgrs_extended=function(v,z,A,D,E,F,y){e._pe.ensureCache.prepare();var x=0;v&&(x=e._pe.getPointer(v));v=d(A);A=e._pe.ensureFloat64(v);v=a(z,h.PE_MGRS_MAX);var w=e._pe.ensureInt32(v);if(D=e._pe._pe_geog_to_mgrs_extended(x,z,A,D,E,F,w))for(E=0;E<z;E++)y[E]=e._pe.UTF8ToString(v[E]);return D};m.mgrs_to_geog_extended=function(v,z,A,D,E){e._pe.ensureCache.prepare();var F=0;v&&(F=e._pe.getPointer(v));v=A.map(function(y){return e._pe.ensureString(y)});A=e._pe.ensureInt32(v);v=e._pe.ensureFloat64(Array(2*
z));(D=e._pe._pe_mgrs_to_geog_extended(F,z,A,D,v))&&n(E,z,v);return D}})(f=e.PeNotationMgrs||(e.PeNotationMgrs={}));(function(m){m.geog_to_usng=function(v,z,A,D,E,F,y){e._pe.ensureCache.prepare();var x=0;v&&(x=e._pe.getPointer(v));v=d(A);A=e._pe.ensureFloat64(v);v=a(z,h.PE_MGRS_MAX);var w=e._pe.ensureInt32(v);if(D=e._pe._pe_geog_to_usng(x,z,A,D,E,F,w))for(E=0;E<z;E++)y[E]=e._pe.UTF8ToString(v[E]);return D};m.usng_to_geog=function(v,z,A,D){e._pe.ensureCache.prepare();var E=0;v&&(E=e._pe.getPointer(v));
v=A.map(function(F){return e._pe.ensureString(F)});A=e._pe.ensureInt32(v);v=e._pe.ensureFloat64(Array(2*z));(E=e._pe._pe_usng_to_geog(E,z,A,v))&&n(D,z,v);return E}})(e.PeNotationUsng||(e.PeNotationUsng={}));var p;(function(m){m.init=function(){m.PE_UTM_OPTS_NONE=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;m.PE_UTM_OPTS_ADD_SPACES=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;m.PE_UTM_OPTS_NS=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};m.geog_to_utm=function(v,z,A,D,E){e._pe.ensureCache.prepare();
var F=0;v&&(F=e._pe.getPointer(v));v=d(A);A=e._pe.ensureFloat64(v);v=a(z,h.PE_UTM_MAX);var y=e._pe.ensureInt32(v);if(D=e._pe._pe_geog_to_utm(F,z,A,D,y))for(F=0;F<z;F++)E[F]=e._pe.UTF8ToString(v[F]);return D};m.utm_to_geog=function(v,z,A,D,E){e._pe.ensureCache.prepare();var F=0;v&&(F=e._pe.getPointer(v));v=A.map(function(y){return e._pe.ensureString(y)});A=e._pe.ensureInt32(v);v=e._pe.ensureFloat64(Array(2*z));(D=e._pe._pe_utm_to_geog(F,z,A,D,v))&&n(E,z,v);return D}})(p=e.PeNotationUtm||(e.PeNotationUtm=
{}));var r;(function(m){var v=new Map;m.init=function(){m.PE_PCSINFO_OPTION_NONE=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;m.PE_PCSINFO_OPTION_DOMAIN=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;m.PE_POLE_OUTSIDE_BOUNDARY=e._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;m.PE_POLE_POINT=e._pe.PePCSInfo.prototype.PE_POLE_POINT};m.generate=function(z,A){void 0===A&&(A=m.PE_PCSINFO_OPTION_DOMAIN);var D;if(v.has(z)){var E=v.get(z);E[A]&&(D=E[A])}D||(D=e._pe.PePCSInfo.prototype.generate(z,
A),E||(E=[],v.set(z,E)),E[A]=D);return D}})(r=e.PePCSInfo||(e.PePCSInfo={}));(function(m){m.version_string=function(){return e._pe.PeVersion.prototype.version_string()}})(e.PeVersion||(e.PeVersion={}));e._init=q})},"esri/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var u in t)t.hasOwnProperty(u)&&(e[u]=t[u])};return function(e,t){function u(){this.constructor=
e}g(e,t);e.prototype=null===t?Object.create(t):(u.prototype=t.prototype,new u)}}()})},"esri/geometry/GeographicTransformation":function(){define(["require","exports","./GeographicTransformationStep"],function(g,e,t){return function(){function u(l){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(l&&l.steps){var q=0;for(l=l.steps;q<l.length;q++){var k=l[q];k instanceof t?this.steps.push(k):this.steps.push(new t({wkid:k.wkid,wkt:k.wkt,isInverse:k.isInverse}))}}}u.cacheKey=
function(l,q){return[void 0!==l.wkid&&null!==l.wkid?l.wkid.toString():"-1",void 0!==l.wkt&&null!==l.wkt?l.wkt.toString():"",void 0!==q.wkid&&null!==q.wkid?q.wkid.toString():"-1",void 0!==q.wkt&&null!==q.wkt?q.wkt.toString():""].join()};u.fromGE=function(l){var q=new u,k="",a=0;for(l=l.steps;a<l.length;a++){var d=t.fromGE(l[a]);q.steps.push(d);k+=d.uid.toString()+","}q._cached_projection={};q._gtlistentry=null;q._chain=k;return q};u.prototype.getInverse=function(){var l=new u;l.steps=[];for(var q=
this.steps.length-1;0<=q;q--)l.steps.push(this.steps[q].getInverse());return l};u.prototype.getGTListEntry=function(){for(var l="",q=0,k=this.steps;q<k.length;q++)l+=k[q].uid.toString()+",";l!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=l);return this._gtlistentry};u.prototype.assignCachedGe=function(l,q,k){this._cached_projection[u.cacheKey(l,q)]=k};u.prototype.getCachedGeTransformation=function(l,q){for(var k="",a=0,d=this.steps;a<d.length;a++)k+=d[a].uid.toString()+
",";k!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=k);l=this._cached_projection[u.cacheKey(l,q)];return void 0===l?null:l};return u}()})},"esri/geometry/GeographicTransformationStep":function(){define(["require","exports"],function(g,e){var t=0;return function(){function u(l){void 0===l&&(l=null);this.uid=t++;l?(this._wkt=void 0!==l.wkt?l.wkt:null,this._wkid=void 0!==l.wkid?l.wkid:-1,this._isInverse=void 0!==l.isInverse?!0===l.isInverse:!1):(this._wkt=null,this._wkid=
-1,this._isInverse=!1)}u.fromGE=function(l){var q=new u;q._wkt=l.wkt;q._wkid=l.wkid;q._isInverse=l.isInverse;return q};Object.defineProperty(u.prototype,"wkt",{get:function(){return this._wkt},set:function(l){this._wkt=l;this.uid=t++},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"wkid",{get:function(){return this._wkid},set:function(l){this._wkid=l;this.uid=t++},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"isInverse",{get:function(){return this._isInverse},
set:function(l){this._isInverse=l;this.uid=t++},enumerable:!0,configurable:!0});u.prototype.getInverse=function(){var l=new u;l._wkt=this.wkt;l._wkid=this._wkid;l._isInverse=!this.isInverse;return l};return u}()})},"esri/layers/rasterLib/raster/TileServiceRaster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/_base/json dojo/sniff dojo/DeferredList dojo/when ../../../kernel ../../../Evented ../../../request ../../../geometry/Extent ../../../geometry/Point ../../../SpatialReference ../../../deferredUtils ../../../urlUtils ../../PixelBlock ../../rasterFormats/rasterCodec ../tile/RasterTileInfo ./RasterInfo ./BasicRaster".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h,c,f,p,r,m,v,z,A,D,E,F){g=e([F],{declaredClass:"esri.layers.rasterLib.raster.TileServiceRaster",constructor:function(y){},open:function(){var y=new u,x=this.serviceInfo||this._getServiceInfo(null),w=t.hitch(this,function(B){this.serviceInfo=B;this.version=B.currentVersion;this.rasterInfo=this._parseRasterInfo(B);this.loaded=!0;this._getRasterIdentifier();y.resolve(this)}),C=t.hitch(this,function(B){this.loaded=!0;this._getRasterIdentifier();y.reject(B)});n(x,w,C);return y.promise},
read:function(y){var x=this.url+"/tile/"+y.level+"/"+y.row+"/"+y.col,w={width:this.tileInfo.cols,height:this.tileInfo.rows,planes:null,pixelType:null,format:null,decodeFunc:null,isPoint:"elevation"===this.tileType.toLowerCase()?!0:!1};return this._requestPixels({url:x+(this.disableClientCaching?"?_ts\x3d "+(new Date).getTime():""),payload:{},decodeParams:w,tileOptions:y})},identify:function(y,x){null==x&&(x=this.tileInfo.lods[this.tileInfo.lods.length-1].level);var w=(y.x-this.tileInfo.origin.x)/
this.tileInfo.lods[x].resolution/this.tileInfo.cols;y=(this.tileInfo.origin.y-y.y)/this.tileInfo.lods[x].resolution/this.tileInfo.rows;var C=Math.floor(w),B=Math.floor(y),I=Math.floor((w-C)*this.tileInfo.cols);I=Math.min(I,this.tileInfo.cols-1);var N=Math.floor((y-B)*this.tileInfo.rows);N=Math.min(N,this.tileInfo.rows-1);var V=new u;this.read({level:x,row:B,col:C}).then(function(Y){var ca=N*Y.width+I;Y&&Y.pixels&&0<Y.pixels.length?(Y=Y.mask?Y.mask[ca]?Y.pixels.map(function(J){return J[ca]}):null:
Y.pixels.map(function(J){return J[ca]}),V.resolve(Y)):V.reject("no valid data")},function(Y){V.reject(Y)});return V.promise},setFetchParameters:function(y,x){},_getRasterIdentifier:function(){this._rasterId||(this._rasterId=this.url.replace("http:","").replace("https:",""));return this._rasterId},_getServiceInfo:function(){var y=this.url,x=new u(m._dfdCanceller);x._pendingDfd=c({url:y,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});x._pendingDfd.then(function(w){x.callback(w)},function(w){x.errback(w)});
return x},_parseRasterInfo:function(y){var x=new E;x.extent=new f(y.fullExtent);x.spatialReference=new r(y.spatialReference);this.tileType=y.cacheType||"Map";switch(this.tileType){case "Map":x.bandCount=3;x.pixelType="U8";this.dataType="Processed";break;case "Elevation":x.bandCount=1;x.pixelType=y.pixelType||"F32";this.dataType="Elevation";break;case "Raster":x.bandCount=null,x.pixelType=null,this.dataType=y.serviceDataType&&y.serviceDataType.replace("esriImageServiceDataType","")||"Generic"}var w=
y.tileInfo;x.width=Math.floor((y.fullExtent.xmax-y.fullExtent.xmin)/w.lods[w.lods.length-1].resolution+.5);x.height=Math.floor((y.fullExtent.ymax-y.fullExtent.ymin)/w.lods[w.lods.length-1].resolution+.5);x.cellSize=new p({x:w.lods[w.lods.length-1].resolution,y:w.lods[w.lods.length-1].resolution,spatialReference:y.spatialReference});this.tileInfo=new D(w);this.tileInfo.tileType=this.tileType;return x}});t.setObject("layers.rasterLib.raster.TileServiceRaster",g,b);return g})},"esri/layers/rasterLib/raster/TileRaster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/_base/json dojo/sniff dojo/DeferredList dojo/when ../../../kernel ../../../Evented ../../../request ../../../geometry/Extent ../../../geometry/Point ../../../SpatialReference ../../../deferredUtils ../../../urlUtils ../../PixelBlock ../../rasterFormats/rasterCodec ../tile/RasterTileInfo ./RasterInfo ./BasicRaster".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h,c,f,p,r,m,v,z,A,D,E,F){g=e([F],{declaredClass:"esri.layers.rasterLib.raster.TileRaster",sourceType:"TileCache",_RECORD_SIZE:8,constructor:function(y){this._cloudBlobStorage=y&&y._cloudBlobStorage},open:function(){var y=new u,x=this.datasetInfo||this._getDatasetInfo(null),w=t.hitch(this,function(B){this.datasetInfo=B;this.rasterInfo=B=this._parseRasterInfo(B);this.tileType="Cache/LERC"===B.format?"Elevation":"Cache/MIXED"===B.format||"Cache/JPEG"===B.format||"Cache/PNG"===
B.format?"Map":"Raster";this.tileInfo=B.tileInfo;this.dataType=["Generic","Elevation","Processed"][["Raster","Elevation","Map"].indexOf(this.tileType)];this._HEADER_SIZE=B.packetSize*B.packetSize*this._RECORD_SIZE+64;this.loaded=!0;this._cloudBlobStorage=this._cloudBlobStorage||-1<this.url.toLowerCase().indexOf("s3.amazonaws.com")||-1<this.url.toLowerCase().indexOf("windows.net")||-1<this.url.toLowerCase().indexOf("googleapis.com");this._getRasterIdentifier();y.resolve(this)}),C=t.hitch(this,function(B){this.loaded=
!0;this._getRasterIdentifier();y.reject(B)});n(x,w,C);return y.promise},read:function(y){var x=new u,w=y.level,C=y.row,B=y.col,I=this._buildCacheFilePath(this.url,w,C,B),N=this._getIndexRecordFromBundle(w,C,B);c({url:I,content:{},headers:{Range:"bytes\x3d0-"+(this._HEADER_SIZE-1).toString()},handleAs:"arraybuffer"}).then(t.hitch(this,function(V,Y){x.isCanceled()||(V=new Uint8Array(V),V=this._getTileEndAndContentType(V,N),Y={width:this.tileInfo.cols,height:this.tileInfo.rows,planes:null,pixelType:null,
format:null,decodeFunc:null,isPoint:"elevation"===this.tileType.toLowerCase()?!0:!1},this._requestPixels({url:I+(this.disableClientCaching?"?_ts\x3d "+(new Date).getTime():""),payload:{},headers:{Range:"bytes\x3d"+V.position.toString()+"-"+(V.position+V.recordSize).toString()},decodeParams:Y,tileOptions:y}).then(function(ca){x.isCanceled()||x.resolve(ca)},function(ca){x.isCanceled()||x.reject(ca)}))}));return x.promise},identify:function(){return null},setFetchParameters:function(y,x){},toJson:function(){return{url:this.url,
tileInfo:this.tileInfo.toJson(),rasterInfo:this.rasterInfo.toJson(),datasetInfo:this.datasetInfo,sourceType:this.sourceType,tileType:this.tileType,_rasterId:this._rasterId}},_getDatasetInfo:function(){return c({url:this.url+"/conf.json",handleAs:"json",content:{}})},_parseRasterInfo:function(y){var x=new E;switch(y.pixelType){case 1:var w="U1";break;case 1:w="U2";break;case 2:w="U4";break;case 3:w="U8";break;case 4:w="S8";break;case 5:w="U16";break;case 6:w="S16";break;case 7:w="U32";break;case 8:w=
"S32";break;case 9:w="F32";break;default:w="F32"}var C,B=[],I=y.LODInfos;for(C=0;C<I.levels.length;C++)B.push({level:I.levels[C],resolution:I.resolutions[C],scale:96/.0254*I.resolutions[C]});C=new r(y.extent.spatialReference||y.geodataXform.spatialReference);B=new D({rows:y.blockHeight,cols:y.blockWidth,dpi:96,format:y.format,compressionQuality:0,origin:y.origin,spatialReference:C,lods:B});x.pixelType=w;x.bandCount=y.bandCount;x.spatialReference=C;x.extent=new f({xmin:y.extent.xmin,ymin:y.extent.ymin,
xmax:y.extent.xmax,ymax:y.extent.ymax,spatialReference:C});x.cellSize=new p({x:y.pixelSizeX,y:y.pixelSizeY,spatialReference:C});x.width=Math.floor((x.extent.xmax-x.extent.xmin)/x.cellSize.x+.5);x.height=Math.floor((x.extent.ymax-x.extent.ymin)/x.cellSize.y+.5);x.statistics=y.statistics.map(function(N){Object.keys(N).forEach(function(V){isNaN(N[V])&&(N[V]=null)});return N});x.histograms=y.histograms;x.geodataXform=y.geodataXform;x.packetSize=y.packetSize;x.format=y.format;x.compressionQuality=y.compressionQuality;
x.tileInfo=B;return x},_getRasterIdentifier:function(){this._rasterId||(this._rasterId=this.url.replace("http:","").replace("https:",""));return this._rasterId},_buildCacheFilePath:function(y,x,w,C){var B=this.rasterInfo.packetSize;C=Math.floor(C/B)*B;w="R"+this._toHexString4(Math.floor(w/B)*B)+"C"+this._toHexString4(C);B="L";B=10<=x?B+x.toString():B+("0"+x.toString());return this._cloudBlobStorage?y+"/_alllayers/"+B+"/"+w+".bundle":y+"/"+B+"_"+w+"/bundle"},_getIndexRecordFromBundle:function(y,x,
w){y=this.rasterInfo.packetSize;x=x%y*y+w%y;if(0>x)throw"Invalid level / row / col";return x*this._RECORD_SIZE+64},_getTileEndAndContentType:function(y,x){y=y.subarray(x,x+8);x=0;var w;for(w=0;5>w;w++)x|=(y[w]&255)<<8*w;var C=x&0xffffffffff;x=0;for(w=5;8>w;w++)x|=(y[w]&255)<<8*(w-5);return{position:C,recordSize:x&0xffffffffff}},_toHexString4:function(y){y=y.toString(16);if(4!=y.length)for(var x=4-y.length;0<x--;)y="0"+y;return y}});t.setObject("layers.rasterLib.raster.TileRaster",g,b);return g})},
"esri/layers/rasterLib/raster/FunctionRaster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/_base/json dojo/sniff ../DeferredList2 dojo/when ../../../kernel ../../../Evented ../../../request ../../../deferredUtils ../../../geometry/Extent ../../../geometry/Point ../../../SpatialReference ../../../deferredUtils ../../../urlUtils ../../rasterFormats/rasterCodec ./RasterInfo ./BasicRaster ../../rasterLib/function/rasterFunctionHelper".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h,c,f,p,r,m,v,z,A,D,E,F){g=e([E],{declaredClass:"esri.layers.rasterLib.raster.FunctionRaster",rasterFunction:null,sourceType:"Function",constructor:function(y){y&&y.rasterFx&&this._init(y.rasterFx,y.rasterFxArgs)},open:function(){var y=this.getMemberRasters().map(function(w){return w.open()});this.identifiers=this.getMemberRasters().map(function(w){return w._rasterId});var x=new u;(new d(y,null,null,!0)).then(function(w){w.some(function(C){return!C[0]})?x.reject(w):
(this.rasterFunction.bind(),this.rasterInfo=this.rasterFunction.rasterInfo,this.dataType=this.rasterInfo.keyProperties&&this.rasterInfo.keyProperties.DataType||"Generic",this.tileInfo=w[0][1].tileInfo,x.resolve(this))}.bind(this));return x.promise},getProjectedFullExtent:function(y){var x=new u;this.getMemberRasters()[0].getProjectedFullExtent(y).then(t.hitch(this,function(w){this.projectedFullExtent=w;x.resolve(w)}));return x.promise},setProcessingContext:function(y){var x=y;y.layer&&(y=y.layer,
x={id:y.id,rawRasterInfo:y.raster.rasterInfo,glSetting:y._glSetting,xformSetting:y.tileManager&&y.tileManager.xformSetting,useWebGL:y.useWebGL,resampling:y.tileMode&&y.tileManager&&y.tileManager.xformSetting.requireProjection&&!y._hasTilingEffects&&"Thematic"!==y.raster.dataType?1:0,tileMode:y.tileMode});this.rasterFunction.setProcessingContext(x);this._layerOptions=x},alterDefinition:function(y){if(y=y||this.rasterFunction)1===this.memberRasters.length&&!y._bindComplete&&(this.rasterFunction=F.create(y,
{raster:this.memberRasters[0]}))&&(this.rasterFunction.bind(),this.rasterInfo=this.rasterFunction.rasterInfo,this.dataType=this.rasterInfo.keyProperties&&this.rasterInfo.keyProperties.DataType||"Generic",this.rasterFunction.setProcessingContext(this._layerOptions)),this._rasterHandler&&this._rasterHandler._connected&&this.rasterFunction&&this._rasterHandler.setRasterFunction({layerId:this._layerOptions.id,data:this.rasterFunction.toJson(!0)})},setFetchParameters:function(y,x){var w=this.getMemberRasters();
w&&1===w.length&&w[0].setFetchParameters(y,x)},getMemberRasters:function(){this.memberRasters||(this.memberRasters=[],this._getMemberRasters(this.rasterFunction.functionArguments,this.memberRasters));return this.memberRasters},read:function(y){var x=new u(f._dfdCanceller);if(y.src){var w=this.rasterFunction.read(y);x.resolve(w);return x.promise}var C=this.getMemberRasters().map(function(V){return V.read(y)});C=new d(C);var B,I,N=this.identifiers;x._pendingDfd=C;C.then(t.hitch(this,function(V){if(B=
V.some(function(Y){return Y[0]}))I={},V.forEach(function(Y,ca){I[N[ca]]=Y[0]?Y[1]:null});w=I?this.rasterFunction.read({extent:y.extent,src:I}):null;w.srcData=I;x.resolve(w)}));return x},_init:function(y,x){if(this.rasterFunction=F.create(y,x))this.rasterFunction._bindComplete=!0;else throw"Cannot initialize a function raster without a raster function";},_getMemberRasters:function(y,x){var w=Object.keys(y),C,B,I;for(C=0;C<w.length;C++)if(I=y[w[C]]){var N=I instanceof Array?I:[I];for(B=0;B<N.length;B++)(I=
N[B])&&("function"===typeof I||"object"===typeof I)&&I.read&&(I.functionArguments?this._getMemberRasters(I.functionArguments,x):I.sourceType&&"Function"!==I.sourceType&&(I._identifier=I._getRasterIdentifier(),x.some(function(V){return V._identifier===I._identifier})||x.push(I)))}return x}});t.setObject("layers.rasterLib.raster.FunctionRaster",g,b);return g})},"esri/layers/rasterLib/DeferredList2":function(){define(["dojo/DeferredList"],function(g){return function(e,t,u,l,q){this.list=e;t=new g(e,
t,u,l,q);var k=t.resolve.bind(t),a=t.cancel.bind(t);t.cancel=function(){e&&e.forEach(function(d){d.cancel&&d.cancel()});a.apply(this,arguments)}.bind(t);t.resolve=function(){this.isFulfilled()||k.apply(this,arguments)}.bind(t);return t}})},"esri/layers/rasterLib/tile/RasterTileManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/when ../DeferredList2 ../../../geometry/Extent ../../../SpatialReference ../../../geometry/Point ../../PixelBlock ./RasterTileInfo ../raster/rasterProjectionHelper".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b){var h=function(c,f){var p;for(p=0;p<c.length;p++)if(f(c[p]))return p;return-1};return g(null,{declaredClass:"esri.layers.rasterLib.tile.RasterTileManager",count:null,fullBoundary:null,tileBoundary:null,tiles:null,resolution:null,virtual:!0,prefetchBufferSize:0,_progressiveGlobal:!1,_MAX_TILES:128,_defaultMatrixResolution:20,constructor:function(c){this.tiles=[];this.xformSetting={};this.mapSpatialReference=c&&c.mapSR;this.layer=c&&c.layer;this.identifiers=this.layer.raster.rasterFunction?
this.layer.raster.getMemberRasters().map(function(f){return f._rasterId}):[this.layer.raster._rasterId];(c=c&&c.tileInfo)&&this.setTileInfo(c)},setTileInfo:function(c){this.tileInfo=c;this.virtual=c.virtual;this.mapResolution=null;this.tiles.length=0;this.xformSetting.requireProjection=!this.virtual&&!this.mapSpatialReference.equals(this.tileInfo.spatialReference);this.xformSetting.requirePE=b.requirePE(this.mapSpatialReference,this.tileInfo.spatialReference);this.xformSetting.meshSize=this.xformSetting.requireProjection?
[this._defaultMatrixResolution,this._defaultMatrixResolution]:[1,1];this.halfWorldWidth=b.getHalfWorldWidth(c.spatialReference)},updateResolution:function(c,f){if(!(this.mapResolution&&c&&this._resolutionEqual(this.mapResolution.x,c.x)&&this._resolutionEqual(this.mapResolution.y,c.y))){this.resetTiles();var p=this.xformSetting.requireProjection;this.mapResolution=this.resolution=c;p&&(this.resolution=b.projectResolution(c,this.tileInfo.spatialReference,this.layer.projectedFullExtent||f));this._resolution=
this.resolution;c=this.resolution;if(!this.tileInfo.virtual){p=.75*Math.min(c.x,c.y)+.25*Math.max(c.x,c.y);if(p>=this.tileInfo.lods[0].resolution){var r=this.tileInfo.lods[0];this.ooe=!0}else{if(p<=this.tileInfo.lods[this.tileInfo.lods.length-1].resolution)r=this.tileInfo.lods[this.tileInfo.lods.length-1];else for(c=0;c<this.tileInfo.lods.length-1;c++)if(r=this.tileInfo.lods[c],f=this.tileInfo.lods[c+1],r.resolution>=p&&f.resolution<=p){r.resolution-p>p-f.resolution&&(r=f);break}this.ooe=!1}this.level=
r&&r.level;c=this.resolution=new a({x:r.resolution,y:r.resolution,spatialReference:this.tileInfo.spatialReference})}p=this.layer.raster.rasterInfo.extent;r=this.tileInfo.origin;f=this.tileInfo.cols;var m=this.tileInfo.rows;this.fullBoundary={rowStart:Math.floor((r.y-p.ymax)/c.y/m),rowEnd:Math.floor((r.y-p.ymin-c.y)/c.y/m),colStart:Math.floor((p.xmin-r.x)/c.x/f),colEnd:Math.floor((p.xmax-r.x-c.x)/c.x/f)};if(p=this.halfWorldWidth){m=Math.ceil(p/c.x/(f/2));var v=this.tileInfo.applyGCS360Transform?360:
p,z=Math.round(f-(v-r.x)/c.x%f);z===f&&(z=0);this.fullBoundary.colRange=m;this.fullBoundary.paddingRight=z;this.fullBoundary.paddingLeft=Math.round((m*f*c.x+r.x-v-(this.tileInfo.applyGCS360Transform?0:r.x+p))/c.x)}this.hasNewData=!0}},getXformGrid:function(){var c=this.mapExtent,f=this.layer._hasTilingEffects?this.extent:this.fullExtent,p=this.layer.getCurrentResolution(),r=JSON.stringify(c.toJson())+JSON.stringify(f.toJson());this._datumTransformationInitialized||(this._datumTransformationInitialized=
!0,this._datumTransformation=b.getDefaultDatumTransformationForDataset(this.layer.raster.rasterInfo.extent,c.spatialReference,!0));this._cachedExtentString&&this._cachedExtentString===r||(this._cachedExtentString=r,this._xformGrid=c=b.getProjectionOffsetGrid(c,f,p,this.tileInfo.applyGCS360Transform,this.halfWorldWidth,this._datumTransformation));c=this._xformGrid;this.xformSetting.meshSize=c&&c.size;return c},getWrapTimes:function(c){var f=b.getHalfWorldWidth(c.spatialReference);if(!f)return 0;var p=
2*f;f=this.tileInfo.applyGCS360Transform?0:-f;return Math.floor((c.xmax-f)/p)-Math.floor((c.xmin-f)/p)},normalizeCoordinate:function(c,f){if(!f)return 0;var p=2*f;if(0<c){for(;c>f;)c-=p;return c}for(;c<-f;)c+=p;return c},resetTiles:function(){this.tiles.forEach(e.hitch(this,function(c){c.fetch&&!c.fetch.isCanceled()&&c.fetch.cancel();c.update&&!c.update.isCanceled()&&c.update.cancel()}));this.tiles.length=0},updateExtent:function(c,f){this.mapExtent=this.extent=c;var p=this.xformSetting.requireProjection;
if(p){this.extent=b.project(c,this.tileInfo.spatialReference,this.tileInfo.applyGCS360Transform);if(!this.extent)return;this.extent.spatialReference=new k(this.extent.spatialReference.toJson())}else if(c.spatialReference.isWebMercator()||4326===c.spatialReference.wkid){var r=4326===c.spatialReference.wkid?180:this.halfWorldWidth,m=c.xmin;if(m<-r||m>r){for(var v=c.xmax,z=2*r;m<-r;)m+=z,v+=z;for(;m>r;)m-=z,v-=z;this.mapExtent=this.extent=c=new q(m,c.ymin,v,c.ymax,c.spatialReference)}}this.updateResolution(f,
c);r=this.extent;m=this.tileInfo;v=m.cols;z=m.rows;f=this.resolution;var A=r;p=p?this.layer.raster.rasterInfo.extent:this.layer.raster.projectedFullExtent;this.ooe&&(A=this._getIntersect(r,p));var D=Math.floor((A.xmin-m.origin.x)/f.x/v)-this.prefetchBufferSize,E=Math.floor((A.xmax-m.origin.x)/f.x/v)+this.prefetchBufferSize,F=null,y=this.getWrapTimes(c),x=this.fullBoundary&&this.fullBoundary.colRange;y&&this.halfWorldWidth&&(E===D&&(F=D),E+=y*x);if(c=this.halfWorldWidth&&this.tiles.length&&(y!==this.wrapTimes||
F!==this._circlularColId))this._wrapSwitchCount=this._wrapSwitchCount?this._wrapSwitchCount+1:1;this.wrapTimes=y;this._circlularColId=F;var w=Math.floor((m.origin.y-A.ymax)/f.y/z)-this.prefetchBufferSize;F=Math.floor((m.origin.y-A.ymin)/f.y/z)+this.prefetchBufferSize;this.tileBoundary={rowStart:w,rowEnd:F,colStart:D,colEnd:E};var C,B;((A=(F-w+1)*(E-D+1)>this._MAX_TILES||!this.virtual&&this._resolution.x>8*this.tileInfo.lods[0].resolution)||2<y||c)&&this.resetTiles();if(!(A||2<y)){A=this.tiles;c=!1;
for(C=A.length-1;0<=C;C--){var I=A[C].row;var N=A[C].wrapCol;if(I<w||I>F||N<D||N>E)A[C].fetch&&!A[C].fetch.isCanceled()&&A[C].fetch.cancel(),A[C].update&&!A[C].update.isCanceled()&&A[C].update.cancel(),A.splice(C,1),c=!0}for(C=w;C<=F;C++)for(B=D;B<=E;B++){w=new q(m.origin.x+f.x*v*B,m.origin.y-f.y*z*(C+1),m.origin.x+f.x*v*(B+1),m.origin.y-f.y*z*C,r.spatialReference);var V=y&&x?0<=B?B%x:x- -B%x:B;I=h(A,function(Y){return Y.row===C&&Y.col===V&&Y.wrapCol===B});N=p.xmax>=w.xmax?v:Math.round((p.xmax-w.xmin)/
f.x);-1===I&&(A.push({row:C,col:V,wrapCol:B,cellsizeX:f.x,cellsizeY:f.y,width:v,height:z,actualWidth:N,extent:w,normalizedExtent:this._wrapExtent(w,V),pixelBlock:null,virtual:this.virtual,level:this.level,tileType:this.tileInfo.tileType||"Raster"}),c=!0)}c&&this._sortTiles();f=this.tileInfo.rows*(this.tileBoundary.rowEnd-this.tileBoundary.rowStart+1);this.width=this.tileInfo.cols*(this.tileBoundary.colEnd-this.tileBoundary.colStart+1);this.height=f;this.count=A.length;f=Math.min.apply(null,A.map(function(Y){return Y.extent.xmin}));
m=Math.max.apply(null,A.map(function(Y){return Y.extent.xmax}));v=Math.min.apply(null,A.map(function(Y){return Y.extent.ymin}));z=Math.max.apply(null,A.map(function(Y){return Y.extent.ymax}));f=this.fullExtent=new q(f,v,m,z,r.spatialReference);if(this.layer.roaming||this.layer.useWebGL)this.layer._hasTilingEffects?(this.xformSetting.offset=[0,0],this.xformSetting.scale=[1,1]):(c&&(this._tilesChanged=!0),this.xformSetting.offset=[(r.xmin-f.xmin)/(f.xmax-f.xmin),-(f.ymin-r.ymin)/(f.ymax-f.ymin)],this.xformSetting.scale=
[(r.xmax-r.xmin)/(f.xmax-f.xmin),(r.ymax-r.ymin)/(f.ymax-f.ymin)])}},fetchTiles:function(c){(this._tilesChanged||c)&&this._fetchTiles(c)},_fetchTiles:function(c){this._fetchCounter=0;var f=this.extent;this.fetchAllCompleted=c?new t:null;(this._tilesChanged||c&&this.layer._hasTilingEffects)&&this.tiles.forEach(e.hitch(this,function(r){r.updateCompleted=!1}));var p={};!this.layer.roaming&&this.layer._hasTilingEffects&&c?(this.identifiers.forEach(function(r,m){p[r]={extent:this.extent,pixelBlock:new d({width:this.layer._map.width,
height:this.layer._map.height,pixels:[],pixelType:"",mask:null,statistics:[]})}}.bind(this)),this.originalPixelData={extent:this.extent,src:p,isEmpty:!0}):this._tilesChanged&&(this.identifiers.forEach(function(r,m){p[r]={extent:this.fullExtent,pixelBlock:new d({width:128,height:128,pixels:[],pixelType:"",mask:null,statistics:[]})}}.bind(this)),this.originalPixelData={extent:this.fullExtent,src:p,isEmpty:!0});this.tiles.forEach(e.hitch(this,function(r){if(r.fetch)r.update||(r.update=this.updateTile(r));
else{if(this._isTileOutSide(r,f)){r.updateCompleted=!0;return}this._requestTile(r)}this.layer.roaming&&this.layer.useWebGL?this._fillPixelData(r):r.src&&c&&(this.layer._hasTilingEffects||this.layer.useWebGL)&&(this._fillPixelData(r),this.layer._hasTilingEffects&&(r.updateCompleted=!0),r.processedPixelBlock=null,r.renderedPixelBlock=null)}));0===this._fetchCounter&&(this._fetched=!0);this._tilesChanged=!1;c&&this._updateFetchStatus()},updateTile:function(c,f){var p=new t;if(!c.src&&!c.fetch)return p.resolve(c),
p.promise;u(c.src||c._fetched||c.fetch,e.hitch(this,function(){var r=this.layer.tileMode&&this.layer._rasterHandler&&!(this.layer._hasTilingEffects||this.layer.useWebGL),m=this.layer._drawTile,v=this._validateRawPixelBlocks(c);this.layer._hasTilingEffects&&!this.layer.useWebGL&&(m=m&&(this._progressiveGlobal||f));if((f||!f&&v)&&(r||m||this.layer.roaming)){if(this.xformSetting.requireProjection&&this.layer.useWebGL&&(this.xformSetting.gridConfig=this.getXformGrid(),null==this.xformSetting.gridConfig))return p.cancel(),
p.promise;this._processTile(c,f).then(e.hitch(this,function(z){p.isCanceled()||this._renderTile(z,f).then(e.hitch(this,function(A){this.hasNewData=!1;p.isCanceled()||p.resolve(A)}))}))}else f||v||(c.updateCompleted=!0),this.layer.useWebGL||this.layer._hasTilingEffects?p.resolve(this.originalPixelData):p.resolve()}));return p.promise},setLayer:function(c){this.layer=c},fillupTiles:function(){this.tiles.forEach(e.hitch(this,function(c){c.update&&c.updateCompleted&&!c.filled&&(c.updateCompleted=!1,this._fillPixelData(c),
c.updateCompleted=!0)}))},_validateRawPixelBlocks:function(c){return c&&c.src&&!this.identifiers.some(function(f){return!(c.src[f].pixelBlock&&0!==c.src[f].pixelBlock.validPixelCount&&c.src[f].pixelBlock.pixels&&0<c.src[f].pixelBlock.pixels.length)})},_wrapExtent:function(c,f){if(c){if(this.tileInfo.applyGCS360Transform){var p=this.normalizeCoordinate(c.xmin,180);0>p&&(p+=360);return new q({xmin:p,ymin:c.ymin,xmax:c.xmax-c.xmin+p,ymax:c.ymax,spatialReference:c.spatialReference})}if(this.halfWorldWidth){p=
null!=f?new q({xmin:this.tileInfo.origin.x+this.tileInfo.cols*f*this.resolution.x,ymin:c.ymin,xmax:this.tileInfo.origin.x+this.tileInfo.cols*(f+1)*this.resolution.x,ymax:c.ymax,spatialReference:c.spatialReference}):new q({xmin:c.xmin,ymin:c.ymin,xmax:c.xmax,ymax:c.ymax,spatialReference:c.spatialReference});f=this.normalizeCoordinate(p.xmin,this.halfWorldWidth);var r=f-p.xmin;.01<Math.abs(r)&&(p.xmin=f,p.xmax+=r)}return p||c}},_getIntersect:function(c,f){return new q(Math.max(c.xmin,f.xmin),Math.max(c.ymin,
f.ymin),Math.min(c.xmax,f.xmax),Math.min(c.ymax,f.ymax),c.spatialReference)},_isTileOutSide:function(c,f){var p=!1;if(c.virtual){var r=c.normalizedExtent;if(f=f||(this.xformSetting.requireProjection?this.layer.raster.rasterInfo.extent:this.layer.raster.projectedFullExtent)){c=r.xmin-this.prefetchBufferSize*this.tileInfo.cols*this.resolution.x;p=r.ymin-this.prefetchBufferSize*this.tileInfo.rows*this.resolution.y;var m=r.xmax+this.prefetchBufferSize*this.tileInfo.cols*this.resolution.x;r=r.ymax+this.prefetchBufferSize*
this.tileInfo.rows*this.resolution.y;p=m<=f.xmin||c>=f.xmax||r<=f.ymin||p>=f.ymax}else p=!1}else p=0>c.level||c.row<this.fullBoundary.rowStart||c.row>this.fullBoundary.rowEnd||c.col<this.fullBoundary.colStart||c.col>this.fullBoundary.colEnd;return p},_resolutionEqual:function(c,f){return c===f||c&&f&&Math.abs(c-f)<Math.abs(f/1E4)?!0:!1},_requestTile:function(c){var f=this.identifiers,p;if(this._isTileOutSide(c)){var r=new t;c.updateCompleted=!0;r.resolve(null);r=r.promise}else r=this.layer.raster.rasterFunction?
new l(this.layer.raster.getMemberRasters().map(function(m){return m.read(c)})):new l([this.layer.raster.read(c)]);c.fetch=r;this._fetchCounter++;u(c.src||c._fetched||r,e.hitch(this,function(m){if(p=m&&m.some(function(z){return z[0]})){var v={};m.forEach(function(z,A){v[f[A]]=z[0]&&z[1]?{extent:z[1].extent,pixelBlock:z[1].pixelBlock,width:z[1].width,height:z[1].height}:null});c.src=v}else c.src=null;this._fetchCounter--;0===this._fetchCounter&&(this._fetched=!0);c._fetched=!0;this._updateFetchStatus()}),
e.hitch(this,function(){this._fetchCounter--;0===this._fetchCounter&&(this._fetched=!0);c._fetched=!0;this._updateFetchStatus()}));c.update=this.updateTile(c)},_updateFetchStatus:function(){this.layer._drawTile&&this.fetchAllCompleted&&!this.fetchAllCompleted.isResolved()&&!this.tiles.some(function(c){return!c._fetched})&&(this.tiles.forEach(e.hitch(this,function(c){this._fillPixelData(c)})),this.fetchAllCompleted.resolve())},_fillPixelData:function(c,f){if(c&&!c.updateCompleted)if(Math.abs(c.cellsizeX-
this.resolution.x)>c.cellsizeX/10)c.updateCompleted=!0;else if(!1===this._validateRawPixelBlocks(c))c.updateCompleted=!0;else{var p=c.extent;if(this.layer.roaming||this.layer.useWebGL&&!this.layer._hasTilingEffects){var r=this.fullExtent;var m=this.tileInfo.cols*(this.tileBoundary.colEnd-this.tileBoundary.colStart+1);var v=this.tileInfo.rows*(this.tileBoundary.rowEnd-this.tileBoundary.rowStart+1);f?this.originalPixelData.renderedPixelBlock||(this.originalPixelData.renderedPixelBlock=new d({width:m,
height:v,pixels:[],pixelType:"",mask:null,statistics:[]})):this.identifiers.forEach(e.hitch(this,function(A){this.originalPixelData.src[A].pixelBlock.width=m;this.originalPixelData.src[A].pixelBlock.height=v}))}else r=this.extent,m=this.layer._map.width,v=this.layer._map.height,f?this.originalPixelData.renderedPixelBlock||(this.originalPixelData.renderedPixelBlock=new d({width:m,height:v,pixels:[],pixelType:"",mask:null,statistics:[]})):this.identifiers.forEach(e.hitch(this,function(A){this.originalPixelData.src[A].pixelBlock.width=
m;this.originalPixelData.src[A].pixelBlock.height=v}));if(r.xmax<=p.xmin||r.xmin>=p.xmax||r.ymax<=p.ymin||r.ymin>=p.ymax)return null;var z=this.originalPixelData.isEmpty=!1;this.identifiers.forEach(e.hitch(this,function(A){c.src&&(this._fillPixelBlock(c.src[A],this.originalPixelData.src[A],{extent:r,width:m,height:v,normalizedExtent:c.normalizedExtent},!1),z=!0)}));c.filled=z;this.hasNewData=!0}},_fillPixelBlock:function(c,f,p,r){var m=c.extent,v=p.extent;r=p.width;var z=p.height;if(c.pixelBlock&&
c.pixelBlock.pixels&&c.pixelBlock.pixels[0]){var A=(m.xmax-m.xmin)/c.width,D=Math.max(m.xmin,v.xmin),E=Math.min(m.ymax,v.ymax),F=Math.round((D-m.xmin)/A),y=c.width-Math.round(Math.abs(m.xmax-Math.min(m.xmax,v.xmax))/A),x=Math.round(Math.abs(m.ymax-E)/A),w=c.height-Math.round((Math.max(m.ymin,v.ymin)-m.ymin)/A),C=this.halfWorldWidth;D=Math.round((D-v.xmin)/A);p=p.normalizedExtent;if(!(this.wrapTimes&&C&&m.xmin<-C)){if(this.wrapTimes&&C){if(this.tileInfo.applyGCS360Transform)360<m.xmin&&(D-=this.fullBoundary.paddingLeft);
else if(m.xmin>C){D-=this.fullBoundary.paddingLeft;var B=this.normalizeCoordinate(m.xmin,C);var I=this.normalizeCoordinate(m.xmax,C)}else B=m.xmin,I=m.xmax;this.tileInfo.applyGCS360Transform?p&&360>p.xmin&&360<p.xmax&&(y-=this.fullBoundary.paddingRight):p&&p.xmin<C&&p.xmax>C?y-=this.fullBoundary.paddingRight:B<C&&I>C&&(y-=this.fullBoundary.paddingRight)}B=Math.round(Math.abs(v.ymax-E)/A);I=c.pixelBlock.pixels.length;f=f.pixelBlock;p=c.width;m=f.mask||new Uint8Array(r*z);var N=c.pixelBlock,V=N.mask,
Y=0;for(A=0;A<I;A++){E=N.pixels[A];C=f.pixels[A]||new E.constructor(r*z);for(c=x;c<w;c++)for(Y=(B+c-x)*r+D,v=F;v<y;v++)C[Y+v-F]=E[c*p+v];f.pixels[A]=C}if(V)for(c=x;c<w;c++)for(Y=(B+c-x)*r+D,v=F;v<y;v++)m[Y+v-F]=V[c*p+v];else for(c=x;c<w;c++)for(Y=(B+c-x)*r+D,v=F;v<y;v++)m[Y+v-F]=1;f.pixelType=f.pixelType||N.pixelType;f.mask=m;if(!(f.statistics&&0<f.statistics.length))for(f.statistics=[],c=0;c<N.statistics.length;c++)f.statistics[c]={minValue:N.statistics[c].minValue,maxValue:N.statistics[c].maxValue};
else if(N.statistics&&f.statistics)for(c=0;c<f.statistics.length;c++)f.statistics[c].minValue=Math.min(N.statistics[c].minValue,f.statistics[c].minValue),f.statistics[c].maxValue=Math.max(N.statistics[c].maxValue,f.statistics[c].maxValue)}}},_processTile:function(c,f){var p=new t,r=this.layer._hasTilingEffects,m=this.layer.useWebGL,v=r||m,z=this.layer.raster.rasterFunction&&c&&(r||m||!c.processedPixelBlock);if(f)var A=c;else this._fillPixelData(c),A=v?this.originalPixelData:c;this.xformSetting.hasNewTexture=
this.hasNewData;var D;z?(this.identifiers.forEach(function(E){if(0===A.src[E].pixelBlock.pixels.length||0===A.src[E].pixelBlock.pixels[0].length)D=!0}),D?p.resolve({extent:A.extent,processedPixelBlock:A.src[this.identifiers[0]],pixelBlock:A.src[this.identifiers[0]]}):m?(this.processedPixelData=this.layer.raster.rasterFunction.read(A),p.resolve(this.processedPixelData)):this.layer._rasterHandler?this.layer._rasterHandler.process({extent:A.extent,src:A.src}).then(function(E){r?(this.processedPixelData=
E,p.resolve(this.processedPixelData)):(c.processedPixelBlock=E.pixelBlock,p.resolve(c))}):(f=this.layer.raster.rasterFunction.read(c),c.processedPixelBlock=f.pixelBlock,p.resolve(c))):v?p.resolve(A.src[this.identifiers[0]]):(c.pixelBlock=A.src[this.identifiers[0]]&&A.src[this.identifiers[0]].pixelBlock,p.resolve(c));return p.promise},_renderTile:function(c){var f=new t,p=this.layer._hasTilingEffects,r=this.layer.useWebGL,m=Math.abs((c.extent.xmax-c.extent.xmin)/c.width-this.layer.getCurrentResolution().x)>
this.resolution.x/10;m=this.layer.useWebGL&&(m||this._isTileOutSide(c,this.layer._map.extent));this.xformSetting.hasNewTexture=this.hasNewData;this.layer._rasterRenderer&&c&&(c.texture||c.src||c.pixelBlock||c.processedPixelBlock)?(this.layer._rasterRenderer.interpolation=this.layer.interpolation,r&&!m?(this.layer.raster.rasterFunction&&this.layer.raster.rasterFunction.renderTexture||this.layer._rasterRenderer.draw(c),f.resolve(c)):this.layer._rasterHandler?this.layer._rasterHandler.render({extent:c.extent,
pixelBlock:c.processedPixelBlock||c.pixelBlock}).then(function(v){p?(v.renderedPixelBlock=v.pixelBlock,f.resolve(v)):(c.renderedPixelBlock=v.pixelBlock,f.resolve(c))}.bind(this)):(c.renderedPixelBlock=this.layer._rasterRenderer.draw(c).pixelBlock,f.resolve(c))):(c.renderedPixelBlock=c.processedPixelBlock||c.pixelBlock,f.resolve(c));return f.promise},_sortTiles:function(){this.tiles.sort(function(c,f){return c.row<f.row||c.row==f.row&&c.col<f.col?-1:1})}})})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),
function(g,e,t,u,l,q,k,a,d,n,b,h,c,f,p){var r=g([a],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(m,v){this._attrs={};m&&u.isString(m)?this._url=c.urlToObject(this.url=c.normalize(m)):(this.url=this._url=null,(v=v||m)&&(v.layerDefinition||v.query)&&(v=null));this.spatialReference=new f(4326);this.initialExtent=new p(-180,-90,180,90,new f(4326));this._map=this._div=
null;this.normalization=!0;v&&(v.id&&(this.id=v.id),this.arcgisProps=v.arcgisProps,this.parentLayer=v.parentLayer,!1===v.visible&&(this.visible=!1),n.isDefined(v.opacity)&&(this.opacity=v.opacity),n.isDefined(v.minScale)&&this.setMinScale(v.minScale),n.isDefined(v.maxScale)&&this.setMaxScale(v.maxScale),this.attributionDataUrl=v.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,n.isDefined(v.showAttribution)&&(this.showAttribution=v.showAttribution),this.className=v.className,
this.refreshInterval=v.refreshInterval||0);this._errorHandler=u.hitch(this,this._errorHandler);this._scheduledRefresh=u.hitch(this,this._scheduledRefresh);this.refresh=u.hitch(this,this.refresh);if(this.managedSuspension){var z=this._setMap;this._setMap=function(A){var D=z.apply(this,arguments);this._fireAttach(A);this.evaluateSuspension();if(this.suspended&&!A.loaded)var E=t.connect(A,"onLoad",this,function(){t.disconnect(E);E=null;this.evaluateSuspension()});return D}}this.registerConnectEvents()},
id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attached:!1,attributionDataUrl:"",hasAttributionData:!1,showAttribution:!0,refreshInterval:0,_errorHandler:function(m){this.loaded||(this.loadError=m);this.onError(m)},_setMap:function(m,v,z,A){this._map=m;this._lyrZEHandle=t.connect(m,"onZoomEnd",this,this._processMapScale);if(m.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var D=t.connect(m,"onLoad",this,function(){t.disconnect(D);
D=null;this._processMapScale()})},_unsetMap:function(m,v){t.disconnect(this._lyrZEHandle);this._map=this._lyrZEHandle=null;this._resumedOnce=void 0;this.suspended=!0;this._fireDetach(m)},_fireAttach:function(m){this.attached=!0;this.onAttach({map:m})},_fireDetach:function(m){this.attached=!1;this.onDetach({map:m})},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart(),this._map&&this._map._incr())},
_fireUpdateEnd:function(m,v){this.updating&&(this.updating=!1,this.attr("data-updating"),this._refreshRT(),this.onUpdateEnd(m,v),this._map&&this._map._decr())},_getToken:function(){var m=this._url,v=this.credential;return m&&m.query&&m.query.token||v&&v.token||void 0},_findCredential:function(){this.credential=d.id&&this._url&&d.id.findCredential(this._url.path)},_useSSL:function(){var m=this._url,v=/^http:/i;this.url&&(this.url=this.url.replace(v,"https:"));m&&m.path&&(m.path=m.path.replace(v,"https:"))},
refresh:function(m){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(m){this.setScaleRange(m)},setMaxScale:function(m){this.setScaleRange(null,m)},setScaleRange:function(m,v){var z=n.isDefined(m),A=n.isDefined(v);this.loaded||(this._hasMin=this._hasMin||z,this._hasMax=this._hasMax||A);var D=this.minScale,E=this.maxScale;this.minScale=(z?m:this.minScale)||0;this.maxScale=(A?v:this.maxScale)||0;if(D!==this.minScale||E!==this.maxScale)this.onScaleRangeChange(),
this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},
_resume:function(){this.suspended=!1;this.attr("data-suspended");var m=void 0===this._resumedOnce,v=this.className,z=this._attrs,A=this.getNode(),D;if(m){this._resumedOnce=!0;if(v&&A){var E=A.getAttribute("class")||"";(new RegExp("(^|\\s)"+v+"(\\s|$)","i")).test(E)||A.setAttribute("class",E+((E?" ":"")+v))}if(z&&A)for(D in z)z.hasOwnProperty(D)&&A.setAttribute(D,z[D])}this._refreshRT();this.onResume({firstOccurrence:m});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var m=
this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();m!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},isVisibleAtScale:function(m){return m?r.prototype._isMapAtVisibleScale.apply(this,arguments):!1},_isMapAtVisibleScale:function(m,v){if(!(m||this._map&&this._map.loaded))return!1;var z=this._map;m=m||z.getScale();var A=this.minScale,D=this.maxScale,E=!A,F=!D,y;v&&(y=z.width>z.height?z.width:z.height);E||(m<=A?E=!0:v&&(E=Math.abs(A-m)/A<1/
y));F||(m>=D?F=!0:v&&(F=Math.abs(D-m)/D<1/y));return E&&F},getAttributionData:function(){var m=this.attributionDataUrl,v=new l(h._dfdCanceller);this.hasAttributionData&&m?(v._pendingDfd=b({url:m,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),v._pendingDfd.then(function(z){v.callback(z)},function(z){v.errback(z)})):(m=Error("Layer does not have attribution data"),m.log=!!e.isDebug,v.errback(m));return v},getResourceInfo:function(){var m=this.resourceInfo;return u.isString(m)?q.fromJson(m):
u.clone(m)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(m,v){var z=this.getNode();if("data-reference"===m&&11>k("ie"))return this;z&&(null==v?z.removeAttribute(m):z.setAttribute(m,v));this._attrs&&(null==v?delete this._attrs[m]:this._attrs[m]=v);return this},setRefreshInterval:function(m){var v=this.refreshInterval;this.refreshInterval=m;this._toggleRT(!1);m&&this._toggleRT(!0);if(v!==m)this.onRefreshIntervalChange();return this},_toggleRT:function(m){m&&
this.refreshInterval?(clearInterval(this._refreshTimer),this._refreshTimer=setInterval(this._scheduledRefresh,6E4*this.refreshInterval)):this._refreshTimer&&(clearInterval(this._refreshTimer),this._refreshTimer=null)},_refreshRT:function(){this._toggleRT(!1);this._toggleRT(!0)},_scheduledRefresh:function(){this.onRefreshTick();!this._map||this.suspended||this.updating||this.refresh({scheduled:!0})},_refreshTS:null,_reCheckTS:/[\?&]_ts=/ig,_reReplaceTS:/([\?&]_ts=)[0-9]+/ig,addTimestampToURL:function(m){var v=
this._refreshTS;v&&(m=this._reCheckTS.test(m)?m.replace(this._reReplaceTS,"$$$1"+v):m+((-1===m.indexOf("?")?"?":"\x26")+"_ts\x3d"+v));return m},setNormalization:function(m){this.normalization=m},setVisibility:function(m){this.visible!==m&&(this.visible=m,this.onVisibilityChange(this.visible),this.evaluateSuspension());this.attr("data-hidden",m?null:"")},onLoad:function(){},onAttach:function(m){},onDetach:function(m){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},
onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onRefreshTick:function(){},onError:function(){}});u.setObject("layers.Layer",r,d);return r})},"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      if (window.origin !\x3d\x3d "null") {\r\n        return; // page is not in an iframe sandbox\r\n      }\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"*now":function(g){g(['dojo/i18n!*preload*esri/layers/nls/RasterXLayer*["ar","bg","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("esri/layers/RasterXLayer","dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/array dojo/_base/Deferred dojo/sniff dojo/dom-construct dojo/dom-style dojo/on dojox/gfx/matrix dojo/when dojo/DeferredList ../kernel ../config ../lang ../domUtils ../urlUtils ../graphic ../request ../renderers/ClassBreaksRenderer ../renderers/StretchRenderer ../renderers/UniqueValueRenderer ../renderers/ColormapRenderer ../renderers/ShadedReliefRenderer ../geometry/Extent ../SpatialReference ../geometry/Point ./Field ./TimeInfo ./MosaicRule ./DimensionalDefinition ./PixelBlock ./ImageServiceLayerMixin ./rasterLib/function/StretchFunction ./rasterLib/raster/rasterFactory ./rasterLib/raster/rasterProjectionHelper ./rasterLib/renderer/rasterRendererHelper ./rasterLib/tile/RasterTileInfo ./rasterLib/tile/RasterTileManager ./rasterLib/tile/RasterHandler ./layer".split(" "),function(g,
e,t,u,l,q,k,a,d,n,b,h,c,f,p,r,m,v,z,A,D,E,F,y,x,w,C,B,I,N,V,Y,ca,J,O,U,ba,Z,fa,pa,da){var ha=f.defaults.map.zoomDuration;g=g([da],{declaredClass:"esri.layers.RasterXLayer",managedSuspension:!0,opacity:1,tileMode:!0,useWebGL:!0,drawMode:!0,_eventMap:{"raster-change":!0,"renderer-change":!0},_lastPopup:[],_rasterFieldPrefix:"Raster.",_cachedVariableStats:{},_cachedVariableHistogram:{},constructor:function(P,aa){aa=aa||{};this.tileMode=null!=aa.tileMode?aa.tileMode:this.tileMode;this.useWebGL=null!=
aa.useWebGL?aa.useWebGL:this.useWebGL;this.roaming=null!=aa.roaming?aa.roaming:this.roaming;this.drawMode=null!=aa.drawMode?aa.drawMode:this.drawMode;this.bandIds=aa.bandIds&&0<aa.bandIds.length?aa.bandIds:null;this.renderer=aa.renderer;this._customModules=aa.customModules;this.useMapTime=null!=aa.useMapTime?aa.useMapTime:!0;if(aa.multidimensionalDefinition&&0<aa.multidimensionalDefinition.length){var ea=new N;ea.multidimensionalDefinition=aa.multidimensionalDefinition.map(function(X){return X.toJson?
X:new V(X)});ea.method=N.METHOD_NONE;this.mosaicRule=ea}this.infoTemplate=aa.infoTemplate;this.drawMode||(this._contextType=aa._contextType||aa.drawType);this._supportLegacyPropMethods=!1!==aa.legacySupport;this._rasterHandler=new pa({customModules:this._customModules});this._workInitPromise=this._rasterHandler.start();this.pixelData=null;this._initialize(P,aa);d(this,"load",e.hitch(this,function(){b(this._rasterHandler._connected||this._rasterHandler._connectionPromise,e.hitch(this,function(){this._rasterHandler.setLayer({layerId:this.id,
raster:{rasterInfo:this.raster.rasterInfo,rasterFunction:this.raster.rasterFunction&&this.raster.rasterFunction.toJson()},bandCount:this.raster.rasterInfo.bandCount});this.raster.rasterFunction&&this._rasterHandler.setRasterFunction({layerId:this.id,data:this.raster.rasterFunction.toJson(!0)});this._rasterRenderer&&this._rasterHandler.setRasterRenderer({layerId:this.id,data:this._rasterRenderer.toJson(!0)})}))}));this._animatePan2d=e.hitch(this,this._animatePan2d)},setOpacity:function(P){this.opacity!==
P&&(this.opacity=P,this.onOpacityChange(P))},onOpacityChange:function(){},onRendererChange:function(){},refresh:function(){if(this.loaded&&this._map)if(!this._canDraw()||10>q("ie"))this.onError(Error("Unable to refresh. This layer is not supported in the current browser."));else this._map&&this._extentChangeHandler(this._map.extent)},clear:function(P,aa,ea,X){this._canDraw()&&(this.useWebGL||(ea?this._context.clearRect(P,aa,ea,X):this._context.clearRect(0,0,this._map.width,this._map.height)))},getContext:function(){return this._context},
onResume:function(){this.inherited(arguments);this._toggleTime();r.show(this._div);if("css-transforms"===this._map.navigationMode){var P=this._map.__visibleDelta;this._left=this._tdx=P.x;this._top=this._tdy=P.y;a.set(this._div,c._css.names.transform,c._css.translate(this._left,this._top))}this._displayTimer=this._displayTimer||setTimeout(e.hitch(this,function(){this._extentChangeHandler(this._map.extent,null,!0)}),0)},onSuspend:function(){this.inherited(arguments);this._fireUpdateEnd();this._toggleTime();
r.hide(this._div);clearTimeout(this._displayTimer);this._displayTimer=null},redraw:function(){this.useWebGL&&this._glSetting&&(this._glSetting.hasNewTexture=!1);var P=this.tileMode?this.tileManager.originalPixelData:this.originalPixelData;if(this.tileMode?P&&(P.src||P.texture):P)if(this.tileMode)if(this.useWebGL)this._updateAllTilesOnce(P);else{this.tileManager.tiles.forEach(function(ea){ea&&(ea.update=null,ea.completed=!1,ea.processedPixelBlock=null,ea.renderedPixelBlock=null)});P.processedPixelBlock=
null;var aa=this.raster.rasterFunction?this.raster.rasterFunction.read(P):{extent:P.extent,pixelBlock:P.src[this.tileManager.identifiers[0]]&&P.src[this.tileManager.identifiers[0]].pixelBlock};P.renderedPixelBlock=null;P=this._rasterRenderer?this._rasterRenderer.draw(aa):aa;this._drawOneFrame(P)}else this._supportLegacyPropMethods&&this.pixelFilter?this._setPixelData(this.originalPixelData):(P.processedPixelBlock=null,aa=this.raster.rasterFunction?this.raster.rasterFunction.read(P):{extent:P.extent,
pixelBlock:P.src?P.src[this.tileManager.identifiers[0]]&&P.src[this.tileManager.identifiers[0]].pixelBlock:P.pixelBlock},P.renderedPixelBlock=null,P=this._rasterRenderer?this._rasterRenderer.draw(aa):aa,this._drawOneFrame(P))},getCurrentResolution:function(){var P=this._map.extent;return new C((P.xmax-P.xmin)/this._map.width,(P.ymax-P.ymin)/this._map.height,P.spatialReference)},getCustomRasterFields:function(P){var aa=P?P.rasterAttributeTableFieldPrefix:this._rasterFieldPrefix,ea={name:this._rasterFieldPrefix+
"ServicePixelValue",alias:"Pixel Value",domain:null,editable:!1,length:50,type:10.3<=this.version?"esriFieldTypeDouble":"esriFieldTypeString"};P=this.fields?e.clone(this.fields):[];P.push(ea);(ea=this.rasterAttributeTable&&this.rasterAttributeTable.fields)&&0<ea.length&&(ea=u.filter(ea,function(X){return"esriFieldTypeOID"!==X.type&&"value"!==X.name.toLowerCase()}),ea=u.map(ea,function(X){var S=e.clone(X);S.name=aa+X.name;return S}),P=P.concat(ea));return P},setRenderer:function(P,aa){if(this.loaded&&
P){if(P.declaredClass&&-1<P.declaredClass.indexOf("esri.layers.rasterLib")){this._rasterRenderer=P;this._rasterRenderer.bind({layer:this});var ea=this.bandIds=P.bandIndex;this.raster&&this.raster.setFetchParameters({bandIds:ea});this._params&&(this._params.bandIds=ea&&0<ea.length?ea.join(","):null);this.renderer=this._getCommonRenderer(P)}else ea=e.clone(P.toJson?P.toJson():P),"rasterStretch"===ea.type&&(ea.bandIndex=this.bandIds,ea.bandIndex&&1<ea.bandIndex.length||!ea.bandIndex&&this.raster&&1<
this.raster.rasterInfo.bandCount)&&(ea.type="rgb"),this._rasterRenderer=ba.create(ea),this.renderer=P.declaredClass?P:this._getCommonRenderer(this._rasterRenderer),this._rasterRenderer.bind({layer:this});if(this._map){if(this.loaded&&this._rasterHandler._connected){var X=this._rasterHandler.setRasterRenderer({layerId:this.id,data:this._rasterRenderer.toJson(!0)});this._updateTilingEffects()}aa||(X?X.then(e.hitch(this,function(){this.redraw()})):this.redraw());this.onRendererChange()}}},setBandIds:function(P,
aa){this.bandIds=P;this.raster&&this.raster.setFetchParameters({bandIds:P});this._params&&(this._params.bandIds=P&&0<P.length?P.join(","):null);this.setRenderer(this.renderer,aa)},_setTime:function(P){P=P?P.toJson():null;this._params&&(this._params.time=P);this.raster.setFetchParameters({time:P});this.tileManager&&this.tileManager.tiles&&this.tileManager.resetTiles()},setInfoTemplate:function(P){this.infoTemplate=P;this._updateInfoTemplateFields(this.fields)},setMultiDimensionalDefinition:function(P,
aa){var ea=P&&P.multidimensionalDefinition;if(ea&&this.loaded){var X=ea&&ea[0].variableName;""===X&&(X=this._multidimensionalInfo.variables[0].name,ea.forEach(function(ia){ia.variableName=X}));if("ImageService"===this.raster.sourceType){var S=this.raster._getAllDimensionDefinition(ea,X);S.defChanged&&(P.multidimensionalDefinition=S.definition,this.setMosaicRule(P,!0))}this.raster.setFetchParameters({multidimensionalDefinition:ea});this.tileManager&&this.tileManager.tiles&&this.tileManager.resetTiles();
X&&this._updateRasterInfo(X);aa||this.refresh()}},_updateRasterInfo:function(P){var aa=this.raster.rasterInfo,ea=this.getHistograms({variableName:P});P=this.getStatistics(P);(new h([ea,P])).then(e.hitch(this,function(X){X[0][0]&&(aa.histograms=X[0][1].histograms);X[1][0]&&(aa.statistics=X[1][1]);this.refresh()}))},_updateInfoTemplateFields:function(P){if(P&&!(1>P.length)&&this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.fieldInfos&&!(1>this.infoTemplate.info.fieldInfos.length)){var aa,
ea;var X=this.infoTemplate.info.fieldInfos;for(aa=0;aa<P.length;aa++){var S=P[aa];for(ea=0;ea<X.length;ea++)if(X[ea].fieldName.toLowerCase()===S.name.toLowerCase()&&X[ea].fieldName!==S.name){X[ea].fieldName=S.name;break}}}},getPixelData:function(P){return this.tileMode?P?this.tileManager&&this.tileManager.originalPixelData&&this.tileManager.originalPixelData.src&&this.tileManager.originalPixelData.src[this.tileManager.identifiers[0]]:null:this.inherited(arguments)},fetchPopupFromTiles:function(P){var aa=
new l;this.identify(P.geometry).then(function(ea){var X=ea.pixelValue;this.hasStdTime()&&X&&X.length&&null!=X[0]&&(X=X.map(function(oa){return this.getStdTimeValue(oa)}.bind(this)).join(", "));if(X){ea={ObjectId:0,"Raster.ServicePixelValue":X};var S=this.rasterAttributeTable&&this.rasterAttributeTable.features;if(S&&0<S.length&&(S=u.filter(S,function(oa){if(oa&&oa.attributes)return oa.attributes.hasOwnProperty("Value")?oa.attributes.Value==X:oa.attributes.VALUE==X}),0<S.length&&(S=e.clone(S[0]))))for(var ia in S.attributes)S.attributes.hasOwnProperty(ia)&&
(ea[this._rasterFieldPrefix+ia]=S.attributes[ia]);ia=new v(new x(this.projectedFullExtent||this.fullExtent),null,ea);ia.setInfoTemplate(this.infoTemplate);ia._layer=this;this._lastPopup=[ia];aa.resolve([ia])}else this._lastPopup=[],aa.resolve()}.bind(this),function(ea){this._lastPopup=[];aa.resolve(ea)});return aa},getPopupFromTiles:function(){return this._lastPopup},identify:function(P,aa){return this.raster?this.raster.identify(P):(P=new l,P.reject("layer must be initialized to identify"),P.promise)},
_getCommonRenderer:function(P){switch(P.rendererName){case "RGB":case "Stretch":return new D(P.toCommonRendererJson());case "UniqueValue":return new E(P.toCommonRendererJson());case "ClassBreaks":return new A(P.toCommonRendererJson());case "Colormap":return new F(P.toCommonRendererJson());case "ShadedRelief":return new y(P.toCommonRendererJson())}},_getProjectedFullExtent:function(P){return this.raster.getProjectedFullExtent(P).then(e.hitch(this,function(aa){this.projectedFullExtent=aa}))},_initialize:function(P,
aa){aa=aa||{};this._supportLegacyPropMethods&&this.constructor._onMap&&(this.constructor._onMap["rendering-change"]={method:"onRenderingChange"},this.constructor._onMap["mosaic-rule-change"]={method:"onMosaicRuleChange"},this.constructor._onMap["spatial-reference-change"]={method:"onSpatialReferenceChange"});this.raster={};var ea=aa.raster?aa.raster.url:P;ea&&-1<ea.toLowerCase().indexOf("/imageserver")&&this._supportLegacyPropMethods&&this._addLegacySupport(ea,aa);var X=e.hitch(this,function(){this.loaded=
!0;this.mosaicRule&&this.mosaicRule.multidimensionalDefinition&&0<this.mosaicRule.multidimensionalDefinition.length&&this.setMultiDimensionalDefinition(this.mosaicRule,!0);this.raster._setRasterHandler(this._rasterHandler);this.onLoad(this);var S=this._loadCallback;S&&(delete this._loadCallback,S(this))});(P?O.create(e.mixin({url:P},aa)):aa.raster&&aa.raster.open()).then(e.hitch(this,function(S){if(S){this.raster=S;var ia=this._getSourceImageServiceRaster();this.url||(this.url=ia&&ia.url);this.url&&
(this._url=m.urlToObject(P));var oa=aa.minScale,qa=aa.maxScale,wa=S.tileInfo&&"Raster"===S.tileInfo.tileType;null==qa&&(qa=wa&&aa.zoomFactor?S.tileInfo.lods[S.tileInfo.lods.length-1].scale/aa.zoomFactor:this.maxScale);null==oa&&(oa=wa&&aa.zoomFactor?S.tileInfo.lods[0].scale*aa.zoomFactor:this.minScale);ia&&"ImageService"===ia.sourceType&&this._supportLegacyPropMethods&&this._addGeneralProperties(P,aa);this.initialExtent=this.fullExtent=this.extent=this.raster.rasterInfo.extent;this.spatialReference=
this.extent.spatialReference;this.timeInfo=this.raster.rasterInfo.timeInfo?new I(this.raster.rasterInfo.timeInfo):null;this.rasterAttributeTable=this.raster.rasterInfo.vat;this._multidimensionalInfo=this.raster.rasterInfo.multidimensionalInfo;this.rasterAttributeTable&&(this._rasterAttributeTableFields=this.rasterAttributeTable.fields);this.mosaicRule&&this.raster.setFetchParameters({multidimensionalDefinition:this.mosaicRule.multidimensionalDefinition});this._multidimensionalInfo&&(this._getDefaultMultidimensionalDefinition(this._multidimensionalInfo,
!0,!0),this.mosaicRule||(this.mosaicRule=this.defaultMosaicRule,this.raster.setFetchParameters({multidimensionalDefinition:this._defaultMultidimensionalDefinition})),this.raster.defaultMultidimensionalDefinition=this._defaultMultidimensionalDefinition);null==oa||this._hasMin||this.setMinScale(oa);null==qa||this._hasMax||this.setMaxScale(qa);this._workInitPromise?this._workInitPromise.then(X,X):X()}}),this._errorHandler)},_getSourceImageServiceRaster:function(){var P=this.raster&&"Function"===this.raster.sourceType?
1===this.raster.getMemberRasters().length?this.raster.getMemberRasters()[0]:null:this.raster;if(P&&"ImageService"===P.sourceType)return P},_addLegacySupport:function(P,aa){this._url=m.urlToObject(P);aa=aa||{};this.format=(P=aa.imageServiceParameters)&&P.format;this.compressionTolerance=P&&P.compressionTolerance?P.compressionTolerance:.01;this.interpolation=P?P.interpolation:null;this.compressionQuality=P?P.compressionQuality:null;this.bandIds=P&&P.bandIds||aa&&aa.bandIds||null;this.mosaicRule||(this.mosaicRule=
P?P.mosaicRule:null);this.renderingRule||(this.renderingRule=P?P.renderingRule:null);this.useMapDimensionValue=aa.hasOwnProperty("useMapDimensionValue")?!!aa.useMapDimensionValue:!0;this.hasImageFilter=aa.hasImageFilter;this.activeMapDimensions=aa.activeMapDimensions;this._params=e.mixin({},this._url.query,{f:"image",interpolation:this.interpolation,format:this.format,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null},P?P.toJson():{});this.pixelFilter=aa.pixelFilter;
this.originalPixelData=this.pixelData=null;this._queryVisibleRastersHandler=e.hitch(this,this._queryVisibleRastersHandler);this._useRenderingRuleAttributeTable=!1;this._rasterFunctionTemplateInfos={};this._customRenderingRuleId={};this._setDefaultFilter=function(){};var ea={setInterpolation:"interpolation",setCompressionQuality:"compressionQuality",setCompressionTolerance:"compressionTolerance",setBandIds:"bandIds",setDefaultBandIds:"bandIds",setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",
setImageFormat:"format"},X,S=new ca;Object.keys(ea).forEach(e.hitch(this,function(ia){this[ia]=e.hitch(this,function(oa,qa){X={};X[ea[ia]]=oa;this.raster&&(this.raster.setFetchParameters(X),S[ia].bind(this)(oa,qa))})}));this.setDisableClientCaching=function(ia){S.setDisableClientCaching.bind(this)(ia);var oa=this._getSourceImageServiceRaster();oa?oa.disableClientCaching=ia:null}.bind(this);this.setDefinitionExpression=S.setDefinitionExpression.bind(this);this.setUseMapTime=S.setUseMapTime.bind(this);
this._toggleTime=S._toggleTime.bind(this);this._onTimeExtentChangeHandler=S._onTimeExtentChangeHandler.bind(this);this.setPixelFilter=S.setPixelFilter.bind(this);this.getHistograms=S.getHistograms.bind(this);this.getRasterFunctionInfos=S.getRasterFunctionInfos.bind(this);this.getKeyProperties=S.getKeyProperties.bind(this);this.getRasterAttributeTable=S.getRasterAttributeTable.bind(this);this.getRenderingRuleServiceInfo=S.getRenderingRuleServiceInfo.bind(this);this._getRenderingRuleId=S._getRenderingRuleId.bind(this);
this._isRenderingRuleAProcessingTemplate=S._isRenderingRuleAProcessingTemplate.bind(this);this.handleSpatialReferenceChange=S.handleSpatialReferenceChange.bind(this);this.onRenderingChange=this.onRenderingChange||function(){};this.onSpatialReferenceChange=this.onSpatialReferenceChange||function(){};this.onMosaicRuleChange=this.onMosaicRuleChange||function(ia){};this.setRasterRenderer=this.setRenderer;this.getMultidimensionalInfo=S.getMultidimensionalInfo.bind(this);this.getColormap=S.getColormap.bind(this);
this.getRenderingRuleColormap=S.getRenderingRuleColormap.bind(this);this.getDefaultMultidimensionalDefinition=S.getDefaultMultidimensionalDefinition.bind(this);this._getDefaultMultidimensionalDefinition=S._getDefaultMultidimensionalDefinition.bind(this);this._getDefaultDimensionValue=S._getDefaultDimensionValue.bind(this);this.getStatistics=S.getStatistics.bind(this)},_addGeneralProperties:function(){var P=this._getSourceImageServiceRaster();if(P){var aa=["minScale","maxScale","tileInfo"];Object.keys(P.serviceInfo).forEach(function(S){null==
this[S]&&-1===aa.indexOf(S)&&(this[S]=P.serviceInfo[S])}.bind(this));this.pixelSizeX=parseFloat(this.pixelSizeX);this.pixelSizeY=parseFloat(this.pixelSizeY);this.bands=P.rasterInfo.statistics;var ea,X=[];this.fields=this.fields||[];for(ea=0;ea<this.fields.length;ea++)X.push(new B(this.fields[ea]));this.fields=X;this.version=this.currentVersion;this.defaultMosaicRule=P.serviceInfo.defaultMosaicRule}},setDefaultRenderer:function(){if(this.loaded&&this._canvas&&!this.pixelFilter){var P=ba.createDefaultRenderer(this);
if(null!=P){var aa=this.mosaicRule&&this.mosaicRule.multidimensionalDefinition&&0<this.mosaicRule.multidimensionalDefinition.length;if(this._multidimensionalInfo&&aa&&"Stretch"===P.rendererName){var ea=this.mosaicRule.multidimensionalDefinition[0].variableName;(aa=this._multidimensionalInfo.variables.filter(function(X){return X.name===ea})[0])&&aa.histograms&&aa.histograms.length&&(P.histograms=aa.histograms,6===P.stretchType&&(P.dra=!1));aa&&aa.statistics&&aa.statistics.length&&(P.statistics=aa.statistics.map(function(X){return[X.min,
X.max,X.mean,X.stddev||X.standardDeviation]}),6!==P.stretchType&&(P.dra=!1))}this.setRenderer(P,!0)}}},setDefaultInterpolation:function(){if(this.loaded&&this._canvas){var P=this.raster.serviceInfo&&this.raster.serviceInfo.defaultResamplingMethod;if(P)switch(P.toLowerCase()){case "bilinear":this.interpolation="RSP_BilinearInterpolation";break;case "cubic":this.interpolation="RSP_CubicConvolution";break;case "majority":this.interpolation="RSP_Majority";break;case "nearest":this.interpolation="RSP_NearestNeighbor"}else{P=
this.raster.dataType&&this.raster.dataType.toLowerCase();var aa=!!this.raster.rasterInfo.colormap;this.raster.rasterInfo.vat||aa||"thematic"===P||"StdTime"===P?"RSP_NearestNeighbor":"RSP_BilinearInterpolation"}}},_toggleTime:function(){},_updateTilingEffects:function(){(this._hasTilingEffects=this._rasterRenderer&&this._rasterRenderer.hasTilingEffects()||this.raster&&this.raster.rasterFunction&&this.raster.rasterFunction.hasTilingEffects())&&this._map&&this.tileMode&&this.useWebGL&&this.tileManager&&
(this._hasTilingEffects=!1)},_setMap:function(P,aa){this.inherited(arguments);P.spatialReference&&(P.spatialReference.ics||P.spatialReference.icsId)&&(this.roaming=this.useWebGL=this.tileMode=!1);if(this.tileMode){this.virtualTileInfo=new Z(null,{refTileInfo:P.tileInfo,spatialReference:P.spatialReference,extent:this.raster.rasterInfo.extent});var ea=this.raster.tileInfo&&(-1<["Elevation","Raster"].indexOf(this.raster.tileInfo.tileType)||3===this.raster.rasterInfo.bandCount&&"U8"===this.raster.rasterInfo.pixelType)?
this.raster.tileInfo:this.virtualTileInfo;this._tileParams=this._tileParams||{};this._tileParams.size=ea.cols+","+ea.rows;this.tileManager=new fa({tileInfo:ea,layer:this,mapSR:P.spatialReference})}this._dragOrigin={x:0,y:0};ea=this._div=k.create("div",null,aa);var X={width:P.width+"px",height:P.height+"px",position:"absolute"};"css-transforms"===P.navigationMode?this.roaming&&this.tileMode&&this.useWebGL||(X[c._css.names.transform]=c._css.translate(P.__visibleDelta.x,P.__visibleDelta.y),this._left=
P.__visibleDelta.x,this._top=P.__visibleDelta.y):this._left=this._top=0;a.set(ea,X);this._canvas=k.create("canvas",{width:P.width+"px",height:P.height+"px",style:"position: absolute;"},ea);p.isDefined(this.opacity)&&a.set(ea,"opacity",this.opacity);this._contextType?(this._context=this._canvas.getContext(this._contextType,null),this.useWebGL=this._context instanceof WebGLRenderingContext):this.useWebGL?(this._context=this._canvas.getContext("webgl",null)||this._canvas.getContext("experimental-webgl",
null),this.drawMode=!1):(this._context=this._canvas.getContext("2d"),this.drawMode=!0);this.useWebGL&&(P.acquireWebGLContext(this),this._glSetting={gl:this._context,branchCount:this.raster.rasterFunction?this.raster.rasterFunction.branchCount:0,pingpong:null,branches:null,drawMesh:this._drawMesh,programUniforms:{}});this.raster.rasterFunction&&(this._updateTilingEffects(),this.raster.setProcessingContext({layer:this}));this.setRenderer(this.renderer,!0);this._rasterRenderer||this.setDefaultRenderer();
this.interpolation||this.setDefaultInterpolation();this._mapWidth=P.width;this._mapHeight=P.height;this._connects=[];this._connects.push(t.connect(P,"onPan",this,this._panHandler));this._connects.push(t.connect(P,"onPanEnd",this,this._panEndHandler));"css-transforms"===P.navigationMode?this._connects.push(t.connect(P,"onScale",this,this._onScaleHandler)):(this._connects.push(t.connect(P,"onZoom",this,this._onZoomHandler)),this._connects.push(t.connect(P,"onZoomEnd",this,this._onZoomEndHandler)));
this._connects.push(t.connect(P,"onResize",this,this._onResizeHandler));this._connects.push(t.connect(P,"onExtentChange",this,this._extentChangeHandler));this._connects.push(t.connect(this,"onVisibilityChange",this,this._visibilityChangeHandler));this._connects.push(t.connect(this,"onOpacityChange",this,this._opacityChangeHandler));this._startRect={left:0,top:0,width:P.width,height:P.height};this.evaluateSuspension();if(this.suspended&&!P.loaded)var S=t.connect(P,"onLoad",this,function(){t.disconnect(S);
S=null;this.evaluateSuspension()});return ea},_unsetMap:function(P,aa){this.useWebGL&&P.releaseWebGLContext(this);u.forEach(this._connects,t.disconnect,this);var ea=this._div;ea&&(aa.removeChild(ea),k.destroy(ea));this._map=this._canvas=this._context=this.data=this._connects=null;clearTimeout(this._displayTimer);this._displayTimer=null;this.inherited(arguments)},_canDraw:function(){return!!(this._map&&this._canvas&&this._context)},_requestDataErrorHandler:function(P){"CancelError"!==P.name&&(this.clear(),
this.onError(P))},_clonePixelData:function(P){if(null===P||P.texture)return P;var aa={};P.extent&&(aa.extent=e.clone(P.extent));var ea=P.pixelBlock;null!=ea&&(aa.pixelBlock=ea.clone());aa.texture=P.texture;return aa},_setPixelData:function(P){if(P){P=this._clonePixelData(P);this.pixelFilter&&(this.pixelFilter.filter?(this.pixelFilter.renderTexture=!0,this.pixelFilter.filter(P)):this.pixelFilter(P));this.pixelData=P;if(this._rasterReadPromise&&this._rasterReadPromise.isCanceled())return;this._drawPixelData()}this._rasterReadPromise=
null},_requestData:function(P,aa,ea){this._rasterReadPromise&&this._rasterReadPromise.cancel();P=e.clone(P)._normalize(!0);this._rasterReadPromise=this.raster.read({extent:P,width:this._map.width,height:this._map.height});this._rasterReadPromise.then(e.hitch(this,function(X){this._rasterReadPromise&&this._rasterReadPromise.isCanceled()||(this.originalPixelData=X&&X.srcData?{extent:X.extent,src:X.srcData}:X,this.useWebGL&&this._glSetting&&(this._glSetting.hasNewTexture=!0),this._setPixelData(X))}),
e.hitch(this,this._requestDataErrorHandler));return this._rasterReadPromise},_drawPixelData:function(P){a.set(this._canvas,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+"px"});this._startRect={left:0,top:0,width:this._map.width,height:this._map.height};this.drawMode||"css-transforms"!==this._map.navigationMode||(this._tdx=this._left,this._tdy=this._top,this._multiply=null,a.set(this._div,c._css.names.transform,c._css.translate(this._left,this._top)),a.set(this._canvas,c._css.names.transform,
c._css.translate(-this._left,-this._top)),this._dragOrigin={x:0,y:0});this.useWebGL&&this._rasterRenderer&&this._rasterRenderer.draw(this.pixelData);if(this._canDraw()&&this.drawMode&&this.drawMode&&(P=P||this.pixelData)&&P.pixelBlock){var aa=this.pixelFilter?this.pixelData:this._rasterRenderer?this._rasterRenderer.draw(P):P;P=aa.pixelBlock;var ea=this._context,X=ea.createImageData(P.width,P.height);X.data.set(P.getAsRGBA());aa=aa.extent;var S=this._map.extent,ia=this.getCurrentResolution(),oa=0,
qa=0;Math.abs(aa.xmin-S.xmin)>ia.x&&(oa=Math.round((aa.xmin-S.xmin)/ia.x));Math.abs(S.ymax-aa.ymax)>ia.y&&(qa=Math.round((S.ymax-aa.ymax)/ia.y));"css-transforms"===this._map.navigationMode?(this._tdx=this._left,this._tdy=this._top,this._multiply=null,a.set(this._div,c._css.names.transform,c._css.translate(this._left,this._top)),a.set(this._canvas,c._css.names.transform,c._css.translate(-this._left,-this._top))):(a.set(this._div,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+
"px"}),a.set(this._canvas,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+"px"}));this._dragOrigin={x:0,y:0};this.tileMode?this.clear(oa,qa,P.width,P.height):this.clear();ea.putImageData(X,oa,qa,0,0,P.width,P.height);this._fireUpdateEnd()}},hasStdTime:function(){if(!this.hasMultidimensions||"StdTime"!==this.raster.dataType)return!1;var P=this.mosaicRule&&this.mosaicRule.multidimensionalDefinition;P=P&&P.length?P[0]:this._defaultMultidimensionalDefinition[0];var aa=this.raster.rasterInfo.multidimensionalInfo.variables,
ea=P?P.variableName:aa[0].name;return aa.some(function(X){if(X.name===ea)return!X.dimensions||0===X.dimensions.length||X.dimensions.some(function(S){return"StdTime"===S.name})})},getStdTimeValue:function(P){return(new Date(864E5*(P-25569))).toString()},computeHistograms:function(P){P=new l;var aa=this.getPixelData(!0);if(aa&&aa.pixelBlock&&aa.pixelBlock.pixels&&((new J({}))._calculateStatisticsHistograms(aa),aa.pixelBlock.histograms))return P.resolve({histograms:aa.pixelBlock.histograms}),P;P.reject();
return P},_animatePan2d:function(){this._oldDelta&&this._delta.x===this._oldDelta.x&&this._delta.y===this._oldDelta.y||(this.tileManager.updateTile(this.tileManager.originalPixelData,!0),this._oldDelta={x:this._delta.x,y:this._delta.y});this._roamingAnimation&&this.tileMode&&this.useWebGL&&(this._roamingAnimation=requestAnimationFrame(this._animatePan2d))},_cancelAnimation:function(){this._animation&&(cancelAnimationFrame(this._animation),this._animation=null)},_updateAllTilesOnce:function(P,aa){return this.tileManager.updateTile(P,
!0).then(e.hitch(this,function(ea){(this._hasTilingEffects||this.useWebGL||aa)&&this._drawOneFrame(ea)}))},_drawOneFrame:function(P,aa){if(!(this.suspended||!this._map||this.tileMode&&!this._drawTile||(this.tileMode&&this.useWebGL&&this.tileManager.originalPixelData.isEmpty&&this._context.clear(this._context.COLOR_BUFFER_BIT),this.tileMode&&this.useWebGL&&this.tileManager.xformSetting&&this.tileManager.xformSetting.requireProjection&&!this.tileManager.xformSetting.gridConfig))){if(!this._resetCss||
this._levelChange)this._levelChange=!1,this._resetDrawing();if(P&&(P.renderedPixelBlock||P.pixelBlock)&&this._canDraw()&&this.drawMode){aa=P.extent;var ea=this._map.extent;if(!this._isExtentOutSide(aa,ea)){var X=P.pixelBlock||P.renderedPixelBlock,S=this._context,ia=S.createImageData(X.width,X.height);ia.data.set((P.renderedPixelBlock||P.pixelBlock).getAsRGBA());P=this.getCurrentResolution();var oa=0,qa=0;Math.abs(aa.xmin-ea.xmin)>P.x&&(oa=Math.round((aa.xmin-ea.xmin)/P.x));Math.abs(ea.ymax-aa.ymax)>
P.y&&(qa=Math.round((ea.ymax-aa.ymax)/P.y));S.putImageData(ia,oa,qa,0,0,X.width,X.height)}}else this._fireUpdateEnd()}},_isExtentOutSide:function(P,aa){return P.xmax<=aa.xmin||P.xmin>=aa.xmax||P.ymax<=aa.ymin||P.ymin>=aa.ymax},_resetDrawing:function(){this._resetCss=!0;if(!this.useWebGL)if(this._multiply||this._startRect.width!==this._map.width||this._startRect.height!==this._map.height)this.clear();else{var P=this._context.getImageData(0,0,this._map.width,this._map.height);this.clear();this._context.putImageData(P,
this._startRect.left,this._startRect.top)}this._dragOrigin={x:0,y:0};this._startRect={left:0,top:0,width:this._map.width,height:this._map.height};a.set(this._canvas,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+"px"});"css-transforms"===this._map.navigationMode?(this.roaming&&this.tileMode&&this.useWebGL&&(this._delta=null),this._tdx=this._left,this._tdy=this._top,this._multiply=null,a.set(this._div,c._css.names.transform,c._css.translate(this._left,this._top)),a.set(this._canvas,
c._css.names.transform,c._css.translate(-this._left,-this._top))):(a.set(this._div,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+"px"}),a.set(this._canvas,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+"px"}))},_drawAllFrames:function(){if(!this.suspended&&this._map&&(!this.tileMode||this._drawTile))if(this._resetCss){var P=this._frames,aa=0,ea;for(ea=0;ea<P.length;ea++)if(P[ea].completed)aa++;else if(P[ea].tileData.renderedPixelBlock){P[ea].completed=
!0;var X=P[ea].tileData;break}else if(P[ea].tileData._fetched&&!P[ea].tileData.src){P[ea].completed=!0;break}else if(P[ea].tileData.update&&P[ea].tileData.update.isFulfilled()&&!P[ea].tileData.renderedPixelBlock){P[ea].completed=!0;break}else P[ea].tileData.fetch&&(!0===P[ea].tileData.fetch||P[ea].tileData.fetch.isCanceled()||P[ea].tileData.fetch.isRejected())?(P[ea].completed=!0,aa++):this._isExtentOutSide(P[ea].tileData.extent,this._map.extent)&&(P[ea].completed=!0,aa++);if(X){aa++;var S=X.extent,
ia=this._map.extent,oa=this.getCurrentResolution(),qa=ea=0;Math.abs(S.xmin-ia.xmin)>oa.x&&(ea=Math.round((S.xmin-ia.xmin)/oa.x));Math.abs(ia.ymax-S.ymax)>oa.y&&(qa=Math.round((ia.ymax-S.ymax)/oa.y));X.renderedPixelBlock?(S=X.renderedPixelBlock,ia=this._context.createImageData(S.width,S.height),ia.data.set(X.renderedPixelBlock.getAsRGBA()),this._context.putImageData(ia,ea,qa,0,0,S.width,S.height)):this.clear(ea,qa,X.width,X.height)}aa===P.length?(this._animation=null,this._fireUpdateEnd()):this._animation=
requestAnimationFrame(e.hitch(this,this._drawAllFrames))}else this._resetDrawing(),this._animation=requestAnimationFrame(e.hitch(this,this._drawAllFrames))},_fetchTiles:function(P,aa){if(!this.suspended&&this.loaded){this._cancelAnimation();var ea=this.tileManager,X=!(ea.xformSetting.requireProjection&&ea.xformSetting.requirePE)||U.load();b(X,e.hitch(this,function(){ea.updateExtent(P,this.getCurrentResolution());this._resetCss=!1;ea.fetchTiles(aa);aa&&(this._hasTilingEffects||this.useWebGL?this.useWebGL&&
0<ea.tiles.length?(ea.fillupTiles(),ea._validateRawPixelBlocks(ea.originalPixelData)?this._updateAllTilesOnce(ea.originalPixelData):ea.originalPixelData&&ea.originalPixelData.src&&ea.tiles.some(function(S){return S.updateCompleted})&&this._context.clear(this._context.COLOR_BUFFER_BIT),ea.tiles.forEach(e.hitch(this,function(S){S.update&&!S.updateCompleted&&S.update.then(function(ia){S.updateCompleted||(S.updateCompleted=!0);(this._hasTilingEffects||this.useWebGL)&&this._drawOneFrame(ia)}.bind(this))}))):
this._hasTilingEffects&&b(ea.fetchAllCompleted.isResolved()||ea.fetchAllCompleted,e.hitch(this,function(){this._updateAllTilesOnce(ea.originalPixelData)})):(this._frames=ea.tiles.map(function(S){return{completed:!1,tileData:S}}),this._drawAllFrames()))}))}},_redrawTiles:function(){this._fetchTiles(this._map.extent,!0)},_panHandler:function(P,aa){this._drawTile=!1;"css-transforms"===this._map.navigationMode?this.roaming&&this.tileMode&&this.useWebGL?(this._delta=aa,!this._roamingAnimation&&this.tileMode&&
(this._roamingAnimation=requestAnimationFrame(this._animatePan2d))):(this._left=this._map.__visibleDelta.x+aa.x,this._top=this._map.__visibleDelta.y+aa.y,a.set(this._div,c._css.names.transform,c._css.translate(this._left,this._top))):a.set(this._div,{left:this._startRect.left+aa.x+"px",top:this._startRect.top+aa.y+"px"});this.tileMode&&this._fetchTiles(P)},_panEndHandler:function(P,aa){aa&&(this._startRect.left+=aa.x,this._startRect.top+=aa.y);this.oldData=null;this._roamingAnimation&&(cancelAnimationFrame(this._roamingAnimation),
this._oldDelta=this._roamingAnimation=null)},_onScaleHandler:function(P,aa){var ea={},X=c._css.names;a.set(this._canvas,X.transition,aa?"none":X.transformName+" "+ha+"ms ease");this._matrix=P;P=this._multiply?n.multiply(P,this._multiply):P;if(this._tdx||this._tdy)P=n.multiply(P,{xx:1,xy:0,yx:0,yy:1,dx:-this._tdx,dy:-this._tdy});ea[X.transform]=c._css.matrix(P);a.set(this._canvas,ea)},_onZoomHandler:function(P,aa,ea){var X=this._startRect;P=X.width*aa;aa*=X.height;var S=X.left-(P-X.width)*(ea.x-X.left)/
X.width;ea=X.top-(aa-X.height)*(ea.y-X.top)/X.height;a.set(this._canvas,{left:S+"px",top:ea+"px",width:P+"px",height:aa+"px"});this._endRect={left:S,top:ea,width:P,height:aa}},_onZoomEndHandler:function(){this._endRect&&(this._startRect=this._endRect)},_onResizeHandler:function(P,aa,ea){a.set(this._div,{width:aa+"px",height:ea+"px"});a.set(this._canvas,{width:aa+"px",height:ea+"px"});this._startRect.width=this._canvas.width=aa;this._startRect.height=this._canvas.height=ea;this.useWebGL&&this._glSetting&&
(this._glSetting.pingpong=null,this._glSetting.branches=null)},_extentChangeHandler:function(P,aa,ea,X){if(this.loaded&&!this.suspended&&(!aa||0!==aa.x||0!==aa.y||ea)){this._drawTile=!0;"css-transforms"===this._map.navigationMode&&(aa&&(this._dragOrigin.x+=aa.x,this._dragOrigin.y+=aa.y),this._left=this._map.__visibleDelta.x,this._top=this._map.__visibleDelta.y,this.roaming&&this.tileMode&&this.useWebGL||ea||a.set(this._div,c._css.names.transform,c._css.translate(this._left,this._top)),ea&&(a.set(this._canvas,
c._css.names.transition,"none"),this._multiply=this._multiply?n.multiply(this._matrix,this._multiply):this._matrix,this._levelChange=!0));this._fireUpdateStart();var S=this._map;aa=this.raster.rasterFunction?this.raster.getMemberRasters().map(function(oa){return oa._rasterId}):[this.raster._rasterId];var ia={};this.tileMode?((this.roaming||this.useWebGL)&&this.tileMode||(aa.forEach(function(oa,qa){ia[oa]={extent:S.extent,pixelBlock:new Y({width:S.width,height:S.height,pixels:[],pixelType:"",mask:null,
statistics:[]})}}),this.tileManager.originalPixelData={extent:S.extent,src:ia}),this.projectedFullExtent?this._fetchTiles(P,!0):this._getProjectedFullExtent(S.spatialReference).then(e.hitch(this,function(){this._fetchTiles(P,!0)}))):this._requestData(S.extent,S.width,S.height)}},_visibilityChangeHandler:function(P){P?r.show(this._div):r.hide(this._div)},_opacityChangeHandler:function(P){a.set(this._div,"opacity",P)}});e.setObject("layers.RasterXLayer",g,c);return g});