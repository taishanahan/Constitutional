// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.46/esri/copyright.txt for details.
// See https://www.arcgis.com/home/copyright.txt for further details.
//>>built
/*
 @esri/arcgis-html-sanitizer - v2.9.0-next.1 - Tue Oct 19 2021 10:19:42 GMT-0400 (Eastern Daylight Time)
 Copyright (c) 2021 - Environmental Systems Research Institute, Inc.
 Apache-2.0

 js-xss
 Copyright (c) 2012-2017 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 http://ucdok.com
 MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details

 Lodash/isPlainObject
 Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 Calcite Web - Calcite Design Components in CSS, JS and HTML
 @version v1.2.5
 @license Apache-2.0
 @copyright 2018 Esri
 @link https://github.com/Esri/calcite-web
 @overview es6-promise - a tiny implementation of Promises/A+.
 @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 @license   Licensed under MIT license
            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 @version   v4.2.8+1e68dce6
*/
require({cache:{"esri/main":function(){define(["./kernel","dojo/i18n!./nls/jsapi","./config","./sniff"],function(f,B){f.bundle=B;return f})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(f,B,l){f=function(){return this}();var e=f.location,c=e.pathname;l=e.protocol;e={version:"3.46",_appBaseUrl:l+"//"+e.host+c.substring(0,c.lastIndexOf(c.split("/")[c.split("/").length-1]))};B.noGlobals||(f.esri=e);(e.dijit=e.dijit||{})._arcgisUrl=("http:"===l||"https:"===
l?l:"http:")+"//www.arcgis.com/sharing/rest";return e})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(f,B,l,e){l=function(){return this}();var c={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,
zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,zoomAnimationThrottled:!1,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:l.Worker&&!1,io:{errorHandler:function(u,t){B.publish("esri.Error",[u])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com",
"js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com","tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com","basemaps-api.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com","services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com",
"cdn-b.arcgis.com","static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com","qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com","staticdev.arcgis.com","tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com",
"servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com","basemapsdev-api.arcgis.com","basemapsbetadev.arcgis.com"],corsDetection:l.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},crossOriginNoCorsDomains:null,webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},
workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}}}};e.config=c;f.noGlobals||(l.esriConfig=c);return c})},"esri/sniff":function(){define(["dojo/_base/sniff","dojo/global","./kernel"],function(f,B,l){var e=f("ff"),c=f("ie"),u=void 0===c&&7<=f("trident"),t=f("edge"),d=f("webkit"),q=f("opera"),m=f("chrome"),a=f("safari"),h=navigator.userAgent,n;(n=h.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+_\d+)/i))&&f.add("esri-iphone",parseFloat(n[2].replace("_",".")));(n=h.match(/Android\s+(\d+(\.\d+)*)/i))&&
f.add("esri-android",parseFloat(n[1]));(n=h.match(/Fennec\/(\d+\.\d+)/i))&&f.add("esri-fennec",parseFloat(n[1]));0<=h.indexOf("BlackBerry")&&0<=h.indexOf("WebKit")&&f.add("esri-blackberry",1);f.add("esri-touch",f("esri-iphone")||f("esri-android")||f("esri-blackberry")||6<=f("esri-fennec")||(e||d)&&(document.createTouch||"ontouchstart"in B||B.TouchEvent&&0<navigator.maxTouchPoints)?!0:!1);(n=h.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&f.add("esri-mobile",!!n);f.add("esri-pointer",
!e&&(navigator.pointerEnabled||navigator.msPointerEnabled||!!B.PointerEvent));l._getDOMAccessor=function(k){var g="";e?g="Moz":d?g="Webkit":c?g="ms":q&&(g="O");return g+k.charAt(0).toUpperCase()+k.substr(1)};f.add("esri-phonegap",!!B.cordova);f.add("esri-cors",f("esri-phonegap")||B.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);f.add("esri-file-upload",B.FormData&&B.FileList?!0:!1);f.add("esri-script-sandbox",function(){return"MessageChannel"in B&&"HTMLIFrameElement"in B&&"sandbox"in HTMLIFrameElement.prototype});
f.add("esri-secure-context",function(){if("isSecureContext"in B)return B.isSecureContext;if(B.location&&B.location.origin)return 0===B.location.origin.indexOf("https:")});f.add("esri-wasm","WebAssembly"in B);f.add("esri-workers",B.Worker?!0:!1);f.add("esri-featurelayer-webgl",!1);if(h=f("esri-featurelayer-webgl")){var r=f("esri-mobile");n=r?1:2;r=r?1:3;"object"===typeof h?(h.maxDrillLevel=null==h.maxDrillLevel?n:h.maxDrillLevel,h.maxRecordCountFactor=null==h.maxRecordCountFactor?r:h.maxRecordCountFactor,
h.enablePBFQuery=null==h.enablePBFQuery?!0:h.enablePBFQuery):f.add("esri-featurelayer-webgl",{maxDrillLevel:n,maxRecordCountFactor:r,enablePBFQuery:!0},null,!0)}f.add("esri-featurelayer-webgl-labeling",!1);f.add("esri-pbf",!c||10<=c);f.add("esri-featurelayer-pbf",!0);f.add("esri-transforms",u||t||9<=c||3.5<=e||4<=m||3.1<=a||10.5<=q||3.2<=f("esri-iphone")||2.1<=f("esri-android"));f.add("esri-transitions",u||t||10<=c||4<=e||4<=m||3.1<=a||10.5<=q||3.2<=f("esri-iphone")||2.1<=f("esri-android"));f.add("esri-transforms3d",
u||t||10<=e||12<=m||4<=a||3.2<=f("esri-iphone")||3<=f("esri-android"));f.add("esri-url-encodes-apostrophe",function(){if(!B.document)return!1;var k=B.document.createElement("a");k.href="?'";return-1<k.href.indexOf("?%27")});3>f("esri-android")&&(f.add("esri-transforms",!1,!1,!0),f.add("esri-transitions",!1,!1,!0),f.add("esri-transforms3d",!1,!1,!0));f.add("esri-will-change",f("esri-transforms")&&(52<=m||11.1<=a));l._css=function(k){var g=f("esri-transforms3d");void 0!==k&&null!==k?g=k:g&&(m||a&&!f("esri-iphone"))&&
(g=!1);var b=g?"translate3d(":"translate(",w=g?m?",-1px)":",0px)":")",x=g?"scale3d(":"scale(",z=g?",1)":")",D=g?"rotate3d(0,0,1,":"rotate(",E=g?"matrix3d(":"matrix(",C=g?",0,0,":",",y=g?",0,0,0,0,1,0,":",",v=g?",0,1)":")";return{names:{transition:d&&"-webkit-transition"||e&&"MozTransition"||q&&"OTransition"||c&&"msTransition"||"transition",transform:d&&"-webkit-transform"||e&&"MozTransform"||q&&"OTransform"||c&&"msTransform"||"transform",transformName:d&&"-webkit-transform"||e&&"-moz-transform"||
q&&"-o-transform"||c&&"-ms-transform"||"transform",origin:d&&"-webkit-transform-origin"||e&&"MozTransformOrigin"||q&&"OTransformOrigin"||c&&"msTransformOrigin"||"transformOrigin",endEvent:d&&"webkitTransitionEnd"||e&&"transitionend"||q&&"oTransitionEnd"||c&&"MSTransitionEnd"||"transitionend"},translate:function(A,G){return b+A+"px,"+G+"px"+w},scale:function(A){return x+A+","+A+z},rotate:function(A){return D+A+"deg)"},matrix:function(A){return E+A.xx+","+A.xy+C+A.yx+","+A.yy+y+A.dx.toFixed(10)+(e&&
59>=e?"px,":",")+A.dy.toFixed(10)+(e&&59>=e?"px":"")+v},getScaleFromMatrix:function(A){if(!A)return 1;A=A.toLowerCase();var G=-1<A.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(A.substring(G.length,A.indexOf(",")))}}};l.isiPhone=f("esri-iphone");l.isAndroid=f("esri-android");l.isFennec=f("esri-fennec");l.isBlackBerry=f("esri-blackberry");l.isTouchEnabled=f("esri-touch");l.isPointerEnabled=f("esri-pointer");l._hasCors=f("esri-cors");l._hasFileUpload=f("esri-file-upload");l._hasTransforms=
f("esri-transforms");l._hasTransitions=f("esri-transitions");l._has3DTransforms=f("esri-transforms3d");return f})},"esri/utils":function(){define("./domUtils ./lang ./urlUtils ./request ./tileUtils ./graphicsUtils ./deferredUtils ./layerUtils ./geometry/normalizeUtils".split(" "),function(){return{}})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(f,B,l,e,c){var u={show:function(t){if(t=u.getNode(t))t.style.display="block"},
getNode:function(t){return t&&t.domNode||t},hide:function(t){if(t=u.getNode(t))t.style.display="none"},toggle:function(t){if(t=u.getNode(t))t.style.display="none"===t.style.display?"block":"none"},documentBox:8>=c("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(t){if(t=this.getNode(t)){var d=0,q=0,m=0,a=0,h=0,n=0;return[B.connect(t,"ontouchstart",function(r){d=r.touches[0].screenX;q=r.touches[0].screenY;
m=t.scrollWidth;a=t.scrollHeight;h=t.clientWidth;n=t.clientHeight}),B.connect(t,"ontouchmove",function(r){r.preventDefault();var k=t.firstChild;k instanceof Text&&(k=t.childNodes[1]);var g=k._currentX||0,b=k._currentY||0;g+=r.touches[0].screenX-d;0<g?g=0:0>g&&Math.abs(g)+h>m&&(g=-1*(m-h));k._currentX=g;b+=r.touches[0].screenY-q;0<b?b=0:0>b&&Math.abs(b)+n>a&&(b=-1*(a-n));k._currentY=b;e.set(k,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+g+"px, "+b+"px)"});d=r.touches[0].screenX;
q=r.touches[0].screenY})]}}};l.mixin(f,u);return u})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(f,B,l,e,c,u,t,d,q){function m(w,x,z,D){(x=x&&x[w])?x={formatType:x.formatType,options:x}:D&&-1!==f.indexOf(D.properties||"",w)?x={formatType:D.formatter||"DateString",options:null}:z&&-1!==f.indexOf(z.properties||"",w)&&(x={formatType:z.formatter||"NumberFormat",options:null});
return x}function a(w,x,z){return[e.isString(w)?w.split(""):w,x||l.global,e.isString(z)?new Function("item","index","array",z):z]}function h(w){return void 0!==w&&null!==w}function n(w){return h(w)?w:""}function r(w,x,z,D){var E=z.match(/([^\(]+)(\([^\)]+\))?/i);z=e.trim(E[1]);var C=E[2]?e.trim(E[2]):null;E=x[w];D=D||(C?B.fromJson(C.replace(/^\(/,"({").replace(/\)$/,"})")):{});C=D.utcOffset;if(-1===f.indexOf(g,z))z=e.getObject(z),e.isFunction(z)&&(E=z(E,w,x,D));else if("number"===typeof E||"string"===
typeof E&&E&&!isNaN(Number(E)))switch(E=Number(E),z){case "NumberFormat":return t.format(E,D);case "DateString":w=new Date(E);if(D.local||D.systemLocale)return D.systemLocale?w.toLocaleDateString()+(D.hideTime?"":" "+w.toLocaleTimeString()):w.toDateString()+(D.hideTime?"":" "+w.toTimeString());w=w.toUTCString();D.hideTime&&(w=w.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return w;case "DateFormat":return w=new Date(E),h(C)&&(w=c.add(w,"minute",w.getTimezoneOffset()-C)),d.format(w,D)}return n(E)}
function k(w,x){var z;if(x)for(z in w)w.hasOwnProperty(z)&&(void 0===w[z]?delete w[z]:w[z]instanceof Object&&k(w[z],!0));else for(z in w)w.hasOwnProperty(z)&&void 0===w[z]&&delete w[z];return w}var g=["NumberFormat","DateString","DateFormat"],b=/<\/?[^>]+>/g;u={valueOf:function(w,x){for(var z in w)if(w[z]==x)return z;return null},stripTags:function(w){if(w){var x=typeof w;if("string"===x)w=w.replace(b,"");else if("object"===x)for(var z in w)(x=w[z])&&"string"===typeof x&&(x=x.replace(b,"")),w[z]=
x}return w},substitute:function(w,x,z){if(h(z))if(e.isObject(z)){var D=z.first;var E=z.dateFormat;var C=z.numberFormat;var y=z.format}else D=z;if(x&&"${*}"!==x)return e.replace(x,e.hitch({obj:w},function(A,G){var F=G.split(":");return 1<F.length?(G=F[0],F.shift(),(A=y&&y[F[0]])?F=A.formatType:(F=F.join(":"),A=null),r(G,this.obj,F,A)):(A=m(G,y,C,E))?r(G,this.obj,A.formatType,A.options):n(this.obj[G])}),/\$\{([^\}]+)\}/g);x=[];for(var v in w)if(z=(z=m(v,y,C,E))?r(v,w,z.formatType,z.options):w[v],x.push(v+
" \x3d "+n(z)+"\x3cbr/\x3e"),D)break;return x.join("")},filter:function(w,x,z){x=a(w,z,x);z={};var D;w=x[0];for(D in w)x[2].call(x[D],w[D],D,w)&&(z[D]=w[D]);return z},startsWith:function(w,x,z){z=z||0;return w.indexOf(x,z)===z},endsWith:function(w,x,z){if("number"!==typeof z||!isFinite(z)||Math.floor(z)!==z||z>w.length)z=w.length;z-=x.length;w=w.indexOf(x,z);return-1!==w&&w===z},isDefined:h,fixJson:k,isObject:function(w){return w&&"object"===typeof w},isString:function(w){return"string"===typeof w},
mixin:function(w,x){for(var z in x)x.hasOwnProperty(z)&&(w[z]=x[z]);return w},clone2DArray:function(w){if(w=w?w.slice(0):null){var x,z=w.length;for(x=0;x<z;x++)w[x]=w[x]?w[x].slice(0):null}return w},clone3DArray:function(w){if(w=w?w.slice(0):null){var x,z=w.length;for(x=0;x<z;x++){w[x]=w[x]?w[x].slice(0):null;var D=w[x];if(D){var E,C=D.length;for(E=0;E<C;E++)D[E]=D[E]?D[E].slice(0):null}}}return w}};e.mixin(q,u);q._isDefined=h;q._getParts=a;q._sanitize=k;return u})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),
function(f,B,l,e,c,u,t,d,q,m){var a={},h=d.defaults.io,n=/^[a-z][a-z0-9\+\-\.]*:/i,r=/^\s*http:/i,k=/^\s*https:/i,g=/:\d+$/,b=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;a.isHTTP=function(x){var z=e.location.protocol;return null==x?"http:"===z||"https:"===z:x?"https:"===z:"http:"===z};a.getProtocolForWebResource=function(x){return a.isHTTP()?e.location.protocol:x?"https:":"http:"};a.urlToObject=function(x){var z={},D=new l(x),E=x.indexOf("?");null===D.query?z={path:x,query:null}:(z.path=x.substring(0,
E),z.query=c.queryToObject(D.query));D.fragment&&(z.hash=D.fragment,null===D.query&&(z.path=z.path.substring(0,z.path.length-(D.fragment.length+1))));return z};a.getProxyUrl=function(x,z){var D=f.isString(x)?0===f.trim(x).toLowerCase().indexOf("https:"):x,E=h.proxyUrl,C=m.io.proxyNotSet;f.isString(x)&&(x=a.getProxyRule(x))&&(E=x.proxyUrl);if(!E)throw Error(C);if(D&&!1!==z&&0!==e.location.href.toLowerCase().indexOf("https:")&&(z=E,0!==z.toLowerCase().indexOf("http")&&(z=a.getAbsoluteUrl(z)),z=z.replace(/^http:/i,
"https:"),a.canUseXhr(z))){E=z;var y=1}E=a.urlToObject(E);E._xo=y;return E};a.addProxy=function(x){var z=a.getProxyRule(x),D;z?D=a.urlToObject(z.proxyUrl):h.alwaysUseProxy&&(D=a.getProxyUrl());D&&(z=a.urlToObject(x),x=D.path+"?"+z.path,(D=c.objectToQuery(f.mixin(D.query||{},z.query)))&&(x+="?"+D));return x};a.addProxyRule=function(x){var z=x.urlPrefix=a.urlToObject(x.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),D=h.proxyRules,E,C=D.length,y=C;for(E=0;E<C;E++){var v=
D[E].urlPrefix;if(0===z.indexOf(v)){if(z.length===v)return-1;y=E;break}else 0===v.indexOf(z)&&(y=E+1)}D.splice(y,0,x);return y};a.getProxyRule=function(x){var z=h.proxyRules,D=z.length,E=a.urlToObject(x).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase();for(x=0;x<D;x++)if(0===E.indexOf(z[x].urlPrefix)){var C=z[x];break}return C};a.hasSameOrigin=function(x,z,D){x=x.toLowerCase();z=z.toLowerCase();var E=e.location.href.toLowerCase();x=0===x.indexOf("http")?new l(x):E=new l(E);
z=0===z.indexOf("http")?new l(z):f.isString(E)?new l(E):E;return(D||x.scheme===z.scheme)&&x.host===z.host&&x.port===z.port};a.canUseXhr=function(x,z){var D=q("esri-phonegap")?!0:!1,E=a.hasSameOrigin,C=h.corsEnabledServers,y,v=-1;!D&&q("esri-cors")&&C&&C.length&&(D=B.some(C,function(A,G){A=!A||"object"!==typeof A||A instanceof RegExp?A:A.host;if(A instanceof RegExp){if(A.test(x))return v=G,!0}else if(A&&(y=0!==A.trim().toLowerCase().indexOf("http"),E(x,y?"http://"+A:A)||y&&E(x,"https://"+A)))return v=
G,!0;return!1}));return z?v:D};a.getAbsoluteUrl=function(x){var z=a.getProtocolForWebResource();return f.isString(x)&&!n.test(x)?0===x.indexOf("//")?z+x:0===x.indexOf("/")?z+"//"+e.location.host+x:u._appBaseUrl+x:x};a.fixUrl=function(x){x=f.trim(x);x=a.getAbsoluteUrl(x);x=a.normalizeSlashes(x);x=x.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");x=a.downgradeToHTTP(x);return x=a.upgradeToHTTPS(x)};a.normalize=function(x){return a.fixUrl(x)};a.normalizeSlashes=function(x){if(/^https?:\/\//i.test(x)){var z=
x.indexOf("?");if(-1<z){var D=x.slice(0,z);var E=x.slice(z+1)}else D=x;x=D.replace(/\/{2,}/g,"/");x=x.replace("/","//");E&&(x+="?"+E)}return x};a.downgradeToHTTP=function(x){return a.isHTTP(!1)&&k.test(x)&&a.hasSameOrigin(e.location.href,x,!0)&&!a.canUseXhr(x)?x.replace(k,"http:"):x};a.upgradeToHTTPS=function(x){var z=h.httpsDomains,D=a.isHTTP(!1),E=a.isHTTP(!0);if(!r.test(x))return x;x=f.trim(x);var C=x.indexOf("/",7);C=-1===C?x:x.slice(0,C);C=C.toLowerCase().slice(7);if(g.test(C))if(t.endsWith(C,
":80"))C=C.slice(0,-3),x=x.replace(":80","");else return x;if(D&&C===e.location.host&&(!b.test(x)||!a.canUseXhr(x)))return x;D=!1;if(E&&C===e.location.host)D=!0;else if(z)for(var y=0;y<z.length;y++){var v=z[y];if(C===v||t.endsWith(C,"."+v)){D=!0;break}}D||!E||h.alwaysUseProxy||a.getProxyRule(x)||(D=!0);D&&(x=x.replace(r,"https:"));return x};d=m.widgets.popup;var w=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:d.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,
label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,appName:"Collector",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",
label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",label:d.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:d.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:d.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:d.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,
appName:"Microsoft Power BI",label:d.NLS_openLinkInApp}];a.getURIInfo=function(x){var z;B.some(w,function(D){D.pattern.test(x)&&(z=D);return!!z});return z};a.isKnownURI=function(x){return!!a.getURIInfo(x)};a.isSecureProxyService=function(x){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(x)};a.base64UrlEncode=function(x){return btoa(String.fromCharCode.apply(null,x)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};f.mixin(u,a);u._getProxyUrl=a.getProxyUrl;u._getProxiedUrl=a.addProxy;
u._hasSameOrigin=a.hasSameOrigin;u._canDoXOXHR=a.canUseXhr;u._getAbsoluteUrl=a.getAbsoluteUrl;u.fixUrl=a.fixUrl;return a})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils ./support/requestUtils".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x){function z(J){J=
new u(J);return(J.host+(J.port?":"+J.port:"")).toLowerCase()}function D(J){return this._xhr?this._xhr.getResponseHeader(J):null}function E(J,U){var Y=h.objectToQuery(J.content);Y&&(J.url+=(-1===J.url.indexOf("?")?"?":"\x26")+Y);if(2E3<J.url.length){if("data:"!==J.url.toLowerCase().slice(0,5))return J=new e,J.reject(c.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),J;if(3E6<J.url.length)return J=new e,J.reject(c.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),
J}var aa=new Image;U.allowImageDataAccess&&(aa.crossOrigin=J.withCredentials?"use-credentials":"anonymous");var la=!1,T=new e(function(N){la=!0;aa.onload=aa.onerror=aa.onabort=null;aa.src=""});U=function(N){aa.onload=aa.onerror=aa.onabort=null;la||T.reject(Error("Unable to load the resource"))};aa.onload=function(){aa.onload=aa.onerror=aa.onabort=null;la||T.resolve(this)};aa.onerror=U;aa.onabort=U;aa.alt="";aa.src=J.url;return T}function C(J,U,Y,aa){var la=!1,T=!1,N=!1,K;if(g.isDefined(U))if(c.isObject(U)){la=
!!U.useProxy;T=!!U.usePost;N=!!U.returnProgress;var W=U.crossOrigin}else la=!!U;J=c.mixin({},J);delete J._credential;J._ssl&&(J.url=J.url.replace(/^http:/i,"https:"));10>k("ie")&&!I.test(J.url)&&(J.url=encodeURI(J.url));var da=J.content,fa=J.url,ha=Y&&J.form,ra=M;W=g.isDefined(W)?W:ra.useCors;J.load=function(Ta){if(Ta){if(Ta.error){var ab=c.mixin(Error(),Ta.error);ab.log=!!l.isDebug}else"error"===Ta.status&&(ab=c.mixin(Error(),Ta),ab.log=!!l.isDebug);ab&&(J.failOk=!ab.log,g.isDefined(ab.httpCode)||
(ab.httpCode=ab.code))}return ab||Ta};J.error=function(Ta,ab){ab&&ab.xhr&&ab.xhr.abort();Ta instanceof Error||(Ta=c.mixin(Error(),Ta));Ta.log=!!l.isDebug;J.failOk=!Ta.log;ra.errorHandler(Ta,ab);return Ta};J._token&&(J.content=J.content||{},J.content.token=J._token);var za=0;if(da&&fa){var Da=h.objectToQuery(da);za=Da.length+fa.length+1;k("esri-url-encodes-apostrophe")&&(za=Da.replace(/'/g,"%27").length+fa.length+1)}J.timeout=g.isDefined(J.timeout)?J.timeout:ra.timeout;J.handleAs=J.handleAs||"json";
try{var va=W&&b.canUseXhr(J.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(J.url),Ga=b.hasSameOrigin(J.url,window.location.href)||va,ba=T||Y||za>ra.postLength?!0:!1,ia=Ga||-1===J.handleAs.indexOf("json")||!J.callbackParamName||Y?!1:!0,wa=b.getProxyRule(J.url)||ra.alwaysUseProxy||la||!("image"===J.handleAs&&!U.allowImageDataAccess||ia&&!ba||Ga)?!0:!1;Y&&!k("esri-file-upload")&&!wa&&va&&(wa=!0);if(wa){var Aa=b.getProxyUrl(fa,W);var Fa=Aa.path;Aa._xo&&(va=!0);!ba&&Fa.length+1+za>ra.postLength&&
(ba=!0);J.url=Fa+"?"+fa;if(ba)J.content=c.mixin(Aa.query||{},da);else{var O=h.objectToQuery(c.mixin(Aa.query||{},da));O&&(J.url+="?"+O);J.content=null}}if(!ia||ba||wa){var ya=J.headers;!va||ya&&ya.hasOwnProperty("X-Requested-With")||(ya=J.headers=ya||{},ya["X-Requested-With"]=null);if(Y){var Ha=J.callbackParamName||"callback.html",ea=J.callbackElementName||"textarea",Oa,Na,Ca=ha.elements?ha.elements.length:0;if(da=J.content)for(Oa in da.token&&b.isSecureProxyService(fa)&&(fa+=(-1===fa.indexOf("?")?
"?":"\x26")+"token\x3d"+da.token,J.url=wa?Fa+"?"+fa:fa,delete da.token),da){var X=da[Oa];if(g.isDefined(X)){var oa=null;for(Na=0;Na<Ca;Na++){var pa=ha.elements[Na];if(pa.name===Oa){oa=pa;break}}oa?oa.value=X:aa?ha.append(Oa,X):ha.appendChild(a.create("input",{type:"hidden",name:Oa,value:X}))}}if(k("esri-file-upload")){B.forEach(ha.elements,function(Ta){Ta.name===Ha&&ha.removeChild(Ta)});var Z=aa?ha:new FormData(ha);if(11<=k("safari")&&"entries"in Z&&"delete"in Z){aa=[];for(var ja=Z.entries(),ta=ja.next();!ta.done;){var xa=
ta.value;xa[1]instanceof File&&""===xa[1].name&&aa.push(xa[0]);ta=ja.next()}aa.forEach(function(Ta){Z.delete(Ta)})}J.contentType=!1;J.postData=Z;delete J.form}else{ha.enctype="multipart/form-data";9>k("ie")&&(ha.encoding="multipart/form-data");ha.method="post";B.some(ha.elements,function(Ta){return Ta.name===Ha})||ha.appendChild(a.create("input",{type:"hidden",name:Ha,value:ea}));if(-1!==fa.toLowerCase().indexOf("addattachment")||-1!==fa.toLowerCase().indexOf("updateattachment"))fa+=(-1===fa.indexOf("?")?
"?":"\x26")+Ha+"\x3d"+ea,J.url=wa?Fa+"?"+fa:fa;delete J.content}}if(va&&!J.hasOwnProperty("withCredentials")&&"with-credentials"===M.useCors){Fa=wa?Fa:fa;var Ea=b.canUseXhr(Fa,!0),Ja=-1<Ea?M.corsEnabledServers[Ea]:null;if(Ja&&Ja.hasOwnProperty("withCredentials"))Ja.withCredentials&&(J.withCredentials=!0);else if(n.id){var La=n.id.findServerInfo(Fa);La&&La.webTierAuth&&(J.withCredentials=!0)}}J=L?L(J):J;var Ya=function(){if("image"===J.handleAs)return E(J,U);if(ba){if(Y&&!k("esri-file-upload")){K=
new e(function(){Ta.cancel()});var Ta=m.post(J.url,J).then(function(fb){K.resolve(fb)}).otherwise(function(fb){K.reject(fb)});K.addCallback(function(fb){return J.load(fb)});K.addErrback(function(fb){return J.error(fb)});return K}!wa&&k("safari")&&(J.url+=(-1===J.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+S++);if(N){J.uploadProgress=!0;J.data=J.postData;J.query=J.content;K=new e(function(){ab.cancel()});var ab=d.post(J.url,J).then(function(fb){K.resolve(fb)},function(fb){K.reject(fb)},
function(fb){K.progress({transferType:fb.transferType,loaded:fb.loaded,total:fb.total})});K.addCallback(function(fb){return J.load(fb)});K.addErrback(function(fb){return J.error(fb)});return K}return t.post(J)}return t.get(J)};return J.withCredentials&&x.isNoCorsRequestRequired(fa)?K=x.sendNoCorsRequest(fa,da).addBoth(function(){var Ta=Ya();K.ioArgs=Ta.ioArgs;return Ta}):Ya()}J=L?L(J):J;J.jsonp=J.callbackParamName;J.query=J.content;K=new e(function(){Ua.cancel()});var Ua=q.get(J.url,J).then(function(Ta){K.resolve(Ta)}).otherwise(function(Ta){K.reject(Ta)});
K.addCallback(function(Ta){return J.load(Ta)});K.addErrback(function(Ta){return J.error(Ta)});return K}catch(Ta){return K=new e,K.errback(J.error(Ta)),K}}function y(J){var U=M.corsStatus,Y=b.canUseXhr(J,!0);-1<Y&&M.corsEnabledServers.splice(Y,1);var aa=new e;aa.reject({log:!!l.isDebug});U[z(J)]=aa.promise;return Y}function v(J){var U=M.corsStatus;try{var Y=z(J);if(M.corsDetection&&M.useCors&&k("esri-cors")&&J&&-1!==J.toLowerCase().indexOf("/rest/services")&&!b.hasSameOrigin(J,window.location.href)&&
!b.canUseXhr(J)){if(U[Y]&&!U[Y].isCanceled())return U[Y];var aa=new e(w._dfdCanceller);U[Y]=aa.promise;var la=t.get({url:J.substring(0,J.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*M.corsDetectionTimeout});aa._pendingDfd=la;la.then(function(T){T?(b.canUseXhr(J)||M.corsEnabledServers.push(Y),aa.resolve()):aa.reject()},function(T){aa.reject(T)});return aa.promise}}catch(T){}return P}function A(J){L=J}function G(J,
U,Y,aa){function la(va){va._pendingDfd=C(Y,aa,ha,fa);if(!va._pendingDfd){va.ioArgs=va._pendingDfd&&va._pendingDfd.ioArgs;var Ga=Error("Deferred object is missing");Ga.log=!!l.isDebug;va.errback(Ga);va._pendingDfd=null;return va}va._pendingDfd.addCallback(function(ba){if(!ba)return ba;var ia=va._pendingDfd&&va._pendingDfd.ioArgs&&va._pendingDfd.ioArgs.xhr;if(!ia)return ba;if(ia=ia.getResponseHeader("Content-Type"))if(ia=ia.toLowerCase(),-1===ia.indexOf("text/plain")&&-1===ia.indexOf("application/json"))return ba;
if(ba instanceof ArrayBuffer&&750>=ba.byteLength)ia=new Blob([ba]);else if(ba instanceof Blob&&750>=ba.size)ia=ba;else return ba;var wa=new e,Aa=new FileReader;Aa.readAsText(ia);Aa.onloadend=function(){if(!Aa.error)try{var Fa=JSON.parse(Aa.result);if(Fa.error)var O=Fa.error}catch(ya){}O?(O=c.mixin(Error(),O),O.log=!!l.isDebug,null==O.httpCode&&(O.httpCode=O.code),wa.reject(O)):wa.resolve(ba)};return wa.promise}).addCallback(function(ba){va.ioArgs=va._pendingDfd&&va._pendingDfd.ioArgs;aa.returnFullResponse&&
(ba={data:ba,_xhr:va.ioArgs&&va.ioArgs.xhr,getHeader:D});va.callback(ba);va._pendingDfd=null}).addErrback(function(ba){if(ba){var ia=ba.code;var wa=ba.subcode;var Aa=(Aa=ba.messageCode)&&Aa.toUpperCase()}if(ba&&403==ia&&(4==wa||ba.message&&-1<ba.message.toLowerCase().indexOf("ssl")&&-1===ba.message.toLowerCase().indexOf("permission"))){if(!Y._ssl){Y._ssl=Y._sslFromServer=!0;G(va,!0,Y,aa);return}}else if(ba&&415==ba.status){if(y(Y.url),!Y._err415){Y._err415=1;G(va,!0,Y,aa);return}}else if(n.id&&-1!==
B.indexOf(n.id._errorCodes,ia)&&!n.id._isPublic(Y.url)&&!N&&(403!=ia||-1===B.indexOf(Q,Aa)&&(!g.isDefined(wa)||2==wa&&Y._token))){va._pendingDfd=n.id.getCredential(Y.url,{token:Y._token,error:ba});va._pendingDfd.addCallback(function(Fa){Y._token=Fa.token;Y._credential=Fa;Y._ssl=Y._sslFromServer||Fa.ssl;G(va,!0,Y,aa)}).addErrback(function(Fa){va.errback(Fa);va._pendingDfd=null});return}va.ioArgs=va._pendingDfd&&va._pendingDfd.ioArgs;va.isFulfilled()||va.errback(ba);va._pendingDfd=null}).then(null,
null,function(ba){va.progress(ba)})}var T=Y.form,N=aa.disableIdentityLookup,K=aa._preLookup,W=!1;if(k("esri-workers")&&!1!==M.useWorkers)if(!0===aa.useWorkers||!0===M.useWorkers)W=!0;else if(aa.workerOptions){var da=aa.workerOptions;if(da.callback||da.worker&&da.worker.worker instanceof Worker)W=!0}var fa=T&&k("esri-file-upload")&&T instanceof FormData,ha=T&&(T.elements?B.some(T.elements,function(va){return"file"===va.type}):fa),ra=-1!==Y.url.toLowerCase().indexOf("token\x3d")||Y.content&&Y.content.token||
ha&&B.some(T.elements,function(va){return"token"===va.name})?1:0;if(!U){J.addCallback(function(va){if(va&&(/\/sharing\/rest\/accounts\/self/i.test(Y.url)||/\/sharing\/rest\/portals\/self/i.test(Y.url))){if(!ra&&!Y._token&&va.user&&va.user.username){M.webTierAuthServers.push(z(Y.url));var Ga=M.corsEnabledServers,ba=b.canUseXhr(Y.url,!0),ia={host:z(Y.url),withCredentials:!0};if(-1===ba)Ga.push(ia);else{var wa=Ga[ba];wa instanceof RegExp?(ia.host=wa,Ga.splice(ba,1,ia)):"object"===typeof wa?wa.withCredentials=
!0:Ga.splice(ba,1,ia)}}Array.isArray(va.authorizedCrossOriginNoCorsDomains)&&x.registerNoCorsDomains(va.authorizedCrossOriginNoCorsDomains)}if(va=Y._credential)if(Ga=(Ga=n.id.findServerInfo(va.server))&&Ga.owningSystemUrl)Ga=Ga.replace(/\/?$/,"/sharing"),(va=n.id.findCredential(Ga,va.userId))&&-1===n.id._getIdenticalSvcIdx(Ga,va)&&va.resources.splice(0,0,Ga)});J.addBoth(function(va){delete Y._credential;!va||k("ie")&&va.nodeType||(va._ssl=Y._ssl)});var za=Y.load,Da=Y.error;za&&J.addCallback(function(va){var Ga=
J._pendingDfd;Ga=Ga&&Ga.ioArgs;return za.call(Ga&&Ga.args,va,Ga)});Da&&J.addErrback(function(va){var Ga=J._pendingDfd;Ga=Ga&&Ga.ioArgs;return Da.call(Ga&&Ga.args,va,Ga)})}!n.id||ra||Y._token||n.id._isPublic(Y.url)||N&&!K||!(U=n.id.findCredential(Y.url))||(Y._token=U.token,Y._ssl=U.ssl);W?aa.workerOptions&&aa.workerOptions.worker?(H||(H=t),t=aa.workerOptions.worker,la(J)):f(["./workers/RequestClient"],function(va){H||(H=t);if(aa.workerOptions){var Ga=aa.workerOptions;t=va.getClient(Ga.callback,Ga.cbFunction)}else t=
va.getClient();la(J)}):(H&&(t=H,H=null),la(J));return J}function F(J,U){J.url=b.fixUrl(J.url);U=U||{};var Y=new e(w._dfdCanceller),aa=v(J.url);Y._pendingDfd=aa;aa.always(function(la){la&&"cancel"===la.dojoType?Y.reject(la):G(Y,!1,J,U)});return Y}var H=null,L,M=r.defaults.io,Q=["COM_0056","COM_0057","SB_0008"],S=0,I=/%[0-9A-F]{2}/i,P=function(){var J=new e;J.resolve();return J.promise}();F._makeRequest=C;F._processRequest=G;F._disableCors=y;F._detectCors=v;F.setRequestPreCallback=A;n.request=F;n._makeRequest=
C;n._processRequest=G;n._disableCors=y;n._detectCors=v;n.setRequestPreCallback=A;return F})},"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),function(f,B,l,e,c,u){function t(){var b=document.createElement("iframe");b.name="esri_core_jsonp_iframe";b.style.display="none";b.setAttribute("sandbox","allow-scripts");if(!u("ff")&&"srcdoc"in b){var w=f.toUrl("dojo/dojo.js"),x=c.replace("../../../dojo/dojo.js",w);
w=w.slice(0,-7);x=x.replace("../../../dojo/",w);b.srcdoc=x}else x=f.toUrl("./iframe.html"),"http:"===window.location.protocol&&0===x.indexOf("https:")&&(x=x.replace("https:","http:")),b.src=x;document.body.appendChild(b);return b}function d(){var b=new MessageChannel;b.port1.addEventListener("message",q);b.port1.start();return b}function q(b){var w=b.data;if("ready"===w){w=0;for(var x=k;w<x.length;w++)b=x[w],a(b,n);k=null}else if(b=g[w.id])delete g[w.id],w.isError?b.dfd.reject(Error(w.message)):b.dfd.resolve(w.response)}
function m(b,w){b.addEventListener("load",function(){b.contentWindow.postMessage("init","*",[w.port2])})}function a(b,w){g[b.message.id]=b;w.port1.postMessage(b.message)}Object.defineProperty(B,"__esModule",{value:!0});var h,n,r=0,k=[],g={};B.get=function(b,w){if(!u("esri-script-sandbox"))return e.get(b,w);var x=null;w&&(x={jsonp:w.jsonp,preventCache:w.preventCache,query:w.query,timeout:w.timeout});w=new l(function(){if(k){var D=k.indexOf(z);-1<D&&k.splice(D,1)}else z.message.id in g&&delete g[z.message.id]});
var z={dfd:w,message:{id:"id"+(++r+Math.random()),url:b,options:x}};h||(h=t(),n=d(),m(h,n));k?k.push(z):a(z,n);return w.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(f,B,l,e,c,u,t,d,q,m,a){function h(y,v){y.canDelete&&b._remove(y.id,v.options.frameDoc,!0)}function n(y){C&&C.length&&(c.forEach(C,function(v){b._remove(v.id,v.frameDoc);v.frameDoc=null}),
C=[]);return y.options.jsonp?!y.data:!0}function r(y){return!!this.scriptLoaded}function k(y){return(y=y.options.checkString)&&eval("typeof("+y+') !\x3d\x3d "undefined"')}function g(y,v){if(this.canDelete){var A=this.response.options;C.push({id:this.id,frameDoc:A.ioArgs?A.ioArgs.frameDoc:A.frameDoc});A.ioArgs&&(A.ioArgs.frameDoc=null);A.frameDoc=null}v?this.reject(v):this.resolve(y)}function b(y,v,A){var G=l.parseArgs(y,l.deepCopy({},v));y=G.url;v=G.options;var F=l.deferred(G,h,n,v.jsonp?null:v.checkString?
k:r,g);u.mixin(F,{id:w+x++,canDelete:!1});v.jsonp&&((new RegExp("[?\x26]"+v.jsonp+"\x3d")).test(y)||(y+=(~y.indexOf("?")?"\x26":"?")+v.jsonp+"\x3d"+(v.frameDoc?"parent.":"")+w+"_callbacks."+F.id),F.canDelete=!0,E[F.id]=function(M){G.data=M;F.handleResponse(G)});l.notify&&l.notify.emit("send",G,F.promise.cancel);if(!v.canAttach||v.canAttach(F)){var H=b._attach(F.id,y,v.frameDoc,function(M){if(!(M instanceof Error)){var Q=Error("Error loading "+(M.target?M.target.src:"script"));Q.source=M;M=Q}F.reject(M);
b._remove(F.id,v.frameDoc,!0)});if(!v.jsonp&&!v.checkString)var L=t(H,z,function(M){if("load"===M.type||D.test(H.readyState))L.remove(),F.scriptLoaded=M})}B(F);return A?F:F.promise}m.add("script-readystatechange",function(y,v){return"undefined"!==typeof v.createElement("script").onreadystatechange&&("undefined"===typeof y.opera||"[object Opera]"!==y.opera.toString())});var w=f.id.replace(/[\/\.\-]/g,"_"),x=0,z=m("script-readystatechange")?"readystatechange":"load",D=/complete|loaded/,E=e.global[w+
"_callbacks"]={},C=[];b.get=b;b._attach=function(y,v,A,G){A=A||a.doc;var F=A.createElement("script");if(G)t.once(F,"error",G);F.type="text/javascript";try{F.src=v}catch(H){G&&G(F)}F.id=y;F.async=!0;F.charset="utf-8";return A.getElementsByTagName("head")[0].appendChild(F)};b._remove=function(y,v,A){q.destroy(d.byId(y,v));E[y]&&(A?E[y]=function(){delete E[y]}:delete E[y])};b._callbacksProperty=w+"_callbacks";return b})},"esri/core/sniff":function(){define(["../sniff"],function(f){return f})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h){function n(D){return!this.isFulfilled()}function r(D){return!!this._finished}function k(D,E){if(!E)try{var C=D.options,y=b.doc(b._frame),v=C.handleAs;if("html"!==v){if("xml"===v)if("html"===y.documentElement.tagName.toLowerCase()){d("a",y.documentElement).orphan();var A=y.documentElement.innerText||y.documentElement.textContent;A=A.replace(/>\s+</g,"\x3e\x3c");D.text=u.trim(A)}else D.data=y;else D.text=y.getElementsByTagName("textarea")[0].value;c(D)}else D.data=
y}catch(G){E=G}E?this.reject(E):this._finished?this.resolve(D):this.reject(Error("Invalid dojo/request/iframe request state"))}function g(D){this._callNext()}function b(D,E,C){var y=e.parseArgs(D,e.deepCreate(z,E),!0);D=y.url;E=y.options;if("GET"!==E.method&&"POST"!==E.method)throw Error(E.method+" not supported by dojo/request/iframe");b._frame||(b._frame=b.create(b._iframeName,x+"();"));D=e.deferred(y,null,n,r,k,g);D._callNext=function(){this._calledNext||(this._calledNext=!0,b._currentDfd=null,
b._fireNextRequest())};D._legacy=C;b._dfdQueue.push(D);b._fireNextRequest();l(D);return C?D:D.promise}var w=f.id.replace(/[\/\.\-]/g,"_"),x=w+"_onload";h.global[x]||(h.global[x]=function(){var D=b._currentDfd;if(D){var E=m.byId(D.response.options.form)||D._tmpForm;if(E){for(var C=D._contentToClean,y=0;y<C.length;y++)for(var v=C[y],A=0;A<E.childNodes.length;A++){var G=E.childNodes[A];if(G.name===v){a.destroy(G);break}}D._originalAction&&E.setAttribute("action",D._originalAction);D._originalMethod&&
(E.setAttribute("method",D._originalMethod),E.method=D._originalMethod);D._originalTarget&&(E.setAttribute("target",D._originalTarget),E.target=D._originalTarget)}D._tmpForm&&(a.destroy(D._tmpForm),delete D._tmpForm);D._finished=!0}else b._fireNextRequest()});var z={method:"POST"};b.create=function(D,E,C){if(h.global[D])return h.global[D];if(h.global.frames[D])return h.global.frames[D];C||(q("config-useXDomain")&&q("config-dojoBlankHtmlUrl"),C=q("config-dojoBlankHtmlUrl")||B.toUrl("dojo/resources/blank.html"));
E=a.place('\x3ciframe id\x3d"'+D+'" name\x3d"'+D+'" src\x3d"'+C+'" onload\x3d"'+E+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',h.body());return h.global[D]=E};b.doc=function(D){if(D.contentDocument)return D.contentDocument;var E=D.name;if(E){var C=h.doc.getElementsByTagName("iframe");if(D.document&&C[E].contentWindow&&C[E].contentWindow.document)return C[E].contentWindow.document;if(h.doc.frames[E]&&h.doc.frames[E].document)return h.doc.frames[E].document}return null};
b.setSrc=function(D,E,C){D=h.global.frames[D.name];D.contentWindow&&(D=D.contentWindow);try{C?D.location.replace(E):D.location=E}catch(y){}};b._iframeName=w+"_IoIframe";b._notifyStart=function(){};b._dfdQueue=[];b._currentDfd=null;b._fireNextRequest=function(){try{if(!b._currentDfd&&b._dfdQueue.length){do var D=b._currentDfd=b._dfdQueue.shift();while(D&&(D.canceled||D.isCanceled&&D.isCanceled())&&b._dfdQueue.length);if(!D||D.canceled||D.isCanceled&&D.isCanceled())b._currentDfd=null;else{var E=D.response,
C=E.options,y=D._contentToClean=[],v=m.byId(C.form),A=e.notify,G=C.data||null;if(!D._legacy&&"POST"===C.method&&!v)v=D._tmpForm=a.create("form",{name:w+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},h.body());else if("GET"===C.method&&v&&-1<E.url.indexOf("?")){var F=E.url.slice(E.url.indexOf("?")+1);G=u.mixin(t.queryToObject(F),G)}if(v){if(!D._legacy){var H=v;do H=H.parentNode;while(H&&H!==h.doc.documentElement);H||(v.style.position="absolute",v.style.left="-1000px",v.style.top=
"-1000px",h.body().appendChild(v));v.name||(v.name=w+"_form")}if(G){H=function(J,U){a.create("input",{type:"hidden",name:J,value:U},v);y.push(J)};for(var L in G){var M=G[L];if(u.isArray(M)&&1<M.length)for(F=0;F<M.length;F++)H(L,M[F]);else{var Q=d("input[name\x3d'"+L+"']",v);-1==Q.indexOf()?H(L,M):Q.val(M)}}}var S=v.getAttributeNode("action"),I=v.getAttributeNode("method"),P=v.getAttributeNode("target");E.url&&(D._originalAction=S?S.value:null,S?S.value=E.url:v.setAttribute("action",E.url));D._legacy?
I&&I.value||(I?I.value=C.method:v.setAttribute("method",C.method)):(D._originalMethod=I?I.value:null,I?I.value=C.method:v.setAttribute("method",C.method));D._originalTarget=P?P.value:null;P?P.value=b._iframeName:v.setAttribute("target",b._iframeName);v.target=b._iframeName;A&&A.emit("send",E,D.promise.cancel);b._notifyStart(E);v.submit()}else C="",E.options.data&&(C=E.options.data,"string"!==typeof C&&(C=t.objectToQuery(C))),H=E.url+(-1<E.url.indexOf("?")?"\x26":"?")+C,A&&A.emit("send",E,D.promise.cancel),
b._notifyStart(E),b.setSrc(b._frame,H,!0)}}}catch(J){D.reject(J)}};e.addCommonMethods(b,["GET","POST"]);return b})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),function(f,B,l,e,c){function u(q){for(;q.childNodes[0]&&1==q.childNodes[0].nodeType;)q=q.childNodes[0];return q}function t(q,m){"string"==typeof q?(q=e.toDom(q,m&&m.ownerDocument),11==q.nodeType&&(q=q.childNodes[0])):1==q.nodeType&&q.parentNode&&(q=q.cloneNode(!1));
return q}var d=f.NodeList;B.extend(d,{_placeMultiple:function(q,m){q="string"==typeof q||q.nodeType?f(q):q;for(var a=[],h=0;h<q.length;h++)for(var n=q[h],r=this.length,k=r-1,g;g=this[k];k--)0<h&&(g=this._cloneNode(g),a.unshift(g)),k==r-1?e.place(g,n,m):n.parentNode.insertBefore(g,n),n=g;a.length&&(a.unshift(0),a.unshift(this.length-1),Array.prototype.splice.apply(this,a));return this},innerHTML:function(q){return arguments.length?this.addContent(q,"only"):this[0].innerHTML},text:function(q){if(arguments.length){for(var m=
0,a;a=this[m];m++)1==a.nodeType&&c.set(a,"textContent",q);return this}var h="";for(m=0;a=this[m];m++)h+=c.get(a,"textContent");return h},val:function(q){if(arguments.length){for(var m=B.isArray(q),a=0,h;h=this[a];a++){var n=h.nodeName.toUpperCase(),r=h.type,k=m?q[a]:q;if("SELECT"==n)for(n=h.options,r=0;r<n.length;r++){var g=n[r];g.selected=h.multiple?-1!=l.indexOf(q,g.value):g.value==k}else"checkbox"==r||"radio"==r?h.checked=h.value==k:h.value=k}return this}if((h=this[0])&&1==h.nodeType){q=h.value||
"";if("SELECT"==h.nodeName.toUpperCase()&&h.multiple){q=[];n=h.options;for(r=0;r<n.length;r++)g=n[r],g.selected&&q.push(g.value);q.length||(q=null)}return q}},append:function(q){return this.addContent(q,"last")},appendTo:function(q){return this._placeMultiple(q,"last")},prepend:function(q){return this.addContent(q,"first")},prependTo:function(q){return this._placeMultiple(q,"first")},after:function(q){return this.addContent(q,"after")},insertAfter:function(q){return this._placeMultiple(q,"after")},
before:function(q){return this.addContent(q,"before")},insertBefore:function(q){return this._placeMultiple(q,"before")},remove:d.prototype.orphan,wrap:function(q){if(this[0]){q=t(q,this[0]);for(var m=0,a;a=this[m];m++){var h=this._cloneNode(q);a.parentNode&&a.parentNode.replaceChild(h,a);u(h).appendChild(a)}}return this},wrapAll:function(q){if(this[0]){q=t(q,this[0]);this[0].parentNode.replaceChild(q,this[0]);q=u(q);for(var m=0,a;a=this[m];m++)q.appendChild(a)}return this},wrapInner:function(q){if(this[0]){q=
t(q,this[0]);for(var m=0;m<this.length;m++){var a=this._cloneNode(q);this._wrap(B._toArray(this[m].childNodes),null,this._NodeListCtor).wrapAll(a)}}return this},replaceWith:function(q){q=this._normalize(q,this[0]);for(var m=0,a;a=this[m];m++)this._place(q,a,"before",0<m),a.parentNode.removeChild(a);return this},replaceAll:function(q){q=f(q);for(var m=this._normalize(this,this[0]),a=0,h;h=q[a];a++)this._place(m,h,"before",0<a),h.parentNode.removeChild(h);return this},clone:function(){for(var q=[],
m=0;m<this.length;m++)q.push(this._cloneNode(this[m]));return this._wrap(q,this,this._NodeListCtor)}});d.prototype.html||(d.prototype.html=d.prototype.innerHTML);return d})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(f,B,l){B={_dfdCanceller:function(e){e.canceled=!0;var c=e._pendingDfd;if(!e.isFulfilled()&&c&&!c.isFulfilled()){c.cancel();var u=c.results&&c.results[1]}e._pendingDfd=null;return u},_fixDfd:function(e){var c=e.then;e.then=function(u,t,d){if(u){var q=
u;u=function(m){return m&&m._argsArray?q.apply(null,m):q(m)}}return c.call(this,u,t,d)};return e},_resDfd:function(e,c,u){var t=c.length;1===t?u?e.errback(c[0]):e.callback(c[0]):1<t?(c._argsArray=!0,e.callback(c)):e.callback()}};f.mixin(l,B);return B})},"esri/support/requestUtils":function(){define(["dojo/_base/Deferred","dojo/_base/url","../config","../urlUtils"],function(f,B,l,e){function c(t){t=new B(t);return t.scheme+"://"+t.authority}var u=l.defaults.io;return{registerNoCorsDomains:function(t){u.crossOriginNoCorsDomains||
(u.crossOriginNoCorsDomains={});for(var d=u.crossOriginNoCorsDomains,q=0;q<t.length;q++){var m=t[q];m=m.toLowerCase();/^https?:\/\//.test(m)?d[c(m)]=0:(d[c("http://"+m)]=0,d[c("https://"+m)]=0)}},isNoCorsRequestRequired:function(t){var d=u.crossOriginNoCorsDomains;return d?(t=c(t),t=t.toLowerCase(),!e.hasSameOrigin(t,window.location.origin)&&d[t]<Date.now()-36E5):!1},sendNoCorsRequest:function(t,d){var q=new f,m=u.crossOriginNoCorsDomains;m&&(m[c(t).toLowerCase()]=Date.now());m=e.urlToObject(t);t=
m.path;if(m.query&&"json"===m.query.f||d&&"json"===d.f)t+="?f\x3djson";fetch(t,{mode:"no-cors",credentials:"include"}).then(q.resolve,q.resolve);return q}}})},"esri/tileUtils":function(){define(["dojo/_base/array","dojo/has","./kernel","./geometry/Point","./geometry/Extent"],function(f,B,l,e,c){B={_addFrameInfo:function(u,t){var d,q,m=2*t.origin[1],a=t.origin[0],h=u.origin.x,n=u.width,r;f.forEach(u.lods,function(k){d=Math.round(m/k.resolution);q=Math.ceil(d/n);r=Math.floor((a-h)/(n*k.resolution));
k._frameInfo||(k._frameInfo=[q,r,r+q-1,d])})},getContainingTileCoords:function(u,t,d){var q=u.origin;d=d.resolution;return{row:Math.floor((q.y-t.y)/(u.height*d)),col:Math.floor((t.x-q.x)/(u.width*d))}},getCandidateTileInfo:function(u,t,d){var q=u.width;var m=u.height,a=d.xmax-d.xmin,h=d.ymax-d.ymin,n=u.__tileInfo===t,r=n?u.getMinZoom():-1;n=n?u.getMaxZoom():-1;var k=-1,g=t.lods,b=Math.abs,w;n=-1<n?n:g.length-1;for(r=-1<r?r:0;r<=n;r++)if(w=g[r]){var x=a>h?b(h-m*w.resolution):b(a-q*w.resolution);if(0>
k||x<=k){var z=w;k=x}else break}q=z;z=q.resolution;m=(d.xmin+d.xmax)/2;a=(d.ymin+d.ymax)/2;h=u.width/2*z;z*=u.height/2;m=new c(m-h,a-z,m+h,a+z,d.spatialReference);d=new e(m.xmin,m.ymax,d.spatialReference);n=q.resolution;h=t.width;a=t.height;t=t.origin;u=u.__visibleDelta;z=Math.floor;g=h*n;b=a*n;n=z((t.y-d.y)/b);k=z((d.x-t.x)/g);r=t.y-n*b;t=z(Math.abs((d.x-(t.x+k*g))*h/g))+u.x;u=z(Math.abs((d.y-r)*a/b))+u.y;return{tile:{point:d,coords:{row:n,col:k},offsets:{x:t,y:u}},lod:q,extent:m}},getTileExtent:function(u,
t,d,q){var m=u.origin;t=u.lods[t].resolution;var a=u.width,h=u.height;return new c(q*t*a+m.x,m.y-(d+1)*t*h,(q+1)*t*a+m.x,m.y-d*t*h,u.spatialReference)}};return l.TileUtils=B})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),function(f,B,l,e,c,u,t,d){function q(r,k){89.99999<k?k=89.99999:-89.99999>k&&(k=-89.99999);k*=.017453292519943;return[111319.49079327169*r,3189068.5*Math.log((1+Math.sin(k))/
(1-Math.sin(k)))]}function m(r,k,g){r=r/6378137*57.29577951308232;return g?[r,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*k/6378137)))]:[r-360*Math.floor((r+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*k/6378137)))]}function a(){}function h(){}function n(r){var k=r._json;r._unquantizeFn?(k=r._unquantizeFn({x:k.x,y:k.y}),r._xVal=k.x,r._yVal=k.y,r._unquantizeFn=null):(r._xVal=k.x,r._yVal=k.y);r._json=null}l={type:"point",x:0,y:0};f=f(t,{declaredClass:"esri.geometry.Point",
type:"point",x:0,y:0,constructor:function(r,k,g){B.isArray(r)?(this.x=r[0],this.y=r[1],this.spatialReference=k):c.isObject(r)?(c.mixin(this,r),null!=this.latitude&&(this.y=this.latitude),null!=this.longitude&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=d.createSpatialReference(this.spatialReference))):(this.x=r,this.y=k,this.spatialReference=g);this.verifySR()},offset:function(r,k){return new this.constructor(this.x+r,this.y+k,this.spatialReference)},setX:function(r){this.x=
r;this.clearCache();return this},setY:function(r){this.y=r;this.clearCache();return this},setLongitude:function(r){var k=this.spatialReference;k&&(k._isWebMercator()?this.setX(q(r,this.y)[0]):4326===k.wkid&&this.setX(r));return this},setLatitude:function(r){var k=this.spatialReference;k&&(k._isWebMercator()?this.setY(q(this.x,r)[1]):4326===k.wkid&&this.setY(r));return this},getLongitude:function(){var r=this.spatialReference;if(r)if(r._isWebMercator())var k=m(this.x,this.y)[0];else 4326===r.wkid&&
(k=this.x);return k},getLatitude:function(){var r=this.spatialReference;if(r)if(r._isWebMercator())var k=m(this.x,this.y)[1];else 4326===r.wkid&&(k=this.y);return k},update:function(r,k){this.x=r;this.y=k;this.clearCache();return this},normalize:function(){var r=this.x,k=this.spatialReference;if(k){var g=k._getInfo();g&&(r=this._normalizeX(r,g))}return new this.constructor(r,this.y,k)},_normalizeX:function(r,k){var g=k.valid[0],b=k.valid[1];k=2*b;r>b?(g=Math.ceil(Math.abs(r-b)/k),r-=g*k):r<g&&(g=
Math.ceil(Math.abs(r-g)/k),r+=g*k);return r},toJson:function(){var r={x:this.x,y:this.y},k=this.spatialReference;k&&(r.spatialReference=k.toJson());return r}});a.prototype=f.prototype;h.prototype=new a;Object.defineProperty(h.prototype,"x",{get:function(){this._json&&n(this);return this._xVal},set:function(r){this._xVal=r}});Object.defineProperty(h.prototype,"y",{get:function(){this._json&&n(this);return this._yVal},set:function(r){this._yVal=r}});h.prototype.setupLazyUnquantization=function(r,k){this._unquantizeFn=
r;this._json=k};f.simpleConstructor=a;f.accessorConstructor=h;f.lngLatToXY=q;f.xyToLngLat=m;f.defaultProps=l;f.metersPerDegree=6378137*Math.PI/180;B.setObject("geometry.Point",f,e);e.geometry.defaultPoint=l;return f})},"esri/SpatialReference":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/has","./kernel","./lang"],function(f,B,l,e,c){function u(){}l=[-2.0037508342788905E7,2.0037508342788905E7];var t=[-2.0037508342787E7,2.0037508342787E7];f=f(null,{declaredClass:"esri.SpatialReference",
constructor:function(d){d&&(c.isObject(d)?c.mixin(this,d):c.isString(d)?this.wkt=d:this.wkid=d)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:l,origin:t,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:l,origin:t,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:l,origin:t,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:l,origin:t,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==B.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==B.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(d){var q=!1;d&&(q=this.isWebMercator()&&4326===d.wkid||d.isWebMercator()&&4326===this.wkid);return q},isWebMercator:function(){return this._isWebMercator()},equals:function(d){var q=!1;d&&(this===d&&
(q=!0),this.wkid||d.wkid?q=this.wkid===d.wkid||this.isWebMercator()&&d.isWebMercator()||this.wkid===d.latestWkid||d.wkid===this.latestWkid:this.wkt&&d.wkt&&(q=this.wkt.toUpperCase()===d.wkt.toUpperCase()));return q},toJson:function(){var d=null;null!=this.wkid?d={wkid:this.wkid}:null!=this.wkt&&(d={wkt:this.wkt});d&&null!=this.latestWkid&&(d.latestWkid=this.latestWkid);return d}});u.prototype=f.prototype;f.simpleConstructor=u;return e.SpatialReference=f})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(f,B,l,e,c){f=f(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(u){this.spatialReference=u;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new c(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(u){return this.cache&&this.cache[u]},setCacheValue:function(u,t){this.cache||
(this.cache={});this.cache[u]=t}});B.setObject("geometry.Geometry",f,e);return f})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(f,B,l,e,c){function u(t){var d=!1;t&&(t.ics||t.icsid)&&(d=!0);return d}e={isICS:u,createSpatialReference:function(t){var d=null;t&&(d=u(t)?new B(t):new f(t));return d}};c.mixin(l,e);return e})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
function(f,B,l,e,c,u){f=f(u,{declaredClass:"esri.ImageSpatialReference",constructor:function(t){t&&B.isObject(t)&&B.mixin(this,t)},icsid:null,icsns:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(t){var d=!1;if(t)if(this.icsid&&t.icsid){if(d=this.icsid===t.icsid,this.icsns||t.icsns)d=d&&this.icsns===t.icsns}else this.ics&&t.ics&&(d=this.ics===t.ics);return d},toJson:function(t){var d=null,q=c.isDefined;t=q(t)?t:!0;q(this.icsid)?(d={icsid:this.icsid},
q(this.icsns)&&(d.icsns=this.icsns)):q(this.ics)&&(d={ics:this.ics});q(this.url)&&q(d)&&t&&(d.url=this.url);return d}});return e.ImageSpatialReference=f})},"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h){function n(){}e={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0};var r=f(d,{declaredClass:"esri.geometry.Extent",
type:"extent",xmin:0,ymin:0,xmax:0,ymax:0,constructor:function(k,g,b,w,x){u.isObject(k)?(u.mixin(this,k),this.spatialReference&&(this.spatialReference=h.createSpatialReference(this.spatialReference))):this.update(k,g,b,w,x);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new q((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},getTopLeft:function(){return new q(this.xmin,
this.ymax,this.spatialReference)},getTopRight:function(){return new q(this.xmax,this.ymax,this.spatialReference)},getBottomLeft:function(){return new q(this.xmin,this.ymin,this.spatialReference)},getBottomRight:function(){return new q(this.xmax,this.ymin,this.spatialReference)},centerAt:function(k){var g=this.getCenter(),b=k.x-g.x;k=k.y-g.y;return new r(this.xmin+b,this.ymin+k,this.xmax+b,this.ymax+k,this.spatialReference)},update:function(k,g,b,w,x){this.xmin=k;this.ymin=g;this.xmax=b;this.ymax=
w;this.spatialReference=x;this.clearCache();return this},offset:function(k,g){return new r(this.xmin+k,this.ymin+g,this.xmax+k,this.ymax+g,this.spatialReference)},expand:function(k){var g=(1-k)/2;k=this.getWidth()*g;g*=this.getHeight();return new r(this.xmin+k,this.ymin+g,this.xmax-k,this.ymax-g,this.spatialReference)},intersects:function(k){if(!k)return!1;var g=k.type,b=this.spatialReference,w=k.spatialReference;b&&w&&!b.equals(w)&&b._canProject(w)&&(k=b.isWebMercator()?m.geographicToWebMercator(k):
m.webMercatorToGeographic(k,!0));switch(g){case "point":return this.contains(k);case "multipoint":return this._intersectsMultipoint(k);case "extent":return this._intersectsExtent(k);case "polygon":return this._intersectsPolygon(k);case "polyline":return this._intersectsPolyline(k)}},normalize:function(){var k=this._normalize(!1,!0);l.isArray(k)||(k=[k]);return k},shiftCentralMeridian:function(){return this._normalize(!0)},bisect:function(){var k=this.spatialReference,g=k&&k._getInfo(),b=[],w=0;if(g&&
this._isOutOfBounds(g)){var x=this;w=x.xmin;var z=x.ymin,D=x.ymax,E=g.valid[0],C=g.valid[1];x.getWidth()>2*C&&(x=x.getCenter(),x=new r(x.x-C,z,x.x+C,D,new t(k.toJson())));w=x.xmin-w;var y=this._normalizeX(x.xmin,g);g=this._normalizeX(x.xmax,g);y.frameId===g.frameId?b.push(new r(y.x,z,g.x,D,new t(k.toJson()))):b.push(new r(y.x,z,C,D,new t(k.toJson())),new r(E,z,g.x,D,new t(k.toJson())))}else b.push(this.getExtent());return{extents:b,marginLeft:w}},_intersectsMultipoint:function(k){var g=k.points.length,
b;for(b=0;b<g;b++)if(this.contains(k.getPoint(b)))return!0;return!1},_intersectsExtent:function(k){var g,b,w=!1;if(this.xmin<=k.xmin){var x=k.xmin;this.xmax<x?w=!0:g=Math.min(this.xmax,k.xmax)-x}else x=this.xmin,k.xmax<x?w=!0:g=Math.min(this.xmax,k.xmax)-x;if(this.ymin<=k.ymin){var z=k.ymin;this.ymax<z?w=!0:b=Math.min(this.ymax,k.ymax)-z}else z=this.ymin,k.ymax<z?w=!0:b=Math.min(this.ymax,k.ymax)-z;return w?null:new r(x,z,x+g,z+b,this.spatialReference)},_intersectsPolygon:function(k){var g=[this.xmin,
this.ymax],b=[this.xmax,this.ymax],w=[this.xmin,this.ymin],x=[this.xmax,this.ymin],z=[g,b,w,x];g=[[w,g],[g,b],[b,x],[x,w]];w=k.rings;x=w.length;var D=new q(0,0,this.spatialReference);var E=z.length;for(b=0;b<E;b++)if(D.update(z[b][0],z[b][1]),k.contains(D))return!0;D.setSpatialReference(k.spatialReference);for(b=0;b<x;b++)if(z=w[b],E=z.length){var C=z[0];D.update(C[0],C[1]);if(this.contains(D))return!0;for(k=1;k<E;k++){var y=z[k];D.update(y[0],y[1]);if(this.contains(D)||this._intersectsLine([C,y],
g))return!0;C=y}}return!1},_intersectsPolyline:function(k){var g=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],b,w=k.paths,x=w.length,z,D=new q(0,0,k.spatialReference);for(k=0;k<x;k++){var E=w[k];if(z=E.length){var C=E[0];D.update(C[0],C[1]);if(this.contains(D))return!0;for(b=1;b<z;b++){var y=E[b];D.update(y[0],y[1]);if(this.contains(D)||this._intersectsLine([C,
y],g))return!0;C=y}}}return!1},_intersectsLine:function(k,g){var b=a._getLineIntersection2,w,x=g.length;for(w=0;w<x;w++)if(b(k,g[w]))return!0;return!1},contains:function(k){if(!k)return!1;var g=k.type;if("point"===g){var b=this.spatialReference,w=k.spatialReference;g=k.x;k=k.y;b&&w&&!b.equals(w)&&b._canProject(w)&&(k=b.isWebMercator()?q.lngLatToXY(g,k):q.xyToLngLat(g,k,!0),g=k[0],k=k[1]);return g>=this.xmin&&g<=this.xmax&&k>=this.ymin&&k<=this.ymax}return"extent"===g?this._containsExtent(k):!1},_containsExtent:function(k){var g=
k.xmin,b=k.ymin,w=k.xmax,x=k.ymax,z=k.spatialReference;k=new q(g,b,z);g=new q(g,x,z);x=new q(w,x,z);b=new q(w,b,z);return this.contains(k)&&this.contains(g)&&this.contains(x)&&this.contains(b)?!0:!1},union:function(k){return new r(Math.min(this.xmin,k.xmin),Math.min(this.ymin,k.ymin),Math.max(this.xmax,k.xmax),Math.max(this.ymax,k.ymax),this.spatialReference)},getExtent:function(){var k=this.spatialReference;return new r(this.xmin,this.ymin,this.xmax,this.ymax,k&&new t(k.toJson()))},_shiftCM:function(k){var g=
this.getCacheValue("_shifted");if(!g){g=new r(this.toJson());var b=g.spatialReference;if(k=k||b._getInfo()){var w=this._getCM(k);if(w){var x=b._isWebMercator()?m.webMercatorToGeographic(w):w;g.xmin-=w.x;g.xmax-=w.x;b._isWebMercator()||(x.x=this._normalizeX(x.x,k).x);g.setSpatialReference(new t(u.substitute({Central_Meridian:x.x},4326===b.wkid?k.altTemplate:k.wkTemplate)))}}this.setCacheValue("_shifted",g)}return g},_getCM:function(k){var g;this._isOutOfBounds(k)&&(g=this.getCenter());return g},_isOutOfBounds:function(k){var g=
k.valid[0];k=k.valid[1];var b=this.xmin,w=this.xmax;return!(b>=g&&b<=k&&w>=g&&w<=k)},_normalize:function(k,g,b){var w=new r(this.toJson()),x=w.spatialReference;if(x&&(b=b||x._getInfo())){var z=B.map(this._getParts(b),function(D){return D.extent});return 2<z.length?k?this._shiftCM(b):w.update(b.valid[0],w.ymin,b.valid[1],w.ymax,x):2===z.length?k?this._shiftCM(b):g?z:{rings:B.map(z,function(D){return[[D.xmin,D.ymin],[D.xmin,D.ymax],[D.xmax,D.ymax],[D.xmax,D.ymin],[D.xmin,D.ymin]]}),spatialReference:x}:
z[0]||w}return w},_getParts:function(k){var g=this.getCacheValue("_parts");if(!g){g=[];var b=this.xmin,w=this.xmax,x=this.ymin,z=this.ymax,D=this.spatialReference,E=this.getWidth(),C=b,y=w,v=0,A=0;k=k||D._getInfo();var G=k.valid[0];var F=k.valid[1];A=this._normalizeX(b,k);b=A.x;v=A.frameId;A=this._normalizeX(w,k);w=A.x;A=A.frameId;k=b===w&&0<E;if(E>2*F){E=new r(C<y?b:w,x,F,z,D);b=new r(G,x,C<y?w:b,z,D);F=new r(0,x,F,z,D);x=new r(G,x,0,z,D);D=[];G=[];E.contains(F)&&D.push(v);E.contains(x)&&G.push(v);
b.contains(F)&&D.push(A);b.contains(x)&&G.push(A);for(z=v+1;z<A;z++)D.push(z),G.push(z);g.push({extent:E,frameIds:[v]},{extent:b,frameIds:[A]},{extent:F,frameIds:D},{extent:x,frameIds:G})}else b>w||k?g.push({extent:new r(b,x,F,z,D),frameIds:[v]},{extent:new r(G,x,w,z,D),frameIds:[A]}):g.push({extent:new r(b,x,w,z,D),frameIds:[v]});this.setCacheValue("_parts",g)}return g},_normalizeX:function(k,g){var b=0,w=g.valid[0],x=g.valid[1];g=2*x;k>x?(b=Math.ceil(Math.abs(k-x)/g),k-=b*g):k<w&&(b=Math.ceil(Math.abs(k-
w)/g),k+=b*g,b=-b);return{x:k,frameId:b}},toJson:function(){var k={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},g=this.spatialReference;g&&(k.spatialReference=g.toJson());return k}});n.prototype=r.prototype;r.simpleConstructor=n;r.defaultProps=e;l.setObject("geometry.Extent",r,c);c.geometry.defaultExtent=e;return r})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),function(f,B,l,e,c,u){function t(q,
m,a,h){if("point"===q.type){var n=m(q.x,q.y,h);return new q.constructor(n[0],n[1],new c(a))}if("extent"===q.type){n=m(q.xmin,q.ymin,h);var r=m(q.xmax,q.ymax,h);return new q.constructor(n[0],n[1],r[0],r[1],new c(a))}if("polyline"===q.type||"polygon"===q.type){n="polyline"===q.type;var k=[],g;f.forEach(n?q.paths:q.rings,function(w){k.push(g=[]);f.forEach(w,function(x){g.push(m(x[0],x[1],h))})});return n?new q.constructor({paths:k,spatialReference:new c(a)}):new q.constructor({rings:k,spatialReference:new c(a)})}if("multipoint"===
q.type){var b=[];f.forEach(q.points,function(w){b.push(m(w[0],w[1],h))});return new q.constructor({points:b,spatialReference:new c(a)})}}function d(q,m){q=q&&(null!=q.wkid?q:q.spatialReference);m=m&&(null!=m.wkid?m:m.spatialReference);return q&&m?m.equals(q)?!0:m._canProject(q):!1}l={canProject:d,project:function(q,m){var a=q&&q.spatialReference;m=m&&(null!=m.wkid?m:m.spatialReference);a&&m?a.equals(m)?q=new q.constructor(q.toJson()):d(a,m)?m.isWebMercator()?q=t(q,u.lngLatToXY,{wkid:102100}):4326===
m.wkid&&(q=t(q,u.xyToLngLat,{wkid:4326})):q=null:q=null;return q},lngLatToXY:u.lngLatToXY,xyToLngLat:u.xyToLngLat,metersPerDegree:u.metersPerDegree,geographicToWebMercator:function(q){return t(q,u.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(q,m){return t(q,u.xyToLngLat,{wkid:4326},m)}};B.mixin(B.getObject("geometry",!0,e),l);return l})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(f,B,l,e){function c(d,q,m){return d instanceof
e?new e(d.x+m*(q.x-d.x),d.y+m*(q.y-d.y)):[d[0]+m*(q[0]-d[0]),d[1]+m*(q[1]-d[1])]}function u(d,q){return 1E-8>Math.abs(d-q)}function t(d,q,m,a){var h=u(d[0],q[0])?1E10:(d[1]-q[1])/(d[0]-q[0]),n=u(m[0],a[0])?1E10:(m[1]-a[1])/(m[0]-a[0]),r=d[1]-h*d[0],k=m[1]-n*m[0];if(u(h,n)){if(u(r,k)){if(u(d[0],q[0]))if(Math.min(d[1],q[1])<Math.max(m[1],a[1])||Math.max(d[1],q[1])>Math.min(m[1],a[1])){d=(d[1]+q[1]+m[1]+a[1]-Math.min(d[1],q[1],m[1],a[1])-Math.max(d[1],q[1],m[1],a[1]))/2;var g=(d-r)/h}else return null;
else if(Math.min(d[0],q[0])<Math.max(m[0],a[0])||Math.max(d[0],q[0])>Math.min(m[0],a[0]))g=(d[0]+q[0]+m[0]+a[0]-Math.min(d[0],q[0],m[0],a[0])-Math.max(d[0],q[0],m[0],a[0]))/2,d=h*g+r;else return null;return[g,d]}return null}u(h,1E10)?(g=d[0],d=n*g+k):u(n,1E10)?(g=m[0],d=h*g+r):(g=-(r-k)/(h-n),d=d[1]===q[1]?d[1]:m[1]===a[1]?m[1]:h*g+r);return[g,d]}B={getLength:function(d,q){var m=q.x-d.x;d=q.y-d.y;return Math.sqrt(m*m+d*d)},_getLength:function(d,q){var m=q[0]-d[0];d=q[1]-d[1];return Math.sqrt(m*m+
d*d)},getPointOnLine:c,getMidpoint:function(d,q){return c(d,q,.5)},_equals:u,_getLineIntersection:t,getLineIntersection:function(d,q,m,a,h){(d=t([d.x,d.y],[q.x,q.y],[m.x,m.y],[a.x,a.y]))&&(d=new e(d[0],d[1],h));return d},_getLineIntersection2:function(d,q){var m=d[0],a=d[1],h=q[0],n=q[1];q=m[0];m=m[1];d=a[0];a=a[1];var r=h[0],k=h[1];h=n[0]-r;r=q-r;var g=d-q;n=n[1]-k;k=m-k;var b=a-m,w=n*g-h*b;if(0===w)return!1;h=(h*k-n*r)/w;r=(g*k-b*r)/w;return 0<=h&&1>=h&&0<=r&&1>=r?[q+h*(d-q),m+h*(a-m)]:!1},_pointLineDistance:function(d,
q){var m=q[0],a=q[1];q=m[0];var h=m[1];m=d[0];d=d[1];var n=a[0]-q,r=a[1]-h,k=m-q,g=d-h;a=Math.sqrt;var b=Math.pow,w=a(b(n,2)+b(r,2));k=(k*n+g*r)/(w*w);h+=k*r;return a(b(m-(q+k*n),2)+b(d-h,2))}};f.mixin(f.getObject("geometry",!0,l),B);return B})},"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","./kernel","./geometry/Extent"],function(f,B,l,e,c){l={graphicsExtent:function(u){if(!u||!u.length)return null;var t=null,d,q=u.length;for(d=0;d<q;d++){var m=u[d].geometry;
if(m){var a=m.getExtent();a||"point"!==m.type||null==m.x||null==m.y||(a=new c(m.x,m.y,m.x,m.y,m.spatialReference));a&&(t=t?t.union(a):a)}}return 0>t.getWidth()&&0>t.getHeight()?null:t},getGeometries:function(u){return B.map(u,function(t){return t.geometry})},_encodeGraphics:function(u,t){return B.map(u,function(d,q){d=d.toJson();var m={};d.geometry&&(q=t&&t[q],m.geometry=q&&q.toJson()||d.geometry);d.attributes&&(m.attributes=d.attributes);return m})}};f.mixin(e,l);return l})},"esri/layerUtils":function(){define(["dojo/_base/lang",
"dojo/_base/array","dojo/_base/json","dojo/has","./kernel"],function(f,B,l,e,c){e={_serializeLayerDefinitions:function(u,t){var d=[],q=/[:;]/;if(u&&(B.forEach(u,function(a,h){a&&(d.push([h,a]),!t&&q.test(a)&&(t=!0))}),0<d.length)){if(t){var m={};B.forEach(d,function(a){m[a[0]]=a[1]});m=l.toJson(m)}else m=[],B.forEach(d,function(a){m.push(a[0]+":"+a[1])}),m=m.join(";");return m}return null},_serializeTimeOptions:function(u,t){if(u){var d=[];B.forEach(u,function(q,m){q&&(q=q.toJson(),t&&-1!==B.indexOf(t,
m)&&(q.useTime=!1),d.push('"'+m+'":'+l.toJson(q)))});if(d.length)return"{"+d.join(",")+"}"}},_getVisibleLayers:function(u,t){var d=[],q;if(!u)return d;if(t)for(d=t.concat(),q=0;q<u.length;q++){t=u[q];var m=B.indexOf(u,t.id);t.subLayerIds&&-1<m&&(d.splice(m,1),d=d.concat(t.subLayerIds))}else d=this._getDefaultVisibleLayers(u);return d},_getDefaultVisibleLayers:function(u){var t=[],d;if(!u)return t;for(d=0;d<u.length;d++)0<=u[d].parentLayerId&&-1===B.indexOf(t,u[d].parentLayerId)&&B.some(u,function(q){return q.id===
u[d].parentLayerId})||u[d].defaultVisibility&&t.push(u[d].id);return t},_getLayersForScale:function(u,t){var d=[];if(0<u&&t){var q;for(q=0;q<t.length;q++)if(!(0<=t[q].parentLayerId&&-1===B.indexOf(d,t[q].parentLayerId)&&B.some(t,function(n){return n.id===t[q].parentLayerId}))&&0<=t[q].id){var m=!0,a=t[q].maxScale,h=t[q].minScale;if(0<a||0<h)0<a&&0<h?m=a<=u&&u<=h:0<a?m=a<=u:0<h&&(m=u<=h);m&&d.push(t[q].id)}}return d}};f.mixin(c,e);return e})},"esri/geometry/normalizeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has ../kernel ../config ../deferredUtils ./Extent ./Polyline ./Polygon ./webMercatorUtils ./jsonUtils".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h){function n(y,v){return Math.ceil((y-v)/(2*v))}function r(y,v){var A=y.paths||y.rings,G,F,H=A.length;for(G=0;G<H;G++){var L=A[G].length;for(F=0;F<L;F++){var M=y.getPoint(G,F);y.setPoint(G,F,M.offset(v,0))}}return y}function k(y,v){if(!(y instanceof q||y instanceof m))throw Error("_straightLineDensify: the input geometry is neither polyline nor polygon");var A=y instanceof q,G=[],F;f.forEach(A?y.paths:y.rings,function(H){G.push(F=[]);F.push([H[0][0],H[0][1]]);var L,
M;for(L=0;L<H.length-1;L++){var Q=H[L][0];var S=H[L][1];var I=H[L+1][0];var P=H[L+1][1];var J=Math.sqrt((I-Q)*(I-Q)+(P-S)*(P-S));var U=(P-S)/J;var Y=(I-Q)/J;var aa=J/v;if(1<aa){for(M=1;M<=aa-1;M++){var la=M*v;var T=Y*la+Q;la=U*la+S;F.push([T,la])}M=(J+Math.floor(aa-1)*v)/2;T=Y*M+Q;la=U*M+S;F.push([T,la])}F.push([I,P])}});return A?new q({paths:G,spatialReference:y.spatialReference}):new m({rings:G,spatialReference:y.spatialReference})}function g(y,v,A){v&&(y=k(y,1E6),y=a.webMercatorToGeographic(y,
!0));A&&(y=r(y,A));return y}function b(y,v,A){var G=y.x||y[0];if(G>v){var F=n(G,v);y.x?y=y.offset(-2*F*v,0):y[0]=G+-2*F*v}else G<A&&(F=n(G,A),y.x?y=y.offset(-2*F*A,0):y[0]=G+-2*F*A);return y}function w(y,v){var A=-1;f.forEach(v.cutIndexes,function(G,F){var H=v.geometries[F];f.forEach(H.rings||H.paths,function(L,M){f.some(L,function(Q){if(!(180>Q[0])){Q=0;var S,I=L.length;for(S=0;S<I;S++){var P=L[S][0];Q=P>Q?P:Q}Q=Number(Q.toFixed(9));Q=-360*n(Q,180);I=L.length;for(S=0;S<I;S++)P=H.getPoint(M,S),H.setPoint(M,
S,P.offset(Q,0))}return!0})});G===A?H.rings?f.forEach(H.rings,function(L){y[G]=y[G].addRing(L)}):f.forEach(H.paths,function(L){y[G]=y[G].addPath(L)}):(A=G,y[G]=H)});return y}function x(y,v,A,G){var F=new l;F.addCallbacks(A,G);v=v||u.defaults.geometryService;var H=[],L=[],M,Q,S,I,P,J,U,Y,aa=0;f.forEach(y,function(K){if(K)if(M||(M=K.spatialReference,Q=M._getInfo(),I=(S=M._isWebMercator())?2.0037508342788905E7:180,P=S?-2.0037508342788905E7:-180,J=S?102100:4326,U=new q({paths:[[[I,P],[I,I]]],spatialReference:{wkid:J}}),
Y=new q({paths:[[[P,P],[P,I]]],spatialReference:{wkid:J}})),Q){var W=h.fromJson(K.toJson()),da=K.getExtent();"point"===K.type?H.push(b(W,I,P)):"multipoint"===K.type?(W.points=f.map(W.points,function(fa){return b(fa,I,P)}),H.push(W)):"extent"===K.type?(W=da._normalize(null,null,Q),H.push(W.rings?new m(W):W)):da?(K=2*n(da.xmin,P)*I,W=0===K?W:r(W,K),da=da.offset(K,0),da.intersects(U)&&da.xmax!==I?(aa=da.xmax>aa?da.xmax:aa,W=g(W,S),L.push(W),H.push("cut")):da.intersects(Y)&&da.xmin!==P?(aa=2*da.xmax*
I>aa?2*da.xmax*I:aa,W=g(W,S,360),L.push(W),H.push("cut")):H.push(W)):H.push(W)}else H.push(K);else H.push(K)});A=new q;G=n(aa,I);for(var la=-90,T=G;0<G;){var N=-180+360*G;A.addPath([[N,la],[N,-1*la]]);la*=-1;G--}0<L.length&&0<T?v?v.cut(L,A,function(K){L=w(L,K);var W=[];f.forEach(H,function(da,fa){"cut"===da&&(da=L.shift(),y[fa].rings&&1<y[fa].rings.length&&da.rings.length>=y[fa].rings.length?(H[fa]="simplify",W.push(da)):H[fa]=!0===S?a.geographicToWebMercator(da):da)});0<W.length?v.simplify(W,function(da){f.forEach(H,
function(fa,ha){"simplify"===fa&&(H[ha]=!0===S?a.geographicToWebMercator(da.shift()):da.shift())});F.callback(H)},function(da){F.errback(da)}):F.callback(H)},function(K){F.errback(K)}):F.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):(f.forEach(H,function(K,W){"cut"===K&&(K=L.shift(),H[W]=!0===S?a.geographicToWebMercator(K):K)}),F.callback(H));return F}function z(y,v,A,G){var F=!1,H;B.isObject(y)&&y&&(B.isArray(y)?y.length&&((H=y[0]&&y[0].declaredClass)&&
-1!==H.indexOf("Graphic")?(y=f.map(y,function(L){return L.geometry}),F=y.length?!0:!1):H&&-1!==H.indexOf("esri.geometry.")&&(F=!0)):(H=y.declaredClass)&&-1!==H.indexOf("FeatureSet")?(y=f.map(y.features||[],function(L){return L.geometry}),F=y.length?!0:!1):H&&-1!==H.indexOf("esri.geometry.")&&(F=!0));F&&v.push({index:A,property:G,value:y})}function D(y,v){var A=[];f.forEach(v,function(G){var F=G.i,H=y[F];G=G.p;var L;if(B.isObject(H)&&H)if(G)if("*"===G[0])for(L in H)H.hasOwnProperty(L)&&z(H[L],A,F,
L);else f.forEach(G,function(M){z(B.getObject(M,!1,H),A,F,M)});else z(H,A,F)});return A}function E(y,v){var A=0,G={};f.forEach(v,function(F){var H=F.index,L=F.property,M=F.value,Q=M.length||1,S=y.slice(A,A+Q);B.isArray(M)||(S=S[0]);A+=Q;delete F.value;L?(G[H]=G[H]||{},G[H][L]=S):G[H]=S});return G}function C(y){for(var v=[],A=0,G=0,F=Math.min,H=Math.max,L=0;L<y.length;L++){for(var M=y[L],Q=null,S=0;S<M.length;S++)Q=M[S],v.push(Q),0===S?G=A=Q[0]:(A=F(A,Q[0]),G=H(G,Q[0]));Q&&v.push([(A+G)/2,0])}return v}
e={normalizeCentralMeridian:x,_foldCutResults:w,_prepareGeometryForCut:g,_offsetMagnitude:n,_pointNormalization:b,_updatePolyGeometry:r,_straightLineDensify:k,_createWrappers:function(y){var v=B.isObject(y)?y.prototype:B.getObject(y+".prototype");f.forEach(v.__msigns,function(A){var G=v[A.n];v[A.n]=function(){var F=this,H=[],L,M=new l(t._dfdCanceller);A.f&&t._fixDfd(M);for(L=0;L<A.c;L++)H[L]=arguments[L];var Q={dfd:M};H.push(Q);var S=[],I;if(F.normalization&&!F._isTable){var P=D(H,A.a);f.forEach(P,
function(J){S=S.concat(J.value)});S.length&&(I=x(S))}I?(M._pendingDfd=I,I.addCallbacks(function(J){M.canceled||(Q.assembly=E(J,P),M._pendingDfd=G.apply(F,H))},function(J){var U=F.declaredClass;U&&-1!==U.indexOf("FeatureLayer")?F._resolve([J],null,H[A.e],M,!0):F._errorHandler(J,H[A.e],M)})):M._pendingDfd=G.apply(F,H);return M}})},_disassemble:D,_addToBucket:z,_reassemble:E,getDenormalizedExtent:function(y){if(!y)return null;var v=y.getExtent();if(!v)return null;var A=y.spatialReference&&y.spatialReference._getInfo();
if(!A)return v;var G=A.valid[0];A=A.valid[1];var F=2*A,H=v.getWidth(),L=v.xmax,M=v.xmin;if("extent"===y.type||0===H||H<=A||H>F||L<G||M>A)return v;switch(y.type){case "polygon":if(1<y.rings.length)var Q=C(y.rings);else return v;break;case "polyline":if(1<y.paths.length)Q=C(y.paths);else return v;break;case "multipoint":Q=y.points}y=Math.min;G=Math.max;F=new d(v.toJson());for(var S=0;S<Q.length;S++){var I=Q[S][0];0>I?(I+=A,M=G(I,M)):(I-=A,L=y(I,L))}F.xmin=L;F.xmax=M;return F.getWidth()<H?(F.xmin-=A,
F.xmax-=A,F):v}};B.mixin(B.getObject("geometry",!0,c),e);return e})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(f,B,l,e,c,u,t,d,q,m,a){function h(){}function n(){}e={type:"polyline",paths:null};f=f(d,{declaredClass:"esri.geometry.Polyline",type:"polyline",paths:null,constructor:function(r){this.paths=[];this._path=0;r&&(l.isArray(r)?this.paths=
l.isArray(r[0][0])?r:[r]:r.paths?u.mixin(this,r):this.spatialReference=r,this.spatialReference&&(this.spatialReference=a.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(r){this.clearCache();this._path=this.paths.length;this.paths[this._path]=[];l.isArray(r[0])?B.forEach(r,this._addPointArr,this):B.forEach(r,this._addPoint,this);return this},_addPointArr:function(r){this.paths[this._path].push(r)},_addPoint:function(r){this.paths[this._path].push([r.x,r.y])},_insertPoints:function(r,
k){this.clearCache();this._path=k;this.paths[this._path]||(this.paths[this._path]=[]);B.forEach(r,this._addPoint,this)},_validateInputs:function(r,k){return null!==r&&void 0!==r&&(0>r||r>=this.paths.length)||null!==k&&void 0!==r&&(0>k||k>=this.paths[r].length)?!1:!0},getPoint:function(r,k){if(this._validateInputs(r,k))return new q(this.paths[r][k],this.spatialReference)},setPoint:function(r,k,g){if(this._validateInputs(r,k))return this.clearCache(),this.paths[r][k]=[g.x,g.y],this},insertPoint:function(r,
k,g){if(this._validateInputs(r)&&null!=k&&0<=k&&k<=this.paths[r].length)return this.clearCache(),this.paths[r].splice(k,0,[g.x,g.y]),this},removePath:function(r){if(this._validateInputs(r,null)){this.clearCache();r=this.paths.splice(r,1)[0];var k,g=r.length,b=this.spatialReference;for(k=0;k<g;k++)r[k]=new q(r[k],b);return r}},removePoint:function(r,k){if(this._validateInputs(r,k))return this.clearCache(),new q(this.paths[r].splice(k,1)[0],this.spatialReference)},getExtent:function(){var r=this.getCacheValue("_extent");
var k=this.getCacheValue("_partwise");if(r)return r=new m(r),r._partwise=k,r;r=this.paths;var g=r.length;if(g&&r[0].length){var b,w,x,z,D=b=r[0][0][0],E=w=r[0][0][1],C=Math.min,y=Math.max,v=this.spatialReference;k=[];var A,G;for(x=0;x<g;x++){var F=r[x];var H=A=F[0]&&F[0][0];var L=G=F[0]&&F[0][1];var M=F.length;for(z=0;z<M;z++){var Q=F[z];var S=Q[0];Q=Q[1];D=C(D,S);E=C(E,Q);b=y(b,S);w=y(w,Q);H=C(H,S);L=C(L,Q);A=y(A,S);G=y(G,Q)}k.push(new m({xmin:H,ymin:L,xmax:A,ymax:G,spatialReference:v?v.toJson():
null}))}r={xmin:D,ymin:E,xmax:b,ymax:w,spatialReference:v?v.toJson():null};k=1<k.length?k:null;this.setCacheValue("_extent",r);this.setCacheValue("_partwise",k);r=new m(r);r._partwise=k;return r}},toJson:function(){var r={paths:u.clone3DArray(this.paths)},k=this.spatialReference;k&&(r.spatialReference=k.toJson());return r}});h.prototype=f.prototype;n.prototype=new h;Object.defineProperty(n.prototype,"paths",{get:function(){this._unquantizeFn&&(this._pathsVal=this._unquantizeFn({paths:u.clone3DArray(this._pathsVal)}).paths,
this._unquantizeFn=null);return this._pathsVal},set:function(r){this._pathsVal=r}});n.prototype.setupLazyUnquantization=function(r,k){this._unquantizeFn=r;this._pathsVal=k.paths};f.simpleConstructor=h;f.accessorConstructor=n;f.defaultProps=e;l.setObject("geometry.Polyline",f,c);c.geometry.defaultPolyline=e;return f})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h){function n(){}function r(){}e={type:"polygon",rings:null};var k=f(d,{declaredClass:"esri.geometry.Polygon",type:"polygon",rings:null,constructor:function(g){this.rings=[];this._ring=0;g&&(l.isArray(g)?this.rings=l.isArray(g[0][0])?g:[g]:g.rings?u.mixin(this,g):this.spatialReference=g,this.spatialReference&&(this.spatialReference=h.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(g){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=
[];l.isArray(g[0])?B.forEach(g,this._addPointArr,this):B.forEach(g,this._addPoint,this);return this},_addPointArr:function(g){this.rings[this._ring].push(g)},_addPoint:function(g){this.rings[this._ring].push([g.x,g.y])},_insertPoints:function(g,b){this.clearCache();this._ring=b;this.rings[this._ring]||(this.rings[this._ring]=[]);B.forEach(g,this._addPoint,this)},_validateInputs:function(g,b){return null!==g&&void 0!==g&&(0>g||g>=this.rings.length)||null!==b&&void 0!==g&&(0>b||b>=this.rings[g].length)?
!1:!0},getPoint:function(g,b){if(this._validateInputs(g,b))return new q(this.rings[g][b],this.spatialReference)},setPoint:function(g,b,w){if(this._validateInputs(g,b))return this.clearCache(),this.rings[g][b]=[w.x,w.y],this},insertPoint:function(g,b,w){if(this._validateInputs(g)&&null!=b&&0<=b&&b<=this.rings[g].length)return this.clearCache(),this.rings[g].splice(b,0,[w.x,w.y]),this},removeRing:function(g){if(this._validateInputs(g,null)){this.clearCache();g=this.rings.splice(g,1)[0];var b,w=g.length,
x=this.spatialReference;for(b=0;b<w;b++)g[b]=new q(g[b],x);return g}},removePoint:function(g,b){if(this._validateInputs(g,b))return this.clearCache(),new q(this.rings[g].splice(b,1)[0],this.spatialReference)},getExtent:function(){var g=this.getCacheValue("_extent");var b=this.getCacheValue("_partwise");if(g)return g=new m(g),g._partwise=b,g;g=this.rings;var w=g.length;if(w&&g[0].length){var x,z,D,E,C=x=g[0][0][0],y=z=g[0][0][1],v=Math.min,A=Math.max,G=this.spatialReference;b=[];var F,H;for(D=0;D<
w;D++){var L=g[D];var M=F=L[0]&&L[0][0];var Q=H=L[0]&&L[0][1];var S=L.length;for(E=0;E<S;E++){var I=L[E];var P=I[0];I=I[1];C=v(C,P);y=v(y,I);x=A(x,P);z=A(z,I);M=v(M,P);Q=v(Q,I);F=A(F,P);H=A(H,I)}b.push(new m({xmin:M,ymin:Q,xmax:F,ymax:H,spatialReference:G?G.toJson():null}))}g={xmin:C,ymin:y,xmax:x,ymax:z,spatialReference:G?G.toJson():null};b=1<b.length?b:null;this.setCacheValue("_extent",g);this.setCacheValue("_partwise",b);g=new m(g);g._partwise=b;return g}},contains:function(g){var b=this.rings,
w=!1,x,z,D,E=b.length;var C=this.spatialReference;var y=g.spatialReference;var v=g.x;g=g.y;C&&y&&!C.equals(y)&&C._canProject(y)&&(g=C.isWebMercator()?q.lngLatToXY(v,g):q.xyToLngLat(v,g,!0),v=g[0],g=g[1]);for(D=0;D<E;D++){C=b[D];var A=C.length;for(z=x=0;z<A;z++){x++;x===A&&(x=0);y=C[z];var G=C[x];(y[1]<g&&G[1]>=g||G[1]<g&&y[1]>=g)&&y[0]+(g-y[1])/(G[1]-y[1])*(G[0]-y[0])<v&&(w=!w)}}return w},getCentroid:function(){var g=this.getCacheValue("_centroid");if(void 0!==g)return g;g=this.rings;var b,w,x=[],
z,D,E=Infinity,C=-Infinity,y=Infinity,v=-Infinity;B.forEach(g,function(F){A=b=w=0;B.forEach(F,function(H,L){L<F.length-1&&(z=F[L+1],D=H[0]*z[1]-z[0]*H[1],A+=(H[0]+z[0])*D,b+=(H[1]+z[1])*D,w+=D,H[0]<E&&(E=H[0]),H[0]>C&&(C=H[0]),H[1]<y&&(y=H[1]),H[1]>v&&(v=H[1]))});0<w&&(w*=-1);w&&x.push([A,b,w/2])});x.sort(function(F,H){return F[2]-H[2]});var A=b=void 0;if(x[0]){var G=6*x[0][2];A=x[0][0]/G;b=x[0][1]/G;if(A<E||A>C||b<y||b>v)A=b=void 0}if(void 0===A||void 0===b)if(g=g[0]&&g[0].length?this._getLineCentroid(g[0]):
null)A=g.x,b=g.y;g=isNaN(A)||isNaN(b)?null:new q(A,b,this.spatialReference);this.setCacheValue("_centroid",g);return g},_getLineCentroid:function(g){var b=0,w=0,x=0,z={x:0,y:0},D={x:0,y:0},E,C=g.length,y;for(E=0;E<C-1;E++){var v=g[E];var A=g[E+1];if(v&&A){z.x=v[0];z.y=v[1];D.x=A[0];D.y=A[1];var G=a.getLength(z,D);0<G&&(b+=G,v=a.getMidpoint(v,A),w+=G*v[0],x+=G*v[1])}}0<b?y={x:w/b,y:x/b}:g[0]&&(y={x:g[0][0],y:g[0][1]});return y},isClockwise:function(g){var b=0,w,x=g.length,z=l.isArray(g[0])?function(D,
E){return D[0]*E[1]-E[0]*D[1]}:function(D,E){return D.x*E.y-E.x*D.y};for(w=0;w<x;w++)b+=z(g[w],g[(w+1)%x]);return 0>=b/2},isSelfIntersecting:function(g){g=g||this;var b,w,x,z,D,E=g.rings.length;for(x=0;x<E;x++){for(b=0;b<g.rings[x].length-1;b++){var C=[[g.rings[x][b][0],g.rings[x][b][1]],[g.rings[x][b+1][0],g.rings[x][b+1][1]]];for(w=x+1;w<E;w++)for(z=0;z<g.rings[w].length-1;z++){var y=[[g.rings[w][z][0],g.rings[w][z][1]],[g.rings[w][z+1][0],g.rings[w][z+1][1]]];if((D=a._getLineIntersection2(C,y))&&
!(D[0]===C[0][0]&&D[1]===C[0][1]||D[0]===y[0][0]&&D[1]===y[0][1]||D[0]===C[1][0]&&D[1]===C[1][1]||D[0]===y[1][0]&&D[1]===y[1][1]))return!0}}z=g.rings[x].length;if(!(4>=z))for(b=0;b<z-3;b++){var v=z-1;0===b&&(v=z-2);C=[[g.rings[x][b][0],g.rings[x][b][1]],[g.rings[x][b+1][0],g.rings[x][b+1][1]]];for(w=b+2;w<v;w++)if(y=[[g.rings[x][w][0],g.rings[x][w][1]],[g.rings[x][w+1][0],g.rings[x][w+1][1]]],(D=a._getLineIntersection2(C,y))&&!(D[0]===C[0][0]&&D[1]===C[0][1]||D[0]===y[0][0]&&D[1]===y[0][1]||D[0]===
C[1][0]&&D[1]===C[1][1]||D[0]===y[1][0]&&D[1]===y[1][1]))return!0}}return!1},toJson:function(){var g={rings:u.clone3DArray(this.rings)},b=this.spatialReference;b&&(g.spatialReference=b.toJson());return g}});n.prototype=k.prototype;r.prototype=new n;Object.defineProperty(r.prototype,"rings",{get:function(){this._unquantizeFn&&(this._ringsVal=this._unquantizeFn({rings:u.clone3DArray(this._ringsVal)}).rings,this._unquantizeFn=null);return this._ringsVal},set:function(g){this._ringsVal=g}});r.prototype.setupLazyUnquantization=
function(g,b){this._unquantizeFn=g;this._ringsVal=b.rings};k.simpleConstructor=n;k.accessorConstructor=r;k.defaultProps=e;k.createEllipse=function(g){var b=g.center.x,w=g.center.y,x=g.longAxis,z=g.shortAxis,D=g.numberOfPoints,E=g.map,C;g=[];var y=2*Math.PI/D;for(C=0;C<D;C++){var v=Math.cos(C*y);var A=Math.sin(C*y);v=E.toMap({x:x*v+b,y:z*A+w});g.push(v)}g.push(g[0]);b=new k(E.spatialReference);b.addRing(g);return b};k.createCircle=function(g){return k.createEllipse({center:g.center,longAxis:g.r,shortAxis:g.r,
numberOfPoints:g.numberOfPoints,map:g.map})};k.fromExtent=function(g){var b=g.normalize();g=g.spatialReference;return new k({rings:B.map(b,function(w){return[[w.xmin,w.ymin],[w.xmin,w.ymax],[w.xmax,w.ymax],[w.xmax,w.ymin],[w.xmin,w.ymin]]}),spatialReference:g?g.toJson():null})};l.setObject("geometry.Polygon",k,c);c.geometry.defaultPolygon=e;c.geometry.createEllipse=k.createEllipse;c.geometry.createCircle=k.createCircle;c.geometry.isClockwise=k.prototype.isClockwise;c.geometry.polygonSelfIntersecting=
k.prototype.isSelfIntersecting;return k})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(f,B,l,e,c,u,t,d,q){function m(r,k,g){var b=r.rings||r.paths,w,x;var z=0;for(w=b.length;z<w;z++){var D=b[z];var E=0;for(x=D.length;E<x;E++){var C=D[E];if(0<E)y+=C[0],v+=C[1];else{var y=C[0];var v=C[1]}C[0]=k(y);C[1]=g(v)}}return r}var a={esriGeometryPoint:function(r,k,g){r.x=k(r.x);r.y=g(r.y);return r},
esriGeometryPolyline:m,esriGeometryPolygon:m,esriGeometryEnvelope:function(r,k,g){r.xmin=k(r.xmin);r.ymin=g(r.ymin);r.xmax=k(r.xmax);r.ymax=g(r.ymax);return r},esriGeometryMultipoint:function(r,k,g){var b=r.points,w;var x=0;for(w=b.length;x<w;x++){var z=b[x];if(0<x)D+=z[0],E+=z[1];else{var D=z[0];var E=z[1]}z[0]=k(D);z[1]=g(E)}return r}},h={esriGeometryPoint:function(r,k,g){r.x=k(r.x);r.y=g(r.y);return r}},n={createInstance:function(r,k){r=new r;k&&e.mixin(r,k);return r},fromJson:function(r){if(void 0!==
r.x&&void 0!==r.y)return new c(r);if(void 0!==r.paths)return new u(r);if(void 0!==r.rings)return new t(r);if(void 0!==r.points)return new d(r);if(void 0!==r.xmin&&void 0!==r.ymin&&void 0!==r.xmax&&void 0!==r.ymax)return new q(r)},getJsonType:function(r){return r instanceof c?"esriGeometryPoint":r instanceof u?"esriGeometryPolyline":r instanceof t?"esriGeometryPolygon":r instanceof q?"esriGeometryEnvelope":r instanceof d?"esriGeometryMultipoint":null},getGeometryType:function(r){return"esriGeometryPoint"===
r?c:"esriGeometryPolyline"===r?u:"esriGeometryPolygon"===r?t:"esriGeometryEnvelope"===r?q:"esriGeometryMultipoint"===r?d:null},supportsLazyUnquantization:function(r){return"esriGeometryPoint"===r||"esriGeometryPolyline"===r||"esriGeometryPolygon"===r||"esriGeometryMultipoint"===r},unquantizeFunction:function(r,k){if(r&&k){var g=k.translate[0],b=k.translate[1],w=k.scale[0],x=k.scale[1],z=function(C){return C*w+g},D=function(C){return b-C*x},E=a[r];return function(C){return C?E(C,z,D):null}}},unquantize:function(r,
k,g){if(k=n.unquantizeFunction(k,g)){var b=r.length;for(g=0;g<b;g++)k(r[g].geometry)}},quantizeFunction:function(r,k){if(r&&"esriGeometryPoint"===r&&k){var g=k.translate[0],b=k.translate[1],w=k.scale[0],x=k.scale[1],z=function(C){return Math.round((C-g)/w)},D=function(C){return Math.round((b-C)/x)},E=h[r];return function(C){return C?E(C,z,D):null}}},quantize:function(r,k,g){if(k=n.quantizeFunction(k,g)){var b=r.length;for(g=0;g<b;g++)k(r[g].geometry)}}};f.mixin(f.getObject("geometry",!0,l),n);return n})},
"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(f,B,l,e,c,u,t,d,q,m){function a(){}function h(){}l={type:"multipoint",points:null};f=f(t,{declaredClass:"esri.geometry.Multipoint",type:"multipoint",points:null,constructor:function(n){this.points=[];n&&(n.points?c.mixin(this,n):this.spatialReference=n,this.spatialReference&&(this.spatialReference=m.createSpatialReference(this.spatialReference)));
this.verifySR()},addPoint:function(n){this.clearCache();B.isArray(n)?this.points.push(n):this.points.push([n.x,n.y]);return this},removePoint:function(n){if(this._validateInputs(n))return this.clearCache(),new d(this.points.splice(n,1)[0],this.spatialReference)},getExtent:function(){var n=this.getCacheValue("_extent");if(n)return new q(n);n=this.points;var r=n.length;if(r){var k=n[0],g,b,w=g=k[0],x=b=k[1],z=Math.min,D=Math.max,E=this.spatialReference,C;for(C=0;C<r;C++){k=n[C];var y=k[0];k=k[1];w=
z(w,y);x=z(x,k);g=D(g,y);b=D(b,k)}n={xmin:w,ymin:x,xmax:g,ymax:b,spatialReference:E?E.toJson():null};this.setCacheValue("_extent",n);return new q(n)}},_validateInputs:function(n){return null===n||0>n||n>=this.points.length?!1:!0},getPoint:function(n){if(this._validateInputs(n))return n=this.points[n],new d(n[0],n[1],this.spatialReference)},setPoint:function(n,r){if(this._validateInputs(n))return this.clearCache(),this.points[n]=[r.x,r.y],this},toJson:function(){var n={points:c.clone2DArray(this.points)},
r=this.spatialReference;r&&(n.spatialReference=r.toJson());return n}});a.prototype=f.prototype;h.prototype=new a;Object.defineProperty(h.prototype,"points",{get:function(){this._unquantizeFn&&(this._pointsVal=this._unquantizeFn({points:c.clone2DArray(this._pointsVal)}).points,this._unquantizeFn=null);return this._pointsVal},set:function(n){this._pointsVal=n}});h.prototype.setupLazyUnquantization=function(n,r){this._unquantizeFn=n;this._pointsVal=r.points};f.simpleConstructor=a;f.accessorConstructor=
h;f.defaultProps=l;B.setObject("geometry.Multipoint",f,e);e.geometry.defaultMultipoint=l;return f})},"arcgisonline/init":function(){define("require exports tslib ./esriGeowConfig ./pages/utils/organization ./pages/utils/user ./sharing/util ./sharing/dijit/_Empty ./sharing/dijit/Gallery ./sharing/geow/Account dojo/dom-construct dojo/DeferredList dojo/query dojo/string dojo/_base/connect dojox/widget/AutoRotator dojox/widget/rotator/Controller esri/domUtils esri/lang esri/libs/sanitizer/Sanitizer dojo/i18n!./nls/arcgisonline".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);n=l.__importDefault(n);r=l.__importDefault(r);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);w=l.__importDefault(w);x=l.__importDefault(x);z=l.__importDefault(z);D=l.__importDefault(D);return function(){function E(){}E.loadLabels=
function(){this.labels=l.__assign(l.__assign(l.__assign({},D.default.common),D.default.homePage),D.default.emptyStates);this.viewerLink.innerHTML=this.labels.viewerLink;this.viewerDescription.innerHTML=this.labels.viewerDescription;this.signUpLink.innerHTML=this.labels.signUpLink;this.signUpDescription.innerHTML=this.labels.signUpDescription;this.featuredVideosLink.innerHTML=this.labels.featuredVideosLink;this.featuredVideosDescription.innerHTML=this.labels.featuredVideosDescription;this.lnkExplore.innerHTML=
this.labels.explorerLink;this.pExplore.innerHTML=this.labels.explorerDescription;this.signUpImg.setAttribute("alt",this.labels.signUpLink);this.signUpImg.title=this.labels.signUpLink;this.mapImg.setAttribute("alt",this.labels.viewerLink);this.mapImg.title=this.labels.viewerLink;this.developersImg.setAttribute("alt",this.labels.explorerLink);this.developersImg.title=this.labels.explorerLink;this.videosImg.setAttribute("alt",this.labels.featuredVideosLink);this.videosImg.title=this.labels.featuredVideosLink;
this.next.setAttribute("aria-label",e.default.isRightToLeft?this.labels.previous:this.labels.next);this.prev.setAttribute("aria-label",e.default.isRightToLeft?this.labels.next:this.labels.previous);this.skipToContent.innerHTML=this.labels.skipToContent};E.loadElements=function(){this.skipToContent=document.getElementById("skipToContent");this.headerTitle=document.getElementById("headerTitle");this.viewerLink=document.querySelector("#viewerLink");this.viewerDescription=document.getElementById("viewerDescription");
this.signUpLink=document.querySelector("#signUpLink");this.signUpDescription=document.getElementById("signUpDescription");this.featuredVideosLink=document.querySelector("#featuredVideosLink");this.featuredVideosDescription=document.getElementById("featuredVideosDescription");this.lnkExplore=document.querySelector("#lnkExplore");this.pExplore=document.getElementById("pExplore");this.signUpImg=document.querySelector("#signUpImg");this.mapImg=document.querySelector("#mapImg");this.developersImg=document.querySelector("#developersImg");
this.videosImg=document.querySelector("#videosImg");this.logoImg=document.querySelector("#logoImg");this.next=document.querySelector("#next");this.prev=document.querySelector("#prev");this.matrixLayout=document.getElementById("matrixLayout");this.details=document.getElementById("details");this.homeCalciteBanner=document.getElementById("homeCalciteBanner");this.featuredMaps=document.getElementById("featuredMaps");this.bottomContent=document.getElementById("bottomContent");this.bottomSection=document.getElementById("bottomSection");
this.topRow2=document.getElementById("topRow2");this.orgDetails=document.getElementById("orgDetails");this.organizationSection=document.getElementById("organizationSection")};E.initialize=function(C){var y=this,v,A;this.credential=C;window.esri.i18nBundle=D.default;this.loadElements();this.loadLabels();this.initSanitizer();this.initPage=this.initPage.bind(this);this.getGroupContent=this.getGroupContent.bind(this);this.createGallery=this.createGallery.bind(this);null===(v=this.logoImg)||void 0===v?
void 0:v.setAttribute("src",t.default.relativeToExplicitUrl("images/logo-pod.jpg"));null===(A=this.featuredVideosLink)||void 0===A?void 0:A.setAttribute("href",e.default.learnArcGIS);this.isSingleTenant=!1===e.default.isMultiTenant;u.default.getUserProperties(e.default.userInfo).then(function(G){e.default.userProperties=G;m.default.getSelf(y.initPage,y.initPage)})};E.unhide=function(){document.body.classList.remove("hide")};E.initSanitizer=function(){this.sanitizer=new z.default(c.default.orgSettingsSanitizerParams,
!0);this.sanitizer.sanitizeUrl=c.default.sanitizeUrlOrgOverride;c.default.adjustSanitizerForOrgSettingsUse(this.sanitizer)};E.overrideSettings=function(C){var y,v;this.settings=C;this.isPortal=t.default.isPortal();0<(null===(y=this.settings.id)||void 0===y?void 0:y.length)&&(this.isOrg=!0,null===(v=this.headerTitle)||void 0===v?void 0:v.parentNode.removeChild(this.headerTitle));this.isPortal&&this.getFederatedServers();C.allSSL&&(this.allSSL=C.allSSL);C.portalName&&(e.default.portalName=C.portalName);
C.portalHostname&&(e.default.portalHostname=C.portalHostname);C.portalHeaderImage&&(e.default.portalHeaderImage=C.portalHeaderImage);C.homePageFeaturedContent?e.default.homePageFeaturedContent=C.homePageFeaturedContent:this.isOrg&&(e.default.homePageFeaturedContent=null);x.default.isDefined(C.homePageFeaturedContentCount)&&(e.default.homePageFeaturedContentCount=C.homePageFeaturedContentCount);if(C.rotatorPanels)if(this.isOrg)for(e.default.rotatorPanels=C.rotatorPanels,y=e.default.rotatorPanels,v=
0;v<y.length;v++){var A=y[v];if(this.isPortal&&"7443"===location.port&&-1===e.default.self.portalHostname.indexOf(":7443")){var G=new RegExp(e.default.self.portalHostname,"gi");if(G.test(A.innerHTML)){var F=e.default.self.portalHostname.split("/");F[0]+=":7443";F[1]="arcgis";A.innerHTML=A.innerHTML.replace(G,F.join("/"))}}y[v].innerHTML=A.innerHTML.replace(/CDN_SERVER/gi,e.default.cdnServerUrl)}else a.default.create("div",{id:"homeCalciteBanner"},this.matrixLayout),this.details.classList.add("calcite_home"),
this.details.classList.add("calcite_home_details"),this.matrixLayout.classList.add("calcite_home"),this.matrixLayout.classList.add("calcite_home_matrixLayout"),this.homeCalciteBanner.classList.add("calcite_home"),this.homeCalciteBanner.classList.add("calcite_home_banner"),this.featuredMaps.classList.add("calcite_home"),this.featuredMaps.classList.add("calcite_home_featuredMaps"),this.bottomContent.classList.add("calcite_home"),this.bottomContent.classList.add("calcite_home_bottomContent");else this.isOrg&&
(e.default.rotatorPanels=null);y=C.showHomePageDescription;e.default.showHomePageDescription=void 0!==y&&null!==y?C.showHomePageDescription:!1};E.getFederatedServers=function(){var C=t.default.getUser();!e.default.federatedServers&&C&&(C="".concat(e.default.restBaseUrl,"portals/").concat(e.default.self.id,"/servers"),t.default.request({url:C}).then(function(y){t.default.setFederatedServers((y||{}).servers||[])}))};E.initOrganization=function(){w.default.hide(this.bottomSection);if(e.default.explorerOnline){var C=
"http://developers.arcgis.com",y=this.labels.explorerLink,v=this.labels.explorerDescription;this.isSingleTenant&&(C=e.default.explorerOnline,y=this.labels.explorerLinkPortal,v=this.labels.explorerDescriptionPortal);a.default.create("div",{id:"appOrgDiv",innerHTML:'\x3ch2 id\x3d"h2Explore"\x3e\x3ca id\x3d"lnkExplore" class\x3d"explorerLink" href\x3d"'.concat(C,'" target\x3d"_blank" \x3e').concat(y,'\x3c/a\x3e\x3c/h2\x3e\x3cp id\x3d"pExplore"\x3e').concat(v,"\x3c/p\x3e")},this.topRow2)}C=this.settings.name;
y=this.settings.description;v=e.default.showHomePageDescription;v=void 0!==v&&null!==v&&!1===v?!1:!0;var A=x.default.isDefined(y)&&"\x3cbr\x3e"!==y&&"\x3cbr/\x3e"!==y&&"\x3cbr /\x3e"!==y&&""!==y;A&&v?(this.orgDetails.innerHTML=this.sanitizer.sanitize(y),w.default.show(this.organizationSection)):!this.isPortal||A||v||(y="".concat(this.settings.helpBase).concat(this.settings.helpMap.m["120000837"]),y='\x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"'.concat(y,'" target\x3d"_blank"\x3e'),this.orgDetails.innerHTML=
x.default.substitute({linkStart:y,linkEnd:"\x3c/a\x3e\x3c/span\x3e"},this.labels.portalDefaultDesc),w.default.show(this.organizationSection));y=(y=t.default.getToken())?"?token\x3d".concat(y):"";v=this.settings.backgroundImage;x.default.isDefined(v)?"none"!==v?0===v.indexOf("images/")?(0,n.default)("body").addClass("defaultBackground"):(v="".concat(e.default.restBaseUrl,"portals/self/resources/").concat(v).concat(y),A=(0,n.default)("body.esri")[0],A.style.backgroundImage="url('".concat(v,"')"),A.style.backgroundPosition=
"top center",A.style.backgroundRepeat="repeat-x"):(0,n.default)("body").addClass("calciteBackground"):(0,n.default)("body").addClass("calciteBackground");if(e.default.rotatorPanels){this.matrixLayout.classList.add("matrixLayoutShort");this.details.classList.add("detailsShort");C=t.default.getToken();y=e.default.rotatorPanels;for(v=0;v<y.length;v++)A=y[v],A.id&&(A.innerHTML=this.allSSL||this.isPortal&&"https:"===location.protocol?A.innerHTML.replace(/http:/g,"https:"):A.innerHTML),A.innerHTML=A.innerHTML.replace(/CDN_SERVER/gi,
e.default.cdnServerUrl),A.innerHTML=A.innerHTML.replace("SECURITY_TOKEN",C?C:""),A.innerHTML=this.expandPredefinedImageUrls(A.innerHTML),A.innerHTML=this.expandProtocolAgnosticUrls(A.innerHTML),A.innerHTML=this.sanitizer.sanitize(A.innerHTML);this.createRotator(y)}else v=e.default.portalHeaderImage?e.default.portalHeaderImage:t.default.relativeToExplicitUrl("images/organizationSplash.jpg"),a.default.create("img",{id:"headerImage",src:v},this.matrixLayout),document.getElementById("headerImage").classList.add("portalImage"),
v=a.default.create("div",{id:"logoDisplay"},this.matrixLayout),A="",this.settings&&this.settings.thumbnail&&(A="".concat(e.default.restBaseUrl,"portals/self/resources/").concat(this.settings.thumbnail).concat(y),a.default.create("img",{src:A,alt:C},v)),a.default.create("span",{innerHTML:C},v),this.matrixLayout.classList.add("matrixLayoutShort"),this.details.classList.add("detailsShort");this.unhide()};E.expandPredefinedImageUrls=function(C){var y=window.location.href.substring(0,window.location.href.lastIndexOf("/")+
1);C=this.expandPredefinedImageUrl(C,"images/banner-1.jpg",y);C=this.expandPredefinedImageUrl(C,"images/banner-2.jpg",y);C=this.expandPredefinedImageUrl(C,"images/banner-3.jpg",y);C=this.expandPredefinedImageUrl(C,"images/banner-4.jpg",y);C=this.expandPredefinedImageUrl(C,"images/banner-5.jpg",y);C=this.expandPredefinedImageUrl(C,"images/organizationSplash.jpg",y);return C=this.expandPredefinedImageUrl(C,"images/arcgis_background.jpg",y)};E.expandPredefinedImageUrl=function(C,y,v){return C.replace('src\x3d"'.concat(y,
'"'),'src\x3d"'.concat(v).concat(y,'"')).replace("src\x3d'".concat(y,"'"),"src\x3d'".concat(v).concat(y,"'"))};E.expandProtocolAgnosticUrls=function(C){var y=window.location.protocol;return C.replace('src\x3d"//','src\x3d"'.concat(y,"//")).replace("src\x3d'//","src\x3d'".concat(y,"//"))};E.initPage=function(C){var y,v;e.default.userInfo&&this.credential&&(e.default.userInfo.credential=this.credential,e.default.userInfo.token=this.credential.token);!C||C.code||C.message||this.overrideSettings(C);C=
t.default.getUser();if(this.isSingleTenant||C&&C.accountId)this.isOrg=!0,null===(y=this.headerTitle)||void 0===y?void 0:y.parentNode.removeChild(this.headerTitle);this.isOrg?document.title=this.settings.name:(document.title=e.default.portalName||this.labels.arcgis,document.body.classList.add("defaultBackground"),e.default.portalHeaderImage?(null===(v=this.headerTitle)||void 0===v?void 0:v.parentNode.removeChild(this.headerTitle),a.default.create("img",{id:"headerImage",src:e.default.portalHeaderImage},
this.matrixLayout),document.getElementById("headerImage").classList.add("portalImage")):this.createRotator(e.default.rotatorPanels));y="";C&&!C.accountId?(this.signUpLink.innerHTML=this.labels.readyToUse,this.signUpDescription.innerHTML=this.labels.readyToUseDescription,this.signUpLink.href="".concat(location.protocol,"//www.esri.com/software/apps")):(-1===e.default.signin.indexOf("http")?(y="".concat(e.default.baseUrl).concat(e.default.signin),!1!==e.default.useSSL&&(y=y.replace("http:","https:"))):
y=e.default.signin,(0,n.default)("#signUpLink").attr("href",y));e.default.explorerOnline?(0,n.default)(".explorerLink").attr("href","http://developers.arcgis.com"):(document.getElementById("bottom3Grid").style.display="none",document.getElementById("bottomRow2").classList.remove("middle"),document.getElementById("bottomRow2").classList.add("last"),document.getElementById("bottom2Grid").classList.add("grid_6"),document.getElementById("bottom1Grid").classList.add("grid_6"));document.getElementById("page-border").style.visibility=
"visible";e.default.homePageFeaturedContent?this.getGroup(e.default.homePageFeaturedContent):w.default.hide(document.getElementById("featuredMaps"));this.isOrg?this.initOrganization():this.unhide()};E.createRotator=function(C){var y=new g.default({transition:"dojox.widget.rotator.crossFade",duration:1E4,panes:C,autoStart:!0,pauseOnManualChange:!0,cycles:12,suspendOnHover:!0},document.getElementById("imgRotator"));new b.default({rotator:y,commands:"#"},document.getElementById("categories"));1===(null===
C||void 0===C?void 0:C.length)&&(document.getElementById("categories").style.display="none")};E.getNextElementSibling=function(C){if(C instanceof HTMLElement&&C.nextElementSibling)return C.nextElementSibling;for(;C.nextSibling;){if(1===C.nextSibling.nodeType)return C.nextSibling;C=C.nextSibling}};E.getGroup=function(C){C={q:C,f:"json",ts:Date.now()};t.default.request({url:"".concat(e.default.restBaseUrl,"community/groups"),content:C}).then(this.getGroupContent,this.getGroupContent)};E.getGroupContent=
function(C){var y;if(null!==(y=null===C||void 0===C?void 0:C.results)&&void 0!==y&&y[0]){y=0;for(var v=C.results[y];C.results.length>y+1&&!(-1<C.query.indexOf('"'.concat(v.title,'"')));)y++,v=C.results[y];document.getElementById("galleryTitle").innerHTML=v.title;0===e.default.homePageFeaturedContentCount?this.showAllGroupItems(v):(C={q:"group:".concat(v.id,' -(type:"Code Attachment" OR type:"Windows Viewer Add In" OR type:"Windows Viewer Configuration" OR type:"Map Area") -typekeywords:"MapAreaPackage"'),
f:"json",num:e.default.homePageFeaturedContentCount,sortField:v.sortField?v.sortField:"modified",sortOrder:v.sortOrder?v.sortOrder:"desc",ts:Date.now()},t.default.request({url:"".concat(e.default.restBaseUrl,"search"),content:C}).then(this.createGallery,function(A){}))}else w.default.hide(document.getElementById("featuredMaps"))};E.showAllGroupItems=function(C){var y=this,v={q:"group:".concat(C.id,' -(type:"Code Attachment" OR type:"Windows Viewer Add In" OR type:"Windows Viewer Configuration" OR type:"Map Area") -typekeywords:"MapAreaPackage"'),
f:"json",num:100,sortField:C.sortField?C.sortField:"modified",sortOrder:C.sortOrder?C.sortOrder:"desc",ts:Date.now()};t.default.request({url:"".concat(e.default.restBaseUrl,"search"),content:v}).then(function(A){var G={results:A.results},F=0;F=0;if(0<A.nextStart){F=A.total-A.results.length;F=Math.ceil(F/100);var H=[];A=A.nextStart;for(var L=0;L<F;L++)v.start=A+100*L,H.push(t.default.request({url:"".concat(e.default.restBaseUrl,"search"),content:v}));(new h.default(H)).then(function(M){M.forEach(function(Q){Q[1]&&
Q[1].results&&(G.results=G.results.concat(Q[1].results))});y.createGallery(G)},function(M){y.createGallery(G)})}else y.createGallery(G)},function(A){})};E.createGallery=function(C){var y=this,v=C.results,A=new q.default({nodesPerPage:4,showThumbnailInDetails:!1,showToolTip:!1,showPageControls:!1,fadeOutOtherNodes:!0,noResultsMessage:r.default.substitute(d.default,{message:this.labels.noContentAvailable,width:96})},"gallery"),G=document.getElementById("next"),F=document.getElementById("prev");k.default.connect(A,
"onContentChange",function(){v.length<=A.nodesPerPage&&(e.default.isRightToLeft?(G.classList.remove("prevButtonEnabled"),G.classList.add("prevButtonDisabled")):(G.classList.remove("nextButtonEnabled"),G.classList.add("nextButtonDisabled")))});A.set("items",v);e.default.isRightToLeft?(k.default.connect(F,"click, keyup",A,A.nextPage),k.default.connect(G,"click, keyup",A,A.prevPage),G.classList.remove("nextButtonEnabled"),G.classList.add("nextButtonDisabled")):(k.default.connect(F,"click, keyup",A,A.prevPage),
k.default.connect(G,"click, keyup",A,A.nextPage),F.classList.remove("prevButtonEnabled"),F.classList.add("prevButtonDisabled"));k.default.connect(A,"onPageChange",function(H){y.galleryNodeMap={};e.default.isRightToLeft?(1===H?(G.classList.remove("nextButtonEnabled"),G.classList.add("nextButtonDisabled")):(G.classList.remove("nextButtonDisabled"),G.classList.add("nextButtonEnabled")),H===A.pageCount?(F.classList.remove("prevButtonEnabled"),F.classList.add("prevuttonDisabled")):(F.classList.remove("prevButtonDisabled"),
F.classList.add("prevButtonEnabled"))):(1===H?(F.classList.remove("prevButtonEnabled"),F.classList.add("prevButtonDisabled")):(F.classList.remove("prevButtonDisabled"),F.classList.add("prevButtonEnabled")),H===A.pageCount?(G.classList.remove("nextButtonEnabled"),G.classList.add("nextButtonDisabled")):(G.classList.remove("nextButtonDisabled"),G.classList.add("nextButtonEnabled")))});k.default.connect(A,"onNodeMouseEnter",function(H,L){H=H.currentTarget;var M=t.default.getUser();(0,n.default)("a",H).forEach(function(Q){var S;
if(!E.galleryNodeMap[L.id]){var I=t.default.getHomePageGalleryLinkInfo(L),P=!1;-1<(null===(S=I.href)||void 0===S?void 0:S.toLowerCase().indexOf("javascript"))&&L.url&&("Web Mapping Application"===L.type||"Mobile Application"===L.type||"Document Link"===L.type||"Site Application"===L.type||"Hub Site Application"===L.type||"StoryMap"===L.type)&&(I.href=L.url,P=!0);if("CityEngine Web Scene"===L.type||"Dashboard"===L.type||"Operation View"===L.type)P=!0;(null===I||void 0===I?0:I.href)&&"JavaScript:void(0)"===
I.href&&I.onclick?k.default.connect(Q,"onclick",I.onclick):(!M&&"self"!==L.contentOrigin&&"public"===L.access&&I.href&&(S=I.href.indexOf("/apps/"),0===S?I.href="https://".concat(e.default.self.portalHostname).concat(I.href):0<I.href.indexOf("".concat(window.location.host).concat(t.default.getHomeAppContext()))&&0<S?I.href="https://".concat(e.default.self.portalHostname).concat(I.href.substring(S)):-1<I.href.indexOf(".arcgis.com")&&(S=I.href.split(".arcgis.com"),S=S[S.length-1],I.href="https://".concat(e.default.self.portalHostname).concat(S))),
Q.href=I.href);Q.target=P?"_blank":"";E.galleryNodeMap[L.id]=!0}})}.bind(E))};E.allSSL=!1;E.isOrg=!1;E.isSingleTenant=!1;E.galleryNodeMap={};return E}()})},"tslib/tslib":function(){var f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E,C,y,v,A,G,F,H,L,M;(function(Q){function S(P,J){P!==I&&("function"===typeof Object.create?Object.defineProperty(P,"__esModule",{value:!0}):P.__esModule=!0);return function(U,Y){return P[U]=J?J(U,Y):Y}}var I="object"===typeof global?global:"object"===typeof self?self:"object"===
typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(P){Q(S(I,S(P)))}):"object"===typeof module&&"object"===typeof module.exports?Q(S(I,S(module.exports))):Q(S(I))})(function(Q){var S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,U){J.__proto__=U}||function(J,U){for(var Y in U)Object.prototype.hasOwnProperty.call(U,Y)&&(J[Y]=U[Y])};f=function(J,U){function Y(){this.constructor=J}if("function"!==typeof U&&null!==U)throw new TypeError("Class extends value "+
String(U)+" is not a constructor or null");S(J,U);J.prototype=null===U?Object.create(U):(Y.prototype=U.prototype,new Y)};B=Object.assign||function(J){for(var U,Y=1,aa=arguments.length;Y<aa;Y++){U=arguments[Y];for(var la in U)Object.prototype.hasOwnProperty.call(U,la)&&(J[la]=U[la])}return J};l=function(J,U){var Y={},aa;for(aa in J)Object.prototype.hasOwnProperty.call(J,aa)&&0>U.indexOf(aa)&&(Y[aa]=J[aa]);if(null!=J&&"function"===typeof Object.getOwnPropertySymbols){var la=0;for(aa=Object.getOwnPropertySymbols(J);la<
aa.length;la++)0>U.indexOf(aa[la])&&Object.prototype.propertyIsEnumerable.call(J,aa[la])&&(Y[aa[la]]=J[aa[la]])}return Y};e=function(J,U,Y,aa){var la=arguments.length,T=3>la?U:null===aa?aa=Object.getOwnPropertyDescriptor(U,Y):aa,N;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)T=Reflect.decorate(J,U,Y,aa);else for(var K=J.length-1;0<=K;K--)if(N=J[K])T=(3>la?N(T):3<la?N(U,Y,T):N(U,Y))||T;return 3<la&&T&&Object.defineProperty(U,Y,T),T};c=function(J,U){return function(Y,aa){U(Y,aa,
J)}};u=function(J,U,Y,aa,la,T){function N(Da){if(void 0!==Da&&"function"!==typeof Da)throw new TypeError("Function expected");return Da}var K=aa.kind,W="getter"===K?"get":"setter"===K?"set":"value";J=!U&&J?aa["static"]?J:J.prototype:null;U=U||(J?Object.getOwnPropertyDescriptor(J,aa.name):{});for(var da,fa=!1,ha=Y.length-1;0<=ha;ha--){da={};for(var ra in aa)da[ra]="access"===ra?{}:aa[ra];for(ra in aa.access)da.access[ra]=aa.access[ra];da.addInitializer=function(Da){if(fa)throw new TypeError("Cannot add initializers after decoration has completed");
T.push(N(Da||null))};var za=(0,Y[ha])("accessor"===K?{get:U.get,set:U.set}:U[W],da);if("accessor"===K){if(void 0!==za){if(null===za||"object"!==typeof za)throw new TypeError("Object expected");if(da=N(za.get))U.get=da;if(da=N(za.set))U.set=da;(da=N(za.init))&&la.unshift(da)}}else if(da=N(za))"field"===K?la.unshift(da):U[W]=da}J&&Object.defineProperty(J,aa.name,U);fa=!0};t=function(J,U,Y){for(var aa=2<arguments.length,la=0;la<U.length;la++)Y=aa?U[la].call(J,Y):U[la].call(J);return aa?Y:void 0};d=function(J){return"symbol"===
typeof J?J:"".concat(J)};q=function(J,U,Y){"symbol"===typeof U&&(U=U.description?"[".concat(U.description,"]"):"");return Object.defineProperty(J,"name",{configurable:!0,value:Y?"".concat(Y," ",U):U})};m=function(J,U){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(J,U)};a=function(J,U,Y,aa){function la(T){return T instanceof Y?T:new Y(function(N){N(T)})}return new (Y||(Y=Promise))(function(T,N){function K(fa){try{da(aa.next(fa))}catch(ha){N(ha)}}function W(fa){try{da(aa["throw"](fa))}catch(ha){N(ha)}}
function da(fa){fa.done?T(fa.value):la(fa.value).then(K,W)}da((aa=aa.apply(J,U||[])).next())})};h=function(J,U){function Y(da){return function(fa){return aa([da,fa])}}function aa(da){if(T)throw new TypeError("Generator is already executing.");for(;W&&(W=0,da[0]&&(la=0)),la;)try{if(T=1,N&&(K=da[0]&2?N["return"]:da[0]?N["throw"]||((K=N["return"])&&K.call(N),0):N.next)&&!(K=K.call(N,da[1])).done)return K;if(N=0,K)da=[da[0]&2,K.value];switch(da[0]){case 0:case 1:K=da;break;case 4:return la.label++,{value:da[1],
done:!1};case 5:la.label++;N=da[1];da=[0];continue;case 7:da=la.ops.pop();la.trys.pop();continue;default:if(!(K=la.trys,K=0<K.length&&K[K.length-1])&&(6===da[0]||2===da[0])){la=0;continue}if(3===da[0]&&(!K||da[1]>K[0]&&da[1]<K[3]))la.label=da[1];else if(6===da[0]&&la.label<K[1])la.label=K[1],K=da;else if(K&&la.label<K[2])la.label=K[2],la.ops.push(da);else{K[2]&&la.ops.pop();la.trys.pop();continue}}da=U.call(J,la)}catch(fa){da=[6,fa],N=0}finally{T=K=0}if(da[0]&5)throw da[1];return{value:da[0]?da[1]:
void 0,done:!0}}var la={label:0,sent:function(){if(K[0]&1)throw K[1];return K[1]},trys:[],ops:[]},T,N,K,W;return W={next:Y(0),"throw":Y(1),"return":Y(2)},"function"===typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W};n=function(J,U){for(var Y in J)"default"===Y||Object.prototype.hasOwnProperty.call(U,Y)||H(U,J,Y)};H=Object.create?function(J,U,Y,aa){void 0===aa&&(aa=Y);var la=Object.getOwnPropertyDescriptor(U,Y);if(!la||("get"in la?!U.__esModule:la.writable||la.configurable))la={enumerable:!0,
get:function(){return U[Y]}};Object.defineProperty(J,aa,la)}:function(J,U,Y,aa){void 0===aa&&(aa=Y);J[aa]=U[Y]};r=function(J){var U="function"===typeof Symbol&&Symbol.iterator,Y=U&&J[U],aa=0;if(Y)return Y.call(J);if(J&&"number"===typeof J.length)return{next:function(){J&&aa>=J.length&&(J=void 0);return{value:J&&J[aa++],done:!J}}};throw new TypeError(U?"Object is not iterable.":"Symbol.iterator is not defined.");};k=function(J,U){var Y="function"===typeof Symbol&&J[Symbol.iterator];if(!Y)return J;
J=Y.call(J);var aa,la=[];try{for(;(void 0===U||0<U--)&&!(aa=J.next()).done;)la.push(aa.value)}catch(N){var T={error:N}}finally{try{aa&&!aa.done&&(Y=J["return"])&&Y.call(J)}finally{if(T)throw T.error;}}return la};g=function(){for(var J=[],U=0;U<arguments.length;U++)J=J.concat(k(arguments[U]));return J};b=function(){for(var J=0,U=0,Y=arguments.length;U<Y;U++)J+=arguments[U].length;J=Array(J);var aa=0;for(U=0;U<Y;U++)for(var la=arguments[U],T=0,N=la.length;T<N;T++,aa++)J[aa]=la[T];return J};w=function(J,
U,Y){if(Y||2===arguments.length)for(var aa=0,la=U.length,T;aa<la;aa++)!T&&aa in U||(T||(T=Array.prototype.slice.call(U,0,aa)),T[aa]=U[aa]);return J.concat(T||Array.prototype.slice.call(U))};x=function(J){return this instanceof x?(this.v=J,this):new x(J)};z=function(J,U,Y){function aa(ha){W[ha]&&(da[ha]=function(ra){return new Promise(function(za,Da){1<fa.push([ha,ra,za,Da])||la(ha,ra)})})}function la(ha,ra){try{var za=W[ha](ra);za.value instanceof x?Promise.resolve(za.value.v).then(T,N):K(fa[0][2],
za)}catch(Da){K(fa[0][3],Da)}}function T(ha){la("next",ha)}function N(ha){la("throw",ha)}function K(ha,ra){(ha(ra),fa.shift(),fa.length)&&la(fa[0][0],fa[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var W=Y.apply(J,U||[]),da,fa=[];return da={},aa("next"),aa("throw"),aa("return"),da[Symbol.asyncIterator]=function(){return this},da};D=function(J){function U(la,T){Y[la]=J[la]?function(N){return(aa=!aa)?{value:x(J[la](N)),done:!1}:T?T(N):N}:T}var Y,aa;return Y=
{},U("next"),U("throw",function(la){throw la;}),U("return"),Y[Symbol.iterator]=function(){return this},Y};E=function(J){function U(T){la[T]=J[T]&&function(N){return new Promise(function(K,W){N=J[T](N);Y(K,W,N.done,N.value)})}}function Y(T,N,K,W){Promise.resolve(W).then(function(da){T({value:da,done:K})},N)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var aa=J[Symbol.asyncIterator],la;return aa?aa.call(J):(J="function"===typeof r?r(J):J[Symbol.iterator](),la=
{},U("next"),U("throw"),U("return"),la[Symbol.asyncIterator]=function(){return this},la)};C=function(J,U){Object.defineProperty?Object.defineProperty(J,"raw",{value:U}):J.raw=U;return J};var I=Object.create?function(J,U){Object.defineProperty(J,"default",{enumerable:!0,value:U})}:function(J,U){J["default"]=U};y=function(J){if(J&&J.__esModule)return J;var U={};if(null!=J)for(var Y in J)"default"!==Y&&Object.prototype.hasOwnProperty.call(J,Y)&&H(U,J,Y);I(U,J);return U};v=function(J){return J&&J.__esModule?
J:{"default":J}};A=function(J,U,Y,aa){if("a"===Y&&!aa)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof U?J!==U||!aa:!U.has(J))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===Y?aa:"a"===Y?aa.call(J):aa?aa.value:U.get(J)};G=function(J,U,Y,aa,la){if("m"===aa)throw new TypeError("Private method is not writable");if("a"===aa&&!la)throw new TypeError("Private accessor was defined without a setter");if("function"===
typeof U?J!==U||!la:!U.has(J))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===aa?la.call(J,Y):la?la.value=Y:U.set(J,Y),Y};F=function(J,U){if(null===U||"object"!==typeof U&&"function"!==typeof U)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof J?U===J:J.has(U)};L=function(J,U,Y){if(null!==U&&void 0!==U){if("object"!==typeof U&&"function"!==typeof U)throw new TypeError("Object expected.");if(Y){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");
var aa=U[Symbol.asyncDispose]}if(void 0===aa){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");aa=U[Symbol.dispose]}if("function"!==typeof aa)throw new TypeError("Object not disposable.");J.stack.push({value:U,dispose:aa,async:Y})}else Y&&J.stack.push({async:!0});return U};var P="function"===typeof SuppressedError?SuppressedError:function(J,U,Y){Y=Error(Y);return Y.name="SuppressedError",Y.error=J,Y.suppressed=U,Y};M=function(J){function U(aa){J.error=J.hasError?new P(aa,J.error,
"An error was suppressed during disposal."):aa;J.hasError=!0}function Y(){for(;J.stack.length;){var aa=J.stack.pop();try{var la=aa.dispose&&aa.dispose.call(aa.value);if(aa.async)return Promise.resolve(la).then(Y,function(T){U(T);return Y()})}catch(T){U(T)}}if(J.hasError)throw J.error;}return Y()};Q("__extends",f);Q("__assign",B);Q("__rest",l);Q("__decorate",e);Q("__param",c);Q("__esDecorate",u);Q("__runInitializers",t);Q("__propKey",d);Q("__setFunctionName",q);Q("__metadata",m);Q("__awaiter",a);Q("__generator",
h);Q("__exportStar",n);Q("__createBinding",H);Q("__values",r);Q("__read",k);Q("__spread",g);Q("__spreadArrays",b);Q("__spreadArray",w);Q("__await",x);Q("__asyncGenerator",z);Q("__asyncDelegator",D);Q("__asyncValues",E);Q("__makeTemplateObject",C);Q("__importStar",y);Q("__importDefault",v);Q("__classPrivateFieldGet",A);Q("__classPrivateFieldSet",G);Q("__classPrivateFieldIn",F);Q("__addDisposableResource",L);Q("__disposeResources",M)})},"arcgisonline/esriGeowConfig":function(){define(["require","exports"],
function(f,B){return window.esriGeowConfig||{}})},"arcgisonline/pages/utils/organization":function(){define("require exports tslib dojo/Deferred dojo/cookie dojo/json dojo/string dojo/i18n!../../nls/arcgisonline dojo/_base/kernel moment/moment ../../esriGeowConfig ../../pages/utils/queryHandler ./formatters ./arrays ./subscription ../../sharing/geow/Roles ../../sharing/util".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);
t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importStar(h);n=l.__importDefault(n);r=l.__importDefault(r);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);var w="".concat(f.toUrl("arcgisonline/sharing/dijit"),"/css/images/app-icons/");return function(){function x(){}x.isMobile=function(){return 720>=window.innerWidth};x.getCompatibleUserTypes=function(z,D,E){var C=[];D.forEach(function(y){var v=!1,A=!1;
z.isPro&&y.apps.forEach(function(M){M.isAppBundle||M.entitlements.forEach(function(Q){if(-1!==x._proKeys.indexOf(Q)){-1!==x._proKeys.indexOf(z.key)&&(A=!0);var S=null===E||void 0===E?void 0:E.filter(function(I){return I.key===Q})[0];S&&x.isProExtension(z.key)&&-1!==S.extNotSupported.indexOf(z.key)&&(v=!0)}})});var G=!1,F=!1,H=!1,L=(z.isEsriApp||z.isAppBundle)&&y.preventSignInFromNonUTEsriApps;y.apps.forEach(function(M){z.isAppBundle&&M.isAppBundle&&M.id===z.itemId&&(G=!0);z.isAppBundle||M.isAppBundle||
M.id!==z.itemId||-1===M.entitlements.indexOf(z.key)?!z.isAppBundle&&M.isAppBundle&&M.apps.some(function(S){return-1!==S.entitlements.indexOf(z.key)})&&(F=!0):F=!0;var Q=z.requiredListings;0<(null===Q||void 0===Q?void 0:Q.length)?M.isAppBundle?M.apps.some(function(S){return-1<Q.indexOf(S.id)})&&(H=!0):-1<Q.indexOf(M.id)&&(H=!0):H=!0});-1===z.allowedLevels.indexOf(y.level)&&0!==z.allowedLevels.length||v||A||G||F||!(0<y.maxUsers)||!H||y.supportsSignInOnlyFromUTApps||L||C.push(y)});return C};x.isBusinessAnalyst=
function(z){return"ArcGIS Business Analyst Web and Mobile Apps"===z||-1<this.baKeys.indexOf(z)};x.isDrone2Map=function(z){return"ArcGIS Drone2Map"===z||-1<this.droneKeys.indexOf(z)};x.userTypePassesRequired=function(z,D){var E=D.requiredListings;if(!E||0===E.length)return!0;var C=!1;return z.apps.some(function(y){y.isAppBundle?y.apps.some(function(v){return-1<E.indexOf(v.id)})&&(C=!0):-1<E.indexOf(y.id)&&(C=!0);return C})};x.checkPasswordStrength=function(z){return b.default.request({url:b.default.getSecureUrl("".concat(a.default.restBaseUrl,
"portals/checkPasswordStrength")),content:{password:z}},{usePost:!0})};x.getSubscriptionInfo=function(){return b.default.request({url:b.default.getSecureUrl("".concat(a.default.restBaseUrl,"portals/self/subscriptionInfo"))})};x.filterRoles=function(z,D,E,C,y){var v=[],A=l.__spreadArray(l.__spreadArray([],g.default.extraLevelOnePrivileges,!0),D.privileges,!0);"11"===C&&A.push("features:user:edit");z.forEach(function(G){if(E||!E&&D&&G.privileges&&!g.default.exceedsRolePrivileges(A,G.privileges))y?v.push(G):
v.push({name:G.name,role:G.id,description:G.description})});return v};x.alreadyIncludedInUserType=function(z,D){var E,C=0<z.apps.filter(function(y){return D.itemId===y.id}).length;z.apps.forEach(function(y){y.isAppBundle&&y.apps.forEach(function(v){v.id===D.itemId&&(C=!0)})});(null!==(E=z.extensions)&&void 0!==E?E:[]).some(function(y){(y=y.id===D.itemId)&&(C=!0);return y});return C};x.convertAppBundletoEntitlement=function(z){return z.map(function(D){return{key:D.appBundleItemId,itemId:D.appBundleItemId,
title:D.name,used:D.assigned,total:D.maxUsers,isAppBundle:!0,apps:D.apps,allowedLevels:D.allowedLevels,usernames:D.usernames}})};x.transformAppBundleApps=function(z,D){var E=[];z.forEach(function(C){var y,v,A;1>=(null===(y=C.entitlements)||void 0===y?void 0:y.length)?(y=((null===(v=x._appSwitcherResponse)||void 0===v?void 0:v.apps)||[]).filter(function(G){return G.entitlement===C.entitlements[0]})[0],v="Classic Story Maps"===C.title&&D,null!==y&&void 0!==y&&y.hidden||v||(y&&(C.title=y.shortLabel||
y.title||C.title||""),E.push(C))):null===(A=C.entitlements)||void 0===A?void 0:A.forEach(function(G){var F,H=((null===(F=x._appSwitcherResponse)||void 0===F?void 0:F.apps)||[]).filter(function(L){return G&&L.entitlement===G})[0];(null===H||void 0===H?0:H.title)&&!H.hidden&&(F=l.__assign(l.__assign({},C),{title:H.shortLabel||H.title}),E.push(F))})});return E};x.initLicensesConfig=function(z){var D=new e.default;z||D.resolve();x.queryAppSwitcherItem(z).then(function(E){var C;0<(null===(C=E.items)||
void 0===C?void 0:C.length)?(E=E.items[0],x.licensesConfigItem=E,x.getAppSwitcherConfig(E,z).then(function(){D.resolve()})):D.resolve()});return D};x.clearLicensesConfigCache=function(){x._appSwitcherSearchResponse=void 0;x._appSwitcherSearchDfd=void 0;x._appSwitcherResponse=void 0;x._appSwitcherConfigDfd=void 0};x.queryAppSwitcherItem=function(z){var D=new e.default;x._appSwitcherSearchResponse?D.resolve(x._appSwitcherSearchResponse):x._appSwitcherSearchDfd?x._appSwitcherSearchDfd.then(function(E){D.resolve(E)}):
(x._appSwitcherSearchDfd=D,z.queryItems(a.default.licensesItemQuery,!0).then(function(E){x._appSwitcherSearchResponse=E;D.resolve(E)},function(E){x._appSwitcherSearchResponse={};D.resolve({})}));return D};x.getAppSwitcherConfig=function(z,D){var E=new e.default;x._appSwitcherResponse?E.resolve(x._appSwitcherResponse):x._appSwitcherConfigDfd?x._appSwitcherConfigDfd.then(function(C){E.resolve(C)}):(x._appSwitcherConfigDfd=E,b.default.request({url:z.itemDataUrl}).then(function(C){x._appSwitcherResponse=
C;x.licensesConfig=C;C.appSwitcher&&(x._apps=C.appSwitcher.apps);E.resolve(C)},function(){x._appSwitcherResponse={};E.resolve({})}));return E};x.isEntitlement=function(z){return void 0!==z.key||void 0!==z.itemId};x.getAppIconDir=function(){return w};x.getAppIcon=function(z,D){function E(Q){G.imagePath="svg-app-icon.svg";G.abbr=Q.title.substring(0,1);G.showAbbr=!0;G.abbrClass="";G.ordinal=1;G.shapeClass=""}function C(Q){var S=L.filter(function(I){var P,J;return I.entitlement&&1===(null===(P=Q.entitlements)||
void 0===P?void 0:P.length)&&I.entitlement===(null===(J=Q.entitlements)||void 0===J?void 0:J[0])||I.title&&I.title===Q.title||I.shortLabel&&I.shortLabel===Q.title})[0];-1!==Q.title.indexOf("ArcGIS Pro")?(G.imagePath="arcgis-pro.png",G.ordinal=0):(null===S||void 0===S?0:S.image)?(G.imagePath="".concat(H).concat(S.image),G.ordinal=0,F=!0):S&&!S.image?E(Q):(G.imagePath="fieldmapsmobile"===Q.id?"".concat(w,"fieldmaps.png"):M?"".concat(H).concat(Q.title.replace(/\s/g,"_"),"/icon.png"):"".concat(w,"generic-app.png"),
G.shapeClass="not-hex",F=!0)}function y(Q){var S,I,P,J=L.filter(function(U){return U.entitlement&&U.entitlement===Q.key||U.title&&U.title===Q.title||U.label&&U.label===Q.title||U.shortLabel&&U.shortLabel===Q.title})[0];Q.isPro||-1!==Q.title.indexOf("ArcGIS Pro")?(G.imagePath="arcgis-pro.png",G.ordinal=0):(null===J||void 0===J?0:J.image)?(G.imagePath="".concat(H).concat(J.image),G.ordinal=0,F=!0):J&&!J.image?E(Q):(J=(null===(S=a.default.userInfo.credential)||void 0===S?void 0:S.token)||a.default.userInfo.token,
G.shapeClass="not-hex",Q.icon?(G.imagePath="".concat(a.default.restBaseUrl,"portals/self/resources/").concat(Q.icon,"?token\x3d").concat(J),F=!0,G.ordinal=2):(null===(P=null===(I=Q.properties)||void 0===I?void 0:I.appSwitcher)||void 0===P?0:P.image)?(G.imagePath="https://".concat(a.default.self.portalHostname,"/sharing/rest/content/items/").concat(Q.itemId,"/resources/").concat(Q.properties.appSwitcher.image,"?token\x3d").concat(J),F=!0,G.ordinal=2):"esri"===Q.owner||"esri_apps"===Q.owner||Q.isAppBundle?
(G.imagePath=M?"".concat(H).concat(Q.title.replace(/\s/g,"_"),"/icon.png"):"".concat(w,"generic-app.png"),F=!0):(G.imagePath=D,G.showAbbr=!0,G.abbrClass="",G.ordinal=3))}var v,A,G={abbrClass:"hide",showAbbr:!1,abbr:"",shapeClass:""},F=!1,H="".concat(a.default.restBaseUrl,"content/items/").concat(null===(v=x.licensesConfigItem)||void 0===v?void 0:v.id,"/resources/"),L=(null===(A=x._appSwitcherResponse)||void 0===A?void 0:A.apps)||[];if("User License Type Extension"===z.type){v=L.filter(function(Q){return Q.entitlement&&
Q.entitlement===z.key||Q.title&&Q.title===z.title})[0];A=b.default.isPortal()?"".concat(w,"user-type-extension.png"):"".concat(w,"user-type-extension-online.png");if(null===v||void 0===v?0:v.image)A="".concat(H).concat(v.image);return l.__assign(l.__assign({},G),{imagePath:A,ordinal:0})}if("Application SDK"===z.type)return l.__assign(l.__assign({},G),{imagePath:"".concat(w,"runtime.png"),ordinal:0});if(z.isExtension)return l.__assign(l.__assign({},G),{imagePath:"".concat(w,"pro-extension.png"),ordinal:0});
v=x._getAppSwitcherIcon(z,D);var M=x.licensesConfigItem;D&&0!==D.length||(D="svg-app-circle.svg");v?G=v:(v=l.__assign({},z),-1<v.title.indexOf("ArcGIS Drone2Map")&&(v.title="ArcGIS Drone2Map"),x.isEntitlement(v)?y(v):C(v));F||(G.imagePath=w+G.imagePath);G.isAppBundle=z.isAppBundle;return G};x.getEmptyAppIcon=function(){return w+"svg-app-icon.svg"};x._getAppSwitcherIcon=function(z,D){if(x._apps){D="svg-app-icon.svg";var E=x._apps.filter(function(y){var v=y.title&&y.title===z.title;x.isEntitlement(z)&&
!v&&(v=y.itemId&&y.itemId===z.itemId);return v})[0];if(E){var C={};E.image?(C.imagePath=E.image,C.ordinal=0,C.abbrClass="hide",C.showAbbr=!1,C.abbr=""):(C.imagePath=D,C.abbr=E.abbr,C.showAbbr=!0,C.abbrClass="",C.ordinal=1);C.shapeClass="";return C}}};x.getUserTypesContainingPro=function(z){return z.filter(function(D){return D.apps?D.apps.some(function(E){return"ArcGIS Pro"===E.title}):!1})};x.userTypeIncludesPro=function(z){var D;return null===(D=null===z||void 0===z?void 0:z.apps)||void 0===D?void 0:
D.some(function(E){return"ArcGIS Pro"===E.title})};x.getProFromUserTypes=function(z){var D;z.forEach(function(E){E.apps&&(D=r.default.find(E.apps,function(C){if("ArcGIS Pro"===C.title)return C}))});return D};x.getProFromAppBundles=function(z){var D;z.forEach(function(E){D=r.default.find(E.apps,function(C){if("ArcGIS Pro"===C.title)return C})});return D};x.getProExtensions=function(z){return z.filter(function(D){return-1!==x._proExtensionKeys.indexOf(D.key)})};x.isProExtension=function(z){return-1!==
x._proExtensionKeys.indexOf(z)};x.isProKey=function(z){return-1!==x._proKeys.indexOf(z)};x.getProKeys=function(){return x._proKeys};x.filterOutProExtensions=function(z){return z.filter(function(D){return-1===x._proExtensionKeys.indexOf(D.key)})};x.getProEntitlements=function(z){z=z.filter(function(D){return D.isPro&&-1<x._proKeys.indexOf(D.key)});z.forEach(function(D){"desktopBasicN"===D.key?D.ordinal=0:"desktopStdN"===D.key?D.ordinal=1:"desktopAdvN"===D.key&&(D.ordinal=2)});z.sort(function(D,E){return D.ordinal>
E.ordinal?1:D.ordinal<E.ordinal?-1:0});return z};x.getUserRole=function(z){var D;return null!==(D=null===z||void 0===z?void 0:z.userRole)&&void 0!==D?D:{}};x.shouldShowMFA=function(z,D){var E=x.getUserRole(D);D=E.isAdmin();E=E.canManageSecurity();D=D||E;E=!1;!z.isPortal&&z.subscriptionInfo?(E=k.default.isDeveloperSubscription(z.subscriptionInfo.type,z.isPortal),E=D&&a.default.multiFactorEnabled&&z.mfaEnabled&&!E):E=z.isPortal&&z.supportsEmail&&D&&z.mfaEnabled;return E};x.canViewLastLogin=function(z){z=
x.getUserRole(z);return z.isAdmin()||z.canViewUsers()};x.canLoadLicensesUI=function(z){z=x.getUserRole(z);return z.isAdmin()||z.canViewOrgUsers()&&z.canManageLicenses()};x.canLoadMembersCard=function(z){z=x.getUserRole(z);return z.isAdmin()||z.canViewUsers()};x.canManageMembers=function(z){z=x.getUserRole(z);return z.isAdmin()||z.canViewUsers()&&(z.canUpdateUsers()||z.canDeleteUsers()||z.canChangeUserRoles()||z.canManageLicenses())};x.canGetUserTypes=function(z){z=x.getUserRole(z);return z.isAdmin()||
z.canInviteUsers()||z.canManageRoles()||z.canManageLicenses()};x.canGetUsersGroups=function(z){z=x.getUserRole(z);return z.isAdmin()||z.canViewUsers()&&z.canViewOrgGroups()};x.canGetLicenseTypes=function(z){z=x.getUserRole(z);return z.isAdmin()||z.canManageLicenses()||z.canInviteUsers()};x.canSelectMembers=function(z){z=x.getUserRole(z);return z.isAdmin()||z.canViewOrgUsers()&&(z.canUpdateUsers()||z.canDisableUsers()||z.canManageLicenses()||z.canAssignUsersToOrgGroups()||z.canReassignOrgItems())};
x.canUseMemberActions=function(z){z=x.getUserRole(z);return z.isAdmin()||z.canUpdateUsers()||z.canDeleteUsers()||z.canDisableUsers()||z.canChangeUserRoles()};x.checkUserCultureSetting=function(z,D){var E=new e.default,C=h.queryToObject(window.location.search.substring(1)),y=function(v){var A=-1<["hi"].indexOf(v);!v||q.default.locale===v.toLowerCase()||A||C.locale?E.resolve():(A=a.default.userInfo.culture,a.default.userInfo.username===z.username&&(A&&(null===A||void 0===A?void 0:A.toLowerCase())===
v.toLowerCase()||(a.default.userInfo.culture=v.toLowerCase(),(0,c.default)("arcgisLocale",a.default.userInfo.culture,{sameSite:"Strict"})),E.resolve(),window.location.reload()))};D?(D="".concat(a.default.restBaseUrl,"community/users/").concat(z.username),b.default.request({url:D}).then(function(v){return y(v.culture)},function(){return E.resolve()})):y(z.culture);return E};x.hasRequestedLegacyHomePageExtension=function(z){var D;return!z.isPortal&&!0===(null===(D=z.portalProperties)||void 0===D?void 0:
D.extendLegacyHomePage)};x.hasForcedLegacyHomePageExtension=function(z){var D;return!z.isPortal&&!0===(null===(D=z.portalProperties)||void 0===D?void 0:D.forceLegacyHomePage)};x.hasModernHomePageEnabled=function(z){var D,E;return z.isPortal?"modern"===(null===(E=z.portalProperties)||void 0===E?void 0:E.homePage)||x.isEnterpriseSetToModernHomePageOnly(z):"modern"===(null===(D=z.portalProperties)||void 0===D?void 0:D.homePage)||x.isOrgPastLegacyHomePageCutOffDate(z)};x.hasLegacyHomePageEnabled=function(z){var D;
return"legacy"===(null===(D=z.portalProperties)||void 0===D?void 0:D.homePage)};x.hasTransitionalHomePageEnabled=function(z){var D;return"transitional"===(null===(D=z.portalProperties)||void 0===D?void 0:D.homePage)||x.isEnterpriseSetToViewHomePageOnly(z)};x.hasViewOnlyHomePageEnabled=function(z){var D;return"viewOnly"===(null===(D=z.portalProperties)||void 0===D?void 0:D.homePage)};x.isOrgPastLegacyHomePageCutOffDate=function(z){var D=(new Date("June 30, 2020")).getTime();return z.isPortal?!1:z.created>=
D};x.isEnterpriseSetToModernHomePageOnly=function(z){var D;return z.isPortal&&"modernOnly"===(null===(D=z.portalProperties)||void 0===D?void 0:D.homePage)};x.isEnterpriseSetToViewHomePageOnly=function(z){var D;return z.isPortal&&"viewOnly"===(null===(D=z.portalProperties)||void 0===D?void 0:D.homePage)};x.hasLegacyHomePageDefaults=function(z){var D,E=null===(D=z.rotatorPanels)||void 0===D?void 0:D[0];D=!z.homePageFeaturedContent;var C=!z.description;z=!z.backgroundImage;E=!E||"banner-2"===(null===
E||void 0===E?void 0:E.id)&&-1<E.innerHTML.indexOf('\x3cimg src\x3d"images/banner-2.jpg" style\x3d"border-radius:0 0 10px 10px; margin-top:0; width:960px;height:180px;" /\x3e\x3cdiv style\x3d"position: absolute; bottom: 80px; left:80px; max-height:65px; width: 660px; margin:0;"\x3e\x3cimg src\x3d"')&&-1<E.innerHTML.indexOf(' class\x3d"esriFloatLeading esriTrailingMargin025" style\x3d"margin-bottom:0;max-height:100px;" /\x3e\x3cspan style\x3d"position:absolute;bottom:0;margin-bottom:0;line-height:normal; font-family:HelveticaNeue,Verdana; font-weight:600;font-size:32px;color:#369;"\x3e')&&
-1<(null===E||void 0===E?void 0:E.innerHTML.indexOf("\x3c/span\x3e\x3c/div\x3e"));return C&&z&&E&&D};x.neverLoggedInLabel=function(z,D){return t.default.substitute(d.default.myOrganization.notYetTooltip,{date:D})};x.lastLoginDate=function(z){var D=(0,m.default)(new Date).diff((0,m.default)(z),"days"),E=(0,m.default)(new Date).isSame(z,"day");return E?d.default.filters.today:!E&&2>D?d.default.myOrganization.membersTab.yesterday:0===z||-1===z||1E3===z?d.default.myOrganization.notYet:n.default.fullDate(z)};
x.openActionsFor=function(z){return d.default.myOrganization.membersTab.openActions.replace("${name}",z)};x.disabledStyle=function(z){return z?"org-member-disabled":""};x.disabledStyleAllowEvents=function(z){return z?"org-member-disabled__allow-events":""};x.disabledLinkClass=function(z){return z?"org-member-disable-link":""};x.shouldShowOnboard=function(z,D){var E=b.default.getCookie("esri_onboard",!0)||{},C=b.default.isPortal(),y=!!a.default.isDebug;y=C||y?document.domain:".arcgis.com";D||(D=new Date("June 30, 2019"));
var v=!E[z]&&new Date<D;!C&&E[z]&&new Date>=D&&(delete E[z],(0,c.default)("esri_onboard",u.default.stringify(E),{expires:new Date((new Date).getTime()+31556926E3),path:"/",domain:y,sameSite:"Strict"}));return v};x.createOnboardCookie=function(z){var D,E=b.default.getCookie("esri_onboard")||{},C=b.default.isPortal(),y=!!a.default.isDebug;C=C||y?document.domain:".arcgis.com";(0,c.default)("esri_onboard",u.default.stringify(l.__assign(l.__assign({},E),(D={},D[z]=!0,D))),{expires:new Date((new Date).getTime()+
31556926E3),path:"/",domain:C,sameSite:"Strict"})};x.createCookie=function(z,D,E,C){var y=b.default.isPortal(),v=!!a.default.isDebug;C=C||!a.default.self.urlKey?".arcgis.com":"".concat(a.default.self.urlKey,".").concat(a.default.self.customBaseUrl);y=y||v?document.domain:C;E*=864E5;(0,c.default)(z,u.default.stringify(l.__assign({},D)),{expires:new Date((new Date).getTime()+E),path:"/",domain:y})};x.isSearchTermValid=function(z,D){var E=/^[^%()';]+$/,C=/^[a-zA-Z0-9@._]+$/;return("username"===D?C:E).test(z)||
0===z.length};x.generateSearchErrorMessage=function(z,D){return{firstname:d.default.myOrganization.restrictedFirstNameCharacters,lastname:d.default.myOrganization.restrictedLastNameCharacters,username:d.default.createAccount.errors.restrictedCharacters,fullname:d.default.myOrganization.restrictedFullNameCharacters}[D]||d.default.controlBar.invalidSyntax};x.addBuiltInRolesAndTranslate=function(z,D){var E=[{id:"org_publisher",name:d.default.myOrganization.formatters.rolePublisher},{id:"org_admin",name:d.default.myOrganization.formatters.roleAdmin},
{id:"org_user",name:d.default.myOrganization.formatters.roleUser}];z=l.__spreadArray(l.__spreadArray([],z,!0),E,!0);z.forEach(function(C){var y=D.filter(function(v){return v.id===C.id})[0];y&&(C.name=y.name)});return z};x.highlight=function(z,D){D&&(z=new RegExp("(".concat(z,")"),"ig"),z=D.textContent.replace(z,'\x3cspan class\x3d"org-settings__search-highlight"\x3e$1\x3c/span\x3e'),D.innerHTML=z)};x.categorizeEntitlements=function(z){var D=x.getProExtensions(z);z=x.filterOutProExtensions(z);var E=
x.getProEntitlements(z),C=[],y=[],v=[],A=[];z.forEach(function(G){"User License Type Extension"===G.type?v.push(G):"Application SDK"===G.type?A.push(G):G.type&&(-1<G.type.indexOf("Application")||-1<G.type.indexOf("Web AppBuilder Widget"))?C.push(G):G.type&&-1===G.type.indexOf("Applcation")&&-1===G.type.indexOf("Web AppBuilder Widget")&&y.push(G)});return{pro:E,proExtensions:D,apps:C,data:y,userTypeExtensions:v,runtime:A}};x.pickRandomHomePageStockImage=function(){return"".concat(Math.floor(2*Math.random()+
1))};x.getTitleColorBasedOnStockImage=function(z){return r.default.includes(["4","5","6"],z)?"white-ramp":"dark-ramp"};x.isAdminRole=function(z){var D=!1;z.privileges?D=z.privileges.some(function(E){return-1<E.indexOf(":admin")}):"org_admin"===z.id&&(D=!0);return D};x.canSupportAdminRoles=function(z){if(!((null===z||void 0===z?0:z.name)&&(null===z||void 0===z?0:z.apps)))return!0;var D=a.default.self.isPortal,E=[];z.apps.forEach(function(y){var v;null===(v=y.entitlements)||void 0===v?void 0:v.forEach(function(A){E.push({key:A,
isViewOnly:y.isViewOnly})})});var C=E.find(function(y){return"orgwebsite"===y.key});return"insightsAnalystUT"===z.id||(D||!C||C.isViewOnly)&&z.supportsSignInOnlyFromUTApps?!1:!0};x.filterIncludedEntitlements=function(z){var D;return z.entitlements&&null!==(D=z.licenseType)&&void 0!==D&&D.apps?z.entitlements.filter(function(E){var C,y=!1;y=null===(C=z.licenseType)||void 0===C?void 0:C.apps.some(function(v){return v.isAppBundle?v.apps.some(function(A){return-1<A.entitlements.indexOf(E)}):-1<v.entitlements.indexOf(E)});
return!y}):z.entitlements};x.isIncludedThroughUserType=function(z,D){var E;return null===(E=z.licenseType)||void 0===E?void 0:E.apps.some(function(C){return C.isAppBundle?C.apps.some(function(y){return-1<y.entitlements.indexOf(D)}):-1<C.entitlements.indexOf(D)})};x.getAppTitle=function(z){var D,E=((null===(D=x._appSwitcherResponse)||void 0===D?void 0:D.apps)||[]).filter(function(C){return C.entitlement===z.entitlements[0]})[0];return 1===z.entitlements.length?(null===E||void 0===E?void 0:E.title)||
z.title||"":z.title||""};x.getClearEmptyFieldsStateForHelperService=function(z){return""===z?!0:void 0};x.adjustSanitizerForOrgSettingsUse=function(z){Object.keys(z._xssFilter.cssFilter.options.whiteList).forEach(function(D){z._xssFilter.cssFilter.options.whiteList[D]=!0});z._xssFilter.cssFilter.options.whiteList["-webkit-border-radius"]=!0;z._xssFilter.cssFilter.options.whiteList["-moz-border-radius"]=!0;z._xssFilter.cssFilter.options.whiteList["-o-border-radius"]=!0};x.sanitizeUrlOrgOverride=function(z){return z};
x.canShowDistributedCollaborations=function(z,D,E){if(z)return!0;var C=k.default.isPersonalUse(E,z);z=k.default.isDeveloperSubscription(E,z)||k.default.isTrialSubscription(E,z);D=D>=(new Date("June 29, 2021")).getTime();return!(C||z&&D)};x.checkForAutoMigratedOrgHomePage=function(z){var D,E=new e.default,C=null===z||void 0===z?void 0:z.portalUser,y=null===C||void 0===C?void 0:C.userRole;C=!(null===C||void 0===C||!C.orgId);y=!!((null===y||void 0===y?0:y.isAdmin())||(null===y||void 0===y?0:y.canManageWebsite()));
y=C&&y;C=x.hasModernHomePageEnabled(z);var v=x.hasLegacyHomePageEnabled(z),A=x.hasViewOnlyHomePageEnabled(z),G=x.hasTransitionalHomePageEnabled(z),F=x.hasLegacyHomePageDefaults(z),H=x.hasRequestedLegacyHomePageExtension(z),L=x.hasForcedLegacyHomePageExtension(z);H=!z.isPortal&&!C&&!G&&(H||v||!F)&&!L;v=z.isPortal&&!v&&!A;C=!C&&!G&&(v||H)&&!F&&!L;G=!z.isPortal&&!(null===(D=z.portalProperties)||void 0===D?0:D.homePage)&&x.isOrgPastLegacyHomePageCutOffDate(z)&&!C;y&&(C||G)?x.markOrgHomePageAsMigrated(z,
C).then(function(){E.resolve()},function(){E.resolve()}):E.resolve();return E};x.isTransitionalHomePage=function(z){var D,E=(null===z||void 0===z?void 0:z.portalUser)||(null===z||void 0===z?void 0:z.user),C=!(null===E||void 0===E||!E.orgId);E=!E&&0<(null===(D=z.id)||void 0===D?void 0:D.length);D=x.hasModernHomePageEnabled(z);var y=x.hasLegacyHomePageEnabled(z),v=x.hasViewOnlyHomePageEnabled(z),A=x.hasTransitionalHomePageEnabled(z),G=x.hasLegacyHomePageDefaults(z),F=x.hasRequestedLegacyHomePageExtension(z),
H=x.hasForcedLegacyHomePageExtension(z),L=(new Date("June 30, 2020")).getTime();L=z.created<L;var M=z.isPortal&&!y&&!v;z=!z.isPortal&&!D&&!A&&(F||y||!G)&&!H;return(C||E)&&(A||v||!D&&(M||z)&&!G&&L)};x.markOrgHomePageAsMigrated=function(z,D){var E=new e.default,C="".concat(b.default.getSecureUrl(a.default.restBaseUrl),"portals/self/update"),y=l.__assign(l.__assign({},z.portalProperties),{homePage:D?"transitional":"modern",extendLegacyHomePage:void 0});D={portalProperties:JSON.stringify(y)};b.default.request({url:C,
content:D},{usePost:!0}).then(function(v){var A;null!==v&&void 0!==v&&v.code||(a.default.self.portalProperties=z.portalProperties=y,v=null===(A=window.location)||void 0===A?void 0:A.pathname.replace(/^.*\//,"").replace(/\?.*$/,"").split(".html")[0].toLowerCase(),["","index","home-mobile"].includes(v)&&window.location.reload());E.resolve()},function(v){E.resolve()});return E};x.calculateHomePageLoadingProperties=function(z){var D,E,C,y=h.queryToObject(window.location.search.slice(1)),v=z.isPortal||
0<(null===(E=null===(D=z.user)||void 0===D?void 0:D.orgId)||void 0===E?void 0:E.length)||0<(null===(C=z.id)||void 0===C?void 0:C.length);D=x.hasModernHomePageEnabled(z)||!z.user;E=x.hasLegacyHomePageDefaults(z);C=x.isTransitionalHomePage(z);z=x.hasForcedLegacyHomePageExtension(z);y=v&&(!D||D&&!E)&&"true"===y.legacy;return{showModern:!v||v&&(D||E||C)&&!y&&!z,previewLegacy:y}};x.getBuyLink=function(z){if(!z.isPortal){if(z.subscriptionInfo){var D=z.subscriptionInfo.type;if("Personal Use"===D||"Student Use"===
D)return(z=z.ipCntryCode?a.default.purchaseUrls[z.ipCntryCode.toLowerCase()]:void 0)?z:a.default.purchaseUrls.renew}if(z.ipCntryCode)return z=z.ipCntryCode.toLowerCase(),a.default.purchaseUrls[z]}};x.injectHelpLink=function(z,D,E,C){z=z.getHelpUrl(E);return t.default.substitute(D,{linkStart:"\x3ccalcite-link ".concat(C?'id\x3d"'.concat(C,'"'):"",' href\x3d"').concat(z,'" target\x3d"_blank"\x3e'),linkEnd:"\x3c/calcite-link\x3e"})};x.baKeys=["BusinessAnlyst","baStdN","businessanlyst"];x.droneKeys=["drone2MapStdN",
"drone2MapAdvN"];x._proKeys=["desktopBasicN","desktopStdN","desktopAdvN"];x._proExtensionKeys="spatialAnalystN 3DAnalystN networkAnalystN geostatAnalystN dataReviewerN workflowMgrN dataInteropN defenseN FMVN businessBasicN businessStdN roadsHighwaysN publisherN productionMapN schematicsN trackingN aviationN airportsN maritimeN bathymetryN smpNAmericaN smpEuropeN smpAsiaPacificN smpMidEAfricaN smpLAmericaN smpJapanN LocRefDesktopN imageAnalystN locateXTN indoorsN".split(" ");x.orgSettingsSanitizerParams=
{whiteList:{a:"id class role target rel title".split(" "),blockquote:["cite","style"],center:[],col:["span","style","width","height"],colgroup:["style"],div:["align","id","class","role"],font:["face","class"],h1:["id","style"],h2:["id","style"],h3:["id","style"],h4:["id","style"],h5:["id","style"],iframe:["class","height","width","src"],img:["class"],input:["id","checked","class","name","type"],li:["style"],link:["href","rel","type"],meta:["name","content","http-equiv","charset"],p:["id","class"],
span:["id","class","role"],strike:[],strong:["style"],style:[],sub:[],sup:[],table:["id","background"],td:["background"],tdbody:[],thead:[],title:[],address:["id","class","style"],article:["id","class","style"],aside:["id","class","style"],details:["id","class","style"],figcaption:["id","class","style"],figure:["id","class","style"],footer:["id","class","style"],header:["id","class","style"],main:["id","class","style"],mark:["id","class","style"],nav:["id","class","style"],section:["id","class","style"],
summary:["id","class","style"],time:["id","class","style"]}};return x}()})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(f,B){f.cookie=function(l,e,c){var u=document.cookie;if(1==arguments.length)var t=(t=u.match(new RegExp("(?:^|; )"+B.escapeString(l)+"\x3d([^;]*)")))?decodeURIComponent(t[1]):void 0;else{c=c||{};u=c.expires;if("number"==typeof u){var d=new Date;d.setTime(d.getTime()+864E5*u);u=c.expires=d}u&&u.toUTCString&&(c.expires=u.toUTCString());e=encodeURIComponent(e);
u=l+"\x3d"+e;for(var q in c)u+="; "+q,d=c[q],!0!==d&&(u+="\x3d"+d);document.cookie=u}return t};f.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return f.cookie})},"moment/moment":function(){(function(f,B){"object"===typeof exports&&"undefined"!==typeof module?module.exports=B():"function"===
typeof define&&define.amd?define(B):f.moment=B()})(this,function(){function f(){return id.apply(null,arguments)}function B(R){return R instanceof Array||"[object Array]"===Object.prototype.toString.call(R)}function l(R){return null!=R&&"[object Object]"===Object.prototype.toString.call(R)}function e(R,ca){return Object.prototype.hasOwnProperty.call(R,ca)}function c(R){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(R).length;for(var ca in R)if(e(R,ca))return!1;return!0}function u(R){return void 0===
R}function t(R){return"number"===typeof R||"[object Number]"===Object.prototype.toString.call(R)}function d(R){return R instanceof Date||"[object Date]"===Object.prototype.toString.call(R)}function q(R,ca){var sa=[],Ba,Va=R.length;for(Ba=0;Ba<Va;++Ba)sa.push(ca(R[Ba],Ba));return sa}function m(R,ca){for(var sa in ca)e(ca,sa)&&(R[sa]=ca[sa]);e(ca,"toString")&&(R.toString=ca.toString);e(ca,"valueOf")&&(R.valueOf=ca.valueOf);return R}function a(R,ca,sa,Ba){return Ya(R,ca,sa,Ba,!0).utc()}function h(R){null==
R._pf&&(R._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1});return R._pf}function n(R){if(null==R._isValid){var ca=h(R),sa=Dc.call(ca.parsedDateParts,function(Ba){return null!=Ba});sa=!isNaN(R._d.getTime())&&0>ca.overflow&&!ca.empty&&!ca.invalidEra&&!ca.invalidMonth&&!ca.invalidWeekday&&!ca.weekdayMismatch&&!ca.nullInput&&
!ca.invalidFormat&&!ca.userInvalidated&&(!ca.meridiem||ca.meridiem&&sa);R._strict&&(sa=sa&&0===ca.charsLeftOver&&0===ca.unusedTokens.length&&void 0===ca.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(R))return sa;R._isValid=sa}return R._isValid}function r(R){var ca=a(NaN);null!=R?m(h(ca),R):h(ca).userInvalidated=!0;return ca}function k(R,ca){var sa,Ba=Jb.length;u(ca._isAMomentObject)||(R._isAMomentObject=ca._isAMomentObject);u(ca._i)||(R._i=ca._i);u(ca._f)||(R._f=ca._f);u(ca._l)||(R._l=ca._l);
u(ca._strict)||(R._strict=ca._strict);u(ca._tzm)||(R._tzm=ca._tzm);u(ca._isUTC)||(R._isUTC=ca._isUTC);u(ca._offset)||(R._offset=ca._offset);u(ca._pf)||(R._pf=h(ca));u(ca._locale)||(R._locale=ca._locale);if(0<Ba)for(sa=0;sa<Ba;sa++){var Va=Jb[sa];var bb=ca[Va];u(bb)||(R[Va]=bb)}return R}function g(R){k(this,R);this._d=new Date(null!=R._d?R._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===na&&(na=!0,f.updateOffset(this),na=!1)}function b(R){return R instanceof g||null!=R&&null!=R._isAMomentObject}
function w(R,ca){var sa=!0;return m(function(){null!=f.deprecationHandler&&f.deprecationHandler(null,R);if(sa){var Ba=[],Va,bb,ib=arguments.length;for(Va=0;Va<ib;Va++){var rb="";if("object"===typeof arguments[Va]){rb+="\n["+Va+"] ";for(bb in arguments[0])e(arguments[0],bb)&&(rb+=bb+": "+arguments[0][bb]+", ");rb=rb.slice(0,-2)}else rb=arguments[Va];Ba.push(rb)}Array.prototype.slice.call(Ba).join("");sa=!1}return ca.apply(this,arguments)},ca)}function x(R,ca){null!=f.deprecationHandler&&f.deprecationHandler(R,
ca);Ra[R]||(Ra[R]=!0)}function z(R){return"undefined"!==typeof Function&&R instanceof Function||"[object Function]"===Object.prototype.toString.call(R)}function D(R,ca){var sa=m({},R),Ba;for(Ba in ca)e(ca,Ba)&&(l(R[Ba])&&l(ca[Ba])?(sa[Ba]={},m(sa[Ba],R[Ba]),m(sa[Ba],ca[Ba])):null!=ca[Ba]?sa[Ba]=ca[Ba]:delete sa[Ba]);for(Ba in R)e(R,Ba)&&!e(ca,Ba)&&l(R[Ba])&&(sa[Ba]=m({},sa[Ba]));return sa}function E(R){null!=R&&this.set(R)}function C(R,ca,sa){var Ba=""+Math.abs(R);return(0<=R?sa?"+":"":"-")+Math.pow(10,
Math.max(0,ca-Ba.length)).toString().substr(1)+Ba}function y(R,ca,sa,Ba){var Va=Ba;"string"===typeof Ba&&(Va=function(){return this[Ba]()});R&&(Wa[R]=Va);ca&&(Wa[ca[0]]=function(){return C(Va.apply(this,arguments),ca[1],ca[2])});sa&&(Wa[sa]=function(){return this.localeData().ordinal(Va.apply(this,arguments),R)})}function v(R){return R.match(/\[[\s\S]/)?R.replace(/^\[|\]$/g,""):R.replace(/\\/g,"")}function A(R){var ca=R.match(Ka),sa;var Ba=0;for(sa=ca.length;Ba<sa;Ba++)ca[Ba]=Wa[ca[Ba]]?Wa[ca[Ba]]:
v(ca[Ba]);return function(Va){var bb="",ib;for(ib=0;ib<sa;ib++)bb+=z(ca[ib])?ca[ib].call(Va,R):ca[ib];return bb}}function G(R,ca){if(!R.isValid())return R.localeData().invalidDate();ca=F(ca,R.localeData());Xa[ca]=Xa[ca]||A(ca);return Xa[ca](R)}function F(R,ca){function sa(Va){return ca.longDateFormat(Va)||Va}var Ba=5;for(Ma.lastIndex=0;0<=Ba&&Ma.test(R);)R=R.replace(Ma,sa),Ma.lastIndex=0,--Ba;return R}function H(R,ca){var sa=R.toLowerCase();Pa[sa]=Pa[sa+"s"]=Pa[ca]=R}function L(R){return"string"===
typeof R?Pa[R]||Pa[R.toLowerCase()]:void 0}function M(R){var ca={},sa,Ba;for(Ba in R)e(R,Ba)&&(sa=L(Ba))&&(ca[sa]=R[Ba]);return ca}function Q(R){var ca=[],sa;for(sa in R)e(R,sa)&&ca.push({unit:sa,priority:Za[sa]});ca.sort(function(Ba,Va){return Ba.priority-Va.priority});return ca}function S(R){return 0===R%4&&0!==R%100||0===R%400}function I(R){return 0>R?Math.ceil(R)||0:Math.floor(R)}function P(R){R=+R;var ca=0;0!==R&&isFinite(R)&&(ca=I(R));return ca}function J(R,ca){return function(sa){return null!=
sa?(Y(this,R,sa),f.updateOffset(this,ca),this):U(this,R)}}function U(R,ca){return R.isValid()?R._d["get"+(R._isUTC?"UTC":"")+ca]():NaN}function Y(R,ca,sa){if(R.isValid()&&!isNaN(sa))if("FullYear"===ca&&S(R.year())&&1===R.month()&&29===R.date())sa=P(sa),R._d["set"+(R._isUTC?"UTC":"")+ca](sa,R.month(),W(sa,R.month()));else R._d["set"+(R._isUTC?"UTC":"")+ca](sa)}function aa(R,ca,sa){Ec[R]=z(ca)?ca:function(Ba,Va){return Ba&&sa?sa:ca}}function la(R){return T(R.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,
function(ca,sa,Ba,Va,bb){return sa||Ba||Va||bb}))}function T(R){return R.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function N(R,ca){var sa,Ba=ca;"string"===typeof R&&(R=[R]);t(ca)&&(Ba=function(bb,ib){ib[ca]=P(bb)});var Va=R.length;for(sa=0;sa<Va;sa++)rc[R[sa]]=Ba}function K(R,ca){N(R,function(sa,Ba,Va,bb){Va._w=Va._w||{};ca(sa,Va._w,Va,bb)})}function W(R,ca){if(isNaN(R)||isNaN(ca))return NaN;var sa=(ca%12+12)%12;R+=(ca-sa)/12;return 1===sa?S(R)?29:28:31-sa%7%2}function da(R,ca){if(!R.isValid())return R;
if("string"===typeof ca)if(/^\d+$/.test(ca))ca=P(ca);else if(ca=R.localeData().monthsParse(ca),!t(ca))return R;var sa=Math.min(R.date(),W(R.year(),ca));R._d["set"+(R._isUTC?"UTC":"")+"Month"](ca,sa);return R}function fa(R){return null!=R?(da(this,R),f.updateOffset(this,!0),this):U(this,"Month")}function ha(){function R(ib,rb){return rb.length-ib.length}var ca=[],sa=[],Ba=[],Va;for(Va=0;12>Va;Va++){var bb=a([2E3,Va]);ca.push(this.monthsShort(bb,""));sa.push(this.months(bb,""));Ba.push(this.months(bb,
""));Ba.push(this.monthsShort(bb,""))}ca.sort(R);sa.sort(R);Ba.sort(R);for(Va=0;12>Va;Va++)ca[Va]=T(ca[Va]),sa[Va]=T(sa[Va]);for(Va=0;24>Va;Va++)Ba[Va]=T(Ba[Va]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+Ba.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+sa.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+ca.join("|")+")","i")}function ra(R,ca,sa,Ba,Va,bb,ib){100>R&&0<=R?(ca=new Date(R+400,ca,sa,Ba,Va,bb,ib),isFinite(ca.getFullYear())&&ca.setFullYear(R)):ca=
new Date(R,ca,sa,Ba,Va,bb,ib);return ca}function za(R){if(100>R&&0<=R){var ca=Array.prototype.slice.call(arguments);ca[0]=R+400;ca=new Date(Date.UTC.apply(null,ca));isFinite(ca.getUTCFullYear())&&ca.setUTCFullYear(R)}else ca=new Date(Date.UTC.apply(null,arguments));return ca}function Da(R,ca,sa){sa=7+ca-sa;return-((7+za(R,0,sa).getUTCDay()-ca)%7)+sa-1}function va(R,ca,sa,Ba,Va){sa=(7+sa-Ba)%7;Ba=Da(R,Ba,Va);Ba=1+7*(ca-1)+sa+Ba;0>=Ba?(ca=R-1,R=(S(ca)?366:365)+Ba):Ba>(S(R)?366:365)?(ca=R+1,R=Ba-(S(R)?
366:365)):(ca=R,R=Ba);return{year:ca,dayOfYear:R}}function Ga(R,ca,sa){var Ba=Da(R.year(),ca,sa);Ba=Math.floor((R.dayOfYear()-Ba-1)/7)+1;1>Ba?(R=R.year()-1,ca=Ba+ba(R,ca,sa)):Ba>ba(R.year(),ca,sa)?(ca=Ba-ba(R.year(),ca,sa),R=R.year()+1):(R=R.year(),ca=Ba);return{week:ca,year:R}}function ba(R,ca,sa){var Ba=Da(R,ca,sa);ca=Da(R+1,ca,sa);return((S(R)?366:365)-Ba+ca)/7}function ia(R,ca){return R.slice(ca,7).concat(R.slice(0,ca))}function wa(R,ca,sa){var Ba;R=R.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=
[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],Ba=0;7>Ba;++Ba){var Va=a([2E3,1]).day(Ba);this._minWeekdaysParse[Ba]=this.weekdaysMin(Va,"").toLocaleLowerCase();this._shortWeekdaysParse[Ba]=this.weekdaysShort(Va,"").toLocaleLowerCase();this._weekdaysParse[Ba]=this.weekdays(Va,"").toLocaleLowerCase()}if(sa)ca="dddd"===ca?Rb.call(this._weekdaysParse,R):"ddd"===ca?Rb.call(this._shortWeekdaysParse,R):Rb.call(this._minWeekdaysParse,R);else if("dddd"===ca){ca=Rb.call(this._weekdaysParse,R);if(-1!==
ca)return ca;ca=Rb.call(this._shortWeekdaysParse,R);if(-1!==ca)return ca;ca=Rb.call(this._minWeekdaysParse,R)}else if("ddd"===ca){ca=Rb.call(this._shortWeekdaysParse,R);if(-1!==ca)return ca;ca=Rb.call(this._weekdaysParse,R);if(-1!==ca)return ca;ca=Rb.call(this._minWeekdaysParse,R)}else{ca=Rb.call(this._minWeekdaysParse,R);if(-1!==ca)return ca;ca=Rb.call(this._weekdaysParse,R);if(-1!==ca)return ca;ca=Rb.call(this._shortWeekdaysParse,R)}return-1!==ca?ca:null}function Aa(){function R(sb,Fb){return Fb.length-
sb.length}var ca=[],sa=[],Ba=[],Va=[],bb;for(bb=0;7>bb;bb++){var ib=a([2E3,1]).day(bb);var rb=T(this.weekdaysMin(ib,""));var vb=T(this.weekdaysShort(ib,""));ib=T(this.weekdays(ib,""));ca.push(rb);sa.push(vb);Ba.push(ib);Va.push(rb);Va.push(vb);Va.push(ib)}ca.sort(R);sa.sort(R);Ba.sort(R);Va.sort(R);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+Va.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+Ba.join("|")+")","i");this._weekdaysShortStrictRegex=
new RegExp("^("+sa.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+ca.join("|")+")","i")}function Fa(){return this.hours()%12||12}function O(R,ca){y(R,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),ca)})}function ya(R,ca){return ca._meridiemParse}function Ha(R){return R?R.toLowerCase().replace("_","-"):R}function ea(R){var ca=null;if(void 0===Ib[R]&&"undefined"!==typeof module&&module&&module.exports&&null!=R.match("^[^/\\\\]*$"))try{ca=Fc._abbr;var sa=
require;sa("./locale/"+R);Oa(ca)}catch(Ba){Ib[R]=null}return Ib[R]}function Oa(R,ca){R&&(R=u(ca)?Ca(R):Na(R,ca))&&(Fc=R);return Fc._abbr}function Na(R,ca){if(null!==ca){var sa=Tc;ca.abbr=R;if(null!=Ib[R])x("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),sa=Ib[R]._config;else if(null!=ca.parentLocale)if(null!=
Ib[ca.parentLocale])sa=Ib[ca.parentLocale]._config;else if(sa=ea(ca.parentLocale),null!=sa)sa=sa._config;else return Gc[ca.parentLocale]||(Gc[ca.parentLocale]=[]),Gc[ca.parentLocale].push({name:R,config:ca}),null;Ib[R]=new E(D(sa,ca));Gc[R]&&Gc[R].forEach(function(Ba){Na(Ba.name,Ba.config)});Oa(R);return Ib[R]}delete Ib[R];return null}function Ca(R){var ca;R&&R._locale&&R._locale._abbr&&(R=R._locale._abbr);if(!R)return Fc;if(!B(R)){if(ca=ea(R))return ca;R=[R]}a:{ca=0;for(var sa,Ba,Va,bb;ca<R.length;){bb=
Ha(R[ca]).split("-");sa=bb.length;for(Ba=(Ba=Ha(R[ca+1]))?Ba.split("-"):null;0<sa;){if(Va=ea(bb.slice(0,sa).join("-"))){R=Va;break a}if(Va=Ba&&Ba.length>=sa){b:{Va=void 0;var ib=Math.min(bb.length,Ba.length);for(Va=0;Va<ib;Va+=1)if(bb[Va]!==Ba[Va])break b;Va=ib}Va=Va>=sa-1}if(Va)break;sa--}ca++}R=Fc}return R}function X(R){var ca;(ca=R._a)&&-2===h(R).overflow&&(ca=0>ca[sc]||11<ca[sc]?sc:1>ca[fc]||ca[fc]>W(ca[Wb],ca[sc])?fc:0>ca[Kb]||24<ca[Kb]||24===ca[Kb]&&(0!==ca[Zb]||0!==ca[gc]||0!==ca[oc])?Kb:0>
ca[Zb]||59<ca[Zb]?Zb:0>ca[gc]||59<ca[gc]?gc:0>ca[oc]||999<ca[oc]?oc:-1,h(R)._overflowDayOfYear&&(ca<Wb||ca>fc)&&(ca=fc),h(R)._overflowWeeks&&-1===ca&&(ca=jd),h(R)._overflowWeekday&&-1===ca&&(ca=kd),h(R).overflow=ca);return R}function oa(R){var ca=R._i;var sa=ad.exec(ca)||bd.exec(ca);var Ba=Qc.length;var Va=Rc.length;if(sa){h(R).iso=!0;for(ca=0;ca<Ba;ca++)if(Qc[ca][1].exec(sa[1])){var bb=Qc[ca][0];var ib=!1!==Qc[ca][2];break}if(null==bb)R._isValid=!1;else{if(sa[3]){ca=0;for(Ba=Va;ca<Ba;ca++)if(Rc[ca][1].exec(sa[3])){var rb=
(sa[2]||" ")+Rc[ca][0];break}if(null==rb){R._isValid=!1;return}}if(ib||null==rb){if(sa[4])if(Lb.exec(sa[4]))var vb="Z";else{R._isValid=!1;return}R._f=bb+(rb||"")+(vb||"");xa(R)}else R._isValid=!1}}else R._isValid=!1}function pa(R){var ca=cd.exec(R._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(ca){var sa=ca[3],Ba=ca[2],Va=ca[5],bb=ca[6],ib=ca[7],rb=parseInt(ca[4],10);sa=[49>=rb?2E3+rb:999>=rb?1900+rb:rb,Mb.indexOf(sa),parseInt(Ba,10),parseInt(Va,
10),parseInt(bb,10)];ib&&sa.push(parseInt(ib,10));a:{if(ib=ca[1])if(ib=Uc.indexOf(ib),Ba=(new Date(sa[0],sa[1],sa[2])).getDay(),ib!==Ba){h(R).weekdayMismatch=!0;ib=R._isValid=!1;break a}ib=!0}ib&&(R._a=sa,(ib=ca[8])?ca=dd[ib]:ca[9]?ca=0:(ca=parseInt(ca[10],10),ib=ca%100,ca=(ca-ib)/100*60+ib),R._tzm=ca,R._d=za.apply(null,R._a),R._d.setUTCMinutes(R._d.getUTCMinutes()-R._tzm),h(R).rfc2822=!0)}else R._isValid=!1}function Z(R){var ca=ld.exec(R._i);null!==ca?R._d=new Date(+ca[1]):(oa(R),!1===R._isValid&&
(delete R._isValid,pa(R),!1===R._isValid&&(delete R._isValid,R._strict?R._isValid=!1:f.createFromInputFallback(R))))}function ja(R,ca,sa){return null!=R?R:null!=ca?ca:sa}function ta(R){var ca=[];if(!R._d){var sa=new Date(f.now());sa=R._useUTC?[sa.getUTCFullYear(),sa.getUTCMonth(),sa.getUTCDate()]:[sa.getFullYear(),sa.getMonth(),sa.getDate()];if(R._w&&null==R._a[fc]&&null==R._a[sc]){var Ba=R._w;if(null!=Ba.GG||null!=Ba.W||null!=Ba.E){var Va=1;var bb=4;var ib=ja(Ba.GG,R._a[Wb],Ga(Ua(),1,4).year);var rb=
ja(Ba.W,1);var vb=ja(Ba.E,1);if(1>vb||7<vb)var sb=!0}else if(Va=R._locale._week.dow,bb=R._locale._week.doy,rb=Ga(Ua(),Va,bb),ib=ja(Ba.gg,R._a[Wb],rb.year),rb=ja(Ba.w,rb.week),null!=Ba.d){if(vb=Ba.d,0>vb||6<vb)sb=!0}else if(null!=Ba.e){if(vb=Ba.e+Va,0>Ba.e||6<Ba.e)sb=!0}else vb=Va;1>rb||rb>ba(ib,Va,bb)?h(R)._overflowWeeks=!0:null!=sb?h(R)._overflowWeekday=!0:(sb=va(ib,rb,vb,Va,bb),R._a[Wb]=sb.year,R._dayOfYear=sb.dayOfYear)}if(null!=R._dayOfYear){sb=ja(R._a[Wb],sa[Wb]);if(R._dayOfYear>(S(sb)?366:365)||
0===R._dayOfYear)h(R)._overflowDayOfYear=!0;sb=za(sb,0,R._dayOfYear);R._a[sc]=sb.getUTCMonth();R._a[fc]=sb.getUTCDate()}for(sb=0;3>sb&&null==R._a[sb];++sb)R._a[sb]=ca[sb]=sa[sb];for(;7>sb;sb++)R._a[sb]=ca[sb]=null==R._a[sb]?2===sb?1:0:R._a[sb];24===R._a[Kb]&&0===R._a[Zb]&&0===R._a[gc]&&0===R._a[oc]&&(R._nextDay=!0,R._a[Kb]=0);R._d=(R._useUTC?za:ra).apply(null,ca);ca=R._useUTC?R._d.getUTCDay():R._d.getDay();null!=R._tzm&&R._d.setUTCMinutes(R._d.getUTCMinutes()-R._tzm);R._nextDay&&(R._a[Kb]=24);R._w&&
"undefined"!==typeof R._w.d&&R._w.d!==ca&&(h(R).weekdayMismatch=!0)}}function xa(R){if(R._f===f.ISO_8601)oa(R);else if(R._f===f.RFC_2822)pa(R);else{R._a=[];h(R).empty=!0;var ca=""+R._i,sa,Ba=ca.length,Va=0;var bb=F(R._f,R._locale).match(Ka)||[];var ib=bb.length;for(sa=0;sa<ib;sa++){var rb=bb[sa];var vb=ca;var sb=vb.match;var Fb=rb;var Kc=R;Fb=e(Ec,Fb)?Ec[Fb](Kc._strict,Kc._locale):new RegExp(la(Fb));if(vb=(sb.call(vb,Fb)||[])[0])sb=ca.substr(0,ca.indexOf(vb)),0<sb.length&&h(R).unusedInput.push(sb),
ca=ca.slice(ca.indexOf(vb)+vb.length),Va+=vb.length;if(Wa[rb]){if(vb?h(R).empty=!1:h(R).unusedTokens.push(rb),sb=R,null!=vb&&e(rc,rb))rc[rb](vb,sb._a,sb,rb)}else R._strict&&!vb&&h(R).unusedTokens.push(rb)}h(R).charsLeftOver=Ba-Va;0<ca.length&&h(R).unusedInput.push(ca);12>=R._a[Kb]&&!0===h(R).bigHour&&0<R._a[Kb]&&(h(R).bigHour=void 0);h(R).parsedDateParts=R._a.slice(0);h(R).meridiem=R._meridiem;ca=R._a;sa=Kb;Ba=R._locale;bb=R._a[Kb];Va=R._meridiem;null!=Va&&(null!=Ba.meridiemHour?bb=Ba.meridiemHour(bb,
Va):null!=Ba.isPM&&((Ba=Ba.isPM(Va))&&12>bb&&(bb+=12),Ba||12!==bb||(bb=0)));ca[sa]=bb;ca=h(R).era;null!==ca&&(R._a[Wb]=R._locale.erasConvertYear(ca,R._a[Wb]));ta(R);X(R)}}function Ea(R){if(!R._d){var ca=M(R._i);R._a=q([ca.year,ca.month,void 0===ca.day?ca.date:ca.day,ca.hour,ca.minute,ca.second,ca.millisecond],function(sa){return sa&&parseInt(sa,10)});ta(R)}}function Ja(R){var ca=R._i,sa=R._f;R._locale=R._locale||Ca(R._l);if(null===ca||void 0===sa&&""===ca)return r({nullInput:!0});"string"===typeof ca&&
(R._i=ca=R._locale.preparse(ca));if(b(ca))return new g(X(ca));if(d(ca))R._d=ca;else if(B(sa)){var Ba=!1,Va=R._f.length;if(0===Va)h(R).invalidFormat=!0,R._d=new Date(NaN);else{for(ca=0;ca<Va;ca++){sa=0;var bb=!1;var ib=k({},R);null!=R._useUTC&&(ib._useUTC=R._useUTC);ib._f=R._f[ca];xa(ib);n(ib)&&(bb=!0);sa+=h(ib).charsLeftOver;sa+=10*h(ib).unusedTokens.length;h(ib).score=sa;if(Ba)sa<rb&&(rb=sa,vb=ib);else if(null==rb||sa<rb||bb){var rb=sa;var vb=ib;bb&&(Ba=!0)}}m(R,vb||ib)}}else sa?xa(R):La(R);n(R)||
(R._d=null);return R}function La(R){var ca=R._i;u(ca)?R._d=new Date(f.now()):d(ca)?R._d=new Date(ca.valueOf()):"string"===typeof ca?Z(R):B(ca)?(R._a=q(ca.slice(0),function(sa){return parseInt(sa,10)}),ta(R)):l(ca)?Ea(R):t(ca)?R._d=new Date(ca):f.createFromInputFallback(R)}function Ya(R,ca,sa,Ba,Va){var bb={};if(!0===ca||!1===ca)Ba=ca,ca=void 0;if(!0===sa||!1===sa)Ba=sa,sa=void 0;if(l(R)&&c(R)||B(R)&&0===R.length)R=void 0;bb._isAMomentObject=!0;bb._useUTC=bb._isUTC=Va;bb._l=sa;bb._i=R;bb._f=ca;bb._strict=
Ba;R=new g(X(Ja(bb)));R._nextDay&&(R.add(1,"d"),R._nextDay=void 0);return R}function Ua(R,ca,sa,Ba){return Ya(R,ca,sa,Ba,!1)}function Ta(R,ca){var sa;1===ca.length&&B(ca[0])&&(ca=ca[0]);if(!ca.length)return Ua();var Ba=ca[0];for(sa=1;sa<ca.length;++sa)if(!ca[sa].isValid()||ca[sa][R](Ba))Ba=ca[sa];return Ba}function ab(R){var ca=M(R);R=ca.year||0;var sa=ca.quarter||0,Ba=ca.month||0,Va=ca.week||ca.isoWeek||0,bb=ca.day||0,ib=ca.hour||0,rb=ca.minute||0,vb=ca.second||0,sb=ca.millisecond||0;a:{var Fb,Kc=
!1,Vc=Lc.length;for(Fb in ca)if(e(ca,Fb)&&(-1===Rb.call(Lc,Fb)||null!=ca[Fb]&&isNaN(ca[Fb]))){ca=!1;break a}for(Fb=0;Fb<Vc;++Fb)if(ca[Lc[Fb]]){if(Kc){ca=!1;break a}parseFloat(ca[Lc[Fb]])!==P(ca[Lc[Fb]])&&(Kc=!0)}ca=!0}this._isValid=ca;this._milliseconds=+sb+1E3*vb+6E4*rb+36E5*ib;this._days=+bb+7*Va;this._months=+Ba+3*sa+12*R;this._data={};this._locale=Ca();this._bubble()}function fb(R){return R instanceof ab}function kb(R){return 0>R?-1*Math.round(-1*R):Math.round(R)}function qb(R,ca){y(R,0,0,function(){var sa=
this.utcOffset(),Ba="+";0>sa&&(sa=-sa,Ba="-");return Ba+C(~~(sa/60),2)+ca+C(~~sa%60,2)})}function ob(R,ca){R=(ca||"").match(R);if(null===R)return null;R=((R[R.length-1]||[])+"").match(md)||["-",0,0];ca=+(60*R[1])+P(R[2]);return 0===ca?0:"+"===R[0]?ca:-ca}function wb(R,ca){return ca._isUTC?(ca=ca.clone(),R=(b(R)||d(R)?R.valueOf():Ua(R).valueOf())-ca.valueOf(),ca._d.setTime(ca._d.valueOf()+R),f.updateOffset(ca,!1),ca):Ua(R).local()}function Gb(){return this.isValid()?this._isUTC&&0===this._offset:!1}
function yb(R,ca){var sa=R,Ba=null;fb(R)?sa={ms:R._milliseconds,d:R._days,M:R._months}:t(R)||!isNaN(+R)?(sa={},ca?sa[ca]=+R:sa.milliseconds=+R):(Ba=nd.exec(R))?(sa="-"===Ba[1]?-1:1,sa={y:0,d:P(Ba[fc])*sa,h:P(Ba[Kb])*sa,m:P(Ba[Zb])*sa,s:P(Ba[gc])*sa,ms:P(kb(1E3*Ba[oc]))*sa}):(Ba=od.exec(R))?(sa="-"===Ba[1]?-1:1,sa={y:lb(Ba[2],sa),M:lb(Ba[3],sa),w:lb(Ba[4],sa),d:lb(Ba[5],sa),h:lb(Ba[6],sa),m:lb(Ba[7],sa),s:lb(Ba[8],sa)}):null==sa?sa={}:"object"===typeof sa&&("from"in sa||"to"in sa)&&(Ba=Ua(sa.from),
sa=Ua(sa.to),Ba.isValid()&&sa.isValid()?(sa=wb(sa,Ba),Ba.isBefore(sa)?sa=Db(Ba,sa):(sa=Db(sa,Ba),sa.milliseconds=-sa.milliseconds,sa.months=-sa.months),Ba=sa):Ba={milliseconds:0,months:0},sa={},sa.ms=Ba.milliseconds,sa.M=Ba.months);sa=new ab(sa);fb(R)&&e(R,"_locale")&&(sa._locale=R._locale);fb(R)&&e(R,"_isValid")&&(sa._isValid=R._isValid);return sa}function lb(R,ca){R=R&&parseFloat(R.replace(",","."));return(isNaN(R)?0:R)*ca}function Db(R,ca){var sa={};sa.months=ca.month()-R.month()+12*(ca.year()-
R.year());R.clone().add(sa.months,"M").isAfter(ca)&&--sa.months;sa.milliseconds=+ca-+R.clone().add(sa.months,"M");return sa}function Sb(R,ca){return function(sa,Ba){if(null!==Ba&&!isNaN(+Ba)){x(ca,"moment()."+ca+"(period, number) is deprecated. Please use moment()."+ca+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");var Va=sa;sa=Ba;Ba=Va}sa=yb(sa,Ba);Eb(this,sa,R);return this}}function Eb(R,ca,sa,Ba){var Va=ca._milliseconds,bb=kb(ca._days);ca=kb(ca._months);
R.isValid()&&(Ba=null==Ba?!0:Ba,ca&&da(R,U(R,"Month")+ca*sa),bb&&Y(R,"Date",U(R,"Date")+bb*sa),Va&&R._d.setTime(R._d.valueOf()+Va*sa),Ba&&f.updateOffset(R,bb||ca))}function Hb(R){return"string"===typeof R||R instanceof String}function Nb(R){var ca=B(R),sa=!1;ca&&(sa=0===R.filter(function(Ba){return!t(Ba)&&Hb(R)}).length);return ca&&sa}function $b(R,ca){if(R.date()<ca.date())return-$b(ca,R);var sa=12*(ca.year()-R.year())+(ca.month()-R.month()),Ba=R.clone().add(sa,"months");0>ca-Ba?(R=R.clone().add(sa-
1,"months"),ca=(ca-Ba)/(Ba-R)):(R=R.clone().add(sa+1,"months"),ca=(ca-Ba)/(R-Ba));return-(sa+ca)||0}function Ob(R){if(void 0===R)return this._locale._abbr;R=Ca(R);null!=R&&(this._locale=R);return this}function bc(){return this._locale}function Ub(R,ca){return(R%ca+ca)%ca}function wc(R,ca,sa){return 100>R&&0<=R?new Date(R+400,ca,sa)-126227808E5:(new Date(R,ca,sa)).valueOf()}function hc(R,ca,sa){return 100>R&&0<=R?Date.UTC(R+400,ca,sa)-126227808E5:Date.UTC(R,ca,sa)}function ic(R,ca){return ca.erasAbbrRegex(R)}
function xc(){var R=[],ca=[],sa=[],Ba=[],Va,bb=this.eras();var ib=0;for(Va=bb.length;ib<Va;++ib)ca.push(T(bb[ib].name)),R.push(T(bb[ib].abbr)),sa.push(T(bb[ib].narrow)),Ba.push(T(bb[ib].name)),Ba.push(T(bb[ib].abbr)),Ba.push(T(bb[ib].narrow));this._erasRegex=new RegExp("^("+Ba.join("|")+")","i");this._erasNameRegex=new RegExp("^("+ca.join("|")+")","i");this._erasAbbrRegex=new RegExp("^("+R.join("|")+")","i");this._erasNarrowRegex=new RegExp("^("+sa.join("|")+")","i")}function yc(R,ca){y(0,[R,R.length],
0,ca)}function Hc(R,ca,sa,Ba,Va){if(null==R)return Ga(this,Ba,Va).year;var bb=ba(R,Ba,Va);ca>bb&&(ca=bb);R=va(R,ca,sa,Ba,Va);R=za(R.year,0,R.dayOfYear);this.year(R.getUTCFullYear());this.month(R.getUTCMonth());this.date(R.getUTCDate());return this}function Mc(R,ca){ca[oc]=P(1E3*("0."+R))}function Ic(R){return R}function zc(R,ca,sa,Ba){var Va=Ca();ca=a().set(Ba,ca);return Va[sa](ca,R)}function tc(R,ca,sa){t(R)&&(ca=R,R=void 0);R=R||"";if(null!=ca)return zc(R,ca,sa,"month");var Ba=[];for(ca=0;12>ca;ca++)Ba[ca]=
zc(R,ca,sa,"month");return Ba}function Xb(R,ca,sa,Ba){"boolean"!==typeof R&&(sa=ca=R,R=!1);t(ca)&&(sa=ca,ca=void 0);ca=ca||"";var Va=Ca();R=R?Va._week.dow:0;Va=[];if(null!=sa)return zc(ca,(sa+R)%7,Ba,"day");for(sa=0;7>sa;sa++)Va[sa]=zc(ca,(sa+R)%7,Ba,"day");return Va}function Nc(R,ca,sa,Ba){ca=yb(ca,sa);R._milliseconds+=Ba*ca._milliseconds;R._days+=Ba*ca._days;R._months+=Ba*ca._months;return R._bubble()}function cc(R){return 0>R?Math.floor(R):Math.ceil(R)}function dc(R){return function(){return this.as(R)}}
function Yb(R){return function(){return this.isValid()?this._data[R]:NaN}}function Oc(R,ca,sa,Ba,Va){return Va.relativeTime(ca||1,!!sa,R,Ba)}function Pb(R){return(0<R)-(0>R)||+R}function ac(){if(!this.isValid())return this.localeData().invalidDate();var R=Wc(this._milliseconds)/1E3,ca=Wc(this._days),sa=Wc(this._months),Ba=this.asSeconds();if(!Ba)return"P0D";var Va=I(R/60);var bb=I(Va/60);R%=60;Va%=60;var ib=I(sa/12);sa%=12;var rb=R?R.toFixed(3).replace(/\.?0+$/,""):"";var vb=0>Ba?"-":"";var sb=Pb(this._months)!==
Pb(Ba)?"-":"";var Fb=Pb(this._days)!==Pb(Ba)?"-":"";Ba=Pb(this._milliseconds)!==Pb(Ba)?"-":"";return vb+"P"+(ib?sb+ib+"Y":"")+(sa?sb+sa+"M":"")+(ca?Fb+ca+"D":"")+(bb||Va||R?"T":"")+(bb?Ba+bb+"H":"")+(Va?Ba+Va+"M":"")+(R?Ba+rb+"S":"")}var Dc=Array.prototype.some?Array.prototype.some:function(R){var ca=Object(this),sa=ca.length>>>0,Ba;for(Ba=0;Ba<sa;Ba++)if(Ba in ca&&R.call(this,ca[Ba],Ba,ca))return!0;return!1};var Jb=f.momentProperties=[],na=!1,Ra={};f.suppressDeprecationWarnings=!1;f.deprecationHandler=
null;var Sa=Object.keys?Object.keys:function(R){var ca,sa=[];for(ca in R)e(R,ca)&&sa.push(ca);return sa};var Ka=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ma=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Xa={},Wa={},Pa={},Za={},cb=/\d/,eb=/\d\d/,nb=/\d{3}/,db=/\d{4}/,mb=/[+-]?\d{6}/,gb=/\d\d?/,tb=/\d\d\d\d?/,Vb=/\d\d\d\d\d\d?/,Ac=/\d{1,3}/,Cc=
/\d{1,4}/,Bc=/[+-]?\d{1,6}/,Bb=/\d+/,jc=/[+-]?\d+/,kc=/Z|[+-]\d\d:?\d\d/gi,lc=/Z|[+-]\d\d(?::?\d\d)?/gi,Pc=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;var Ec={};var rc={},Wb=0,sc=1,fc=2,Kb=3,Zb=4,gc=5,oc=6,jd=7,kd=8;var Rb=Array.prototype.indexOf?Array.prototype.indexOf:function(R){var ca;for(ca=0;ca<this.length;++ca)if(this[ca]===R)return ca;return-1};y("M",["MM",2],"Mo",function(){return this.month()+
1});y("MMM",0,0,function(R){return this.localeData().monthsShort(this,R)});y("MMMM",0,0,function(R){return this.localeData().months(this,R)});H("month","M");Za.month=8;aa("M",gb);aa("MM",gb,eb);aa("MMM",function(R,ca){return ca.monthsShortRegex(R)});aa("MMMM",function(R,ca){return ca.monthsRegex(R)});N(["M","MM"],function(R,ca){ca[sc]=P(R)-1});N(["MMM","MMMM"],function(R,ca,sa,Ba){Ba=sa._locale.monthsParse(R,Ba,sa._strict);null!=Ba?ca[sc]=Ba:h(sa).invalidMonth=R});var Mb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
Sc=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;y("Y",0,0,function(){var R=this.year();return 9999>=R?C(R,4):"+"+R});y(0,["YY",2],0,function(){return this.year()%100});y(0,["YYYY",4],0,"year");y(0,["YYYYY",5],0,"year");y(0,["YYYYYY",6,!0],0,"year");H("year","y");Za.year=1;aa("Y",jc);aa("YY",gb,eb);aa("YYYY",Cc,db);aa("YYYYY",Bc,mb);aa("YYYYYY",Bc,mb);N(["YYYYY","YYYYYY"],Wb);N("YYYY",function(R,ca){ca[Wb]=2===R.length?f.parseTwoDigitYear(R):P(R)});N("YY",function(R,ca){ca[Wb]=f.parseTwoDigitYear(R)});N("Y",function(R,
ca){ca[Wb]=parseInt(R,10)});f.parseTwoDigitYear=function(R){return P(R)+(68<P(R)?1900:2E3)};var ec=J("FullYear",!0);y("w",["ww",2],"wo","week");y("W",["WW",2],"Wo","isoWeek");H("week","w");H("isoWeek","W");Za.week=5;Za.isoWeek=5;aa("w",gb);aa("ww",gb,eb);aa("W",gb);aa("WW",gb,eb);K(["w","ww","W","WW"],function(R,ca,sa,Ba){ca[Ba.substr(0,1)]=P(R)});y("d",0,"do","day");y("dd",0,0,function(R){return this.localeData().weekdaysMin(this,R)});y("ddd",0,0,function(R){return this.localeData().weekdaysShort(this,
R)});y("dddd",0,0,function(R){return this.localeData().weekdays(this,R)});y("e",0,0,"weekday");y("E",0,0,"isoWeekday");H("day","d");H("weekday","e");H("isoWeekday","E");Za.day=11;Za.weekday=11;Za.isoWeekday=11;aa("d",gb);aa("e",gb);aa("E",gb);aa("dd",function(R,ca){return ca.weekdaysMinRegex(R)});aa("ddd",function(R,ca){return ca.weekdaysShortRegex(R)});aa("dddd",function(R,ca){return ca.weekdaysRegex(R)});K(["dd","ddd","dddd"],function(R,ca,sa,Ba){Ba=sa._locale.weekdaysParse(R,Ba,sa._strict);null!=
Ba?ca.d=Ba:h(sa).invalidWeekday=R});K(["d","e","E"],function(R,ca,sa,Ba){ca[Ba]=P(R)});var Uc="Sun Mon Tue Wed Thu Fri Sat".split(" ");y("H",["HH",2],0,"hour");y("h",["hh",2],0,Fa);y("k",["kk",2],0,function(){return this.hours()||24});y("hmm",0,0,function(){return""+Fa.apply(this)+C(this.minutes(),2)});y("hmmss",0,0,function(){return""+Fa.apply(this)+C(this.minutes(),2)+C(this.seconds(),2)});y("Hmm",0,0,function(){return""+this.hours()+C(this.minutes(),2)});y("Hmmss",0,0,function(){return""+this.hours()+
C(this.minutes(),2)+C(this.seconds(),2)});O("a",!0);O("A",!1);H("hour","h");Za.hour=13;aa("a",ya);aa("A",ya);aa("H",gb);aa("h",gb);aa("k",gb);aa("HH",gb,eb);aa("hh",gb,eb);aa("kk",gb,eb);aa("hmm",tb);aa("hmmss",Vb);aa("Hmm",tb);aa("Hmmss",Vb);N(["H","HH"],Kb);N(["k","kk"],function(R,ca,sa){R=P(R);ca[Kb]=24===R?0:R});N(["a","A"],function(R,ca,sa){sa._isPm=sa._locale.isPM(R);sa._meridiem=R});N(["h","hh"],function(R,ca,sa){ca[Kb]=P(R);h(sa).bigHour=!0});N("hmm",function(R,ca,sa){var Ba=R.length-2;ca[Kb]=
P(R.substr(0,Ba));ca[Zb]=P(R.substr(Ba));h(sa).bigHour=!0});N("hmmss",function(R,ca,sa){var Ba=R.length-4,Va=R.length-2;ca[Kb]=P(R.substr(0,Ba));ca[Zb]=P(R.substr(Ba,2));ca[gc]=P(R.substr(Va));h(sa).bigHour=!0});N("Hmm",function(R,ca,sa){sa=R.length-2;ca[Kb]=P(R.substr(0,sa));ca[Zb]=P(R.substr(sa))});N("Hmmss",function(R,ca,sa){sa=R.length-4;var Ba=R.length-2;ca[Kb]=P(R.substr(0,sa));ca[Zb]=P(R.substr(sa,2));ca[gc]=P(R.substr(Ba))});var ed=J("Hours",!0),Tc={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",
nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",
y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:Mb,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:Uc,meridiemParse:/[ap]\.?m?\.?/i},Ib={},Gc={},Fc,ad=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
bd=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Lb=/Z|[+-]\d\d(?::?\d\d)?/,Qc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",
/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Rc=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ld=/^\/?Date\((-?\d+)/i,cd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,
dd={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};f.createFromInputFallback=w("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(R){R._d=new Date(R._i+(R._useUTC?" UTC":""))});f.ISO_8601=function(){};f.RFC_2822=function(){};
var pd=w("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var R=Ua.apply(null,arguments);return this.isValid()&&R.isValid()?R<this?this:R:r()}),fd=w("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var R=Ua.apply(null,arguments);return this.isValid()&&R.isValid()?R>this?this:R:r()}),Lc="year quarter month week day hour minute second millisecond".split(" ");qb("Z",":");qb("ZZ",
"");aa("Z",lc);aa("ZZ",lc);N(["Z","ZZ"],function(R,ca,sa){sa._useUTC=!0;sa._tzm=ob(lc,R)});var md=/([\+\-]|\d\d)/gi;f.updateOffset=function(){};var nd=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,od=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;yb.fn=ab.prototype;yb.invalid=function(){return yb(NaN)};var mc=Sb(1,"add"),nc=Sb(-1,"subtract");f.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";
f.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Xc=w("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(R){return void 0===R?this.localeData():this.locale(R)});y("N",0,0,"eraAbbr");y("NN",0,0,"eraAbbr");y("NNN",0,0,"eraAbbr");y("NNNN",0,0,"eraName");y("NNNNN",0,0,"eraNarrow");y("y",["y",1],"yo","eraYear");y("y",["yy",2],0,"eraYear");y("y",["yyy",3],0,"eraYear");y("y",["yyyy",4],0,"eraYear");aa("N",
ic);aa("NN",ic);aa("NNN",ic);aa("NNNN",function(R,ca){return ca.erasNameRegex(R)});aa("NNNNN",function(R,ca){return ca.erasNarrowRegex(R)});N(["N","NN","NNN","NNNN","NNNNN"],function(R,ca,sa,Ba){(ca=sa._locale.erasParse(R,Ba,sa._strict))?h(sa).era=ca:h(sa).invalidEra=R});aa("y",Bb);aa("yy",Bb);aa("yyy",Bb);aa("yyyy",Bb);aa("yo",function(R,ca){return ca._eraYearOrdinalRegex||Bb});N(["y","yy","yyy","yyyy"],Wb);N(["yo"],function(R,ca,sa,Ba){var Va;sa._locale._eraYearOrdinalRegex&&(Va=R.match(sa._locale._eraYearOrdinalRegex));
ca[Wb]=sa._locale.eraYearOrdinalParse?sa._locale.eraYearOrdinalParse(R,Va):parseInt(R,10)});y(0,["gg",2],0,function(){return this.weekYear()%100});y(0,["GG",2],0,function(){return this.isoWeekYear()%100});yc("gggg","weekYear");yc("ggggg","weekYear");yc("GGGG","isoWeekYear");yc("GGGGG","isoWeekYear");H("weekYear","gg");H("isoWeekYear","GG");Za.weekYear=1;Za.isoWeekYear=1;aa("G",jc);aa("g",jc);aa("GG",gb,eb);aa("gg",gb,eb);aa("GGGG",Cc,db);aa("gggg",Cc,db);aa("GGGGG",Bc,mb);aa("ggggg",Bc,mb);K(["gggg",
"ggggg","GGGG","GGGGG"],function(R,ca,sa,Ba){ca[Ba.substr(0,2)]=P(R)});K(["gg","GG"],function(R,ca,sa,Ba){ca[Ba]=f.parseTwoDigitYear(R)});y("Q",0,"Qo","quarter");H("quarter","Q");Za.quarter=7;aa("Q",cb);N("Q",function(R,ca){ca[sc]=3*(P(R)-1)});y("D",["DD",2],"Do","date");H("date","D");Za.date=9;aa("D",gb);aa("DD",gb,eb);aa("Do",function(R,ca){return R?ca._dayOfMonthOrdinalParse||ca._ordinalParse:ca._dayOfMonthOrdinalParseLenient});N(["D","DD"],fc);N("Do",function(R,ca){ca[fc]=P(R.match(gb)[0])});
var Yc=J("Date",!0);y("DDD",["DDDD",3],"DDDo","dayOfYear");H("dayOfYear","DDD");Za.dayOfYear=4;aa("DDD",Ac);aa("DDDD",nb);N(["DDD","DDDD"],function(R,ca,sa){sa._dayOfYear=P(R)});y("m",["mm",2],0,"minute");H("minute","m");Za.minute=14;aa("m",gb);aa("mm",gb,eb);N(["m","mm"],Zb);var Zc=J("Minutes",!1);y("s",["ss",2],0,"second");H("second","s");Za.second=15;aa("s",gb);aa("ss",gb,eb);N(["s","ss"],gc);var gd=J("Seconds",!1);y("S",0,0,function(){return~~(this.millisecond()/100)});y(0,["SS",2],0,function(){return~~(this.millisecond()/
10)});y(0,["SSS",3],0,"millisecond");y(0,["SSSS",4],0,function(){return 10*this.millisecond()});y(0,["SSSSS",5],0,function(){return 100*this.millisecond()});y(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});y(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});y(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});y(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});H("millisecond","ms");Za.millisecond=16;aa("S",Ac,cb);aa("SS",Ac,eb);aa("SSS",Ac,nb);var pc;
for(pc="SSSS";9>=pc.length;pc+="S")aa(pc,Bb);for(pc="S";9>=pc.length;pc+="S")N(pc,Mc);var qd=J("Milliseconds",!1);y("z",0,0,"zoneAbbr");y("zz",0,0,"zoneName");var hb=g.prototype;hb.add=mc;hb.calendar=function(R,ca){if(1===arguments.length)if(arguments[0]){var sa=arguments[0],Ba;if(!(Ba=b(sa)||d(sa)||Hb(sa)||t(sa)||Nb(sa))){Ba=l(sa)&&!c(sa);var Va=!1,bb="years year y months month M days day d dates date D hours hour h minutes minute m seconds second s milliseconds millisecond ms".split(" "),ib,rb=
bb.length;for(ib=0;ib<rb;ib+=1){var vb=bb[ib];Va=Va||e(sa,vb)}Ba=Ba&&Va}if(Ba||null===sa||void 0===sa)R=arguments[0],ca=void 0;else{sa=arguments[0];Ba=l(sa)&&!c(sa);Va=!1;bb="sameDay nextDay lastDay nextWeek lastWeek sameElse".split(" ");for(ib=0;ib<bb.length;ib+=1)vb=bb[ib],Va=Va||e(sa,vb);Ba&&Va&&(ca=arguments[0],R=void 0)}}else ca=R=void 0;sa=R||Ua();Ba=wb(sa,this).startOf("day");Ba=f.calendarFormat(this,Ba)||"sameElse";Va=ca&&(z(ca[Ba])?ca[Ba].call(this,sa):ca[Ba]);return this.format(Va||this.localeData().calendar(Ba,
this,Ua(sa)))};hb.clone=function(){return new g(this)};hb.diff=function(R,ca,sa){if(!this.isValid())return NaN;R=wb(R,this);if(!R.isValid())return NaN;var Ba=6E4*(R.utcOffset()-this.utcOffset());ca=L(ca);switch(ca){case "year":ca=$b(this,R)/12;break;case "month":ca=$b(this,R);break;case "quarter":ca=$b(this,R)/3;break;case "second":ca=(this-R)/1E3;break;case "minute":ca=(this-R)/6E4;break;case "hour":ca=(this-R)/36E5;break;case "day":ca=(this-R-Ba)/864E5;break;case "week":ca=(this-R-Ba)/6048E5;break;
default:ca=this-R}return sa?ca:I(ca)};hb.endOf=function(R){R=L(R);if(void 0===R||"millisecond"===R||!this.isValid())return this;var ca=this._isUTC?hc:wc;switch(R){case "year":var sa=ca(this.year()+1,0,1)-1;break;case "quarter":sa=ca(this.year(),this.month()-this.month()%3+3,1)-1;break;case "month":sa=ca(this.year(),this.month()+1,1)-1;break;case "week":sa=ca(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case "isoWeek":sa=ca(this.year(),this.month(),this.date()-(this.isoWeekday()-
1)+7)-1;break;case "day":case "date":sa=ca(this.year(),this.month(),this.date()+1)-1;break;case "hour":sa=this._d.valueOf();sa+=36E5-Ub(sa+(this._isUTC?0:6E4*this.utcOffset()),36E5)-1;break;case "minute":sa=this._d.valueOf();sa+=6E4-Ub(sa,6E4)-1;break;case "second":sa=this._d.valueOf(),sa+=1E3-Ub(sa,1E3)-1}this._d.setTime(sa);f.updateOffset(this,!0);return this};hb.format=function(R){R||(R=this.isUtc()?f.defaultFormatUtc:f.defaultFormat);R=G(this,R);return this.localeData().postformat(R)};hb.from=
function(R,ca){return this.isValid()&&(b(R)&&R.isValid()||Ua(R).isValid())?yb({to:this,from:R}).locale(this.locale()).humanize(!ca):this.localeData().invalidDate()};hb.fromNow=function(R){return this.from(Ua(),R)};hb.to=function(R,ca){return this.isValid()&&(b(R)&&R.isValid()||Ua(R).isValid())?yb({from:this,to:R}).locale(this.locale()).humanize(!ca):this.localeData().invalidDate()};hb.toNow=function(R){return this.to(Ua(),R)};hb.get=function(R){R=L(R);return z(this[R])?this[R]():this};hb.invalidAt=
function(){return h(this).overflow};hb.isAfter=function(R,ca){R=b(R)?R:Ua(R);if(!this.isValid()||!R.isValid())return!1;ca=L(ca)||"millisecond";return"millisecond"===ca?this.valueOf()>R.valueOf():R.valueOf()<this.clone().startOf(ca).valueOf()};hb.isBefore=function(R,ca){R=b(R)?R:Ua(R);if(!this.isValid()||!R.isValid())return!1;ca=L(ca)||"millisecond";return"millisecond"===ca?this.valueOf()<R.valueOf():this.clone().endOf(ca).valueOf()<R.valueOf()};hb.isBetween=function(R,ca,sa,Ba){R=b(R)?R:Ua(R);ca=
b(ca)?ca:Ua(ca);if(!(this.isValid()&&R.isValid()&&ca.isValid()))return!1;Ba=Ba||"()";return("("===Ba[0]?this.isAfter(R,sa):!this.isBefore(R,sa))&&(")"===Ba[1]?this.isBefore(ca,sa):!this.isAfter(ca,sa))};hb.isSame=function(R,ca){R=b(R)?R:Ua(R);if(!this.isValid()||!R.isValid())return!1;ca=L(ca)||"millisecond";if("millisecond"===ca)return this.valueOf()===R.valueOf();R=R.valueOf();return this.clone().startOf(ca).valueOf()<=R&&R<=this.clone().endOf(ca).valueOf()};hb.isSameOrAfter=function(R,ca){return this.isSame(R,
ca)||this.isAfter(R,ca)};hb.isSameOrBefore=function(R,ca){return this.isSame(R,ca)||this.isBefore(R,ca)};hb.isValid=function(){return n(this)};hb.lang=Xc;hb.locale=Ob;hb.localeData=bc;hb.max=fd;hb.min=pd;hb.parsingFlags=function(){return m({},h(this))};hb.set=function(R,ca){if("object"===typeof R){R=M(R);ca=Q(R);var sa,Ba=ca.length;for(sa=0;sa<Ba;sa++)this[ca[sa].unit](R[ca[sa].unit])}else if(R=L(R),z(this[R]))return this[R](ca);return this};hb.startOf=function(R){R=L(R);if(void 0===R||"millisecond"===
R||!this.isValid())return this;var ca=this._isUTC?hc:wc;switch(R){case "year":var sa=ca(this.year(),0,1);break;case "quarter":sa=ca(this.year(),this.month()-this.month()%3,1);break;case "month":sa=ca(this.year(),this.month(),1);break;case "week":sa=ca(this.year(),this.month(),this.date()-this.weekday());break;case "isoWeek":sa=ca(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case "day":case "date":sa=ca(this.year(),this.month(),this.date());break;case "hour":sa=this._d.valueOf();
sa-=Ub(sa+(this._isUTC?0:6E4*this.utcOffset()),36E5);break;case "minute":sa=this._d.valueOf();sa-=Ub(sa,6E4);break;case "second":sa=this._d.valueOf(),sa-=Ub(sa,1E3)}this._d.setTime(sa);f.updateOffset(this,!0);return this};hb.subtract=nc;hb.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};hb.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),
milliseconds:this.milliseconds()}};hb.toDate=function(){return new Date(this.valueOf())};hb.toISOString=function(R){if(!this.isValid())return null;var ca=(R=!0!==R)?this.clone().utc():this;return 0>ca.year()||9999<ca.year()?G(ca,R?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):z(Date.prototype.toISOString)?R?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",G(ca,"Z")):G(ca,R?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};
hb.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var R="moment",ca="";this.isLocal()||(R=0===this.utcOffset()?"moment.utc":"moment.parseZone",ca="Z");R="["+R+'("]';var sa=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(R+sa+"-MM-DD[T]HH:mm:ss.SSS"+(ca+'[")]'))};"undefined"!==typeof Symbol&&null!=Symbol.for&&(hb[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment\x3c"+this.format()+"\x3e"});hb.toJSON=function(){return this.isValid()?
this.toISOString():null};hb.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};hb.unix=function(){return Math.floor(this.valueOf()/1E3)};hb.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};hb.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};hb.eraName=function(){var R,ca=this.localeData().eras();var sa=0;for(R=ca.length;sa<R;++sa){var Ba=this.clone().startOf("day").valueOf();
if(ca[sa].since<=Ba&&Ba<=ca[sa].until||ca[sa].until<=Ba&&Ba<=ca[sa].since)return ca[sa].name}return""};hb.eraNarrow=function(){var R,ca=this.localeData().eras();var sa=0;for(R=ca.length;sa<R;++sa){var Ba=this.clone().startOf("day").valueOf();if(ca[sa].since<=Ba&&Ba<=ca[sa].until||ca[sa].until<=Ba&&Ba<=ca[sa].since)return ca[sa].narrow}return""};hb.eraAbbr=function(){var R,ca=this.localeData().eras();var sa=0;for(R=ca.length;sa<R;++sa){var Ba=this.clone().startOf("day").valueOf();if(ca[sa].since<=
Ba&&Ba<=ca[sa].until||ca[sa].until<=Ba&&Ba<=ca[sa].since)return ca[sa].abbr}return""};hb.eraYear=function(){var R,ca=this.localeData().eras();var sa=0;for(R=ca.length;sa<R;++sa){var Ba=ca[sa].since<=ca[sa].until?1:-1;var Va=this.clone().startOf("day").valueOf();if(ca[sa].since<=Va&&Va<=ca[sa].until||ca[sa].until<=Va&&Va<=ca[sa].since)return(this.year()-f(ca[sa].since).year())*Ba+ca[sa].offset}return this.year()};hb.year=ec;hb.isLeapYear=function(){return S(this.year())};hb.weekYear=function(R){return Hc.call(this,
R,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};hb.isoWeekYear=function(R){return Hc.call(this,R,this.isoWeek(),this.isoWeekday(),1,4)};hb.quarter=hb.quarters=function(R){return null==R?Math.ceil((this.month()+1)/3):this.month(3*(R-1)+this.month()%3)};hb.month=fa;hb.daysInMonth=function(){return W(this.year(),this.month())};hb.week=hb.weeks=function(R){var ca=this.localeData().week(this);return null==R?ca:this.add(7*(R-ca),"d")};hb.isoWeek=hb.isoWeeks=function(R){var ca=
Ga(this,1,4).week;return null==R?ca:this.add(7*(R-ca),"d")};hb.weeksInYear=function(){var R=this.localeData()._week;return ba(this.year(),R.dow,R.doy)};hb.weeksInWeekYear=function(){var R=this.localeData()._week;return ba(this.weekYear(),R.dow,R.doy)};hb.isoWeeksInYear=function(){return ba(this.year(),1,4)};hb.isoWeeksInISOWeekYear=function(){return ba(this.isoWeekYear(),1,4)};hb.date=Yc;hb.day=hb.days=function(R){if(!this.isValid())return null!=R?this:NaN;var ca=this._isUTC?this._d.getUTCDay():this._d.getDay();
if(null!=R){var sa=this.localeData();"string"===typeof R&&(isNaN(R)?(R=sa.weekdaysParse(R),R="number"===typeof R?R:null):R=parseInt(R,10));return this.add(R-ca,"d")}return ca};hb.weekday=function(R){if(!this.isValid())return null!=R?this:NaN;var ca=(this.day()+7-this.localeData()._week.dow)%7;return null==R?ca:this.add(R-ca,"d")};hb.isoWeekday=function(R){if(!this.isValid())return null!=R?this:NaN;if(null!=R){var ca=this.localeData();R="string"===typeof R?ca.weekdaysParse(R)%7||7:isNaN(R)?null:R;
return this.day(this.day()%7?R:R-7)}return this.day()||7};hb.dayOfYear=function(R){var ca=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==R?ca:this.add(R-ca,"d")};hb.hour=hb.hours=ed;hb.minute=hb.minutes=Zc;hb.second=hb.seconds=gd;hb.millisecond=hb.milliseconds=qd;hb.utcOffset=function(R,ca,sa){var Ba=this._offset||0,Va;if(!this.isValid())return null!=R?this:NaN;if(null!=R){if("string"===typeof R){if(R=ob(lc,R),null===R)return this}else 16>Math.abs(R)&&
!sa&&(R*=60);!this._isUTC&&ca&&(Va=-Math.round(this._d.getTimezoneOffset()));this._offset=R;this._isUTC=!0;null!=Va&&this.add(Va,"m");Ba!==R&&(!ca||this._changeInProgress?Eb(this,yb(R-Ba,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,f.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?Ba:-Math.round(this._d.getTimezoneOffset())};hb.utc=function(R){return this.utcOffset(0,R)};hb.local=function(R){this._isUTC&&(this.utcOffset(0,R),this._isUTC=!1,R&&this.subtract(-Math.round(this._d.getTimezoneOffset()),
"m"));return this};hb.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var R=ob(kc,this._i);null!=R?this.utcOffset(R):this.utcOffset(0,!0)}return this};hb.hasAlignedHourOffset=function(R){if(!this.isValid())return!1;R=R?Ua(R).utcOffset():0;return 0===(this.utcOffset()-R)%60};hb.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};hb.isLocal=function(){return this.isValid()?
!this._isUTC:!1};hb.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};hb.isUtc=Gb;hb.isUTC=Gb;hb.zoneAbbr=function(){return this._isUTC?"UTC":""};hb.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};hb.dates=w("dates accessor is deprecated. Use date instead.",Yc);hb.months=w("months accessor is deprecated. Use month instead",fa);hb.years=w("years accessor is deprecated. Use year instead",ec);hb.zone=w("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",
function(R,ca){return null!=R?("string"!==typeof R&&(R=-R),this.utcOffset(R,ca),this):-this.utcOffset()});hb.isDSTShifted=w("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!u(this._isDSTShifted))return this._isDSTShifted;var R={};k(R,this);R=Ja(R);if(R._a){var ca=R._isUTC?a(R._a):Ua(R._a);var sa;if(sa=this.isValid()){R=R._a;ca=ca.toArray();sa=Math.min(R.length,ca.length);var Ba=Math.abs(R.length-ca.length),Va=0,bb;for(bb=0;bb<
sa;bb++)P(R[bb])!==P(ca[bb])&&Va++;sa=0<Va+Ba}this._isDSTShifted=sa}else this._isDSTShifted=!1;return this._isDSTShifted});var Cb=E.prototype;Cb.calendar=function(R,ca,sa){R=this._calendar[R]||this._calendar.sameElse;return z(R)?R.call(ca,sa):R};Cb.longDateFormat=function(R){var ca=this._longDateFormat[R],sa=this._longDateFormat[R.toUpperCase()];if(ca||!sa)return ca;this._longDateFormat[R]=sa.match(Ka).map(function(Ba){return"MMMM"===Ba||"MM"===Ba||"DD"===Ba||"dddd"===Ba?Ba.slice(1):Ba}).join("");
return this._longDateFormat[R]};Cb.invalidDate=function(){return this._invalidDate};Cb.ordinal=function(R){return this._ordinal.replace("%d",R)};Cb.preparse=Ic;Cb.postformat=Ic;Cb.relativeTime=function(R,ca,sa,Ba){var Va=this._relativeTime[sa];return z(Va)?Va(R,ca,sa,Ba):Va.replace(/%d/i,R)};Cb.pastFuture=function(R,ca){R=this._relativeTime[0<R?"future":"past"];return z(R)?R(ca):R.replace(/%s/i,ca)};Cb.set=function(R){var ca;for(ca in R)if(e(R,ca)){var sa=R[ca];z(sa)?this[ca]=sa:this["_"+ca]=sa}this._config=
R;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};Cb.eras=function(R,ca){var sa=this._eras||Ca("en")._eras;R=0;for(ca=sa.length;R<ca;++R){switch(typeof sa[R].since){case "string":var Ba=f(sa[R].since).startOf("day");sa[R].since=Ba.valueOf()}switch(typeof sa[R].until){case "undefined":sa[R].until=Infinity;break;case "string":Ba=f(sa[R].until).startOf("day").valueOf(),sa[R].until=Ba.valueOf()}}return sa};Cb.erasParse=
function(R,ca,sa){var Ba,Va=this.eras();R=R.toUpperCase();var bb=0;for(Ba=Va.length;bb<Ba;++bb){var ib=Va[bb].name.toUpperCase();var rb=Va[bb].abbr.toUpperCase();var vb=Va[bb].narrow.toUpperCase();if(sa)switch(ca){case "N":case "NN":case "NNN":if(rb===R)return Va[bb];break;case "NNNN":if(ib===R)return Va[bb];break;case "NNNNN":if(vb===R)return Va[bb]}else if(0<=[ib,rb,vb].indexOf(R))return Va[bb]}};Cb.erasConvertYear=function(R,ca){var sa=R.since<=R.until?1:-1;return void 0===ca?f(R.since).year():
f(R.since).year()+(ca-R.offset)*sa};Cb.erasAbbrRegex=function(R){e(this,"_erasAbbrRegex")||xc.call(this);return R?this._erasAbbrRegex:this._erasRegex};Cb.erasNameRegex=function(R){e(this,"_erasNameRegex")||xc.call(this);return R?this._erasNameRegex:this._erasRegex};Cb.erasNarrowRegex=function(R){e(this,"_erasNarrowRegex")||xc.call(this);return R?this._erasNarrowRegex:this._erasRegex};Cb.months=function(R,ca){return R?B(this._months)?this._months[R.month()]:this._months[(this._months.isFormat||Sc).test(ca)?
"format":"standalone"][R.month()]:B(this._months)?this._months:this._months.standalone};Cb.monthsShort=function(R,ca){return R?B(this._monthsShort)?this._monthsShort[R.month()]:this._monthsShort[Sc.test(ca)?"format":"standalone"][R.month()]:B(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};Cb.monthsParse=function(R,ca,sa){var Ba;if(this._monthsParseExact){a:{R=R.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],
Ba=0;12>Ba;++Ba){var Va=a([2E3,Ba]);this._shortMonthsParse[Ba]=this.monthsShort(Va,"").toLocaleLowerCase();this._longMonthsParse[Ba]=this.months(Va,"").toLocaleLowerCase()}if(sa)ca="MMM"===ca?Rb.call(this._shortMonthsParse,R):Rb.call(this._longMonthsParse,R);else if("MMM"===ca){ca=Rb.call(this._shortMonthsParse,R);if(-1!==ca)break a;ca=Rb.call(this._longMonthsParse,R)}else{ca=Rb.call(this._longMonthsParse,R);if(-1!==ca)break a;ca=Rb.call(this._shortMonthsParse,R)}ca=-1!==ca?ca:null}return ca}this._monthsParse||
(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(Ba=0;12>Ba;Ba++)if(Va=a([2E3,Ba]),sa&&!this._longMonthsParse[Ba]&&(this._longMonthsParse[Ba]=new RegExp("^"+this.months(Va,"").replace(".","")+"$","i"),this._shortMonthsParse[Ba]=new RegExp("^"+this.monthsShort(Va,"").replace(".","")+"$","i")),sa||this._monthsParse[Ba]||(Va="^"+this.months(Va,"")+"|^"+this.monthsShort(Va,""),this._monthsParse[Ba]=new RegExp(Va.replace(".",""),"i")),sa&&"MMMM"===ca&&this._longMonthsParse[Ba].test(R)||
sa&&"MMM"===ca&&this._shortMonthsParse[Ba].test(R)||!sa&&this._monthsParse[Ba].test(R))return Ba};Cb.monthsRegex=function(R){if(this._monthsParseExact)return e(this,"_monthsRegex")||ha.call(this),R?this._monthsStrictRegex:this._monthsRegex;e(this,"_monthsRegex")||(this._monthsRegex=Pc);return this._monthsStrictRegex&&R?this._monthsStrictRegex:this._monthsRegex};Cb.monthsShortRegex=function(R){if(this._monthsParseExact)return e(this,"_monthsRegex")||ha.call(this),R?this._monthsShortStrictRegex:this._monthsShortRegex;
e(this,"_monthsShortRegex")||(this._monthsShortRegex=Pc);return this._monthsShortStrictRegex&&R?this._monthsShortStrictRegex:this._monthsShortRegex};Cb.week=function(R){return Ga(R,this._week.dow,this._week.doy).week};Cb.firstDayOfYear=function(){return this._week.doy};Cb.firstDayOfWeek=function(){return this._week.dow};Cb.weekdays=function(R,ca){ca=B(this._weekdays)?this._weekdays:this._weekdays[R&&!0!==R&&this._weekdays.isFormat.test(ca)?"format":"standalone"];return!0===R?ia(ca,this._week.dow):
R?ca[R.day()]:ca};Cb.weekdaysMin=function(R){return!0===R?ia(this._weekdaysMin,this._week.dow):R?this._weekdaysMin[R.day()]:this._weekdaysMin};Cb.weekdaysShort=function(R){return!0===R?ia(this._weekdaysShort,this._week.dow):R?this._weekdaysShort[R.day()]:this._weekdaysShort};Cb.weekdaysParse=function(R,ca,sa){var Ba;if(this._weekdaysParseExact)return wa.call(this,R,ca,sa);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);
for(Ba=0;7>Ba;Ba++){var Va=a([2E3,1]).day(Ba);sa&&!this._fullWeekdaysParse[Ba]&&(this._fullWeekdaysParse[Ba]=new RegExp("^"+this.weekdays(Va,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[Ba]=new RegExp("^"+this.weekdaysShort(Va,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[Ba]=new RegExp("^"+this.weekdaysMin(Va,"").replace(".","\\.?")+"$","i"));this._weekdaysParse[Ba]||(Va="^"+this.weekdays(Va,"")+"|^"+this.weekdaysShort(Va,"")+"|^"+this.weekdaysMin(Va,""),this._weekdaysParse[Ba]=
new RegExp(Va.replace(".",""),"i"));if(sa&&"dddd"===ca&&this._fullWeekdaysParse[Ba].test(R)||sa&&"ddd"===ca&&this._shortWeekdaysParse[Ba].test(R)||sa&&"dd"===ca&&this._minWeekdaysParse[Ba].test(R)||!sa&&this._weekdaysParse[Ba].test(R))return Ba}};Cb.weekdaysRegex=function(R){if(this._weekdaysParseExact)return e(this,"_weekdaysRegex")||Aa.call(this),R?this._weekdaysStrictRegex:this._weekdaysRegex;e(this,"_weekdaysRegex")||(this._weekdaysRegex=Pc);return this._weekdaysStrictRegex&&R?this._weekdaysStrictRegex:
this._weekdaysRegex};Cb.weekdaysShortRegex=function(R){if(this._weekdaysParseExact)return e(this,"_weekdaysRegex")||Aa.call(this),R?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;e(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Pc);return this._weekdaysShortStrictRegex&&R?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};Cb.weekdaysMinRegex=function(R){if(this._weekdaysParseExact)return e(this,"_weekdaysRegex")||Aa.call(this),R?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;
e(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Pc);return this._weekdaysMinStrictRegex&&R?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};Cb.isPM=function(R){return"p"===(R+"").toLowerCase().charAt(0)};Cb.meridiem=function(R,ca,sa){return 11<R?sa?"pm":"PM":sa?"am":"AM"};Oa("en",{eras:[{since:"0001-01-01",until:Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,
ordinal:function(R){var ca=R%10;ca=1===P(R%100/10)?"th":1===ca?"st":2===ca?"nd":3===ca?"rd":"th";return R+ca}});f.lang=w("moment.lang is deprecated. Use moment.locale instead.",Oa);f.langData=w("moment.langData is deprecated. Use moment.localeData instead.",Ca);var uc=Math.abs,rd=dc("ms"),sd=dc("s"),td=dc("m"),ud=dc("h"),vd=dc("d"),wd=dc("w"),xd=dc("M"),yd=dc("Q"),zd=dc("y"),Ad=Yb("milliseconds"),Bd=Yb("seconds"),hd=Yb("minutes"),Cd=Yb("hours"),Dd=Yb("days"),Ed=Yb("months"),Fd=Yb("years"),vc=Math.round,
Jc={ss:44,s:45,m:45,h:22,d:26,w:null,M:11},Wc=Math.abs,Ab=ab.prototype;Ab.isValid=function(){return this._isValid};Ab.abs=function(){var R=this._data;this._milliseconds=uc(this._milliseconds);this._days=uc(this._days);this._months=uc(this._months);R.milliseconds=uc(R.milliseconds);R.seconds=uc(R.seconds);R.minutes=uc(R.minutes);R.hours=uc(R.hours);R.months=uc(R.months);R.years=uc(R.years);return this};Ab.add=function(R,ca){return Nc(this,R,ca,1)};Ab.subtract=function(R,ca){return Nc(this,R,ca,-1)};
Ab.as=function(R){if(!this.isValid())return NaN;var ca=this._milliseconds;R=L(R);if("month"===R||"quarter"===R||"year"===R){var sa=this._days+ca/864E5;sa=this._months+4800*sa/146097;switch(R){case "month":return sa;case "quarter":return sa/3;case "year":return sa/12}}else switch(sa=this._days+Math.round(146097*this._months/4800),R){case "week":return sa/7+ca/6048E5;case "day":return sa+ca/864E5;case "hour":return 24*sa+ca/36E5;case "minute":return 1440*sa+ca/6E4;case "second":return 86400*sa+ca/1E3;
case "millisecond":return Math.floor(864E5*sa)+ca;default:throw Error("Unknown unit "+R);}};Ab.asMilliseconds=rd;Ab.asSeconds=sd;Ab.asMinutes=td;Ab.asHours=ud;Ab.asDays=vd;Ab.asWeeks=wd;Ab.asMonths=xd;Ab.asQuarters=yd;Ab.asYears=zd;Ab.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*P(this._months/12):NaN};Ab._bubble=function(){var R=this._milliseconds,ca=this._days,sa=this._months,Ba=this._data;0<=R&&0<=ca&&0<=sa||0>=R&&0>=ca&&0>=sa||(R+=
864E5*cc(146097*sa/4800+ca),sa=ca=0);Ba.milliseconds=R%1E3;R=I(R/1E3);Ba.seconds=R%60;R=I(R/60);Ba.minutes=R%60;R=I(R/60);Ba.hours=R%24;ca+=I(R/24);R=I(4800*ca/146097);sa+=R;ca-=cc(146097*R/4800);R=I(sa/12);Ba.days=ca;Ba.months=sa%12;Ba.years=R;return this};Ab.clone=function(){return yb(this)};Ab.get=function(R){R=L(R);return this.isValid()?this[R+"s"]():NaN};Ab.milliseconds=Ad;Ab.seconds=Bd;Ab.minutes=hd;Ab.hours=Cd;Ab.days=Dd;Ab.weeks=function(){return I(this.days()/7)};Ab.months=Ed;Ab.years=Fd;
Ab.humanize=function(R,ca){if(!this.isValid())return this.localeData().invalidDate();var sa=!1,Ba=Jc;"object"===typeof R&&(ca=R,R=!1);"boolean"===typeof R&&(sa=R);"object"===typeof ca&&(Ba=Object.assign({},Jc,ca),null!=ca.s&&null==ca.ss&&(Ba.ss=ca.s-1));R=this.localeData();ca=!sa;var Va=yb(this).abs(),bb=vc(Va.as("s")),ib=vc(Va.as("m")),rb=vc(Va.as("h")),vb=vc(Va.as("d")),sb=vc(Va.as("M")),Fb=vc(Va.as("w"));Va=vc(Va.as("y"));bb=bb<=Ba.ss&&["s",bb]||bb<Ba.s&&["ss",bb]||1>=ib&&["m"]||ib<Ba.m&&["mm",
ib]||1>=rb&&["h"]||rb<Ba.h&&["hh",rb]||1>=vb&&["d"]||vb<Ba.d&&["dd",vb];null!=Ba.w&&(bb=bb||1>=Fb&&["w"]||Fb<Ba.w&&["ww",Fb]);bb=bb||1>=sb&&["M"]||sb<Ba.M&&["MM",sb]||1>=Va&&["y"]||["yy",Va];bb[2]=ca;bb[3]=0<+this;bb[4]=R;ca=Oc.apply(null,bb);sa&&(ca=R.pastFuture(+this,ca));return R.postformat(ca)};Ab.toISOString=ac;Ab.toString=ac;Ab.toJSON=ac;Ab.locale=Ob;Ab.localeData=bc;Ab.toIsoString=w("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ac);Ab.lang=Xc;y("X",0,
0,"unix");y("x",0,0,"valueOf");aa("x",jc);aa("X",/[+-]?\d+(\.\d{1,3})?/);N("X",function(R,ca,sa){sa._d=new Date(1E3*parseFloat(R))});N("x",function(R,ca,sa){sa._d=new Date(P(R))});f.version="2.29.4";var id=Ua;f.fn=hb;f.min=function(){var R=[].slice.call(arguments,0);return Ta("isBefore",R)};f.max=function(){var R=[].slice.call(arguments,0);return Ta("isAfter",R)};f.now=function(){return Date.now?Date.now():+new Date};f.utc=a;f.unix=function(R){return Ua(1E3*R)};f.months=function(R,ca){return tc(R,
ca,"months")};f.isDate=d;f.locale=Oa;f.invalid=r;f.duration=yb;f.isMoment=b;f.weekdays=function(R,ca,sa){return Xb(R,ca,sa,"weekdays")};f.parseZone=function(){return Ua.apply(null,arguments).parseZone()};f.localeData=Ca;f.isDuration=fb;f.monthsShort=function(R,ca){return tc(R,ca,"monthsShort")};f.weekdaysMin=function(R,ca,sa){return Xb(R,ca,sa,"weekdaysMin")};f.defineLocale=Na;f.updateLocale=function(R,ca){if(null!=ca){var sa=Tc;if(null!=Ib[R]&&null!=Ib[R].parentLocale)Ib[R].set(D(Ib[R]._config,ca));
else{var Ba=ea(R);null!=Ba&&(sa=Ba._config);ca=D(sa,ca);null==Ba&&(ca.abbr=R);ca=new E(ca);ca.parentLocale=Ib[R];Ib[R]=ca}Oa(R)}else null!=Ib[R]&&(null!=Ib[R].parentLocale?(Ib[R]=Ib[R].parentLocale,R===Oa()&&Oa(R)):null!=Ib[R]&&delete Ib[R]);return Ib[R]};f.locales=function(){return Sa(Ib)};f.weekdaysShort=function(R,ca,sa){return Xb(R,ca,sa,"weekdaysShort")};f.normalizeUnits=L;f.relativeTimeRounding=function(R){return void 0===R?vc:"function"===typeof R?(vc=R,!0):!1};f.relativeTimeThreshold=function(R,
ca){if(void 0===Jc[R])return!1;if(void 0===ca)return Jc[R];Jc[R]=ca;"s"===R&&(Jc.ss=ca-1);return!0};f.calendarFormat=function(R,ca){R=R.diff(ca,"days",!0);return-6>R?"sameElse":-1>R?"lastWeek":0>R?"lastDay":1>R?"sameDay":2>R?"nextDay":7>R?"nextWeek":"sameElse"};f.prototype=hb;f.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",
MONTH:"YYYY-MM"};return f})},"arcgisonline/pages/utils/queryHandler":function(){define(["require","exports"],function(f,B){Object.defineProperty(B,"__esModule",{value:!0});B.queryToObject=B.objectToQuery=void 0;B.objectToQuery=function(l){var e=new URLSearchParams,c=function(d,q){void 0!==q&&null!==q&&(Array.isArray(q)?0<q.length&&q.forEach(function(m){return e.append(d,m)}):e.append(d,String(q)))},u=0;for(l=Object.entries(l);u<l.length;u++){var t=l[u];c(t[0],t[1])}return e.toString()};B.queryToObject=
function(l,e){l=new URLSearchParams(l);l=Array.from(l.entries());if(e){for(var c={},u=0;u<l.length;u++){var t=l[u];e=t[0];t=t[1];var d=c[e];Array.isArray(d)?d.push(t):c[e]="string"===typeof c[e]?[c[e],t]:t}return c}c={};for(u=0;u<l.length;u++)t=l[u],e=t[0],t=t[1],c[e]=c[e]?c[e]+",".concat(t):t;return c}})},"arcgisonline/pages/utils/formatters":function(){define("require exports tslib ../pageUtil ./arrays ./date ./number ./culture ./icons dojo/i18n!../../nls/arcgisonline dojo/text!../dijit/Card/_Owner.html dojo/text!../dijit/Card/_OwnerVerified.html dojo/string moment/moment ./recycle".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);n=l.__importDefault(n);r=l.__importDefault(r);return function(){function g(){}g.timeFromPresent=function(b){return r.default.utc(b).fromNow()};g.fullDate=function(b){return b&&-1<b?u.default.format(new Date(b),"day-short-month-year"):""};g.timeOnly=function(b){return b&&
-1<b?u.default.format(new Date(b),"short-time"):""};g.dayOfWeek=function(b){return b&&-1<b?u.default.format(new Date(b),"weekday"):""};g.fullDateEnhanced=function(b){var w=(0,r.default)(new Date).diff((0,r.default)(b),"days"),x=(0,r.default)(new Date).isSame(b,"day");return x?m.default.filters.today:!x&&2>w?m.default.myOrganization.membersTab.yesterday:15>w?n.default.substitute(m.default.myOrganization.membersTab.daysAgo,{num:w}):this.fullDate(b)};g.completeDate=function(b){return b&&-1<b?u.default.format(new Date(b),
"long-date-long-time"):""};g.capitalize=function(b){return b.charAt(0).toUpperCase()+b.slice(1)};g.shortenNumber=function(b){return 1E9<=b?"".concat(t.default.format(Math.round(b/1E8)/10)," GB"):1E6<=b?"".concat(t.default.format(Math.round(b/1E5)/10)," MB"):1E3<=b?"".concat(t.default.format(Math.round(b/100)/10)," KB"):"".concat(b," B")};g.empty=function(b){return null!==b&&void 0!==b?b:""};g.hide=function(b){return b?"":"hide"};g.show=function(b){return b?"hide":""};g.firstChar=function(b){var w;
return null!==(w=null===b||void 0===b?void 0:b.charAt(0).toUpperCase())&&void 0!==w?w:""};g.stripHTML=function(b){var w,x;b=(new DOMParser).parseFromString(b,"text/html");return null!==(x=b.body&&(null!==(w=b.body.textContent)&&void 0!==w?w:b.body.innerText))&&void 0!==x?x:""};g.formatCategoryChip=function(b){var w=b;"/"===(null===b||void 0===b?void 0:b[0])&&(w=b.slice(1));return w=w.split("/").join(" / ")};g.lowerCase=function(b){var w;return null!==(w=(null===b||void 0===b?void 0:b.toLowerCase)&&
b.toLowerCase())&&void 0!==w?w:""};g.hyphenate=function(b){return(b||"").replace(/\s+/g,"-")};g.formatDisplayName=function(b,w,x){var z=(null===b||void 0===b?void 0:b.portal)&&b.portal.portalUser&&b.portal.portalUser.userRole,D=b&&(b.isAdminView?z&&z.canUpdateOrgItems():b.canUpdate);z="Data Store"===(null===b||void 0===b?void 0:b.type);b&&D&&w&&!b.isUtilityNetwork&&(b.isHostedService?(w=" (".concat(b.isDataView?m.default.viewsWidget.hostedView:"Feature Service"===b.type?m.default.viewsWidget.hostedData:
m.default.viewsWidget.hostedService,")"),0>x.indexOf(w)&&(x+=w)):b.isLocatorView?(w=" (".concat(m.default.viewsWidget.locatorView,")"),0>x.indexOf(w)&&(x+=w)):b.isPhotoLocations&&(w=" (".concat(m.default.viewsWidget.photoLocations,")"),0>x.indexOf(w)&&(x+=w)));z&&(x=e.default.formatDataStoreItem(x,b.typeKeywords));return x};g.selectTitle=function(b){return b?m.default.GroupWidget.selectTitle.replace("${title}",b):m.default.GroupWidget.selectItem};g.moreOptionsTitle=function(b){return b?m.default.siteHeader.moreOptionsTitle.replace("${title}",
b):m.default.siteHeader.moreOptions};g.formatNumViews=function(b){return t.default.format(null!==b&&void 0!==b?b:0)};g.formatViewsLabel=function(b){b="file"!==b.classification||c.default.includes(b.types,"is-views")||c.default.includes(b.types,"is-pdf")?"viewsColon":"downloadsLbl";return m.default.viewsWidget[b]};g.formatOwnerText=function(b,w,x){var z,D,E;if(w)return null!==(D=null===(z=b.verified)||void 0===z?void 0:z.name)&&void 0!==D?D:b.owner;w=(null===(E=b.verified)||void 0===E?void 0:E.name)&&
b.verified.url;E=n.default.substitute(a.default,{item:b,i18n:m.default});return w?(b=n.default.substitute(h.default,{item:b,i18n:m.default}),x?'\x3cspan class\x3d"js-owner-section inline-block"\x3e'.concat(b.replace("js-owner-section",""),' \x3c/span\x3e\x3cdiv class\x3d"item__managed-by-wrapper"\x3e').concat(m.default.itemProperties.managedByOwner," ").concat(E.replace("js-owner-section",""),"\x3c/div\x3e"):b):E};g.formatRecycleTimeRemaining=function(b){b=new Date(b);b=new Date(b.setDate(b.getDate()+
k.DAYS_IN_RECYCLE_BIN));b=Math.max(Math.ceil((b.valueOf()-Date.now())/864E5),1);return d.default.getString(m.default.recycle.deletes,b,{days:b})};g.getAccess=function(b){return m.default.itemSharingLabel[b]};g.getAccessIcon=function(b){return{private:q.default.lock["16"],shared:q.default.users["16"],org:q.default.organization["16"],public:q.default.globe["16"]}[b]};g.getGroupAccess=function(b){return{public:m.default.groupsPage.everyone,private:m.default.groupsPage.groupMembers,org:m.default.groupsPage.organization}[b]};
g.getGroupAccessIcon=function(b){return{public:q.default.inline.globe["16"],private:q.default.inline.lock["16"],org:q.default.inline.organization["16"]}[b]};return g}()})},"arcgisonline/pages/pageUtil":function(){define("require exports tslib ../esriGeowConfig ../map/core/canUseForPublish ./utils/arrays ./utils/number ./utils/strings ./utils/clone ../sharing/util ../sharing/dijit/dialog/DownloadImageDlg dijit/Dialog dojo/_base/kernel dojo/dom-attr dojo/Deferred dojo/on dojo/hash dojo/string dojo/query dojo/sniff dojo/keys dojo/promise/all esri/lang esri/arcgis/Portal esri/geometry/Point esri/tileUtils esri/urlUtils esri/tasks/Geoprocessor dojo/i18n!../nls/arcgisonline ./utils/queryHandler preact ./components/ConfirmDialog".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E,C,y,v,A,G,F,H,L,M,Q){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);n=l.__importDefault(n);r=l.__importDefault(r);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);w=l.__importDefault(w);x=l.__importDefault(x);z=l.__importDefault(z);D=l.__importDefault(D);E=l.__importDefault(E);
C=l.__importDefault(C);y=l.__importDefault(y);v=l.__importDefault(v);A=l.__importDefault(A);G=l.__importDefault(G);F=l.__importDefault(F);H=l.__importDefault(H);L=l.__importStar(L);Q=l.__importDefault(Q);return function(){function S(){}S.editorDefaults=function(I){return{id:I,"aria-label":I,plugins:["bold","italic","underline","foreColor","hiliteColor","|","justifyLeft","justifyCenter","justifyRight","justifyFull","|","insertOrderedList","insertUnorderedList","|","createEsriLink","unlink","insertEsriImage",
"removeFormat","|","undo","redo","|","viewsourcesanitize","|",{name:"dijit._editor.plugins.FontChoice",command:"fontSize",class:"dijitFontSizeWrap",custom:["2","3","4","5","6"]}],style:"font-family: 'Avenir Next', 'Avenir', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif; font-size: 15px;",height:"140px"}};S.tagDefaults=function(I){return{id:I,minWidth:"100%",maxWidth:"100%"}};S.getQueryParams=function(){return L.queryToObject(window.location.search.slice(1))};S.setQueryParams=function(I,P){S[P?
"pushCurrentLocation":"replaceCurrentLocation"]("".concat(window.location.pathname,"?").concat(L.objectToQuery(I)).concat(window.location.hash))};S.updateQueryParams=function(I,P){S.setQueryParams(l.__assign(l.__assign({},S.getQueryParams()),I),P)};S.removeQueryParams=function(I,P){var J=S.getQueryParams();I.forEach(function(U){return delete J[U]});S.setQueryParams(J,P)};S.clearAllQueryParams=function(){S.setQueryParams({})};S.replaceCurrentLocation=function(I){history&&history.replaceState&&history.replaceState({},
document.title,I)};S.pushCurrentLocation=function(I){null===history||void 0===history?void 0:history.pushState({},document.title,I)};S.applyCSSClassToStringMatch=function(I,P,J){var U=P.indexOf(I),Y=P.slice(0,U),aa=P.slice(U,U+I.length),la=P.slice(U+I.length);return-1<U?0===U?(I=P.slice(0,I.length),'\x3cspan class\x3d"'.concat(J,'"\x3e').concat(I,"\x3c/span\x3e").concat(la)):"".concat(Y,'\x3cspan class\x3d"').concat(J,'"\x3e').concat(aa,"\x3c/span\x3e").concat(la):P};S.isEmptyObject=function(I){for(var P in I)if(Object.prototype.hasOwnProperty.call(I,
P))return!1;return!0};S.isJson=function(I){try{JSON.parse(I)}catch(P){return!1}return!0};S.extentToString=function(I){return I=I instanceof Array&&2===I.length&&2===I[0].length&&2===I[1].length?[I[0].join(","),I[1].join(",")].join():I&&I+""||""};S.getClosestValue=function(I,P,J){return J-I>=P-J?P:I};S.findClosestValue=function(I,P){if(P<=I[0])return I[0];if(P>=I[I.length-1])return I[I.length-1];for(var J=0,U=I.length,Y=0;J<U;){Y=Math.floor((J+U)/2);if(I[Y]===P)break;if(P<I[Y]){if(0<Y&&P>I[Y-1])return S.getClosestValue(I[Y-
1],I[Y],P);U=Y}else{if(Y<I.length-1&&P<I[Y+1])return S.getClosestValue(I[Y],I[Y+1],P);J=Y+1}}return I[Y]};S.isFavorite=function(I){var P=I.portal,J=P.getPortalUser();J=J&&J.favGroupId;var U=new k.default;C.default.isDefined(I.isFavorite)?U.resolve(I.isFavorite):J?(I.isFavorite=!1,P.queryItems('(group:"'.concat(J,'" AND id:"').concat(I.id,'")'),!0).then(function(Y){I.isFavorite=0<(null===Y||void 0===Y?void 0:Y.total);U.resolve(I.isFavorite)},function(){U.resolve(!1)})):(I.isFavorite=!1,U.resolve(!1));
return U};S.isConfigurableApplication=function(I){var P,J=new k.default,U=I.owner,Y=I.itemData||{},aa=-1<(null===(P=I.itemControl)||void 0===P?void 0:P.indexOf("admin"));P=I.typeKeywords||[];var la=P.some(function(T){return T.match(/(sourceId#).*/gi)});C.default.isDefined(I.isConfigurableApp)?J.resolve(I.isConfigurableApp):I.portal.isPortal&&!I.isOwner&&aa&&-1<U.indexOf("esri_")?(I.isConfigurableApp=!1,J.resolve(!1)):I.type&&(0===I.type.indexOf("Hub")&&!["Hub Initiative Template","Hub Event","Hub Project"].includes(I.type)||
"Site Application"===I.type)?(I.isConfigurableApp=I.canUpdate,J.resolve(I.isConfigurableApp)):I.canUpdate&&"Web Mapping Application"===I.type?(I.isConfigurableApp=!1,u.default.includes(P,"WABTemplate")?(I.isConfigurableApp=!1,J.resolve(!1)):u.default.includes(P,"selfConfigured")?(I.isConfigurableApp=Y&&(Y.source||m.default.isHostedTemplateItem(I.url)||!la),J.resolve(I.isConfigurableApp)):u.default.includes(P,"configurableApp")?(I.isConfigurableApp=!0,J.resolve(I.isConfigurableApp)):(null===Y||void 0===
Y?0:Y.source)?(U="".concat(I.portal.url,"content/items/").concat(Y.source,"/data"),m.default.request({url:U}).then(function(T){I.isConfigurableApp=!(null===T||void 0===T||!T.configurationSettings);J.resolve(I.isConfigurableApp)},function(){I.isConfigurableApp=!1;J.resolve(I.isConfigurableApp)})):J.resolve(!1)):(I.isConfigurableApp=!1,J.resolve(!1));return J};S.isFilePublishableByUser=function(I){var P,J,U,Y=new k.default,aa=I.portal,la=aa.getPortalUser(),T=null===la||void 0===la?void 0:la.userRole,
N=aa.supportsHostedServices;la=C.default.isDefined(null===(J=null===(P=aa.helperServices)||void 0===P?void 0:P.rasterAnalytics)||void 0===J?void 0:J.url);P=T&&T.canCreateItem();J=(P=N&&P&&I.isAdmin)&&T.canPublishTiles();N=P&&T.canPublishFeatures();T=P&&T.canPublishScenes();var K=(null===(U=I.resultData)||void 0===U?void 0:U.length)||null;U=aa.isPortal&&P&&la;la=!aa.isPortal||aa.supportsSceneServices;var W=aa.supports3DTilesServices;aa=C.default.isDefined(I.canPublishFile)?I.canPublishFile:!(N&&(u.default.includes(I.types,
"is-feature")||u.default.includes(I.types,"is-featureCollection")&&!K&&!I.isMarkup)||J&&u.default.includes(I.types,"is-tile")||T&&la&&u.default.includes(I.types,"is-scene-package")||J&&u.default.includes(I.types,"is-vector-tile")||U&&u.default.includes(I.types,"is-image-collection")||P&&u.default.includes(I.typeKeywords,"Photo locations")||P&&I.typeKeywords.includes("GeoPackage")||P&&u.default.includes(I.types,"is-notebook"))||"3DTiles Package"===I.type&&aa.isPortal&&!W?!1:!0;I.canPublishFile=aa;
Y.resolve(aa);return Y};S.isServicePublishableByUser=function(I,P){var J=new k.default,U=I.portal.getPortalUser();U=(U=null===U||void 0===U?void 0:U.userRole)&&U.canCreateItem();var Y=I.serviceInfo||{},aa=I.isSDS;P=I.isTable&&!P;var la=I.isLocationTrackingService;P=!(I.isMultiServicesView||Y.isMultiServicesView||!I.isHostedService||"Feature Service"!==I.type||!U||!aa||P||la);I.canPublish=P;J.resolve(P);return J};S.canPublishTileServiceFromFeatureService=function(I){var P=new k.default,J=I.portal.getPortalUser();
J=null===J||void 0===J?void 0:J.userRole;var U=S.isServicePublishableByUser(I)&&I.isAdmin&&J.canPublishTiles(),Y=u.default.includes(I.typeKeywords,"Spatiotemporal"),aa=I.typeKeywords.includes("Hosted Service"),la=(I.resultData||[]).filter(function(N){return"Map Service"===N.type});J=I.featureLayers;var T=I.isHostedService&&(J||[]).every(function(N){return S.canUseForPublish(I,N,!0)});S.isServicePublishableByUser(I).then(function(N){N=!(!(N&&U&&T&&!Y&&aa)||la&&la.length);I.canPublishTiles=N;P.resolve(N)});
return P};S.canPublishVectorTileServiceFromFeatureService=function(I){var P=new k.default,J=null===e.default||void 0===e.default?void 0:e.default.publishVectorTilesFromFeaturesEnabled,U=(I.resultData||[]).filter(function(aa){return"Vector Tile Service"===aa.type}),Y=I.isHostedService&&(I.featureLayers||[]).every(function(aa){return S.canUseForPublish(I,aa,!0)});S.isServicePublishableByUser(I).then(function(aa){aa=!(!(J&&Y&&aa)||U&&U.length);I.canPublishVectorTiles=aa;P.resolve(aa)});return P};S.canPublishWFSServiceFromFeatureService=
function(I){var P=new k.default,J=I.portal,U=J.getPortalUser();U=null===U||void 0===U?void 0:U.userRole;var Y=u.default.includes(I.typeKeywords,"Spatiotemporal"),aa=S.isServicePublishableByUser(I),la=aa&&(!J.isPortal||J.isPortal&&!Y),T=aa&&I.isAdmin&&U.canPublishFeatures(),N=(I.resultData||[]).filter(function(K){return"WFS"===K.type});S.isServicePublishableByUser(I).then(function(K){K=!(!(K&&la&&T)||!J.isPortal&&Y||N&&N.length);I.canPublishWFS=K;P.resolve(K)});return P};S.canPublishOGCFeatureServerFromFeatureService=
function(I){var P=new k.default,J=I.portal.isPortal,U=I.portal.getPortalUser();U=null===U||void 0===U?void 0:U.userRole;var Y=S.isServicePublishableByUser(I)&&!J&&I.isAdmin&&U.canPublishFeatures(),aa=(I.resultData||[]).filter(function(T){return"OGCFeatureServer"===T.type}),la=u.default.includes(I.typeKeywords,"Spatiotemporal");S.isServicePublishableByUser(I).then(function(T){T=!(!T||!Y||la||aa&&aa.length);I.canPublishOGCFeatures=T;P.resolve(T)});return P};S.canPublishSceneServiceFromFeatureService=
function(I){var P=this,J=new k.default,U=I.portal,Y=U.getPortalUser();Y=null===Y||void 0===Y?void 0:Y.userRole;var aa=S.isServicePublishableByUser(I),la=U&&!U.isPortal&&aa&&I.isAdmin&&Y.canPublishScenes();U=I.featureLayers||[];var T=I.isHostedService&&U.every(function(za){return P.canUseForPublish(I,za,!0,"scene")}),N=I.tables||[],K=U.every(function(za){return"esriGeometryPoint"===(null===za||void 0===za?void 0:za.geometryType)}),W=U.every(function(za){return"esriGeometryMultiPatch"===(null===za||
void 0===za?void 0:za.geometryType)}),da=["esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset","esriFieldTypeBigInteger"],fa=U.some(function(za){var Da;return null===(Da=null===za||void 0===za?void 0:za.fields)||void 0===Da?void 0:Da.some(function(va){return da.includes(va.type)})}),ha=(I.resultData||[]).filter(function(za){return"Scene Service"===za.type}),ra=-1<I.typeKeywords.indexOf("View Service")||I.isViewService;S.isServicePublishableByUser(I).then(function(za){za=
!(!(za&&la&&T&&(K||W))||fa||ha&&ha.length||ra||N.length||I.hasGeocodeReviewTable);I.canPublishScenes=za;J.resolve(za)});return J};S.canPublishViewServiceFromFeatureService=function(I){var P=new k.default,J=I.portal||{},U=J.getPortalUser();U=null===U||void 0===U?void 0:U.userRole;var Y=I.isAdmin&&U.canPublishFeatures(),aa=S.isMultipatchFeatureService(I),la=I.isLocationTrackingService&&!J.isPortal,T=u.default.includes(I.typeKeywords,"View Service");S.isServicePublishableByUser(I,!0).then(function(N){N=
aa||!N||!Y||T||la?!1:!0;I.canPublishView=N;P.resolve(N)});return P};S.canPublishImageServiceAsTiled=function(I){var P,J=new k.default,U=S.canPublishFromImageService(I),Y=null===(P=I.portal.getPortalUser())||void 0===P?void 0:P.userRole.canPublishTiledImagery();I.canPublishImageServiceAsTiled=U&&Y&&!S.isTiledOnlyImageryService(I.serviceInfo);J.resolve(I.canPublishImageServiceAsTiled);return J};S.canPublishImageServiceAsDynamic=function(I){var P,J=new k.default,U=S.canPublishFromImageService(I),Y=null===
(P=I.portal.getPortalUser())||void 0===P?void 0:P.userRole.canPublishDynamicImagery();I.canPublishImageServiceAsDynamic=U&&Y&&S.isTiledOnlyImageryService(I.serviceInfo);J.resolve(I.canPublishImageServiceAsDynamic);return J};S.canExportImagery=function(I){var P,J=new k.default,U=S.canPublishFromImageService(I),Y=null===(P=I.portal.getPortalUser())||void 0===P?void 0:P.userRole.canPublishTiledImagery();I.canExportImagery=U&&Y&&S.isTiledOnlyImageryService(I.serviceInfo);J.resolve(I.canExportImagery);
return J};S.canEnableAttachments=function(I){var P,J=new k.default,U=I.isDataView,Y=I.isLocationTrackingService,aa=-1<(null===(P=I.typeKeywords)||void 0===P?void 0:P.indexOf("Spatiotemporal"));P=C.default.isDefined(I.canEnableAttachments)?I.canEnableAttachments:!(!I.isHostedService||U||Y||aa||!I.canUpdate);I.canEnableAttachments=P;J.resolve(P);return J};S.canEditViewAttachments=function(I){C.default.isDefined(I.canEditViewAttachments)||(I.canEditViewAttachments=!!(I.isHostedService&&I.isDataView&&
I.canUpdate));return I.canEditViewAttachments};S.canAppendData=function(I){var P,J,U=new k.default,Y=u.default.includes(I.typeKeywords,"View Service"),aa=I.isLocationTrackingService,la="Feature Service"===I.type&&(null===(P=I.layers)||void 0===P?void 0:P.some(function(T){return!(null===T||void 0===T||!T.infoFor3D)}));P=!Y&&!aa&&!la&&I.isAdmin&&I.isHostedService&&(I.portal.isPortal&&(null===(J=I.serviceInfo)||void 0===J?void 0:J.supportsAppend)||!I.portal.isPortal&&(I.layers||[]).some(function(T){return T.supportsAppend}));
I.canAppendData=P;U.resolve(P);return U};S.canUseForPublish=function(I,P,J,U){var Y;I=(null===(Y=I.itemData)||void 0===Y?void 0:Y.layers)||[];Y=u.default.find(I,function(aa){return aa.id===P.id});I=(0,q.default)(P);if(null===Y||void 0===Y?0:Y.layerDefinition)I.drawingInfo=l.__assign(l.__assign({},I.drawingInfo),Y.layerDefinition.drawingInfo),I.featureReduction=l.__assign(l.__assign({},I.featureReduction),Y.layerDefinition.featureReduction);return(0,c.default)(l.__assign({},I),J,U)};S.canPublishFromImageService=
function(I){var P,J=I.portal,U=I.isAdmin,Y=I.isOwner,aa=I.isHostedService,la=I.serviceInfo,T=I.type,N=null===(P=J.getPortalUser())||void 0===P?void 0:P.userRole;P=U||Y;J=aa&&!J.isPortal;return"Image Service"===T&&(null===la||void 0===la?void 0:la.bandCount)&&!u.default.includes(I.typeKeywords,"Elevation 3D Layer")&&P&&J&&(null===N||void 0===N?void 0:N.canCreateItem())&&(null===N||void 0===N?void 0:N.canPublishImageCollection())};S.isTiledOnlyImageryService=function(I){I=I.capabilities.split(",").map(function(P){return P.toLowerCase().trim()});
return u.default.includes(I,"tilesonly")};S.isTiledImageryService=function(I){var P=new k.default;I="Image Service"===I.type&&u.default.includesSome(I.typeKeywords,["Elevation 3D Layer","Tiled Imagery"]);P.resolve(I);return P};S.isEnterpriseCachedMapImageLayer=function(I){var P,J=new k.default;I=I.portal.isPortal&&"Map Service"===I.type&&!0===(null===(P=I.serviceInfo)||void 0===P?void 0:P.singleFusedMapCache);J.resolve(I);return J};S.isServiceEditableByUser=function(I){var P,J=I.isOrgItem,U=I.isHostedService,
Y=I.serviceInfo,aa=I.canEditService,la=I.portal,T=new k.default,N=la.getPortalUser();la=null===(P=null===N||void 0===N?void 0:N.userRole)||void 0===P?void 0:P.canEditFeaturesFullControl();P=N&&J;J=-1<((null===Y||void 0===Y?void 0:Y.capabilities)||"").indexOf("Editing");Y=null===Y||void 0===Y?void 0:Y.isMultiServicesView;C.default.isDefined(aa)||(I.canEditService=!(!U||Y||!(I.canUpdate||J&&la&&P)));T.resolve(I.canEditService);return T};S.isExportableByUser=function(I){var P,J=I.portal,U=I.serviceInfo,
Y=I.isLocationTrackingService,aa=I.isHostedService,la=I.isAdmin,T=I.type,N=new k.default,K=J.getPortalUser();U=!!(-1<(null===(P=null===U||void 0===U?void 0:U.capabilities)||void 0===P?void 0:P.indexOf("Extract")));P=(null===K||void 0===K?void 0:K.userRole)&&K.userRole.canCreateItem();P=K&&U&&(!K.isOrgUser||P);C.default.isDefined(I.canExport)||(I.canExport=!(!aa||!K||J.isPortal&&(!J.isPortal||Y)||!("Feature Service"===T&&la||P)));N.resolve(I.canExport);return N};S.isOverwriteableService=function(I,
P){var J,U,Y=I.type,aa=I.serviceInfo,la=I.adminServiceInfo,T=I.isPortal,N=I.isSDS,K=I.typeKeywords,W=I.sourceData,da=new k.default,fa={shapefile:1,"file geodatabase":1,geojson:1};la=null===(J=T&&!N?aa:la)||void 0===J?void 0:J.capabilities;J=d.default.stringToArray(la||"",",",!0);J=u.default.includes(J,"ChangeTracking");!P&&u.default.includes(K,"Cloud Drive")&&da.resolve(!1);I.isHostedService&&"Feature Service"===Y&&I.serviceInfo&&!1===I.serviceInfo.sourceSchemaChangesAllowed&&da.resolve(!1);!I.isAdmin||
!I.isHostedService||"Feature Service"!==Y||aa.syncEnabled||I.isDataView||J?da.resolve(!1):W&&W.owner===I.owner&&(null===(U=W.type)||void 0===U?void 0:U.toLowerCase())in fa?da.resolve(!0):!W||"CSV"!==W.type&&"Microsoft Excel"!==W.type?da.resolve(!1):S.fetchPublishParameters(I).then(function(ha){I.publishParameters=ha;da.resolve(!!ha)});return da};S.isOverwriteableCloudService=function(I){var P=new k.default,J=I.cloudProviderInfo,U=I.sourceData;if(u.default.includes(I.typeKeywords,"Cloud Drive")&&J&&
J.mimeType){var Y=!U;I.sourceData=U||{type:-1!==J.mimeType.indexOf("csv")?"CSV":"Microsoft Excel"};S.isOverwriteableService(I,!0).then(function(aa){Y&&(I.sourceData=null);P.resolve(!!aa)})}else P.resolve(!1);return P};S.isApplicationCreateableFromItem=function(I){var P=new k.default,J=I.portal.getPortalUser(),U=null===J||void 0===J?void 0:J.userRole;U=U&&U.canCreateItem()||J&&!J.isOrgUser;var Y=!1;if(C.default.isDefined(I.isApplicationCreateableFromItem))P.resolve(I.isApplicationCreateableFromItem);
else{I.isApplicationCreateableFromItem=Y;if(U)if(u.default.includes(I.types,"is-map")||u.default.includes(I.types,"is-scene"))I.isApplicationCreateableFromItem=!0,I.privileges.push("can-create-app"),(u.default.includes(I.types,"is-map")||"Web Scene"===I.type)&&e.default.showCreateDashboard&&J&&J.isOrgUser&&I.privileges.push("can-create-dashboard-item"),Y=!0;else if(u.default.includes(I.typeKeywords,"Configurable")&&u.default.includes(I.typeKeywords,"createAppWithoutMap")&&!u.default.includes(I.typeKeywords,
"Web AppBuilder for ArcGIS")||u.default.includes(I.typeKeywords,"Web AppBuilder for ArcGIS")&&J.isOrgUser)I.isApplicationCreateableFromItem=!0,I.types.push("is-hostedTemplate"),Y=!0;P.resolve(Y)}return P};S.isMultipatchFeatureService=function(I){var P=I.isHostedService,J=I.typeKeywords,U=I.serviceInfo;I="Feature Service"===I.type&&(P||u.default.includes(J,"Hosted"));U=((null===U||void 0===U?void 0:U.layers)||[]).some(function(Y){return"esriGeometryMultiPatch"===(null===Y||void 0===Y?void 0:Y.geometryType)});
return I&&U};S.registerItemActions=function(I,P,J,U,Y){(0,x.default)("[class*\x3djs-action-]",P).forEach(function(aa){var la=r.default.get(aa,"data-action");J[la]&&I.own((0,g.default)(aa,"click",function(T){T.preventDefault();if(Y&&Y(la))T.stopPropagation();else J[la](l.__assign({evt:T,item:I.item,user:I.portalUser,page:U,scope:I}))}))},I);(0,x.default)(".js-telemetry-primary-action",P).forEach(function(aa){var la,T=r.default.get(aa,"data-telemetry-action");(null===(la=window.location.href)||void 0===
la?0:la.includes("item.html"))&&(null===aa||void 0===aa?0:aa.closest(".js-actions-container"))&&T&&I.own((0,g.default)(aa,"click",function(N){var K,W,da;"Open in Map Viewer"===T&&(null===(K=null===aa||void 0===aa?void 0:aa.href)||void 0===K?0:K.includes("webmap/viewer.html"))&&(T="Open in Map Viewer Classic");null===(W=null===U||void 0===U?void 0:U.telemetry)||void 0===W?void 0:W.logEvent({eventType:"other",pageName:"item",pageUrl:window.location.href,path:window.location.pathname,attribute:null===
(da=null===U||void 0===U?void 0:U._item)||void 0===da?void 0:da.type,category:"item action",action:T})}))},I)};S.calculateExpectedTiles=function(I,P,J){var U=new v.default(P.xmax,P.ymin,P.spatialReference);P=new v.default(P.xmin,P.ymax,P.spatialReference);P=A.default.getContainingTileCoords(I,P,J);I=A.default.getContainingTileCoords(I,U,J);I=(I.row+1-P.row)*(I.col+1-P.col);return 0>=I?1:I};S.sizeInMB=function(I){var P=I||0;0<I&&(P=I/1048567);P=Math.round(100*P)/100;return t.default.format(P)};S.getHashParts=
function(){return(0,b.default)().split("/")};S.splitHashParts=function(I){return I?I.split("/"):[""]};S.removeUrlQueryParameter=function(I,P){var J;if(I){var U=G.default.urlToObject(I),Y=U.path,aa=(0,b.default)()?"#"+(0,b.default)():"";if(!(P&&(null===(J=U.query)||void 0===J?0:J[P])))return I;delete U.query[P];I=0;for(var la in U.query)Object.prototype.hasOwnProperty.call(U.query,la)&&la!==P&&(J=0===I?"?":"\x26",Y="".concat(Y).concat(J).concat(la,"\x3d").concat(encodeURIComponent(U.query[la])),I++);
return Y+aa}return I};S.needsToken=function(I,P){var J,U=null===(J=I.portal)||void 0===J?void 0:J.getPortalUser();J=I.serverToken||(null===U||void 0===U?void 0:U.getToken());return I&&"WFS"!==I.type&&"OGCFeatureServer"!==I.type&&U&&((I.isServiceProxy||I.hasKMLItemData)&&"public"!==I.access||I.isHostedService&&(I.isAdmin||"public"!==I.access)||I.isFeatureCollection&&"public"!==I.access)?P+(J?"?token\x3d".concat(J):""):P};S.getNeededToken=function(I){var P,J=null===(P=I.portal)||void 0===P?void 0:P.getPortalUser();
P=I.serverToken||(null===J||void 0===J?void 0:J.getToken());return I&&"WFS"!==I.type&&J&&((I.isServiceProxy||I.hasKMLItemData)&&"public"!==I.access||I.isHostedService&&(I.isAdmin||"public"!==I.access)||I.isFeatureCollection&&"public"!==I.access)?P:null};S.addToken=function(I){I=S.needsToken(I,I.url);return-1<(null===I||void 0===I?void 0:I.indexOf("?token\x3d"))};S.needsSSL=function(I,P){return I.portal.allSSL||-1<window.location.protocol.indexOf("https:")?m.default.getSecureUrl(I.url):P};S.registerKeystrokeHandler=
function(I,P){return(0,g.default)(I,10>=(0,z.default)("ie")||7>(0,z.default)("trident")?"keydown":"keyup",P)};S.registerEnterSpaceKeystrokeHandler=function(I,P){return(0,g.default)(I,"keyup",function(J){J.keyCode!==D.default.ENTER&&J.keyCode!==D.default.SPACE||P(J)})};S.sendAllResources=function(I,P,J,U,Y,aa){var la=new k.default;J=(0,q.default)(J);var T=[],N=J.splice(0,P);for(C.default.isDefined(aa)||(aa=!0);0<(null===N||void 0===N?void 0:N.length);)T.push(m.default.request({url:I,content:U(N)},
l.__assign({usePost:aa},Y||{}))),N=J.splice(0,P);(0,E.default)(T).then(function(K){return la.resolve(K)},function(K){return la.reject(K)});return la};S.sendAllResourcesWithDelay=function(I,P,J,U,Y){function aa(){setTimeout(function(){fa=T.splice(0,P);0<(null===fa||void 0===fa?void 0:fa.length)&&(m.default.request({url:I,content:U(fa)},{usePost:!0}).then(function(ha){W++;N.push(ha);W>=la&&K.resolve(N)},function(ha){W++;W>=la&&K.reject(ha)}),da++,aa())},0===da?0:Y)}var la=Math.ceil(J.length/P),T=(0,q.default)(J),
N=[],K=new k.default,W=0,da=0,fa;aa();return K};S.sendAllResourcesSerially=function(I,P,J,U){function Y(){K=la.splice(0,P);0<(null===K||void 0===K?void 0:K.length)&&m.default.request({url:I,content:U(K)},{usePost:!0}).then(function(da){W++;T.push(da);W>=aa?N.resolve(T):Y()},function(da){W++;W>=aa?N.reject(da):Y()})}var aa=Math.ceil(J.length/P),la=(0,q.default)(J),T=[],N=new k.default,K,W=0;Y();return N};S.fetchAllResources=function(I,P,J){var U=new k.default,Y=1,aa=[],la=100,T,N,K,W;P=P||{};J=J||
"results";P.start=Y;!P.num||P.num>la?P.num=la:la=P.num;m.default.request({url:I,content:P}).then(function(da){if(null===da||void 0===da?0:da[J]){aa=aa.concat(da[J]);Y=da.nextStart;T=da.total-aa.length;N=Math.ceil(T/la);K=[];if(-1<Y)for(W=0;W<N;W++)P.start=Y+W*la,K.push(m.default.request({url:I,content:P}));(0,E.default)(K).then(function(fa){fa.forEach(function(ha){aa=aa.concat(ha[J])});U.resolve(aa)},function(fa){return U.reject(fa)})}else U.resolve(aa)},function(da){return U.reject(da)});return U};
S.deleteItem=function(I,P){var J="".concat(I.userItemUrl,"/delete");if("Deep Learning Package"===(null===I||void 0===I?void 0:I.type)){var U=new k.default;S.uninstallDeepLearningPackage(I).then(function(Y){"uninstallFail"===(null===Y||void 0===Y?void 0:Y.messageCode)?U.resolve(Y):m.default.request({url:J,content:P},{usePost:!0}).then(function(aa){return U.resolve(aa)})});return U}return m.default.request({url:J,content:P},{usePost:!0})};S.uninstallDeepLearningPackage=function(I){var P,J=I.portal,
U=new k.default,Y=null===(P=J.helperServices)||void 0===P?void 0:P.rasterAnalytics;P=(I.portal.getPortalUser()||{}).getToken();var aa={messageCode:"uninstallFail"},la={messageCode:"uninstallSuccess"};if((null===J||void 0===J?0:J.isPortal)&&Y&&C.default.isDefined(Y.url)){J={modelItemId:JSON.stringify({itemId:I.id})};var T="".concat(Y.url,"/UninstallDeepLearningModel");U=(new F.default(T+(P?"?token\x3d".concat(P):""))).submitJob(J).then(function(N){var K,W,da=null===(W=null===(K=null===N||void 0===
N?void 0:N.results)||void 0===K?void 0:K.uninstallSucceed)||void 0===W?void 0:W.paramUrl;N=N.jobId;return da&&N?m.default.request({url:"".concat(T,"/jobs/").concat(N,"/").concat(da)},{usePost:!0}).then(function(fa){return(fa=null===fa||void 0===fa?void 0:fa.value)&&fa===I.id?la:aa}):aa},function(){return aa})}else U.resolve(la);return U};S.getUserProfile=function(I){I="string"===typeof I?{username:I}:I;var P="".concat(e.default.restBaseUrl,"community/users/").concat(I.username),J=m.default.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg");
return m.default.request({url:P}).then(function(U){var Y=U.thumbnail?y.default.PortalUtil.formatUrl("".concat(P,"/info/").concat(U.thumbnail)):J;return l.__assign(l.__assign(l.__assign({},U),{thumbnailUrl:Y}),I)})};S.getItemSharing=function(I){var P=new k.default,J=I.portal,U=I.itemOwner,Y=I.access,aa=I.canUpdate,la=I.isOwner,T=I.userItemUrl,N=J.getPortalUser(),K=(null===N||void 0===N?void 0:N.canShareOthers)&&I.isOwnedByMyOrg,W={access:Y};aa&&(la||(null===N||void 0===N?0:N.canViewOthersOrgItems))||
K?m.default.request({url:T}).then(function(da){W=da.sharing;var fa=null===W||void 0===W?void 0:W.groups;"shared"===W.access&&1===(null===fa||void 0===fa?void 0:fa.length)&&fa[0]===N.favGroupId&&(W={access:"private"});fa&&(da={userGroups:null===N||void 0===N?void 0:N.getGroups(),ownerGroups:!I.isOwner&&U?U.getGroups():null},(0,E.default)(da).then(function(ha){(ha=(ha.userGroups||[]).concat(ha.ownerGroups||[]).filter(function(ra){return u.default.find(fa,function(za){return ra.id===za})}).map(function(ra){return'id: "'.concat(ra.id,
'"')}))&&ha.length?J.queryGroups({q:ha.join(" OR "),num:100},!0).then(function(ra){W.groups=(ra.results||[]).sort(function(za,Da){return Da.title.localeCompare(za.title)});W.total=ra.total;I=l.__assign(l.__assign({},I),{sharing:W});P.resolve(W)}):(delete W.groups,I=l.__assign(l.__assign({},I),{sharing:W}),P.resolve(W))}))}):(I=l.__assign(l.__assign({},I),{sharing:W}),P.resolve(W));return P};S.protectItem=function(I){I="".concat(I.userItemUrl,"/protect");return m.default.request({url:I},{usePost:!0})};
S.unprotectItem=function(I){I="".concat(I.userItemUrl,"/unprotect");return m.default.request({url:I},{usePost:!0})};S.protectGroup=function(I){I="".concat(e.default.restBaseUrl,"community/groups/").concat(I.id,"/protect");return m.default.request({url:I},{usePost:!0})};S.unprotectGroup=function(I){I="".concat(e.default.restBaseUrl,"community/groups/").concat(I.id,"/unprotect");return m.default.request({url:I},{usePost:!0})};S.fetchPublishParameters=function(I){var P=I.sourceData;I=I.itemUrl;var J=
new k.default;I="".concat(I,"/info/publishParameters.json");!P||"CSV"!==P.type&&"Microsoft Excel"!==P.type?J.resolve(!1):m.default.request({url:I}).then(function(U){return J.resolve(U)},function(){return J.resolve(!1)});return J};S.fetchRegisteredAppInfo=function(I){I=m.default.getSecureUrl("".concat(I.userItemUrl,"/registeredAppInfo"));return m.default.request({url:I})};S.refreshAppSecret=function(I){I="".concat(m.default.getSecureUrl(e.default.restBaseUrl),"oauth2/apps/").concat(I,"/resetSecret");
return m.default.request({url:I},{usePost:!0})};S.registerApp=function(I,P){P=P?"apps/".concat(I.client_id,"/update"):"registerApp";P="".concat(m.default.getSecureUrl(e.default.restBaseUrl),"oauth2/").concat(P);return m.default.request({url:P,content:I},{usePost:!0})};S.unregisterApp=function(I){I="".concat(m.default.getSecureUrl(e.default.restBaseUrl),"oauth2/apps/").concat(I,"/unregister");return m.default.request({url:I},{usePost:!0})};S.enableAttachments=function(I,P,J){I="".concat(I.adminUrl,
"/").concat(P.id,"/updateDefinition");return m.default.request({url:I,content:{updateDefinition:JSON.stringify({hasAttachments:!!J})}},{usePost:!0}).then(function(){return P.hasAttachments=J})};S.isItemListable=function(I){var P=I.portal.getPortalUser().userRole,J=P&&P.isCustom()&&P.canManageMarketplace();P=P&&P.isAdmin()||J;J=u.default.includes(I.typeKeywords,"Service Proxy")&&I.sourceUrl&&(-1<I.sourceUrl.indexOf(".arcgis.com")||-1<I.sourceUrl.indexOf(".esri.com"));var U=e.default.self,Y=U.canListApps;
U=U.canListData;!I.listed&&e.default.self&&P?U&&J?(P=new k.default,P.resolve("Geoprocessing Service"===I.type)):Y&&(u.default.includes(I.typeKeywords,"Registered App")||u.default.includes(["ArcGIS Pro Add In","AppBuilder Widget Package"],I.type))?(P=new k.default,P.resolve(!0)):U&&"Rule Package"===I.type?(P=new k.default,P.resolve(!0)):U?P=S.isServiceListable(I):(P=new k.default,P.resolve(!1)):(P=new k.default,P.resolve(!1));return P};S.isServiceListable=function(I){var P="".concat(e.default.restBaseUrl,
"portals/isServerRegistered"),J=I.type?I.type.toLowerCase():"",U=I.url&&m.default.parseUrl(I.url);"web map"===J?(P=new k.default,P.resolve(!0)):u.default.includes(["feature service","map service","image service","scene service"],J)?m.default.isHostedServiceItem(I)?(P=new k.default,P.resolve(!0)):U&&C.default.isDefined(U.protocol)&&C.default.isDefined(U.host)?(I={serverUrl:"".concat(U.protocol,"://").concat(U.host)},P=m.default.request({url:P,content:I}).then(function(Y){return Y.registered})):(P=
new k.default,P.resolve(!1)):(P=new k.default,P.resolve(!1));return P};S.findLayer=function(I,P){var J=parseInt(I,10);if(C.default.isDefined(J))return(P||[]).filter(function(U){return U.id===J}).shift()};S.getServiceNameFromUrl=function(I){var P=I.url||"",J=/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|WMServer|SceneServer|VectorTileServer|StreamServer)).*/gi,U=P.replace(J,"").replace(/^.*\//,"").replace(/\?.*$/,"");
P=P.replace(/http.+\/(arcgis\/rest\/services|\/.*\/rest\/services|arcgis\/services)\/?/gi,"").match(J);try{return P?decodeURI(U):I.title}catch(Y){return U}};S.getAppPurpose=function(I){I=I.typeKeywords;if(u.default.includes(I,"Ready To Use")||u.default.includes(I,"Ready to Use"))return H.default.itemProperties.readyToUse;if(u.default.includes(I,"selfConfigured"))return H.default.itemProperties.selfConfigurable;if(u.default.includes(I,"Configurable"))return H.default.itemProperties.configurable;if(u.default.includes(I,
"Code Sample"))return H.default.itemProperties.codeSample};S.getAppApi=function(I){var P={"Windows Mobile":H.default.common.mobile,"ArcGIS for iPhone":H.default.common.ios,"ArcGIS for Windows Phone":H.default.common.windowsPhone,"ArcGIS for Windows Store":H.default.common.windowsStore,"ArcGIS for Windows Universal":H.default.common.windowsUniversal,"ArcGIS for Android":H.default.common.Android,Flex:H.default.common.Flex,JavaScript:H.default.common.JavaScript,Silverlight:H.default.common.Silverlight,
"Web ADF":H.default.common.WebADF,Other:H.default.common.other,Java:"Java",Qt:"Qt",".NET-Windows Desktop":".NET\u2013Windows Desktop",WPF:"WPF","OS X":"OS X"};return Object.keys(P).reduce(function(J,U){u.default.includes(I.typeKeywords,U)&&(J=P[U]);return J},"")};S.linkify=function(I){if(!I)return I;I=m.default.htmlEncode(I);for(var P=I.indexOf("http"),J;-1<P;){J=I.substring(P,P+8);if(-1<J.indexOf("http://")||-1<J.indexOf("https://")){J=!0;if(6<P&&"href\x3d"===I.substring(P-6,P-1).toLowerCase()){J=
!1;var U=I.toLowerCase().indexOf("/a",P);P=P+I.toLowerCase().substring(P,U).length+1}if(J){J=I.indexOf(" ",P);-1===J&&(J=I.length);U=I.substring(P,J);var Y='\x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"'.concat(U,'" target\x3d"_blank"\x3e').concat(U,"\x3c/a\x3e\x3c/span\x3e");I="".concat(I.substring(0,P)).concat(Y).concat(I.substring(J,I.length));P=P+Y.length-U.length+5}}else P+=1;P=I.indexOf("http",P)}return I};S.includeTimestampInRequest=function(I){if(10>=(0,z.default)("ie")||7>(0,z.default)("trident"))I.ts=
(new Date).getTime();return I};S.fetchIDPConfig=function(){var I="".concat(m.default.getSecureUrl(e.default.restBaseUrl),"portals/self/idp");return m.default.request({url:I})};S.checkEnterpriseGroupStore=function(){var I=new k.default,P="".concat(m.default.getPortalAdminBaseUrl(),"/security/config");m.default.request({url:P}).then(function(J){J=null===J||void 0===J?void 0:J.groupStoreConfig;var U=!1,Y=null;if(null===J||void 0===J?0:J.type)Y=null===J||void 0===J?void 0:J.type.toLowerCase(),"builtin"!==
Y&&"saml"!==Y&&(U=!0);I.resolve({storeType:Y,supportsEnterpriseGroups:U})},function(){I.resolve({supportsEnterpriseGroups:!1})});return I};S.enterpriseGroupMatches=function(I,P){return!(!C.default.isDefined(I)||!C.default.isDefined(P)||I.toLowerCase()!==P.toLowerCase())};S.isAmazonBasedTileService=function(I){return!m.default.isPortal()&&/tiles[\s\S]*.arcgis.com\//gi.test(I)};S.createDialogWrapper=function(I,P){var J=(new h.default(I)).placeAt(document.body);J.setContent(P);g.default.once(J,"hide",
function(){return J.destroyRecursive()});return J};S.createSpecifiedDialog=function(I,P,J){var U=P?new I(P):new I,Y=U._dialog||U.dialog;if(Y)g.default.once(Y,"hide",function(){var aa;Y.destroyRecursive();U.destroyRecursive();null===(aa=null===J||void 0===J?void 0:J.focus)||void 0===aa?void 0:aa.call(J)});return U};S.createConfirmationDialog=function(I){var P=document.createElement("div");document.body.appendChild(P);var J=l.__assign(l.__assign({},I),{onCancel:function(){var U;P.parentElement&&(null===
(U=I.onCancel)||void 0===U?void 0:U.call(I),I.doNotRemoveContainer||P.remove())},onOk:function(U){var Y;null===(Y=I.onOk)||void 0===Y?void 0:Y.call(I,U);I.autoCloseOnOk&&(I.doNotRemoveContainer||P.remove())},width:I.width||"s",strings:l.__assign({cancel:H.default.common.cancel,close:H.default.common.close,ok:H.default.common.ok,processing:H.default.common.loading,title:H.default.common.notice},I.strings)});(0,M.render)((0,M.h)(Q.default,J),P)};S.getPageRangeString=function(I,P){var J=n.default.locale?
n.default.locale.substring(0,2):"en";P=P?P:H.default.common.pageRange;I.total&&1E4<=I.total&&(I.total="10000+");return w.default.substitute(P["en"===J?"en":"other"],I)};S.sortListByStrProp=function(I,P,J){I.sort(function(U,Y){U=U[P].toLowerCase();Y=Y[P].toLowerCase();return J?U<Y?1:U>Y?-1:0:U<Y?-1:U>Y?1:0})};S.formatDataStoreItem=function(I,P){if((P||[]).length)if(P.some(function(J){return u.default.includes(J.toLowerCase(),"cloud")}))I+=" (".concat(e.default.onEnterprise?H.default.AddDatastoreDlg.cloudStorage:
H.default.AddDatastoreDlg.cloud,")");else if(-1!==P.indexOf("egdb")||-1!==P.indexOf("nosql"))I+=" (".concat(H.default.AddDatastoreDlg.database,")");else if(-1!==P.indexOf("folder"))I+=" (".concat(H.default.AddDatastoreDlg.folder,")");else if(-1!==P.indexOf("fileShare")||-1!==P.indexOf("hdfs")||-1!==P.indexOf("hive")||-1!==P.indexOf("dataStore"))I+=" (".concat(H.default.AddDatastoreDlg.bigdata,")");return I};S.downloadImage=function(I){var P;I=I.item;var J=I.portal,U=new a.default,Y=new k.default,
aa=null===(P=J.helperServices)||void 0===P?void 0:P.rasterUtilities;P=(I.portal.getPortalUser()||{}).getToken();if((null===J||void 0===J?0:J.isPortal)&&(null===aa||void 0===aa?0:aa.url)){I={inputImageLayer:JSON.stringify({itemId:I.id})};var la="".concat(aa.url,"/DownloadRaster"),T=P?"?token\x3d".concat(P):"";Y=(new F.default(la+T)).submitJob(I,function(N){var K,W="esriJobSucceeded"===(null===N||void 0===N?void 0:N.jobStatus)&&(null===(K=N.results)||void 0===K?void 0:K.outputRaster);N=N.jobId;U.updateMessage(H.default.downloadImageDlg.succeeded);
return W&&N?(U.hide(),m.default.request({url:"".concat(la,"/jobs/").concat(N,"/results/outputRaster")},{usePost:!0}).then(function(da){var fa;return null===(fa=null===da||void 0===da?void 0:da.value)||void 0===fa?void 0:fa[0]})):""},function(N){N="".concat(aa.url,"/DownloadRaster/jobs/").concat(N.jobId,"/cancel")+T;U.setCancelUrl(N)});U.show();U.updateMessage(H.default.downloadImageDlg.message)}else Y.resolve("");return Y};S.cancelDownloadImage=function(I,P){(new F.default(I)).cancelJob(P,null,null)};
S.goToPage=function(I,P){var J=P.orgId;P=encodeURIComponent(P.username);var U=m.default.getUser(),Y=null===U||void 0===U?void 0:U.userRole,aa=(null===U||void 0===U?void 0:U.username)===P;I=("groups"===I&&(null===Y||void 0===Y?0:Y.canViewOrgGroups())||"content"===I&&(null===Y||void 0===Y?0:Y.canManageItems())||(null===Y||void 0===Y?0:Y.isAdmin())||aa)&&J===U.orgId?"".concat(e.default.baseUrl).concat(I,".html").concat(aa?"":"?user\x3d".concat(P)):"".concat(e.default.baseUrl,"search.html?q\x3downer:%22").concat(P,
"%22\x26restrict\x3dfalse#").concat(I);window.open(I,"_blank")};S.checkLayersForNewFieldTypes=function(I){var P,J;return null===(J=((null===(P=I.url)||void 0===P?0:P.match(/Server\/(\d+)/i))?(null===I||void 0===I?void 0:I.featureLayers)||(null===I||void 0===I?void 0:I.layers):null===I||void 0===I?void 0:I.layers)||[])||void 0===J?void 0:J.some(this.checkLayerForNewFieldTypes)};S.checkLayerForNewFieldTypes=function(I){var P=["esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly",
"esriFieldTypeTimestampOffset"];return((null===I||void 0===I?void 0:I.fields)||[]).some(function(J){return P.includes(J.type)})};return S}()})},"arcgisonline/map/core/canUseForPublish":function(){define(["require","exports"],function(f,B){function l(c,u){var t;if("esriGeometryMultiPatch"===c.geometryType)return!1;var d=c.drawingInfo,q=d.renderer;d=d.labelingInfo;var m=c.fields,a=c.featureReduction;if(null===(t=c.layerDefinition)||void 0===t?0:t.featureReduction)a=c.layerDefinition.featureReduction;
if("heatmap"===q.type||"esriGeometryPolygon"===c.geometryType&&q.uniqueValueInfos&&q.visualVariables&&q.visualVariables.some(function(n){if("sizeInfo"===n.type&&!n.target)return!0}))return!1;var h=m.filter(function(n){return"esriFieldTypeDate"===n.type}).map(function(n){return n.name});return h.length&&(-1<h.indexOf(q.field)||-1<h.indexOf(q.field1)||q.visualVariables&&q.visualVariables.some(function(n){if(n.field&&-1<h.indexOf(n.field))return!0}))||a&&0<Object.keys(a).length||!u&&(null===d||void 0===
d?0:d.length)?!1:!0}function e(c,u){var t,d,q=c.drawingInfo,m=q.renderer;q=q.labelingInfo;var a=c.featureReduction,h=c.fields;if(-1===["esriGeometryPoint","esriGeometryMultiPatch"].indexOf(c.geometryType)||m.observationRenderer||m.latestObservationRenderer||"heatmap"===m.type||(null===(t=m.valueExpression)||void 0===t?0:t.length))return!1;if(m.visualVariables)for(c=0;c<m.visualVariables.length;c++)if(m.visualVariables[c].valueExpression&&m.visualVariables[c].valueExpression.length)return!1;var n=
h.filter(function(r){return"esriFieldTypeDate"===r.type}).map(function(r){return r.name});return n.length&&(-1<n.indexOf(m.field)||-1<n.indexOf(m.field1)||(null===(d=m.visualVariables)||void 0===d?0:d.some(function(r){if(r.field&&-1<n.indexOf(r.field))return!0})))||a&&0<Object.keys(a).length||!u&&(null===q||void 0===q?0:q.length)?!1:!0}Object.defineProperty(B,"__esModule",{value:!0});B.default=function(c,u,t){return"Feature Layer"===c.type&&c.drawingInfo?"scene"===t?e(c,u):l(c,u):!1}})},"arcgisonline/pages/utils/arrays":function(){define(["require",
"exports"],function(f,B){return function(){function l(){}l.includes=function(e,c){return-1<(null===e||void 0===e?void 0:e.indexOf(c))};l.find=function(e,c){if(null===e||void 0===e?0:e.length)for(var u=void 0,t=0;t<e.length;t++)if(u=e[t],c(u,t))return u};l.findIndex=function(e,c){if(null===e||void 0===e?0:e.length)for(var u=0;u<e.length;u++)if(c(e[u],u))return u;return-1};l.toArray=function(e){return Object.keys(e).map(function(c){return e[c]})};l.includesSome=function(e,c){return e&&(null===c||void 0===
c?void 0:c.some(function(u){return-1<e.indexOf(u)}))};l.includesAll=function(e,c){return e&&(null===c||void 0===c?void 0:c.every(function(u){return-1<e.indexOf(u)}))};l.filterOut=function(e,c){var u;return null!==(u=c&&(null===e||void 0===e?void 0:e.filter(function(t){return-1===c.indexOf(t)})))&&void 0!==u?u:[]};l.concatUnique=function(e,c){var u=[].concat(null!==e&&void 0!==e?e:[]);c&&c.forEach(function(t){t&&-1===u.indexOf(t)&&u.push(t)});return u};l.from=function(e){if(Array.from)return Array.from(e);
for(var c=[],u=0;u<e.length;u++)c.push(e[u]);return c};l.batch=function(e,c){void 0===c&&(c=100);return(null!==e&&void 0!==e?e:[]).reduce(function(u,t,d){0===d%c&&u.push(e.slice(d,d+c));return u},[])};return l}()})},"arcgisonline/pages/utils/number":function(){define(["require","exports"],function(f,B){function l(t,d){if(void 0===d||null===d)return c.has(u)||c.set(u,new Intl.NumberFormat(u.locale)),c.get(u).format(t);d={locale:e,options:{minimumFractionDigits:d,maximumFractionDigits:d}};c.has(d)||
c.set(d,new Intl.NumberFormat(d.locale,d.options));return c.get(d).format(t)}Object.defineProperty(B,"__esModule",{value:!0});B.format=void 0;var e={ar:"ar-u-nu-latn"}[document.documentElement.lang]||document.documentElement.lang,c=new WeakMap,u={locale:e};B.format=l;B.default={format:l}})},"arcgisonline/pages/utils/strings":function(){define(["require","exports"],function(f,B){return function(){function l(){}l.isString=function(e){return(null===e||void 0===e?void 0:e.constructor)===String};l.startsWith=
function(e,c){return c&&0===(null===e||void 0===e?void 0:e.indexOf(c))};l.endsWith=function(e,c){if(e&&c){var u=e.lastIndexOf(c);return-1<u&&e.length>=c.length&&u===e.length-c.length}return!1};l.includes=function(e,c){return c&&-1<(null===e||void 0===e?void 0:e.indexOf(c))};l.isSet=function(e){return!!(0<(null===e||void 0===e?void 0:e.length))};l.areEqual=function(e,c){var u=this.isSet(e),t=this.isSet(c);return!u&&!t||u&&t&&e.trim()===c.trim()};l.replaceAll=function(e,c,u){return e.replace(new RegExp(this.escapeRegExp(c),
"g"),u)};l.escapeRegExp=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$\x26")};l.escapeQuestionMarks=function(e){return e.replace(/[?\\]/g,"\\$\x26")};l.escapeSearchQuery=function(e){return e.replace(/[!*+\-&|()[\]{}^~?:"\\]/g,"\\$\x26")};l.stringToArray=function(e,c,u){e=e instanceof Array?e:e.split(c);return u?e.map(function(t){return t.trim()}):e};l.isValidHex=function(e){return/[0-9A-Fa-f]{6}/g.test(e)};l.stringToHex=function(e){for(var c=0,u=0;u<e.length;u++)c=e.charCodeAt(u)+((c<<5)-
c);e="#";for(u=0;3>u;u++)e+=("00"+(c>>8*u&255).toString(16)).substr(-2);return e};l.hexToRgb=function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(c,u,t,d){return u+u+t+t+d+d});return(e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e))?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null};l.htmlDecode=function(e){var c=document.createElement("textarea");c.innerHTML=e;return c.value};l.htmlEncode=function(e){var c=document.createElement("textarea");c.innerText=e;return c.innerHTML};
l.encodeWhitespace=function(e){return e?e.replace(/\s/g,"%20"):""};l.encodeAngleBrackets=function(e){var c;return null!==(c=null===e||void 0===e?void 0:e.replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;"))&&void 0!==c?c:""};l.decodeAngleBrackets=function(e){var c;return null!==(c=null===e||void 0===e?void 0:e.replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e"))&&void 0!==c?c:""};l.escapeHTML=function(e){var c={"\x26":"\x26#x38;","\x3c":"\x26#x3C;","\x3e":"\x26#x3E;",'"':"\x26#x22;","'":"\x26#x27;","/":"\x26#x2F;"};
return String(e).replace(/[&<>"'/]/gm,function(u){return c[u]})};l.shouldStripHTML=function(e){var c;if(!e)return!1;e=null!==(c=null===e||void 0===e?void 0:e.split("\x3c"))&&void 0!==c?c:[];return 1<e.length&&e.some(function(u){return-1<u.search(/^[A-Za-z\/]+.*[>]+.*$/m)})};l.stripHTML=function(e){if(!e)return"";var c=document.createElement("div");c.innerHTML=e;return c.textContent};l.addHyperlinks=function(e){return e.replace(/(https?:\/\/[^\s]+)/g,function(c){return'\x3ca href\x3d"'.concat(c,'" target\x3d"_blank"\x3e').concat(c,
"\x3c/a\x3e")})};l.escapeNewlines=function(e){return null===e||void 0===e?void 0:e.replace(/(?:\r)/g,"\x26#10;").replace(/(?:\n)/g,"\x26#13;")};l.restoreNewlines=function(e){return null===e||void 0===e?void 0:e.replace(/(?:&#10;)/g,"\r").replace(/(?:&#13;)/g,"\n")};l.insertHTMLLineBreaks=function(e){return null===e||void 0===e?void 0:e.replace(/(?:"&#10;&#13;|&#10;|&#13;|\r\n|\r|\n")/g,"\x3cbr\x3e")};l.containsHTTPProtocol=function(e){var c;return-1<(null!==(c=null===e||void 0===e?void 0:e.toLowerCase())&&
void 0!==c?c:"").indexOf("http://")};return l}()})},"arcgisonline/pages/utils/clone":function(){define(["require","exports"],function(f,B){function l(u){for(var t=Object.keys(u),d=Array(t.length),q=0;q<t.length;++q)d[q]=e(u[q]);return d}function e(u){return"object"!==typeof u||null===u?u:Array.isArray(u)?l(u):u instanceof Map?new Map(l(Array.from(u))):u instanceof Set?new Set(l(Array.from(u))):ArrayBuffer.isView(u)?new u.constructor(u.buffer.slice(),u.byteOffset,u.length):u instanceof Node&&u.cloneNode?
u.cloneNode(!0):c(u)}function c(u){if("object"!==typeof u||null===u)return u;if(u instanceof Date)return new Date(u);if(Array.isArray(u))return l(u);if(u instanceof Map)return new Map(l(Array.from(u)));if(u instanceof Set)return new Set(l(Array.from(u)));if(u instanceof Node&&u.cloneNode)return u.cloneNode(!0);var t={},d;for(d in u)t[d]=e(u[d]);return t}Object.defineProperty(B,"__esModule",{value:!0});B.default=c})},"arcgisonline/sharing/util":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/dijit/dialog/GeneralDlg,arcgisonline/sharing/dijit/dialog/SubscriptionStatusDlg,dojo/request/xhr,arcgisonline/sharing/dijit/dialog/ConfirmDialog,arcgisonline/pages/utils/mapViewer,arcgisonline/pages/utils/storage,esri/IdentityManager,esri/libs/sanitizer/Sanitizer,dojo/sniff,dojo/has,dojo/json,dojo/cookie"],
function(f,B,l){f.provide("arcgisonline.sharing.util");f.require("arcgisonline.sharing.dijit.dialog.GeneralDlg");f.require("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg");f.require("dojo.request.xhr");f.require("arcgisonline.sharing.dijit.dialog.ConfirmDialog");f.require("arcgisonline.pages.utils.mapViewer");f.require("arcgisonline.pages.utils.storage");f.require("esri.IdentityManager");f.require("esri.libs.sanitizer.Sanitizer");f.require("dojo.sniff");f.require("dojo.has");f.require("dojo.json");
f.require("dojo.cookie");arcgisonline.sharing.util={i18n:f.mixin({},f.i18n.getLocalization("arcgisonline","arcgisonline")),sanitizer:new esri.libs.sanitizer.Sanitizer,storageUtil:arcgisonline.pages.utils.storage,mapViewerUtil:arcgisonline.pages.utils.mapViewer,getSocialNetworkBadges:function(e,c){var u={},t=f.create,d=arcgisonline.sharing.util.socialNetworkTitle(e.title),q=unescape(window.location.href);if(!1===e.isOrganization||!0===e.isOrganization)q=arcgisonline.sharing.util.urlToObject(window.location.href).path+
"?id\x3d"+e.id;esriGeowConfig.self&&esriGeowConfig.self.customBaseUrl&&!arcgisonline.sharing.util.isPortal()&&-1<q.indexOf(esriGeowConfig.self.customBaseUrl)&&(q=q.replace(location.host,esriGeowConfig.self.portalHostname));var m=t("span",{class:"esriItemLinks"}),a=encodeURI("socialnetwork.html?t\x3d"+d+"\x26n\x3dfb\x26u\x3d"+q),h=esri.i18nBundle.itemLinks.shareFacebook,n=t("a",{target:"_blank",onclick:f.partial(this._checkShare,e,"Facebook"),href:a,alt:h,title:h},m);t("span",{class:"facebookBadge dijitInline"},
n);a=t("a",{target:"_blank",onclick:f.partial(this._checkShare,e,"Facebook"),href:a,alt:h,title:h},m);t("span",{innerHTML:esri.i18nBundle.itemLinks.facebook},a);u.facebook=m;m=t("span",{class:"esriItemLinks"});a=encodeURI("socialnetwork.html?t\x3d"+d+"\x26n\x3dtw\x26u\x3d"+q);h=esri.i18nBundle.itemLinks.shareTwitter;n=t("a",{target:"_blank",onclick:f.partial(this._checkShare,e,"Twitter"),href:a,alt:h,title:h},m);t("span",{class:"twitterBadge dijitInline"},n);a=t("a",{target:"_blank",onclick:f.partial(this._checkShare,
e,"Twitter"),href:a,alt:h,title:h},m);t("span",{innerHTML:esri.i18nBundle.itemLinks.twitter},a);u.twitter=m;c(u)},socialNetworkTitle:function(e){100<e.length&&(e=e.substring(0,97)+"...");return encodeURIComponent(e.replace(/ /g,"+"))},shortenUrl:function(e,c,u){var t=esriGeowConfig.bitlyUrl,d,q=new f.Deferred;this.request({url:t,content:{longUrl:e,format:"json"}}).then(function(m){(d=m&&m.data&&m.data.url||null)?c?c(d):q.resolve(d):u?u(m,args):q.reject(m,args)},function(m){u?u({},{}):q.reject(m)});
return q},_checkShare:function(e,c,u){c=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance();u=e&&esri.isDefined(e.isInvitationOnly);e.access&&"public"!==e.access&&c.show({title:esri.i18nBundle.itemLinks[u?"shareGroup":"shareItem"],message:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks[u?"shareGroupMsg":"shareItemMsg"])})},checkSession:function(){esriGeowConfig.userInfo=esriGeowConfig.userInfo||""},isLoggedIn:function(){return null==
this.getUser()?!1:!0},isSilverlightInstalled:function(){if(esriGeowConfig.isSilverlightInstalled)return esriGeowConfig.isSilverlightInstalled;esriGeowConfig.isSilverlightInstalled=!1;if(f.isIE)try{new ActiveXObject("AgControl.AgControl"),esriGeowConfig.isSilverlightInstalled=!0}catch(e){}else navigator.plugins["Silverlight Plug-In"]&&(esriGeowConfig.isSilverlightInstalled=!0);return esriGeowConfig.isSilverlightInstalled},couldHaveArcGISDesktop:function(){return-1!=navigator.userAgent.indexOf("Windows")&&
-1==navigator.userAgent.indexOf("Windows Phone")?!0:!1},requireAuthentication:function(){if(!0===this.isLoggedIn())return!0;var e="";-1==esriGeowConfig.signin.indexOf("http")&&(e=esriGeowConfig.baseUrl,!1!==esriGeowConfig.useSSL&&(e=arcgisonline.sharing.util.getSecureUrl(e)));e+=esriGeowConfig.signin;window.location!==e&&(e+="?returnUrl\x3d"+escape(window.location));window.location=e+"\x26error\x3d403";return!1},htmlHasText:function(e){if(e&&0<e.length){e=f.trim(e);for(var c=!1,u=0;u<e.length;u++){var t=
e.charAt(u);if("\x3c"==t)c=!0;else if("\x3e"==t)c=!1;else if(!c&&""!==t)return!0}}return!1},endsWith:function(e,c){return null==e||null==c?!1:e.toLowerCase().lastIndexOf(c.toLowerCase())==e.length-c.length},toFullDateString:function(e){e=new Date(parseFloat(e));return f.date.locale.format(e,{selector:"date",formatLength:"long"})},toDateTimeString:function(e){e=new Date(parseFloat(e));return f.date.locale.format(e,{formatLength:"medium"})},capitalize:function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()},
getItemDetailsLinkInfo:function(e){var c=null,u=null,t=null;esri.isDefined(e.isInvitationOnly)?(c=esriGeowConfig.baseUrl+"group.html?owner\x3d"+e.owner+"\x26title\x3d"+encodeURIComponent(e.title),u=esri.i18nBundle.itemLinks.details,t=esri.i18nBundle.itemLinks.viewGroupDetails):(c=esriGeowConfig.baseUrl+"item.html?id\x3d"+e.id,u=esri.i18nBundle.itemLinks.details,t=esri.i18nBundle.itemLinks.viewDetails);return null!==c&&null!==u?{link:c,label:u,tip:t}:null},_isOperationsViewSupportedBrowser:function(e){var c=
navigator.userAgent.toLowerCase(),u=RegExp("Chrome/[.0-9]* (?!Mobile)","i"),t=RegExp("Chrome/[.0-9]* Mobile","i");t=f.has("iphone")||f.has("ipod")||f.has("android")&&t.test(c)||-1<c.indexOf("android")&&-1<c.indexOf("mobile")||-1<c.indexOf("windows phone")||f.has("bb");e&&(t=t||c.match(/ipad/i)||f.has("android")&&u.test(c));return t?!1:void 0!==f.has("chrome")?(e=f.has("chrome"),!isNaN(e)&&19<=e):void 0!==f.has("ff")?4<=f.has("ff"):c.match(/fxios/i)?(e=parseFloat(c.split("fxios/")[1]),!isNaN(e)&&1<=
e):void 0!==f.has("ie")?9<=f.has("ie"):void 0!==f.has("edge")?1<=f.has("edge"):void 0!==f.has("trident")?5<=f.has("trident"):void 0!==f.has("safari")?(e=parseFloat(c.split("version/")[1]),c=parseFloat(c.split("crios/")[1]),isNaN(e)&&isNaN(c)||!isNaN(e)&&5.1>e||!isNaN(c)&&31>c?!1:!0):!1},_isPremiumService:function(e){return e.owner&&-1<e.owner.toLowerCase().indexOf("esri")&&(-1<f.indexOf(e.typeKeywords,"Requires Subscription")||-1<f.indexOf(e.typeKeywords,"Requires Credits"))},getGalleryMainLinkInfo:function(e){var c=
e.type?e.type:"",u="",t="",d="",q=null;t=this.getUser();u=!1;u=null;esriGeowConfig.portalHostname&&(u=esriGeowConfig.portalHostname);u&&(d=u.split("."),1<d.length&&(u=d[d.length-2]+"."+d[d.length-1]));if("Web Map"==c)u=!t&&this._isPremiumService(e),t='JavaScript:arcgisonline.map.mapUtil.openMap("'+e.id+'",'+u+")",d=esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer),u=esri.i18nBundle.itemLinks.open;else if("CityEngine Web Scene"===c)u=window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/apps/CEWebViewer/viewer.html?3dWebScene\x3d"+e.id,t="JavaScript:void(0)",q=f.hitch(arcgisonline.sharing.util,"openPage",u),d=esri.i18nBundle.itemLinks.viewApp,u=esri.i18nBundle.itemLinks.open;else if("Web Scene"===c&&esriGeowConfig.sceneViewerEnabled)u=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?webscene\x3d"+e.id,t="JavaScript:void(0)",q=f.hitch(arcgisonline.sharing.util,
"openPage",u,!0),d=esri.i18nBundle.itemLinks.openSceneViewer,u=esri.i18nBundle.itemLinks.open;else if("Scene Service"===c&&esriGeowConfig.sceneViewerEnabled)u=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+e.id,t="JavaScript:void(0)",q=f.hitch(arcgisonline.sharing.util,"openPageAndCount",e.id,u,!0),d=esri.i18nBundle.itemLinks.addToSceneViewer,u=esri.i18nBundle.itemLinks.open;else if("Operation View"===c){u=window.location;
c=arcgisonline.sharing.util.isPortal();t=u.protocol+"//"+(c?esriGeowConfig.self.portalHostname:u.host);u=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboard/index.html#/"+e.id;d=-1<f.indexOf(e.typeKeywords,"TabletLayout");f.indexOf(e.typeKeywords,"DesktopLayout");var m=-1<f.indexOf(e.typeKeywords,"V2");this.couldHaveArcGISDesktop()&&!m?q=f.partial(arcgisonline.sharing.util.openPageAndCount,e.id,t+(c?"/apps/dashboard-win/":"/opsdashboard/")+
"OperationsDashboard.application?open\x3d"+e.id):!m&&d&&this._isOperationsViewSupportedBrowser()&&(q=f.hitch(arcgisonline.sharing.util,"openPageAndCount",e.id,u,!1));t="JavaScript:void(0)";d=esri.i18nBundle.itemLinks.openOperationViewDesktop;u=esri.i18nBundle.itemLinks.open}else"Map Service"==c||"Feature Service"==c||"Image Service"==c||"KML"==c||"Feature Collection"==c||"Stream Service"==c||"Vector Tile Service"===c?(d=e&&e.extraUrlParams?!0:!1,u=!t&&this._isPremiumService(e),t='JavaScript:arcgisonline.map.mapUtil.addToMap("'+
e.id+'",'+u+","+d+")",u=esri.i18nBundle.itemLinks.open,d=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),esriGeowConfig.sceneViewerEnabled&&"Image Service"===c&&-1<f.indexOf(e.typeKeywords,"Elevation 3D Layer")&&(t=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+e.id,d=esri.i18nBundle.itemLinks.addToSceneViewer,u=esri.i18nBundle.itemLinks.open)):"WMS"==
c||"WFS"===c||"WMTS"===c?(t=e.noWebMercator?'JavaScript:arcgisonline.map.mapUtil.openOnGCSMap("'+e.id+'")':'JavaScript:arcgisonline.map.mapUtil.addToMap("'+e.id+'")',u=esri.i18nBundle.itemLinks.open,d=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer)):this.couldHaveArcGISDesktop()&&"Globe Service"==c?(t="JavaScript:void(0)",q=f.hitch(arcgisonline.sharing.util,"openPageAndCount",e.id,e.url+"?f\x3dlyr\x26v\x3d9.3"),u=esri.i18nBundle.itemLinks.open,
d=esri.i18nBundle.itemLinks.openDesktop):this.couldHaveArcGISDesktop()&&("Map Package"==c||"Basemap Package"===c||"Mobile Map Package"==c||"Mobile Basemap Package"===c||"Layer Package"==c||"Pro Map"==c||"Layout"==c||-1<f.indexOf(e.typeKeywords,"lyrx"))?e&&e.name.indexOf(".mmpk")&&e.name.indexOf(".bpk")&&-1===e.name.indexOf(".bpkx")&&-1===e.name.indexOf(".lpkx")&&-1===e.name.indexOf(".mpkx")&&-1===e.name.indexOf(".lyrx")&&-1===e.name.indexOf(".mapx")&&-1===e.name.indexOf(".pagx")?(t="JavaScript:void(0)",
q=f.hitch(this,"_fetchItemData",e,this.getItemPkgPath(e)),u=esri.i18nBundle.itemLinks.open,d=esri.i18nBundle.itemLinks.openDesktop):(t="JavaScript:void(0)",q=f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e)),u=esri.i18nBundle.itemLinks.open,d=esri.i18nBundle.itemLinks.downloadArchive):!this.couldHaveArcGISDesktop()||"Geoprocessing Package"!=c&&"Geoprocessing Service"!=c&&"Locator Package"!=c&&"Tile Package"!=c&&"Vector Tile Package"!=c&&"Scene Package"!==c?!this.couldHaveArcGISDesktop()||"Map Document"!=
c&&"Published Map"!=c&&"Globe Document"!=c&&"Scene Document"!=c&&"Layer"!=c?!this.couldHaveArcGISDesktop()||"Desktop Add In"!=c&&"ArcGIS Pro Add In"!==c?!this.isSilverlightInstalled()||"Explorer Map"!=c&&"Explorer Layer"!=c&&"Explorer Add In"!=c?"File Geodatabase"===c||"CSV Collection"===c||"KML Collection"===c||"Rule Package"===c||"GeoJson"===c||"Shapefile"===c||"CSV"===c||"Map Template"===c||"Code Sample"===c||"Geoprocessing Sample"===c||"Service Definition"===c||"Workflow Manager Package"===c||
"Windows Viewer Add-in"===c||"ArcPad Package"===c||"Operations Dashboard Addin"===c||"CAD Drawing"===c||"Microsoft Word"===c||"Raster function template"===c||"Microsoft PowerPoint"===c||"Microsoft Powerpoint"===c||"Microsoft Excel"===c||"iWork Pages"===c||"iWork Keynote"===c||"iWork Numbers"===c||"Image"===c||"Visio Document"===c||"PDF"===c||"Desktop Application"===c||"Task File"===c||"Project Package"===c||"ArcGIS Pro Configuration"===c||"Project Template"===c||"Desktop Style"===c||"Native Application Installer"===
c||"360 VR Experience"==c?(t="JavaScript:void(0)",q=f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e)),u=esri.i18nBundle.itemLinks.open,d=esri.i18nBundle.itemLinks.downloadArchive):"Web Mapping Application"!=c&&"Application"!=c&&"Native Application"!==c&&"Native Application Template"!==c&&"Hub Initiative"!==c&&"Hub Page"!==c&&"Hub Site Application"!==c||-1!==f.indexOf(e.typeKeywords,"Web AppBuilder for ArcGIS")?"Desktop Application Template"==c?-1<f.indexOf(e.typeKeywords,"desktopApplicationTemplateUrl")&&
e.url&&0<e.url.length?(t="JavaScript:void(0)",q=f.hitch(arcgisonline.sharing.util,"openPageAndCount",e.id,e.url),d=esri.i18nBundle.itemLinks.viewApp,u=esri.i18nBundle.itemLinks.open):(t="JavaScript:void(0)",q=f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e)),u=esri.i18nBundle.itemLinks.open,d=esri.i18nBundle.itemLinks.downloadArchive):"Mobile Application"==c?e.url&&0<e.url.length?(esriGeowConfig.urlKey&&(-1<e.url.indexOf(esriGeowConfig.urlKey)||u&&-1<e.url.indexOf(u))&&(e.originalUrl=e.originalUrl||
f.clone(e.url),e.url=esriGeowConfig.allSSL?e.url.replace("http:","https:"):e.url),t="JavaScript:void(0)",q=f.hitch(arcgisonline.sharing.util,"openPageAndCount",e.id,e.url),u=esri.i18nBundle.itemLinks.open,d=esri.i18nBundle.itemLinks.getApp):(t=esriGeowConfig.baseUrl+"item.html?id\x3d"+e.id,u=esri.i18nBundle.itemLinks.details,d=esri.i18nBundle.itemLinks.viewDetails):"Windows Mobile Package"==c?(t="JavaScript:void(0)",q=f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e)),u=esri.i18nBundle.itemLinks.open,
d=esri.i18nBundle.itemLinks.download):"Document Link"===c?(t="JavaScript:void(0)",q=f.hitch(arcgisonline.sharing.util,"openPageAndCount",e.id,e.url),u=d=esri.i18nBundle.itemLinks.open):"Form"===c&&t&&t.accountId?(t="arcgis-survey123://?itemId\x3d"+e.id+"\x26username\x3d"+t.username,d=esri.i18nBundle.itemLinks.openInSurvey123,u=esri.i18nBundle.itemLinks.open):"Workforce Project"===c?(t=(c=arcgisonline.sharing.util.isPortal())?window.location.host+arcgisonline.sharing.util.getHomeAppContext():"workforce.arcgis.com",
t=window.location.protocol+"//"+t+((c?"/apps/workforce/#":"")+("/projects/"+e.id+"/dispatch/assignments")),d=esri.i18nBundle.itemLinks.openWorkforce,u=esri.i18nBundle.itemLinks.open):"Insights Workbook"===c||"Insights Data Engineering Workbook"===c||"Insights Page"===c||"Insights Model"===c||"Insights Data Engineering Model"===c?(t=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/insights/#/",t="Insights Model"===c||"Insights Data Engineering Model"===
c?t+("?model\x3d"+e.id):"Insights Page"===c?t+("view/"+e.id):t+e.id,d=esri.i18nBundle.itemLinks.openInsights,u=esri.i18nBundle.itemLinks.open):"Dashboard"===c?(q=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboards/index.html#/"+e.id,t="JavaScript:void(0)",q=f.hitch(arcgisonline.sharing.util,"openPageAndCount",e.id,q),d=esri.i18nBundle.itemLinks.dashboardView,u=esri.i18nBundle.itemLinks.open):(t=esriGeowConfig.baseUrl+"item.html?id\x3d"+
e.id,u=esri.i18nBundle.itemLinks.details,d=esri.i18nBundle.itemLinks.viewDetails):(c=arcgisonline.sharing.util.isHostedTemplateItem(e.url),e.url&&0<e.url.length?(esriGeowConfig.urlKey&&(-1<e.url.indexOf(esriGeowConfig.urlKey)||u&&-1<e.url.indexOf(u))&&-1===e.url.indexOf(".opendata")&&(e.originalUrl=e.originalUrl||f.clone(e.url),e.url=esriGeowConfig.allSSL?e.url.replace("http:","https:"):e.url),e.access&&"public"!==e.access&&c&&!arcgisonline.sharing.util.isPortal()&&(q=arcgisonline.sharing.util.parseUrl(e.url),
e.url=e.url.replace(q.host,window.location.hostname)),arcgisonline.sharing.util.isPortal()&&e.url&&0===e.url.indexOf("/")&&(q=esriGeowConfig.self.portalHostname.substring(esriGeowConfig.self.portalHostname.indexOf("/")),-1===e.url.indexOf(q)&&(e.url=q+e.url)),t="JavaScript:void(0)",q=f.hitch(arcgisonline.sharing.util,"openPageAndCount",e.id,e.url),d=esri.i18nBundle.itemLinks.viewApp,u=esri.i18nBundle.itemLinks.open):(t=esriGeowConfig.baseUrl+"item.html?id\x3d"+e.id,u=esri.i18nBundle.itemLinks.details,
d=esri.i18nBundle.itemLinks.viewDetails)):(t="JavaScript:void(0)",q=f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e)),u=esri.i18nBundle.itemLinks.open,d=esri.i18nBundle.itemLinks.openExplorer):(t="JavaScript:void(0)",q=f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e)),u=esri.i18nBundle.itemLinks.open,d=esri.i18nBundle.itemLinks.openDesktop):(t="JavaScript:void(0)",q=f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e)),u=esri.i18nBundle.itemLinks.open,d=esri.i18nBundle.itemLinks.openDesktop):
(t="JavaScript:void(0)",q=f.hitch(this,"_fetchItemData",e,this.getItemPkgPath(e)),u=esri.i18nBundle.itemLinks.open,d="Task File"!==c?esri.i18nBundle.itemLinks.openDesktop:esri.i18nBundle.itemLinks.openProfessional);return{label:u,href:t,target:"",tip:d,onclick:q}},getMapViewerLink:function(e){return e===this.mapViewerUtil.MapViewerType.Classic?esriGeowConfig.baseUrl+"webmap/viewer.html":esriGeowConfig.newMapViewerUrl},getHomePageGalleryLinkInfo:function(e){var c=e.type?e.type:"",u="",t="",d="",q=
null;u=this.getUser();t=!1;d=this.mapViewerUtil.determineMapViewerSetting();t=null;esriGeowConfig.portalHostname&&(t=esriGeowConfig.portalHostname);if(t){var m=t.split(".");1<m.length&&(t=m[m.length-2]+"."+m[m.length-1])}if("Web Map"==c)d=this.getMapViewerLink(d)+"?webmap\x3d"+e.id,m=esriGeowConfig.baseUrl+"signin.html?returnUrl\x3d"+encodeURIComponent(d),t=(t=!u&&this._isPremiumService(e))?m:d,d=esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer),u=esri.i18nBundle.itemLinks.open;
else if("CityEngine Web Scene"===c)t=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/CEWebViewer/viewer.html?3dWebScene\x3d"+e.id,d=esri.i18nBundle.itemLinks.viewApp,u=esri.i18nBundle.itemLinks.open;else if("Web Scene"===c&&esriGeowConfig.sceneViewerEnabled)t=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?webscene\x3d"+e.id,d=esri.i18nBundle.itemLinks.openSceneViewer,
u=esri.i18nBundle.itemLinks.open;else if("Scene Service"===c&&esriGeowConfig.sceneViewerEnabled)t=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+e.id,d=esri.i18nBundle.itemLinks.addToSceneViewer,u=esri.i18nBundle.itemLinks.open;else if("Operation View"===c){t=window.location;c=arcgisonline.sharing.util.isPortal();u=-1<f.indexOf(e.typeKeywords,"V2");t=t.protocol+"//"+(c?esriGeowConfig.self.portalHostname:t.host);
d=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboard/index.html#/"+e.id;m=this.couldHaveArcGISDesktop();if(u)return null;if(m)t=t+(c?"/apps/dashboard-win/":"/opsdashboard/")+"OperationsDashboard.application?open\x3d"+e.id;else if(this._isOperationsViewSupportedBrowser())t=d;else return null;d=esri.i18nBundle.itemLinks.openOperationViewDesktop;u=esri.i18nBundle.itemLinks.open}else if("Map Service"==c||"Feature Service"==c||"Image Service"==
c||"KML"==c||"Stream Service"==c||"Vector Tile Service"===c||"Feature Collection"==c){d=this.getMapViewerLink(d)+"?layers\x3d"+e.id;if("KML"==c||"Stream Service"==c||"Feature Collection"==c)d=esriGeowConfig.baseUrl+"webmap/viewer.html?layers\x3d"+e.id;m=esriGeowConfig.baseUrl+"signin.html?returnUrl\x3d"+encodeURIComponent(d);t=(t=!u&&this._isPremiumService(e))?m:d;u=esri.i18nBundle.itemLinks.open;d=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer);
esriGeowConfig.sceneViewerEnabled&&"Image Service"===c&&-1<f.indexOf(e.typeKeywords,"Elevation 3D Layer")&&(t=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+e.id,d=esri.i18nBundle.itemLinks.addToSceneViewer,u=esri.i18nBundle.itemLinks.open)}else"WMS"==c||"WFS"===c||"WMTS"===c?(t=esriGeowConfig.baseUrl+"webmap/viewer.html?layers\x3d"+e.id,u=esri.i18nBundle.itemLinks.open,d=esri.substitute({appTitle:esriGeowConfig.portalName||
"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer)):this.couldHaveArcGISDesktop()&&"Globe Service"==c?(t="JavaScript:void(0)",q=f.hitch(arcgisonline.sharing.util,"openPageAndCount",e.id,e.url+"?f\x3dlyr\x26v\x3d9.3"),u=esri.i18nBundle.itemLinks.open,d=esri.i18nBundle.itemLinks.openDesktop):this.couldHaveArcGISDesktop()&&("Map Package"==c||"Mobile Map Package"==c||"Basemap Package"===c||"Mobile Basemap Package"===c||"Layer Package"==c||"Pro Map"==c||"Layout"==c||-1<f.indexOf(e.typeKeywords,"lyrx"))?
e&&-1===e.name.indexOf(".bpkx")&&-1===e.name.indexOf(".mmpk")&&-1===e.name.indexOf(".bpk")&&-1===e.name.indexOf(".lpkx")&&-1===e.name.indexOf(".mpkx")&&-1===e.name.indexOf(".lyrx")&&-1===e.name.indexOf(".mapx")&&-1===e.name.indexOf(".pagx")?(t="JavaScript:void(0)",q=f.hitch(this,"_fetchItemData",e,this.getItemPkgPath(e)),u=esri.i18nBundle.itemLinks.open,d=esri.i18nBundle.itemLinks.openDesktop):(t="JavaScript:void(0)",q=f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e)),u=esri.i18nBundle.itemLinks.open,
d=esri.i18nBundle.itemLinks.downloadArchive):!this.couldHaveArcGISDesktop()||"Geoprocessing Package"!=c&&"Locator Package"!=c&&"Tile Package"!=c&&"Vector Tile Package"!=c?!this.couldHaveArcGISDesktop()||"Map Document"!=c&&"Published Map"!=c&&"Globe Document"!=c&&"Scene Document"!=c&&"Layer"!=c?!this.couldHaveArcGISDesktop()||"Desktop Add In"!=c&&"ArcGIS Pro Add In"!==c?!this.isSilverlightInstalled()||"Explorer Map"!=c&&"Explorer Layer"!=c&&"Explorer Add In"!=c?"File Geodatabase"===c||"CSV Collection"===
c||"KML Collection"===c||"Rule Package"===c||"GeoJson"===c||"Shapefile"===c||"CSV"===c||"Map Template"===c||"Code Sample"===c||"Geoprocessing Sample"===c||"Service Definition"===c||"Workflow Manager Package"===c||"Windows Viewer Add-in"===c||"ArcPad Package"===c||"Operations Dashboard Addin"===c||"Microsoft Word"===c||"CAD Drawing"===c||"Raster function template"===c||"Microsoft PowerPoint"===c||"Microsoft Powerpoint"===c||"Microsoft Excel"===c||"iWork Pages"===c||"iWork Keynote"===c||"iWork Numbers"===
c||"Image"===c||"Visio Document"===c||"PDF"===c||"Desktop Application"===c||"Task File"===c||"Project Package"===c||"ArcGIS Pro Configuration"===c||"Project Template"===c||"Desktop Style"===c||"Native Application Installer"===c||"360 VR Experience"==c?(t="JavaScript:void(0)",q=f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e)),u=esri.i18nBundle.itemLinks.open,d=esri.i18nBundle.itemLinks.downloadArchive):"Desktop Application Template"==c?-1<f.indexOf(e.typeKeywords,"desktopApplicationTemplateUrl")&&
e.url&&0<e.url.length?(t="JavaScript:void(0)",q=f.hitch(arcgisonline.sharing.util,"openPageAndCount",e.id,e.url),u=d=esri.i18nBundle.itemLinks.open):(t="JavaScript:void(0)",q=f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e)),u=esri.i18nBundle.itemLinks.open,d=esri.i18nBundle.itemLinks.downloadArchive):"Web Mapping Application"==c&&-1===f.indexOf(e.typeKeywords,"Web AppBuilder for ArcGIS")||"Hub Initiative"===c||"Hub Page"===c||"Hub Site Application"===c?(c=arcgisonline.sharing.util.isHostedTemplateItem(e.url),
e.url&&0<e.url.length?(esriGeowConfig.urlKey&&(-1<e.url.indexOf(esriGeowConfig.urlKey)||t&&-1<e.url.indexOf(t))&&-1===e.url.indexOf(".opendata")&&(e.url=esriGeowConfig.allSSL?e.url.replace("http:","https:"):e.url),e.access&&"public"!==e.access&&c&&!arcgisonline.sharing.util.isPortal()&&(q=arcgisonline.sharing.util.parseUrl(e.url),e.url=e.url.replace(q.host,window.location.hostname)),arcgisonline.sharing.util.isPortal()&&e.url&&0===e.url.indexOf("/")&&(q=esriGeowConfig.self.portalHostname.substring(esriGeowConfig.self.portalHostname.indexOf("/")),
-1===e.url.indexOf(q)&&(e.url=q+e.url)),t="JavaScript:void(0)",q=f.hitch(arcgisonline.sharing.util,"openPageAndCount",e.id,e.url),d=esri.i18nBundle.itemLinks.viewApp,u=esri.i18nBundle.itemLinks.open):(t=esriGeowConfig.baseUrl+"item.html?id\x3d"+e.id,u=esri.i18nBundle.itemLinks.details,d=esri.i18nBundle.itemLinks.viewDetails)):"Mobile Application"==c?e.url&&0<e.url.length?(esriGeowConfig.urlKey&&(-1<e.url.indexOf(esriGeowConfig.urlKey)||t&&-1<e.url.indexOf(t))&&(e.url=esriGeowConfig.allSSL?e.url.replace("http:",
"https:"):e.url),t="JavaScript:void(0)",q=f.hitch(arcgisonline.sharing.util,"openPageAndCount",e.id,e.url),u=esri.i18nBundle.itemLinks.open,d=esri.i18nBundle.itemLinks.getApp):(t=esriGeowConfig.baseUrl+"item.html?id\x3d"+e.id,u=esri.i18nBundle.itemLinks.details,d=esri.i18nBundle.itemLinks.viewDetails):"Windows Mobile Package"==c?(t="JavaScript:void(0)",q=f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e)),u=esri.i18nBundle.itemLinks.open,d=esri.i18nBundle.itemLinks.download):"Document Link"===
c?(t="JavaScript:void(0)",q=f.hitch(arcgisonline.sharing.util,"openPageAndCount",e.id,e.url),u=d=esri.i18nBundle.itemLinks.open):"Form"===c&&(!u||u&&u.accountId)?(t=(esriGeowConfig.surveyUrl||"https://survey123.arcgis.com")+"/share/"+e.id+"?portalUrl\x3d"+(location.protocol+"//"+(esriGeowConfig.self.urlKey?esriGeowConfig.self.urlKey+"."+esriGeowConfig.self.customBaseUrl:esriGeowConfig.self.portalHostname)),d=esri.i18nBundle.itemLinks.openSurvey123,u=esri.i18nBundle.itemLinks.open):"Workforce Project"===
c?(u=(c=arcgisonline.sharing.util.isPortal())?window.location.host+arcgisonline.sharing.util.getHomeAppContext():"workforce.arcgis.com",t=window.location.protocol+"//"+u+((c?"/apps/workforce/#":"")+("/projects/"+e.id+"/dispatch/assignments")),d=esri.i18nBundle.itemLinks.openWorkforce,u=esri.i18nBundle.itemLinks.open):"Insights Workbook"===c||"Insights Data Engineering Workbook"===c||"Insights Page"===c||"Insights Model"===c||"Insights Data Engineering Model"===c?(u=window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/apps/insights/#/",t=u="Insights Model"===c||"Insights Data Engineering Model"===c?u+("?model\x3d"+e.id):"Insights Page"===c?u+("view/"+e.id):u+e.id,d=esri.i18nBundle.itemLinks.openInsights,u=esri.i18nBundle.itemLinks.open):"Dashboard"===c?(t=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboards/index.html#/"+e.id,d=esri.i18nBundle.itemLinks.dashboardView,u=esri.i18nBundle.itemLinks.open):"StoryMap"===
c?(t="JavaScript:void(0)",q=f.hitch(arcgisonline.sharing.util,"openPageAndCount",e.id,e.url),u=d=esri.i18nBundle.itemLinks.open):"Web Experience"===c&&e.webExperienceUrl?(t=e.webExperienceUrl,u=d=esri.i18nBundle.itemLinks.open):(t=esriGeowConfig.baseUrl+"item.html?id\x3d"+e.id,u=esri.i18nBundle.itemLinks.details,d=esri.i18nBundle.itemLinks.viewDetails):(t="JavaScript:void(0)",q=f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e)),u=esri.i18nBundle.itemLinks.open,d=esri.i18nBundle.itemLinks.openExplorer,
d=esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer)):(t="JavaScript:void(0)",q=f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e)),u=esri.i18nBundle.itemLinks.open,d=esri.i18nBundle.itemLinks.openDesktop):(t="JavaScript:void(0)",q=f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e)),u=esri.i18nBundle.itemLinks.open,d=esri.i18nBundle.itemLinks.openDesktop):(t="JavaScript:void(0)",q=f.hitch(this,"_fetchItemData",e,this.getItemPkgPath(e)),u=esri.i18nBundle.itemLinks.open,d=
"Task File"!==c?esri.i18nBundle.itemLinks.openDesktop:esri.i18nBundle.itemLinks.openProfessional);return{label:u,href:t,target:"",tip:d,onclick:q}},getItemOpenLinkObjects:function(e,c){var u=this.isSilverlightInstalled(),t=[],d=e.type?e.type:"",q=this.getUser(),m=!1;if("Web Map"==d&&-1==f.indexOf(e.typeKeywords,"ArcGIS Online")&&u&&esriGeowConfig.explorerOnline)t.push({label:esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer),onClick:f.partial(arcgisonline.map.mapUtil.openMap,e.id,
m)}),this.couldHaveArcGISDesktop()&&t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",e,this.getItemPkgPath(e))});else if("Web Map"==d)m=!q&&this._isPremiumService(e),t.push({label:esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer),onClick:f.partial(arcgisonline.map.mapUtil.openMap,e.id,m)}),this.couldHaveArcGISDesktop()&&t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",e,this.getItemPkgPath(e))});else if("Map Service"==
d||"Vector Tile Service"===d)m=!q&&this._isPremiumService(e),t.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),onClick:f.partial(arcgisonline.map.mapUtil.addToMap,e.id,m)}),t.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:f.partial(arcgisonline.map.mapUtil.openOnMap,e.id,m)}),esriGeowConfig.sceneViewerEnabled&&t.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,
onClick:f.partial(arcgisonline.sharing.util.openPageAndCount,e.id,window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+e.id,!0)}),"Vector Tile Service"!==d?(this.couldHaveArcGISDesktop()&&!arcgisonline.sharing.util.isHostedServiceItem(e)&&(-1<f.indexOf(e.typeKeywords,"Hosted Service")&&arcgisonline.sharing.util.portalSupportsHostedServices()?t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,
"_fetchItemData",e,this.getPItemPath(e))}):!arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onAGOLFederatedServer(e.url)||arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onFederatedServer(e.url)?t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",e,this.getPItemPath(e))}):e.url&&-1!==e.url.indexOf(".arcgis.com/")&&-1!==e.url.indexOf("//landscape")?t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",
e,this.getPItemPath(e))}):t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.partial(arcgisonline.sharing.util.openPageAndCount,e.id,e.url+"?f\x3dlyr\x26v\x3d9.3")})),this.couldHaveArcGISDesktop()&&arcgisonline.sharing.util.isHostedServiceItem(e)&&t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",e,this.getPItemPath(e))})):(d=e.access&&"public"!==e.access&&q&&q.token?"\x26token\x3d"+q.token:"",q=(e&&e.hasResources?esriGeowConfig.restBaseUrl+"content/items/"+
e.id:e.url)+"/resources/styles/root.json?f\x3dpjson",esri.isDefined(e.hasResources)&&(c&&e&&e.hasResources&&t.push({label:esri.i18nBundle.itemLinks.downloadStyle,onClick:f.partial(arcgisonline.sharing.util.openPage,q+"\x26download\x3dtrue"+d,!0)}),(c&&e&&e.hasResources||e.url&&-1<e.url.indexOf("/VectorTileServer"))&&t.push({label:esri.i18nBundle.itemLinks.viewStyle,onClick:f.partial(arcgisonline.sharing.util.openPage,q+d,!1)})));else if(this.couldHaveArcGISDesktop()&&"Globe Service"==d)t.push({label:esri.i18nBundle.itemLinks.openDesktop,
onClick:f.partial(arcgisonline.sharing.util.openPageAndCount,e.id,e.url+"?f\x3dlyr\x26v\x3d9.3")});else if("Image Service"==d||"Feature Service"==d||"KML"==d||"Feature Collection"==d||"Stream Service"==d){c=e&&e.extraUrlParams?!0:!1;m=!q&&this._isPremiumService(e);if("Image Service"!==d||"Image Service"===d&&-1===f.indexOf(e.typeKeywords,"Elevation 3D Layer"))t.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),onClick:f.partial(arcgisonline.map.mapUtil.addToMap,
e.id,m,c)}),t.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:f.partial(arcgisonline.map.mapUtil.openOnMap,e.id,m,c)});if("KML"==d)this.couldHaveArcGISDesktop()&&t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",e,this.getPItemPath(e))}),t.push({label:esri.i18nBundle.itemLinks.download,onClick:f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e))});else if("Image Service"===
d||"Feature Service"===d)esriGeowConfig.sceneViewerEnabled&&-1===f.indexOf(e.typeKeywords,"Table")&&("Feature Service"===d&&-1===f.indexOf(e.typeKeywords,"HasOnlyMultipatchGeometries")||"Image Service"===d&&-1<f.indexOf(e.typeKeywords,"Elevation 3D Layer"))&&t.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:f.partial(arcgisonline.sharing.util.openPageAndCount,e.id,window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+
e.id,!0)}),this.couldHaveArcGISDesktop()&&"Image Service"===d&&(e.url&&-1!==e.url.indexOf(".arcgis.com/")||!arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onAGOLFederatedServer(e.url)||arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onFederatedServer(e.url)?t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",e,this.getPItemPath(e))}):t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.partial(arcgisonline.sharing.util.openPageAndCount,
e.id,e.url+"?f\x3dlyr\x26v\x3d9.3")})),this.couldHaveArcGISDesktop()&&"Feature Service"===d&&this.couldHaveArcGISDesktop()&&t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",e,this.getPItemPath(e))})}else if("Geoprocessing Service"===d&&this.couldHaveArcGISDesktop())t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",e,this.getPItemPath(e))});else if("WMS"==d||"WFS"===d||"WMTS"===d)e.noWebMercator?t.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||
"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:f.partial(arcgisonline.map.mapUtil.openOnGCSMap,e.id)}):(t.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),onClick:f.partial(arcgisonline.map.mapUtil.addToMap,e.id)}),t.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:f.partial(arcgisonline.map.mapUtil.openOnMap,e.id)})),esriGeowConfig.sceneViewerEnabled&&
t.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:f.partial(arcgisonline.sharing.util.openPageAndCount,e.id,window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+e.id,!0)}),this.couldHaveArcGISDesktop()&&t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",e,this.getPItemPath(e))});else if("File Geodatabase"===d||"CSV Collection"===d||"KML Collection"===d||"Rule Package"==
d||"CSV"==d||"GeoJson"===d||"Shapefile"==d||"Service Definition"==d||"ArcPad Package"===d||"Operations Dashboard Addin"===d)t.push({label:esri.i18nBundle.itemLinks.download,onClick:f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e))});else if("Map Package"==d||"Mobile Map Package"===d||"Basemap Package"===d||"Mobile Basemap Package"===d||"Layer Package"==d||"Pro Map"==d||"Layout"==d||-1<f.indexOf(e.typeKeywords,"lyrx"))this.couldHaveArcGISDesktop()&&e&&-1===e.name.indexOf(".bpkx")&&-1===e.name.indexOf(".mmpk")&&
-1===e.name.indexOf(".bpk")&&-1===e.name.indexOf(".lpkx")&&-1===e.name.indexOf(".mpkx")&&-1===e.name.indexOf(".lyrx")&&-1===e.name.indexOf(".mapx")&&-1===e.name.indexOf(".pagx")&&t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",e,this.getItemPkgPath(e))}),t.push({label:esri.i18nBundle.itemLinks.download,onClick:f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e))});else if("Geoprocessing Package"==d||"Locator Package"==d||"Tile Package"==d||"Vector Tile Package"==
d||"Project Package"===d||"Project Template"===d)this.couldHaveArcGISDesktop()&&"Task File"!==d&&"Project Package"!==d&&"Project Template"!==d&&t.push({label:"Task File"!==d?esri.i18nBundle.itemLinks.openDesktop:esri.i18nBundle.itemLinks.openProfessional,onClick:f.hitch(this,"_fetchItemData",e,this.getItemPkgPath(e))}),t.push({label:esri.i18nBundle.itemLinks.download,onClick:f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e))});else if("Scene Package"==d)t.push({label:esri.i18nBundle.itemLinks.download,
onClick:f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e))});else if(!this.couldHaveArcGISDesktop()||"Map Document"!=d&&"Published Map"!=d&&"Globe Document"!=d&&"Scene Document"!=d&&"Layer"!=d)if(!this.couldHaveArcGISDesktop()||"Desktop Add In"!=d&&"ArcGIS Pro Add In"!==d)if("Explorer Layer"==d||"Explorer Add In"==d||"Explorer Map"==d)t.push({label:esri.i18nBundle.itemLinks.openExplorer,onClick:f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e))});else if("Map Template"===d||"Code Sample"===
d||"Geoprocessing Sample"===d||"Workflow Manager Package"===d||"Windows Viewer Add In"===d||"Microsoft Word"===d||"CAD Drawing"===d||"Raster function template"===d||"Microsoft PowerPoint"===d||"Microsoft Powerpoint"===d||"Microsoft Excel"===d||"iWork Pages"===d||"iWork Keynote"===d||"iWork Numbers"===d||"Image"===d||"Visio Document"===d||"PDF"===d||"Desktop Application"===d||"Task File"===d||"Desktop Style"===d||"Native Application Installer"===d||"360 VR Experience"==d||"ArcGIS Pro Configuration"===
d)t.push({label:"PDF"!==d?esri.i18nBundle.itemLinks.download:esri.i18nBundle.itemLinks.open,onClick:f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e))});else if("Desktop Application Template"===d)(c=-1<f.indexOf(e.typeKeywords,"desktopApplicationTemplateUrl"))&&e.url&&e.url.length&&(c=!0,t.push({label:esri.i18nBundle.itemLinks.open,onClick:f.partial(arcgisonline.sharing.util.openPageAndCount,e.id,e.url)})),c||t.push({label:esri.i18nBundle.itemLinks.download,onClick:f.hitch(this,"_fetchItemData",
e,this.getItemDataPath(e))});else if("Web Mapping Application"==d&&-1===f.indexOf(e.typeKeywords,"Web AppBuilder for ArcGIS")||"Mobile Application"==d||"Application"==d||"Native Application"===d||"Native Application Template"===d||"Hub Initiative"===d||"Hub Page"===d||"Hub Site Application"===d)arcgisonline.sharing.util.isHostedTemplateItem(e.url),q=esri.i18nBundle.itemLinks.viewApp,"Mobile Application"==d&&(q=esri.i18nBundle.itemLinks.getApp),arcgisonline.sharing.util.isPortal()&&e.url&&0===e.url.indexOf("/")&&
(d=esriGeowConfig.self.portalHostname.substring(esriGeowConfig.self.portalHostname.indexOf("/")),-1===e.url.indexOf(d)&&(e.url=d+e.url)),e.url&&0<e.url.length&&t.push({label:q,onClick:f.partial(arcgisonline.sharing.util.openPageAndCount,e.id,e.url)}),-1<f.indexOf(e.typeKeywords,"Web AppBuilder")&&c&&(e=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/webappbuilder/index.html?id\x3d"+e.id,e="https:"===window.location.protocol?arcgisonline.sharing.util.getSecureUrl(e):
arcgisonline.sharing.util.getHttpUrl(e),t.push({label:esri.i18nBundle.itemLinks.editApp,onClick:f.partial(arcgisonline.sharing.util.openPage,e,!0)}));else if("Windows Mobile Package"==d)t.push({label:esri.i18nBundle.itemLinks.download,onClick:f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e))});else if("CityEngine Web Scene"==d)d=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/CEWebViewer/viewer.html?3dWebScene\x3d"+e.id,t.push({label:esri.i18nBundle.itemLinks.viewApp,
onClick:f.partial(arcgisonline.sharing.util.openPage,d)}),t.push({label:esri.i18nBundle.itemLinks.download,onClick:f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e))});else if("Web Scene"===d&&esriGeowConfig.sceneViewerEnabled)d=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?webscene\x3d"+e.id,t.push({label:esri.i18nBundle.itemLinks.openSceneViewer,onClick:f.partial(arcgisonline.sharing.util.openPage,d,!0)});else if("Scene Service"===
d&&esriGeowConfig.sceneViewerEnabled)d=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+e.id,t.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:f.partial(arcgisonline.sharing.util.openPageAndCount,e.id,d,!0)});else if("Operation View"===d){d=window.location;c=arcgisonline.sharing.util.isPortal();q=d.protocol+"//"+(c?esriGeowConfig.self.portalHostname:d.host);m=window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboard/index.html#/"+e.id;u=-1<f.indexOf(e.typeKeywords,"TabletLayout");f.indexOf(e.typeKeywords,"DesktopLayout");var a=-1<f.indexOf(e.typeKeywords,"V2"),h=this.couldHaveArcGISDesktop();d=this._isOperationsViewSupportedBrowser();h&&!a&&t.push({label:esri.i18nBundle.itemLinks.openOperationViewDesktop,onClick:f.partial(arcgisonline.sharing.util.openPage,q+(c?"/apps/dashboard-win/":"/opsdashboard/")+"OperationsDashboard.application?open\x3d"+e.id)});
!a&&u&&d&&t.push({label:esri.i18nBundle.itemLinks.openOperationViewUrl,onClick:f.partial(arcgisonline.sharing.util.openPage,m,!1)})}else"Document Link"===d?t.push({label:esri.i18nBundle.itemLinks.open,onClick:f.partial(arcgisonline.sharing.util.openPageAndCount,e.id,e.url)}):"Form"===d&&q&&q.accountId?t.push({label:esri.i18nBundle.itemLinks.openSurvey123,onClick:f.partial(arcgisonline.sharing.util.openPage,"arcgis-survey123://?itemId\x3d"+e.id+"\x26username\x3d"+q.username,!0)}):"Workforce Project"===
d?(d=(c=arcgisonline.sharing.util.isPortal())?window.location.host+arcgisonline.sharing.util.getHomeAppContext():"workforce.arcgis.com",t.push({label:esri.i18nBundle.itemLinks.openWorkforce,onClick:f.partial(arcgisonline.sharing.util.openPage,window.location.protocol+"//"+d+((c?"/apps/workforce/#":"")+("/projects/"+e.id+"/dispatch/assignments")),!0)})):"Insights Workbook"===d||"Insights Data Engineering Workbook"===d||"Insights Page"===d||"Insights Model"===d||"Insights Data Engineering Model"===
d?(c=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/insights/#/",c="Insights Model"===d||"Insights Data Engineering Model"===d?c+("?model\x3d"+e.id):"Insights Page"===d?c+("view/"+e.id):c+e.id,t.push({label:esri.i18nBundle.itemLinks.openInsights,onClick:f.partial(arcgisonline.sharing.util.openPage,c,!0)})):"Dashboard"===d&&(q=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboards/index.html#/",
d=this._isOperationsViewSupportedBrowser(!0),e=q+e.id,q=e+"?edit\x3dtrue",t.push({label:esri.i18nBundle.itemLinks.dashboardView,onClick:f.partial(arcgisonline.sharing.util.openPage,e,!1)}),c&&d&&t.push({label:esri.i18nBundle.itemLinks.dashboardEdit,onClick:f.partial(arcgisonline.sharing.util.openPage,q,!1)}));else t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",e,this.getItemDataPath(e))});else t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,
"_fetchItemData",e,this.getItemDataPath(e))});return t},getGroupLinks:function(e){var c=f.create,u=c("span",{class:"esriItemLinks",style:"white-space: nowrap"});c("a",{href:esriGeowConfig.baseUrl+"group.html?id\x3d"+e.id,innerHTML:esri.i18nBundle.itemLinks.details,title:esri.i18nBundle.itemLinks.viewGroupDetails,alt:esri.i18nBundle.itemLinks.viewGroupDetails},u);return u},getItemDataPath:function(e){var c=arcgisonline.sharing.util.getToken(),u=c?"?token\x3d"+c:"",t=esriGeowConfig.restBaseUrl+"content/items/"+
e.id+"/data";return"KML"==e.type&&(u="public"!==e.access&&c?"?token\x3d"+c:"",e.url&&-1===e.url.indexOf(t))?e.url+u:t+u},getItemPkgPath:function(e){var c=arcgisonline.sharing.util.getToken();return esriGeowConfig.restBaseUrl+"content/items/"+e.id+"/item.pkinfo"+(c?"?token\x3d"+c:"")},getPItemPath:function(e){var c=arcgisonline.sharing.util.getToken();return esriGeowConfig.restBaseUrl+"content/items/"+e.id+"/item.pitem"+(c?"?token\x3d"+c:"")},getItemZipPath:function(e){var c=arcgisonline.sharing.util.getToken();
return esriGeowConfig.restBaseUrl+"content/items/"+e.id+"/data?f\x3dzip"+(c?"\x26token\x3d"+c:"")},getUser:function(){return esriGeowConfig.userInfo||null},meetsPasswordStrength:function(e){return 8<=e.length&&e.match("^.*(?\x3d.*\\d)(?\x3d.*[a-zA-Z]).*$")},meetsPasswordPolicyStrength:function(e,c){var u={meetsRequirements:function(){return this.minLength&&this.minLetter&&this.minUpper&&this.minLower&&this.minDigit&&this.minOther},minLength:!0,minLetter:!0,minUpper:!0,minLower:!0,minDigit:!0,minOther:!0};
if(c&&0<c.length){e.minLength&&(u.minLength=c.length>=e.minLength);if(e.minLetter){var t=c.match(/[A-Za-z]/g);u.minLetter=!!(t&&t.length>=e.minLetter)}e.minUpper&&(t=c.match(/[A-Z]/g),u.minUpper=!!(t&&t.length>=e.minUpper));e.minLower&&(t=c.match(/[a-z]/g),u.minLower=!!(t&&t.length>=e.minLower));e.minDigit&&(t=c.match(/[0-9]/g),u.minDigit=!!(t&&t.length>=e.minDigit));e.minOther&&(c=c.match(/[\\!"#\$%&'\(\)\*\+,-\./:;<=>\?@\[\]\^_`\{\|}~]/g),u.minOther=!!(c&&c.length>=e.minOther))}else e.minLength&&
(u.minLength=!1),e.minLetter&&(u.minLetter=!1),e.minUpper&&(u.minUpper=!1),e.minLower&&(u.minLower=!1),e.minDigit&&(u.minDigit=!1),e.minOther&&(u.minOther=!1);return u},userPreferences:function(e,c,u){var t=f.cookie(c||"esri_prefs");if(e)t&&(e=f.mixin(f.json.parse(t),e)),f.cookie(c||"esri_prefs",f.json.stringify(e),{path:"/",expires:1E4,sameSite:"Strict"}),e.contentMode&&u&&this.getUser()?(t=f.create,u=t("form",{method:"POST"},f.body()),t("input",{type:"hidden",name:"preferredView",value:e.contentMode},
u),t("input",{type:"hidden",name:"clearEmptyFields",value:"false"},u),arcgisonline.sharing.geow.Community.updateProfile(u,function(d){f.publish("esri/userPreferences"+(c||"user_prefs"),[e])})):f.publish("esri/userPreferences"+(c||"user_prefs"),[e]);else return u="contentModePrefs"===c?esriGeowConfig.userInfo&&esriGeowConfig.userInfo.preferredView:null,null!=t?f.json.parse(t):u?{contentMode:u}:{}},getToken:function(){return!1===this.isLoggedIn()?"":esriGeowConfig.userInfo.credential&&esriGeowConfig.userInfo.credential.token||
esriGeowConfig.userInfo.token},callPage:function(e){window.location=arcgisonline.sharing.util.replaceSSL(esriGeowConfig.baseUrl+e)},openPageAndCount:function(e,c,u){e=esriGeowConfig.restBaseUrl+"content/items/"+e+"/data";var t=arcgisonline.sharing.util.getToken(),d={f:"json"};null!=t&&""!==t&&(d.token=t);esri.request({url:e,content:d,callbackParamName:"callback"});arcgisonline.sharing.util.openPage(c,"boolean"===typeof u?u:!1)},openPage:function(e,c){c?window.location=e:window.open(e)},fix:function(e){null!=
e&&1==e.length&&null!=e[0]&&0<e[0].length&&(e=e[0]);return e.replace(/&lt;/g,"\x3c")},stripHTML:function(e){return e?-1<e.indexOf("\x3c")&&-1<e.indexOf("\x3e")?e.replace(/<[^>]+>/g,""):e:e},urlToObject:function(e){e=esri.urlToObject(e);e.query=e.query||{};for(var c in e.query)e.query.hasOwnProperty(c)&&(Array.isArray(e.query[c])||(e.query[c]=e.query[c].replace(/(&lt;|&gt;|<|>|%3C|%3E)/g,"")));return e},linkifyText:function(e){e=e.split(" ");for(var c=0;c<e.length;c++)if(0===e[c].indexOf("http://")||
0===e[c].indexOf("https://"))e[c]="\x3ca href\x3d'"+e[c]+"' target\x3d'_blank'\x3e"+e[c]+"\x3c/a\x3e";return e.join(" ")},removeHTMLTags:function(e){if(null==e)return"";e=e.replace(/&(lt|gt);/g,function(c,u){return"lt"==u?"\x3c":"\x3e"});return e.replace(/<\/?[^>]+(>|$)/g,"")},escapeHTML:function(e){var c={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#39;","/":"\x26#x2F;"};return String(e).replace(/[&<>"'\/]/g,function(u){return c[u]})},unescapeHTML:function(e){return String(e).replace("\x26lt;",
"\x3c").replace("\x26gt;","\x3e").replace("\x26quot;",'"').replace("\x26#39;","'").replace("\x26#x2F;","/").replace("\x26amp;","\x26")},getSnippet:function(e,c){if(null==e||0===e.length)c=arcgisonline.sharing.util.removeHTMLTags(c),e=180<c.length?c.substring(0,180)+" ...":c;return e},trimTags:function(e){for(;-1<e.indexOf("  ");)e=e.replace(/  /g," ");for(;-1<e.indexOf(",,");)e=e.replace(/,,/g,",");return e=f.trim(e.replace(/, ,/,",").replace(/^,/,"").replace(/,$/,""))},postProcessUri:function(e){e=
0<=e.indexOf("?")?e+"\x26f\x3djson":e+"?f\x3djson";var c=this.getToken();null!=c&&""!==c&&(e=e+"\x26token\x3d"+c);return this.useSSL(e)},replaceSSL:function(e){return!1===esriGeowConfig.useSSL?e:e.replace("http://","https://")},useSSL:function(e){return"https:"===window.location.protocol||esriGeowConfig.self&&!0===esriGeowConfig.self.allSSL?e.replace("http:","https:"):e},errorHandler:function(e,c,u,t){e&&e.code&&"IdentityManagerBase.5"===e.code&&(e.code=498);if(-1<u.indexOf(esriGeowConfig.restBaseUrl)&&
e.code&&498==e.code||403==e.code||400==e.code&&"Invalid account"==e.message)if(403==e.code&&!0===this.isLoggedIn())u&&-1<u.toLowerCase().indexOf("/generatetoken")?window.location.href=esriGeowConfig.baseUrl+"signin.html":u&&-1<u.indexOf("/invitations/")&&t?t(e,c):0>window.location.href.indexOf(esriGeowConfig.baseUrl+"error.html")&&("Request not made over ssl"==e.message?window.location=esriGeowConfig.baseUrl+"error.html?c\x3dSSLRequired":arcgisonline.sharing.util.checkSubscriptionStatus(e)&&(window.location=
esriGeowConfig.baseUrl+"error.html?c\x3dAccessDeniedResource"));else{if(!(403===e.code&&!arcgisonline.sharing.util.checkSubscriptionStatus(e)||403===e.code&&!1===esriGeowConfig.isMultiTenant&&-1<f.indexOf(["COM_0056","COM_0057","SB_0008"],e.messageCode))){esriGeowConfig.userInfo=null;f.cookie("esri_auth",null,{expires:-1,path:"/",domain:document.domain});f.cookie("esri_auth",null,{expires:-1,path:"/",domain:".arcgis.com"});f.cookie("esri_auth",null,{expires:-1,path:"/",domain:".esri.com"});arcgisonline.sharing.util&&
arcgisonline.sharing.util._cookies&&arcgisonline.sharing.util._cookies.arcgis_auth&&delete arcgisonline.sharing.util._cookies.arcgis_auth;c="";-1==esriGeowConfig.signin.indexOf("http")&&(c=esriGeowConfig.baseUrl,!1!==esriGeowConfig.useSSL&&(c=c.replace("http:","https:")));c+=esriGeowConfig.signin;u="";t=c+("?error\x3d"+e.code);var d=f.queryToObject(window.location.search.slice(1)).returnUrl;0>window.location.href.indexOf(t)?-1<window.location.href.indexOf(esriGeowConfig.webmapViewerPath)&&arcgisonline.map&&
arcgisonline.map.main&&arcgisonline.map.main.map&&arcgisonline.map.main.mapInitialized?(arcgisonline.map.storage.saveMapInCookie(null,!1),u="\x26returnUrl\x3d"+encodeURIComponent(esriGeowConfig.baseUrl+esriGeowConfig.webmapViewerPath+"?useExisting\x3d1")):u="\x26returnUrl\x3d"+encodeURIComponent(d?d:window.location):d&&(u="\x26returnUrl\x3d"+encodeURIComponent(d));t+=u;0>window.location.href.indexOf(t)?window.location=t:"User not part of this account"===e.message&&(window.location=c+"?error\x3d400"+
u)}}else t&&t(e,c)},checkSubscriptionStatus:function(e){var c=["SB_0001","SB_0002","SB_0003","SB_0004"],u=["SB_0005","SB_0006","SB_0007"],t=esriGeowConfig.self&&esriGeowConfig.self.subscriptionInfo&&"suspended"===esriGeowConfig.self.subscriptionInfo.state;if(!(esriGeowConfig.self&&esriGeowConfig.self.subscriptionInfo&&"restricted"===esriGeowConfig.self.subscriptionInfo.state||t)){if(-1!==f.indexOf(c,e.messageCode))return arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg.prototype.statics.getInstance().show(esriGeowConfig.self.subscriptionInfo),
!1;if(-1!==f.indexOf(u,e.messageCode))return arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg.prototype.statics.getInstance().showOther(e.messageCode),!1}return!0},isValidSubscriptionState:function(){var e=esriGeowConfig.self.subscriptionInfo,c=["cancelled","expired","suspended","restricted"];return!e||-1===c.indexOf(e.state)},checkError:function(e){var c;return-1!==f.indexOf("COM_0044 COM_0047 CONT_0046 CONT_0047 COM_1043 COM_1044 COM_1045 COM_1046".split(" "),e.messageCode)?(e=(c=f.mixin({},
f.i18n.getLocalization("arcgisonline","arcgisonline").common))&&c.errors&&c.errors[e.messageCode]?{message:c.errors[e.messageCode]}:e,e=f.mixin(f.mixin({},c.errors.genericError),e),esriGeowConfig.hideDefaultCheckErrorMessage||(c=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance(),c.show(e)),!1):!0},handler:function(e,c,u,t,d){e.error&&""!==e.error?arcgisonline.sharing.util.errorHandler(e.error,c,u,d):t&&t(e,c)},getJson:function(e,c,u){return arcgisonline.sharing.util._requestWithAppHandlers({url:e},
{},c,u)},getJsonWithContent:function(e,c,u,t){return arcgisonline.sharing.util._requestWithAppHandlers({url:e,content:c},{},u,t)},postJson:function(e,c,u,t){return arcgisonline.sharing.util._requestWithAppHandlers({url:c,content:e},{usePost:!0},u,t)},postJsonCheckProxy:function(e,c,u,t){return"http:"===window.location.protocol&&-1<c.indexOf("https://")?arcgisonline.sharing.util._requestWithAppHandlers({url:c,content:e},{usePost:!0,useProxy:!0},u,t):arcgisonline.sharing.util._requestWithAppHandlers({url:c,
content:e},{usePost:!0},u,t)},postForm:function(e,c,u,t){return arcgisonline.sharing.util._requestWithAppHandlers({url:c,form:e},{usePost:!0},u,t)},_requestWithAppHandlers:function(e,c,u,t){var d=arcgisonline.sharing.util.request(e,c);d.then(function(q,m){arcgisonline.sharing.util.handler(q||{},d.ioArgs,e.url,u,t);return q},function(q,m){arcgisonline.sharing.util.errorHandler(q||{},d.ioArgs,e.url,t);throw q;});return d},request:function(e,c){var u=e.url,t=e.content||{},d=arcgisonline.sharing.util.getToken();
c=c||{};var q=arcgisonline.sharing.util.urlToObject(u).query||{};t.f||q.f||c.removeFormatProp||(t=f.mixin(t,{f:"json"}));d&&!t.token&&!1!==c.addToken?esri.isDefined(esriGeowConfig.isMultiTenant)&&!1===esriGeowConfig.isMultiTenant&&esriGeowConfig.searchArcGISOnlineEnabled&&"www.arcgis.com"===arcgisonline.sharing.util.getFullDomain(e.url)||(t.token=d):!1===c.addToken&&delete t.token;e=f.mixin({},{url:!1===c.addSSL?u:arcgisonline.sharing.util.useSSL(u),content:t,form:e.form,callbackParamName:e.form?
e.callbackParamName||null:e.callbackParamName||"callback",timeout:c&&c.timeout||0});var m=esri.request(e,c);m.addErrback(function(a){"IdentityManagerBase.1"===a.code&&(a.code=a.httpCode);arcgisonline.sharing.util.checkSoftwareAuthError(a,m);arcgisonline.sharing.util.checkSubscriptionStatus(a)||(m.canceled=!0);arcgisonline.sharing.util.isUnlicensed(a)&&(m.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html"));arcgisonline.sharing.util.isInsufficientLevel(a)&&
(m.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html#insufficient_level"));arcgisonline.sharing.util.isExpiredLicense(a)&&(m.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html#expired_license"));arcgisonline.sharing.util.isOldLicense(a)&&(m.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html#old_license"));
arcgisonline.sharing.util.isInvalidUser(a)&&(m.canceled=!0,arcgisonline.sharing.geow.Geow.signout(esriGeowConfig.baseUrl+"index.html"));arcgisonline.sharing.util.isDisabledEnterpriseUser(a)&&(m.canceled=!0,-1===window.location.href.indexOf("error.html")&&(window.location=esriGeowConfig.baseUrl+"error.html?c\x3dAccountDisabled"));arcgisonline.sharing.util.checkError(a)||(m.canceled=!0);throw a;});return m},_fetchItemData:function(e,c){var u=this.getUser(),t=this.getItemDataPath(e);"admin"===e.itemControl||
u&&u.username===e.owner?this.openPage(c,!0):this._canAccessUrl(t).then(f.hitch(this,function(){this.openPage(c,!0)}),f.hitch(this,function(d){d&&403===d.status?this._showError({title:this.i18n.viewer.error.noPermissionTitle,message:this.i18n.errorWidget.accessDeniedResource}):this.openPage(c,!0)}))},_canAccessUrl:function(e){var c=new f.Deferred;f.xhr("HEAD",{url:e,handleAs:"text",headers:{"X-Requested-With":null},withCredentials:this.isPortal()?!0:!1}).then(function(u){c.resolve(!0)},function(u){c.reject(u)});
return c},_showError:function(e){var c=new arcgisonline.sharing.dijit.dialog.ConfirmDialog({showCancel:!1,style:{width:"375px",height:"auto"}}),u=e||{};u.code=e.code||0;u=f.mixin({},this.i18n.common.errors.genericError,this.i18n.common.errors[e.code]||e);c.show(u).then(f.hitch(this,function(){c.hide()}))},checkSoftwareAuthError:function(e,c){var u=["COM_0056","COM_0057"];!1===esriGeowConfig.isMultiTenant&&e.code&&403===e.code&&e.messageCode&&-1!==f.indexOf(u,e.messageCode)&&-1===window.location.href.indexOf("error.html")&&
(c.canceled=!0,"COM_0056"===e.messageCode?window.location=esriGeowConfig.baseUrl+"error.html?c\x3dPortalCreateAccount":"COM_0057"===e.messageCode&&(window.location=esriGeowConfig.baseUrl+"error.html?c\x3dPortalSignIn"))},isExpiredLicense:function(e){return!1===esriGeowConfig.isMultiTenant&&e.code&&503===e.code&&e.messageCode&&"GWM_0006"===e.messageCode},isInsufficientLevel:function(e){return!1===esriGeowConfig.isMultiTenant&&e.code&&503===e.code&&e.messageCode&&"GWM_0012"===e.messageCode},isUnlicensed:function(e){return!1===
esriGeowConfig.isMultiTenant&&e.code&&503===e.code&&e.messageCode&&"GWM_0013"===e.messageCode},isOldLicense:function(e){return!1===esriGeowConfig.isMultiTenant&&e.code&&503===e.code&&e.messageCode&&"GWM_0014"===e.messageCode},isInvalidUser:function(e){return!1===esriGeowConfig.isMultiTenant&&e.code&&404===e.code&&e.messageCode&&"POR_205244"===e.messageCode},isDisabledEnterpriseUser:function(e){return!1===esriGeowConfig.isMultiTenant&&e.code&&403===e.code&&e.messageCode&&"SB_0008"===e.messageCode},
isNode:function(e){return"object"===typeof Node?e instanceof Node:e&&"object"===typeof e&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName},isElement:function(e){return"object"===typeof HTMLElement?e instanceof HTMLElement:e&&"object"===typeof e&&1===e.nodeType&&"string"===typeof e.nodeName},isHostedService:function(e){if(!e)return!1;var c=(new f._Url(esriGeowConfig.restBaseUrl)).authority,u=!1===esriGeowConfig.isMultiTenant,t=-1!==e.indexOf(".arcgis.com/"),d=-1!==e.indexOf("//services")||
-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features")||-1!==e.indexOf("//locationservices")||-1!==e.indexOf("//iservices")||-1!==e.indexOf("//tiledimageservices");e=esri.isDefined(esriGeowConfig.self)&&esriGeowConfig.self.supportsHostedServices&&-1!==e.indexOf(c)&&!u;return t&&d||!t&&e},isHostedServiceItem:function(e){return arcgisonline.sharing.util.isHostedService(e.item)||arcgisonline.sharing.util.isHostedService(e.url)},isHostedTemplateItem:function(e){e=e?e.split("?")[0]:"";var c=e.match(/http.+(arcgis.com\/apps)\/?/gi);
e=e.match(/http.+(opendata)\/?/gi);return c&&c.length&&!e?!0:!1},isAgolService:function(e){return e?-1!==e.indexOf("/services.arcgisonline.com/")||-1!==e.indexOf("/server.arcgisonline.com/"):!1},supportsHttps:function(e){if(!e)return!1;var c=!1;f.forEach(esriGeowConfig.httpsDomains,function(t){if(-1<e.indexOf("."+t+"/")||-1<e.indexOf("/"+t+"/"))c=!0});if(!c){var u=esriGeowConfig.self.portalHostname;-1<u.indexOf("/")&&(u=u.substring(0,u.indexOf("/")));-1<e.indexOf(u)&&(c=!0)}return c},isArcGISServer:function(e){var c=
/http.+\/(arcgis\/rest\/services|arcgis\/services)\/?/gi,u=/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer)).*/gi;return(e=(e=e&&e.split("?")[0])&&e.replace(c,"").match(u))&&e.length?e[0].split("/")[1]:null},getStaticImagesUrl:function(){var e=esriGeowConfig.staticImagesUrl||esriGeowConfig.self&&esriGeowConfig.self.staticImagesUrl;return(esriGeowConfig.allSSL||"https:"===location.protocol)&&e?e.replace("http:","https:"):
e},getRedSphereUrl:function(){return arcgisonline.sharing.util.getStaticImagesUrl()+"/Symbols/Basic/RedSphere.png"},doNothing:function(){},parseUrl:function(e){var c=document.createElement("a");c.href=e;for(var u=c.protocol.replace(":",""),t=c.hostname||window.location.host,d=c.port,q=c.search,m={},a=c.search.replace(/^\?/,"").split("\x26"),h=a.length,n=0,r;n<h;n++)a[n]&&(r=a[n].split("\x3d"),m[r[0]]=r[1]);return{source:e,protocol:u,host:t,port:d,query:q,params:m,file:(c.pathname.match(/\/([^\/?#]+)$/i)||
[,""])[1],hash:c.hash.replace("#",""),path:c.pathname.replace(/^([^\/])/,"/$1"),relative:(c.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:c.pathname.replace(/^\//,"").split("/")}},getAbsoluteUrl:function(e){var c;return e?(c||(c=document.createElement("a")),c.href=e,c.href):e},ellipse:function(e,c){e&&e.length>c&&0<c-4&&(e=e.substring(0,c-4)+"...");return e},appendTags:function(e,c){var u=e.get("value");c=u?c.split(",").concat(u.split(",")):c.split(",");e.set("value",arcgisonline.sharing.util.getUniqueArray(c).join(","));
f.style(e.domNode,"color","#000000")},getUniqueArray:function(e){var c={};return f.filter(e,function(u){return c[u]?!1:c[u]=!0})},relativeToExplicitUrl:function(e){esriGeowConfig.cdnServerUrl=f.baseUrl.substring(0,f.baseUrl.indexOf("/js/"));return esriGeowConfig.cdnServerUrl.lastIndexOf("/")===esriGeowConfig.cdnServerUrl.length-1?esriGeowConfig.cdnServerUrl+e:esriGeowConfig.cdnServerUrl+"/"+e},getCookie:function(e,c){e="esri_auth"===e?"arcgis_auth":e;var u=this._cookies&&this._cookies[e]||null;if(!u||
c)(u=(u=f.cookie(e))?f.json.parse(u):-1)&&u.role&&(u.role=u.role?u.role.replace("org_","account_"):u.role),u&&(this._cookies||(this._cookies={}),this._cookies[e]=u);return-1===u||esriGeowConfig.ignoreCookie?null:u},canSharePublic:function(){return!esriGeowConfig.self||!0!==esriGeowConfig.self.canSharePublic&&!1!==esriGeowConfig.self.canSharePublic?!0:esriGeowConfig.self.canSharePublic},getSecureUrl:function(e){e||(e=esriGeowConfig.baseUrl);return esriGeowConfig.self&&esriGeowConfig.self.portalMode&&
"singletenant"===esriGeowConfig.self.portalMode&&esriGeowConfig.self.httpsPort?(location.port?(e=e.replace(location.port,esriGeowConfig.self.httpsPort),arcgisonline.sharing.util.isPortal()&&(e=e.replace(esriGeowConfig.self.httpPort,esriGeowConfig.self.httpsPort))):e=e.replace(location.hostname,location.hostname+":"+esriGeowConfig.self.httpsPort),e=e.replace("http:","https:"),arcgisonline.sharing.util.cleanPorts(e)):e.replace("http:","https:")},htmlEncode:function(e){return e?e.replace(/&/g,"\x26amp;").replace(/>/g,
"\x26gt;").replace(/</g,"\x26lt;").replace(/"/g,"\x26quot;"):e},htmlDecode:function(e){return e?e.replace(/&amp;/g,"\x26").replace(/&gt;/g,"\x3e").replace(/&lt;/g,"\x3c").replace(/&quot;/g,'"'):e},getHttpUrl:function(e){e||(e=esriGeowConfig.baseUrl);return esriGeowConfig.self&&esriGeowConfig.self.portalMode&&"singletenant"===esriGeowConfig.self.portalMode&&esriGeowConfig.self.httpPort?(location.port?(e=e.replace(location.port,esriGeowConfig.self.httpPort),arcgisonline.sharing.util.isPortal()&&(e=
e.replace(esriGeowConfig.self.httpsPort,esriGeowConfig.self.httpPort))):e=e.replace(location.hostname,location.hostname+":"+esriGeowConfig.self.httpPort),e=e.replace("https:","http:"),arcgisonline.sharing.util.cleanPorts(e)):e.replace("https:","http:")},cleanPorts:function(e){return e.replace(/:80\//,"/").replace(/:443\//,"/")},usePortalSSL:function(){return(!1===esriGeowConfig.isMultiTenant||arcgisonline.sharing.util.isPortal())&&esriGeowConfig.self&&esriGeowConfig.self.portalHostname&&!esriGeowConfig.self.portalHostname.match(/:7080\//)&&
80!==esriGeowConfig.self.httpPort&&443!==esriGeowConfig.self.httpsPort&&"https:"===location.protocol},onAGOLFederatedServer:function(e){for(var c=!1,u=0;u<esriGeowConfig.httpsDomains.length;u++)if(e&&-1<e.indexOf(esriGeowConfig.httpsDomains[u])){c=!0;break}return c},onFederatedServer:function(e){var c=!1,u=!1;e&&0<e.length&&esriGeowConfig.federatedServers&&0<esriGeowConfig.federatedServers.length&&(c=f.some(esriGeowConfig.federatedServers,f.hitch(this,function(t){var d=(-1<e.indexOf(":6080")?e.replace("http:",
"https:").replace(":6080",":6443"):e).toLowerCase(),q=t.url?arcgisonline.sharing.util.getUrlWithoutScheme(t.url):t.url,m=t.adminUrl?arcgisonline.sharing.util.getUrlWithoutScheme(t.adminUrl):t.adminUrl;q=(-1<q.indexOf(":")?t.url:q).toLowerCase();m=(-1<m.indexOf(":")?t.adminUrl:m).toLowerCase();u=d!==e;return-1<e.indexOf(q)||-1<e.indexOf(m)||u&&(-1<d.indexOf(q)||-1<d.indexOf(m))})));return c},getUrlWithoutScheme:function(e){if(esri.isDefined(e)){if(0===e.indexOf("http://"))return e.substring(7);if(0===
e.indexOf("https://"))return e.substring(8)}return e},isPortal:function(){return esri.isDefined(esriGeowConfig.self)&&esriGeowConfig.self.isPortal},isArcGISEnterpriseOnKubernetes:function(){return"ArcGISEnterpriseOnKubernetes"===(esriGeowConfig.self||{}).portalDeploymentType},portalSupportsHostedServices:function(){return arcgisonline.sharing.util.isPortal()&&esriGeowConfig.self.supportsHostedServices},getHomeAppContext:function(){if(arcgisonline.sharing.util.isPortal()){var e=window.location.pathname,
c=e.indexOf("/home");if(0<c)return e.substring(0,c)}return""},normalizeOrgRole:function(e){return e?e.replace("org_","account_"):e},checkForIAA:function(){var e=new f.Deferred,c=!!esriGeowConfig.isDebug,u=arcgisonline.sharing.util.getPortalAdminBaseUrl(),t=arcgisonline.sharing.util.getUser();f.xhrGet({url:u+"/",handleAs:"json",content:{f:"json",ts:(new Date).getTime()}}).then(f.hitch(this,function(d){d&&d.status&&"error"===d.status&&d.code&&503===d.code?e.resolve({hasIAA:!0,error:d}):d&&(!d.error&&
!t||d.error&&d.error.code&&(!t&&499!==d.error.code&&498!==d.error.code||t&&499!==d.error.code&&498!==d.error.code))?-1===window.location.href.indexOf("createadmin.html")?window.location=arcgisonline.sharing.util.getSecureUrl("https://"+esriGeowConfig.self.portalHostname+"/home/createadmin.html"):e.resolve({hasIAA:!1}):e.resolve({hasIAA:!0})}),f.hitch(this,function(d){!c&&(d.status&&499!==d.status||d&&(!d.error&&!t||d.error&&d.error.code&&(!t&&499!==d.error.code&&498!==d.error.code||t&&499!==d.error.code&&
498!==d.error.code)))?-1===window.location.href.indexOf("createadmin.html")?window.location=arcgisonline.sharing.util.getSecureUrl("https://"+esriGeowConfig.self.portalHostname+"/home/createadmin.html"):e.resolve({hasIAA:!1}):e.resolve({hasIAA:!0,error:d})}));return e},getUserDisplayName:function(e){var c=e&&e.fullName||"";e=e.firstName||c;-1<c.indexOf("_")?e=c.split("_")[0]:-1<c.indexOf(",")?e=c.split(",").slice(1).join(" "):-1<c.indexOf(" ")&&(e=c.split(" ")[0]);return e.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,
"").replace(/\s+/g," ")},isProApp:function(e){return e&&"ArcGIS Pro"===e.title&&"esri_apps"===e.owner&&e.tags&&-1<f.indexOf(e.tags,"pro")},findProListing:function(){var e=new f.Deferred,c=!1,u=!1,t;arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"portals/self/purchases"}).then(f.hitch(this,function(d){d.purchases?(f.forEach(d.purchases,f.hitch(this,function(q){!u&&q.listing&&"ArcGIS Pro"===q.listing.title&&"esri_apps"===q.listing.owner&&"licenseByUser"===q.listing.licenseBy&&(c=
f.some(q.listing.tags,f.hitch(this,function(m){return m&&"pro"===m.toLowerCase()})))&&(t=q,u=!0)})),e.resolve(u?t:null)):e.resolve(null)}),f.hitch(this,function(d){e.reject(d)}));return e},findLicenseByUserProducts:function(){var e=new f.Deferred,c=esriGeowConfig.restBaseUrl+"portals/self/purchases",u=!1,t=!1,d={pro:null,products:null};this.isPortal();var q=f.hitch(this,function(m){if(m.listing&&"licenseByUser"===m.listing.licenseBy)if(u=!0,"ArcGIS Pro"===m.listing.title&&"esri_apps"===m.listing.owner){if(t=
f.some(m.listing.tags,f.hitch(this,function(a){return a&&"pro"===a.toLowerCase()})))d.pro=m}else m&&m.provision&&(d.products?d.products.push(m):d.products=[m])});arcgisonline.sharing.util.request({url:c}).then(f.hitch(this,function(m){m.purchases||m.trials?(m.purchases&&f.forEach(m.purchases,q),m.trials&&f.forEach(m.trials,q),e.resolve(u?d:null)):e.resolve(null)}),f.hitch(this,function(m){e.reject(m)}));return e},isEsriWorldGeocoder:function(e){var c=arcgisonline.sharing.util.isEsriWorldGeocoderNoProxy(e);
e=arcgisonline.sharing.util.isEsriWorldGeocoderThroughProxy(e);return c||e},isEsriWorldGeocoderNoProxy:function(e){return(e=e.url||"")&&!!e.match(/(arcgis.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi)},isEsriWorldGeocoderThroughProxy:function(e){var c=e.url||"";return e.isAGOWorldLocator||c&&!!c.match(/(\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi)},filterBatchGeocoders:function(e,c){return f.filter(e,f.hitch(this,function(u){var t=arcgisonline.sharing.util.isEsriWorldGeocoderNoProxy(u),
d=arcgisonline.sharing.util.isEsriWorldGeocoderThroughProxy(u);if(t||d)esri.isDefined(u.name)?"Esri World Geocoder"===u.name&&(u.name=esri.i18nBundle.common.esriWorldGeocoder):u.name=esri.i18nBundle.common.esriWorldGeocoder;return t&&(arcgisonline.sharing.util.isPortal()||c)?!1:esri.isDefined(u.batch)?!!u.batch:t||d}))},filterNonWorldGeocoders:function(e){return f.filter(e,f.hitch(this,function(c){var u=arcgisonline.sharing.util.isEsriWorldGeocoderNoProxy(c),t=arcgisonline.sharing.util.isEsriWorldGeocoderThroughProxy(c);
return!u&&!t&&c.url}))},downloadWebMappingApp:function(e){var c="Mobile Application"!==e.type?"WMA2Code":"MobileApp2Code",u=esriGeowConfig.restBaseUrl+"content/items/"+e.id+"/relatedItems";c=e.relatedItems||arcgisonline.sharing.util.request({url:u,content:{relationshipType:c}}).then(f.hitch(this,function(t){e.relatedItems=t&&t.relatedItems||[];return e.relatedItems}));return f.when(c,f.hitch(this,function(t){var d=t||[],q,m=f.filter(d,function(a){return a&&null!==a.url});t=m&&m.length?m[0]:d&&0<d.length?
d[0]:t;t.id&&(q=t.url||arcgisonline.sharing.util.getItemDataPath(t));t.url?window.open(q):window.location=q;B.byId("share-map-stack")&&B.byId("share-map-stack").selectChild(B.byId("share-map-application-help"))}),f.hitch(this,function(t){}))},loadUserTags:function(e){var c=new f.Deferred;e?arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"community/users/"+e+"/tags",content:{ts:(new Date).getTime()}}).then(f.hitch(this,function(u){var t=[];u&&u.tags&&(t=u.tags);t=t.map(function(d){d.tag=
arcgisonline.sharing.util.sanitizer.sanitize(d.tag);return d}.bind(this));c.resolve(t)}),f.hitch(this,function(u){c.resolve([])})):c.resolve([]);return c},loadUserProperties:function(e){return arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"community/users/"+e+"/properties"})},isValidEmailAddress:function(e){var c=/(?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9](?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9-]*[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9])?\.)+[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9](?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9-]*[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/gi;
return!/(@.*@)|(\.\.)|(@\.)|(\.@)|(^\.)/.test(e)&&c.test(e)&&(c=e.match(c),c.length&&c.shift().length===e.length)?!0:!1},groupUsedInOrgSettings:function(e){return(e=e?"id:"+e:null)&&esriGeowConfig.self&&(esriGeowConfig.self.basemapGalleryGroupQuery&&-1<esriGeowConfig.self.basemapGalleryGroupQuery.indexOf(e)||esriGeowConfig.self.colorSetsGroupQuery&&-1<esriGeowConfig.self.colorSetsGroupQuery.indexOf(e)||esriGeowConfig.self.featuredGroupsId&&-1<esriGeowConfig.self.featuredGroupsId.indexOf(e)||esriGeowConfig.self.featuredItemsGroupQuery&&
-1<esriGeowConfig.self.featuredItemsGroupQuery.indexOf(e)||esriGeowConfig.self.galleryTemplatesGroupQuery&&-1<esriGeowConfig.self.galleryTemplatesGroupQuery.indexOf(e)||esriGeowConfig.self.layerTemplatesGroupQuery&&-1<esriGeowConfig.self.layerTemplatesGroupQuery.indexOf(e)||esriGeowConfig.self.livingAtlasGroupQuery&&-1<esriGeowConfig.self.livingAtlasGroupQuery.indexOf(e)||esriGeowConfig.self.stylesGroupQuery&&-1<esriGeowConfig.self.stylesGroupQuery.indexOf(e)||esriGeowConfig.self.symbolSetsGroupQuery&&
-1<esriGeowConfig.self.symbolSetsGroupQuery.indexOf(e)||esriGeowConfig.self.templatesGroupQuery&&-1<esriGeowConfig.self.templatesGroupQuery.indexOf(e)||esriGeowConfig.self.analysisLayersGroupQuery&&-1<esriGeowConfig.self.analysisLayersGroupQuery.indexOf(e))},canShowSocialMediaLinks:function(){var e=arcgisonline.sharing.util.isPortal(),c=arcgisonline.sharing.util.canSharePublic(),u=!(!esriGeowConfig.self||!esriGeowConfig.self.portalProperties)&&esri.isDefined(esriGeowConfig.self.portalProperties.showSocialMediaLinks),
t=u&&!0===esriGeowConfig.self.portalProperties.showSocialMediaLinks;return esriGeowConfig.showSocialMediaLinks&&!0===esriGeowConfig.showSocialMediaLinks&&(e?c&&t:c&&(!u||t))},getPortalAdminBaseUrl:function(){var e=arcgisonline.sharing.util.isArcGISEnterpriseOnKubernetes()?esriGeowConfig.enterpriseAdminBaseUrl:esriGeowConfig.portalAdminBaseUrl;return arcgisonline.sharing.util.getSecureUrl(e)},formatPortalOrgUrl:function(e,c,u){return arcgisonline.sharing.util.isArcGISEnterpriseOnKubernetes()?e+"/orgs/"+
u+c:e+c},getLevelSpan:function(e,c){return'\x3cspan class\x3d"license-level-badge" aria-label\x3d"'+e+" "+c+'"\x3e'+c+"\x3c/span\x3e"},getLevelSpanProperties:function(e,c){return{class:"license-level-badge",innerHTML:c,"aria-label":e+" "+c}},createLevelSpan:function(e,c,u,t){return f.create("span",f.mixin(arcgisonline.sharing.util.getLevelSpanProperties(e,c),t||{}),u)},createLevelSpanAndPlace:function(e,c,u,t,d){return f.create("span",f.mixin(arcgisonline.sharing.util.getLevelSpanProperties(e,c),
t||{}),u,d)},getFullDomain:function(e){e=e.match(/:\/\/([0-9]?\.)?(.[^/:]+)/i);return null!=e&&2<e.length&&"string"===typeof e[2]&&0<e[2].length?e[2]:null},isValidOnlineReturnUrl:function(e){var c=decodeURI(e),u=arcgisonline.sharing.util.parseUrl(window.location.href);e=arcgisonline.sharing.util.parseUrl(c);var t=(c=0===c.indexOf("http://")||0===c.indexOf("https://"))&&e.host?e.host.lastIndexOf(".arcgis.com"):-1,d=c&&e.host?e.host.lastIndexOf(".esri.com"):-1,q=c&&e.host?e.host.lastIndexOf(u.host):
-1;t=-1<t&&t+11-1===e.host.length-1;d=-1<d&&d+9-1===e.host.length-1;u=-1<q&&q+u.host.length-1===e.host.length-1;return c&&e.host&&(t||d||u)?!0:!1},isValidPortalReturnUrl:function(e){var c=decodeURI(e),u=arcgisonline.sharing.util.parseUrl(window.location.href);e=arcgisonline.sharing.util.parseUrl(c);c=0===c.indexOf("http://")||0===c.indexOf("https://");var t=e.host?e.host.lastIndexOf(u.host):-1;u=-1<t&&t+u.host.length-1===e.host.length-1;return c&&e.host&&u?!0:!1},isSameUrl:function(e,c,u){var t=e,
d=c;u&&e&&c&&(t=e.substring(e.indexOf("://")+3),d=c.substring(c.indexOf("://")+3));return t===d},overrideDojoAriaLabel:function(e,c){e&&(f.attr(e,"aria-label",c),e.removeAttribute("aria-labelledby"))},getStepProgressIndicatorProperties:function(e,c){return{class:"stepProgressBar stepProgressBar--"+c+"-steps",innerHTML:'\x3cdiv class\x3d"stepProgressBar__value" style\x3d"width: '+Math.floor(e/c*100)+'%;"\x3e\x3c/div\x3e',"aria-hidden":"true"}},createStepProgressIndicatorAndPlace:function(e,c,u,t){u=
f.create("div",{class:"progressBarContainer"},u,t);f.create("div",f.mixin(arcgisonline.sharing.util.getStepProgressIndicatorProperties(e,c)),u,"first");f.place('\x3cspan class\x3d"stepLabel"\x3e'+esri.i18nBundle.common.steppedProgress.step+"  "+e+"  "+esri.i18nBundle.common.steppedProgress.of+" "+c+"\x3c/span\x3e",u,"last");return u},clearProgressBars:function(){f.query(".progressBarContainer").forEach(function(e){f.destroy(e)})},isServiceProxyGeocoder:function(e){var c=(e||"").toLowerCase();e=-1<
c.indexOf("/geocodeserver")&&-1<c.indexOf("/servers/")&&-1<c.indexOf("/rest/services/");var u=arcgisonline.sharing.util.isPortal()&&-1<c.indexOf(esriGeowConfig.self.portalHostname.toLowerCase());c=!arcgisonline.sharing.util.isPortal()&&c.indexOf("utility")&&-1<c.indexOf(".arcgis.com");return e&&(u||c)},applyChrome62ButtonRepaintFix:function(e){f.has&&61<f.has("chrome")&&e&&(f.style(e,"display","none"),setTimeout(function(){f.style(e,"display","")},1))},isValidUrl:function(e){return/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)},
setFederatedServers:function(e){esriGeowConfig.federatedServers=e},shouldUseProxy:function(e){e=(((e||"").split("//")[1]||"").split("/")[0]||"").toLowerCase();return!!esriGeowConfig.self.isPortal&&e!==window.location.host.toLowerCase()}}})},"arcgisonline/sharing/dijit/dialog/GeneralDlg":function(){define("require esri/declare esri/Evented dojo/_base/lang dijit/Dialog dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/query dojo/dom-style dojo/dom-attr dojo/on dojo/i18n!../../../nls/arcgisonline dojo/text!arcgisonline/sharing/dijit/dialog/templates/GeneralDlg.html".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r){var k=B("arcgisonline.sharing.dijit.dialog.GeneralDlg",[u,t,d,l],{baseClass:"esriThumbnailDlg",templateString:r,widgetsInTemplate:!0,onCancel:function(){},onHide:function(){},postMixInProperties:function(){this.inherited(arguments);this.i18n=e.mixin({},n.common,n.generalDlg)},postCreate:function(){this.loadConnections()},show:function(g){this.clear();this.setTitle(g.title);this.setMessage(g.message);this.setContent(g.content);this.key=g.key;g.hideTitleBar&&m.set(q(".dijitDialogTitleBar")[0],
"display","none");g.error&&q("#general-dialog-content").addClass("error");g.buttonText&&(this._dialog.domNode.querySelector("#button_general-close_label").textContent=g.buttonText);this._dialog.show()},showWide:function(g){m.set(this._dialog,"width","700px");this.show(g)},destroy:function(){this.inherited(arguments);k.prototype.statics._instance&&(k.prototype.statics._instance=null)},clear:function(){this.setTitle("");q("#general-dialog-content").attr("innerHTML","");q("#general-dialog-content").removeClass("error")},
loadConnections:function(){q(".jevent").on("click",function(b){b.preventDefault()});q("#general-dialog .dijitDialogTitleBar .dijitDialogCloseIcon").forEach(e.hitch(this,function(b){a.set(b,"title",this.i18n.close)}));var g=this._dialog;this.own(h(g,"cancel",e.hitch(this,function(b){b&&b instanceof Event&&b.preventDefault();this.onCancel()})),h(g,"hide",e.hitch(this,function(b){b&&b instanceof Event&&b.preventDefault();this.onHide()})))},setTitle:function(g){g&&this._dialog.set("title",g)},setMessage:function(g){g&&
q("#general-dialog-content").attr("innerHTML","\x3cp style\x3d'word-wrap:break-word;'\x3e"+g+"\x3c/p\x3e")},setContent:function(g){g&&q("#general-dialog-content").attr("innerHTML",g)},hideTitle:function(){this._dialog.titleNode.classList.add("hide")},setButtonLabel:function(g){this._okBtn.setLabel(g)},hide:function(){this._dialog.hide()},onOkClick:function(g){this._dialog.hide()}});k.prototype.statics={getInstance:function(){this._instance||(this._instance=new k);return this._instance}};return k})},
"esri/declare":function(){define(["dojo/_base/declare","dojo/_base/lang","./extend"],function(f,B,l){return function(e,c,u){var t=B.isString(e);t?u.declaredClass=e:(u=c,c=e);c=f(c,u);t&&l(e,c);return c}})},"esri/extend":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(f,B,l){return function(e,c){e=e.substring(e.indexOf(".")+1);f.setObject(e,c,l)}})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),function(f,
B,l,e,c,u){f=f([e],{declaredClass:"esri.Evented",registerConnectEvents:function(){var t=this.constructor,d=this.constructor._meta.parents,q=[{}],m={},a,h=function(r,k){B.isArray(r)||(r=[r]);for(var g=0;g<r.length;g++){var b=r[g];b._meta&&b._meta.parents&&h(b._meta.parents,k);b.prototype._eventMap&&k.push(B.mixin({},b.prototype._eventMap))}return k};if(!t._onMap){h(d,q);q.push(this._eventMap);d=B.mixin.apply(this,q);for(n in this)/^on\w/.test(n)&&B.isFunction(this[n])&&(q=this._hyphenLower(n).toLowerCase(),
d[q]||(m[q]={method:n}));for(a in d){var n=this._onCamelCase(a);m[a]={method:n,argKeys:d[a]}}t._onMap=m;return t._onMap}},on:function(t,d){if(-1<t.indexOf(",")){for(var q=t.split(/\s*,\s*/),m=q.length,a=[];m--;)a.push(this.on(q[m],d));a.remove=function(){for(var r=0;r<a.length;r++)a[r].remove()};return a}q=this.constructor._onMap||this.registerConnectEvents();m="string"==typeof t&&t.toLowerCase();var h=this._onCamelCase(m),n=q&&q[m];return(h=n&&n.method||this[h]&&B.isFunction(this[h])&&h)?n&&B.isArray(n.argKeys)?
(q=this._onArr2Obj(d,q[m].argKeys),l.after(this,h,q,!0)):l.after(this,h,function(r){r=r||{};r.target||(r.target=this);d.call(this,r)},!0):this.inherited(arguments)},emit:function(t,d){var q,m,a=t.toLowerCase();var h=this._onCamelCase(t);var n=this.constructor._onMap||this.registerConnectEvents();h=(m=n&&n[a]&&n[a].method||B.isFunction(this[h])&&h)&&this[m];m&&n&&n[a]&&this._onObj2Arr(function(){q=Array.prototype.slice.call(arguments)},n[a].argKeys)(d);d=d||{};d.target||(d.target=this);if(h){var r=
q&&q.length?q:[d];r=h.apply(this,r)}this.inherited(arguments,[t,d]);return r},_onObj2Arr:function(t,d){if(d){var q=this;return function(m){var a,h=[],n=d.length;for(a=0;a<n;a++)h[a]=m[d[a]];t.apply(q,h)}}return t},_onArr2Obj:function(t,d){if(d){var q=this;return function(){var m,a={},h=arguments.length;for(m=0;m<h;m++)a[d[m]]=arguments[m];a.target||(a.target=q);t.call(q,a)}}return t},_hyphenLower:function(t){return t.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(d,q){return(q?"-":"")+d.toLowerCase()})},
_onCamelCase:function(t){return"on"+t.substr(0,1).toUpperCase()+t.substr(1).replace(/\-([a-z])/g,function(d,q){return q.toUpperCase()})}});return u.Evented=f})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E,C,y,v,A,G,F,H,L,M){function Q(){}var S=new c;S.resolve(!0);E=e("dijit._DialogBase"+(g("dojo-bidi")?"_NoBidi":""),[y,A,G,v],{templateString:M,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:E.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(U){this._set("draggable",U)},maxRatio:.9,
closable:!0,_setClosableAttr:function(U){this.closeButtonNode.style.display=U?"":"none";this._set("closable",U)},postMixInProperties:function(){var U=a.getLocalization("dijit","common");n.mixin(this,U);this.inherited(arguments)},postCreate:function(){q.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);l.after(this,"onExecute",n.hitch(this,"hide"),!0);l.after(this,"onCancel",n.hitch(this,"hide"),!0);r(this.closeButtonNode,
b.press,function(U){U.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&P.isTop(this)&&(this._getFocusItems(),D.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();D.focus(this._firstFocusItem)},_endDrag:function(){var U=d.position(this.domNode),Y=w.getBox(this.ownerDocument);U.y=Math.min(Math.max(U.y,0),Y.h-U.h);U.x=Math.min(Math.max(U.x,0),Y.w-U.w);this._relativePosition=U;this._position()},_setup:function(){var U=
this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==g("ie")?z:x)(U,{handle:this.titleBar}),l.after(this._moveable,"onMoveStop",n.hitch(this,"_endDrag"),!0)):t.add(U,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":B.map(this["class"].split(/\s/),function(Y){return Y+"_underlay"}).join(" "),_onKeyDown:n.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!t.contains(this.ownerDocumentBody,"dojoMove")){var U=
this.domNode,Y=w.getBox(this.ownerDocument),aa=this._relativePosition,la=d.position(U);q.set(U,{left:Math.floor(Y.l+(aa?Math.min(aa.x,Y.w-la.w):(Y.w-la.w)/2))+"px",top:Math.floor(Y.t+(aa?Math.min(aa.y,Y.h-la.h):(Y.h-la.h)/2))+"px"})}},_onKey:function(U){if(U.keyCode==h.TAB){this._getFocusItems();var Y=U.target;this._firstFocusItem==this._lastFocusItem?(U.stopPropagation(),U.preventDefault()):Y==this._firstFocusItem&&U.shiftKey?(D.focus(this._lastFocusItem),U.stopPropagation(),U.preventDefault()):
Y!=this._lastFocusItem||U.shiftKey||(D.focus(this._firstFocusItem),U.stopPropagation(),U.preventDefault())}else this.closable&&U.keyCode==h.ESCAPE&&(this.onCancel(),U.stopPropagation(),U.preventDefault())},show:function(){if(this.open)return S.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),P.hide(this));var U=w.get(this.ownerDocument);this._modalconnects.push(r(U,"scroll",n.hitch(this,
"resize",null)));this._modalconnects.push(r(this.domNode,"keydown",n.hitch(this,"_onKey")));q.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();this._fadeInDeferred=new c(n.hitch(this,function(){Y.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,Q);U=this._fadeInDeferred.promise;var Y=m.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:n.hitch(this,function(){P.show(this,this.underlayAttrs)}),onEnd:n.hitch(this,
function(){this.autofocus&&P.isTop(this)&&(this._getFocusItems(),D.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return U},hide:function(){if(!this._alreadyInitialized||!this.open)return S.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred=new c(n.hitch(this,function(){Y.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,Q);this._fadeOutDeferred.then(n.hitch(this,"onHide"));var U=this._fadeOutDeferred.promise;
var Y=m.fadeOut({node:this.domNode,duration:this.duration,onEnd:n.hitch(this,function(){this.domNode.style.display="none";P.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var aa;aa=this._modalconnects.pop();)aa.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return U},resize:function(U){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!U){this._shrunk&&
(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),B.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(T){T&&q.set(T,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var Y=w.getBox(this.ownerDocument);Y.w*=this.maxRatio;Y.h*=this.maxRatio;var aa=d.position(this.domNode);this._shrunk=!1;aa.w>=Y.w&&
(U={w:Y.w},d.setMarginBox(this.domNode,U),aa=d.position(this.domNode),this._shrunk=!0);aa.h>=Y.h&&(U||(U={w:aa.w}),U.h=Y.h,this._shrunk=!0);U&&(U.w||(U.w=aa.w),U.h||(U.h=aa.h))}if(U){d.setMarginBox(this.domNode,U);Y=[];this.titleBar&&Y.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&Y.push({domNode:this.actionBarNode,region:"bottom"});aa={domNode:this.containerNode,region:"center"};Y.push(aa);var la=L.marginBox2contentBox(this.domNode,U);L.layoutChildren(this.domNode,la,Y);this._singleChild?
(Y=L.marginBox2contentBox(this.containerNode,aa),this._singleChild.resize({w:Y.w,h:Y.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();g("touch")||U||this._position()}},_layoutChildren:function(){B.forEach(this.getChildren(),function(U){U.resize&&U.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var U;U=this._modalconnects.pop();)U.remove();
P.hide(this);this.inherited(arguments)}});g("dojo-bidi")&&(E=e("dijit._DialogBase",E,{_setTitleAttr:function(U){this._set("title",U);this.titleNode.innerHTML=U;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(U){this._created&&this.textDir!=U&&(this._set("textDir",U),this.set("title",this.title))}}));var I=e("dijit.Dialog",[H,E],{});I._DialogBase=E;var P=I._DialogLevelManager={_beginZIndex:950,show:function(U,Y){J[J.length-1].focus=D.curNode;var aa=J[J.length-1].dialog?J[J.length-1].zIndex+
2:I._DialogLevelManager._beginZIndex;q.set(U.domNode,"zIndex",aa);F.show(Y,aa-1);J.push({dialog:U,underlayAttrs:Y,zIndex:aa})},hide:function(U){if(J[J.length-1].dialog==U){J.pop();var Y=J[J.length-1];1==J.length?F.hide():F.show(Y.underlayAttrs,Y.zIndex-1);if(U.refocus&&(U=Y.focus,!Y.dialog||U&&u.isDescendant(U,Y.dialog.domNode)||(Y.dialog._getFocusItems(),U=Y.dialog._firstFocusItem),U))try{U.focus()}catch(aa){}}else Y=B.indexOf(B.map(J,function(aa){return aa.dialog}),U),-1!=Y&&J.splice(Y,1)},isTop:function(U){return J[J.length-
1].dialog==U}},J=I._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];D.watch("curNode",function(U,Y,aa){U=J[J.length-1].dialog;if(aa&&U&&!U._fadeOutDeferred&&aa.ownerDocument==U.ownerDocument){do if(aa==U.domNode||t.contains(aa,"dijitPopup"))return;while(aa=aa.parentNode);U.focus()}});g("dijit-legacy-requires")&&k(0,function(){f(["dijit/TooltipDialog"])});return I})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(f,B){var l=B.prototype.onMove;return f("dojo.dnd.TimedMoveable",
B,{timeout:40,constructor:function(e,c){c||(c={});c.timeout&&"number"==typeof c.timeout&&0<=c.timeout&&(this.timeout=c.timeout)},onMoveStop:function(e){e._timer&&(clearTimeout(e._timer),l.call(this,e,e._leftTop));B.prototype.onMoveStop.apply(this,arguments)},onMove:function(e,c){e._leftTop=c;if(!e._timer){var u=this;e._timer=setTimeout(function(){e._timer=null;l.call(u,e,e._leftTop)},this.timeout)}}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),
function(f,B,l,e,c,u){return B("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(t){var d=[];f.forEach(t||this.getChildren(),function(q){"value"in q?d.push(q):d=d.concat(this._getDescendantFormWidgets(q.getChildren()))},this);return d},reset:function(){f.forEach(this._getDescendantFormWidgets(),function(t){t.reset&&t.reset()})},validate:function(){var t=!1;return f.every(f.map(this._getDescendantFormWidgets(),function(d){d._hasBeenBlurred=!0;var q=d.disabled||!d.validate||
d.validate();q||t||(u.scrollIntoView(d.containerNode||d.domNode),d.focus(),t=!0);return q}),function(d){return d})},setValues:function(t){l.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",t)},_setValueAttr:function(t){var d={};f.forEach(this._getDescendantFormWidgets(),function(h){h.name&&(d[h.name]||(d[h.name]=[])).push(h)});for(var q in d)if(d.hasOwnProperty(q)){var m=d[q],a=e.getObject(q,!1,t);void 0!==a&&(a=[].concat(a),
"boolean"==typeof m[0].checked?f.forEach(m,function(h){h.set("value",-1!=f.indexOf(a,h._get("value")))}):m[0].multiple?m[0].set("value",a):f.forEach(m,function(h,n){h.set("value",a[n])}))}},getValues:function(){l.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var t={};f.forEach(this._getDescendantFormWidgets(),function(d){var q=d.name;if(q&&!d.disabled){var m=d.get("value");"boolean"==typeof d.checked?
/Radio/.test(d.declaredClass)?!1!==m?e.setObject(q,m,t):(m=e.getObject(q,!1,t),void 0===m&&e.setObject(q,null,t)):(d=e.getObject(q,!1,t),d||(d=[],e.setObject(q,d,t)),!1!==m&&d.push(m)):(d=e.getObject(q,!1,t),"undefined"!=typeof d?e.isArray(d)?d.push(m):e.setObject(q,[d,m],t):e.setObject(q,m,t))}});return t},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var t=f.map(this._descendants,function(d){return d.get("state")||""});return 0<=f.indexOf(t,"Error")?
"Error":0<=f.indexOf(t,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(t){this._descendants=this._getDescendantFormWidgets();f.forEach(this._descendants,function(d){d._started||d.startup()});t||this._onChildChange()},_onChildChange:function(t){t&&"state"!=t&&"disabled"!=t||this._set("state",this._getState());t&&"value"!=t&&"disabled"!=t&&"checked"!=t||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;
this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var t=this;this.own(c(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(d){d.target!=t.domNode&&t._onChildChange(d.type.replace("attrmodified-",""))}));this.watch("state",function(d,q,m){this.onValidStateChange(""==m)})},destroy:function(){this.inherited(arguments)}})})},
"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(f,B){return f("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var l=B._getTabNavigable(this.domNode);this._firstFocusItem=l.lowest||l.first||this.closeButtonNode||this.domNode;this._lastFocusItem=l.last||l.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h){var n=f("dijit.DialogUnderlay",[d,q],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(r){e.set(this.node,"id",r+"_underlay");this._set("dialogId",r)},_setClassAttr:function(r){this.node.className="dijitDialogUnderlay "+r;this._set("class",r)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(u(this.domNode,"keydown",B.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var r=this.node.style,k=this.domNode.style;k.display="none";var g=t.getBox(this.ownerDocument);k.top=g.t+"px";k.left=g.l+"px";r.width=g.w+"px";r.height=g.h+"px";k.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new m(this.domNode);var r=t.get(this.ownerDocument);this._modalConnects=[a.on("resize",B.hitch(this,"layout")),u(r,"scroll",
B.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});n.show=function(r,k){var g=n._singleton;!g||g._destroyed?g=h._underlay=n._singleton=new n(r):r&&g.set(r);c.set(g.domNode,"zIndex",k);g.open||g.show()};n.hide=function(){var r=
n._singleton;r&&!r._destroyed&&r.hide()};return n})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g){return q("dijit.layout.ContentPane",[l,e,c],{href:"",content:"",extractContent:!1,parseOnLoad:!0,
parserScope:f._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(b,
w,x){var z=new x(b,w);return!z.href&&z._contentSetter&&z._contentSetter.parseDeferred&&!z._contentSetter.parseDeferred.isFulfilled()?z._contentSetter.parseDeferred.then(function(){return z}):z},create:function(b,w){if(!(b&&b.template||!w||"href"in b||"content"in b)){w=a.byId(w);for(var x=w.ownerDocument.createDocumentFragment();w.firstChild;)x.appendChild(w.firstChild);b=B.delegate(b,{content:x})}this.inherited(arguments,[b,w])},postMixInProperties:function(){this.inherited(arguments);var b=k.getLocalization("dijit",
"loading",this.lang);this.loadingMessage=u.substitute(this.loadingMessage,b);this.errorMessage=u.substitute(this.errorMessage,b)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&d.forEach(this._contentSetter.parseResults,function(b){b._started||b._destroyed||!B.isFunction(b.startup)||(b.startup(),b._started=!0)},this)},_startChildren:function(){d.forEach(this.getChildren(),
function(b){b._started||b._destroyed||!B.isFunction(b.startup)||(b.startup(),b._started=!0)});this._contentSetter&&d.forEach(this._contentSetter.parseResults,function(b){b._started||b._destroyed||!B.isFunction(b.startup)||(b.startup(),b._started=!0)},this)},setHref:function(b){f.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",b)},_setHrefAttr:function(b){this.cancel();this.onLoadDeferred=new m(B.hitch(this,"cancel"));this.onLoadDeferred.then(B.hitch(this,
"onLoad"));this._set("href",b);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(b){f.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",b)},_setContentAttr:function(b){this._set("href","");this.cancel();this.onLoadDeferred=new m(B.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(B.hitch(this,"onLoad"));this._setContent(b||"");this._isDownloaded=
!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(b){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},
refresh:function(){this.cancel();this.onLoadDeferred=new m(B.hitch(this,"cancel"));this.onLoadDeferred.then(B.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var b=this,w={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};B.isObject(this.ioArgs)&&B.mixin(w,this.ioArgs);var x=this._xhrDfd=(this.ioMethod||r.get)(w),z;x.then(function(D){z=D;try{return b._isDownloaded=!0,b._setContent(D,!1)}catch(E){b._onError("Content",
E)}},function(D){x.canceled||b._onError("Download",D);delete b._xhrDfd;return D}).then(function(){b.onDownloadEnd();delete b._xhrDfd;return z});delete this._hrefChanged},_onLoadHandler:function(b){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(b)}catch(w){}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(b){}},destroyDescendants:function(b){this.isLoaded&&this._onUnloadHandler();var w=this._contentSetter;d.forEach(this.getChildren(),function(x){x.destroyRecursive?
x.destroyRecursive(b):x.destroy&&x.destroy(b);x._destroyed=!0});w&&(d.forEach(w.parseResults,function(x){x._destroyed||(x.destroyRecursive?x.destroyRecursive(b):x.destroy&&x.destroy(b),x._destroyed=!0)}),delete w.parseResults);b||n.empty(this.containerNode);delete this._singleChild},_setContent:function(b,w){b=this.preprocessContent(b);this.destroyDescendants();var x=this._contentSetter;x&&x instanceof t._ContentSetter||(x=this._contentSetter=new t._ContentSetter({node:this.containerNode,_onError:B.hitch(this,
this._onError),onContentError:B.hitch(this,function(E){E=this.onContentError(E);try{this.containerNode.innerHTML=E}catch(C){}})}));var z=B.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!b.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});z=x.set(B.isObject(b)&&b.domNode?b.domNode:b,z);var D=this;return g(z&&z.then?z:x.parseDeferred,function(){delete D._contentSetterParams;
w||(D._started&&(D._startChildren(),D._scheduleLayout()),D._onLoadHandler(b))})},preprocessContent:function(b){return b},_onError:function(b,w,x){this.onLoadDeferred.reject(w);b=this["on"+b+"Error"].call(this,w);x||b&&this._setContent(b,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
function(f,B,l,e,c,u,t,d,q,m){return B("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=this.getParent();this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(q.on("resize",u.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var a=[],h=!1;t("\x3e *",this.containerNode).some(function(n){var r=
d.byNode(n);r&&r.resize?a.push(r):!/script|link|style/i.test(n.nodeName)&&n.offsetHeight&&(h=!0)});this._singleChild=1!=a.length||h?null:a[0];l.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,h){this._resizeCalled=!0;this._scheduleLayout(a,h)},_scheduleLayout:function(a,h){this._isShown()?this._layout(a,h):(this._needLayout=!0,this._changeSize=a,this._resultSize=h)},_layout:function(a,h){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();
a&&e.setMarginBox(this.domNode,a);var n=this.containerNode;n===this.domNode?(h=h||{},u.mixin(h,a||{}),"h"in h&&"w"in h||(h=u.mixin(e.getMarginBox(n),h)),this._contentBox=m.marginBox2contentBox(n,h)):this._contentBox=e.getContentBox(n);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||e.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else{a=this.getChildren();for(var h,n=0;h=
a[n++];)h.resize&&h.resize()}},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,h=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!l.contains(a,"dijitHidden")&&h&&h.style&&"none"!=h.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(f,B,l,e,c){function u(d,q){var m=d.resize?d.resize(q):l.setMarginBox(d.domNode,q);m?c.mixin(d,m):(c.mixin(d,l.getMarginBox(d.domNode)),c.mixin(d,q))}var t={marginBox2contentBox:function(d,q){var m=e.getComputedStyle(d),a=l.getMarginExtents(d,m),h=l.getPadBorderExtents(d,m);return{l:e.toPixelValue(d,m.paddingLeft),t:e.toPixelValue(d,m.paddingTop),w:q.w-(a.w+h.w),h:q.h-(a.h+h.h)}},layoutChildren:function(d,q,m,a,h){q=
c.mixin({},q);B.add(d,"dijitLayoutContainer");m=f.filter(m,function(n){return"center"!=n.region&&"client"!=n.layoutAlign}).concat(f.filter(m,function(n){return"center"==n.region||"client"==n.layoutAlign}));f.forEach(m,function(n){var r=n.domNode,k=n.region||n.layoutAlign;if(!k)throw Error("No region setting for "+n.id);var g=r.style;g.left=q.l+"px";g.top=q.t+"px";g.position="absolute";var b=B.add;var w=k;w=w.substring(0,1).toUpperCase()+w.substring(1);b.call(B,r,"dijitAlign"+w);r={};a&&a==n.id&&(r["top"==
n.region||"bottom"==n.region?"h":"w"]=h);"leading"==k&&(k=n.isLeftToRight()?"left":"right");"trailing"==k&&(k=n.isLeftToRight()?"right":"left");"top"==k||"bottom"==k?(r.w=q.w,u(n,r),q.h-=n.h,"top"==k?q.t+=n.h:g.top=q.t+q.h+"px"):"left"==k||"right"==k?(r.h=q.h,u(n,r),q.w-=n.w,"left"==k?q.l+=n.w:g.left=q.l+q.w+"px"):"client"!=k&&"center"!=k||u(n,q)})}};c.setObject("dijit.layout.utils",t);return t})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(f,B,l,e,c,u,t){var d=0,q={_secureForInnerHtml:function(m){return m.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:u.empty,_setNodeContent:function(m,a){u.empty(m);if(a)if("number"==typeof a&&(a=a.toString()),"string"==typeof a&&(a=u.toDom(a,m.ownerDocument)),!a.nodeType&&B.isArrayLike(a))for(var h=a.length,n=0;n<a.length;n=h==a.length?n+1:0)u.place(a[n],m,"last");else u.place(a,m,"last");return m},_ContentSetter:e("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:f._scopeName,startup:!0,constructor:function(m,a){B.mixin(this,m||{});a=this.node=c.byId(this.node||a);this.id||(this.id=["Setter",a?a.id||a.tagName:"",d++].join("_"))},set:function(m,a){void 0!==m&&(this.content=m);"number"==typeof m&&(m=m.toString());a&&this._mixin(a);this.onBegin();this.setContent();return(m=this.onEnd())&&m.then?m:this.node},setContent:function(){var m=this.node;if(!m)throw Error(this.declaredClass+
": setContent given no node");try{m=q._setNodeContent(m,this.content)}catch(h){var a=this.onContentError(h);try{m.innerHTML=a}catch(n){}}this.node=m},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(l.forEach(this.parseResults,function(m){m.destroy&&m.destroy()}),delete this.parseResults);u.empty(this.node)},onBegin:function(){var m=this.content;if(B.isString(m)&&(this.cleanContent&&
(m=q._secureForInnerHtml(m)),this.extractContent)){var a=m.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);a&&(m=a[1])}this.empty();this.content=m;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(m){return"Error occurred setting content: "+m},onExecError:function(m){return"Error occurred executing scripts: "+m},_mixin:function(m){var a=
{},h;for(h in m)h in a||(this[h]=m[h])},_parse:function(){var m=this.node;try{var a={};l.forEach(["dir","lang","textDir"],function(n){this[n]&&(a[n]=this[n])},this);var h=this;this.parseDeferred=t.parse({rootNode:m,noStart:!this.startup,inherited:a,scope:this.parserScope}).then(function(n){return h.parseResults=n},function(n){h._onError("Content",n,"Error parsing in _ContentSetter#"+h.id)})}catch(n){this._onError("Content",n,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(m,a,h){m=
this["on"+m+"Error"].call(this,a);h||m&&q._setNodeContent(this.node,m,!0)}}),set:function(m,a,h){void 0==a&&(a="");"number"==typeof a&&(a=a.toString());return h?(new q._ContentSetter(B.mixin(h,{content:a,node:m}))).set():q._setNodeContent(m,a,!0)}};B.setObject("dojo.html",q);return q})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./json5 ./query ./on ./ready".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b){function w(E){var C=E._nameCaseMap,y=E.prototype;if(!C||C._extendCnt<D){C=E._nameCaseMap={};for(var v in y)"_"!==v.charAt(0)&&(C[v.toLowerCase()]=v);C._extendCnt=D}return C}function x(E,C){C||(C=f);var y=C._dojoParserCtorMap||(C._dojoParserCtorMap={}),v=E.join();if(!y[v]){for(var A=[],G=0,F=E.length;G<F;G++){var H=E[G];A[A.length]=y[H]=y[H]||l.getObject(H)||~H.indexOf("/")&&C(H)}E=A.shift();y[v]=A.length?E.createSubclass?E.createSubclass(A):E.extend.apply(E,
A):E}return y[v]}new Date("X");var z=n("csp-restrictions")?r.parse:function(E){return eval("("+E+")")};var D=0;q.after(l,"extend",function(){D++},!0);r={_clearCache:function(){D++;_ctorMap={}},_functionFromScript:function(E,C){var y="",v="",A=E.getAttribute(C+"args")||E.getAttribute("args");C=E.getAttribute("with");A=(A||"").split(/\s*,\s*/);C&&C.length&&e.forEach(C.split(/\s*,\s*/),function(G){y+="with("+G+"){";v+="}"});return new Function(A,y+E.innerHTML+v)},instantiate:function(E,C,y){C=C||{};
y=y||{};var v=(y.scope||B._scopeName)+"Type",A="data-"+(y.scope||B._scopeName)+"-",G=A+"type",F=A+"mixins",H=[];e.forEach(E,function(L){var M=v in C?C[v]:L.getAttribute(G)||L.getAttribute(v);if(M){var Q=L.getAttribute(F);M=Q?[M].concat(Q.split(/\s*,\s*/)):[M];H.push({node:L,types:M})}});return this._instantiate(H,C,y)},_instantiate:function(E,C,y,v){function A(G){C._started||y.noStart||e.forEach(G,function(F){"function"!==typeof F.startup||F._started||F.startup()});return G}E=e.map(E,function(G){var F=
G.ctor||x(G.types,y.contextRequire);if(!F)throw Error("Unable to resolve constructor for: '"+G.types.join()+"'");return this.construct(F,G.node,C,y,G.scripts,G.inherited)},this);return v?m(E).then(A):A(E)},construct:function(E,C,y,v,A,G){function F(W){J&&l.setObject(J,W);for(I=0;I<la.length;I++)q[la[I].advice||"after"](W,la[I].method,l.hitch(W,la[I].func),!0);for(I=0;I<T.length;I++)T[I].call(W);for(I=0;I<N.length;I++)W.watch(N[I].prop,N[I].func);for(I=0;I<K.length;I++)g(W,K[I].event,K[I].func);return W}
var H=E&&E.prototype;v=v||{};var L={};v.defaults&&l.mixin(L,v.defaults);G&&l.mixin(L,G);if(n("dom-attributes-explicit"))var M=C.attributes;else n("dom-attributes-specified-flag")?M=e.filter(C.attributes,function(W){return W.specified}):(G=(/^input$|^img$/i.test(C.nodeName)?C:C.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),M=e.map(G.split(/\s+/),function(W){var da=W.toLowerCase();return{name:W,value:"LI"==C.nodeName&&"value"==
W||"enctype"==da?C.getAttribute(da):C.getAttributeNode(da).value}}));var Q=v.scope||B._scopeName;G="data-"+Q+"-";var S={};"dojo"!==Q&&(S[G+"props"]="data-dojo-props",S[G+"type"]="data-dojo-type",S[G+"mixins"]="data-dojo-mixins",S[Q+"type"]="dojotype",S[G+"id"]="data-dojo-id");var I=0,P;Q=[];for(var J,U;P=M[I++];){var Y=P.name,aa=Y.toLowerCase();P=P.value;switch(S[aa]||aa){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":U=P;break;case "data-dojo-id":case "jsid":J=
P;break;case "data-dojo-attach-point":case "dojoattachpoint":L.dojoAttachPoint=P;break;case "data-dojo-attach-event":case "dojoattachevent":L.dojoAttachEvent=P;break;case "class":L["class"]=C.className;break;case "style":L.style=C.style&&C.style.cssText;break;default:if(Y in H||(Y=w(E)[aa]||Y),Y in H)switch(typeof H[Y]){case "string":L[Y]=P;break;case "number":L[Y]=P.length?Number(P):NaN;break;case "boolean":L[Y]="false"!=P.toLowerCase();break;case "function":""===P||-1!=P.search(/[^\w\.]+/i)?L[Y]=
new Function(P):L[Y]=l.getObject(P,!1)||new Function(P);Q.push(Y);break;default:aa=H[Y];try{L[Y]=aa&&"length"in aa?P?P.split(/\s*,\s*/):[]:aa instanceof Date?""==P?new Date(""):"now"==P?new Date:a.fromISOString(P):aa instanceof d?B.baseUrl+P:z(P)}catch(W){}}else L[Y]=P}}for(M=0;M<Q.length;M++)S=Q[M].toLowerCase(),C.removeAttribute(S),C[S]=null;if(U)try{U=z.call(v.propsThis,"{"+U+"}"),l.mixin(L,U)}catch(W){throw Error(W.toString()+" in data-dojo-props\x3d'"+U+"'");}l.mixin(L,y);A||(A=E&&(E._noScript||
H._noScript)?[]:k("\x3e script[type^\x3d'dojo/']",C));var la=[],T=[],N=[],K=[];if(A)for(I=0;I<A.length;I++)S=A[I],C.removeChild(S),y=S.getAttribute(G+"event")||S.getAttribute("event"),v=S.getAttribute(G+"prop"),U=S.getAttribute(G+"method"),Q=S.getAttribute(G+"advice"),M=S.getAttribute("type"),S=this._functionFromScript(S,G),y?"dojo/connect"==M?la.push({method:y,func:S}):"dojo/on"==M?K.push({event:y,func:S}):L[y]=S:"dojo/aspect"==M?la.push({method:U,advice:Q,func:S}):"dojo/watch"==M?N.push({prop:v,
func:S}):T.push(S);E=(A=E.markupFactory||H.markupFactory)?A(L,C,E):new E(L,C);return E.then?E.then(F):F(E)},scan:function(E,C){function y(aa){if(!aa.inherited){aa.inherited={};var la=aa.node,T=y(aa.parent);la={dir:la.getAttribute("dir")||T.dir,lang:la.getAttribute("lang")||T.lang,textDir:la.getAttribute(M)||T.textDir};for(var N in la)la[N]&&(aa.inherited[N]=la[N])}return aa.inherited}var v=[],A=[],G={},F=(C.scope||B._scopeName)+"Type",H="data-"+(C.scope||B._scopeName)+"-",L=H+"type",M=H+"textdir";
H+="mixins";var Q=E.firstChild,S=C.inherited;if(!S){S=function N(la,T){return la.getAttribute&&la.getAttribute(T)||la.parentNode&&N(la.parentNode,T)};S={dir:S(E,"dir"),lang:S(E,"lang"),textDir:S(E,M)};for(var I in S)S[I]||delete S[I]}I={inherited:S};for(var P,J;;)if(Q)if(1!=Q.nodeType)Q=Q.nextSibling;else if(P&&"script"==Q.nodeName.toLowerCase())(S=Q.getAttribute("type"))&&/^dojo\/\w/i.test(S)&&P.push(Q),Q=Q.nextSibling;else if(J)Q=Q.nextSibling;else if(S=Q.getAttribute(L)||Q.getAttribute(F),E=Q.firstChild,
S||E&&(3!=E.nodeType||E.nextSibling)){J=null;if(S){var U=Q.getAttribute(H);P=U?[S].concat(U.split(/\s*,\s*/)):[S];try{J=x(P,C.contextRequire)}catch(aa){}J||e.forEach(P,function(aa){~aa.indexOf("/")&&!G[aa]&&(G[aa]=!0,A[A.length]=aa)});U=J&&!J.prototype._noScript?[]:null;I={types:P,ctor:J,parent:I,node:Q,scripts:U};I.inherited=y(I);v.push(I)}else I={node:Q,scripts:P,parent:I};P=U;J=Q.stopParser||J&&J.prototype.stopParser&&!C.template;Q=E}else Q=Q.nextSibling;else{if(!I||!I.node)break;Q=I.node.nextSibling;
J=!1;I=I.parent;P=I.scripts}var Y=new h;A.length?(C.contextRequire||f)(A,function(){Y.resolve(e.filter(v,function(aa){if(!aa.ctor)try{aa.ctor=x(aa.types,C.contextRequire)}catch(N){}for(var la=aa.parent;la&&!la.types;)la=la.parent;var T=aa.ctor&&aa.ctor.prototype;aa.instantiateChildren=!(T&&T.stopParser&&!C.template);aa.instantiate=!la||la.instantiate&&la.instantiateChildren;return aa.instantiate}))}):Y.resolve(v);return Y.promise},_require:function(E,C){E=z("{"+E.innerHTML+"}");var y=[],v=[],A=new h;
C=C&&C.contextRequire||f;for(var G in E)y.push(G),v.push(E[G]);C(v,function(){for(var F=0;F<y.length;F++)l.setObject(y[F],arguments[F]);A.resolve(arguments)});return A.promise},_scanAmd:function(E,C){var y=new h,v=y.promise;y.resolve(!0);var A=this;k("script[type\x3d'dojo/require']",E).forEach(function(G){v=v.then(function(){return A._require(G,C)});G.parentNode.removeChild(G)});return v},parse:function(E,C){!E||"string"==typeof E||"nodeType"in E||(C=E,E=C.rootNode);var y=E?u.byId(E):t.body();C=C||
{};var v=C.template?{template:!0}:{},A=[],G=this;E=this._scanAmd(y,C).then(function(){return G.scan(y,C)}).then(function(F){return G._instantiate(F,v,C,!0)}).then(function(F){return A=A.concat(F)}).otherwise(function(F){throw F;});l.mixin(A,E);return A}};B.parser=r;c.parseOnLoad&&b(100,r,"parse");return r})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(f,B,l,e){var c=f.some;return function(u){var t,d;B.isArray(u)?d=u:u&&"object"===typeof u&&
(t=u);var q=[];if(t){d=[];for(var m in t)Object.hasOwnProperty.call(t,m)&&(q.push(m),d.push(t[m]));var a={}}else d&&(a=[]);if(!d||!d.length)return(new l).resolve(a);var h=new l;h.promise.always(function(){a=q=null});var n=d.length;c(d,function(r,k){t||q.push(k);e(r,function(g){h.isFulfilled()||(a[q[k]]=g,0===--n&&h.resolve(a))},h.reject);return h.isFulfilled()});return h.promise}})},"dojo/json5":function(){define(["./json5/parse"],function(f){return{parse:f}})},"dojo/json5/parse":function(){define(["../string",
"./util"],function(f,B){function l(Q,S,I){var P=Q[S];if(null!=P&&"object"===typeof P)for(var J in P){var U=l(P,J,I);void 0===U?delete P[J]:P[J]=U}return I.call(Q,S,P)}function e(){if(g[x])return f.fromCodePoint(f.codePointAt(g,x))}function c(){var Q=e();"\n"===Q?(z++,D=0):Q?D+=Q.length:D++;Q&&(x+=Q.length);return Q}function u(Q,S){return{type:Q,value:S,line:z,column:D}}function t(Q){for(var S=0;S<Q.length;S++){var I=Q[S];if(e()!==I)throw h(c());c()}}function d(){switch(e()){case "b":return c(),"\b";
case "f":return c(),"\f";case "n":return c(),"\n";case "r":return c(),"\r";case "t":return c(),"\t";case "v":return c(),"\v";case "0":c();if(B.isDigit(e()))throw h(c());return"\x00";case "x":c();var Q="",S=e();if(!B.isHexDigit(S))throw h(c());Q+=c();S=e();if(!B.isHexDigit(S))throw h(c());Q+=c();return f.fromCodePoint(parseInt(Q,16));case "u":return c(),q();case "\n":case "\u2028":case "\u2029":return c(),"";case "\r":return c(),"\n"===e()&&c(),"";case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":throw h(c());
case void 0:throw h(c());}return c()}function q(){for(var Q="",S=4;0<S--;){var I=e();if(!B.isHexDigit(I))throw h(c());Q+=c()}return f.fromCodePoint(parseInt(Q,16))}function m(){switch(E.type){case "punctuator":switch(E.value){case "{":var Q={};break;case "[":Q=[]}break;case "null":case "boolean":case "numeric":case "string":Q=E.value}if(void 0===y)y=Q;else{var S=w[w.length-1];Array.isArray(S)?S.push(Q):S[C]=Q}null!==Q&&"object"===typeof Q?(w.push(Q),b=Array.isArray(Q)?"beforeArrayValue":"beforePropertyName"):
(Q=w[w.length-1],b=null==Q?"end":Array.isArray(Q)?"afterArrayValue":"afterPropertyValue")}function a(){w.pop();var Q=w[w.length-1];b=null==Q?"end":Array.isArray(Q)?"afterArrayValue":"afterPropertyValue"}function h(Q){if(void 0===Q)Q=k("JSON5: invalid end of input at "+z+":"+D);else{var S={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\x00":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};S[Q]?Q=S[Q]:" ">Q&&(Q=Q.charCodeAt(0).toString(16),Q="\\x"+("00"+
Q).substring(Q.length));Q=k("JSON5: invalid character '"+Q+"' at "+z+":"+D)}return Q}function n(){return k("JSON5: invalid end of input at "+z+":"+D)}function r(){D-=5;return k("JSON5: invalid identifier character at "+z+":"+D)}function k(Q){Q=new SyntaxError(Q);Q.lineNumber=z;Q.columnNumber=D;return Q}var g,b,w,x,z,D,E,C,y,v,A,G,F,H,L={"default":function(){switch(H){case "\t":case "\v":case "\f":case " ":case "\u00a0":case "\ufeff":case "\n":case "\r":case "\u2028":case "\u2029":c();return;case "/":c();
v="comment";return;case void 0:return c(),u("eof")}if(B.isSpaceSeparator(H))c();else return L[b]()},comment:function(){switch(H){case "*":c();v="multiLineComment";return;case "/":c();v="singleLineComment";return}throw h(c());},multiLineComment:function(){switch(H){case "*":c();v="multiLineCommentAsterisk";return;case void 0:throw h(c());}c()},multiLineCommentAsterisk:function(){switch(H){case "*":c();return;case "/":c();v="default";return;case void 0:throw h(c());}c();v="multiLineComment"},singleLineComment:function(){switch(H){case "\n":case "\r":case "\u2028":case "\u2029":c();
v="default";return;case void 0:return c(),u("eof")}c()},value:function(){switch(H){case "{":case "[":return u("punctuator",c());case "n":return c(),t("ull"),u("null",null);case "t":return c(),t("rue"),u("boolean",!0);case "f":return c(),t("alse"),u("boolean",!1);case "-":case "+":"-"===c()&&(F=-1);v="sign";return;case ".":A=c();v="decimalPointLeading";return;case "0":A=c();v="zero";return;case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":A=c();v="decimalInteger";return;
case "I":return c(),t("nfinity"),u("numeric",Infinity);case "N":return c(),t("aN"),u("numeric",NaN);case '"':case "'":G='"'===c();A="";v="string";return}throw h(c());},identifierNameStartEscape:function(){if("u"!==H)throw h(c());c();var Q=q();switch(Q){case "$":case "_":break;default:if(!B.isIdStartChar(Q))throw r();}A+=Q;v="identifierName"},identifierName:function(){switch(H){case "$":case "_":case "\u200c":case "\u200d":A+=c();return;case "\\":c();v="identifierNameEscape";return}if(B.isIdContinueChar(H))A+=
c();else return u("identifier",A)},identifierNameEscape:function(){if("u"!==H)throw h(c());c();var Q=q();switch(Q){case "$":case "_":case "\u200c":case "\u200d":break;default:if(!B.isIdContinueChar(Q))throw r();}A+=Q;v="identifierName"},sign:function(){switch(H){case ".":A=c();v="decimalPointLeading";return;case "0":A=c();v="zero";return;case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":A=c();v="decimalInteger";return;case "I":return c(),t("nfinity"),u("numeric",Infinity*
F);case "N":return c(),t("aN"),u("numeric",NaN)}throw h(c());},zero:function(){switch(H){case ".":A+=c();v="decimalPoint";return;case "e":case "E":A+=c();v="decimalExponent";return;case "x":case "X":A+=c();v="hexadecimal";return}return u("numeric",0*F)},decimalInteger:function(){switch(H){case ".":A+=c();v="decimalPoint";return;case "e":case "E":A+=c();v="decimalExponent";return}if(B.isDigit(H))A+=c();else return u("numeric",F*Number(A))},decimalPointLeading:function(){if(B.isDigit(H))A+=c(),v="decimalFraction";
else throw h(c());},decimalPoint:function(){switch(H){case "e":case "E":A+=c();v="decimalExponent";return}if(B.isDigit(H))A+=c(),v="decimalFraction";else return u("numeric",F*Number(A))},decimalFraction:function(){switch(H){case "e":case "E":A+=c();v="decimalExponent";return}if(B.isDigit(H))A+=c();else return u("numeric",F*Number(A))},decimalExponent:function(){switch(H){case "+":case "-":A+=c();v="decimalExponentSign";return}if(B.isDigit(H))A+=c(),v="decimalExponentInteger";else throw h(c());},decimalExponentSign:function(){if(B.isDigit(H))A+=
c(),v="decimalExponentInteger";else throw h(c());},decimalExponentInteger:function(){if(B.isDigit(H))A+=c();else return u("numeric",F*Number(A))},hexadecimal:function(){if(B.isHexDigit(H))A+=c(),v="hexadecimalInteger";else throw h(c());},hexadecimalInteger:function(){if(B.isHexDigit(H))A+=c();else return u("numeric",F*Number(A))},string:function(){switch(H){case "\\":c();A+=d();return;case '"':if(G)return c(),u("string",A);A+=c();return;case "'":if(!G)return c(),u("string",A);A+=c();return;case "\n":case "\r":throw h(c());
case void 0:throw h(c());}A+=c()},start:function(){switch(H){case "{":case "[":return u("punctuator",c())}v="value"},beforePropertyName:function(){switch(H){case "$":case "_":A=c();v="identifierName";return;case "\\":c();v="identifierNameStartEscape";return;case "}":return u("punctuator",c());case '"':case "'":G='"'===c();v="string";return}if(B.isIdStartChar(H))A+=c(),v="identifierName";else throw h(c());},afterPropertyName:function(){if(":"===H)return u("punctuator",c());throw h(c());},beforePropertyValue:function(){v=
"value"},afterPropertyValue:function(){switch(H){case ",":case "}":return u("punctuator",c())}throw h(c());},beforeArrayValue:function(){if("]"===H)return u("punctuator",c());v="value"},afterArrayValue:function(){switch(H){case ",":case "]":return u("punctuator",c())}throw h(c());},end:function(){throw h(c());}},M={start:function(){if("eof"===E.type)throw n();m()},beforePropertyName:function(){switch(E.type){case "identifier":case "string":C=E.value;b="afterPropertyName";break;case "punctuator":a();
break;case "eof":throw n();}},afterPropertyName:function(){if("eof"===E.type)throw n();b="beforePropertyValue"},beforePropertyValue:function(){if("eof"===E.type)throw n();m()},beforeArrayValue:function(){if("eof"===E.type)throw n();"punctuator"===E.type&&"]"===E.value?a():m()},afterPropertyValue:function(){if("eof"===E.type)throw n();switch(E.value){case ",":b="beforePropertyName";break;case "}":a()}},afterArrayValue:function(){if("eof"===E.type)throw n();switch(E.value){case ",":b="beforeArrayValue";
break;case "]":a()}},end:function(){}};return function(Q,S){g=String(Q);b="start";w=[];x=0;z=1;D=0;y=C=E=void 0;do{a:for(v="default",A="",G=!1,F=1;;)if(H=e(),Q=L[v]()){E=Q;break a}M[b]()}while("eof"!==E.type);return"function"===typeof S?l({"":y},"",S):y}})},"dojo/json5/util":function(){define(["./unicode"],function(f){return{isSpaceSeparator:function(B){return"string"===typeof B&&f.Space_Separator.test(B)},isIdStartChar:function(B){return"string"===typeof B&&("a"<=B&&"z">=B||"A"<=B&&"Z">=B||"$"===
B||"_"===B||f.ID_Start.test(B))},isIdContinueChar:function(B){return"string"===typeof B&&("a"<=B&&"z">=B||"A"<=B&&"Z">=B||"0"<=B&&"9">=B||"$"===B||"_"===B||"\u200c"===B||"\u200d"===B||f.ID_Continue.test(B))},isDigit:function(B){return"string"===typeof B&&/[0-9]/.test(B)},isHexDigit:function(B){return"string"===typeof B&&/[0-9A-Fa-f]/.test(B)}}})},"dojo/json5/unicode":function(){define({Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/})},
"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(f,B,l,e,c){return l("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var u=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);c.parse(u,{noStart:!this._earlyTemplatedStartup,template:!0,
inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(e.hitch(this,function(t){this._startupWidgets=t;for(var d=0;d<t.length;d++)this._processTemplateNode(t[d],function(q,m){return q[m]},function(q,m,a){return m in q?q.connect(q,m,a):q.on(m,a,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
}},_processTemplateNode:function(u,t,d){return t(u,"dojoType")||t(u,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){f.forEach(this._startupWidgets,function(u){u&&!u._started&&u.startup&&u.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"arcgisonline/sharing/dijit/dialog/SubscriptionStatusDlg":function(){define(["dojo","dijit","dojox","dojo/require!dijit/Dialog,dijit/_Widget,dijit/_Templated,dijit/form/Button,dojo/cookie"],function(f,B,l){f.provide("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg");
f.require("dijit.Dialog");f.require("dijit._Widget");f.require("dijit._Templated");f.require("dijit.form.Button");f.require("dojo.cookie");f.declare("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg",[B._Widget,B._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContent" \x3e\r\n  \x3cdiv dojotype\x3d"dijit.Dialog" id\x3d"subscription-status-dialog" dojoAttachPoint\x3d"subscriptionStatusDlg" title\x3d"" execute\x3d""\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"subscriptionStateDiv"\x3e\x3c/div\x3e\r\n    \x3cbr/\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"actionNeededDiv"\x3e\x3c/div\x3e\r\n    \x3cbr/\x3e\r\n    \x3cdiv class\x3d"esriFloatTrailing"\x3e\x3cbutton dojoAttachPoint\x3d"closeButton" dojoAttachEvent\x3d"onClick:onOkClick" class\x3d"jevent primary" dojoType\x3d"dijit.form.Button"\x3e${i18n.ok}\x3c/button\x3e\x3c/div\x3e\r\n    \x3cbr style\x3d"clear:both;"/\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
statics:{_instance:null,getInstance:function(){null==this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg);return this._instance}},subscriptionStatusDlg:null,subscriptionStateDiv:null,actionNeededDiv:null,closeButton:null,postMixInProperties:function(){this.inherited(arguments);this.i18n=f.i18n.getLocalization("arcgisonline","arcgisonline").common;f.mixin(this.i18n,f.i18n.getLocalization("arcgisonline","arcgisonline").subscriptionStatusDlg)},postCreate:function(){this.loadConnections()},
show:function(e){this.clear();this.setSubscriptionState(e);this.setActionMessage(e);this.subscriptionStatusDlg.show()},showOther:function(e){this.clear();this.setOtherSubscriptionStatus(e);f.style(this.actionNeededDiv,"display","none");this.subscriptionStatusDlg.show()},setSubscriptionState:function(e){if(e&&e.state){var c=this.i18n.subscriptionStatusExpiredMsg;e=e.state.toLowerCase();"expired"===e?c=this.i18n.subscriptionStatusExpiredMsg:"cancelled"===e?c=this.i18n.subscriptionStatusCancelledMsg:
"suspended"===e?c=esri.substitute({linkStart:"\x3cspan class\x3d'esriItemLinks'\x3e\x3ca href\x3d'https://doc.arcgis.com/en/arcgis-online/administer/view-status.htm' target\x3d'_blank'\x3e",linkEnd:"\x3c/a\x3e\x3c/span\x3e"},this.i18n.subscriptionStatusSuspendedMsg):"restricted"===e&&(c=this.i18n.subscriptionStatusRestrictedMsgNoLink);f.attr(this.subscriptionStateDiv,"innerHTML",c)}},setOtherSubscriptionStatus:function(e){this.subscriptionStatusDlg.set("title",this.i18n.errorTitle);var c=this.i18n.expiredStatus;
e&&("SB_0005"===e?c=this.i18n.suspendedStatus:"SB_0006"===e?c=this.i18n.cancelledStatus:"SB_0007"===e&&(c=this.i18n.expiredStatus));e=esri.substitute({subscriptionState:c},this.i18n.otherSubscriptionStatusMsg);f.attr(this.subscriptionStateDiv,"innerHTML",e)},setActionMessage:function(e){var c=this.getUser();c&&c.role&&("org_admin"===c.role||"account_admin"===c.role)?((e.type||"").toLowerCase(),e.state.toLowerCase(),e=esri.substitute({linkStart:"\x3cspan class\x3d'esriItemLinks'\x3e\x3ca href\x3d'https://www.esri.com/en-us/contact#c\x3dus\x26t\x3d3' target\x3d'_blank'\x3e",
linkEnd:"\x3c/a\x3e\x3c/span\x3e"},this.i18n.contactCustomerService),f.attr(this.actionNeededDiv,"innerHTML",e)):f.attr(this.actionNeededDiv,"innerHTML",this.i18n.nonAdminActionMsg)},loadConnections:function(){f.query(".jevent").connect("onclick",function(e){e.preventDefault()});f.connect(this.subscriptionStatusDlg,"onCancel",f.hitch(this,function(e){this.onCancel(e)}));f.connect(this.subscriptionStatusDlg,"hide",f.hitch(this,function(e){this.onHide(e)}))},clear:function(){this.subscriptionStatusDlg.set("title",
this.i18n.subscriptionStatusTitle);f.attr(this.subscriptionStateDiv,"innerHTML","");f.attr(this.actionNeededDiv,"innerHTML","");f.style(this.actionNeededDiv,"display","")},hide:function(){this.subscriptionStatusDlg.hide()},onOkClick:function(e){B.byId("subscription-status-dialog").hide()},getUser:function(){var e=f.cookie("esri_auth");return esriGeowConfig.userInfo||JSON.parse(e)||null},onCancel:function(){},onHide:function(){}})})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),
function(f,B,l,e,c,u,t){u.extend(f,{waiRole:"",waiState:""});return c("dijit._Templated",[B,l],{constructor:function(){t.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(d,q){var m=this.inherited(arguments),a=q(d,"waiRole");a&&d.setAttribute("role",a);(a=q(d,"waiState"))&&e.forEach(a.split(/\s*,\s*/),function(h){-1!=h.indexOf("-")&&(h=h.split("-"),d.setAttribute("aria-"+h[0],h[1]))});
return m}})})},"arcgisonline/sharing/dijit/dialog/ConfirmDialog":function(){define(["dojo/_base/declare","dijit/Dialog","./_ConfirmDialogMixin"],function(f,B,l){return f("arcgisonline/sharing/dijit/dialog/ConfirmDialog",[B,l],{})})},"arcgisonline/sharing/dijit/dialog/_ConfirmDialogMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom-class dojo/query dojo/topic dojo/keys dijit/_WidgetsInTemplateMixin dojo/i18n!arcgisonline/nls/arcgisonline dojo/text!./templates/actionBar.html dijit/form/Button".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r){return f("arcgisonline/sharing/dijit/dialog/_ConfirmDialogMixin",h,{actionBarTemplate:r,buttonOkLabel:n.common.ok,_setButtonOkLabelAttr:function(k){this.okButton.set("label",k)},buttonCancelLabel:n.common.cancel,_setButtonCancelLabelAttr:function(k){this.cancelButton.set("label",k)},busyMessage:n.common.pleaseWait,_setBusyMessageAttr:{node:"busyMessageSpan",attribute:"innerHTML"},_setShowCancelAttr:function(k){t.set(this.cancelButton.domNode,"display",k?"":"none")},
_setHelpLinkInfoAttr:function(k){var g=q(".dijitDialogTitle",this.domNode).shift();u.create("a",{className:"icon-ui-question margin-left-half font-size--1",title:k.title,href:k.url||"#",target:"_blank"},g)},onOk:function(){},onCancel:function(){},onHide:function(){},show:function(k){var g=new l;k&&k.message&&(this._messageNode||(this._messageNode=u.create("p",{innerHTML:k,"class":"esriMessageNode trailer-0"},q(".dijitDialogPaneContent",this.domNode)[0],"first")),this.set("title",k.title||""),c.set(this._messageNode,
"innerHTML",k.message||""));this.closeButtonNode&&(this.closeButtonNode.tabIndex=0);this.own(e(this,"hide",B.hitch(this,function(b){g.isResolved()||g.resolve("onCancel");this.destroyRecursive()})),e(this.okButton,"click",B.hitch(this,function(b){b.preventDefault();m.publish("/dlg/onOk");g.isResolved()||g.resolve("onOk");this.onOk()})),e(this.cancelButton,"click",B.hitch(this,function(b){b.preventDefault();m.publish("/dlg/onCancel");g.isResolved()||g.resolve("onCancel");this.onCancel();this.hide()})),
e(this.domNode,"keypress",B.hitch(this,function(b){if(b&&b.keyCode===a.ENTER)this.okButton.onClick(b)})),m.subscribe("/dlg/busyMessage",B.hitch(this,function(b){this.set("busyMessage",b)})),m.subscribe("/esri/disable",B.hitch(this,function(b,w){this.set("busyMessage",w||this.busyMessage||n.common.pleaseWait);this.set("disabled",b)})));this.inherited(arguments);return g},_setDisabledAttr:function(k){q(".dijitButton",this.actionBarNode).map(dijit.byNode).forEach(function(g){g.set("disabled",k)});dojo[k?
"removeClass":"addClass"](this.busyMessageSpan,"hide")}})})},"arcgisonline/pages/utils/mapViewer":function(){define(["require","exports","tslib","../../esriGeowConfig","./subscription"],function(f,B,l,e,c){function u(h){return-1<[a.Modern,a.Classic].indexOf(h)}function t(h,n){var r=(new Date("April 13, 2021")).getTime();return n?!1:h>=r}function d(h){var n,r;if(h.isPortal)return h.mapViewer||a.Classic;if(u(h.mapViewer))return h.mapViewer;if(h.subscriptionInfo)return t(h.created,h.isPortal),(0,c.isTrialSubscription)(null===
(n=h.subscriptionInfo)||void 0===n?void 0:n.type,h.isPortal)||(0,c.isDeveloperSubscription)(null===(r=h.subscriptionInfo)||void 0===r?void 0:r.type,h.isPortal),a.Modern}function q(h){var n;if(h.isSignedIn){var r=null===(n=h.properties)||void 0===n?void 0:n.mapViewer;if(u(r))return r}if(!h.isViewingOrg)return a.Modern}function m(h){var n,r,k,g,b=!!e.default.self,w=!(!e.default.userInfo||!e.default.userInfo.username&&!e.default.userInfo.email);h=q({isSignedIn:w,isViewingOrg:b&&!!e.default.self.id,properties:h||
e.default.userProperties});var x=null===(r=null===(n=e.default.self)||void 0===n?void 0:n.portalProperties)||void 0===r?void 0:r.mapViewer;n=e.default.self.id&&d({mapViewer:x,created:null===(k=e.default.self)||void 0===k?void 0:k.created,subscriptionInfo:b&&e.default.self.subscriptionInfo,isPortal:null===(g=e.default.self)||void 0===g?void 0:g.isPortal});return h||n||(w?a.Classic:a.Modern)}Object.defineProperty(B,"__esModule",{value:!0});B.determineMapViewerSetting=B.determineUserMapViewer=B.determineOrgMapViewer=
B.isOrgPastMapViewerCutOffDate=B.MapViewerType=void 0;e=l.__importDefault(e);var a;(function(h){h.Modern="modern";h.Classic="classic"})(a||(B.MapViewerType=a={}));B.isOrgPastMapViewerCutOffDate=t;B.determineOrgMapViewer=d;B.determineUserMapViewer=q;B.determineMapViewerSetting=m;B.default={MapViewerType:a,isValidMapViewerType:u,isOrgPastMapViewerCutOffDate:t,determineOrgMapViewer:d,determineUserMapViewer:q,determineMapViewerSetting:m}})},"arcgisonline/pages/utils/subscription":function(){define(["require",
"exports"],function(f,B){function l(t,d){return d?!1:-1<[B.SubscriptionTypes.TrialDeveloper,B.SubscriptionTypes.DeveloperSubscription,B.SubscriptionTypes.Developer].indexOf(null===t||void 0===t?void 0:t.toLowerCase())}function e(t,d){return d?!1:-1<[B.SubscriptionTypes.Trial,B.SubscriptionTypes.TrialPress].indexOf(t.toLowerCase())}function c(t,d){return d?!1:B.SubscriptionTypes.PersonalUse.toLowerCase()===t.toLowerCase()}function u(t,d){return d?!1:B.SubscriptionTypes.StudentUse.toLowerCase()===t.toLowerCase()}
Object.defineProperty(B,"__esModule",{value:!0});B.isStudentUse=B.isPersonalUse=B.isTrialSubscription=B.isDeveloperSubscription=B.SubscriptionTypes=void 0;B.SubscriptionTypes={Developer:"developer",DeveloperSubscription:"developer subscription",PersonalUse:"Personal Use",StudentUse:"Student Use",Trial:"trial",TrialDeveloper:"trial developer",TrialPress:"trial press"};B.isDeveloperSubscription=l;B.isTrialSubscription=e;B.isPersonalUse=c;B.isStudentUse=u;B.default={isDeveloperSubscription:l,isPersonalUse:c,
isStudentUse:u,isTrialSubscription:e}})},"arcgisonline/pages/utils/storage":function(){define(["require","exports","tslib","./strings"],function(f,B,l,e){e=l.__importDefault(e);return function(){function c(){}c.setCookie=function(u,t,d,q){this.writeCookie(u,q?JSON.stringify(t):t,d)};c.getCookie=function(u,t){return(u=this.readCookie(u))&&t?JSON.parse(u):u};c.setLocalStorageItem=function(u,t,d){try{window.localStorage.setItem(u,d?JSON.stringify(t):t)}catch(q){}};c.getLocalStorageItem=function(u,t){try{var d=
window.localStorage.getItem(u);return d&&t?JSON.parse(d):d}catch(q){}};c.removeLocalStorageItem=function(u){try{window.localStorage.removeItem(u)}catch(t){}};c.setSessionStorageItem=function(u,t,d){try{window.sessionStorage.setItem(u,d?JSON.stringify(t):t)}catch(q){}};c.getSessionStorageItem=function(u,t){try{var d=window.sessionStorage.getItem(u);return d&&t?JSON.parse(d):d}catch(q){}};c.removeSessionStorageItem=function(u){try{window.sessionStorage.removeItem(u)}catch(t){}};c.readCookie=function(u){var t=
document.cookie;u=new RegExp("(?:^|; )".concat(e.default.escapeRegExp(u),"\x3d([^;]*)"));return(t=t.match(u))?decodeURIComponent(t[1]):void 0};c.writeCookie=function(u,t,d){d=d||{};var q=null===d||void 0===d?void 0:d.expires;if("number"===typeof q){var m=new Date;q*=864E5;m.setTime(Date.now()+q);q=d.expires=m}"string"!==typeof q&&(null===q||void 0===q?0:q.toUTCString)&&(d.expires=q.toUTCString());u="".concat(u,"\x3d").concat(encodeURIComponent(t));for(var a in d)u+="; ".concat(a),t=d[a],!0!==t&&(u+=
"\x3d".concat(t));document.cookie=u};return c}()})},"esri/IdentityManager":function(){define(["./IdentityManagerDialog","./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(f,B,l,e){f=new f;B.id=e.safeMixin(f,l);return B.id})},"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g){B=B([k],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(b){c.mixin(this,b);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(b,w,x){this._nls||(this._nls=g.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var z=this._loginDialog,D=x&&x.error,E=x&&x.token,C=new e(function(){z.onCancel()});if(z.open)return b=Error("BUSY"),b.name="identity-manager:busy",b.code="IdentityManager.1",b.log=!!l.isDebug,C.errback(b),C;n.hide(z.errMsg_);D&&403==D.code&&E&&(t.set(z.errMsg_,"innerHTML",this._nls.forbidden),
n.show(z.errMsg_));z.dfd_=C;z.serverInfo_=w;z.resUrl_=b;z.admin_=x&&x.isAdmin;t.set(z.resLink_,{title:b,innerHTML:"("+(this.getResourceName(b)||this._nls.lblItem)+")"});t.set(z.serverLink_,{title:w.server,innerHTML:(-1!==w.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":w.server)+" "});z.txtPwd_.set("value","");z.show();return C},_createLoginDialog:function(){var b=this._nls,w=h.substitute(b,this._dialogContent);w=h.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},w);var x=new m({title:b.title,content:w,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(z){z.charOrCode===d.ENTER&&this.execute_()},execute_:function(){var z=this.txtUser_.get("value"),D=this.txtPwd_.get("value"),E=this.dfd_,C=this;if(this.form_.validate()&&z&&D){this.btnSubmit_.set("label",b.lblSigning);var y=a.id.findCredential(C.resUrl_,z),v=function(A){C.btnSubmit_.set("label",
b.lblOk);C.btnSubmit_.set("disabled",!1);n.hide(C.errMsg_);C.hide();m._DialogLevelManager.hide(C);var G=C.serverInfo_;C.dfd_=C.serverInfo_=C.generateDfd_=C.resUrl_=null;var F=y;if(A){var H=A.token;var L=h.isDefined(A.expires)?Number(A.expires):null;var M=!!A.ssl;F?(F.userId=z,F.token=H,F.expires=L,F.validity=A.validity,F.ssl=M,F.creationTime=(new Date).getTime()):F=new r({userId:z,server:G.server,token:H,expires:L,ssl:M,isAdmin:C.admin_,validity:A.validity})}E.callback(F)};y&&!y._enqueued?v():(C.btnSubmit_.set("disabled",
!0),C.generateDfd_=a.id.generateToken(this.serverInfo_,{username:z,password:D},{isAdmin:this.admin_}).addCallback(v).addErrback(function(A){C.btnSubmit_.set("disabled",!1);C.generateDfd_=null;C.btnSubmit_.set("label",b.lblOk);t.set(C.errMsg_,"innerHTML",A&&A.code?b.invalidUser:b.noAuthService);n.show(C.errMsg_)}))}},cancel_:function(){x.generateDfd_&&x.generateDfd_.cancel();var z=x.dfd_,D=x.resUrl_,E=x.serverInfo_;x.btnSubmit_.set("disabled",!1);x.dfd_=x.serverInfo_=x.generateDfd_=x.resUrl_=null;
n.hide(x.errMsg_);m._DialogLevelManager.hide(x);x.esriIdMgr_.onDialogCancel({resourceUrl:D,serverInfo:E});D=Error("ABORTED");D.name="identity-manager:user-aborted";D.code="IdentityManager.2";D.log=!!l.isDebug;z.errback(D)}});w=x.domNode;x.form_=q.byNode(f.query(".esriIdForm",w)[0]);x.txtUser_=q.byNode(f.query(".esriIdUser",w)[0]);x.txtPwd_=q.byNode(f.query(".esriIdPwd",w)[0]);x.btnSubmit_=q.byNode(f.query(".esriIdSubmit",w)[0]);x.btnCancel_=q.byNode(f.query(".esriIdCancel",w)[0]);x.resLink_=f.query(".resLink",
w)[0];x.serverLink_=f.query(".serverLink",w)[0];x.errMsg_=f.query(".esriErrorMsg",w)[0];x.connect(x.txtUser_,"onKeyPress",x.keypressed_);x.connect(x.txtPwd_,"onKeyPress",x.keypressed_);x.connect(x.btnSubmit_,"onClick",x.execute_);x.connect(x.btnCancel_,"onClick",x.onCancel);x.connect(x,"onCancel",x.cancel_);return x}});return a.IdentityManagerDialog=a.IdentityManager=B})},"esri/Credential":function(){define(["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],function(f,B,l,e){f=f(e.Credential,
{});return l.Credential=f})},"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/url dojo/sniff dojo/io-query dojo/on ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x){var z={},D=function(A){var G=(new u(A.owningSystemUrl)).host;A=(new u(A.server)).host;var F=/.+\.arcgis\.com$/i;
return F.test(G)&&F.test(A)},E=function(A,G){return!!(D(A)&&G&&e.some(G,function(F){return F.test(A.server)}))},C=null,y=null;try{C=window.localStorage,y=window.sessionStorage}catch(A){}t=f(b,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=l.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=[];this._getOAuthLocationParams();q(window,"pageshow",l.hitch(this,this._pageShowHandler))},
defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,normalizeWebTierAuth:!1,_appUrlObj:r.urlToObject(window.location.href),_postMessageAuthHandle:null,_busy:null,_rejectOnPersistedPageShow:!1,_oAuthLocationParams:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,_adminSvcs:/\/rest\/admin\/services(\/|$)/i,_gwDomains:[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",
tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},
{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MissionServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer|VideoServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(A){var G=this.serverInfos;G?(A=e.filter(A,function(F){return!this.findServerInfo(F.server)},this),this.serverInfos=G.concat(A)):
this.serverInfos=A;e.forEach(A,function(F){F.owningSystemUrl&&this._portals.push(F.owningSystemUrl);if(F.hasPortal){this._portals.push(F.server);var H=a.defaults.io.corsEnabledServers,L=this._getOrigin(F.tokenServiceUrl);r.canUseXhr(F.server)||H.push(F.server.replace(/^https?:\/\//i,""));r.canUseXhr(L)||H.push(L.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(A){var G=this.oAuthInfos;G?(e.forEach(A,function(F){(F=this.findOAuthInfo(F.portalUrl))&&G.splice(G.indexOf(F),1)},this),
this.oAuthInfos=G.concat(A)):this.oAuthInfos=A},registerToken:function(A){A=h.mixin({},A);var G=this._sanitizeUrl(A.server),F=this.findServerInfo(G),H=!0,L;F||(F=new n,F.server=this._getServerInstanceRoot(G),F.tokenServiceUrl=this._getTokenSvcUrl(G),F.hasPortal=!0,this.registerServers([F]));(L=this.findCredential(G,A.userId))?(delete A.server,l.mixin(L,A),H=!1):(L=new v({userId:A.userId,server:F.server,token:A.token,expires:A.expires,ssl:A.ssl,scope:this._isServerRsrc(G)?"server":"portal"}),L.resources=
[G],this.credentials.push(L));L.onTokenChange(!1);H||L.refreshServerTokens()},toJson:function(){return h.fixJson({serverInfos:e.map(this.serverInfos,function(A){return A.toJson()}),oAuthInfos:e.map(this.oAuthInfos,function(A){return A.toJson()}),credentials:e.map(this.credentials,function(A){return A.toJson()})})},initialize:function(A){if(A){l.isString(A)&&(A=JSON.parse(A));var G=A.serverInfos,F=A.oAuthInfos;A=A.credentials;if(G){var H=[];e.forEach(G,function(M){M.server&&M.tokenServiceUrl&&H.push(M.declaredClass?
M:new n(M))});H.length&&this.registerServers(H)}if(F){var L=[];e.forEach(F,function(M){M.appId&&L.push(M.declaredClass?M:new x(M))});L.length&&this.registerOAuthInfos(L)}A&&e.forEach(A,function(M){M.userId&&M.server&&M.token&&M.expires&&M.expires>(new Date).getTime()&&(M=M.declaredClass?M:new v(M),M.onTokenChange(),this.credentials.push(M))},this)}},findServerInfo:function(A){var G;A=this._sanitizeUrl(A);e.some(this.serverInfos,function(F){this._hasSameServerInstance(F.server,A)&&(G=F);return!!G},
this);return G},findOAuthInfo:function(A){var G;A=this._sanitizeUrl(A);e.some(this.oAuthInfos,function(F){this._hasSameServerInstance(F.portalUrl,A)&&(G=F);return!!G},this);return G},findCredential:function(A,G){var F;A=this._sanitizeUrl(A);var H=this._isServerRsrc(A)?"server":"portal";G?e.some(this.credentials,function(L){this._hasSameServerInstance(L.server,A)&&G===L.userId&&L.scope===H&&(F=L);return!!F},this):e.some(this.credentials,function(L){this._hasSameServerInstance(L.server,A)&&-1!==this._getIdenticalSvcIdx(A,
L)&&L.scope===H&&(F=L);return!!F},this);return F},getCredential:function(A,G){var F=!0;if(h.isDefined(G))if(l.isObject(G)){var H=!!G.token;var L=G.error;F=!1!==G.prompt}else H=G;A=this._sanitizeUrl(A);var M=new c(k._dfdCanceller),Q=this._isAdminResource(A);if((H=H?this.findCredential(A):null)&&L&&498===L.code)H.destroy();else if(H)return A=Error("You are currently signed in as: '"+H.userId+"'. You do not have access to this resource: "+A),A.name="identity-manager:not-authorized",A.code="IdentityManagerBase.1",
A.httpCode=L&&L.httpCode,A.messageCode=L?L.messageCode:null,A.subcode=L?L.subcode:null,A.details=L?L.details:null,A.log=!!B.isDebug,M.errback(A),M;if(L=this._findCredential(A,G))return M.callback(L),M;var S=this.findServerInfo(A);if(S)!S.hasPortal&&S.server&&S.owningSystemUrl&&this._hasSameServerInstance(S.server,S.owningSystemUrl)&&(S.hasPortal=!0),!S.hasServer&&this._isServerRsrc(A)&&(S._restInfoDfd=this._getTokenSvcUrl(A,!0),S.hasServer=!0);else{L=this._getTokenSvcUrl(A);if(!L)return A=Error("Unknown resource - could not find token service endpoint."),
A.name="identity-manager:unknown-resource",A.code="IdentityManagerBase.2",A.log=!!B.isDebug,M.errback(A),M;S=new n;S.server=this._getServerInstanceRoot(A);l.isString(L)?(S.tokenServiceUrl=L,S.hasPortal=!0):(S._restInfoDfd=L,S.hasServer=!0);this.registerServers([S])}S.hasPortal&&void 0===S._selfReq&&(F||r.hasSameOrigin(S.tokenServiceUrl,window.location.origin)||this._gwDomains.some(function(I){return I.tokenServiceUrl===S.tokenServiceUrl}))&&(S._selfReq={owningTenant:G&&G.owningTenant,selfDfd:this._getPortalSelf(S.tokenServiceUrl.replace(this._rePortalTokenSvc,
"/sharing/rest/portals/self"),A)});return this._enqueue(A,S,G,M,Q)},getResourceName:function(A){return this._isRESTService(A)?A.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(A)&&A.replace(this._gwUser,"$1")||this._gwItem.test(A)&&A.replace(this._gwItem,"$1")||this._gwGroup.test(A)&&A.replace(this._gwGroup,"$1")||""},generateToken:function(A,G,F){var H=this._rePortalTokenSvc.test(A.tokenServiceUrl),L=new u(window.location.href.toLowerCase()),M=!G;var Q=A.shortLivedTokenValidity;
if(G){var S=m.id.tokenValidity||Q||m.id.defaultTokenValidity;S>Q&&(S=Q)}if(F){var I=F.isAdmin;var P=F.serverUrl;var J=F.token;var U=F.ssl;A.customParameters=F.customParameters}if(I)Q=A.adminTokenServiceUrl;else{Q=A.tokenServiceUrl;var Y=new u(Q.toLowerCase());A.webTierAuth&&F&&F.serverUrl&&!U&&"http"===L.scheme&&(r.hasSameOrigin(L.uri,Q,!0)||"https"===Y.scheme&&L.host===Y.host&&"7080"===L.port&&"7443"===Y.port)&&(Q=Q.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));M&&H&&(Q=Q.replace(/\/rest/i,
""))}I=l.mixin({url:Q,content:l.mixin({request:"getToken",username:G&&G.username,password:G&&G.password,serverUrl:P,token:J,expiration:S,referer:I||H?window.location.host:null,client:I?"referer":null,f:"json"},A.customParameters),handleAs:"json",callbackParamName:M?"callback":void 0},F&&F.ioArgs);F={usePost:!M,disableIdentityLookup:!0,useProxy:this._useProxy(A,F)};H||(I.withCredentials=!1);H=g(I,F);H.addCallback(function(aa){if(!aa||!aa.token)return aa=Error("Unable to generate token"),aa.name="identity-manager:authentication-failed",
aa.code="IdentityManagerBase.3",aa.log=!!B.isDebug,aa;var la=A.server;z[la]||(z[la]={});G&&(z[la][G.username]=G.password);aa.validity=S;return aa});H.addErrback(function(aa){});return H},isBusy:function(){return!!this._busy},checkSignInStatus:function(A){var G=new c;this.checkAppAccess(A,"").then(function(F){G.resolve(F.credential)}).catch(function(F){G.reject(F)});return G},checkAppAccess:function(A,G,F){var H=this,L=!1;return this.getCredential(A,{prompt:!1}).then(function(M){var Q={f:"json"};if("portal"===
M.scope)if(G&&(H._doPortalSignIn(A)||F&&F.force)){var S=M.server+"/sharing/rest/oauth2/validateAppAccess";Q.client_id=G}else if(M.token)S=M.server+"/sharing/rest";else return{credential:M};else if(M.token)S=M.server+"/rest/services";else return{credential:M};M.token&&(Q.token=M.token);return g({url:S,content:Q,callbackParamName:"callback"},{disableIdentityLookup:!0}).then(function(I){if(!1===I.valid){var P=Error("You are currently signed in as: '"+M.userId+"'.  You do not have access to this app: '"+
G+"'.");P.name="identity-manager:not-authorized";P.code="IdentityManagerBase.1";P.log=!!B.isDebug;P.details=I;throw P;}L=!!I.viewOnlyUserTypeApp;return{credential:M}}).catch(function(I){if("IdentityManagerBase.1"===I.code||400===I.code)throw 400===I.code&&(I.name="identity-manager:invalid-request"),I;if(498===I.code)throw M.destroy(),I=Error("User is not signed in."),I.name="identity-manager:not-authenticated",I.code="IdentityManagerBase.6",I.log=!!B.isDebug,I;return{credential:M}})}).then(function(M){return{credential:M.credential,
viewOnly:L}})},setProtocolErrorHandler:function(A){this._protocolFunc=A},signIn:function(){},oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var A=this.credentials.slice();e.forEach(A,function(G){G.destroy()})}this.onCredentialsDestroy()},enablePostMessageAuth:function(A){A||(A="https://www.arcgis.com/sharing/rest");this._postMessageAuthHandle&&this._postMessageAuthHandle.remove();this._postMessageAuthHandle=
q(window,"message",function(G){(G.origin===window.location.origin||h.endsWith(G.origin,".arcgis.com"))&&G.data&&"arcgis:auth:requestCredential"===G.data.type&&this.getCredential(A).then(function(F){G.source.postMessage({type:"arcgis:auth:credential",credential:{expires:F.expires,server:F.server,ssl:F.ssl,token:F.token,userId:F.userId}},G.origin)}).catch(function(F){G.source.postMessage({type:"arcgis:auth:error",error:{name:F.name,message:F.message}},G.origin)})}.bind(this))},disablePostMessageAuth:function(){this._postMessageAuthHandle&&
(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)},_getOAuthLocationParams:function(){var A=window.location.hash;if(A){"#"===A.charAt(0)&&(A=A.substring(1));A=d.queryToObject(A);var G=!1;if(A.access_token&&A.expires_in&&A.state&&A.hasOwnProperty("username"))try{A.state=JSON.parse(A.state),A.state.portalUrl&&(this._oAuthLocationParams=A,G=!0)}catch(H){}else if(A.error&&A.error_description&&"access_denied"===A.error&&(G=!0,A.state))try{A.state=JSON.parse(A.state)}catch(H){}G&&
(window.location.hash=A.state&&A.state.hash||"")}if(A=window.location.search){"?"===A.charAt(0)&&(A=A.substring(1));A=d.queryToObject(A);G=!1;if(A.code&&A.state)try{A.state=JSON.parse(A.state),A.state.portalUrl&&A.state.uid&&(this._oAuthLocationParams=A,G=!0)}catch(H){}else if(A.error&&A.error_description&&"access_denied"===A.error&&(G=!0,A.state))try{A.state=JSON.parse(A.state)}catch(H){}if(G){var F=h.mixin({},A);"code error error_description message_code persist state".split(" ").forEach(function(H){delete F[H]});
G=d.objectToQuery(F);window.history.replaceState(window.history.state,"",window.location.pathname+(G?"?"+G:"")+(A.state&&A.state.hash||""))}}},_getOAuthToken:function(A,G,F,H,L){A=A.replace(/^http:/i,"https:");return g({url:A+"/sharing/rest/oauth2/token",content:H&&L?{grant_type:"authorization_code",code:G,redirect_uri:H,client_id:F,code_verifier:L}:{grant_type:"refresh_token",refresh_token:G,client_id:F}},{disableIdentityLookup:!0,usePost:!0})},_pageShowHandler:function(A){A.persisted&&this.isBusy()&&
this._rejectOnPersistedPageShow&&(A=Error("ABORTED"),A.name="identity-manager:user-aborted",A.code="IdentityManager.2",A.log=!!B.isDebug,this._errbackFunc(A))},_findCredential:function(A,G){var F=-1,H,L,M=G&&G.token;G=G&&G.resource;var Q=this._isServerRsrc(A)?"server":"portal",S=e.filter(this.credentials,function(U){return this._hasSameServerInstance(U.server,A)&&U.scope===Q},this);A=G||A;if(S.length)if(1===S.length){G=S[0];var I=(H=(L=this.findServerInfo(G.server))&&L.owningSystemUrl)&&this.findCredential(H,
G.userId);F=this._getIdenticalSvcIdx(A,G);if(M)-1!==F&&(G.resources.splice(F,1),this._removeResource(A,I));else return-1===F&&G.resources.push(A),this._addResource(A,I),G}else{var P,J;e.some(S,function(U){J=this._getIdenticalSvcIdx(A,U);return-1!==J?(P=U,I=(H=(L=this.findServerInfo(P.server))&&L.owningSystemUrl)&&this.findCredential(H,P.userId),F=J,!0):!1},this);if(M)P&&(P.resources.splice(F,1),this._removeResource(A,I));else if(P)return this._addResource(A,I),P}},_findOAuthInfo:function(A){var G=
this.findOAuthInfo(A);G||e.some(this.oAuthInfos,function(F){this._isIdProvider(F.portalUrl,A)&&(G=F);return!!G},this);return G},_addResource:function(A,G){G&&-1===this._getIdenticalSvcIdx(A,G)&&G.resources.push(A)},_removeResource:function(A,G){var F=-1;G&&(F=this._getIdenticalSvcIdx(A,G),-1<F&&G.resources.splice(F,1))},_useProxy:function(A,G){return G&&G.isAdmin&&!r.hasSameOrigin(A.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(A.tokenServiceUrl)&&10.1==A.currentVersion&&!r.hasSameOrigin(A.tokenServiceUrl,
window.location.href)},_getOrigin:function(A){A=new u(A);return A.scheme+"://"+A.host+(h.isDefined(A.port)?":"+A.port:"")},_getServerInstanceRoot:function(A){var G=A.toLowerCase(),F=G.indexOf(this._agsRest);-1===F&&this._isAdminResource(A)&&(F=this._agsAdmin.test(A)?A.replace(this._agsAdmin,"$1").length:A.search(this._adminSvcs));-1!==F||r.isSecureProxyService(G)||(F=G.indexOf("/sharing"));-1===F&&"/"===G.substr(-1)&&(F=G.length-1);return-1<F?A.substring(0,F):A},_hasSameServerInstance:function(A,
G){"/"===A.substr(-1)&&(A=A.slice(0,-1));A=A.toLowerCase();G=this._getServerInstanceRoot(G).toLowerCase();A=this._normalizeAGOLorgDomain(A);G=this._normalizeAGOLorgDomain(G);A=A.substr(A.indexOf(":"));G=G.substr(G.indexOf(":"));return A===G},_normalizeAGOLorgDomain:function(A){var G=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,F=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,H=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;G.test(A)?A=A.replace(G,"https://www.arcgis.com"):
F.test(A)?A=A.replace(F,"https://devext.arcgis.com"):H.test(A)&&(A=A.replace(H,"https://qaext.arcgis.com"));return A},_sanitizeUrl:function(A){var G=(a.defaults.io.proxyUrl||"").toLowerCase(),F=G?A.toLowerCase().indexOf(G+"?"):-1;-1!==F&&(A=A.substring(F+G.length+1));A=r.normalize(A);return r.urlToObject(A).path},_isRESTService:function(A){return-1<A.indexOf(this._agsRest)},_isAdminResource:function(A){return this._agsAdmin.test(A)||this._adminSvcs.test(A)},_isServerRsrc:function(A){return this._isRESTService(A)||
this._isAdminResource(A)},_isIdenticalService:function(A,G){if(this._isRESTService(A)&&this._isRESTService(G)){A=this._getSuffix(A).toLowerCase();G=this._getSuffix(G).toLowerCase();var F=A===G;F||(F=/(.*)\/(MapServer|FeatureServer).*/ig,F=A.replace(F,"$1")===G.replace(F,"$1"))}else this._isAdminResource(A)&&this._isAdminResource(G)?F=!0:this._isServerRsrc(A)||this._isServerRsrc(G)||!this._isPortalDomain(A)||(F=!0);return F},_isPortalDomain:function(A){var G=new u(A.toLowerCase()),F=this._portalConfig;
A=e.some(this._gwDomains,function(H){return H.regex.test(G.uri)});!A&&F&&(A=this._hasSameServerInstance(this._getServerInstanceRoot(F.restBaseUrl),G.uri));A||(!this._arcgisUrl&&(F=l.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new u(F)).authority),this._arcgisUrl&&(A=this._arcgisUrl.toLowerCase()===G.authority));A||(A=e.some(this._portals,function(H){return this._hasSameServerInstance(H,G.uri)},this));return A=A||this._agsPortal.test(G.path)},_isIdProvider:function(A,G){var F=-1,H=
-1;e.forEach(this._gwDomains,function(S,I){-1===F&&S.regex.test(A)&&(F=I);-1===H&&S.regex.test(G)&&(H=I)});var L=!1;if(-1<F&&-1<H)if(0===F||4===F){if(0===H||4===H)L=!0}else if(1===F){if(1===H||2===H)L=!0}else 2===F?2===H&&(L=!0):3===F&&3===H&&(L=!0);if(!L){var M=this.findServerInfo(G),Q=M&&M.owningSystemUrl;Q&&D(M)&&this._isPortalDomain(Q)&&this._isIdProvider(A,Q)&&(L=!0)}return L},_isPublic:function(A){A=this._sanitizeUrl(A);return e.some(this._publicUrls,function(G){return G.test(A)})},_getIdenticalSvcIdx:function(A,
G){var F=-1;e.some(G.resources,function(H,L){return this._isIdenticalService(A,H)?(F=L,!0):!1},this);return F},_getSuffix:function(A){return A.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(A){if(this._isRESTService(A)||this._isAdminResource(A)){var G=this._getServerInstanceRoot(A);var F=G+"/admin/generateToken";A=G+"/rest/info";G=g({url:A,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});G.adminUrl_=F;return G}if(this._isPortalDomain(A)){var H=
"";e.some(this._gwDomains,function(L){L.regex.test(A)&&(H=L.tokenServiceUrl);return!!H});H||e.some(this._portals,function(L){this._hasSameServerInstance(L,A)&&(H=L+this._gwTokenUrl);return!!H},this);H||(F=A.toLowerCase().indexOf("/sharing"),-1!==F&&(H=A.substring(0,F)+this._gwTokenUrl));H||(H=this._getOrigin(A)+this._gwTokenUrl);H&&(F=(new u(A)).port,/^http:\/\//i.test(A)&&"7080"===F&&(H=H.replace(/:7080/i,":7443")),H=H.replace(/http:/i,"https:"));return H}if(-1!==A.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},
_exchangeToken:function(A,G,F){return g({url:A+"/sharing/rest/oauth2/exchangeToken",content:{f:"json",client_id:G,token:F}},{disableIdentityLookup:!0,usePost:!0}).then(function(H){return H.token})},_getPlatformSelf:function(A,G){A=A.replace(/^http:/i,"https:");return g({url:A+"/sharing/rest/oauth2/platformSelf",content:{f:"json",expiration:30},headers:{"X-Esri-Auth-Client-Id":G,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},withCredentials:!0},{disableIdentityLookup:!0,usePost:!0})},
_getPortalSelf:function(A,G){var F="";e.some(this._gwDomains,function(H){H.regex.test(A)&&(F=H.customBaseUrl);return!!F});if(F)return G=new c,G.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:F,portalMode:"multitenant",supportsOAuth:!0}),G;"https:"===window.location.protocol?A=A.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(G)&&(A=A.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return g({url:A,content:{f:"json"},callbackParamName:"callback",withCredentials:!0},
{disableIdentityLookup:!0})},_doPortalSignIn:function(A){var G=this._portalConfig,F=window.location.href,H=this.findServerInfo(A);return(G||this._isPortalDomain(F))&&(H?H.hasPortal||H.owningSystemUrl&&this._isPortalDomain(H.owningSystemUrl):this._isPortalDomain(A))&&(this._isIdProvider(F,A)||G&&(this._hasSameServerInstance(this._getServerInstanceRoot(G.restBaseUrl),A)||this._isIdProvider(G.restBaseUrl,A))||r.hasSameOrigin(F,A,!0))?!0:!1},_checkProtocol:function(A,G,F,H){var L=!0;H=H?G.adminTokenServiceUrl:
G.tokenServiceUrl;0!==l.trim(H).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||a.defaults.io.useCors&&(r.canUseXhr(H)||r.canUseXhr(r.getProxyUrl(!0).path))||(L=this._protocolFunc?!!this._protocolFunc({resourceUrl:A,serverInfo:G}):!1,L||(A=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),A.name="identity-manager:aborted",A.code="IdentityManagerBase.4",A.log=!!B.isDebug,F(A)));return L},_enqueue:function(A,G,F,H,L,M){H||
(H=new c(k._dfdCanceller));H.resUrl_=A;H.sinfo_=G;H.options_=F;H.admin_=L;H.refresh_=M;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(A),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(H)):this._xoReqs.push(H):this._doSignIn(H);return H},_doSignIn:function(A){this._busy=A;this._rejectOnPersistedPageShow=!1;var G=this,F=function(P){var J=A.options_&&A.options_.resource,U=A.resUrl_,Y=A.refresh_,aa=!1;-1===e.indexOf(G.credentials,
P)&&(Y&&-1!==e.indexOf(G.credentials,Y)?(Y.userId=P.userId,Y.token=P.token,Y.expires=P.expires,Y.validity=P.validity,Y.ssl=P.ssl,Y.creationTime=P.creationTime,aa=!0,P=Y):G.credentials.push(P));P.resources||(P.resources=[]);-1===P.resources.indexOf(J||U)&&P.resources.push(J||U);P.scope=G._isServerRsrc(U)?"server":"portal";P.onTokenChange();J=G._soReqs;var la={};G._soReqs=[];e.forEach(J,function(T){if(!this._isIdenticalService(U,T.resUrl_)){var N=this._getSuffix(T.resUrl_);la[N]||(la[N]=!0,P.resources.push(T.resUrl_))}},
G);A.callback(P);e.forEach(J,function(T){this._hasSameServerInstance(this._getServerInstanceRoot(U),T.resUrl_)?T.callback(P):this._soReqs.push(T)},G);G._busy=A.resUrl_=A.sinfo_=A.refresh_=null;if(!aa)G.onCredentialCreate({credential:P});G._soReqs.length?G._doSignIn(G._soReqs.shift()):G._xoReqs.length&&G._doSignIn(G._xoReqs.shift())},H=function(P){A.errback(P);G._busy=A.resUrl_=A.sinfo_=A.refresh_=null;G._soReqs.length?G._doSignIn(G._soReqs.shift()):G._xoReqs.length&&G._doSignIn(G._xoReqs.shift())},
L=function(P,J,U,Y){var aa=A.sinfo_,la=!A.options_||!1!==A.options_.prompt,T=aa.hasPortal&&G._findOAuthInfo(A.resUrl_);if(P)F(new v({userId:P,server:aa.server,token:U||null,expires:h.isDefined(Y)?Number(Y):null,ssl:!!J}));else if(window!==window.parent&&G._appUrlObj.query&&G._appUrlObj.query["arcgis-auth-origin"]&&G._appUrlObj.query["arcgis-auth-portal"]&&G._hasSameServerInstance(G._getServerInstanceRoot(G._appUrlObj.query["arcgis-auth-portal"]),A.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},
G._appUrlObj.query["arcgis-auth-origin"]);var N=q(window,"message",function(ra){if(ra.source===window.parent&&ra.data)if("arcgis:auth:credential"===ra.data.type&&ra.data.credential.expires<Date.now()&&(ra.data.type="arcgis:auth:error",ra.data.error={name:"tokenExpiredError"}),"arcgis:auth:credential"===ra.data.type)N.remove(),F(new v(ra.data.credential));else if("arcgis:auth:error"===ra.data.type){N.remove();ra=ra.data.error;switch(ra.name){case "identity-manager:busy":case "identity-manager:not-authorized":var za=
"IdentityManager.1";break;case "identity-manager:server-identification-failed":case "identity-manager:unknown-resource":case "identity-manager:user-aborted":za="IdentityManager.2";break;case "identity-manager:authentication-failed":case "identity-manager:credential-request-failed":case "tokenExpiredError":za="IdentityManager.3";"tokenExpiredError"===ra.name&&(ra.name="identity-manager:credential-request-failed",ra.message="Parent application's token has expired.");break;case "identity-manager:aborted":za=
"IdentityManager.4";break;case "identity-manager:not-authenticated":za="IdentityManager.6";break;case "identity-manager:invalid-request":za=400}var Da=Error(ra.message);Da.name=ra.name;Da.code=za;Da.log=!!B.isDebug;H(Da)}})}else if(T){var K=T._oAuthCred;K||(P=new w(T,C),J=new w(T,y),P.isValid()&&J.isValid()?P.expires>J.expires?(K=P,J.destroy()):(K=J,P.destroy()):K=P.isValid()?P:J,T._oAuthCred=K);if(K.isValid()){var W=new v({userId:K.userId,server:aa.server,token:K.token,expires:K.expires,ssl:K.ssl,
_oAuthCred:K});var da=T.appId!==K.appId&&G._doPortalSignIn(A.resUrl_);da||K.refreshToken?(K.refreshToken?A._pendingDfd=G._getOAuthToken(aa.server,K.refreshToken,K.appId).then(function(ra){W.expires=Date.now()+1E3*ra.expires_in;W.token=ra.access_token;return W}):(P=new c,P.resolve(W),A._pendingDfd=P),A._pendingDfd.then(function(ra){return da?G._exchangeToken(ra.server,T.appId,ra.token).then(function(za){ra.token=za;return ra}).catch(function(){return ra}):ra}).then(function(ra){F(ra)}).catch(function(){K.destroy();
L()})):F(W)}else if(G._oAuthLocationParams&&G._hasSameServerInstance(T.portalUrl,G._oAuthLocationParams.state.portalUrl)&&(G._oAuthLocationParams.access_token||G._oAuthLocationParams.code&&G._oAuthLocationParams.state.uid===K.stateUID&&K.codeVerifier))P=G._oAuthLocationParams,G._oAuthLocationParams=null,A._pendingDfd=G._processOAuthResponseParams(P,T,aa).then(function(ra){F(ra)}).catch(H);else{var fa=function(){la?A._pendingDfd=G.oAuthSignIn(A.resUrl_,aa,T,A.options_).addCallbacks(F,H):(ha=Error("User is not signed in."),
ha.name="identity-manager:not-authenticated",ha.code="IdentityManagerBase.6",ha.log=!!B.isDebug,H(ha))};G._doPortalSignIn(A.resUrl_)?A._pendingDfd=G._getPlatformSelf(aa.server,T.appId).then(function(ra){var za=ra.portalUrl;!za||r.hasSameOrigin(za,window.location.origin,!0)?(W=new v({userId:ra.username,server:aa.server,expires:Date.now()+1E3*ra.expires_in,token:ra.token}),F(W)):fa()}).catch(fa):fa()}}else if(la)G._checkProtocol(A.resUrl_,aa,H,A.admin_)&&(P=A.options_,A.admin_&&(P=P||{},P.isAdmin=!0),
A._pendingDfd=G.signIn(A.resUrl_,aa,P).addCallbacks(F,H));else{var ha=Error("User is not signed in.");ha.name="identity-manager:not-authenticated";ha.code="IdentityManagerBase.6";ha.log=!!B.isDebug;H(ha)}},M=function(){var P=A.sinfo_,J=P.owningSystemUrl,U=A.options_,Y;if(U){var aa=U.token;var la=U.error;var T=U.prompt}(Y=G._findCredential(J,{token:aa,resource:A.resUrl_}))||e.some(G.credentials,function(N){this._isIdProvider(J,N.server)&&(Y=N);return!!Y},G);Y?(U=G.findCredential(A.resUrl_,Y.userId))?
F(U):E(P,G._legacyFed)?(U=Y.toJson(),U.server=P.server,U.resources=null,F(new v(U))):(A._pendingDfd=G.generateToken(G.findServerInfo(Y.server),null,{serverUrl:A.resUrl_,token:Y.token,ssl:Y.ssl})).addCallbacks(function(N){F(new v({userId:Y.userId,server:P.server,token:N.token,expires:h.isDefined(N.expires)?Number(N.expires):null,ssl:!!N.ssl,isAdmin:A.admin_,validity:N.validity}))},H):(G._busy=null,aa&&(A.options_.token=null),(A._pendingDfd=G.getCredential(J.replace(/\/?$/,"/sharing"),{resource:A.resUrl_,
owningTenant:P.owningTenant,token:aa,error:la,prompt:T})).addCallbacks(function(N){G._enqueue(A.resUrl_,A.sinfo_,A.options_,A,A.admin_)},function(N){H(N)}))};this._errbackFunc=H;var Q=A.sinfo_.owningSystemUrl,S=this._isServerRsrc(A.resUrl_),I=A.sinfo_._restInfoDfd;I?I.addCallbacks(function(P){var J=A.sinfo_;J._restInfoDfd&&(J.adminTokenServiceUrl=J._restInfoDfd.adminUrl_,J._restInfoDfd=null,J.tokenServiceUrl=l.getObject("authInfo.tokenServicesUrl",!1,P)||l.getObject("authInfo.tokenServiceUrl",!1,
P)||l.getObject("tokenServiceUrl",!1,P),J.shortLivedTokenValidity=l.getObject("authInfo.shortLivedTokenValidity",!1,P),J.currentVersion=P.currentVersion,J.owningTenant=P.owningTenant,(P=J.owningSystemUrl=P.owningSystemUrl)&&G._portals.push(P));S&&J.owningSystemUrl?M():L()},function(){A.sinfo_._restInfoDfd=null;var P=Error("Unknown resource - could not find token service endpoint.");P.name="identity-manager:server-identification-failed";P.code="IdentityManagerBase.2";P.log=!!B.isDebug;H(P)}):S&&Q?
M():A.sinfo_._selfReq?A.sinfo_._selfReq.selfDfd.then(function(P){var J={};if(P){var U=P.user&&P.user.username;J.username=U;J.allSSL=P.allSSL;var Y=P.supportsOAuth;var aa=parseFloat(P.currentVersion);if("multitenant"===P.portalMode)var la=P.customBaseUrl;A.sinfo_.currentVersion=aa}A.sinfo_.webTierAuth=!!U;return U&&G.normalizeWebTierAuth?G.generateToken(A.sinfo_,null,{ssl:J.allSSL}).addBoth(function(T){J.portalToken=T&&T.token;J.tokenExpiration=T&&T.expires;return J}):!U&&Y&&4.4<=aa&&!G._findOAuthInfo(A.resUrl_)?
G._generateOAuthInfo({portalUrl:A.sinfo_.server,customBaseUrl:la,owningTenant:A.sinfo_._selfReq.owningTenant}).always(function(){return J}):J}).always(function(P){A.sinfo_._selfReq=null;P?L(P.username,P.allSSL,P.portalToken,P.tokenExpiration):L()}):L()},_generateOAuthInfo:function(A){var G=this,F=A.portalUrl,H=A.customBaseUrl,L=A.owningTenant;if(A=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){var M=window.location.href;var Q=M.indexOf("?");-1<Q&&(M=M.slice(0,
Q));Q=M.search(/\/(apps|home)\//);M=-1<Q?M.slice(0,Q):null}A&&M?(this._hasTestedIfAppIsOnPortal=!0,A=g({url:M+"/sharing/rest",content:{f:"json"},handleAs:"json"}).then(function(){G.defaultOAuthInfo=new x({appId:"arcgisonline",popupCallbackUrl:M+"/home/oauth-callback.html"})})):(A=new c,A.resolve(),A=A.promise);return A.then(function(){if(G.defaultOAuthInfo)return F=F.replace(/^http:/i,"https:"),g({url:F+"/sharing/rest/oauth2/validateRedirectUri",content:{accountId:L,client_id:G.defaultOAuthInfo.appId,
redirect_uri:r.getAbsoluteUrl(G.defaultOAuthInfo.popupCallbackUrl),f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(S){if(S.valid){var I=G.defaultOAuthInfo.clone();I.portalUrl=S.urlKey&&H?"https://"+S.urlKey.toLowerCase()+"."+H:F;I.popup=window!==window.top||!(r.hasSameOrigin(F,window.location.origin)||G._gwDomains.some(function(P){return P.regex.test(F)&&P.regex.test(window.location.origin)}));G.oAuthInfos.push(I)}})})}});var v=f(b,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,
constructor:function(A){l.mixin(this,A);this.resources=this.resources||[];h.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var A=this,G=this.resources&&this.resources[0],F=m.id.findServerInfo(this.server),H=F&&F.owningSystemUrl,L=!!H&&"server"===this.scope,M=L&&E(F,m.id._legacyFed),Q=L&&m.id.findServerInfo(H),S,I=(S=F.webTierAuth)&&m.id.normalizeWebTierAuth,P=z[this.server];P=P&&P[this.userId];var J={username:this.userId,password:P};
if(!S||I)if(L&&!Q&&e.some(m.id.serverInfos,function(aa){m.id._isIdProvider(H,aa.server)&&(Q=aa);return!!Q}),S=Q&&m.id.findCredential(Q.server,this.userId),!L||S)if(M)S.refreshToken();else{if(L)var U={serverUrl:G,token:S&&S.token,ssl:S&&S.ssl};else if(I)J=null,U={ssl:this.ssl};else if(P)this.isAdmin&&(U={isAdmin:!0});else{if(G){G=m.id._sanitizeUrl(G);this._enqueued=1;var Y=m.id._enqueue(G,F,null,null,this.isAdmin,this);Y.addCallback(function(){A._enqueued=0;A.refreshServerTokens()}).addErrback(function(){A._enqueued=
0})}return Y}return m.id.generateToken(L?Q:F,L?null:J,U).addCallback(function(aa){A.token=aa.token;A.expires=h.isDefined(aa.expires)?Number(aa.expires):null;A.creationTime=(new Date).getTime();A.validity=aa.validity;A.onTokenChange();A.refreshServerTokens()}).addErrback(function(){})}},refreshServerTokens:function(){"portal"===this.scope&&e.forEach(m.id.credentials,function(A){var G=m.id.findServerInfo(A.server),F=G&&G.owningSystemUrl;A!==this&&A.userId===this.userId&&F&&"server"===A.scope&&(m.id._hasSameServerInstance(this.server,
F)||m.id._isIdProvider(F,this.server))&&(E(G,m.id._legacyFed)?(A.token=this.token,A.expires=this.expires,A.creationTime=this.creationTime,A.validity=this.validity,A.onTokenChange()):A.refreshToken())},this)},onTokenChange:function(A){clearTimeout(this._refreshTimer);var G=this.server&&m.id.findServerInfo(this.server),F=(G=G&&G.owningSystemUrl)&&m.id.findServerInfo(G);!1!==A&&(!G||"portal"===this.scope||F&&F.webTierAuth&&!m.id.normalizeWebTierAuth)&&(h.isDefined(this.expires)||h.isDefined(this.validity))&&
this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var A=e.indexOf(m.id.credentials,this);-1<A&&m.id.credentials.splice(A,1);this.onTokenChange();this.onDestroy()},toJson:function(){return this._toJson()},_toJson:function(){var A=h.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,
validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),G=this.resources;G&&0<G.length&&(A.resources=G.slice());return A},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var A=6E4*this.tokenRefreshBuffer,G=Math.pow(2,31)-1,F=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>F?F=0:F>G&&(F=G);this._refreshTimer=setTimeout(l.hitch(this,this.refreshToken),F>A?F-A:F)}});t.Credential=v;return m.IdentityManagerBase=
t})},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(f,B,l,e,c){f=f(null,{declaredClass:"esri.ServerInfo",constructor:function(u){B.mixin(this,u)},toJson:function(){return c.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,
hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}});return e.ServerInfo=f})},"esri/OAuthCredential":function(){define(["./kernel","dojo/_base/declare","dojo/has"],function(f,B,l){B=B(null,{declaredClass:"esri.OAuthCredential",oAuthInfo:null,storage:null,appId:null,codeVerifier:null,expires:null,refreshToken:null,ssl:null,stateUID:null,token:null,userId:null,constructor:function(e,c){this.oAuthInfo=e;this.storage=c;this._init()},isValid:function(){var e=!1;if(this.oAuthInfo&&
this.userId&&(this.refreshToken||this.token))if(null==this.expires&&this.refreshToken)e=!0;else{var c=Date.now();this.expires>c&&(this.expires-c)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(e=!0)}return e},save:function(){if(!this.storage)return!1;var e=this._load(),c=this.oAuthInfo;if(c&&c.authNamespace&&c.portalUrl){var u=e[c.authNamespace];u||(u=e[c.authNamespace]={});this.appId||(this.appId=c.appId);u[c.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,
ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(e))}catch(t){return!1}return!0}return!1},destroy:function(){var e=this._load(),c=this.oAuthInfo;if(c&&c.appId&&c.portalUrl&&(null==this.expires||this.expires>Date.now())&&(this.refreshToken||this.token)){var u=c.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",t=new FormData;t.append("f","json");t.append("auth_token",this.refreshToken||this.token);
t.append("client_id",c.appId);t.append("token_type_hint",this.refreshToken?"refresh_token":"access_token");if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(u,t);else{var d=new XMLHttpRequest;d.open("POST",u);d.send(t)}}if(c&&c.authNamespace&&c.portalUrl&&this.storage&&(u=e[c.authNamespace])){delete u[c.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(e))}catch(q){}}c&&(this.oAuthInfo=c._oAuthCred=null)},_init:function(){var e=this._load(),c=this.oAuthInfo;c&&c.authNamespace&&
c.portalUrl&&(e=e[c.authNamespace])&&(e=e[c.portalUrl])&&(this.appId=e.appId,this.codeVerifier=e.codeVerifier,this.expires=e.expires,this.refreshToken=e.refreshToken,this.ssl=e.ssl,this.stateUID=e.stateUID,this.token=e.token,this.userId=e.userId)},_load:function(){var e={};if(this.storage){var c=this.storage.getItem("esriJSAPIOAuth");if(c)try{e=JSON.parse(c)}catch(u){}}return e}});return f.OAuthCredential=B})},"esri/arcgis/OAuthInfo":function(){define(["../kernel","../lang","dojo/_base/declare","dojo/_base/lang",
"dojo/has"],function(f,B,l,e,c){var u=l(null,{declaredClass:"esri.arcgis.OAuthInfo",constructor:function(t){e.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",authNamespace:"/",forceLogin:!1,popup:!1,popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d490,width\x3d800,resizable,scrollbars,status",preserveUrlHash:!1,flowType:"auto"},t)},_oAuthCred:null,toJson:function(){return B.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,
minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,forceLogin:this.forceLogin,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures,preserveUrlHash:this.preserveUrlHash,flowType:this.flowType})},clone:function(){return new u(this.toJson())}});e.setObject("arcgis.OAuthInfo",u,f);return u})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),
function(f,B,l,e,c,u,t,d){return f("dijit.form.Form",[c,u,t,d],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(q){B.set(this.domNode,
"encType",q);e("ie")&&(this.domNode.encoding=q);this._set("encType",q)},reset:function(q){var m={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:q?q.target:this.domNode,target:q?q.target:this.domNode};!1!==this.onReset(m)&&m.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(q){this.reset(q);q.stopPropagation();q.preventDefault();return!1},_onSubmit:function(q){var m=this.constructor.prototype;if(this.execute!=
m.execute||this.onExecute!=m.onExecute)l.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(q)&&(q.stopPropagation(),q.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"esri/OAuthSignInHandler":function(){define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query ./core/events dijit/form/Button dojo/query".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n){var r=null,k=null;try{r=window.localStorage,k=window.sessionStorage}catch(b){}var g=window.crypto||window.msCrypto;return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(b){this._oAuthRedirectFunc=b},oAuthSignIn:function(b,w,x,z){var D=this._oAuthDfd=new d;D.resUrl_=b;D.sinfo_=w;D.oinfo_=x;var E=x._oAuthCred;if(E.storage&&("authorization-code"===x.flowType||"auto"===x.flowType&&8.4<=w.currentVersion)){var C=g.getRandomValues(new Uint8Array(32));var y=e.base64UrlEncode(C);E.codeVerifier=y;C=g.getRandomValues(new Uint8Array(32));E.stateUID=e.base64UrlEncode(C);E.save()||(E.codeVerifier=y=null)}else E.codeVerifier=null;var v=this;
this._getCodeChallenge(y).then(function(A){var G=!z||!1!==z.oAuthPopupConfirmation;if(!x.popup||!G)return v._doOAuthSignIn(b,w,x,A),D;D.codeChallenge_=A;v._nls||(v._nls=a.identity);v.oAuthDialog||(v.oAuthDialog=v._createOAuthDialog());A=v.oAuthDialog;G=z&&z.error;var F=z&&z.token;B.hide(A.errMsg_);G&&403==G.code&&F&&(m.set(A.errMsg_,"innerHTML",v._nls.forbidden),B.show(A.errMsg_));m.set(A.serverLink_,{title:w.server,innerHTML:-1!==w.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":w.server});
A.show()});return D},setOAuthResponseHash:function(b){b&&("#"===b.charAt(0)&&(b=b.substring(1)),this._processOAuthPopupParams(h.queryToObject(b)))},_createOAuthDialog:function(){var b=this._nls,w=l.substitute(b,this._oAuthDialogContent);w=l.substitute({server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},w);var x=new c({title:b.title,content:w,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var z=x.esriIdMgr_._oAuthDfd;
x.hide_();x.esriIdMgr_._doOAuthSignIn(z.resUrl_,z.sinfo_,z.oinfo_,z.codeChallenge_)},cancel_:function(){var z=x.esriIdMgr_._oAuthDfd;x.esriIdMgr_._oAuthDfd=null;x.hide_();var D=Error("ABORTED");D.code="IdentityManager.2";D.log=!!t.isDebug;z.errback(D)},hide_:function(){B.hide(x.errMsg_);x.hide();c._DialogLevelManager.hide(x)}});b=x.domNode;x.btnSubmit_=u.byNode(q.query(".esriIdSubmit",b)[0]);x.btnCancel_=u.byNode(q.query(".esriIdCancel",b)[0]);x.serverLink_=q.query(".serverLink",b)[0];x.errMsg_=q.query(".esriErrorMsg",
b)[0];x.connect(x.btnSubmit_,"onClick",x.execute_);x.connect(x.btnCancel_,"onClick",x.onCancel);x.connect(x,"onCancel",x.cancel_);return x},_doOAuthSignIn:function(b,w,x,z){var D=this,E=x._oAuthCred,C={portalUrl:x.portalUrl};!x.popup&&x.preserveUrlHash&&window.location.hash&&(C.hash=window.location.hash);E.stateUID&&(C.uid=E.stateUID);C={client_id:x.appId,response_type:E.codeVerifier?"code":"token",state:JSON.stringify(C),expiration:x.expiration,locale:x.locale,redirect_uri:this._getRedirectURI(x,
!!E.codeVerifier)};x.forceLogin&&(C.force_login=!0);x.forceUserId&&x.userId&&(C.prepopulatedusername=x.userId);!x.popup&&this._doPortalSignIn(b)&&(C.redirectToUserOrgUrl=!0);E.codeVerifier&&(C.code_challenge=z||E.codeVerifier,C.code_challenge_method=z?"S256":"plain");z=x.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize";E=z+"?"+h.objectToQuery(C);if(x.popup){var y=window.open(E,"esriJSAPIOAuth",x.popupWindowFeatures);y?(y.focus(),this._oAuthDfd.oAuthWin_=y,this._oAuthIntervalId=setInterval(function(){if(y.closed){clearInterval(D._oAuthIntervalId);
D._oAuthOnPopupHandle.remove();var v=D._oAuthDfd;if(v){var A=Error("ABORTED");A.code="IdentityManager.2";A.log=!!t.isDebug;v.errback(A)}}},500),D._oAuthOnPopupHandle=n.on(window,["arcgis:auth:hash","arcgis:auth:location:search"],function(v){"arcgis:auth:hash"===v.type?D.setOAuthResponseHash(v.detail):D._setOAuthResponseQueryString(v.detail)})):(b=Error("ABORTED"),b.name="identity-manager:user-aborted",b.code="IdentityManager.2",b.log=!!t.isDebug,this._oAuthDfd.errback(b))}else this._rejectOnPersistedPageShow=
!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:C,authorizeUrl:z,resourceUrl:b,serverInfo:w,oAuthInfo:x}):window.location.href=E},_getCodeChallenge:function(b){if(b&&window.isSecureContext)return b=(new TextEncoder).encode(b),g.subtle.digest("SHA-256",b).then(function(w){return e.base64UrlEncode(new Uint8Array(w))});b=new d;b.resolve(null);return b},_getRedirectURI:function(b,w){var x=window.location.href.replace(/#.*$/,"");if(b.popup)return e.getAbsoluteUrl(b.popupCallbackUrl);
if(w){var z=e.urlToObject(x);if(z.query)return"code error error_description message_code persist state".split(" ").forEach(function(D){delete z.query[D]}),(b=h.objectToQuery(z.query))?z.path+"?"+b:z.path}return x},_processOAuthPopupParams:function(b){var w=this._oAuthDfd;this._oAuthDfd=null;if(w)if(clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle&&this._oAuthOnPopupHandle.remove(),b.error){var x="access_denied"===b.error;b=Error(x?"ABORTED":"OAuth: "+b.error+" - "+b.error_description);
b.name=x?"identity-manager:user-aborted":"identity-manager:authentication-failed";b.code="IdentityManagerBase."+(x?2:3);b.log=!!t.isDebug;w.errback(b)}else this._processOAuthResponseParams(b,w.oinfo_,w.sinfo_).then(function(z){w.resolve(z)}).catch(function(z){w.reject(z)})},_processOAuthResponseParams:function(b,w,x){var z=w._oAuthCred;if(b.code){var D=z.codeVerifier;z.codeVerifier=null;z.stateUID=null;z.save();return this._getOAuthToken(x.server,b.code,w.appId,this._getRedirectURI(w,!0),D).then(function(C){var y=
new f({userId:C.username,server:x.server,token:C.access_token,expires:Date.now()+1E3*C.expires_in,ssl:C.ssl,oAuthState:b.state,_oAuthCred:z});w.userId=y.userId;z.storage=C.persist?r:k;z.refreshToken=C.refresh_token;z.token=null;z.expires=C.refresh_token_expires_in?Date.now()+1E3*C.refresh_token_expires_in:null;z.userId=y.userId;z.ssl=y.ssl;z.save();return y})}D=new f({userId:b.username,server:x.server,token:b.access_token,expires:Date.now()+1E3*Number(b.expires_in),ssl:"true"===b.ssl,oAuthState:b.state,
_oAuthCred:z});w.userId=D.userId;z.storage=b.persist?r:k;z.refreshToken=null;z.token=D.token;z.expires=D.expires;z.userId=D.userId;z.ssl=D.ssl;z.save();var E=new d;E.resolve(D);return E},_setOAuthResponseQueryString:function(b){b&&("?"===b.charAt(0)&&(b=b.substring(1)),this._processOAuthPopupParams(h.queryToObject(b)))}}})},"esri/core/events":function(){define([],function(){return{on:function(f,B,l){if(!f||"function"!==typeof f.on&&"function"!==typeof f.addEventListener)throw new TypeError("target is not a Evented or EventTarget object");
if("on"in f)return f.on(B,l);if(Array.isArray(B)){for(var e=B.slice(),c=0;c<e.length;c++)f.addEventListener(e[c],l);return{remove:function(){for(var u=0;u<e.length;u++)f.removeEventListener(e[u],l)}}}f.addEventListener(B,l);return{remove:function(){f.removeEventListener(B,l)}}}}})},"esri/libs/sanitizer/Sanitizer":function(){!function(f,B){"object"==typeof exports&&"undefined"!=typeof module?module.exports=B():"function"==typeof define&&define.amd?define(B):(f="undefined"!=typeof globalThis?globalThis:
f||self).Sanitizer=B()}(this,function(){function f(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,
"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,
"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,
"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,
cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,
"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,
"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,
"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,
"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,
"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,
"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,
"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,
"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}function B(va){var Ga=va||{},ba={},ia;for(ia in Ga)ba[ia]=Ga[ia];(va=ba).whiteList=va.whiteList||H.whiteList;va.onAttr=va.onAttr||H.onAttr;va.onIgnoreAttr=va.onIgnoreAttr||H.onIgnoreAttr;va.safeAttrValue=va.safeAttrValue||H.safeAttrValue;this.options=va}function l(va){return va.replace(P,"\x26lt;").replace(J,"\x26gt;")}function e(va){return va.replace(U,"\x26quot;")}function c(va){return va.replace(Y,'"')}function u(va){return va.replace(aa,
function(Ga,ba){return"x"===ba[0]||"X"===ba[0]?String.fromCharCode(parseInt(ba.substr(1),16)):String.fromCharCode(parseInt(ba,10))})}function t(va){return va.replace(la,":").replace(T," ")}function d(va){for(var Ga="",ba=0,ia=va.length;ba<ia;ba++)Ga+=32>va.charCodeAt(ba)?" ":va.charAt(ba);return S.trim(Ga)}function q(va){return va=d(va=t(va=u(va=c(va))))}function m(va){return va=l(va=e(va))}function a(va,Ga){for(;Ga<va.length;Ga++){var ba=va[Ga];if(" "!==ba)return"\x3d"===ba?Ga:-1}}function h(va,
Ga){for(;0<Ga;Ga--){var ba=va[Ga];if(" "!==ba)return"\x3d"===ba?Ga:-1}}function n(va){return'"'===va[0]&&'"'===va[va.length-1]||"'"===va[0]&&"'"===va[va.length-1]?va.substr(1,va.length-2):va}function r(va){var Ga=va||{},ba={},ia;for(ia in Ga)ba[ia]=Ga[ia];(va=ba).stripIgnoreTag&&(va.onIgnoreTag=ra.onIgnoreTagStripAll);va.whiteList=va.whiteList||ra.whiteList;va.onTag=va.onTag||ra.onTag;va.onTagAttr=va.onTagAttr||ra.onTagAttr;va.onIgnoreTag=va.onIgnoreTag||ra.onIgnoreTag;va.onIgnoreTagAttr=va.onIgnoreTagAttr||
ra.onIgnoreTagAttr;va.safeAttrValue=va.safeAttrValue||ra.safeAttrValue;va.escapeHtml=va.escapeHtml||ra.escapeHtml;this.options=va;!1===va.css?this.cssFilter=!1:(va.css=va.css||{},this.cssFilter=new ha(va.css))}var k,g,b=Object.prototype,w=Function.prototype.toString,x=b.hasOwnProperty,z=w.call(Object),D=b.toString,E=(k=Object.getPrototypeOf,g=Object,function(va){return k(g(va))}),C=function(va){var Ga;if(!(Ga=!va||"object"!=typeof va||"[object Object]"!=D.call(va))&&(Ga=!1,null!=va&&"function"!=typeof va.toString))try{Ga=
!!(va+"")}catch(ba){}if(Ga)return!1;va=E(va);if(null===va)return!0;va=x.call(va,"constructor")&&va.constructor;return"function"==typeof va&&va instanceof va&&w.call(va)==z},y={exports:{}},v={};b={exports:{}};var A={},G=/javascript\s*:/gim;A.whiteList=f();A.getDefaultWhiteList=f;A.onAttr=function(va,Ga,ba){};A.onIgnoreAttr=function(va,Ga,ba){};A.safeAttrValue=function(va,Ga){return G.test(Ga)?"":Ga};var F={indexOf:function(va,Ga){var ba;if(Array.prototype.indexOf)return va.indexOf(Ga);var ia=0;for(ba=
va.length;ia<ba;ia++)if(va[ia]===Ga)return ia;return-1},forEach:function(va,Ga,ba){var ia;if(Array.prototype.forEach)return va.forEach(Ga,ba);var wa=0;for(ia=va.length;wa<ia;wa++)Ga.call(ba,va[wa],wa,va)},trim:function(va){return String.prototype.trim?va.trim():va.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(va){return String.prototype.trimRight?va.trimRight():va.replace(/(\s*$)/g,"")}},H=A,L=function(va,Ga){function ba(){if(!wa){var Ha=F.trim(va.slice(Aa,Fa)),ea=Ha.indexOf(":");if(-1!==ea){var Oa=
F.trim(Ha.slice(0,ea));ea=F.trim(Ha.slice(ea+1));Oa&&(Ha=Ga(Aa,O.length,Oa,ea,Ha))&&(O+=Ha+"; ")}}Aa=Fa+1}";"!==(va=F.trimRight(va))[va.length-1]&&(va+=";");for(var ia=va.length,wa=!1,Aa=0,Fa=0,O="";Fa<ia;Fa++){var ya=va[Fa];if("/"===ya&&"*"===va[Fa+1]){ya=va.indexOf("*/",Fa+2);if(-1===ya)break;Aa=(Fa=ya+1)+1;wa=!1}else"("===ya?wa=!0:")"===ya?wa=!1:";"===ya?wa||ba():"\n"===ya&&ba()}return F.trim(O)};B.prototype.process=function(va){if(!(va=(va=va||"").toString()))return"";var Ga=this.options,ba=Ga.whiteList,
ia=Ga.onAttr,wa=Ga.onIgnoreAttr,Aa=Ga.safeAttrValue;return L(va,function(Fa,O,ya,Ha,ea){var Oa=ba[ya],Na=!1;if(!0===Oa?Na=Oa:"function"==typeof Oa?Na=Oa(Ha):Oa instanceof RegExp&&(Na=Oa.test(Ha)),!0!==Na&&(Na=!1),Ha=Aa(ya,Ha)){var Ca;Fa={position:O,sourcePosition:Fa,source:ea,isWhite:Na};return Na?null==(Ca=ia(ya,Ha,Fa))?ya+":"+Ha:Ca:null==(Ca=wa(ya,Ha,Fa))?void 0:Ca}})};!function(va,Ga){for(var ba in(Ga=va.exports=function(ia,wa){return(new B(wa)).process(ia)}).FilterCSS=B,A)Ga[ba]=A[ba]}(b,b.exports);
var M={indexOf:function(va,Ga){var ba;if(Array.prototype.indexOf)return va.indexOf(Ga);var ia=0;for(ba=va.length;ia<ba;ia++)if(va[ia]===Ga)return ia;return-1},forEach:function(va,Ga,ba){var ia;if(Array.prototype.forEach)return va.forEach(Ga,ba);var wa=0;for(ia=va.length;wa<ia;wa++)Ga.call(ba,va[wa],wa,va)},trim:function(va){return String.prototype.trim?va.trim():va.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(va){return(va=/\s|\n|\t/.exec(va))?va.index:-1}},Q=b.exports.getDefaultWhiteList,S=
M,I=new b.exports.FilterCSS,P=/</g,J=/>/g,U=/"/g,Y=/&quot;/g,aa=/&#([a-zA-Z0-9]*);?/gim,la=/&colon;?/gim,T=/&newline;?/gim,N=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,K=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,W=/u\s*r\s*l\s*\(.*/gi;v.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:"autoplay controls crossorigin loop muted preload src".split(" "),b:[],bdi:["dir"],bdo:["dir"],
big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],
strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls crossorigin loop muted playsinline poster preload src height width".split(" ")};v.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href",
"alt"],article:[],aside:[],audio:"autoplay controls crossorigin loop muted preload src".split(" "),b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],
ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls crossorigin loop muted playsinline poster preload src height width".split(" ")}};
v.onTag=function(va,Ga,ba){};v.onIgnoreTag=function(va,Ga,ba){};v.onTagAttr=function(va,Ga,ba){};v.onIgnoreTagAttr=function(va,Ga,ba){};v.safeAttrValue=function(va,Ga,ba,ia){if(ba=q(ba),"href"===Ga||"src"===Ga){if("#"===(ba=S.trim(ba)))return"#";if("http://"!==ba.substr(0,7)&&"https://"!==ba.substr(0,8)&&"mailto:"!==ba.substr(0,7)&&"tel:"!==ba.substr(0,4)&&"data:image/"!==ba.substr(0,11)&&"ftp://"!==ba.substr(0,6)&&"./"!==ba.substr(0,2)&&"../"!==ba.substr(0,3)&&"#"!==ba[0]&&"/"!==ba[0])return""}else if("background"===
Ga){if(N.lastIndex=0,N.test(ba))return""}else if("style"===Ga){if((K.lastIndex=0,K.test(ba))||(W.lastIndex=0,W.test(ba)&&(N.lastIndex=0,N.test(ba))))return"";!1!==ia&&(ba=(ia=ia||I).process(ba))}return ba=m(ba)};v.escapeHtml=l;v.escapeQuote=e;v.unescapeQuote=c;v.escapeHtmlEntities=u;v.escapeDangerHtml5Entities=t;v.clearNonPrintableCharacter=d;v.friendlyAttrValue=q;v.escapeAttrValue=m;v.onIgnoreTagStripAll=function(){return""};v.StripTagBody=function(va,Ga){"function"!=typeof Ga&&(Ga=function(){});
var ba=!Array.isArray(va),ia=[],wa=!1;return{onIgnoreTag:function(Aa,Fa,O){return ba||-1!==S.indexOf(va,Aa)?O.isClosing?(ia.push([!1!==wa?wa:O.position,O.position+10]),wa=!1,"[/removed]"):(wa||(wa=O.position),"[removed]"):Ga(Aa,Fa,O)},remove:function(Aa){var Fa="",O=0;return S.forEach(ia,function(ya){Fa+=Aa.slice(O,ya[0]);O=ya[1]}),Fa+=Aa.slice(O)}}};v.stripCommentTag=function(va){for(var Ga="",ba=0;ba<va.length;){var ia=va.indexOf("\x3c!--",ba);if(-1===ia){Ga+=va.slice(ba);break}Ga+=va.slice(ba,
ia);ba=va.indexOf("--\x3e",ia);if(-1===ba)break;ba+=3}return Ga};v.stripBlankChar=function(va){va=va.split("");return(va=va.filter(function(Ga){Ga=Ga.charCodeAt(0);return 127!==Ga&&(!(31>=Ga)||10===Ga||13===Ga)})).join("")};v.cssFilter=I;v.getDefaultCSSWhiteList=Q;var da={},fa=/[^a-zA-Z0-9_:\.\-]/gim;da.parseTag=function(va,Ga,ba){var ia="",wa=0,Aa=!1,Fa=!1,O=0,ya=va.length,Ha="",ea="";O=0;a:for(;O<ya;O++)if(ea=va.charAt(O),!1===Aa)"\x3c"===ea&&(Aa=O);else if(!1===Fa)if("\x3c"===ea)ia+=ba(va.slice(wa,
O)),wa=Aa=O;else if("\x3e"===ea)ia+=ba(va.slice(wa,Aa)),wa=ea=va.slice(Aa,O+1),Ha=M.spaceIndex(wa),wa=-1===Ha?wa.slice(1,-1):wa.slice(1,Ha+1),Ha=("/"===(wa=M.trim(wa).toLowerCase()).slice(0,1)&&(wa=wa.slice(1)),"/"===wa.slice(-1)&&(wa=wa.slice(0,-1)),wa),ia+=Ga(Aa,ia.length,Ha,ea,"\x3c/"===ea.slice(0,2)),wa=O+1,Aa=!1;else{if('"'===ea||"'"===ea){Ha=1;for(var Oa=va.charAt(O-Ha);""===Oa.trim()||"\x3d"===Oa;){if("\x3d"===Oa){Fa=ea;continue a}Oa=va.charAt(O-++Ha)}}}else ea===Fa&&(Fa=!1);return wa<va.length&&
(ia+=ba(va.substr(wa))),ia};da.parseAttr=function(va,Ga){function ba(Ha,ea){1>(Ha=(Ha=M.trim(Ha)).replace(fa,"").toLowerCase()).length||(Ha=Ga(Ha,ea||""))&&wa.push(Ha)}for(var ia=0,wa=[],Aa=!1,Fa=va.length,O=0;O<Fa;O++){var ya=va.charAt(O);if(!1!==Aa||"\x3d"!==ya)if(!1===Aa||O!==ia||'"'!==ya&&"'"!==ya||"\x3d"!==va.charAt(O-1))/\s|\n|\t/.test(ya)&&((va=va.replace(/\s|\n|\t/g," "),!1===Aa)?-1===(ya=a(va,O))?(ba(M.trim(va.slice(ia,O))),Aa=!1,ia=O+1):O=ya-1:-1===(ya=h(va,O-1))&&(ba(Aa,n(M.trim(va.slice(ia,
O)))),Aa=!1,ia=O+1));else{if(-1===(ya=va.indexOf(ya,O+1)))break;ba(Aa,M.trim(va.slice(ia+1,ya)));Aa=!1;ia=(O=ya)+1}else Aa=va.slice(ia,O),ia=O+1}return ia<va.length&&(!1===Aa?ba(va.slice(ia)):ba(Aa,n(M.trim(va.slice(ia))))),M.trim(wa.join(" "))};var ha=b.exports.FilterCSS,ra=v,za=da.parseTag,Da=da.parseAttr;r.prototype.process=function(va){if(!(va=(va=va||"").toString()))return"";var Ga=this.options,ba=Ga.whiteList,ia=Ga.onTag,wa=Ga.onIgnoreTag,Aa=Ga.onTagAttr,Fa=Ga.onIgnoreTagAttr,O=Ga.safeAttrValue,
ya=Ga.escapeHtml,Ha=this.cssFilter;Ga.stripBlankChar&&(va=ra.stripBlankChar(va));Ga.allowCommentTag||(va=ra.stripCommentTag(va));var ea=!1;Ga.stripIgnoreTagBody&&(ea=ra.StripTagBody(Ga.stripIgnoreTagBody,wa),wa=ea.onIgnoreTag);va=za(va,function(Oa,Na,Ca,X,oa){Na={sourcePosition:Oa,position:Na,isClosing:oa,isWhite:ba.hasOwnProperty(Ca)};if(null!=(Oa=ia(Ca,X,Na)))return Oa;if(Na.isWhite){if(Na.isClosing)return"\x3c/"+Ca+"\x3e";Oa=function(Z){var ja=M.spaceIndex(Z);if(-1===ja)return{html:"",closing:"/"===
Z[Z.length-2]};ja="/"===(Z=M.trim(Z.slice(ja+1,-1)))[Z.length-1];return ja&&(Z=M.trim(Z.slice(0,-1))),{html:Z,closing:ja}}(X);var pa=ba[Ca];Na=Da(Oa.html,function(Z,ja){var ta,xa=-1!==M.indexOf(pa,Z);return null==(ta=Aa(Ca,Z,ja,xa))?xa?(ja=O(Ca,Z,ja,Ha))?Z+'\x3d"'+ja+'"':Z:null==(ta=Fa(Ca,Z,ja,xa))?void 0:ta:ta});X="\x3c"+Ca;return Na&&(X+=" "+Na),Oa.closing&&(X+=" /"),X+="\x3e"}return null==(Oa=wa(Ca,X,Na))?ya(X):Oa},ya);return ea&&(va=ea.remove(va)),va};return function(va,Ga){function ba(Aa,Fa){return(new ia(Fa)).process(Aa)}
var ia=r,wa;for(wa in(Ga=va.exports=ba).filterXSS=ba,Ga.FilterXSS=ia,v)Ga[wa]=v[wa];for(wa in da)Ga[wa]=da[wa];"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=va.exports)}(y,y.exports),function(){function va(Ga,ba){var ia,wa=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],
em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:"alt border height src style width".split(" "),li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:"border cellpadding cellspacing height style width".split(" "),tbody:[],tr:["align","height","style","valign"],td:"align colspan height nowrap rowspan style valign width".split(" "),
th:"align colspan height nowrap rowspan style valign width".split(" "),u:[],ul:[],video:"autoplay controls height loop muted poster preload width".split(" ")};this.allowedProtocols="http https mailto iform tel flow lfmobile arcgis-navigator arcgis-appstudio-player arcgis-survey123 arcgis-collector arcgis-workforce arcgis-explorer arcgis-trek2there arcgis-quickcapture mspbi comgooglemaps pdfefile pdfehttp pdfehttps boxapp boxemm awb awbs gropen radarscope".split(" ");this.arcgisFilterOptions={allowCommentTag:!0,
safeAttrValue:function(Aa,Fa,O,ya){return"a"===Aa&&"href"===Fa||("img"===Aa||"source"===Aa)&&"src"===Fa?wa.sanitizeUrl(O):y.exports.safeAttrValue(Aa,Fa,O,ya)}};Ga&&!ba?ia=Ga:Ga&&ba?(ia=Object.create(this.arcgisFilterOptions),Object.keys(Ga).forEach(function(Aa){"whiteList"===Aa?ia.whiteList=wa._extendObjectOfArrays([wa.arcgisWhiteList,Ga.whiteList||{}]):ia[Aa]=Ga[Aa]})):(ia=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList;this.xssFilterOptions=ia;this._xssFilter=new y.exports.FilterXSS(ia)}
return va.prototype.sanitize=function(Ga,ba){switch(void 0===ba&&(ba={}),typeof Ga){case "number":return isNaN(Ga)||!isFinite(Ga)?null:Ga;case "boolean":return Ga;case "string":return this._xssFilter.process(Ga);case "object":return this._iterateOverObject(Ga,ba);default:if(!ba.allowUndefined||void 0!==Ga)return null}},va.prototype.sanitizeUrl=function(Ga){var ba=this._trim(Ga.substring(0,Ga.indexOf(":")));return"/"===Ga||"#"===Ga||"#"===Ga[0]||-1<this.allowedProtocols.indexOf(ba.toLowerCase())?y.exports.escapeAttrValue(Ga):
""},va.prototype.sanitizeHTMLAttribute=function(Ga,ba,ia,wa){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(Ga,ba,ia,wa):y.exports.safeAttrValue(Ga,ba,ia,wa)},va.prototype.validate=function(Ga,ba){void 0===ba&&(ba={});ba=this.sanitize(Ga,ba);return{isValid:Ga===ba,sanitized:ba}},va.prototype._extendObjectOfArrays=function(Ga){var ba={};return Ga.forEach(function(ia){Object.keys(ia).forEach(function(wa){Array.isArray(ia[wa])&&Array.isArray(ba[wa])?
ba[wa]=ba[wa].concat(ia[wa]):ba[wa]=ia[wa]})}),ba},va.prototype._iterateOverObject=function(Ga,ba){var ia=this;void 0===ba&&(ba={});try{var wa=!1,Aa=void 0;if(Array.isArray(Ga))Aa=Ga.reduce(function(Fa,O){var ya=ia.validate(O,ba);return ya.isValid?Fa.concat([O]):(wa=!0,Fa.concat([ya.sanitized]))},[]);else{if(!C(Ga))return ba.allowUndefined&&void 0===Ga?void 0:null;Aa=Object.keys(Ga).reduce(function(Fa,O){var ya=Ga[O],Ha=ia.validate(ya,ba);return Ha.isValid?Fa[O]=ya:(wa=!0,Fa[O]=Ha.sanitized),Fa},
{})}return wa?Aa:Ga}catch(Fa){return null}},va.prototype._trim=function(Ga){return String.prototype.trim?Ga.trim():Ga.replace(/(^\s*)|(\s*$)/g,"")},va}()})},"arcgisonline/sharing/dijit/dialog/DownloadImageDlg":function(){define("dojo/_base/declare dojo/i18n!arcgisonline/nls/arcgisonline dojo/text!./templates/DownloadImageDlg.html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ../../util".split(" "),function(f,B,l,e,c,u,t){return f([e,c,u],{templateString:l,widgetsInTemplate:!0,
_i18nStrings:B,constructor:function(d,q){f.safeMixin(this,d)},show:function(){this.dialog.show();this.own(dojo.connect(this.dialog,"onHide",dojo.hitch(this,function(){this.hide()})))},updateMessage:function(d){this.message.innerHTML=d},setCancelUrl:function(d){this.cancelUrl=d;this._cancelBtn.set("disabled",!1)},_handleCancelButtonClick:function(){this.hide()},hide:function(){this.cancelUrl&&t.request({url:this.cancelUrl});this.dialog.hide()}})})},"dojo/hash":function(){define("./_base/kernel require ./_base/config ./aspect ./_base/lang ./topic ./domReady ./sniff".split(" "),
function(f,B,l,e,c,u,t,d){function q(x,z){z=x.indexOf(z);return 0<=z?x.substring(z+1):""}function m(){return q(location.href,"#")}function a(){u.publish("/dojo/hashchange",m())}function h(){m()!==k&&(k=m(),a())}function n(x){if(g)if(g.isTransitioning())setTimeout(c.hitch(null,n,x),w);else{var z=g.iframe.location.href,D=z.indexOf("?");g.iframe.location.replace(z.substring(0,D)+"?"+x)}else z=location.href.replace(/#.*/,""),location.replace(z+"#"+x),!b&&h()}function r(){function x(){k=m();E=A?k:q(G.href,
"?");C=!1;y=null}var z=document.createElement("iframe"),D=l.dojoBlankHtmlUrl||B.toUrl("./resources/blank.html");z.id="dojo-hash-iframe";z.src=D+"?"+m();z.style.display="none";document.body.appendChild(z);this.iframe=f.global["dojo-hash-iframe"];var E,C,y,v,A,G=this.iframe.location;this.isTransitioning=function(){return C};this.pollLocation=function(){if(!A)try{var F=q(G.href,"?");document.title!=v&&(v=this.iframe.document.title=document.title)}catch(L){A=!0}var H=m();if(C&&k===H)if(A||F===y)x(),a();
else{setTimeout(c.hitch(this,this.pollLocation),0);return}else if(k!==H||!A&&E!==F){if(k!==H){k=H;C=!0;y=H;z.src=D+"?"+y;A=!1;setTimeout(c.hitch(this,this.pollLocation),0);return}A||(location.href="#"+G.search.substring(1),x(),a())}setTimeout(c.hitch(this,this.pollLocation),w)};x();setTimeout(c.hitch(this,this.pollLocation),w)}f.hash=function(x,z){if(!arguments.length)return m();"#"==x.charAt(0)&&(x=x.substring(1));z?n(x):location.hash="#"+x;return x};var k,g,b,w=l.hashPollFrequency||100;t(function(){"onhashchange"in
f.global&&(!d("ie")||8<=d("ie")&&"BackCompat"!=document.compatMode)?b=e.after(f.global,"onhashchange",a,!0):document.addEventListener?(k=m(),setInterval(h,w)):document.attachEvent&&(g=new r)});return f.hash})},"esri/arcgis/Portal":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/_base/Deferred dojo/_base/array dojo/_base/sniff require ../config ../kernel ../lang ../request ../urlUtils ../Evented ../IdentityManager".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h,n){var r={options:{disableIdentityLookup:!0},
requestParams:{f:"json"}},k=function(v){function A(G){v[G]||(v[G]=function(){var F=arguments;return e.when(v,function(H){Array.prototype.unshift.call(F,H.results||H);return k(c[G].apply(c,F))})})}if(!v)return v;v.then&&(v=B.delegate(v));v.total||(v.total=e.when(v,function(G){return m.isDefined(G.total)?G.total:G.length||0}));A("forEach");A("filter");A("map");A("some");A("every");return v},g={useSSL:function(v,A){var G=r&&r.self||{};if(G&&!G.isPortal)return-1!==v.indexOf("https:")||G.allSSL?A.replace("http:",
"https:"):A;var F=g.getLocation(A);return-1<G.portalHostname.toLowerCase().indexOf(F.hostname.toLowerCase())&&F.port&&"80"!==F.port&&"443"!==F.port?(A=F.pathname,A=0===A.indexOf("/")?A:"/"+A,G.allSSL||-1<v.indexOf("https:")?"https://"+F.hostname+(G.httpsPort&&"443"!==G.httpsPort?":"+G.httpsPort:"")+A+F.search:"http://"+F.hostname+(G.httpPort&&"80"!==G.httpPort?":"+G.httpPort:"")+A+F.search):-1!==v.indexOf("https:")||G.allSSL?A.replace("http:","https:"):A},formatUrl:function(v){var A=r.currentToken;
return-1!==v.indexOf("null")?null:g.useSSL(window.location.protocol,A?v+(-1!==v.indexOf("?")?"\x26":"?")+("token\x3d"+A):v)},getLocation:function(v){var A=document.createElement("a");A.href=v;return{protocol:A.protocol,hostname:A.hostname,port:A.port,pathname:A.pathname,search:A.search,hash:A.hash,host:A.host}},resultsToTypedArray:function(v,A,G){G=G?G.listings||G.notifications||G.userInvitations||G.tags||G.items||G.groups||G.comments||G.provisions||G.results||G:[];return c.map(G,function(F){F=B.mixin(F,
A||{});return v?new v(F):F})},clearFieldsFromObject:function(v,A){var G,F=v.length;if(B.isArray(v))for(G=0;G<F;G++)delete A[v[G]];else for(G in v)delete A[G];return A},requestToTypedArray:function(v,A,G,F,H){return k(g.request(v,A,G).then(B.partial(g.resultsToTypedArray,F,H)))},request:function(v,A,G){if(A){A.portal&&delete A.portal;if(A.form){var F=A.form;delete A.form}if(A.hasOwnProperty("withCredentials")){var H=A.withCredentials;delete A.withCredentials}}A=B.mixin(B.mixin({},A||{}),r.requestParams);
v={url:g.useSSL(window.location.protocol,v.url||v),content:A,callbackParamName:"callback",timeout:L&&L.timeout||0,form:F};null!=H&&(v.withCredentials=H);var L=B.mixin(G||{},r.options);return a(v,L)},formatQueryParams:function(v,A,G){v=B.mixin(B.mixin({},v),B.isString(A)?{q:A}:A||{});v.q=!G&&r.extraQuery?"("+v.q+")"+r.extraQuery:v.q;return v}},b=f([],{declaredClass:"esri.arcgis.PortalComment",constructor:function(v){B.mixin(this,v);this.url=this.item.itemUrl+"/comments/"+this.id;this.created=this.created?
new Date(this.created):null}}),w=f([],{declaredClass:"esri.arcgis.PortalRating",constructor:function(v){B.mixin(this,v);this.url=this.item.itemUrl+"/rating";this.created=this.created?new Date(this.created):null}}),x=f([],{declaredClass:"esri.arcgis.PortalItem",constructor:function(v){B.mixin(this,v);this.folderId=this.ownerFolder||this.folderId;this.itemUrl=(this.portal&&this.portal.portalUrl)+"content/items/"+this.id;this.userItemUrl=this.hasOwnProperty("ownerFolder")?this.itemUrl.replace("/content/",
"/content/users/"+this.owner+(this.folderId?"/"+this.folderId:"")+"/"):null;this.itemDataUrl=g.formatUrl(this.itemUrl+"/data");this.thumbnailUrl=g.formatUrl(this.itemUrl+"/info/"+this.thumbnail);this.displayName=this._getDisplayName();this.iconUrl=this._getIconUrl();this.isPremiumContent=this._getIsPremiumContent();this.created=this.created?new Date(this.created):null;this.uploaded=this.uploaded?new Date(this.uploaded):null;this.modified=this.modified?new Date(this.modified):null},getTypeInfo:function(){var v=
this.type;return{source:-1<c.indexOf(this.typeKeywords||[],"ArcGIS Server")||"Feature Collection"===v?v:null,displayName:this.displayName,iconUrl:this.iconUrl,isPremiumContent:this.isPremiumContent,premiumIconUrl:this._getPremiumIconUrl()}},addComment:function(v){var A=B.isString(v)?{comment:v}:v;return g.request(this.itemUrl+"/addComment",A,{usePost:!0}).then(B.hitch(this,function(G){return new b(B.mixin(A,{id:G.commentId,item:this}))}))},updateComment:function(v){if(v&&v.url&&v.comment)return g.request(v.url+
"/update",{comment:v.comment},{usePost:!0}).then(function(A){v.id=A.commentId;return v});throw Error();},getComments:function(){return g.requestToTypedArray(this.itemUrl+"/comments",null,null,b,{item:this})},deleteComment:function(v){if(v&&v.url)return g.request(v.url+"/delete",null,{usePost:!0});throw Error();},addRating:function(v){var A=B.isObject(v)?v:{rating:parseFloat(v)};return g.request(this.itemUrl+"/addRating",A,{usePost:!0}).then(B.hitch(this,function(G){return new w(B.mixin(A,{id:G.ratingId,
item:this}))}))},getRating:function(){return g.request(this.itemUrl+"/rating").then(B.hitch(this,function(v){return new w(B.mixin(v,{item:this}))}))},deleteRating:function(){return g.request(this.itemUrl+"/deleteRating",null,{usePost:!0})},_getDisplayName:function(){var v=this.type,A=this.typeKeywords||[],G=v;"Feature Service"===v||"Feature Collection"===v?G=A.includes("Table")?"Table":A.includes("Route Layer")?"Route Layer":A.includes("Markup")?"Markup":"Feature Layer":"Image Service"===v?G=A.includes("Elevation 3D Layer")?
"Elevation Layer":A.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===v?G="Scene Layer":"Video Service"===v?G="Video Layer":"Scene Package"===v?G="Scene Layer Package":"Stream Service"===v?G="Feature Layer":"Geoprocessing Service"===v?G=A.includes("Web Tool")?"Tool":"Geoprocessing Service":"Geoenrichment Service"===v?G="GeoEnrichment Service":"Geocoding Service"===v?G="Locator":"Microsoft Powerpoint"===v?G="Microsoft PowerPoint":"GeoJson"===v?G="GeoJSON":"Globe Service"===
v?G="Globe Layer":"Vector Tile Service"===v?G="Tile Layer":"netCDF"===v?G="NetCDF":"Map Service"===v?G=A.includes("Spatiotemporal")||!A.includes("Hosted Service")&&!A.includes("Tiled")||A.includes("Relational")?"Map Image Layer":"Tile Layer":v&&v.toLowerCase().includes("add in")?G=v.replaceAll(/(add in)/gi,"Add-In"):"datastore catalog service"===v?G="Big Data File Share":"Compact Tile Package"===v?G="Tile Package (tpkx)":"Raster function template"===v?G="Raster Function Template":"OGCFeatureServer"===
v?G="OGC Feature Layer":"web mapping application"===v&&A.includes("configurableApp")?G="Instant App":"Insights Page"===v?G="Insights Report":"Excalibur Imagery Project"===v?G="Excalibur Project":"3DTiles Service"===v?G="3D tiles layer":"3DTiles Package"===v&&(G="3D tiles package");return G},_getIconUrl:function(){var v=this.type&&this.type.toLowerCase()||"",A=this.typeKeywords||[],G=!1,F=!1,H=!1,L=!1,M=!1,Q=!1;G=F=!1;0<v.indexOf("service")||"feature collection"===v||"kml"===v||"wms"===v||"wmts"===
v||"wfs"===v?(G=A.includes("Hosted Service"),"feature service"===v||"feature collection"===v||"kml"===v||"wfs"===v?(L=A.includes("Table"),F=A.includes("Route Layer"),H=A.includes("Markup"),M=A.includes("Spatiotemporal"),Q=A.includes("UtilityNetwork"),v=M&&L?"spatiotemporaltable":L?"table":F?"routelayer":H?"markup":M?"spatiotemporal":Q?"utilitynetwork":G?"featureshosted":"features"):"map service"===v||"wms"===v||"wmts"===v?(M=A.includes("Spatiotemporal"),F=A.includes("Relational"),v=M||F?"mapimages":
G||A.includes("Tiled")||"wmts"===v?"maptiles":"mapimages"):v="scene service"===v?A.includes("Line")?"sceneweblayerline":A.includes("3DObject")?"sceneweblayermultipatch":A.includes("Point")?"sceneweblayerpoint":A.includes("IntegratedMesh")?"sceneweblayermesh":A.includes("PointCloud")?"sceneweblayerpointcloud":A.includes("Polygon")?"sceneweblayerpolygon":A.includes("Building")?"sceneweblayerbuilding":A.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===v?A.includes("Elevation 3D Layer")?
"elevationlayer":A.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===v?"streamlayer":"vector tile service"===v?"vectortile":"datastore catalog service"===v?"datastorecollection":"geocoding service"===v?"geocodeservice":"video service"===v?A.includes("Live Stream")?"livestreamvideolayer":"videolayer":"geoprocessing service"===v?A.includes("Web Tool")?"tool":"layers":"geodata service"===v?"geodataservice":"3dtiles service"===v?A.includes("3DObject")?"3dobjecttileslayer":A.includes("IntegratedMesh")?
"integratedmeshtileslayer":"3dtileslayer":"layers"):v="web map"===v||"cityengine web scene"===v?"maps":"web scene"===v?A.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===v&&A.includes("configurableApp")?"instantapps":"web mapping application"===v||"mobile application"===v||"application"===v||"operation view"===v||"desktop application"===v?"apps":"map document"===v||"map package"===v||"published map"===v||"scene document"===v||"globe document"===v||"basemap package"===
v||"mobile basemap package"===v||"mobile map package"===v||"project package"===v||"project template"===v||"pro map"===v||"layout"===v||"layer"===v&&A.includes("ArcGIS Pro")||"explorer map"===v&&A.indexOf("Explorer Document")?"mapsgray":"service definition"===v||"shapefile"===v||"cad drawing"===v||"geojson"===v||"netcdf"===v||"administrative report"===v?"datafiles":"360 vr experience"===v?"360vr":"explorer add in"===v||"desktop add in"===v||"windows viewer add in"===v||"windows viewer configuration"===
v?"appsgray":"arcgis pro add in"===v||"arcgis pro configuration"===v?"addindesktop":"pdf"===v?"pdf":"microsoft word"===v?"word":"microsoft excel"===v?"excel":"microsoft powerpoint"===v?"ppt":"rule package"===v||"file geodatabase"===v||"sqlite geodatabase"===v||"csv collection"===v||"kml collection"===v||"windows mobile package"===v||"map template"===v||"desktop application template"===v||"gml"===v||"arcpad package"===v||"code sample"===v||"document link"===v||"earth configuration"===v||"operations dashboard add in"===
v||"rules package"===v||"workflow manager package"===v||"explorer map"===v&&A.includes("Explorer Mapping Application")||A.includes("Document")?"datafilesgray":"network analysis service"===v||"geoprocessing service"===v||"geodata service"===v||"geometry service"===v||"geoprocessing package"===v||"locator package"===v||"geoprocessing sample"===v||"workflow manager service"===v?"toolsgray":"layer"===v||"layer package"===v||"explorer layer"===v?"layersgray":"scene package"===v?"scenepackage":"3dtiles package"===
v?"3dtileslayerpackage":"3dtiles service"===v?"3dtileslayer":"mobile scene package"===v?"mobilescenepackage":"tile package"===v||"compact tile package"===v?"tilepackage":"task file"===v?"taskfile":"report template"===v?"report-template":"statistical data collection"===v?"statisticaldatacollection":"insights workbook"===v?"workbook":"insights model"===v?"insightsmodel":"insights page"===v?"insightspage":"insights theme"===v?"insightstheme":"hub initiative"===v?"hubinitiative":"hub page"===v?"hubpage":
"hub site application"===v?"hubsite":"hub event"===v?"hubevent":"hub project"===v?"hubproject":"relational database connection"===v?"relationaldatabaseconnection":"big data file share"===v?"datastorecollection":"image collection"===v?"imagecollection":"desktop style"===v?"desktopstyle":"style"===v?"style":"dashboard"===v?"dashboard":"raster function template"===v?"rasterprocessingtemplate":"vector tile package"===v?"vectortilepackage":"ortho mapping project"===v?"orthomappingproject":"ortho mapping template"===
v?"orthomappingtemplate":"solution"===v?"solutions":"geopackage"===v?"geopackage":"deep learning package"===v?"deeplearningpackage":"real time analytic"===v?"realtimeanalytics":"big data analytic"===v?"bigdataanalytics":"feed"===v?"feed":"excalibur imagery project"===v?"excaliburimageryproject":"notebook"===v?"notebook":"storymap"===v?"storymap":"survey123 add in"===v?"survey123addin":"mission"===v?"mission":"mission report"===v?"missionreport":"mission template"===v?"missiontemplate":"quickcapture project"===
v?"quickcaptureproject":"pro report"===v?"proreport":"pro report template"===v?"proreporttemplate":"urban model"===v?"urbanmodel":"web experience"===v?"experiencebuilder":"web experience template"===v?"webexperiencetemplate":"experience builder widget"===v?"experiencebuilderwidget":"experience builder widget package"===v?"experiencebuilderwidgetpackage":"workflow"===v?"workflow":"kernel gateway connection"===v?"kernelgatewayconnection":"insights script"===v?"insightsscript":"hub initiative template"===
v?"hubinitiativetemplate":"storymap theme"===v?"storymaptheme":"knowledge graph"===v?"knowledgegraph":"knowledge studio project"===v?"knowledgestudio":"native application"===v?"nativeapp":"native application installer"===v?"nativeappinstaller":"web link chart"===v?"linkchart":"knowledge graph web investigation"===v?"investigation":"ogcfeatureserver"===v?"features":"pro project"===v?"proproject":"insights workbook package"===v?"insightsworkbookpackage":"apache parquet"===v?"apacheparquet":"notebook code snippets"===
v||"notebook code snippet library"===v?"notebookcodesnippets":"suitability model"===v?"suitabilitymodel":"esri classifier definition"===v?"classifierdefinition":"esri classification schema"===v?"classificationschema":"insights data engineering workbook"===v?"dataengineeringworkbook":"insights data engineering model"===v?"dataengineeringmodel":"deep learning studio project"===v?"deeplearningproject":"discussion"===v?"discussion":"allsource project"===v?"allsourceproject":"api key"===v?"apikey":"data pipeline"===
v?"datapipelines":"group layer"===v?(G=A.includes("Map"))?"layergroup2d":"layergroup":"media layer"===v?"onlinemedialayer":"form"===v?A.includes("Survey123")?"survey":"datafilesgray":"csv"===v?"csv":"image"===v?"image":"maps";return v?t.toUrl("../css/images/item_type_icons/"+v+"16.png"):null},_getIsPremiumContent:function(){var v=this.typeKeywords,A=!1;if(-1<c.indexOf(v,"Requires Subscription")||-1<c.indexOf(v,"Requires Credits"))A=!0;return A},_getPremiumIconUrl:function(){var v=this.typeKeywords,
A;this.isPremiumContent&&(A=-1<c.indexOf(v,"Requires Credits")?"premiumcredits":"premiumitem");return A?t.toUrl("../css/images/item_type_icons/"+A+"16.png"):null},getThumbnailUrl:function(v){var A=this.thumbnailUrl;A&&v&&(A+=(-1===A.indexOf("?")?"?":"\x26")+"w\x3d"+v);return A}}),z=f([],{declaredClass:"esri.arcgis.PortalListing",constructor:function(v){B.mixin(this,v);this.id=this.itemId;this.url=(this.portal&&this.portal.portalUrl)+"content/"+(this.userItemUrl?"items/":"listings/")+this.itemId;this.commentsUrl=
this.url+"/comments";this.created=this.created?new Date(this.created):null;this.banner=this.banner?g.formatUrl(this.url+"/info/"+this.banner):"";this.thumbnail=this.thumbnail?g.formatUrl(this.url+"/info/"+this.thumbnail):"";this.largeThumbnail=this.largeThumbnail?g.formatUrl(this.url+"/info/"+this.largeThumbnail):"";this.avgRating=this.avgRating||0;this.numRatings=this.numRatings||0;this.numComments=this.numComments||0;this.listingProperties=this.listingProperties||{priceDesc:"",creditsPerTransaction:0,
licenseType:"free",trialSupported:!1,trialDuration:0,listingAccess:"private"};for(var A in this.listingProperties)this[A]&&(this.listingProperties[A]=this[A]);this.properties=this.properties||{systemRequirements:"",termsAndConditions:"",version:"1.0"};this.screenshots=c.map(this.screenshots,B.hitch(this,function(G){return g.formatUrl(this.url+"/info/"+G)}));this.vendorName=this.vendor.name;this.vendor.thumbnail=this.vendor.thumbnail?this.userItemUrl?g.formatUrl(this.portal.portalUrl+"/portals/self/resources/"+
this.vendor.thumbnail):g.formatUrl(this.url+"/vendorinfo/"+this.vendor.thumbnail):""},getComments:function(){return g.requestToTypedArray(this.commentsUrl,null,null,b,{item:this})},getVendor:function(){return this.vendor}}),D=f([],{declaredClass:"esri.arcgis.PortalProvision",constructor:function(v){B.mixin(this,v);this.created=this.created?new Date(this.created):null;this.startDate=this.startDate?new Date(this.startDate):null;this.endDate=this.endDate&&-1!==this.endDate?new Date(this.endDate):null;
this.listing=v.listing?new z(B.mixin(v.listing,{portal:this.portal})):null}}),E=f([],{declaredClass:"esri.arcgis.PortalGroup",constructor:function(v){B.mixin(this,v);this.url=(this.portal&&this.portal.portalUrl)+"community/groups/"+this.id;this.thumbnailUrl=g.formatUrl(this.url+"/info/"+this.thumbnail);this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getMembers:function(){return g.request(this.url+"/users")},queryItems:function(v,A){v=
g.formatQueryParams({},v,A);v.q="group:"+this.id+(v.q?" "+v.q:"");return this.portal.queryItems(v)},getThumbnailUrl:function(v){var A=this.thumbnailUrl;A&&v&&(A+=(-1===A.indexOf("?")?"?":"\x26")+"w\x3d"+v);return A}}),C=f([],{declaredClass:"esri.arcgis.PortalFolder",constructor:function(v){B.mixin(this,v);this.url=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username+"/"+this.id;this.created=this.created?new Date(this.created):null},getItems:function(){return g.requestToTypedArray(this.url,
null,null,x,{portal:this.portal,folderId:this.id})}}),y=f([],{declaredClass:"esri.arcgis.PortalUser",constructor:function(v){B.mixin(this,v);this.url=(this.portal&&this.portal.portalUrl)+"community/users/"+this.username;this.userContentUrl=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username;this.thumbnailUrl=this.thumbnail?g.formatUrl(this.url+"/info/"+this.thumbnail):null;this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},
getGroups:function(){return k(g.request(this.url).then(B.hitch(this,function(v){return g.resultsToTypedArray(E,{portal:this.portal},v.groups)})))},getNotifications:function(){return g.requestToTypedArray(this.url+"/notifications",null,null,null,{portal:this.portal})},getGroupInvitations:function(){return g.requestToTypedArray(this.url+"/invitations",null,null,null,{portal:this.portal})},getTags:function(){return g.requestToTypedArray(this.url+"/tags",null,null,null,{portal:this.portal})},getFolders:function(){return k(this.getContent(null,
{num:1}).then(function(v){return v.folders}))},getItems:function(v){return k(this.getContent(v).then(function(A){return A.items}))},getItem:function(v){return g.request(this.portal.portalUrl+"content/items/"+v).then(B.hitch(this,function(A){return new x(B.mixin(A,{portal:this.portal}))}))},getContent:function(v,A){var G=this.url.replace("/community/","/content/")+(v?"/"+v:"");return g.request(G,A).then(B.hitch(this,function(F){F.folders=g.resultsToTypedArray(C,{portal:this.portal},F.folders);F.items=
g.resultsToTypedArray(x,{portal:this.portal,folderId:v},F.items);return F}))},getThumbnailUrl:function(v){var A=this.thumbnailUrl;A&&v&&(A+=(-1===A.indexOf("?")?"?":"\x26")+"w\x3d"+v);return A}});f={Portal:f([n],{declaredClass:"esri.arcgis.Portal",onLoad:function(){},onError:function(){},constructor:function(v){v=B.isObject(v)?v:{url:v};this.registerConnectEvents();r={options:{disableIdentityLookup:!0},requestParams:{f:"json"}};v.self?(r.self=v.self,B.mixin(this,{url:v.url||h.getProtocolForWebResource()+
"//"+(v.self.urlKey?v.self.urlKey+"."+v.self.customBaseUrl:v.self.portalHostname)}),this.portalUrl=-1!==this.url.indexOf("/sharing")?this.url+"/":this.url+"/sharing/rest/",v=v.self.user?this.signIn():this.init(this.url)):(v.url&&B.mixin(this,{url:v.url}),v=this.init(this.url));v.then(B.hitch(this,function(){this.emit("ready",this);this.onLoad(this)}))},init:function(v,A){v=(v||this.portalUrl).replace(/\/+$/,"");this.portalUrl=-1!==v.indexOf("/sharing")?v+"/":v+"/sharing/rest/";h.canUseXhr(this.portalUrl)||
d.defaults.io.corsEnabledServers.push(this.portalUrl.replace(/^https?:\/\//i,""));return this._getSelf(this.portalUrl).then(B.hitch(this,function(G){r.self=B.mixin({},G);(G=G.user)&&A&&(r.currentToken=A&&A.token,r.loggedInUser=new y(B.mixin(G,{portal:this,credential:A})));r.self.id&&!1===r.self.canSearchPublic&&(r.extraQuery=" AND orgid:"+r.self.id);B.mixin(this,r.self);this.thumbnailUrl=g.formatUrl(this.portalUrl+"portals/self/resources/"+this.thumbnail);this.isOrganization=this.access&&this.access.length?
!0:!1;this.created=this.created?new Date(this.created):null;this.modified=this.modified?new Date(this.modified):null;return this}),B.hitch(this,function(G){this.onError(G);throw G;}))},signIn:function(){var v=new e,A=B.hitch(this,function(){this._onSignIn().then(B.hitch(this,function(){v.resolve(r.loggedInUser)}),B.hitch(this,function(G){v.reject(G)}))});if(r&&r.self)r&&r.loggedInUser?setTimeout(function(){v.resolve(r.loggedInUser)},0):A();else this.on("load",B.hitch(this,function(){A()}));return v},
signOut:function(){r.loggedInUser.credential&&r.loggedInUser.credential.destroy();r.loggedInUser=null;r.options.disableIdentityLookup=!0;g.clearFieldsFromObject(r.self,this);r.self=null;return this.init(this.url)},getPortalUser:function(){return r.loggedInUser},addResource:function(v,A){return g.request(this.portalUrl+"portals/self/addResource",{key:v,text:A},{usePost:!0})},update:function(v){return g.request(this.portalUrl+"portals/self/update",v,{usePost:!0})},queryGroups:function(v,A){return this._queryPortal(this.portalUrl+
"community/groups",g.formatQueryParams({},v,A),E)},queryItems:function(v,A){return this._queryPortal(this.portalUrl+"search",g.formatQueryParams({},v,A),x)},queryListings:function(v){v=g.formatQueryParams({},v,!0);var A="";v.q&&-1<v.q.toLowerCase().indexOf("mylistings:true")?(v.q=v.q.toLowerCase().replace("mylistings:true",""),A="?mylistings\x3dtrue"):v.q||(v.q='""');return this._queryPortal(this.portalUrl+"content/listings"+A,v,z)},queryCustomerList:function(v,A){v=g.formatQueryParams({},v,!0);return this._queryPortal(this.portalUrl+
"portals/self/customersList",v)},getProvisions:function(){return this.getCustomers().then(B.hitch(this,function(v){return v.purchases}))},getInterests:function(){return this.getCustomers().then(B.hitch(this,function(v){return v.interests}))},getTrials:function(){return this.getCustomers().then(B.hitch(this,function(v){return v.trials}))},getCustomers:function(v){return g.request(this.portalUrl+"portals/self/customers",{status:v||"all"})},getMyPurchases:function(){return this.getPurchases().then(function(v){return v.purchases})},
getMyInterests:function(){return this.getPurchases().then(function(v){return v.interests})},getPurchases:function(){return g.request(this.portalUrl+"portals/self/purchases").then(B.hitch(this,function(v){v.interests=c.map(v.interests,function(A){return B.mixin(A.provision,{listing:A.listing})});v.purchases=c.map(v.purchases,function(A){return B.mixin(A.provision,{listing:A.listing})});v.trials=c.map(v.trials,function(A){return B.mixin(A.provision,{listing:A.listing})});v.interests=g.resultsToTypedArray(D,
{portal:this},v.interests);v.trials=g.resultsToTypedArray(D,{portal:this},v.trials);v.purchases=g.resultsToTypedArray(D,{portal:this},v.purchases);return v}))},queryUsers:function(v,A){return this._queryPortal(this.portalUrl+"community/users",g.formatQueryParams({sortField:"username"},v,A),y)},_onSignIn:function(){r.options.disableIdentityLookup=!1;r.self=null;return q.id.getCredential(this.portalUrl).then(B.hitch(this,"init",this.url)).then(function(){return r.loggedInUser},B.hitch(this,function(v){r.options.disableIdentityLookup=
!0;this.onError(v);throw v;}))},_getSelf:function(v){v+="portals/self";if(r.self){var A=new e;setTimeout(function(){A.resolve(r.self)},0)}else A=g.request(v,{culture:l.locale,withCredentials:!0});return A},_queryPortal:function(v,A,G){var F=B.mixin({num:10,start:0,sortField:"title",sortOrder:"asc"},A),H=["start","query","num","nextStart"];v=g.request(v,F).then(B.hitch(this,function(L){L.results=g.resultsToTypedArray(G,{portal:this},L);L.queryParams=B.mixin({},F);L.nextQueryParams=B.mixin(F,{start:L.nextStart});
return g.clearFieldsFromObject(H,L)}));v=B.delegate(v);v.queryParams=B.mixin({},F);v.nextQueryParams=e.when(v,function(L){return L.nextQueryParams});return k(v)}}),PortalFolder:C,PortalGroup:E,PortalItem:x,PortalUser:y,PortalComment:b,PortalRating:w,PortalUtil:g,PortalResult:k,PortalListing:z};B.mixin(B.getObject("arcgis",!0,q),f);return f})},"esri/tasks/Geoprocessor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has dojo/io-query ../kernel ../request ../deferredUtils ../geometry/normalizeUtils ./Task ./FeatureSet ./JobInfo ./GPMessage ./LinearUnit ./DataFile ./RasterData ./Date ./ParameterValue ./GPResultImageLayer ../layers/ArcGISDynamicMapServiceLayer ../layers/MapImage".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E,C){f=f(h,{declaredClass:"esri.tasks.Geoprocessor",_eventMap:{"execute-complete":["results","messages"],"get-result-data-complete":["result"],"get-result-image-complete":["mapImage"],"get-result-image-layer-complete":["layer"],"job-cancel":["jobInfo"],"job-complete":["jobInfo"],"status-update":["jobInfo"]},constructor:function(y){this._jobUpdateHandler=B.hitch(this,this._jobUpdateHandler);this._getJobStatus=B.hitch(this,this._getJobStatus);this._getResultDataHandler=
B.hitch(this,this._getResultDataHandler);this._getResultImageHandler=B.hitch(this,this._getResultImageHandler);this._executeHandler=B.hitch(this,this._executeHandler);this._updateTimers=[];this.registerConnectEvents()},updateDelay:1E3,processSpatialReference:null,outputSpatialReference:null,outSpatialReference:null,setUpdateDelay:function(y){this.updateDelay=y},setProcessSpatialReference:function(y){this.processSpatialReference=y},setOutputSpatialReference:function(y){this._setOutSR(y)},setOutSpatialReference:function(y){this._setOutSR(y)},
__msigns:[{n:"execute",c:3,a:[{i:0,p:["*"]}],e:2,f:1},{n:"submitJob",c:4,a:[{i:0,p:["*"]}],e:3}],_setOutSR:function(y){this.outSpatialReference=this.outputSpatialReference=y},_getOutSR:function(){return this.outSpatialReference||this.outputSpatialReference},_gpEncode:function(y,v,A){for(var G in y){var F=y[G];B.isArray(F)?y[G]=c.toJson(l.map(F,function(H){return this._gpEncode({item:H},!0).item},this)):F instanceof Date&&(y[G]=F.getTime())}return this._encode(y,v,A)},_decode:function(y){var v=y.dataType,
A=new z(y);if(-1!==l.indexOf(["GPBoolean","GPDouble","GPLong","GPString"],v))return A;if("GPLinearUnit"===v)A.value=new g(A.value);else if("GPFeatureRecordSetLayer"===v||"GPRecordSet"===v)A.value=new n(A.value);else if("GPDataFile"===v)A.value=new b(A.value);else if("GPDate"===v)y=A.value,B.isString(y)?A.value=new x({date:y}):A.value=new Date(y);else if("GPRasterData"===v||"GPRasterDataLayer"===v)y=y.value.mapImage,A.value=y?new C(y):new w(A.value);else if(-1!==v.indexOf("GPMultiValue:")){var G=v.split(":")[1];
y=A.value;A.value=l.map(y,function(F){return this._decode({paramName:"_name",dataType:G,value:F}).value},this)}else A=null;return A},submitJob:function(y,v,A,G,F){var H=this._getOutSR(),L=F.assembly;y=this._gpEncode(B.mixin({},this._url.query,{f:"json","env:outSR":H?H.wkid||c.toJson(H.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||c.toJson(this.processSpatialReference.toJson()):null},y),null,L&&L[0]);var M=this._jobUpdateHandler,Q=this._errorHandler;
return q({url:this._url.path+"/submitJob",content:y,callbackParamName:"callback",load:function(S,I){M(S,I,!1,v,A,F.dfd)},error:function(S){Q(S,G,F.dfd)}})},_jobUpdateHandler:function(y,v,A,G,F,H){var L=y.jobId;v=new r(y);this._successHandler([v],"onStatusUpdate",F,A&&H);if(!A)switch(clearTimeout(this._updateTimers[L]),this._updateTimers[L]=null,H&&H.progress(v),y.jobStatus){case r.STATUS_SUBMITTED:case r.STATUS_EXECUTING:case r.STATUS_WAITING:case r.STATUS_NEW:var M=this._getJobStatus;this._updateTimers[L]=
setTimeout(function(){M(L,A,G,F,H)},this.updateDelay);break;default:this._successHandler([v],"onJobComplete",G,H)}},_getJobStatus:function(y,v,A,G,F){var H=this._jobUpdateHandler;q({url:this._url.path+"/jobs/"+y,content:B.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(L,M){H(L,M,v,A,G,F)},error:this._errorHandler})},_getResultDataHandler:function(y,v,A,G,F){try{var H=this._decode(y);this._successHandler([H],"onGetResultDataComplete",A,F)}catch(L){this._errorHandler(L,
G,F)}},getResultData:function(y,v,A,G){var F=this._getResultDataHandler,H=this._errorHandler,L=new e(m._dfdCanceller);L._pendingDfd=q({url:this._url.path+"/jobs/"+y+"/results/"+v,content:B.mixin({},this._url.query,{f:"json",returnType:"data"}),callbackParamName:"callback",load:function(M,Q){F(M,Q,A,G,L)},error:function(M){H(M,G,L)}});return L},checkJobStatus:function(y,v,A){var G=this._jobUpdateHandler,F=this._errorHandler,H=new e(m._dfdCanceller);H._pendingDfd=q({url:this._url.path+"/jobs/"+y,content:B.mixin({},
this._url.query,{f:"json"}),callbackParamName:"callback",load:function(L,M){G(L,M,!0,null,v,H)},error:function(L){F(L,A,H)}});return H},cancelJob:function(y,v,A){var G=this._errorHandler,F=new e(m._dfdCanceller);F._pendingDfd=q({url:this._url.path+"/jobs/"+y+"/cancel",content:B.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:B.hitch(this,function(H,L){this._successHandler([H],"onJobCancel",v,F)}),error:function(H){G(H,A,F)}});return F},execute:function(y,v,A,G){var F=this._getOutSR(),
H=G.assembly;y=this._gpEncode(B.mixin({},this._url.query,{f:"json","env:outSR":F?F.wkid||c.toJson(F.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||c.toJson(this.processSpatialReference.toJson()):null},y),null,H&&H[0]);var L=this._executeHandler,M=this._errorHandler;return q({url:this._url.path+"/execute",content:y,callbackParamName:"callback",load:function(Q,S){L(Q,S,v,A,G.dfd)},error:function(Q){M(Q,A,G.dfd)}})},_executeHandler:function(y,v,A,G,F){try{var H=
y.results,L,M=y.messages;var Q=0;for(L=H.length;Q<L;Q++)H[Q]=this._decode(H[Q]);Q=0;for(L=M.length;Q<L;Q++)M[Q]=new k(M[Q]);this._successHandler([H,M],"onExecuteComplete",A,F)}catch(S){this._errorHandler(S,G,F)}},_getResultImageHandler:function(y,v,A,G,F){try{var H=this._decode(y);this._successHandler([H],"onGetResultImageComplete",A,F)}catch(L){this._errorHandler(L,G,F)}},getResultImage:function(y,v,A,G,F){var H=this._getResultImageHandler,L=this._errorHandler;A=this._gpEncode(B.mixin({},this._url.query,
{f:"json"},A.toJson()));var M=new e(m._dfdCanceller);M._pendingDfd=q({url:this._url.path+"/jobs/"+y+"/results/"+v,content:A,callbackParamName:"callback",load:function(Q,S){H(Q,S,G,F,M)},error:function(Q){L(Q,F,M)}});return M},cancelJobStatusUpdates:function(y){clearTimeout(this._updateTimers[y]);this._updateTimers[y]=null},getResultImageLayer:function(y,v,A,G){if(null==v){var F=this._url.path.indexOf("/GPServer/");y=this._url.path.substring(0,F)+"/MapServer/jobs/"+y}else y=this._url.path+"/jobs/"+
y+"/results/"+v;this._url.query&&(y+="?"+t.objectToQuery(this._url.query));v=null==v?new E(y,{imageParameters:A}):new D(y,{imageParameters:A},!0);this.onGetResultImageLayerComplete(v);G&&G(v);return v},onStatusUpdate:function(){},onJobComplete:function(){},onExecuteComplete:function(){},onGetResultDataComplete:function(){},onGetResultImageComplete:function(){},onGetResultImageLayerComplete:function(){},onJobCancel:function(){}});a._createWrappers(f);B.setObject("tasks.Geoprocessor",f,d);return f})},
"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(f,B,l,e,c,u,t,d){f=f(d,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(q,m){q&&B.isString(q)&&(this._url=t.urlToObject(this.url=q));m&&m.requestOptions&&(this.requestOptions=m.requestOptions);this.normalization=!0;this._errorHandler=B.hitch(this,this._errorHandler);this.registerConnectEvents()},
_useSSL:function(){var q=this._url,m=/^http:/i;this.url&&(this.url=this.url.replace(m,"https:"));q&&q.path&&(q.path=q.path.replace(m,"https:"))},_encode:function(q,m,a){var h={},n;for(n in q)if("declaredClass"!==n){var r=q[n];var k=typeof r;if(null!==r&&void 0!==r&&"function"!==k)if(B.isArray(r)){h[n]=[];var g=r.length;for(k=0;k<g;k++)h[n][k]=this._encode(r[k])}else"object"===k?r.toJson&&(k=r.toJson(a&&a[n]),"esri.tasks.FeatureSet"===r.declaredClass&&k.spatialReference&&(k.sr=k.spatialReference,delete k.spatialReference),
h[n]=m?k:l.toJson(k)):h[n]=r}return h},_successHandler:function(q,m,a,h){m&&this[m].apply(this,q);a&&a.apply(null,q);h&&u._resDfd(h,q)},_errorHandler:function(q,m,a){this.onError(q);m&&m(q);a&&a.errback(q)},setNormalization:function(q){this.normalization=q},onError:function(){}});return c.Task=f})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/Polygon ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h){f=f(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(n,r){if(n){B.mixin(this,n);var k=this.features=this.features||[],g=n.spatialReference;g=this.spatialReference=a.createInstance(d.simpleConstructor,g);var b=a.getGeometryType(n.geometryType);this.geometryType=n.geometryType;n.fields&&(this.fields=n.fields);n=a.supportsLazyUnquantization(this.geometryType);var w=a.unquantizeFunction(this.geometryType,this.transform),x=!!(r&&n&&w),z=b&&(x?b.accessorConstructor:
b.simpleConstructor);l.forEach(k,function(D,E){var C=a.createInstance(t.simpleConstructor),y=D.geometry;if(b&&y){var v=C.geometry=a.createInstance(z,x?null:y);v.setSpatialReference(y.spatialReference?a.createInstance(d.simpleConstructor,y.spatialReference):g);x&&v.setupLazyUnquantization(w,y)}C.symbol=D.symbol?h.fromJson(D.symbol):null;C.attributes=D.attributes;k[E]=C});x||this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(n){var r=
{};this.displayFieldName&&(r.displayFieldName=this.displayFieldName);this.fields&&(r.fields=this.fields);this.spatialReference?r.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(r.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(r.geometryType=a.getJsonType(this.features[0].geometry)),r.features=q._encodeGraphics(this.features,n));r.geometryType=r.geometryType||this.geometryType;r.exceededTransferLimit=
this.exceededTransferLimit;r.transform=this.transform;return u.fixJson(r)},_hydrate:function(){a.unquantize(this.features,this.geometryType,this.transform);this.transform=null},quantize:function(n){if(!this.geometryType)return this.transform=null,this;var r=n.translate[0],k=n.translate[1],g=n.scale[0],b=n.scale[1],w=this.features,x=function(C,y,v){var A,G=[];var F=0;for(A=C.length;F<A;F++){var H=C[F];if(0<F){var L=y(H[0]);H=v(H[1]);if(L!==M||H!==Q){G.push([L-M,H-Q]);var M=L;var Q=H}}else M=y(H[0]),
Q=v(H[1]),G.push([M,Q])}return 0<G.length?G:null},z=function(C,y,v){if("esriGeometryPoint"===C)return function(A){A.x=y(A.x);A.y=v(A.y);return A};if("esriGeometryPolyline"===C||"esriGeometryPolygon"===C)return function(A){var G;var F=A.rings||A.paths;var H=[];var L=0;for(G=F.length;L<G;L++){var M=F[L];(M=x(M,y,v))&&H.push(M)}return 0<H.length?(A.rings?A.rings=H:A.paths=H,A):null};if("esriGeometryMultipoint"===C)return function(A){var G=x(A.points,y,v);return 0<G.length?(A.points=G,A):null};if("esriGeometryEnvelope"===
C)return function(A){return A}}(this.geometryType,function(C){return Math.round((C-r)/g)},function(C){return Math.round((k-C)/b)}),D;var E=0;for(D=w.length;E<D;E++)w[E].geometry&&(z(w[E].geometry)||w[E].setGeometry(null));this.transform=n;return this}});f.createGraphics=function(n){var r=n.geometryType,k=a.createInstance(d.simpleConstructor,n.spatialReference),g=a.getGeometryType(r).accessorConstructor,b=a.unquantizeFunction(r,n.transform);return l.map(n.features,function(w,x){x=a.createInstance(t.simpleConstructor);
var z=w.geometry;if(z){var D=x.geometry=a.createInstance(g);D.setSpatialReference(k);D.setupLazyUnquantization(b,z)}x.attributes=w.attributes;return x})};f.createPolygon=function(n,r,k){if(n){var g=a.createInstance(m.accessorConstructor);g.setSpatialReference(r);r=a.unquantizeFunction("esriGeometryPolygon",k);g.setupLazyUnquantization(r,n)}return g};B.setObject("tasks.FeatureSet",f,c);return f})},"esri/graphic":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "),
function(f,B,l,e,c,u,t,d,q){function m(){}f=f(null,{declaredClass:"esri.Graphic",constructor:function(a,h,n,r){this._construct();a&&!a.declaredClass?(this.geometry=a.geometry?d.fromJson(a.geometry):null,this.symbol=a.symbol?q.fromJson(a.symbol):null,this.attributes=a.attributes||null,this.infoTemplate=a.infoTemplate?new t(a.infoTemplate):null):(this.geometry=a,this.symbol=h,this.attributes=n,this.infoTemplate=r)},_geomVersion:0,_resolution:null,_shape:null,_bgShape:null,_dataAttrs:null,_layer:null,
_sourceLayer:null,_graphicsLayer:null,_parentGraphic:null,_suspended:!1,size:null,visible:!0,_aggregationSourceLayer:null,_aggregationInfo:null,_computedAttributes:null,_computedVersion:null,_computedGeomVersion:null,_isSnapTarget:!0,getParentGraphic:function(){return this._parentGraphic},setParentGraphic:function(a){this._parentGraphic=a},setSize:function(a){this.size=a;return this},getAggregationSourceLayer:function(){return this._aggregationSourceLayer},setAggregationSourceLayer:function(a){this._aggregationSourceLayer=
a;return this},isAggregate:function(){return!!this._aggregationInfo},getAggregationInfo:function(){return this._aggregationInfo},setAggregationInfo:function(a){this._aggregationInfo=a;return this},getChildGraphics:function(){var a=this.getAggregationSourceLayer();return a?a.getChildGraphics(this):[]},getDojoShape:function(){return this._shape},getShapes:function(){var a=[];this._shape&&a.push(this._shape);this._bgShape&&a.push(this._bgShape);return a},getNode:function(){var a=this._shape&&this._shape.getNode();
return a&&a.nodeType?a:null},getNodes:function(){var a=this.getShapes(),h,n,r=a.length,k=[];for(n=0;n<r;n++)(h=a[n]&&a[n].getNode())&&h.nodeType&&k.push(h);return k},getLayer:function(){return this._layer},getSourceLayer:function(){return this._sourceLayer||this._layer},clone:function(){var a=new this.constructor(this.toJson());a.visible=this.visible;a._layer=this._layer;a._sourceLayer=this._sourceLayer;a._aggregationSourceLayer=this._aggregationSourceLayer;a._aggregationInfo=this._aggregationInfo;
a._resolution=this._resolution;return a},draw:function(){var a=this._graphicsLayer;a&&a._draw(this,!0);return this},setGeometry:function(a){this.geometry=a;this._geomVersion++;var h=this._graphicsLayer;h&&(h._updateExtent(this),this.draw(),a&&"polyline"===a.type&&h._updateSVGMarkers());return this},setResolution:function(a){this._resolution=a;return this},getResolution:function(){return this._resolution},setSymbol:function(a,h){var n=this._graphicsLayer,r=this._shape;this.symbol=a;n&&(h&&r&&n._removeShape(this),
this.draw());return this},setAttributes:function(a){this.attributes=a;this.clearCache();return this},setInfoTemplate:function(a){this.infoTemplate=a;return this},getInfoTemplate:function(){return this._getEffInfoTemplate()},_getEffInfoTemplate:function(){var a=this.getLayer();return this.infoTemplate||a&&a.infoTemplate},getTitle:function(){var a=this.getInfoTemplate(),h=a&&a.title;if(B.isFunction(h))h=h.call(a,this);else if(B.isString(h)){var n=(a=this.getLayer())&&a._getDateOpts;h=u.substitute(this.attributes,
h,{first:!0,dateFormat:n&&n.call(a)})}return h},getContent:function(){var a=this.getInfoTemplate(),h=a&&a.content;if(B.isFunction(h))h=h.call(a,this);else if(B.isString(h)){var n=(a=this.getLayer())&&a._getDateOpts;h=u.substitute(this.attributes,h,{dateFormat:n&&n.call(a)})}return h},attr:function(a,h){null==h||this._dataAttrs||(this._dataAttrs={});this._dataAttrs&&(this._dataAttrs[a]=h,this._setDataAttr(a,h));return this},_isSuspended:function(){return this._suspended},_suspend:function(){this._suspended=
!0;this.draw()},_resume:function(){this._suspended=!1;this.draw()},show:function(){this.visible=!0;this.attr("data-hidden");var a;if(this.getShapes().length){var h=this.getNodes();var n=h.length;for(a=0;a<n;a++)c.show(h[a])}else this.draw();(h=this._graphicsLayer)&&h._graphicVisibilityChanged(this);return this},hide:function(){this.visible=!1;this.attr("data-hidden","");var a=this._graphicsLayer,h,n;if(a){if("canvas-2d"===a.surfaceType)a._removeShape(this);else{var r=this.getNodes();if(n=r.length)for(h=
0;h<n;h++)c.hide(r[h])}a._graphicVisibilityChanged(this)}return this},toJson:function(){var a={};this.geometry&&(a.geometry=this.geometry.toJson());this.attributes&&(a.attributes=B.mixin({},this.attributes));this.symbol&&(a.symbol=this.symbol.toJson());this.infoTemplate&&(a.infoTemplate=this.infoTemplate.toJson());return a},_setDataAttr:function(a,h){var n=this.getNodes(),r,k=n.length;for(r=0;r<k;r++)this._setDOMDataAttr(n[r],a,h)},_setDOMDataAttr:function(a,h,n){null==n?a.removeAttribute(h):a.setAttribute(h,
n)},_applyDataAttrs:function(){var a=this._dataAttrs;if(a){var h=this.getNodes(),n,r=h.length;for(n=0;n<r;n++)for(var k in a)this._setDOMDataAttr(h[n],k,a[k])}},_getViewInfo:function(a){return(a=(a=a||this.getLayer())&&a.getMap())&&a.getViewInfo()},evaluateExpression:function(a,h){return this._getDataValue(a._attributeDef,a._attributeCache,null,null,a,h)},_getDataValue:function(a,h,n,r,k,g){var b=h.id,w=this.attributes,x=a.field,z=h.isNumeric,D=null;if(b){var E=this._computedAttributes,C=this._computedVersion,
y=this._computedGeomVersion;r=this._getViewInfo(r);var v=!(!k||!k.async),A=g&&g.skipCache||v,G=!g||!1!==g.strictReturnType,F=h.dependsOnView||h.isJSFunc,H=h.dependsOnGeometry;E||(E=this._computedAttributes={});F&&!C&&(C=this._computedVersion={});H&&!y&&(y=this._computedGeomVersion={});var L=F&&C[b]!==r.version||H&&y[b]!==this._geomVersion;D=E[b];if(void 0===D||L||A)D=null,h.hasExpr?D=k?k.evaluate(g&&g.context):n.executeFunction(h.compiledFunc,n.createExecContext(this,r)):h.isJSFunc?D=x(this,a):w&&
(D=w[x],z&&this._isValidNumber(D)&&(h=a.normalizationType||"field",n=D,D=null,k=a.normalizationTotal,a=w[a.normalizationField],"log"===h&&0!==n?D=Math.log(n)*Math.LOG10E:"percent-of-total"===h&&this._isValidNumber(k)&&0!==k?D=n/k*100:"field"===h&&this._isValidNumber(a)&&0!==a&&(D=n/a))),G&&(v?z&&(this._construct(),D=D.then(this._sanitizeNumericValue)):D=this._sanitizeValue(D,z)),A||(E[b]=D,F&&(C[b]=r.version),H&&(y[b]=this._geomVersion))}else w&&(D=this._sanitizeValue(w[x],z));return D},_sanitizeValue:function(a,
h){h&&!this._isValidNumber(a)&&(a=null);return a},_sanitizeNumericValue:function(a){return this._sanitizeValue(a,!0)},_construct:function(){this._constructed||(this._sanitizeNumericValue=B.hitch(this,this._sanitizeNumericValue),this._constructed=!0)},_isValidNumber:function(a){return"number"===typeof a&&!isNaN(a)&&Infinity!==a&&-Infinity!==a},clearCache:function(a){if(null!=a){var h=this._computedAttributes,n=this._computedVersion,r=this._computedGeomVersion;h&&(h[a]=void 0);n&&(n[a]=void 0);r&&(r[a]=
void 0)}else this._computedAttributes=this._computedVersion=this._computedGeomVersion=null}});f.prototype.getShape=f.prototype.getDojoShape;m.prototype=f.prototype;f.simpleConstructor=m;return e.Graphic=f})},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(f,B,l,e,c){f=f(null,{declaredClass:"esri.InfoTemplate",constructor:function(u,t){u&&B.isObject(u)&&!B.isFunction(u)?B.mixin(this,u):(this.title=u||"${*}",this.content=t||"${*}")},
setTitle:function(u){this.title=u;return this},setContent:function(u){this.content=u;return this},toJson:function(){return c.fixJson({title:this.title,content:this.content})}});return e.InfoTemplate=f})},"esri/symbols/jsonUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "),function(f,B,l,e,c,u,t,d,q,m,a){var h={createDefaultSymbol:function(n){switch(n){case "esriGeometryPoint":case "esriGeometryMultipoint":var r=
h.createDefaultMarkerSymbol();break;case "esriGeometryPolyline":r=h.createDefaultLineSymbol();break;case "esriGeometryPolygon":case "esriGeometryEnvelope":case "esriGeometryMultiPatch":r=h.createDefaultFillSymbol()}return r},createDefaultMarkerSymbol:function(){return new c},createDefaultLineSymbol:function(){return new t},createDefaultFillSymbol:function(){return new q},getFirstSupportedSymbol:function(n){var r;B.some(n,function(k){k&&-1<h.supportedSymbolTypes.indexOf(k.type)&&(r=k);return!!r});
return r},isPointSymbol:function(n){return n?-1<h.supportedPointSymbolTypes.indexOf(n.type):!1},supportedPointSymbolTypes:["esriSMS","esriPMS","esriTS"],supportedSymbolTypes:"esriSMS esriPMS esriTS esriSLS esriCLS esriSFS esriPFS".split(" "),fromJson:function(n,r){var k=null;switch(n.type){case "esriSMS":k=new c(n);break;case "esriPMS":k=new u(n);break;case "esriTS":k=new a(n);break;case "esriSLS":k=void 0!==n.cap?new d(n):new t(n);break;case "esriCLS":k=new d(n);break;case "esriSFS":k=new q(n);break;
case "esriPFS":k=new m(n);break;default:k=(n=r&&r.geometryType)?h.createDefaultSymbol(n):null}return k},getShapeDescriptors:function(n){return n&&n.getShapeDescriptors?n.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null}}};f.mixin(f.getObject("symbol",!0,e),h);return h})},"esri/symbols/SimpleMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(f,B,l,e,c,u,
t,d,q){var m={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_TRIANGLE:"triangle",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},a={style:m.STYLE_CIRCLE,color:[255,255,255,.25],size:12,angle:0,xoffset:0,yoffset:0};f=f(d,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",triangle:"esriSMSTriangle",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},
constructor:function(h,n,r,k){h?B.isString(h)?(this.style=h,n&&(this.size=n),r&&(this.outline=r),k&&(this.color=k)):(this.style=t.valueOf(this._styles,this.style),h.outline&&(this.outline=new q(h.outline))):(B.mixin(this,a),this.size=c.pt2px(this.size),this.outline=new q(this.outline),this.color=new l(this.color));this.style||(this.style=m.STYLE_CIRCLE)},setStyle:function(h){this.style=h;return this},setPath:function(h){this.path=h;this.setStyle(m.STYLE_PATH);return this},setOutline:function(h){this.outline=
h;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return this.color},_setDim:function(h,n,r){this._targetWidth=h;this._targetHeight=n;this._spikeSize=r},getShapeDescriptors:function(){var h,n=this.style,r=(this.size||c.pt2px(a.size))/2,k=0-r,g=0+r,b=0-r,w=0+r;switch(n){case m.STYLE_CIRCLE:var x={type:"circle",cx:0,cy:0,r};var z=this.getFill();if(h=this.getStroke())h.style=h.style||"Solid";break;case m.STYLE_CROSS:x={type:"path",path:"M "+k+",0 L "+
g+",0 M 0,"+b+" L 0,"+w+" E"};z=null;h=this.getStroke();break;case m.STYLE_DIAMOND:x={type:"path",path:"M "+k+",0 L 0,"+b+" L "+g+",0 L 0,"+w+" L "+k+",0 Z"};z=this.getFill();h=this.getStroke();break;case m.STYLE_SQUARE:x={type:"path",path:"M "+k+","+w+" L "+k+","+b+" L "+g+","+b+" L "+g+","+w+" L "+k+","+w+" Z"};z=this.getFill();h=this.getStroke();break;case m.STYLE_TRIANGLE:x={type:"path",path:"M "+k+","+w+" L 0,"+b+" L "+g+","+w+" L "+k+","+w+" Z"};z=this.getFill();h=this.getStroke();break;case m.STYLE_X:x=
{type:"path",path:"M "+k+","+w+" L "+g+","+b+" M "+k+","+b+" L "+g+","+w+" E"};z=null;h=this.getStroke();break;case m.STYLE_PATH:x={type:"path",path:this.path||""},z=this.getFill(),h=this.getStroke()}return{defaultShape:x,fill:z,stroke:h}},toJson:function(){var h=this.style,n=this.outline,r=B.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[h]||"esriSMSCircle"});n&&(r.outline=n.toJson());"x"===h||"cross"===h?delete r.color:"target"===h&&(r.style="esriSMSSquare",delete r.color,
0<this._targetHeight&&0<this._targetWidth&&(r.size=c.px2pt(Math.max(this._targetHeight,this._targetWidth))));r.path=this.path;return t.fixJson(r)}});B.mixin(f,m);f.defaultProps=a;B.setObject("symbol.SimpleMarkerSymbol",f,u);u.symbol.defaultSimpleMarkerSymbol=a;return f})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(f,B,l,e,c,u,t,d,q){var m=
B.getObject("dojox.gfx",!0),a=m._base={};m._hasClass=function(b,w){return(b=b.getAttribute("className"))&&0<=(" "+b+" ").indexOf(" "+w+" ")};m._addClass=function(b,w){var x=b.getAttribute("className")||"";(!x||0>(" "+x+" ").indexOf(" "+w+" "))&&b.setAttribute("className",x+(x?" ":"")+w)};m._removeClass=function(b,w){var x=b.getAttribute("className");x&&b.setAttribute("className",x.replace(new RegExp("(^|\\s+)"+w+"(\\s+|$)"),"$1$2"))};a._getFontMeasurements=function(){var b={"1em":0,"1ex":0,"100%":0,
"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},w;if(e("ie")){var x=c.doc.documentElement.style.fontSize||"";x||(c.doc.documentElement.style.fontSize="100%")}var z=d.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},c.body());for(w in b)z.style.fontSize=w,b[w]=16*Math.round(12*z.offsetHeight/16)/12/1E3;e("ie")&&(c.doc.documentElement.style.fontSize=
x);c.body().removeChild(z);return b};var h=null;a._getCachedFontMeasurements=function(b){if(b||!h)h=a._getFontMeasurements();return h};var n=null,r={};a._getTextBox=function(b,w,x){var z=arguments.length,D;n||(n=d.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},c.body()));var E=n;E.className="";var C=E.style;C.borderWidth="0";C.margin="0";C.padding="0";C.outline="0";if(1<z&&w)for(D in w)D in r||(C[D]=w[D]);2<z&&x&&(E.className=x);E.innerHTML=b;E.getBoundingClientRect?
(C=E.getBoundingClientRect(),C={l:C.left,t:C.top,w:C.width||C.right-C.left,h:C.height||C.bottom-C.top}):C=q.getMarginBox(E);E.innerHTML="";return C};a._computeTextLocation=function(b,w,x,z){var D={};switch(b.align){case "end":D.x=b.x-w;break;case "middle":D.x=b.x-w/2;break;default:D.x=b.x}D.y=b.y-x*(z?.75:1);return D};a._computeTextBoundingBox=function(b){if(!m._base._isRendered(b))return{x:0,y:0,width:0,height:0};var w=b.getShape();var x=b.getFont()||m.defaultFont;b=b.getTextWidth();x=m.normalizedLength(x.size);
w=a._computeTextLocation(w,b,x,!0);return{x:w.x,y:w.y,width:b,height:x}};a._isRendered=function(b){for(b=b.parent;b&&b.getParent;)b=b.parent;return null!==b};var k=0;a._getUniqueId=function(){do var b=f._scopeName+"xUnique"+ ++k;while(t.byId(b));return b};var g=e("pointer-events")?"touchAction":e("MSPointer")?"msTouchAction":null;a._fixMsTouchAction=g?function(b){b.rawNode.style[g]="none"}:function(){};B.mixin(m,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",
x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,
cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var b={};return function(w){var x=b[w];if(x)return new x;x=b[w]=
function(){};x.prototype=m["default"+w];return new x}}(),normalizeColor:function(b){return b instanceof l?b:new l(b)},normalizeParameters:function(b,w){var x;if(w){var z={};for(x in b)x in w&&!(x in z)&&(b[x]=w[x])}return b},makeParameters:function(b,w){var x=null;if(!w)return B.delegate(b);var z={};for(x in b)x in z||(z[x]=B.clone(x in w?w[x]:b[x]));return z},formatNumber:function(b,w){var x=b.toString();if(0<=x.indexOf("e"))x=b.toFixed(4);else{var z=x.indexOf(".");0<=z&&5<x.length-z&&(x=b.toFixed(4))}return 0>
b?x:w?" "+x:x},makeFontString:function(b){return b.style+" "+b.variant+" "+b.weight+" "+b.size+" "+b.family},splitFontString:function(b){var w=m.getDefault("Font");b=b.split(/\s+/);if(!(5>b.length)){w.style=b[0];w.variant=b[1];w.weight=b[2];var x=b[3].indexOf("/");w.size=0>x?b[3]:b[3].substring(0,x);var z=4;0>x&&("/"==b[4]?z=6:"/"==b[4].charAt(0)&&(z=5));z<b.length&&(w.family=b.slice(z).join(" "))}return w},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return m._base._getCachedFontMeasurements()["12pt"]/
12},pt2px:function(b){return b*m.px_in_pt()},px2pt:function(b){return b/m.px_in_pt()},normalizedLength:function(b){if(0===b.length)return 0;if(2<b.length){var w=m.px_in_pt(),x=parseFloat(b);switch(b.slice(-2)){case "px":return x;case "pt":return x*w;case "in":return 72*x*w;case "pc":return 12*x*w;case "mm":return x*m.mm_in_pt*w;case "cm":return x*m.cm_in_pt*w}}return parseFloat(b)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,
equalSources:function(b,w){return b&&w&&b===w},switchTo:function(b){var w="string"==typeof b?m[b]:b;w&&(u.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "),function(x){m[x]=w[x]}),"string"==typeof b?m.renderer=b:u.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(x){return m.renderer=m[x]&&m[x].Surface===m.Surface?x:null}))}});return m})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],
function(f,B,l){B.switchTo(l);return B})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(f,B,l,e,c){var u=null;l.add("vml",function(t,d,q){q.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';t="adj"in q.firstChild;q.innerHTML="";return t});return{load:function(t,d,q){function m(){d(["dojox/gfx/"+a],function(r){f.renderer=a;u=r;q(r)})}if(u&&"force"!=t)q(u);else{var a=c.forceGfxRenderer;t=!a&&(B.isString(c.gfxRenderer)?
c.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var h,n;!a&&t.length;)switch(t.shift()){case "svg":"SVGAngle"in e.global&&(a="svg");break;case "vml":l("vml")&&(a="vml");break;case "silverlight":try{l("ie")?(h=new ActiveXObject("AgControl.AgControl"),h.IsVersionSupported("1.0"))&&(n=!0):navigator.plugins["Silverlight Plug-In"]&&(n=!0)}catch(r){n=!1}finally{h=null}n&&(a="silverlight");break;case "canvas":e.global.CanvasRenderingContext2D&&(a="canvas")}"canvas"===a&&!1!==c.canvasEvents&&(a=
"canvasWithEvents");"svg"==a&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(m):m()}}}})},"dojox/gfx/svg":function(){define("dojo/_base/lang dojo/_base/sniff dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/_base/Color ./_base ./shape ./path".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h){function n(y,v){return l.doc.createElementNS?l.doc.createElementNS(y,v):l.doc.createElement(v)}function r(y,v,A,G){return y.setAttributeNS?y.setAttributeNS(v,
A,G):y.setAttribute(A,G)}function k(y){return g.useSvgWeb?l.doc.createTextNode(y,!0):l.doc.createTextNode(y)}var g=m.svg={};g.useSvgWeb="undefined"!=typeof window.svgweb;var b=navigator.userAgent,w=B("ios"),x=B("android"),z=B("chrome")||x&&4<=x?"auto":"optimizeLegibility";g.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};g.getRef=function(y){return y&&"none"!=y?y.match(/^url\(#.+\)$/)?e.byId(y.slice(5,-1)):y.match(/^#dojoUnique\d+$/)?e.byId(y.slice(1)):null:null};g.dasharray=
{solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var D=0;g.Shape=c("dojox.gfx.svg.Shape",a.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var y=this.rawNode.getAttribute("fill");(y=g.getRef(y))&&y.parentNode.removeChild(y)}this.clip&&(y=this.rawNode.getAttribute("clip-path"))&&(y=e.byId(y.match(/gfx_clip[\d]+/)[0]))&&y.parentNode.removeChild(y);
a.Shape.prototype.destroy.apply(this,arguments)},setFill:function(y){if(!y)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var v=function(G){this.setAttribute(G,A[G].toFixed(8))};if("object"==typeof y&&"type"in y){switch(y.type){case "linear":var A=m.makeParameters(m.defaultLinearGradient,y);y=this._setFillObject(A,"linearGradient");u.forEach(["x1","y1","x2","y2"],v,y);break;case "radial":A=m.makeParameters(m.defaultRadialGradient,
y);y=this._setFillObject(A,"radialGradient");u.forEach(["cx","cy","r"],v,y);break;case "pattern":A=m.makeParameters(m.defaultPattern,y),y=this._setFillObject(A,"pattern"),u.forEach(["x","y","width","height"],v,y)}this.fillStyle=A;return this}this.fillStyle=A=m.normalizeColor(y);this.rawNode.setAttribute("fill",A.toCss());this.rawNode.setAttribute("fill-opacity",A.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(y){var v=this.rawNode;if(!y)return this.strokeStyle=
null,v.setAttribute("stroke","none"),v.setAttribute("stroke-opacity",0),this;if("string"==typeof y||f.isArray(y)||y instanceof q)y={color:y};y=this.strokeStyle=m.makeParameters(m.defaultStroke,y);y.color=m.normalizeColor(y.color);if(y){var A=0>y.width?0:y.width;v.setAttribute("stroke",y.color.toCss());v.setAttribute("stroke-opacity",y.color.a);v.setAttribute("stroke-width",A);v.setAttribute("stroke-linecap",y.cap);"number"==typeof y.join?(v.setAttribute("stroke-linejoin","miter"),v.setAttribute("stroke-miterlimit",
y.join)):v.setAttribute("stroke-linejoin",y.join);var G=y.style.toLowerCase();G in g.dasharray&&(G=g.dasharray[G]);if(G instanceof Array){G=f._toArray(G);var F;for(F=0;F<G.length;++F)G[F]*=A;if("butt"!=y.cap){for(F=0;F<G.length;F+=2)G[F]-=A,1>G[F]&&(G[F]=1);for(F=1;F<G.length;F+=2)G[F]+=A}G=G.join(",")}v.setAttribute("stroke-dasharray",G);v.setAttribute("dojoGfxStrokeStyle",y.style)}return this},_getParentSurface:function(){for(var y=this.parent;y&&!(y instanceof m.Surface);y=y.parent);return y},
_setFillObject:function(y,v){var A=g.xmlns.svg;this.fillStyle=y;var G=this._getParentSurface().defNode,F=this.rawNode.getAttribute("fill");if(F=g.getRef(F))if(F.tagName.toLowerCase()!=v.toLowerCase()){var H=F.id;F.parentNode.removeChild(F);F=n(A,v);F.setAttribute("id",H);G.appendChild(F)}else for(;F.childNodes.length;)F.removeChild(F.lastChild);else F=n(A,v),F.setAttribute("id",m._base._getUniqueId()),G.appendChild(F);if("pattern"==v)F.setAttribute("patternUnits","userSpaceOnUse"),A=n(A,"image"),
A.setAttribute("x",0),A.setAttribute("y",0),A.setAttribute("width",(0>y.width?0:y.width).toFixed(8)),A.setAttribute("height",(0>y.height?0:y.height).toFixed(8)),r(A,g.xmlns.xlink,"xlink:href",y.src),F.appendChild(A);else for(F.setAttribute("gradientUnits","userSpaceOnUse"),v=0;v<y.colors.length;++v){G=y.colors[v];H=n(A,"stop");var L=G.color=m.normalizeColor(G.color);H.setAttribute("offset",G.offset.toFixed(8));H.setAttribute("stop-color",L.toCss());H.setAttribute("stop-opacity",L.a);F.appendChild(H)}this.rawNode.setAttribute("fill",
"url(#"+F.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return F},_applyTransform:function(){if(this.matrix){var y=this.matrix;this.rawNode.setAttribute("transform","matrix("+y.xx.toFixed(8)+","+y.yx.toFixed(8)+","+y.xy.toFixed(8)+","+y.yy.toFixed(8)+","+y.dx.toFixed(8)+","+y.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(y){y=this.rawNode=y;"image"!=this.shape.type&&y.setAttribute("fill",
"none");y.setAttribute("fill-opacity",0);y.setAttribute("stroke","none");y.setAttribute("stroke-opacity",0);y.setAttribute("stroke-width",1);y.setAttribute("stroke-linecap","butt");y.setAttribute("stroke-linejoin","miter");y.setAttribute("stroke-miterlimit",4);y.__gfxObject__=this},setShape:function(y){this.shape=m.makeParameters(this.shape,y);for(var v in this.shape)if("type"!=v){y=this.shape[v];if("width"===v||"height"===v)y=0>y?0:y;this.rawNode.setAttribute(v,y)}this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);
return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this},setClip:function(y){this.inherited(arguments);var v=y?"width"in y?"rect":"cx"in y?"ellipse":"points"in y?"polyline":"d"in y?"path":null:null;if(y&&!v)return this;"polyline"===v&&(y=f.clone(y),y.points=y.points.join(","));var A,G=d.get(this.rawNode,"clip-path");G&&(A=e.byId(G.match(/gfx_clip[\d]+/)[0]))&&A.removeChild(A.childNodes[0]);y?(A?(v=n(g.xmlns.svg,v),A.appendChild(v)):
(G="gfx_clip"+ ++D,this.rawNode.setAttribute("clip-path","url(#"+G+")"),A=n(g.xmlns.svg,"clipPath"),v=n(g.xmlns.svg,v),A.appendChild(v),this.rawNode.parentNode.insertBefore(A,this.rawNode),d.set(A,"id",G)),d.set(v,y)):(this.rawNode.removeAttribute("clip-path"),A&&A.parentNode.removeChild(A));return this},_removeClipNode:function(){var y,v=d.get(this.rawNode,"clip-path");v&&(y=e.byId(v.match(/gfx_clip[\d]+/)[0]))&&y.parentNode.removeChild(y);return y}});g.Group=c("dojox.gfx.svg.Group",g.Shape,{constructor:function(){a.Container._init.call(this)},
setRawNode:function(y){this.rawNode=y;this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0);g.Shape.prototype.destroy.apply(this,arguments)}});g.Group.nodeType="g";g.Rect=c("dojox.gfx.svg.Rect",[g.Shape,a.Rect],{setShape:function(y){this.shape=m.makeParameters(this.shape,y);this.bbox=null;for(var v in this.shape)if("type"!=v&&"r"!=v){y=this.shape[v];if("width"===v||"height"===v)y=0>y?0:y;this.rawNode.setAttribute(v,y)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),
this.rawNode.setAttribute("rx",this.shape.r));return this}});g.Rect.nodeType="rect";g.Ellipse=c("dojox.gfx.svg.Ellipse",[g.Shape,a.Ellipse],{});g.Ellipse.nodeType="ellipse";g.Circle=c("dojox.gfx.svg.Circle",[g.Shape,a.Circle],{});g.Circle.nodeType="circle";g.Line=c("dojox.gfx.svg.Line",[g.Shape,a.Line],{});g.Line.nodeType="line";g.Polyline=c("dojox.gfx.svg.Polyline",[g.Shape,a.Polyline],{setShape:function(y,v){y&&y instanceof Array?(this.shape=m.makeParameters(this.shape,{points:y}),v&&this.shape.points.length&&
this.shape.points.push(this.shape.points[0])):this.shape=m.makeParameters(this.shape,y);this.bbox=null;this._normalizePoints();y=[];v=this.shape.points;for(var A=0;A<v.length;++A)y.push(v[A].x.toFixed(8),v[A].y.toFixed(8));this.rawNode.setAttribute("points",y.join(" "));return this}});g.Polyline.nodeType="polyline";g.Image=c("dojox.gfx.svg.Image",[g.Shape,a.Image],{setShape:function(y){this.shape=m.makeParameters(this.shape,y);this.bbox=null;y=this.rawNode;for(var v in this.shape)if("type"!=v&&"src"!=
v){var A=this.shape[v];if("width"===v||"height"===v)A=0>A?0:A;y.setAttribute(v,A)}y.setAttribute("preserveAspectRatio","none");r(y,g.xmlns.xlink,"xlink:href",this.shape.src);y.__gfxObject__=this;return this}});g.Image.nodeType="image";g.Text=c("dojox.gfx.svg.Text",[g.Shape,a.Text],{setShape:function(y){this.shape=m.makeParameters(this.shape,y);this.bbox=null;y=this.rawNode;var v=this.shape;y.setAttribute("x",v.x);y.setAttribute("y",v.y);y.setAttribute("text-anchor",v.align);y.setAttribute("text-decoration",
v.decoration);y.setAttribute("rotate",v.rotated?90:0);y.setAttribute("kerning",v.kerning?"auto":0);y.setAttribute("text-rendering",z);y.firstChild?y.firstChild.nodeValue=v.text:y.appendChild(k(v.text));return this},getTextWidth:function(){var y=this.rawNode,v=y.parentNode;y=y.cloneNode(!0);y.style.visibility="hidden";var A=0,G=y.firstChild.nodeValue;v.appendChild(y);if(""!=G)for(;!A;)A=y.getBBox?parseInt(y.getBBox().width):68;v.removeChild(y);return A},getBoundingBox:function(){var y=null;if(this.getShape().text)try{y=
this.rawNode.getBBox()}catch(v){y={x:0,y:0,width:0,height:0}}return y}});g.Text.nodeType="text";g.Path=c("dojox.gfx.svg.Path",[g.Shape,h.Path],{_updateWithSegment:function(y){this.inherited(arguments);"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(y){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});g.Path.nodeType="path";g.TextPath=c("dojox.gfx.svg.TextPath",
[g.Shape,h.TextPath],{_updateWithSegment:function(y){this.inherited(arguments);this._setTextPath()},setShape:function(y){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if("string"==typeof this.shape.path){var y=this.rawNode;if(!y.firstChild){var v=n(g.xmlns.svg,"textPath"),A=k("");v.appendChild(A);y.appendChild(v)}v=(v=y.firstChild.getAttributeNS(g.xmlns.xlink,"href"))&&g.getRef(v);if(!v&&(A=this._getParentSurface())){A=A.defNode;v=n(g.xmlns.svg,"path");var G=m._base._getUniqueId();
v.setAttribute("id",G);A.appendChild(v);r(y.firstChild,g.xmlns.xlink,"xlink:href","#"+G)}v&&v.setAttribute("d",this.shape.path)}},_setText:function(){var y=this.rawNode;if(!y.firstChild){var v=n(g.xmlns.svg,"textPath"),A=k("");v.appendChild(A);y.appendChild(v)}y=y.firstChild;v=this.text;y.setAttribute("alignment-baseline","middle");switch(v.align){case "middle":y.setAttribute("text-anchor","middle");y.setAttribute("startOffset","50%");break;case "end":y.setAttribute("text-anchor","end");y.setAttribute("startOffset",
"100%");break;default:y.setAttribute("text-anchor","start"),y.setAttribute("startOffset","0%")}y.setAttribute("baseline-shift","0.5ex");y.setAttribute("text-decoration",v.decoration);y.setAttribute("rotate",v.rotated?90:0);y.setAttribute("kerning",v.kerning?"auto":0);y.firstChild.data=v.text}});g.TextPath.nodeType="text";var E=534<function(){var y=/WebKit\/(\d*)/.exec(b);return y?y[1]:0}();g.Surface=c("dojox.gfx.svg.Surface",a.Surface,{constructor:function(){a.Container._init.call(this)},destroy:function(){a.Container.clear.call(this,
!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(y,v){if(!this.rawNode)return this;y=0>y?0:y;v=0>v?0:v;this.rawNode.setAttribute("width",y);this.rawNode.setAttribute("height",v);E&&(this.rawNode.style.width=y,this.rawNode.style.height=v);return this},getDimensions:function(){return this.rawNode?{width:m.normalizedLength(this.rawNode.getAttribute("width")),height:m.normalizedLength(this.rawNode.getAttribute("height"))}:null}});g.createSurface=function(y,v,A){var G=new g.Surface;
G.rawNode=n(g.xmlns.svg,"svg");G.rawNode.setAttribute("overflow","hidden");v&&G.rawNode.setAttribute("width",0>v?0:v);A&&G.rawNode.setAttribute("height",0>A?0:A);v=n(g.xmlns.svg,"defs");G.rawNode.appendChild(v);G.defNode=v;G._parent=e.byId(y);G._parent.appendChild(G.rawNode);m._base._fixMsTouchAction(G);return G};B={_setFont:function(){var y=this.fontStyle;this.rawNode.setAttribute("font-style",y.style);this.rawNode.setAttribute("font-variant",y.variant);this.rawNode.setAttribute("font-weight",y.weight);
this.rawNode.setAttribute("font-size",y.size);this.rawNode.setAttribute("font-family",y.family)}};var C=a.Container;c=g.Container={openBatch:function(){if(!this._batch){var y=g.useSvgWeb?l.doc.createDocumentFragment(!0):l.doc.createDocumentFragment();this.fragment=y}++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment);return this},add:function(y){this!=y.getParent()&&(this.fragment?
this.fragment.appendChild(y.rawNode):this.rawNode.appendChild(y.rawNode),C.add.apply(this,arguments),y.setClip(y.clip));return this},remove:function(y,v){this==y.getParent()&&(this.rawNode==y.rawNode.parentNode&&this.rawNode.removeChild(y.rawNode),this.fragment&&this.fragment==y.rawNode.parentNode&&this.fragment.removeChild(y.rawNode),y._removeClipNode(),C.remove.apply(this,arguments));return this},clear:function(){for(var y=this.rawNode;y.lastChild;)y.removeChild(y.lastChild);var v=this.defNode;
if(v){for(;v.lastChild;)v.removeChild(v.lastChild);y.appendChild(v)}return C.clear.apply(this,arguments)},getBoundingBox:C.getBoundingBox,_moveChildToFront:C._moveChildToFront,_moveChildToBack:C._moveChildToBack};h=g.Creator={createObject:function(y,v){if(!this.rawNode)return null;var A=new y;y=n(g.xmlns.svg,y.nodeType);A.setRawNode(y);A.setShape(v);this.add(A);return A}};f.extend(g.Text,B);f.extend(g.TextPath,B);f.extend(g.Group,c);f.extend(g.Group,a.Creator);f.extend(g.Group,h);f.extend(g.Surface,
c);f.extend(g.Surface,a.Creator);f.extend(g.Surface,h);g.fixTarget=function(y,v){y.gfxTarget||(y.gfxTarget=w&&y.target.wholeText?y.target.parentElement.__gfxObject__:y.target.__gfxObject__);return!0};g.useSvgWeb&&(g.createSurface=function(y,v,A){var G=new g.Surface;v=0>v?0:v;A=0>A?0:A;if(!v||!A){var F=t.position(y);v=v||F.w;A=A||F.h}y=e.byId(y);F=y.id?y.id+"_svgweb":m._base._getUniqueId();var H=n(g.xmlns.svg,"svg");H.id=F;H.setAttribute("width",v);H.setAttribute("height",A);svgweb.appendChild(H,y);
H.addEventListener("SVGLoad",function(){G.rawNode=this;G.isLoaded=!0;var L=n(g.xmlns.svg,"defs");G.rawNode.appendChild(L);G.defNode=L;if(G.onLoad)G.onLoad(G)},!1);G.isLoaded=!1;return G},g.Surface.extend({destroy:function(){var y=this.rawNode;svgweb.removeChild(y,y.parentNode)}}),B={connect:function(y,v,A){"on"===y.substring(0,2)&&(y=y.substring(2));A=2==arguments.length?v:f.hitch(v,A);this.getEventSource().addEventListener(y,A,!1);return[this,y,A]},disconnect:function(y){this.getEventSource().removeEventListener(y[1],
y[2],!1);delete y[0]}},f.extend(g.Shape,B),f.extend(g.Surface,B));return g})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(f,B,l,e,c,u,t,d,q,m){function a(n,r){for(var k=n.length-1;r<k;)n[r]=n[++r];n.length=k}var h=f.shape={};h.Shape=l("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=
this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(c("gfxRegistry")){var n=h.register(this);this.getUID=function(){return n}}},destroy:function(){c("gfxRegistry")&&h.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},
getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var n=this.getBoundingBox();if(!n)return null;var r=this._getRealMatrix();return[m.multiplyPoint(r,n.x,n.y),m.multiplyPoint(r,n.x+n.width,n.y),m.multiplyPoint(r,n.x+n.width,n.y+n.height),m.multiplyPoint(r,n.x,n.y+n.height)]},getEventSource:function(){return this.rawNode},setClip:function(n){this.clip=n},getClip:function(){return this.clip},setShape:function(n){this.shape=f.makeParameters(this.shape,n);this.bbox=null;
return this},setFill:function(n){if(!n)return this.fillStyle=null,this;var r=null;if("object"==typeof n&&"type"in n)switch(n.type){case "linear":r=f.makeParameters(f.defaultLinearGradient,n);break;case "radial":r=f.makeParameters(f.defaultRadialGradient,n);break;case "pattern":r=f.makeParameters(f.defaultPattern,n)}else r=f.normalizeColor(n);this.fillStyle=r;return this},setStroke:function(n){if(!n)return this.strokeStyle=null,this;if("string"==typeof n||B.isArray(n)||n instanceof q)n={color:n};n=
this.strokeStyle=f.makeParameters(f.defaultStroke,n);n.color=f.normalizeColor(n.color);return this},setTransform:function(n){this.matrix=m.clone(n?m.normalize(n):m.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var n=this.getParent();n&&(n._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var n=this.getParent();n&&(n._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},
applyRightTransform:function(n){return n?this.setTransform([this.matrix,n]):this},applyLeftTransform:function(n){return n?this.setTransform([n,this.matrix]):this},applyTransform:function(n){return n?this.setTransform([this.matrix,n]):this},removeShape:function(n){this.parent&&this.parent.remove(this,n);return this},_setParent:function(n,r){this.parent=n;return this._updateParentMatrix(r)},_updateParentMatrix:function(n){this.parentMatrix=n?m.clone(n):null;return this._applyTransform()},_getRealMatrix:function(){for(var n=
this.matrix,r=this.parent;r;)r.matrix&&(n=m.multiply(r.matrix,n)),r=r.parent;return n}});h._eventsProcessing={on:function(n,r){return u(this.getEventSource(),n,h.fixCallback(this,f.fixTarget,r))},connect:function(n,r,k){"on"==n.substring(0,2)&&(n=n.substring(2));return this.on(n,k?B.hitch(r,k):r)},disconnect:function(n){return n.remove()}};h.fixCallback=function(n,r,k,g){g||(g=k,k=null);if(B.isString(g)){k=k||e.global;if(!k[g])throw['dojox.gfx.shape.fixCallback: scope["',g,'"] is null (scope\x3d"',
k,'")'].join("");return function(b){return r(b,n)?k[g].apply(k,arguments||[]):void 0}}return k?function(b){return r(b,n)?g.apply(k,arguments||[]):void 0}:function(b){return r(b,n)?g.apply(k,arguments):void 0}};B.extend(h.Shape,h._eventsProcessing);h.Container={_init:function(){this.children=[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(n){var r=n.getParent();r&&r.remove(n,!0);this.children.push(n);return n._setParent(this,this._getRealMatrix())},
remove:function(n,r){for(var k=0;k<this.children.length;++k)if(this.children[k]==n){r||(n.parent=null,n.parentMatrix=null);a(this.children,k);break}return this},clear:function(n){for(var r,k=0;k<this.children.length;++k)r=this.children[k],r.parent=null,r.parentMatrix=null,n&&r.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var n=null;t.forEach(this.children,function(r){var k=r.getBoundingBox();k&&((r=r.getTransform())&&(k=m.multiplyRectangle(r,k)),n?(n.x=Math.min(n.x,
k.x),n.y=Math.min(n.y,k.y),n.endX=Math.max(n.endX,k.x+k.width),n.endY=Math.max(n.endY,k.y+k.height)):n={x:k.x,y:k.y,endX:k.x+k.width,endY:k.y+k.height})});n&&(n.width=n.endX-n.x,n.height=n.endY-n.y);return n}return null},_moveChildToFront:function(n){for(var r=0;r<this.children.length;++r)if(this.children[r]==n){a(this.children,r);this.children.push(n);break}return this},_moveChildToBack:function(n){for(var r=0;r<this.children.length;++r)if(this.children[r]==n){a(this.children,r);this.children.unshift(n);
break}return this}};h.Surface=l("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){t.forEach(this._nodes,d.destroy);this._nodes=[];t.forEach(this._events,function(n){n&&n.remove()});this._events=[];this.rawNode=null;if(c("ie"))for(;this._parent.lastChild;)d.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},
isLoaded:!0,onLoad:function(n){},whenLoaded:function(n,r){var k=B.hitch(n,r);if(this.isLoaded)k(this);else u.once(this,"load",function(g){k(g)})}});B.extend(h.Surface,h._eventsProcessing);h.Rect=l("dojox.gfx.shape.Rect",h.Shape,{constructor:function(n){this.shape=f.getDefault("Rect");this.rawNode=n},getBoundingBox:function(){return this.shape}});h.Ellipse=l("dojox.gfx.shape.Ellipse",h.Shape,{constructor:function(n){this.shape=f.getDefault("Ellipse");this.rawNode=n},getBoundingBox:function(){if(!this.bbox){var n=
this.shape;this.bbox={x:n.cx-n.rx,y:n.cy-n.ry,width:2*n.rx,height:2*n.ry}}return this.bbox}});h.Circle=l("dojox.gfx.shape.Circle",h.Shape,{constructor:function(n){this.shape=f.getDefault("Circle");this.rawNode=n},getBoundingBox:function(){if(!this.bbox){var n=this.shape;this.bbox={x:n.cx-n.r,y:n.cy-n.r,width:2*n.r,height:2*n.r}}return this.bbox}});h.Line=l("dojox.gfx.shape.Line",h.Shape,{constructor:function(n){this.shape=f.getDefault("Line");this.rawNode=n},getBoundingBox:function(){if(!this.bbox){var n=
this.shape;this.bbox={x:Math.min(n.x1,n.x2),y:Math.min(n.y1,n.y2),width:Math.abs(n.x2-n.x1),height:Math.abs(n.y2-n.y1)}}return this.bbox}});h.Polyline=l("dojox.gfx.shape.Polyline",h.Shape,{constructor:function(n){this.shape=f.getDefault("Polyline");this.rawNode=n},setShape:function(n,r){n&&n instanceof Array?(this.inherited(arguments,[{points:n}]),r&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[n]);return this},_normalizePoints:function(){var n=
this.shape.points,r=n&&n.length;if(r&&"number"==typeof n[0]){for(var k=[],g=0;g<r;g+=2)k.push({x:n[g],y:n[g+1]});this.shape.points=k}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var n=this.shape.points,r=n.length,k=n[0],g=k.x,b=k.y,w=k.x,x=k.y,z=1;z<r;++z)k=n[z],g>k.x&&(g=k.x),w<k.x&&(w=k.x),b>k.y&&(b=k.y),x<k.y&&(x=k.y);this.bbox={x:g,y:b,width:w-g,height:x-b}}return this.bbox}});h.Image=l("dojox.gfx.shape.Image",h.Shape,{constructor:function(n){this.shape=f.getDefault("Image");
this.rawNode=n},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});h.Text=l(h.Shape,{constructor:function(n){this.fontStyle=null;this.shape=f.getDefault("Text");this.rawNode=n},getFont:function(){return this.fontStyle},setFont:function(n){this.fontStyle="string"==typeof n?f.splitFontString(n):f.makeParameters(f.defaultFont,n);this._setFont();return this},getBoundingBox:function(){var n=null;this.getShape().text&&(n=f._base._computeTextBoundingBox(this));
return n}});h.Creator={createShape:function(n){switch(n.type){case f.defaultPath.type:return this.createPath(n);case f.defaultRect.type:return this.createRect(n);case f.defaultCircle.type:return this.createCircle(n);case f.defaultEllipse.type:return this.createEllipse(n);case f.defaultLine.type:return this.createLine(n);case f.defaultPolyline.type:return this.createPolyline(n);case f.defaultImage.type:return this.createImage(n);case f.defaultText.type:return this.createText(n);case f.defaultTextPath.type:return this.createTextPath(n)}return null},
createGroup:function(){return this.createObject(f.Group)},createRect:function(n){return this.createObject(f.Rect,n)},createEllipse:function(n){return this.createObject(f.Ellipse,n)},createCircle:function(n){return this.createObject(f.Circle,n)},createLine:function(n){return this.createObject(f.Line,n)},createPolyline:function(n){return this.createObject(f.Polyline,n)},createImage:function(n){return this.createObject(f.Image,n)},createText:function(n){return this.createObject(f.Text,n)},createPath:function(n){return this.createObject(f.Path,
n)},createTextPath:function(n){return this.createObject(f.TextPath,{}).setText(n)},createObject:function(n,r){return null}};return h})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(f,B){var l=f.matrix={},e={};l._degToRad=function(c){return e[c]||(e[c]=Math.PI*c/180)};l._radToDeg=function(c){return c/Math.PI*180};l.Matrix2D=function(c){if(c)if("number"==typeof c)this.xx=this.yy=c;else if(c instanceof Array){if(0<c.length){for(var u=l.normalize(c[0]),t=1;t<c.length;++t){var d=
u,q=l.normalize(c[t]);u=new l.Matrix2D;u.xx=d.xx*q.xx+d.xy*q.yx;u.xy=d.xx*q.xy+d.xy*q.yy;u.yx=d.yx*q.xx+d.yy*q.yx;u.yy=d.yx*q.xy+d.yy*q.yy;u.dx=d.xx*q.dx+d.xy*q.dy+d.dx;u.dy=d.yx*q.dx+d.yy*q.dy+d.dy}B.mixin(this,u)}}else B.mixin(this,c)};B.extend(l.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});B.mixin(l,{identity:new l.Matrix2D,flipX:new l.Matrix2D({xx:-1}),flipY:new l.Matrix2D({yy:-1}),flipXY:new l.Matrix2D({xx:-1,yy:-1}),translate:function(c,u){return 1<arguments.length?new l.Matrix2D({dx:c,dy:u}):
new l.Matrix2D({dx:c.x,dy:c.y})},scale:function(c,u){return 1<arguments.length?new l.Matrix2D({xx:c,yy:u}):"number"==typeof c?new l.Matrix2D({xx:c,yy:c}):new l.Matrix2D({xx:c.x,yy:c.y})},rotate:function(c){var u=Math.cos(c);c=Math.sin(c);return new l.Matrix2D({xx:u,xy:-c,yx:c,yy:u})},rotateg:function(c){return l.rotate(l._degToRad(c))},skewX:function(c){return new l.Matrix2D({xy:Math.tan(c)})},skewXg:function(c){return l.skewX(l._degToRad(c))},skewY:function(c){return new l.Matrix2D({yx:Math.tan(c)})},
skewYg:function(c){return l.skewY(l._degToRad(c))},reflect:function(c,u){1==arguments.length&&(u=c.y,c=c.x);var t=c*c,d=u*u,q=t+d,m=2*c*u/q;return new l.Matrix2D({xx:2*t/q-1,xy:m,yx:m,yy:2*d/q-1})},project:function(c,u){1==arguments.length&&(u=c.y,c=c.x);var t=c*c,d=u*u,q=t+d,m=c*u/q;return new l.Matrix2D({xx:t/q,xy:m,yx:m,yy:d/q})},normalize:function(c){return c instanceof l.Matrix2D?c:new l.Matrix2D(c)},isIdentity:function(c){return 1==c.xx&&0==c.xy&&0==c.yx&&1==c.yy&&0==c.dx&&0==c.dy},clone:function(c){var u=
new l.Matrix2D,t;for(t in c)"number"==typeof c[t]&&"number"==typeof u[t]&&u[t]!=c[t]&&(u[t]=c[t]);return u},invert:function(c){c=l.normalize(c);var u=c.xx*c.yy-c.xy*c.yx;return c=new l.Matrix2D({xx:c.yy/u,xy:-c.xy/u,yx:-c.yx/u,yy:c.xx/u,dx:(c.xy*c.dy-c.yy*c.dx)/u,dy:(c.yx*c.dx-c.xx*c.dy)/u})},_multiplyPoint:function(c,u,t){return{x:c.xx*u+c.xy*t+c.dx,y:c.yx*u+c.yy*t+c.dy}},multiplyPoint:function(c,u,t){c=l.normalize(c);return"number"==typeof u&&"number"==typeof t?l._multiplyPoint(c,u,t):l._multiplyPoint(c,
u.x,u.y)},multiplyRectangle:function(c,u){var t=l.normalize(c);u=u||{x:0,y:0,width:0,height:0};if(l.isIdentity(t))return{x:u.x,y:u.y,width:u.width,height:u.height};c=l.multiplyPoint(t,u.x,u.y);var d=l.multiplyPoint(t,u.x,u.y+u.height),q=l.multiplyPoint(t,u.x+u.width,u.y);u=l.multiplyPoint(t,u.x+u.width,u.y+u.height);t=Math.min(c.x,d.x,q.x,u.x);var m=Math.min(c.y,d.y,q.y,u.y);return{x:t,y:m,width:Math.max(c.x,d.x,q.x,u.x)-t,height:Math.max(c.y,d.y,q.y,u.y)-m}},multiply:function(c){for(var u=l.normalize(c),
t=1;t<arguments.length;++t){var d=u,q=l.normalize(arguments[t]);u=new l.Matrix2D;u.xx=d.xx*q.xx+d.xy*q.yx;u.xy=d.xx*q.xy+d.xy*q.yy;u.yx=d.yx*q.xx+d.yy*q.yx;u.yy=d.yx*q.xy+d.yy*q.yy;u.dx=d.xx*q.dx+d.xy*q.dy+d.dx;u.dy=d.yx*q.dx+d.yy*q.dy+d.dy}return u},_sandwich:function(c,u,t){return l.multiply(l.translate(u,t),c,l.translate(-u,-t))},scaleAt:function(c,u,t,d){switch(arguments.length){case 4:return l._sandwich(l.scale(c,u),t,d);case 3:return"number"==typeof t?l._sandwich(l.scale(c),u,t):l._sandwich(l.scale(c,
u),t.x,t.y)}return l._sandwich(l.scale(c),u.x,u.y)},rotateAt:function(c,u,t){return 2<arguments.length?l._sandwich(l.rotate(c),u,t):l._sandwich(l.rotate(c),u.x,u.y)},rotategAt:function(c,u,t){return 2<arguments.length?l._sandwich(l.rotateg(c),u,t):l._sandwich(l.rotateg(c),u.x,u.y)},skewXAt:function(c,u,t){return 2<arguments.length?l._sandwich(l.skewX(c),u,t):l._sandwich(l.skewX(c),u.x,u.y)},skewXgAt:function(c,u,t){return 2<arguments.length?l._sandwich(l.skewXg(c),u,t):l._sandwich(l.skewXg(c),u.x,
u.y)},skewYAt:function(c,u,t){return 2<arguments.length?l._sandwich(l.skewY(c),u,t):l._sandwich(l.skewY(c),u.x,u.y)},skewYgAt:function(c,u,t){return 2<arguments.length?l._sandwich(l.skewYg(c),u,t):l._sandwich(l.skewYg(c),u.x,u.y)}});f.Matrix2D=l.Matrix2D;return l})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(f,B,l,e,c){c=l("dojox.gfx.path.Path",c.Shape,{constructor:function(u){this.shape=B.clone(f.defaultPath);this.segments=
[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=u;this.segmented=!1},setAbsoluteMode:function(u){this._confirmSegmented();this.absolute="string"==typeof u?"absolute"==u:u;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();
if(this.tbbox)return this.tbbox;var u=this.bbox,t=this._getRealMatrix();this.bbox=null;for(var d=0,q=this.segments.length;d<q;++d)this._updateWithSegment(this.segments[d],t);t=this.bbox;this.bbox=u;return this.tbbox=t?[{x:t.l,y:t.t},{x:t.r,y:t.t},{x:t.r,y:t.b},{x:t.l,y:t.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(u,t,d){d&&(t=e.multiplyPoint(d,
u,t),u=t.x,t=t.y);this.bbox&&"l"in this.bbox?(this.bbox.l>u&&(this.bbox.l=u),this.bbox.r<u&&(this.bbox.r=u),this.bbox.t>t&&(this.bbox.t=t),this.bbox.b<t&&(this.bbox.b=t)):this.bbox={l:u,b:t,r:u,t}},_updateWithSegment:function(u,t){var d=u.args,q=d.length,m;switch(u.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(m=0;m<q;m+=2)this._updateBBox(d[m],d[m+1],t);this.last.x=d[q-2];this.last.y=d[q-1];this.absolute=!0;break;case "H":for(m=0;m<q;++m)this._updateBBox(d[m],this.last.y,t);this.last.x=
d[q-1];this.absolute=!0;break;case "V":for(m=0;m<q;++m)this._updateBBox(this.last.x,d[m],t);this.last.y=d[q-1];this.absolute=!0;break;case "m":m=0;"x"in this.last||(this._updateBBox(this.last.x=d[0],this.last.y=d[1],t),m=2);for(;m<q;m+=2)this._updateBBox(this.last.x+=d[m],this.last.y+=d[m+1],t);this.absolute=!1;break;case "l":case "t":for(m=0;m<q;m+=2)this._updateBBox(this.last.x+=d[m],this.last.y+=d[m+1],t);this.absolute=!1;break;case "h":for(m=0;m<q;++m)this._updateBBox(this.last.x+=d[m],this.last.y,
t);this.absolute=!1;break;case "v":for(m=0;m<q;++m)this._updateBBox(this.last.x,this.last.y+=d[m],t);this.absolute=!1;break;case "c":for(m=0;m<q;m+=6)this._updateBBox(this.last.x+d[m],this.last.y+d[m+1],t),this._updateBBox(this.last.x+d[m+2],this.last.y+d[m+3],t),this._updateBBox(this.last.x+=d[m+4],this.last.y+=d[m+5],t);this.absolute=!1;break;case "s":case "q":for(m=0;m<q;m+=4)this._updateBBox(this.last.x+d[m],this.last.y+d[m+1],t),this._updateBBox(this.last.x+=d[m+2],this.last.y+=d[m+3],t);this.absolute=
!1;break;case "A":for(m=0;m<q;m+=7)this._updateBBox(d[m+5],d[m+6],t);this.last.x=d[q-2];this.last.y=d[q-1];this.absolute=!0;break;case "a":for(m=0;m<q;m+=7)this._updateBBox(this.last.x+=d[m+5],this.last.y+=d[m+6],t);this.absolute=!1}u=[u.action];for(m=0;m<q;++m)u.push(f.formatNumber(d[m],!0));if("string"==typeof this.shape.path)this.shape.path+=u.join("");else for(m=0,q=u.length;m<q;++m)this.shape.path.push(u[m])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(u,t){this.tbbox=
null;var d=this._validSegments[u.toLowerCase()];"number"==typeof d&&(d?t.length>=d&&(u={action:u,args:t.slice(0,t.length-t.length%d)},this.segments.push(u),this._updateWithSegment(u)):(u={action:u,args:[]},this.segments.push(u),this._updateWithSegment(u)))},_collectArgs:function(u,t){for(var d=0;d<t.length;++d){var q=t[d];"boolean"==typeof q?u.push(q?1:0):"number"==typeof q?u.push(q):q instanceof Array?this._collectArgs(u,q):"x"in q&&"y"in q&&u.push(q.x,q.y)}},moveTo:function(){this._confirmSegmented();
var u=[];this._collectArgs(u,arguments);this._pushSegment(this.absolute?"M":"m",u);return this},lineTo:function(){this._confirmSegmented();var u=[];this._collectArgs(u,arguments);this._pushSegment(this.absolute?"L":"l",u);return this},hLineTo:function(){this._confirmSegmented();var u=[];this._collectArgs(u,arguments);this._pushSegment(this.absolute?"H":"h",u);return this},vLineTo:function(){this._confirmSegmented();var u=[];this._collectArgs(u,arguments);this._pushSegment(this.absolute?"V":"v",u);
return this},curveTo:function(){this._confirmSegmented();var u=[];this._collectArgs(u,arguments);this._pushSegment(this.absolute?"C":"c",u);return this},smoothCurveTo:function(){this._confirmSegmented();var u=[];this._collectArgs(u,arguments);this._pushSegment(this.absolute?"S":"s",u);return this},qCurveTo:function(){this._confirmSegmented();var u=[];this._collectArgs(u,arguments);this._pushSegment(this.absolute?"Q":"q",u);return this},qSmoothCurveTo:function(){this._confirmSegmented();var u=[];this._collectArgs(u,
arguments);this._pushSegment(this.absolute?"T":"t",u);return this},arcTo:function(){this._confirmSegmented();var u=[];this._collectArgs(u,arguments);this._pushSegment(this.absolute?"A":"a",u);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var u=this.shape.path;this.shape.path=[];this._setPath(u);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(u){u=B.isArray(u)?u:u.match(f.pathSvgRegExp);
this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(u){for(var t="",d=[],q=u.length,m=0;m<q;++m){var a=u[m],h=parseFloat(a);isNaN(h)?(t&&this._pushSegment(t,d),d=[],t=a):d.push(h)}this._pushSegment(t,d)}},setShape:function(u){this.inherited(arguments,["string"==typeof u?{path:u}:u]);this.segmented=!1;this.segments=[];f.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});l=l("dojox.gfx.path.TextPath",c,{constructor:function(u){"text"in this||(this.text=B.clone(f.defaultTextPath));
"fontStyle"in this||(this.fontStyle=B.clone(f.defaultFont))},getText:function(){return this.text},setText:function(u){this.text=f.makeParameters(this.text,"string"==typeof u?{text:u}:u);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(u){this.fontStyle="string"==typeof u?f.splitFontString(u):f.makeParameters(f.defaultFont,u);this._setFont();return this}});return f.path={Path:c,TextPath:l}})},"dojox/gfx/filters":function(){define(["dojo/_base/lang","dojo/_base/array"],
function(f,B){var l={},e={x:"0%",y:"0%",width:"100%",height:"100%"},c={};l.createFilter=function(h,n){h=f.mixin({},e,h);h.primitives||(h.primitives=[]);n&&Array.prototype.push.apply(h.primitives,n);return h};var u=function(h,n,r){n instanceof Array&&(r=n,n=null);n=f.mixin({},n);n.children=r;n.tag=h;return n};B.forEach("feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feFlood feGaussianBlur feImage feMorphology feOffset feSpecularLighting feTile feTurbulence feDistantLight fePointLight feSpotLight feMergeNode feFuncA feFuncR feFuncG feFuncB".split(" "),
function(h){l[h]=function(n,r){return u(h,n,r)}});l.feMerge=function(h,n){if("string"===typeof h){for(var r=[],k=0;k<arguments.length;++k)r.push(l.feMergeNode({"in":arguments[k]}));return u("feMerge",{},r)}return u("feMerge",h,n)};var t=l.createFilter;c.convolutions=[t({_gfxName:"boxBlur3"},[l.feConvolveMatrix({"in":"SourceGraphic",order:3,divisor:9,kernelMatrix:"1,1,1,1,1,1,1,1,1"})]),t({_gfxName:"boxBlur5"},[l.feConvolveMatrix({"in":"SourceGraphic",order:5,divisor:25,kernelMatrix:"1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1"})]),
t({_gfxName:"verticalEdges",filterUnits:"objectBoundingBox"},[l.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 0 1 -1 0 1 -1 0 1"}),l.feComponentTransfer({"in":"kernel"},[l.feFuncA({type:"table",tableValues:"1,1"})])]),t({_gfxName:"horizontalEdges",filterUnits:"objectBoundingBox"},[l.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"1 1 1 0 0 0 -1 -1 -1"}),l.feComponentTransfer({"in":"kernel"},[l.feFuncA({type:"table",
tableValues:"1,1"})])]),t({_gfxName:"allEdges3",filterUnits:"objectBoundingBox"},[l.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 -1 -1 -1 8 -1 -1 -1 -1"}),l.feComponentTransfer({"in":"kernel"},[l.feFuncA({type:"table",tableValues:"1,1"})])]),t({_gfxName:"edgeEnhance",filterUnits:"objectBoundingBox"},[l.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:-1,kernelMatrix:"0 1 0 1 -5 1 0 1 0"}),l.feComponentTransfer({"in":"kernel"},[l.feFuncA({type:"table",
tableValues:"1,1"})])])];B.forEach(c.convolutions,function(h){f.mixin(h,e)});c.shadows=[t({_gfxName:"fastSmallDropShadow"},[l.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),l.feOffset({dx:3,dy:3,result:"offsetBlur"}),l.feMerge("offsetBlur","SourceGraphic")]),t({_gfxName:"fastDropShadow"},[l.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),
l.feOffset({dx:5,dy:5,result:"offsetBlur"}),l.feMerge("offsetBlur","SourceGraphic")]),t({_gfxName:"fastDropShadowLight"},[l.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.4,0"}),l.feOffset({dx:5,dy:5,result:"offsetBlur"}),l.feMerge("offsetBlur","SourceGraphic")]),t({_gfxName:"dropShadow"},[l.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4}),l.feOffset({dx:5,dy:5,result:"offsetBlur"}),l.feMerge("offsetBlur",
"SourceGraphic")]),t({_gfxName:"dropShadowLight"},[l.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4,result:"blur"}),l.feComponentTransfer({"in":"blur",result:"lessblur"},[l.feFuncA({type:"linear",slope:.5})]),l.feOffset({"in":"lessblur",dx:5,dy:5,result:"offsetBlur"}),l.feMerge("offsetBlur","SourceGraphic")]),t({_gfxName:"smallDropShadow"},[l.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3}),l.feOffset({dx:2,dy:2,result:"offsetBlur"}),l.feMerge("offsetBlur","SourceGraphic")]),t({_gfxName:"smallDropShadowLight"},
[l.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3,result:"blur"}),l.feComponentTransfer({"in":"blur",result:"lessblur"},[l.feFuncA({type:"linear",slope:.5})]),l.feOffset({"in":"lessblur",dx:2,dy:2,result:"offsetBlur"}),l.feMerge("offsetBlur","SourceGraphic")])];var d={x:"-10%",y:"-10%",width:"125%",height:"125%"};B.forEach(c.shadows,function(h){f.mixin(h,d)});c.blurs=[t({_gfxName:"blur1",x:"-5%",y:"-5%",width:"110%",height:"110%"},[l.feGaussianBlur({"in":"SourceGraphic",stdDeviation:1})]),t({_gfxName:"blur2",
x:"-15%",y:"-15%",width:"130%",height:"130%"},[l.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2})]),t({_gfxName:"blur4",x:"-15%",y:"-15%",width:"130%",height:"130%"},[l.feGaussianBlur({"in":"SourceGraphic",stdDeviation:4})]),t({_gfxName:"blur8",x:"-20%",y:"-20%",width:"140%",height:"140%"},[l.feGaussianBlur({"in":"SourceGraphic",stdDeviation:8})]),t({_gfxName:"glow",x:"-10%",y:"-10%",width:"120%",height:"120%"},[l.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2}),l.feComponentTransfer([l.feFuncA({type:"linear",
slope:10})])])];c.colors=[t({_gfxName:"negate"},[l.feComponentTransfer([l.feFuncR({type:"table",tableValues:"1,0"}),l.feFuncG({type:"table",tableValues:"1,0"}),l.feFuncB({type:"table",tableValues:"1,0"})])]),t({_gfxName:"sepia"},[l.feColorMatrix({result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"}),l.feComponentTransfer({"in":"grey"},[l.feFuncR({type:"linear",slope:.5,intercept:.5}),l.feFuncB({type:"table",tableValues:"0,0"})])]),t({_gfxName:"grayscale"},
[l.feColorMatrix({values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"})]),t({_gfxName:"showRed"},[l.feComponentTransfer([l.feFuncG({type:"table",tableValues:"0,0"}),l.feFuncB({type:"table",tableValues:"0,0"})])]),t({_gfxName:"showGreen"},[l.feComponentTransfer([l.feFuncR({type:"table",tableValues:"0,0"}),l.feFuncB({type:"table",tableValues:"0,0"})])]),t({_gfxName:"showBlue"},[l.feComponentTransfer([l.feFuncR({type:"table",tableValues:"0,0"}),l.feFuncG({type:"table",
tableValues:"0,0"})])]),t({_gfxName:"hueRotate60"},[l.feColorMatrix({type:"hueRotate",values:60})]),t({_gfxName:"hueRotate120"},[l.feColorMatrix({type:"hueRotate",values:120})]),t({_gfxName:"hueRotate180"},[l.feColorMatrix({type:"hueRotate",values:180})]),t({_gfxName:"hueRotate270"},[l.feColorMatrix({type:"hueRotate",values:270})])];B.forEach(c.colors,function(h){f.mixin(h,e)});c.miscs=[t({_gfxName:"thinEmbossDropShadow",x:"-5%",y:"-5%",width:"120%",height:"120%"},[l.feGaussianBlur({"in":"SourceAlpha",
stdDeviation:1,result:"blur"}),l.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),l.feSpecularLighting({"in":"blur",surfaceScale:8,specularConstant:1,specularExponent:12,result:"specOut"},[l.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),l.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),l.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),l.feMerge("offsetBlur","litPaint")]),t({_gfxName:"embossDropShadow",
x:"-5%",y:"-5%",width:"120%",height:"120%"},[l.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"4",result:"blur"}),l.feOffset({"in":"blur",dx:4,dy:4,result:"offsetBlur"}),l.feSpecularLighting({"in":"blur",surfaceScale:5,specularConstant:.75,specularExponent:20,"lighting-color":"#bbbbbb",result:"specOut"},[l.fePointLight({x:-5E3,y:-1E4,z:2E4})]),l.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),l.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,
k2:1,k3:1,k4:0,result:"litPaint"}),l.feMerge("offsetBlur","litPaint")]),t({_gfxName:"largeEmbossDropShadow",x:"-20%",y:"-20%",width:"140%",height:"140%"},[l.feGaussianBlur({"in":"SourceAlpha",stdDeviation:5,result:"blur"}),l.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),l.feSpecularLighting({"in":"blur",surfaceScale:8,specularConstant:1,specularExponent:12,result:"spec"},[l.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),l.feComposite({"in":"spec",in2:"SourceGraphic",operator:"in",result:"specOut"}),
l.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),l.feMerge("offsetBlur","litPaint")]),t({_gfxName:"thinEmbossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[l.feGaussianBlur({"in":"SourceAlpha",stdDeviation:1,result:"blur"}),l.feComponentTransfer({"in":"blur",result:"lessblur"},[l.feFuncA({type:"linear",slope:"0.5"})]),l.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),l.feSpecularLighting({"in":"lessblur",surfaceScale:8,
specularConstant:1,specularExponent:"12",result:"specOut"},[l.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),l.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),l.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0}),l.feMerge("offsetBlur","litPaint")]),t({_gfxName:"embossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[l.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",result:"blur"}),l.feComponentTransfer({"in":"blur",
result:"lessblur"},[l.feFuncA({type:"linear",slope:"0.5"})]),l.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),l.feSpecularLighting({"in":"lessblur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[l.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),l.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),l.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"}),l.feMerge("offsetBlur",
"litPaint")]),t({_gfxName:"largeEmbossDropShadowLight",x:"-20%",y:"-20%",width:"140%",height:"140%"},[l.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"5",result:"blur"}),l.feComponentTransfer({"in":"blur",result:"lessblur"},[l.feFuncA({type:"linear",slope:"0.5"})]),l.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),l.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"spec"},[l.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),l.feComposite({"in":"spec",
in2:"SourceGraphic",operator:"in",result:"specOut"}),l.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"}),l.feMerge("offsetBlur","litPaint")]),t({_gfxName:"fuzzy",x:"-10%",y:"-10%",width:"120%",height:"120%"},[l.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"turb2"}),l.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"20",xChannelSelector:"R",yChannelSelector:"G"})]),t({_gfxName:"veryFuzzy",
x:"-20%",y:"-20%",width:"140%",height:"140%"},[l.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"turb2"}),l.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"35",xChannelSelector:"R",yChannelSelector:"G"})]),t({_gfxName:"melting",x:"-10%",y:"-10%",width:"120%",height:"120%"},[l.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"2",result:"turb"}),l.feDisplacementMap({result:"bended","in":"SourceGraphic",in2:"turb",scale:"25",xChannelSelector:"R",
yChannelSelector:"G"}),l.feGaussianBlur({"in":"bended",stdDeviation:"1",result:"bb"}),l.feComponentTransfer({"in":"bb",result:"BendedSource"},[l.feFuncA({type:"linear",slope:10,intercept:"-1"})]),l.feComponentTransfer({"in":"BendedSource",result:"BendedAlpha"},[l.feFuncR({type:"linear",slope:"0",intercept:"0"}),l.feFuncG({type:"linear",slope:"0",intercept:"0"}),l.feFuncB({type:"linear",slope:"0",intercept:"0"}),l.feFuncA({type:"linear",slope:"1",intercept:"0"})]),l.feGaussianBlur({"in":"BendedAlpha",
stdDeviation:"1",result:"blur"}),l.feSpecularLighting({"in":"blur","lighting-color":"rgb(80%, 80%, 80%)",surfaceScale:"5",specularConstant:"1",specularExponent:"10",result:"specularOut"},[l.fePointLight({x:"-5000",y:"-10000",z:"20000"})]),l.feComposite({"in":"specularOut",in2:"BendedAlpha",operator:"in",result:"specularOut"}),l.feComposite({"in":"BendedSource",in2:"specularOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"})]),t({_gfxName:"impressionist",x:"0%",y:"0%",width:"100%",
height:"100%"},[l.feMorphology({"in":"SourceGraphic",operator:"dilate",radius:"2"})]),t({_gfxName:"holes",x:"0%",y:"0%",width:"100%",height:"100%"},[l.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"texture"}),l.feComponentTransfer({"in":"texture",result:"holes"},[l.feFuncA({type:"discrete",tableValues:"0,1"})]),l.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})]),t({_gfxName:"holesComplement",x:"0%",y:"0%",width:"100%",height:"100%"},[l.feTurbulence({type:"fractalNoise",
baseFrequency:"0.1",numOctaves:"1",result:"texture"}),l.feComponentTransfer({"in":"texture",result:"holes"},[l.feFuncA({type:"discrete",tableValues:"1,0"})]),l.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})])];c.reliefs=[t({_gfxName:"bumpIn",x:"0%",y:"0%",width:"100%",height:"100%"},[l.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),l.feComponentTransfer({"in":"lumalpha",result:"invertedalpha"},[l.feFuncA({type:"table",tableValues:"1,0"})]),l.feDiffuseLighting({"in":"invertedalpha",
"lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},[l.feDistantLight({azimuth:"135",elevation:"60"})]),l.feSpecularLighting({"in":"invertedalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[l.feDistantLight({azimuth:"135",elevation:"30"})]),l.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),t({_gfxName:"bumpOut",x:"0%",y:"0%",width:"100%",height:"100%"},[l.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),
l.feDiffuseLighting({"in":"lumalpha","lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},[l.feDistantLight({azimuth:"135",elevation:"60"})]),l.feSpecularLighting({"in":"lumalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[l.feDistantLight({azimuth:"135",elevation:"30"})]),l.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),t({_gfxName:"thinEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[l.feGaussianBlur({"in":"SourceAlpha",
stdDeviation:"1",result:"blur"}),l.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[l.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),l.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),l.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),t({_gfxName:"emboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[l.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",
result:"blur"}),l.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[l.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),l.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),l.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),t({_gfxName:"largeEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[l.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"5",result:"blur"}),
l.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[l.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),l.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),l.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})])];c.textures=[t({_gfxName:"paper",x:"0%",y:"0%",width:"100%",height:"100%"},[l.feTurbulence({type:"turbulence",baseFrequency:"0.01",numOctaves:"5",result:"texture"}),
l.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[l.feDistantLight({azimuth:"135",elevation:"60"})]),l.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),t({_gfxName:"swirl",x:"0%",y:"0%",width:"100%",height:"100%"},[l.feTurbulence({type:"turbulence",baseFrequency:"0.05",numOctaves:"1",result:"texture"}),l.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[l.feDistantLight({azimuth:"135",elevation:"60"})]),
l.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),t({_gfxName:"swirl2",x:"0%",y:"0%",width:"100%",height:"100%"},[l.feTurbulence({type:"turbulence",baseFrequency:"0.15",numOctaves:"1",result:"texture"}),l.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[l.feDistantLight({azimuth:"135",elevation:"60"})]),l.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),t({_gfxName:"gold",
x:"-5%",y:"-5%",width:"115%",height:"110%"},[l.feTurbulence({baseFrequency:"0.2",numOctaves:"1",type:"turbulence",result:"turb"}),l.feComposite({"in":"SourceGraphic",in2:"turb",operator:"arithmetic",k2:"0.6",k3:"0.4",result:"turb"}),l.feComposite({"in":"turb",in2:"SourceGraphic",operator:"in",result:"bump"}),l.feDiffuseLighting({"in":"turb",surfaceScale:"6.0","lighting-color":"rgb(60%, 50%, 0%)",diffuseConstant:"1.0",result:"diffuse"},[l.feDistantLight({azimuth:"135",elevation:"60"})]),l.feSpecularLighting({"in":"bump",
surfaceScale:"6.0",specularConstant:"1.0",specularExponent:"10.0",result:"specularOut"},[l.feDistantLight({azimuth:"135",elevation:"60"})]),l.feComposite({"in":"specularOut",in2:"SourceGraphic",operator:"in",result:"specularOut"}),l.feComposite({"in":"bump",in2:"diffuse",operator:"arithmetic",k1:"0.7",k2:"0.3",result:"litPaint"}),l.feComposite({"in":"litPaint",in2:"specularOut",operator:"arithmetic",k2:"1.0",k3:"0.7",result:"litPaint"})])];for(var q in c)if(c.hasOwnProperty(q)){l[q]={};for(var m=
c[q],a=0;a<m.length;++a)(function(){var h=m[a];l[q][h._gfxName]=function(n){return f.delegate(h,n)}})()}return l})},"dojox/gfx/svgext":function(){define(["dojo/dom","dojo/_base/array","dojo/_base/window","./_base","./svg"],function(f,B,l,e,c){function u(d,q){var m=q.ownerDocument.createElementNS(c.xmlns.svg,d.tag);q.appendChild(m);for(var a in d)a in t||m.setAttribute(a,d[a]);d.children&&B.forEach(d.children,function(h){u(h,m)});return m}l=e.svgext={};var t={primitives:null,tag:null,children:null};
c.Shape.extend({addRenderingOption:function(d,q){this.rawNode.setAttribute(d,q);return this},setFilter:function(d){if(!d)return this.rawNode.removeAttribute("filter"),this.filter=null,this;this.filter=d;d.id=d.id||e._base._getUniqueId();var q=f.byId(d.id);if(!q){q=this.rawNode.ownerDocument.createElementNS(c.xmlns.svg,"filter");q.setAttribute("filterUnits","userSpaceOnUse");for(var m in d)m in t||q.setAttribute(m,d[m]);B.forEach(d.primitives,function(a){u(a,q)});(m=this._getParentSurface())&&m.defNode.appendChild(q)}this.rawNode.setAttribute("filter",
"url(#"+d.id+")");return this},getFilter:function(){return this.filter}});return l})},"dojox/gfx/_gfxBidiSupport":function(){define("./_base dojo/_base/lang dojo/_base/sniff dojo/dom dojo/_base/html dojo/_base/array ./utils ./shape ./path dojox/string/BidiEngine".split(" "),function(f,B,l,e,c,u,t,d,q,m){function a(r,k){var g=h(k);g&&f.utils.forEach(r,function(b){if(b instanceof f.Surface||b instanceof f.Group)b.textDir=g;b instanceof f.Text&&b.setShape({textDir:g});b instanceof f.TextPath&&b.setText({textDir:g})},
r);return r}function h(r){var k=["ltr","rtl","auto"];return r&&(r=r.toLowerCase(),0>u.indexOf(k,r))?null:r}B.getObject("dojox.gfx._gfxBidiSupport",!0);switch(f.renderer){case "vml":f.isVml=!0;break;case "svg":f.isSvg=!0;f.svg.useSvgWeb&&(f.isSvgWeb=!0);break;case "silverlight":f.isSilverlight=!0;break;case "canvas":case "canvasWithEvents":f.isCanvas=!0}var n=new m;B.extend(f.shape.Surface,{textDir:"",setTextDir:function(r){a(this,r)},getTextDir:function(){return this.textDir}});B.extend(f.Group,{textDir:"",
setTextDir:function(r){a(this,r)},getTextDir:function(){return this.textDir}});B.extend(f.Text,{textDir:"",formatText:function(r,k){if(k&&r&&1<r.length){var g="ltr";if("auto"==k){if(f.isVml)return r;k=n.checkContextual(r)}if(f.isVml)return g=n.checkContextual(r),k!=g?"rtl"==k?n.hasBidiChar(r)?"\u200f\u200f"+r:n.bidiTransform(r,"IRNNN","ILNNN"):"\u200e"+r:r;if(f.isSvgWeb)return"rtl"==k?n.bidiTransform(r,"IRNNN","ILNNN"):r;if(f.isSilverlight)return"rtl"==k?n.bidiTransform(r,"IRNNN","VLYNN"):n.bidiTransform(r,
"ILNNN","VLYNN");if(f.isCanvas)return"rtl"==k?"\u202b"+r+"\u202c":"\u202a"+r+"\u202c";if(f.isSvg)return 4>l("ff")?"rtl"==k?n.bidiTransform(r,"IRYNN","VLNNN"):n.bidiTransform(r,"ILYNN","VLNNN"):"\u200e"+("rtl"==k?"\u202b":"\u202a")+r+"\u202c"}return r},bidiPreprocess:function(r){return r}});B.extend(f.TextPath,{textDir:"",formatText:function(r,k){if(k&&r&&1<r.length){var g="ltr";if("auto"==k){if(f.isVml)return r;k=n.checkContextual(r)}if(f.isVml)return g=n.checkContextual(r),k!=g?"rtl"==k?n.hasBidiChar(r)?
"\u200f\u200f"+r:n.bidiTransform(r,"IRNNN","ILNNN"):"\u200e"+r:r;if(f.isSvgWeb)return"rtl"==k?n.bidiTransform(r,"IRNNN","ILNNN"):r;f.isSvg&&(r=l("opera")||4<=l("ff")?"\u200e"+("rtl"==k?"\u202b":"\u202a")+r+"\u202c":"rtl"==k?n.bidiTransform(r,"IRYNN","VLNNN"):n.bidiTransform(r,"ILYNN","VLNNN"))}return r},bidiPreprocess:function(r){r&&"string"==typeof r&&(this.origText=r,r=this.formatText(r,this.textDir));return r}});t=function(r,k,g,b){var w=r.prototype[k];r.prototype[k]=function(){var x;g&&(x=g.apply(this,
arguments));x=w.call(this,x);b&&(x=b.call(this,x,arguments));return x}};d=function(r){r&&(r.textDir&&(r.textDir=h(r.textDir)),r.text&&r.text instanceof Array&&(r.text=r.text.join(",")));!r||void 0==r.text&&!r.textDir||this.textDir==r.textDir&&r.text==this.origText||(this.origText=void 0!=r.text?r.text:this.origText,r.textDir&&(this.textDir=r.textDir),r.text=this.formatText(this.origText,this.textDir));return this.bidiPreprocess(r)};t(f.Text,"setShape",d,null);t(f.TextPath,"setText",d,null);d=function(r){(r=
B.clone(r))&&this.origText&&(r.text=this.origText);return r};t(f.Text,"getShape",null,d);t(f.TextPath,"getText",null,d);d=function(r,k){var g;k&&k[0]&&(g=h(k[0]));r.setTextDir(g?g:this.textDir);return r};t(f.Surface,"createGroup",null,d);t(f.Group,"createGroup",null,d);d=function(r){if(r){var k=r.textDir?h(r.textDir):this.textDir;k&&(r.textDir=k)}return r};t(f.Surface,"createText",d,null);t(f.Surface,"createTextPath",d,null);t(f.Group,"createText",d,null);t(f.Group,"createTextPath",d,null);f.createSurface=
function(r,k,g,b){k=f[f.renderer].createSurface(r,k,g);b=h(b);if(f.isSvgWeb)return k.textDir=b?b:c.style(e.byId(r),"direction"),k;if(f.isVml||f.isSvg||f.isCanvas)k.textDir=b?b:c.style(k.rawNode,"direction");f.isSilverlight&&(k.textDir=b?b:c.style(k._nodes[1],"direction"));return k};return f})},"dojox/gfx/utils":function(){define("dojo/_base/kernel dojo/_base/lang ./_base dojo/_base/html dojo/_base/array dojo/_base/window dojo/_base/json dojo/_base/Deferred dojo/_base/sniff require dojo/_base/config".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a){var h=l.utils={};B.mixin(h,{forEach:function(n,r,k){k=k||f.global;r.call(k,n);(n instanceof l.Surface||n instanceof l.Group)&&c.forEach(n.children,function(g){h.forEach(g,r,k)})},serialize:function(n){var r={},k;if((k=n instanceof l.Surface)||n instanceof l.Group){if(r.children=c.map(n.children,h.serialize),k)return r.children}else r.shape=n.getShape();n.getTransform&&(k=n.getTransform())&&(r.transform=k);n.getStroke&&(k=n.getStroke())&&(r.stroke=k);n.getFill&&(k=n.getFill())&&
(r.fill=k);n.getFont&&(k=n.getFont())&&(r.font=k);return r},toJson:function(n,r){return t.toJson(h.serialize(n),r)},deserialize:function(n,r){if(r instanceof Array)return c.map(r,B.hitch(null,h.deserialize,n));n="shape"in r?n.createShape(r.shape):n.createGroup();"transform"in r&&n.setTransform(r.transform);"stroke"in r&&n.setStroke(r.stroke);"fill"in r&&n.setFill(r.fill);"font"in r&&n.setFont(r.font);"children"in r&&c.forEach(r.children,B.hitch(null,h.deserialize,n));return n},fromJson:function(n,
r){return h.deserialize(n,t.fromJson(r))},toSvg:function(n){var r=new d;if("svg"===l.renderer)try{var k=h._cleanSvg(h._innerXML(n.rawNode));r.callback(k)}catch(b){r.errback(b)}else{h._initSvgSerializerDeferred||h._initSvgSerializer();var g=h.toJson(n);k=function(){try{var b=n.getDimensions(),w=b.width,x=b.height,z=h._gfxSvgProxy.document.createElement("div");h._gfxSvgProxy.document.body.appendChild(z);u.withDoc(h._gfxSvgProxy.document,function(){e.style(z,"width",w);e.style(z,"height",x)},this);h._gfxSvgProxy[dojox._scopeName].gfx.createSurface(z,
w,x).whenLoaded(null,function(D){try{h._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(D,g);var E=h._cleanSvg(z.innerHTML);D.clear();D.destroy();h._gfxSvgProxy.document.body.removeChild(z);r.callback(E)}catch(C){r.errback(C)}})}catch(D){r.errback(D)}};0<h._initSvgSerializerDeferred.fired?k():h._initSvgSerializerDeferred.addCallback(k)}return r},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){h._initSvgSerializerDeferred.callback(!0)},_initSvgSerializer:function(){if(!h._initSvgSerializerDeferred){h._initSvgSerializerDeferred=
new d;var n=u.doc.createElement("iframe");e.style(n,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});var r;q("ie")?n.onreadystatechange=function(){"complete"==n.contentWindow.document.readyState&&(n.onreadystatechange=function(){},r=setInterval(function(){n.contentWindow[f.scopeMap.dojo[1]._scopeName]&&n.contentWindow[f.scopeMap.dojox[1]._scopeName].gfx&&n.contentWindow[f.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(r),n.contentWindow.parent[f.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=
n.contentWindow,n.contentWindow.parent[f.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},50))}:n.onload=function(){n.onload=function(){};r=setInterval(function(){n.contentWindow[f.scopeMap.dojo[1]._scopeName]&&n.contentWindow[f.scopeMap.dojox[1]._scopeName].gfx&&n.contentWindow[f.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(r),n.contentWindow.parent[f.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=n.contentWindow,n.contentWindow.parent[f.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},
50)};var k=a.dojoxGfxSvgProxyFrameUrl||m.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html");n.setAttribute("src",k.toString());u.body().appendChild(n)}},_innerXML:function(n){return n.innerXML?n.innerXML:n.xml?n.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(n):null},_cleanSvg:function(n){n&&(-1==n.indexOf('xmlns\x3d"http://www.w3.org/2000/svg"')&&(n=n.substring(4,n.length),n='\x3csvg xmlns\x3d"http://www.w3.org/2000/svg"'+n),-1==n.indexOf('xmlns:xlink\x3d"http://www.w3.org/1999/xlink"')&&
(n=n.substring(4,n.length),n='\x3csvg xmlns:xlink\x3d"http://www.w3.org/1999/xlink"'+n),-1===n.indexOf("xlink:href")&&(n=n.replace(/href\s*=/g,"xlink:href\x3d")),n=n.replace(/<img\b([^>]*)>/gi,"\x3cimage $1 /\x3e"),n=n.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,""),n=n.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,""),n=n.replace(/[=]([^"']+?)(\s|>)/g,'\x3d"$1"$2'),n=n.replace(/\bstroke-opacity\w*\s*=\s*(['"])undefined\1/g,""));return n}});return h})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang",
"dojo/_base/declare","dojo/Stateful"],function(f,B,l){function e(pa,Z,ja,ta,xa){var Ea=pa;void 0===Z&&(Z=xa.defInFormat);void 0===ja&&(ja=xa.defOutFormat);void 0===ta&&(ta=xa.defSwap);if(Z!==ja){var Ja=Z.substring(0,1);var La=Z.substring(1,4);var Ya=ja.substring(0,1),Ua=ja.substring(1,4);"C"===La.charAt(0)&&(La=c(Ea),La="ltr"===La||"rtl"===La?La.toUpperCase():"L"===Z.charAt(2)?"LTR":"RTL",Z=Ja+La);"C"===Ua.charAt(0)&&(La=c(Ea),"rtl"===La?Ua="RTL":"ltr"===La?(Ea=Ea.split(""),Ea.reverse(),La=c(Ea.join("")),
Ua=La.toUpperCase()):Ua="L"===ja.charAt(2)?"LTR":"RTL",ja=Ya+Ua)}if(Z===ja)return pa;Ya=Z.substring(0,1);Ea=Z.substring(1,4);Ja=ja.substring(0,1);Ua=ja.substring(1,4);xa.inFormat=Z;xa.outFormat=ja;xa.swap=ta;if("L"===Ya&&"VLTR"===ja){if("LTR"===Ea)return xa.dir=y,u(pa,xa);if("RTL"===Ea)return xa.dir=v,u(pa,xa)}if("V"===Ya&&"V"===Ja)return xa.dir="RTL"===Ea?v:y,d(pa,xa);if("L"===Ya&&"VRTL"===ja)return xa.dir="LTR"===Ea?y:v,pa=u(pa,xa),d(pa);if("VLTR"===Z&&"LLTR"===ja)return xa.dir=y,u(pa,xa);if("V"===
Ya&&"L"===Ja&&Ea!==Ua)return pa=d(pa),"RTL"===Ea?e(pa,"LLTR","VLTR",ta,xa):e(pa,"LRTL","VRTL",ta,xa);if("VRTL"===Z&&"LRTL"===ja)return e(pa,"LRTL","VRTL",ta,xa);if("L"===Ya&&"L"===Ja)return Z=xa.swap,xa.swap=Z.substr(0,1)+"N","RTL"===Ea?(xa.dir=v,pa=u(pa,xa),xa.swap="N"+Z.substr(1,2),xa.dir=y,pa=u(pa,xa)):(xa.dir=y,pa=u(pa,xa),xa.swap="N"+Z.substr(1,2),pa=e(pa,"VLTR","LRTL",xa.swap,xa)),pa}function c(pa){return(pa=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(pa))?
"z">=pa[0]?"ltr":"rtl":""}function u(pa,Z){pa=pa.split("");var ja=[];t(pa,ja,Z);if(0!==Z.hiLevel&&Z.swap.substr(0,1)!==Z.swap.substr(1,2))for(var ta=0;ta<pa.length;ta++)if(1===ja[ta]){var xa=ta;b:{var Ea=void 0;for(var Ja=pa[ta],La=0,Ya=F.length-1;La<=Ya;)if(Ea=Math.floor((La+Ya)/2),Ja<F[Ea][0])Ya=Ea-1;else if(Ja>F[Ea][0])La=Ea+1;else{Ea=F[Ea][1];break b}Ea=Ja}pa[xa]=Ea}a(2,pa,ja,Z);a(1,pa,ja,Z);z=ja;return pa.join("")}function t(pa,Z,ja){var ta=pa.length,xa=ja.dir?N:T,Ea=null,Ja=null,La=null;Ea=
0;Ja=Ja=null;var Ya=-1,Ua=Ja=null,Ta=[],ab=[];ja.hiLevel=ja.dir;ja.lastArabic=!1;ja.hasUbatAl=!1;ja.hasUbatB=!1;ja.hasUbatS=!1;for(Ja=0;Ja<ta;Ja++){Ua=Ja;La=pa[Ja].charCodeAt(0);var fb=X[La>>8];Ta[Ua]=fb<wa?fb:oa[fb-wa][La&255]}for(Ua=0;Ua<ta;Ua++){ab[Ua]=Ja=h(pa,Ta,ab,Ua,ja);Ea=xa[Ea][Ja];Ja=Ea&240;Ea&=15;Z[Ua]=La=xa[Ea][E];if(0<Ja){if(16===Ja)for(Ja=Ya;Ja<Ua;Ja++)Z[Ja]=1;Ya=-1}if(Ja=xa[Ea][C])-1===Ya&&(Ya=Ua);else if(-1<Ya){for(Ja=Ya;Ja<Ua;Ja++)Z[Ja]=La;Ya=-1}Ta[Ua]===ra&&(Z[Ua]=0);ja.hiLevel|=
La}if(ja.hasUbatS)for(pa=0;pa<ta;pa++)if(Ta[pa]===za)for(Z[pa]=ja.dir,xa=pa-1;0<=xa;xa--)if(Ta[xa]===va)Z[xa]=ja.dir;else break}function d(pa,Z){pa=pa.split("");if(Z){var ja=[];t(pa,ja,Z);z=ja}pa.reverse();w.reverse();return pa.join("")}function q(pa){for(var Z=0;Z<aa.length;Z++)if(pa>=aa[Z]&&pa<=la[Z])return!0;return!1}function m(pa,Z,ja,ta){for(;Z*ja<ta&&r(pa[Z]);)Z+=ja;return Z*ja<ta&&q(pa[Z])?!0:!1}function a(pa,Z,ja,ta){if(!(ta.hiLevel<pa))if(1!==pa||ta.dir!==v||ta.hasUbatB){ta=Z.length;for(var xa=
0,Ea,Ja,La;xa<ta;){if(ja[xa]>=pa){for(Ea=xa+1;Ea<ta&&ja[Ea]>=pa;)Ea++;for(Ja=Ea-1;xa<Ja;xa++,Ja--)La=Z[xa],Z[xa]=Z[Ja],Z[Ja]=La,La=w[xa],w[xa]=w[Ja],w[Ja]=La;xa=Ea}xa++}}else Z.reverse(),w.reverse()}function h(pa,Z,ja,ta,xa){return{UBAT_L:function(){xa.lastArabic=!1;return K},UBAT_R:function(){xa.lastArabic=!1;return W},UBAT_ON:function(){return ha},UBAT_AN:function(){return fa},UBAT_EN:function(){return xa.lastArabic?fa:da},UBAT_AL:function(){xa.lastArabic=!0;xa.hasUbatAl=!0;return W},UBAT_WS:function(){return ha},
UBAT_CS:function(){var Ea,Ja;if(1>ta||ta+1>=Z.length||(Ea=ja[ta-1])!==da&&Ea!==fa||(Ja=Z[ta+1])!==da&&Ja!==fa)return ha;xa.lastArabic&&(Ja=fa);return Ja===Ea?Ja:ha},UBAT_ES:function(){return(0<ta?ja[ta-1]:ra)===da&&ta+1<Z.length&&Z[ta+1]===da?da:ha},UBAT_ET:function(){if(0<ta&&ja[ta-1]===da)return da;if(xa.lastArabic)return ha;for(var Ea=ta+1,Ja=Z.length;Ea<Ja&&Z[Ea]===Ga;)Ea++;return Ea<Ja&&Z[Ea]===da?da:ha},UBAT_NSM:function(){if("VLTR"===xa.inFormat){for(var Ea=Z.length,Ja=ta+1;Ja<Ea&&Z[Ja]===
ba;)Ja++;if(Ja<Ea&&(Ea=pa[ta],Ja=Z[Ja],(1425<=Ea&&2303>=Ea||64286===Ea)&&(Ja===W||Ja===Da)))return W}return 1>ta||Z[ta-1]===ra?ha:ja[ta-1]},UBAT_B:function(){xa.lastArabic=!0;xa.hasUbatB=!0;return xa.dir},UBAT_S:function(){xa.hasUbatS=!0;return ha},UBAT_LRE:function(){xa.lastArabic=!1;return ha},UBAT_RLE:function(){xa.lastArabic=!1;return ha},UBAT_LRO:function(){xa.lastArabic=!1;return ha},UBAT_RLO:function(){xa.lastArabic=!1;return ha},UBAT_PDF:function(){xa.lastArabic=!1;return ha},UBAT_BN:function(){return ha}}[ia[Z[ta]]]()}
function n(pa,Z){for(var ja=0;ja<Q.length;ja++)if(pa===Q[ja])return Z[ja];return pa}function r(pa){return"\u064b"<=pa&&"\u0655">=pa?!0:!1}function k(pa){if("L"===pa)return"LTR";if("R"===pa)return"RTL";if("C"===pa)return"CLR";if("D"===pa)return"CRL"}function g(pa,Z){for(var ja=0;ja<H.length;ja++)if(pa===H[ja])return Z[ja];return pa}function b(pa,Z,ja,ta){for(var xa=0;xa<pa.length;xa++)if(pa[xa]>Z||!ja&&pa[xa]===Z)pa[xa]+=ta}f.getObject("string",!0,dojox);f=B("dojox.string.BidiEngine",l,{inputFormat:"ILYNN",
outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(pa,Z,ja){this.sourceToTarget=[];this.targetToSource=[];if(!pa)return"";var ta=this.sourceToTarget,xa=this.targetToSource,Ea=pa.length;w=[];z=[];for(var Ja=0;Ja<Ea;Ja++)ta[Ja]=Ja,xa[Ja]=Ja,w[Ja]=Ja;if(!this.checkParameters(Z,ja))return pa;Z=this.inputFormat;ja=this.outputFormat;ta=pa;ta=D;Ja=k(Z.charAt(1));xa=k(ja.charAt(1));var La="I"===Z.charAt(0)?"L":Z.charAt(0);Ea="I"===ja.charAt(0)?"L":ja.charAt(0);Ja=La+
Ja;xa=Ea+xa;Ea=Z.charAt(2)+ja.charAt(2);ta.defInFormat=Ja;ta.defOutFormat=xa;ta.defSwap=Ea;pa=e(pa,Ja,xa,Ea,ta);ta=!1;if("R"===ja.charAt(1))ta=!0;else if("C"===ja.charAt(1)||"D"===ja.charAt(1))ta=this.checkContextual(pa);xa=this.sourceToTarget=w;Ea=Array(xa.length);for(Ja=0;Ja<xa.length;Ja++)Ea[xa[Ja]]=Ja;x=this.targetToSource=Ea;if(Z.charAt(3)===ja.charAt(3))ta=pa;else if("S"===ja.charAt(3))if(Z=ta,ja=!0,0===pa.length)ta=void 0;else{void 0===Z&&(Z=!0);void 0===ja&&(ja=!0);pa=String(pa);pa=pa.split("");
var Ya=0;xa=1;ta=pa.length;Z||(Ya=pa.length-1,xa=-1,ta=1);Ea=ta;Ja=ja;var Ua=0;ta=[];for(La=0;Ya*xa<Ea;Ya+=xa)if(q(pa[Ya])||r(pa[Ya])){var Ta;if(Ta="\u0644"===pa[Ya])b:{for(var ab=pa,fb=Ya+xa,kb=xa,qb=Ea;fb*kb<qb&&r(ab[fb]);)fb+=kb;Ta=" ";if(fb*kb<qb)for(Ta=ab[fb],ab=0;ab<H.length;ab++)if(H[ab]===Ta){Ta=!0;break b}Ta=!1}if(Ta){pa[Ya]=0===Ua?g(pa[Ya+xa],L):g(pa[Ya+xa],M);Ya+=xa;Ua=pa;Ta=Ya;ab=xa;for(fb=Ea;Ta*ab<fb&&r(Ua[Ta]);)Ta+=ab;Ta*ab<fb&&(Ua[Ta]=" ");Ja&&(ta[La]=Ya,La++);Ua=0}else{Ta=pa[Ya];if(1===
Ua){ab=Ya;if(m(pa,Ya+xa,xa,Ea))b:for(fb=pa[Ya],kb=0;kb<Q.length;kb++){if(fb===Q[kb]){fb=P[kb];break b}}else fb=n(pa[Ya],I);pa[ab]=fb}else!0===m(pa,Ya+xa,xa,Ea)?pa[Ya]=n(pa[Ya],J):pa[Ya]=n(pa[Ya],S);r(Ta)||(Ua=1);b:{for(ab=0;ab<U.length;ab++)if(U[ab]===Ta){Ta=!0;break b}Ta=!1}!0===Ta&&(Ua=0)}}else Ua=0;xa="";for(Ea=0;Ea<pa.length;Ea++){if(Ja=ja){b:{for(Ja=0;Ja<ta.length;Ja++)if(ta[Ja]===Ea)break b;Ja=-1}Ja=-1<Ja}Ja?(b(x,Ea,!Z,-1),w.splice(Ea,1)):xa+=pa[Ea]}ta=xa}else if(Z=pa,ja=ta,pa=!0,0===Z.length)ta=
void 0;else for(void 0===pa&&(pa=!0),void 0===ja&&(ja=!0),Z=String(Z),ta="",xa=[],xa=Z.split(""),Ea=0;Ea<Z.length;Ea++)Ja=!1,"\ufe70"<=xa[Ea]&&"\ufeff">xa[Ea]?(La=Z.charCodeAt(Ea),"\ufef5"<=xa[Ea]&&"\ufefc">=xa[Ea]?(ja?(0<Ea&&pa&&" "===xa[Ea-1]?ta=ta.substring(0,ta.length-1)+"\u0644":(ta+="\u0644",Ja=!0),ta+=H[(La-65269)/2]):(ta+=H[(La-65269)/2],ta+="\u0644",Ea+1<Z.length&&pa&&" "===xa[Ea+1]?Ea++:Ja=!0),Ja&&(b(x,Ea,!0,1),w.splice(Ea,0,w[Ea]))):ta+=Y[La-65136]):ta+=xa[Ea];this.sourceToTarget=w;this.targetToSource=
x;this.levels=z;return ta},_inputFormatSetter:function(pa){if(!A.test(pa))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=pa},_outputFormatSetter:function(pa){if(!A.test(pa))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=pa},checkParameters:function(pa,Z){pa?this.set("inputFormat",pa):pa=this.inputFormat;Z?this.set("outputFormat",Z):Z=this.outputFormat;return pa===Z?!1:!0},checkContextual:function(pa){pa=c(pa);if("ltr"!==
pa&&"rtl"!==pa){try{pa=document.dir.toLowerCase()}catch(Z){}"ltr"!==pa&&"rtl"!==pa&&(pa="ltr")}return pa},hasBidiChar:function(pa){return G.test(pa)}});var w=[],x=[],z=[],D={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},E=5,C=6,y=0,v=1,A=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,G=/[\u0591-\u06ff\ufb1d-\ufefc]/,F=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]",
"["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],H=["\u0622","\u0623","\u0625","\u0627"],L=["\ufef5","\ufef7","\ufef9","\ufefb"],
M=["\ufef6","\ufef8","\ufefa","\ufefc"],Q="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),S="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),
I="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),P="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),
J="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),U="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),Y="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
aa=["\u0621","\u0641"],la=["\u063a","\u064a"],T=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],N=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],K=0,W=1,da=2,fa=3,ha=4,ra=5,za=6,Da=7,va=8,Ga=11,ba=12,ia="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),wa=100;B=K;l=W;var Aa=da,Fa=fa,O=ha,ya=ra,Ha=za,ea=Da,Oa=va,
Na=Ga,Ca=ba,X=[wa+0,B,B,B,B,wa+1,wa+2,wa+3,l,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,wa+4,O,O,O,B,O,B,O,B,O,O,O,B,B,O,O,B,B,B,B,B,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,B,B,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,B,B,O,O,B,B,O,O,B,B,O,O,O,O,O,O,O,O,O,O,O,
O,O,O,O,O,O,O,O,O,O,O,O,B,B,B,wa+5,ea,ea,wa+6,wa+7],oa=[[18,18,18,18,18,18,18,18,18,Ha,ya,Ha,Oa,ya,18,18,18,18,18,18,18,18,18,18,18,18,18,18,ya,ya,ya,Ha,Oa,O,O,Na,Na,Na,O,O,O,O,O,10,9,10,9,9,Aa,Aa,Aa,Aa,Aa,Aa,Aa,Aa,Aa,Aa,9,O,O,O,O,O,O,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O,O,O,O,O,O,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O,O,O,O,18,18,18,18,18,18,ya,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,O,Na,Na,Na,Na,O,O,O,O,B,O,O,18,O,O,Na,Na,
Aa,Aa,O,B,O,O,O,Aa,B,O,O,O,O,O,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O,B,B,B,B,B,B,B,B],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O,O,O,O,O,O,O,O,O,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O,O,B,B,B,B,B,B,B,O,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O,B,O,O,O,O,O,O,O,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,
Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,l,Ca,l,Ca,Ca,l,Ca,Ca,l,Ca,O,O,O,O,O,O,O,O,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,O,O,O,O,O,l,l,l,l,l,O,O,O,O,O,O,O,O,O,O,O],[Fa,Fa,Fa,Fa,O,O,O,O,ea,Na,Na,ea,9,ea,O,O,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,ea,O,O,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,
Fa,Fa,Fa,Fa,Fa,Fa,Fa,Fa,Fa,Fa,Na,Fa,Fa,ea,ea,ea,Ca,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Fa,O,Ca,Ca,Ca,Ca,Ca,Ca,ea,ea,Ca,Ca,O,Ca,Ca,Ca,Ca,ea,ea,Aa,Aa,Aa,Aa,Aa,Aa,Aa,Aa,Aa,Aa,ea,ea,ea,ea,ea,ea],[ea,ea,ea,ea,ea,ea,ea,
ea,ea,ea,ea,ea,ea,ea,O,ea,ea,Ca,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,O,O,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,
Ca,Ca,ea,O,O,O,O,O,O,O,O,O,O,O,O,O,O,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,l,l,O,O,O,O,l,O,O,O,O,O],[Oa,Oa,Oa,Oa,Oa,Oa,Oa,Oa,Oa,Oa,Oa,18,18,18,B,l,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,Oa,ya,13,14,15,16,17,9,Na,Na,Na,Na,Na,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,9,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,Oa,18,18,18,18,18,O,O,O,O,O,18,18,18,18,18,18,Aa,B,O,O,Aa,Aa,Aa,Aa,Aa,Aa,10,10,O,O,O,B,Aa,Aa,Aa,Aa,Aa,Aa,Aa,Aa,
Aa,Aa,10,10,O,O,O,O,B,B,B,B,B,B,B,B,B,B,B,B,B,O,O,O,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O],[B,B,B,B,B,B,B,O,O,O,O,O,O,O,O,O,O,O,O,B,B,B,B,B,O,O,O,O,O,l,Ca,l,l,l,l,l,l,l,l,l,l,10,l,l,l,l,l,l,l,l,l,l,l,l,l,O,l,l,l,l,l,O,l,O,l,l,O,l,l,O,l,l,l,l,l,l,l,l,l,l,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,
ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea],[Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,
Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,Ca,Ca,Ca,Ca,Ca,Ca,Ca,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,9,O,9,O,O,9,O,O,O,O,O,O,O,O,O,Na,O,O,10,10,O,O,O,O,O,Na,Na,O,O,O,O,O,ea,ea,ea,ea,ea,O,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,
ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,O,O,18],[O,O,O,Na,Na,Na,O,O,O,O,O,10,9,10,9,9,Aa,Aa,Aa,Aa,Aa,Aa,Aa,Aa,Aa,Aa,9,O,O,O,O,O,O,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O,O,O,O,O,O,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O,O,O,O,O,O,O,O,O,O,O,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,
B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O,O,O,B,B,B,B,B,B,O,O,B,B,B,B,B,B,O,O,B,B,B,B,B,B,O,O,B,B,B,O,O,O,Na,Na,O,O,O,Na,Na,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O]];return f})},"esri/symbols/MarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(f,B,l,e,c,u){f=f(u,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,size:12,constructor:function(t){t&&B.isObject(t)&&(this.size="auto"===
this.size?this.size:e.pt2px(this.size),this.xoffset=e.pt2px(this.xoffset),this.yoffset=e.pt2px(this.yoffset),this.angle&&(this.angle*=-1))},setAngle:function(t){this.angle=t;return this},setSize:function(t){this.size=t;return this},setOffset:function(t,d){this.xoffset=t;this.yoffset=d;return this},toJson:function(){var t=e.px2pt(this.size);t=isNaN(t)?void 0:t;var d=e.px2pt(this.xoffset);d=isNaN(d)?void 0:d;var q=e.px2pt(this.yoffset);q=isNaN(q)?void 0:q;return B.mixin(this.inherited("toJson",arguments),
{size:"auto"===this.size?this.size:t,angle:this.angle&&-1*this.angle,xoffset:d,yoffset:q})}});B.setObject("symbol.MarkerSymbol",f,c);return f})},"esri/symbols/Symbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "),function(f,B,l,e,c,u){f=f(null,{declaredClass:"esri.symbol.Symbol",color:new u([0,0,0,1]),type:null,constructor:function(t){t&&B.isObject(t)&&(B.mixin(this,t),this.color&&c.isDefined(this.color[0])&&(this.color=u.toDojoColor(this.color)),
(t=this.type)&&0===t.indexOf("esri")&&(this.type={esriSMS:"simplemarkersymbol",esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol",esriSHD:"shieldlabelsymbol"}[t]))},setColor:function(t){this.color=t;return this},toJson:function(){return{color:u.toJsonColor(this.color)}}});B.setObject("symbol.Symbol",f,e);return f})},"esri/Color":function(){define(["dojo/_base/declare","dojo/_base/Color",
"dojo/has","./kernel"],function(f,B,l,e){var c=f([B],{declaredClass:"esri.Color"});c.toJsonColor=function(u){return u&&[u.r,u.g,u.b,1<u.a?u.a:Math.round(255*u.a)]};c.toDojoColor=function(u){return u&&new c([u[0],u[1],u[2],u[3]/255])};l="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(f=0;f<l.length;f++)c[l[f]]=B[l[f]];return e.Color=c})},"esri/symbols/SimpleLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "),
function(f,B,l,e,c,u,t,d){var q={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"},m={color:[0,0,0,1],style:q.STYLE_SOLID,width:1};f=f(d,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",marker:null,_styles:{solid:"esriSLSSolid",
dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(a,h,n){a?B.isString(a)?(this.style=a,h&&(this.color=h),n&&(this.width=n)):(this.style=t.valueOf(this._styles,a.style)||q.STYLE_SOLID,this.marker=
a.marker):(B.mixin(this,m),this.color=new l(this.color),this.width=c.pt2px(this.width))},setStyle:function(a){this.style=a;return this},setMarker:function(a){this.marker=a},getStroke:function(){return this.style===q.STYLE_NULL||0===this.width?null:{color:this.color,style:this.style,width:this.width}},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){return t.fixJson(B.mixin(this.inherited("toJson",
arguments),{type:"esriSLS",style:this._styles[this.style],marker:this.marker?B.clone(this.marker):void 0}))}});B.mixin(f,q);f.defaultProps=m;B.setObject("symbol.SimpleLineSymbol",f,u);u.symbol.defaultSimpleLineSymbol=m;return f})},"esri/symbols/LineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(f,B,l,e,c,u){f=f(u,{declaredClass:"esri.symbol.LineSymbol",constructor:function(t){B.isObject(t)?this.width=e.pt2px(this.width):
this.width=12},setWidth:function(t){this.width=t;return this},toJson:function(){var t=e.px2pt(this.width);t=isNaN(t)?void 0:t;return B.mixin(this.inherited("toJson",arguments),{width:t})}});B.setObject("symbol.LineSymbol",f,c);return f})},"esri/symbols/PictureMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "),function(f,B,l,e,c,u,t,d){var q={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};f=
f(d,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(m,a,h){m?B.isString(m)?(this.url=m,a&&(this.width=a),h&&(this.height=h)):(this.width=e.pt2px(null==m.width?q.width:m.width),this.height=e.pt2px(null==m.height?q.height:m.height),a=m.imageData,9>l("ie")||!a||(h=this.url,this.url="data:"+(m.contentType||"image")+";base64,"+a,this.imageData=h)):(B.mixin(this,q),this.width=e.pt2px(this.width),this.height=e.pt2px(this.height))},getStroke:function(){return null},
getFill:function(){return null},setWidth:function(m){this.width=m;return this},setHeight:function(m){this.height=m;return this},setUrl:function(m){m!==this.url&&(delete this.imageData,delete this.contentType);this.url=m;return this},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var m=this.url,a=this.imageData;if(0===m.indexOf("data:")){var h=
m;m=a;a=h.indexOf(";base64,")+8;a=h.substr(a)}!B.isString(m)||0!==m.indexOf("/")&&0!==m.indexOf("//")&&0!==m.indexOf("./")&&0!==m.indexOf("../")||(m=t.getAbsoluteUrl(m));h=e.px2pt(this.width);h=isNaN(h)?void 0:h;var n=e.px2pt(this.height);n=isNaN(n)?void 0:n;m=u.fixJson(B.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:m,imageData:a,contentType:this.contentType,width:h,height:n}));delete m.color;delete m.size;m.imageData||delete m.imageData;return m}});f.defaultProps=q;B.setObject("symbol.PictureMarkerSymbol",
f,c);c.symbol.defaultPictureMarkerSymbol=q;return f})},"esri/symbols/CartographicLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "),function(f,B,l,e,c,u,t,d){var q={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",
STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},m={color:[0,0,0,1],style:q.STYLE_SOLID,width:1,cap:q.CAP_BUTT,join:q.JOIN_MITER,miterLimit:10};f=f(d,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",
bevel:"esriLJSBevel"},constructor:function(a,h,n,r,k,g){a?B.isString(a)?(this.style=a,h&&(this.color=h),void 0!==n&&(this.width=n),r&&(this.cap=r),k&&(this.join=k),void 0!==g&&(this.miterLimit=g)):(this.cap=t.valueOf(this._caps,a.cap),this.join=t.valueOf(this._joins,a.join),this.width=c.pt2px(a.width),this.miterLimit=c.pt2px(a.miterLimit)):(B.mixin(this,m),this.color=new l(this.color),this.width=c.pt2px(this.width),this.miterLimit=c.pt2px(this.miterLimit))},setCap:function(a){this.cap=a;return this},
setJoin:function(a){this.join=a;return this},setMiterLimit:function(a){this.miterLimit=a;return this},getStroke:function(){return B.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===q.JOIN_MITER?this.miterLimit:this.join})},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){var a=c.px2pt(this.miterLimit);a=isNaN(a)?void 0:a;return t.fixJson(B.mixin(this.inherited("toJson",
arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:a}))}});B.mixin(f,q);f.defaultProps=m;B.setObject("symbol.CartographicLineSymbol",f,u);u.symbol.defaultCartographicLineSymbol=m;return f})},"esri/symbols/SimpleFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "),function(f,B,l,e,c,u,t,d,q,m){var a={STYLE_SOLID:"solid",STYLE_NULL:"none",
STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"},h={style:a.STYLE_SOLID,color:[0,0,0,.25]};f=f(d,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",
vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(n,r,k){n?B.isString(n)?(this.style=n,void 0!==r&&(this.outline=r),void 0!==k&&(this.color=k)):this.style=t.valueOf(this._styles,n.style):(B.mixin(this,h),this.outline=new q(this.outline),this.color=new l(this.color))},setStyle:function(n){this.style=n;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},
getFill:function(){var n=this.style;return n===a.STYLE_NULL?null:n===a.STYLE_SOLID?this.color:B.mixin({},c.defaultPattern,{src:m.toUrl("../images/symbol/sfs/"+n+".png"),width:10,height:10})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){return t.fixJson(B.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}))}});B.mixin(f,a);f.defaultProps=
h;B.setObject("symbol.SimpleFillSymbol",f,u);u.symbol.defaultSimpleFillSymbol=h;return f})},"esri/symbols/FillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "),function(f,B,l,e,c,u){f=f(c,{declaredClass:"esri.symbol.FillSymbol",constructor:function(t){t&&B.isObject(t)&&t.outline&&(this.outline=new u(t.outline))},setOutline:function(t){this.outline=t;return this},toJson:function(){var t=this.inherited("toJson",arguments);this.outline&&
(t.outline=this.outline.toJson());return t}});B.setObject("symbol.FillSymbol",f,e);return f})},"esri/symbols/PictureFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "),function(f,B,l,e,c,u,t,d){var q={xoffset:0,yoffset:0,width:12,height:12};f=f(d,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(m,a,h,n){m?B.isString(m)?(this.url=
m,void 0!==a&&(this.outline=a),void 0!==h&&(this.width=h),void 0!==n&&(this.height=n)):(this.xoffset=e.pt2px(m.xoffset),this.yoffset=e.pt2px(m.yoffset),this.width=e.pt2px(m.width),this.height=e.pt2px(m.height),a=m.imageData,9>l("ie")||!a||(h=this.url,this.url="data:"+(m.contentType||"image")+";base64,"+a,this.imageData=h)):(B.mixin(this,q),this.width=e.pt2px(this.width),this.height=e.pt2px(this.height))},setWidth:function(m){this.width=m;return this},setHeight:function(m){this.height=m;return this},
setOffset:function(m,a){this.xoffset=m;this.yoffset=a;return this},setUrl:function(m){m!==this.url&&(delete this.imageData,delete this.contentType);this.url=m;return this},setXScale:function(m){this.xscale=m;return this},setYScale:function(m){this.yscale=m;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return B.mixin({},e.defaultPattern,{src:this.url,width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset})},getShapeDescriptors:function(){return{defaultShape:{type:"path",
path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var m=this.url,a=this.imageData;if(0===m.indexOf("data:")){var h=m;m=a;a=h.indexOf(";base64,")+8;a=h.substr(a)}!B.isString(m)||0!==m.indexOf("/")&&0!==m.indexOf("//")&&0!==m.indexOf("./")&&0!==m.indexOf("../")||(m=t.getAbsoluteUrl(m));h=e.px2pt(this.width);h=isNaN(h)?void 0:h;var n=e.px2pt(this.height);n=isNaN(n)?void 0:n;var r=e.px2pt(this.xoffset);r=isNaN(r)?void 0:r;var k=e.px2pt(this.yoffset);
k=isNaN(k)?void 0:k;m=u.fixJson(B.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:m,imageData:a,contentType:this.contentType,width:h,height:n,xoffset:r,yoffset:k,xscale:this.xscale,yscale:this.yscale}));m.imageData||delete m.imageData;return m}});f.defaultProps=q;B.setObject("symbol.PictureFillSymbol",f,c);c.symbol.defaultPictureFillSymbol=q;return f})},"esri/symbols/TextSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "),
function(f,B,l,e,c,u,t,d,q){var m={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:e.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},a={start:"left",middle:"center",end:"right"},h={left:"start",center:"middle",right:"end",justify:"start"},n={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},r=document.createElement("canvas");f=f(d,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(k,
g,b){B.mixin(this,m);this.font=new q(this.font);this.color=new t(this.color);k&&(B.isObject(k)?(B.mixin(this,k),this.color&&u.isDefined(this.color[0])&&(this.color=t.toDojoColor(this.color)),this.type="textsymbol",this.font=new q(this.font),this.xoffset=e.pt2px(this.xoffset),this.yoffset=e.pt2px(this.yoffset),this.angle&&(this.angle*=-1),this.haloSize&&(this.haloSize=e.pt2px(this.haloSize)),this.haloColor&&(this.haloColor=t.toDojoColor(this.haloColor))):(this.text=k,g&&(this.font=g),b&&(this.color=
b)));this.setAlign(this.align||this.getSVGAlign())},setFont:function(k){this.font=k;return this},setSize:function(k){this.font.size=k;return this},setAngle:function(k){this.angle=k;return this},setOffset:function(k,g){this.xoffset=k;this.yoffset=g;return this},setHaloColor:function(k){this.haloColor=k;return this},setHaloSize:function(k){this.haloSize=k;return this},setAlign:function(k){this.align=k;this.setHorizontalAlignment(k&&a[k.toLowerCase()]||"center");return this},setHorizontalAlignment:function(k){this.horizontalAlignment=
k;return this},getSVGAlign:function(){var k=this.horizontalAlignment;return k=k&&h[k.toLowerCase()]||"middle"},setVerticalAlignment:function(k){this.verticalAlignment=k;return this},getSVGBaseline:function(){var k=this.verticalAlignment;return k&&n[k.toLowerCase()]||"alphabetic"},getSVGBaselineShift:function(){return"bottom"===this.verticalAlignment?"super":null},setDecoration:function(k){this.decoration=k;this.font||this.setFont(new q);this.font.setDecoration(k);return this},setRotated:function(k){this.rotated=
k;return this},setKerning:function(k){this.kerning=k;return this},setText:function(k){this.text=k;return this},getStroke:function(){return null},getFill:function(){return this.color},getWidth:function(){var k=r&&r.getContext&&r.getContext("2d");if(k){var g=this.font;k.font=(g.style?g.style:e.defaultFont.style)+" "+(g.weight?g.weight:e.defaultFont.weight)+" "+(g.size?g.size:e.defaultFont.size)+"px "+(g.family?g.family:e.defaultFont.family);return k.measureText(this.text).width}k=this.getHeight();g=
0;var b;for(b=0;b<this.text.length;b++){var w=this.text.charAt(b);g=w==w.toUpperCase()?g+.7*k:g+.5*k}return g},getHeight:function(){return e.normalizedLength(this.font.size)},getShapeDescriptors:function(){var k=this.font;if(k){var g={};k.size&&(g.size=k.size);k.style&&(g.style=k.style);k.variant&&(g.variant=k.variant);k.decoration&&(g.decoration=k.decoration);k.weight&&(g.weight=k.weight);k.family&&(g.family=k.family)}return{defaultShape:{type:"text",text:this.text,x:0,y:this.getHeight()/4,align:"middle",
decoration:this.decoration||k&&k.decoration,rotated:this.rotated,kerning:this.kerning},font:g,fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var k=e.px2pt(this.xoffset),g=e.px2pt(this.yoffset),b=e.px2pt(this.haloSize);k=isNaN(k)?void 0:k;g=isNaN(g)?void 0:g;b=isNaN(b)?void 0:b;return u.fixJson(B.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:b,haloColor:this.haloColor&&
t.toJsonColor(this.haloColor),verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:k,yoffset:g,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}))}});B.mixin(f,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});f.defaultProps=
m;B.setObject("symbol.TextSymbol",f,c);c.symbol.defaultTextSymbol=m;return f})},"esri/symbols/Font":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "),function(f,B,l,e,c,u){f=f(null,{declaredClass:"esri.symbol.Font",constructor:function(t,d,q,m,a){t?B.isObject(t)?B.mixin(this,t):(this.size=t,parseFloat(this.size)==this.size&&(this.size+="px"),void 0!==d&&(this.style=d),void 0!==q&&(this.variant=q),void 0!==m&&(this.weight=m),void 0!==a&&
(this.family=a)):B.mixin(this,e.defaultFont);parseFloat(this.size)==this.size&&(this.size+="pt");9>l("ie")&&this.size&&B.isString(this.size)&&-1<this.size.indexOf("em")&&(this.size=e.pt2px(12*parseFloat(this.size))+"px");this.size=this._convert2PxSize(this.size)},setSize:function(t){this.size=this._convert2PxSize(t);return this},_convert2PxSize:function(t){var d;parseFloat(t)==t?d=t:B.isString(t)&&(-1<t.indexOf("pt")?d=e.pt2px(parseFloat(t)):-1<t.indexOf("px")?d=parseFloat(t):-1<t.indexOf("em")?d=
e.pt2px(12*parseFloat(t)):-1<t.indexOf("%")&&(d=e.pt2px(.12*parseFloat(t))));return d},setStyle:function(t){this.style=t;return this},setVariant:function(t){this.variant=t;return this},setWeight:function(t){this.weight=t;return this},setFamily:function(t){this.family=t;return this},setDecoration:function(t){this.decoration=t;return this},toJson:function(){return u.fixJson({size:e.px2pt(this.size),style:this.style,decoration:this.decoration,weight:this.weight,family:this.family})}});B.mixin(f,{STYLE_NORMAL:"normal",
STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});B.setObject("symbol.Font",f,c);return f})},"esri/tasks/JobInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./GPMessage"],function(f,B,l,e,c){f=f(null,{declaredClass:"esri.tasks.JobInfo",constructor:function(u){this.messages=[];B.mixin(this,u);u=this.messages;var t,d=u.length;
for(t=0;t<d;t++)u[t]=new c(u[t])},jobId:"",jobStatus:""});B.mixin(f,{STATUS_CANCELLED:"esriJobCancelled",STATUS_CANCELLING:"esriJobCancelling",STATUS_DELETED:"esriJobDeleted",STATUS_DELETING:"esriJobDeleting",STATUS_EXECUTING:"esriJobExecuting",STATUS_FAILED:"esriJobFailed",STATUS_NEW:"esriJobNew",STATUS_SUBMITTED:"esriJobSubmitted",STATUS_SUCCEEDED:"esriJobSucceeded",STATUS_TIMED_OUT:"esriJobTimedOut",STATUS_WAITING:"esriJobWaiting"});B.setObject("tasks.JobInfo",f,e);return f})},"esri/tasks/GPMessage":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,e){f=f(null,{declaredClass:"esri.tasks.GPMessage",constructor:function(c){B.mixin(this,c)}});B.mixin(f,{TYPE_INFORMATIVE:"esriJobMessageTypeInformative",TYPE_PROCESS_DEFINITION:"esriJobMessageTypeProcessDefinition",TYPE_PROCESS_START:"esriJobMessageTypeProcessStart",TYPE_PROCESS_STOP:"esriJobMessageTypeProcessStop",TYPE_WARNING:"esriJobMessageTypeWarning",TYPE_ERROR:"esriJobMessageTypeError",TYPE_EMPTY:"esriJobMessageTypeEmpty",TYPE_ABORT:"esriJobMessageTypeAbort"});
B.setObject("tasks.GPMessage",f,e);return f})},"esri/tasks/LinearUnit":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,e){f=f(null,{declaredClass:"esri.tasks.LinearUnit",constructor:function(c){c&&B.mixin(this,c)},distance:0,units:null,toJson:function(){var c={};this.distance&&(c.distance=this.distance);this.units&&(c.units=this.units);return c}});B.setObject("tasks.LinearUnit",f,e);return f})},"esri/tasks/DataFile":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,e){f=f(null,{declaredClass:"esri.tasks.DataFile",constructor:function(c){c&&B.mixin(this,c)},url:null,itemID:null,toJson:function(){var c={};this.url&&(c.url=this.url);this.itemID&&(c.itemID=this.itemID);return c}});B.setObject("tasks.DataFile",f,e);return f})},"esri/tasks/RasterData":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,e){f=f(null,{declaredClass:"esri.tasks.RasterData",constructor:function(c){c&&
B.mixin(this,c)},url:null,format:null,itemID:null,toJson:function(){var c={};this.url&&(c.url=this.url);this.format&&(c.format=this.format);this.itemID&&(c.itemID=this.itemID);return c}});B.setObject("tasks.RasterData",f,e);return f})},"esri/tasks/Date":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/date/locale","dojo/has","../kernel"],function(f,B,l,e,c){f=f(null,{declaredClass:"esri.tasks.Date",constructor:function(u){u&&(u.format&&(this.format=u.format),this.date=l.parse(u.date,
{selector:"date",datePattern:this.format}))},date:new Date,format:"EEE MMM dd HH:mm:ss zzz yyyy",toJson:function(){return{date:l.format(this.date,{selector:"date",datePattern:this.format}),format:this.format}}});B.setObject("tasks.Date",f,c);return f})},"esri/tasks/ParameterValue":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,e){f=f(null,{declaredClass:"esri.tasks.ParameterValue",constructor:function(c){B.mixin(this,c)}});B.setObject("tasks.ParameterValue",
f,e);return f})},"esri/tasks/GPResultImageLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has dojo/io-query ../kernel ../layers/ArcGISDynamicMapServiceLayer".split(" "),function(f,B,l,e,c,u,t){f=f(t,{declaredClass:"esri.tasks._GPResultImageLayer",constructor:function(d,q){q&&q.imageParameters&&q.imageParameters.extent&&(this.initialExtent=this.fullExtent=q.imageParameters.extent,this.spatialReference=this.initialExtent.spatialReference);this.getImageUrl=B.hitch(this,
this.getImageUrl);this.loaded=!0;this.onLoad(this)},getImageUrl:function(d,q,m,a){var h=d.spatialReference.wkid;a(this._url.path+"?"+c.objectToQuery(B.mixin(this._params,{f:"image",bbox:l.toJson(d.toJson()),bboxSR:h,imageSR:h,size:q+","+m})))}});B.setObject("tasks._GPResultImageLayer",f,u);return f})},"esri/layers/ArcGISDynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/sniff dojo/io-query ../kernel ../config ../lang ../request ../urlUtils ../layerUtils ../geometry/scaleUtils ./DynamicMapServiceLayer ./ArcGISMapServiceLayer ./TimeInfo ./LayerTimeOptions ./ImageParameters ./DynamicLayerInfo ./LayerMapSource".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z){f=f([r,k],{declaredClass:"esri.layers.ArcGISDynamicMapServiceLayer",_eventMap:{"visible-layers-change":["visibleLayers"]},constructor:function(D,E,C){D=E&&E.imageParameters;var y=B.hitch;if(D){var v=D.layerDefinitions;v&&this.setLayerDefinitions(v);D.layerOption===w.LAYER_OPTION_SHOW&&(this.visibleLayers=[].concat(D.layerIds),this.onVisibleLayersChange(this.visibleLayers))}this._setIsPNG32=y(this,this._setIsPNG32);this.dpi=D&&D.dpi||96;this.imageFormat=
D&&D.format||"png8";this.imageTransparency=D&&!1===D.transparent?!1:!0;this._setIsPNG32();this.gdbVersion=E&&E.gdbVersion;this._params.gdbVersion=this.gdbVersion;v=D&&D.layerDefinitions;B.mixin(this._params,this._url.query,{dpi:this.dpi,transparent:this.imageTransparency,format:this.imageFormat},D?D.toJson():{});v&&(this._params.layerDefs=v);this.getImageUrl=y(this,this.getImageUrl);this._initLayer=y(this,this._initLayer);this._load=y(this,this._load);this.useMapImage=E?E.useMapImage:!1;this._loadCallback=
E&&E.loadCallback;(E=E&&E.resourceInfo)?this._initLayer(E):(void 0===C||!1===C)&&this._load();this.registerConnectEvents()},disableClientCaching:!1,layerDefinitions:null,_initLayer:function(D,E){this.inherited(arguments);D.timeInfo&&(this.timeInfo=new g(D.timeInfo));this.loaded=!0;this.onLoad(this);var C=this._loadCallback;C&&(delete this._loadCallback,C(this))},getImageUrl:function(D,E,C,y){var v=this._url.path+"/export",A=this._params,G=A.token=this._getToken(),F=D.spatialReference.wkid||e.toJson(D.spatialReference.toJson()),
H=this._errorHandler;delete A._ts;B.mixin(A,{bbox:D.xmin+","+D.ymin+","+D.xmax+","+D.ymax,bboxSR:F,imageSR:F,size:E+","+C},this.disableClientCaching?{_ts:(new Date).getTime()}:{});A.layerDefs&&(D=h._serializeLayerDefinitions(A.layerDefs,10.5<=this.version),A=B.mixin({},A),delete A.layerDefs,A.layerDefs=D);D=a.addProxy(a.normalize(v)+"?"+u.objectToQuery(B.mixin({},A,{f:"image"})));D.length>d.defaults.io.postLength||this.useMapImage?this._jsonRequest=m({url:v,content:B.mixin(A,{f:"json"}),callbackParamName:"callback",
load:function(L){L.imageData?L="data:"+(L.contentType||"image")+";base64,"+L.imageData:(L=L.href,G&&(L+=-1===L.indexOf("?")?"?token\x3d"+G:"\x26token\x3d"+G),L=a.addProxy(L));y(L)},error:H}):y(D)},_setIsPNG32:function(){var D=this.imageFormat.toLowerCase(),E=c("ie");this.isPNG32=E&&6===E&&("png32"===D||"png24"===D)&&this.imageTransparency},_setTime:function(D){var E=this.timeInfo;D=this._params.time=D?D.toJson().join(","):null;if(10.02>this.version&&E)if(D)this._params.layerTimeOptions=h._serializeTimeOptions(this.layerTimeOptions);
else{var C=this.layerInfos;if(C){var y=this.layerTimeOptions,v=y?y.slice(0):[],A=[];l.forEach(C,function(G){G.subLayerIds||A.push(G.id)});A.length&&(l.forEach(A,function(G){if(!v[G]){var F=new b;F.useTime=!1;v[G]=F}}),this._params.layerTimeOptions=h._serializeTimeOptions(v,A))}}10.02<=this.version&&E&&!D&&!E.hasLiveData&&(this._params.time="null,null")},setDPI:function(D,E){this.dpi=this._params.dpi=D;E||this.refresh(!0)},setImageFormat:function(D,E){this.imageFormat=this._params.format=D;this._setIsPNG32();
E||this.refresh(!0)},setImageTransparency:function(D,E){this.imageTransparency=this._params.transparent=D;this._setIsPNG32();E||this.refresh(!0)},setVisibleLayers:function(D,E){this.visibleLayers=D;this._params.layers=w.LAYER_OPTION_SHOW+":"+(D.length?D.join():"-1");this._updateDynamicLayers();E||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},onVisibleLayersChange:function(){},setDefaultVisibleLayers:function(D){this.visibleLayers=this._defaultVisibleLayers;this._params.layers=null;
this._updateDynamicLayers();D||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},setLayerDefinitions:function(D,E){this.layerDefinitions=D;this._params.layerDefs=D;this._updateDynamicLayers();E||this.refresh(!0)},setDefaultLayerDefinitions:function(D){this.layerDefinitions=this._params.layerDefs=null;this._updateDynamicLayers();D||this.refresh(!0)},setDisableClientCaching:function(D){this.disableClientCaching=D},setLayerTimeOptions:function(D,E){this.layerTimeOptions=D;this._params.layerTimeOptions=
h._serializeTimeOptions(D);this._updateDynamicLayers();E||this.refresh(!0)},refresh:function(D){if(!0===D)this.inherited(arguments);else{var E=this.disableClientCaching;this.disableClientCaching=!0;this.inherited(arguments);this.disableClientCaching=E}},setLayerDrawingOptions:function(D,E){this.layerDrawingOptions=D;this._updateDynamicLayers();E||this.refresh(!0)},setDynamicLayerInfos:function(D,E){D&&0<D.length?(this.dynamicLayerInfos=D,this.visibleLayers=h._getDefaultVisibleLayers(D),this.onVisibleLayersChange(this.visibleLayers)):
this.dynamicLayerInfos=this.layerDrawingOptions=null;this._updateDynamicLayers();E||this.refresh(!0)},createDynamicLayerInfosFromLayerInfos:function(){var D=[],E;l.forEach(this.layerInfos,function(C){E=new x(C.toJson());E.source=new z({mapLayerId:C.id});D.push(E)});return D},_onDynamicLayersChange:function(){},_updateDynamicLayers:function(){if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length||this.layerDrawingOptions&&0<this.layerDrawingOptions.length){this.dynamicLayerInfos&&0!==this.dynamicLayerInfos.length||
(this.dynamicLayerInfos=this.createDynamicLayerInfosFromLayerInfos());var D=this._map&&n.getScale(this._map);D=this._getDynLayerObjs(D);D=e.toJson(D);this._params.dynamicLayers&&this._params.dynamicLayers.length===D.length&&this._params.dynamicLayers===D||(this._params.dynamicLayers=D,this._onDynamicLayersChange(this._params.dynamicLayers))}else this._params.dynamicLayers?(this._params.dynamicLayers=null,this._onDynamicLayersChange(null)):this._params.dynamicLayers=null},_getDynLayerObjs:function(D){var E=
this.dynamicLayerInfos,C=[],y=this.visibleLayers,v=D?h._getLayersForScale(D,E):y;l.forEach(E,function(A){if(!A.subLayerIds){var G=A.id;if(-1!==l.indexOf(y,G)&&-1!==l.indexOf(v,G)){var F={id:G,name:A.name};F.source=A.source&&A.source.toJson();var H;this.layerDefinitions&&this.layerDefinitions[G]&&(H=this.layerDefinitions[G]);H&&(F.definitionExpression=H);var L;this.layerDrawingOptions&&this.layerDrawingOptions[G]&&(L=this.layerDrawingOptions[G]);L&&(H=L.toJson(),this._fixMarkerColor(H.renderer),F.drawingInfo=
H);var M;this.layerTimeOptions&&this.layerTimeOptions[G]&&(M=this.layerTimeOptions[G]);M&&(F.layerTimeOptions=M.toJson());F.minScale=A.minScale||0;F.maxScale=A.maxScale||0;C.push(F)}}},this);return C},_fixMarkerColor:function(D){l.forEach(this._getAllSimpleMarkerSymbols(D),function(E){if(!E.color){var C=[0,0,0,0],y=E.outline&&E.outline.color;"esriSMSX"!==E.style&&"esriSMSCross"!==E.style||!y||(C=y.slice(0));E.color=C}})},_getAllSimpleMarkerSymbols:function(D){return l.filter(this._getAllSymbols(D),
function(E){return"esriSMS"===E.type})},_getAllSymbols:function(D){var E=[];D&&(E.push(D.symbol),E.push(D.defaultSymbol),l.forEach(D.uniqueValueInfos||D.classBreakInfos,function(C){E.push(C.symbol)}),E=l.filter(E,q.isDefined));return E},_onExtentChangeHandler:function(D,E,C){C&&this._updateDynamicLayers();this.inherited(arguments)},_setMap:function(D,E,C){this._map=D;this._updateDynamicLayers();return this.inherited(arguments)},onGDBVersionChange:function(){},setGDBVersion:function(D,E){this.gdbVersion=
D;this._params.gdbVersion=D;this.onGDBVersionChange();E||this.refresh(!0)},exportMapImage:function(D,E){var C=B.hitch(this,function(){var y=d.defaults.map,v=D&&D.layerDefinitions;D=D?D.toJson(this.normalization):{};v&&(D.layerDefs=v);D=B.mixin({size:y.width+","+y.height},this._params,D,{f:"json"});delete D._ts;D.layerDefs&&(y=h._serializeLayerDefinitions(D.layerDefs,10.5<=this.version),delete D.layerDefs,D.layerDefs=y);this._exportMapImage(this._url.path+"/export",D,E)});if(this.loaded)C();else this.on("load",
C)}});B.setObject("layers.ArcGISDynamicMapServiceLayer",f,t);return f})},"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../config","../WKIDUnitConversion"],function(f,B,l,e,c){function u(h,n,r){return h&&n?h.getWidth()/n*(r||d)*39.37*q.screenDPI:0}function t(h,n,r,k,g){return h.expand(k*n/(39.37*((g?r:m.values[m[r]])||d)*q.screenDPI)/h.getWidth())}var d=6370997*Math.PI/180,q=e.defaults,m=c,a={getUnitValueForSR:function(h){return this.getUnitValue(h)||d},getUnitValue:function(h){if(h)if("object"===
typeof h){var n=h.wkid;var r=h.wkt}else"number"===typeof h?n=h:"string"===typeof h&&(r=h);if(n)var k=m.values[m[n]];else r&&-1!==r.search(/^PROJCS/i)&&(h=/UNIT\[([^\]]+)\]\]$/i.exec(r))&&h[1]&&(k=parseFloat(h[1].split(",")[1]));return k},getScale:function(h,n,r){if(1<arguments.length&&null!=n&&!n.declaredClass){var k=h;var g=n;n=null;var b=a.getUnitValue(r)}else k=n||h.extent,g=h.width,b=a.getUnitValue(k&&k.spatialReference);return u(k,g,b)},getExtentForScale:function(h,n,r){return t(r||h.extent,
h.width,a.getUnitValue(h.spatialReference),n,!0)}};f.mixin(f.getObject("geometry",!0,l),a);l.geometry._getScale=u;l.geometry._getExtentForScale=t;return a})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(f,B){var l={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,
8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,
8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,
8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,
10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,
24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,
31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,
102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,
103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,
103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,
103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(f=2E3;2045>=f;f++)l[f]=0;for(f=2056;2065>=f;f++)l[f]=0;for(f=2067;2135>=f;f++)l[f]=0;for(f=2137;2154>=
f;f++)l[f]=0;for(f=2161;2170>=f;f++)l[f]=0;for(f=2172;2193>=f;f++)l[f]=0;for(f=2195;2198>=f;f++)l[f]=0;for(f=2200;2203>=f;f++)l[f]=0;for(f=2205;2217>=f;f++)l[f]=0;for(f=2222;2224>=f;f++)l[f]=1;for(f=2225;2250>=f;f++)l[f]=2;for(f=2251;2253>=f;f++)l[f]=1;for(f=2257;2264>=f;f++)l[f]=2;for(f=2274;2279>=f;f++)l[f]=2;for(f=2280;2282>=f;f++)l[f]=1;for(f=2283;2289>=f;f++)l[f]=2;for(f=2290;2292>=f;f++)l[f]=0;for(f=2308;2313>=f;f++)l[f]=0;for(f=2315;2491>=f;f++)l[f]=0;for(f=2494;2866>=f;f++)l[f]=0;for(f=2867;2869>=
f;f++)l[f]=1;for(f=2870;2888>=f;f++)l[f]=2;for(f=2891;2895>=f;f++)l[f]=2;for(f=2896;2898>=f;f++)l[f]=1;for(f=2902;2908>=f;f++)l[f]=2;for(f=2915;2920>=f;f++)l[f]=2;for(f=2921;2923>=f;f++)l[f]=1;for(f=2924;2930>=f;f++)l[f]=2;for(f=2931;2962>=f;f++)l[f]=0;for(f=2964;2968>=f;f++)l[f]=2;for(f=2969;2973>=f;f++)l[f]=0;for(f=2975;2991>=f;f++)l[f]=0;for(f=2995;3051>=f;f++)l[f]=0;for(f=3054;3079>=f;f++)l[f]=0;for(f=3081;3088>=f;f++)l[f]=0;for(f=3092;3101>=f;f++)l[f]=0;for(f=3106;3138>=f;f++)l[f]=0;for(f=3146;3151>=
f;f++)l[f]=0;for(f=3153;3166>=f;f++)l[f]=0;for(f=3168;3172>=f;f++)l[f]=0;for(f=3174;3203>=f;f++)l[f]=0;for(f=3294;3358>=f;f++)l[f]=0;for(f=3367;3403>=f;f++)l[f]=0;for(f=3408;3416>=f;f++)l[f]=0;for(f=3417;3438>=f;f++)l[f]=2;for(f=3441;3446>=f;f++)l[f]=2;for(f=3447;3450>=f;f++)l[f]=0;for(f=3451;3459>=f;f++)l[f]=2;for(f=3460;3478>=f;f++)l[f]=0;for(f=3554;3559>=f;f++)l[f]=0;for(f=3560;3570>=f;f++)l[f]=2;for(f=3571;3581>=f;f++)l[f]=0;for(f=3594;3597>=f;f++)l[f]=0;for(f=3601;3604>=f;f++)l[f]=0;for(f=3637;3639>=
f;f++)l[f]=0;for(f=3665;3667>=f;f++)l[f]=0;for(f=3693;3695>=f;f++)l[f]=0;for(f=3701;3727>=f;f++)l[f]=0;for(f=3728;3739>=f;f++)l[f]=2;for(f=3740;3751>=f;f++)l[f]=0;for(f=3753;3760>=f;f++)l[f]=2;for(f=3761;3773>=f;f++)l[f]=0;for(f=3775;3777>=f;f++)l[f]=0;for(f=3779;3781>=f;f++)l[f]=0;for(f=3783;3785>=f;f++)l[f]=0;for(f=3788;3791>=f;f++)l[f]=0;for(f=3797;3802>=f;f++)l[f]=0;for(f=3814;3816>=f;f++)l[f]=0;for(f=3825;3829>=f;f++)l[f]=0;for(f=3832;3841>=f;f++)l[f]=0;for(f=3844;3852>=f;f++)l[f]=0;for(f=3873;3885>=
f;f++)l[f]=0;for(f=3890;3893>=f;f++)l[f]=0;for(f=3907;3912>=f;f++)l[f]=0;for(f=3942;3950>=f;f++)l[f]=0;for(f=3968;3970>=f;f++)l[f]=0;for(f=3973;3976>=f;f++)l[f]=0;for(f=3986;3989>=f;f++)l[f]=0;for(f=3994;3997>=f;f++)l[f]=0;for(f=4048;4051>=f;f++)l[f]=0;for(f=4056;4063>=f;f++)l[f]=0;for(f=4093;4096>=f;f++)l[f]=0;for(f=4390;4398>=f;f++)l[f]=0;for(f=4399;4413>=f;f++)l[f]=2;for(f=4418;4433>=f;f++)l[f]=2;for(f=4455;4457>=f;f++)l[f]=2;for(f=4484;4489>=f;f++)l[f]=0;for(f=4491;4554>=f;f++)l[f]=0;for(f=4568;4589>=
f;f++)l[f]=0;for(f=4652;4656>=f;f++)l[f]=0;for(f=4766;4800>=f;f++)l[f]=0;for(f=5014;5016>=f;f++)l[f]=0;for(f=5069;5072>=f;f++)l[f]=0;for(f=5105;5130>=f;f++)l[f]=0;for(f=5167;5188>=f;f++)l[f]=0;for(f=5253;5259>=f;f++)l[f]=0;for(f=5269;5275>=f;f++)l[f]=0;for(f=5292;5311>=f;f++)l[f]=0;for(f=5329;5331>=f;f++)l[f]=0;for(f=5343;5349>=f;f++)l[f]=0;for(f=5355;5357>=f;f++)l[f]=0;for(f=5387;5389>=f;f++)l[f]=0;for(f=5459;5463>=f;f++)l[f]=0;for(f=5479;5482>=f;f++)l[f]=0;for(f=5518;5520>=f;f++)l[f]=0;for(f=5530;5539>=
f;f++)l[f]=0;for(f=5550;5552>=f;f++)l[f]=0;for(f=5562;5583>=f;f++)l[f]=0;for(f=5623;5625>=f;f++)l[f]=2;for(f=5631;5639>=f;f++)l[f]=0;for(f=5649;5653>=f;f++)l[f]=0;for(f=5663;5680>=f;f++)l[f]=0;for(f=5682;5685>=f;f++)l[f]=0;for(f=5875;5877>=f;f++)l[f]=0;for(f=5896;5899>=f;f++)l[f]=0;for(f=5921;5940>=f;f++)l[f]=0;for(f=6050;6125>=f;f++)l[f]=0;for(f=6244;6275>=f;f++)l[f]=0;for(f=6328;6348>=f;f++)l[f]=0;for(f=6350;6356>=f;f++)l[f]=0;for(f=6366;6372>=f;f++)l[f]=0;for(f=6381;6387>=f;f++)l[f]=0;for(f=6393;6404>=
f;f++)l[f]=0;for(f=6480;6483>=f;f++)l[f]=0;for(f=6511;6514>=f;f++)l[f]=0;for(f=6579;6581>=f;f++)l[f]=0;for(f=6619;6624>=f;f++)l[f]=0;for(f=6625;6627>=f;f++)l[f]=2;for(f=6628;6632>=f;f++)l[f]=0;for(f=6634;6637>=f;f++)l[f]=0;for(f=6669;6692>=f;f++)l[f]=0;for(f=6707;6709>=f;f++)l[f]=0;for(f=6720;6723>=f;f++)l[f]=0;for(f=6732;6738>=f;f++)l[f]=0;for(f=6931;6933>=f;f++)l[f]=0;for(f=6956;6959>=f;f++)l[f]=0;for(f=7005;7007>=f;f++)l[f]=0;for(f=7057;7070>=f;f++)l[f]=2;for(f=7074;7082>=f;f++)l[f]=0;for(f=7109;7118>=
f;f++)l[f]=0;for(f=7119;7127>=f;f++)l[f]=1;for(f=7374;7376>=f;f++)l[f]=0;for(f=7528;7586>=f;f++)l[f]=0;for(f=7587;7645>=f;f++)l[f]=2;for(f=7692;7696>=f;f++)l[f]=0;for(f=7755;7787>=f;f++)l[f]=0;for(f=7791;7795>=f;f++)l[f]=0;for(f=7799;7801>=f;f++)l[f]=0;for(f=7803;7805>=f;f++)l[f]=0;for(f=7825;7831>=f;f++)l[f]=0;for(f=7845;7859>=f;f++)l[f]=0;for(f=8013;8032>=f;f++)l[f]=0;for(f=8065;8068>=f;f++)l[f]=1;for(f=8518;8529>=f;f++)l[f]=2;for(f=8533;8536>=f;f++)l[f]=2;for(f=8538;8540>=f;f++)l[f]=2;for(f=8677;8679>=
f;f++)l[f]=0;for(f=8836;8840>=f;f++)l[f]=0;for(f=8857;8859>=f;f++)l[f]=0;for(f=8908;8910>=f;f++)l[f]=0;for(f=9154;9159>=f;f++)l[f]=0;for(f=9205;9218>=f;f++)l[f]=0;for(f=9271;9273>=f;f++)l[f]=0;for(f=9295;9297>=f;f++)l[f]=0;for(f=9356;9360>=f;f++)l[f]=0;for(f=9404;9407>=f;f++)l[f]=0;for(f=9476;9482>=f;f++)l[f]=0;for(f=9487;9494>=f;f++)l[f]=0;for(f=9697;9699>=f;f++)l[f]=0;for(f=9821;9865>=f;f++)l[f]=0;for(f=10285;10291>=f;f++)l[f]=0;for(f=10314;10317>=f;f++)l[f]=0;for(f=10448;10465>=f;f++)l[f]=0;for(f=
11114;11118>=f;f++)l[f]=0;for(f=20004;20032>=f;f++)l[f]=0;for(f=20047;20049>=f;f++)l[f]=0;for(f=20062;20092>=f;f++)l[f]=0;for(f=20135;20138>=f;f++)l[f]=0;for(f=20248;20258>=f;f++)l[f]=0;for(f=20348;20358>=f;f++)l[f]=0;for(f=20436;20440>=f;f++)l[f]=0;for(f=20822;20824>=f;f++)l[f]=0;for(f=20904;20932>=f;f++)l[f]=0;for(f=20934;20936>=f;f++)l[f]=0;for(f=21004;21032>=f;f++)l[f]=0;for(f=21035;21037>=f;f++)l[f]=0;for(f=21095;21097>=f;f++)l[f]=0;for(f=21148;21150>=f;f++)l[f]=0;for(f=21207;21264>=f;f++)l[f]=
0;for(f=21307;21364>=f;f++)l[f]=0;for(f=21413;21423>=f;f++)l[f]=0;for(f=21453;21463>=f;f++)l[f]=0;for(f=21473;21483>=f;f++)l[f]=0;for(f=21780;21782>=f;f++)l[f]=0;for(f=21891;21894>=f;f++)l[f]=0;for(f=21896;21899>=f;f++)l[f]=0;for(f=22171;22177>=f;f++)l[f]=0;for(f=22181;22187>=f;f++)l[f]=0;for(f=22191;22197>=f;f++)l[f]=0;for(f=22207;22222>=f;f++)l[f]=0;for(f=22229;22232>=f;f++)l[f]=0;for(f=22234;22236>=f;f++)l[f]=0;for(f=22243;22250>=f;f++)l[f]=0;for(f=22262;22265>=f;f++)l[f]=0;for(f=22307;22322>=
f;f++)l[f]=0;for(f=22348;22357>=f;f++)l[f]=0;for(f=22407;22422>=f;f++)l[f]=0;for(f=22462;22465>=f;f++)l[f]=0;for(f=22521;22525>=f;f++)l[f]=0;for(f=22607;22622>=f;f++)l[f]=0;for(f=22641;22646>=f;f++)l[f]=0;for(f=22648;22657>=f;f++)l[f]=0;for(f=22707;22722>=f;f++)l[f]=0;for(f=22762;22765>=f;f++)l[f]=0;for(f=22807;22822>=f;f++)l[f]=0;for(f=22991;22994>=f;f++)l[f]=0;for(f=23028;23038>=f;f++)l[f]=0;for(f=23301;23333>=f;f++)l[f]=2;for(f=23830;23853>=f;f++)l[f]=0;for(f=23866;23872>=f;f++)l[f]=0;for(f=23877;23884>=
f;f++)l[f]=0;for(f=23886;23894>=f;f++)l[f]=0;for(f=23946;23948>=f;f++)l[f]=0;for(f=24311;24313>=f;f++)l[f]=0;for(f=24342;24347>=f;f++)l[f]=0;for(f=24370;24374>=f;f++)l[f]=10;for(f=24375;24381>=f;f++)l[f]=0;for(f=24718;24721>=f;f++)l[f]=0;for(f=24817;24821>=f;f++)l[f]=0;for(f=24877;24882>=f;f++)l[f]=0;for(f=24891;24893>=f;f++)l[f]=0;for(f=25391;25395>=f;f++)l[f]=0;for(f=25828;25838>=f;f++)l[f]=0;for(f=26191;26195>=f;f++)l[f]=0;for(f=26391;26393>=f;f++)l[f]=0;for(f=26701;26722>=f;f++)l[f]=0;for(f=26729;26799>=
f;f++)l[f]=2;for(f=26801;26803>=f;f++)l[f]=2;for(f=26811;26813>=f;f++)l[f]=2;for(f=26847;26870>=f;f++)l[f]=2;for(f=26891;26899>=f;f++)l[f]=0;for(f=26901;26923>=f;f++)l[f]=0;for(f=26929;26946>=f;f++)l[f]=0;for(f=26948;26998>=f;f++)l[f]=0;for(f=27037;27040>=f;f++)l[f]=0;for(f=27205;27232>=f;f++)l[f]=0;for(f=27258;27260>=f;f++)l[f]=0;for(f=27391;27398>=f;f++)l[f]=0;for(f=27561;27564>=f;f++)l[f]=0;for(f=27571;27574>=f;f++)l[f]=0;for(f=27581;27584>=f;f++)l[f]=0;for(f=27591;27594>=f;f++)l[f]=0;for(f=28191;28193>=
f;f++)l[f]=0;for(f=28348;28358>=f;f++)l[f]=0;for(f=28402;28432>=f;f++)l[f]=0;for(f=28462;28492>=f;f++)l[f]=0;for(f=29118;29122>=f;f++)l[f]=0;for(f=29168;29172>=f;f++)l[f]=0;for(f=29177;29185>=f;f++)l[f]=0;for(f=29187;29195>=f;f++)l[f]=0;for(f=29900;29903>=f;f++)l[f]=0;for(f=30161;30179>=f;f++)l[f]=0;for(f=30491;30494>=f;f++)l[f]=0;for(f=30729;30732>=f;f++)l[f]=0;for(f=31251;31259>=f;f++)l[f]=0;for(f=31265;31268>=f;f++)l[f]=0;for(f=31275;31279>=f;f++)l[f]=0;for(f=31281;31297>=f;f++)l[f]=0;for(f=31461;31469>=
f;f++)l[f]=0;for(f=31491;31495>=f;f++)l[f]=0;for(f=31917;31922>=f;f++)l[f]=0;for(f=31965;32E3>=f;f++)l[f]=0;for(f=32001;32003>=f;f++)l[f]=2;for(f=32005;32031>=f;f++)l[f]=2;for(f=32033;32060>=f;f++)l[f]=2;for(f=32064;32067>=f;f++)l[f]=2;for(f=32074;32077>=f;f++)l[f]=2;for(f=32081;32086>=f;f++)l[f]=0;for(f=32107;32130>=f;f++)l[f]=0;for(f=32133;32159>=f;f++)l[f]=0;for(f=32164;32167>=f;f++)l[f]=2;for(f=32180;32199>=f;f++)l[f]=0;for(f=32201;32260>=f;f++)l[f]=0;for(f=32301;32360>=f;f++)l[f]=0;for(f=32401;32460>=
f;f++)l[f]=0;for(f=32501;32560>=f;f++)l[f]=0;for(f=32601;32662>=f;f++)l[f]=0;for(f=32664;32667>=f;f++)l[f]=2;for(f=32701;32761>=f;f++)l[f]=0;for(f=53001;53004>=f;f++)l[f]=0;for(f=53008;53019>=f;f++)l[f]=0;for(f=53021;53032>=f;f++)l[f]=0;for(f=53034;53037>=f;f++)l[f]=0;for(f=53042;53046>=f;f++)l[f]=0;for(f=53074;53080>=f;f++)l[f]=0;for(f=54001;54004>=f;f++)l[f]=0;for(f=54008;54019>=f;f++)l[f]=0;for(f=54021;54032>=f;f++)l[f]=0;for(f=54034;54037>=f;f++)l[f]=0;for(f=54042;54046>=f;f++)l[f]=0;for(f=54048;54053>=
f;f++)l[f]=0;for(f=54074;54080>=f;f++)l[f]=0;for(f=54098;54101>=f;f++)l[f]=0;for(f=102001;102040>=f;f++)l[f]=0;for(f=102042;102063>=f;f++)l[f]=0;for(f=102065;102067>=f;f++)l[f]=0;for(f=102070;102117>=f;f++)l[f]=0;for(f=102122;102216>=f;f++)l[f]=0;for(f=102221;102377>=f;f++)l[f]=0;for(f=102382;102388>=f;f++)l[f]=0;for(f=102389;102398>=f;f++)l[f]=2;for(f=102399;102444>=f;f++)l[f]=0;for(f=102445;102447>=f;f++)l[f]=2;for(f=102448;102458>=f;f++)l[f]=0;for(f=102459;102468>=f;f++)l[f]=2;for(f=102469;102499>=
f;f++)l[f]=0;for(f=102500;102519>=f;f++)l[f]=1;for(f=102520;102524>=f;f++)l[f]=0;for(f=102525;102529>=f;f++)l[f]=2;for(f=102530;102588>=f;f++)l[f]=0;for(f=102590;102598>=f;f++)l[f]=0;for(f=102601;102603>=f;f++)l[f]=0;for(f=102605;102628>=f;f++)l[f]=0;for(f=102629;102646>=f;f++)l[f]=2;for(f=102648;102700>=f;f++)l[f]=2;for(f=102701;102703>=f;f++)l[f]=0;for(f=102707;102730>=f;f++)l[f]=2;for(f=102733;102758>=f;f++)l[f]=2;for(f=102767;102900>=f;f++)l[f]=0;for(f=102901;102933>=f;f++)l[f]=2;for(f=102934;102950>=
f;f++)l[f]=13;for(f=102951;102955>=f;f++)l[f]=0;for(f=102961;102963>=f;f++)l[f]=0;for(f=102965;102969>=f;f++)l[f]=0;for(f=102971;102973>=f;f++)l[f]=0;for(f=102975;102989>=f;f++)l[f]=0;for(f=102990;102992>=f;f++)l[f]=1;for(f=102997;103002>=f;f++)l[f]=0;for(f=103003;103008>=f;f++)l[f]=2;for(f=103009;103011>=f;f++)l[f]=0;for(f=103012;103014>=f;f++)l[f]=2;for(f=103019;103021>=f;f++)l[f]=0;for(f=103022;103024>=f;f++)l[f]=2;for(f=103029;103031>=f;f++)l[f]=0;for(f=103032;103034>=f;f++)l[f]=2;for(f=103065;103068>=
f;f++)l[f]=0;for(f=103074;103076>=f;f++)l[f]=0;for(f=103077;103079>=f;f++)l[f]=1;for(f=103080;103082>=f;f++)l[f]=0;for(f=103083;103085>=f;f++)l[f]=2;for(f=103090;103093>=f;f++)l[f]=0;for(f=103097;103099>=f;f++)l[f]=0;for(f=103100;103102>=f;f++)l[f]=2;for(f=103107;103109>=f;f++)l[f]=0;for(f=103110;103112>=f;f++)l[f]=2;for(f=103113;103116>=f;f++)l[f]=0;for(f=103117;103120>=f;f++)l[f]=2;for(f=103153;103157>=f;f++)l[f]=0;for(f=103158;103162>=f;f++)l[f]=2;for(f=103163;103165>=f;f++)l[f]=0;for(f=103166;103168>=
f;f++)l[f]=1;for(f=103169;103171>=f;f++)l[f]=2;for(f=103186;103188>=f;f++)l[f]=0;for(f=103189;103191>=f;f++)l[f]=2;for(f=103192;103195>=f;f++)l[f]=0;for(f=103196;103199>=f;f++)l[f]=2;for(f=103200;103224>=f;f++)l[f]=0;for(f=103225;103227>=f;f++)l[f]=1;for(f=103232;103237>=f;f++)l[f]=0;for(f=103238;103243>=f;f++)l[f]=2;for(f=103244;103246>=f;f++)l[f]=0;for(f=103247;103249>=f;f++)l[f]=2;for(f=103254;103256>=f;f++)l[f]=0;for(f=103257;103259>=f;f++)l[f]=2;for(f=103264;103266>=f;f++)l[f]=0;for(f=103267;103269>=
f;f++)l[f]=2;for(f=103300;103375>=f;f++)l[f]=0;for(f=103381;103383>=f;f++)l[f]=0;for(f=103384;103386>=f;f++)l[f]=1;for(f=103387;103389>=f;f++)l[f]=0;for(f=103390;103392>=f;f++)l[f]=2;for(f=103397;103399>=f;f++)l[f]=0;for(f=103400;103471>=f;f++)l[f]=2;for(f=103476;103478>=f;f++)l[f]=0;for(f=103479;103481>=f;f++)l[f]=2;for(f=103486;103488>=f;f++)l[f]=0;for(f=103489;103491>=f;f++)l[f]=2;for(f=103492;103495>=f;f++)l[f]=0;for(f=103496;103499>=f;f++)l[f]=2;for(f=103528;103543>=f;f++)l[f]=0;for(f=103544;103548>=
f;f++)l[f]=2;for(f=103549;103551>=f;f++)l[f]=0;for(f=103552;103554>=f;f++)l[f]=1;for(f=103555;103557>=f;f++)l[f]=2;for(f=103558;103560>=f;f++)l[f]=0;for(f=103571;103573>=f;f++)l[f]=0;for(f=103574;103576>=f;f++)l[f]=2;for(f=103577;103580>=f;f++)l[f]=0;for(f=103581;103583>=f;f++)l[f]=2;for(f=103595;103694>=f;f++)l[f]=0;for(f=103696;103699>=f;f++)l[f]=0;for(f=103700;103793>=f;f++)l[f]=2;for(f=103794;103890>=f;f++)l[f]=0;for(f=103891;103896>=f;f++)l[f]=2;for(f=103900;103971>=f;f++)l[f]=2;for(f=103972;103977>=
f;f++)l[f]=0;for(f=112E3;112101>=f;f++)l[f]=0;return B.WKIDUnitConversion=l})},"esri/layers/DynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/dom-construct dojo/dom-style dojox/gfx/matrix ../kernel ../config ../sniff ../request ../domUtils ./layer ./MapImage".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h,n){var r=d.defaults.map.zoomDuration;f=f(h,{declaredClass:"esri.layers.DynamicMapServiceLayer",_eventMap:{"map-image-export":["mapImage"]},constructor:function(k,
g){this.useMapTime=g&&g.hasOwnProperty("useMapTime")?!!g.useMapTime:!0;this.extentProcessor=g&&g.extentProcessor;k=l.hitch;this._exportMapImageHandler=k(this,this._exportMapImageHandler);this._imgSrcFunc=k(this,this._imgSrcFunc);this._divAlphaImageFunc=k(this,this._divAlphaImageFunc);this._tileLoadHandler=k(this,this._tileLoadHandler);this._tileErrorHandler=k(this,this._tileErrorHandler);this.registerConnectEvents()},opacity:1,isPNG32:!1,_setMap:function(k,g,b){this.inherited(arguments);this._map=
k;var w=this._div=e.create("div",null,g),x=t._css.names,z={position:"absolute",width:k.width+"px",height:k.height+"px",overflow:"visible",opacity:this.opacity},D=q("ie"),E=B.connect,C=k.__visibleDelta;8===D&&delete z.opacity;"css-transforms"===k.navigationMode?(this._isChildLayer||(z[x.transform]=t._css.translate(C.x,C.y),c.set(w,z)),this._left=C.x,this._top=C.y):(z.left="0px",z.top="0px",c.set(w,z),this._left=this._top=0);c.set(w,z);this._onResizeHandler_connect=E(k,"onResize",this,"_onResizeHandler");
this._opacityChangeHandler_connect=E(this,"onOpacityChange",this,"_opacityChangeHandler");this._img_loading=null;this._dragOrigin={x:0,y:0};this.evaluateSuspension();if(this.suspended&&!k.loaded)var y=B.connect(k,"onLoad",this,function(){B.disconnect(y);y=null;this.evaluateSuspension()});this.extentProcessor&&(this._panEndEvalHandle=B.connect(k,"onPanEnd",this,this.evaluateSuspension),this._zoomEndEvalHandle=B.connect(k,"onZoomEnd",this,this.evaluateSuspension));return w},_unsetMap:function(k,g){this._img&&
this._clearEventListeners(this._img);this._img_loading&&this._clearEventListeners(this._img_loading);e.destroy(this._div);this._map=this._div=this._img=this._img_loading=null;var b=B.disconnect;b(this._onResizeHandler_connect);b(this._opacityChangeHandler_connect);b(this._panEndEvalHandle);b(this._zoomEndEvalHandle);this._panEndEvalHandle=this._zoomEndEvalHandle=this._onResizeHandler_connect=this._opacityChangeHandler_connect=null;this._fireUpdateEnd();this._toggleTime();clearTimeout(this._wakeTimer);
this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments)},_onResizeHandler:function(k,g,b){c.set(this._div,{width:g+"px",height:b+"px"});this._onExtentChangeHandler(k)},onSuspend:function(){this.inherited(arguments);this._fireUpdateEnd();this._toggleTime();a.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(){this.inherited(arguments);var k=this._map;this._toggleTime();"css-transforms"===k.navigationMode&&(k=k.__visibleDelta,
this._left=k.x,this._top=k.y,this._isChildLayer||c.set(this._div,t._css.names.transform,t._css.translate(this._left,this._top)));this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(l.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0)}),0)},canResume:function(){var k=this.inherited(arguments);if(k){var g=this._map.extent;this.extentProcessor&&g&&(k=!!this.extentProcessor({layer:this,extent:g,width:this._map.width}).extent)}return k},_enableDrawConnectors:function(){var k=
B.connect,g=this._map;g&&(this._onPanHandler_connect=k(g,"onPan",this,"_onPanHandler"),this._onExtentChangeHandler_connect=k(g,"onExtentChange",this,"_onExtentChangeHandler"),"css-transforms"===g.navigationMode?this._onScaleHandler_connect=k(g,"onScale",this,this._onScaleHandler):this._onZoomHandler_connect=k(g,"onZoom",this,"_onZoomHandler"))},_disableDrawConnectors:function(){var k=B.disconnect;k(this._onPanHandler_connect);k(this._onExtentChangeHandler_connect);k(this._onZoomHandler_connect);k(this._onScaleHandler_connect);
this._onPanHandler_connect=this._onExtentChangeHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=null},_toggleTime:function(){var k=this._map;this.timeInfo&&this.useMapTime&&k&&!this.suspended?(this._timeConnect||(this._timeConnect=B.connect(k,"onTimeExtentChange",this,this._onTimeExtentChangeHandler)),this._setTime(k.timeExtent)):(B.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},_setTime:function(k){this._params&&(this._params.time=k?k.toJson().join(","):
null)},_onPanHandler:function(k,g){this._panDx=g.x;this._panDy=g.y;k=this._dragOrigin;var b=this._map.__visibleDelta,w=this._img;w&&("css-transforms"===this._map.navigationMode?(this._left=b.x+g.x,this._top=b.y+g.y,this._isChildLayer||c.set(this._div,t._css.names.transform,t._css.translate(this._left,this._top))):c.set(w,{left:k.x+g.x+"px",top:k.y+g.y+"px"}))},_onExtentChangeHandler:function(k,g,b){if(!this.suspended){clearTimeout(this._wakeTimer);this._wakeTimer=null;var w=this._map,x=this._img,
z=x&&x.style,D=this._dragOrigin;!g||b||!x||g.x===this._panDx&&g.y===this._panDy||("css-transforms"===w.navigationMode?(g=w.__visibleDelta,this._left=g.x,this._top=g.y,this._isChildLayer||c.set(this._div,t._css.names.transform,t._css.translate(this._left,this._top))):c.set(x,{left:D.x+g.x+"px",top:D.y+g.y+"px"}));x?(D.x=parseInt(z.left,10),D.y=parseInt(z.top,10)):D.x=D.y=0;"css-transforms"===w.navigationMode&&b&&x&&(c.set(x,t._css.names.transition,"none"),x._multiply=x._multiply?u.multiply(x._matrix,
x._multiply):x._matrix);this._fireUpdateStart();if(b=this._img_loading)if(this._clearEventListeners(b),e.destroy(b),this._img_loading=null,b=this._jsonRequest){try{b.cancel()}catch(F){}this._jsonRequest=null}var E=w.width;b=w.height;g=E;var C=0;10<=this.version&&w.wrapAround180&&(k=k._normalize(!0));this.extentProcessor&&(C=this.extentProcessor({layer:this,extent:k,width:g}),k=C.extent,g=C.width,C=C.marginLeft||0);if(this.isPNG32)x=this._img_loading=e.create("div"),x.id=w.id+"_"+this.id+"_"+(new Date).getTime(),
c.set(x,{position:"absolute",left:"0px",top:"0px",width:g+"px",height:b+"px"}),w=x.appendChild(e.create("div")),c.set(w,{opacity:0,width:g+"px",height:b+"px"}),this.getImageUrl(k,g,b,this._divAlphaImageFunc),x=null;else{var y=this._img_loading=e.create("img"),v=t._css.names,A=q("ie"),G={position:"absolute",width:g+"px",height:b+"px"};y.setAttribute("decoding","sync");8===A&&(G.opacity=this.opacity);null!=C&&0!==C&&(G.marginLeft=C+"px");"css-transforms"===w.navigationMode?(G[v.transform]=t._css.translate(-this._left,
-this._top),y._tdx=-this._left,y._tdy=-this._top,G[v.transition]=v.transformName+" "+r+"ms ease",this.extentProcessor&&(G[v.origin]=E/2-C+"px "+b/2+"px")):(G.left="0px",G.top="0px");y.id=w.id+"_"+this.id+"_"+(new Date).getTime();c.set(y,G);y._onload_connect=B.connect(y,"onload",this,"_onLoadHandler");y._onerror_connect=B.connect(y,"onerror",this,"_onErrorHandler");y._onabort_connect=B.connect(y,"onabort",this,"_onErrorHandler");this._startRect={left:D.x,top:D.y,width:x?parseInt(z.width,10):g,height:x?
parseInt(z.height,10):b,marginLeft:x?parseInt(z.marginLeft||"0",10):C,zoom:z&&z.zoom?parseFloat(z.zoom):1};this.getImageUrl(k,g,b,this._imgSrcFunc);y=null}}},_onTimeExtentChangeHandler:function(k){this.suspended||(this._setTime(k),this.refresh(!0))},getImageUrl:function(k,g,b,w){},_imgSrcFunc:function(k){this._img_loading.src=k},_divAlphaImageFunc:function(k){c.set(this._img_loading,"filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+k+"', sizingMethod\x3d'scale')");this._onLoadHandler({currentTarget:this._img_loading})},
_onLoadHandler:function(k){k=k.currentTarget;var g=this._map;this._clearEventListeners(k);!g||g.__panning||g.__zooming?e.destroy(k):(this._img&&this._div.removeChild(this._img),this._img=k,g=k.style,this._startRect={left:0,top:0,width:parseInt(g.width,10),height:parseInt(g.height,10),marginLeft:parseInt(g.marginLeft||"0",10),zoom:1},this._div.appendChild(k),this.suspended||a.show(this._div),this._img_loading=null,k=this._dragOrigin,k.x=k.y=0,this.onUpdate());this._fireUpdateEnd()},_onErrorHandler:function(k){k=
k.currentTarget;c.set(k,"visibility","hidden");this._clearEventListeners(k);k=Error("Unable to load image: "+k.src);this.onError(k);this._fireUpdateEnd(k)},_clearEventListeners:function(k){B.disconnect(k._onload_connect);B.disconnect(k._onerror_connect);B.disconnect(k._onabort_connect);k._onload_connect=k._onerror_connect=k._onabort_connect=null},setUseMapTime:function(k,g){this.useMapTime=k;this._toggleTime();g||this.refresh(!0)},refresh:function(){this._map&&this._onExtentChangeHandler(this._map.extent)},
_onScaleHandler:function(k,g){var b={},w=t._css.names,x=this._img;if(x){c.set(x,w.transition,g?"none":w.transformName+" "+r+"ms ease");x._matrix=k;k=x._multiply?u.multiply(k,x._multiply):k;if(x._tdx||x._tdy)k=u.multiply(k,{xx:1,xy:0,yx:0,yy:1,dx:x._tdx,dy:x._tdy});b[w.transform]=t._css.matrix(k);c.set(x,b)}},_onZoomHandler:function(k,g,b){k=this._startRect;var w=k.width*g,x=k.height*g,z=k.marginLeft*g,D=this._img,E=q("ie");D&&(E&&8>E?c.set(D,{left:k.left-(w-k.width)*(b.x-k.left)/k.width+"px",top:k.top-
(x-k.height)*(b.y-k.top)/k.height+"px",zoom:g*k.zoom}):c.set(D,{left:k.left-(w-k.width)*(b.x-k.left)/k.width+"px",top:k.top-(x-k.height)*(b.y-k.top)/k.height+"px",width:w+"px",height:x+"px"}),null!=z&&0!==z&&c.set(D,{marginLeft:z+"px"}))},_exportMapImage:function(k,g,b){var w=this._exportMapImageHandler;g.token=this._getToken();m({url:k,content:g,callbackParamName:"callback",load:function(x,z){w(x,z,b)},error:d.defaults.io.errorHandler})},_exportMapImageHandler:function(k,g,b){k=new n(k);this.onMapImageExport(k);
b&&b(k)},onMapImageExport:function(){},setOpacity:function(k){if(this.opacity!=k)this.onOpacityChange(this.opacity=k)},onOpacityChange:function(){},_opacityChangeHandler:function(k){var g=8===q("ie")?this._img:this._div;c.set(g,"opacity",k)}});l.setObject("layers.DynamicMapServiceLayer",f,t);return f})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k){var g=f([d],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(b,w){this._attrs={};b&&e.isString(b)?this._url=n.urlToObject(this.url=n.normalize(b)):(this.url=this._url=null,(w=w||b)&&(w.layerDefinition||w.query)&&(w=null));this.spatialReference=new r(4326);this.initialExtent=new k(-180,-90,180,90,new r(4326));this._map=this._div=
null;this.normalization=!0;w&&(w.id&&(this.id=w.id),this.arcgisProps=w.arcgisProps,this.parentLayer=w.parentLayer,!1===w.visible&&(this.visible=!1),m.isDefined(w.opacity)&&(this.opacity=w.opacity),m.isDefined(w.minScale)&&this.setMinScale(w.minScale),m.isDefined(w.maxScale)&&this.setMaxScale(w.maxScale),this.attributionDataUrl=w.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,m.isDefined(w.showAttribution)&&(this.showAttribution=w.showAttribution),this.className=w.className,
this.refreshInterval=w.refreshInterval||0);this._errorHandler=e.hitch(this,this._errorHandler);this._scheduledRefresh=e.hitch(this,this._scheduledRefresh);this.refresh=e.hitch(this,this.refresh);if(this.managedSuspension){var x=this._setMap;this._setMap=function(z){var D=x.apply(this,arguments);this._fireAttach(z);this.evaluateSuspension();if(this.suspended&&!z.loaded)var E=l.connect(z,"onLoad",this,function(){l.disconnect(E);E=null;this.evaluateSuspension()});return D}}this.registerConnectEvents()},
id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attached:!1,attributionDataUrl:"",hasAttributionData:!1,showAttribution:!0,refreshInterval:0,_errorHandler:function(b){this.loaded||(this.loadError=b);this.onError(b)},_setMap:function(b,w,x,z){this._map=b;this._lyrZEHandle=l.connect(b,"onZoomEnd",this,this._processMapScale);if(b.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var D=l.connect(b,"onLoad",this,function(){l.disconnect(D);
D=null;this._processMapScale()})},_unsetMap:function(b,w){l.disconnect(this._lyrZEHandle);this._map=this._lyrZEHandle=null;this._resumedOnce=void 0;this.suspended=!0;this._fireDetach(b)},_fireAttach:function(b){this.attached=!0;this.onAttach({map:b})},_fireDetach:function(b){this.attached=!1;this.onDetach({map:b})},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart(),this._map&&this._map._incr())},
_fireUpdateEnd:function(b,w){this.updating&&(this.updating=!1,this.attr("data-updating"),this._refreshRT(),this.onUpdateEnd(b,w),this._map&&this._map._decr())},_getToken:function(){var b=this._url,w=this.credential;return b&&b.query&&b.query.token||w&&w.token||void 0},_findCredential:function(){this.credential=q.id&&this._url&&q.id.findCredential(this._url.path)},_useSSL:function(){var b=this._url,w=/^http:/i;this.url&&(this.url=this.url.replace(w,"https:"));b&&b.path&&(b.path=b.path.replace(w,"https:"))},
refresh:function(b){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(b){this.setScaleRange(b)},setMaxScale:function(b){this.setScaleRange(null,b)},setScaleRange:function(b,w){var x=m.isDefined(b),z=m.isDefined(w);this.loaded||(this._hasMin=this._hasMin||x,this._hasMax=this._hasMax||z);var D=this.minScale,E=this.maxScale;this.minScale=(x?b:this.minScale)||0;this.maxScale=(z?w:this.maxScale)||0;if(D!==this.minScale||E!==this.maxScale)this.onScaleRangeChange(),
this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},
_resume:function(){this.suspended=!1;this.attr("data-suspended");var b=void 0===this._resumedOnce,w=this.className,x=this._attrs,z=this.getNode(),D;if(b){this._resumedOnce=!0;if(w&&z){var E=z.getAttribute("class")||"";(new RegExp("(^|\\s)"+w+"(\\s|$)","i")).test(E)||z.setAttribute("class",E+((E?" ":"")+w))}if(x&&z)for(D in x)x.hasOwnProperty(D)&&z.setAttribute(D,x[D])}this._refreshRT();this.onResume({firstOccurrence:b});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var b=
this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();b!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},isVisibleAtScale:function(b){return b?g.prototype._isMapAtVisibleScale.apply(this,arguments):!1},_isMapAtVisibleScale:function(b,w){if(!(b||this._map&&this._map.loaded))return!1;var x=this._map;b=b||x.getScale();var z=this.minScale,D=this.maxScale,E=!z,C=!D,y;w&&(y=x.width>x.height?x.width:x.height);E||(b<=z?E=!0:w&&(E=Math.abs(z-b)/z<1/
y));C||(b>=D?C=!0:w&&(C=Math.abs(D-b)/D<1/y));return E&&C},getAttributionData:function(){var b=this.attributionDataUrl,w=new c(h._dfdCanceller);this.hasAttributionData&&b?(w._pendingDfd=a({url:b,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),w._pendingDfd.then(function(x){w.callback(x)},function(x){w.errback(x)})):(b=Error("Layer does not have attribution data"),b.log=!!B.isDebug,w.errback(b));return w},getResourceInfo:function(){var b=this.resourceInfo;return e.isString(b)?u.fromJson(b):
e.clone(b)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(b,w){var x=this.getNode();if("data-reference"===b&&11>t("ie"))return this;x&&(null==w?x.removeAttribute(b):x.setAttribute(b,w));this._attrs&&(null==w?delete this._attrs[b]:this._attrs[b]=w);return this},setRefreshInterval:function(b){var w=this.refreshInterval;this.refreshInterval=b;this._toggleRT(!1);b&&this._toggleRT(!0);if(w!==b)this.onRefreshIntervalChange();return this},_toggleRT:function(b){b&&
this.refreshInterval?(clearInterval(this._refreshTimer),this._refreshTimer=setInterval(this._scheduledRefresh,6E4*this.refreshInterval)):this._refreshTimer&&(clearInterval(this._refreshTimer),this._refreshTimer=null)},_refreshRT:function(){this._toggleRT(!1);this._toggleRT(!0)},_scheduledRefresh:function(){this.onRefreshTick();!this._map||this.suspended||this.updating||this.refresh({scheduled:!0})},_refreshTS:null,_reCheckTS:/[\?&]_ts=/ig,_reReplaceTS:/([\?&]_ts=)[0-9]+/ig,addTimestampToURL:function(b){var w=
this._refreshTS;w&&(b=this._reCheckTS.test(b)?b.replace(this._reReplaceTS,"$$$1"+w):b+((-1===b.indexOf("?")?"?":"\x26")+"_ts\x3d"+w));return b},setNormalization:function(b){this.normalization=b},setVisibility:function(b){this.visible!==b&&(this.visible=b,this.onVisibilityChange(this.visible),this.evaluateSuspension());this.attr("data-hidden",b?null:"")},onLoad:function(){},onAttach:function(b){},onDetach:function(b){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},
onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onRefreshTick:function(){},onError:function(){}});e.setObject("layers.Layer",g,q);return g})},"esri/layers/MapImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/has ../kernel ../domUtils ../geometry/Extent".split(" "),function(f,B,l,e,c,u,t){f=f(null,{declaredClass:"esri.layers.MapImage",constructor:function(d){B.mixin(this,
d);this.extent=new t(this.extent)},visible:!0,opacity:1,getLayer:function(){return this._layer},getNode:function(){return this._node},show:function(){if(!this.visible){this.visible=!0;var d=this._node,q=this._layer,m;if(d){if(m=q&&q._div)q.suspended||q._setPos(d,m._left,m._top),(q._active||m).appendChild(d);u.show(d)}}},hide:function(){if(this.visible){this.visible=!1;var d=this._node;d&&(u.hide(d),d.parentNode&&d.parentNode.removeChild(d))}},setOpacity:function(d){var q=this._node;this.opacity=d;
q&&l.set(q,"opacity",d)}});B.setObject("layers.MapImage",f,c);return f})},"esri/layers/ArcGISMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../request ../SpatialReference ../geometry/Extent ./LayerInfo".split(" "),function(f,B,l,e,c,u,t,d,q,m){f=f(null,{declaredClass:"esri.layers.ArcGISMapServiceLayer",infoTemplates:null,constructor:function(a,h){this.layerInfos=[];h&&(this.infoTemplates=h.infoTemplates||null);a=this._params={};if(h=
this._url.query?this._url.query.token:null)a.token=h},setInfoTemplates:function(a){this.infoTemplates=a},_load:function(){t({url:this._url.path,content:B.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler})},spatialReference:null,initialExtent:null,fullExtent:null,description:null,units:null,_initLayer:function(a,h){try{this._findCredential();(this.credential&&this.credential.ssl||a&&a._ssl)&&this._useSSL();this.description=a.description;this.copyright=
a.copyrightText;this.spatialReference=a.spatialReference&&new d(a.spatialReference);this.initialExtent=a.initialExtent&&new q(a.initialExtent);this.fullExtent=a.fullExtent&&new q(a.fullExtent);this.units=a.units;this.maxRecordCount=a.maxRecordCount;this.maxImageHeight=a.maxImageHeight;this.maxImageWidth=a.maxImageWidth;this.supportsDynamicLayers=a.supportsDynamicLayers;var n=this.layerInfos=[],r=a.layers,k=this._defaultVisibleLayers=[];l.forEach(r,function(g,b){n[b]=new m(g);g.defaultVisibility&&
k.push(g.id)});this.visibleLayers||(this.visibleLayers=k);this.version=a.currentVersion;this.cimVersion=a.cimVersion;this.version||(this.version="capabilities"in a||"tables"in a?10:"supportedImageFormatTypes"in a?9.31:9.3);this.capabilities=a.capabilities;u.isDefined(a.minScale)&&!this._hasMin&&this.setMinScale(a.minScale);u.isDefined(a.maxScale)&&!this._hasMax&&this.setMaxScale(a.maxScale)}catch(g){this._errorHandler(g)}}});B.setObject("layers.ArcGISMapServiceLayer",f,c);return f})},"esri/layers/LayerInfo":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../lang"],function(f,B,l,e,c){f=f(null,{declaredClass:"esri.layers.LayerInfo",constructor:function(u){B.mixin(this,u)},toJson:function(){return c.fixJson({defaultVisibility:this.defaultVisibility,id:this.id,maxScale:this.maxScale,minScale:this.minScale,name:this.name,parentLayerId:this.parentLayerId,subLayerIds:this.subLayerIds})}});B.setObject("layers.LayerInfo",f,e);return f})},"esri/layers/TimeInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../TimeExtent ./TimeReference ./LayerTimeOptions".split(" "),
function(f,B,l,e,c,u,t){f=f(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(d){null!==d&&(B.mixin(this,d),d.exportOptions&&(this.exportOptions=new t(d.exportOptions)),this.timeExtent=null,d.timeExtent&&2===d.timeExtent.length&&(this.timeExtent=new c(d.timeExtent)),this.timeReference=new u(d.timeReference))}});B.mixin(f,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",
UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",UNIT_YEARS:"esriTimeUnitsYears"});B.setObject("layers.TimeInfo",f,e);return f})},"esri/TimeExtent":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel"],function(f,B,l,e){var c=f(null,{declaredClass:"esri.TimeExtent",constructor:function(u){if(1<arguments.length)this._create(arguments[0],arguments[1]);
else if(u)if(B.isArray(u)){var t=u[0],d=u[1];this.startTime=null===t||"null"===t?null:new Date(t);this.endTime=null===d||"null"===d?null:new Date(d)}else u instanceof Date&&this._create(u,null)},offset:function(u,t){var d=new c,q=this.startTime,m=this.endTime;q&&(d.startTime=this._getOffsettedDate(q,u,t));m&&(d.endTime=this._getOffsettedDate(m,u,t));return d},intersection:function(u){return this._intersection(this,u)},toJson:function(){var u=[],t=this.startTime;u.push(t?t.getTime():"null");t=this.endTime;
u.push(t?t.getTime():"null");return u},_create:function(u,t){this.startTime=u?new Date(u.getTime()):null;this.endTime=t?new Date(t.getTime()):null},_refData:{esriTimeUnitsMilliseconds:{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},esriTimeUnitsSeconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},esriTimeUnitsMinutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},esriTimeUnitsHours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},esriTimeUnitsDays:{getter:"getUTCDate",
setter:"setUTCDate",multiplier:1},esriTimeUnitsWeeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},esriTimeUnitsMonths:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},esriTimeUnitsYears:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},esriTimeUnitsDecades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},esriTimeUnitsCenturies:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(u,t){if(u&&t){var d=u.startTime;u=u.endTime;
var q=t.startTime;t=t.endTime;d=d?d.getTime():-Infinity;q=q?q.getTime():-Infinity;u=u?u.getTime():Infinity;t=t?t.getTime():Infinity;var m,a;q>=d&&q<=u?m=q:d>=q&&d<=t&&(m=d);u>=q&&u<=t?a=u:t>=d&&t<=u&&(a=t);if(isNaN(m)||isNaN(a))return null;d=new c;d.startTime=-Infinity===m?null:new Date(m);d.endTime=Infinity===a?null:new Date(a);return d}return null},_getOffsettedDate:function(u,t,d){var q=this._refData;u=new Date(u.getTime());t&&d&&(q=q[d],u[q.setter](u[q.getter]()+t*q.multiplier));return u}});return e.TimeExtent=
c})},"esri/layers/TimeReference":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,e){f=f(null,{declaredClass:"esri.layers.TimeReference",constructor:function(c){c&&B.mixin(this,c)}});B.setObject("layers.TimeReference",f,e);return f})},"esri/layers/LayerTimeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(f,B,l,e,c){f=f(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(u){u&&
B.mixin(this,u)},toJson:function(){return c.fixJson({timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime})}});B.setObject("layers.LayerTimeOptions",f,e);return f})},"esri/layers/ImageParameters":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang ../layerUtils".split(" "),function(f,B,l,e,c,u,t,d){B=B(null,{declaredClass:"esri.layers.ImageParameters",constructor:function(){this.layerDefinitions=
[]},bbox:null,extent:null,width:null,height:null,dpi:null,format:null,imageSpatialReference:null,layerOption:null,layerIds:null,transparent:null,timeExtent:null,layerTimeOptions:null,toJson:function(q){this.bbox&&f.deprecated(this.declaredClass+" : Property 'bbox' deprecated. Use property 'extent'.");var m=this.bbox||this.extent;m=m&&q&&m._normalize(!0);q=this.layerOption;var a=m?m.spatialReference.wkid||e.toJson(m.spatialReference.toJson()):null,h=this.imageSpatialReference;m={dpi:this.dpi,format:this.format,
transparent:this.transparent,size:null!==this.width&&null!==this.height?this.width+","+this.height:null,bbox:m?m.xmin+","+m.ymin+","+m.xmax+","+m.ymax:null,bboxSR:a,layers:q?q+":"+this.layerIds.join(","):null,imageSR:h?h.wkid||e.toJson(h.toJson()):a};m.layerDefs=d._serializeLayerDefinitions(this.layerDefinitions);q=this.timeExtent;m.time=q?q.toJson().join(","):null;m.layerTimeOptions=d._serializeTimeOptions(this.layerTimeOptions);return t.filter(m,function(n){if(null!==n)return!0})}});l.mixin(B,{LAYER_OPTION_SHOW:"show",
LAYER_OPTION_HIDE:"hide",LAYER_OPTION_INCLUDE:"include",LAYER_OPTION_EXCLUDE:"exclude"});l.setObject("layers.ImageParameters",B,u);return B})},"esri/layers/DynamicLayerInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerInfo ./LayerMapSource ./LayerDataSource".split(" "),function(f,B,l,e,c,u,t,d){f=f(u,{declaredClass:"esri.layers.DynamicLayerInfo",defaultVisibility:!0,parentLayerId:-1,maxScale:0,minScale:0,constructor:function(q){q&&(q.source?q="mapLayer"===
q.source.type?new t(q.source):new d(q.source):(q=new t,q.mapLayerId=this.id),this.source=q)},toJson:function(){var q=this.inherited(arguments);q.source=this.source&&this.source.toJson();return c.fixJson(q)}});B.setObject("layers.DynamicLayerInfo",f,e);return f})},"esri/layers/LayerMapSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource".split(" "),function(f,B,l,e,c,u){f=f(u,{declaredClass:"esri.layers.LayerMapSource",type:"mapLayer",toJson:function(){return c.fixJson({type:"mapLayer",
mapLayerId:this.mapLayerId,gdbVersion:this.gdbVersion})}});B.setObject("layers.LayerMapSource",f,e);return f})},"esri/layers/LayerSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,e){f=f(null,{declaredClass:"esri.layers.LayerSource",type:null,constructor:function(c){c&&B.mixin(this,c)},toJson:function(){}});B.setObject("layers.LayerSource",f,e);return f})},"esri/layers/LayerDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource".split(" "),
function(f,B,l,e,c,u,t,d,q,m){f=f(u,{declaredClass:"esri.layers.LayerDataSource",type:"dataLayer",constructor:function(a){if(a&&a.dataSource){switch(a.dataSource.type){case "table":a=new t(a.dataSource);break;case "queryTable":a=new d(a.dataSource);break;case "joinTable":a=new q(a.dataSource);break;case "raster":a=new m(a.dataSource);break;default:a=a.dataSource}this.dataSource=a}},toJson:function(){var a={type:"dataLayer",dataSource:this.dataSource&&this.dataSource.toJson()};return c.fixJson(a)}});
B.setObject("layers.LayerDataSource",f,e);return f})},"esri/layers/TableDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(f,B,l,e,c,u){f=f(u,{declaredClass:"esri.layers.TableDataSource",toJson:function(){return c.fixJson({type:"table",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName,gdbVersion:this.gdbVersion})}});B.setObject("layers.TableDataSource",f,e);return f})},"esri/layers/DataSource":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,e){f=f(null,{declaredClass:"esri.layers.DataSource",constructor:function(c){c&&B.mixin(this,c)},toJson:function(){}});B.setObject("layers.DataSource",f,e);return f})},"esri/layers/QueryDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ../SpatialReference".split(" "),function(f,B,l,e,c,u,t){f=f(u,{declaredClass:"esri.layers.QueryDataSource",constructor:function(d){d&&(d.oidFields&&B.isString(d.oidFields)&&
(this.oidFields=d.oidFields.split(",")),d.spatialReference&&(this.spatialReference=new t(d.spatialReference)))},toJson:function(){var d={type:"queryTable",workspaceId:this.workspaceId,query:this.query,oidFields:this.oidFields&&this.oidFields.join(),spatialReference:this.spatialReference&&this.spatialReference.toJson()};if(this.geometryType){var q="point"===this.geometryType.toLowerCase()?"esriGeometryPoint":"multipoint"===this.geometryType.toLowerCase()?"esriGeometryMultipoint":"polyline"===this.geometryType.toLowerCase()?
"esriGeometryPolyline":"polygon"===this.geometryType.toLowerCase()?"esriGeometryPolygon":this.geometryType;d.geometryType=q}return c.fixJson(d)}});B.setObject("layers.QueryDataSource",f,e);return f})},"esri/layers/JoinDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ./LayerMapSource ./TableDataSource ./QueryDataSource ./RasterDataSource".split(" "),function(f,B,l,e,c,u,t,d,q,m){var a=f(u,{declaredClass:"esri.layers.JoinDataSource",constructor:function(h){h&&
(h.leftTableSource&&(this.leftTableSource=this._createLayerSource(h.leftTableSource)),h.rightTableSource&&(this.rightTableSource=this._createLayerSource(h.rightTableSource)))},_createLayerSource:function(h){if("mapLayer"===h.type)var n=new t(h);else{n={type:"dataLayer"};switch(h.dataSource.type){case "table":var r=new d(h.dataSource);break;case "queryTable":r=new q(h.dataSource);break;case "joinTable":r=new a(h.dataSource);break;case "raster":r=new m(h.dataSource);break;default:r=h.dataSource}n.dataSource=
r;n.toJson=function(){var k={type:"dataLayer",dataSource:r.toJson()};return c.fixJson(k)}}return n},toJson:function(){var h={type:"joinTable",leftTableSource:this.leftTableSource&&this.leftTableSource.toJson(),rightTableSource:this.rightTableSource&&this.rightTableSource.toJson(),leftTableKey:this.leftTableKey,rightTableKey:this.rightTableKey};var n="left-outer-join"===this.joinType.toLowerCase()?"esriLeftOuterJoin":"left-inner-join"===this.joinType.toLowerCase()?"esriLeftInnerJoin":this.joinType;
h.joinType=n;return c.fixJson(h)}});B.setObject("layers.JoinDataSource",a,e);return a})},"esri/layers/RasterDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(f,B,l,e,c,u){f=f(u,{declaredClass:"esri.layers.RasterDataSource",toJson:function(){return c.fixJson({type:"raster",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName})}});B.setObject("layers.RasterDataSource",f,e);return f})},"arcgisonline/pages/components/ConfirmDialog":function(){define(["require",
"exports","preact","preact/hooks"],function(f,B,l,e){Object.defineProperty(B,"__esModule",{value:!0});B.default=function(c){var u=c.autoCloseOnOk,t=c.hideCancel,d=c.hideClose,q=c.renderHtmlDescription,m=c.strings,a=c.onOk,h=c.onCancel,n=c.onBack,r=c.width,k=void 0===r?"m":r;r=c.color;r=void 0===r?void 0:r;var g=c.okColor;g=void 0===g?"blue":g;var b=c.cancelColor;b=void 0===b?"blue":b;var w=c.okDisabled;w=void 0===w?!1:w;var x=c.loading;x=void 0===x?!1:x;var z=c.showProcessingInButton;z=void 0===z?
!1:z;var D=c.noticeMessage,E=c.noticeLinkText;c=c.noticeLinkURL;var C=(0,e.useState)(!1),y=C[0],v=C[1];C=(0,e.useState)(!1);var A=C[0],G=C[1],F=(0,e.useRef)();(0,e.useEffect)(function(){var H,L;F.current&&(d||(null===(L=(H=F.current).setFocus)||void 0===L?void 0:L.call(H)),setTimeout(function(){v(!0)},15))},[F.current]);(0,e.useEffect)(function(){F.current&&("number"===typeof k?F.current.style.setProperty("--calcite-modal-width","".concat(k,"px")):F.current.widthScale=k)},[F.current,k]);C=function(){A||
(v(!1),h())};return(0,l.h)("calcite-modal",{open:y,role:"dialog","aria-modal":"true",ref:F,"data-test":"dialog",closeButtonDisabled:A||d,escapeDisabled:A,"aria-label":m.title,oncalciteModalClose:C,kind:"red"===r?"danger":"blue"===r?"info":"yellow"===r?"warning":void 0,outsideCloseDisabled:!0,class:"bring-modal-to-front"},(0,l.h)("h3",{slot:"header",class:"font-size-2 trailer-0","data-test":"title"},m.title),!z&&A?(0,l.h)("calcite-loader",{slot:"content",class:"leader-half trailer-half",hidden:!A,
label:"processing-loader",text:null===m||void 0===m?void 0:m.processing,"data-test":"loader"}):(0,l.h)("div",{slot:"content",class:"position-relative leader-half trailer-half","data-test":"description"},(0,l.h)(l.Fragment,null,D&&(0,l.h)("calcite-notice",{open:!0,icon:"information",class:"trailer-1"},(0,l.h)("div",{slot:"message"},D),c&&(0,l.h)("calcite-link",{slot:"link",href:c,target:"_blank"},E)),q?(0,l.h)("div",{dangerouslySetInnerHTML:{__html:m.description}}):m.description)),(null===m||void 0===
m?0:m.back)&&n?(0,l.h)("calcite-button",{slot:"back",kind:"neutral",width:"full",onClick:function(H){n(H)}},null===m||void 0===m?void 0:m.back):null,(0,l.h)("calcite-button",{slot:"primary",width:"full",kind:"red"===g?"danger":"brand",loading:x||z&&A,appearance:"solid",disabled:A||w,onClick:function(){u?(v(!1),a()):(G(!0),a(function(){v(!1)}))},"data-test":"ok"},z&&A?null===m||void 0===m?void 0:m.processing:null===m||void 0===m?void 0:m.ok),t?null:(0,l.h)("calcite-button",{slot:"secondary",width:"full",
appearance:"outline",kind:"red"===b?"danger":"brand",onClick:C,"data-test":"cancel",disabled:A},null===m||void 0===m?void 0:m.cancel))}})},"arcgisonline/pages/utils/date":function(){define(["require","exports","tslib"],function(f,B,l){function e(b){b=b||g;var w=document.documentElement.lang;w=r[w]||w;k.has(b)||k.set(b,new Intl.DateTimeFormat(w,b));return k.get(b)}function c(b){return n[b]||null}function u(b,w){w=c(w)||g;if("ar"===document.documentElement.lang&&JSON.stringify(w)===JSON.stringify(t)){b=
e(w).formatToParts(b).reduce(function(z,D){z[D.type]=D.value;return z},{});w=b.month;var x=b.day;return"".concat(b.year,"/").concat(w,"/").concat(x)}return e(w).format(b)}Object.defineProperty(B,"__esModule",{value:!0});B.format=B.convertDateFormatToIntlOptions=B.getDateTimeFormatter=B.dateFormats=B.dictionary=void 0;f={year:"numeric",month:"numeric",day:"numeric"};var t={year:"numeric",month:"2-digit",day:"2-digit"},d={year:"numeric",month:"long",day:"numeric"},q={year:"numeric",month:"short",day:"numeric"},
m={year:"numeric",month:"long",weekday:"long",day:"numeric"},a={hour:"numeric",minute:"numeric"},h=l.__assign(l.__assign({},a),{second:"numeric"}),n={"short-date":f,"short-date-numeric":t,"short-date-no-year":{month:"numeric",day:"numeric"},"short-date-short-time":l.__assign(l.__assign({},f),a),"short-date-short-time-24":l.__assign(l.__assign(l.__assign({},f),a),{hour12:!1}),"short-date-long-time":l.__assign(l.__assign({},f),h),"short-date-long-time-24":l.__assign(l.__assign(l.__assign({},f),h),{hour12:!1}),
"short-date-le":f,"short-date-le-short-time":l.__assign(l.__assign({},f),a),"short-date-le-short-time-24":l.__assign(l.__assign(l.__assign({},f),a),{hour12:!1}),"short-date-le-long-time":l.__assign(l.__assign({},f),h),"short-date-le-long-time-24":l.__assign(l.__assign(l.__assign({},f),h),{hour12:!1}),"long-month-day-year":d,"long-month-day-year-short-time":l.__assign(l.__assign({},d),a),"long-month-day-year-short-time-24":l.__assign(l.__assign(l.__assign({},d),a),{hour12:!1}),"long-month-day-year-long-time":l.__assign(l.__assign({},
d),h),"long-month-day-year-long-time-24":l.__assign(l.__assign(l.__assign({},d),h),{hour12:!1}),"day-short-month-year":q,"day-short-month-year-short-time":l.__assign(l.__assign({},q),a),"day-short-month-year-short-time-24":l.__assign(l.__assign(l.__assign({},q),a),{hour12:!1}),"day-short-month-year-long-time":l.__assign(l.__assign({},q),h),"day-short-month-year-long-time-24":l.__assign(l.__assign(l.__assign({},q),h),{hour12:!1}),"long-date":m,"long-date-short-time":l.__assign(l.__assign({},m),a),
"long-date-short-time-24":l.__assign(l.__assign(l.__assign({},m),a),{hour12:!1}),"long-date-long-time":l.__assign(l.__assign({},m),h),"long-date-long-time-24":l.__assign(l.__assign(l.__assign({},m),h),{hour12:!1}),"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},weekday:{weekday:"long"},"short-weekday":{weekday:"short"},year:{year:"numeric"},"short-time":a,"long-time":h,"short-date-numeric-short-time":l.__assign(l.__assign({},t),a)};B.dictionary=new Map;
[["shortDate","short-date"],["shortDateNumeric","short-date-numeric"],["shortDateNoYear","short-date-no-year"],["shortDateShortTime","short-date-short-time"],["shortDateShortTime24","short-date-short-time-24"],["shortDateLongTime","short-date-long-time"],["shortDateLongTime24","short-date-long-time-24"],["shortDateLE","short-date-le"],["shortDateLEShortTime","short-date-le-short-time"],["shortDateLEShortTime24","short-date-le-short-time-24"],["shortDateLELongTime","short-date-le-long-time"],["shortDateLELongTime24",
"short-date-le-long-time-24"],["longMonthDayYear","long-month-day-year"],["longMonthDayYearShortTime","long-month-day-year-short-time"],["longMonthDayYearShortTime24","long-month-day-year-short-time-24"],["longMonthDayYearLongTime","long-month-day-year-long-time"],["longMonthDayYearLongTime24","long-month-day-year-long-time-24"],["dayShortMonthYear","day-short-month-year"],["dayShortMonthYearShortTime","day-short-month-year-short-time"],["dayShortMonthYearShortTime24","day-short-month-year-short-time-24"],
["dayShortMonthYearLongTime","day-short-month-year-long-time"],["dayShortMonthYearLongTime24","day-short-month-year-long-time-24"],["longDate","long-date"],["longDateShortTime","long-date-short-time"],["longDateShortTime24","long-date-short-time-24"],["longDateLongTime","long-date-long-time"],["longDateLongTime24","long-date-long-time-24"],["longMonthYear","long-month-year"],["shortMonthYear","short-month-year"],["weekday","weekday"],["shortWeekday","short-weekday"],["year","year"]].forEach(function(b){B.dictionary.set(b[0],
b[1])});B.dateFormats=B.dictionary.values;var r={ar:"ar-u-nu-latn-ca-gregory",sr:"sr-Latn",bs:"bs-Cyrl",it_CH:"it-CH"},k=new WeakMap,g=n["short-date-short-time"];B.getDateTimeFormatter=e;B.convertDateFormatToIntlOptions=c;B.format=u;B.default={format:u,getDateTimeFormatter:e,convertDateFormatToIntlOptions:c,dictionary:B.dictionary,dateFormats:B.dateFormats}})},"arcgisonline/pages/utils/culture":function(){define(["require","exports","tslib","dojo/string","dojo/_base/kernel"],function(f,B,l,e,c){e=
l.__importDefault(e);c=l.__importDefault(c);return function(){function u(){}u.getString=function(t,d,q){var m,a="id ja ko th vi zh-cn zh-hk zh-tw".split(" "),h="en ca da de el es et fi hi hu it nb nl pt-pt sv tr".split(" "),n=null!==(m=u.getRootLocale(c.default.locale))&&void 0!==m?m:"en";q?q.number=d:q={number:d};return 1===d||-1<a.indexOf(n)?e.default.substitute(t.single,q):1!==d&&-1<h.indexOf(n)?e.default.substitute(t.multiple,q):e.default.substitute(t.unknown,q)};u.stripCultureFormat=function(t,
d){return(null===t||void 0===t?0:t.length)&&(null===d||void 0===d?0:d.length)&&(d=t.indexOf("-"+d),-1<d)?t.substring(0,d):t};u.getRootLocale=function(t){if(null===t||void 0===t?0:t.length){t=t.split("-")[0];if(null===t||void 0===t?0:t.length)t=t.toLowerCase();return t}return t};u.getLocaleFormat=function(t){if(null===t||void 0===t?0:t.length)if(t=t.split("-"),1<t.length)return t[1].toLowerCase()};u.isRightToLeft=function(t){return-1<["ar","he"].indexOf(t)};u.currentLocaleIsRightToLeft=function(){return u.isRightToLeft(document.documentElement.lang)};
u.getDatePickerLocale=function(t){return-1<t.indexOf("-")?(t=t.split("-"),"".concat(t[0],"-").concat(t[1].toUpperCase())):"bs"===t?"bs-Cyrl":t};u.getTrialLocale=function(t){var d=["pt-br","pt-pt","zh-cn","zh-hk","zh-tw"];return-1<(null===t||void 0===t?void 0:t.indexOf("-"))&&-1===d.indexOf(t)?this.getRootLocale(t):t};u.getActualCulture=function(t,d){var q,m=null!==(q=null===t||void 0===t?void 0:t.toLowerCase())&&void 0!==q?q:"",a=m.split("-");if(1<a.length){if(q=d.filter(function(h){return h.culture===
m}).shift())return m;q=d.filter(function(h){return h.culture===a[0]}).shift();if(null===q||void 0===q?0:q.cultureFormats){if(q.cultureFormats.filter(function(h){return h.format===a[1]}).shift())return q.culture}else if(q)return q.culture}return t};u.getSelectedFormat=function(t,d){return d.filter(function(q){return q.format===t}).shift()};u.getPercentString=function(t){var d=c.default.locale.toLowerCase();return"ar"===d?"%".concat(100*t):t.toLocaleString(d,{style:"percent"})};u.getCurrentLocale=function(){return c.default.locale.toLowerCase()};
u.getPercentLabel=function(t){return["ar","he","tr"].includes(document.documentElement.lang)?"%".concat(t):"".concat(t,"%")};return u}()})},"arcgisonline/pages/utils/icons":function(){define(["require","exports","tslib","dojo/_base/kernel"],function(f,B,l,e){function c(q){var m,a,h=q.paths,n=q.size,r=q.direction,k=q.rtl,g=q.title,b=q.titleId;q=q.inline?"icon-inline--on-".concat(null!==r&&void 0!==r?r:"left"):"";r=null!==(a=null===(m=e.default.locale)||void 0===m?void 0:m.split("-")[0])&&void 0!==
a?a:"en";m=!0===k||k===r?"icon-inline--flip-rtl":"";m="icon-inline ".concat(q," ").concat(m);h=Array.isArray(h)?u(h):'\x3cpath d\x3d"'.concat(h,'"/\x3e');k=(a=g&&b)?'aria-labelledby\x3d"'.concat(b,'"'):'role\x3d"none" focusable\x3d"false" aria-hidden\x3d"true"';return'\x3csvg viewBox\x3d"0 0 '.concat(n," ").concat(n,'" width\x3d"').concat(n,'" height\x3d"').concat(n,'" class\x3d"').concat(m,'" ').concat(k,"\x3e\n    ").concat(a?'\x3ctitle id\x3d"'.concat(b,'" \x3e').concat(g,"\x3c/title\x3e"):"",
"\n    ").concat(h,"\n  \x3c/svg\x3e")}function u(q){return q.reduce(function(m,a){var h=a.opacity?'opacity\x3d"'.concat(a.opacity,'" '):"";return"".concat(m," \x3cpath ").concat(h,' d\x3d"').concat(a.d,'" /\x3e')},"")}e=l.__importDefault(e);var t={"app-launcher":{24:"M11.5 18.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM12 20h-1v-1h1zM3.5 2.05A1.45 1.45 0 104.95 3.5 1.45 1.45 0 003.5 2.05zM4 4H3V3h1zm7.5 6.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM12 12h-1v-1h1zm-8.5-1.95a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM4 12H3v-1h1zm-.5 6.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM4 20H3v-1h1zM19.5 4.95a1.45 1.45 0 10-1.45-1.45 1.45 1.45 0 001.45 1.45zM19 3h1v1h-1zm.5 7.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM20 12h-1v-1h1zm-8.5-9.95a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM12 4h-1V3h1zm7.5 14.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM20 20h-1v-1h1z"},
apps:{16:"M6 1H2a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zm0 5H2V2h4zm4 1h4a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1zm4-1h-4V2h4zm-4 9h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1zm4-1h-4v-4h4zM6 9H2a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1zm0 5H2v-4h4z",24:"M9.5 2h-6A1.502 1.502 0 0 0 2 3.5v6A1.502 1.502 0 0 0 3.5 11h6A1.502 1.502 0 0 0 11 9.5v-6A1.502 1.502 0 0 0 9.5 2zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM20.5 2h-6A1.502 1.502 0 0 0 13 3.5v6a1.502 1.502 0 0 0 1.5 1.5h6A1.502 1.502 0 0 0 22 9.5v-6A1.502 1.502 0 0 0 20.5 2zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM9.5 13h-6A1.502 1.502 0 0 0 2 14.5v6A1.502 1.502 0 0 0 3.5 22h6a1.502 1.502 0 0 0 1.5-1.5v-6A1.502 1.502 0 0 0 9.5 13zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM20.5 13h-6a1.502 1.502 0 0 0-1.5 1.5v6a1.502 1.502 0 0 0 1.5 1.5h6a1.502 1.502 0 0 0 1.5-1.5v-6a1.502 1.502 0 0 0-1.5-1.5zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5z",
32:"M13.25 3h-8.5A1.752 1.752 0 0 0 3 4.75v8.5A1.752 1.752 0 0 0 4.75 15h8.5A1.752 1.752 0 0 0 15 13.25v-8.5A1.752 1.752 0 0 0 13.25 3zM14 13.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5A.751.751 0 0 1 4.75 4h8.5a.751.751 0 0 1 .75.75zM27.25 3h-8.5A1.752 1.752 0 0 0 17 4.75v8.5A1.752 1.752 0 0 0 18.75 15h8.5A1.752 1.752 0 0 0 29 13.25v-8.5A1.752 1.752 0 0 0 27.25 3zM28 13.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5a.751.751 0 0 1 .75-.75h8.5a.751.751 0 0 1 .75.75zM27.25 17h-8.5A1.752 1.752 0 0 0 17 18.75v8.5A1.752 1.752 0 0 0 18.75 29h8.5A1.752 1.752 0 0 0 29 27.25v-8.5A1.752 1.752 0 0 0 27.25 17zM28 27.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5a.751.751 0 0 1 .75-.75h8.5a.751.751 0 0 1 .75.75zM13.25 17h-8.5A1.752 1.752 0 0 0 3 18.75v8.5A1.752 1.752 0 0 0 4.75 29h8.5A1.752 1.752 0 0 0 15 27.25v-8.5A1.752 1.752 0 0 0 13.25 17zM14 27.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5a.751.751 0 0 1 .75-.75h8.5a.751.751 0 0 1 .75.75z"},
"arcgis-online":{24:"M24 13.226a4.785 4.785 0 01-3.523 4.658L18.962 17h.633A3.694 3.694 0 0023 13.226a4.173 4.173 0 00-2.895-3.977l-.595-.193-.086-.62A6.164 6.164 0 0013.482 3a5.988 5.988 0 00-5.254 3.265l-.373.703-.769-.206a2.966 2.966 0 00-.763-.116 2.473 2.473 0 00-2.532 2.319l-.041.563-.503.255A4.026 4.026 0 001 13.37 3.614 3.614 0 004.405 17H6v1H4.405A4.606 4.606 0 010 13.37a5.04 5.04 0 012.795-4.479 3.47 3.47 0 013.528-3.244 3.952 3.952 0 011.02.15A6.971 6.971 0 0113.483 2a7.131 7.131 0 016.933 6.297A5.186 5.186 0 0124 13.226zm-6.764 4.78l.846.494-4.534 2.645L9.014 18.5l.846-.493-.734-.428-1.578.92 6 3.501 6-3.5-1.579-.92zm0-3l.846.494-4.534 2.645L9.014 15.5l.846-.493-.734-.428-1.578.92 6 3.501 6-3.5-1.579-.92zm2.312-2.506l-6 3.5-6-3.5 6-3.5zm-6 2.645l4.534-2.645-4.534-2.645L9.014 12.5z",
32:"M32 14.704a6.28 6.28 0 0 1-4.862 6.248l-.942-.55.738-.43A5.29 5.29 0 0 0 31 14.703a5.561 5.561 0 0 0-3.742-5.287l-.872-.297-.13-.911A8.153 8.153 0 0 0 18.462 1a7.848 7.848 0 0 0-6.859 4.294l-.556 1.045-1.146-.298a3.684 3.684 0 0 0-.923-.135 3.105 3.105 0 0 0-3.224 2.956l-.046.86-.765.394A5.37 5.37 0 0 0 2 14.897C2 17.521 4.157 20 6.438 20H9v1H6.437C3.592 21 1 18.092 1 14.897a6.369 6.369 0 0 1 3.486-5.67l.255-.131.016-.287a4.128 4.128 0 0 1 4.222-3.903 4.61 4.61 0 0 1 1.175.168l.382.099.185-.349A8.845 8.845 0 0 1 18.463 0a9.157 9.157 0 0 1 8.782 8.068l.044.304.29.099A6.559 6.559 0 0 1 32 14.704zm-7.591 6.74l1.12.654-7.075 4.128-7.074-4.128 1.188-.694-.794-.463-1.982 1.157 8.662 5.054 8.663-5.054-1.915-1.117zm-.123-3.542l1.31.765-7.075 4.128-7.074-4.128 1.31-.765-.793-.463-2.105 1.228 8.663 5.054 8.663-5.054-2.105-1.228zm2.899-2.849l-8.663 5.054-8.663-5.054L18.522 10zm-1.588 0l-7.076-4.127-7.074 4.128 7.074 4.127z"},
"arrow-left":{24:"M9.11 6.32L4.43 11H20v1H4.43l4.68 4.68-.707.707L2.517 11.5l5.886-5.887z"},"arrow-right":{16:"M2 8h10.26l-1.585-1.585.707-.707 2.81 2.81-2.81 2.808-.707-.707L12.295 9H2z",24:"M15.646 14.646L18.293 12H4v-1h14.293l-2.647-2.646.707-.707 3.854 3.853-3.854 3.854z"},"arrow-down":{32:"M16.5 27.207l-4.854-4.854.707-.707L16 25.293V5h1v20.293l3.646-3.646.707.707z"},attachment:{16:"M3.991 15.92a3.913 3.913 0 0 1-2.767-6.68L9.552.912a2.92 2.92 0 0 1 4.031 0 2.854 2.854 0 0 1 0 4.031l-8.001 7.998a1.833 1.833 0 0 1-2.527 0 1.789 1.789 0 0 1 0-2.526L8.72 4.751l.566.566-5.665 5.665a.985.985 0 0 0 0 1.394 1.009 1.009 0 0 0 1.395 0l8-7.998a2.05 2.05 0 0 0 0-2.899 2.098 2.098 0 0 0-2.898 0L1.79 9.805a3.11 3.11 0 0 0 0 4.403 3.186 3.186 0 0 0 4.403 0l6.555-6.555.566.567-6.554 6.554a3.905 3.905 0 0 1-2.77 1.146z"},
automation:{16:"M5 0v2H2v3h1V3h2v1h4V3h4v5.294L11.707 7 11 7.707l2.483 2.484.017-.017.017.017L16 7.707 15.293 7 14 8.294V2H9V0zm1 3V1h2v2zM.707 9L2 7.706V14h5v2h4v-2h3v-3h-1v2h-2v-1H7v1H3V7.706L4.293 9 5 8.293 2.517 5.809l-.017.017-.017-.017L0 8.293zM10 13v2H8v-2z"},browser:{32:"M2 28h28V5H2zm27-1H8V11h21zM3 6h26v4H3zm0 5h4v16H3zm24-3h-1V7h1z"},calculator:{16:"M14.5 16h-13A1.502 1.502 0 0 1 0 14.5v-13A1.502 1.502 0 0 1 1.5 0h13A1.502 1.502 0 0 1 16 1.5v13a1.502 1.502 0 0 1-1.5 1.5zM1.5 1a.501.501 0 0 0-.5.5v13a.501.501 0 0 0 .5.5h13a.501.501 0 0 0 .5-.5v-13a.501.501 0 0 0-.5-.5zM2 6V2h12v4zm11-1V3H3v2zm0 9h-2a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1zm0-1V8h-2v5zm-5 1H7a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1v-1H7v1zm-4 1H3a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1v-1H3v1zm4-3H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1V8H7v1zm-4 1H3a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1V8H3v1z"},
calendar:{16:"M14 1v1h1v2H1V2h1V1H0v14h16V1zm1 13H1V5h14zM5 2V1h6v1zM4 0v2H3V0zm8 2V0h1v2z"},"caret-right":{16:"M5 1.5l7 7-7 7zm1 11.586L10.586 8.5 6 3.914z"},"caret-down":{16:"M13.1 6L8 11.1 2.9 6z"},check:{16:"M2 8.689l.637-.636L5.5 10.727l8.022-7.87.637.637L5.5 12z",24:"M6.218 13.64l3.288 3.098 10.073-9.92.637.637L9.506 18.01 5.58 14.276z",32:"M12.5 22.142L6.59 16.42l.636-.636L12.5 20.87 25.721 7.8l.637.637L12.5 22.142"},"check-circle":{16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM3.735 8.346l.738-.738 2.084 2.088 4.97-4.97.738.737-5.708 5.705z",
24:"M7 13.689l.637-.636 2.863 2.674 7.022-6.87.637.637L10.5 17zM22.8 12.5A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.5 14.5 0 0 0 15.5 1zm0 28.1a13.6 13.6 0 1 1 13.6-13.6 13.615 13.615 0 0 1-13.6 13.6zM8.581 17.276l.637-.636 3.288 3.098 10.073-9.92.637.637-10.71 10.556z"},"check-circle-f":{16:"M8 .15A7.85 7.85 0 1 0 15.85 8 7.85 7.85 0 0 0 8 .15zM6.557 11.592L3.31 8.346l1.163-1.162L6.557 9.27l5.172-5.17 1.162 1.162z",
24:"M23 11.5A11.5 11.5 0 1 1 11.5 0 11.5 11.5 0 0 1 23 11.5zm-5.5-6.018l-8.5 8.5-3.5-3.5-2 2L9.018 18l.018-.018L11.018 16l8.5-8.5z",32:"M30 16A14 14 0 1 1 16 2a14 14 0 0 1 14 14zm-6.11-7.72L12.823 19.346 8.36 14.883l-2.486 2.486 6.95 6.95 13.554-13.553z"},"chevron-down":{16:"M13 5.293v1.414l-4.5 4.5-4.5-4.5V5.293l4.5 4.5z",24:"M19 8.293v1.414l-7.5 7.5-7.5-7.5V8.293l7.5 7.5z"},"chevron-down-f":{16:"M14 4.217v2.766l-6 6-6-6V4.217l6 6z"},"chevron-left":{16:"M10.707 12H9.293l-4.5-4.5 4.5-4.5h1.414l-4.5 4.5z",
24:"M6.293 12l7-7h1.414l-7 7 7 7h-1.414z"},"chevron-right":{16:"M5.293 3h1.414l4.5 4.5-4.5 4.5H5.293l4.5-4.5z",24:"M8.293 5h1.414l7.5 7.5-7.5 7.5H8.293l7.5-7.5z"},"chevron-up":{24:"M11.5 8.207l-7.5 7.5v-1.414l7.5-7.5 7.5 7.5v1.414z"},clock:{16:"M8 7h3v1H7V3h1zm4.803 5.803a7.5 7.5 0 1 1 0-10.606 7.5 7.5 0 0 1 0 10.606zm-.636-9.97A6.591 6.591 0 0 0 .927 7H2v1H.927A6.567 6.567 0 0 0 7 14.073v-1.38h1v1.38a6.591 6.591 0 0 0 4.167-11.24z"},collection:{16:"M10 10V0H0v10zM9 9H6.416c.007-.188.011-.353.014-.453a1.206 1.206 0 0 0 .545-1.058 1.28 1.28 0 0 0 .092-.15 1.143 1.143 0 0 0 .163-.056A2.782 2.782 0 0 0 9 7.461zM1 9V1h5.098a1.276 1.276 0 0 0-.28 1.041 1.26 1.26 0 0 0-.206.466 1.256 1.256 0 0 0-.52 1.185.696.696 0 0 0-.06.062 1.236 1.236 0 0 0-1.175.418 1.352 1.352 0 0 0-1.779 1.571 1.235 1.235 0 0 0 .333 1.568 1.287 1.287 0 0 0 .568 1.34A2.11 2.11 0 0 0 2.962 9zm3.123-.857c0-.313-.595-.223-.688-.41-.234-.467.395-.587.395-.958 0-.09-.047-.277-.191-.293-.202-.021-.254.088-.454.088a.232.232 0 0 1-.25-.207c0-.22.174-.322.174-.543 0-.144-.06-.224-.06-.367 0-.36.397-.586.692-.06.19.342.808.176.808-.38a.271.271 0 0 1 .25-.28c.199 0 .272.205.47.205.327 0 .316-.432.604-.586.353-.192.25-.604.205-.823-.018-.1.165-.287.264-.281.41.031.236-.308.236-.469 0-.258.353-.302.353-.56 0-.158-.132-.235-.132-.397 0-.424.623-.42.78-.822H9v5.449c-.367.057-1.053.165-1.335-.082-.151-.13-.147-.396-.352-.396-.276 0-.297.412-.573.412-.125 0-.184-.088-.31-.088-.26 0-.22.206-.22.465 0 .242-.322.29-.322.535 0 .098.088.135.088.234 0 .33-.588.286-.588.617 0 .026.044.293.044.293 0 .052-.007.287-.019.56h-1.45c-.002-.341.16-.643.16-.856zM16 5v11H5v-1h10V5zm-3 8H2v-1h10V2h1z",
24:"M17 17V2H2v15zm-1-1h-4.874a8.585 8.585 0 0 0 .03-1.017 1.45 1.45 0 0 0 .897-1.63 1.557 1.557 0 0 0 .381-.659 1.376 1.376 0 0 0 .811-.3 3.207 3.207 0 0 0 2.755.42zM3 16V3h8.81a1.483 1.483 0 0 0-.194 1.43 1.461 1.461 0 0 0-.472 1.029 1.47 1.47 0 0 0-.826 1.501 3.333 3.333 0 0 1 .063.37 1.957 1.957 0 0 0-.602.616 1.417 1.417 0 0 0-1.99.87 1.577 1.577 0 0 0-2.517 1.76.033.033 0 0 0 .02-.016c-.609 1.132-.186 1.97.634 2.256a1.509 1.509 0 0 0 .944 2.189 2.551 2.551 0 0 0-.14.995zm5.001-1.447c0-.528-1.006-.378-1.164-.695-.393-.785.668-.987.668-1.612 0-.154-.08-.47-.323-.497-.338-.034-.426.15-.767.15a.39.39 0 0 1-.422-.348c0-.372.297-.545.297-.917 0-.243-.1-.38-.1-.62a.597.597 0 0 1 .57-.62c.312 0 .446.254.595.52.324.579 1.365.294 1.365-.644a.456.456 0 0 1 .422-.473c.334 0 .459.348.793.348.552 0 .532-.73 1.017-.99.596-.322.422-1.019.348-1.39-.033-.165.279-.483.446-.473.694.052.397-.518.397-.792 0-.435.596-.506.596-.943 0-.27-.224-.396-.224-.668 0-.33.4-.628.883-.889H16v8.782c-.29.075-.54.136-.584.136-.503 0-1.117.07-1.48-.249-.256-.22-.249-.669-.596-.669-.466 0-.501.696-.967.696-.21 0-.31-.151-.52-.151a.342.342 0 0 0-.372.305v.483c0 .409-.547.49-.547.9 0 .166.15.23.15.396 0 .559-.994.484-.994 1.042 0 .172.077.336.077.496 0 .103-.015.456-.043.833H7.73c-.003-.58.27-1.096.27-1.447zM20 20H5v-1h14V5h1zm3-12v15H8v-1h14V8z"},
"content-none":{24:"M1 3v18h22V3zm21 17H2V4h20zM6.896 16.396L11.293 12 6.896 7.604l.707-.707L12 11.293l4.396-4.396.707.707L12.707 12l4.396 4.396-.707.707L12 12.707l-4.396 4.397z"},"copy-to-clipboard":{16:"M16 10H8.767l1.558 1.558-.707.707-2.81-2.81 2.81-2.809.707.707L8.678 9H16zM7 6H3v1h4zm-2 4H3V9h2zm2 3H3v-1h4zm5-2v4H2V3h1v1h8V3h1v5h1V2h-2V1H8.723a1.984 1.984 0 0 0-3.446 0H3v1H1v14h12v-5zM4 2h2v-.318A.682.682 0 0 1 6.682 1h.636A.682.682 0 0 1 8 1.682V2h2v1H4z"},credits:{16:"M10.5 5.05a5.45 5.45 0 1 0 5.45 5.45 5.457 5.457 0 0 0-5.45-5.45zm0 10.05a4.6 4.6 0 1 1 4.6-4.6 4.605 4.605 0 0 1-4.6 4.6zm0-1.2a3.404 3.404 0 0 1-3.398-3.3h.8a2.6 2.6 0 0 0 5.196 0h.8a3.404 3.404 0 0 1-3.398 3.3zm1.597-3.5a1.6 1.6 0 0 0-3.194 0h-.801a2.4 2.4 0 0 1 4.796 0zm-8.19.253a5.397 5.397 0 1 1 6.747-6.747A2.698 2.698 0 0 0 10.5 3.9a6.505 6.505 0 0 0-.693.04A4.588 4.588 0 1 0 3.94 9.806a6.418 6.418 0 0 0-.04.694c0 .052.003.103.006.153zm.272-2.03A3.373 3.373 0 0 1 2.102 5.6h.8a2.583 2.583 0 0 0 1.55 2.274 6.55 6.55 0 0 0-.273.748zM3.102 5.4a2.396 2.396 0 0 1 4.59-.866 6.65 6.65 0 0 0-.708.386A1.585 1.585 0 0 0 5.5 3.9a1.602 1.602 0 0 0-1.597 1.5z"},
cube:{16:"M8.5 1.108L1 4.188v8.753L8.448 16h.104L16 12.94V4.189zM8 14.735l-6-2.464V5.197L8 7.65zM2.906 4.486L8.5 2.19l5.594 2.297L8.5 6.774zM15 12.271l-6 2.464V7.65l6-2.453z"},data:{24:"M11.5 2C5.702 2 1 3.566 1 5.5v12.808C1 20.346 5.702 22 11.5 22S22 20.346 22 18.308V5.5C22 3.566 17.298 2 11.5 2zm0 1C17.768 3 21 4.752 21 5.5S17.768 8 11.5 8 2 6.248 2 5.5 5.232 3 11.5 3zM2 6.983C3.676 8.173 7.294 9 11.5 9s7.824-.827 9.5-2.017V10.5c0 .748-3.232 2.5-9.5 2.5S2 11.248 2 10.5zM11.5 21C5.354 21 2 19.221 2 18.308v-6.325C3.676 13.173 7.294 14 11.5 14s7.824-.827 9.5-2.017v6.325C21 19.22 17.646 21 11.5 21z",
32:"M28.983 7.875C28.803 5.171 22.841 3 15.5 3S2.198 5.17 2.017 7.875H2v16.25C2 26.816 8.045 29 15.5 29S29 26.816 29 24.125V7.875zM28 24.125C28 25.705 23.13 28 15.5 28S3 25.705 3 24.125v-8.241C5.01 17.711 9.846 19 15.5 19s10.49-1.29 12.5-3.116zm0-9.24C25.99 16.71 21.154 18 15.5 18S5.01 16.71 3 14.884v-5C5.01 11.711 9.846 13 15.5 13S25.99 11.71 28 9.884zm-12.5-2.91C7.87 11.974 3 9.62 3 8s4.87-3.974 12.5-3.974S28 6.379 28 8s-4.87 3.974-12.5 3.974z"},download:{32:"M32 15.704C32 19.308 29.13 22 26.562 22H23v-1h3.563C28.372 21 31 18.937 31 15.704a5.561 5.561 0 0 0-3.742-5.287l-.872-.297-.13-.911A8.153 8.153 0 0 0 18.462 2a7.848 7.848 0 0 0-6.859 4.294l-.556 1.045-1.146-.298a3.684 3.684 0 0 0-.923-.135 3.105 3.105 0 0 0-3.224 2.956l-.046.86-.765.394A5.37 5.37 0 0 0 2 15.897C2 18.521 4.157 21 6.438 21H10v1H6.437C3.592 22 1 19.092 1 15.897a6.369 6.369 0 0 1 3.486-5.67l.255-.131.016-.287a4.128 4.128 0 0 1 4.222-3.903 4.61 4.61 0 0 1 1.175.168l.382.099.185-.349A8.845 8.845 0 0 1 18.463 1a9.157 9.157 0 0 1 8.782 8.068l.044.304.29.099A6.559 6.559 0 0 1 32 15.704zM17 28.278V14h-1v14.278l-4.332-4.332-.707.707 5.539 5.54 5.54-5.54-.708-.707z"},
"download-to":{16:"M12 13v1H3v-1zm-1.674-4.618l-.707-.707L8 9.295V1H7v8.26L5.415 7.675l-.707.707 2.81 2.81z",32:"M7 25h17v1H7zm13.354-8.646l-.707-.707L16 19.293V5h-1v14.293l-3.646-3.646-.707.707 4.853 4.853z"},drag:{16:"M5.95 1.5A1.45 1.45 0 1 1 4.5.05 1.45 1.45 0 0 1 5.95 1.5zM10.5.05a1.45 1.45 0 1 0 1.45 1.45A1.45 1.45 0 0 0 10.5.05zm-6 6A1.45 1.45 0 1 0 5.95 7.5 1.45 1.45 0 0 0 4.5 6.05zm6 0a1.45 1.45 0 1 0 1.45 1.45 1.45 1.45 0 0 0-1.45-1.45zm-6 6a1.45 1.45 0 1 0 1.45 1.45 1.45 1.45 0 0 0-1.45-1.45zm7.45 1.45a1.45 1.45 0 1 0-1.45 1.45 1.45 1.45 0 0 0 1.45-1.45z"},
edit:{16:"M14.792 2.666l-1.414-1.413a.965.965 0 0 0-1.385-.03l-1.444 1.444-8.763 8.72L.03 15.481a.371.371 0 0 0 .488.488l4.096-1.756 8.763-8.72-.001-.001.002.002 1.443-1.444a.965.965 0 0 0-.03-1.385zM1.569 14.431l.554-1.293.74.739zm2.338-.924l-1.414-1.414 7.963-7.92 1.414 1.415zm8.67-8.626l-1.413-1.414 1.29-1.29a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .433z"},"ellipsis-f":{16:"M3.55 8A1.55 1.55 0 1 1 2 6.45 1.55 1.55 0 0 1 3.55 8zm6 0A1.55 1.55 0 1 0 8 9.55 1.55 1.55 0 0 0 9.55 8zm6 0A1.55 1.55 0 1 0 14 9.55 1.55 1.55 0 0 0 15.55 8z"},
envelope:{16:"M14 11.434l-4.52-4.52L14 3.301v8.133zM1.566 12L6.15 7.418l1.35 1.08 1.351-1.08L13.434 12H1.566zM1 3.3l4.52 3.614L1 11.434V3.3zM13.095 3L7.5 7.475 1.904 3h11.191zM14 2H1a1.002 1.002 0 0 0-1 1v9a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z",24:"M22.5 4h-20A1.504 1.504 0 0 0 1 5.5v14A1.5 1.5 0 0 0 2.5 21h20a1.5 1.5 0 0 0 1.5-1.5v-14A1.5 1.5 0 0 0 22.5 4zm-.071 1L12.5 12.94 2.571 5zM2.026 19.63A.482.482 0 0 1 2 19.5V5.568l7.829 6.26zm.763.37l7.67-7.67 2.041 1.633 2.042-1.632L22.21 20zM23 19.5a.483.483 0 0 1-.026.13l-7.803-7.803L23 5.568z"},
"exclamation-mark-circle":{16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zm.994-3.576a1 1 0 0 1-2 0v-.048a1 1 0 0 1 2 0zM7.995 8h-.977V4h.977z",24:"M12 7h1v7h-1zm1.5 9.5a1 1 0 1 0-1 1 1.002 1.002 0 0 0 1-1zm9.3-4A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.517 14.517 0 0 0 15.5 1zm0 28A13.5 13.5 0 1 1 29 15.5 13.515 13.515 0 0 1 15.5 29zm0-5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM15 8h1v11h-1z"},
"exclamation-mark-circle-f":{24:"M12.5 2.2a10.3 10.3 0 1 0 10.3 10.3A10.299 10.299 0 0 0 12.5 2.2zM12 7h1v7h-1zm.5 10.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z"},"exclamation-mark-triangle":{16:"M14.78 14.645L8.255 1.52a.938.938 0 0 0-.84-.52.938.938 0 0 0-.84.522L.092 14.647A.938.938 0 0 0 .932 16h13.009a.937.937 0 0 0 .838-1.355zm-.724.49a.137.137 0 0 1-.115.065H.933a.137.137 0 0 1-.116-.063.139.139 0 0 1-.008-.135L7.293 1.876a.14.14 0 0 1 .123-.076.138.138 0 0 1 .125.077l6.521 13.124a.138.138 0 0 1-.006.135zM7.495 11.5a.988.988 0 0 1 1 .976v.048a1 1 0 0 1-2 0v-.048a.988.988 0 0 1 1-.976zM7.018 6h.977v4h-.977z",
24:"M1.225 21.225A1.678 1.678 0 0 0 2.707 22H22.28a1.68 1.68 0 0 0 1.484-.775 1.608 1.608 0 0 0 .003-1.656L13.995 1.827a1.745 1.745 0 0 0-2.969 0l-9.8 17.742a1.603 1.603 0 0 0 0 1.656zm.859-1.143l9.82-17.773A.71.71 0 0 1 12.508 2a.73.73 0 0 1 .629.342l9.751 17.708a.626.626 0 0 1 .017.662.725.725 0 0 1-.626.288H2.708a.723.723 0 0 1-.623-.286.605.605 0 0 1-.001-.632zM13 15h-1V8h1zm-1.5 2.5a1 1 0 1 1 1 1 1.002 1.002 0 0 1-1-1z",32:"M3.929 29h25.148a1.897 1.897 0 0 0 1.67-2.797L18.217 2.951a1.897 1.897 0 0 0-3.337-.005L2.261 26.198A1.897 1.897 0 0 0 3.93 29zm-.788-2.324L15.759 3.423a.896.896 0 0 1 1.577.002l12.531 23.253a.898.898 0 0 1-.79 1.322H3.93a.897.897 0 0 1-.788-1.324zM15.5 24.5a1 1 0 1 1 1 1 1.002 1.002 0 0 1-1-1zM17 21h-1V10h1z"},
"exclamation-mark-triangle-f":{16:"M14.894 12.552l-6-11.998a1 1 0 0 0-1.787 0l-6 11.998A.998.998 0 0 0 2 13.999h12a.998.998 0 0 0 .894-1.447zM9 12H7v-2h2zm0-3H7V4h2z",24:"M13.995 1.827a1.745 1.745 0 0 0-2.969 0l-9.8 17.742a1.603 1.603 0 0 0 0 1.656 1.678 1.678 0 0 0 1.48.775H22.28a1.68 1.68 0 0 0 1.484-.775 1.608 1.608 0 0 0 .003-1.656zM12 8h1v7h-1zm.5 10.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z",32:"M29.733 27.06L17.734 3.191a2 2 0 0 0-3.463 0L2.268 27.061a2.003 2.003 0 0 0 0 2.001 1.941 1.941 0 0 0 1.73.938H28a1.944 1.944 0 0 0 1.731-.938 2.008 2.008 0 0 0 .002-2.002zM17 25h-2v-2h2zm0-4h-2V11h2z"},
file:{32:"M20.3 1H4v30h24V8.699zM27 30H5V2h14v8h8zM20 9V2l7 7z"},"file-image":{16:"M13 14H4v-1h9zm-9-2h9v-1.44l-1.527-1.472a.27.27 0 0 0-.37-.028l-1.224.824a.269.269 0 0 1-.35-.01L7.498 8.07a.27.27 0 0 0-.382.018L5.1 10.24a.27.27 0 0 1-.4 0 .27.27 0 0 0-.4 0l-.3.32zm1.752-1a1.38 1.38 0 0 0 .077-.076l1.534-1.636 1.501 1.334a1.267 1.267 0 0 0 1.64.041l.687-.458.809.78V11zM15 3.6V16H2V0h9.4zM14 5h-4V1H3v14h11zm0-1.31L11.31 1H11v3h3zm-3.5 3.06a.75.75 0 1 0 .75.75.75.75 0 0 0-.75-.75z",24:"M18 20H6v-1h12zM6 18h12v-2.8l-2.035-2.035a.377.377 0 0 0-.493-.035l-1.633 1.225a.377.377 0 0 1-.468-.012l-2.706-2.256a.377.377 0 0 0-.509.023l-2.69 2.69a.377.377 0 0 1-.533 0 .377.377 0 0 0-.533 0l-.4.4zm1-1v-1.104a1.376 1.376 0 0 0 1.174-.389l2.287-2.287 2.27 1.89a1.375 1.375 0 0 0 1.708.044l1.2-.9L17 15.614V17zM21 6.709V23H3V1h12.29zM20 8h-6V2H4v20h16zm0-1.2L15.2 2H15v5h5zM14.021 12a.979.979 0 0 0 .979-.979A1.021 1.021 0 0 0 13.979 10a.979.979 0 0 0-.979.979v.043a.981.981 0 0 0 .979.978z"},
"file-magnifying-glass":{16:"M12.4 0H6v3.232a5.4 5.4 0 0 1 1 .395V1h4v4h4v7h-3.7l1 1H16V3.6zM15 4h-3V1h.31L15 3.69zm-5.233 6H12v1h-1.714a1.66 1.66 0 0 0-.707-.385A5.485 5.485 0 0 0 9.767 10zM14 9H9.95c.016-.167.05-.33.05-.501 0-.17-.034-.332-.049-.499H14zm0-2H9.768a5.404 5.404 0 0 0-.395-1H14zm-4.358 4.754a.672.672 0 0 0-.951 0l-.115.115L8 11.294A4.484 4.484 0 0 0 4.499 4a4.5 4.5 0 1 0 2.795 8.001l.575.575-.115.114a.672.672 0 0 0 0 .951l2.16 2.159a.672.672 0 0 0 .95 0l.936-.933a.672.672 0 0 0 .001-.951zm-7.617-.78a3.5 3.5 0 1 1 4.95 0 3.5 3.5 0 0 1-4.95 0zm8.365 3.887l-1.697-1.695.473-.473 1.696 1.698z"},
"file-text":{16:"M13 7H4V6h9zm0 2H4v1h9zm-2 3H4v1h7zm4-8.4V16H2V0h9.4zM14 5h-4V1H3v14h11zm0-1.31L11.31 1H11v3h3z"},folder:{16:"M7.3 3.002L5.98 2H3L1.7 3H0v11h15V3zM14 6H1V4h1.04l1.3-1h2.304l1.319 1H14zm0 7H1V7h13z"},"folder-move":{16:"M5 12H1V6h13v2.352l.007.005.993.994V2l-7.7.002L5.98 1H3L1.7 2H0v11h5zM1 3h1.04l1.3-1h2.304l1.319 1H14v2H1zm14.284 9.563l-2.79 2.79-.708-.706L13.433 13H7v-1h6.308l-1.522-1.521.707-.707z"},"folder-open":{16:"M14 6V3l-6.7.002L5.98 2H3L1.7 3H0v11h14l2-8zM1 4h1.041L3.34 3h2.304l1.319 1.002L13 4v2H9L7.7 7h-5L1 11.408zm2.387 4H8.04l1.3-1h5.379l-1.5 6H1.458z"},
"folder-plus":{16:"M14 9h1v5H0V3h1.7L3 2h2.981l1.04.79A1.966 1.966 0 0 0 7 3v1h-.037L5.644 3H3.34l-1.3 1H1v2h9v1H1v6h13zm-1-6V0h-1v3H9v1h3v3h1V4h3V3z"},globe:{16:"M8 0a8 8 0 1 0 8 8 7.999 7.999 0 0 0-8-8zm3.83 3.162c.067.24.01.47-.273.47a.669.669 0 0 0 .16-.55c.039.027.08.055.112.08zm-.372-.95l.207.072a.803.803 0 0 0-.428.158.406.406 0 0 1 .222-.23zM7.792 1.01a2.963 2.963 0 0 1 .638.012l-.054.083c-.123-.004-.54-.027-.653-.01.073-.074.015-.021.07-.085zM2.527 12.357a7.018 7.018 0 0 1-.414-.58 6.759 6.759 0 0 1 .58.405.918.918 0 0 0-.166.175zm7.606 2.31a6.986 6.986 0 0 1-7.058-1.695c-.003-.07 0-.08.059-.122 1-.692.512-1.033-1.055-2.047-.123-.084-.179-.132-.19-.165-.075-1.662-.082-.85-.662-2.313a2.123 2.123 0 0 0-.222-.427 6.967 6.967 0 0 1 1.911-4.701c.616.008.934.146 1.176-.473.015-.04.06-.16.073-.121.7.04.593.475 1.518-.9a1.156 1.156 0 0 0 .157-.36c.2-.065.405-.119.613-.166-.465.623-.137 1.095.319 1.095.141 0 .731-.33 1.07-.387.608.03.853.118 1.201-.337a2.112 2.112 0 0 1 .3-.416 6.936 6.936 0 0 1 1.548.498c-.508.388-.222.396-.56.838-.334.444-.017.803.425 1.138a2.056 2.056 0 0 0-.28.242.59.59 0 0 0-.223-.321.669.669 0 0 0-.735-.596.599.599 0 0 0-.147 1.122.573.573 0 0 0 .292.473c-.164.242-.081.414-.01.663-.052 0-.29-.069-.374-.069-.72 0-.785 1.215-.46 1.543-.79.68-.809.795-.917 1.017a1.921 1.921 0 0 0-1.248 1.686c0 .41-.25.36-.317.682-.102.485.146.728.435 1.006.32.311.152.587.628.973.572.477.863.374 1.603.268a2.339 2.339 0 0 1 1.257.134c.09.021.181.057.1.298a.596.596 0 0 0 .133.739.275.275 0 0 1 .11.19c.05.639-.197.474-.47 1.01zm.383-8.91l.2.098a.313.313 0 0 1 .255-.052c.37.233.57.424.93.066a2.055 2.055 0 0 1 .325.339.593.593 0 0 0 .914.493c.214.276.447.177.757.255a1.3 1.3 0 0 1 .088.284 1.486 1.486 0 0 1-.52.136c-.114-.03-.231-.125-.35-.125a.533.533 0 0 0-.656.356 1.398 1.398 0 0 1-.698-.416c.1-.693-.948-.767-1.63-.616.02-.025.108-.16.089-.185a.665.665 0 0 0 .094-.14.838.838 0 0 0 .315-.284zm-.996.222a.732.732 0 0 0-.064.138c0-.055.002-.102.005-.147l.059.01zm1.844 8.16a1.248 1.248 0 0 0-.241-1.173.955.955 0 0 0-.68-1.316c-.006-.002-.38-.081-.473-.113-1.052-.302-1.98.487-2.265-.484a2.546 2.546 0 0 0-.573-.79c.382-.424.237-.624.333-1.035.313-1.157.897-.378 1.276-1.376.017-.042.634-.564.768-.765.379.458.848.204 1.465.243.133.77 1.55 1.512 2.121.763.703.292 1.96-.216 1.646-1.118v.001a1.301 1.301 0 0 0-.112-.342.945.945 0 0 0-.935-.511.8.8 0 0 0-.72-.205c-.255-.554-.903-1.088-1.488-.733a.95.95 0 0 0-.705-.183.798.798 0 0 0-.36-.04 5.498 5.498 0 0 0-.033-.098.782.782 0 0 0 .065-.216.87.87 0 0 0 .691-.33c1.179.708 2.182-1.263.96-1.935.016 0 .03-.01.046-.011a6.994 6.994 0 0 1-.786 11.766z",
24:"M13.802 4.306a.683.683 0 01.708.76.528.528 0 01.357.467c.055.888-1.127.8-1.014-.09l-.005-.002a.575.575 0 01-.046-1.135zM11.5 23A11.5 11.5 0 010 11.5v-.021a11.738 11.738 0 012.057-6.534 12.15 12.15 0 014.12-3.637h.005A11.595 11.595 0 0113.618.202l.002.002a11.525 11.525 0 019.325 10.188v.004A11.497 11.497 0 0111.5 23zm9.795-7.748a7.604 7.604 0 01-.666-1.746 4.55 4.55 0 01-.651-1.655 1.383 1.383 0 01-.857-.063l-.332.46c-1.962 0-2.952-.953-3.048-1.636a2.144 2.144 0 00-.992.133l-.113.177-.794.021a2.538 2.538 0 01-.483-.213 7.396 7.396 0 00-.628.541 1.463 1.463 0 01-.941.97 1.544 1.544 0 00-.961 1.24 2.264 2.264 0 01-.449 1.34 2.446 2.446 0 01.811 1.108c.406 1.373 1.703.122 3.24.622.843.277 1.569.18 1.832 1.177a1.695 1.695 0 01.028.937 1.452 1.452 0 01-.025.098 2.11 2.11 0 01.327 1.883 10.447 10.447 0 004.702-5.394zm-1.709-7.096l.25.15c.058.072.16.194.208.265a1.699 1.699 0 011.517 2.251 3.648 3.648 0 01.435.592 10.477 10.477 0 00-3.824-8.016h-.103a1.768 1.768 0 01-1.938 2.838 4.716 4.716 0 01-.723.7 1.525 1.525 0 01.97.078l.183-.654a6.478 6.478 0 012.115 1.527c.295.369-.659 1.364.91.27zm2.17 5.578q.026-.121.049-.243a5.462 5.462 0 00-.843-1.825 18.554 18.554 0 00.793 2.068zM11.405 1.147c.155.004.424.03.574.029l.093-.147c-.189-.01-.375-.029-.566-.029a1.863 1.863 0 01-.102.147zm-8.209 16.74a1.557 1.557 0 01.244-.252c-.26-.196-.54-.372-.808-.545q.263.41.564.797zm11.737 3.525c.434-.81.812-.526.724-1.629a.802.802 0 00-.327-.551c-.2-.205-.155-.428-.051-.682.254-.64-.126-.81-.608-.914a3.809 3.809 0 00-2.22-.08 1.602 1.602 0 01-1.633-.391c-.608-.489-.383-.895-.91-1.416-1.3-1.218-.08-1.268-.08-2.268a2.63 2.63 0 011.416-2.11c.302-.106.437-.127.541-.427.236-.604.565-.578.988-1.055.145-.164.257-.285.48-.285a.723.723 0 01.384.135s.282.166.372.2l.074-.002a3.411 3.411 0 012.208-.269.557.557 0 01.432.7c.017.441 1.488 1.005 1.588.837a.745.745 0 00.066-.184.48.48 0 01.562-.362c.2.01.514.231.703.231a4.382 4.382 0 00.786-.238c.332-.095.21-.532.067-.847-.078-.207-.375-.237-.595-.237-.266.003-.498-.021-.616-.307a.433.433 0 00-.161-.218c.007.01-.022.034-.042.068a.52.52 0 01-.871.07c-.272-.394-.011-.289-.317-.67a3.283 3.283 0 00-.72-.63.545.545 0 01-.525.387c-.265 0-.36-.155-.594-.303-.245-.142-.625-.1-.929.324a2.663 2.663 0 01-.49.436c-.211.264-.036.313-.4.628-.342.317-.623.179-1.069.059-.477-.111-.42-.747-.347-1.246.078-.5.294-.712.802-.58.729.178.762.038.579-.475-.17-.378-.042-.636.215-.748.78-.317 1.183-1.443 1.906-1.125a.766.766 0 00.887-1.249.868.868 0 01-.316-.254.095.095 0 00-.07-.033c-.219 0-.155.495-.138.713a.492.492 0 01-.49.525c-.281 0-.753-.454-.953-.653-.385-.387-.119-.603.087-1.004a5.425 5.425 0 01.34-.69 1.71 1.71 0 01.588-.442 10.406 10.406 0 00-3.028-.996c-.332.335-.51.95-.954 1.01-.302.054-.912-.059-1.193-.006-.391.08-1.292.553-1.396.553-.57 0-.81-.74.197-1.574a10.398 10.398 0 00-1.884.475 7.258 7.258 0 01-1.042 1.57c-.299.372-.662.062-1.088.016-.565-.056-.325 1.011-1.198.915a5.775 5.775 0 00-.588-.039A10.467 10.467 0 001 11.5c0 .054.007.107.008.161.061.103.41.9.588 1.252.944 1.962.527 1.457.562 2.457.01.238.202.343.42.493a10.28 10.28 0 012.006 1.477.495.495 0 01.111.525c-.07.264-.346.34-.568.502a.431.431 0 00-.21.376 10.425 10.425 0 0011.017 2.669z"},
grid:{16:"M0 0v7h7V0zm6 6H1V1h5zm3-6v7h7V0zm6 6h-5V1h5zM0 9v7h7V9zm6 6H1v-5h5zm3-6v7h7V9zm6 6h-5v-5h5z",32:"M3 15h12V3H3zM4 4h10v10H4zm13 11h12V3H17zm1-11h10v10H18zM3 29h12V17H3zm1-11h10v10H4zm13 11h12V17H17zm1-11h10v10H18z"},group:{16:"M7.5 5h2a1.497 1.497 0 0 1 1.486 1.359 3.452 3.452 0 0 1 .969-.304 2.498 2.498 0 0 0-1.6-1.895 2.5 2.5 0 1 0-3.71 0 2.498 2.498 0 0 0-1.6 1.895 3.452 3.452 0 0 1 .97.304A1.497 1.497 0 0 1 7.5 5zm1-4A1.5 1.5 0 1 1 7 2.5 1.502 1.502 0 0 1 8.5 1zm5.855 10.16a2.5 2.5 0 1 0-3.71 0A2.5 2.5 0 0 0 9 13.5V16h7v-2.5a2.5 2.5 0 0 0-1.645-2.34zM12.5 8A1.5 1.5 0 1 1 11 9.5 1.502 1.502 0 0 1 12.5 8zm2.5 7h-5v-1.5a1.517 1.517 0 0 1 1.5-1.5h2a1.517 1.517 0 0 1 1.5 1.5zM1 13.5V16h7v-2.5a2.5 2.5 0 0 0-1.645-2.34 2.5 2.5 0 1 0-3.71 0A2.5 2.5 0 0 0 1 13.5zM7 15H2v-1.5A1.517 1.517 0 0 1 3.5 12h2A1.517 1.517 0 0 1 7 13.5zM4.5 8A1.5 1.5 0 1 1 3 9.5 1.502 1.502 0 0 1 4.5 8z",
32:"M16 9a4 4 0 1 0-4-4 4.005 4.005 0 0 0 4 4zm0-7a3 3 0 1 1-3 3 3.003 3.003 0 0 1 3-3zm3.101 16a4.944 4.944 0 0 0 .323 1h-6.848a4.944 4.944 0 0 0 .323-1zm-8.588-5.297a4.945 4.945 0 0 0-.908-.415A4.485 4.485 0 0 1 13.5 10h5a4.485 4.485 0 0 1 3.895 2.288 4.945 4.945 0 0 0-.908.415A3.49 3.49 0 0 0 18.5 11h-5a3.49 3.49 0 0 0-2.987 1.703zM12 17a4 4 0 1 0-4 4 4.005 4.005 0 0 0 4-4zm-4 3a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm-7 6.5V31h14v-4.5a4.505 4.505 0 0 0-4.5-4.5h-5A4.505 4.505 0 0 0 1 26.5zm9.5-3.5a3.504 3.504 0 0 1 3.5 3.5V30H2v-3.5A3.504 3.504 0 0 1 5.5 23zM24 13a4 4 0 1 0 4 4 4.005 4.005 0 0 0-4-4zm0 7a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm2.5 2h-5a4.505 4.505 0 0 0-4.5 4.5V31h14v-4.5a4.505 4.505 0 0 0-4.5-4.5zm3.5 8H18v-3.5a3.504 3.504 0 0 1 3.5-3.5h5a3.504 3.504 0 0 1 3.5 3.5z"},
home:{16:"M8 0L6 2V0H3v5L0 8h1v8h5v-6h4v6h5V7.978h1zm6 15h-3V9H5v6H2V7.414l2-2V1h1v3.414l3.001-3L14 7.395z"},image:{16:"M1 2v12h14V2zm13 11H2V3h12zm-1-1H3v-1h10zM3 8.678l.333-.356a.3.3 0 0 1 .445 0 .3.3 0 0 0 .444 0l2.242-2.39a.3.3 0 0 1 .423-.021l2.255 2.005a.299.299 0 0 0 .39.01l1.361-.915a.3.3 0 0 1 .41.032L13 8.678V10H3zM11.894 9l-.89-.859-.846.565a1.299 1.299 0 0 1-1.68-.043L6.732 7.11 4.958 9zm-.644-4.5a.75.75 0 1 1-.75-.75.75.75 0 0 1 .75.75z",32:"M2 4v24h28V4zm27 23H3V5h26zm-9.5-17A1.5 1.5 0 1 1 21 8.5a1.502 1.502 0 0 1-1.5 1.5zm.5-1.5a.5.5 0 1 0-.5.5.5.5 0 0 0 .5-.5zM28 25H4v-1h24zM7.624 16.026l.827.39 5.138-4.267a.652.652 0 0 1 .857.013l.863.774c.864.771 2.71 2.382 3.845 3.357l2.923-2.748a.652.652 0 0 1 .926.033L28 19v4H4v-4.547l2.905-2.31a.642.642 0 0 1 .719-.117zM27 22v-2.61l-4.494-4.875-3.322 3.122-.682-.586a355.007 355.007 0 0 1-3.861-3.37l-.637-.573-5.4 4.487-1.184-.56L5 18.88V22z"},
imagePlus:{16:"M7 14v1H0V1h16v9h-1V2H1v8.2l1.4-1.4a.377.377 0 0 1 .533 0 .377.377 0 0 0 .534 0l2.69-2.69a.377.377 0 0 1 .508-.023L9.37 8.343a.377.377 0 0 0 .468.012L10 8.234v1.133a1.326 1.326 0 0 1-1.269-.256L6.461 7.22 4.173 9.509a1.37 1.37 0 0 1-.973.402 1.387 1.387 0 0 1-.429-.068L1 11.614V14zm4.5-9.5a1 1 0 1 0-1 1 1 1 0 0 0 1-1zM13 16v-3h3v-1h-3V9h-1v3H9v1h3v3z"},info:{16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM7 7h1v5H7zm2 5H6v-1h3z",
24:"M11.5 1A10.5 10.5 0 1 0 22 11.5 10.499 10.499 0 0 0 11.5 1zm0 20.1a9.6 9.6 0 1 1 9.6-9.6 9.61 9.61 0 0 1-9.6 9.6zM13 18h-3v-1h1V8h1v9h1zM11.5 6.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM12 9h-2V8h2z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.517 14.517 0 0 0 15.5 1zm0 28A13.5 13.5 0 1 1 29 15.5 13.515 13.515 0 0 1 15.5 29zm1.5-6h-3v-1h1V11h1v11h1zM15.5 8.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM16 12h-2v-1h2z"},"information-f":{16:"M8 .15A7.85 7.85 0 1 0 15.85 8 7.85 7.85 0 0 0 8 .15zM9 12H7V6h2zm0-7H7V3h2z"},
key:{16:"M10.075 1A4.926 4.926 0 0 0 5.15 5.925a4.874 4.874 0 0 0 .51 2.141L0 13.726V16h3.222l.022-.01.756-.756V14h1.233L6 13.233V12h1.232l1.393-1.393a4.869 4.869 0 0 0 1.45.243 4.925 4.925 0 1 0 0-9.85zM6.818 11H5v1.82l-.18.18H3v1.82l-.18.18H1v-.86l5.204-5.204a4.918 4.918 0 0 0 1.434 1.244zm3.257-1.15A3.925 3.925 0 1 1 14 5.925a3.93 3.93 0 0 1-3.925 3.925zM11.5 3A1.5 1.5 0 1 0 13 4.5 1.5 1.5 0 0 0 11.5 3zm0 2a.5.5 0 1 1 .5-.5.501.501 0 0 1-.5.5z"},launch:{16:"M14 8h1v7H1V1h7v1H2v12h12zm-4-7v1h3.29L7.62 7.67l.71.71L14 2.71V6h1V1z",
24:"M13 2v1H3v18h18V11h1v11H2V2zm9 6V2h-6v1h4.3l-8.41 8.403.707.707L21 3.714V8z"},layer:{16:"M12.207 13.2A6.624 6.624 0 0 1 16 14.29L13.867 1.687a8.205 8.205 0 0 0-3.161-.674c-2.69 0-2.724.986-5.412.986a10.39 10.39 0 0 1-3.161-.512L0 14.09a9.158 9.158 0 0 0 3.793.711c3.665 0 4.749-1.6 8.414-1.6zM2.935 2.74A11.376 11.376 0 0 0 5.294 3a7.833 7.833 0 0 0 3.045-.552 5.895 5.895 0 0 1 2.367-.434 7.213 7.213 0 0 1 2.27.399l1.72 10.163a8.317 8.317 0 0 0-2.489-.376 12.79 12.79 0 0 0-4.526.852 10.962 10.962 0 0 1-3.888.748 9.54 9.54 0 0 1-2.668-.363z"},
"layer-basemap":{32:"M31.603 27.899l-4-24s-6-2-11 0a13.388 13.388 0 0 1-11 0L1.61 27.865c.752.17 7.816 2.427 14.994.034 8.04-2.68 15.96.48 15 0zm-7.927-2.091a23.33 23.33 0 0 0-7.389 1.142 21.34 21.34 0 0 1-6.756 1.04 28.2 28.2 0 0 1-6.785-.864L6.39 5.266a13.201 13.201 0 0 0 4.553.8 16.268 16.268 0 0 0 6.032-1.238 12.652 12.652 0 0 1 4.703-.818 20.298 20.298 0 0 1 5.043.674l3.651 21.908a29.998 29.998 0 0 0-6.696-.784zM1.609 27.865l-.006.034c-.103-.052-.084-.055.006-.034zm23.36-21.53a18.501 18.501 0 0 0-2.209-.284l-.011-.001a15.46 15.46 0 0 0-1.071-.04 10.688 10.688 0 0 0-3.961.675 18.243 18.243 0 0 1-6.774 1.382 15.075 15.075 0 0 1-2.927-.282v.001l-.018-.002-2.966 17.79.02.003H5.05a25.156 25.156 0 0 0 4.495.414h.004c.039 0 .075-.005.115-.006a21.638 21.638 0 0 0 3.946-.4v-.005c2.635-.535 4.778-1.771 10.065-1.771a30.81 30.81 0 0 1 4.253.299v-.001h.002zm-3.04 16.538a36.78 36.78 0 0 0-1.061.083 1.708 1.708 0 0 0 .73-1.412 1.502 1.502 0 0 0-.18-.71l.072-.066a2.025 2.025 0 0 0 .82-1.55v-.25a1.794 1.794 0 0 0 .602.105 1.999 1.999 0 0 0 1.63-.97 2.347 2.347 0 0 0 .514.676 2.616 2.616 0 0 0 1.067.564l.603 3.614a31.59 31.59 0 0 0-3.05-.15c-.036 0-.07.004-.106.005a27.32 27.32 0 0 0-1.64.06zM20.693 8.326a2.143 2.143 0 0 0-1.254.76 1.592 1.592 0 0 0-.417 1.319l.023.112c.196.96.153 1.307-.186 1.49a3.217 3.217 0 0 0-1.239 1.38 2.399 2.399 0 0 1-.276.43c.032-.03-.06-.1-.128-.15a2.19 2.19 0 0 0-1.366-.537 1.864 1.864 0 0 0-1.813 1.907c0 .32-.32.815-.48.815a.556.556 0 0 1-.26-.038 2.364 2.364 0 0 0-2.032-1.539 2.151 2.151 0 0 0-2.099 2.196 3.19 3.19 0 0 0 .128.849 1.341 1.341 0 0 1 .062.344.94.94 0 0 1-.164.406 2.694 2.694 0 0 0-.408 1.363 1.746 1.746 0 0 0 1.812 1.667 2.718 2.718 0 0 0 1.043-.213 4.21 4.21 0 0 1-.377.41 2.41 2.41 0 0 0-.75 3.023 1.469 1.469 0 0 0 .58.61c-.35.028-.7.033-1.052.042-.17.004-.336.018-.508.018a23.876 23.876 0 0 1-3.329-.24L8.838 8.932a16.49 16.49 0 0 0 2.123.135 19.256 19.256 0 0 0 7.146-1.454 9.276 9.276 0 0 1 2.658-.57h.016q-.032.073-.058.15a1.815 1.815 0 0 0-.095.583 3.228 3.228 0 0 0 .064.549zm-5.354 15.778a16.56 16.56 0 0 1-2.06.523c-.577-.338-1.65-.315-1.872-.755-.755-1.509 1.29-1.896 1.29-3.103 0-.3-.154-.909-.621-.956-.653-.067-.823.287-1.48.287a.751.751 0 0 1-.812-.667c0-.718.572-1.052.572-1.769 0-.466-.19-.729-.19-1.193a1.15 1.15 0 0 1 1.098-1.196c.598 0 .86.49 1.146 1.004a1.19 1.19 0 0 0 1.147.573c.907 0 1.48-1.133 1.48-1.815a.875.875 0 0 1 .813-.907c.644 0 .883.669 1.528.669 1.062 0 1.022-1.405 1.958-1.912 1.146-.62.812-1.956.668-2.672-.062-.319.54-.932.861-.91 1.337.097.764-1 .764-1.528a.824.824 0 0 1 .042-.263 1.218 1.218 0 0 1 .355-.49A16.23 16.23 0 0 1 24.1 7.2l1.83 10.981a1.527 1.527 0 0 1-.22-.154c-.456-.4-.446-1.2-1.068-1.2-.835 0-.901 1.246-1.736 1.246-.379 0-.557-.268-.935-.268a.616.616 0 0 0-.667.546v.868c0 .733-.978.879-.978 1.614 0 .299.266.41.266.71 0 .934-1.528.893-1.739 1.692a24.652 24.652 0 0 0-3.514.869z"},
"layer-feature":{32:"M27 4a20.57 20.57 0 0 0-4.061-.793 3.177 3.177 0 0 1 .061.6v.412a20.975 20.975 0 0 1 3.117.565l3.614 21.686a20.65 20.65 0 0 0-5.842-.803 25.953 25.953 0 0 0-8.205 1.385 23.961 23.961 0 0 1-7.573 1.281 18.036 18.036 0 0 1-5.993-.957L5.804 5.26A22.899 22.899 0 0 0 9 5.793V4.787A20.657 20.657 0 0 1 5 4L1 28s6 3 15 0 15 0 15 0zm-5 .608v10.665l-6 5.996-6-5.996V4.608C10 2.455 12.258 0 16 0s6 2.455 6 4.608zm-6 15.247l5-4.996V4.607C21 3.095 19.262 1 16 1s-5 2.095-5 3.607V14.86zM19 7a3 3 0 1 1-3-3 3 3 0 0 1 3 3zm-1 0a2 2 0 1 0-2 2 2.002 2.002 0 0 0 2-2z"},
"layer-graphics":{32:"M31 27.9c.96.48-6.96-2.68-15 0s-15.96-.48-15 0l4-24a13.388 13.388 0 0 0 11 0c5-2 11 0 11 0zm-15.316-.949a23.333 23.333 0 0 1 7.389-1.142 29.997 29.997 0 0 1 6.696.784L26.117 4.685a20.301 20.301 0 0 0-5.043-.674 12.648 12.648 0 0 0-4.702.818 16.272 16.272 0 0 1-6.033 1.24 13.214 13.214 0 0 1-4.553-.8L2.143 27.126a28.17 28.17 0 0 0 6.784.864 21.342 21.342 0 0 0 6.757-1.04zm1.543-17.28a12.423 12.423 0 0 1 4.305-.773 20.349 20.349 0 0 1 2.964.229l-.132-.791a17.556 17.556 0 0 0-3.29-.327 10.623 10.623 0 0 0-3.96.774 16.71 16.71 0 0 1-6.188 1.303 23.281 23.281 0 0 1-3.488-.273l-.16.96a26.752 26.752 0 0 0 3.219.202 19.531 19.531 0 0 0 6.73-1.303zm6.41 12.159A26.767 26.767 0 0 0 16 23v-7.828A26.697 26.697 0 0 1 23.637 14c.58 0 1.13.023 1.658.06l1.327 7.965a23.502 23.502 0 0 0-2.985-.195zM17 21.688a27.149 27.149 0 0 1 6.637-.858c.592 0 1.182.023 1.784.068l-.98-5.883Q24.047 15 23.636 15a25.363 25.363 0 0 0-6.637.927zm-8 2.2a3.757 3.757 0 0 1-4-3.445A3.757 3.757 0 0 1 9 17a3.757 3.757 0 0 1 4 3.443 3.757 3.757 0 0 1-4 3.446zm3-3.445A2.768 2.768 0 0 0 9 18a2.768 2.768 0 0 0-3 2.443 2.769 2.769 0 0 0 3 2.446 2.769 2.769 0 0 0 3-2.446z"},
"layer-imagery":{32:[{d:"M23.463 23.2a26.071 26.071 0 0 0-3.463.224v-5.076a34.065 34.065 0 0 1 5.302-.251l.861 5.191c-.9-.059-1.804-.088-2.7-.088zM13 8.705v4.258c.456-.124.916-.253 1.392-.389A46.427 46.427 0 0 1 19 11.432V7.347a16.922 16.922 0 0 0-2.396.56A22.646 22.646 0 0 1 13 8.705z",opacity:.25},{d:"M13 13.999a84.02 84.02 0 0 0 1.666-.464c1.323-.378 2.741-.78 4.334-1.08v5.03a32.286 32.286 0 0 0-4.714 1.202c-.435.137-.86.267-1.286.391zm-4.463 11.8A16.675 16.675 0 0 0 12 25.477v-5.1a15.064 15.064 0 0 1-3.463.395 20.464 20.464 0 0 1-2.259-.142l-.796 4.796a13.024 13.024 0 0 0 3.055.375z",
opacity:.5},{d:"M23.462 27.2A33.153 33.153 0 0 1 31 28L27 3.9a26.401 26.401 0 0 0-5.926-.689c-5.144 0-5.927 1.657-10.735 1.657A14.99 14.99 0 0 1 5 3.9L1 28a16.273 16.273 0 0 0 7.538 1.8c6.876 0 8.048-2.6 14.924-2.6zm-21.355.234L5.795 5.217a15.6 15.6 0 0 0 4.544.651 17.42 17.42 0 0 0 5.445-.847 16.628 16.628 0 0 1 5.29-.81 26.164 26.164 0 0 1 5.05.518l3.651 21.999a37.286 37.286 0 0 0-6.313-.528 22.381 22.381 0 0 0-7.77 1.348A20.422 20.422 0 0 1 8.539 28.8a15.989 15.989 0 0 1-6.43-1.366zM24.384 6.456a23.558 23.558 0 0 0-3.31-.245 14.762 14.762 0 0 0-4.738.733 19.402 19.402 0 0 1-5.996.924 18.182 18.182 0 0 1-2.92-.228L4.349 26.146a14.096 14.096 0 0 0 4.188.654 18.525 18.525 0 0 0 6.541-1.154 24.357 24.357 0 0 1 8.385-1.446c1.448 0 2.763.078 3.896.188zM20 12.29a26.155 26.155 0 0 1 4.29-.29l.845 5.097a35.442 35.442 0 0 0-5.135.242zm3.519-4.935l.604 3.643a27.235 27.235 0 0 0-4.123.276V7.246c.33-.02.68-.035 1.074-.035a21.744 21.744 0 0 1 2.445.143zm-6.915.553A16.922 16.922 0 0 1 19 7.347v4.085a46.427 46.427 0 0 0-4.608 1.142c-.475.136-.936.265-1.392.389V8.705a22.646 22.646 0 0 0 3.604-.798zM13 14a84.02 84.02 0 0 0 1.666-.464c1.323-.378 2.741-.78 4.334-1.08v5.03a32.286 32.286 0 0 0-4.714 1.202c-.435.137-.86.267-1.286.391zm-2.66-5.13c.603 0 1.146-.027 1.66-.065v4.414a13.823 13.823 0 0 1-4.56.414l.808-4.872a19.724 19.724 0 0 0 2.092.108zM12 19.344a15.286 15.286 0 0 1-5.558.299l.832-5.012c.407.04.808.066 1.198.066A15.487 15.487 0 0 0 12 14.241zm-6.518 6.08l.796-4.796a20.464 20.464 0 0 0 2.26.143A15.064 15.064 0 0 0 12 20.376v5.1a16.675 16.675 0 0 1-3.463.324 13.024 13.024 0 0 1-3.055-.375zm9.289-.73a39.72 39.72 0 0 1-1.771.537V20.12a49.66 49.66 0 0 0 1.587-.48A31.896 31.896 0 0 1 19 18.5v5.077a30.389 30.389 0 0 0-4.23 1.117zM20 23.423v-5.076a34.138 34.138 0 0 1 5.302-.25l.861 5.19c-.9-.059-1.804-.088-2.7-.088a26.071 26.071 0 0 0-3.463.224z"}]},
"layer-points":{16:"M12.207 13.2A6.624 6.624 0 0 1 16 14.29L13.867 1.687a8.204 8.204 0 0 0-3.161-.674c-2.69 0-2.724.986-5.412.986a10.39 10.39 0 0 1-3.161-.512L0 14.09a9.158 9.158 0 0 0 3.793.711c3.665 0 4.749-1.6 8.414-1.6zM2.935 2.74A11.376 11.376 0 0 0 5.294 3a7.833 7.833 0 0 0 3.045-.552 5.895 5.895 0 0 1 2.367-.434 7.212 7.212 0 0 1 2.27.399l1.72 10.163a8.317 8.317 0 0 0-2.489-.376 12.79 12.79 0 0 0-4.526.852 10.962 10.962 0 0 1-3.888.748 9.54 9.54 0 0 1-2.668-.363zM4.5 5.5a1 1 0 1 1 1 1 1 1 0 0 1-1-1zm6 3a1 1 0 1 1 1 1 1 1 0 0 1-1-1zm-7 2a1 1 0 1 1 1 1 1 1 0 0 1-1-1z",
32:"M1.006 27.866L1 27.9c-.103-.051-.085-.055.006-.034zM16 27.9c-7.178 2.393-14.242.137-14.994-.034L5 3.9a13.387 13.387 0 0 0 11 0c5-2 11 0 11 0l4 24c.96.48-6.96-2.68-15 0zm13.769-1.307L26.117 4.685a20.301 20.301 0 0 0-5.043-.674 12.648 12.648 0 0 0-4.702.818 16.272 16.272 0 0 1-6.033 1.24 13.214 13.214 0 0 1-4.553-.8L2.143 27.126a28.17 28.17 0 0 0 6.784.864 21.342 21.342 0 0 0 6.757-1.04 23.333 23.333 0 0 1 7.389-1.142 29.997 29.997 0 0 1 6.696.784zM12.5 10.5a1 1 0 1 0 1 1 1 1 0 0 0-1-1zm9 4a1 1 0 1 0 1 1 1 1 0 0 0-1-1zm-10 5a1 1 0 1 0 1 1 1 1 0 0 0-1-1z"},
"layer-tile":{32:"M31 28s-6-3-15 0-15 0-15 0l2.714-16.286.87.87-2.466 14.792a18.032 18.032 0 0 0 5.993.957 23.961 23.961 0 0 0 7.573-1.281 25.957 25.957 0 0 1 8.205-1.385 20.658 20.658 0 0 1 5.842.803L26.117 4.784a20.35 20.35 0 0 0-5.043-.673 12.939 12.939 0 0 0-4.286.677L16 4c5-2 11 0 11 0zM16 7h9v17H8v-9h8zM9 23h3.243l.04-.137a6.48 6.48 0 0 1 .546-1.23 3.236 3.236 0 0 0 .337-.757.575.575 0 0 0-.1-.327 1.52 1.52 0 0 1-.218-.787c0-1.236 1.963-2.573 2.619-2.573H16V16H9zm7 0v-4.812h-.533c-.347.075-1.62 1.022-1.62 1.574a.55.55 0 0 0 .1.313 1.545 1.545 0 0 1 .219.801 2.894 2.894 0 0 1-.454 1.227 6.684 6.684 0 0 0-.414.897zm8 0v-4.918a10.162 10.162 0 0 0-2.276.865c-1.58.79-3.622.08-4.724-.427V23zm0-7h-7v1.41c.751.388 2.867 1.345 4.276.643A10.442 10.442 0 0 1 24 17.058zm-7-1h7V8h-7zM6 14V5h9v9zm8-8H7v5.145a.824.824 0 0 0 .627-.21 2.075 2.075 0 0 0 .663-1.392 1.508 1.508 0 0 1 1.448-1.558 1.893 1.893 0 0 1 1.194.494 1.296 1.296 0 0 0 .467.255.517.517 0 0 0 .123.034c.316 0 .486-.183.738-.608.042-.07.08-.129.126-.212A2.776 2.776 0 0 1 14 6.428zm0 7V7.513a2.36 2.36 0 0 0-.743.926c-.334.592-.75 1.329-1.736 1.329a1.735 1.735 0 0 1-1.069-.403l-.124-.09a.997.997 0 0 0-.59-.29c-.257 0-.448.294-.448.558a2.6 2.6 0 0 1-.112.672 3.02 3.02 0 0 1-.908 1.487 1.854 1.854 0 0 1-1.205.46c-.021 0-.043-.005-.065-.006V13z"},
layers:{16:"M8.023 1.023l-8 4.5 8 4.5 8-4.5zm-5.96 4.5l5.96-3.352 5.96 3.352-5.96 3.353zm13.96 3l-8 4.5-8-4.5 1.02-.573 6.98 3.926 6.98-3.926zm-8 6.353l6.98-3.926 1.02.573-7.914 4.452a.175.175 0 0 1-.171 0L.023 11.523l1.02-.573z"},lightbulb:{24:"M16.337 3.055a6.057 6.057 0 0 0-4.675-2.051l-.162.002-.162-.002a6.057 6.057 0 0 0-4.675 2.05 6.46 6.46 0 0 0-1.63 4.802 11.406 11.406 0 0 0 2.014 4.465 6.703 6.703 0 0 1 .75 1.322 12.957 12.957 0 0 1 .113 1.333c.019.366.037.71.074.994a2.84 2.84 0 0 0 .704 1.576l-.525.458a.804.804 0 0 0 .066 1.264l.414.293-.364.263a.804.804 0 0 0-.333.689.794.794 0 0 0 .37.641l2.45 1.625a1.311 1.311 0 0 0 .723.22h.016a1.316 1.316 0 0 0 .73-.22l2.43-1.613a.803.803 0 0 0 .059-1.34l-.367-.265.418-.295a.806.806 0 0 0 .062-1.263l-.525-.458a2.87 2.87 0 0 0 .707-1.596c.034-.263.052-.607.07-.973a12.957 12.957 0 0 1 .114-1.333 6.703 6.703 0 0 1 .75-1.322 11.406 11.406 0 0 0 2.014-4.465 6.46 6.46 0 0 0-1.63-4.801zm-2.43 17.414l-2.225 1.476a.41.41 0 0 1-.185.053h-.002a.32.32 0 0 1-.177-.053L9.093 20.47l1.264-.923-1.35-.953.68-.594h3.626l.68.594-1.35.953zM12 17h-1v-3h1zm4.975-9.263a10.671 10.671 0 0 1-1.863 4.042 5.638 5.638 0 0 0-.895 1.7 13.401 13.401 0 0 0-.125 1.446c-.018.336-.033.65-.07.93A1.898 1.898 0 0 1 13.456 17H13v-3.421l1.075-3.325-.951-.309L12.136 13h-1.272l-.988-3.055-.951.309L10 13.579V17h-.456a1.93 1.93 0 0 1-.57-1.182c-.033-.243-.048-.557-.066-.893a13.401 13.401 0 0 0-.125-1.446 5.638 5.638 0 0 0-.895-1.7 10.671 10.671 0 0 1-1.863-4.042 5.49 5.49 0 0 1 1.386-4.02 5.083 5.083 0 0 1 3.927-1.713l.162.002.162-.002a5.083 5.083 0 0 1 3.927 1.714 5.49 5.49 0 0 1 1.386 4.02z"},
link:{16:"M5 9.5a4.505 4.505 0 0 0 .048.493c-.007-.007-.016-.011-.023-.018l-3-3a3.5 3.5 0 1 1 4.95-4.95l3 3a3.486 3.486 0 0 1-1.31 5.76l-.226-.225a1.484 1.484 0 0 1-.37-.631 2.495 2.495 0 0 0 1.199-4.197l-3-3a2.5 2.5 0 1 0-3.536 3.536L5.09 8.625A4.498 4.498 0 0 0 5 9.5zm11 3a3.475 3.475 0 0 0-1.025-2.475l-3-3c-.007-.007-.016-.011-.023-.018A4.505 4.505 0 0 1 12 7.5a4.498 4.498 0 0 1-.089.876l2.357 2.356a2.5 2.5 0 0 1-.009 3.544 2.561 2.561 0 0 1-3.527-.008l-3-3a2.5 2.5 0 0 1-.094-3.436 2.43 2.43 0 0 1 1.3-.74 1.485 1.485 0 0 0-.377-.652l-.222-.222a3.482 3.482 0 0 0-1.314 5.757l3 3a3.5 3.5 0 0 0 4.937.012l-.351-.355.352.355A3.476 3.476 0 0 0 16 12.5z",
24:"M7 14c0 .025.003.05.004.075l-3.54-3.54a5 5 0 0 1 7.072-7.07l4 4a4.992 4.992 0 0 1-1.713 8.187l-.237-.237a1.998 1.998 0 0 1-.413-.609 3.985 3.985 0 0 0 1.656-6.635l-4-4a4 4 0 0 0-5.369-.26l-.318-.387.318.386a4 4 0 0 0-.29 5.92l2.94 2.94A7.012 7.012 0 0 0 7 14zm16 4a4.97 4.97 0 0 0-1.464-3.536l-3.54-3.539c0 .025.004.05.004.075a7.087 7.087 0 0 1-.113 1.23l2.942 2.941a4 4 0 0 1-.128 5.78l.338.368-.338-.368a4 4 0 0 1-5.53-.122l-4-4a3.966 3.966 0 0 1 1.658-6.631 1.998 1.998 0 0 0-.415-.613l-.234-.234a5.004 5.004 0 0 0-1.907 1.315 5 5 0 0 0 .191 6.87l4 4A5 5 0 0 0 23 18z"},
list:{16:"M6 14h9v1H6zm-5-1h3v3H1zm1 2h1v-1H2zM6 2v1h9V2zm0 7h9V8H6zM1 1h3v3H1zm1 2h1V2H2zM1 7h3v3H1zm1 2h1V8H2z"},locator:{32:"M27 15h2l-4-4V3h-5v3l-4.5-4.5L2 15h2v14H2v1h27v-1h-2zM21 4h3v6l-3-3zm-5.5-1.086L26.586 14H4.414zM5 29V15h21v14zm4-4h13v-7H9zm12-6v5h-5v-5zm-11 0h5v5h-5z"},lock:{16:"M13 7V5A5 5 0 0 0 3 5v2a1.003 1.003 0 0 0-1 1v7a1.003 1.003 0 0 0 1 1h10a1.003 1.003 0 0 0 1-1V8a1.003 1.003 0 0 0-1-1zM4 5a4 4 0 0 1 8 0v2h-1V5a3 3 0 0 0-6 0v2H4zm6 2H6V5a2 2 0 0 1 4 0zm3 8H3V8h10zm-5-1H7V9h1v1h1v1H8v1h1v1H8z",
32:"M26 14h-2v-3.5a8.5 8.5 0 0 0-17 0V14H5a2.006 2.006 0 0 0-2 2v14a2.006 2.006 0 0 0 2 2h21a2.006 2.006 0 0 0 2-2V16a2.006 2.006 0 0 0-2-2zM8 10.5a7.5 7.5 0 0 1 15 0V14h-1v-3.5a6.5 6.5 0 0 0-13 0V14H8zM21 14H10v-3.5a5.5 5.5 0 0 1 11 0zm6 16a1.001 1.001 0 0 1-1 1H5a1.001 1.001 0 0 1-1-1V16a1.001 1.001 0 0 1 1-1h21a1.001 1.001 0 0 1 1 1zM16 19h1v1h-1zm-1 1h1v1h1v1h-1v1h1v1h-1v1h1v1h-1v1h-1z"},line:{16:"M6 5v1.293L9.707 10h.328L14 3.657V2h2v2h-1.035L11 10.343V12H9v-1.293L5.293 7h-.492L2 12.383V14H0v-2h1.073L4 6.374V5z",
24:"M21 6h.046l-5.25 9h-.944L10 9.455V7H7v2.926L1.862 18H0v3h3v-2.926L8.138 10h1.01L14 15.545V18h3v-3h-.046l5.25-9H24V3h-3zM8 8h1v1H8zM2 20H1v-1h1zm14-3h-1v-1h1zm7-13v1h-1V4z"},"magnifying-glass-plus":{16:"M15.805 13.918l-3.067-3.068a.668.668 0 0 0-.943 0l-.124.124-.968-.968a5.5 5.5 0 1 0-.69.69l.968.968-.13.129a.667.667 0 0 0 0 .943l3.068 3.067a.665.665 0 0 0 .943 0l.943-.942a.666.666 0 0 0 0-.943zM9.683 9.68A4.47 4.47 0 0 1 6.5 10.999a4.502 4.502 0 1 1 3.183-1.318zm4.708 5.18l-2.597-2.596.473-.473 2.595 2.598zM7 6h2v1H7v2H6V7H4V6h2V4h1z"},
map:{16:"M1 1v14h14V1zm9.082 13c-.005-.037-.113-.274-.122-.309a1.498 1.498 0 0 0 .718-1.267 1.24 1.24 0 0 0-.053-.358 1.594 1.594 0 0 0 .326-.607c.03.002.062.003.093.003a1.415 1.415 0 0 0 .836-.266 1.517 1.517 0 0 0 .126.124 2.385 2.385 0 0 0 1.564.68H14v2h-3.183zM14 11h-.43a1.464 1.464 0 0 1-.906-.433c-.264-.23-.258-.782-.617-.782-.482 0-.52.677-1.003.677-.219 0-.38-.177-.599-.177-.193 0-.445.102-.445.293v.502c0 .424-.506.508-.506.934 0 .171.184.236.184.41 0 .58-.893.502-.893 1.08 0 .191.215.305.215.486V14H6.375a1.545 1.545 0 0 0 .09-.502c0-.547-1.043-.393-1.207-.72-.407-.813.693-1.022.693-1.673 0-.16-.082-.488-.334-.513-.351-.035-.443.154-.797.154a.406.406 0 0 1-.437-.36c0-.386.308-.566.308-.952 0-.25-.102-.393-.102-.643a.619.619 0 0 1 .59-.643c.323 0 .464.264.618.54a.642.642 0 0 0 .617.308c.49 0 .798-.61.798-.977a.471.471 0 0 1 .437-.488c.347 0 .476.36.824.36.57 0 .55-.756 1.053-1.03.618-.332.438-1.052.36-1.44-.032-.169.29-.5.464-.487.72.05.412-.54.412-.823a.434.434 0 0 1 .022-.142c.111-.332.595-.438.595-.836 0-.281-.233-.41-.233-.693a.653.653 0 0 1 .22-.44H14zM2 14V2h8.278c-.013.077-.132.356-.132.44a1.496 1.496 0 0 0 .112.567 1.6 1.6 0 0 0-.422.643 1.428 1.428 0 0 0-.074.442 1.676 1.676 0 0 0-.536.43 1.317 1.317 0 0 0-.32 1.091 3.213 3.213 0 0 1 .066.414 1.987 1.987 0 0 0-.649.67 1.462 1.462 0 0 0-.674-.166 1.447 1.447 0 0 0-1.383 1.086 1.443 1.443 0 0 0-1.086-.469 1.62 1.62 0 0 0-1.591 1.643c0 .254.113.293.084.574s-.29.535-.29 1.022a1.371 1.371 0 0 0 .984 1.29 1.583 1.583 0 0 0-.003 1.549c.143.286.636.774.534.774z",
24:"M22.82 15.995l-.02-.016V1.2H1.2v21.6h21.6v-6.78zM22 15.81a2.898 2.898 0 0 1-.749.147 2.476 2.476 0 0 1-.396.044c-.319 0-.746-.376-1.03-.625a1.32 1.32 0 0 1-.214-.39c-.145-.339-.39-.907-1.04-.907a1.585 1.585 0 0 0-1.062.414.625.625 0 0 1-.444.2.77.77 0 0 1-.237-.086 1.52 1.52 0 0 0-.66-.178 1.068 1.068 0 0 0-1.168.94v.752c0 .098-.05.161-.233.346a1.455 1.455 0 0 0-.526 1.055 1.146 1.146 0 0 0 .357.73c.036.042.086.1.11.105a1.85 1.85 0 0 1-.444.16c-.444.122-1.186.326-1.186 1.14a1.214 1.214 0 0 0 .318.73c.029.037.066.086.087.116-.048.124-.14.328-.235.547a15.9 15.9 0 0 0-.391.951h-2.58l-.002-.287a2.293 2.293 0 0 1 .184-.817l.053-.15a2.931 2.931 0 0 0 .186-.999c0-.871-.876-1.076-1.4-1.198-.172-.04-.432-.102-.464-.108-.174-.345-.088-.485.357-.93a1.925 1.925 0 0 0 .736-1.353 1.198 1.198 0 0 0-.951-1.267 1.626 1.626 0 0 0-.856.137.95.95 0 0 1-.39.091.28.28 0 0 1-.156-.039.974.974 0 0 1 .171-.475 1.898 1.898 0 0 0 .292-.955 2.3 2.3 0 0 0-.093-.608 1.337 1.337 0 0 1-.06-.355.434.434 0 0 1 .386-.464c.156 0 .246.118.488.55a1.44 1.44 0 0 0 1.363.721c1.035 0 1.696-1.164 1.696-1.965 0-.113.08-.232.157-.232.084 0 .157.049.315.169a1.468 1.468 0 0 0 .92.37 1.523 1.523 0 0 0 1.335-.997 1.485 1.485 0 0 1 .483-.607 2.175 2.175 0 0 0 .81-2.616c.049-.08.161-.199.152-.217a1.18 1.18 0 0 0 1.02-.32 1.325 1.325 0 0 0 .17-1.18 1.024 1.024 0 0 1-.03-.286 1.002 1.002 0 0 1 .282-.3 1.451 1.451 0 0 0 .637-1.114 1.487 1.487 0 0 0-.238-.764.583.583 0 0 1-.11-.276c0-.055.109-.404.996-.885.281-.152.445-.226.552-.274H22zM2 2h15.354a1.586 1.586 0 0 0-.634 1.16 1.488 1.488 0 0 0 .239.767.582.582 0 0 1 .11.272c0 .092-.069.165-.288.353a1.707 1.707 0 0 0-.58.743 1.173 1.173 0 0 0-.058.372 2.331 2.331 0 0 0 .053.419c.02.106.058.303.097.303h.001a.537.537 0 0 1-.235.012 1.244 1.244 0 0 0-.91.474 1.051 1.051 0 0 0-.293.94c.165.802.165 1.285-.304 1.538a2.313 2.313 0 0 0-.88.995c-.23.41-.305.488-.463.488-.085 0-.158-.049-.317-.169a1.462 1.462 0 0 0-.918-.37 1.197 1.197 0 0 0-1.157 1.232c0 .323-.3.965-.696.965-.375 0-.448-.134-.504-.233a1.569 1.569 0 0 0-1.347-1.038 1.428 1.428 0 0 0-1.386 1.464 2.3 2.3 0 0 0 .093.608 1.337 1.337 0 0 1 .06.355.974.974 0 0 1-.17.476 1.898 1.898 0 0 0-.293.954 1.103 1.103 0 0 0 1.156 1.04 1.936 1.936 0 0 0 .752-.16.874.874 0 0 1 .35-.09h.007a.537.537 0 0 1 .088.288c0 .19-.167.371-.442.646a1.645 1.645 0 0 0-.546 2.086 1.529 1.529 0 0 0 1.131.632c.199.046.568.132.628.225a1.957 1.957 0 0 1-.132.672l-.05.14a3.23 3.23 0 0 0-.24 1.154l.002.287H2zm11.927 20c.07-.168.156-.363.238-.55.297-.682.335-.775.335-.965a1.173 1.173 0 0 0-.31-.708c-.042-.054-.095-.141-.118-.127a1.528 1.528 0 0 1 .457-.17c.415-.115 1.188-.328 1.188-1.144a1.156 1.156 0 0 0-.359-.735c-.047-.054-.116-.132-.117-.08 0-.1.05-.165.235-.35A1.449 1.449 0 0 0 16 16.12v-.66a.498.498 0 0 1 .407.053 1.498 1.498 0 0 0 .658.178 1.587 1.587 0 0 0 1.063-.414.768.768 0 0 1 .4-.217 1.413 1.413 0 0 1 .165.32 1.965 1.965 0 0 0 .473.745 2.772 2.772 0 0 0 1.69.874 3.63 3.63 0 0 0 .551-.056 2.464 2.464 0 0 1 .395-.044.526.526 0 0 0 .198-.038V22z"},
"mega-phone":{32:"M28.97 4.36a2.06 2.06 0 0 0-2.06.002l-12.768 7.372a1.99 1.99 0 0 1-1 .267H4a2 2 0 0 0-2 2V18a2 2 0 0 0 2 2h4v3a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-1.083l9.91 5.722A2.06 2.06 0 0 0 30 25.857V6.144a2.06 2.06 0 0 0-1.03-1.784zM16 23a1.001 1.001 0 0 1-1 1h-5a1.001 1.001 0 0 1-1-1v-3h4.002a2.53 2.53 0 0 1 1.269.341L16 21.34zm13 2.856a1.06 1.06 0 0 1-1.59.916L14.641 19.4a3.015 3.015 0 0 0-1.5-.4H4a1 1 0 0 1-1-1v-4.01a1 1 0 0 1 1-.999h9.144a2.992 2.992 0 0 0 1.496-.4l12.77-7.362a1.067 1.067 0 0 1 .532-.144A1.06 1.06 0 0 1 29 6.145z"},
"minus-circle":{16:"M12 7v1H3V7zM7.5 0A7.5 7.5 0 1 0 15 7.5 7.5 7.5 0 0 0 7.5 0zm0 14A6.5 6.5 0 1 1 14 7.5 6.508 6.508 0 0 1 7.5 14z"},mobile:{16:"M10.983 0H6.017A2.017 2.017 0 0 0 4 2.017v11.966A2.017 2.017 0 0 0 6.017 16h4.966A2.017 2.017 0 0 0 13 13.983V2.017A2.017 2.017 0 0 0 10.983 0zM6.018 1h4.964a1.016 1.016 0 0 1 1.015 1H5.004a1.016 1.016 0 0 1 1.014-1zM12 13.983A1.018 1.018 0 0 1 10.982 15H9v-1H8v1H6.018A1.018 1.018 0 0 1 5 13.983V13h7zM12 12H5V3h7z",24:"M6 2.524v19.952A1.524 1.524 0 0 0 7.524 24h9.952A1.524 1.524 0 0 0 19 22.476V2.524A1.524 1.524 0 0 0 17.476 1H7.524A1.524 1.524 0 0 0 6 2.524zm12 19.953a.524.524 0 0 1-.524.523H14v-1h-3v1H7.524A.524.524 0 0 1 7 22.477V21h11zM18 20H7V4h11zm-.524-18a.524.524 0 0 1 .524.523V3H7v-.477A.524.524 0 0 1 7.524 2z"},
monitor:{16:"M15.167 1H.833A.834.834 0 0 0 0 1.833v10.334A.834.834 0 0 0 .833 13H6v1H5v1h6v-1h-1v-1h5.167a.834.834 0 0 0 .833-.834V1.834A.834.834 0 0 0 15.167 1zM9 14H7v-1h2zm6-2H1V2h14z",24:"M0 4v14a1.001 1.001 0 0 0 1 1h9v1H8v1h8v-1h-2v-1h9a1.001 1.001 0 0 0 1-1V4a1.001 1.001 0 0 0-1-1H1a1.001 1.001 0 0 0-1 1zm13 16h-2v-1h2zm10-2H1V4h22z"},notebook:{32:"M5 24H3v-1h1v-1h1zm0-5H4v1H3v1h2zm0 6H4v1H3v1h2zM28 2v28H4v-2h1v1h2V3H5v3H3V5h1V2zm-1 1H8v26h19zM5 13H4v1H3v1h2zm0 3H4v1H3v1h2zm0-6H4v1H3v1h2zm0-3H4v1H3v1h2zm10.5 14H13V11h2.5v-1H12v12h3.5zM23 10h-3.5v1H22v10h-2.5v1H23z"},
organization:{16:"M8 3V1H2v2H0v13h7v-4h1v4h7V3zm1 12v-4H6v4H1V4h2V2h4v2h7v11zM6 9h3V6H6zm1-2h1v1H7zm3-1v3h3V6zm2 2h-1V7h1zM2 9h3V6H2zm1-2h1v1H3z",24:"M22 4H12V2H5v2H2v18H0v1h11v-5h2v5h11v-1h-2zm-8 18v-5h-4v5H3V5h3V3h5v2h10v17zM5 11h4V7H5zm1-3h2v2H6zm4 3h4V7h-4zm1-3h2v2h-2zm4 3h4V7h-4zm1-3h2v2h-2zM5 16h4v-4H5zm1-3h2v2H6zm4 3h4v-4h-4zm1-3h2v2h-2zm4 3h4v-4h-4zm1-3h2v2h-2z"},"pause-f":{16:"M5 14H2a1.003 1.003 0 0 1-1-1V2a1.003 1.003 0 0 1 1-1h3a1.003 1.003 0 0 1 1 1v11a1.003 1.003 0 0 1-1 1zm9-1V2a1.003 1.003 0 0 0-1-1h-3a1.003 1.003 0 0 0-1 1v11a1.003 1.003 0 0 0 1 1h3a1.003 1.003 0 0 0 1-1z"},
pencil:{16:"M14.792 2.666l-1.414-1.413a.965.965 0 0 0-1.385-.03l-1.444 1.444-8.763 8.72L.03 15.481a.371.371 0 0 0 .488.488l4.096-1.756 8.763-8.72-.001-.001.002.002 1.443-1.444a.965.965 0 0 0-.03-1.385zM1.569 14.431l.554-1.293.74.739zm2.338-.924l-1.414-1.414 7.963-7.92 1.414 1.415zm8.67-8.626l-1.413-1.414 1.29-1.29a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .433z"},pin:{24:"M12 1C8.687 1 6 2.283 6 5.619v11.93l6 6.04 6-6.04V5.619C18 2.283 15.313 1 12 1zm5.1 16.238L12 22.37l-5.1-5.133V5.488c0-3.05 2.773-3.69 5.1-3.69s5.1.64 5.1 3.69zM15 8a3 3 0 1 1-3-3 3 3 0 0 1 3 3zm-1 0a2 2 0 1 0-2 2 2.003 2.003 0 0 0 2-2z"},
plus:{16:"M14 8H9v5H8V8H3V7h5V2h1v5h5z",24:"M22 13h-9v9h-1v-9H3v-1h9V3h1v9h9z",32:"M16 17H8v-1h8V8h1v8h8v1h-8v8h-1z"},"plus-circle":{24:"M11.5 1.2a10.3 10.3 0 1 0 10.3 10.3A10.299 10.299 0 0 0 11.5 1.2zm0 19.6a9.3 9.3 0 1 1 9.3-9.3 9.31 9.31 0 0 1-9.3 9.3zM12 11h5v1h-5v5h-1v-5H6v-1h5V6h1z",32:"M16.5 3.2a13.3 13.3 0 1 0 13.3 13.3A13.3 13.3 0 0 0 16.5 3.2zm0 25.6a12.3 12.3 0 1 1 12.3-12.3 12.314 12.314 0 0 1-12.3 12.3zM17 16h7v1h-7v7h-1v-7H9v-1h7V9h1z"},"plus-f":{16:"M9 7h5v2H9v5H7V9H2V7h5V2h2z"},"plus-square":{16:"M13.071 1H1.93a.929.929 0 0 0-.93.929V13.07a.929.929 0 0 0 .929.929H13.07a.929.929 0 0 0 .929-.929V1.93a.929.929 0 0 0-.928-.93zM13 13H2V2h11zm-2-5H8v3H7V8H4V7h3V4h1v3h3z",
24:"M19.719 2H3.28A1.281 1.281 0 0 0 2 3.281v16.437A1.282 1.282 0 0 0 3.281 21h16.437A1.282 1.282 0 0 0 21 19.718V3.281A1.281 1.281 0 0 0 19.719 2zM20 19.719a.281.281 0 0 1-.281.281H3.28a.281.281 0 0 1-.28-.281V3.28A.281.281 0 0 1 3.281 3H19.72a.281.281 0 0 1 .281.281zM12 11h6v1h-6v6h-1v-6H5v-1h6V5h1z"},polygon:{16:"M15 1L6.833 7 1 4v11h14zm-1 13H2V5.639l4.927 2.534L14 2.976z",24:"M2 4.8V22h20V2l-11.538 8.4zm19-.835V21H3V6.661l7.489 4.956z"},point:{16:"M6 11h5V6H6zm1-4h3v3H7zm5 1h4v1h-4zM1 8h4v1H1zm8 8H8v-4h1zM9 5H8V1h1z",
24:"M16 12h7v1h-7zM2 13h7v-1H2zm10 10h1v-7h-1zm0-14h1V2h-1zm-2 1h5v5h-5zm1 4h3v-3h-3z"},portal:{24:"M11.994 1.115L3.628 5.356A4.8 4.8 0 0 0 1 9.633v7.596A4.732 4.732 0 0 0 5.4 22h11.141A6.786 6.786 0 0 0 23 15.17V6.104zM22 15.17A5.775 5.775 0 0 1 16.541 21H5.401A3.724 3.724 0 0 1 2 17.229V9.633a3.777 3.777 0 0 1 2.08-3.385l7.939-4.024L22 6.748zm-7.686-2.152l2.537 1.4-4.849 2.676-4.85-2.676 2.537-1.4.932.514-1.606.886 2.987 1.648 2.987-1.648-1.607-.886zM12.002 7.8l-4.85 2.676 4.85 2.676 4.85-2.676zm0 4.324l-2.987-1.648 2.987-1.648 2.987 1.648z"},
promote:{48:"M13.147 22.954l-7.021 2.167-.236-.765 7.021-2.167zm.52 1.686l-7.021 2.167.236.764 7.021-2.166zm24.084-4.995l-1.812.56 3.706 12.01a1.861 1.861 0 0 1-1.262 2.31 1.85 1.85 0 0 1-1.416-.152 1.847 1.847 0 0 1-.894-1.11l-.45-1.457c-1.123-.63-9.406-5.06-16.124-2.985l-.917.283-2.128.657c.094.282.188.565.283.842a7.906 7.906 0 0 0 2.858 1.61 1.423 1.423 0 0 1 .616 2.372l-1.252 1.256a26.572 26.572 0 0 0 3.062 4.561l.6-.185a2.224 2.224 0 0 1 2.778 1.469l.128.414a2.223 2.223 0 0 1-1.468 2.78l-5.163 1.592-.17-.166a29.572 29.572 0 0 1-8.8-14.531l-.613.189a6.55 6.55 0 0 1-3.862-12.516l9.269-2.86.916-.283c6.721-2.073 11.068-10.401 11.64-11.552l-.452-1.466a1.86 1.86 0 0 1 1.26-2.315 1.865 1.865 0 0 1 2.31 1.261l3.64 11.799 1.812-.559a3.23 3.23 0 0 1 1.905 6.173zm-19.788 8.812l-3.39-10.986-8.886 2.741A5.749 5.749 0 1 0 9.077 31.2zm1.411 4.526a8.179 8.179 0 0 1-2.9-1.567 7.292 7.292 0 0 0 1.202 3.414 1.309 1.309 0 0 0 .616.547l1.353-1.356a.622.622 0 0 0-.271-1.038zm-3.685-2.986l-5 1.542a28.411 28.411 0 0 0 8.427 14.028l4.706-1.452a1.423 1.423 0 0 0 .942-1.779l-.128-.414a1.426 1.426 0 0 0-1.78-.94l-1.106.34-.17-.2a27.468 27.468 0 0 1-3.354-4.954 1.696 1.696 0 0 1-1.108-.75c-.905-1.154-1.74-3.717-1.32-4.58a.692.692 0 0 1 .125-.146q-.118-.345-.234-.695zm19.598.719L27.613 5.845c-1.316 2.454-5.463 9.288-11.74 11.225l-.535.164 3.39 10.988.535-.165c6.278-1.935 13.554 1.374 16.024 2.659zm3.59 1.727l-9.25-29.979a1.061 1.061 0 1 0-2.037.592l9.249 29.977a1.061 1.061 0 1 0 2.039-.59zM37.516 18.88a2.43 2.43 0 1 0-1.433-4.643l-1.812.559 1.433 4.643zM43.39 3.96l-.567-.565-4.17 4.17.567.566zM43.235 15.5l4.869-1.305-.207-.772-4.869 1.305zm-1.25 8.108l5.911 1.583.207-.772-5.91-1.584z"},
question:{rtl:"ar",16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 10.5a1 1 0 1 1-1 1 1 1 0 0 1 1-1zM8 9H7a3.046 3.046 0 0 1 1.282-2.51c.47-.462.736-.746.732-1.217a1.324 1.324 0 0 0-1.46-1.27 1.418 1.418 0 0 0-1.548 1.394h-1c0-3.09 5.009-3.154 5.008-.128a2.617 2.617 0 0 1-1.032 1.935C8.462 7.715 8 7.995 8 9z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.517 14.517 0 0 0 15.5 1zm0 28A13.5 13.5 0 1 1 29 15.5 13.515 13.515 0 0 1 15.5 29zm.5-9h-1c0-2.959 1.227-3.919 2.371-5.207.916-1.031 1.639-1.846 1.629-3.264C19 9.104 17.08 8 15.167 8 13.16 8 11 9.194 11 11.817h-1a4.523 4.523 0 0 1 1.648-3.628A5.549 5.549 0 0 1 15.168 7C17.637 7 20 8.555 20 11.525a5.598 5.598 0 0 1-1.881 3.932C17.043 16.668 16 17.421 16 20zm-.5 4.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z"},
"question-f":{24:"M12.5 19.5a1 1 0 1 1 1-1 1 1 0 0 1-1 1zm0-17.3a10.3 10.3 0 1 0 10.3 10.3A10.299 10.299 0 0 0 12.5 2.2zm2.144 9.9l-.113.11a3.321 3.321 0 0 0-1.33 2.79v.2H11.8V15a4.735 4.735 0 0 1 1.77-3.807l.092-.09c.664-.652 1.144-1.122 1.138-1.906A1.998 1.998 0 0 0 12.607 7.2a2.228 2.228 0 0 0-2.424 2.19v.2h-1.4v-.2a3.382 3.382 0 0 1 1.237-2.711 4.082 4.082 0 0 1 2.587-.88A3.36 3.36 0 0 1 16.2 9.194a3.937 3.937 0 0 1-1.556 2.908z",32:"M16.5 25.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zm0-22.3a13.3 13.3 0 1 0 13.3 13.3A13.3 13.3 0 0 0 16.5 3.2zm2.77 13.388c-.137.155-.273.3-.406.443A4.936 4.936 0 0 0 17.2 21v.2h-1.4V21a6.202 6.202 0 0 1 2.039-4.92c.128-.138.256-.276.383-.42.922-1.038 1.588-1.787 1.578-3.13 0-2.3-1.824-3.33-3.632-3.33-1.911 0-3.968 1.132-3.968 3.617v.2h-1.4v-.2a4.715 4.715 0 0 1 1.721-3.782A5.741 5.741 0 0 1 16.168 7.8c2.424 0 5.032 1.478 5.032 4.725a5.76 5.76 0 0 1-1.93 4.063z"},
"raster-function-template":{32:"M27 6H10V5h17zm0 7H10v1h17zM3 3h5v5H3zm1 4h3V4H4zm-1 4h5v5H3zm1 4h3v-3H4zm-1 4h5v5H3zm1 4h3v-3H4zm6-1h5v-1h-5zm8.856 0l.2-1.411c.203-1.372.388-2.37 1.76-2.37a2.43 2.43 0 0 1 .865.17l.354-1.186a2.21 2.21 0 0 0-.981-.203c-2.132 0-2.997 1.371-3.266 3.3l-.254 1.7h-1.726l-.154 1h1.726l-.964 7h1.321l.964-7h1.93l.153-1zM29.8 22h-1.623l-2.41 2.873L24.059 22h-1.744l2.343 3.693L20.777 30h1.657l2.974-3.453L27.46 30h1.76l-2.701-4.307z"},"recycle-bin":{16:"M16 1.5c0-.827-.673-1.5-1.5-1.5h-13C.673 0 0 .673 0 1.5S.673 3 1.5 3h13c.827 0 1.5-.673 1.5-1.5zm-15 0a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13a.5.5 0 0 1-.5-.5zm10.653 6.465l.866-.5-.72-1.248a.2.2 0 0 0-.347 0L11 6.998l-.038.067-.866-.5.49-.848c.1-.174.246-.303.414-.396.546-.3 1.338-.17 1.665.396l.72 1.248.866-.5-.299 2.482-2.299-.982zm-4.231 3.234l.713-1.236-.866-.5 2.299-.982.299 2.482-.866-.5-.715 1.237a.197.197 0 0 0 0 .198.202.202 0 0 0 .173.102H10v1H8.459c-.427 0-.825-.23-1.04-.6a1.194 1.194 0 0 1 .003-1.201zM11.846 15h1.113l-.007.06c-.111.561-.574.94-1.106.94H4.154c-.532 0-.995-.379-1.1-.901L1.722 4h1.006L4.04 14.94c.006.018.056.06.114.06h7.692zm3.984-3.8a1.202 1.202 0 0 1-1.039 1.8H13v1l-2-1.5 2-1.5v1h1.791a.2.2 0 0 0 .174-.3l-.765-1.325.865-.5.765 1.325z"},
refresh:{16:"M13.91 9h1.01A6.987 6.987 0 0 1 2 11.587V14H1v-4h4v1H2.812A5.99 5.99 0 0 0 13.91 9zM14 2v2.413A6.987 6.987 0 0 0 1.08 7h1.01a5.99 5.99 0 0 1 11.098-2H11v1h4V2z"},reset:{16:"M.146 6.854L4 10.707l3.854-3.853-.707-.707L4.232 9.06a5.48 5.48 0 1 1 3.65 3.697l-.293.956A6.501 6.501 0 1 0 3 7.5a6.58 6.58 0 0 0 .061.854L.854 6.146z"},"road-sign":{32:"M30.927 14.615L17.386 1.076a1.957 1.957 0 0 0-2.77-.002L1.073 14.615a1.96 1.96 0 0 0 0 2.77l13.543 13.542a1.957 1.957 0 0 0 2.768 0l13.543-13.542a1.96 1.96 0 0 0 0-2.77zm-.707 2.063L16.677 30.22a.957.957 0 0 1-1.354 0L1.78 16.678a.96.96 0 0 1 0-1.356l13.543-13.54a.957.957 0 0 1 1.354 0l13.543 13.54a.96.96 0 0 1 0 1.356zM19.354 9.646l3.853 3.855-3.852 3.853-.707-.707L21.293 14h-4.639a4.68 4.68 0 0 0-4.674 4.674v3.282h-1v-3.282A5.68 5.68 0 0 1 16.654 13h4.64l-2.648-2.647z"},
save:{16:"M14.707 3.293l-2-2A.995.995 0 0 0 12 1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4a.99.99 0 0 0-.293-.707zM9 2v2H8V2zM5 2h2v3h3V2h1v4H5zm6 12H5v-4h6zm3 0h-2V9H4v5H2V2l2 .001V6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V2l2 2z",24:"M22.969.844v21.312a.844.844 0 0 1-.844.844H5.25a.848.848 0 0 1-.506-.168L1.37 20.3a.847.847 0 0 1-.338-.676V.844A.845.845 0 0 1 1.875 0h20.25a.845.845 0 0 1 .844.844zM6 1v8h12V1zm3 21v-5H8v5zm9 0v-7H6v7h1v-6h3v6zm4-21h-3v9H5V1H2v18.548l3 2.278v-7.17A.769.769 0 0 1 5.844 14h12.312a.769.769 0 0 1 .844.656V22h3z"},
search:{16:"M9.85 9.153a5 5 0 1 0-.69.69l4.631 4.631.69-.69zm-1.02-.326A3.973 3.973 0 0 1 6 10a4.002 4.002 0 1 1 2.83-1.172z",24:"M21.995 21.288l-6.855-6.855a7.517 7.517 0 1 0-.707.707l6.855 6.855zm-17.092-7.19a6.501 6.501 0 1 1 9.6-.45l-.854.855a6.501 6.501 0 0 1-8.746-.405z"},"search-f":{24:"M22.289 20.91l-6.847-6.846a7.524 7.524 0 1 0-1.419 1.409l6.852 6.852zM4 9.5A5.5 5.5 0 1 1 9.5 15 5.506 5.506 0 0 1 4 9.5z"},"select-category":{16:"M5 8H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zm7-5h-3a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zM13 0h-3a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zM5 0H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zm-4.265 6.646l.738-.738.784.788L4.962 10l.738.738-2.443 2.43z"},
settings:{16:"M2.17 6.06L0 6.862l.009 2.333 2.179.789a6.153 6.153 0 0 0 .317.764l-.966 2.104 1.655 1.643 2.1-.983a6.105 6.105 0 0 0 .765.318L6.863 16l2.333-.008.789-2.18a6.162 6.162 0 0 0 .764-.317l2.104.966 1.643-1.656-.983-2.099a6.097 6.097 0 0 0 .318-.765L16 9.137l-.009-2.333-2.179-.789a6.149 6.149 0 0 0-.318-.764l.967-2.104-1.656-1.643-2.099.983a6.106 6.106 0 0 0-.765-.318L9.137 0 6.804.009l-.789 2.179a6.163 6.163 0 0 0-.764.317L3.147 1.54 1.504 3.195l.983 2.099a6.093 6.093 0 0 0-.318.765zm3.709 1.592a2.15 2.15 0 1 1 1.773 2.47 2.15 2.15 0 0 1-1.773-2.47zm.951 5.382l-.454-.151a5.436 5.436 0 0 1-.644-.268l-.43-.21-1.899.889-.664-.66.876-1.905-.216-.428a5.223 5.223 0 0 1-.265-.64l-.155-.453-1.973-.715-.003-.935 1.963-.728.151-.454a5.436 5.436 0 0 1 .268-.644l.21-.43-.889-1.899.66-.664 1.904.876.43-.216a5.223 5.223 0 0 1 .639-.265l.453-.155.715-1.973.934-.003.728 1.963.455.151a5.368 5.368 0 0 1 .644.268l.43.21 1.899-.889.664.66-.876 1.905.216.428a5.223 5.223 0 0 1 .265.64l.155.453 1.973.715.003.935-1.962.727-.152.454a5.45 5.45 0 0 1-.268.645l-.21.43.889 1.899-.66.664-1.905-.876-.428.216a5.223 5.223 0 0 1-.64.265l-.453.156-.715 1.972-.935.003zM7.998 4.85a3.154 3.154 0 1 0 .512.042 3.138 3.138 0 0 0-.512-.042z"},
share:{16:"M14 9h1v6H1V1h8v1H2v12h12zm-8-.31V11h1V8.69A3.7 3.7 0 0 1 10.6 5h2.68l-1.4 1.42.71.71 2.61-2.61-2.61-2.61-.71.71L13.28 4H10.6A4.67 4.67 0 0 0 6 8.69z"},"sign-out":{16:"M15 1v14H6v-5h1v4h7V2H7v5H6V1zm-4 7H2.773l1.58-1.581-.706-.707-2.81 2.81 2.81 2.808.706-.707L2.73 9H11z"},sliders:{16:"M3 8h1v1H3v7H2V9H1V8h1V0h1zm6-8H8v4H7v1h1v11h1V5h1V4H9zm6 12V0h-1v12h-1v1h1v3h1v-3h1v-1z"},"sort-descending":{rtl:!0,16:"M4 5h11v1H4zM1 2h14V1H1zm6 8h8V9H7zm3 4h5v-1h-5z"},"speech-bubble":{16:"M8.666 12h4.084A2.253 2.253 0 0 0 15 9.75v-5.5A2.253 2.253 0 0 0 12.75 2h-9.5A2.253 2.253 0 0 0 1 4.25v5.5A2.253 2.253 0 0 0 3.25 12H4v3.5zM3.25 11A1.251 1.251 0 0 1 2 9.75v-5.5A1.251 1.251 0 0 1 3.25 3h9.5A1.251 1.251 0 0 1 14 4.25v5.5A1.251 1.251 0 0 1 12.75 11H8.334L5 13.5V11zM12 6H4V5h8zm-2 3H4V8h6z"},
star:{16:"M15.977 6.016H9.883L7.998.2 6.112 6.016H-.023l4.97 3.586-1.893 5.813 4.944-3.597 4.943 3.597-1.894-5.813zm-7.979 4.566l-3.038 2.21 1.164-3.573-3.052-2.203h3.767l1.159-3.573 1.158 3.573h3.746l-3.03 2.206 1.162 3.569z"},"star-f":{16:"M7.998.2l1.885 5.816h6.094l-4.93 3.586 1.894 5.813-4.943-3.597-4.944 3.597 1.893-5.813-4.97-3.586h6.135z"},table:{16:"M16 15H0V1h16zM5 9H1v2h4zm1-3v2h4V6zM5 6H1v2h4zm5 8v-2H6v2zm0-5H6v2h4zm1-3v2h4V6zm-6 6H1v2h4zm6-1h4V9h-4zm0 3h4v-2h-4zm4-12H1v3h14z",32:"M2 5v21h27V5zm5 20H3v-4h4zm0-5H3v-4h4zm0-5H3v-4h4zm10 10H8v-4h9zm0-5H8v-4h9zm0-5H8v-4h9zm11 10H18v-4h10zm0-5H18v-4h10zm0-5H18v-4h10zm0-5H3V6h25z"},
tablet:{16:"M15 2H1a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zM1 3.25A.25.25 0 0 1 1.25 3H2v4H1zM1.25 12a.25.25 0 0 1-.25-.25V8h1v4zM3 12V3h10v9zm12-.25a.25.25 0 0 1-.25.25H14V3h.75a.25.25 0 0 1 .25.25z",24:"M22.75 4H1.25A1.25 1.25 0 0 0 0 5.25v13.5A1.25 1.25 0 0 0 1.25 20h21.5A1.25 1.25 0 0 0 24 18.75V5.25A1.25 1.25 0 0 0 22.75 4zM1.25 19a.25.25 0 0 1-.25-.25V13h1v-2H1V5.25A.25.25 0 0 1 1.25 5H3v14zM4 5h17v14H4zm19 13.75a.25.25 0 0 1-.25.25H22V5h.75a.25.25 0 0 1 .25.25z"},text:{24:"M22 5H12V4h10zm0 3h-8v1h8zm0 5v-1h-6v1zM2 17h20v-1H2zm0 4h20v-1H2zm.234-8L7.042 2.049h.916L12.766 13h-1.093L9.917 9H5.083l-1.756 4zm3.288-5h3.956L7.5 3.494z"},
trash:{16:"M2 4l1 12h9l1-12zm9.08 11H3.92L3.087 5h8.826zM5 6.4a.46.46 0 0 1 .5-.4.46.46 0 0 1 .5.4v7.2a.46.46 0 0 1-.5.4.46.46 0 0 1-.5-.4zm2 0a.46.46 0 0 1 .5-.4.46.46 0 0 1 .5.4v7.2a.46.46 0 0 1-.5.4.46.46 0 0 1-.5-.4zm2 0a.512.512 0 0 1 1 0v7.2a.512.512 0 0 1-1 0zM11 2V0H4v2H1v1h13V2zm-1 0H5V1h5z"},upload:{32:"M32 15.704C32 19.308 29.13 22 26.562 22H23v-1h3.562C28.372 21 31 18.937 31 15.704a5.561 5.561 0 0 0-3.742-5.287l-.872-.297-.13-.911A8.153 8.153 0 0 0 18.462 2a7.848 7.848 0 0 0-6.859 4.294l-.556 1.045-1.146-.298a3.684 3.684 0 0 0-.923-.135 3.105 3.105 0 0 0-3.224 2.956l-.046.86-.765.394A5.37 5.37 0 0 0 2 15.897C2 18.521 4.157 21 6.437 21H10v1H6.437C3.592 22 1 19.092 1 15.897a6.369 6.369 0 0 1 3.486-5.67l.255-.131.016-.287a4.128 4.128 0 0 1 4.222-3.903 4.61 4.61 0 0 1 1.175.168l.382.099.185-.349A8.845 8.845 0 0 1 18.463 1a9.157 9.157 0 0 1 8.782 8.068l.044.304.29.099A6.559 6.559 0 0 1 32 15.704zM10.96 18.3l.708.707L16 14.674V29h1V14.674l4.332 4.332.707-.707-5.539-5.54z"},
"upload-to":{16:"M12 2v1H3V2zM4.708 7.618l.707.707L7 6.74V15h1V6.705l1.62 1.62.706-.707-2.808-2.81z",24:"M11 20V8.707l-2.646 2.647-.707-.707L11.5 6.793l3.854 3.854-.707.707L12 8.707V20zM5 4h13V3H5z",32:"M24 6H7V5h17zm-8.5 3.793l-4.854 4.854.707.707L15 11.707V26h1V11.707l3.646 3.646.707-.707z"},"urban-model":{32:"M13 29V7h2V3h1.455L18 5.568V14h-2v1h3v6h1v-7h-1V5.29L17.02 2H14v4h-2v15H9V11H4v3H2v16h12v-1zm-1 0H3V15h2v-3h3v9H6v1h6zm18-16v17h-4v-1h3V14h-4v7h-1v-8zm-5 9h-6v3h-4v5h10zm-1 7h-8v-3h4v-3h4zM8 24h2v1H8zm0 2h2v1H8z"},
user:{16:"M11 3a3 3 0 1 0-3 3 3 3 0 0 0 3-3zM8 5a2 2 0 1 1 2-2 2 2 0 0 1-2 2zm3 1H5a2 2 0 0 0-2 2v6a1 1 0 0 0 1 1h1a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1h1a1 1 0 0 0 1-1V8a2 2 0 0 0-2-2zm1 3v5h-1V9h-1v6H6V9H5v5H4V8a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"},"user-right":{16:[{d:"M 10 7.292 13.26 7.292 11.675 5.707 12.382 5 15.192 7.81 12.382 10.618 11.675 9.911 13.295 8.292 10 8.292z"},{d:"M7.2,2.7 C7.2,1.20883118 5.99116882,0 4.5,0 C3.00883118,0 1.8,1.20883118 1.8,2.7 C1.8,4.19116882 3.00883118,5.4 4.5,5.4 C5.99116882,5.4 7.2,4.19116882 7.2,2.7 Z M4.5,4.5 C3.50588745,4.5 2.7,3.69411255 2.7,2.7 C2.7,1.70588745 3.50588745,0.9 4.5,0.9 C5.49411255,0.9 6.3,1.70588745 6.3,2.7 C6.3,3.17738968 6.11035769,3.63522672 5.77279221,3.97279221 C5.43522672,4.31035769 4.97738968,4.5 4.5,4.5 Z M7.2,5.4 L1.8,5.4 C0.80588745,5.4 0,6.20588745 0,7.2 L0,12.6 C0,13.0970563 0.402943725,13.5 0.9,13.5 L1.8,13.5 C1.8,13.9970563 2.20294373,14.4 2.7,14.4 L6.3,14.4 C6.79705627,14.4 7.2,13.9970563 7.2,13.5 L8.1,13.5 C8.59705627,13.5 9,13.0970563 9,12.6 L9,7.2 C9,6.20588745 8.19411255,5.4 7.2,5.4 Z M8.1,8.1 L8.1,12.6 L7.2,12.6 L7.2,8.1 L6.3,8.1 L6.3,13.5 L2.7,13.5 L2.7,8.1 L1.8,8.1 L1.8,12.6 L0.9,12.6 L0.9,7.2 C0.9,6.70294373 1.30294373,6.3 1.8,6.3 L7.2,6.3 C7.69705627,6.3 8.1,6.70294373 8.1,7.2 L8.1,8.1 Z"}]},
"user-plus":{24:"M13 4a4 4 0 1 0-4 4 4 4 0 0 0 4-4zM9 7a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm4 16.25a.75.75 0 0 1-.75.75h-6.5a.75.75 0 0 1-.75-.75V21H3.5A1.5 1.5 0 0 1 2 19.5v-9.25A2.25 2.25 0 0 1 4.25 8h9.5A2.25 2.25 0 0 1 16 10.25V17h-1v-6.75A1.251 1.251 0 0 0 13.75 9h-9.5A1.251 1.251 0 0 0 3 10.25v9.25a.501.501 0 0 0 .5.5H5v-8h1v11h6V12h1m10 7v.999h-4V24h-1v-4.001h-4V19h4v-4h1v4z",32:"M13.065 10a5 5 0 1 0-5-5 5 5 0 0 0 5 5zm.002-9a4 4 0 1 1-4.002 4 4 4 0 0 1 4.002-4zM5 14v12a1 1 0 0 0 1 1h1V15h1v16h10V15h1v16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1v-3H6a2 2 0 0 1-2-2V14a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v10h-1V14a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2zm26 12v.999h-5V32h-1v-5.001h-5V26h5v-5h1v5z"},
users:{16:"M6.5 7a3.49 3.49 0 0 1 .663.067A3.97 3.97 0 0 0 7.8 8.375 2.475 2.475 0 0 0 6.5 8h-3A2.503 2.503 0 0 0 1 10.5V12h4.068a4.642 4.642 0 0 0-.218 1H0v-2.5A3.504 3.504 0 0 1 3.5 7zm1.456-3.564a3.969 3.969 0 0 0-.857 1.702A2.996 2.996 0 1 1 8 3a2.964 2.964 0 0 1-.044.436zM7 3a2 2 0 1 0-2 2 2.002 2.002 0 0 0 2-2zm5.5 7a3.504 3.504 0 0 1 3.5 3.5V16H6v-2.5A3.504 3.504 0 0 1 9.5 10zm-3 1A2.503 2.503 0 0 0 7 13.5V15h8v-1.5a2.503 2.503 0 0 0-2.5-2.5zM8 6a3 3 0 1 1 3 3 3.003 3.003 0 0 1-3-3zm1 0a2 2 0 1 0 2-2 2.002 2.002 0 0 0-2 2z",
24:"M7.5 9A3.5 3.5 0 1 0 4 5.5 3.504 3.504 0 0 0 7.5 9zm0-6A2.5 2.5 0 1 1 5 5.5 2.503 2.503 0 0 1 7.5 3zm2.713 14a5.456 5.456 0 0 0-.188 1H2v-3.5A4.505 4.505 0 0 1 6.5 10h2a4.503 4.503 0 0 1 4.414 3.649 5.518 5.518 0 0 0-.936.632A3.495 3.495 0 0 0 8.5 11h-2A3.504 3.504 0 0 0 3 14.5V17zm6.287-4A3.5 3.5 0 1 0 13 9.5a3.504 3.504 0 0 0 3.5 3.5zm0-6A2.5 2.5 0 1 1 14 9.5 2.503 2.503 0 0 1 16.5 7zM22 18.5a4.505 4.505 0 0 0-4.5-4.5h-2a4.505 4.505 0 0 0-4.5 4.5V22h11zM21 21h-9v-2.5a3.504 3.504 0 0 1 3.5-3.5h2a3.504 3.504 0 0 1 3.5 3.5z",
32:"M10.5 11A4.5 4.5 0 1 0 6 6.5a4.505 4.505 0 0 0 4.5 4.5zm0-8A3.5 3.5 0 1 1 7 6.5 3.504 3.504 0 0 1 10.5 3zm1.166 19a6.98 6.98 0 0 0-.14 1H2v-5.5A5.506 5.506 0 0 1 7.5 12h6a5.464 5.464 0 0 1 2.65.683 5.985 5.985 0 0 0-.138 1.085A4.474 4.474 0 0 0 13.5 13h-6A4.505 4.505 0 0 0 3 17.5V22zm9.834-4a4.5 4.5 0 1 0-4.5-4.5 4.505 4.505 0 0 0 4.5 4.5zm0-8a3.5 3.5 0 1 1-3.5 3.5 3.504 3.504 0 0 1 3.5-3.5zm3 9h-6a5.506 5.506 0 0 0-5.5 5.5V30h17v-5.5a5.506 5.506 0 0 0-5.5-5.5zM29 29H14v-4.5a4.505 4.505 0 0 1 4.5-4.5h6a4.505 4.505 0 0 1 4.5 4.5z"},
web:{24:"M11.5 0A11.5 11.5 0 1 0 23 11.5 11.513 11.513 0 0 0 11.5 0zM1.025 12h3.989a18.969 18.969 0 0 0 .753 5H2.573a10.415 10.415 0 0 1-1.548-5zM12 5V1.05c1.51.274 2.862 1.77 3.779 3.95zm4.15 1a17.518 17.518 0 0 1 .836 5H12V6zM11 1.05V5H7.221C8.138 2.82 9.491 1.324 11 1.05zM11 6v5H6.014a17.518 17.518 0 0 1 .836-5zm-5.986 5H1.025a10.415 10.415 0 0 1 1.548-5h3.194a18.969 18.969 0 0 0-.753 5zm1 1H11v5H6.85a17.518 17.518 0 0 1-.836-5zM11 18v3.95c-1.51-.274-2.862-1.77-3.779-3.95zm1 3.95V18h3.779c-.917 2.18-2.27 3.676-3.779 3.95zM12 17v-5.01h5a17.58 17.58 0 0 1-.85 5.01zm5.986-5.01h3.989A10.453 10.453 0 0 1 20.427 17h-3.194a19.046 19.046 0 0 0 .753-5.01zm0-.99a18.969 18.969 0 0 0-.753-5h3.194a10.415 10.415 0 0 1 1.548 5zm1.744-6h-2.837a9.988 9.988 0 0 0-2.119-3.47A10.528 10.528 0 0 1 19.73 5zM8.226 1.53A9.988 9.988 0 0 0 6.107 5H3.27a10.528 10.528 0 0 1 4.956-3.47zM3.27 18h2.837a9.988 9.988 0 0 0 2.119 3.47A10.528 10.528 0 0 1 3.27 18zm11.504 3.47A9.988 9.988 0 0 0 16.893 18h2.837a10.528 10.528 0 0 1-4.956 3.47z",
32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.5 14.5 0 0 0 15.5 1zM2.025 16h4.99a22.884 22.884 0 0 0 .898 6H3.669a13.424 13.424 0 0 1-1.644-6zM16 8V2.046C18.387 2.33 20.472 4.62 21.732 8zm6.07 1a22.167 22.167 0 0 1 .916 6H16V9zM15 2.046V8H9.268c1.26-3.38 3.345-5.669 5.732-5.954zM15 9v6H8.014a22.167 22.167 0 0 1 .916-6zm-7.985 6h-4.99A13.424 13.424 0 0 1 3.67 9h4.244a22.884 22.884 0 0 0-.898 6zm1 1H15v6H8.93a22.167 22.167 0 0 1-.916-6zM15 23v5.954C12.613 28.67 10.528 26.38 9.268 23zm1 5.954V23h5.732c-1.26 3.38-3.345 5.669-5.732 5.954zM16 22v-6h6.986a22.167 22.167 0 0 1-.916 6zm7.985-6h4.99a13.424 13.424 0 0 1-1.644 6h-4.244a22.884 22.884 0 0 0 .898-6zm0-1a22.884 22.884 0 0 0-.898-6h4.244a13.424 13.424 0 0 1 1.644 6zm2.739-7H22.76a12.808 12.808 0 0 0-3.455-5.447A13.52 13.52 0 0 1 26.724 8zm-15.03-5.447A12.808 12.808 0 0 0 8.239 8H4.276a13.52 13.52 0 0 1 7.418-5.447zM4.276 23H8.24a12.808 12.808 0 0 0 3.455 5.447A13.519 13.519 0 0 1 4.276 23zm15.03 5.447A12.808 12.808 0 0 0 22.761 23h3.963a13.519 13.519 0 0 1-7.418 5.447z"},
wrench:{32:"M23.875 8.884l-.938-2.327 4.145-3.224a.67.67 0 0 0 .264-.677l-.051-.215-.09-.11a.695.695 0 0 0-.441-.251 8.172 8.172 0 0 0-5.858 1.395 5.627 5.627 0 0 0-1.68 6.3l-.008.035a4.82 4.82 0 0 1-.769 1.144L3.124 24.33a3.957 3.957 0 0 0 .002 5.522A3.793 3.793 0 0 0 5.851 31a3.81 3.81 0 0 0 2.75-1.175L21.81 14.193a1.86 1.86 0 0 1 .771-.485 2.076 2.076 0 0 1 .366.022 5.244 5.244 0 0 0 5.196-.662 8.46 8.46 0 0 0 2.85-5.36.692.692 0 0 0-.126-.506l-.123-.138-.09-.054a.698.698 0 0 0-.786.056l-4.074 3.232zm5.992-.55a7.24 7.24 0 0 1-2.339 3.945 4.263 4.263 0 0 1-4.266.5l-.118-.031a3.31 3.31 0 0 0-.617-.038 2.616 2.616 0 0 0-1.435.79L7.862 29.152a2.803 2.803 0 0 1-2.01.848H5.85a2.802 2.802 0 0 1-2.012-.849 2.946 2.946 0 0 1-.03-4.093l15.354-13.409a5.294 5.294 0 0 0 1.018-1.57 1.989 1.989 0 0 0 .054-.288l.015-.118-.04-.112a4.648 4.648 0 0 1 1.31-5.297A6.938 6.938 0 0 1 25.627 3c.083 0 .166.001.25.004L22.321 5.77a.968.968 0 0 0-.306 1.105l.937 2.393a.904.904 0 0 0 .107.19.856.856 0 0 0 .195.193l1.938 1.446a.937.937 0 0 0 1.147-.018zM6.501 25H5.5a1.499 1.499 0 0 0-1.499 1.495L4 27.505a1.502 1.502 0 0 0 1.5 1.497l1.009-.001a1.503 1.503 0 0 0 1.495-1.504l-.003-1A1.5 1.5 0 0 0 6.501 25zm.005 3l-1.006.002a.5.5 0 0 1-.5-.5l.001-1.004A.5.5 0 0 1 5.5 26h1.001a.5.5 0 0 1 .5.5l.003.999a.502.502 0 0 1-.498.501z"},
x:{16:"M8.718 8l5.303 5.303-.707.707L8.01 8.707 2.707 14.01 2 13.303 7.303 8 2 2.697l.707-.707L8.01 7.293l5.304-5.303.707.707z",24:"M18.01 6.697L12.707 12l5.303 5.303-.707.707L12 12.707 6.697 18.01l-.707-.707L11.293 12 5.99 6.697l.707-.707L12 11.293l5.303-5.303z",32:"M23.985 8.722L16.707 16l7.278 7.278-.707.707L16 16.707l-7.278 7.278-.707-.707L15.293 16 8.015 8.722l.707-.707L16 15.293l7.278-7.278z"},"x-circle":{32:"M25.753 5.247a14.5 14.5 0 1 0 0 20.506 14.5 14.5 0 0 0 0-20.506zm-.636 19.87a13.6 13.6 0 1 1 0-19.234 13.6 13.6 0 0 1 0 19.234zM21.864 9.843L16.207 15.5l5.657 5.657-.707.707-5.657-5.657-5.657 5.657-.707-.707 5.657-5.657-5.657-5.657.707-.707 5.657 5.657 5.657-5.657z",
24:"M17.45 8.257L13.207 12.5l4.243 4.243-.707.707-4.243-4.243-4.243 4.243-.707-.707 4.243-4.243L7.55 8.257l.707-.707 4.243 4.243 4.243-4.243zM22.8 12.5A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z"},"x-circle-f":{16:"M8 .15A7.85 7.85 0 1 0 15.85 8 7.85 7.85 0 0 0 8 .15zm4.95 11.386l-1.414 1.414L8 9.414 4.464 12.95 3.05 11.536 6.586 8 3.05 4.464 4.464 3.05 8 6.586l3.536-3.536 1.414 1.414L9.414 8z",24:"M19.632 3.368a11.5 11.5 0 1 0 0 16.264 11.5 11.5 0 0 0 0-16.264zM18.57 16.45l-2.12 2.12-4.95-4.95-4.95 4.95-2.12-2.12 4.95-4.95-4.95-4.95 2.12-2.12 4.95 4.95 4.95-4.95 2.12 2.12-4.95 4.95z",
32:"M16 2a14 14 0 1 0 14 14A14 14 0 0 0 16 2zm9.192 20.364l-2.828 2.828L16 18.828l-6.364 6.364-2.828-2.828L13.172 16 6.808 9.636l2.828-2.828L16 13.172l6.364-6.364 2.828 2.828L18.828 16z"}},d={inline:{},"inline-end":{},getIconWithTitle:function(q,m,a,h){q=t[q];return c({paths:q[m],size:m,rtl:q.rtl,title:a,titleId:h})}};Object.keys(t).forEach(function(q){Object.keys(t[q]).filter(function(m){return"rtl"!==m}).forEach(function(m){var a,h,n,r=t[q],k=r.rtl;d[q]=null!==(a=d[q])&&void 0!==a?a:{};d.inline[q]=
null!==(h=d.inline[q])&&void 0!==h?h:{};d["inline-end"][q]=null!==(n=d["inline-end"][q])&&void 0!==n?n:{};d[q][m]=c({paths:r[m],size:m,rtl:k});d.inline[q][m]=c({paths:r[m],size:m,inline:!0,rtl:k});d["inline-end"][q][m]=c({paths:r[m],size:m,inline:!0,direction:"right",rtl:k})})});return d})},"arcgisonline/pages/utils/recycle":function(){define(["require","exports","tslib","../../sharing/util"],function(f,B,l,e){var c=this;Object.defineProperty(B,"__esModule",{value:!0});B.getRestorableItems=B.canRestoreItem=
B.getProtectedItems=B.canDeleteItem=B.userCanAttemptToDeleteItem=B.DAYS_IN_RECYCLE_BIN=void 0;e=l.__importDefault(e);B.DAYS_IN_RECYCLE_BIN=14;B.userCanAttemptToDeleteItem=function(t,d){return l.__awaiter(c,void 0,void 0,function(){var q,m,a,h;return l.__generator(this,function(n){q=d||{};m=q.userRole;a=t.isAdmin||t.isOwner||q.isOrgAdmin&&t.isOwnedByMyOrg;h=(null===m||void 0===m?void 0:m.isCustom())&&m.canDeleteOrgItems();return[2,!!(a||t.isOwnedByMyOrg&&h)]})})};B.canDeleteItem=function(t){return l.__awaiter(c,
void 0,void 0,function(){var d,q;return l.__generator(this,function(m){switch(m.label){case 0:return d=t.portal.recycleBinEnabled?"/canRecycle":"/canDelete",q="".concat(t.userItemUrl).concat(d),[4,e.default.request({url:q})];case 1:return[2,m.sent()]}})})};B.getProtectedItems=function(t){for(var d=[],q=1;q<arguments.length;q++)d[q-1]=arguments[q];return l.__awaiter(c,l.__spreadArray([t],d,!0),void 0,function(m,a){var h,n,r,k,g=this;void 0===a&&(a=!1);return l.__generator(this,function(b){switch(b.label){case 0:return h=
[],n=[],r=[],k=function(w,x,z){return l.__awaiter(g,void 0,void 0,function(){return l.__generator(this,function(D){return[2,!x&&(null===z||void 0===z?void 0:z.length)&&!w.isHostedService]})})},[4,Promise.all(m.map(function(w){return l.__awaiter(g,void 0,void 0,function(){var x,z,D,E,C,y,v,A,G,F;return l.__generator(this,function(H){switch(H.label){case 0:return H.trys.push([0,7,,8]),[4,(0,B.canDeleteItem)(w)];case 1:return x=H.sent(),x.success?[4,w.getSourceData()]:[3,5];case 2:return z=H.sent(),
[4,w.getResultData()];case 3:return D=H.sent(),[4,k(w,z,D)];case 4:return E=H.sent(),C=!E&&!!D&&!("Feed"===w.type&&w.isHostedService&&1===(null===D||void 0===D?void 0:D.length)&&"Feature Service"===D[0].type&&D[0].typeKeywords.includes("Hosted Service"))&&!("Feature Service"===w.type&&w.isHostedService&&1===(null===D||void 0===D?void 0:D.length)&&"Feed"===D[0].type&&D[0].typeKeywords.includes("Hosted Service")),(y=null!==(F=a&&1===m.length&&E&&l.__assign(l.__assign({},w),{error:{message:"Delete discouraged"}}))&&
void 0!==F?F:null)?n.push(y):E&&!u(m,D)?h.push(l.__assign(l.__assign({},w),{error:{message:"Delete discouraged"}})):C&&!u(m,D)?h.push(l.__assign(l.__assign({},w),{error:{messageCode:"CONT_00481",offendingItems:D}})):n.push(w),[3,6];case 5:w.protected?h.push(l.__assign(l.__assign({},w),{error:{messageCode:"CONT_0048"}})):r.push(w),H.label=6;case 6:return[3,8];case 7:v=H.sent();A=l.__assign({},v);switch(v.messageCode){case "CONT_00481":G=v.offendingItems;u(m,G)?n.push(w):h.push(l.__assign(l.__assign({},
w),{error:A}));break;case "CONT_0048":h.push(l.__assign(l.__assign({},w),{error:A}));break;case "CONT_0298":r.push(w);break;default:h.push(l.__assign(l.__assign({},w),{error:A}))}return[3,8];case 8:return[2]}})})}))];case 1:return b.sent(),[2,Promise.resolve({protectedItems:h,unprotectedItems:n,unrecyclableItems:r})]}})})};var u=function(t,d){var q,m=null!==(q=null===d||void 0===d?void 0:d.map(function(a){var h;return null!==(h=a.itemId)&&void 0!==h?h:a.id}))&&void 0!==q?q:[];q=t.filter(function(a){return m.includes(a.id)});
d=m.every(function(a){return t.some(function(h){return h.id===a})});q=q.every(function(a){return!a.protected});return d&&q};B.canRestoreItem=function(t,d){return l.__awaiter(c,void 0,void 0,function(){var q;return l.__generator(this,function(m){switch(m.label){case 0:return q="".concat(d.userContentUrl,"/items/").concat(t.id,"/canRestore"),[4,e.default.request({url:q})];case 1:return[2,m.sent()]}})})};B.getRestorableItems=function(t,d){return l.__awaiter(c,void 0,void 0,function(){var q,m,a,h=this;
return l.__generator(this,function(n){switch(n.label){case 0:return q=[],m=[],a=[],[4,Promise.all(t.map(function(r){return l.__awaiter(h,void 0,void 0,function(){var k,g,b,w,x;return l.__generator(this,function(z){switch(z.label){case 0:return z.trys.push([0,2,,3]),[4,(0,B.canRestoreItem)(r,d)];case 1:return z.sent(),m.push(r),[3,3];case 2:k=z.sent();g=l.__assign({},k);switch(k.messageCode){case "CONT_00486":b=k.offendingItems;w=null!==(x=null===b||void 0===b?void 0:b.map(function(D){return D.itemId}))&&
void 0!==x?x:[];w.every(function(D){return t.map(function(E){return E.id}).includes(D)})?q.push(r):a.push(l.__assign(l.__assign({},r),{error:g}));break;default:a.push(l.__assign(l.__assign({},r),{error:g}))}return[3,3];case 3:return[2]}})})}))];case 1:return n.sent(),[2,Promise.resolve({restorableItems:q,sourceItems:m,unrestorableItems:a})]}})})}})},"arcgisonline/sharing/geow/Roles":function(){define("require exports tslib ../../esriGeowConfig ../util dojo/Deferred dojo/promise/all".split(" "),function(f,
B,l,e,c,u,t){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);return function(){function d(){this.declaredClass="arcgisonline.sharing.geow.Roles"}d.exceedsRolePrivileges=function(q,m,a){m=m||[];a&&(q=l.__spreadArray(l.__spreadArray([],q,!0),d.extraLevelOnePrivileges,!0));for(a=0;a<m.length;a++)if(-1===q.indexOf(m[a]))return!0;return!1};d.prototype.createRole=function(q,m){var a="".concat(e.default.restBaseUrl,"portals/self/createRole");return c.default.request({url:a,
content:{name:q,description:m}},{usePost:!0})};d.prototype.updateRole=function(q,m,a){q="".concat(e.default.restBaseUrl,"portals/self/roles/").concat(q,"/update");return c.default.request({url:q,content:{name:m,description:a}},{usePost:!0})};d.prototype.deleteRole=function(q){q="".concat(e.default.restBaseUrl,"portals/self/roles/").concat(q,"/delete");return c.default.request({url:q},{usePost:!0})};d.prototype.setPrivileges=function(q,m){var a="".concat(e.default.restBaseUrl,"portals/self/roles/").concat(q,
"/setPrivileges");q={id:q,privileges:JSON.stringify({privileges:m})};return c.default.request({url:a,content:q},{usePost:!0})};d.prototype.getPrivileges=function(q){q="".concat(e.default.restBaseUrl,"portals/self/roles/").concat(q,"/privileges");return c.default.request({url:q})};d.prototype.getAllUsersForRole=function(q){var m=this,a=new u.default,h=[],n=[],r=1,k,g,b;this.getUsersForRole(1,100,q).then(function(w){if(null===w||void 0===w?0:w.users){n=n.concat(w.users);r=w.nextStart;k=w.total-n.length;
g=Math.ceil(k/100);for(b=0;b<g;b++)h.push(m.getUsersForRole(r+100*b,100,q));(0,t.default)(h).then(function(x){x.forEach(function(z){n=n.concat(z.users)});a.resolve(n)},function(){a.resolve(n)})}},function(){a.resolve(n)});return a};d.prototype.getUsersForRole=function(q,m,a){var h="".concat(e.default.restBaseUrl,"portals/self/users");return c.default.request({url:h,content:{start:q,num:m,role:a}})};d.prototype.getAllRoles=function(q){var m=this,a=new u.default,h=[],n=1,r=[],k,g,b;this.getRoles(n,
100,q).then(function(w){if(null===w||void 0===w?0:w.roles){r=r.concat(w.roles);n=w.nextStart;k=w.total-r.length;g=Math.ceil(k/100);for(b=0;b<g;b++)h.push(m.getRoles(n+100*b,100,q));(0,t.default)(h).then(function(x){x.forEach(function(z){r=r.concat(z.roles)});a.resolve(r)},function(){a.resolve(r)})}},function(){a.resolve(r)});return a};d.prototype.getRoles=function(q,m,a){var h=e.default.restBaseUrl+"portals/self/roles";q={start:q,num:m,returnPrivileges:null};a&&(q.returnPrivileges=a);return c.default.request({url:h,
content:q})};d.prototype.getRole=function(q){q="".concat(e.default.restBaseUrl,"portals/self/roles/").concat(q);return c.default.request({url:q})};d.prototype.containsPrivilegesOutsideRole=function(q,m,a){var h=new u.default;q={roleResult:this.getPrivileges(q),compareResult:this.getPrivileges(m)};var n=!1,r,k;(0,t.default)(q).then(function(g){var b,w;r=(null===(b=g.roleResult)||void 0===b?void 0:b.privileges)||[];k=(null===(w=g.compareResult)||void 0===w?void 0:w.privileges)||[];a&&a instanceof Array?
r=r.concat(a):a&&a instanceof String&&r.push(a);n=d.exceedsRolePrivileges(r,k);h.resolve(n)},function(){h.resolve(n)});return h};d.extraLevelOnePrivileges=["portal:user:joinNonOrgGroup","portal:user:viewTracks"];return d}()})},"arcgisonline/pages/utils/user":function(){define("require exports tslib ../../esriGeowConfig ./resources ./arrays ../../sharing/util dojo/Deferred dojo/_base/kernel esri/lang".split(" "),function(f,B,l,e,c,u,t,d,q,m){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);
t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);return function(){function a(){}a.createFullName=function(h,n){var r=null===h||void 0===h?void 0:h.fullName;n||(n=q.default.locale);m.default.isDefined(h.firstName)&&m.default.isDefined(h.lastName)&&(r="ja"===n?h.lastName+" "+h.firstName:h.firstName+" "+h.lastName);return r};a.splitFullName=function(h){var n={first:void 0,last:void 0};h&&(h=h.split(" "),1===h.length?(n.first=h[0],n.last=""):1<h.length&&(n.last=
h.splice(h.length-1,1)[0],n.first=h.join(" ")));return n};a.checkUsernames=function(h,n){var r=new d.default,k="".concat(e.default.restBaseUrl,"community/checkUsernames"),g={usernames:[]};(n?c.default.sendAllResourcesSerially:c.default.sendAllResources)(k,200,h,function(b){return{usernames:b.join(",")}}).then(function(b){b.forEach(function(w){return g.usernames=g.usernames.concat(w.usernames)});r.resolve(g)},function(b){r.resolve(b)});return r};a.checkForFavorites=function(h,n,r){var k=new d.default,
g=(null===r||void 0===r?void 0:r.items)||[];h=null===h||void 0===h?void 0:h.favGroupId;var b=g.map(function(w){return w.id});h&&(null===b||void 0===b?0:b.length)?(h='(group:"'.concat(h,'" AND id:(').concat(b.join(" OR "),"))"),n.queryItems({q:h,num:g.length||1},!0).then(function(w){var x=w.results||[];g.forEach(function(z){z.isFavorite=!!u.default.find(x,function(D){return z.id===D.id})});k.resolve(r)},function(w){k.resolve(r)})):k.resolve(r);return k};a.createValidOrgUsername=function(h,n,r,k){var g,
b=null!==(g=(null===h||void 0===h?void 0:h.length)+(null===n||void 0===n?void 0:n.length))&&void 0!==g?g:0;h=h.substring(0,h.length-(b>k?b%k:0))+n.replace(/-/g,"_");h.length<r&&(n=r-h.length,h&&0<n&&(r=""+(new Date).getTime(),h+=r.substring(r.length-n)));return h=h.replace(/\+/g,"_")};a.stripOrgKeyFromUsername=function(h,n){if(h){var r=h.lastIndexOf(n);if(-1<r&&r<h.length-1&&r===h.length-n.length-1)return h.substring(0,r)}return h};a.cleanUsername=function(h,n){var r=/[^[a-zA-Z0-9@_\.]]*/g,k=/[^[a-zA-Z0-9@_\.\-]]*/g;
return 0<(null===h||void 0===h?void 0:h.length)?n?h.replace(k,"_"):h.replace(r,"_"):h};a.cleanUsernameDomain=function(h,n,r){return h&&(n||r)&&(n=h.indexOf("\\"),-1<n&&n<=h.length-2)?h.substring(n+1)+"@"+h.substring(0,n).toUpperCase():h};a.stripUsernameDomain=function(h,n,r){return h&&!n&&r?h.split("@").shift():h};a.removeSAMLSuffix=function(h,n){n="_"+n;return h.lastIndexOf(n)===h.length-n.length?h.substring(0,h.lastIndexOf(n)):h};a.addSAMLSuffix=function(h,n){var r=h&&n;n="_"+n;var k=r&&-1===h.indexOf(n);
r=r&&h.lastIndexOf(n)===h.length-n.length;return k||r?h+n:h};a.isStoryteller=function(h){var n;return"storytellerut"===(null===(n=h.userLicenseTypeId)||void 0===n?void 0:n.toLowerCase())};a.getUserProperties=function(h){var n=new d.default;(null===h||void 0===h?0:h.username)?t.default.request({url:"".concat(e.default.restBaseUrl,"community/users/").concat(h.username,"/properties"),content:{f:"json"}}).then(function(r){n.resolve(r.properties)},function(){n.resolve(null)}):n.resolve(null);return n};
return a}()})},"arcgisonline/pages/utils/resources":function(){define("require exports tslib ./clone ../../sharing/util dojo/promise/all dojo/Deferred esri/lang".split(" "),function(f,B,l,e,c,u,t,d){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);return function(){function q(){}q.sendAllResources=function(m,a,h,n,r,k){var g=new t.default;h=(0,e.default)(h);var b=[],w=h.splice(0,a);for(d.default.isDefined(k)||(k=!0);0<(null===w||void 0===
w?void 0:w.length);)b.push(c.default.request({url:m,content:n(w)},l.__assign({usePost:k},r))),w=h.splice(0,a);(0,u.default)(b).then(function(x){g.resolve(x)},function(x){g.reject(x)});return g};q.sendAllResourcesWithDelay=function(m,a,h,n,r){function k(){setTimeout(function(){z=w.splice(0,a);0<(null===z||void 0===z?void 0:z.length)?(c.default.request({url:m,content:n(z)},{usePost:!0}).then(function(C){D++;x.push(C);D>=b&&g.resolve(x)},function(C){D++;D>=b&&g.reject(C)}),E++,k()):g.resolve(x)},0===
E?0:r)}var g=new t.default,b=Math.ceil(h.length/a),w=(0,e.default)(h),x=[],z,D=0,E=0;k();return g};q.sendAllResourcesSerially=function(m,a,h,n,r){function k(){z=w.splice(0,a);0<(null===z||void 0===z?void 0:z.length)?c.default.request({url:m,content:n(z)},{usePost:!0}).then(function(E){D++;null===r||void 0===r?void 0:r(D*a/h.length*100);x.push(E);D>=b?g.resolve(x):k()},function(E){D++;null===r||void 0===r?void 0:r(D*a/h.length*100);D>=b?g.reject(E):k()}):g.resolve(x)}var g=new t.default,b=Math.ceil(h.length/
a),w=(0,e.default)(h),x=[],z,D=0;k();return g};q.fetchAllResources=function(m,a,h){void 0===a&&(a={});void 0===h&&(h="results");var n=new t.default,r=[],k=100,g=[],b=1,w,x,z;a.start=b;!a.num||a.num>k?a.num=k:k=a.num;c.default.request({url:m,content:a}).then(function(D){if(null===D||void 0===D?0:D[h]){g=g.concat(D[h]);b=D.nextStart;w=D.total-g.length;x=Math.ceil(w/k);for(z=0;z<x;z++)a.start=b+z*k,r.push(c.default.request({url:m,content:a}));(0,u.default)(r).then(function(E){E.forEach(function(C){g=
g.concat(C[h])});n.resolve(g)},function(E){n.reject(E)})}else n.resolve(g)},function(D){n.reject(D)});return n};q.makeRequest=function(m,a){return l.__awaiter(this,void 0,void 0,function(){return l.__generator(this,function(h){return[2,c.default.request({url:m,content:a})]})})};q.fetchAllResourcesSerially=function(m){return l.__awaiter(this,arguments,void 0,function(a,h,n){var r,k,g;void 0===h&&(h={});void 0===n&&(n="results");return l.__generator(this,function(b){switch(b.label){case 0:return r=
[],h.start=1,h.num=!h.num||100<h.num?100:h.num,[4,this.makeRequest(a,h)];case 1:k=b.sent();if(null===k||void 0===k||!k[n])return[3,4];r=l.__spreadArray([],k[n],!0);h.start=k.nextStart;g=Math.ceil((k.total-r.length)/h.num);b.label=2;case 2:return 0<h.start&&0<g?[4,this.makeRequest(a,h)]:[3,4];case 3:return k=b.sent(),(null===k||void 0===k?0:k[n])?(r=l.__spreadArray(l.__spreadArray([],r,!0),k[n],!0),h.start=k.nextStart,g=Math.ceil((k.total-r.length)/h.num)):g=0,[3,2];case 4:return[2,r]}})})};return q}()})},
"arcgisonline/sharing/dijit/_Empty":function(){define(["require","exports","tslib","dojo/text!./templates/_Empty.html"],function(f,B,l,e){e=l.__importDefault(e);return e.default})},"arcgisonline/sharing/dijit/Gallery":function(){define(["dojo","dijit","dojox","dojo/i18n!arcgisonline/nls/arcgisonline","dojo/require!arcgisonline/sharing/dijit/views,dijit/_Widget,dijit/_Templated,dojo/NodeList-fx,dijit/layout/ContentPane,arcgisonline/sharing/util,dijit/form/Button,arcgisonline/sharing/geow/QueryReadStore"],
function(f,B,l){f.provide("arcgisonline.sharing.dijit.Gallery");f.require("arcgisonline.sharing.dijit.views");f.require("dijit._Widget");f.require("dijit._Templated");f.require("dojo.NodeList-fx");f.require("dijit.layout.ContentPane");f.require("arcgisonline.sharing.util");f.require("dijit.form.Button");f.requireLocalization("arcgisonline","arcgisonline");f.require("arcgisonline.sharing.geow.QueryReadStore");f.declare("arcgisonline.sharing.dijit.Gallery",[B._Widget,B._Templated],{widgetsInTemplate:!0,
templateString:'\x3cdiv dojoAttachPoint\x3d"containerNode"\x3e\r\n  \x3cdiv class\x3d"clearfix galleryBackground"\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"flowContainer" class\x3d"clearfix"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"pageControls" class\x3d"esriFloatLeading" style\x3d"maxheight: 3em; width: 100%; clear: both;"\x3e\r\n      \x3cp style\x3d"text-align: center;"\x3e\r\n        \x3cspan dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"_prev" style\x3d"display:none;"\x3e${i18n.previous}\x3c/span\x3e\r\n        \x3cspan dojoAttachPoint\x3d"_pages" dojoAttachEvent\x3d"onClick:goToPage" class\x3d"esriItemLinks esriPagingLinks"\x3e\x3c/span\x3e\r\n        \x3cspan dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"_next" style\x3d"display:none;"\x3e${i18n.next}\x3c/span\x3e\r\n      \x3c/p\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
tooltip:null,showToolTip:!0,showNodeLabels:!0,showThumbnailInDetails:!0,fadeOutOtherNodes:!0,animFadeOut:!0,unfocusedOpacity:.5,highlightFocusedNode:!0,largeNodes:0,maxNodes:0,flowContainer:null,showDelay:300,nodesPerPage:4,currentPage:1,pageCount:1,maxPages:null,showPageControls:!0,_prev:null,_next:null,_pages:null,nodeClass:"galleryNode",nodeHighlightClass:"highlight",thumbClass:"galleryThumbnail",labelClass:"label",labelBgClass:"galleryLabelContainer",detailsClass:"galleryDetail",detailsThumbClass:"galleryDetailThumb",
messageClass:"galleryMessage",_lastFocusedNode:null,_timer:null,_galleryFadeIn:null,_galleryFadeOut:null,_galleryFadeOutTotal:null,_suspendTooltip:!1,includeNode:null,_defaultNoResultsMessage:null,noResultsMessage:null,items:null,i18n:null,postMixInProperties:function(){this.inherited(arguments);this.i18n=f.i18n.getLocalization("arcgisonline","arcgisonline").common;f.mixin(this.i18n,f.i18n.getLocalization("arcgisonline","arcgisonline").gallery);this._defaultNoResultsMessage=this.i18n.filterNoResults},
postCreate:function(){this._userToken=(this._user=arcgisonline.sharing.util.getUser())&&this._user.token;null===this.tooltip&&(this.tooltip=new arcgisonline.sharing.dijit._GalleryContentPane({_gallery:this},f.create("div",{id:this.id+"_popup"},f.body())),this._galleryFadeIn=f.animateProperty({node:this.flowContainer,properties:{opacity:1}}),this._galleryFadeOut=f.animateProperty({node:this.flowContainer,properties:{opacity:this.unfocusedOpacity}}),this._galleryFadeOutTotal=f.animateProperty({node:this.flowContainer,
properties:{opacity:0}}),f.connect(this.domNode,"scroll",this,function(){this.tooltip&&this.tooltip.isShowing&&this.tooltip.hide()}),this.showPageControls&&(f.connect(this,"onContentChange",this,this._layoutPageControls),f.connect(this,"onPageChange",this,this._layoutPageControls)))},_showTooltip:function(e,c){var u=this.tooltip.domNode,t;esriGeowConfig.isRightToLeft||(t=this.showThumbnailInDetails?{TL:"TL",TR:"TR"}:{TL:"TR",TR:"TL"});esriGeowConfig.isRightToLeft&&(t=this.showThumbnailInDetails?{BR:"BR"}:
{BR:"TR"});t=B.placeOnScreenAroundNode(u,e,t);this.tooltip.set("content",this._buildItemDetailsLayout(c,t,e));if(this.showThumbnailInDetails){(e="none"==f.style(u,"display"))&&f.style(u,{visibility:"hidden",display:"block"});var d=f.contentBox(u),q=f.coords(u);e&&f.style(u,{visibility:"",display:"none"});"TR"==t.aroundCorner?(f.style(u,"top",q.t-d.t+"px"),f.style(u,"left",q.l+d.l+"px")):"TL"==t.aroundCorner&&(f.style(u,"top",q.t-d.t+"px"),f.style(u,"left",q.l-d.l+"px"))}this._highlightNode(c);this.tooltip.show()},
node_onMouseEnter:function(e){var c=e.currentTarget,u=this._getItemByNode(c);this.onNodeMouseEnter(e,u);!this._suspendTooltip&&this.showToolTip&&(this.tooltip.isShowing&&this.tooltip.hide(),this._timer&&(clearTimeout(this._timer),this._timer=null),this._unhighlightNodes(),this._timer||(this._timer=setTimeout(f.hitch(this,function(){this._showTooltip(c,u)}),this.showDelay)))},node_onMouseLeave:function(e){this._timer&&(clearTimeout(this._timer),this._timer=null);var c=this._getItemByNode(e.currentTarget);
this.onNodeMouseLeave(e,c)},tooltip_onMouseLeave:function(e){this._unhighlightNodes();this.tooltip.hide()},_highlightNode:function(e){e=f.byId("galleryNode_"+e.id);this.fadeOutOtherNodes&&(this.animFadeOut?(this._galleryFadeIn.stop(),this._galleryFadeOut.play()):f.style(this.flowContainer,"opacity",this.unfocusedOpacity));this.highlightFocusedNode&&f.addClass(e,this.nodeHighlightClass);this._lastFocusedNode=e},_unhighlightNodes:function(){this.fadeOutOtherNodes&&(this.animFadeOut?(this._galleryFadeOut.stop(),
this._galleryFadeIn.play()):f.style(this.flowContainer,"opacity",1));null!==this._lastFocusedNode&&f.removeClass(this._lastFocusedNode,this.nodeHighlightClass);this._lastFocusedNode=null},_loadItems:function(e){this.tooltip&&this.tooltip.hide();this._galleryFadeIn.stop();this._galleryFadeOut.stop();this._galleryFadeOutTotal.onEnd=f.hitch(this,function(c){f.empty(this.flowContainer);0<c.length?(this.maxNodes&&(c=c.splice(0,this.maxNodes)),f.forEach(c,f.hitch(this,function(u,t){u.id||(u.id=t);this.flowContainer.appendChild(this._buildNodeLayout(u,
t<this.largeNodes))})),f.create("br",{style:{clear:"both"}},this.flowContainer),c=f.query("."+this.nodeClass,this.domNode),c.connect("onmouseenter",this,this.node_onMouseEnter),c.connect("onmouseleave",this,this.node_onMouseLeave),this.tooltip&&f.connect(this.tooltip.domNode,"onmouseleave",this,this.tooltip_onMouseLeave)):f.create("span",{innerHTML:this.noResultsMessage||this._defaultNoResultsMessage,"class":this.messageClass},this.flowContainer);this._galleryFadeIn.play();this._galleryFadeOut.onEnd=
null;this._suspendTooltip=!1},e);this._galleryFadeOutTotal.play()},clear:function(e){this.tooltip&&this.tooltip.hide();this._galleryFadeIn.stop();this._galleryFadeOut.stop();f.empty(this.flowContainer);f.empty(this._pages);f.create("span",{innerHTML:e,"class":this.messageClass},this.flowContainer);this._galleryFadeIn.play();this._galleryFadeOut.onEnd=null;this._suspendTooltip=!1},_buildNodeLayout:function(e,c){var u=f.create("div",{id:"galleryNode_"+e.id,"class":this.nodeClass});f.addClass(u,c?"large":
"small");var t=arcgisonline.sharing.util;c=t.relativeToExplicitUrl("images/transparent.gif");"Web Mapping Application"==e.type&&(c=t.getStaticImagesUrl()+"/webapp.png");c="Mobile Application"==e.type?t.getStaticImagesUrl()+"/mobileapp.png":"Web Scene"===e.type||"Scene Service"===e.type?t.getStaticImagesUrl()+"/desktopapp.png":"Workforce Project"===e.type?t.getStaticImagesUrl()+"/workforceproject.png":"Hub Initiative"===e.type?t.getStaticImagesUrl()+"/hubinitiative.png":"Hub Page"===e.type?t.getStaticImagesUrl()+
"/hubpage.png":"Hub Site Application"===e.type?t.getStaticImagesUrl()+"/hubsite.png":"Dashboard"===e.type?t.getStaticImagesUrl()+"/opsdashboard.png":"Geoprocessing Service"===e.type&&esriGeowConfig.self&&esriGeowConfig.self.isPortal?t.getStaticImagesUrl()+"/webtool.png":"Ortho Mapping Project"===e.type?t.getStaticImagesUrl()+"/orthomappingproject.png":"Ortho Mapping Template"===e.type?t.getStaticImagesUrl()+"/orthomappingtemplate.png":"Notebook"===e.type?t.relativeToExplicitUrl("/js/arcgisonline/css/images/notebook-thumb.png"):
t.getStaticImagesUrl()+"/desktopapp.png";t.getGalleryMainLinkInfo(e);t=f.create("a",{href:"#"},u);f.connect(t,"onclick",this,this.onNodeClick,e);f.create("img",{"class":this.thumbClass,alt:e.snippet||"",src:e.thumbnail?this._getThumbailUrl(e):c},t);this.showNodeLabels&&(c=f.create("div",{"class":"galleryLabelContainer"},u),e=e.title||"",f.create("span",{innerHTML:e,alt:e,title:e},c));return u},_buildItemDetailsLayout:function(e,c,u){return arcgisonline.sharing.dijit.views.item.medium(e,{showThumb:this.showThumbnailInDetails,
align:(esriGeowConfig.isRightToLeft?0:"TR"==c.aroundCorner)?"right":"left",hideOpenMenu:!0,showProfilePopup:!1})},_getItemByNode:function(e){for(;!f.hasClass(e,this.nodeClass);)e=e.parentNode;e=e.id.substr(e.id.indexOf("_")+1);for(var c=0;c<this.items.length;c++)if(this.items[c].id==e)return this.items[c];return null},_getThumbailUrl:function(e){var c=this._userToken;return esriGeowConfig.restBaseUrl+"content/items/"+e.id+"/info/"+e.thumbnail+(c?"?token\x3d"+c:"")},_layoutPageControls:function(){f.empty(this._pages);
if(1!==this.pageCount){for(var e=1;e<=this.pageCount;e++){var c=f.create("span",{innerHTML:e},f.create("a",{onclick:f.hitch(this,this.goToPage,e)},this._pages));e==this.currentPage&&f.addClass(c,"currentPage")}1==this.currentPage?f.style(this._prev.domNode,"visibility","hidden"):f.style(this._prev.domNode,"visbility","");this.currentPage==this.pageCount?f.style(this._next.domNode,"visibility","hidden"):f.style(this._next.domNode,"visbility","")}},nextPage:function(e){this.currentPage<this.pageCount&&
(!e.keyCode||13===e.keyCode||32===e.keyCode)&&this.goToPage(this.currentPage+1)},prevPage:function(e){1<this.currentPage&&(!e.keyCode||13===e.keyCode||32===e.keyCode)&&this.goToPage(this.currentPage-1)},goToPage:function(e){0<this.pageCount&&!isNaN(e)&&0<e&&(this._suspendTooltip=!0,this._loadRange((e-1)*this.nodesPerPage,this.nodesPerPage),this.currentPage=e,this.onPageChange(this.currentPage,-1))},_loadRange:function(e,c){var u=f.clone(this.items);this._loadItems(u.splice(e,c))},_setItemsAttr:function(e){this.items=
this.includeNode?f.filter(e,this.includeNode):e;0==this.items.length?(this.pageCount=1,this.onContentChange(0)):(this.pageCount=Math.ceil(this.items.length/this.nodesPerPage),this.onContentChange(this.items.length));this.currentPage=1;this.goToPage(1)},onPageChange:function(e,c){},onContentChange:function(e){},onNodeClick:function(e,c){},onNodeMouseEnter:function(e,c){},onNodeMouseLeave:function(e,c){}});f.declare("arcgisonline.sharing.dijit._GalleryContentPane",B.layout.ContentPane,{_gallery:null,
animateShowHide:!0,"class":"galleryPopup",fadeDuration:300,isShowing:!1,postCreate:function(){this.inherited(arguments);f.style(this.domNode,{position:"absolute",top:"-1000px",opacity:0});f.style(this.domNode,esriGeowConfig.isRightToLeft||-1<f.indexOf(["ar","he"],f.locale)?"right":"left","-1000px");this.fadeIn=f.fadeIn({node:this.domNode,duration:this.fadeDuration});this.fadeOut=f.fadeOut({node:this.domNode,duration:this.fadeDuration,onEnd:f.hitch(this,"_afterFade")})},_afterFade:function(){f.style(this.domNode,
{top:"-1000px"});f.style(this.domNode,esriGeowConfig.isRightToLeft?"right":"left","-1000px")},show:function(e){this.isShowing=!0;this.animateShowHide?(this.fadeOut.stop(),this.fadeIn.play()):f.style(this.domNode,"display","block")},hide:function(){this.isShowing=!1;this.animateShowHide?(this.fadeIn.stop(),this.fadeOut.play()):f.style(this.domNode,"display","none")}})})},"arcgisonline/sharing/dijit/views":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/dijit/TextMenu,arcgisonline/sharing/util,arcgisonline/pages/organization/widgets/ProfilePopup,arcgisonline/pages/portal/Portal,arcgisonline/pages/utils/arrays,arcgisonline/pages/item/_Info"],
function(f,B,l){f.provide("arcgisonline.sharing.dijit.views");f.require("arcgisonline.sharing.dijit.TextMenu");f.require("arcgisonline.sharing.util");f.require("arcgisonline.pages.organization.widgets.ProfilePopup");f.require("arcgisonline.pages.portal.Portal");f.require("arcgisonline.pages.utils.arrays");f.require("arcgisonline.pages.item._Info");arcgisonline.sharing.dijit.views.item={detailClass:"itemDetail",thumbClass:"itemThumbnail",thumbContainerClass:"itemThumbnailContainer",titleClass:"esriItemTitle",
snippetClass:"esriItemSnippet",i18n:function(){if(this._i18n)return this._i18n;this._i18n=f.i18n.getLocalization("arcgisonline","arcgisonline").common;f.mixin(this._i18n,f.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget);f.mixin(this._i18n,{source:f.i18n.getLocalization("arcgisonline","arcgisonline").itemProperties.source});f.mixin(this._i18n,{visitOrganization:f.i18n.getLocalization("arcgisonline","arcgisonline").itemProperties.visitOrganization});return this._i18n},_util:arcgisonline.sharing.util,
small:function(e,c,u){var t=f.create,d=t("div",{"class":this.detailClass+" small"}),q=this._util.getGalleryMainLinkInfo(e);c&&(c=t("div",{"class":this.thumbContainerClass},d),f.addClass(d,u),t("img",{src:this._getThumbnailUrl(e),"class":this.thumbClass},t("a",{href:q.href||"#",target:q.target,alt:q.tip,title:q.tip},c)));t("a",{href:"#",innerHTML:e.title},t("span",{"class":this.titleClass},d));u=this._util.getSnippet(e.snippet,e.description);t("span",{"class":this.snippetClass,innerHTML:u},d);e=arcgisonline.sharing.geow.Content.changeTypename(e)+
arcgisonline.sharing.dijit.views.item.i18n().spaceBy+"\x3cspan class\x3d'esriItemOwner'\x3e"+e.owner+"\x3c/span\x3e ("+this._util.toFullDateString(e.modified)+")";t("span",{innerHTML:e},d);return d},mediumFormat:function(e,c){return this.medium(c,!0,"left")},itemLinkInfo:function(e){var c=this._util.getGalleryMainLinkInfo(e);e=this._util.getItemDetailsLinkInfo(e);return{openLink:c,detailLink:e}},medium:function(e,c){var u=f.create,t=u("div",{"class":this.detailClass+" medium"});if(c.unshareHandler){var d=
u("a",{href:"#",className:"unshare esriFloatTrailing",style:{display:"none"}},t);u("img",{src:arcgisonline.sharing.util.relativeToExplicitUrl("images/delete_20x20.png"),alt:arcgisonline.sharing.dijit.views.item.i18n().removeItemFromGroup,title:arcgisonline.sharing.dijit.views.item.i18n().removeItemFromGroup},d);f.connect(d,"onclick",f.partial(c.unshareHandler,e.id,t))}var q=this.itemLinkInfo(e);d=q.openLink;q=q.detailLink;if(c.showThumb){var m=u("div",{"class":this.thumbContainerClass},t);f.addClass(t,
c.align||"left");if(e.thumbnail&&0<e.thumbnail.length){var a=u("img",{src:this._getThumbnailUrl(e),"class":this.thumbClass},u("a",{href:d.href||"#",target:d.target,alt:d.tip,title:d.tip},m));d.onclick&&f.connect(a,"onclick",d.onclick)}else a=this._util.relativeToExplicitUrl("images/web-thumbnail-error.png"),a="Web Mapping Application"==e.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/webapp.png":"Mobile Application"==e.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/mobileapp.png":"Workforce Project"==
e.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/workforceproject.png":"Hub Initiative"===e.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/hubinitiative.png":"Hub Page"===e.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/hubpage.png":"Hub Site Application"===e.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/hubsite.png":"Dashboard"===e.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/opsdashboard.png":"Geoprocessing Service"===e.type&&esriGeowConfig.self&&esriGeowConfig.self.isPortal?
arcgisonline.sharing.util.getStaticImagesUrl()+"/webtool.png":"Image"===e.type?arcgisonline.sharing.util.relativeToExplicitUrl("js/arcgisonline/sharing/dijit/css/images/image-thumb.png"):"Web Scene"===e.type||"Scene Service"===e.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/scene.png":"Ortho Mapping Template"===e.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/orthomappingtemplate.png":"Ortho Mapping Project"===e.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/orthomappingproject.png":
arcgisonline.sharing.util.getStaticImagesUrl()+"/desktopapp.png",a=u("img",{src:a,"class":this.thumbClass},u("a",{href:d.href||"#",target:d.target,alt:d.tip,title:d.tip},m)),d.onclick&&f.connect(a,"onclick",d.onclick);u("br",null,m);m=u("span",{"class":"esriItemLinks"},m);a=this._util.getItemOpenLinkObjects(e);if(0<a.length){var h=u("span",{innerHTML:d.label},u("a",{href:d.href||"#",target:d.target,alt:d.tip,title:d.tip,style:{marginRight:0}},m));d.onclick&&f.connect(h,"onclick",d.onclick);c.hideOpenMenu||
(u("span",{innerHTML:"\x26nbsp;"},m),d=u("div",{innerHTML:"","class":"dijitReset dijitInline esriArrows",title:arcgisonline.sharing.dijit.views.item.i18n().moreOptions,alt:arcgisonline.sharing.dijit.views.item.i18n().moreOptions,style:{height:"11px",cursor:"pointer"}},m),new arcgisonline.sharing.dijit.TextMenu({triggerNode:d,labelNode:h,textMenuItems:a}));u("span",{innerHTML:"\x26nbsp;\x26nbsp\x26nbsp;"},m)}null!==q&&u("span",{innerHTML:q.label},u("a",{href:q.link||"#",alt:q.tip,title:q.tip,target:q.target?
q.target:""},m))}d=u("div",{"class":"itemTextContainer"},t);u("a",{href:q.link,innerHTML:e.title,alt:q.tip,title:q.tip},u("span",{"class":this.titleClass},d));q=this._util.getSnippet(e.snippet,e.description);u("span",{"class":this.snippetClass,innerHTML:q||""},d);q=u("div",null,d);(m=this._getTypeIcon(e))&&u("span",{innerHTML:m},q);m="";m=arcgisonline.sharing.geow.Content.changeTypename(e)+arcgisonline.sharing.dijit.views.item.i18n().spaceBy;a=-1<f.indexOf(e.typeKeywords,"ArcGIS Server")||"Feature Collection"==
e.type?arcgisonline.sharing.dijit.views.item.i18n().source+" ":"";h="GeoJson"===e.type?"GeoJSON":e.type;h=-1<h.toLowerCase().indexOf("add in")?h.replace(/(add in)/ig,"Add-In"):h;u("span",{title:a+h,innerHTML:m,"class":"dim"},q);m=u("span",{"class":"esriItemAuthor"},q);m=u("a",{innerHTML:e.owner,"class":"linkNoHref",owner:e.owner,alt:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile,title:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile},m);c.showProfilePopup?(this._bindProfilePopup(m),
f.attr(m,{"class":"linkNoHref",owner:e.owner})):f.attr(m,"href",esriGeowConfig.baseUrl+"user.html?user\x3d"+e.owner);u("div",{innerHTML:"\x3cspan\x3e"+arcgisonline.sharing.dijit.views.item.i18n().lastModifiedTitle+"\x3c/span\x3e\x3cspan\x3e"+this._util.toFullDateString(e.modified)+"\x3c/span\x3e","class":"dim esriLastModified"},q);(c=arcgisonline.sharing.geow.Content._getPremiumItemNode(e))&&f.place(c,f.create("div",{className:"dim esriPremiumContent"},q,"last"));c=f.create("span",{"class":"dojoxRating dijitInline"});
9>f.isIE&&f.style(c,"zoom",0);q=f.create("ul",null,c);m=Math.round(e.avgRating);for(a=1;a<=m;a++)f.create("li",{"class":"dojoxRatingStar dijitInline dojoxRatingStarChecked"},q);for(;5>m;m++)f.create("li",{"class":"dojoxRatingStar dijitInline Hover"},q);e=this._getMsgRatings(e);u=u("span",{innerHTML:e,"class":"dim"},d);f.place(c,u,"first");return t},map:function(e,c){var u=f.create;c=c||u("div",{"class":this.detailClass+" medium"});if("public_authoritative"===e.contentStatus&&!e.orgSelf)if(esriGeowConfig.self.id&&
e.orgId===esriGeowConfig.self.id)e.orgSelf=esriGeowConfig.self;else return esri.request({url:location.protocol+"//"+esriGeowConfig.self.portalHostname+"/sharing/rest/portals/"+e.orgId+"?f\x3djson",callbackParamName:"callback",load:function(h,n){e.orgSelf=h;arcgisonline.sharing.dijit.views.item.map(e,c)},error:function(h,n){e.orgSelf={};arcgisonline.sharing.dijit.views.item.map(e,c)}}),c;var t=u("div",{"class":"itemTextContainer"},c),d=this._util.getSnippet(e.snippet,e.description);u("span",{"class":this.snippetClass,
innerHTML:d?this._util.htmlEncode(d):""},t);d=u("span",null,t);var q=this._getTypeIcon(e,!0);q&&u("span",{innerHTML:q},d);q="";q=e.url&&-1<f.indexOf(e.typeKeywords,"Hosted Service")&&(arcgisonline.sharing.util.isHostedServiceItem(e)||arcgisonline.sharing.util.portalSupportsHostedServices())?arcgisonline.sharing.geow.Content.changeTypename(e,!0)+arcgisonline.sharing.dijit.views.item.i18n().startBracket+arcgisonline.sharing.dijit.views.item.i18n().hostedService+arcgisonline.sharing.dijit.views.item.i18n().endBracket+
arcgisonline.sharing.dijit.views.item.i18n().spaceBy:arcgisonline.sharing.geow.Content.changeTypename(e,!1)+arcgisonline.sharing.dijit.views.item.i18n().spaceBy;var m=-1<f.indexOf(e.typeKeywords,"ArcGIS Server")||"Feature Collection"==e.type?arcgisonline.sharing.dijit.views.item.i18n().source+" ":"",a="GeoJson"===e.type?"GeoJSON":e.type;a=-1<a.toLowerCase().indexOf("add in")?a.replace(/(add in)/ig,"Add-In"):a;u("span",{title:m+a,innerHTML:q,"class":"dim"},d);q=u("span",{"class":"esriItemAuthor"},
d);"public_authoritative"===e.contentStatus&&e.orgSelf&&e.orgSelf.name?(q=u("a",{innerHTML:e.orgSelf.name,"class":"linkNoHref",owner:e.orgSelf.name,alt:arcgisonline.sharing.dijit.views.item.i18n().visitOrganization,title:arcgisonline.sharing.dijit.views.item.i18n().visitOrganization},q),f.connect(q,"onclick",this,function(h){arcgisonline.map.storage.saveMapInCookie(null,!1);e.orgSelf.urlKey?h=location.protocol+"//"+e.orgSelf.urlKey+"."+e.orgSelf.customBaseUrl+"/home/index.html":(h=location.protocol+
"//"+e.orgSelf.portalHostname+"/home/index.html","7443"===location.port&&(h=arcgisonline.sharing.util.getSecureUrl(baseUrl)));window.open(h)})):(q=u("a",{innerHTML:e.owner,"class":"linkNoHref",owner:e.owner,alt:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile,title:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile},q),this._bindProfilePopup(q));f.attr(q,{"class":"linkNoHref",owner:e.owner});u("div",{innerHTML:"\x3cbr/\x3e\x3cspan\x3e"+arcgisonline.sharing.dijit.views.item.i18n().lastModifiedTitle+
"\x3c/span\x3e\x3cspan\x3e"+this._util.toFullDateString(e.modified)+"\x3c/span\x3e","class":"dim esriLastModified"},d);(q=arcgisonline.sharing.geow.Content._getPremiumItemNode(e))&&f.place(q,f.create("div",{className:"dim esriPremiumContent"},d,"last"));d=f.create("span",{"class":"dojoxRating dijitInline"});9>f.isIE&&f.style(d,"zoom",0);q=f.create("ul",null,d);m=Math.round(e.avgRating);for(a=1;a<=m;a++)f.create("li",{"class":"dojoxRatingStar dijitInline dojoxRatingStarChecked"},q);for(;5>m;m++)f.create("li",
{"class":"dojoxRatingStar dijitInline Hover"},q);q=this._getMsgRatings(e);u=u("span",{innerHTML:q,"class":"dim"},t);f.place(d,u,"first");return c},_bindProfilePopup:function(e){this.popup&&this.popup.close();f.connect(e,"onclick",this,function(c){var u=f.attr(c.currentTarget,"owner");this.popup=new arcgisonline.pages.organization.widgets.ProfilePopup({username:u,opener:c.target,portal:new arcgisonline.pages.portal.Portal(esriGeowConfig.restBaseUrl)});this.popup.open()})},_getMsgRatings:function(e){var c=
"";c=1===e.numRatings?c+f.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().ratingMsg,{ratingcount:f.number.format(e.numRatings,{pattern:"#,###,###,##0"})}):c+f.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().ratingsMsg,{ratingcount:f.number.format(e.numRatings,{pattern:"#,###,###,##0"})});c=1===e.numComments?c+f.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().commentMsg,{commentcount:f.number.format(e.numComments,{pattern:"#,###,###,##0"})}):c+f.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().commentsMsg,
{commentcount:f.number.format(e.numComments,{pattern:"#,###,###,##0"})});var u=e.type;u=u?arcgisonline.pages.item._Info[u]||null:null;c=!u||"file"!==u.classification||arcgisonline.pages.utils.arrays.includes(u.types,"is-views")||arcgisonline.pages.utils.arrays.includes(u.types,"is-pdf")?1===e.numViews?c+f.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().viewMsg,{viewcount:f.number.format(e.numViews,{pattern:"#,###,###,##0"})}):c+f.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().viewsMsg,
{viewcount:f.number.format(e.numViews,{pattern:"#,###,###,##0"})}):1===e.numViews?c+f.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().downloadMsg,{downloadcount:f.number.format(e.numViews,{pattern:"#,###,###,##0"})}):c+f.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().downloadsMsg,{downloadcount:f.number.format(e.numViews,{pattern:"#,###,###,##0"})});return c=arcgisonline.sharing.dijit.views.item.i18n().startBracket+c+arcgisonline.sharing.dijit.views.item.i18n().endBracket},
_getThumbnailUrl:function(e){var c=this._util.getToken();c=c?"?token\x3d"+c:"";if(e.thumbnail)return esriGeowConfig.restBaseUrl+"content/items/"+e.id+"/info/"+e.thumbnail+c;c=this._util.relativeToExplicitUrl("images/web-thumbnail-error.png");return c="Web Mapping Application"==e.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/webapp.png":"Mobile Application"==e.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/mobileapp.png":"Workforce Project"==e.type?arcgisonline.sharing.util.getStaticImagesUrl()+
"/workforceproject.png":"Geoprocessing Service"===e.type&&esriGeowConfig.self&&esriGeowConfig.self.isPortal?arcgisonline.sharing.util.getStaticImagesUrl()+"/webtool.png":"Web Scene"==e.type||"Scene Service"===e.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/scene.png":arcgisonline.sharing.util.getStaticImagesUrl()+"/desktopapp.png"},_getTypeIcon:function(e,c){c=arcgisonline.sharing.geow.Content._getItemIconUrl(e,!0);var u=(-1<f.indexOf(e.typeKeywords,"ArcGIS Server")||"Feature Collection"==
e.type?this.i18n().source+" ":"")+("GeoJson"===e.type?"GeoJSON":e.type),t="";c&&("Web Scene"===u&&(u=-1<f.indexOf(e.typeKeywords,"ViewingMode-Local")?this.i18n().localWebScene:this.i18n().globalWebScene),t='\x3cimg src\x3d"'+c+'" alt\x3d"'+u+'" title\x3d"'+u+'" style\x3d"vertical-align:middle;"/\x3e\x26nbsp;');return t}};arcgisonline.sharing.dijit.views.group={_util:arcgisonline.sharing.util,detailClass:"itemDetail group",thumbClass:"groupThumbnail",thumbContainerClass:"itemThumbnailContainer",titleClass:"esriItemTitle",
snippetClass:"esriItemSnippet",i18n:function(){if(this._i18n)return this._i18n;this._i18n=f.i18n.getLocalization("arcgisonline","arcgisonline").common;f.mixin(this._i18n,f.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget);return this._i18n},_getThumbnailUrl:function(e){var c=this._util.getToken();return esriGeowConfig.restBaseUrl+"community/groups/"+e.id+"/info/"+e.thumbnail+(c?"?token\x3d"+c:"")},small:function(e,c,u){var t=f.create,d=t("div",{"class":this.detailClass});f.addClass(d,
"small");var q={target:"",href:"#"};c&&(c=t("div",{"class":this.thumbContainerClass},d),f.addClass(d,u||"left"),e.thumbnail&&0<e.thumbnail.length?t("img",{src:this._getThumbnailUrl(e),"class":this.thumbClass},c):t("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),"class":this.thumbClass},c));t("a",{href:q.href,target:q.target,innerHTML:e.title,alt:q.tip,title:q.tip},t("span",{"class":this.titleClass},d));u=this._util.getSnippet(e.snippet,e.description);t("span",{"class":this.snippetClass,
innerHTML:u},d);u=t("span",null,null);t("span",{innerHTML:"owned by ","class":"dim"},u);u=t("span",{"class":"esriItemAuthor"},u);t("a",{innerHTML:e.owner,href:""},u);return d},medium:function(e,c){var u=f.create,t=u("div",{"class":this.detailClass+" medium"}),d=esriGeowConfig.baseUrl+"group.html?id\x3d"+e.id;arcgisonline.sharing.dijit.views.group.i18n();arcgisonline.sharing.dijit.views.group.i18n();if(c.showThumb){var q=u("div",{"class":this.thumbContainerClass},t);f.addClass(t,c.align||"left");if(c.groupsUser){var m=
this._util.getUser();arcgisonline.sharing.geow.Community.getProfile(e.owner,f.hitch(this,function(n,r,k){r.code||r.message?u("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),"class":this.thumbClass},u("a",{href:d||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},q)):"public"===n.access||r.orgId&&r.orgId===m.accountId?e.thumbnail&&0<e.thumbnail.length?u("img",{src:this._getThumbnailUrl(e),
"class":this.thumbClass},u("a",{href:d||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},q)):u("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),"class":this.thumbClass},u("a",{href:d||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},q)):u("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),
"class":this.thumbClass},u("a",{href:d||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},q))},e))}else e.thumbnail&&0<e.thumbnail.length?u("img",{src:this._getThumbnailUrl(e),"class":this.thumbClass},u("a",{href:d||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},q)):u("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),
"class":this.thumbClass},u("a",{href:d||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},q)),u("br",null,q),f.place(this._util.getGroupLinks(e),q)}var a=u("div",{"class":"itemTextContainer"},t);u("a",{href:d,innerHTML:e.title,alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},u("span",{"class":this.titleClass},a));var h=this._util.getSnippet(e.snippet,
e.description);u("span",{"class":this.snippetClass,innerHTML:h||""},a);a=u("span",null,a);u("span",{innerHTML:arcgisonline.sharing.dijit.views.group.i18n().createdBy,"class":"dim"},a);h=u("span",{"class":"esriItemAuthor"},a);h=u("a",{innerHTML:e.owner,alt:arcgisonline.sharing.dijit.views.group.i18n().viewUserprofile,title:arcgisonline.sharing.dijit.views.group.i18n().viewUserprofile},h);c.showProfilePopup?(this._bindProfilePopup(h),f.attr(h,{"class":"linkNoHref",owner:e.owner})):f.attr(h,"href",esriGeowConfig.baseUrl+
"user.html?user\x3d"+e.owner);c=e.created;u("span",{innerHTML:"\x26nbsp;"+arcgisonline.sharing.dijit.views.group.i18n().createdOn+"\x26nbsp;"+this._util.toFullDateString(c),"class":"dim"},a);return t}};arcgisonline.sharing.dijit.views.profile={_util:arcgisonline.sharing.util,detailClass:"itemDetail",thumbClass:"profileThumbnail",thumbContainerClass:"itemThumbnailContainer",titleClass:"esriItemTitle esriProfilePopupTitle",snippetClass:"esriItemSnippet",noDescriptionText:"",i18n:function(){if(this._i18n)return this._i18n;
this._i18n=f.i18n.getLocalization("arcgisonline","arcgisonline").common;f.mixin(this._i18n,f.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget);return this._i18n},_getThumbnailUrl:function(e){var c=this._util.getToken();return esriGeowConfig.restBaseUrl+"community/users/"+e.username+"/info/"+e.thumbnail+(c?"?token\x3d"+c:"")},medium:function(e,c){arcgisonline.sharing.dijit.views.profile.noDescriptionText=arcgisonline.sharing.dijit.views.profile.i18n().userPersonalInfoMsg;arcgisonline.sharing.dijit.views.profile.memberNoDescriptionText=
arcgisonline.sharing.dijit.views.profile.i18n().memberPersonalInfoMsg;var u=arcgisonline.sharing.util.getUser(),t=f.create,d=t("div",{"class":this.detailClass});f.addClass(d,"medium");t("div",{"class":this.titleClass,innerHTML:e.fullName||e.username},d);if(u&&u.accountId&&e.accountId&&e.role&&u.accountId==e.accountId){var q="\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;";"account_publisher"===e.role?q+=arcgisonline.sharing.dijit.views.profile.i18n().publisher:"account_admin"===e.role?q+=arcgisonline.sharing.dijit.views.profile.i18n().administrator:
"account_user"===e.role&&(q+=arcgisonline.sharing.dijit.views.profile.i18n().user);t("span",{innerHTML:q},t("strong",{},d))}c.showThumb&&(q=t("div",{"class":this.thumbContainerClass},d),f.addClass(d,c.align||"left"),e.thumbnail&&0<e.thumbnail.length?t("img",{src:this._getThumbnailUrl(e),"class":this.thumbClass},q):t("img",{src:this._util.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg"),"class":this.thumbClass,style:"width:150px; height:150px;"},q));c=t("div",{"class":this.snippetClass},
t("span",{"class":"esriItemLinks"},d));q=this._util.removeHTMLTags(e.description);var m=u&&u.accountId&&e.orgId&&u.accountId===e.orgId?arcgisonline.sharing.dijit.views.profile.memberNoDescriptionText:arcgisonline.sharing.dijit.views.profile.noDescriptionText;q=0<q.length?e.description:m;q=this._util.linkifyText(q);8>f.isIE&&(q="\x3cpre class\x3d'esriProfileDesc'\x3e"+q+"\x3c/pre\x3e");t("span",{innerHTML:q,style:"white-space:pre-wrap;"},c,"only");if("undefined"!==typeof isEmbedded&&isEmbedded)return d;
c=t("div",{style:{clear:"both"},"class":"profileLinks esriItemLinks esriFloatTrailing left"},d);q=t("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"user.html?user\x3d"+e.username,innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().profile},c,"last");f.connect(q,"onclick",function(){-1<window.location.href.indexOf(esriGeowConfig.webmapViewerPath)&&arcgisonline.map.main.map&&arcgisonline.map.main.mapInitialized?arcgisonline.map.storage.saveMapInCookie(null,!0,null,null,f.hitch(this,function(){window.location=
esriGeowConfig.baseUrl+"user.html?user\x3d"+e.username})):window.location=esriGeowConfig.baseUrl+"user.html?user\x3d"+e.username});this._util.relativeToExplicitUrl("js/arcgisonline/css/images/transparent.gif");-1<window.location.href.indexOf(esriGeowConfig.webmapViewerPath)&&this._util.relativeToExplicitUrl("images/transparent.gif");q=esriGeowConfig.userRole&&esriGeowConfig.userRole.isAdmin();var a=(m=esriGeowConfig.userRole&&esriGeowConfig.userRole.isCustom())&&esriGeowConfig.userRole.canViewUsers()&&
esriGeowConfig.userRole.canViewOrgItems();u&&(u.username===e.username?t("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"content.html",innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().manageItems},c,"last"):u.accountId&&u.role&&e.orgId&&e.role&&(q||m&&a)&&u.accountId===e.orgId&&t("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"content.html?user\x3d"+e.username,innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().manageItems},c,"last"));t("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"search.html?q\x3downer:%22"+
e.username+"%22\x26restrict\x3dfalse",innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().items},c,"last");t("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"search.html?t\x3dgroups\x26q\x3downer:%22"+e.username+"%22\x26restrict\x3dfalse",innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().groups},c,"last");t("div",{style:{clear:"both",width:"100%"}},d);return d}}})},"arcgisonline/sharing/dijit/TextMenu":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/util"],function(f,
B,l){f.provide("arcgisonline.sharing.dijit.TextMenu");f.require("arcgisonline.sharing.util");f.declare("arcgisonline.sharing.dijit.TextMenu",[B._Widget],{_util:arcgisonline.sharing.util,textMenuItems:[{label:"No menu items",href:"#",iconClass:null}],labelNode:null,triggerNode:null,menu:null,handlers:[],constructor:function(e){f.mixin(this,e)},postCreate:function(){this.menu=(new B.Menu({})).placeAt(f.body());f.addClass(this.menu.domNode,"esriTextMenu");B.popup.moveOffScreen(this.menu.domNode);null!==
this.textMenuItems&&this._renderItems(this.textMenuItems);f.style(this.triggerNode,"cursor","hand");f.style(this.triggerNode,"cursor","pointer");this.handlers.push(f.connect(this.triggerNode,"onclick",this,this.show));f.connect(this.menu,"onMouseLeave",f.hitch(this,function(){this.hide()}))},show:function(e){e.preventDefault();B.popup.open({popup:this.menu,around:this.labelNode,orient:{BL:"TL",BR:"TR",TL:"BL",TR:"BR"},onExecute:f.hitch(this,this.hide),onCancel:f.hitch(this,this.hide)});this.menu.focus()},
hide:function(){B.popup.close(this.menu)},destroy:function(){this.hide();f.forEach(this.handlers,function(e){f.disconnect(e)});f.forEach(f.query(".esriTextMenuItem"),function(e){B.byNode(e).destroy()},this);this.menu.destroy();this.inherited(arguments)},_renderItems:function(e){f.forEach(e,function(c){c=new B.MenuItem(c);f.addClass(c.domNode,"esriTextMenuItem");this.menu.addChild(c)},this)}})})},"arcgisonline/pages/organization/widgets/ProfilePopup":function(){define("require exports tslib calcite-web/js/calcite-web esri/Evented dojo/keys dojo/on dojo/text!./templates/ProfilePopup.html dojo/i18n!../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase dijit/popup dijit/TooltipDialog arcgisonline/pages/utils/icons arcgisonline/pages/utils/dom arcgisonline/pages/utils/strings arcgisonline/pages/utils/user arcgisonline/pages/utils/focus arcgisonline/pages/pageUtil arcgisonline/pages/dijit/MemberThumb arcgisonline/pages/portal/PortalUser arcgisonline/sharing/util arcgisonline/esriGeowConfig arcgisonline/sharing/dijit/_LevelAwareMixin arcgisonline/telemetry arcgisonline/tsutils/declareDecorator".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E,C,y,v,A){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);n=l.__importDefault(n);r=l.__importDefault(r);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);w=l.__importDefault(w);x=l.__importDefault(x);z=l.__importDefault(z);D=l.__importDefault(D);E=l.__importDefault(E);C=
l.__importDefault(C);y=l.__importDefault(y);v=l.__importDefault(v);A=l.__importDefault(A);return function(){function G(F,H){this.templateString=d.default;this.i18n=q.default;this.icons=r.default;this.isSelf=this.loaded=!1;this.itemTotal=0;this.canUpdateProfile=!1}G.prototype.postCreate=function(){var F;this.inherited(arguments);this.telemetry=v.default.init(this.portal,!0);this.dialog=new n.default({class:"profile-popup",title:"",content:this.domNode,_onKey:this.handleDialogKeydown.bind(this)});this.currentUser=
E.default.getUser();this.isSelf=(null===(F=this.currentUser)||void 0===F?void 0:F.username)===this.username;this.addEventListeners()};G.prototype.open=function(){this.logEvent("open");this.render()};G.prototype.close=function(){this.loaded&&(h.default.close(this.dialog),this.emit("close"),this.dialog.destroy(),this.destroy())};G.prototype.handleDialogKeydown=function(F){var H=this;if(F.keyCode===u.default.TAB)if(F.stopPropagation(),this.lastFocusItem!==F.target||F.shiftKey)F.shiftKey&&this.firstFocusItem===
F.target&&(F.preventDefault(),this.opener.focus(),this.close());else{F.preventDefault();var L=w.default.getFocusableElements(document.body);L.forEach(function(M,Q){M===H.opener&&L[Q+1].focus()});this.close()}};G.prototype.render=function(){var F=this;this.getUser(this.username).then(function(H){var L,M,Q=null===(L=F.currentUser)||void 0===L?void 0:L.userRole;L=H.orgId&&H.orgId===(null===(M=F.currentUser)||void 0===M?void 0:M.orgId);M=(null===Q||void 0===Q?void 0:Q.isAdmin())&&L;F.canUpdateProfile=
F.isSelf||M||(null===Q||void 0===Q?void 0:Q.canUpdateUsers())&&L;H.fullName||(H.fullName=b.default.createFullName(H));Q=H.username;M=H.groups;L=H.description;H.thumbnailUrl||(H.thumbnailUrl="");new z.default({member:new D.default(l.__assign(l.__assign({},H),{portal:F.portal})),showName:!0},F.domNode.querySelector(".js-member-thumb"));L&&(L=g.default.escapeNewlines(g.default.addHyperlinks(g.default.restoreNewlines(L))));F.bioEl.innerHTML=g.default.insertHTMLLineBreaks(L);L||k.default.hideNode(F.bioContainer);
M?F.renderGroups(M):F.getUserGroups(Q).then(function(S){F.renderGroups(S.results)});F.user=H;F.getUserItems(Q).then(function(S){S.total&&(F.itemCountEl.textContent=F.itemTotal=S.total,k.default.showNode(F.itemsSection));F.showContent();F.checkIfHideProfileLink()},function(){F.showContent();F.checkIfHideProfileLink()});Q=F.i18n.myOrganization.formatters.viewUserProfile.replace("${username}",H.fullName);F.viewProfileBtn.setAttribute("aria-label",Q);Q=F.i18n.userProfile.viewUserGroup.replace("${username}",
H.fullName);F.viewGroupsBtn.setAttribute("aria-label",Q);H=F.i18n.userProfile.viewUserItem.replace("${username}",H.fullName);F.viewItemsBtn.setAttribute("aria-label",H)})};G.prototype.checkIfHideProfileLink=function(){this.itemTotal||this.canUpdateProfile||k.default.hideNode(this.viewProfileBtn)};G.prototype.renderGroups=function(F){F&&F.length?k.default.createElement("arcgis-group-thumbnail-stack",{portal:this.portal,groups:F,maxGroups:5,tooltip:!0},this.groupIcons):k.default.hideNode(this.groupsSection)};
G.prototype.getUserItems=function(F){var H;return E.default.request({url:"".concat(C.default.restBaseUrl,"search"),content:{q:'owner:"'.concat(F,'" ').concat((null===(H=null===C.default||void 0===C.default?void 0:C.default.viewQueries)||void 0===H?void 0:H.none)||""),sortOrder:"desc",num:100}})};G.prototype.getUserGroups=function(F){return E.default.request({url:"".concat(C.default.restBaseUrl,"community/groups"),content:{q:'(owner:"'.concat(F,'")')}})};G.prototype.showContent=function(){var F=this;
this.groupsSection.classList.contains("hide")&&this.itemsSection.classList.contains("hide")&&!this.bioEl.innerHTML&&k.default.hideNode(this.bottomSection);this.loader.classList.remove("is-active");k.default.showNode(this.content);this.loaded=!0;h.default.open({popup:this.dialog,orient:["below","above"],around:this.opener,onCancel:function(){F.opener.focus();F.close()}});var H=w.default.getFocusableElements(this.dialog.domNode);this.firstFocusItem=H[0];this.lastFocusItem=H[H.length-1];this.firstFocusItem.focus();
this.dialog.domNode.parentElement.classList.add("profile-popup__container");this.dialogClass&&this.dialog.domNode.parentElement.classList.add(this.dialogClass);setTimeout(function(){k.default.showHide(F.bioToggle,F.bioEl.scrollHeight>F.bioEl.clientHeight)},100)};G.prototype.getUser=function(F){return E.default.request({url:"".concat(C.default.restBaseUrl,"community/users/").concat(F)})};G.prototype.addEventListeners=function(){var F=this;this.own((0,t.default)(this.closeIcon,"click",function(){h.default.close(F.dialog)}),
(0,t.default)(this.domNode,"click",function(H){H.stopPropagation()}),(0,t.default)(document.body,"click",function(){F.close()}),(0,t.default)(this.groupsSection,"click",function(){F.logEvent("view all groups");x.default.goToPage("groups",F.user)}),(0,t.default)(this.itemsSection,"click",function(){F.logEvent("view all content");x.default.goToPage("content",F.user)}),(0,t.default)(this.viewProfileBtn,"click",function(){F.logEvent("view profile");window.open("".concat(C.default.baseUrl,"user.html").concat(F.isSelf?
"":"?user\x3d".concat(encodeURIComponent(F.username))),"_blank")}),(0,t.default)(this.bioToggle,"click",function(){return F.handleBioToggleClick()}));e.default.bus.on("dropdown:toggle",function(H){F.close()})};G.prototype.handleBioToggleClick=function(){this.bioContainer.classList.toggle("profile-popup__bio-container--expanded")};G.prototype.logEvent=function(F){var H;null===(H=this.telemetry)||void 0===H?void 0:H.logEvent({category:"profile popup",action:F})};return G=l.__decorate([(0,A.default)(a.default,
m.default,y.default,c.default)],G)}()})},"calcite-web/js/calcite-web":function(){(function(f,B){"object"===typeof exports&&"undefined"!==typeof module?module.exports=B():"function"===typeof define&&define.amd?define(B):f.calcite=B()})(this,function(){function f(la,T){for(;T;T=T.parentNode){var N=T&&T.getAttribute&&T.getAttribute("class")||"";N=(new RegExp("(\\s|^)"+la+"(\\s|$)")).test(N);if(1===T.nodeType&&N)break}return T}function B(la){return Array.isArray(la)?la:Array.prototype.slice.call(la)}
function l(la,T){la=(T||document).querySelectorAll(la);return B(la)}function e(la,T){return(new RegExp("(\\s|^)"+T+"(\\s|$)")).test(la.getAttribute("class"))}function c(la,T){T.split(" ").forEach(function(N){if(!e(la,N)){var K=la.getAttribute("class")||"";la.setAttribute("class",K+" "+N)}})}function u(la,T){T.split(" ").forEach(function(N){var K=(la.getAttribute("class")||"").replace(new RegExp("(\\s|^)"+N+"(\\s|$)","g"),"$2");e(la,N)&&la.setAttribute("class",K)})}function t(la){la=B(la);la.forEach(function(T){u(T,
"is-active")})}function d(la,T){t(la);c(T,"is-active")}function q(la,T,N){if(la.addEventListener)return la.addEventListener(T,N,!1);if(la.attachEvent)return la.attachEvent("on"+T,N)}function m(la,T,N){if(la.removeEventListener)return la.removeEventListener(T,N,!1);if(la.detachEvent)return la.detachEvent("on"+T,N)}function a(la){if(la.preventDefault)return la.preventDefault();la.returnValue&&(la.returnValue=!1)}function h(la){la=la||window.event;if(la.stopPropagation)return la.stopPropagation();la.cancelBubble&&
(la.cancelBubble=!0)}function n(){}function r(la){for(var T="",N=0;N<la;N++)T+=(65536*(1+Math.random())|0).toString(16).substring(1);return T}function k(la){if(!la)throw new TypeError("Invalid argument `value` has no value.");this.value=k.EMPTY;la&&la instanceof k?this.value=la.toString():la&&"[object String]"===Object.prototype.toString.call(la)&&k.isGuid(la)&&(this.value=la);this.equals=function(T){return k.isGuid(T)&&this.value===T};this.isEmpty=function(){return this.value===k.EMPTY};this.toString=
function(){return this.value};this.toJSON=function(){return this.value}}function g(la){h(la);la=f("accordion-section",la.target||la.srcElement);J.emit("accordion:toggle",{node:la})}function b(la){var T=la.node;e(T,"is-active")?u(T,"is-active"):c(T,"is-active");(la=la.node.querySelector(".accordion-title"))&&(la.getAttribute("aria-expanded")?la.removeAttribute("aria-expanded"):la.setAttribute("aria-expanded","true"))}function w(la){13!==la.keyCode&&32!==la.keyCode||!e(la.target||la.srcElement,"accordion-title")||
(a(la),h(la),g(la))}function x(la){var T=l(".js-accordion");la?z(la.node):T.forEach(function(N){z(N)})}function z(la){la.setAttribute("aria-live","polite");la.setAttribute("role","tablist");B(la.children).forEach(function(T){var N=T.querySelector(".accordion-title"),K=T.querySelector(".accordion-content"),W=K.id||k.raw();K.id=W;N.setAttribute("role","tab");N.setAttribute("tabindex","0");N.setAttribute("aria-controls",W);e(T,"is-active")&&N.setAttribute("aria-expanded","true");var da=!1;P.accordions.forEach(function(fa){fa.target===
N&&"click"===fa.event&&fa.fn===g&&(da=!0)});da||(P.accordions.push({target:N,event:"click",fn:g}),P.accordions.push({target:T,event:"keydown",fn:w}),q(N,"click",g),q(T,"keydown",w))})}function D(){Y||(J.on("accordion:bind",x),J.on("accordion:toggle",b),Y=!0);J.emit("accordion:bind")}function E(la){m(document.body,"click",E);l(".js-dropdown").forEach(function(T){u(T,"is-active")});l(".js-dropdown-toggle").forEach(function(T){T.setAttribute("aria-expanded","false")});m(document,"keydown",v);m(document.body,
"focusin",C)}function C(la){la.target&&!f("js-dropdown",la.target)&&J.emit("dropdown:close")}function y(la){if(la){var T=e(la.node,"is-active");J.emit("dropdown:close");T||(c(la.node,"is-active"),la.target&&la.target.setAttribute("aria-expanded","true"),q(document,"keydown",v));e(la.node,"is-active")&&(q(document.body,"click",E),q(document.body,"focusin",C))}}function v(la){40===la.keyCode|38===la.keyCode&&la.preventDefault()}function A(la){l(".js-dropdown-toggle").forEach(function(T){var N=!1;P.dropdowns.forEach(function(K){K.target===
T&&"click"===K.event&&K.fn===M&&(N=!0)});N||(P.dropdowns.push({target:T,event:"click",fn:M}),q(T,"click",M))})}function G(){var la=document.querySelector(".js-dropdown.is-active");return la?la:!1}function F(la){var T=la.links.indexOf(document.activeElement);-1===T?T=la.forward?0:la.links.length-1:la.forward?(T+=1,T===la.links.length&&(T=0)):(--T,-1===T&&(T=la.links.length-1));la.links[T].focus()}function H(){var la=G();la&&(la=l(".dropdown-link",la).filter(function(T){return null!==T.offsetParent}),
J.emit("dropdown:focus",{links:la,forward:!0}))}function L(){var la=G();la&&(la=l(".dropdown-link",la).filter(function(T){return null!==T.offsetParent}),J.emit("dropdown:focus",{links:la,forward:!1}))}function M(la){a(la);h(la);var T=f("js-dropdown",la.target);J.emit("dropdown:toggle",{node:T,target:la.target})}function Q(){aa||(J.on("dropdown:toggle",y),J.on("dropdown:close",E),J.on("keyboard:escape",E),J.on("keyboard:arrow:down",H),J.on("keyboard:arrow:up",L),J.on("dropdown:focus",F),aa=!0);A()}
function S(){J.on("scrolling:at",function(T){la.forEach(function(N){var K=N.element;e(N.element,"is-sticky")&&(K=N.element.getAttribute("data-sticky-id"),K=document.querySelector('.js-shim[data-sticky-id\x3d"'+K+'"]'));if(K){var W=K.getAttribute("data-top")||0;N.top=K.offsetTop-parseInt(W,0)}N.top<T?J.emit("sticky:stick",N):J.emit("sticky:unstick",N)})});J.on("sticky:stick",function(T){var N=T.element.getAttribute("data-sticky-id"),K=document.querySelector('.js-shim[data-sticky-id\x3d"'+N+'"]');N&&
K&&(c(T.element,"is-sticky"),K.style.display="")});J.on("sticky:unstick",function(T){var N=T.element.getAttribute("data-sticky-id"),K=document.querySelector('.js-shim[data-sticky-id\x3d"'+N+'"]');N&&K&&(u(T.element,"is-sticky"),K.style.display="none")});var la=l(".js-sticky").map(function(T){var N=T.offsetTop,K=T.getAttribute("data-top")||0;T.style.top=K+"px";if(!T.getAttribute("data-sticky-id")){var W=k.raw();T.setAttribute("data-sticky-id",W);var da=T.parentNode,fa=T.cloneNode("deep");c(fa,"js-shim");
u(fa,"js-sticky");fa.setAttribute("data-sticky-id",W);fa.style.visibility="hidden";fa.style.display="none";da.insertBefore(fa,T)}return{top:N-parseInt(K,0),element:T}})}function I(){function la(W){var da=W.getAttribute("data-tab");if(da)return da;da=k.raw();W.setAttribute("data-tab",da);return da}function T(W){var da=W.target;e(da,"js-tab")||(da=W.currentTarget);W=f("js-tab-group",da);var fa=la(W);return{parent:W,id:fa,active:da}}function N(W){W.preventDefault();W=T(W);J.emit("tabs:active",W)}function K(W){var da=
T(W);if(13===W.keyCode||32===W.keyCode)W.preventDefault(),J.emit("tabs:active",da);if(39===W.keyCode||37===W.keyCode){var fa=B(da.parent.querySelectorAll(".js-tab")),ha=fa.indexOf(document.activeElement);-1<ha&&e(document.activeElement,"js-tab")&&(da=fa[ha+1]||fa[0],fa=fa[ha-1]||fa[fa.length-1],(39===W.keyCode?da:fa).focus())}}J.on("tabs:bind",function(){var W=l(".js-tab"),da=l(".js-tab-group"),fa=l(".js-tab-section");da.forEach(function(ha){ha.setAttribute("aria-live","polite");la(ha);ha.children[0].setAttribute("role",
"tablist");ha=ha.querySelectorAll(".js-tab");for(var ra=100/ha.length,za=0;za<ha.length;za++)ha[za].style.maxWidth=ra+"%"});W.forEach(function(ha){ha.setAttribute("aria-expanded","false");ha.setAttribute("role","tab");ha.setAttribute("tabindex","0");q(ha,"click",N);q(ha,"keydown",K)});fa.forEach(function(ha){ha.setAttribute("role","tabpanel");e(ha,"is-active")?ha.setAttribute("aria-expanded",!0):ha.setAttribute("aria-expanded",!1)})});J.on("tabs:active",function(W){var da=W.parent,fa=B(da.querySelectorAll(".js-tab"));
W=W.active;da=B(da.querySelectorAll(".js-tab-section"));var ha=fa.indexOf(W);ha=da[ha];fa.forEach(function(ra){ra.setAttribute("aria-expanded",!1)});W.setAttribute("aria-expanded",!0);d(fa,W);da.forEach(function(ra){ra.setAttribute("aria-expanded",!1)});ha.setAttribute("aria-expanded",!0);d(da,ha);W.focus()});J.emit("tabs:bind")}var P={dropdowns:[],accordions:[],modals:[]};n.prototype={on:function(la,T,N){var K=this.e||(this.e={});(K[la]||(K[la]=[])).push({fn:T,ctx:N});return this},once:function(la,
T,N){function K(){W.off(la,K);T.apply(N,arguments)}var W=this;K._=T;return this.on(la,K,N)},emit:function(la){var T=[].slice.call(arguments,1),N=((this.e||(this.e={}))[la]||[]).slice(),K=0,W=N.length;for(K;K<W;K++)N[K].fn.apply(N[K].ctx,T);return this},off:function(la,T){var N=this.e||(this.e={}),K=N[la],W=[];if(K&&T)for(var da=0,fa=K.length;da<fa;da++)K[da].fn!==T&&K[da].fn._!==T&&W.push(K[da]);W.length?N[la]=W:delete N[la];return this}};var J=new n,U=RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$",
"i");k.EMPTY="00000000-0000-0000-0000-000000000000";k.isGuid=function(la){return la&&(la instanceof k||U.test(la.toString()))};k.create=function(){return new k([r(2),r(1),r(1),r(1),r(3)].join("-"))};k.raw=function(){return[r(2),r(1),r(1),r(1),r(3)].join("-")};var Y=!1,aa=!1;q(document,"keyup",function(la){27===la.keyCode?J.emit("keyboard:escape"):13===la.keyCode?J.emit("keyboard:return"):32===la.keyCode?J.emit("keyboard:space"):38===la.keyCode?J.emit("keyboard:arrow:up"):40===la.keyCode?J.emit("keyboard:arrow:down"):
37===la.keyCode?J.emit("keyboard:arrow:left"):39===la.keyCode&&J.emit("keyboard:arrow:right")});q(window,"scroll",function(la,T,N){var K,W,da;var fa=function(){K=!1;W&&(da.apply(N,W),W=!1)};return da=function(){K?W=arguments:(la.apply(N,arguments),setTimeout(fa,T),K=!0)}}(function(){J.emit("scrolling:at",window.pageYOffset)},100));return{bus:J,accordion:D,dropdown:Q,sticky:S,tabs:I,init:function(){[D,Q,S,I].forEach(function(la){la()})}}})},"dijit/TooltipDialog":function(){define("dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n){f=f("dijit.TooltipDialog",[d,a,m,q],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:h,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);this.own(u(this.domNode,"keydown",c.hitch(this,"_onKey")))},orient:function(r,k,g){r={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft",
"TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[k+"-"+g];B.replace(this.domNode,r,this._currentOrientClass||"");this._currentOrientClass=r},focus:function(){this._getFocusItems();
t.focus(this._firstFocusItem)},onOpen:function(r){this.orient(this.domNode,r.aroundCorner,r.corner);var k=r.aroundNodePos;"M"==r.corner.charAt(0)&&"M"==r.aroundCorner.charAt(0)?(this.connectorNode.style.top=k.y+(k.h-this.connectorNode.offsetHeight>>1)-r.y+"px",this.connectorNode.style.left=""):"M"==r.corner.charAt(1)&&"M"==r.aroundCorner.charAt(1)&&(this.connectorNode.style.left=k.x+(k.w-this.connectorNode.offsetWidth>>1)-r.x+"px");this._onShow()},onClose:function(){this.onHide()},_onKey:function(r){if(r.keyCode==
e.ESCAPE)this.defer("onCancel"),r.stopPropagation(),r.preventDefault();else if(r.keyCode==e.TAB){var k=r.target;this._getFocusItems();this._firstFocusItem==this._lastFocusItem?(r.stopPropagation(),r.preventDefault()):k==this._firstFocusItem&&r.shiftKey?(t.focus(this._lastFocusItem),r.stopPropagation(),r.preventDefault()):k!=this._lastFocusItem||r.shiftKey?r.stopPropagation():(t.focus(this._firstFocusItem),r.stopPropagation(),r.preventDefault())}}});l("dojo-bidi")&&f.extend({_setTitleAttr:function(r){this.containerNode.title=
this.textDir&&this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,r):r;this._set("title",r)},_setTextDirAttr:function(r){this._created&&this.textDir==r||(this._set("textDir",r),this.textDir&&this.title&&(this.containerNode.title=this.enforceTextDirWithUcc(null,this.title)))}});return f})},"arcgisonline/pages/utils/dom":function(){define("require exports tslib ./strings dojo/dom-style preact".split(" "),function(f,B,l,e,c,u){e=l.__importDefault(e);c=l.__importDefault(c);return function(){function t(){}
t.createElement=function(d,q,m){m||(m=document.createElement("div"),document.body.appendChild(m));var a=document.createElement(d);Object.keys(q||{}).forEach(function(h){a[h]=q[h]});m.appendChild(a);return a};t.removeComponent=function(d,q){(0,u.render)(null,d);q.removeChild(d)};t.addStylesheet=function(d){var q=document.createElement("link");q.rel="stylesheet";q.type="text/css";q.href=d;document.head.appendChild(q)};t.isHidden=function(d){var q=["none","none !important","none!important"],m=["hidden",
"hidden !important","hidden!important"],a="".concat(c.default.get(d,"visibility")),h="".concat(c.default.get(d,"display"));return d&&(-1<q.indexOf(h)||-1<m.indexOf(a))};t.hideNode=function(d){null===d||void 0===d?void 0:d.classList.add("hide")};t.hideNodes=function(d){if(d)if(d.forEach)d.forEach(this.hideNode);else for(var q=0;q<d.length;q++)this.hideNode(d[q])};t.showNode=function(d){null===d||void 0===d?void 0:d.classList.remove("hide")};t.showNodes=function(d){if(d)if(d.forEach)d.forEach(this.showNode);
else for(var q=0;q<d.length;q++)this.showNode(d[q])};t.showHide=function(d,q){null===d||void 0===d?void 0:d.classList[q?"remove":"add"]("hide")};t.showHideAll=function(d,q){var m=this;null===d||void 0===d?void 0:d.forEach(function(a){return m.showHide(a,q)})};t.addRemoveClass=function(d,q,m){null===d||void 0===d?void 0:d.classList[m?"add":"remove"](q)};t.addRemoveClassAll=function(d,q,m){var a=this;null===d||void 0===d?void 0:d.forEach(function(h){return a.addRemoveClass(h,q,m)})};t.setVisibility=
function(d,q){null===d||void 0===d?void 0:d.classList[q?"remove":"add"]("visibility-hidden")};t.toggleHide=function(d){null===d||void 0===d?void 0:d.classList.toggle("hide")};t.toggleHideAll=function(d){null===d||void 0===d?void 0:d.forEach(function(q){q.classList.toggle("hide")})};t.activateNode=function(d){null===d||void 0===d?void 0:d.classList.add("is-active")};t.deactivateNode=function(d){null===d||void 0===d?void 0:d.classList.remove("is-active")};t.canBeDisabled=function(d){return d instanceof
HTMLInputElement||d instanceof HTMLButtonElement||d instanceof HTMLFieldSetElement||d instanceof HTMLOptGroupElement||d instanceof HTMLOptionElement||d instanceof HTMLSelectElement||d instanceof HTMLTextAreaElement};t.isDisabled=function(d){var q;return null!==(q=null===d||void 0===d?void 0:d.disabled)&&void 0!==q?q:!1};t.disableNode=function(d,q){d&&(d.disabled=q)};t.disableNodes=function(d,q){var m=this;null===d||void 0===d?void 0:d.forEach(function(a){m.disableNode(a,q)})};t.isNodeVisible=function(d){return 0!==
(null===d||void 0===d?void 0:d.offsetHeight)};t.isChecked=function(d){var q;return null!==(q=null===d||void 0===d?void 0:d.checked)&&void 0!==q?q:!1};t.checkNode=function(d,q){d&&(d.checked=q)};t.selectOption=function(d,q){if(d)for(var m=0;m<d.length;m++){var a=d[m];if(e.default.areEqual(a.value,q)){a.selected=!0;break}}};t.getSelectedOption=function(d){if(d)for(var q=0;q<d.length;q++){var m=d[q];if(m.selected)return m}return null};t.addClasses=function(d,q){d&&(null===q||void 0===q?0:q.length)&&
q.forEach(function(m){d.classList.add(m)})};t.removeClasses=function(d,q){d&&(null===q||void 0===q?0:q.length)&&q.forEach(function(m){d.classList.remove(m)})};t.setModifierClass=function(d,q,m){var a,h=new RegExp("(^| )".concat(q,"\\S+"),"g");(h=null===(a=d.className.match(h))||void 0===a?void 0:a[0].replace(/ +/g,""))&&d.classList.remove(h);d.classList.add("".concat(q).concat(m))};t.appendChildren=function(d,q){var m=document.createDocumentFragment();null===d||void 0===d?void 0:d.forEach(function(a){m.appendChild(a)});
null===q||void 0===q?void 0:q.appendChild(m)};t.forEachNode=function(d,q,m){for(var a=0;a<d.length;a++)null===q||void 0===q?void 0:q.call(m,d[a],a)};t.nodeListToArray=function(d){return Array.prototype.slice.call(d)};t.querySelectorAllAsArray=function(d,q){return this.nodeListToArray(q.querySelectorAll(d))};return t}()})},"arcgisonline/pages/utils/focus":function(){define(["require","exports","tslib","./dom"],function(f,B,l,e){e=l.__importDefault(e);return function(){function c(){}c.getFocusableElements=
function(u){u=u.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex\x3d"-1"]), iframe');for(var t=[],d=0;d<u.length;d++){var q=u[d];null===q.offsetParent||e.default.canBeDisabled(q)&&q.disabled||t.push(q)}return t};c.trapFocus=function(u){function t(q){var m=d(),a=m[0];m=m[m.length-1];if("Tab"===q.key||9===q.keyCode)q.shiftKey?document.activeElement===a&&(m.focus(),q.preventDefault()):document.activeElement===m&&(a.focus(),q.preventDefault())}var d=this.getFocusableElements.bind(this,
u);u.addEventListener("keydown",t);return t};c.untrapFocus=function(u,t){u.removeEventListener("keydown",t)};return c}()})},"arcgisonline/pages/dijit/MemberThumb":function(){define("require exports tslib dojo/on dojo/text!./MemberThumb/templates/MemberThumb.html dijit/_TemplatedMixin dijit/_WidgetBase ../utils/formatters ../utils/strings ../utils/icons ../utils/dom ../../tsutils/declareDecorator arcgisonline/esriGeowConfig".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h,n){e=l.__importDefault(e);c=l.__importDefault(c);
u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);n=l.__importDefault(n);return function(){function r(k,g){this.icons=m.default;this.templateString=c.default;this.hide=d.default.hide;this.show=d.default.show;this.cssClasses="";this.showTooltip=this.showName=!1;this.scale="l";this.isCustomSize=!1}r.prototype.postMixInProperties=function(){var k,g,b;this.inherited(arguments);if(this.member.thumbnailUrl&&
this.member.thumbnailUrl!==this.member.defaultThumbnailUrl){var w=(null===(g=null===(k=n.default.userInfo)||void 0===k?void 0:k.credential)||void 0===g?void 0:g.token)||(null===(b=n.default.userInfo)||void 0===b?void 0:b.token);w&&-1===this.member.thumbnailUrl.indexOf("token")&&(this.member.thumbnailUrl+="".concat(-1<this.member.thumbnailUrl.indexOf("?")?"\x26":"?","token\x3d").concat(w));this.member.initials="";this.member.backgroundColor="#FFFFFF"}else this.showInitials()};r.prototype.postCreate=
function(){var k=this;this.inherited(arguments);this.showTooltip&&(this.domNode.setAttribute("aria-label",this.member.fullName),this.domNode.classList.add("tooltip"));if(this.isCustomSize)this.content&&(this.member.backgroundColor&&(this.content.style.backgroundColor=this.member.backgroundColor),this.content.classList.add("member-thumb")),this.own((0,e.default)(this.img,"error",function(){return k.showInitials()})),a.default.showNode(this.customContainer);else{this.customContainer.remove();var g=
document.createElement("arcgis-user-avatar");g.classList.add("flex");g.user=this.member;g.portal=this.member.portal;g.scale=this.scale;if(g.showName=this.showName)g.description=this.member.username;this.domNode.querySelector(".js-mask").insertAdjacentElement("beforebegin",g)}};r.prototype.showInitials=function(){if(this.member.fullName.trim()){var k=this.member.fullName.split(" ");this.member.initials=k[0].substring(0,1)+(k[1]?k[1].substring(0,1):"")}else this.member.username&&(this.member.initials=
this.member.username.substring(0,2));this.initials&&(this.initials.textContent=this.member.initials);this.member.backgroundColor=this._getMemberFillColor(this.member);this.content&&(this.content.style.backgroundColor=this.member.backgroundColor);a.default.hideNode(this.img);a.default.showNode(this.initials)};r.prototype._getMemberFillColor=function(k){var g=k.id?k.id.substr(k.id.length-6):"";q.default.isValidHex(g)||(g=q.default.stringToHex(k.username));k=q.default.hexToRgb(g);return"rgba("+k.r+","+
k.g+","+k.b+", 0.2)"};return r=l.__decorate([(0,h.default)(t.default,u.default)],r)}()})},"arcgisonline/tsutils/declareDecorator":function(){define(["require","exports","tslib","dojo/_base/declare"],function(f,B,l,e){Object.defineProperty(B,"__esModule",{value:!0});e=l.__importDefault(e);B.default=function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];return function(t){return(0,e.default)(c,t.prototype)}}})},"arcgisonline/pages/portal/PortalUser":function(){define("require exports tslib ./PortalGroup ./LicenseInfo ../utils/arrays ../utils/mapViewer ../../sharing/util ../../sharing/dijit/Role ../../tsutils/declareDecorator dojo/cookie dojo/_base/lang dojo/Deferred dojo/Stateful dojo/topic esri/arcgis/Portal esri/lang".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);n=l.__importDefault(n);r=l.__importDefault(r);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);return function(){function w(x){var z;x=this.portal||{};this.setRole(this.viewOnly);this.viewOnly&&this.copyViewOnlyRoleProperties();h.default.mixin(this,{thumbnailUrl:this.thumbnailUrl||
d.default.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg"),defaultThumbnailUrl:d.default.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg")});h.default.mixin(this,c.default);this.token=null===(z=this.credential)||void 0===z?void 0:z.token;this.id=this.username;this.orgUrl=x.urlKey&&x.customBaseUrl?"".concat(x.urlKey,".").concat(x.customBaseUrl):x.portalUrl;this.accountId=this.orgId;this.computeFlags()}w.prototype.postscript=function(){};w.prototype.setRole=
function(x){return this.userRole=new q.default({portalUser:this,viewOnly:x})};w.prototype.getDefaultMapViewer=function(){var x=this,z=new n.default;this.defaultMapViewer?z.resolve(this.defaultMapViewer):this.getProperties().then(function(D){var E,C=x.portal;x.defaultMapViewer=(0,t.determineUserMapViewer)({isSignedIn:!0,isViewingOrg:!!C.id,properties:D})||(0,t.determineOrgMapViewer)({mapViewer:null===(E=C.portalProperties)||void 0===E?void 0:E.mapViewer,created:C.created,subscriptionInfo:C.subscriptionInfo,
isPortal:C.isPortal});z.resolve(x.defaultMapViewer)});return z};w.prototype.getProperties=function(){var x=this,z=this.username;z="".concat(this.portal.url,"community/users/").concat(z,"/properties");var D=new n.default;this.userProperties?D.resolve(this.userProperties):d.default.request({url:z}).then(function(E){x.userProperties=(null===E||void 0===E?void 0:E.properties)||null;D.resolve(x.userProperties)},function(E){D.reject(E)});return D};w.prototype.getToken=function(){var x;return(null===(x=
this.credential)||void 0===x?void 0:x.token)||this.token};w.prototype.computeFlags=function(){var x,z=this.portal.supportsHostedServices||!1,D=(null===(x=this.portal.helperServices)||void 0===x?void 0:x.rasterAnalytics)&&b.default.isDefined(this.portal.helperServices.rasterAnalytics.url);this.isOrgUser=this.portal.urlKey&&this.portal.customBaseUrl||this.portal.isPortal?!0:!1;this.isOrgAdmin=this.userRole.isAdmin();this.canShare=!this.isOrgUser||this.userRole.canShareItemToGroup()||this.userRole.canShareItemToOrg()||
this.portal.canSharePublic&&this.userRole.canShareItemToPublic();this.canShareOthers=this.userRole.canShareOthersItemsToOrg()||this.userRole.canShareOthersItemsToPublic();this.canViewOthersOrgItems=!this.userRole.isCustom()||this.userRole.isCustom()&&this.userRole.canViewOrgItems();this.canReassignOrgItems=this.isOrgAdmin||this.userRole.canReassignOrgItems();this.canUseGeocode=(this.canCreateItems=!this.isOrgUser||this.userRole.canCreateItem())&&this.userRole.canUseGeocode();this.canPublishTiles=
this.userRole.canPublishTiles();this.canPublishFeatures=this.userRole.canPublishFeatures();this.canPublishScenes=this.userRole.canPublishScenes();this.canPublishVectorTiles=this.userRole.canPublishVectorTiles();this.canPublishImageCollection=D&&this.userRole.canPublishImageCollection()?!0:!1;this.canUserPublish=z&&this.canCreateItems&&(this.canPublishTiles||this.canPublishFeatures||this.canPublishScenes||this.canPublishVectorTiles||this.canPublishImageCollection);this.canManageLicenses=this.isOrgAdmin||
this.userRole.canManageLicenses();this.canManageWebsite=this.isOrgAdmin||this.userRole.canManageWebsite()};w.prototype.copyViewOnlyRoleProperties=function(){this.role=this.userRole.baseRole;this.roleId=this.userRole.id;this.privileges=this.userRole.privileges;this.level="1"};w.prototype.getTags=function(){var x=this,z=new n.default;this.tags&&this.tags.length?z.resolve(this.tags):this.inherited(arguments).then(function(D){x.set("tags",D);z.resolve(x.tags)},function(D){x.set("tags",[]);z.resolve([])});
return z};w.prototype.getContentTags=function(){var x=this,z,D=new n.default;(null===(z=this.contentTags)||void 0===z?0:z.length)?D.resolve(this.contentTags):d.default.loadUserTags(this.username).then(function(E){x.set("contentTags",E);D.resolve(x.contentTags)},function(E){x.set("contentTags",[]);D.resolve([])});return D};w.prototype.getCurrentFolder=function(){if(!b.default.isDefined(this.currentFolder)){var x=d.default.getCookie("ESRI_Content"),z=x&&"/"!==x.folderId?x.folderId:this.username;this.set("currentFolder",
{id:z,isAll:null===x||void 0===x?void 0:x.isAll,isHome:"/"!==z&&z&&z!==this.username?!1:!0})}return this.currentFolder};w.prototype.setCurrentFolder=function(x){var z=d.default.getCookie("ESRI_Content")||{},D=(null===x||void 0===x?void 0:x.id)||x||this.username,E="all"===D;x={folderId:D===this.username||E?"/":D,isAll:E,isHome:(null===x||void 0===x?0:x.isHome)||"/"===D||!D||D===this.username?!0:!1};h.default.mixin(z,x);(0,a.default)("ESRI_Content",JSON.stringify(z),{path:"/",sameSite:"Strict"});this.set("currentFolder",
h.default.mixin(x,{id:D}))};w.prototype.getFolders=function(){var x=this,z=new n.default;d.default.request({url:this.userContentUrl,content:{num:1}}).then(this._toFolders.bind(this)).then(function(D){x.set("folders",D);z.resolve(D.slice(0))});return z};w.prototype.createFolder=function(x){var z=this,D=new n.default,E=this.userContentUrl+"/createFolder";x={folderName:x.replace(/ /g,"_"),title:x};d.default.request({url:E,content:x},{usePost:!0}).then(function(C){z.folders.push(C.folder);z.folders.shift();
z.set("folders",z._toFolders({folders:z.folders}));k.default.publish("folders/refresh");D.resolve(C.folder)},function(C){D.reject(C)});return D};w.prototype.updateFolder=function(x,z){var D=this,E=new n.default;d.default.request({url:this.userContentUrl+"/"+x+"/updateFolder",content:{newTitle:z}},{usePost:!0}).then(function(){return D.getFolders()},function(C){E.reject(C)}).then(function(C){E.resolve(C);k.default.publish("folders/refresh")},function(C){E.reject(C)});return E};w.prototype.deleteFolder=
function(x){var z=this,D=new n.default;d.default.request({url:this.userContentUrl+"/"+x+"/delete"},{usePost:!0}).then(function(E){var C,y=null===(C=null===E||void 0===E?void 0:E.folder)||void 0===C?void 0:C.id;z.folders=z.folders.filter(function(v){return(null===v||void 0===v?void 0:v.id)!==y});z.folders.shift();z.set("folders",z._toFolders({folders:z.folders}));D.resolve(E.folder)},function(E){D.reject(E)});return D};w.prototype.deleteItems=function(x){var z=new n.default,D=this.userContentUrl+"/deleteItems";
x={items:x.map(function(E){return E.id})};d.default.request({url:D,content:x},{usePost:!0}).then(function(){z.resolve(!0)},function(E){z.reject(E)});return z};w.prototype._toFolders=function(x){var z=this;x=(null===x||void 0===x?void 0:x.folders)||[];x=x.sort(function(D,E){return D.title.localeCompare(E.title)});u.default.find(x,function(D){return D.id===z.username})||x.unshift({username:this.username,id:this.username,title:this.username,created:"now"});return x};w.prototype.getGroups=function(){var x=
this,z=this.portal.url+"community/users/"+this.username,D=new n.default;this.userGroups?D.resolve(this.adminGroups||this.userGroups):d.default.request({url:z}).then(function(E){x.userGroups=(null===E||void 0===E?0:E.groups)?x._toGroup(E.groups):[];D.resolve(x.userGroups)},function(E){D.reject(E)});return D};w.prototype.getSharedOwnershipGroups=function(){var x=this,z=new n.default;this.ownershipGroups&&z.resolve(0<this.ownershipGroups.length?this.ownershipGroups:null);this.getGroups().then(function(){z.resolve(0<
x.ownershipGroups.length?x.ownershipGroups:null)});return z};w.prototype._toGroup=function(x){var z=this;this.ownershipGroups=[];return(null!==x&&void 0!==x?x:[]).map(function(D){var E=new e.default(h.default.mixin(D,{portal:z.portal}));z._isSharedOwnershipGroup(D)&&z.ownershipGroups.push(D);return h.default.mixin(D,{portalGroup:E})})};w.prototype._isSharedOwnershipGroup=function(x){var z=x.capabilities&&x.capabilities.join(",")||"";return(x.owner===this.username||!x.isViewOnly||x.userMembership&&
"admin"===x.userMembership.memberType)&&-1<z.toLowerCase().indexOf("updateitemcontrol")};return w=l.__decorate([(0,m.default)(g.default.PortalUser,r.default)],w)}()})},"arcgisonline/pages/portal/PortalGroup":function(){define("require exports tslib ./PortalItem ../utils/clone ../utils/arrays ../utils/getLivingAtlasCategorySet ../utils/resources ../utils/socialMedia ../utils/verified ../utils/itemsgroups ../../sharing/util ../../tsutils/declareDecorator dojo/promise/all dojo/Deferred dojo/_base/lang dojo/Stateful esri/arcgis/Portal arcgisonline/esriGeowConfig".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);h=l.__importDefault(h);n=l.__importDefault(n);r=l.__importDefault(r);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);x=l.__importDefault(x);return function(){function z(D){var E,C,y,v,A,G,F;this.portalUser=null!==(C=null===(E=this.portal)||void 0===E?void 0:E.getPortalUser())&&
void 0!==C?C:null;this.groupContentUrl=this.url.replace("/community/","/content/");this.searchContentUrl=this.portal.portalUrl+"search";this.canShowSocialMediaLinks=q.default.canShowSocialMediaLinksOnGroups(this.portal);this.isOwner="owner"===(null===(y=this.userMembership)||void 0===y?void 0:y.memberType);this.isManager="admin"===(null===(v=this.userMembership)||void 0===v?void 0:v.memberType);this.isMember="member"===(null===(A=this.userMembership)||void 0===A?void 0:A.memberType);this.isPublic=
"public"===this.access;this.belongsToGroup=this.userMembership&&u.default.includes(["owner","admin","member"],this.userMembership.memberType);this.isSharedOwnership=u.default.includes(this.capabilities,"updateitemcontrol");this.computeIsOpenDataEnabled();this.computeIsBackedByEnterpriseGroup();this.title=null!==(G=this.title)&&void 0!==G?G:"";this.snippet=null!==(F=this.snippet)&&void 0!==F?F:"";this.thumbnailUrl=this.thumbnail?this.url+"/info/"+this.thumbnail+"?token\x3d"+h.default.getToken():"./images/group-no-image.png";
this.portal.isPortal&&!this.membershipAccess&&(this.membershipAccess="org")}z.prototype.postscript=function(){};z.prototype.getOwnerProfile=function(D,E){var C=this,y=this.owner,v=new k.default;this.ownerProfile?v.resolve(this.ownerProfile):(this.isOwner?(y=new k.default,y.resolve(this.portalUser)):y=this.portal.getUserProfile(y),y.then(function(A){var G,F,H,L=(null===(G=C.groupOwner)||void 0===G?void 0:G.orgId)||void 0;G=!(!L||(null===(F=C.portalUser)||void 0===F?void 0:F.orgId)!==L);F=null===(H=
C.portalUser)||void 0===H?void 0:H.userRole;H=C.isOwner||G&&(null===F||void 0===F?void 0:F.canViewUsers())&&(null===F||void 0===F?void 0:F.canViewOrgItems());C.isAdmin=C.isOwner||C._isGroupAdmin(C.portalUser);(0,r.default)({folders:H&&E?A.getFolders():null,tags:H&&D?A.getTags():null,contentTags:H&&D?A.getContentTags():null}).then(function(){C.set("ownerProfile",A);v.resolve(A)},function(M){})}));return v};z.prototype._isOpenDataSetter=function(D){this.isOpenData=D;this.computeIsOpenDataEnabled()};
z.prototype._providerSetter=function(D){this.provider=D;this.computeIsBackedByEnterpriseGroup()};z.prototype._providerGroupNameSetter=function(D){this.providerGroupName=D;this.computeIsBackedByEnterpriseGroup()};z.prototype.leave=function(){var D=this,E=new k.default;h.default.request({url:this.url+"/leave"},{usePost:!0}).then(function(C){D.set("isMember",!1);E.resolve(C)});return E};z.prototype.join=function(){var D=this,E=new k.default;h.default.request({url:this.url+"/join"},{usePost:!0}).then(function(C){D.autoJoin&&
(D.set("belongsToGroup",!0),D.set("isMember",!0));E.resolve(C)},function(C){E.reject(C)});return E};z.prototype.getApplications=function(){var D=this,E=new k.default;h.default.request({url:this.url+"/applications"}).then(function(C){D.set("applications",C.applications);E.resolve(C.applications)},function(C){E.reject(C)});return E};z.prototype.groupContent=function(D,E){var C=this;void 0===D&&(D={});var y=D.q;y=void 0===y?"":y;var v=D.filter;v=void 0===v?"":v;var A=D.sortField;A=void 0===A?"modified":
A;var G=D.sortOrder;G=void 0===G?"desc":G;var F=D.num;F=void 0===F?12:F;var H=D.start;H=void 0===H?1:H;var L=this.portalUser,M=this.portal,Q=new k.default;E="".concat(this.groupContentUrl).concat(E?"/search":"");A="relevance"!==A?"\x26sortField\x3d".concat(A):"";D="string"===typeof D?D:"sortOrder\x3d".concat(G).concat(A,"\x26num\x3d").concat(F,"\x26start\x3d").concat(H).concat(y?"\x26q\x3d".concat(y):"").concat(v?"\x26filter\x3d".concat(v):"");h.default.request({url:"".concat(E,"?").concat(D)}).then(function(S){return(0,a.getAllItemsGroups)({response:S,
portalUser:L,url:M.url})}).then(function(S){return C.toPortalItems(S)}).then(function(S){return Q.resolve(S)},function(S){Q.reject(S)});return Q};z.prototype.search=function(D){var E=this,C=new k.default,y=this.portal.portalUrl+"search";D=l.__assign({q:"group:"+this.id,sortField:"modified",sortOrder:"desc",num:12,start:1},D||{});h.default.request({url:y,content:D}).then(function(v){return E.toPortalItems(v)}).then(function(v){return C.resolve(v)},function(v){C.reject(v)});return C};z.prototype.toPortalItems=
function(D){var E=this,C=new k.default;D.results&&(D.items=D.results,delete D.results);var y=D.items.map(function(v){return new e.default(l.__assign(l.__assign({},v),{portal:E.portal}))}).map(function(v){return m.default.setVerifiedInfo(v)});(0,r.default)(y).then(function(v){D.items=v;C.resolve(D)},function(v){return 0});return C};z.prototype.groupMembers=function(D){var E=this;D=D||{};var C=new k.default,y=(0,c.default)(D);D="".concat(this.url,"/userlist");y=l.__assign(l.__assign({},{sortField:"joined",
sortOrder:"desc",num:25,start:1}),y);h.default.request({url:D,content:y}).then(function(v){return E.toMembers(v)}).then(function(v){return C.resolve(v)},function(v){C.reject(v)});return C};z.prototype.toMembers=function(D){var E=this,C=new k.default,y=window.require("arcgisonline/pages/portal/PortalUser");D.users=D.users.map(function(v){return new y(l.__assign(l.__assign({},v),{portal:E.portal}))});C.resolve(D);return C};z.prototype.allGroupMembers=function(D){var E=this;D=D||{};var C=new k.default,
y=(0,c.default)(D);D="".concat(this.url,"/userlist");y=l.__assign(l.__assign({},{sortField:"joined",sortOrder:"desc",num:100,start:1}),y);d.default.fetchAllResources(D,y,"users").then(function(v){return E.toMembers({total:v.length,users:v})}).then(function(v){return C.resolve(v)},function(v){C.reject(v)});return C};z.prototype.allGroupMembersSerially=function(D){var E=this;D=D||{};var C=new k.default,y=(0,c.default)(D);D="".concat(this.url,"/userlist");y=l.__assign(l.__assign({},{sortField:"joined",
sortOrder:"desc",num:100,start:1}),y);d.default.fetchAllResourcesSerially(D,y,"users").then(function(v){return E.toMembers({total:v.length,users:v})}).then(function(v){return C.resolve(v)},function(v){C.reject(v)});return C};z.prototype.refreshGroupAdmins=function(){var D=this,E=new k.default,C="".concat(this.url,"/userlist");d.default.fetchAllResourcesSerially(C,{memberType:"admin",num:100},"users").then(function(y){D.admins=y;E.resolve(y)});return E};z.prototype.isAlreadyInGroup=function(D){return l.__awaiter(this,
void 0,void 0,function(){var E,C;return l.__generator(this,function(y){switch(y.label){case 0:if(!D||3>D.length)return[2,!1];E="".concat(this.url,"/userlist");return[4,d.default.fetchAllResourcesSerially(E,{name:D,num:100},"users")];case 1:return C=y.sent(),[2,C.some(function(v){return v.username===D})]}})})};z.prototype.itemCount=function(){var D,E=new k.default;this.search({num:1,q:"group:".concat(this.id," ").concat((null===(D=null===x.default||void 0===x.default?void 0:x.default.viewQueries)||
void 0===D?void 0:D.none)||"")}).then(function(C){return E.resolve(C&&C.total||0)});return E};z.prototype._isGroupAdmin=function(D){var E,C;D=D||this.portal.portalUser||{};var y=D.username,v=(null===(E=this.groupOwner)||void 0===E?void 0:E.orgId)||void 0;E=this._getAdmins();E=u.default.includes(E,y);v=D.orgId||v?D.orgId===v:!1;y=D.isOrgAdmin&&v;var A=(null===(C=D.userRole)||void 0===C?void 0:C.isCustom())&&v&&D.userRole.canUpdateOrgGroups();return E||y||A};z.prototype.isGroupOwnerOrgMember=function(){return this.portal.portalUser?
this.orgId&&this.portal.portalUser.orgId===this.orgId:!1};z.prototype._getAdmins=function(){var D;return(null!==(D=this.admins)&&void 0!==D?D:[]).map(function(E){return E.username})};z.prototype._canRemoveContent=function(D){var E,C=D||this.portal.portalUser||{},y=(null===(E=this.groupOwner)||void 0===E?void 0:E.username)||{};D=this._isGroupAdmin(D);C=C.username===y;return D||C};z.prototype._canAssignToThisGroup=function(D){var E,C;D=D||this.portal.portalUser||{};var y=(null===(E=this.groupOwner)||
void 0===E?void 0:E.orgId)||void 0;E=D.orgId||y?D.orgId===y:!1;y=D.isOrgAdmin&&E;var v=(null===(C=D.userRole)||void 0===C?void 0:C.isCustom())&&E&&D.userRole.canAssignUsersToOrgGroups();return(y||v)&&!this.isOwner};z.prototype._canChangeOwner=function(D){var E,C;D=D||this.portal.portalUser||{};var y=(null===(E=this.groupOwner)||void 0===E?void 0:E.orgId)||{};E=D.orgId||y?D.orgId===y:!1;y=D.isOrgAdmin&&E;var v=(null===(C=D.userRole)||void 0===C?void 0:C.isCustom())&&E&&D.userRole.canReassignOrgGroups();
return!(!y&&!v)};z.prototype._canManageMembershipRequests=function(D){var E;D=D||this.portal.portalUser||{};var C=D.username,y=(null===(E=this.groupOwner)||void 0===E?void 0:E.orgId)||{};E=this._getAdmins();y=D.orgId||y?D.orgId===y:!1;C=u.default.includes(E,C);D=D.isOrgAdmin&&y;return!!(this.isOwner||C||D)};z.prototype._canInviteOthers=function(D){var E,C;D=D||this.portal.portalUser||{};var y=D.username,v=(null===(E=this.groupOwner)||void 0===E?void 0:E.orgId)||{};E=this._getAdmins();var A=D.orgId||
v?D.orgId===v:!1;v=D.isOrgAdmin&&A;var G=(null===(C=D.userRole)||void 0===C?void 0:C.isCustom())&&A&&D.userRole.canAssignUsersToOrgGroups();C=u.default.includes(E,y);return!!(this.isOwner||C||v||G)};z.prototype._canJoinGroup=function(D){var E,C,y;D=D||this.portal.portalUser||{};var v=(null===(E=this.groupOwner)||void 0===E?void 0:E.orgId)||{};E=D.orgId||v?D.orgId===v:!1;v=!this.isInvitationOnly;var A=!this.belongsToGroup,G=null===(C=D.userRole)||void 0===C?void 0:C.canJoinOrgGroup();C=!D.orgId||(null===
(y=D.userRole)||void 0===y?void 0:y.canJoinNonOrgGroup());return A&&v?E?G:G||C:!1};z.prototype._canDeleteGroup=function(D,E){var C,y;D=D||this.portal.portalUser||{};var v=D.username,A=(null===(C=this.groupOwner)||void 0===C?void 0:C.orgId)||{};C=this._getAdmins();C=u.default.includes(C,v);D=(D.orgId||A?D.orgId===A:!1)&&(null===(y=D.userRole)||void 0===y?void 0:y.canDeleteOrgGroups());return E&&E.isAdminView?E.canDelete:!!(this.isOwner||C||D)};z.prototype.getCategories=function(){var D=this,E=new k.default,
C,y,v,A;h.default.request({url:this.url+"/categorySchema"}).then(function(G){C=G.categorySchema||[];D.categorySchema=[];C.forEach(function(F){D._isReferencingCategorySet(F)?(y=-1<F.source.indexOf("portal.regions"),v=-1<F.source.indexOf("contentCategorySetsGroupQuery.LivingAtlas")):D.categorySchema.push(F)});y||v?(0,t.default)(D.portal,"LivingAtlas",y).then(function(F){A=(null===F||void 0===F?0:F.length)?F.shift():{};D.categorySchema=g.default.mixin(A.categorySchema,{isLivingAtlas:!0});E.resolve(D.categorySchema)}):
E.resolve(D.categorySchema)},function(G){E.reject(G)});return E};z.prototype.allowExternalMembers=function(){return"org"!==this.membershipAccess};z.prototype._isReferencingCategorySet=function(D){var E,C;return-1<(null===(E=D.source)||void 0===E?void 0:E.indexOf("portal.regions"))||-1<(null===(C=D.source)||void 0===C?void 0:C.indexOf("contentCategorySetsGroupQuery.LivingAtlas"))};z.prototype.computeIsOpenDataEnabled=function(){this.isOpenDataEnabled=this.portal&&!this.portal.isPortal&&!0===this.isOpenData};
z.prototype.computeIsBackedByEnterpriseGroup=function(){this.isBackedByEnterpriseGroup="enterprise"===this.provider&&!!this.providerGroupName};z.prototype.isBackedByOIDCGroup=function(){var D;return(null===(D=this.provider)||void 0===D?void 0:D.includes("oidc_"))&&!!this.providerGroupName};return z=l.__decorate([(0,n.default)(w.PortalGroup,b.default)],z)}()})},"arcgisonline/pages/portal/PortalItem":function(){define("require exports tslib ../pageUtil ../getThumbnail ./CommentsUtil ../item/_Info ../utils/arrays ../utils/item ../utils/socialMedia ../../sharing/util ../../esriGeowConfig ../../tsutils/declareDecorator dojo/Deferred dojo/i18n!../../nls/arcgisonline dojo/_base/lang dojo/promise/all dojo/Stateful esri/lang esri/arcgis/Portal ../utils/url".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);n=l.__importDefault(n);r=l.__importDefault(r);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);w=l.__importDefault(w);x=l.__importDefault(x);return function(){function E(y){var v,A,G,F,H,L,M;this.portalUser=null!==(A=null===
(v=this.portal)||void 0===v?void 0:v.getPortalUser())&&void 0!==A?A:null;this.title=null!==(G=this.title)&&void 0!==G?G:"";this.snippet=null!==(F=this.snippet)&&void 0!==F?F:"";this.type=this.type||"Unknown";this.displayName=null!==(H=this.displayName)&&void 0!==H?H:"";this.commentsInfo={sortField:"created",sortOrder:"desc",start:0,num:5,comments:[],item:this};this.screenshots=(null===(L=this.screenshots)||void 0===L?0:L.length)?this.screenshots:null;this.thumbnailUrl="Image"!==this.type||this.thumbnail?
this.thumbnailUrl:this.itemDataUrl;this.sourceLabel=this._getSourceLabel();this.scoreCompleteness=this.setScoreCompleteness(this.scoreCompleteness);this.url=this._getAdjustedUrl();this._setAdminFlags();this.setTypeKeywordFlags();this.tags instanceof Array&&-1<this.tags.length&&(this.tags=this.tags.join(","));this.size=this._getAdjustedSize();g.default.mixin(this,{extent:e.default.extentToString(this.extent)});g.default.mixin(this,t.default.getItemInfo(this));(null===(M=this.portal)||void 0===M?0:
M.isPortal)&&"Web Mapping Application"===this.type&&-1<this.typeKeywords.indexOf("Story Map")&&(this.isRetiredStoryMap=!0);this.checkIsRetiredApp()}var C=E;E.prototype.postscript=function(){};E.prototype.getOwnerProfile=function(y,v){var A=this,G=this.owner,F=new r.default;this.ownerProfile?F.resolve(this.ownerProfile):(this.isOwner?(G=new r.default,G.resolve(this.portalUser)):G=this.portal.getUserProfile(G),G.then(function(H){A.isOwner||H.orgId===A.portal.id||(v=y=!1);(0,b.default)({folders:A.isAdmin&&
v?H.getFolders():null,tags:A.isAdmin&&y?H.getTags():null,contentTags:A.isAdmin&&y?H.getContentTags():null}).then(function(L){A.ownerProfile=H;A.itemOwner=H;A._setAdminFlags();F.resolve(H)},function(L){A.ownerProfile=H;A.itemOwner=H;A._setAdminFlags();F.resolve(H)})}));return F};E.prototype.getComments=function(y,v){var A=this,G=new r.default;this.commentsEnabled&&this.numComments?u.default.fetchComments(y,v,this.commentsInfo).then(function(F){A.commentsInfo=g.default.mixin(A.commentsInfo,F.commentsInfo);
A.comments=A.commentsInfo.comments;G.resolve(A.comments)}):G.resolve([]);return G};E.prototype.getRelatedItems=function(y,v){var A=this,G={WMA2Code:1,MobileApp2Code:1},F,H,L=new r.default;this.relatedItems=this.relatedItems||{};x.default.isDefined(this.relatedItems[y+"_"+v])?L.resolve(this.relatedItems[y+"_"+v].slice(0)):a.default.request({url:this.itemUrl+"/relatedItems",content:{relationshipType:y,direction:v}}).then(function(M){F=(null===M||void 0===M?0:M.relatedItems)?M.relatedItems:null!==M&&
void 0!==M?M:[];F=F.map(function(Q){return new C(l.__assign(l.__assign({},Q),{portal:A.portal}))});H=y in G?(F||[]).shift():F||[];A.relatedItems[y+"_"+v]=H;L.resolve((null===H||void 0===H?0:H.length)?H.slice(0):H)},function(M){L.reject(M)});return L};E.prototype.getSourceData=function(){var y=this,v=new r.default,A="Scene Service"===this.type||"Map Service"===this.type||"WFS"===this.type||"OGCFeatureServer"===this.type||"Vector Tile Service"===this.type||"3DTiles Service"===this.type,G="Map Service"===
this.type||"Vector Tile Service"===this.type,F=A?"Service2Service":this.isRouteLayer?"Service2Route":"Service2Data",H="Service2Service"===F||"Service2Route"===F?"reverse":"forward",L;-1<this.typeKeywords.indexOf("Bulk Published Service")&&(F="DataStore2BPService",H="reverse");this.sourceData?v.resolve(this.sourceData):this.getRelatedItems(F,H).then(function(M){L=(null===M||void 0===M?0:M.length)?M.shift():null;A?G&&!y._isView(L)||!L?y.getRelatedItems("Service2Data","forward").then(function(Q){Q=(null===
Q||void 0===Q?0:Q.length)?Q.shift():L;v.resolve(Q)}):v.resolve(L):v.resolve(L)},function(M){v.reject(M)});return v};E.prototype._isView=function(y){return y&&d.default.includes(y.typeKeywords,"View Service")||!1};E.prototype.getResultData=function(){var y=new r.default,v=this.isHostedService?"Service2Service":"Service2Data";this.getRelatedItems(v,"Service2Service"===v&&"Feed"!==this.type?"forward":"reverse").then(function(A){return y.resolve((null===A||void 0===A?0:A.length)?A:null)});return y};E.prototype.getThumbnail=
function(y){var v=this,A=new r.default;this._fetchingThumbnail?setTimeout(function(){v.getThumbnail(!1).then(function(G){v._fetchingThumbnail=!1;A.resolve(G)},function(G){v._fetchingThumbnail=!1;A.resolve(void 0)})},50):(this._fetchingThumbnail=!0,(0,c.default)(this,y).then(function(G){v._fetchingThumbnail=!1;G.dataURL?v._updateThumbnail(G).then(function(F){v.set("thumbnailUrl",F);A.resolve(F)},function(F){A.reject()}):(v.set("thumbnailUrl",G),A.resolve(G))},function(G){v._fetchingThumbnail=!1;A.resolve()}));
return A};E.prototype.getData=function(){var y=new r.default;a.default.request({url:this.itemDataUrl}).then(function(v){return y.resolve(v)});return y};E.prototype.canBeDeleted=function(){var y=new r.default;a.default.request({url:this.userItemUrl+"/canDelete"}).then(function(v){return y.resolve(v)},function(v){return y.resolve(v)});return y};E.prototype.resetTypeKeywordInfo=function(){this.setTypeKeywordFlags();this.set("displayName",this._getDisplayName())};E.prototype.setTypeKeywordFlags=function(){var y,
v,A,G=this.typeKeywords;this.isViewOnly=d.default.includes(G,"useOnly");this.isOfflineEnabled=d.default.includes(G,"Offline");this.isHostedService=d.default.includes(G,"Hosted Service")&&"Insights Workbook"!==this.type&&"Insights Data Engineering Workbook"!==this.type&&"Insights Page"!==this.type;this.isServiceProxy=d.default.includes(G,"Service Proxy");this.isAppProxy=d.default.includes(G,"App Proxy");this.isAppCollector=d.default.includes(["Web Map","Web Scene"],this.type);this.useInCollector=d.default.includes(G,
"Collector");this.disableInCollector=d.default.includes(G,"CollectorDisabled");this.isFeatureCollection="Feature Collection"===this.type||d.default.includes(G,"Feature Collection");this.isMapNotes="Feature Collection"===this.type&&d.default.includes(G,"Map Notes");this.isTable=d.default.includes(G,"Table");this.hasMetadata=d.default.includes(G,"Metadata");this.isSDS=!this.portal.isPortal||this.portal.isPortal&&d.default.includes(G,"providerSDS");this.isBDS=this.portal.isPortal&&d.default.includes(G,
"providerBDS");this.isRegisteredApp=d.default.includes(G,"Registered App");this.hasGeocodeReviewTable=d.default.includes(G,"Involved Lookup");this.isHostedTemplate=d.default.includes(G,"configurableApp")||d.default.includes(G,"Configurable")&&d.default.includes(G,"createAppWithoutMap");this.isPremium=-1<this.owner.toLowerCase().indexOf("esri")&&this.isPremiumContent;this.requiresCredits=d.default.includes(this.typeKeywords,"Requires Credits");this.typeInfo=g.default.mixin({},this.getTypeInfo(),{premiumTitle:k.default.common[(this.requiresCredits?
"premiumcontentcreditstitle":"premiumcontenttitle")+(this.portal.isPortal?"portal":"")],premiumLabel:k.default.common[this.requiresCredits?"premiumcontent":"subscriptioncontent"]});this.hasKMLItemData="KML"===this.type&&-1<(null===(y=this.url)||void 0===y?void 0:y.indexOf("rest/content/items/"+this.id+"/data"));this.isDataView=d.default.includes(G,"View Service");this.canDelete=this.isOwner||this.isAdmin||this.isOwnedByMyOrg&&(null===(v=this.portalUser)||void 0===v?void 0:v.userRole.canDeleteOrgItems())||
!1;this.isLocatorView=this.isServiceProxy&&d.default.includes(G,"Geocoding filter");this.isRouteLayer=d.default.includes(G,"Route Layer");this.isSpatiotemporal=d.default.includes(G,"Spatiotemporal");this.isMarkup=d.default.includes(G,"Markup");this.isMultiServicesView=d.default.includes(G,"Multi Services View");this.isPhotoLocations="Image Collection"===this.type&&d.default.includes(G,"Photo locations");this.isLocationTrackingView=(this.isLocationTrackingService="Feature Service"===this.type&&d.default.includes(G,
"Location Tracking Service"))&&d.default.includes(G,"Location Tracking View");this.canShowSocialMediaLinks=m.default.canShowSocialMediaLinksOnItems(this.portal);this.isVectorTileService=d.default.includes(G,"Vector Tile Service");this.isUtilityNetwork="Feature Service"===this.type&&d.default.includes(this.typeKeywords,"UtilityNetwork");y=x.default.isDefined(h.default.newMapViewerEnabled)&&!0===h.default.newMapViewerEnabled;v=!h.default.self.portalProperties||!x.default.isDefined(h.default.self.portalProperties.newMapViewerEnabled)||
!0===h.default.self.portalProperties.newMapViewerEnabled;y&&v&&(this.canOpenInNewMapViewer=this._canOpenInNewMapViewer());this.userItemUrl=null===(A=this.itemUrl)||void 0===A?void 0:A.replace("/content/","/content/users/"+this.owner+(this.folderId?"/"+this.folderId:"")+"/")};E.prototype.addBlockClasses=function(y){var v=this,A,G,F,H;this.blockedApps||(this.blockedApps=null===(A=this.portal)||void 0===A?void 0:A.blockedApps);if(null!==(G=this.blockedApps)&&void 0!==G&&G.length){-1<this.blockedApps.indexOf("survey123")&&
y.some(function(L){return-1<["is-surveyForm","is-surveyFormBrowser"].indexOf(L)})&&-1===y.indexOf("survey-blocked")&&y.push("survey-blocked");if(-1<this.blockedApps.indexOf("webappbuilder")){y.some(function(L){return"can-edit-wab"===L})&&-1===y.indexOf("wab-blocked")&&y.push("wab-blocked");if(["Web AppBuilder","WABTemplate"].some(function(L){return v.typeKeywords.some(function(M){return M===L})})||-1<(null===(F=this.url)||void 0===F?void 0:F.indexOf("webappviewer")))A=y.indexOf("has-url"),-1<A&&y.splice(A,
1);-1<(null===(H=this.configureUrl)||void 0===H?void 0:H.indexOf("webappviewer"))&&(y=this.privileges.indexOf("can-configure"),-1<y&&this.privileges.splice(y,1))}"StoryMap"===this.type&&this.origin&&(y=this.privileges.indexOf("can-configure"),-1<y&&this.privileges.splice(y,1))}};E.prototype.removeBlockedTypes=function(y){var v=this,A;if((null===y||void 0===y?0:y.length)||(null===(A=this.blockedApps)||void 0===A?0:A.length)){(null===y||void 0===y?0:y.length)?this.blockedApps=y:y=this.blockedApps;var G=
{arcgis360vr:{types:["is-vrExperience"],blockedType:"vrExperience-blocked",openIn:["vrExperienceViewer"]},arcgisInsights:{types:["is-insights"],blockedType:"insights-blocked",texts:[k.default.itemLinks.openInsights],openIn:["insightsViewer"]},arcgisstorymaps:{types:["is-published-storymap","is-editable-storymap"],blockedType:"storymap-blocked",openIn:["storyMapViewer","configureStoryMap"]},datapipelines:{types:["is-data-pipeline"],blockedType:"data-pipeline-blocked",openIn:["dataPipeline"],texts:[k.default.itemLinks.openDataPipelines]},
deeplearningstudio:{types:["is-geoAIStudioProject"],blockedType:"deep-learning-blocked",openIn:["geoAIStudioUrlViewer"],texts:[k.default.itemLinks.openGeoAIStudio]},experienceBuilder:{types:["is-published-webExperience","is-published-webExperienceTemplate"],blockedType:"exp-builder-blocked",openIn:["webExperienceViewer"]},fieldmaps:{types:["is-fieldMaps"],blockedType:"fieldMaps-blocked",openIn:["fieldMaps"]},HubforArcGIS:{types:["is-hubInitiative","is-hubEvent","is-hubProject"],blockedType:"hub-blocked",
texts:[k.default.itemLinks.viewInHub,k.default.itemLinks.openHubInitiative,k.default.itemLinks.editHubProject],openIn:["hubEventViewer","hubInitiative","hubProject"]},opsdashboard:{types:["is-dashboard"],blockedType:"dashboard-blocked",texts:[k.default.itemLinks.dashboardView],openIn:["dashboard"]},orthomaker:{types:["is-orthoMaker"],blockedType:"ortho-maker-blocked",texts:[k.default.itemLinks.openOrthoMaker],openIn:["orthoMaker"]},survey123:{types:["is-surveyForm","is-surveyFormBrowser"],blockedType:"survey-blocked",
openIn:["surveyViewer"],texts:[k.default.itemLinks.openSurvey123]},webappbuilder:{types:["can-edit-wab"],blockedType:"wab-blocked"},Workforce:{types:["is-workforceProject"],blockedType:"workforce-blocked",texts:[k.default.itemLinks.openWorkforce],openIn:["workforceViewer"]}};Object.keys(G).forEach(function(F){var H;if(-1<y.indexOf(F)){var L=G[F],M=L.types,Q=L.blockedType,S=L.texts;L=L.openIn;"arcgisstorymaps"===F&&"StoryMap"===v.type&&(v.defaultOpenText=void 0);M&&(v.types.some(function(I){return M.some(function(P){return P===
I})})||(null===(H=v.privileges)||void 0===H?0:H.some(function(I){return M.some(function(P){return P===I})})))&&-1===v.types.indexOf(Q)&&(v.types=l.__spreadArray(l.__spreadArray([],v.types,!0),[Q],!1));if(null===S||void 0===S?0:S.some(function(I){return I===v.defaultOpenText}))v.defaultOpenText=v.defaultOpenIcon=void 0;L&&L.forEach(function(I){I=v.openIn.indexOf(I);-1<I&&v.openIn.splice(I,1)})}});if(-1<y.indexOf("webappbuilder")&&-1<this.typeKeywords.indexOf("Web AppBuilder")||-1<y.indexOf("HubforArcGIS")&&
q.default.isHubType(this.type))this.defaultOpenText=void 0,this.openIn=[]}};E.prototype.isVelocity=function(){return-1<this.typeKeywords.indexOf("IoTFeatureLayer")};E.prototype._getAdjustedSize=function(){var y=this.isHostedService&&"Feature Service"===this.type&&0<=this.subInfo,v=this.isHostedService&&"Image Service"===this.type&&!d.default.includes(this.typeKeywords,"Tiled Imagery Layer")&&!d.default.includes(this.typeKeywords,"Elevation 3D Layer")&&0<=this.subInfo;return this.size&&(y||v)?this.size-
this.subInfo:this.size};E.prototype._canOpenInNewMapViewer=function(){var y,v=this.type,A=this.isRouteLayer,G=t.default[v],F={"Feature Service":1,"Map Service":1,"Stream Service":1,Feed:1,"Vector Tile Service":1,"Image Service":1,"Imagery Layer":1,KML:1,OGCFeatureServer:1,WFS:1,WMS:1,WMTS:1,"Media Layer":1,"Group Layer":1};return-1<(null===(y=null===G||void 0===G?void 0:G.openIn)||void 0===y?void 0:y.indexOf("mapViewer"))?"Web Map"===v?!0:A||v in F&&this._canOpenServiceInNewMapViewer()?!0:!1:!1};
E.prototype._canOpenServiceInNewMapViewer=function(){var y=this.type,v=this.typeKeywords,A="Map Service;Vector Tile Service;Imagery Layer;Image Service;Stream Service;Feed;Feature Service;KML;WFS;WMS;WMTS;Media Layer;Group Layer;OGCFeatureServer".split(";");return this.isTable||A.includes(y)||v.includes("Hosted Service")||this.isRouteLayer};E.prototype._getAdjustedUrl=function(){var y;if(this.url){var v=RegExp("^(?:[a-z]+:)?//","i").test(this.url)||-1!==this.url.indexOf("../");if(!this.portal.isPortal){var A=
void 0;try{A=a.default.parseUrl(this.url)}catch(G){A=this.url}if("public"!==this.access&&a.default.isHostedTemplateItem(this.url))return this.url.replace(A.host,window.location.hostname);if("KML"===this.type)return this.url.includes("/sharing/rest/content/items/")?(null===(y=this.itemDataUrl)||void 0===y?void 0:y.replace(A.host,this.portal.portalHostname),this.url.replace(A.host,this.portal.portalHostname)):this.url}return this.portal.isPortal&&!v&&(y=a.default.getHomeAppContext(),-1===this.url.indexOf(y))?
y+this.url:(0,D.sanitizeServerURL)(this.url)}return null};E.prototype._getSourceLabel=function(){var y=this.type,v=this.typeKeywords,A=d.default.includes(v,"Service")||"Feature Collection"===y?k.default.itemProperties.source+" ":"";return"Web Scene"===y?d.default.includes(v,"ViewingMode-Local")?k.default.common.localWebScene:k.default.common.globalWebScene:"Web Mapping Application"===y&&(null===v||void 0===v?0:v.includes("configurableApp"))?k.default.items.instantApp:A?A+y:y};E.prototype._setAdminFlags=
function(){var y,v,A,G,F;this.isOwnedByMyOrg=this.isOwner||(null===(y=this.itemOwner)||void 0===y?void 0:y.orgId)===this.portal.id||this.portalUser&&(null===(v=this.itemOwner)||void 0===v?void 0:v.orgId)&&this.portal&&this.portalUser.orgId===this.portal.id||!1;y=this.isAdminView||(null===(G=null===(A=this.portal)||void 0===A?void 0:A.portalUser)||void 0===G?void 0:G.isOrgAdmin)&&this.isOwnedByMyOrg;this.isOwner=this.portalUser&&this.owner===this.portalUser.username;this.canUpdate=(this.isAdmin=this.portalUser?
this.isOwner||q.default.isItemAdmin(this,this.portal)||y:!1)||this.itemControl&&-1<this.itemControl.indexOf("update");this.canDelete=this.isOwner||this.isAdmin||this.isOwnedByMyOrg&&(null===(F=this.portalUser)||void 0===F?void 0:F.userRole.canDeleteOrgItems())||!1};E.prototype._setContentStatusTo=function(y){return a.default.request({url:this.itemUrl+"/setContentStatus",content:{status:y,clearEmptyFields:!y}},{usePost:!0})};E.prototype.setScoreCompleteness=function(y){y=parseInt(y,10);return this.scoreCompleteness=
10*Math.ceil(y/10)};E.prototype._updateThumbnail=function(y){var v=this,A=new r.default,G=this.itemUrl,F;a.default.request({url:this.userItemUrl+"/updateThumbnail",content:{data:y.dataURL,filename:"ago_downloaded.png"}},{usePost:!0}).then(function(){a.default.request({url:G}).then(function(H){F=new C(l.__assign(l.__assign({},H),{portal:v.portal}));A.resolve(F.thumbnailUrl)})});return A};E.prototype.isNotebookWebTool=function(){return"Tool"===this.displayName&&this.typeKeywords.includes("Notebook Web Tool")};
E.prototype.checkIsRetiredApp=function(){function y(G){return A.some(function(F){var H=-1<F.indexOf(".html");F="/apps/".concat(F).concat(H?"":"/");return-1<G.indexOf(F)})}var v,A="3DInsetMap 3DScene 3DViz AttachmentViewer CapacityAnalysis Compare/storytelling_compare Compare/storytelling_tabbed Compare/storytelling_sidepanel Compare/Multiviewer Compare/Search Compare/Configure Compare/SideBySideViewer_Configure Compare3d CompareAnalysis CompareMaps Directions Edit Editor Elevations ElevationsProfile Embed Filter FilterGallery GeoList GeoTour HeaderFooter Identify ImageInterpretation ImageryViewer ImpactSummary InformationLookup InteractiveFilter InteractiveLegend LayerShowcase Legend LiveMaps LocalPerspective MapAndAppGallery MapCarousel MapTools Media MinimalGallery Minimalist Nearby OnePane Panels PanelsLegend Profile PublicGallery PublicInformation ServiceLookup SimpleMapViewer SimpleViewer SocialMedia Solutions/s2.html?app\x3dapps2/FindEditFilter Solutions/s2.html?app\x3dapps2/Finder StorytellingTextLegend StoryMapBasic Styler SummaryViewer Time TimeAware TwoPane Viewer ZoneLookup".split(" ");
this.isRetiredApp=(null===(v=this.portal)||void 0===v?void 0:v.isPortal)&&"Web Mapping Application"===this.type&&this.url&&y(this.url)};return E=C=l.__decorate([(0,n.default)(z.PortalItem,w.default)],E)}()})},"arcgisonline/pages/getThumbnail":function(){define("require exports tslib dojo/Deferred ../map/core/buildExportCall ../map/thumbnail/buildThumbnailURLFromKMLItem ../map/thumbnail/buildThumbnailURLFromFSItem ../map/thumbnail/buildThumbnailURLFromImageryItem ../map/thumbnail/createHiddenMap ../sharing/util ./utils/arrays".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a){function h(r,k,g){var b=new e.default;r=(0,c.default)(r,k,"4326",null,"800,532",null,"json",null,g||null);m.default.request({url:r},{addToken:!1}).then(function(w){b.resolve(w)},function(){b.resolve(m.default.getAbsoluteUrl("images/transparent.gif"))});return b}function n(r){return 2===(null===r||void 0===r?void 0:r.length)&&2===r[0].length&&2===r[1].length?Math.round(1E3*r[0][0])/1E3+","+Math.round(1E3*r[0][1])/1E3+","+Math.round(1E3*r[1][0])/1E3+","+Math.round(1E3*
r[1][1])/1E3:null}Object.defineProperty(B,"__esModule",{value:!0});e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);B.default=function(r,k){var g,b,w,x=new e.default,z=r.portal,D=z.getPortalUser(),E=(null===(g=null===D||void 0===D?void 0:D.credential)||void 0===g?0:g.token)?"?token\x3d".concat(D.credential.token):"",C=m.default.getAbsoluteUrl("images/transparent.gif"),
y=m.default.getAbsoluteUrl("images/arcgis-transparent-background-div.png"),v=m.default.getStaticImagesUrl();g=r.itemUrl||r.url;D=r.itemDataUrl;var A=r.serviceInfo||{},G=r.itemData||{},F=r.type.toLowerCase(),H=r.typeKeywords||[],L=r.thumbnail!==C&&(!z.isPortal&&-1===(null===(b=r.thumbnail)||void 0===b?void 0:b.indexOf("thumbnail/ago_downloaded."))||z.isPortal&&-1===(null===(w=r.thumbnail)||void 0===w?void 0:w.indexOf("Utilities/PrintingTools")));b=a.default.includes(H,"Tiled Imagery");w="image service"===
F&&!b;k=k&&("Feature Service"===r.type&&!L||"Vector Tile Service"===r.type&&!L);z=Array.isArray(r.extent)?n(r.extent):r.extent||"-180,-90,180,90";var M;r||x.resolve(y);if(r.thumbnail&&!k||"Image"===r.type||r.thumbnailUrl&&!k)x.resolve(r.thumbnail&&!r.thumbnail.startsWith("http")?"".concat(g,"/info/").concat(r.thumbnail).concat(E):r.thumbnailUrl);else if(r.isAdmin&&("image service"===F&&!b||"map service"===F))"image service"===F?(0,d.default)(r,[800,532]).then(function(S){x.resolve(S.dataURL?S:S.url||
y)},function(){return x.resolve(y)}):r.isHostedService?r.getSourceData().then(function(S){(M=null===S||void 0===S?void 0:S.thumbnailUrl)?(r.thumbnail=M,x.resolve(M)):(r.thumbnail="".concat(v,"/desktopapp.png"),x.resolve(r.thumbnail))},function(){r.thumbnail="".concat(v,"/desktopapp.png");x.resolve(r.thumbnail)}):h(g,z,A).then(function(S){x.resolve(S&&S.href||y)});else if(r.isLocationTrackingService)r.thumbnail="".concat(v,"/locationtrackingservice.png"),x.resolve(r.thumbnail);else if(r.isAdmin&&"feature service"===
F)r.isTable?(r.thumbnail="".concat(v,"/desktopapp.png"),x.resolve(r.thumbnail)):(0,t.default)(r,null,G.layers).then(function(S){x.resolve(S)},function(){x.resolve(C)});else if("vector tile service"===F){E=[[-180,-90],[180,90]];if("string"===typeof r.extent){var Q=r.extent.split(",");E=[[parseFloat(Q[0]),parseFloat(Q[1])],[parseFloat(Q[2]),parseFloat(Q[3])]]}else 0<(null===(Q=r.extent)||void 0===Q?void 0:Q.length)&&(E=r.extent);(0,q.default)({operationalLayers:[],baseMap:{baseMapLayers:[{id:r.id,type:"VectorTileLayer",
layerType:"VectorTileLayer",title:r.title,styleUrl:"".concat(r.itemUrl,"/resources/styles/root.json"),visibility:!0,opacity:1}],title:"Topographic"},spatialReference:{wkid:102100,latestWkid:3857},authoringApp:"WebMapViewer",authoringAppVersion:"5.3",version:"2.10"},E,function(S){(S=S.layerIds.map(S.getLayer.bind(S)).shift())?S.takeScreenshot({format:"png",width:800,height:532}).then(function(I){(null===I||void 0===I?0:I.dataURL)?x.resolve(I):x.resolve(C)},function(){x.resolve(C)}):x.resolve(C)},function(){return x.resolve(C)})}else r.isAdmin&&
"kml"===F?(0,u.default)(r).then(function(S){return x.resolve(S)}):"web mapping application"===F?x.resolve("".concat(v,"/webapp.png")):"mobile application"===F?x.resolve("".concat(v,"/mobileapp.png")):"image"===F?(Q=2097134<r.size?m.default.relativeToExplicitUrl("js/arcgisonline/sharing/dijit/css/images/image-thumb.png"):D,x.resolve(Q)):"workforce project"===F?x.resolve("".concat(v,"/workforceproject.png")):"hub initiative"===F?x.resolve("".concat(v,"/hubinitiative.png")):"hub page"===F?x.resolve("".concat(v,
"/hubpage.png")):"hub site application"===F?x.resolve("".concat(v,"/hubsite.png")):"hub event"===F?x.resolve("".concat(v,"/hubevent.png")):"hub project"===F?x.resolve("".concat(v,"/hubproject.png")):"dashboard"===F?(Q=a.default.includes(H,"ArcGIS Dashboards"),x.resolve("".concat(v).concat(Q?"/dashboards.png":"/opsdashboard.png"))):"geoprocessing service"===F?H.includes("Notebook Web Tool")?x.resolve("".concat(v,"/notebookwebtool.png")):x.resolve("".concat(v,"/webtool.png")):"web scene"===F||"scene service"===
F?x.resolve("".concat(v,"/scene.png")):"ortho mapping project"===F?x.resolve("".concat(v,"/orthomappingproject.png")):"ortho mapping template"===F?x.resolve("".concat(v,"/orthomappingtemplate.png")):"insights theme"===F?x.resolve("".concat(v,"/insightstheme.png")):"insights workbook package"===F?x.resolve("".concat(v,"/insightsworkbookpackage.png")):"solution"===F?x.resolve("".concat(v,"/solution.png")):"mobile scene package"===F?x.resolve("".concat(v,"/mobilescenepackage.png")):"deep learning package"===
F?x.resolve("".concat(v,"/deeplearningpackage.png")):"big data analytic"===F?x.resolve("".concat(v,"/bigdataanalytic.png")):"real time analytic"===F?x.resolve("".concat(v,"/realtimeanalytic.png")):"feed"===F?x.resolve("".concat(v,"/feed.png")):"excalibur imagery project"===F?x.resolve("".concat(v,"/excaliburimageryproject.png")):"notebook"===F?x.resolve(m.default.relativeToExplicitUrl("/js/arcgisonline/css/images/notebook-thumb.png")):"storymap"===F?(Q=a.default.includes(H,"storymapcollection")?"storymapcollection.png":
"storymap.png",x.resolve("".concat(v,"/").concat(Q))):"survey123 add in"===F?x.resolve("".concat(v,"/survey123addin.png")):"mission"===F?x.resolve("".concat(v,"/mission.png")):"mission template"===F?x.resolve("".concat(v,"/missiontemplate.png")):"quickcapture project"===F?x.resolve("".concat(v,"/quickcaptureproject.png")):"pro report"===F?x.resolve("".concat(v,"/proreport.png")):"pro package"===F?x.resolve("".concat(v,"/propackage.png")):"pro report template"===F?x.resolve("".concat(v,"/proreporttemplate.png")):
"urban model"===F?x.resolve("".concat(v,"/urbanmodel.png")):"web experience"===F?x.resolve("".concat(v,"/webexperience.png")):"web experience template"===F?x.resolve("".concat(v,"/webexperiencetemplate.png")):"experience builder widget"===F?x.resolve("".concat(v,"/experiencebuilderwidget.png")):"experience builder widget package"===F?x.resolve("".concat(v,"/experiencebuilderwidgetpackage.png")):"workflow"===F?x.resolve("".concat(v,"/workflow.png")):"insights script"===F?x.resolve("".concat(v,"/insightsscript.png")):
"kernel gateway connection"===F?x.resolve("".concat(v,"/kernelgatewayconnection.png")):"hub initiative template"===F?x.resolve("".concat(v,"/hubinitiativetemplate.png")):b?x.resolve("".concat(v,"/tiledimagerylayer.png")):w?x.resolve("".concat(v,"/imagerylayer.png")):"mission report"===F?x.resolve("".concat(v,"/missionreport.png")):"administrative report"===F?x.resolve("".concat(v,"/administrativereport.png")):"storymap theme"===F?x.resolve("".concat(v,"/storymaptheme.png")):"knowledge graph"===F?
x.resolve("".concat(v,"/knowledgegraph.png")):"knowledge studio project"===F?x.resolve("".concat(v,"/knowledgestudio.png")):"earth configuration"===F?x.resolve("".concat(v,"/earthconfiguration.png")):"raster function template"===F?x.resolve("".concat(v,"/rasterfunctiontemplate.png")):"link chart"===F?x.resolve("".concat(v,"/linkchart.png")):"investigation"===F?x.resolve("".concat(v,"/investigation.png")):"apache parquet"===F?x.resolve("".concat(v,"/apacheparquet.png")):"video service"===F?x.resolve("".concat(v,
"/mediaservice.png")):"geodata service"===F?x.resolve("".concat(v,"/geodataservice.png")):"notebook code snippets"===F||"notebook code snippet library"===F?x.resolve("".concat(v,"/notebookcodesnippets.png")):"suitability model"===F?x.resolve("".concat(v,"/suitabilitymodel.png")):"esri classifier definition"===F?x.resolve("".concat(v,"/classifierdefinition.png")):"deep learning studio project"===F?x.resolve("".concat(v,"/deeplearningstudioproject.png")):"esri classification schema"===F?x.resolve("".concat(v,
"/classificationschema.png")):"insights data engineering workbook"===F?x.resolve("".concat(v,"/dataengineeringworkbook.png")):"insights data engineering model"===F?x.resolve("".concat(v,"/dataengineeringmodel.png")):"discussion"===F?x.resolve("".concat(v,"/discussion.png")):"api key"===F?x.resolve("".concat(v,"/apikey.png")):"data pipeline"===F?x.resolve("".concat(v,"/datapipeline.png")):x.resolve("".concat(v,"/desktopapp.png"));return x}})},"arcgisonline/map/core/buildExportCall":function(){define(["require",
"exports"],function(f,B){return function(l,e,c,u,t,d,q,m,a){var h;if(!m&&-1<l.indexOf("/MapServer/")){m=void 0;d=l.indexOf("/MapServer/");var n=l.indexOf("?");-1<n?(m=l.substring(d+11,n),l="".concat(l.substring(0,d+10)).concat(l.substring(n))):(m=l.substring(d+11),l=l.substring(0,d+10))}n=-1<l.indexOf("/MapServer");!n&&a&&(n=a.capabilities?-1<a.capabilities.toLowerCase().indexOf("map"):a.supportedImageFormatTypes);d=l.indexOf("?");if(-1===d)if(n)l+="/export?";else{if("undefined"!==typeof a.currentVersion&&
10.1<=a.currentVersion)return l+"/info/thumbnail";l+="/exportImage?"}else if(n)l="".concat(l.substring(0,d),"/export").concat(l.substring(d,l.length),"\x26");else{if("undefined"!==typeof a.currentVersion&&10.1<=a.currentVersion)return l="".concat(l.substring(0,d),"/info/thumbnail").concat(l.substring(d,l.length));l="".concat(l.substring(0,d),"/exportImage").concat(l.substring(d,l.length),"\x26")}l+="size\x3d".concat(t,"\x26bbox\x3d").concat(e);null!==c&&0<c.length&&(l+="\x26bboxSR\x3d".concat(c));
null!==u&&0<u.length&&(l+="\x26imageSR\x3d".concat(u));l=n&&-1<(null===(h=null===a||void 0===a?void 0:a.supportedImageFormatTypes)||void 0===h?void 0:h.indexOf("PNG32"))?l+"\x26format\x3dpng32\x26f\x3d".concat(q):n?l+"\x26format\x3dpng24\x26f\x3d".concat(q):l+"\x26format\x3djpgpng\x26f\x3d".concat(q);n?null!==m&&0<m.length&&(l+="\x26layers\x3dshow:".concat(m)):l+="\x26interpolation\x3dRSP_NearestNeighbor\x26bandIds\x3dnull";return l}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromKMLItem":function(){define("dojo/Deferred dojo/_base/url dojo/_base/lang arcgisonline/sharing/util esri/SpatialReference arcgisonline/map/thumbnail/buildThumbnailURLFromItemWebMap".split(" "),
function(f,B,l,e,c,u){var t=window.esriGeowConfig;return function(d,q){var m={};m.baseMap=t.defaultBasemap||t.self.defaultBasemap;m.baseMap.title="basemap";m.operationalLayers=[];var a=d.url;a||"KML"!==d.type||(a=t.restBaseUrl+"content/items/"+d.id+"/data");var h=(new B(t.restBaseUrl)).authority;-1<a.indexOf(h)&&(h=e.getToken())&&(a+="?token\x3d"+h);m.operationalLayers.push({url:a,id:"KML_"+Math.random(),opacity:1,title:d.title,visibility:!0,type:"KML"});var n=new f;q||("string"==typeof d.extent?
(d=d.extent.split(","),q=[[parseFloat(d[0]),parseFloat(d[1])],[parseFloat(d[2]),parseFloat(d[3])]]):q=d.extent&&0<d.extent.length?d.extent:[[-180,-90],[180,90]]);u(m,q,new c({wkid:4326}),l.hitch(this,function(r){n.resolve(r)}),l.hitch(this,function(r){n.reject(r)}));return n}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromItemWebMap":function(){define(["dojo/json","dojo/_base/lang","dojo/_base/array","esri/tasks/Geoprocessor"],function(f,B,l,e){var c=window.esriGeowConfig;return function(u,t,
d,q,m){u=B.clone(u);l.forEach(u.baseMap.baseMapLayers,function(a){delete a.resourceInfo});u.mapOptions={showAttribution:!1,extent:{xmin:t[0][0],ymin:t[0][1],xmax:t[1][0],ymax:t[1][1],spatialReference:{wkid:4326}},spatialReference:d};u.exportOptions={dpi:96,outputSize:[600,400]};u.layoutOptions={};t=new e(c.self.helperServices.printTask.url);d={Web_Map_as_JSON:f.stringify(u),Format:"PNG32",Layout_Template:"MAP_ONLY"};t.execute(d).then(B.hitch(this,function(a){if(a){for(var h=!1,n=0;n<a.length;n++)if("Output_File"==
a[n].paramName){q(a[n].value.url);h=!0;break}!h&&m&&m()}else m&&m()}),B.hitch(this,function(a){m&&m()}))}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromFSItem":function(){define("dojo/on dojo/Deferred dojo/DeferredList dojo/_base/connect dojo/_base/array dojo/_base/lang esri/kernel esri/layers/FeatureLayer esri/geometry/Extent arcgisonline/sharing/util arcgisonline/map/thumbnail/buildThumbnailURLFromWebMap arcgisonline/map/thumbnail/getExtentWithFeatures arcgisonline/map/thumbnail/getItemData arcgisonline/map/layer/getServiceInfo".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r){return function(k,g,b){var w={};w.baseMap=u.clone(esriGeowConfig.defaultBasemap||esriGeowConfig.self.defaultBasemap);w.baseMap.title="basemap";for(var x=w.baseMap.baseMapLayers.length,z=!1===k.itemData?{}:k.itemData,D=0;D<x;D++){var E=w.baseMap.baseMapLayers[D];if(!E.isReference){!esriGeowConfig.allSSL&&"https:"!=location.protocol||!m.isHostedService(E.url)&&!m.supportsHttps(E.url)||(E.url=E.url.replace("http:","https:"));E.visibility=!1;w.baseMap.baseMapLayers=
[E];break}}w.operationalLayers=[];var C=new B;x=function(y,v){v?y&&c.forEach(y,function(G){c.forEach(v,function(F,H){F.id===G.id&&(F[H]=G)})}):v=[];y=function(G,F){F=G&&G.layers||[];for(G=F.length-1;0<=G;G--){var H=F[G],L=t.id.findCredential(m.urlToObject(k.url).path);L={url:k.url+"/"+H.id+(L?"?token\x3d"+L.token:""),id:(k.id||Math.random())+"_"+H.id,opacity:1,title:(k.title||"title")+"_"+H.id,visibility:!0};for(var M=!1,Q=0;Q<F.length;Q++)if(F[Q].id===H.id){M=!0;L.layerDefinition=F[Q].layerDefinition;
break}(!F.length||F.length&&M)&&w.operationalLayers.push(L)}var S=function(Y){C.resolve(Y)},I=function(Y){C.reject(Y)},P=[[-180,-90],[180,90]];"string"==typeof k.extent&&""!==k.extent?(G=k.extent.split(","),P=[[parseFloat(G[0]),parseFloat(G[1])],[parseFloat(G[2]),parseFloat(G[3])]]):k.extent&&0<k.extent.length&&(P=k.extent);if(1===w.operationalLayers.length)L=new d(w.operationalLayers[0].url),f(L,"load",u.hitch(this,function(Y){Y.layer&&(Y=Y.layer);h({layer:Y},g||P).then(u.hitch(this,function(aa,
la){a(aa,la,u.hitch(this,S),u.hitch(this,I))},w))}));else{G=g||k.extent||P;P=new q(G[0][0],G[0][1],G[1][0],G[1][1]);var J=function(Y,aa){var la=20015077/180,T=t.config.defaults,N=t.WKIDUnitConversion,K=Y.spatialReference;if(K){var W=K.wkid;var da=K.wkt}K=null;W?K=N.values[N[W]]:da&&-1!==da.search(/^PROJCS/i)&&(N=/UNIT\[([^\]]+)\]\]$/i.exec(da))&&N[1]&&(K=parseFloat(N[1].split(",")[1]));return Y.getWidth()/aa*(K||la)*39.37*T.screenDPI}(P,200),U=[];F=[];for(G=0;G<w.operationalLayers.length;G++)L=w.operationalLayers[G],
H=new B,F.push(H),L=new d(L.url),U.push(L),e.connect(L,"onLoad",u.hitch(this,function(Y,aa){aa.minScale<=J&&aa.maxScale>J?Y.resolve(!0):Y.resolve(!1)},H));(new l(F)).addCallback(function(Y){for(var aa=!1,la=0;la<Y.length;la++)if(!0===Y[la][1]){aa=!0;break}aa?a(w,g||k.extent,u.hitch(this,S),u.hitch(this,I)):h({layer:U[U.length-1]},g||k.extent).then(u.hitch(this,function(T,N){a(T,N,u.hitch(this,S),u.hitch(this,I))},w))})}};var A=function(G){C.reject(G)};k.serviceInfo&&!k.serviceInfo.error?y(k.serviceInfo):
r(k.url,"",u.hitch(this,y),u.hitch(this,A))};b?z?x(b,z):n(k.id,u.hitch(this,x,b),u.hitch(this,x)):k.id?z?x(null,z):n(k.id,u.hitch(this,x,null),u.hitch(this,x)):x();return C}})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(f,B,l){f.DeferredList=function(e,c,u,t,d){var q=[];B.call(this);var m=this;0!==e.length||c||this.resolve([0,[]]);var a=0;l.forEach(e,function(h,n){function r(k,g){q[n]=[k,g];a++;a===e.length&&m.resolve(q)}h.then(function(k){c?
m.resolve([n,k]):r(!0,k)},function(k){u?m.reject(k):r(!1,k);if(t)return null;throw k;})})};f.DeferredList.prototype=new B;f.DeferredList.prototype.gatherResults=function(e){e=new f.DeferredList(e,!1,!0,!1);e.addCallback(function(c){var u=[];l.forEach(c,function(t){u.push(t[1])});return u});return e};return f.DeferredList})},"esri/layers/FeatureLayer":function(){define("require module dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/date/locale dojo/io-query dojo/dom-construct dojo/i18n dojo/when dojo/global dojo/promise/all ../sniff ../kernel ../lang ../request ../config ../deferredUtils ../promiseList ../SpatialReference ../urlUtils ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/jsonUtils ../support/expressionUtils ../arcadeProfiles/labelingProfile ../tasks/QueryTask ../tasks/query ../tasks/FeatureSet ../tasks/StatisticDefinition ../geometry/Extent ../geometry/jsonUtils ../geometry/normalizeUtils ../geometry/scaleUtils ./GraphicsLayer ./Field ./TimeInfo ./TimeReference ./FeatureType ./FeatureTemplate ./FeatureSubtype ./FeatureEditResult ./LabelClass ./support/domainUtils ./SnapshotMode ./OnDemandMode ./SelectionMode ./StreamMode ./GridLayout ./TrackManager ./HeatmapManager ./clustering/ClusterManager dojo/i18n!../nls/jsapi ./agscommon".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E,C,y,v,A,G,F,H,L,M,Q,S,I,P,J,U,Y,aa,la,T,N,K,W,da,fa,ha,ra,za,Da,va,Ga,ba,ia,wa,Aa,Fa,O,ya,Ha){var ea=z.defaults,Oa=!!g("esri-pbf"),Na=!!g("esri-featurelayer-pbf"),Ca=l(N,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",reSQLCurrentTimestamp:/current_timestamp|current_date|current_time/i,reHostedFS:/(https?:)?\/\/services.*\.arcgis\.com/i,maxPointCountForAuto:4E3,maxRecordCountForAuto:2E3,
maxVertexCountForAuto:25E4,generalizeForScale:4E3,_eventMap:{"add-attachment-complete":["result"],"before-apply-edits":["adds","updates","deletes"],"delete-attachments-complete":["results"],"edits-complete":["adds","updates","deletes"],"query-attachment-infos-complete":["results"],"query-count-complete":["count"],"query-features-complete":["featureSet"],"query-ids-complete":["objectIds"],"query-related-features-complete":["featureSets"],"selection-complete":["features","method"],"update-end":["error",
"info"]},constructor:function(X,oa){this._preventInit||this._initFeatureLayer(X,oa)},_initFeatureLayer:function(X,oa){oa=oa||{};this._tileWidth=oa.tileWidth||512;this._tileHeight=oa.tileHeight||512;this.i18n=Ha;this._featureReduction=this._featureReduction||oa.featureReduction;this._featureReductionEnabled=null!=oa.featureReductionEnabled?oa.featureReductionEnabled:!0;this._featureUpdatesCheckEnabled=null!=oa.featureUpdatesCheckEnabled?oa.featureUpdatesCheckEnabled:!0;this.showLabels=null!=oa.showLabels?
oa.showLabels:!0;this._outFields=oa.outFields;this._defnExpr=oa.definitionExpression;this._loadCallback=oa.loadCallback;this._trackIdField=oa.trackIdField;this.objectIdField=oa.objectIdField;var pa=null!=oa.resolution,Z=null!=oa.maxAllowableOffset;this._maxOffset=this._optMaxOffset=pa||Z?pa?oa.resolution:oa.maxAllowableOffset:this.maxAllowableOffset;this.quantize=null!=oa.quantize?oa.quantize:!0;this._optEditable=oa.editable;this._optAutoGen=oa.autoGeneralize;this.editSummaryCallback=oa.editSummaryCallback;
this.userId=oa.userId;this.userIsAdmin=oa.userIsAdmin;this.useMapTime=oa.hasOwnProperty("useMapTime")?!!oa.useMapTime:!0;this.source=oa.source;this.gdbVersion=oa.gdbVersion;this.orderByFields=oa.orderByFields;this.maxPointCountForAuto=null!=oa.maxPointCountForAuto?oa.maxPointCountForAuto:this.maxPointCountForAuto;this.maxRecordCountForAuto=null!=oa.maxRecordCountForAuto?oa.maxRecordCountForAuto:this.maxRecordCountForAuto;this.maxVertexCountForAuto=null!=oa.maxVertexCountForAuto?oa.maxVertexCountForAuto:
this.maxVertexCountForAuto;this.generalizeForScale=null!=oa.generalizeForScale?oa.generalizeForScale:this.generalizeForScale;this.queryPagination=this._optQueryPagination=null!=oa.queryPagination?oa.queryPagination:!0;this.multipatchOption=oa.multipatchOption;this.subtypeSublayerInfo=oa.subtypeSublayerInfo;this._selectedFeatures={};this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();pa=w.isDefined(oa.mode)?oa.mode:Ca.MODE_ONDEMAND;this._isStream&&(pa=Ca.MODE_STREAM);this.mode=
pa;switch(pa){case Ca.MODE_SNAPSHOT:this.currentMode=Ca.MODE_SNAPSHOT;this._mode=new Ga(this);break;case Ca.MODE_ONDEMAND:case Ca.MODE_AUTO:this.currentMode=Ca.MODE_ONDEMAND;this._mode=new ba(this);this.latticeTiling=oa.latticeTiling;break;case Ca.MODE_SELECTION:this.currentMode=Ca.MODE_SELECTION;this._mode=new ia(this);this._isSelOnly=!0;break;case Ca.MODE_STREAM:this.currentMode=Ca.MODE_STREAM,this._mode=new wa(this),this._isStream=!0}this._initLayer=c.hitch(this,this._initLayer);this._selectHandler=
c.hitch(this,this._selectHandler);this._editable=!1;if(c.isObject(X)&&X.layerDefinition)return this._collection=!0,this.mode=this._isStream?Ca.MODE_STREAM:Ca.MODE_SNAPSHOT,this._isStream||this._outFields||(this._outFields=["*"]),this._initLayer(X),this;this.source&&(X={source:this.source.toJson()},this._url.query=c.mixin(this._url.query,{layer:t.toJson(X)}));this.gdbVersion&&(this._url.query=c.mixin(this._url.query,{gdbVersion:this.gdbVersion}));this._task=new I(this.url,{source:this.source,gdbVersion:this.gdbVersion});
X=this._url.path;this._fserver=!1;-1!==X.search(/\/FeatureServer\//i)&&(this._fserver=!0);this._checkFeatureLimit();(oa=oa.resourceInfo)?this._initLayer(oa):x({url:X,content:c.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});this.registerConnectEvents()},_initLayer:function(X,oa){if(X||oa){this._json=X;oa=this.subtypeSublayerInfo;this._findCredential();if(this.credential&&this.credential.ssl||X&&X._ssl)this._useSSL(),this._task._useSSL();
this._collection&&(this._isStream||(this.currentMode=Ca.MODE_SNAPSHOT,this._mode=new Ga(this)),this._featureSet=X.featureSet,this._nextId=X.nextObjectId,X=X.layerDefinition);this.version=X.currentVersion;this.version||(this.version="capabilities"in X||"drawingInfo"in X||"hasAttachments"in X||"htmlPopupType"in X||"relationships"in X||"timeInfo"in X||"typeIdField"in X||"types"in X?10:9.3);this.geometryType=X.geometryType;X.bandCount&&X.fields&&1<X.fields.length&&(this.geometryType="esriGeometryPolygon",
this._isImageService=!0);"string"!==typeof this.multipatchOption&&"esriGeometryMultiPatch"===this.geometryType&&(this.multipatchOption="xyFootprint");if(X.hasOwnProperty("capabilities")){var pa=this.capabilities=X.capabilities;pa&&-1!==pa.toLowerCase().indexOf("editing")?this._editable=!0:this._editable=!1}else this._collection||(this._editable=this._fserver);w.isDefined(this._optEditable)?(this._editable=this._optEditable,delete this._optEditable):"esriGeometryMultiPatch"===this.geometryType&&(this._editable=
!1);this._isImageService&&(this._editable=!1);this._json=t.toJson(this._json);this.isEditable()?this._setMaxOffset(null):this._canAutoGeneralize()&&(this._autoGeneralize=w.isDefined(this._optAutoGen)?this._optAutoGen:this.mode===Ca.MODE_ONDEMAND||this.mode===Ca.MODE_AUTO,delete this._optAutoGen);pa=X.effectiveMinScale||X.minScale;var Z=X.effectiveMaxScale||X.maxScale;!this._hasMin&&pa&&this.setMinScale(pa);!this._hasMax&&Z&&this.setMaxScale(Z);this.layerId=X.id;this.name=oa&&oa.title||X.name;this.description=
X.description;this.copyright=X.copyrightText;this.type=X.type;this.displayField=X.displayField;this.defaultDefinitionExpression=X.definitionExpression||(X.isView?X.viewDefinitionQuery:X.definitionQuery);this.fullExtent=new Y(X.extent);this.initialExtent=new Y(this.fullExtent.toJson());this.fullExtent.spatialReference&&(this.spatialReference=new C(this.fullExtent.spatialReference.toJson()));this.defaultVisibility=X.defaultVisibility;this.editingInfo=X.editingInfo;this.supportsLastEditDate=!(!this.editingInfo||
null==this.editingInfo.lastEditDate);if("esriGeometryPoint"===this.geometryType||"esriGeometryMultipoint"===this.geometryType)this.latticeTiling=!1;this.hasM=X.hasM||!1;this.hasZ=X.hasZ||!1;this.indexedFields=X.indexedFields;this.indexes=X.indexes;this.maxRecordCount=X.maxRecordCount;this.canModifyLayer=X.canModifyLayer;this.supportsStatistics=X.supportsStatistics;this.supportsAdvancedQueries=this._collection?!1:X.supportsAdvancedQueries;this.supportsCalculate=X.supportsCalculate;this.supportsASyncCalculate=
X.supportsASyncCalculate;this.supportsAttachmentsByUploadId=X.supportsAttachmentsByUploadId;this.supportsCoordinatesQuantization=X.supportsCoordinatesQuantization;this.supportsQuantizationEditMode=X.supportsQuantizationEditMode;this.supportsFieldDescription=X.supportsFieldDescriptionProperty;this.supportsFormatPBF=X.supportedQueryFormats?-1!==u.map(X.supportedQueryFormats.toLowerCase().split(","),c.trim).indexOf("pbf"):!1;this.quantize=this.quantize&&this.supportsCoordinatesQuantization;this.hasLabels=
X.hasLabels;this.canScaleSymbols=X.canScaleSymbols;this.supportsRollbackOnFailureParameter=this.supportsRollbackOnFailure=X.supportsRollbackOnFailure;this.syncCanReturnChanges=X.syncCanReturnChanges;this.isDataVersioned=X.isDataVersioned;this.editFieldsInfo=X.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=X.ownershipBasedAccessControlForFeatures;this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures&&(this.creatorField=this.editFieldsInfo.creatorField);this.relationships=X.relationships;
this.allowGeometryUpdates=w.isDefined(X.allowGeometryUpdates)?X.allowGeometryUpdates:!0;this.allowUpdateWithoutMValues=!!X.allowUpdateWithoutMValues;this.enableZDefaults=!!X.enableZDefaults;this.zDefault=w.isDefined(X.zDefault)?X.zDefault:null;this.advancedQueryCapabilities=X.advancedQueryCapabilities||{supportsStatistics:this.supportsStatistics,supportsOrderBy:this.supportsAdvancedQueries,supportsDistinct:this.supportsAdvancedQueries};this.geometryProperties=X.hasGeometryProperties&&X.geometryProperties||
null;this.url&&(this.advancedQueryCapabilities.supportsPagination=this.advancedQueryCapabilities.supportsPagination&&(this.reHostedFS.test(this.url)||10.3<this.version));this.queryPagination=this._optQueryPagination&&this.advancedQueryCapabilities.supportsPagination;this.useStandardizedQueries=X.useStandardizedQueries;this.tileMaxRecordCount=X.tileMaxRecordCount;this.standardMaxRecordCount=X.standardMaxRecordCount;if(pa=X.dateFieldsTimeReference)this.dateFieldsTimeReference=new da(pa);this._setMaxOffset(this._maxOffset,
!0);this._isTable="Table"===this.type;Z=X.fields;this._createFields(Z);if(!this.objectIdField&&(this.objectIdField=X.objectIdField,!this.objectIdField))for(Z=X.fields,pa=0;pa<Z.length;pa++){var ja=Z[pa];if("esriFieldTypeOID"===ja.type){this.objectIdField=ja.name;break}}if(!w.isDefined(this._nextId)){Z=this.objectIdField;ja=-1;if(this._collection&&Z){var ta=(pa=this._featureSet)&&pa.features,xa=ta?ta.length:0;for(pa=0;pa<xa;pa++){var Ea=(Ea=ta[pa].attributes)&&Ea[Z];Ea>ja&&(ja=Ea)}}this._nextId=ja+
1}this.globalIdField=X.globalIdField;if(pa=this.typeIdField=X.typeIdField)if(pa=!this._getField(pa)&&this._getField(pa,!0))this.typeIdField=pa.name;this.visibilityField=X.visibilityField;if(Z=X.defaultSymbol)this.defaultSymbol=F.fromJson(Z);var Ja=this.types=[],La=X.types;ja=(pa=this.editFieldsInfo)&&pa.creatorField;ta=pa&&pa.editorField;Ea=ja||ta;xa=[];if(La)for(pa=0;pa<La.length;pa++){var Ya=new fa(La[pa]);var Ua=Ya.templates;Ea&&Ua&&Ua.length&&(xa=xa.concat(Ua));Ja.push(Ya)}La=X.templates;Ya=this.templates=
[];if(La)for(pa=0;pa<La.length;pa++)Ja=new ha(La[pa]),Ea&&xa.push(Ja),Ya.push(Ja);for(pa=0;pa<xa.length;pa++)if(Ea=c.getObject("prototype.attributes",!1,xa[pa]))ja&&delete Ea[ja],ta&&delete Ea[ta];if(pa=X.subtypeField)this.subtypeField=(pa=this.getField(pa))?pa.name:null;this.defaultSubtypeCode=X.defaultSubtypeCode;this.subtypes=u.map(X.subtypes,function(ob){return new ra(ob)});this._applySTSublayerInfo(oa);if(oa=X.timeInfo)this.timeInfo=new W(oa),this._startTimeField=oa.startTimeField,this._endTimeField=
oa.endTimeField,this._startTimeField&&this._endTimeField&&(this._twoTimeFields=!0),this._trackIdField?oa.trackIdField=this._trackIdField:this._trackIdField=oa.trackIdField;this.hasAttachments=!this._collection&&X.hasAttachments?!0:!1;this.htmlPopupType=X.htmlPopupType;oa=X.drawingInfo;(pa=oa&&oa.labelingInfo)&&!this.labelingInfo&&(this.labelingInfo=u.map(pa,function(ob){return new Da(ob)}),this._fixLabelExpr());if(!this.renderer)if(oa&&oa.renderer){var Ta=oa.renderer;this.setRenderer(M.fromJson(Ta,
{geometryType:this.geometryType}));"classBreaks"===Ta.type&&this.renderer.setMaxInclusive(!0);if(!this._collection){var ab=Ta.type;pa=[];Ta=this.renderer;switch(ab){case "simple":pa.push(Ta.symbol);break;case "uniqueValue":case "classBreaks":pa.push(Ta.defaultSymbol),pa=pa.concat(u.map(Ta.infos,function(ob){return ob.symbol}))}pa=u.filter(pa,w.isDefined);var fb=this._url.path+"/images/",kb=this._getToken();u.forEach(pa,function(ob){var wb=ob.url;wb&&(-1===wb.search(/https?:/)&&-1===wb.indexOf("data:")&&
(ob.url=fb+wb),kb&&-1!==ob.url.search(/https?:/)&&(ob.url+="?token\x3d"+kb))})}}else if(Z)La=this.types,0<La.length?(Ta=new L(this.defaultSymbol,this.typeIdField),u.forEach(La,function(ob){Ta.addValue(ob.id,ob.symbol)})):Ta=new H(this.defaultSymbol),this.setRenderer(Ta);else if(!this._isTable){switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":ab=new v;break;case "esriGeometryPolyline":ab=new A;break;case "esriGeometryPolygon":ab=new G;break;default:this.hasXYFootprint()&&
(ab=new G)}this.setRenderer(ab?new H(ab):null)}ab=oa&&oa.transparency||0;!this.hasOwnProperty("opacity")&&0<ab&&(this.opacity=1-ab/100);(g("ie")||7<=g("trident")||g("safari"))&&this.isEditable()&&10.02>this.version&&(this._ts=!0);this.statistics=X.statistics;this._fixRendererFields();this._updateRequiredFieldsFromLabelingInfo();this._checkFields();this._updateCaps();var qb=function(){null==this._maxOffset||this._isFractionalOffsetAllowed()||this._setMaxOffset(this._maxOffset);this.loaded=!0;this.setFeatureReduction(this.getFeatureReduction());
this.currentMode!==Ca.MODE_SNAPSHOT&&(this.queryPagination=!1);this.onLoad(this);var ob=this._loadCallback;ob&&(delete this._loadCallback,ob(this))};X=[];this._collection?(ab=this._featureSet,this._featureSet=null,this._mode._drawFeatures(new J(ab)),this._fcAdded=!0):(X.push(this._forceIdentity()),this._limitPromise&&X.push(this._limitPromise));X.push(this._evalArcadeSupport());X.length?E(X).then(c.hitch(this,function(){qb.call(this)})):qb.call(this)}},_applySTSublayerInfo:function(X){X&&this.subtypeField&&
(this.subtypeCode=X.subtypeCode,this._applySTSublayerDefinitionExpression(X),this._filterSubtypes(X),this._applySTTemplates(X),this._applySTFieldOverrides(X))},_applySTSublayerDefinitionExpression:function(X){var oa=[],pa=this.getDefinitionExpression();pa&&oa.push(pa);(X=X.layerDefinition&&X.layerDefinition.definitionExpression)&&oa.push(X);1<oa.length&&(oa=u.map(oa,function(Z){return"("+Z+")"}));this.setDefinitionExpression(oa.length?oa.join(" AND "):null)},_applySTTemplates:function(X){if(X=X.layerDefinition&&
X.layerDefinition.templates)this.templates=u.map(X,function(oa){return new ha(oa)})},_filterSubtypes:function(){this.subtypes&&(this.subtypes=u.filter(this.subtypes,function(X){return X.code===this.subtypeCode},this))},_applySTFieldOverrides:function(X){var oa=X.layerDefinition&&X.layerDefinition.fieldOverrides;if(oa){this.fields=u.filter(this.fields,function(Z){return u.some(oa,function(ja){return ja.name===Z.name})});var pa=this.getSubtypeByCode(this.subtypeCode).domains;this.fields.forEach(function(Z){var ja=
u.filter(oa,function(ta){return ta.name===Z.name})[0];ja.alias&&(Z.alias=ja.alias);if(!1===ja.editable||Z.name===this.subtypeField)Z.editable=!1;pa&&(ja=pa[Z.name])&&"inherited"!==ja.type&&(Z.domain=va.fromJson(ja.toJson()))},this)}},setShowLabels:function(X){var oa=this.showLabels;this.showLabels=X;oa!==this.showLabels&&(this._evalSurfaceType(),this.onShowLabelsChange())},onShowLabelsChange:function(){},onRendererChange:function(X){this.inherited(arguments);var oa=this._map;this._ager=!!(X&&X.observationAger&&
X.observationRenderer);X&&"colors"in X&&"blurRadius"in X&&"maxPixelIntensity"in X?(this._evalSurfaceType(!0),"esriGeometryPoint"==this.geometryType&&!this._heatmapManager&&oa&&(this._heatmapManager=new O(this),this._heatmapManager.initialize(oa))):this.renderer&&this.renderer.getRendererInfo?u.some(this.renderer.rendererInfos,function(ja){return ja.renderer&&"colors"in ja.renderer&&"blurRadius"in ja.renderer})||(this._heatmapManager=null):this._heatmapManager=null;this.timeInfo&&oa&&(X&&(X.latestObservationRenderer||
X.trackRenderer)?this._trackManager||(this._trackManager=new Fa(this),this._trackManager.initialize(oa),this._childLayer=this._trackManager.container,this._mode._applyTimeFilter()):this._trackManager&&!this._isStream&&(this._trackManager.destroy(),this._trackManager=null));if(X){var pa=[];oa=u.filter([X,X.observationRenderer,X.latestObservationRenderer,X.trackRenderer],w.isDefined);var Z=function(ja){return null!=ja&&"function"!=typeof ja&&ja};u.forEach(oa,function(ja){var ta=Z(ja.attributeField),
xa=Z(ja.attributeField2);ja=Z(ja.attributeField3);!1!==ta&&pa.push(ta);!1!==xa&&pa.push(xa);!1!==ja&&pa.push(ja)});this._requiredFields=pa}else this._requiredFields=[];this.loaded&&(this._fixRendererFields(),this._checkFields(this._requiredFields),this._collection&&(this._typesDirty=!0))},setFeatureReduction:function(X){X&&(X=c.mixin({},X),null!=X.clusterSize&&null==X.clusterRadius&&(X.clusterRadius=X.clusterSize),delete X.clusterSize);this.loaded?this._isFeatureReductionSupported(X)?this._featureReduction=
X:this._featureReduction=null:this._featureReduction=X;this._evalFeatureReduction(this._featureReduction)},hasFeatureReduction:function(){return!!this._featureReduction},getFeatureReduction:function(){var X=this._featureReduction;if(X){X=c.mixin({},X);var oa=this._clusterManager;if(oa=oa&&oa.aggregationInfo)X.clusterRadius=oa.clusterRadius,X.infoTemplate=oa.infoTemplate}return X},isFeatureReductionActive:function(){var X=this._clusterManager;return!!(X&&X.isClusteringEnabled()&&X.isClusteringActive())},
isFeatureReductionEnabled:function(){return this._featureReductionEnabled},enableFeatureReduction:function(){this._featureReductionEnabled||(this._featureReductionEnabled=!0,this._evalFeatureReduction(this._featureReduction))},disableFeatureReduction:function(){this._featureReductionEnabled&&(this._featureReductionEnabled=!1,this._evalFeatureReduction(this._featureReduction))},isFeatureReductionApplied:function(){return this.hasFeatureReduction()&&this.isFeatureReductionEnabled()&&this._canCluster(this.getFeatureReduction())},
getAggregateGraphics:function(){return this._clusterManager?this._clusterManager.getAggregateGraphics():[]},getChildGraphics:function(X){return this._clusterManager?this._clusterManager.getFeaturesInCluster(X):[]},getSingleGraphics:function(){return this._clusterManager?this._clusterManager.getSingleGraphics():[]},getFeatureReductionRenderer:function(){return this.isFeatureReductionActive()?this._clusterManager.getClusterRenderer():null},getFeatureReductionLayer:function(){return this._clusterManager?
this._clusterManager.container:null},getFeatureReductionField:function(X){var oa,pa=this._clusterManager?this._clusterManager.getClusterFields():null;X=X?X.toLowerCase():"";u.some(pa,function(Z){X===Z.name.toLowerCase()&&(oa=Z);return!!oa});return oa},_isFeatureReductionSupported:function(X){return X&&"cluster"===X.type&&"esriGeometryPoint"===this.geometryType&&(this._collection||this._isStream||this._optQueryPagination&&this.advancedQueryCapabilities.supportsPagination)},_isReductionCompatibleRenderer:function(X){X=
X&&X.declaredClass||"";X=X.toLowerCase();return-1<X.indexOf("simplerenderer")||-1<X.indexOf("classbreaksrenderer")||-1<X.indexOf("uniquevaluerenderer")},_evalFeatureReduction:function(X){this.loaded&&this.getMap()&&(X=X||this.getFeatureReduction(),this._evalModeFromFReduction(X),X&&this.isFeatureReductionEnabled()?this._canCluster(X)?this._clusterManager?this._updateClusterManager(X):(this._clusterManager=this._createClusterManager(X),this.onFeatureReductionChange()):this._destroyClusterManager():
this._destroyClusterManager())},_canCluster:function(X){var oa=this._map;if(!oa)return!1;oa=oa.spatialReference;return this._isFeatureReductionSupported(X)&&this._isReductionCompatibleRenderer(this.renderer)&&(oa.isWebMercator()||4326===oa.wkid)},_createClusterManager:function(X){X=new ya({layer:this,aggregationInfo:X});this._clusterHandles=[X.on("renderer-change",c.hitch(this,function(){this.onFeatureReductionRendererChange()}))];X.initialize(this._map);return X},_updateClusterManager:function(X){var oa=
this._clusterManager;oa&&oa.setAggregationInfo(X)},_destroyClusterManager:function(X){u.forEach(this._clusterHandles,function(oa){oa.remove()});this._clusterHandles=null;this._clusterManager&&(this._clusterManager.destroy(X),this._clusterManager=null,this.onFeatureReductionChange())},redraw:function(){this.inherited(arguments);this._clusterManager&&this._clusterManager.redraw();this._trackManager&&this._trackManager.container&&this._trackManager.container.redraw()},_evalSDRenderer:function(X){this.inherited(arguments);
var oa=this._getRenderer();this._ager=!!(oa&&oa.observationAger&&oa.observationRenderer);this._trackManager&&this._trackManager.container&&this._trackManager.container.setRenderer(oa&&oa.trackRenderer);X&&this._evalFeatureReduction()},_graphicVisibilityChanged:function(X){this._clusterManager?this._clusterManager.toggleFeatureVisibility(X):this._heatmapManager&&this._heatmapManager.redraw()},setWebGLFetchOptions:function(X){this._hasOnDemandDrillMode()&&(X=X||{},null!=X.maxDrillLevel&&(this._mode.maxDrillLevel=
X.maxDrillLevel),null!=X.maxRecordCountFactor&&(this._mode.maxRecordCountFactor=X.maxRecordCountFactor),null!=X.enablePBFQuery&&(this._mode.enablePBFQuery=X.enablePBFQuery))},_isWebGLCompatible:function(){return this.loaded&&!this.isEditable()&&!this.isFeatureReductionApplied()&&(!this.labelingInfo||!1===this.showLabels)&&!this._isGeometryOperationsUsed()&&this._isRendererSupportedInWebGL()&&this.supportsCoordinatesQuantization&&("esriGeometryPolygon"!==this.geometryType||this.advancedQueryCapabilities.supportsReturningGeometryCentroid)&&
this.currentMode===Ca.MODE_ONDEMAND&&(!this._preSurfaceChangeState||this._preSurfaceChangeState.currentMode===Ca.MODE_ONDEMAND)},_isRendererSupportedInWebGL:function(){if(!this.renderer)return!1;var X=this.renderer,oa=X.declaredClass?X.declaredClass.toLowerCase():"";return(-1<oa.indexOf("simplerenderer")||-1<oa.indexOf("classbreaksrenderer")||-1<oa.indexOf("uniquevaluerenderer"))&&this._hasWebGLCompatibleSymbols(X)&&this._hasWebGLCompatibleVVs(X)},_hasWebGLCompatibleSymbols:function(X){X=this._getAllSymbolsInRenderer(X);
return!(this._hasSLSWithMarker(X)||this._hasIncompatibleSMSStyles(X)||this._hasGIFMarker(X))},_hasWebGLCompatibleVVs:function(X){return!u.some(X&&X.visualVariables,function(oa){var pa=oa.type;return("colorInfo"===pa||"opacityInfo"===pa)&&oa.stops&&8<oa.stops.length||"sizeInfo"===pa&&(oa.field||oa.valueExpression&&"$view.scale"!==oa.valueExpression||oa.expression&&"view.scale"!==oa.expression)&&oa.stops&&6<oa.stops.length?!0:!1})},_hasSLSWithMarker:function(X){return u.some(X,function(oa){return oa&&
"simplelinesymbol"===oa.type&&!!oa.marker})},_hasIncompatibleSMSStyles:function(X){var oa=void 0===g("ie")&&7==g("trident");return u.some(X,function(pa){return pa&&"simplemarkersymbol"===pa.type&&("triangle"===pa.style||"path"===pa.style&&oa)})},_hasGIFMarker:function(X){var oa=/\.gif$/,pa=/^image\/gif$/;return u.some(X,function(Z){return Z&&"picturemarkersymbol"===Z.type?oa.test(Z.url)||pa.test(Z.contentType):!1})},_getAllSymbolsInRenderer:function(X){var oa=[];X&&(oa.push(X.symbol),oa.push(X.defaultSymbol),
u.forEach(X.infos,function(pa){oa.push(pa.symbol)}),oa=u.filter(oa,function(pa){return!!pa}));return oa},_setMap:function(X){var oa=this.inherited(arguments),pa=this._mode,Z=this;pa&&X.loaded&&pa.initialize(X);this.geometryType&&this.attr("data-geometry-type",this.geometryType.replace(/esriGeometry/i,"").toLowerCase());this._addHandle=this.on("graphic-node-add",function(ja){ja=ja.graphic.attributes;(ja=Z._selectedFeatures[ja&&ja[Z.objectIdField]])&&ja.attr("data-selected","")});return oa},_unsetMap:function(X){this._suspendImpl(!0);
this._destroyClusterManager(!1);this._trackManager&&(this._trackManager.destroy(),this._trackManager=null);e.disconnect(this._zoomConnect);e.disconnect(this._addHandle);this._zoomConnect=this._addHandle=null;this.inherited("_unsetMap",arguments)},onAttach:function(){this._evalModeFromSurface()},onRefreshTick:function(){this.isFeatureUpdatesCheckActive()&&this._evalFeatureUpdates()},refresh:function(X){!this._needsRefresh&&X&&X.scheduled&&this.isFeatureUpdatesCheckActive()||(this._needsRefresh=!1,
(X=this._mode)&&X.refresh())},setFeatureUpdatesCheckEnabled:function(X){this._featureUpdatesCheckEnabled=X},isFeatureUpdatesCheckEnabled:function(){return!!this._featureUpdatesCheckEnabled},isFeatureUpdatesCheckActive:function(){return this.supportsLastEditDate&&this.isFeatureUpdatesCheckEnabled()&&!!this.refreshInterval&&!!c.getObject("onFeatureUpdatesResult.after",!1,this)},hasFeatureUpdates:function(){var X=new d;if(!this.supportsLastEditDate)return X.reject(Error("FeatureLayer does not support supportsLastEditDate")),
X.promise;if(!this._fetchMetadataPromise||this._fetchMetadataPromise.isFulfilled())this._fetchMetadataPromise=x({url:this._url.path,content:c.mixin({f:"json"},this._url.query),callbackParamName:"callback"}).then(c.hitch(this,function(oa){oa=oa.editingInfo.lastEditDate;var pa=this.editingInfo.lastEditDate!==oa;this.editingInfo.lastEditDate=oa;return pa}));this._fetchMetadataPromise.then(function(oa){X.isFulfilled()||X.resolve(oa)}).otherwise(function(oa){X.isFulfilled()||X.reject(oa)});return X.promise},
hasXYFootprint:function(){return"esriGeometryMultiPatch"===this.geometryType&&"xyFootprint"===this.multipatchOption},getOutFields:function(){return u.filter(this._getOutFields(),function(X){return"*"===X||!!this._getField(X)},this)},getField:function(X){return this._getField(X,!0)},isOutField:function(X){X=this.getField(X);if(!X)return!1;var oa=this.getOutFields();return-1<u.indexOf(oa,"*")||-1<u.indexOf(oa,X.name)},getFieldLabel:function(X){var oa=this.infoTemplate;oa=oa&&oa.getFieldInfo&&oa.getFieldInfo(X);
X=c.isFunction(X)?null:this.getField(X);var pa=oa||X,Z="";pa&&(Z=oa&&oa.label||X&&X.alias||pa.name||pa.fieldName);return Z},getDomain:function(X,oa){var pa,Z,ja=(oa=oa&&oa.feature)&&this.typeIdField&&oa.attributes&&oa.attributes[this.typeIdField];null!=ja&&u.some(this.types,function(ta){return ta.id==ja?((pa=ta.domains&&ta.domains[X])&&"inherited"===pa.type&&(pa=this._getLayerDomain(X),Z=!0),!0):!1},this);Z||pa||(pa=this._getLayerDomain(X));return pa},_getLayerDomain:function(X){this._createFieldsIndex();
var oa=this._fieldsIndex;if(oa)return oa=oa.caseSensitive,(oa=oa.get(X))?oa.domain:null;var pa;u.some(this.fields,function(Z){Z.name===X&&(pa=Z.domain);return!!pa});return pa},getType:function(X){return this.getTypeById(X&&this.typeIdField&&X.attributes&&X.attributes[this.typeIdField])},getTypeById:function(X){var oa;u.some(this.types,function(pa){pa.id==X&&(oa=pa);return!!oa});return oa},getSubtypeByCode:function(X){var oa;u.some(this.subtypes,function(pa){pa.code==X&&(oa=pa);return!!oa});return oa},
setEditable:function(X){if(!this._collection||this._isImageService)return this;if(!this.loaded)return this._optEditable=X,this;var oa=this._editable;this._editable=X;this._updateCaps();if(oa!==X)this.onCapabilitiesChange();return this},getEditCapabilities:function(X){var oa={canCreate:!1,canUpdate:!1,canDelete:!1,canUpdateGeometry:!1};if(!this.loaded||!this.isEditable())return oa;var pa=X&&X.feature;X=X&&X.userId||this.getUserId();var Z=u.map(this.capabilities?this.capabilities.toLowerCase().split(","):
[],c.trim),ja=(oa=-1<u.indexOf(Z,"editing"))&&-1<u.indexOf(Z,"create"),ta=oa&&-1<u.indexOf(Z,"update");Z=oa&&-1<u.indexOf(Z,"delete");var xa=this.ownershipBasedAccessControlForFeatures,Ea=this.editFieldsInfo,Ja=Ea&&Ea.creatorField;Ea=Ea&&Ea.realm;pa=(pa=pa&&pa.attributes)&&Ja?pa[Ja]:void 0;var La=!!this.userIsAdmin;Ja=!xa||La||!(!xa.allowOthersToUpdate&&!xa.allowUpdateToOthers);var Ya=!xa||La||!(!xa.allowOthersToDelete&&!xa.allowDeleteToOthers),Ua=!xa||La||!xa.hasOwnProperty("allowAnonymousToUpdate")||
xa.allowAnonymousToUpdate;xa=!xa||La||!xa.hasOwnProperty("allowAnonymousToDelete")||xa.allowAnonymousToDelete;X&&Ea&&(X=X+"@"+Ea);if(La||oa&&!(ja||ta||Z))ja=ta=Z=!0;oa={canCreate:ja,canUpdate:ta,canDelete:Z,canUpdateGeometry:La||this.allowGeometryUpdates};X||(oa.canUpdate=oa.canUpdate&&Ua,oa.canDelete=oa.canDelete&&xa);null===pa?(oa.canUpdate=oa.canUpdate&&Ja,oa.canDelete=oa.canDelete&&Ya):""!==pa&&pa&&X.toLowerCase()!==pa.toLowerCase()&&(oa.canUpdate=oa.canUpdate&&Ja,oa.canDelete=oa.canDelete&&Ya);
return oa},getUserId:function(){var X;this.loaded&&(X=this.credential&&this.credential.userId||this.userId||"");return X},setUserIsAdmin:function(X){this.userIsAdmin=X},setEditSummaryCallback:function(X){this.editSummaryCallback=X},getEditSummary:function(X,oa,pa){pa=w.isDefined(pa)?pa:(new Date).getTime();var Z="";pa=this.getEditInfo(X,oa,pa);(oa=oa&&oa.callback||this.editSummaryCallback)&&(pa=oa(X,pa)||"");if(c.isString(pa))Z=pa;else{if(pa){X=pa.action;oa=pa.userId;var ja=pa.timeValue,ta=0;X&&ta++;
oa&&ta++;w.isDefined(ja)&&ta++;1<ta&&(Z=("edit"===X?"edit":"create")+(oa?"User":"")+(w.isDefined(ja)?pa.displayPattern:""))}Z=Z&&w.substitute(pa,this.i18n.layers.FeatureLayer[Z])}return Z},getEditInfo:function(X,oa,pa){if(this.loaded){pa=w.isDefined(pa)?pa:(new Date).getTime();oa=oa&&oa.action||"last";var Z=this.editFieldsInfo,ja=Z&&Z.creatorField,ta=Z&&Z.creationDateField,xa=Z&&Z.editorField;Z=Z&&Z.editDateField;xa=(X=X&&X.attributes)&&xa?X[xa]:void 0;Z=X&&Z?X[Z]:null;ja=this._getEditData(X&&ja?
X[ja]:void 0,X&&ta?X[ta]:null,pa);pa=this._getEditData(xa,Z,pa);switch(oa){case "creation":var Ea=ja;break;case "edit":Ea=pa;break;case "last":Ea=pa||ja}Ea&&(Ea.action=Ea===pa?"edit":"creation");return Ea}},_getEditData:function(X,oa,pa){if(w.isDefined(oa)){var Z=pa-oa;var ja=0>Z?"Full":6E4>Z?"Seconds":12E4>Z?"Minute":36E5>Z?"Minutes":72E5>Z?"Hour":864E5>Z?"Hours":6048E5>Z?"WeekDay":"Full"}if(void 0!==X||ja){var ta=ta||{};ta.userId=X;ja&&(X=q.format,pa=new Date(oa),ta.minutes=Math.floor(Z/6E4),ta.hours=
Math.floor(Z/36E5),ta.weekDay=X(pa,{datePattern:"EEEE",selector:"date"}),ta.formattedDate=X(pa,{selector:"date"}),ta.formattedTime=X(pa,{selector:"time"}),ta.displayPattern=ja,ta.timeValue=oa)}return ta},isEditable:function(){return!(!this._editable&&!this.userIsAdmin)},isQueryable:function(){var X=u.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],c.trim);return this._isStream||this.userIsAdmin||this._collection||-1!==u.indexOf(X,"query")||-1!==u.indexOf(X,"catalog")},setResolution:function(X){return this.setMaxAllowableOffset(X)},
setMaxAllowableOffset:function(X){this.isEditable()||(this._optMaxOffset=X,this._setMaxOffset(X,!0));return this},_resetMaxAllowableOffset:function(){this.setMaxAllowableOffset(this._optMaxOffset);this._prevScale=null;this._refreshMaxAllowableOffset()},_refreshMaxAllowableOffset:function(){this._calcMaxOffsetForAutoSnapshot();this._updateMaxOffset();this._needsRefresh=!1},getResolution:function(){return this.getMaxAllowableOffset()},getMaxAllowableOffset:function(){var X=this._quantizationParameters?
this._quantizationParameters.tolerance:void 0;return null!=this._maxOffset?this._maxOffset:X},_setMaxOffset:function(X,oa){if(null==X)return delete this._maxOffset,delete this._quantizationParameters,this;this.quantize&&this.supportsCoordinatesQuantization?("esriGeometryPolyline"===this.geometryType?this._maxOffset=X:delete this._maxOffset,this._quantizationParameters=X?{mode:"view",originPosition:"upperLeft",tolerance:X,extent:this.fullExtent}:null):(this._isFractionalOffsetAllowed()&&oa||(X=Math.floor(X)),
isNaN(X)||0===X?delete this._maxOffset:this._maxOffset=X,delete this._quantizationParameters);return this},_isFractionalOffsetAllowed:function(){return null==this.version||10.1<=this.version||navigator.languages&&this._isLangWithDot(navigator.languages[0])},_isLangWithDot:function(X){X=(X=X&&X.split("-"))&&X[0]&&X[0].toLowerCase();return-1!==u.indexOf(this._langsWithDot,X)},_langsWithDot:"ar en et fr he ja ko th vi zh".split(" "),setAutoGeneralize:function(X){this.loaded?this._canAutoGeneralize()&&
((this._autoGeneralize=X)?(this._isAutoSnapshotMode()&&(this._prevScale=null),this._updateMaxOffset()):this._setMaxOffset(null)):this._optAutoGen=X;return this},_canAutoGeneralize:function(){return!this.isEditable()&&this.mode!==Ca.MODE_SNAPSHOT},setGDBVersion:function(X){this._collection||X===this.gdbVersion||!X&&!this.gdbVersion||(this.gdbVersion=X,this._task.gdbVersion=X,this._url.query=c.mixin(this._url.query,{gdbVersion:X}),this.loaded&&(this.clearSelection(),this._map&&this.refresh()),this.onGDBVersionChange());
return this},hasAllFeatures:function(){return this._mode?this._mode.hasAllFeatures():!0},hasUpdateError:function(){return this._mode?this._mode.hasUpdateError():!1},setDefinitionExpression:function(X){this._defnExpr=X;this._hasPendingLimitQuery()||((X=this._checkFeatureLimit())?this._evalModeAndApplyDefnExpr(X):this._applyDefnExpr());return this},_applyDefnExpr:function(){var X=this._mode;X&&X.propertyChangeHandler(1)},_evalModeAndApplyDefnExpr:function(X){X.then(c.hitch(this,function(oa){oa&&(oa instanceof
Error||!oa.modeChanged)&&this._applyDefnExpr()}))},getDefinitionExpression:function(){return this._defnExpr},hasDefinitionExpressionWithCurrentTimestamp:function(){return this.reSQLCurrentTimestamp.test(this.getDefinitionExpression())},setTimeDefinition:function(X){this._isSnapshotMode()&&(this._timeDefn=X,(X=this._mode)&&X.propertyChangeHandler(2));return this},getTimeDefinition:function(){return this._timeDefn},setTimeOffset:function(X,oa){this._timeOffset=X;this._timeOffsetUnits=oa;(X=this._mode)&&
X.propertyChangeHandler(0);return this},setUseMapTime:function(X){this.useMapTime=X;this._toggleTime(!this.suspended);(X=this._mode)&&X.propertyChangeHandler(0)},selectFeatures:function(X,oa,pa,Z){oa=oa||Ca.SELECTION_NEW;this._hasSelectionError=this._hasPartialSelectedFeatures=!1;X=this._getShallowClone(X);var ja=this._map,ta=this,xa=D._fixDfd(new d(D._dfdCanceller));X.outFields=this.getOutFields();X.returnGeometry=!0;X.multipatchOption=this.multipatchOption;ja&&(X.outSpatialReference=new C(ja.spatialReference.toJson()));
if(!this._applyQueryFilters(X,!0)){var Ea={features:[]};this._selectHandler(Ea,oa,pa,Z,xa);return xa}if(ja=this._canDoClientSideQuery(X))xa._pendingDfd=n(this._doQuery(X,ja)),xa._pendingDfd.then(function(La){Ea={features:La};ta._selectHandler(Ea,oa,pa,Z,xa)});else{if(this._collection)return this._resolve([Error("FeatureLayer::selectFeatures - "+this.invalidParams)],null,Z,xa,!0),xa;if(this.loaded&&!this.isQueryable())return this._resolve([Error("Layer does not support query capability.")],null,Z,
xa,!0),xa;var Ja=this;this._ts&&(X._ts=(new Date).getTime());ja=this._canFetchPBFForQuery(X);this._enableEditModeQuantization(X,ja);(xa._pendingDfd=this._task.execute(X,null,null,ja?{format:"pbf"}:null)).addCallbacks(function(La){Ja._selectHandler(La,oa,pa,Z,xa)},function(La){Ja._hasPartialSelectedFeatures=!0;Ja._hasSelectionError=!0;Ja._resolve([La],null,Z,xa,!0)})}return xa},getSelectedFeatures:function(){var X=this._selectedFeatures,oa=[],pa;for(pa in X)X.hasOwnProperty(pa)&&oa.push(X[pa]);return oa},
clearSelection:function(X){var oa=this._selectedFeatures,pa=this._mode,Z;for(Z in oa)oa.hasOwnProperty(Z)&&(this._unSelectFeatureIIf(Z,pa),pa._removeFeatureIIf(Z));this._selectedFeatures={};this._isSelOnly&&pa._applyTimeFilter(!0);if(!X)this.onSelectionClear();return this},setSelectionSymbol:function(X){if(this._selectionSymbol=X){var oa=this._selectedFeatures,pa;for(pa in oa)oa.hasOwnProperty(pa)&&oa[pa].setSymbol(X)}return this},getSelectionSymbol:function(){return this._selectionSymbol},setLabelingInfo:function(X){X?
(this.labelingInfo=X,this._fixLabelExpr()):delete this.labelingInfo;this._collection&&(this._typesDirty=!0);this._evalSurfaceType();this.onLabelingInfoChange()},_fixLabelExpr:function(){var X=/\[([^\[\]]+)\]/ig,oa,pa=this,Z=function(ja,ta){ja=pa._getField(ta,!0);return"["+(ja&&ja.name||ta)+"]"};u.forEach(this.labelingInfo,function(ja){if(oa=ja.labelExpression)ja.labelExpression=oa.replace(X,Z)})},_updateRequiredFieldsFromLabelingInfo:function(){var X=[];u.forEach(this.labelingInfo,function(oa){var pa=
oa.labelExpressionInfo;if(oa.labelExpression){var Z=/[\[\]]/ig;oa=oa.labelExpression.match(/\[[^\[\]]+\]/ig);(oa=u.map(oa,function(ta){return ta.replace(Z,"")}))&&(X=X.concat(oa))}if(pa){if(pa.value){var ja=/[\{\}]/ig;oa=pa.value.match(/\{[^\{\}]+\}/ig);(oa=u.map(oa,function(ta){return ta.replace(ja,"")}))&&(X=X.concat(oa))}pa.expression&&(oa=u.map(this.fields,function(ta){return ta.name},this),X=X.concat(Q.extractFieldNames(pa.expression,oa)))}},this);X=u.map(X,function(oa){var pa=this.getField(oa);
return pa?pa.name:oa},this);this._requiredFields&&(this._requiredFields=this._requiredFields.concat(X))},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(X,oa,pa,Z,ja,ta){var xa=ta.assembly,Ea=ta.dfd;this._applyNormalized(X,xa&&xa[0]);this._applyNormalized(oa,xa&&xa[1]);this.onBeforeApplyEdits(X,oa,pa);var Ja={},La=this.objectIdField;xa={f:"json"};var Ya=!1;if(this._collection)ta={},ta.addResults=X?u.map(X,function(){Ya=!0;return{objectId:this._nextId++,success:!0}},this):
null,ta.updateResults=oa?u.map(oa,function(ab){Ya=!0;var fb=ab.attributes[La];Ja[fb]=ab;return{objectId:fb,success:!0}},this):null,ta.deleteResults=pa?u.map(pa,function(ab){Ya=!0;return{objectId:ab.attributes[La],success:!0}},this):null,Ya?this._editHandler(ta,X,Ja,Z,ja,Ea):this._resolve([ta.addResults,ta.updateResults,ta.deleteResults],null,Z,Ea);else{X&&0<X.length&&(xa.adds=this._convertFeaturesToJson(X,0,1),Ya=!0);if(oa&&0<oa.length){for(ta=0;ta<oa.length;ta++){var Ua=oa[ta];Ja[Ua.attributes[La]]=
Ua}xa.updates=this._convertFeaturesToJson(oa,0,0,1);Ya=!0}if(pa&&0<pa.length){oa=[];for(ta=0;ta<pa.length;ta++)oa.push(pa[ta].attributes[La]);xa.deletes=oa.join(",");Ya=!0}if(Ya){var Ta=this;return x({url:this._url.path+"/applyEdits",content:c.mixin(xa,this._url.query),callbackParamName:"callback",load:function(ab){Ta._editHandler(ab,X,Ja,Z,ja,Ea)},error:function(ab){Ta._resolve([ab],null,ja,Ea,!0)}},{usePost:!0})}this._resolve([],null,Z,Ea)}},queryFeatures:function(X,oa,pa,Z){return this._query("execute",
"onQueryFeaturesComplete",X,oa,pa,Z)},queryRelatedFeatures:function(X,oa,pa){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",X,oa,pa)},queryIds:function(X,oa,pa,Z){return this._query("executeForIds","onQueryIdsComplete",X,oa,pa,Z)},queryCount:function(X,oa,pa,Z){return this._query("executeForCount","onQueryCountComplete",X,oa,pa,Z)},queryExtent:function(X,oa,pa,Z){return this._query("executeForExtent","onQueryExtentComplete",X,oa,pa,Z)},queryAttachmentInfos:function(X,
oa,pa){var Z=this._url.path+"/"+X+"/attachments",ja=new d(D._dfdCanceller),ta=this;Z=y.normalize(Z);ja._pendingDfd=x({url:Z,content:c.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(xa){xa=xa.attachmentInfos;var Ea;u.forEach(xa,function(Ja){Ea=m.objectToQuery({gdbVersion:ta._url.query&&ta._url.query.gdbVersion,layer:ta._url.query&&ta._url.query.layer,token:ta._getToken()});Ja.url=Z+"/"+Ja.id+(Ea?"?"+Ea:"");Ja.objectId=X});ta._resolve([xa],"onQueryAttachmentInfosComplete",
oa,ja)},error:function(xa){ta._resolve([xa],null,pa,ja,!0)}});return ja},addAttachment:function(X,oa,pa,Z){return this._sendAttachment("add",X,oa,pa,Z)},updateAttachment:function(X,oa,pa,Z,ja){pa.appendChild(a.create("input",{type:"hidden",name:"attachmentId",value:oa}));return this._sendAttachment("update",X,pa,Z,ja)},deleteAttachments:function(X,oa,pa,Z){var ja=this._url.path+"/"+X+"/deleteAttachments",ta=new d(D._dfdCanceller),xa=this;oa={f:"json",attachmentIds:oa.join(",")};ta._pendingDfd=x({url:ja,
content:c.mixin(oa,this._url.query),callbackParamName:"callback",load:c.hitch(this,function(Ea){Ea=Ea.deleteAttachmentResults;Ea=u.map(Ea,function(Ja){Ja=new za(Ja);Ja.attachmentId=Ja.objectId;Ja.objectId=X;return Ja});xa._resolve([Ea],"onDeleteAttachmentsComplete",pa,ta)}),error:function(Ea){xa._resolve([Ea],null,Z,ta,!0)}},{usePost:!0});return ta},addType:function(X){var oa=this.types;if(oa){if(u.some(oa,function(pa){return pa.id==X.id?!0:!1}))return!1;oa.push(X)}else this.types=[X];return this._typesDirty=
!0},deleteType:function(X){if(this._collection){var oa=this.types;if(oa){var pa=-1;u.some(oa,function(Z,ja){return Z.id==X?(pa=ja,!0):!1});if(-1<pa)return this._typesDirty=!0,oa.splice(pa,1)[0]}}},toJson:function(){var X=this._cloneJson();if(X){X=X.layerDefinition?X:{layerDefinition:X};var oa=X.layerDefinition,pa=this._collection;this._updateLayerDefinition(oa);var Z=null;if(!pa||this._fcAdded)Z={geometryType:oa.geometryType,features:this._convertFeaturesToJson(this.graphics,!0)};X.featureSet=c.mixin({},
X.featureSet||{},Z);if(X.featureSet.transform){var ja=X.featureSet.transform;delete X.featureSet.transform;Z=new J(X.featureSet);Z.quantize(ja);X.featureSet=Z.toJson()}pa&&(X.nextObjectId=this._nextId,oa.capabilities=this.capabilities);return X}},getLayerDefinition:function(){var X=this._cloneJson();(X=X?X.layerDefinition||X:null)&&this._updateLayerDefinition(X);return X},getFeatureCollectionLayer:function(X){var oa=new d,pa=this.getLayerDefinition();if(!pa)return oa.reject(Error("layerDefinition not available")),
oa.promise;X=X||[];var Z=new Ca({layerDefinition:pa,featureSet:{geometryType:pa.geometryType,features:u.map(X,function(xa){return xa.toJson()})}}),ja=Z.on("load",function(){ja.remove();ta.remove();oa.resolve(Z)}),ta=Z.on("error",function(){Z.loaded||(ja.remove(),ta.remove(),oa.reject(Z.loadError))});return oa.promise},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},
onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryExtentComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},onLabelingInfoChange:function(){},onFeatureReductionRendererChange:function(){},onFeatureReductionChange:function(){},onFeatureUpdatesResult:function(){},
_cloneJson:function(){var X=this._json;return c.isString(X)?t.fromJson(X):c.clone(X)},_updateLayerDefinition:function(X){if(this._collection&&this._typesDirty){X.types=u.map(this.types||[],function(ja){return ja.toJson()});var oa=this.renderer,pa=this.labelingInfo,Z=X.drawingInfo;!oa&&!pa||Z||(Z=X.drawingInfo={});Z&&oa&&-1===oa.declaredClass.indexOf("TemporalRenderer")&&(Z.renderer=oa.toJson());pa&&(Z.labelingInfo=u.map(pa,function(ja){return ja.toJson()}))}},_evalFeatureUpdates:function(){if(!this._featureUpdatesPromise||
this._featureUpdatesPromise.isFulfilled())this._featureUpdatesPromise=this.hasFeatureUpdates().otherwise(function(X){return!(X&&"cancel"===X.dojoType)}).always(c.hitch(this,function(X){this._featureUpdatesPromise=null;this.onFeatureUpdatesResult({hasUpdates:X})}))},_evalRefresh:function(X){(X.hasUpdates||this.hasDefinitionExpressionWithCurrentTimestamp())&&this.refresh()},_evalArcadeSupport:function(){var X=new d;setTimeout(c.hitch(this,function(){this._initializeArcadeEngine().always(function(){X.resolve()})}),
0);return X.promise},_initializeArcadeEngine:function(){var X=[],oa=this.infoTemplate;oa&&oa.initializeArcadeEngine&&X.push(oa.initializeArcadeEngine());(oa=this.renderer)&&oa.initializeArcadeEngine&&X.push(oa.initializeArcadeEngine());var pa=[];u.forEach(this.labelingInfo,function(Z){(Z=Z.labelExpressionInfo)&&Z.expression&&pa.push(Z.expression)});X.push(S.initialize(pa));return E(X)},_isGeometryOperationsUsed:function(){var X=this.infoTemplate,oa=this.renderer,pa=this.labelingInfo;return X&&X.hasGeometryOperations&&
X.hasGeometryOperations()||oa&&oa.hasGeometryOperations&&oa.hasGeometryOperations()||u.some(pa,function(Z){return Q.hasGeometryOperations(Z.labelExpressionInfo&&Z.labelExpressionInfo.expression)})?!0:!1},_forceIdentity:function(){var X=new d,oa=this,pa=this._url&&this._url.path;var Z=pa&&pa.toLowerCase().indexOf("/rest/services");var ja=this.editFieldsInfo;ja=ja&&(ja.creatorField||ja.editorField);(this.userIsAdmin||ja)&&!this._getToken()&&-1<Z&&b.id?(Z=pa.substring(0,Z)+"/rest/info",x({url:Z,content:{f:"json"},
handleAs:"json",callbackParamName:"callback"}).then(function(ta){if(ta.owningSystemUrl)return b.id.checkSignInStatus(ta.owningSystemUrl+"/sharing")}).then(function(ta){if(ta)return b.id.getCredential(pa)}).then(function(ta){ta&&oa._findCredential()}).always(function(){X.resolve()})):X.resolve();return X.promise},_isSnapshotMode:function(){return this._mode?this._mode.isInstanceOf(Ga):!1},_isOnDemandMode:function(){return this._mode?this._mode.isInstanceOf(ba):!1},_isAutoSnapshotMode:function(){return this._isAutoModeEnabled()&&
this.currentMode===Ca.MODE_SNAPSHOT},_getMaxFeaturesForAutoSnapshotMode:function(){var X=this.geometryType;if("esriGeometryPolyline"===X||"esriGeometryPolygon"===X||"esriGeometryMultipoint"===X||this.hasXYFootprint())var oa=this.maxRecordCountForAuto;else"esriGeometryPoint"===X&&(oa=this.maxPointCountForAuto);return oa},getLastExceedsLimitResult:function(){return this._lastExceedsLimitResult},_canUseSnapshotMode:function(X){this._lastExceedsLimitResult=X=(X=X&&X.features&&X.features[0])&&X.attributes&&
X.attributes.exceedslimit;return!(this.mode!==Ca.MODE_AUTO||this.isEditable()||0!==X||!(this._isPaginationAllowed()||this.maxRecordCount>=this._getMaxFeaturesForAutoSnapshotMode()))},_evalModeFromFLimit:function(X){this._canUseSnapshotMode(X)?this._enableAutoSnapshotMode():this._enableAutoOnDemandMode()},_enableAutoSnapshotMode:function(){var X=Ca.MODE_SNAPSHOT;this.isFeatureReductionApplied()?this._updatePreFReductionState(X):this._preSurfaceChangeState?(this._updatePreSurfaceChangeState(X),this._evalSurfaceType(!0)):
this.currentMode!==X&&this._setFetchMode(Ca.MODE_AUTO,X)},_enableAutoOnDemandMode:function(){var X=Ca.MODE_ONDEMAND;this.isFeatureReductionApplied()?this._updatePreFReductionState(X):this._preSurfaceChangeState?this._updatePreSurfaceChangeState(X):this.currentMode!==X&&(this._setFetchMode(Ca.MODE_AUTO,X),this._evalSurfaceType())},_evalModeFromFReduction:function(X){this.loaded&&(X&&this.isFeatureReductionEnabled()&&this._canCluster(X)?this._enableFReductionMode():this._disableFReductionMode())},_enableFReductionMode:function(){this._evalSurfaceType(!0);
if(!this._preFReductionState){var X=this.currentMode;X!==Ca.MODE_SNAPSHOT&&X!==Ca.MODE_STREAM&&X!==Ca.MODE_SELECTION&&(this._preFReductionState={mode:this.mode,currentMode:this.currentMode},this._setFetchMode(this.mode===Ca.MODE_AUTO?Ca.MODE_AUTO:Ca.MODE_SNAPSHOT,Ca.MODE_SNAPSHOT))}},_disableFReductionMode:function(){var X=this._preFReductionState;this._preFReductionState=null;!X||X.mode===this.mode&&X.currentMode===this.currentMode||(this._setFetchMode(X.mode,X.currentMode),this._evalSurfaceType())},
_updatePreFReductionState:function(X){this._preFReductionState=this._preFReductionState||{};this._preFReductionState.mode=Ca.MODE_AUTO;this._preFReductionState.currentMode=X},_evalModeFromSurface:function(){this.hasWebGLSurface()?this._enableWebGLSurfaceMode():this._disableWebGLSurfaceMode()},_enableWebGLSurfaceMode:function(){this._preSurfaceChangeState||(this._preSurfaceChangeState={mode:this.mode,currentMode:this.currentMode},this._setFetchMode(this.mode===Ca.MODE_AUTO?Ca.MODE_AUTO:Ca.MODE_ONDEMAND,
Ca.MODE_ONDEMAND,this.webglDeps.OnDemandDrillMode))},_disableWebGLSurfaceMode:function(){var X=this._preSurfaceChangeState;X&&(this._preSurfaceChangeState=null,this._setFetchMode(X.mode,X.currentMode))},_updatePreSurfaceChangeState:function(X){this._preSurfaceChangeState=this._preSurfaceChangeState||{};this._preSurfaceChangeState.mode=Ca.MODE_AUTO;this._preSurfaceChangeState.currentMode=X},_setFetchMode:function(X,oa,pa){this.clearSelection();this._mode.suspend();this._mode.destroy();this.mode=X;
this.currentMode=oa;pa=pa||this._getModeConstructor(oa);this._mode=new pa(this);this.queryPagination=oa===Ca.MODE_ONDEMAND&&-1===pa.prototype.declaredClass.toLowerCase().indexOf("ondemanddrillmode")?!1:this._isPaginationAllowed();(X=this.getMap())&&X.loaded&&(this._resetMaxAllowableOffset(),this._mode.initialize(X),this._mode.startup())},_isPaginationAllowed:function(){return!(!this._optQueryPagination||this.loaded&&!this.advancedQueryCapabilities.supportsPagination)},_getModeConstructor:function(X){var oa;
X===Ca.MODE_SNAPSHOT?oa=Ga:X===Ca.MODE_ONDEMAND&&(oa=ba);return oa},_hasOnDemandDrillMode:function(){var X=this._mode;X=X&&X.declaredClass;return!!(X&&-1<X.toLowerCase().indexOf("ondemanddrillmode"))},_checkFeatureLimit:function(){this._limitPromise&&(this._limitPromise.cancel(),this._limitPromise=null);var X=this._queryLimit();X&&(this._lastExceedsLimitResult=null,this._limitPromise=X.then(c.hitch(this,function(oa){var pa=this.currentMode;this._evalModeFromFLimit(oa);return{modeChanged:this.currentMode!==
pa}})).always(c.hitch(this,function(oa){this._limitPromise=null;return oa})));return this._limitPromise},_hasPendingLimitQuery:function(){return!!this._exceedsLimitTimer},_queryLimit:function(){if(this._isAutoModeEnabled()){var X,oa,pa=new d(function(){clearTimeout(X);X=null;oa&&!oa.isFulfilled()&&oa.cancel();oa=null});this._exceedsLimitTimer=X=setTimeout(c.hitch(this,function(){this._exceedsLimitTimer=null;var Z=new P,ja=new U;ja.statisticType="exceedslimit";ja.maxPointCount=this.maxPointCountForAuto;
ja.maxRecordCount=this.maxRecordCountForAuto;ja.maxVertexCount=this.maxVertexCountForAuto;ja.outStatisticFieldName="exceedslimit";Z.outStatistics=[ja];oa=this.queryFeatures(Z).promise.then(function(ta){pa.resolve(ta)}).otherwise(function(ta){pa.reject(ta)})}),0);return pa.promise}},_isAutoModeEnabled:function(){return this.mode===Ca.MODE_AUTO&&this.reHostedFS.test(this.url)},_updateCaps:function(){var X=this._editable,oa=c.trim(this.capabilities||""),pa=u.map(oa?oa.split(","):[],c.trim),Z=u.map(oa?
oa.toLowerCase().split(","):[],c.trim);oa=u.indexOf(Z,"editing");var ja;Z={Create:u.indexOf(Z,"create"),Update:u.indexOf(Z,"update"),Delete:u.indexOf(Z,"delete")};if(X&&-1===oa)pa.push("Editing");else if(!X&&-1<oa){X=[oa];for(ja in Z)-1<Z[ja]&&X.push(Z[ja]);X.sort();for(ja=X.length-1;0<=ja;ja--)pa.splice(X[ja],1)}this.capabilities=pa.join(",")},_counter:{value:0},_getUniqueId:function(){return this._counter.value++},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(X){this._toggleTime(!1);
this._refreshHandle&&(this._refreshHandle.remove(),this._refreshHandle=null);var oa=this._mode;oa&&(oa.suspend(),X&&oa.destroy())},onResume:function(X){this.inherited(arguments);this._toggleTime(!0);this._refreshHandle=this.on("feature-updates-result",c.hitch(this,this._evalRefresh));var oa=this._map,pa=this._getRenderer();if(X.firstOccurrence){if(this._fixRendererFields(),this._updateRequiredFieldsFromLabelingInfo(),this._checkFields(),this.clearSelection(),this._evalFeatureReduction(),this.timeInfo&&
!this._trackManager&&(this._trackIdField||pa&&(pa.latestObservationRenderer||pa.trackRenderer))&&(this._trackManager=new Fa(this),this._trackManager.initialize(oa),this._childLayer=this._trackManager.container),pa&&"colors"in pa&&"blurRadius"in pa&&"maxPixelIntensity"in pa&&"esriGeometryPoint"==this.geometryType&&!this._heatmapManager&&(this._heatmapManager=new O(this),this._heatmapManager.initialize(oa)),this._zoomConnect=e.connect(oa,"onZoomEnd",this,this._zoomEndHandler),this._refreshMaxAllowableOffset(),
pa=this._mode)pa._init||pa.initialize(oa),pa.startup()}else this._zoomEndHandler(),this._mode&&this._mode.resume()},_zoomEndHandler:function(){var X=this._map;this._updateMaxOffset();this._prevScale=X.getScale();!this.suspended&&this._needsRefresh&&this.refresh()},_updateMaxOffset:function(){var X=this._map;X&&X.loaded&&this._autoGeneralize&&(this._isAutoSnapshotMode()?(X=this.getMaxAllowableOffset(),this._setMaxOffset(this._getMaxOffsetForScale(),!0),this._needsRefresh||(this._needsRefresh=X!=this.getMaxAllowableOffset())):
this._setMaxOffset(X.extent.getWidth()/X.width,!X.extent.spatialReference.isWebMercator()))},_getMaxOffsetForScale:function(){if(this._map){var X=this._map.getScale(),oa=this._calculatedScale,pa=this._calcMaxOffset,Z=this._prevScale;return X>=oa&&(null==Z||Z<oa)?pa:X<oa&&(null==Z||Z>=oa)?null:this.getMaxAllowableOffset()}},_calcMaxOffsetForAutoSnapshot:function(){var X=this._map;if(X&&this._canAutoGeneralize()&&this._isAutoSnapshotMode()&&this._autoGeneralize&&null==this.getMaxAllowableOffset()){var oa=
this.generalizeForScale;this._calculatedScale=oa=this.maxScale?this.maxScale:this.minScale?Math.min(oa,this.minScale):Math.min(oa,T.getScale(X,this.initialExtent));this._calcMaxOffset=X.extent.getWidth()/X.width/X.getScale()*oa}else this._calculatedScale=this._calcMaxOffset=void 0},_toggleTime:function(X){var oa=this._map;X&&this.timeInfo&&this.useMapTime&&oa?(this._mapTimeExtent=oa.timeExtent,this._timeConnect||(this._timeConnect=e.connect(oa,"onTimeExtentChange",this,this._timeChangeHandler))):
(this._mapTimeExtent=null,e.disconnect(this._timeConnect),this._timeConnect=null)},_timeChangeHandler:function(X){this._mapTimeExtent=X;(X=this._mode)&&X.propertyChangeHandler(0)},_getOffsettedTE:function(X){var oa=this._timeOffset,pa=this._timeOffsetUnits;return X&&oa&&pa?X.offset(-1*oa,pa):X},_getTimeOverlap:function(X,oa){return X&&oa?X.intersection(oa):X||oa},_getTimeFilter:function(X){var oa=this.getTimeDefinition();if(oa){var pa=this._getTimeOverlap(oa,null);if(!pa)return[!1]}if(X){if(X=pa?
this._getTimeOverlap(X,pa):X,!X)return[!1]}else X=pa;return[!0,X]},_getAttributeFilter:function(X){var oa=[],pa=this.getDefinitionExpression();pa&&oa.push(pa);X&&oa.push(X);this.subtypeField&&this.subtypeCode&&oa.push(this.subtypeField+" \x3d "+this.subtypeCode);1<oa.length&&(oa=u.map(oa,function(Z){return"("+Z+")"}));return oa.length?oa.join(" AND "):null},_applyQueryFilters:function(X,oa){X.where=this._getAttributeFilter(X.where);X.returnGeometry&&null==X.maxAllowableOffset&&!X.quantizationParameters&&
(X.maxAllowableOffset=this._maxOffset,X.quantizationParameters=this._quantizationParameters);oa&&this.supportsAdvancedQueries&&(X.orderByFields=X.orderByFields||this.getOrderByFields());if(this.timeInfo)if(oa=this._getTimeFilter(X.timeExtent),oa[0])X.timeExtent=oa[1];else return!1;return!0},_add:function(X){var oa=this._selectionSymbol,pa=X.attributes,Z=this.visibilityField;oa&&this._isSelOnly&&X.setSymbol(oa);if(Z&&pa&&pa.hasOwnProperty(Z))X[pa[Z]?"show":"hide"]();return this.add.apply(this,arguments)},
_remove:function(){return this.remove.apply(this,arguments)},_canDoClientSideQuery:function(X,oa){var pa=[],Z=this._map,ja;if((this._collection||!this._isTable&&Z)&&!(X.text||X.where&&X.where!==this.getDefinitionExpression()||X.orderByFields&&X.orderByFields.length&&(ja=this.getOrderByFields()||[])&&X.orderByFields.join()!==ja.join()||X.outStatistics||X.returnDistinctValues)){ja=this._isSnapshotMode();var ta=this._isSelOnly;oa=ja?null:oa?this._getExtentOfTiles(Z.extent):Z.extent;if(Z=X.geometry){if(ta||
X.spatialRelationship!==P.SPATIAL_REL_INTERSECTS||"extent"!==Z.type||!ja&&!oa.contains(Z))return;pa.push(1)}if(oa=X.objectIds)if(ja)pa.push(2);else{Z=oa.length;var xa=this._mode,Ea=0,Ja;for(Ja=0;Ja<Z;Ja++)xa._getFeature(oa[Ja])&&Ea++;if(Ea===Z)pa.push(2);else return}if(this.timeInfo)if(X=X.timeExtent,oa=this._mapTimeExtent,ja)X&&pa.push(3);else if(ta){if(X)return}else if(oa)if(-1!==u.indexOf(pa,2))X&&pa.push(3);else if(-1!==u.indexOf(pa,1))X==oa&&pa.push(3);else return;else if(0<pa.length)X&&pa.push(3);
else if(X)return;return 0<pa.length?pa:null}},_getAbsMid:function(X){return f.toAbsMid?f.toAbsMid(X):B.id.replace(/\/[^\/]*$/ig,"/")+X},_doQuery:function(X,oa,pa){var Z=[],ja=this.objectIdField,ta=this,xa=new d,Ea=new d,Ja=this.graphics;if(-1!==u.indexOf(oa,1)){var La=this.spatialIndex||this._map&&this._map.spatialIndex,Ya,Ua=X.geometry._normalize(null,!0);null==La&&ea.autoSpatialIndexing?Ya=(this._map||this).addPlugin(this._getAbsMid("../plugins/spatialIndex")).then(c.hitch(this,c.partial(this._getFromIndex,
Ua,La)),function(Ta){Ea.resolve(c.hitch(this,c.partial(this._filterByExtent,Ja,Ua)))}):La&&(Ya=this._getFromIndex(Ua,La));Ya?Ya.then(function(Ta){for(var ab=0;ab<Ta.length;ab++)Ta[ab].results&&(Z=Z.concat(Ta[ab].results));Ea.resolve(Z)}).otherwise(function(Ta){Ea.reject(Ta)}):Ea.resolve(this._filterByExtent(Ja,Ua))}else Ea.resolve(Ja);Ea.then(function(Ta){Z=Ta;if(-1!==u.indexOf(oa,2)){var ab=X.objectIds;Z=u.filter(Z,function(fb){return-1<u.indexOf(ab,fb.attributes[ja])})}-1!==u.indexOf(oa,3)&&ta.timeInfo&&
(Ta=X.timeExtent,Z=ta._filterByTime(Z,Ta.startTime,Ta.endTime).match);pa&&(Z=u.map(Z,function(fb){return fb.attributes[ja]},this));xa.resolve(Z)});return xa},_getFromIndex:function(X,oa){oa=oa||this.spatialIndex||this._map.spatialIndex;X instanceof Array||(X=[X]);var pa=this.id;return k(u.map(X,function(Z){return oa.intersects(Z,pa)}))},_filterByExtent:function(X,oa){for(var pa=[],Z=0,ja=X.length;Z<ja;Z++){var ta=X[Z],xa=ta.geometry;xa&&(this.normalization&&oa.length?(oa[0].intersects(xa)||oa[1].intersects(xa))&&
pa.push(ta):oa.intersects(xa)&&pa.push(ta))}return pa},_filterByTime:function(X,oa,pa){var Z=this._startTimeField,ja=this._endTimeField,ta;this._twoTimeFields||(ta=Z||ja);var xa=w.isDefined,Ea=[],Ja=[],La,Ya=X.length;oa=oa?oa.getTime():-Infinity;pa=pa?pa.getTime():Infinity;if(ta)for(La=0;La<Ya;La++){var Ua=X[La];var Ta=Ua.attributes;Z=Ta[ta];Z>=oa&&Z<=pa?Ea.push(Ua):Ja.push(Ua)}else for(La=0;La<Ya;La++)Ua=X[La],Ta=Ua.attributes,ta=Ta[Z],Ta=Ta[ja],ta=xa(ta)?ta:-Infinity,Ta=xa(Ta)?Ta:Infinity,ta>=oa&&
ta<=pa||Ta>=oa&&Ta<=pa||oa>=ta&&pa<=Ta?Ea.push(Ua):Ja.push(Ua);return{match:Ea,noMatch:Ja}},_getSizeVariables:function(X){return X&&u.filter(X.getVisualVariablesForType("sizeInfo",!1),function(oa){return!(!oa.field&&!oa.valueExpression)})},_needClientSideSorting:function(X){return this._collection?!(!X||!X.length):u.some(X,function(oa){return!!oa.valueExpression})},_sortFeatures:function(X){var oa=this.renderer,pa=this._getSizeVariables(oa);if(X&&1<X.length&&this._needClientSideSorting(pa)){var Z=
pa[0],ja=this;X.sort(function(ta,xa){ta._layer||(ta._layer=ja);xa._layer||(xa._layer=ja);ta=oa._getDataValue(ta,Z,"sizeInfo");xa=oa._getDataValue(xa,Z,"sizeInfo");return null==ta?-1:null==xa?1:xa-ta})}return X},_resolve:function(X,oa,pa,Z,ja){oa&&this[oa].apply(this,X);pa&&pa.apply(null,X);Z&&D._resDfd(Z,X,ja)},_getShallowClone:function(X){var oa=new P,pa;for(pa in X)X.hasOwnProperty(pa)&&(oa[pa]=X[pa]);return oa},_canFetchPBF:function(){return!!(Oa&&Na&&this.supportsFormatPBF)},_canFetchPBFForQuery:function(X){return!(!this._canFetchPBF()||
!this._isCacheHintEnabled(X)&&this._isAutoSnapshotMode()||!(X.quantizationParameters||!this.isEditable()&&this.supportsQuantizationEditMode)||X.outStatistics)},_enableEditModeQuantization:function(X,oa){X&&oa&&!X.quantizationParameters&&(X.quantizationParameters={mode:"edit"})},_enableCacheHint:function(X,oa){var pa=this.advancedQueryCapabilities;pa&&pa.supportsQueryWithCacheHint?null==X.cacheHint&&(X.cacheHint=!0):pa&&pa.supportsQueryWithResultType&&this.reHostedFS.test(this.url)&&!X.resultType&&
(X.resultType=oa||"coherent")},_isCacheHintSupported:function(){var X=this.advancedQueryCapabilities;return X?!!(X.supportsQueryWithCacheHint||X.supportsQueryWithResultType&&this.reHostedFS.test(this.url)):!1},_isCacheHintEnabled:function(X){var oa=this.advancedQueryCapabilities;return X&&oa?!!(oa.supportsQueryWithCacheHint&&X.cacheHint||oa.supportsQueryWithResultType&&this.reHostedFS.test(this.url)&&("coherent"===X.resultType||"tile"===X.resultType)):!1},_query:function(X,oa,pa,Z,ja,ta){var xa=this,
Ea=this._map;ta=ta&&ta.snapToTiles;var Ja=new d(D._dfdCanceller),La=pa,Ya,Ua,Ta;if("executeRelationshipQuery"!==X){La=this._getShallowClone(pa);var ab=this.getOutFields();La.outFields||(La.outFields=ab);La.outFields&&La.outFields.length&&(Ua=-1<u.indexOf(ab,"*")?!1:!u.every(La.outFields,function(kb){return-1<u.indexOf(ab,kb)}));La.returnGeometry=pa.hasOwnProperty("returnGeometry")?pa.returnGeometry:!pa.outStatistics;La.returnGeometry&&(La.multipatchOption=this.multipatchOption,null!=La.maxAllowableOffset||
La.quantizationParameters)&&(pa=null!=La.maxAllowableOffset?La.maxAllowableOffset:La.quantizationParameters.tolerance,null!=pa&&pa!==this.getMaxAllowableOffset()&&(Ta=!0));Ea&&(Ea=Ea&&Ea.spatialReference,(pa=La.outSpatialReference)?Ya=!pa.equals(Ea):La.outSpatialReference=new C(Ea.toJson()));ta&&(Ea=La.geometry)&&"extent"===Ea.type&&(La.geometry=this._getExtentOfTiles(Ea),Ea!==La.geometry&&this._enableCacheHint(La));if(!this._applyQueryFilters(La,"execute"===X&&!La.outStatistics)){switch(X){case "execute":var fb=
new J({features:[]});break;case "executeForIds":fb=[];break;case "executeForCount":fb=0;break;case "executeForExtent":fb={}}this._resolve([fb],oa,Z,Ja);return Ja}if(ta="executeForExtent"!==X&&!Ya&&!Ua&&!Ta&&this._canDoClientSideQuery(La,ta))return Ja._pendingDfd=n(this._doQuery(La,ta,"executeForIds"===X||"executeForCount"===X)),Ja._pendingDfd.then(function(kb){switch(X){case "execute":fb=new J;fb.features=kb;break;case "executeForIds":fb=kb;break;case "executeForCount":fb=kb.length}xa._resolve([fb],
oa,Z,Ja)}),Ja}if(this._collection)return this._resolve([Error("FeatureLayer::_query - "+this.invalidParams)],null,ja,Ja,!0),Ja;if(this.loaded&&!this.isQueryable())return this._resolve([Error("Layer does not support query capability.")],null,ja,Ja,!0),Ja;this._ts&&(La._ts=(new Date).getTime());ta="execute"===X&&this._canFetchPBFForQuery(La);this._enableEditModeQuantization(La,ta);(Ja._pendingDfd=this._task[X](La,null,null,ta?{format:"pbf"}:null)).addCallbacks(function(kb){var qb=!!La.outStatistics||
Ya||Ua||Ta;if("execute"===X||"executeRelationshipQuery"===X)if("execute"===X){var ob=kb.features;var wb=ob.length;for(--wb;0<=wb;wb--)if(ob[wb]._layer=xa,!qb&&!xa._isTable){var Gb=xa._mode._getFeature(ob[wb].attributes[xa.objectIdField]);Gb&&ob.splice(wb,1,Gb)}}else for(Gb in kb)if(kb.hasOwnProperty(Gb))for(ob=kb[Gb].features,wb=ob.length,--wb;0<=wb;wb--)ob[wb]._layer=xa;xa._resolve([kb],oa,Z,Ja)},function(kb){xa._resolve([kb],null,ja,Ja,!0)});return Ja},_getExtentOfTiles:function(X){var oa=this._isOnDemandMode()&&
this._mode._gridLayer||Aa.createFromFeatureLayer({layer:this}),pa=this.getMap();pa=pa&&pa.getTargetExtent(X);return oa&&pa&&oa.getExtentOfIntersectingCells(pa)||X},_convertFeaturesToJson:function(X,oa,pa,Z){var ja=[],ta=this._selectionSymbol,xa=this.visibilityField,Ea,Ja=this.objectIdField;this.loaded&&(pa||Z)&&(Ea=u.filter(this.fields,function(fb){return!1===fb.editable&&(!Z||fb.name!==Ja)}));for(pa=0;pa<X.length;pa++){var La=X[pa],Ya={},Ua=La.geometry,Ta=La.attributes,ab=La.symbol;!Ua||Z&&this.loaded&&
!this.allowGeometryUpdates||(Ya.geometry=Ua.toJson());xa?(Ya.attributes=Ta=c.mixin({},Ta),Ta[xa]=La.visible?1:0):Ta&&(Ya.attributes=c.mixin({},Ta));Ya.attributes&&Ea&&Ea.length&&u.forEach(Ea,function(fb){delete Ya.attributes[fb.name]});ab&&ab!==ta&&(Ya.symbol=ab.toJson());ja.push(Ya)}return oa?ja:t.toJson(ja)},_selectHandler:function(X,oa,pa,Z,ja){switch(oa){case Ca.SELECTION_NEW:this.clearSelection(!0);var ta=!0;break;case Ca.SELECTION_ADD:ta=!0;break;case Ca.SELECTION_SUBTRACT:ta=!1}Z=X.features;
var xa=this._mode,Ea=[],Ja=this.objectIdField;if(ta)for(ta=0;ta<Z.length;ta++){var La=Z[ta];var Ya=La.attributes[Ja];La=xa._addFeatureIIf(Ya,La);Ea.push(La);this._selectFeatureIIf(Ya,La,xa)}else for(ta=0;ta<Z.length;ta++)La=Z[ta],Ya=La.attributes[Ja],this._unSelectFeatureIIf(Ya,xa),Ya=xa._removeFeatureIIf(Ya),Ea.push(Ya||La);this._isSelOnly&&xa._applyTimeFilter(!0);this._isImageService&&10.7>this.version&&void 0===X.exceededTransferLimit&&(X.exceededTransferLimit=Z.length===this.maxRecordCount);this._hasPartialSelectedFeatures=
!!X.exceededTransferLimit;this._resolve([Ea,oa,X.exceededTransferLimit?{queryLimitExceeded:!0}:null],"onSelectionComplete",pa,ja);if(X.exceededTransferLimit)this.onQueryLimitExceeded()},_selectFeatureIIf:function(X,oa,pa){var Z=this._selectedFeatures,ja=Z[X];ja||(pa._incRefCount(X),Z[X]=oa,this._isTable||(this._setSelectSymbol(oa),oa.attr("data-selected","")));return ja||oa},_unSelectFeatureIIf:function(X,oa){var pa=this._selectedFeatures[X];pa&&(oa._decRefCount(X),delete this._selectedFeatures[X],
this._isTable||(this._setUnSelectSymbol(pa),pa.attr("data-selected")));return pa},_setSelectSymbol:function(X){var oa=this._selectionSymbol;oa&&!this._isSelOnly&&X.setSymbol(oa)},_setUnSelectSymbol:function(X){var oa=this._selectionSymbol;oa&&!this._isSelOnly&&oa===X.symbol&&X.setSymbol(null,!0)},_getOutFields:function(){var X=[this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._requiredFields).concat(this.dataAttributes);
X=u.filter(X,function(pa,Z,ja){return!!pa&&u.indexOf(ja,pa)===Z});var oa=c.clone(this._outFields);if(oa){if(-1!==u.indexOf(oa,"*"))return oa;u.forEach(X,function(pa){-1===u.indexOf(oa,pa)&&oa.push(pa)});return oa}return X},_checkFields:function(X){var oa=X||this._getOutFields();u.forEach(oa,function(pa){"*"!==pa&&this._getField(pa)},this);X||this._isTable||this._fserver||this._collection||this._isStream||u.some(this.fields,function(pa){return pa&&"esriFieldTypeGeometry"===pa.type?!0:!1})},_fixFieldCase:function(X,
oa,pa){var Z=X&&X[oa],ja;if(Z&&!c.isFunction(Z)){if(ja=!this._getField(Z)&&this._getField(Z,!0))Z=X[oa]=ja.name;pa&&pa.push(Z)}return Z},_fixRendererFields:function(){var X=this.renderer;this._orderBy=null;this._requiredFields=[];if(X&&0<this.fields.length){var oa=[],pa;X=u.filter([X,X.observationRenderer,X.latestObservationRenderer,X.trackRenderer],w.isDefined);var Z=[].concat(X);u.forEach(X,function(ja){u.forEach(ja.rendererInfos,function(ta){ta.renderer&&Z.push(ta.renderer)})});u.forEach(Z,function(ja){this._fixFieldCase(ja,
"attributeField",oa);this._fixFieldCase(ja,"attributeField2",oa);this._fixFieldCase(ja,"attributeField3",oa);this._fixFieldCase(ja.rotationInfo,"field",oa);(pa=this._fixFieldCase(ja.sizeInfo,"field",oa))&&!this._orderBy&&(this._orderBy=[pa+" DESC"]);this._fixFieldCase(ja.sizeInfo,"normalizationField",oa);this._fixFieldCase(ja.colorInfo,"field",oa);this._fixFieldCase(ja.colorInfo,"normalizationField",oa);this._fixFieldCase(ja.field,"field",oa);this._fixFieldCase(ja.opacityInfo,"field",oa);this._fixFieldCase(ja.opacityInfo,
"normalizationField",oa);u.forEach(ja.visualVariables,function(xa){pa=this._fixFieldCase(xa,"field",oa);"sizeInfo"===xa.type&&pa&&!this._orderBy&&(this._orderBy=[pa+" DESC"]);this._fixFieldCase(xa,"normalizationField",oa)},this);var ta=u.map(this.fields,function(xa){return xa.name},this);ta=u.map(ja.getFieldsUsedInExpressions(ta),function(xa){var Ea=this.getField(xa);return Ea?Ea.name:xa},this);oa=oa.concat(ta);this._orderBy||!ja.addBreak||c.isFunction(ja.attributeField)||!ja.backgroundFillSymbol&&
!this._hasSizeDiff(ja)||(this._orderBy=[ja.attributeField+" DESC"])},this);this._requiredFields=u.filter(oa,w.isDefined)}},_hasSizeDiff:function(X){var oa=Number.MAX_VALUE,pa=-Number.MAX_VALUE,Z,ja;u.forEach(X.infos,function(ta){if(ja=ta.symbol){Z=0;switch(ja.type){case "simplemarkersymbol":Z=ja.size;break;case "picturemarkersymbol":Z=(ja.width+ja.height)/2;break;case "simplelinesymbol":case "cartographiclinesymbol":Z=ja.width;break;case "simplefillsymbol":case "picturefillsymbol":Z=ja.outline&&ja.outline.width}Z&&
(oa=Math.min(oa,Z),pa=Math.max(pa,Z))}});return oa!==Number.MAX_VALUE&&pa!==-Number.MAX_VALUE&&1<Math.abs(pa-oa)},getOrderByFields:function(){var X=this.orderByFields||this._orderBy;return this.supportsAdvancedQueries&&X?u.filter(X,function(oa){oa=oa.split(" ")[0];return!!this._getField(oa,!0)},this):null},_createFields:function(X){var oa=X?X.length:0,pa,Z=[];for(pa=0;pa<oa;pa++)Z.push(new K(X[pa]));this.fields=Z},_createFieldsIndex:function(){if(this._fieldsIndexDirty){var X=this.fields,oa=X?X.length:
0;if(50<oa&&this._canUseFieldsIndex()){var pa=new Map;for(var Z=new Map,ja=0;ja<oa;ja++){var ta=X[ja];pa.set(ta.name,ta);Z.set(ta.name.toLowerCase(),ta)}pa={caseSensitive:pa,caseInsensitive:Z}}this._fieldsIndex=pa;this._fieldsIndexDirty=!1}},_canUseFieldsIndex:function(){var X=r.Map;return!("function"!==typeof r.Proxy||"function"!==typeof r.Proxy.revocable||"function"!==typeof X||!X.prototype||"function"!==typeof X.prototype.set)},_getField:function(X,oa){var pa=this.fields;if(!pa||0===pa.length)return null;
oa&&(X=X.toLowerCase());this._createFieldsIndex();var Z=this._fieldsIndex;if(Z)return Z=oa?Z.caseInsensitive:Z.caseSensitive,Z.get(X);var ja;u.some(pa,function(ta){var xa=!1;(xa=oa?ta&&ta.name.toLowerCase()===X?!0:!1:ta&&ta.name===X?!0:!1)&&(ja=ta);return xa});return ja},_getDateOpts:function(){this._dtOpts||(this._dtOpts={properties:u.map(u.filter(this.fields,function(X){return!(!X||"esriFieldTypeDate"!==X.type)}),function(X){return X.name})});return this._dtOpts},_applyNormalized:function(X,oa){X&&
oa&&u.forEach(X,function(pa,Z){pa&&oa[Z]&&pa.setGeometry(oa[Z])})},_editHandler:function(X,oa,pa,Z,ja,ta){ja=X.addResults;var xa=X.updateResults;X=X.deleteResults;var Ea,Ja=this.objectIdField,La=this._mode,Ya=this._isTable;var Ua=this.editFieldsInfo;var Ta=this.getOutFields()||[];var ab=Ua&&Ua.creatorField,fb=Ua&&Ua.creationDateField,kb=Ua&&Ua.editorField,qb=Ua&&Ua.editDateField;Ua=Ua&&Ua.realm;-1===u.indexOf(Ta,"*")&&(ab&&-1===u.indexOf(Ta,ab)&&(ab=null),fb&&-1===u.indexOf(Ta,fb)&&(fb=null),kb&&
-1===u.indexOf(Ta,kb)&&(kb=null),qb&&-1===u.indexOf(Ta,qb)&&(qb=null));var ob=fb||qb?(new Date).getTime():null,wb=ab||kb?this.getUserId():void 0;wb&&Ua&&(wb=wb+"@"+Ua);if(ja){var Gb=this.globalIdField;for(Ua=0;Ua<ja.length;Ua++)if(ja[Ua]=new za(ja[Ua]),!Ya){var yb=ja[Ua];if(yb.success){var lb=yb.objectId;Ta=oa[Ua];(Ea=Ta._graphicsLayer)&&Ea!==this&&Ea.remove(Ta);Ea=Ta.attributes||{};Ea[Ja]=lb;lb=yb.globalId;Gb&&lb&&(Ea[Gb]=lb);ab&&(Ea[ab]=wb);kb&&(Ea[kb]=wb);fb&&(Ea[fb]=ob);qb&&(Ea[qb]=ob);Ta.setAttributes(Ea);
La._init&&La.drawFeature(Ta)}}}if(xa)for(Ua=0;Ua<xa.length;Ua++)if(xa[Ua]=new za(xa[Ua]),!Ya&&(yb=xa[Ua],yb.success)){lb=yb.objectId;Ta=pa[lb];if(oa=La._getFeature(lb))oa.geometry!==Ta.geometry&&Ta.geometry&&oa.setGeometry(aa.fromJson(Ta.geometry.toJson())),oa.attributes!==Ta.attributes&&Ta.attributes&&oa.setAttributes(c.mixin(oa.attributes,Ta.attributes)),this._repaint(oa,lb);Ta=oa||Ta;Ea=Ta.attributes||{};kb&&(Ea[kb]=wb);qb&&(Ea[qb]=ob);Ta.setAttributes(Ea)}if(X){pa=[];for(Ua=0;Ua<X.length;Ua++)if(X[Ua]=
new za(X[Ua]),!Ya&&(yb=X[Ua],yb.success&&(lb=yb.objectId,Ta=La._getFeature(lb))))this._unSelectFeatureIIf(lb,La)&&pa.push(Ta),Ta._count=0,La._removeFeatureIIf(lb);if(0<pa.length)this.onSelectionComplete(pa,Ca.SELECTION_SUBTRACT)}this._resolve([ja,xa,X],"onEditsComplete",Z,ta)},_sendAttachment:function(X,oa,pa,Z,ja){var ta=this;return x({url:this._url.path+"/"+oa+"/"+("add"===X?"addAttachment":"updateAttachment"),form:pa,content:c.mixin(this._url.query,{f:"json",token:this._getToken()||void 0}),callbackParamName:"callback.html",
handleAs:"json"}).addCallback(function(xa){var Ea="add"===X?"onAddAttachmentComplete":"onUpdateAttachmentComplete";xa=new za(xa["add"===X?"addAttachmentResult":"updateAttachmentResult"]);xa.attachmentId=xa.objectId;xa.objectId=oa;ta._resolve([xa],Ea,Z);return xa}).addErrback(function(xa){ta._resolve([xa],null,ja,null,!0)})},_repaint:function(X,oa,pa){oa=w.isDefined(oa)?oa:X.attributes[this.objectIdField];oa in this._selectedFeatures&&this._selectionSymbol||X.setSymbol(X.symbol,pa)},_getKind:function(X){var oa=
this._trackManager;return oa?oa.isLatestObservation(X)?1:0:0}});c.mixin(Ca,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,MODE_AUTO:6,MODE_STREAM:7,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});la._createWrappers(Ca);Object.defineProperty(Ca.prototype,"graphics",{get:function(){return this._hasOnDemandDrillMode()?this._mode.graphics:this._graphicsVal},set:function(X){this._graphicsVal=
X}});Object.defineProperty(Ca.prototype,"name",{get:function(){return this.arcgisProps&&this.arcgisProps.title?this.arcgisProps.title:this._name},set:function(X){this._name=X;this.loaded&&this.arcgisProps&&(this.arcgisProps.title=null)}});Object.defineProperty(Ca.prototype,"fields",{get:function(){return this._fields},set:function(X){X&&this._canUseFieldsIndex()&&(X=new Proxy(X,{set:c.hitch(this,function(oa,pa,Z){if(pa)if("length"===pa)this._fieldsIndexDirty=!0;else{var ja=Number(pa);"number"!==typeof ja||
isNaN(ja)||(this._fieldsIndexDirty=!0)}oa[pa]=Z;return!0})}));this._fields=X;this._fieldsIndexDirty=!0}});c.setObject("layers.FeatureLayer",Ca,b);return Ca})},"esri/promiseList":function(){define(["dojo/_base/array","dojo/Deferred","dojo/when"],function(f,B,l){var e=f.forEach;return function(c){function u(r,k){a[k]=r;h.progress([r,k]);0===--n&&h.resolve(a)}var t,d;c instanceof Array?d=c:c&&"object"===typeof c&&(t=c);var q=[];if(t){d=[];for(var m in t)Object.hasOwnProperty.call(t,m)&&(q.push(m),d.push(t[m]));
var a={}}else d&&(a=[]);if(!d||!d.length)return(new B).resolve(a);var h=new B;h.promise.always(function(){a=q=null});var n=d.length;e(d,function(r,k){t||q.push(k);l(r,function(g){h.isFulfilled()||u(g,q[k])},function(g){h.isFulfilled()||u(g,q[k])})});return h.promise}})},"esri/renderers/SimpleRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),function(f,B,l,e,c,u,t){f=f(t,{declaredClass:"esri.renderer.SimpleRenderer",
constructor:function(d,q){if(d&&!d.declaredClass){var m=d;this.symbol=(d=m.symbol)&&(d.declaredClass?d:u.fromJson(d,q));this.label=m.label;this.description=m.description}else this.symbol=d},getSymbol:function(d){return this.symbol},toJson:function(){var d=B.mixin(this.inherited(arguments),{type:"simple",label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJson()});return c.fixJson(d)}});B.setObject("renderer.SimpleRenderer",f,e);return f})},"esri/renderers/Renderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojox/gfx/_base ../kernel ../Color ../layers/support/attributeUtils ../support/expressionUtils ../arcadeProfiles/visualizationProfile".split(" "),
function(f,B,l,e,c,u,t,d,q,m){var a=Math.PI;f=f(null,{declaredClass:"esri.renderer.Renderer",constructor:function(h){this._cache={};if(h&&!h.declaredClass){this.rotationInfo=h.rotationInfo;if(!this.rotationInfo){var n=h.rotationType,r=h.rotationExpression;if(n||r)this.rotationInfo={type:n,expression:r}}this.setRotationInfo(this.rotationInfo);this.setSizeInfo(this._readSizeInfo(h.sizeInfo));this.setColorInfo(this._readColorInfo(h.colorInfo));this.setOpacityInfo(this._readOpacityInfo(h.transparencyInfo));
this.setVisualVariables(this._readVariables(h.visualVariables));this.setAuthoringInfo(h.authoringInfo)}this.getSymbol=B.hitch(this,this.getSymbol)},getSymbol:function(h){},_readSizeInfo:function(h){if(h){var n=h.minSize,r=h.maxSize;n&&(h.minSize="number"===typeof n?c.pt2px(n):this._readSizeInfo(n));r&&(h.maxSize="number"===typeof r?c.pt2px(r):this._readSizeInfo(r));h.stops&&l.forEach(h.stops,function(k){k.size&&"number"===typeof k.size&&(k.size=c.pt2px(k.size))})}return h},_readColorInfo:function(h){h&&
(l.forEach(h.colors,function(n,r){B.isArray(n)&&(h.colors[r]=t.toDojoColor(n))}),l.forEach(h.stops,function(n,r){n.color&&B.isArray(n.color)&&(h.stops[r].color=t.toDojoColor(n.color))}));return h},_readOpacityInfo:function(h){if(h){var n=B.mixin({},h);n.transparencyValues&&(n.opacityValues=l.map(n.transparencyValues,function(r){return 1-r/100}),delete n.transparencyValues);n.stops&&(n.stops=l.map(n.stops,function(r){r=B.mixin({},r);r.opacity=1-r.transparency/100;delete r.transparency;return r}))}return n},
_readVariables:function(h){h&&(h=l.map(h,function(n){"sizeInfo"===n.type?n=this._readSizeInfo(n):"colorInfo"===n.type?n=this._readColorInfo(n):"transparencyInfo"===n.type&&(n=this._readOpacityInfo(n),n.type="opacityInfo");return n},this));return h},setAuthoringInfo:function(h){this.authoringInfo=h},setRotationInfo:function(h){if(h=this.rotationInfo="string"===typeof h?{field:h}:h){if(h.expression&&!B.isFunction(h.expression)&&!h.field){var n=h.expression.match(this.rotationRE);n&&n[1]&&(h.field=n[1])}h.rotationType=
h.type}this._cache.rotationInfo=this._processRotationInfo(h);return this},rotationRE:/^\[([^\]]+)\]$/i,_processRotationInfo:function(h){h&&!h.rotationType&&(h.rotationType="geographic");return this._createCache(h)},getRotationAngle:function(h,n){var r=this._getVarInfo(n&&n.rotationInfo,"rotationInfo");n=r.variable;r=this._cache[r.cacheKey];var k="arithmetic"===this._getRotationType(n),g=r&&r.hasExpr,b=null;if(n.field||g)b=this._getDataValue(h,n,null,r),null!=b&&(b=(b+(k?-90:0))*(k?-1:1));return b},
_getRotationType:function(h){return h&&("rotationInfo"===h.type?h.rotationType:h.type)},_getDataValue:function(h,n,r,k,g){k||(k=this._getVarInfo(n,r),n=k.variable,k=this._cache[k.cacheKey],"sizeInfo"===r&&(k=k.root));return h._getDataValue(n,k,q,g)},setVisualVariables:function(h){var n=this._cache;l.forEach(this.visualVariables,function(r,k){n.hasOwnProperty(k)&&(n[k]=null)},this);this.visualVariables=h;l.some(h,function(r){return!!r.target})&&h.sort(function(r,k){return r.target===k.target?0:r.target?
1:-1});l.forEach(h,function(r,k){"colorInfo"===r.type?n[k]=this._processColorInfo(r):"opacityInfo"===r.type?n[k]=this._processOpacityInfo(r):"sizeInfo"===r.type?n[k]=this._processSizeInfo(r):"rotationInfo"===r.type&&(n[k]=this._processRotationInfo(r))},this);return this},getVisualVariableValues:function(h){var n=this.visualVariables,r;n&&(r=l.map(n,function(k){switch(k.type){case "sizeInfo":var g=this.getSize(h,{sizeInfo:k});break;case "colorInfo":g=this.getColor(h,{colorInfo:k});break;case "opacityInfo":g=
this.getOpacity(h,{opacityInfo:k});break;case "rotationInfo":g=this.getRotationAngle(h,{rotationInfo:k})}return{variable:k,value:g}},this));return r},getFieldsUsedInExpressions:function(h){var n=[];l.forEach(this._getCacheObjects(),function(r){r.syntaxTree&&(n=n.concat(q.extractFieldNames(r.syntaxTree,h)))});n.sort();return l.filter(n,function(r,k){return 0===k||n[k-1]!==r})},hasGeometryOperations:function(){return l.some(this._getCacheObjects(),function(h){return h.syntaxTree?q.hasGeometryOperations(h.syntaxTree):
!1})},initializeArcadeEngine:function(){var h=[];l.forEach(this._getCacheObjects(),function(n){n.syntaxTree&&h.push(n.syntaxTree)});return m.initialize(h)},hasVisualVariables:function(h,n){return h?!!this.getVisualVariablesForType(h,n):!!(this.getVisualVariablesForType("sizeInfo",n)||this.getVisualVariablesForType("colorInfo",n)||this.getVisualVariablesForType("opacityInfo",n)||this.getVisualVariablesForType("rotationInfo",n))},getVisualVariablesForType:function(h,n){var r=this.visualVariables;if(!n&&
this[h]){"rotationInfo"===h&&(this[h].rotationType=this[h].type);var k=[this[h]]}else r&&(k=l.filter(r,function(g){return g.type===h&&("string"===typeof n?g.target===n:!1===n?!g.target:!0)}))&&0===k.length&&(k=void 0);return k},setSizeInfo:function(h){this.sizeInfo=this.proportionalSymbolInfo=h;this._cache.sizeInfo=this._processSizeInfo(h);return this},_processSizeInfo:function(h){return h&&{root:this._createCache(h),minSize:this._createCache(h.minSize),maxSize:this._createCache(h.maxSize)}},_convertExpressionToArcade:function(h){h&&
h.expression&&(h.valueExpression="$view.scale")},_getVarInfo:function(h,n){if(h&&h.type===n){var r=l.indexOf(this.visualVariables,h);h=this.visualVariables[r]}else r=n,h=this[n];return{variable:h,cacheKey:r}},setProportionalSymbolInfo:function(h){this.setSizeInfo(h);return this},getSize:function(h,n){var r=this._getVarInfo(n&&n.sizeInfo,"sizeInfo"),k=r.variable;r=this._cache[r.cacheKey];var g=null;if(k){var b=k.minSize;g=k.maxSize;b="object"===typeof b&&b?this._getSize(h,b,r&&r.minSize,n):b;g="object"===
typeof g&&g?this._getSize(h,g,r&&r.maxSize,n):g;g=this._getSize(h,k,r&&r.root,n,[b,g])}return g},_getSize:function(h,n,r,k,g){var b=n.stops,w=0,x=r&&r.hasExpr,z=r&&r.ipData,D=r&&r.isScaleDriven,E="object"===typeof h&&!!h,C="number"===typeof h?h:null;if(n.field||D||x){var y=k&&k.scale;x=g?g[0]:n.minSize;g=g?g[1]:n.maxSize;var v=n.minDataValue,A=n.maxDataValue,G=n.valueUnit||"unknown",F=n.valueRepresentation,H=n.scaleBy,L=k&&k.shape;D?C=y:"number"!==typeof C&&E&&(C=this._getDataValue(h,n,null,r));if(!this._isValidNumber(C))return null;
if(b)x=this._lookupData(C,z),C=x[0],g=x[1],C===g?w=b[C].size:(C=b[C].size,b=b[g].size,w=C+(b-C)*x[2]);else if(null!=x&&null!=g&&null!=v&&null!=A)C<=v?w=x:C>=A?w=g:(b=(C-v)/(A-v),"area"===H&&L?(x=(C="circle"===L)?a*Math.pow(x/2,2):x*x,b=x+b*((C?a*Math.pow(g/2,2):g*g)-x),w=C?2*Math.sqrt(b/a):Math.sqrt(b)):w=x+b*(g-x));else if("unknown"===G)null!=x&&null!=v&&(x&&v?(b=C/v,w="circle"===L?2*Math.sqrt(b*Math.pow(x/2,2)):"square"===L||"diamond"===L||"image"===L?Math.sqrt(b*Math.pow(x,2)):b*x):w=C+(x||v),
w=w<x?x:w,null!=g&&w>g&&(w=g));else{b=(k&&k.resolution?k.resolution:1)*this._meterIn[G];if("area"===F)w=Math.sqrt(C/a)/b,w*=2;else if(w=C/b,"radius"===F||"distance"===F)w*=2;null!=x&&w<x&&(w=x);null!=g&&w>g&&(w=g)}}else w=b&&b[0]&&b[0].size,null==w&&(w=n.minSize);return w=isNaN(w)?0:w},getSizeRangeAtScale:function(h,n){h=this._getVarInfo(h,"sizeInfo");var r=this._cache[h.cacheKey],k={scale:n};if((h=h.variable)&&n){var g=h.minSize;n=h.maxSize;var b=h.stops;b&&b.length?(h=b[0].size,r=b[b.length-1].size):
(h="object"===typeof g&&g?this._getSize({},g,r&&r.minSize,k):g,r="object"===typeof n&&n?this._getSize({},n,r&&r.maxSize,k):n);if(null!=h||null!=r){if(h>r){var w=r;r=h;h=w}w={minSize:h,maxSize:r}}}return w},setColorInfo:function(h){this.colorInfo=h;this._cache.colorInfo=this._processColorInfo(h);return this},_createCache:function(h,n){if(n=d.createAttributeCache(h,n))n.ipData=this._interpolateData(h);return n},_getCacheObjects:function(h){var n;h=h||this._cache;var r=[];for(n in h){var k=h[n];h.hasOwnProperty(n)&&
k&&"object"===typeof k&&(k.hasOwnProperty("idSource")?r.push(k):r=r.concat(this._getCacheObjects(k)))}return r},_processColorInfo:function(h){h&&(l.forEach(h.colors,function(n,r){B.isArray(n)&&(h.colors[r]=new t(n))}),l.forEach(h.stops,function(n,r){n.color&&B.isArray(n.color)&&(h.stops[r].color=new t(n.color))}));return this._createCache(h)},getColor:function(h,n){n=this._getVarInfo(n&&n.colorInfo,"colorInfo");return this._getColorComponent(h,n.variable,this._cache[n.cacheKey])},setOpacityInfo:function(h){this.opacityInfo=
h;this._cache.opacityInfo=this._processOpacityInfo(h);return this},_processOpacityInfo:function(h){return this._createCache(h)},getOpacity:function(h,n){n=this._getVarInfo(n&&n.opacityInfo,"opacityInfo");return this._getColorComponent(h,n.variable,this._cache[n.cacheKey],!0)},_getColorComponent:function(h,n,r,k,g){var b="number"===typeof h?h:null,w=r&&r.hasExpr,x=r&&r.ipData,z;n&&n.field||w?("number"!==typeof b&&"object"===typeof h&&h&&(b=this._getDataValue(h,n,null,r)),this._isValidNumber(b)||(b=
null),null!=b&&(z=k?this._getOpacity(b,n,x):this._getColor(b,n,x))):n&&(h=n.stops,k?(z=h&&h[0]&&h[0].opacity,null==z&&(z=n.opacityValues&&n.opacityValues[0])):z=h&&h[0]&&h[0].color||n.colors&&n.colors[0]);g&&(g.data=b,g.value=z);return g||z},_isValidNumber:function(h){return"number"===typeof h&&!isNaN(h)&&Infinity!==h&&-Infinity!==h},_interpolateData:function(h){if(h)if(h.colors||h.opacityValues){var n=(h.colors||h.opacityValues).length,r=h.minDataValue,k=(h.maxDataValue-r)/(n-1);var g=[];for(h=0;h<
n;h++)g[h]=r+h*k}else h.stops&&(g=l.map(h.stops,function(b){return b.value}));return g},_getOpacity:function(h,n,r){h=this._lookupData(h,r);n=n||this.opacityInfo;if(h){r=h[0];var k=h[1];r===k?k=this._getOpacValue(n,r):(r=this._getOpacValue(n,r),n=this._getOpacValue(n,k),k=r+(n-r)*h[2])}return k},_getOpacValue:function(h,n){return h.opacityValues?h.opacityValues[n]:h.stops[n].opacity},_getColor:function(h,n,r){h=this._lookupData(h,r);n=n||this.colorInfo;if(h){var k=h[0];r=h[1];k=k===r?this._getColorObj(n,
k):t.blendColors(this._getColorObj(n,k),this._getColorObj(n,r),h[2])}return k},_getColorObj:function(h,n){return h.colors?h.colors[n]:h.stops[n].color},_lookupData:function(h,n){if(n){var r=0,k=n.length-1;l.some(n,function(b,w){if(h<b)return k=w,!0;r=w;return!1});var g=[r,k,(h-n[r])/(n[k]-n[r])]}return g},_meterIn:{inches:1/.0254,feet:1/.3048,yards:1/.9144,miles:1/1609.344,"nautical-miles":1/1852,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,"decimal-degrees":180/20015077},
_writeSizeInfo:function(h){if(h){h=B.mixin({},h);this._convertExpressionToArcade(h);var n=h.minSize,r=h.maxSize;n&&(h.minSize="number"===typeof n?c.px2pt(n):this._writeSizeInfo(n));r&&(h.maxSize="number"===typeof r?c.px2pt(r):this._writeSizeInfo(r));if(n=h.legendOptions)if(h.legendOptions=B.mixin({},n),n=n.customValues)h.legendOptions.customValues=n.slice(0);h.stops&&(h.stops=l.map(h.stops,function(k){k=B.mixin({},k);k.size&&"number"===typeof k.size&&(k.size=c.px2pt(k.size));return k}))}return h},
_writeColorInfo:function(h){h&&(h=B.mixin({},h),h.colors&&(h.colors=l.map(h.colors,function(n){return t.toJsonColor(n)})),h.stops&&(h.stops=l.map(h.stops,function(n){n=B.mixin({},n);n.color&&(n.color=t.toJsonColor(n.color));return n})),h.legendOptions&&(h.legendOptions=B.mixin({},h.legendOptions)));return h},_writeOpacityInfo:function(h){if(h){var n=B.mixin({},h);n.opacityValues&&(n.transparencyValues=l.map(n.opacityValues,function(r){return 100*(1-r)}),delete n.opacityValues);n.stops&&(n.stops=l.map(n.stops,
function(r){r=B.mixin({},r);r.transparency=100*(1-r.opacity);delete r.opacity;return r}));n.legendOptions&&(n.legendOptions=B.mixin({},n.legendOptions))}return n},toJson:function(h){var n=this.visualVariables,r=B.clone(this.authoringInfo),k=h&&h.useLegacyRotationProperties,g=(h=(h=this.getVisualVariablesForType("rotationInfo",!1))&&h[0])&&h.field,b;h&&(h===this.rotationInfo||k)&&(b=h.expression||g&&(B.isFunction(g)?g:"["+g+"]"));n&&(n=l.map(n,function(w){"sizeInfo"===w.type?w=this._writeSizeInfo(w):
"colorInfo"===w.type?w=this._writeColorInfo(w):"opacityInfo"===w.type?(w=this._writeOpacityInfo(w),w.type="transparencyInfo"):"rotationInfo"===w.type&&(w=k?null:B.mixin({},w));return w},this),n=l.filter(n,function(w){return null!=w}));r&&l.forEach(r.visualVariables,function(w){"opacityInfo"===w.type&&(w.type="transparencyInfo")});return{rotationType:b&&(this._getRotationType(h)||"geographic"),rotationExpression:b,colorInfo:this._writeColorInfo(this.colorInfo),transparencyInfo:this._writeOpacityInfo(this.opacityInfo),
sizeInfo:this._writeSizeInfo(this.sizeInfo),visualVariables:n,authoringInfo:r}}});B.setObject("renderer.Renderer",f,u);return f})},"esri/layers/support/attributeUtils":function(){define("dojo/_base/lang dojo/has dojox/encoding/digests/_base dojox/encoding/digests/MD5 ../../kernel ../../support/expressionUtils".split(" "),function(f,B,l,e,c,u){var t={viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,getAttributeId:function(d){return"string"===typeof d?e(d,l.outputTypes.Hex):null},getAttributeIdSource:function(d){if(!d)return null;
var q=d.field,m=d.valueExpression,a=null;if(m)a=m;else if(f.isFunction(q))a=q.toString();else if(q){var h=(m=d.normalizationField)?"field":d.normalizationType;d=parseFloat(d.normalizationTotal);h&&(h=h.toLowerCase(),a=q.toLowerCase()+",norm:"+h,m?a+=","+m.toLowerCase():"percent-of-total"===h&&(q=d,"number"===typeof q&&!isNaN(q)&&Infinity!==q&&-Infinity!==q&&0!==d||(d=null),a+=","+d))}return a},createAttributeCache:function(d,q){if(!d)return null;var m=d.valueExpression,a=u.createSyntaxTree(m),h=t.getAttributeIdSource(d);
return{attributeInfo:d,isNumeric:!q,idSource:h,id:t.getAttributeId(h),hasExpr:!!m,compiledFunc:u.createFunction(a),syntaxTree:a,isScaleDriven:!!d.expression||t.viewScaleRE.test(m),dependsOnView:a?u.dependsOnView(a):!1,dependsOnGeometry:a?u.hasGeometryOperations(a):!1,isJSFunc:f.isFunction(d.field)}}};f.setObject("layers.support.attributeUtils",t,c);return t})},"dojox/encoding/digests/_base":function(){define(["dojo/_base/lang"],function(f){f=f.getObject("dojox.encoding.digests",!0);f.outputTypes=
{Base64:0,Hex:1,String:2,Raw:3};f.addWords=function(B,l){var e=(B&65535)+(l&65535);return(B>>16)+(l>>16)+(e>>16)<<16|e&65535};f.stringToWord=function(B){for(var l=[],e=0,c=8*B.length;e<c;e+=8)l[e>>5]|=(B.charCodeAt(e/8)&255)<<e%32;return l};f.wordToString=function(B){for(var l=[],e=0,c=32*B.length;e<c;e+=8)l.push(String.fromCharCode(B[e>>5]>>>e%32&255));return l.join("")};f.wordToHex=function(B){for(var l=[],e=0,c=4*B.length;e<c;e++)l.push("0123456789abcdef".charAt(B[e>>2]>>e%4*8+4&15)+"0123456789abcdef".charAt(B[e>>
2]>>e%4*8&15));return l.join("")};f.wordToBase64=function(B){for(var l=[],e=0,c=4*B.length;e<c;e+=3)for(var u=(B[e>>2]>>e%4*8&255)<<16|(B[e+1>>2]>>(e+1)%4*8&255)<<8|B[e+2>>2]>>(e+2)%4*8&255,t=0;4>t;t++)8*e+6*t>32*B.length?l.push("\x3d"):l.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(u>>6*(3-t)&63));return l.join("")};f.stringToUtf8=function(B){for(var l="",e=-1,c,u;++e<B.length;)c=B.charCodeAt(e),u=e+1<B.length?B.charCodeAt(e+1):0,55296<=c&&56319>=c&&56320<=u&&57343>=
u&&(c=65536+((c&1023)<<10)+(u&1023),e++),127>=c?l+=String.fromCharCode(c):2047>=c?l+=String.fromCharCode(192|c>>>6&31,128|c&63):65535>=c?l+=String.fromCharCode(224|c>>>12&15,128|c>>>6&63,128|c&63):2097151>=c&&(l+=String.fromCharCode(240|c>>>18&7,128|c>>>12&63,128|c>>>6&63,128|c&63));return l};return f})},"dojox/encoding/digests/MD5":function(){define(["./_base"],function(f){function B(t,d,q,m,a,h){var n=f.addWords;t=f.addWords(f.addWords(d,t),f.addWords(m,h));return n.call(f,t<<a|t>>>32-a,q)}function l(t,
d,q,m,a,h,n){return B(d&q|~d&m,t,d,a,h,n)}function e(t,d,q,m,a,h,n){return B(d&m|q&~m,t,d,a,h,n)}function c(t,d,q,m,a,h,n){return B(q^(d|~m),t,d,a,h,n)}function u(t,d){t[d>>5]|=128<<d%32;t[(d+64>>>9<<4)+14]=d;d=1732584193;for(var q=-271733879,m=-1732584194,a=271733878,h=0;h<t.length;h+=16){var n=d,r=q,k=m,g=a;d=l(d,q,m,a,t[h+0],7,-680876936);a=l(a,d,q,m,t[h+1],12,-389564586);m=l(m,a,d,q,t[h+2],17,606105819);q=l(q,m,a,d,t[h+3],22,-1044525330);d=l(d,q,m,a,t[h+4],7,-176418897);a=l(a,d,q,m,t[h+5],12,
1200080426);m=l(m,a,d,q,t[h+6],17,-1473231341);q=l(q,m,a,d,t[h+7],22,-45705983);d=l(d,q,m,a,t[h+8],7,1770035416);a=l(a,d,q,m,t[h+9],12,-1958414417);m=l(m,a,d,q,t[h+10],17,-42063);q=l(q,m,a,d,t[h+11],22,-1990404162);d=l(d,q,m,a,t[h+12],7,1804603682);a=l(a,d,q,m,t[h+13],12,-40341101);m=l(m,a,d,q,t[h+14],17,-1502002290);q=l(q,m,a,d,t[h+15],22,1236535329);d=e(d,q,m,a,t[h+1],5,-165796510);a=e(a,d,q,m,t[h+6],9,-1069501632);m=e(m,a,d,q,t[h+11],14,643717713);q=e(q,m,a,d,t[h+0],20,-373897302);d=e(d,q,m,a,
t[h+5],5,-701558691);a=e(a,d,q,m,t[h+10],9,38016083);m=e(m,a,d,q,t[h+15],14,-660478335);q=e(q,m,a,d,t[h+4],20,-405537848);d=e(d,q,m,a,t[h+9],5,568446438);a=e(a,d,q,m,t[h+14],9,-1019803690);m=e(m,a,d,q,t[h+3],14,-187363961);q=e(q,m,a,d,t[h+8],20,1163531501);d=e(d,q,m,a,t[h+13],5,-1444681467);a=e(a,d,q,m,t[h+2],9,-51403784);m=e(m,a,d,q,t[h+7],14,1735328473);q=e(q,m,a,d,t[h+12],20,-1926607734);d=B(q^m^a,d,q,t[h+5],4,-378558);a=B(d^q^m,a,d,t[h+8],11,-2022574463);m=B(a^d^q,m,a,t[h+11],16,1839030562);q=
B(m^a^d,q,m,t[h+14],23,-35309556);d=B(q^m^a,d,q,t[h+1],4,-1530992060);a=B(d^q^m,a,d,t[h+4],11,1272893353);m=B(a^d^q,m,a,t[h+7],16,-155497632);q=B(m^a^d,q,m,t[h+10],23,-1094730640);d=B(q^m^a,d,q,t[h+13],4,681279174);a=B(d^q^m,a,d,t[h+0],11,-358537222);m=B(a^d^q,m,a,t[h+3],16,-722521979);q=B(m^a^d,q,m,t[h+6],23,76029189);d=B(q^m^a,d,q,t[h+9],4,-640364487);a=B(d^q^m,a,d,t[h+12],11,-421815835);m=B(a^d^q,m,a,t[h+15],16,530742520);q=B(m^a^d,q,m,t[h+2],23,-995338651);d=c(d,q,m,a,t[h+0],6,-198630844);a=c(a,
d,q,m,t[h+7],10,1126891415);m=c(m,a,d,q,t[h+14],15,-1416354905);q=c(q,m,a,d,t[h+5],21,-57434055);d=c(d,q,m,a,t[h+12],6,1700485571);a=c(a,d,q,m,t[h+3],10,-1894986606);m=c(m,a,d,q,t[h+10],15,-1051523);q=c(q,m,a,d,t[h+1],21,-2054922799);d=c(d,q,m,a,t[h+8],6,1873313359);a=c(a,d,q,m,t[h+15],10,-30611744);m=c(m,a,d,q,t[h+6],15,-1560198380);q=c(q,m,a,d,t[h+13],21,1309151649);d=c(d,q,m,a,t[h+4],6,-145523070);a=c(a,d,q,m,t[h+11],10,-1120210379);m=c(m,a,d,q,t[h+2],15,718787259);q=c(q,m,a,d,t[h+9],21,-343485551);
d=f.addWords(d,n);q=f.addWords(q,r);m=f.addWords(m,k);a=f.addWords(a,g)}return[d,q,m,a]}f.MD5=function(t,d){d=d||f.outputTypes.Base64;t=u(f.stringToWord(t),8*t.length);switch(d){case f.outputTypes.Raw:return t;case f.outputTypes.Hex:return f.wordToHex(t);case f.outputTypes.String:return f.wordToString(t);default:return f.wordToBase64(t)}};f.MD5._hmac=function(t,d,q){q=q||f.outputTypes.Base64;var m=f.stringToWord(d);16<m.length&&(m=u(m,8*d.length));var a=[];d=[];for(var h=0;16>h;h++)a[h]=m[h]^909522486,
d[h]=m[h]^1549556828;t=u(a.concat(f.stringToWord(t)),512+8*t.length);t=u(d.concat(t),640);switch(q){case f.outputTypes.Raw:return t;case f.outputTypes.Hex:return f.wordToHex(t);case f.outputTypes.String:return f.wordToString(t);default:return f.wordToBase64(t)}};return f.MD5})},"esri/support/expressionUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../kernel ../arcade/arcade ../arcade/Feature ../arcade/languageUtils".split(" "),function(f,B,l,e,c,u,t,d){function q(k){var g=
new e;k.then(function(b){if(!g.isFulfilled())return d.isDate(b)&&(b=b.toJSDate()),g.resolve(b)},function(b){if(!g.isFulfilled())return g.reject(b)});return g.promise}function m(k){var g=new e;k.then(function(b){if(!g.isFulfilled())return g.resolve(b)},function(b){if(!g.isFulfilled())return g.reject(b)});return g.promise}function a(k){return k.replace(/[|\\{}()[\]^$+*?.]/g,"\\$\x26")}var h={vars:{$feature:"any",$view:"any"}},n=/^\$(feature|aggregatedFeatures)\./i,r={_getSyntaxTree:function(k){return"string"===
typeof k?r.createSyntaxTree(k):k},createSyntaxTree:function(k){try{var g=k?u.parseScript(k):null}catch(b){g=null}return g},createFunction:function(k,g){g=g||f.clone(h);k=r._getSyntaxTree(k);try{var b=k?u.compileScript(k,g):null}catch(w){b=null}return b},createExecContext:function(k,g){return{vars:{$feature:k?t.createFromGraphic(k):new t,$view:g&&g.view},spatialReference:g&&g.sr}},evalSyntaxTree:function(k,g){try{var b=u.executeScript(k,g)}catch(w){b=null}return b},executeFunction:function(k,g){try{var b=
k?k(g):null}catch(w){b=null}return d.isDate(b)?b.toJSDate():b},executeAsyncFunction:function(k,g){try{var b=k?q(k(g)):(new e).reject(Error("expressionUtils.executeAsyncFunction: Invalid argument. compiledFunc is missing."))}catch(w){b=(new e).reject(w)}return b},extractFieldNames:function(k,g){k=r._getSyntaxTree(k);k=u.extractExpectedFieldLiterals(k);var b=[];B.forEach(k,function(x){n.test(x)&&(x=x.replace(n,""),b.push(x))});var w=B.filter(b,function(x){return-1!==x.indexOf("*")});b=B.filter(b,function(x){return-1===
w.indexOf(x)});g&&B.forEach(w,function(x){var z=new RegExp("^"+x.split(/\*+/).map(a).join(".*")+"$","i");B.forEach(g,function(D){z.test(D)&&b.push(D)})});b.sort();return B.filter(b,function(x,z){return 0===z||b[z-1]!==x})},dependsOnView:function(k){return r.hasVariable(k,"$view")},hasGeometryFunctions:function(k){return(k=r._getSyntaxTree(k))?u.scriptTouchesGeometry(k):!1},hasGeometryOperations:function(k){return(k=r._getSyntaxTree(k))?u.scriptUsesGeometryEngine(k):!1},enableGeometryOperations:function(){return m(u.enableGeometrySupport())},
hasVariable:function(k,g){return(k=r._getSyntaxTree(k))?u.referencesMember(k,g):!1},hasFunction:function(k,g){return(k=r._getSyntaxTree(k))?u.referencesFunction(k,g):!1},createFeatureSetFromLayer:function(k,g){g=g||{};var b=u.featureSetUtils();return b?b.constructFeatureSet(k,g.spatialReference,g.outFields,g.returnGeometry,g.cache):null},createFeatureSetFromLayerUrl:function(k,g){g=g||{};var b=u.featureSetUtils();return b?b.constructFeatureSetFromUrlRaw(k,g.spatialReference,g.outFields,g.returnGeometry,
g.cache):null},createFeatureSetCollectionFromMap:function(k,g){var b=u.featureSetUtils();return b?b.createFeatureSetCollectionFromMap(k,k.spatialReference,g&&g.cache):null},createFeatureSetCollectionFromServiceUrl:function(k,g){g=g||{};var b=u.featureSetUtils();return b?b.createFeatureSetCollectionFromService(k,g.spatialReference,g.cache):null},hasFeatureSetOperations:function(k){return(k=r._getSyntaxTree(k))?u.scriptUsesFeatureSet(k):!1},enableFeatureSetOperations:function(){return m(u.enableFeatureSetSupport().then(function(){var k=
u.featureSetUtils();k&&k.initialiseMetaDataCache()}))},enableAsyncOperations:function(){return m(u.enableAsyncSupport())}};f.setObject("support.expressionUtils",r,c);return r})},"esri/arcade/arcade":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./arcadeCompiler ./ArcadeModuleResolver ./arcadeRuntime ./executionError ./parser ./treeAnalysis dojo/has ./polyfill/maybe".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h){function n(Y,aa){if(null===Q)throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.AsyncNotEnabled,null);if(a("esri-csp-restrictions")||!1===H)return function(la){return Q.executeScript(Y,la)};try{return c.compileScript(Y,aa,!0)}catch(la){if("esri.arcade.arcadeuncompilableerror"===la.declaredRootClass)return function(T){return Q.executeScript(Y,T)};throw la;}}function r(Y,aa){void 0===aa&&(aa=[]);return q.parseScript(Y,aa)}function k(Y,aa){if(!0===aa.useAsync||!0===Y.isAsync){if(null===Q)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.AsyncNotEnabled,
null);return Q.executeScript(Y,aa)}return t.executeScript(Y,aa)}function g(Y,aa){return m.referencesMember(Y,aa)}function b(Y,aa){void 0===aa&&(aa=[]);void 0===Y.usesGeometry&&m.findScriptDependencies(Y,aa);return!0===Y.usesGeometry}function w(){return I?I:I=x()}function x(){return l(this,void 0,void 0,function(){return e(this,function(Y){return[2,new Promise(function(aa,la){f(["../geometry/geometryEngine","./functions/geomsync"],function(T,N){M=!0;N.setGeometryEngine(T);aa(!0)},function(T){la(T)})})]})})}
function z(){return null!==P?P:P=D()}function D(){return l(this,void 0,void 0,function(){var Y,aa,la;return e(this,function(T){switch(T.label){case 0:return[4,c.enableAsyncSupport()];case 1:return T.sent(),[4,new Promise(function(N,K){f(["./arcadeAsyncRuntime"],function(W){N(W)},K)})];case 2:Q=T.sent();Y=0;for(aa=S;Y<aa.length;Y++)la=aa[Y],Q.extend(la),c.extend(la,"async");S=null;return[2,!0]}})})}function E(){return Q?!0:!1}function C(){return J?J:J=y()}function y(){return l(this,void 0,void 0,function(){var Y;
return e(this,function(aa){switch(aa.label){case 0:return[4,z()];case 1:return aa.sent(),[4,new Promise(function(la,T){f(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(N,K,W,da,fa){la({featuresetutils:N,libraries:[K,W,da,fa]})},T)})];case 2:return Y=aa.sent(),U=Y.featuresetutils,Q.extend(Y.libraries),c.extend(Y.libraries,"async"),L=!0,[2,!0]}})})}function v(Y,aa){void 0===aa&&(aa=[]);void 0===Y.usesFeatureSet&&
m.findScriptDependencies(Y,aa);return!0===Y.usesFeatureSet}function A(Y,aa,la,T,N,K){void 0===T&&(T=[]);void 0===N&&(N=!1);void 0===K&&(K=null);return l(this,void 0,void 0,function(){var W,da;return e(this,function(fa){switch(fa.label){case 0:W="string"===typeof aa?r(aa):aa;da=[];if(W&&(!1===M&&(b(W)||N)&&da.push(w()),!1===E()&&(!0===W.isAsync||la)&&da.push(z()),!1===L)){if(!(fa=v(W)))a:{fa=W;if(T)for(var ha=0,ra=T;ha<ra.length;ha++)if(g(fa,ra[ha])){fa=!0;break a}fa=!1}fa&&da.push(C())}return da.length?
[4,Promise.all(da)]:[3,2];case 1:fa.sent(),fa.label=2;case 2:return[4,G(Y,W,K,la,N)];case 3:return fa.sent(),[2,!0]}})})}function G(Y,aa,la,T,N){void 0===la&&(la=null);void 0===T&&(T=!1);void 0===N&&(N=!1);return l(this,void 0,void 0,function(){var K,W,da,fa,ha,ra;return e(this,function(za){switch(za.label){case 0:K=m.findModuleImports(aa),null===la&&0<K.length&&(la=u.ArcadeModuleResolver.getDefault()),aa.loadedModules={},W=0,da=K,za.label=1;case 1:if(!(W<da.length))return[3,5];fa=da[W];h.assertIsSome(la);
ha=la.normalizeModuleUri(fa.source);if(Y.has(ha.uri))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.CircularModules,null);Y.add(ha.uri);return[4,la.fetchModule(ha)];case 2:return ra=za.sent(),[4,A(Y,ra,T,[],N,la)];case 3:za.sent(),Y.delete(ha.uri),ra.isAsync&&(aa.isAsync=!0),ra.usesFeatureSet&&(aa.usesFeatureSet=!0),ra.usesGeometry&&(aa.usesGeometry=!0),aa.loadedModules[fa.libname]={uri:ha.uri,script:ra},za.label=4;case 4:return W++,[3,1];case 5:return[2]}})})}Object.defineProperty(B,
"__esModule",{value:!0});B.featureSetUtils=B.scriptTouchesGeometry=B.loadDependentModules=B.scriptUsesModules=B._loadScriptDependenciesImpl=B.loadScriptDependencies=B.scriptIsAsync=B.scriptUsesFeatureSet=B.enableFeatureSetSupportImpl=B.enableFeatureSetSupport=B.isGeometryEnabled=B.isAsyncEnabled=B.isFeatureSetSupportEnabled=B.enableAsyncSupportImpl=B.enableAsyncSupport=B.enableGeometrySupportImpl=B.enableGeometrySupport=B.scriptUsesGeometryEngine=B.extractExpectedFieldLiterals=B.extractFieldLiterals=
B.referencesFunction=B.referencesMember=B.executeScript=B.parseAndExecuteScript=B.parseScript=B.extend=B.compileScript=void 0;var F="feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" "),H=function(){if(a("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(Y){return!1}}(),L=!1,M=!1,Q=null,S=[];B.compileScript=function(Y,aa){if(!0===aa.useAsync||!0===Y.isAsync)return n(Y,aa);if(a("esri-csp-restrictions"))return function(la){return t.executeScript(Y,
la)};try{return c.compileScript(Y,aa)}catch(la){if("esri.arcade.arcadeuncompilableerror"===la.declaredRootClass)return function(T){return t.executeScript(Y,T)};throw la;}};B.extend=function(Y){t.extend(Y);c.extend(Y,"sync");null===Q?S.push(Y):(c.extend(Y,"async"),Q.extend(Y))};B.parseScript=r;B.parseAndExecuteScript=function(Y,aa,la){void 0===la&&(la=[]);Y=q.parseScript(Y,la);return k(Y,aa)};B.executeScript=k;B.referencesMember=g;B.referencesFunction=function(Y,aa){return m.referencesFunction(Y,aa)};
B.extractFieldLiterals=function(Y,aa){void 0===aa&&(aa=!1);void 0===aa&&(aa=!1);return m.findFieldLiterals(Y)};B.extractExpectedFieldLiterals=function(Y){return m.findExpectedFieldLiterals(Y)};B.scriptUsesGeometryEngine=b;var I=null;B.enableGeometrySupport=w;B.enableGeometrySupportImpl=x;var P=null;B.enableAsyncSupport=z;B.enableAsyncSupportImpl=D;B.isFeatureSetSupportEnabled=function(){return L};B.isAsyncEnabled=E;B.isGeometryEnabled=function(){return M};var J=null;B.enableFeatureSetSupport=C;B.enableFeatureSetSupportImpl=
y;B.scriptUsesFeatureSet=v;B.scriptIsAsync=function(Y,aa){void 0===aa&&(aa=[]);void 0===Y.isAsync&&m.findScriptDependencies(Y,aa);return!0===Y.isAsync};B.loadScriptDependencies=function(Y,aa,la,T,N){void 0===la&&(la=[]);void 0===T&&(T=!1);void 0===N&&(N=null);return l(this,void 0,void 0,function(){return e(this,function(K){return[2,A(new Set,Y,aa,la,T,N)]})})};B._loadScriptDependenciesImpl=A;B.scriptUsesModules=function(Y,aa){void 0===aa&&(aa=[]);void 0===Y.usesModules&&m.findScriptDependencies(Y,
aa);return!0===Y.usesModules};B.loadDependentModules=G;B.scriptTouchesGeometry=function(Y){if(b(Y))return!0;Y=m.findFunctionCalls(Y);for(var aa=!1,la=0;la<Y.length;la++)if(F.includes(Y[la])){aa=!0;break}return aa};var U=null;B.featureSetUtils=function(){return U}})},"esri/arcade/polyfill/tsSupport/awaiter":function(){define([],function(){return function(){return function(f,B,l,e){function c(u){return u instanceof l?u:new l(function(t){t(u)})}return new (l||(l=Promise))(function(u,t){function d(a){try{m(e.next(a))}catch(h){t(h)}}
function q(a){try{m(e["throw"](a))}catch(h){t(h)}}function m(a){a.done?u(a.value):c(a.value).then(d,q)}m((e=e.apply(f,B||[])).next())})}}()})},"esri/arcade/polyfill/tsSupport/generator":function(){define([],function(){return function(){return function(f,B){function l(m){return function(a){return e([m,a])}}function e(m){if(u)throw new TypeError("Generator is already executing.");for(;c;)try{if(u=1,t&&(d=m[0]&2?t["return"]:m[0]?t["throw"]||((d=t["return"])&&d.call(t),0):t.next)&&!(d=d.call(t,m[1])).done)return d;
if(t=0,d)m=[m[0]&2,d.value];switch(m[0]){case 0:case 1:d=m;break;case 4:return c.label++,{value:m[1],done:!1};case 5:c.label++;t=m[1];m=[0];continue;case 7:m=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===m[0]||2===m[0])){c=0;continue}if(3===m[0]&&(!d||m[1]>d[0]&&m[1]<d[3]))c.label=m[1];else if(6===m[0]&&c.label<d[1])c.label=d[1],d=m;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(m);else{d[2]&&c.ops.pop();c.trys.pop();continue}}m=B.call(f,c)}catch(a){m=
[6,a],t=0}finally{u=d=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},u,t,d,q;return q={next:l(0),"throw":l(1),"return":l(2)},"function"===typeof Symbol&&(q[Symbol.iterator]=function(){return this}),q}}()})},"esri/arcade/arcadeCompiler":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./polyfill/tsSupport/extends ./Dictionary ./Feature ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ./polyfill/promiseUtils ../geometry/Geometry ../SpatialReference ./ArcadeModuleLoader ./ArcadeModule ./FunctionWrapper ./executionError".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E,C,y,v){function A(ba,ia,wa){try{return wa(ba,null,ia.arguments)}catch(Aa){throw Aa;}}function G(ba,ia){try{switch(ia.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return I(ba,ia);case "VariableDeclaration":for(var wa=[],Aa=0;Aa<ia.declarations.length;Aa++)wa.push(G(ba,ia.declarations[Aa]));return wa.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":case "Program":return Q(ba,ia);case "FunctionDeclaration":var Fa=
ia.id.name.toLowerCase();S(Fa);var O="",ya=!1;void 0!==ba.globalScope[Fa]?O=Fa:void 0!==ba.globalScope._SymbolsMap[Fa]?O=ba.globalScope._SymbolsMap[Fa]:ba.undeclaredGlobalsInFunctions.has(Fa)?(O=ba.undeclaredGlobalsInFunctions.get(Fa).manglename,ba.globalScope._SymbolsMap[Fa]=O,ba.mangleMap[Fa]=O,ba.undeclaredGlobalsInFunctions.delete(Fa),ya=!0):(O=U(ba),ba.globalScope._SymbolsMap[Fa]=O,ba.mangleMap[Fa]=O);wa={isAsync:ba.isAsync,console:ba.console,exports:ba.exports,undeclaredGlobalsInFunctions:ba.undeclaredGlobalsInFunctions,
customfunctions:ba.customfunctions,moduleFactory:ba.moduleFactory,moduleFactoryMap:ba.moduleFactoryMap,libraryResolver:ba.libraryResolver,lrucache:ba.lrucache,interceptor:ba.interceptor,services:ba.services,symbols:ba.symbols,mangleMap:ba.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:ba.depthCounter,globalScope:ba.globalScope};var Ha="new lang.UserDefinedCompiledFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(Fa=0;Fa<ia.params.length;Fa++){Aa=ia.params[Fa].name.toLowerCase();S(Aa);var ea=U(ba);wa.localScope._SymbolsMap[Aa]=ea;wa.mangleMap[Aa]=ea;Ha+="lscope['"+ea+"']\x3darguments["+Fa.toString()+"];\n"}!0===ba.isAsync?(Ha=Ha+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(Q(wa,ia.body)+"\n return lastStatement; "),Ha=Ha+"});  }, runtimeCtx),"+(ia.params.length+")")):Ha+=Q(wa,ia.body)+"\n return lastStatement; }, runtimeCtx),"+ia.params.length+")";Ha+="\n lastStatement \x3d lc.voidOperation; \n";
return ya?"gscope[lang.setAssig('"+O+"', runtimeCtx)]\x3d"+Ha:"gscope['"+O+"']\x3d"+Ha;case "ImportDeclaration":var Oa,Na,Ca=ia.specifiers[0].local.name.toLowerCase();S(Ca);var X=null===(Oa=ba.libraryResolver)||void 0===Oa?void 0:Oa.loadLibrary(Ca),oa=U(ba);void 0===ba.moduleFactory[X.uri]&&(ba.moduleFactory[X.uri]=W(X.syntax,{interceptor:ba.interceptor,services:ba.services,moduleFactory:ba.moduleFactory,lrucache:ba.lrucache,timeReference:null!==(Na=ba.timeReference)&&void 0!==Na?Na:null,libraryResolver:ba.libraryResolver,
customfunctions:ba.customfunctions,vars:{}},ba.isAsync));ba.moduleFactoryMap[oa]=X.uri;ia="";ia=ba.isAsync?"(yield lang.loadModule('"+oa+"', runtimeCtx) ); ":"lang.loadModule('"+oa+"', runtimeCtx); ";if(void 0!==ba.globalScope[Ca])var pa="gscope['"+Ca+"']\x3d"+ia;else void 0!==ba.globalScope._SymbolsMap[Ca]?pa="gscope['"+ba.globalScope._SymbolsMap[Ca]+"']\x3d"+ia:(wa="",ba.undeclaredGlobalsInFunctions.has(Ca)?(wa=ba.undeclaredGlobalsInFunctions.get(Ca).manglename,ba.undeclaredGlobalsInFunctions.delete(Ca)):
wa=U(ba),ba.globalScope._SymbolsMap[Ca]=wa,ba.mangleMap[Ca]=wa,pa="gscope[lang.setAssig('"+wa+"', runtimeCtx)]\x3d"+ia);return pa;case "ExportNamedDeclaration":var Z=G(ba,ia.declaration);if("FunctionDeclaration"===ia.declaration.type)ba.exports[ia.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===ia.declaration.type){wa=0;for(var ja=ia.declaration.declarations;wa<ja.length;wa++)ba.exports[ja[wa].id.name.toLowerCase()]="variable"}return Z;case "ReturnStatement":var ta=null===
ia.argument?"return lc.voidOperation":"return "+G(ba,ia.argument);return ta;case "IfStatement":return M(ba,ia);case "ExpressionStatement":var xa="AssignmentExpression"===ia.expression.type?"lastStatement \x3d lc.voidOperation; "+G(ba,ia.expression)+"; \n ":"lastStatement \x3d "+G(ba,ia.expression)+"; ";return xa;case "AssignmentExpression":return H(ba,ia);case "UpdateExpression":return F(ba,ia);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{wa=
[];ea=Aa=0;for(ya=ia.quasis;ea<ya.length;ea++)Ha=ya[ea],wa.push(Ha.value?JSON.stringify(Ha.value.cooked):JSON.stringify("")),!1===Ha.tail&&(wa.push(ia.expressions[Aa]?"lang.castString(lang.aCheck("+G(ba,ia.expressions[Aa])+", 'TemplateLiteral'))":""),Aa++);O="(["+wa.join(",")+"]).join('')"}catch(Eb){throw Eb;}return O;case "TemplateElement":return JSON.stringify(ia.value?ia.value.cooked:"");case "ForStatement":wa="lastStatement \x3d lc.voidOperation; \n";null!==ia.init&&(wa+=G(ba,ia.init)+"; ");var Ea=
Y(ba),Ja=Y(ba);wa+="var "+Ea+" \x3d true; \n do { ";null!==ia.update&&(wa+=" if ("+Ea+"\x3d\x3d\x3dfalse) {\n "+G(ba,ia.update)+"  \n}\n "+Ea+"\x3dfalse; \n");null!==ia.test&&(wa+="var "+Ja+" \x3d "+G(ba,ia.test)+"; ",wa+="if ("+Ja+"\x3d\x3d\x3dfalse) { break; } else if ("+Ja+"!\x3d\x3dtrue) { lang.error('"+v.ExecutionErrorCodes.BooleanConditionRequired+"');   }\n");wa+=G(ba,ia.body);null!==ia.update&&(wa+="\n "+G(ba,ia.update));return wa+("\n"+Ea+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");
case "ForInStatement":var La=Y(ba),Ya=Y(ba),Ua=Y(ba),Ta="var "+La+" \x3d "+G(ba,ia.right)+";\n";"VariableDeclaration"===ia.left.type&&(Ta+=G(ba,ia.left));var ab="VariableDeclaration"===ia.left.type?ia.left.declarations[0].id.name:ia.left.name;ab=ab.toLowerCase();S(ab);wa="";null!==ba.localScope&&(void 0!==ba.localScope[ab]?wa="lscope['"+ab+"']":void 0!==ba.localScope._SymbolsMap[ab]&&(wa="lscope['"+ba.localScope._SymbolsMap[ab]+"']"));Aa="";if(""===wa)if(void 0!==ba.globalScope[ab])wa="gscope['"+
ab+"']";else if(void 0!==ba.globalScope._SymbolsMap[ab])wa="gscope['"+ba.globalScope._SymbolsMap[ab]+"']";else if(null!==ba.localScope)if(ba.undeclaredGlobalsInFunctions.has(ab))wa="gscope['"+ba.undeclaredGlobalsInFunctions.get(ab).manglename+"']",Aa=ba.undeclaredGlobalsInFunctions.get(ab).manglename;else{var fb={manglename:U(ba),node:ia.left};ba.undeclaredGlobalsInFunctions.set(ab,fb);wa="gscope['"+fb.manglename+"']";Aa=fb.manglename}Aa&&(Ta+="lang.chkAssig('"+Aa+"',runtimeCtx); \n");Ta=Ta+("if ("+
La+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+(La+") || lc.isString("+La+")) {var ")+(Ya+"\x3d"+La+".length; \nfor(var ")+(Ua+"\x3d0; "+Ua+"\x3c"+Ya+"; "+Ua+"++) {\n");Ta+=wa+"\x3d"+Ua+";\n";Ta+=G(ba,ia.body);Ta+="\n}\n";Ta+=" lastStatement \x3d lc.voidOperation; \n";Ta+=" \n}\n";Ta+="else if (lc.isImmutableArray("+La+")) {";Ta=Ta+("var "+Ya+"\x3d"+La+".length(); \nfor(var ")+(Ua+"\x3d0; "+Ua+"\x3c"+Ya+"; "+Ua+"++) {\n");Ta+=wa+"\x3d"+Ua+";\n";Ta+=G(ba,ia.body);
Ta+="\n}\n";Ta+=" lastStatement \x3d lc.voidOperation; \n";Ta+=" \n}\n";Ta+="else if (( "+La+" instanceof lang.Dictionary) || ( "+La+" instanceof lang.Feature)) {";Ta=Ta+("var "+Ya+"\x3d"+La+".keys(); \nfor(var ")+(Ua+"\x3d0; "+Ua+"\x3c"+Ya+".length; "+Ua+"++) {\n");Ta+=wa+"\x3d"+Ya+"["+Ua+"];\n";Ta+=G(ba,ia.body);Ta+="\n}\n";Ta+=" lastStatement \x3d lc.voidOperation; \n";Ta+=" \n}\n";ba.isAsync&&(Ta+="else if (lc.isFeatureSet("+La+")) {",Ta=Ta+("var "+Ya+"\x3d"+La+".iterator(runtimeCtx.abortSignal); \nfor(var ")+
(Ua+"\x3dlang. graphicToFeature( yield "+Ya+".next(),"+La+", runtimeCtx); "+Ua+"!\x3dnull; "+Ua+"\x3dlang. graphicToFeature( yield "+Ya+".next(),"+La+", runtimeCtx)) {\n")+(wa+"\x3d"+Ua+";\n"),Ta+=G(ba,ia.body),Ta+="\n}\n",Ta+=" lastStatement \x3d lc.voidOperation; \n",Ta+=" \n}\n");return Ta+"else { lastStatement \x3d lc.voidOperation; } \n";case "WhileStatement":wa="lastStatement \x3d lc.voidOperation; \n";var kb=Y(ba);return wa+="\n  var "+kb+" \x3d true;\n    do {\n      "+kb+" \x3d "+G(ba,ia.test)+
";\n      if ("+kb+"\x3d\x3dfalse) {\n        break;\n      }\n      if ("+kb+"!\x3d\x3dtrue) {\n        lang.error('"+v.ExecutionErrorCodes.BooleanConditionRequired+"');\n      }\n      "+G(ba,ia.body)+"\n    }\n    while ("+kb+" !\x3d\x3d false);\n    lastStatement \x3d lc.voidOperation;\n  ";case "Identifier":return P(ba,ia);case "MemberExpression":try{wa=void 0;!0===ia.computed?wa=G(ba,ia.property):(wa="'"+ia.property.name+"'",S(ia.property.name));var qb="lang.member("+G(ba,ia.object)+","+wa+
")"}catch(Eb){throw Eb;}return qb;case "Literal":return null===ia.value||void 0===ia.value?"null":JSON.stringify(ia.value);case "CallExpression":return J(ba,ia);case "UnaryExpression":try{var ob="lang.unary("+G(ba,ia.argument)+",'"+ia.operator+"')"}catch(Eb){throw Eb;}return ob;case "BinaryExpression":try{var wb="lang.binary("+G(ba,ia.left)+","+G(ba,ia.right)+",'"+ia.operator+"')"}catch(Eb){throw Eb;}return wb;case "LogicalExpression":try{if("AssignmentExpression"===ia.left.type||"UpdateExpression"===
ia.left.type)throw new v.ArcadeCompilationError(ba,v.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,ia);if("AssignmentExpression"===ia.right.type||"UpdateExpression"===ia.right.type)throw new v.ArcadeCompilationError(ba,v.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,ia);if("\x26\x26"===ia.operator||"||"===ia.operator)var Gb="(lang.logicalCheck("+G(ba,ia.left)+") "+ia.operator+" lang.logicalCheck("+G(ba,ia.right)+"))";else throw new v.ArcadeCompilationError(null,v.ExecutionErrorCodes.LogicExpressionOrAnd,
null);}catch(Eb){throw Eb;}return Gb;case "ArrayExpression":try{wa=[];for(Aa=0;Aa<ia.elements.length;Aa++)"Literal"===ia.elements[Aa].type?wa.push(G(ba,ia.elements[Aa])):wa.push("lang.aCheck("+G(ba,ia.elements[Aa])+",'ArrayExpression')");var yb="["+wa.join(",")+"]"}catch(Eb){throw Eb;}return yb;case "ObjectExpression":wa="lang.dictionary([";for(Aa=0;Aa<ia.properties.length;Aa++){var lb=ia.properties[Aa];S(lb.key.name);var Db="Identifier"===lb.key.type?"'"+lb.key.name+"'":G(ba,lb.key),Sb=G(ba,lb.value);
0<Aa&&(wa+=",");wa+="lang.strCheck("+Db+",'ObjectExpression'),lang.aCheck("+Sb+", 'ObjectExpression')"}return wa+"])";case "Property":throw new v.ArcadeCompilationError(ba,v.ExecutionErrorCodes.NeverReach,ia);case "Array":throw new v.ArcadeCompilationError(ba,v.ExecutionErrorCodes.NeverReach,ia);default:throw new v.ArcadeCompilationError(ba,v.ExecutionErrorCodes.Unrecognised,ia);}}catch(Eb){throw Eb;}}function F(ba,ia){var wa=null,Aa="";if("MemberExpression"===ia.argument.type)return wa=G(ba,ia.argument.object),
!0===ia.argument.computed?Aa=G(ba,ia.argument.property):(Aa="'"+ia.argument.property.name+"'",S(ia.argument.property.name)),"lang.memberupdate("+wa+","+Aa+",'"+ia.operator+"',"+ia.prefix+")";wa=ia.argument.name.toLowerCase();S(wa);if(null!==ba.localScope){if(void 0!==ba.localScope[wa])return"lang.update(lscope, '"+wa+"','"+ia.operator+"',"+ia.prefix+")";if(void 0!==ba.localScope._SymbolsMap[wa])return"lang.update(lscope, '"+ba.localScope._SymbolsMap[wa]+"','"+ia.operator+"',"+ia.prefix+")"}if(void 0!==
ba.globalScope[wa])return"lang.update(gscope, '"+wa+"','"+ia.operator+"',"+ia.prefix+")";if(void 0!==ba.globalScope._SymbolsMap[wa])return"lang.update(gscope, '"+ba.globalScope._SymbolsMap[wa]+"','"+ia.operator+"',"+ia.prefix+")";if(null!==ba.localScope){if(ba.undeclaredGlobalsInFunctions.has(wa))return"lang.update(gscope,lang.chkAssig( '"+ba.undeclaredGlobalsInFunctions.get(wa).manglename+"',runtimeCtx),'"+ia.operator+"',"+ia.prefix+")";Aa={manglename:U(ba),node:ia.argument};ba.undeclaredGlobalsInFunctions.set(wa,
Aa);return"lang.update(gscope, lang.chkAssig('"+Aa.manglename+"',runtimeCtx),'"+ia.operator+"',"+ia.prefix+")"}throw new v.ArcadeExecutionError(ba,v.ExecutionErrorCodes.InvalidIdentifier,ia);}function H(ba,ia){var wa=G(ba,ia.right),Aa=null,Fa="";if("MemberExpression"===ia.left.type)return Aa=G(ba,ia.left.object),!0===ia.left.computed?Fa=G(ba,ia.left.property):(Fa="'"+ia.left.property.name+"'",S(ia.left.property.name)),"lang.assignmember("+Aa+","+Fa+",'"+ia.operator+"',"+wa+")";Aa=ia.left.name.toLowerCase();
S(Aa);if(null!==ba.localScope){if(void 0!==ba.localScope[Aa])return"lscope['"+Aa+"']\x3dlang.assign("+wa+",'"+ia.operator+"', lscope['"+Aa+"'])";if(void 0!==ba.localScope._SymbolsMap[Aa])return"lscope['"+ba.localScope._SymbolsMap[Aa]+"']\x3dlang.assign("+wa+",'"+ia.operator+"', lscope['"+ba.localScope._SymbolsMap[Aa]+"'])"}if(void 0!==ba.globalScope[Aa])return"gscope['"+Aa+"']\x3dlang.assign("+wa+",'"+ia.operator+"', gscope['"+Aa+"'])";if(void 0!==ba.globalScope._SymbolsMap[Aa])return"gscope['"+ba.globalScope._SymbolsMap[Aa]+
"']\x3dlang.assign("+wa+",'"+ia.operator+"', gscope['"+ba.globalScope._SymbolsMap[Aa]+"'])";if(null!==ba.localScope){if(ba.undeclaredGlobalsInFunctions.has(Aa))return"gscope[lang.chkAssig('"+ba.undeclaredGlobalsInFunctions.get(Aa).manglename+"',runtimeCtx)]\x3dlang.assign("+wa+",'"+ia.operator+"', gscope['"+ba.undeclaredGlobalsInFunctions.get(Aa).manglename+"'])";Fa={manglename:U(ba),node:ia.argument};ba.undeclaredGlobalsInFunctions.set(Aa,Fa);return"gscope[lang.chkAssig('"+Fa.manglename+"',runtimeCtx)]\x3dlang.assign("+
wa+",'"+ia.operator+"', gscope['"+Fa.manglename+"'])"}throw new v.ArcadeExecutionError(ba,v.ExecutionErrorCodes.InvalidIdentifier,ia);}function L(ba,ia){return"BlockStatement"===ia.type?G(ba,ia):"ReturnStatement"===ia.type||"BreakStatement"===ia.type||"ContinueStatement"===ia.type?G(ba,ia)+"; ":"UpdateExpression"===ia.type?"lastStatement \x3d "+G(ba,ia)+"; ":"ExpressionStatement"===ia.type?G(ba,ia):"ObjectExpression"===ia.type?"lastStatement \x3d "+G(ba,ia)+"; ":G(ba,ia)+"; "}function M(ba,ia){if("AssignmentExpression"===
ia.test.type||"UpdateExpression"===ia.test.type)throw new v.ArcadeCompilationError(ba,v.ExecutionErrorCodes.BooleanConditionRequired,ia);return"if (lang.mustBoolean("+G(ba,ia.test)+", runtimeCtx) \x3d\x3d\x3d true) {\n    "+L(ba,ia.consequent)+"\n  } "+(null!==ia.alternate?"IfStatement"===ia.alternate.type?" else "+M(ba,ia.alternate):" else {\n      "+L(ba,ia.alternate)+"\n    }\n":" else {\n      lastStatement \x3d lc.voidOperation;\n    }\n")}function Q(ba,ia){for(var wa="",Aa=0;Aa<ia.body.length;Aa++)"EmptyStatement"!==
ia.body[Aa].type&&(wa="ReturnStatement"===ia.body[Aa].type?wa+(G(ba,ia.body[Aa])+"; \n"):"BreakStatement"===ia.body[Aa].type?wa+(G(ba,ia.body[Aa])+"; \n"):"ContinueStatement"===ia.body[Aa].type?wa+(G(ba,ia.body[Aa])+"; \n"):"UpdateExpression"===ia.body[Aa].type?wa+("lastStatement \x3d "+G(ba,ia.body[Aa])+"; \n"):"ObjectExpression"===ia.body[Aa].type?wa+("lastStatement \x3d "+G(ba,ia.body[Aa])+"; \n"):wa+(G(ba,ia.body[Aa])+" \n"));return wa}function S(ba){if("iif"===ba)throw new v.ArcadeUncompilableError;
if("decode"===ba)throw new v.ArcadeUncompilableError;if("when"===ba)throw new v.ArcadeUncompilableError;}function I(ba,ia){var wa=null===ia.init?null:G(ba,ia.init);wa===m.voidOperation&&(wa=null);ia=ia.id.name.toLowerCase();S(ia);if(null!==ba.localScope){if(void 0!==ba.localScope[ia])return"lscope['"+ia+"']\x3d"+wa+"; ";if(void 0!==ba.localScope._SymbolsMap[ia])return"lscope['"+ba.localScope._SymbolsMap[ia]+"']\x3d"+wa+"; ";var Aa=U(ba);ba.localScope._SymbolsMap[ia]=Aa;ba.mangleMap[ia]=Aa;return"lscope['"+
Aa+"']\x3d"+wa+"; "}if(void 0!==ba.globalScope[ia])return"gscope['"+ia+"']\x3d"+wa+"; ";if(void 0!==ba.globalScope._SymbolsMap[ia])return"gscope['"+ba.globalScope._SymbolsMap[ia]+"']\x3d"+wa+"; ";if(ba.undeclaredGlobalsInFunctions.has(ia))return Aa=ba.undeclaredGlobalsInFunctions.get(ia).manglename,ba.globalScope._SymbolsMap[ia]=Aa,ba.mangleMap[ia]=Aa,ba.undeclaredGlobalsInFunctions.delete(ia),"gscope[lang.setAssig('"+Aa+"', runtimeCtx)]\x3d"+wa+"; ";Aa=U(ba);ba.globalScope._SymbolsMap[ia]=Aa;ba.mangleMap[ia]=
Aa;return"gscope['"+Aa+"']\x3d"+wa+"; "}function P(ba,ia){try{var wa=ia.name.toLowerCase();S(wa);if(null!==ba.localScope){if(void 0!==ba.localScope[wa])return"lscope['"+wa+"']";if(void 0!==ba.localScope._SymbolsMap[wa])return"lscope['"+ba.localScope._SymbolsMap[wa]+"']"}if(void 0!==ba.globalScope[wa])return"gscope['"+wa+"']";if(void 0!==ba.globalScope._SymbolsMap[wa])return"gscope['"+ba.globalScope._SymbolsMap[wa]+"']";if(null!==ba.localScope){if(ba.undeclaredGlobalsInFunctions.has(wa))return"gscope[lang.chkAssig('"+
ba.undeclaredGlobalsInFunctions.get(wa).manglename+"',runtimeCtx)]";var Aa={manglename:U(ba),node:ia.argument};ba.undeclaredGlobalsInFunctions.set(wa,Aa);return"gscope[lang.chkAssig('"+Aa.manglename+"',runtimeCtx)]"}throw new v.ArcadeCompilationError(ba,v.ExecutionErrorCodes.InvalidIdentifier,ia);}catch(Fa){throw Fa;}}function J(ba,ia){try{if("MemberExpression"===ia.callee.type){var wa=void 0;!0===ia.callee.computed?wa=G(ba,ia.callee.property):(wa="'"+ia.callee.property.name+"'",S(ia.callee.property.name));
for(var Aa="[",Fa=0;Fa<ia.arguments.length;Fa++)0<Fa&&(Aa+=", "),Aa+=G(ba,ia.arguments[Fa]);Aa+="]";return ba.isAsync?"(yield lang.callModuleFunction("+G(ba,ia.callee.object)+","+Aa+","+wa+",runtimeCtx))":"lang.callModuleFunction("+G(ba,ia.callee.object)+","+Aa+","+wa+",runtimeCtx)"}if("Identifier"!==ia.callee.type)throw new v.ArcadeCompilationError(ba,v.ExecutionErrorCodes.FuncionNotFound,ia);var O=ia.callee.name.toLowerCase();if("iif"===O){try{if(3!==ia.arguments.length)throw new v.ArcadeCompilationError(ba,
v.ExecutionErrorCodes.WrongNumberOfParameters,ia);var ya=Y(ba);var Ha=(ba.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {")+"\n        var "+ya+" \x3d "+G(ba,ia.arguments[0])+";\n       \n        if ("+ya+" \x3d\x3d\x3d true) {\n          return  "+G(ba,ia.arguments[1])+";\n        }\n        else if ("+ya+" \x3d\x3d\x3d false) {\n          return "+G(ba,ia.arguments[2])+";\n        }\n        else {\n          lang.error('ExecutionErrorCodes.BooleanConditionRequired');\n        }\n      "+
(ba.isAsync?"})}()))":"}()")}catch(oa){throw oa;}return Ha}if("when"===O){try{if(3>ia.arguments.length)throw new v.ArcadeCompilationError(ba,v.ExecutionErrorCodes.WrongNumberOfParameters,ia);if(0===ia.arguments.length%2)throw new v.ArcadeCompilationError(ba,v.ExecutionErrorCodes.WrongNumberOfParameters,ia);var ea=Y(ba);Aa="var ";for(Fa=0;Fa<ia.arguments.length-1;Fa+=2)Aa+=ea+" \x3d lang.mustBoolean("+G(ba,ia.arguments[Fa])+", runtimeCtx);\n      if ("+ea+" \x3d\x3d\x3d true ) {\n        return "+
G(ba,ia.arguments[Fa+1])+" \n      }\n";wa=(ba.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {")+"\n        "+Aa+"\n        return "+G(ba,ia.arguments[ia.arguments.length-1])+"\n        "+(ba.isAsync?"})}()))":"}()")}catch(oa){throw oa;}return wa}if("decode"===O){try{if(2>ia.arguments.length)throw new v.ArcadeCompilationError(ba,v.ExecutionErrorCodes.WrongNumberOfParameters,ia);if(2===ia.arguments.length)var Oa="("+G(ba,ia.arguments[1])+")";
else{if(0===(ia.arguments.length-1)%2)throw new v.ArcadeCompilationError(ba,v.ExecutionErrorCodes.WrongNumberOfParameters,ia);var Na=Y(ba),Ca=Y(ba);Aa="var ";for(Fa=1;Fa<ia.arguments.length-1;Fa+=2)Aa+=Ca+" \x3d "+G(ba,ia.arguments[Fa])+";\n      if (lang.binary("+Ca+", "+Na+', "\x3d\x3d") \x3d\x3d\x3d true ) {\n        return '+G(ba,ia.arguments[Fa+1])+" \n      }\n";Oa=(ba.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {")+"\n        var "+
Na+" \x3d "+G(ba,ia.arguments[0])+";\n        "+Aa+"\n        return "+G(ba,ia.arguments[ia.arguments.length-1])+"\n        "+(ba.isAsync?"})}()))":"}()")}}catch(oa){throw oa;}return Oa}wa="";null!==ba.localScope&&(void 0!==ba.localScope[O]?wa="lscope['"+O+"']":void 0!==ba.localScope._SymbolsMap[O]&&(wa="lscope['"+ba.localScope._SymbolsMap[O]+"']"));if(""===wa)if(void 0!==ba.globalScope[O])wa="gscope['"+O+"']";else if(void 0!==ba.globalScope._SymbolsMap[O])wa="gscope['"+ba.globalScope._SymbolsMap[O]+
"']";else if(null!==ba.localScope)if(ba.undeclaredGlobalsInFunctions.has(O))wa="gscope[lang.chkAssig('"+ba.undeclaredGlobalsInFunctions.get(O).manglename+"',runtimeCtx)]";else{var X={manglename:U(ba),node:ia.argument};ba.undeclaredGlobalsInFunctions.set(O,X);wa="gscope[lang.chkAssig('"+X.manglename+"',runtimeCtx)]"}if(""!==wa){Aa="[";for(Fa=0;Fa<ia.arguments.length;Fa++)0<Fa&&(Aa+=", "),Aa+=G(ba,ia.arguments[Fa]);Aa+="]";return ba.isAsync?"(yield lang.callfunc("+wa+","+Aa+",runtimeCtx) )":"lang.callfunc("+
wa+","+Aa+",runtimeCtx)"}throw new v.ArcadeCompilationError(ba,v.ExecutionErrorCodes.FuncionNotFound,ia);}catch(oa){throw oa;}}function U(ba){ba.symbols.symbolCounter++;return"_T"+ba.symbols.symbolCounter.toString()}function Y(ba){ba.symbols.symbolCounter++;return"_Tvar"+ba.symbols.symbolCounter.toString()}function aa(ba,ia,wa){var Aa={};ba||(ba={});wa||(wa={});Aa._SymbolsMap={};Aa.textformatting=1;Aa.infinity=1;Aa.pi=1;for(var Fa in ia)Aa[Fa]=1;for(Fa in wa)Aa[Fa]=1;for(Fa in ba)Aa[Fa]=1;return Aa}
function la(ba,ia,wa,Aa){wa=wa?new za:new ra;ba||(ba={});ia||(ia={});var Fa=new d({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});Fa.immutable=!1;wa._SymbolsMap={textformatting:1,infinity:1,pi:1};wa.textformatting=Fa;wa.infinity=Number.POSITIVE_INFINITY;wa.pi=Math.PI;for(var O in ia)wa[O]=ia[O],wa._SymbolsMap[O]=1;for(O in ba)wa._SymbolsMap[O]=1,wa[O]=ba[O]&&"esri.Graphic"===ba[O].declaredClass?q.createFromGraphic(ba[O],null!==Aa&&void 0!==Aa?Aa:null):
ba[O];return wa}function T(ba,ia){for(var wa={mode:ia,compiled:!0,functions:{},signatures:[],standardFunction:A,standardFunctionAsync:A,evaluateIdentifier:N},Aa=0;Aa<ba.length;Aa++)ba[Aa].registerFunctions(wa);if("sync"===ia){for(var Fa in wa.functions)da[Fa]=new y.NativeFunction(wa.functions[Fa]),ra.prototype[Fa]=da[Fa];for(Aa=0;Aa<wa.signatures.length;Aa++)a.addFunctionDeclaration(wa.signatures[Aa],"sync")}else{for(Fa in wa.functions)fa[Fa]=new y.NativeFunction(wa.functions[Fa]),za.prototype[Fa]=
fa[Fa];for(Aa=0;Aa<wa.signatures.length;Aa++)a.addFunctionDeclaration(wa.signatures[Aa],"async")}}function N(ba,ia){ia=ia.name;if("_SymbolsMap"===ia)throw new v.ArcadeExecutionError(ba,v.ExecutionErrorCodes.InvalidIdentifier,null);if(0<ba.localStack.length){if("_t"!==ia.substr(0,2).toLowerCase()&&void 0!==ba.localStack[ba.localStack.length-1][ia])return ba.localStack[ba.localStack.length-1][ia];var wa=ba.mangleMap[ia];if(void 0!==wa&&void 0!==ba.localStack[ba.localStack.length-1][wa])return ba.localStack[ba.localStack.length-
1][wa]}if("_t"!==ia.substr(0,2).toLowerCase()&&void 0!==ba.globalScope[ia]||1===ba.globalScope._SymbolsMap[ia])return ba.globalScope[ia];ia=ba.mangleMap[ia];if(void 0!==ia)return ba.globalScope[ia]}function K(ba){}function W(ba,ia,wa){var Aa;void 0===wa&&(wa=!1);var Fa={isAsync:wa,moduleFactory:ia.moduleFactory,moduleFactoryMap:{},libraryResolver:new E.ArcadeModuleLoader(null,ba.loadedModules),globalScope:aa(ia.vars,wa?fa:da,ia.customfunctions),customfunctions:ia.customfunctions,localScope:null,mangleMap:{},
undeclaredGlobalsInFunctions:new Map,depthCounter:{depth:1},exports:{},console:K,lrucache:ia.lrucache,timeReference:null!==(Aa=ia.timeReference)&&void 0!==Aa?Aa:null,interceptor:ia.interceptor,services:ia.services,symbols:{symbolCounter:0}};ba=G(Fa,ba);""===ba&&(ba="lc.voidOperation; ");var O=Fa.moduleFactory,ya=Fa.moduleFactoryMap,Ha=Fa.exports,ea={},Oa;for(Oa in Ha)ea[Oa]=void 0!==Fa.mangleMap[Oa]?Fa.mangleMap[Oa]:Oa;Fa={lc:m,lang:va,mangles:Fa.mangleMap,prepareModule:function(Na){return new Ga(Na)},
prepare:function(Na,Ca){var X,oa=Na.spatialReference;if(null===oa||void 0===oa)oa=new D({wkid:102100});var pa=la(Na.vars,Na.customfunctions,Ca,Na.timeReference);return{localStack:[],isAsync:Ca,exports:Ha,exportmangle:ea,gdefs:{},moduleFactory:O,moduleFactoryMap:ya,moduleSingletons:Na.moduleSingletons,mangleMap:this.mangles,spatialReference:oa,globalScope:pa,abortSignal:void 0===Na.abortSignal||null===Na.abortSignal?{aborted:!1}:Na.abortSignal,localScope:null,services:Na.services,console:Na.console?
Na.console:K,lrucache:Na.lrucache,timeReference:null!==(X=Na.timeReference)&&void 0!==X?X:null,interceptor:Na.interceptor,symbols:{symbolCounter:0},depthCounter:Na.depthCounter}}};return(new Function("context","spatialReference",wa?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
ba+"\n return lastStatement; }); } \n yield mainBody(); \n return this.prepareModule(runtimeCtx); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+ba+"\n return lastStatement; } \n mainBody(); \n return this.prepareModule(runtimeCtx); ")).bind(Fa)}Object.defineProperty(B,"__esModule",{value:!0});B.enableAsyncSupport=B.compileScript=B.executeScript=
B.extend=B.functionHelper=B.UserDefinedCompiledFunction=void 0;l=function(ba){function ia(wa,Aa){var Fa=ba.call(this)||this;Fa.paramCount=Aa;Fa.fn=wa;return Fa}t(ia,ba);ia.prototype.createFunction=function(wa){var Aa=this;return function(){for(var Fa=[],O=0;O<arguments.length;O++)Fa[O]=arguments[O];if(Fa.length!==Aa.paramCount)throw new v.ArcadeExecutionError(wa,v.ExecutionErrorCodes.WrongNumberOfParameters,null);return Aa.fn.apply(Aa,Fa)}};ia.prototype.call=function(wa,Aa){return this.fn.apply(this,
Aa.arguments)};ia.prototype.marshalledCall=function(wa,Aa,Fa,O){var ya=this;return O(wa,Aa,function(Ha,ea,Oa){Oa=Oa.map(function(Na){return!m.isFunctionParameter(Na)||Na instanceof y.ScopeMarshalledFunction?Na:y.wrapModuleScopedResponse(Na,wa,O)});Ha=ya.call(Fa,{arguments:Oa});return x.isPromiseLike(Ha)?Ha.then(function(Na){return y.wrapModuleScopedResponse(Na,Fa,O)}):Ha})};return ia}(y.ArcadeFunction);B.UserDefinedCompiledFunction=l;var da={};n.registerFunctions(da,A);w.registerFunctions(da,A);g.registerFunctions(da,
A);r.registerFunctions(da,A);b.registerFunctions(da,A);da.iif=function(ba,ia){try{return A(ba,ia,function(wa,Aa,Fa){throw new v.ArcadeExecutionError(ba,v.ExecutionErrorCodes.Unrecognised,ia);})}catch(wa){throw wa;}};da.decode=function(ba,ia){try{return A(ba,ia,function(wa,Aa,Fa){throw new v.ArcadeExecutionError(ba,v.ExecutionErrorCodes.Unrecognised,ia);})}catch(wa){throw wa;}};da.when=function(ba,ia){try{return A(ba,ia,function(wa,Aa,Fa){throw new v.ArcadeExecutionError(ba,v.ExecutionErrorCodes.Unrecognised,
ia);})}catch(wa){throw wa;}};var fa={},ha;for(ha in da)fa[ha]=new y.NativeFunction(da[ha]);k.registerFunctions(da,A);for(ha in da)da[ha]=new y.NativeFunction(da[ha]);var ra=function(){};ra.prototype=da;var za=function(){};za.prototype=fa;B.functionHelper={fixSpatialReference:m.fixSpatialReference,parseArguments:function(ba,ia){for(var wa=[],Aa=0;Aa<ia.arguments.length;Aa++)wa.push(G(ba,ia.arguments[Aa]));return wa},standardFunction:A};B.extend=T;T([h],"sync");T([h],"async");B.executeScript=function(ba,
ia){return ba(ia)};var Da=0,va={error:function(ba){throw new v.ArcadeExecutionError(null,ba,null);},__awaiter:function(ba,ia,wa,Aa){return new Promise(function(Fa,O){function ya(Oa){try{ea(Aa.next(Oa))}catch(Na){O(Na)}}function Ha(Oa){try{ea(Aa["throw"](Oa))}catch(Na){O(Na)}}function ea(Oa){Oa.done?Fa(Oa.value):Oa.value&&Oa.value.then?Oa.value.then(ya,Ha):(Da++,0===Da%100?setTimeout(function(){Da=0;ya(Oa.value)},0):ya(Oa.value))}ea((Aa=Aa.apply(ba,ia||[])).next())})},functionDepthchecker:function(ba,
ia){return function(){ia.depthCounter.depth++;ia.localStack.push([]);if(64<ia.depthCounter.depth)throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.MaximumCallDepth,null);var wa=ba.apply(this,arguments);if(x.isPromiseLike(wa))return wa.then(function(Aa){ia.depthCounter.depth--;--ia.localStack.length;return Aa});ia.depthCounter.depth--;--ia.localStack.length;return wa}},chkAssig:function(ba,ia){if(void 0===ia.gdefs[ba])throw new v.ArcadeExecutionError(ia,v.ExecutionErrorCodes.InvalidIdentifier,
null);return ba},mustBoolean:function(ba,ia){if(!0===ba||!1===ba)return ba;throw new v.ArcadeExecutionError(ia,v.ExecutionErrorCodes.BooleanConditionRequired,null);},setAssig:function(ba,ia){ia.gdefs[ba]=1;return ba},castString:function(ba){return m.toString(ba)},aCheck:function(ba,ia){if(m.isFunctionParameter(ba)){if("ArrayExpression"===ia)throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.NoFunctionInArray,null);if("ObjectExpression"===ia)throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.NoFunctionInDictionary,
null);throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.NoFunctionInTemplateLiteral,null);}return ba===m.voidOperation?null:ba},Dictionary:d,Feature:q,UserDefinedCompiledFunction:l,dictionary:function(ba){for(var ia={},wa=new Map,Aa=0;Aa<ba.length;Aa+=2){if(m.isFunctionParameter(ba[Aa+1]))throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.NoFunctionInDictionary,null);if(!1===m.isString(ba[Aa]))throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.KeyMustBeString,null);var Fa=
ba[Aa].toString(),O=Fa.toLowerCase();wa.has(O)?Fa=wa.get(O):wa.set(O,Fa);ia[Fa]=ba[Aa+1]===m.voidOperation?null:ba[Aa+1]}ba=new d(ia);ba.immutable=!1;return ba},strCheck:function(ba){if(!1===m.isString(ba))throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.KeyMustBeString,null);return ba},unary:function(ba,ia){if(m.isBoolean(ba)){if("!"===ia)return!ba;if("-"===ia)return-1*m.toNumber(ba);if("+"===ia)return 1*m.toNumber(ba);if("~"===ia)return~m.toNumber(ba);throw new v.ArcadeExecutionError(null,
v.ExecutionErrorCodes.UnsupportedUnaryOperator,null);}if("-"===ia)return-1*m.toNumber(ba);if("+"===ia)return 1*m.toNumber(ba);if("~"===ia)return~m.toNumber(ba);throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.UnsupportedUnaryOperator,null);},logicalCheck:function(ba){if(!1===m.isBoolean(ba))throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.LogicExpressionOrAnd,null);return ba},logical:function(ba,ia,wa){if(m.isBoolean(ba)&&m.isBoolean(ia))switch(wa){case "||":return ba||ia;case "\x26\x26":return ba&&
ia}throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.LogicExpressionOrAnd,null);},binary:function(ba,ia,wa){switch(wa){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return m.binaryOperator(m.toNumber(ba),m.toNumber(ia),wa);case "\x3d\x3d":return m.equalityTest(ba,ia);case "\x3d":return m.equalityTest(ba,ia);case "!\x3d":return!m.equalityTest(ba,ia);case "\x3c":return m.greaterThanLessThan(ba,ia,wa);case "\x3e":return m.greaterThanLessThan(ba,ia,wa);case "\x3c\x3d":return m.greaterThanLessThan(ba,
ia,wa);case "\x3e\x3d":return m.greaterThanLessThan(ba,ia,wa);case "+":return m.isString(ba)||m.isString(ia)?m.toString(ba)+m.toString(ia):m.toNumber(ba)+m.toNumber(ia);case "-":return m.toNumber(ba)-m.toNumber(ia);case "*":return m.toNumber(ba)*m.toNumber(ia);case "/":return m.toNumber(ba)/m.toNumber(ia);case "%":return m.toNumber(ba)%m.toNumber(ia);default:throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.UnsupportedOperator,null);}},assign:function(ba,ia,wa){switch(ia){case "\x3d":return ba===
m.voidOperation?null:ba;case "/\x3d":return m.toNumber(wa)/m.toNumber(ba);case "*\x3d":return m.toNumber(wa)*m.toNumber(ba);case "-\x3d":return m.toNumber(wa)-m.toNumber(ba);case "+\x3d":return m.isString(wa)||m.isString(ba)?m.toString(wa)+m.toString(ba):m.toNumber(wa)+m.toNumber(ba);case "%\x3d":return m.toNumber(wa)%m.toNumber(ba);default:throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.UnsupportedOperator,null);}},update:function(ba,ia,wa,Aa){var Fa=m.toNumber(ba[ia]);ba[ia]="++"===
wa?Fa+1:Fa-1;return!1===Aa?Fa:"++"===wa?Fa+1:Fa-1},graphicToFeature:function(ba,ia,wa){return null===ba?null:q.createFromGraphicLikeObject(ba.geometry,ba.attributes,ia,wa.timeReference)},memberupdate:function(ba,ia,wa,Aa){if(m.isArray(ba))if(m.isNumber(ia)){0>ia&&(ia=ba.length+ia);if(0>ia||ia>=ba.length)throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.OutOfBounds,null);var Fa=m.toNumber(ba[ia]);ba[ia]="++"===wa?Fa+1:Fa-1}else throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.ArrayAccessorMustBeNumber,
null);else if(ba instanceof d){if(!1===m.isString(ia))throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===ba.hasField(ia))Fa=m.toNumber(ba.field(ia)),ba.setField(ia,"++"===wa?Fa+1:Fa-1);else throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.FieldNotFound,null,{key:ia});}else if(m.isFeature(ba)){if(!1===m.isString(ia))throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===ba.hasField(ia))Fa=m.toNumber(ba.field(ia)),
ba.setField(ia,"++"===wa?Fa+1:Fa-1);else throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.FieldNotFound,null);}else{if(m.isImmutableArray(ba))throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.Immutable,null);if(ba instanceof Ga){if(!1===m.isString(ia))throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.ModuleAccessorMustBeString,null);if(!0===ba.hasGlobal(ia))Fa=m.toNumber(ba.global(ia)),ba.setGlobal(ia,"++"===wa?Fa+1:Fa-1);else throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.ModuleExportNotFound,
null);}else throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.InvalidIdentifier,null);}return!1===Aa?Fa:"++"===wa?Fa+1:Fa-1},assignmember:function(ba,ia,wa,Aa){if(m.isArray(ba))if(m.isNumber(ia)){0>ia&&(ia=ba.length+ia);if(0>ia||ia>ba.length)throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.OutOfBounds,null);if(ia===ba.length&&"\x3d"!==wa)throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.OutOfBounds,null);ba[ia]=this.assign(Aa,wa,ba[ia])}else throw new v.ArcadeExecutionError(null,
v.ExecutionErrorCodes.ArrayAccessorMustBeNumber,null);else if(ba instanceof d){if(!1===m.isString(ia))throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===ba.hasField(ia))ba.setField(ia,this.assign(Aa,wa,ba.field(ia)));else{if("\x3d"!==wa)throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.FieldNotFound,null);ba.setField(ia,this.assign(Aa,wa,null))}}else if(m.isFeature(ba)){if(!1===m.isString(ia))throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.KeyAccessorMustBeString,
null);if(!0===ba.hasField(ia))ba.setField(ia,this.assign(Aa,wa,ba.field(ia)));else{if("\x3d"!==wa)throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.FieldNotFound,null);ba.setField(ia,this.assign(Aa,wa,null))}}else{if(m.isImmutableArray(ba))throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.Immutable,null);if(ba instanceof Ga){if(!1===m.isString(ia))throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.ModuleAccessorMustBeString,null);if(ba.hasGlobal(ia))ba.setGlobal(ia,this.assign(Aa,
wa,ba.global(ia)));else throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.ModuleExportNotFound,null);}else throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.InvalidIdentifier,null);}},member:function(ba,ia){if(null===ba)throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.MemberOfNull,null);if(ba instanceof d||m.isFeature(ba)){if(m.isString(ia))return ba.field(ia);throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(ba instanceof z){if(m.isString(ia))return r.geometryMember(ba,
ia,null,null);throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(m.isArray(ba)){if(m.isNumber(ia)&&isFinite(ia)&&Math.floor(ia)===ia){0>ia&&(ia=ba.length+ia);if(ia>=ba.length||0>ia)throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.OutOfBounds,null);return ba[ia]}throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(m.isString(ba)){if(m.isNumber(ia)&&isFinite(ia)&&Math.floor(ia)===ia){0>ia&&(ia=ba.length+ia);
if(ia>=ba.length||0>ia)throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.OutOfBounds,null);return ba[ia]}throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(m.isImmutableArray(ba)){if(m.isNumber(ia)&&isFinite(ia)&&Math.floor(ia)===ia){0>ia&&(ia=ba.length()+ia);if(ia>=ba.length()||0>ia)throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.OutOfBounds,null);return ba.get(ia)}throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.InvalidMemberAccessKey,
null);}if(ba instanceof Ga&&m.isString(ia))return ba.global(ia);throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.InvalidMemberAccessKey,null);},callfunc:function(ba,ia,wa){return ba.call(wa,{arguments:ia,preparsed:!0})},loadModule:function(ba,ia){ba=ia.moduleFactoryMap[ba];if(ia.moduleSingletons[ba])return ia.moduleSingletons[ba];var wa=ia.moduleFactory[ba]({vars:{},moduleSingletons:ia.moduleSingletons,depthCounter:ia.depthCounter,console:ia.console,abortSignal:ia.abortSignal,isAsync:ia.isAsync,
services:ia.services,lrucache:ia.lrucache,timeReference:ia.timeReference?ia.timeReference:null,interceptor:ia.interceptor},ia.spatialReference);return ia.moduleSingletons[ba]=wa},callModuleFunction:function(ba,ia,wa,Aa){if(!(ba instanceof Ga))throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.FuncionNotFound,null);ba=ba.global(wa);if(!1===m.isFunctionParameter(ba))throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.CallNonFunction,null);return ba.call(Aa,{preparsed:!0,arguments:ia})}};
B.compileScript=function(ba,ia,wa){var Aa;void 0===wa&&(wa=!1);null===ia&&(ia={vars:{},customfunctions:{}});var Fa=null;ba.usesModules&&(Fa=new E.ArcadeModuleLoader(null,ba.loadedModules));Fa={isAsync:wa,globalScope:aa(ia.vars,wa?fa:da,ia.customfunctions),moduleFactory:{},moduleFactoryMap:{},undeclaredGlobalsInFunctions:new Map,customfunctions:ia.customfunctions,libraryResolver:Fa,localScope:null,mangleMap:{},depthCounter:{depth:1},exports:{},console:K,lrucache:ia.lrucache,timeReference:null!==(Aa=
ia.timeReference)&&void 0!==Aa?Aa:null,interceptor:ia.interceptor,services:ia.services,symbols:{symbolCounter:0}};ba=G(Fa,ba);""===ba&&(ba="lc.voidOperation; ");0<Fa.undeclaredGlobalsInFunctions.size&&Fa.undeclaredGlobalsInFunctions.forEach(function(Na){throw new v.ArcadeCompilationError(ia,v.ExecutionErrorCodes.InvalidIdentifier,Na.node);});var O=Fa.moduleFactory,ya=Fa.moduleFactoryMap,Ha=Fa.exports,ea={};for(Oa in Ha)ea[Oa]=void 0!==Fa.mangleMap[Oa]?Fa.mangleMap[Oa]:Oa;var Oa={lc:m,lang:va,mangles:Fa.mangleMap,
postProcess:function(Na){Na instanceof m.ReturnResult&&(Na=Na.value);Na instanceof m.ImplicitResult&&(Na=Na.value);Na===m.voidOperation&&(Na=null);if(Na===m.breakResult)throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.IllegalResult,null);if(Na===m.continueResult)throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.IllegalResult,null);if(m.isFunctionParameter(Na))throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.IllegalResult,null);return Na},prepare:function(Na,Ca){var X,
oa=Na.spatialReference;if(null===oa||void 0===oa)oa=new D({wkid:102100});var pa=la(Na.vars,Na.customfunctions,Ca,Na.timeReference);return{localStack:[],isAsync:Ca,moduleFactory:O,moduleFactoryMap:ya,mangleMap:this.mangles,moduleSingletons:{},exports:Ha,gdefs:{},exportmangle:ea,spatialReference:oa,globalScope:pa,abortSignal:void 0===Na.abortSignal||null===Na.abortSignal?{aborted:!1}:Na.abortSignal,localScope:null,services:Na.services,console:Na.console?Na.console:K,lrucache:Na.lrucache,timeReference:null!==
(X=Na.timeReference)&&void 0!==X?X:null,interceptor:Na.interceptor,symbols:{symbolCounter:0},depthCounter:{depth:1}}}};return(new Function("context","spatialReference",wa?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+ba+
"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+ba+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(Oa)};B.enableAsyncSupport=function(){return new Promise(function(ba,ia){f(["./functions/geomasync"],function(wa){T([wa],"async");ba(!0)},
function(wa){ia(wa)})})};var Ga=function(ba){function ia(wa){var Aa=ba.call(this,null)||this;Aa.moduleContext=wa;return Aa}t(ia,ba);ia.prototype.hasGlobal=function(wa){void 0===this.moduleContext.exports[wa]&&(wa=wa.toLowerCase());return void 0!==this.moduleContext.exports[wa]?!0:!1};ia.prototype.setGlobal=function(wa,Aa){var Fa=this.moduleContext.globalScope;wa=wa.toLowerCase();if(m.isFunctionParameter(Aa))throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.AssignModuleFunction,null);Fa[this.moduleContext.exportmangle[wa]]=
Aa};ia.prototype.global=function(wa){var Aa=this.moduleContext.globalScope;wa=wa.toLowerCase();var Fa=Aa[this.moduleContext.exportmangle[wa]];if(void 0===Fa)throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.InvalidIdentifier,null);if(m.isFunctionParameter(Fa)&&!(Fa instanceof y.ScopeMarshalledFunction)){var O=new y.ScopeMarshalledFunction;O.fn=Fa;O.parameterEvaluator=A;O.context=this.moduleContext;return Aa[this.moduleContext.exportmangle[wa]]=O}return Fa};return ia}(C.ArcadeModule)})},
"esri/arcade/polyfill/tsSupport/assign":function(){define([],function(){return function(){return function(){return(Object.assign||function(f){for(var B,l=1,e=arguments.length;l<e;l++){B=arguments[l];for(var c in B)Object.prototype.hasOwnProperty.call(B,c)&&(f[c]=B[c])}return f}).apply(this,arguments)}}()})},"esri/arcade/polyfill/tsSupport/spreadarray":function(){define([],function(){return function(){return function(f,B,l){if(l||2===arguments.length)for(var e=0,c=B.length,u;e<c;e++)!u&&e in B||(u||
(u=Array.prototype.slice.call(B,0,e)),u[e]=B[e]);return f.concat(u||Array.prototype.slice.call(B))}}()})},"esri/arcade/polyfill/tsSupport/extends":function(){define([],function(){return function(){var f=function(B,l){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,c){e.__proto__=c}||function(e,c){for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(e[u]=c[u])};return f(B,l)};return function(B,l){function e(){this.constructor=B}if("function"!==typeof l&&null!==l)throw new TypeError("Class extends value "+
String(l)+" is not a constructor or null");f(B,l);B.prototype=null===l?Object.create(l):(e.prototype=l.prototype,new e)}}()})},"esri/arcade/Dictionary":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./ArcadeDate ./executionError ./ImmutableArray ./languageUtils ../geometry/Geometry".split(" "),function(f,B,l,e,c,u,t,d,q){function m(h,n,r){void 0===r&&(r=!1);if(null===h||void 0===h)return null;if(d.isNumber(h))return d.toNumber(h);if(d.isBoolean(h))return d.toBoolean(h);
if(d.isString(h))return d.toString(h);if(d.isDate(h))return d.toDate(h,n);if(d.isArray(h)){for(var k=[],g=0;g<h.length;g++)k.push(m(h[g],n,r));return k}g=new a;g.immutable=!1;for(var b=0,w=Object.keys(h);b<w.length;b++){var x=w[b];k=h[x];void 0!==k&&g.setField(x,m(k,n,r))}g.immutable=r;return g}var a=function(){function h(n){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=n instanceof h?n.attributes:void 0===n?{}:null===n?{}:n}h.prototype.field=
function(n){var r=n.toLowerCase(),k=this.attributes[n];if(void 0!==k)return k;for(var g in this.attributes)if(g.toLowerCase()===r)return this.attributes[g];throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.FieldNotFound,null,{key:n});};h.prototype.setField=function(n,r){if(this.immutable)throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.Immutable,null);if(d.isFunctionParameter(r))throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.NoFunctionInDictionary,null);var k=n.toLowerCase();
r instanceof Date&&(r=c.ArcadeDate.dateJSToArcadeDate(r));if(void 0===this.attributes[n])for(var g in this.attributes)if(g.toLowerCase()===k){this.attributes[g]=r;return}this.attributes[n]=r};h.prototype.hasField=function(n){var r=n.toLowerCase();if(void 0!==this.attributes[n])return!0;for(var k in this.attributes)if(k.toLowerCase()===r)return!0;return!1};h.prototype.keys=function(){var n=[],r;for(r in this.attributes)n.push(r);return n=n.sort()};h.prototype.castToText=function(n){void 0===n&&(n=
!1);var r="",k;for(k in this.attributes){""!==r&&(r+=",");var g=this.attributes[k];null==g?r+=JSON.stringify(k)+":null":d.isBoolean(g)||d.isNumber(g)||d.isString(g)?r+=JSON.stringify(k)+":"+JSON.stringify(g):g instanceof q?r+=JSON.stringify(k)+":"+d.toStringExplicit(g):g instanceof t?r+=JSON.stringify(k)+":"+d.toStringExplicit(g,null,n):g instanceof Array?r+=JSON.stringify(k)+":"+d.toStringExplicit(g,null,n):g instanceof c.ArcadeDate?r=n?r+(JSON.stringify(k)+":"+JSON.stringify(g.getTime())):r+(JSON.stringify(k)+
":"+g.stringify()):null!==g&&"object"===typeof g&&void 0!==g.castToText&&(r+=JSON.stringify(k)+":"+g.castToText(n))}return"{"+r+"}"};h.convertObjectToArcadeDictionary=function(n,r,k){void 0===k&&(k=!0);var g=new h;g.immutable=!1;for(var b in n){var w=n[b];void 0!==w&&g.setField(b.toString(),m(w,r))}g.immutable=k;return g};h.convertJsonToArcade=function(n,r,k){void 0===k&&(k=!1);return m(n,r,k)};h.prototype.castAsJson=function(n){void 0===n&&(n=null);var r={};for(g in this.attributes){var k=this.attributes[g];
if(void 0!==k){if(null===n||void 0===n?0:n.keyTranslate)var g=n.keyTranslate(g);r[g]=d.castAsJson(k,n)}}return r};h.prototype.castDictionaryValueAsJsonAsync=function(n,r,k,g,b){void 0===g&&(g=null);return l(this,void 0,void 0,function(){var w;return e(this,function(x){switch(x.label){case 0:return[4,d.castAsJsonAsync(k,g,b)];case 1:return w=x.sent(),n[r]=w,[2,w]}})})};h.prototype.castAsJsonAsync=function(n,r){void 0===n&&(n=null);void 0===r&&(r=null);return l(this,void 0,void 0,function(){var k,g,
b,w;return e(this,function(x){switch(x.label){case 0:k={};g=[];for(b in this.attributes){w=this.attributes[b];if(null===r||void 0===r?0:r.keyTranslate)b=r.keyTranslate(b);void 0!==w&&(d.isSimpleType(w)||w instanceof q||w instanceof c.ArcadeDate?k[b]=d.castAsJson(w,r):g.push(this.castDictionaryValueAsJsonAsync(k,b,w,n,r)))}return 0<g.length?[4,Promise.all(g)]:[3,2];case 1:x.sent(),x.label=2;case 2:return[2,k]}})})};return h}();return a})},"esri/arcade/ArcadeDate":function(){define(["require","exports",
"./polyfill/tsSupport/extends","./executionError","../libs/luxon/luxon"],function(f,B,l,e,c){function u(a){if(a instanceof c.Zone)return a;if("system"===a.toLowerCase())return"system";if("utc"===a.toLowerCase())return"utc";if("unknown"===a.toLowerCase())return d.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(a)){var h=c.FixedOffsetZone.parseSpecifier("UTC"+(a.startsWith("+")||a.startsWith("-")?"":"+")+a);if(h)return h}a=c.IANAZone.create(a);if(!a.isValid)throw new m(q.TimeZoneNotRecognised);
return a}var t;Object.defineProperty(B,"__esModule",{value:!0});B.createDateTimeZone=B.ArcadeDate=B.ArcadeDateError=B.ArcadeDateErrorMessages=B.ArcadeDateErrorCodes=B.UnknownTimeZone=void 0;var d=function(){function a(){}a.instance=new c.IANAZone("Etc/UTC");return a}();B.UnknownTimeZone=d;var q;(q=B.ArcadeDateErrorCodes||(B.ArcadeDateErrorCodes={})).TimeZoneNotRecognised="TimeZoneNotRecognised";B.ArcadeDateErrorMessages=(t={},t[q.TimeZoneNotRecognised]="Timezone identifier has not been recognised.",
t);var m=function(a){function h(n,r){n=a.call(this,e.doSubstitutions(B.ArcadeDateErrorMessages[n],r))||this;n.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(n,h);return n}l(h,a);return h}(Error);B.ArcadeDateError=m;f=function(){function a(h){this._date=h;this.declaredRootClass="esri.arcade.arcadedate"}a.fromParts=function(h,n,r,k,g,b,w,x){void 0===h&&(h=0);void 0===n&&(n=1);void 0===r&&(r=1);void 0===k&&(k=0);void 0===g&&(g=0);void 0===b&&(b=
0);void 0===w&&(w=0);if(isNaN(h)||isNaN(n)||isNaN(r)||isNaN(k)||isNaN(g)||isNaN(b)||isNaN(w))return null;var z=0,D=c.DateTime.local(h,n).daysInMonth;1>r&&(z=r-1,r=1);r>D&&(z=r-D,r=D);D=0;12<n?(D=n-12,n=12):1>n&&(D=n-1,n=1);var E=0;59<g?(E=g-59,g=59):0>g&&(E=g,g=0);var C=0;59<b?(C=b-59,b=59):0>b&&(C=b,b=0);var y=0;999<w?(y=w-999,w=999):0>w&&(y=w,w=0);h=c.DateTime.fromObject({day:r,year:h,month:n,hour:k,minute:g,second:b,millisecond:w},{zone:u(x)});0!==D&&(h=h.plus({months:D}));0!==z&&(h=h.plus({days:z}));
0!==E&&(h=h.plus({minutes:E}));0!==C&&(h=h.plus({seconds:C}));0!==y&&(h=h.plus({milliseconds:y}));return new a(h)};Object.defineProperty(a,"systemTimeZoneCanonicalName",{get:function(){var h;return null!==(h=Intl.DateTimeFormat().resolvedOptions().timeZone)&&void 0!==h?h:"system"},enumerable:!1,configurable:!0});a.arcadeDateAndZoneToArcadeDate=function(h,n){var r=u(n);return h.isUnknownTimeZone||r===d.instance?a.fromParts(h.year,h.monthJS+1,h.day,h.hour,h.minute,h.second,h.millisecond,r):new a(h._date.setZone(n))};
a.dateJSToArcadeDate=function(h){return new a(c.DateTime.fromJSDate(h,{zone:"system"}))};a.dateJSAndZoneToArcadeDate=function(h,n){void 0===n&&(n="system");return new a(c.DateTime.fromJSDate(h,{zone:n}))};a.unknownEpochToArcadeDate=function(h){return new a(c.DateTime.fromMillis(h,{zone:d.instance}))};a.unknownDateJSToArcadeDate=function(h){return a.arcadeDateAndZoneToArcadeDate(a.dateJSToArcadeDate(h),d.instance)};a.epochToArcadeDate=function(h,n){void 0===n&&(n="system");return new a(c.DateTime.fromMillis(h,
{zone:n}))};a.dateTimeToArcadeDate=function(h){return new a(h)};a.prototype.changeTimeZone=function(h){h=u(h);return a.dateTimeToArcadeDate(this._date.setZone(h))};a.dateTimeAndZoneToArcadeDate=function(h,n){n=u(n);return h.zone===d.instance||n===d.instance?a.fromParts(h.year,h.month,h.day,h.hour,h.minute,h.second,h.millisecond,n):new a(h.setZone(n))};a.nowToArcadeDate=function(h){return new a(c.DateTime.fromJSDate(new Date,{zone:h}))};a.nowUTCToArcadeDate=function(){return new a(c.DateTime.utc())};
Object.defineProperty(a.prototype,"isSystem",{get:function(){return"system"===this.timeZone||this.timeZone===a.systemTimeZoneCanonicalName},enumerable:!1,configurable:!0});a.prototype.equals=function(h){return this.isSystem&&h.isSystem?this.toNumber()===h.toNumber():this.isUnknownTimeZone!==h.isUnknownTimeZone?!1:this._date.equals(h._date)};Object.defineProperty(a.prototype,"isUnknownTimeZone",{get:function(){return this._date.zone===d.instance},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,
"isValid",{get:function(){return this._date.isValid},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"hour",{get:function(){return this._date.hour},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"second",{get:function(){return this._date.second},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"day",{get:function(){return this._date.day},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"dayOfWeekISO",{get:function(){return this._date.weekday},
enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"dayOfWeekJS",{get:function(){var h=this._date.weekday;6<h&&(h=0);return h},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"millisecond",{get:function(){return this._date.millisecond},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"monthISO",{get:function(){return this._date.month},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"weekISO",{get:function(){return this._date.weekNumber},
enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"yearISO",{get:function(){return this._date.weekYear},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"monthJS",{get:function(){return this._date.month-1},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"year",{get:function(){return this._date.year},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"minute",{get:function(){return this._date.minute},enumerable:!1,configurable:!0});
Object.defineProperty(a.prototype,"zone",{get:function(){return this._date.zone},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"timeZoneOffset",{get:function(){return this.isUnknownTimeZone?0:this._date.offset},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"timeZone",{get:function(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";var h=this.zone;return"fixed"===h.type?0===h.fixed?"utc":h.formatOffset(0,"short"):h.name},
enumerable:!1,configurable:!0});a.prototype.stringify=function(){return JSON.stringify(this.toJSDate())};a.prototype.plus=function(h){return new a(this._date.plus(h))};a.prototype.diff=function(h,n){void 0===n&&(n="milliseconds");return this._date.diff(h._date,n)[n]};a.prototype.toISOString=function(h){return h?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})};a.prototype.toFormat=function(h,n){return this._date.toFormat(h,
n)};a.prototype.toJSDate=function(){return this._date.toJSDate()};a.prototype.toSQLString=function(){return"timestamp '"+this._date.toFormat("yyyy-LL-dd HH:mm:ss")+"'"};a.prototype.toDateTime=function(){return this._date};a.prototype.toNumber=function(){return this._date.toMillis()};a.prototype.getTime=function(){return this._date.toMillis()};a.prototype.toUTC=function(){return new a(this._date.toUTC())};a.prototype.toLocal=function(){return new a(this._date.toLocal())};a.prototype.toString=function(){return this.toISOString(!0)};
return a}();B.ArcadeDate=f;B.createDateTimeZone=u})},"esri/arcade/executionError":function(){define(["require","exports","./polyfill/tsSupport/assign","./polyfill/tsSupport/spreadarray","./polyfill/tsSupport/extends"],function(f,B,l,e,c){function u(a){var h,n;return a&&a.loc?"Line : "+(null===(h=a.loc.start)||void 0===h?void 0:h.line)+", "+(null===(n=a.loc.start)||void 0===n?void 0:n.column)+": ":""}function t(a,h){try{if(!h)return a;for(var n in h){var r=h[n];r||(r="");a=a.replace("{"+n+"}",h[n])}}catch(k){}return a}
var d,q;Object.defineProperty(B,"__esModule",{value:!0});B.parsingValidationMessage=B.ModuleError=B.ModuleErrorMessages=B.ModuleErrorCodes=B.ensureArcadeExecutionError=B.doSubstitutions=B.ArcadeUncompilableError=B.ArcadeCompilationError=B.ArcadeExecutionError=B.LocatableArcadeExecutionError=B.ErrorWithCause=B.ExecutionErrorMessages=B.ExecutionErrorCodes=void 0;(function(a){a.AsyncNotEnabled="AsyncNotEnabled";a.ModulesNotSupported="ModulesNotSupported";a.CircularModules="CircularModules";a.NeverReach=
"NeverReach";a.UnsupportedHashType="UnsupportedHashType";a.InvalidParameter="InvalidParameter";a.UnexpectedToken="UnexpectedToken";a.Unrecognised="Unrecognised";a.UnrecognisedType="UnrecognisedType";a.MaximumCallDepth="MaximumCallDepth";a.BooleanConditionRequired="BooleanConditionRequired";a.TypeNotAllowedInFeature="TypeNotAllowedInFeature";a.KeyMustBeString="KeyMustBeString";a.WrongNumberOfParameters="WrongNumberOfParameters";a.CallNonFunction="CallNonFunction";a.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";
a.NoFunctionInDictionary="NoFunctionInDictionary";a.NoFunctionInArray="NoFunctionInArray";a.AssignModuleFunction="AssignModuleFunction";a.LogicExpressionOrAnd="LogicExpressionOrAnd";a.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";a.FuncionNotFound="FunctionNotFound";a.InvalidMemberAccessKey="InvalidMemberAccessKey";a.UnsupportedUnaryOperator="UnsupportUnaryOperator";a.InvalidIdentifier="InvalidIdentifier";a.MemberOfNull="MemberOfNull";a.UnsupportedOperator="UnsupportedOperator";a.Cancelled=
"Cancelled";a.ModuleAccessorMustBeString="ModuleAccessorMustBeString";a.ModuleExportNotFound="ModuleExportNotFound";a.Immutable="Immutable";a.OutOfBounds="OutOfBounds";a.IllegalResult="IllegalResult";a.FieldNotFound="FieldNotFound";a.PortalRequired="PortalRequired";a.LogicError="LogicError";a.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";a.KeyAccessorMustBeString="KeyAccessorMustBeString";a.WrongSpatialReference="WrongSpatialReference"})(f=B.ExecutionErrorCodes||(B.ExecutionErrorCodes={}));
B.ExecutionErrorMessages=(d={},d[f.TypeNotAllowedInFeature]="Feature attributes only support dates, numbers, strings, guids.",d[f.LogicError]="Logic error - {reason}",d[f.NeverReach]="Encountered unreachable logic",d[f.AsyncNotEnabled]="Async Arcade must be enabled for this script",d[f.ModuleAccessorMustBeString]="Module accessor must be a string",d[f.ModuleExportNotFound]="Module has no export with provided identifier",d[f.ModulesNotSupported]="Current profile does not support modules",d[f.ArrayAccessorMustBeNumber]=
"Array accessor must be a number",d[f.FuncionNotFound]="Function not found",d[f.FieldNotFound]="Key not found - {key}",d[f.CircularModules]="Circular module dependencies are not allowed",d[f.Cancelled]="Execution cancelled",d[f.UnsupportedHashType]="Type not supported in hash function",d[f.IllegalResult]="Value is not a supported return type",d[f.PortalRequired]="Portal is required",d[f.InvalidParameter]="Invalid parameter",d[f.WrongNumberOfParameters]="Call with wrong number of parameters",d[f.Unrecognised]=
"Unrecognised code structure",d[f.UnrecognisedType]="Unrecognised type",d[f.WrongSpatialReference]="Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",d[f.BooleanConditionRequired]="Conditions must use booleans",d[f.NoFunctionInDictionary]="Dictionaries cannot contain functions.",d[f.NoFunctionInArray]="Arrays cannot contain functions.",d[f.NoFunctionInTemplateLiteral]="Template Literals do not expect functions by value.",d[f.KeyAccessorMustBeString]=
"Accessor must be a string",d[f.KeyMustBeString]="Object keys must be a string",d[f.Immutable]="Object is immutable",d[f.InvalidParameter]="Invalid parameter",d[f.UnexpectedToken]="Unexpected token",d[f.MemberOfNull]="Cannot access property of null object",d[f.MaximumCallDepth]="Exceeded maximum function depth",d[f.OutOfBounds]="Out of bounds",d[f.InvalidIdentifier]="Identifier not recognised",d[f.FuncionNotFound]="Function not found",d[f.CallNonFunction]="Expression is not a function",d[f.InvalidMemberAccessKey]=
"Cannot access value using a key of this type",d[f.AssignModuleFunction]="Cannot assign function to module variable",d[f.UnsupportedUnaryOperator]="Unsupported unary operator",d[f.UnsupportedOperator]="Unsupported operator",d[f.LogicalExpressionOnlyBoolean]="Logical expressions must be boolean",d[f.LogicExpressionOrAnd]="Logical expression can only be combined with || or \x26\x26",d);d=function(a){function h(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return a.apply(this,n)||this}
c(h,a);return h}(Error);B.ErrorWithCause=d;var m=function(a){function h(n,r){n=a.call(this,u(r)+n.message,{cause:n})||this;n.loc=null;Error.captureStackTrace&&Error.captureStackTrace(n,h);r&&r.loc&&(n.loc=r.loc);return n}c(h,a);return h}(d);B.LocatableArcadeExecutionError=m;d=function(a){function h(n,r,k,g){n=a.call(this,"Execution error - "+u(k)+t(B.ExecutionErrorMessages[r],g))||this;n.loc=null;n.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(n,
h);k&&k.loc&&(n.loc=k.loc);return n}c(h,a);return h}(Error);B.ArcadeExecutionError=d;d=function(a){function h(n,r,k,g){n=a.call(this,"Compilation error - "+u(k)+t(B.ExecutionErrorMessages[r],g))||this;n.loc=null;n.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(n,h);k&&k.loc&&(n.loc=k.loc);return n}c(h,a);return h}(Error);B.ArcadeCompilationError=d;d=function(a){function h(){var n=a.call(this,"Uncompilable code structures")||this;n.declaredRootClass=
"esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(n,h);return n}c(h,a);return h}(Error);B.ArcadeUncompilableError=d;B.doSubstitutions=t;B.ensureArcadeExecutionError=function(a,h,n){return"esri.arcade.arcadeexecutionerror"===n.declaredRootClass||"esri.arcade.arcadecompilationerror"===n.declaredRootClass?null===n.loc&&h&&h.loc?new m(n,{cause:n}):n:h&&h.loc?new m(n,{cause:n}):n};(function(a){a.UnrecognisedUri="UnrecognisedUri";a.UnsupportedUriProtocol="UnsupportedUriProtocol"})(d=
B.ModuleErrorCodes||(B.ModuleErrorCodes={}));B.ModuleErrorMessages=(q={},q[d.UnrecognisedUri]="Unrecognised uri - {uri}",q[d.UnsupportedUriProtocol]="Unrecognised uri protocol",q);q=function(a){function h(n,r){n=a.call(this,t(B.ModuleErrorMessages[n],r))||this;n.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(n,h);return n}c(h,a);return h}(Error);B.ModuleError=q;B.parsingValidationMessage=function(a,h,n){return"Parsing error - "+u(a)+t(B.ExecutionErrorMessages[h],
n)}})},"esri/libs/luxon/luxon":function(){define(["exports"],function(f){function B(ka,qa){for(var V=0;V<qa.length;V++){var ma=qa[V];ma.enumerable=ma.enumerable||!1;ma.configurable=!0;"value"in ma&&(ma.writable=!0);var ua=Object,Ia=ua.defineProperty;a:{var Qa=ma.key;if("object"===typeof Qa&&null!==Qa){var $a=Qa[Symbol.toPrimitive];if(void 0!==$a){Qa=$a.call(Qa,"string");if("object"!==typeof Qa)break a;throw new TypeError("@@toPrimitive must return a primitive value.");}Qa=String(Qa)}}Ia.call(ua,ka,
"symbol"===typeof Qa?Qa:String(Qa),ma)}}function l(ka,qa,V){qa&&B(ka.prototype,qa);V&&B(ka,V);Object.defineProperty(ka,"prototype",{writable:!1});return ka}function e(){e=Object.assign?Object.assign.bind():function(ka){for(var qa=1;qa<arguments.length;qa++){var V=arguments[qa],ma;for(ma in V)Object.prototype.hasOwnProperty.call(V,ma)&&(ka[ma]=V[ma])}return ka};return e.apply(this,arguments)}function c(ka,qa){ka.prototype=Object.create(qa.prototype);ka.prototype.constructor=ka;t(ka,qa)}function u(ka){u=
Object.setPrototypeOf?Object.getPrototypeOf.bind():function(qa){return qa.__proto__||Object.getPrototypeOf(qa)};return u(ka)}function t(ka,qa){t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(V,ma){V.__proto__=ma;return V};return t(ka,qa)}function d(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ka){return!1}}function q(ka,
qa,V){q=d()?Reflect.construct.bind():function(ma,ua,Ia){var Qa=[null];Qa.push.apply(Qa,ua);ma=new (Function.bind.apply(ma,Qa));Ia&&t(ma,Ia.prototype);return ma};return q.apply(null,arguments)}function m(ka){var qa="function"===typeof Map?new Map:void 0;m=function(V){function ma(){return q(V,arguments,u(this).constructor)}if(null===V||-1===Function.toString.call(V).indexOf("[native code]"))return V;if("function"!==typeof V)throw new TypeError("Super expression must either be null or a function");if("undefined"!==
typeof qa){if(qa.has(V))return qa.get(V);qa.set(V,ma)}ma.prototype=Object.create(V.prototype,{constructor:{value:ma,enumerable:!1,writable:!0,configurable:!0}});return t(ma,V)};return m(ka)}function a(ka,qa){if(null==ka)return{};var V={},ma=Object.keys(ka),ua;for(ua=0;ua<ma.length;ua++){var Ia=ma[ua];0<=qa.indexOf(Ia)||(V[Ia]=ka[Ia])}return V}function h(ka,qa){if(ka){if("string"===typeof ka)return n(ka,qa);var V=Object.prototype.toString.call(ka).slice(8,-1);"Object"===V&&ka.constructor&&(V=ka.constructor.name);
if("Map"===V||"Set"===V)return Array.from(ka);if("Arguments"===V||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V))return n(ka,qa)}}function n(ka,qa){if(null==qa||qa>ka.length)qa=ka.length;for(var V=0,ma=Array(qa);V<qa;V++)ma[V]=ka[V];return ma}function r(ka,qa){var V="undefined"!==typeof Symbol&&ka[Symbol.iterator]||ka["@@iterator"];if(V)return(V=V.call(ka)).next.bind(V);if(Array.isArray(ka)||(V=h(ka))||qa&&ka&&"number"===typeof ka.length){V&&(ka=V);var ma=0;return function(){return ma>=ka.length?
{done:!0}:{done:!1,value:ka[ma++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function k(ka,qa){void 0===qa&&(qa={});var V=JSON.stringify([ka,qa]),ma=Kb[V];ma||(ma=new Intl.DateTimeFormat(ka,qa),Kb[V]=ma);return ma}function g(ka){for(var qa=[],V=1;12>=V;V++){var ma=Tb.utc(2016,V,1);qa.push(ka(ma))}return qa}function b(ka){for(var qa=[],V=1;7>=V;V++){var ma=Tb.utc(2016,11,13+V);qa.push(ka(ma))}return qa}
function w(ka,qa,V,ma,ua){ka=ka.listingMode(V);return"error"===ka?null:"en"===ka?ma(qa):ua(qa)}function x(ka,qa){if(z(ka)||null===ka)return qa;if(ka instanceof Bb)return ka;if("string"===typeof ka){var V=ka.toLowerCase();return"default"===V?qa:"local"===V||"system"===V?kc.instance:"utc"===V||"gmt"===V?ec.utcInstance:ec.parseSpecifier(V)||rc.create(ka)}return D(ka)?ec.instance(ka):"object"===typeof ka&&ka.offset&&"number"===typeof ka.offset?ka:new Uc(ka)}function z(ka){return"undefined"===typeof ka}
function D(ka){return"number"===typeof ka}function E(ka){return"number"===typeof ka&&0===ka%1}function C(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(ka){return!1}}function y(ka,qa,V){if(0!==ka.length)return ka.reduce(function(ma,ua){ua=[qa(ua),ua];return ma?V(ma[0],ua[0])===ma[0]?ma:ua:ua},null)[1]}function v(ka,qa){return qa.reduce(function(V,ma){V[ma]=ka[ma];return V},{})}function A(ka,qa){return Object.prototype.hasOwnProperty.call(ka,qa)}function G(ka,qa,V){return E(ka)&&
ka>=qa&&ka<=V}function F(ka,qa){void 0===qa&&(qa=2);return 0>ka?"-"+(""+-ka).padStart(qa,"0"):(""+ka).padStart(qa,"0")}function H(ka){if(!z(ka)&&null!==ka&&""!==ka)return parseInt(ka,10)}function L(ka){if(!z(ka)&&null!==ka&&""!==ka)return parseFloat(ka)}function M(ka){if(!z(ka)&&null!==ka&&""!==ka)return ka=1E3*parseFloat("0."+ka),Math.floor(ka)}function Q(ka,qa,V){void 0===V&&(V=!1);qa=Math.pow(10,qa);return(V?Math.trunc:Math.round)(ka*qa)/qa}function S(ka){return 0===ka%4&&(0!==ka%100||0===ka%400)}
function I(ka,qa){var V=qa-1;V=V-12*Math.floor(V/12)+1;return 2===V?S(ka+(qa-V)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][V-1]}function P(ka){var qa=Date.UTC(ka.year,ka.month-1,ka.day,ka.hour,ka.minute,ka.second,ka.millisecond);100>ka.year&&0<=ka.year&&(qa=new Date(qa),qa.setUTCFullYear(qa.getUTCFullYear()-1900));return+qa}function J(ka){var qa=ka-1;qa=(qa+Math.floor(qa/4)-Math.floor(qa/100)+Math.floor(qa/400))%7;return 4===(ka+Math.floor(ka/4)-Math.floor(ka/100)+Math.floor(ka/400))%7||3===
qa?53:52}function U(ka){return 99<ka?ka:ka>Lb.twoDigitCutoffYear?1900+ka:2E3+ka}function Y(ka,qa,V,ma){void 0===ma&&(ma=null);ka=new Date(ka);var ua={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};ma&&(ua.timeZone=ma);qa=e({timeZoneName:qa},ua);return(V=(new Intl.DateTimeFormat(V,qa)).formatToParts(ka).find(function(Ia){return"timezonename"===Ia.type.toLowerCase()}))?V.value:null}function aa(ka,qa){ka=parseInt(ka,10);Number.isNaN(ka)&&(ka=0);qa=parseInt(qa,
10)||0;qa=0>ka||Object.is(ka,-0)?-qa:qa;return 60*ka+qa}function la(ka){var qa=Number(ka);if("boolean"===typeof ka||""===ka||Number.isNaN(qa))throw new Pb("Invalid unit value "+ka);return qa}function T(ka,qa){var V={},ma;for(ma in ka)if(A(ka,ma)){var ua=ka[ma];void 0!==ua&&null!==ua&&(V[qa(ma)]=la(ua))}return V}function N(ka,qa){var V=Math.trunc(Math.abs(ka/60)),ma=Math.trunc(Math.abs(ka%60));ka=0<=ka?"+":"-";switch(qa){case "short":return""+ka+F(V,2)+":"+F(ma,2);case "narrow":return""+ka+V+(0<ma?
":"+ma:"");case "techie":return""+ka+F(V,2)+F(ma,2);default:throw new RangeError("Value format "+qa+" is out of range for property format");}}function K(ka){return v(ka,["hour","minute","second","millisecond"])}function W(ka){switch(ka){case "narrow":return[].concat(ld);case "short":return[].concat(Rc);case "long":return[].concat(Qc);case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function da(ka){switch(ka){case "narrow":return[].concat(pd);
case "short":return[].concat(dd);case "long":return[].concat(cd);case "numeric":return"1234567".split("");default:return null}}function fa(ka){switch(ka){case "narrow":return[].concat(nd);case "short":return[].concat(md);case "long":return[].concat(Lc);default:return null}}function ha(ka,qa,V,ma){void 0===V&&(V="always");void 0===ma&&(ma=!1);var ua={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute",
"min."],seconds:["second","sec."]},Ia=-1===["hours","minutes","seconds"].indexOf(ka);if("auto"===V&&Ia)switch(V="days"===ka,qa){case 1:return V?"tomorrow":"next "+ua[ka][0];case -1:return V?"yesterday":"last "+ua[ka][0];case 0:return V?"today":"this "+ua[ka][0]}V=Object.is(qa,-0)||0>qa;qa=Math.abs(qa);Ia=1===qa;var Qa=ua[ka];ka=ma?Ia?Qa[1]:Qa[2]||Qa[1]:Ia?ua[ka][0]:ka;return V?qa+" "+ka+" ago":"in "+qa+" "+ka}function ra(ka,qa){var V="";ka=r(ka);for(var ma;!(ma=ka()).done;)ma=ma.value,V=ma.literal?
V+ma.val:V+qa(ma.val);return V}function za(){for(var ka=arguments.length,qa=Array(ka),V=0;V<ka;V++)qa[V]=arguments[V];ka=qa.reduce(function(ma,ua){return ma+ua.source},"");return RegExp("^"+ka+"$")}function Da(){for(var ka=arguments.length,qa=Array(ka),V=0;V<ka;V++)qa[V]=arguments[V];return function(ma){return qa.reduce(function(ua,Ia){var Qa=ua[0],$a=ua[1];ua=Ia(ma,ua[2]);Ia=ua[1];var jb=ua[2];return[e({},Qa,ua[0]),Ia||$a,jb]},[{},null,1]).slice(0,2)}}function va(ka){if(null==ka)return[null,null];
for(var qa=arguments.length,V=Array(1<qa?qa-1:0),ma=1;ma<qa;ma++)V[ma-1]=arguments[ma];for(qa=0;qa<V.length;qa++){var ua=V[qa];ma=ua[1];if(ua=ua[0].exec(ka))return ma(ua)}return[null,null]}function Ga(){for(var ka=arguments.length,qa=Array(ka),V=0;V<ka;V++)qa[V]=arguments[V];return function(ma,ua){var Ia={},Qa;for(Qa=0;Qa<qa.length;Qa++)Ia[qa[Qa]]=H(ma[ua+Qa]);return[Ia,null,ua+Qa]}}function ba(ka,qa,V){ka=ka[qa];return z(ka)?V:H(ka)}function ia(ka,qa){return[{hours:ba(ka,qa,0),minutes:ba(ka,qa+1,
0),seconds:ba(ka,qa+2,0),milliseconds:M(ka[qa+3])},null,qa+4]}function wa(ka,qa){var V=!ka[qa]&&!ka[qa+1];ka=aa(ka[qa+1],ka[qa+2]);return[{},V?null:ec.instance(ka),qa+3]}function Aa(ka,qa){return[{},ka[qa]?rc.create(ka[qa]):null,qa+1]}function Fa(ka){var qa=ka[2],V=ka[3],ma=ka[4],ua=ka[5],Ia=ka[6],Qa=ka[7],$a=ka[8],jb="-"===ka[0][0],pb=Qa&&"-"===Qa[0],xb=function(zb,ub){void 0===ub&&(ub=!1);return void 0!==zb&&(ub||zb&&jb)?-zb:zb};return[{years:xb(L(ka[1])),months:xb(L(qa)),weeks:xb(L(V)),days:xb(L(ma)),
hours:xb(L(ua)),minutes:xb(L(Ia)),seconds:xb(L(Qa),"-0"===Qa),milliseconds:xb(M($a),pb)}]}function O(ka,qa,V,ma,ua,Ia,Qa){qa={year:2===qa.length?U(H(qa)):H(qa),month:Rc.indexOf(V)+1,day:H(ma),hour:H(ua),minute:H(Ia)};Qa&&(qa.second=H(Qa));ka&&(qa.weekday=3<ka.length?cd.indexOf(ka)+1:dd.indexOf(ka)+1);return qa}function ya(ka){var qa=ka[8],V=ka[9],ma=ka[10],ua=ka[11];ka=O(ka[1],ka[4],ka[3],ka[2],ka[5],ka[6],ka[7]);qa=qa?td[qa]:V?0:aa(ma,ua);return[ka,new ec(qa)]}function Ha(ka){return[O(ka[1],ka[4],
ka[3],ka[2],ka[5],ka[6],ka[7]),ec.utcInstance]}function ea(ka){return[O(ka[1],ka[7],ka[2],ka[3],ka[4],ka[5],ka[6]),ec.utcInstance]}function Oa(ka,qa,V){void 0===V&&(V=!1);ka={values:V?qa.values:e({},ka.values,qa.values||{}),loc:ka.loc.clone(qa.loc),conversionAccuracy:qa.conversionAccuracy||ka.conversionAccuracy,matrix:qa.matrix||ka.matrix};return new Ba(ka)}function Na(ka,qa,V,ma,ua){ka=ka[ua][V];var Ia=qa[V]/ka;Ia=Math.sign(Ia)!==Math.sign(ma[ua])&&0!==ma[ua]&&1>=Math.abs(Ia)?0>Ia?Math.floor(Ia):
Math.ceil(Ia):Math.trunc(Ia);ma[ua]+=Ia;qa[V]-=Ia*ka}function Ca(ka,qa){sa.reduce(function(V,ma){if(z(qa[ma]))return V;V&&Na(ka,qa,V,qa,ma);return ma},null)}function X(ka,qa){var V=function(ma){return ma.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()};ka=V(qa)-V(ka);return Math.floor(Ba.fromMillis(ka).as("days"))}function oa(ka,qa,V){for(var ma={},ua=ka,Ia,Qa,$a=0,jb=[["years",function(zb,ub){return ub.year-zb.year}],["quarters",function(zb,ub){return ub.quarter-zb.quarter+4*(ub.year-zb.year)}],
["months",function(zb,ub){return ub.month-zb.month+12*(ub.year-zb.year)}],["weeks",function(zb,ub){zb=X(zb,ub);return(zb-zb%7)/7}],["days",X]];$a<jb.length;$a++){var pb=jb[$a],xb=pb[0];pb=pb[1];0<=V.indexOf(xb)&&(Ia=xb,ma[xb]=pb(ka,qa),Qa=ua.plus(ma),Qa>qa?(ma[xb]--,ka=ua.plus(ma)):ka=Qa)}return[ka,ma,Qa,Ia]}function pa(ka,qa,V,ma){var ua=oa(ka,qa,V);ka=ua[0];var Ia=ua[1],Qa=ua[2],$a=ua[3];ua=qa-ka;V=V.filter(function(xb){return 0<=["hours","minutes","seconds","milliseconds"].indexOf(xb)});if(0===
V.length){if(Qa<qa){var jb;Qa=ka.plus((jb={},jb[$a]=1,jb))}Qa!==ka&&(Ia[$a]=(Ia[$a]||0)+ua/(Qa-ka))}qa=Ba.fromObject(Ia,ma);if(0<V.length){var pb;return(pb=Ba.fromMillis(ua,ma)).shiftTo.apply(pb,V).plus(qa)}return qa}function Z(ka,qa){ka=ka.numberingSystem;void 0===qa&&(qa="");return new RegExp(""+ib[ka||"latn"]+qa)}function ja(ka,qa){void 0===qa&&(qa=function(V){return V});return{regex:ka,deser:function(V){var ma=qa;V=V[0];var ua=parseInt(V,10);if(isNaN(ua)){ua="";for(var Ia=0;Ia<V.length;Ia++){var Qa=
V.charCodeAt(Ia);if(-1!==V[Ia].search(ib.hanidec))ua+=vb.indexOf(V[Ia]);else for(pb in rb){var $a=rb[pb],jb=$a[0];$a=$a[1];Qa>=jb&&Qa<=$a&&(ua+=Qa-jb)}}var pb=parseInt(ua,10)}else pb=ua;return ma(pb)}}}function ta(ka){return ka.replace(/\./g,"\\.?").replace(Fb,sb)}function xa(ka,qa){return null===ka?null:{regex:RegExp(ka.map(ta).join("|")),deser:function(V){var ma=V[0];return ka.findIndex(function(ua){return ma.replace(/\./g,"").replace(Fb," ").toLowerCase()===ua.replace(/\./g,"").replace(Fb," ").toLowerCase()})+
qa}}}function Ea(ka,qa){return{regex:ka,deser:function(V){return aa(V[1],V[2])},groups:qa}}function Ja(ka){return{regex:ka,deser:function(qa){return qa[0]}}}function La(ka,qa){var V=Z(qa),ma=Z(qa,"{2}"),ua=Z(qa,"{3}"),Ia=Z(qa,"{4}"),Qa=Z(qa,"{6}"),$a=Z(qa,"{1,2}"),jb=Z(qa,"{1,3}"),pb=Z(qa,"{1,6}"),xb=Z(qa,"{1,9}"),zb=Z(qa,"{2,4}"),ub=Z(qa,"{4,6}"),Qb=function($c){return{regex:RegExp($c.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:function(Kd){return Kd[0]},literal:!0}},qc=function($c){if(ka.literal)return Qb($c);
switch($c.val){case "G":return xa(qa.eras("short",!1),0);case "GG":return xa(qa.eras("long",!1),0);case "y":return ja(pb);case "yy":return ja(zb,U);case "yyyy":return ja(Ia);case "yyyyy":return ja(ub);case "yyyyyy":return ja(Qa);case "M":return ja($a);case "MM":return ja(ma);case "MMM":return xa(qa.months("short",!0,!1),1);case "MMMM":return xa(qa.months("long",!0,!1),1);case "L":return ja($a);case "LL":return ja(ma);case "LLL":return xa(qa.months("short",!1,!1),1);case "LLLL":return xa(qa.months("long",
!1,!1),1);case "d":return ja($a);case "dd":return ja(ma);case "o":return ja(jb);case "ooo":return ja(ua);case "HH":return ja(ma);case "H":return ja($a);case "hh":return ja(ma);case "h":return ja($a);case "mm":return ja(ma);case "m":return ja($a);case "q":return ja($a);case "qq":return ja(ma);case "s":return ja($a);case "ss":return ja(ma);case "S":return ja(jb);case "SSS":return ja(ua);case "u":return Ja(xb);case "uu":return Ja($a);case "uuu":return ja(V);case "a":return xa(qa.meridiems(),0);case "kkkk":return ja(Ia);
case "kk":return ja(zb,U);case "W":return ja($a);case "WW":return ja(ma);case "E":case "c":return ja(V);case "EEE":return xa(qa.weekdays("short",!1,!1),1);case "EEEE":return xa(qa.weekdays("long",!1,!1),1);case "ccc":return xa(qa.weekdays("short",!0,!1),1);case "cccc":return xa(qa.weekdays("long",!0,!1),1);case "Z":case "ZZ":return Ea(new RegExp("([+-]"+$a.source+")(?::("+ma.source+"))?"),2);case "ZZZ":return Ea(new RegExp("([+-]"+$a.source+")("+ma.source+")?"),2);case "z":return Ja(/[a-z_+-/]{1,256}?/i);
default:return Qb($c)}}(ka)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};qc.token=ka;return qc}function Ya(ka){return["^"+ka.map(function(qa){return qa.regex}).reduce(function(qa,V){return qa+"("+V.source+")"},"")+"$",ka]}function Ua(ka,qa,V){if(ka=ka.match(qa)){qa={};var ma=1,ua;for(ua in V)if(A(V,ua)){var Ia=V[ua],Qa=Ia.groups?Ia.groups+1:1;!Ia.literal&&Ia.token&&(qa[Ia.token.val[0]]=Ia.deser(ka.slice(ma,ma+Qa)));ma+=Qa}return[ka,qa]}return[ka,{}]}function Ta(ka){var qa=
function(ua){switch(ua){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}},V=null;z(ka.z)||(V=rc.create(ka.z));if(!z(ka.Z)){V||(V=new ec(ka.Z));var ma=ka.Z}z(ka.q)||(ka.M=3*(ka.q-1)+1);z(ka.h)||(12>ka.h&&1===ka.a?
ka.h+=12:12===ka.h&&0===ka.a&&(ka.h=0));0===ka.G&&ka.y&&(ka.y=-ka.y);z(ka.u)||(ka.S=M(ka.u));return[Object.keys(ka).reduce(function(ua,Ia){var Qa=qa(Ia);Qa&&(ua[Qa]=ka[Ia]);return ua},{}),V,ma]}function ab(ka,qa){var V;return(V=Array.prototype).concat.apply(V,ka.map(function(ma){if(!ma.literal){var ua=mc.macroTokenToFormatOpts(ma.val);ua=kb(ua,qa);ma=null==ua||ua.includes(void 0)?ma:ua}return ma}))}function fb(ka,qa,V){V=ab(mc.parseFormat(V),ka);var ma=V.map(function(pb){return La(pb,ka)}),ua=ma.find(function(pb){return pb.invalidReason});
if(ua)return{input:qa,tokens:V,invalidReason:ua.invalidReason};ua=Ya(ma);ma=RegExp(ua[0],"i");var Ia=Ua(qa,ma,ua[1]);ua=Ia[0];var Qa=(Ia=Ia[1])?Ta(Ia):[null,null,void 0],$a=Qa[0],jb=Qa[1];Qa=Qa[2];if(A(Ia,"a")&&A(Ia,"H"))throw new Yb("Can't include meridiem when specifying 24-hour format");return{input:qa,tokens:V,regex:ma,rawMatches:ua,matches:Ia,result:$a,zone:jb,specificOffset:Qa}}function kb(ka,qa){if(!ka)return null;qa=mc.create(qa,ka);var V=qa.formatDateTimeParts;Vc||(Vc=Tb.fromMillis(1555555555555));
return V.call(qa,Vc).map(function(ma){var ua=ma.type;ma=ma.value;"literal"===ua?ua={literal:!0,val:ma}:(ma=ka[ua],ua=Kc[ua],"object"===typeof ua&&(ua=ua[ma]),ua=ua?{literal:!1,val:ua}:void 0);return ua})}function qb(ka,qa){return new nc("unit out of range","you specified "+qa+" (of type "+typeof qa+") as a "+ka+", which is invalid")}function ob(ka,qa,V){qa=new Date(Date.UTC(ka,qa-1,V));100>ka&&0<=ka&&qa.setUTCFullYear(qa.getUTCFullYear()-1900);ka=qa.getUTCDay();return 0===ka?7:ka}function wb(ka,qa){ka=
S(ka)?Gd:Hd;var V=ka.findIndex(function(ma){return ma<qa});return{month:V+1,day:qa-ka[V]}}function Gb(ka){var qa=ka.year,V=ka.month,ma=ka.day;var ua=ma+(S(qa)?Gd:Hd)[V-1];V=ob(qa,V,ma);ua=Math.floor((ua-V+10)/7);1>ua?(--qa,ua=J(qa)):ua>J(qa)&&(qa+=1,ua=1);return e({weekYear:qa,weekNumber:ua,weekday:V},K(ka))}function yb(ka){var qa=ka.weekYear,V=ka.weekNumber,ma=ka.weekday,ua=ob(qa,1,4),Ia=S(qa)?366:365;V=7*V+ma-ua-3;1>V?(Ia=qa-1,V+=S(Ia)?366:365):V>Ia?(Ia=qa+1,V-=S(qa)?366:365):Ia=qa;qa=wb(Ia,V);
return e({year:Ia,month:qa.month,day:qa.day},K(ka))}function lb(ka){var qa=ka.year;var V=ka.month;V=ka.day+(S(qa)?Gd:Hd)[V-1];return e({year:qa,ordinal:V},K(ka))}function Db(ka){var qa=ka.year,V=wb(qa,ka.ordinal);return e({year:qa,month:V.month,day:V.day},K(ka))}function Sb(ka){var qa=E(ka.year),V=G(ka.month,1,12),ma=G(ka.day,1,I(ka.year,ka.month));return qa?V?ma?!1:qb("day",ka.day):qb("month",ka.month):qb("year",ka.year)}function Eb(ka){var qa=ka.hour,V=ka.minute,ma=ka.second;ka=ka.millisecond;var ua=
G(qa,0,23)||24===qa&&0===V&&0===ma&&0===ka,Ia=G(V,0,59),Qa=G(ma,0,59),$a=G(ka,0,999);return ua?Ia?Qa?$a?!1:qb("millisecond",ka):qb("second",ma):qb("minute",V):qb("hour",qa)}function Hb(ka){return new nc("unsupported zone",'the zone "'+ka.name+'" is not supported')}function Nb(ka){null===ka.weekData&&(ka.weekData=Gb(ka.c));return ka.weekData}function $b(ka,qa){ka={ts:ka.ts,zone:ka.zone,c:ka.c,o:ka.o,loc:ka.loc,invalid:ka.invalid};return new Tb(e({},ka,qa,{old:ka}))}function Ob(ka,qa,V){var ma=ka-6E4*
qa,ua=V.offset(ma);if(qa===ua)return[ma,qa];ma-=6E4*(ua-qa);qa=V.offset(ma);return ua===qa?[ma,ua]:[ka-6E4*Math.min(ua,qa),Math.max(ua,qa)]}function bc(ka,qa){ka=new Date(ka+6E4*qa);return{year:ka.getUTCFullYear(),month:ka.getUTCMonth()+1,day:ka.getUTCDate(),hour:ka.getUTCHours(),minute:ka.getUTCMinutes(),second:ka.getUTCSeconds(),millisecond:ka.getUTCMilliseconds()}}function Ub(ka,qa,V){return Ob(P(ka),qa,V)}function wc(ka,qa){var V=ka.o,ma=ka.c.year+Math.trunc(qa.years),ua=ka.c.month+Math.trunc(qa.months)+
3*Math.trunc(qa.quarters);ma=e({},ka.c,{year:ma,month:ua,day:Math.min(ka.c.day,I(ma,ua))+Math.trunc(qa.days)+7*Math.trunc(qa.weeks)});qa=Ba.fromObject({years:qa.years-Math.trunc(qa.years),quarters:qa.quarters-Math.trunc(qa.quarters),months:qa.months-Math.trunc(qa.months),weeks:qa.weeks-Math.trunc(qa.weeks),days:qa.days-Math.trunc(qa.days),hours:qa.hours,minutes:qa.minutes,seconds:qa.seconds,milliseconds:qa.milliseconds}).as("milliseconds");ma=P(ma);ma=Ob(ma,V,ka.zone);V=ma[0];ma=ma[1];0!==qa&&(V+=
qa,ma=ka.zone.offset(V));return{ts:V,o:ma}}function hc(ka,qa,V,ma,ua,Ia){var Qa=V.setZone,$a=V.zone;return ka&&0!==Object.keys(ka).length?(ka=Tb.fromObject(ka,e({},V,{zone:qa||$a,specificOffset:Ia})),Qa?ka:ka.setZone($a)):Tb.invalid(new nc("unparsable",'the input "'+ua+"\" can't be parsed as "+ma))}function ic(ka,qa,V){void 0===V&&(V=!0);return ka.isValid?mc.create(Mb.create("en-US"),{allowZ:V,forceSimple:!0}).formatDateTimeFromString(ka,qa):null}function xc(ka,qa){var V=9999<ka.c.year||0>ka.c.year,
ma="";V&&0<=ka.c.year&&(ma+="+");ma+=F(ka.c.year,V?6:4);qa?(ma=ma+"-"+F(ka.c.month),ma=ma+"-"+F(ka.c.day)):(ma+=F(ka.c.month),ma+=F(ka.c.day));return ma}function yc(ka,qa,V,ma,ua,Ia){var Qa=F(ka.c.hour);qa?(Qa=Qa+":"+F(ka.c.minute),0===ka.c.second&&V||(Qa+=":")):Qa+=F(ka.c.minute);0===ka.c.second&&V||(Qa+=F(ka.c.second),0===ka.c.millisecond&&ma||(Qa=Qa+"."+F(ka.c.millisecond,3)));ua&&(ka.isOffsetFixed&&0===ka.offset&&!Ia?Qa+="Z":0>ka.o?(Qa=Qa+"-"+F(Math.trunc(-ka.o/60)),Qa=Qa+":"+F(Math.trunc(-ka.o%
60))):(Qa=Qa+"+"+F(Math.trunc(ka.o/60)),Qa=Qa+":"+F(Math.trunc(ka.o%60))));Ia&&(Qa+="["+ka.zone.ianaName+"]");return Qa}function Hc(ka){var qa={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",
weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[ka.toLowerCase()];if(!qa)throw new Oc(ka);return qa}function Mc(ka,qa){var V=x(qa.zone,Lb.defaultZone);qa=Mb.fromObject(qa);var ma=Lb.now();if(z(ka.year))ka=ma;else{var ua=0;for(var Ia=Id;ua<Ia.length;ua++){var Qa=Ia[ua];z(ka[Qa])&&(ka[Qa]=Jd[Qa])}if(ua=Sb(ka)||Eb(ka))return Tb.invalid(ua);ma=V.offset(ma);ma=Ub(ka,ma,V);ka=ma[0];ua=ma[1]}return new Tb({ts:ka,zone:V,loc:qa,o:ua})}function Ic(ka,qa,V){var ma=z(V.round)?!0:V.round,ua=function(pb,
xb){pb=Q(pb,ma||V.calendary?0:2,!0);return qa.loc.clone(V).relFormatter(V).format(pb,xb)},Ia=function(pb){return V.calendary?qa.hasSame(ka,pb)?0:qa.startOf(pb).diff(ka.startOf(pb),pb).get(pb):qa.diff(ka,pb).get(pb)};if(V.unit)return ua(Ia(V.unit),V.unit);for(var Qa=r(V.units),$a;!($a=Qa()).done;){$a=$a.value;var jb=Ia($a);if(1<=Math.abs(jb))return ua(jb,$a)}return ua(ka>qa?-0:0,V.units[V.units.length-1])}function zc(ka){var qa={};0<ka.length&&"object"===typeof ka[ka.length-1]?(qa=ka[ka.length-1],
ka=Array.from(ka).slice(0,ka.length-1)):ka=Array.from(ka);return[qa,ka]}function tc(ka){if(Tb.isDateTime(ka))return ka;if(ka&&ka.valueOf&&D(ka.valueOf()))return Tb.fromJSDate(ka);if(ka&&"object"===typeof ka)return Tb.fromObject(ka);throw new Pb("Unknown datetime argument: "+ka+", of type "+typeof ka);}var Xb=function(ka){function qa(){return ka.apply(this,arguments)||this}c(qa,ka);return qa}(m(Error)),Nc=function(ka){function qa(V){return ka.call(this,"Invalid DateTime: "+V.toMessage())||this}c(qa,
ka);return qa}(Xb),cc=function(ka){function qa(V){return ka.call(this,"Invalid Interval: "+V.toMessage())||this}c(qa,ka);return qa}(Xb),dc=function(ka){function qa(V){return ka.call(this,"Invalid Duration: "+V.toMessage())||this}c(qa,ka);return qa}(Xb),Yb=function(ka){function qa(){return ka.apply(this,arguments)||this}c(qa,ka);return qa}(Xb),Oc=function(ka){function qa(V){return ka.call(this,"Invalid unit "+V)||this}c(qa,ka);return qa}(Xb),Pb=function(ka){function qa(){return ka.apply(this,arguments)||
this}c(qa,ka);return qa}(Xb),ac=function(ka){function qa(){return ka.call(this,"Zone is an abstract class")||this}c(qa,ka);return qa}(Xb),Dc={year:"numeric",month:"numeric",day:"numeric"},Jb={year:"numeric",month:"short",day:"numeric"},na={year:"numeric",month:"short",day:"numeric",weekday:"short"},Ra={year:"numeric",month:"long",day:"numeric"},Sa={year:"numeric",month:"long",day:"numeric",weekday:"long"},Ka={hour:"numeric",minute:"numeric"},Ma={hour:"numeric",minute:"numeric",second:"numeric"},Xa=
{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Wa={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},Pa={hour:"numeric",minute:"numeric",hourCycle:"h23"},Za={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},cb={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},eb={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},nb={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",
minute:"numeric"},db={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},mb={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},gb={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},tb={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},Vb={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},Ac={year:"numeric",
month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Cc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Bc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},Bb=function(){function ka(){}var qa=ka.prototype;qa.offsetName=function(V,ma){throw new ac;};qa.formatOffset=function(V,ma){throw new ac;};qa.offset=function(V){throw new ac;
};qa.equals=function(V){throw new ac;};l(ka,[{key:"type",get:function(){throw new ac;}},{key:"name",get:function(){throw new ac;}},{key:"ianaName",get:function(){return this.name}},{key:"isUniversal",get:function(){throw new ac;}},{key:"isValid",get:function(){throw new ac;}}]);return ka}(),jc=null,kc=function(ka){function qa(){return ka.apply(this,arguments)||this}c(qa,ka);var V=qa.prototype;V.offsetName=function(ma,ua){return Y(ma,ua.format,ua.locale)};V.formatOffset=function(ma,ua){return N(this.offset(ma),
ua)};V.offset=function(ma){return-(new Date(ma)).getTimezoneOffset()};V.equals=function(ma){return"system"===ma.type};l(qa,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){null===jc&&(jc=new qa);return jc}}]);return qa}(Bb),lc={},Pc={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6},Ec={},rc=function(ka){function qa(ma){var ua=
ka.call(this)||this;ua.zoneName=ma;ua.valid=qa.isValidZone(ma);return ua}c(qa,ka);qa.create=function(ma){Ec[ma]||(Ec[ma]=new qa(ma));return Ec[ma]};qa.resetCache=function(){Ec={};lc={}};qa.isValidSpecifier=function(ma){return this.isValidZone(ma)};qa.isValidZone=function(ma){if(!ma)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:ma})).format(),!0}catch(ua){return!1}};var V=qa.prototype;V.offsetName=function(ma,ua){return Y(ma,ua.format,ua.locale,this.name)};V.formatOffset=function(ma,
ua){return N(this.offset(ma),ua)};V.offset=function(ma){ma=new Date(ma);if(isNaN(ma))return NaN;var ua=this.name;lc[ua]||(lc[ua]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:ua,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}));ua=lc[ua];if(ua.formatToParts){ua=ua.formatToParts(ma);for(var Ia=[],Qa=0;Qa<ua.length;Qa++){var $a=ua[Qa],jb=$a.type;$a=$a.value;var pb=Pc[jb];"era"===jb?Ia[pb]=$a:z(pb)||(Ia[pb]=parseInt($a,10))}ua=Ia}else ua=
ua.format(ma).replace(/\u200E/g,""),ua=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(ua),ua=[ua[3],ua[1],ua[2],ua[4],ua[5],ua[6],ua[7]];Ia=ua[0];Qa=ua[1];jb=ua[2];$a=ua[4];pb=ua[5];var xb=ua[6];"BC"===ua[3]&&(Ia=-Math.abs(Ia)+1);ua=P({year:Ia,month:Qa,day:jb,hour:24===$a?0:$a,minute:pb,second:xb,millisecond:0});ma=+ma;Ia=ma%1E3;return(ua-(ma-(0<=Ia?Ia:1E3+Ia)))/6E4};V.equals=function(ma){return"iana"===ma.type&&ma.name===this.name};l(qa,[{key:"type",get:function(){return"iana"}},{key:"name",
get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]);return qa}(Bb),Wb=["base"],sc=["padTo","floor"],fc={},Kb={},Zb={},gc={},oc=null,jd=function(){function ka(qa,V,ma){this.padTo=ma.padTo||0;this.floor=ma.floor||!1;ma.padTo;ma.floor;var ua=a(ma,sc);if(!V||0<Object.keys(ua).length)V=e({useGrouping:!1},ma),0<ma.padTo&&(V.minimumIntegerDigits=ma.padTo),ma=V,void 0===ma&&(ma={}),V=JSON.stringify([qa,ma]),ua=Zb[V],ua||(ua=
new Intl.NumberFormat(qa,ma),Zb[V]=ua),this.inf=ua}ka.prototype.format=function(qa){if(this.inf)return this.inf.format(this.floor?Math.floor(qa):qa);qa=this.floor?Math.floor(qa):Q(qa,3);return F(qa,this.padTo)};return ka}(),kd=function(){function ka(V,ma,ua){this.opts=ua;var Ia=void 0;V.zone.isUniversal?(Ia=V.offset/60*-1,Ia=0<=Ia?"Etc/GMT+"+Ia:"Etc/GMT"+Ia,0!==V.offset&&rc.create(Ia).valid?this.dt=V:(Ia="UTC",this.dt=ua.timeZoneName?V:0===V.offset?V:Tb.fromMillis(V.ts+6E4*V.offset))):"system"===
V.zone.type?this.dt=V:(this.dt=V,Ia=V.zone.name);V=e({},this.opts);V.timeZone=V.timeZone||Ia;this.dtf=k(ma,V)}var qa=ka.prototype;qa.format=function(){return this.dtf.format(this.dt.toJSDate())};qa.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())};qa.resolvedOptions=function(){return this.dtf.resolvedOptions()};return ka}(),Rb=function(){function ka(V,ma,ua){this.opts=e({style:"long"},ua);if(!ma&&C()){ma=ua;void 0===ma&&(ma={});ua=ma;ua.base;ua=a(ua,Wb);ua=JSON.stringify([V,
ua]);var Ia=gc[ua];Ia||(Ia=new Intl.RelativeTimeFormat(V,ma),gc[ua]=Ia);this.rtf=Ia}}var qa=ka.prototype;qa.format=function(V,ma){return this.rtf?this.rtf.format(V,ma):ha(ma,V,this.opts.numeric,"long"!==this.opts.style)};qa.formatToParts=function(V,ma){return this.rtf?this.rtf.formatToParts(V,ma):[]};return ka}(),Mb=function(){function ka(V,ma,ua,Ia){var Qa=V.indexOf("-x-");-1!==Qa&&(V=V.substring(0,Qa));Qa=V.indexOf("-u-");if(-1===Qa)var $a=[V];else{try{$a=k(V).resolvedOptions();var jb=V}catch(pb){jb=
V.substring(0,Qa),$a=k(jb).resolvedOptions()}$a=[jb,$a.numberingSystem,$a.calendar]}jb=$a[1];V=$a[2];this.locale=$a[0];this.numberingSystem=ma||jb||null;this.outputCalendar=ua||V||null;ma=this.locale;ua=this.numberingSystem;if(($a=this.outputCalendar)||ua)ma.includes("-u-")||(ma+="-u"),$a&&(ma+="-ca-"+$a),ua&&(ma+="-nu-"+ua);this.intl=ma;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=Ia;this.fastNumbersCached=
null}ka.fromOpts=function(V){return ka.create(V.locale,V.numberingSystem,V.outputCalendar,V.defaultToEN)};ka.create=function(V,ma,ua,Ia){void 0===Ia&&(Ia=!1);V=V||Lb.defaultLocale;var Qa;(Qa=V)||(Ia?Ia="en-US":(oc||(oc=(new Intl.DateTimeFormat).resolvedOptions().locale),Ia=oc),Qa=Ia);return new ka(Qa,ma||Lb.defaultNumberingSystem,ua||Lb.defaultOutputCalendar,V)};ka.resetCache=function(){oc=null;Kb={};Zb={};gc={}};ka.fromObject=function(V){V=void 0===V?{}:V;return ka.create(V.locale,V.numberingSystem,
V.outputCalendar)};var qa=ka.prototype;qa.listingMode=function(){var V=this.isEnglish(),ma=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return V&&ma?"en":"intl"};qa.clone=function(V){return V&&0!==Object.getOwnPropertyNames(V).length?ka.create(V.locale||this.specifiedLocale,V.numberingSystem||this.numberingSystem,V.outputCalendar||this.outputCalendar,V.defaultToEN||!1):this};qa.redefaultToEN=function(V){void 0===V&&(V=
{});return this.clone(e({},V,{defaultToEN:!0}))};qa.redefaultToSystem=function(V){void 0===V&&(V={});return this.clone(e({},V,{defaultToEN:!1}))};qa.months=function(V,ma,ua){var Ia=this;void 0===ma&&(ma=!1);void 0===ua&&(ua=!0);return w(this,V,ua,W,function(){var Qa=ma?{month:V,day:"numeric"}:{month:V},$a=ma?"format":"standalone";Ia.monthsCache[$a][V]||(Ia.monthsCache[$a][V]=g(function(jb){return Ia.extract(jb,Qa,"month")}));return Ia.monthsCache[$a][V]})};qa.weekdays=function(V,ma,ua){var Ia=this;
void 0===ma&&(ma=!1);void 0===ua&&(ua=!0);return w(this,V,ua,da,function(){var Qa=ma?{weekday:V,year:"numeric",month:"long",day:"numeric"}:{weekday:V},$a=ma?"format":"standalone";Ia.weekdaysCache[$a][V]||(Ia.weekdaysCache[$a][V]=b(function(jb){return Ia.extract(jb,Qa,"weekday")}));return Ia.weekdaysCache[$a][V]})};qa.meridiems=function(V){var ma=this;void 0===V&&(V=!0);return w(this,void 0,V,function(){return fd},function(){if(!ma.meridiemCache){var ua={hour:"numeric",hourCycle:"h12"};ma.meridiemCache=
[Tb.utc(2016,11,13,9),Tb.utc(2016,11,13,19)].map(function(Ia){return ma.extract(Ia,ua,"dayperiod")})}return ma.meridiemCache})};qa.eras=function(V,ma){var ua=this;void 0===ma&&(ma=!0);return w(this,V,ma,fa,function(){var Ia={era:V};ua.eraCache[V]||(ua.eraCache[V]=[Tb.utc(-40,1,1),Tb.utc(2017,1,1)].map(function(Qa){return ua.extract(Qa,Ia,"era")}));return ua.eraCache[V]})};qa.extract=function(V,ma,ua){return(V=this.dtFormatter(V,ma).formatToParts().find(function(Ia){return Ia.type.toLowerCase()===
ua}))?V.value:null};qa.numberFormatter=function(V){void 0===V&&(V={});return new jd(this.intl,V.forceSimple||this.fastNumbers,V)};qa.dtFormatter=function(V,ma){void 0===ma&&(ma={});return new kd(V,this.intl,ma)};qa.relFormatter=function(V){void 0===V&&(V={});return new Rb(this.intl,this.isEnglish(),V)};qa.listFormatter=function(V){void 0===V&&(V={});var ma=this.intl;void 0===V&&(V={});var ua=JSON.stringify([ma,V]),Ia=fc[ua];Ia||(Ia=new Intl.ListFormat(ma,V),fc[ua]=Ia);return Ia};qa.isEnglish=function(){return"en"===
this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")};qa.equals=function(V){return this.locale===V.locale&&this.numberingSystem===V.numberingSystem&&this.outputCalendar===V.outputCalendar};l(ka,[{key:"fastNumbers",get:function(){if(null==this.fastNumbersCached){var V=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;
this.fastNumbersCached=V}return this.fastNumbersCached}}]);return ka}(),Sc=null,ec=function(ka){function qa(ma){var ua=ka.call(this)||this;ua.fixed=ma;return ua}c(qa,ka);qa.instance=function(ma){return 0===ma?qa.utcInstance:new qa(ma)};qa.parseSpecifier=function(ma){return ma&&(ma=ma.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new qa(aa(ma[1],ma[2])):null};var V=qa.prototype;V.offsetName=function(){return this.name};V.formatOffset=function(ma,ua){return N(this.fixed,ua)};V.offset=function(){return this.fixed};
V.equals=function(ma){return"fixed"===ma.type&&ma.fixed===this.fixed};l(qa,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+N(this.fixed,"narrow")}},{key:"ianaName",get:function(){return 0===this.fixed?"Etc/UTC":"Etc/GMT"+N(-this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){null===Sc&&(Sc=new qa(0));return Sc}}]);return qa}(Bb),Uc=function(ka){function qa(ma){var ua=
ka.call(this)||this;ua.zoneName=ma;return ua}c(qa,ka);var V=qa.prototype;V.offsetName=function(){return null};V.formatOffset=function(){return""};V.offset=function(){return NaN};V.equals=function(){return!1};l(qa,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]);return qa}(Bb),ed=function(){return Date.now()},Tc="system",Ib=null,Gc=null,Fc=null,ad=60,bd,Lb=function(){function ka(){}
ka.resetCaches=function(){Mb.resetCache();rc.resetCache()};l(ka,null,[{key:"now",get:function(){return ed},set:function(qa){ed=qa}},{key:"defaultZone",get:function(){return x(Tc,kc.instance)},set:function(qa){Tc=qa}},{key:"defaultLocale",get:function(){return Ib},set:function(qa){Ib=qa}},{key:"defaultNumberingSystem",get:function(){return Gc},set:function(qa){Gc=qa}},{key:"defaultOutputCalendar",get:function(){return Fc},set:function(qa){Fc=qa}},{key:"twoDigitCutoffYear",get:function(){return ad},
set:function(qa){ad=qa%100}},{key:"throwOnInvalid",get:function(){return bd},set:function(qa){bd=qa}}]);return ka}(),Qc="January February March April May June July August September October November December".split(" "),Rc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ld="JFMAMJJASOND".split(""),cd="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),dd="Mon Tue Wed Thu Fri Sat Sun".split(" "),pd="MTWTFSS".split(""),fd=["AM","PM"],Lc=["Before Christ","Anno Domini"],
md=["BC","AD"],nd=["B","A"],od={D:Dc,DD:Jb,DDD:Ra,DDDD:Sa,t:Ka,tt:Ma,ttt:Xa,tttt:Wa,T:Pa,TT:Za,TTT:cb,TTTT:eb,f:nb,ff:mb,fff:Vb,ffff:Cc,F:db,FF:gb,FFF:Ac,FFFF:Bc},mc=function(){function ka(V,ma){this.opts=ma;this.loc=V;this.systemLoc=null}ka.create=function(V,ma){void 0===ma&&(ma={});return new ka(V,ma)};ka.parseFormat=function(V){for(var ma=null,ua="",Ia=!1,Qa=[],$a=0;$a<V.length;$a++){var jb=V.charAt($a);"'"===jb?(0<ua.length&&Qa.push({literal:Ia,val:ua}),ma=null,ua="",Ia=!Ia):Ia?ua+=jb:jb===ma?
ua+=jb:(0<ua.length&&Qa.push({literal:!1,val:ua}),ma=ua=jb)}0<ua.length&&Qa.push({literal:Ia,val:ua});return Qa};ka.macroTokenToFormatOpts=function(V){return od[V]};var qa=ka.prototype;qa.formatWithSystemDefault=function(V,ma){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(V,e({},this.opts,ma)).format()};qa.formatDateTime=function(V,ma){void 0===ma&&(ma={});return this.loc.dtFormatter(V,e({},this.opts,ma)).format()};qa.formatDateTimeParts=function(V,
ma){void 0===ma&&(ma={});return this.loc.dtFormatter(V,e({},this.opts,ma)).formatToParts()};qa.formatInterval=function(V,ma){void 0===ma&&(ma={});return this.loc.dtFormatter(V.start,e({},this.opts,ma)).dtf.formatRange(V.start.toJSDate(),V.end.toJSDate())};qa.resolvedOptions=function(V,ma){void 0===ma&&(ma={});return this.loc.dtFormatter(V,e({},this.opts,ma)).resolvedOptions()};qa.num=function(V,ma){void 0===ma&&(ma=0);if(this.opts.forceSimple)return F(V,ma);var ua=e({},this.opts);0<ma&&(ua.padTo=
ma);return this.loc.numberFormatter(ua).format(V)};qa.formatDateTimeFromString=function(V,ma){var ua=this,Ia="en"===this.loc.listingMode(),Qa=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,$a=function(ub,Qb){return ua.loc.extract(V,ub,Qb)},jb=function(ub){return V.isOffsetFixed&&0===V.offset&&ub.allowZ?"Z":V.isValid?V.zone.formatOffset(V.ts,ub.format):""},pb=function(ub,Qb){return Ia?W(ub)[V.month-1]:$a(Qb?{month:ub}:{month:ub,day:"numeric"},"month")},xb=function(ub,Qb){return Ia?da(ub)[V.weekday-
1]:$a(Qb?{weekday:ub}:{weekday:ub,month:"long",day:"numeric"},"weekday")},zb=function(ub){return Ia?fa(ub)[0>V.year?0:1]:$a({era:ub},"era")};return ra(ka.parseFormat(ma),function(ub){switch(ub){case "S":return ua.num(V.millisecond);case "u":case "SSS":return ua.num(V.millisecond,3);case "s":return ua.num(V.second);case "ss":return ua.num(V.second,2);case "uu":return ua.num(Math.floor(V.millisecond/10),2);case "uuu":return ua.num(Math.floor(V.millisecond/100));case "m":return ua.num(V.minute);case "mm":return ua.num(V.minute,
2);case "h":return ua.num(0===V.hour%12?12:V.hour%12);case "hh":return ua.num(0===V.hour%12?12:V.hour%12,2);case "H":return ua.num(V.hour);case "HH":return ua.num(V.hour,2);case "Z":return jb({format:"narrow",allowZ:ua.opts.allowZ});case "ZZ":return jb({format:"short",allowZ:ua.opts.allowZ});case "ZZZ":return jb({format:"techie",allowZ:ua.opts.allowZ});case "ZZZZ":return V.zone.offsetName(V.ts,{format:"short",locale:ua.loc.locale});case "ZZZZZ":return V.zone.offsetName(V.ts,{format:"long",locale:ua.loc.locale});
case "z":return V.zoneName;case "a":return Ia?fd[12>V.hour?0:1]:$a({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return Qa?$a({day:"numeric"},"day"):ua.num(V.day);case "dd":return Qa?$a({day:"2-digit"},"day"):ua.num(V.day,2);case "c":return ua.num(V.weekday);case "ccc":return xb("short",!0);case "cccc":return xb("long",!0);case "ccccc":return xb("narrow",!0);case "E":return ua.num(V.weekday);case "EEE":return xb("short",!1);case "EEEE":return xb("long",!1);case "EEEEE":return xb("narrow",
!1);case "L":return Qa?$a({month:"numeric",day:"numeric"},"month"):ua.num(V.month);case "LL":return Qa?$a({month:"2-digit",day:"numeric"},"month"):ua.num(V.month,2);case "LLL":return pb("short",!0);case "LLLL":return pb("long",!0);case "LLLLL":return pb("narrow",!0);case "M":return Qa?$a({month:"numeric"},"month"):ua.num(V.month);case "MM":return Qa?$a({month:"2-digit"},"month"):ua.num(V.month,2);case "MMM":return pb("short",!1);case "MMMM":return pb("long",!1);case "MMMMM":return pb("narrow",!1);
case "y":return Qa?$a({year:"numeric"},"year"):ua.num(V.year);case "yy":return Qa?$a({year:"2-digit"},"year"):ua.num(V.year.toString().slice(-2),2);case "yyyy":return Qa?$a({year:"numeric"},"year"):ua.num(V.year,4);case "yyyyyy":return Qa?$a({year:"numeric"},"year"):ua.num(V.year,6);case "G":return zb("short");case "GG":return zb("long");case "GGGGG":return zb("narrow");case "kk":return ua.num(V.weekYear.toString().slice(-2),2);case "kkkk":return ua.num(V.weekYear,4);case "W":return ua.num(V.weekNumber);
case "WW":return ua.num(V.weekNumber,2);case "o":return ua.num(V.ordinal);case "ooo":return ua.num(V.ordinal,3);case "q":return ua.num(V.quarter);case "qq":return ua.num(V.quarter,2);case "X":return ua.num(Math.floor(V.ts/1E3));case "x":return ua.num(V.ts);default:var Qb=ka.macroTokenToFormatOpts(ub);ub=Qb?ua.formatWithSystemDefault(V,Qb):ub;return ub}})};qa.formatDurationFromString=function(V,ma){var ua=this,Ia=function($a){switch($a[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";
case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";case "y":return"year";default:return null}};ma=ka.parseFormat(ma);var Qa=ma.reduce(function($a,jb){var pb=jb.val;return jb.literal?$a:$a.concat(pb)},[]);V=V.shiftTo.apply(V,Qa.map(Ia).filter(function($a){return $a}));return ra(ma,function($a){return function(jb){var pb=Ia(jb);return pb?ua.num($a.get(pb),jb.length):jb}}(V))};return ka}(),nc=function(){function ka(qa,V){this.reason=qa;this.explanation=V}ka.prototype.toMessage=
function(){return this.explanation?this.reason+": "+this.explanation:this.reason};return ka}(),Xc=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,Yc=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Zc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,gd=RegExp(""+Zc.source+("(?:"+Yc.source+"?(?:\\[("+Xc.source+")\\])?)?")),pc=RegExp("(?:T"+gd.source+")?"),qd=Ga("weekYear","weekNumber","weekDay"),hb=Ga("year","ordinal"),Cb=RegExp(Zc.source+" ?(?:"+Yc.source+"|("+Xc.source+"))?"),
uc=RegExp("(?: "+Cb.source+")?"),rd=RegExp("^T?"+Zc.source+"$"),sd=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/,td={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},ud=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,
vd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,wd=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,xd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,yd=za(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,pc),zd=za(/(\d{4})-?W(\d\d)(?:-?(\d))?/,
pc),Ad=za(/(\d{4})-?(\d{3})/,pc),Bd=za(gd),hd=Da(function(ka,qa){return[{year:ba(ka,qa),month:ba(ka,qa+1,1),day:ba(ka,qa+2,1)},null,qa+3]},ia,wa,Aa),Cd=Da(qd,ia,wa,Aa),Dd=Da(hb,ia,wa,Aa),Ed=Da(ia,wa,Aa),Fd=Da(ia),vc=za(/(\d{4})-(\d\d)-(\d\d)/,uc),Jc=za(Cb),Wc=Da(ia,wa,Aa),Ab={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},
seconds:{milliseconds:1E3}},id=e({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6}},Ab),R=e({years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,
days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3}},Ab),ca="years quarters months weeks days hours minutes seconds milliseconds".split(" "),sa=ca.slice(0).reverse(),Ba=function(){function ka(V){var ma="longterm"===V.conversionAccuracy||!1,ua=ma?R:id;V.matrix&&(ua=V.matrix);this.values=V.values;this.loc=V.loc||Mb.create();this.conversionAccuracy=ma?"longterm":
"casual";this.invalid=V.invalid||null;this.matrix=ua;this.isLuxonDuration=!0}ka.fromMillis=function(V,ma){return ka.fromObject({milliseconds:V},ma)};ka.fromObject=function(V,ma){void 0===ma&&(ma={});if(null==V||"object"!==typeof V)throw new Pb("Duration.fromObject: argument expected to be an object, got "+(null===V?"null":typeof V));return new ka({values:T(V,ka.normalizeUnit),loc:Mb.fromObject(ma),conversionAccuracy:ma.conversionAccuracy,matrix:ma.matrix})};ka.fromDurationLike=function(V){if(D(V))return ka.fromMillis(V);
if(ka.isDuration(V))return V;if("object"===typeof V)return ka.fromObject(V);throw new Pb("Unknown duration argument "+V+" of type "+typeof V);};ka.fromISO=function(V,ma){var ua=va(V,[sd,Fa])[0];return ua?ka.fromObject(ua,ma):ka.invalid("unparsable",'the input "'+V+"\" can't be parsed as ISO 8601")};ka.fromISOTime=function(V,ma){var ua=va(V,[rd,Fd])[0];return ua?ka.fromObject(ua,ma):ka.invalid("unparsable",'the input "'+V+"\" can't be parsed as ISO 8601")};ka.invalid=function(V,ma){void 0===ma&&(ma=
null);if(!V)throw new Pb("need to specify a reason the Duration is invalid");V=V instanceof nc?V:new nc(V,ma);if(Lb.throwOnInvalid)throw new dc(V);return new ka({invalid:V})};ka.normalizeUnit=function(V){var ma={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[V?
V.toLowerCase():V];if(!ma)throw new Oc(V);return ma};ka.isDuration=function(V){return V&&V.isLuxonDuration||!1};var qa=ka.prototype;qa.toFormat=function(V,ma){void 0===ma&&(ma={});ma=e({},ma,{floor:!1!==ma.round&&!1!==ma.floor});return this.isValid?mc.create(this.loc,ma).formatDurationFromString(this,V):"Invalid Duration"};qa.toHuman=function(V){var ma=this;void 0===V&&(V={});var ua=ca.map(function(Ia){var Qa=ma.values[Ia];return z(Qa)?null:ma.loc.numberFormatter(e({style:"unit",unitDisplay:"long"},
V,{unit:Ia.slice(0,-1)})).format(Qa)}).filter(function(Ia){return Ia});return this.loc.listFormatter(e({type:"conjunction",style:V.listStyle||"narrow"},V)).format(ua)};qa.toObject=function(){return this.isValid?e({},this.values):{}};qa.toISO=function(){if(!this.isValid)return null;var V="P";0!==this.years&&(V+=this.years+"Y");if(0!==this.months||0!==this.quarters)V+=this.months+3*this.quarters+"M";0!==this.weeks&&(V+=this.weeks+"W");0!==this.days&&(V+=this.days+"D");if(0!==this.hours||0!==this.minutes||
0!==this.seconds||0!==this.milliseconds)V+="T";0!==this.hours&&(V+=this.hours+"H");0!==this.minutes&&(V+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)V+=Q(this.seconds+this.milliseconds/1E3,3)+"S";"P"===V&&(V+="T0S");return V};qa.toISOTime=function(V){void 0===V&&(V={});if(!this.isValid)return null;var ma=this.toMillis();if(0>ma||864E5<=ma)return null;V=e({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},V);ma=this.shiftTo("hours","minutes","seconds",
"milliseconds");var ua="basic"===V.format?"hhmm":"hh:mm";V.suppressSeconds&&0===ma.seconds&&0===ma.milliseconds||(ua+="basic"===V.format?"ss":":ss",V.suppressMilliseconds&&0===ma.milliseconds||(ua+=".SSS"));ma=ma.toFormat(ua);V.includePrefix&&(ma="T"+ma);return ma};qa.toJSON=function(){return this.toISO()};qa.toString=function(){return this.toISO()};qa.toMillis=function(){return this.as("milliseconds")};qa.valueOf=function(){return this.toMillis()};qa.plus=function(V){if(!this.isValid)return this;
V=ka.fromDurationLike(V);for(var ma={},ua=0;ua<ca.length;ua++){var Ia=ca[ua];if(A(V.values,Ia)||A(this.values,Ia))ma[Ia]=V.get(Ia)+this.get(Ia)}return Oa(this,{values:ma},!0)};qa.minus=function(V){if(!this.isValid)return this;V=ka.fromDurationLike(V);return this.plus(V.negate())};qa.mapUnits=function(V){if(!this.isValid)return this;for(var ma={},ua=0,Ia=Object.keys(this.values);ua<Ia.length;ua++){var Qa=Ia[ua];ma[Qa]=la(V(this.values[Qa],Qa))}return Oa(this,{values:ma},!0)};qa.get=function(V){return this[ka.normalizeUnit(V)]};
qa.set=function(V){if(!this.isValid)return this;V=e({},this.values,T(V,ka.normalizeUnit));return Oa(this,{values:V})};qa.reconfigure=function(V){V=void 0===V?{}:V;var ma=V.conversionAccuracy,ua=V.matrix;V={loc:this.loc.clone({locale:V.locale,numberingSystem:V.numberingSystem}),matrix:ua,conversionAccuracy:ma};return Oa(this,V)};qa.as=function(V){return this.isValid?this.shiftTo(V).get(V):NaN};qa.normalize=function(){if(!this.isValid)return this;var V=this.toObject();Ca(this.matrix,V);return Oa(this,
{values:V},!0)};qa.rescale=function(){if(!this.isValid)return this;var V=this.normalize().shiftToAll().toObject(),ma={},ua=0;for(V=Object.entries(V);ua<V.length;ua++){var Ia=V[ua],Qa=Ia[0];Ia=Ia[1];0!==Ia&&(ma[Qa]=Ia)}return Oa(this,{values:ma},!0)};qa.shiftTo=function(){for(var V=arguments.length,ma=Array(V),ua=0;ua<V;ua++)ma[ua]=arguments[ua];if(!this.isValid||0===ma.length)return this;ma=ma.map(function(qc){return ka.normalizeUnit(qc)});V={};ua={};for(var Ia=this.toObject(),Qa,$a=0;$a<ca.length;$a++){var jb=
ca[$a];if(0<=ma.indexOf(jb)){Qa=jb;var pb=0,xb;for(xb in ua)pb+=this.matrix[xb][jb]*ua[xb],ua[xb]=0;D(Ia[jb])&&(pb+=Ia[jb]);var zb=Math.trunc(pb);V[jb]=zb;ua[jb]=(1E3*pb-1E3*zb)/1E3;for(var ub in Ia)ca.indexOf(ub)>ca.indexOf(jb)&&Na(this.matrix,Ia,ub,V,jb)}else D(Ia[jb])&&(ua[jb]=Ia[jb])}for(var Qb in ua)0!==ua[Qb]&&(V[Qa]+=Qb===Qa?ua[Qb]:ua[Qb]/this.matrix[Qa][Qb]);return Oa(this,{values:V},!0).normalize()};qa.shiftToAll=function(){return this.isValid?this.shiftTo("years","months","weeks","days",
"hours","minutes","seconds","milliseconds"):this};qa.negate=function(){if(!this.isValid)return this;for(var V={},ma=0,ua=Object.keys(this.values);ma<ua.length;ma++){var Ia=ua[ma];V[Ia]=0===this.values[Ia]?0:-this.values[Ia]}return Oa(this,{values:V},!0)};qa.equals=function(V){if(!this.isValid||!V.isValid||!this.loc.equals(V.loc))return!1;for(var ma=0;ma<ca.length;ma++){var ua=ca[ma];var Ia=this.values[ua];ua=V.values[ua];Ia=void 0===Ia||0===Ia?void 0===ua||0===ua:Ia===ua;if(!Ia)return!1}return!0};
l(ka,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?
this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",
get:function(){return this.invalid?this.invalid.explanation:null}}]);return ka}(),Va=function(){function ka(V){this.s=V.start;this.e=V.end;this.invalid=V.invalid||null;this.isLuxonInterval=!0}ka.invalid=function(V,ma){void 0===ma&&(ma=null);if(!V)throw new Pb("need to specify a reason the Interval is invalid");V=V instanceof nc?V:new nc(V,ma);if(Lb.throwOnInvalid)throw new cc(V);return new ka({invalid:V})};ka.fromDateTimes=function(V,ma){V=tc(V);ma=tc(ma);var ua=V&&V.isValid?ma&&ma.isValid?ma<V?Va.invalid("end before start",
"The end of an interval must be after its start, but you had start\x3d"+V.toISO()+" and end\x3d"+ma.toISO()):null:Va.invalid("missing or invalid end"):Va.invalid("missing or invalid start");return null==ua?new ka({start:V,end:ma}):ua};ka.after=function(V,ma){ma=Ba.fromDurationLike(ma);V=tc(V);return ka.fromDateTimes(V,V.plus(ma))};ka.before=function(V,ma){ma=Ba.fromDurationLike(ma);V=tc(V);return ka.fromDateTimes(V.minus(ma),V)};ka.fromISO=function(V,ma){var ua=(V||"").split("/",2),Ia=ua[0];ua=ua[1];
if(Ia&&ua){try{var Qa=Tb.fromISO(Ia,ma);var $a=Qa.isValid}catch(xb){$a=!1}try{var jb=Tb.fromISO(ua,ma);var pb=jb.isValid}catch(xb){pb=!1}if($a&&pb)return ka.fromDateTimes(Qa,jb);if($a){if(jb=Ba.fromISO(ua,ma),jb.isValid)return ka.after(Qa,jb)}else if(pb&&(Qa=Ba.fromISO(Ia,ma),Qa.isValid))return ka.before(jb,Qa)}return ka.invalid("unparsable",'the input "'+V+"\" can't be parsed as ISO 8601")};ka.isInterval=function(V){return V&&V.isLuxonInterval||!1};var qa=ka.prototype;qa.length=function(V){void 0===
V&&(V="milliseconds");return this.isValid?this.toDuration.apply(this,[V]).get(V):NaN};qa.count=function(V){void 0===V&&(V="milliseconds");if(!this.isValid)return NaN;var ma=this.start.startOf(V),ua=this.end.startOf(V);return Math.floor(ua.diff(ma,V).get(V))+1};qa.hasSame=function(V){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,V):!1};qa.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()};qa.isAfter=function(V){return this.isValid?this.s>V:!1};qa.isBefore=function(V){return this.isValid?
this.e<=V:!1};qa.contains=function(V){return this.isValid?this.s<=V&&this.e>V:!1};qa.set=function(V){V=void 0===V?{}:V;return this.isValid?ka.fromDateTimes(V.start||this.s,V.end||this.e):this};qa.splitAt=function(){var V=this;if(!this.isValid)return[];for(var ma=arguments.length,ua=Array(ma),Ia=0;Ia<ma;Ia++)ua[Ia]=arguments[Ia];ma=ua.map(tc).filter(function(jb){return V.contains(jb)}).sort();ua=[];Ia=this.s;for(var Qa=0;Ia<this.e;){var $a=ma[Qa]||this.e;$a=+$a>+this.e?this.e:$a;ua.push(ka.fromDateTimes(Ia,
$a));Ia=$a;Qa+=1}return ua};qa.splitBy=function(V){V=Ba.fromDurationLike(V);if(!this.isValid||!V.isValid||0===V.as("milliseconds"))return[];for(var ma=this.s,ua=1,Ia,Qa=[];ma<this.e;)Ia=this.start.plus(V.mapUnits(function($a){return $a*ua})),Ia=+Ia>+this.e?this.e:Ia,Qa.push(ka.fromDateTimes(ma,Ia)),ma=Ia,ua+=1;return Qa};qa.divideEqually=function(V){return this.isValid?this.splitBy(this.length()/V).slice(0,V):[]};qa.overlaps=function(V){return this.e>V.s&&this.s<V.e};qa.abutsStart=function(V){return this.isValid?
+this.e===+V.s:!1};qa.abutsEnd=function(V){return this.isValid?+V.e===+this.s:!1};qa.engulfs=function(V){return this.isValid?this.s<=V.s&&this.e>=V.e:!1};qa.equals=function(V){return this.isValid&&V.isValid?this.s.equals(V.s)&&this.e.equals(V.e):!1};qa.intersection=function(V){if(!this.isValid)return this;var ma=this.s>V.s?this.s:V.s;V=this.e<V.e?this.e:V.e;return ma>=V?null:ka.fromDateTimes(ma,V)};qa.union=function(V){return this.isValid?ka.fromDateTimes(this.s<V.s?this.s:V.s,this.e>V.e?this.e:V.e):
this};ka.merge=function(V){var ma=V.sort(function(ua,Ia){return ua.s-Ia.s}).reduce(function(ua,Ia){var Qa=ua[0];return(ua=ua[1])?ua.overlaps(Ia)||ua.abutsStart(Ia)?[Qa,ua.union(Ia)]:[Qa.concat([ua]),Ia]:[Qa,Ia]},[[],null]);V=ma[0];(ma=ma[1])&&V.push(ma);return V};ka.xor=function(V){var ma,ua=null,Ia=0,Qa=[];V=V.map(function(jb){return[{time:jb.s,type:"s"},{time:jb.e,type:"e"}]});var $a=(ma=Array.prototype).concat.apply(ma,V).sort(function(jb,pb){return jb.time-pb.time});for(ma=r($a);!(V=ma()).done;)V=
V.value,Ia+="s"===V.type?1:-1,1===Ia?ua=V.time:(ua&&+ua!==+V.time&&Qa.push(ka.fromDateTimes(ua,V.time)),ua=null);return ka.merge(Qa)};qa.difference=function(){for(var V=this,ma=arguments.length,ua=Array(ma),Ia=0;Ia<ma;Ia++)ua[Ia]=arguments[Ia];return ka.xor([this].concat(ua)).map(function(Qa){return V.intersection(Qa)}).filter(function(Qa){return Qa&&!Qa.isEmpty()})};qa.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":"Invalid Interval"};qa.toLocaleString=function(V,
ma){void 0===V&&(V=Dc);void 0===ma&&(ma={});return this.isValid?mc.create(this.s.loc.clone(ma),V).formatInterval(this):"Invalid Interval"};qa.toISO=function(V){return this.isValid?this.s.toISO(V)+"/"+this.e.toISO(V):"Invalid Interval"};qa.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():"Invalid Interval"};qa.toISOTime=function(V){return this.isValid?this.s.toISOTime(V)+"/"+this.e.toISOTime(V):"Invalid Interval"};qa.toFormat=function(V,ma){ma=(void 0===ma?{}:ma).separator;
ma=void 0===ma?" \u2013 ":ma;return this.isValid?""+this.s.toFormat(V)+ma+this.e.toFormat(V):"Invalid Interval"};qa.toDuration=function(V,ma){return this.isValid?this.e.diff(this.s,V,ma):Ba.invalid(this.invalidReason)};qa.mapEndpoints=function(V){return ka.fromDateTimes(V(this.s),V(this.e))};l(ka,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",
get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]);return ka}(),bb=function(){function ka(){}ka.hasDST=function(qa){void 0===qa&&(qa=Lb.defaultZone);var V=Tb.now().setZone(qa).set({month:12});return!qa.isUniversal&&V.offset!==V.set({month:6}).offset};ka.isValidIANAZone=function(qa){return rc.isValidZone(qa)};ka.normalizeZone=function(qa){return x(qa,Lb.defaultZone)};ka.months=function(qa,V){void 0===
qa&&(qa="long");var ma=void 0===V?{}:V;V=ma.locale;var ua=ma.numberingSystem,Ia=ma.locObj;ma=ma.outputCalendar;return((void 0===Ia?null:Ia)||Mb.create(void 0===V?null:V,void 0===ua?null:ua,void 0===ma?"gregory":ma)).months(qa)};ka.monthsFormat=function(qa,V){void 0===qa&&(qa="long");var ma=void 0===V?{}:V;V=ma.locale;var ua=ma.numberingSystem,Ia=ma.locObj;ma=ma.outputCalendar;return((void 0===Ia?null:Ia)||Mb.create(void 0===V?null:V,void 0===ua?null:ua,void 0===ma?"gregory":ma)).months(qa,!0)};ka.weekdays=
function(qa,V){void 0===qa&&(qa="long");var ma=void 0===V?{}:V;V=ma.locale;var ua=ma.numberingSystem;ma=ma.locObj;return((void 0===ma?null:ma)||Mb.create(void 0===V?null:V,void 0===ua?null:ua,null)).weekdays(qa)};ka.weekdaysFormat=function(qa,V){void 0===qa&&(qa="long");var ma=void 0===V?{}:V;V=ma.locale;var ua=ma.numberingSystem;ma=ma.locObj;return((void 0===ma?null:ma)||Mb.create(void 0===V?null:V,void 0===ua?null:ua,null)).weekdays(qa,!0)};ka.meridiems=function(qa){qa=(void 0===qa?{}:qa).locale;
return Mb.create(void 0===qa?null:qa).meridiems()};ka.eras=function(qa,V){void 0===qa&&(qa="short");V=(void 0===V?{}:V).locale;return Mb.create(void 0===V?null:V,null,"gregory").eras(qa)};ka.features=function(){return{relative:C()}};return ka}(),ib={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",
knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},rb={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],
mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},vb=ib.hanidec.replace(/[\[|\]]/g,"").split(""),sb="[ "+String.fromCharCode(160)+"]",Fb=new RegExp(sb,"g"),Kc={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},
timeZoneName:{long:"ZZZZZ",short:"ZZZ"}},Vc=null,Hd=[0,31,59,90,120,151,181,212,243,273,304,334],Gd=[0,31,60,91,121,152,182,213,244,274,305,335],Jd={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ld={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Md={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Id="year month day hour minute second millisecond".split(" "),Nd="weekYear weekNumber weekday hour minute second millisecond".split(" "),Od="year ordinal hour minute second millisecond".split(" "),
Tb=function(){function ka(V){var ma=V.zone||Lb.defaultZone,ua=V.invalid||(Number.isNaN(V.ts)?new nc("invalid input"):null)||(ma.isValid?null:Hb(ma));this.ts=z(V.ts)?Lb.now():V.ts;var Ia=null,Qa=null;ua||(V.old&&V.old.ts===this.ts&&V.old.zone.equals(ma)?(Qa=[V.old.c,V.old.o],Ia=Qa[0],Qa=Qa[1]):(Qa=ma.offset(this.ts),Ia=bc(this.ts,Qa),Ia=(ua=Number.isNaN(Ia.year)?new nc("invalid input"):null)?null:Ia,Qa=ua?null:Qa));this._zone=ma;this.loc=V.loc||Mb.create();this.invalid=ua;this.weekData=null;this.c=
Ia;this.o=Qa;this.isLuxonDateTime=!0}ka.now=function(){return new ka({})};ka.local=function(){var V=zc(arguments),ma=V[1];return Mc({year:ma[0],month:ma[1],day:ma[2],hour:ma[3],minute:ma[4],second:ma[5],millisecond:ma[6]},V[0])};ka.utc=function(){var V=zc(arguments),ma=V[0],ua=V[1];V=ua[0];var Ia=ua[1],Qa=ua[2],$a=ua[3],jb=ua[4],pb=ua[5];ua=ua[6];ma.zone=ec.utcInstance;return Mc({year:V,month:Ia,day:Qa,hour:$a,minute:jb,second:pb,millisecond:ua},ma)};ka.fromJSDate=function(V,ma){void 0===ma&&(ma=
{});V="[object Date]"===Object.prototype.toString.call(V)?V.valueOf():NaN;if(Number.isNaN(V))return ka.invalid("invalid input");var ua=x(ma.zone,Lb.defaultZone);return ua.isValid?new ka({ts:V,zone:ua,loc:Mb.fromObject(ma)}):ka.invalid(Hb(ua))};ka.fromMillis=function(V,ma){void 0===ma&&(ma={});if(D(V))return-864E13>V||864E13<V?ka.invalid("Timestamp out of range"):new ka({ts:V,zone:x(ma.zone,Lb.defaultZone),loc:Mb.fromObject(ma)});throw new Pb("fromMillis requires a numerical input, but received a "+
typeof V+" with value "+V);};ka.fromSeconds=function(V,ma){void 0===ma&&(ma={});if(D(V))return new ka({ts:1E3*V,zone:x(ma.zone,Lb.defaultZone),loc:Mb.fromObject(ma)});throw new Pb("fromSeconds requires a numerical input");};ka.fromObject=function(V,ma){void 0===ma&&(ma={});V=V||{};var ua=x(ma.zone,Lb.defaultZone);if(!ua.isValid)return ka.invalid(Hb(ua));var Ia=Lb.now(),Qa=z(ma.specificOffset)?ua.offset(Ia):ma.specificOffset,$a=T(V,Hc),jb=!z($a.ordinal),pb=!z($a.year),xb=!z($a.month)||!z($a.day);pb=
pb||xb;var zb=$a.weekYear||$a.weekNumber;ma=Mb.fromObject(ma);if((pb||jb)&&zb)throw new Yb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(xb&&jb)throw new Yb("Can't mix ordinal dates with month/day");xb=zb||$a.weekday&&!pb;zb=bc(Ia,Qa);if(xb){var ub=Nd;Ia=Ld;zb=Gb(zb)}else jb?(ub=Od,Ia=Md,zb=lb(zb)):(ub=Id,Ia=Jd);var Qb=!1;ub=r(ub);for(var qc;!(qc=ub()).done;)qc=qc.value,z($a[qc])?$a[qc]=Qb?Ia[qc]:zb[qc]:Qb=!0;xb?(Ia=E($a.weekYear),zb=G($a.weekNumber,1,J($a.weekYear)),Qb=
G($a.weekday,1,7),Ia=Ia?zb?Qb?!1:qb("weekday",$a.weekday):qb("week",$a.week):qb("weekYear",$a.weekYear)):jb?(Ia=E($a.year),zb=G($a.ordinal,1,S($a.year)?366:365),Ia=Ia?zb?!1:qb("ordinal",$a.ordinal):qb("year",$a.year)):Ia=Sb($a);if(Ia=Ia||Eb($a))return ka.invalid(Ia);jb=xb?yb($a):jb?Db($a):$a;Qa=Ub(jb,Qa,ua);ua=new ka({ts:Qa[0],zone:ua,o:Qa[1],loc:ma});return $a.weekday&&pb&&V.weekday!==ua.weekday?ka.invalid("mismatched weekday","you can't specify both a weekday of "+$a.weekday+" and a date of "+ua.toISO()):
ua};ka.fromISO=function(V,ma){void 0===ma&&(ma={});var ua=va(V,[yd,hd],[zd,Cd],[Ad,Dd],[Bd,Ed]);return hc(ua[0],ua[1],ma,"ISO 8601",V)};ka.fromRFC2822=function(V,ma){void 0===ma&&(ma={});var ua=va(V.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[ud,ya]);return hc(ua[0],ua[1],ma,"RFC 2822",V)};ka.fromHTTP=function(V,ma){void 0===ma&&(ma={});V=va(V,[vd,Ha],[wd,Ha],[xd,ea]);return hc(V[0],V[1],ma,"HTTP",ma)};ka.fromFormat=function(V,ma,ua){void 0===ua&&(ua={});if(z(V)||z(ma))throw new Pb("fromFormat requires an input string and a format");
var Ia=ua,Qa=Ia.locale;Ia=Ia.numberingSystem;Qa=Mb.fromOpts({locale:void 0===Qa?null:Qa,numberingSystem:void 0===Ia?null:Ia,defaultToEN:!0});Qa=fb(Qa,V,ma);var $a=[Qa.result,Qa.zone,Qa.specificOffset,Qa.invalidReason];Qa=$a[0];Ia=$a[1];var jb=$a[2];return($a=$a[3])?ka.invalid($a):hc(Qa,Ia,ua,"format "+ma,V,jb)};ka.fromString=function(V,ma,ua){void 0===ua&&(ua={});return ka.fromFormat(V,ma,ua)};ka.fromSQL=function(V,ma){void 0===ma&&(ma={});var ua=va(V,[vc,hd],[Jc,Wc]);return hc(ua[0],ua[1],ma,"SQL",
V)};ka.invalid=function(V,ma){void 0===ma&&(ma=null);if(!V)throw new Pb("need to specify a reason the DateTime is invalid");V=V instanceof nc?V:new nc(V,ma);if(Lb.throwOnInvalid)throw new Nc(V);return new ka({invalid:V})};ka.isDateTime=function(V){return V&&V.isLuxonDateTime||!1};ka.parseFormatForOpts=function(V,ma){void 0===ma&&(ma={});return(V=kb(V,Mb.fromObject(ma)))?V.map(function(ua){return ua?ua.val:null}).join(""):null};ka.expandFormat=function(V,ma){void 0===ma&&(ma={});return ab(mc.parseFormat(V),
Mb.fromObject(ma)).map(function(ua){return ua.val}).join("")};var qa=ka.prototype;qa.get=function(V){return this[V]};qa.resolvedLocaleOptions=function(V){void 0===V&&(V={});V=mc.create(this.loc.clone(V),V).resolvedOptions(this);return{locale:V.locale,numberingSystem:V.numberingSystem,outputCalendar:V.calendar}};qa.toUTC=function(V,ma){void 0===V&&(V=0);void 0===ma&&(ma={});return this.setZone(ec.instance(V),ma)};qa.toLocal=function(){return this.setZone(Lb.defaultZone)};qa.setZone=function(V,ma){var ua=
void 0===ma?{}:ma;ma=ua.keepLocalTime;ma=void 0===ma?!1:ma;ua=ua.keepCalendarTime;ua=void 0===ua?!1:ua;V=x(V,Lb.defaultZone);if(V.equals(this.zone))return this;if(V.isValid){var Ia=this.ts;if(ma||ua)ma=V.offset(this.ts),ua=this.toObject(),Ia=Ub(ua,ma,V)[0];return $b(this,{ts:Ia,zone:V})}return ka.invalid(Hb(V))};qa.reconfigure=function(V){V=void 0===V?{}:V;V=this.loc.clone({locale:V.locale,numberingSystem:V.numberingSystem,outputCalendar:V.outputCalendar});return $b(this,{loc:V})};qa.setLocale=function(V){return this.reconfigure({locale:V})};
qa.set=function(V){if(!this.isValid)return this;V=T(V,Hc);var ma=!z(V.weekYear)||!z(V.weekNumber)||!z(V.weekday),ua=!z(V.ordinal),Ia=!z(V.year),Qa=!z(V.month)||!z(V.day),$a=V.weekYear||V.weekNumber;if((Ia||Qa||ua)&&$a)throw new Yb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Qa&&ua)throw new Yb("Can't mix ordinal dates with month/day");ma?ma=yb(e({},Gb(this.c),V)):z(V.ordinal)?(ma=e({},this.toObject(),V),z(V.day)&&(ma.day=Math.min(I(ma.year,ma.month),ma.day))):ma=Db(e({},
lb(this.c),V));V=Ub(ma,this.o,this.zone);return $b(this,{ts:V[0],o:V[1]})};qa.plus=function(V){if(!this.isValid)return this;V=Ba.fromDurationLike(V);return $b(this,wc(this,V))};qa.minus=function(V){if(!this.isValid)return this;V=Ba.fromDurationLike(V).negate();return $b(this,wc(this,V))};qa.startOf=function(V){if(!this.isValid)return this;var ma={};V=Ba.normalizeUnit(V);switch(V){case "years":ma.month=1;case "quarters":case "months":ma.day=1;case "weeks":case "days":ma.hour=0;case "hours":ma.minute=
0;case "minutes":ma.second=0;case "seconds":ma.millisecond=0}"weeks"===V&&(ma.weekday=1);"quarters"===V&&(ma.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(ma)};qa.endOf=function(V){var ma;return this.isValid?this.plus((ma={},ma[V]=1,ma)).startOf(V).minus(1):this};qa.toFormat=function(V,ma){void 0===ma&&(ma={});return this.isValid?mc.create(this.loc.redefaultToEN(ma)).formatDateTimeFromString(this,V):"Invalid DateTime"};qa.toLocaleString=function(V,ma){void 0===V&&(V=Dc);void 0===ma&&(ma=
{});return this.isValid?mc.create(this.loc.clone(ma),V).formatDateTime(this):"Invalid DateTime"};qa.toLocaleParts=function(V){void 0===V&&(V={});return this.isValid?mc.create(this.loc.clone(V),V).formatDateTimeParts(this):[]};qa.toISO=function(V){var ma=void 0===V?{}:V,ua=ma.format;V=ma.suppressSeconds;V=void 0===V?!1:V;var Ia=ma.suppressMilliseconds;Ia=void 0===Ia?!1:Ia;var Qa=ma.includeOffset;Qa=void 0===Qa?!0:Qa;ma=ma.extendedZone;ma=void 0===ma?!1:ma;if(!this.isValid)return null;ua="extended"===
(void 0===ua?"extended":ua);var $a=xc(this,ua);return $a=$a+"T"+yc(this,ua,V,Ia,Qa,ma)};qa.toISODate=function(V){V=(void 0===V?{}:V).format;return this.isValid?xc(this,"extended"===(void 0===V?"extended":V)):null};qa.toISOWeekDate=function(){return ic(this,"kkkk-'W'WW-c")};qa.toISOTime=function(V){var ma=void 0===V?{}:V;V=ma.suppressMilliseconds;var ua=ma.suppressSeconds,Ia=ma.includeOffset,Qa=ma.includePrefix,$a=ma.extendedZone;ma=ma.format;return this.isValid?((void 0===Qa?0:Qa)?"T":"")+yc(this,
"extended"===(void 0===ma?"extended":ma),void 0===ua?!1:ua,void 0===V?!1:V,void 0===Ia?!0:Ia,void 0===$a?!1:$a):null};qa.toRFC2822=function(){return ic(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)};qa.toHTTP=function(){return ic(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")};qa.toSQLDate=function(){return this.isValid?xc(this,!0):null};qa.toSQLTime=function(V){var ma=void 0===V?{}:V;V=ma.includeOffset;V=void 0===V?!0:V;var ua=ma.includeZone;ua=void 0===ua?!1:ua;ma=ma.includeOffsetSpace;ma=void 0===
ma?!0:ma;var Ia="HH:mm:ss.SSS";if(ua||V)ma&&(Ia+=" "),ua?Ia+="z":V&&(Ia+="ZZ");return ic(this,Ia,!0)};qa.toSQL=function(V){void 0===V&&(V={});return this.isValid?this.toSQLDate()+" "+this.toSQLTime(V):null};qa.toString=function(){return this.isValid?this.toISO():"Invalid DateTime"};qa.valueOf=function(){return this.toMillis()};qa.toMillis=function(){return this.isValid?this.ts:NaN};qa.toSeconds=function(){return this.isValid?this.ts/1E3:NaN};qa.toUnixInteger=function(){return this.isValid?Math.floor(this.ts/
1E3):NaN};qa.toJSON=function(){return this.toISO()};qa.toBSON=function(){return this.toJSDate()};qa.toObject=function(V){void 0===V&&(V={});if(!this.isValid)return{};var ma=e({},this.c);V.includeConfig&&(ma.outputCalendar=this.outputCalendar,ma.numberingSystem=this.loc.numberingSystem,ma.locale=this.loc.locale);return ma};qa.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)};qa.diff=function(V,ma,ua){void 0===ma&&(ma="milliseconds");void 0===ua&&(ua={});if(!this.isValid||!V.isValid)return Ba.invalid("created by diffing an invalid DateTime");
ua=e({locale:this.locale,numberingSystem:this.numberingSystem},ua);var Ia=(Array.isArray(ma)?ma:[ma]).map(Ba.normalizeUnit);ma=V.valueOf()>this.valueOf();V=pa(ma?this:V,ma?V:this,Ia,ua);return ma?V.negate():V};qa.diffNow=function(V,ma){void 0===V&&(V="milliseconds");void 0===ma&&(ma={});return this.diff(ka.now(),V,ma)};qa.until=function(V){return this.isValid?Va.fromDateTimes(this,V):this};qa.hasSame=function(V,ma){if(!this.isValid)return!1;var ua=V.valueOf();V=this.setZone(V.zone,{keepLocalTime:!0});
return V.startOf(ma)<=ua&&ua<=V.endOf(ma)};qa.equals=function(V){return this.isValid&&V.isValid&&this.valueOf()===V.valueOf()&&this.zone.equals(V.zone)&&this.loc.equals(V.loc)};qa.toRelative=function(V){void 0===V&&(V={});if(!this.isValid)return null;var ma=V.base||ka.fromObject({},{zone:this.zone}),ua=V.padding?this<ma?-V.padding:V.padding:0,Ia="years months days hours minutes seconds".split(" "),Qa=V.unit;Array.isArray(V.unit)&&(Ia=V.unit,Qa=void 0);return Ic(ma,this.plus(ua),e({},V,{numeric:"always",
units:Ia,unit:Qa}))};qa.toRelativeCalendar=function(V){void 0===V&&(V={});return this.isValid?Ic(V.base||ka.fromObject({},{zone:this.zone}),this,e({},V,{numeric:"auto",units:["years","months","days"],calendary:!0})):null};ka.min=function(){for(var V=arguments.length,ma=Array(V),ua=0;ua<V;ua++)ma[ua]=arguments[ua];if(!ma.every(ka.isDateTime))throw new Pb("min requires all arguments be DateTimes");return y(ma,function(Ia){return Ia.valueOf()},Math.min)};ka.max=function(){for(var V=arguments.length,
ma=Array(V),ua=0;ua<V;ua++)ma[ua]=arguments[ua];if(!ma.every(ka.isDateTime))throw new Pb("max requires all arguments be DateTimes");return y(ma,function(Ia){return Ia.valueOf()},Math.max)};ka.fromFormatExplain=function(V,ma,ua){void 0===ua&&(ua={});var Ia=ua;ua=Ia.locale;Ia=Ia.numberingSystem;ua=Mb.fromOpts({locale:void 0===ua?null:ua,numberingSystem:void 0===Ia?null:Ia,defaultToEN:!0});return fb(ua,V,ma)};ka.fromStringExplain=function(V,ma,ua){void 0===ua&&(ua={});return ka.fromFormatExplain(V,ma,
ua)};l(ka,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",
get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:
NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?Nb(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?Nb(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?Nb(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?lb(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?
bb.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?bb.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?bb.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?bb.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}},{key:"isInLeapYear",get:function(){return S(this.year)}},{key:"daysInMonth",
get:function(){return I(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?S(this.year)?366:365:NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?J(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return Dc}},{key:"DATE_MED",get:function(){return Jb}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return na}},{key:"DATE_FULL",get:function(){return Ra}},{key:"DATE_HUGE",get:function(){return Sa}},{key:"TIME_SIMPLE",get:function(){return Ka}},{key:"TIME_WITH_SECONDS",
get:function(){return Ma}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return Xa}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return Wa}},{key:"TIME_24_SIMPLE",get:function(){return Pa}},{key:"TIME_24_WITH_SECONDS",get:function(){return Za}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return cb}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return eb}},{key:"DATETIME_SHORT",get:function(){return nb}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return db}},{key:"DATETIME_MED",get:function(){return mb}},
{key:"DATETIME_MED_WITH_SECONDS",get:function(){return gb}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return tb}},{key:"DATETIME_FULL",get:function(){return Vb}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return Ac}},{key:"DATETIME_HUGE",get:function(){return Cc}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return Bc}}]);return ka}();f.DateTime=Tb;f.Duration=Ba;f.FixedOffsetZone=ec;f.IANAZone=rc;f.Info=bb;f.Interval=Va;f.InvalidZone=Uc;f.Settings=Lb;f.SystemZone=kc;f.VERSION="3.2.1";
f.Zone=Bb;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(f,B){return function(){function l(e){void 0===e&&(e=[]);this._elements=e}l.prototype.length=function(){return this._elements.length};l.prototype.get=function(e){return this._elements[e]};l.prototype.toArray=function(){for(var e=[],c=0;c<this.length();c++)e.push(this.get(c));return e};return l}()})},"esri/arcade/languageUtils":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ./ArcadeDate ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../libs/luxon/luxon dojo/number dojo/_base/kernel ./featureset/support/shared ./ArcadeModule ./executionError".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E,C){function y(O,ya,Ha){return""===ya||null===ya||void 0===ya||ya===Ha||ya===Ha?O:O=O.split(ya).join(Ha)}function v(O){return O instanceof t.ArcadeFunction}function A(O){return O instanceof E.ArcadeModule}function G(O){return F(O)||L(O)||J(O)||H(O)||null===O||O===B.voidOperation||"number"===typeof O?!0:!1}function F(O){return"string"===typeof O||O instanceof String}function H(O){return"boolean"===typeof O}function L(O){return"number"===typeof O}
function M(O){return O instanceof Array}function Q(O){return"esri.arcade.Feature"===(null===O||void 0===O?void 0:O.arcadeDeclaredClass)?!0:!1}function S(O){return"esri.arcade.featureset.support.FeatureSet"===(null===O||void 0===O?void 0:O.declaredRootClass)}function I(O){return"esri.arcade.featureSetCollection"===(null===O||void 0===O?void 0:O.declaredRootClass)}function P(O){return O instanceof d}function J(O){return O instanceof a.ArcadeDate}function U(O){return null!=O&&"object"===typeof O}function Y(O){return O instanceof
Date}function aa(O,ya){if(!isNaN(O)){if(void 0===ya||null===ya||""===ya)return O.toString();ya=y(ya,"\u2030","");ya=y(ya,"\u00a4","");return x.format(O,{pattern:ya})}return O.toString()}function la(O,ya){return void 0===ya||null===ya||""===ya?O.toISOString(!0):O.toFormat(T(ya),{locale:z.locale,numberingSystem:"latn"})}function T(O){O=O.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");var ya="",Ha=0;for(O=O.match(/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g)||
[];Ha<O.length;Ha++){var ea=O[Ha];switch(ea){case "D":ya+="d";break;case "DD":ya+="dd";break;case "DDD":ya+="o";break;case "d":ya+="c";break;case "ddd":ya+="ccc";break;case "dddd":ya+="cccc";break;case "M":ya+="L";break;case "MM":ya+="LL";break;case "MMM":ya+="LLL";break;case "MMMM":ya+="LLLL";break;case "YY":ya+="yy";break;case "Y":case "YYYY":ya+="yyyy";break;case "Q":ya+="q";break;case "Z":ya+="ZZ";break;case "ZZ":ya+="ZZZ";break;case "S":ya+="'S'";break;case "SS":ya+="'SS'";break;case "SSS":ya+=
"u";break;case "A":case "a":ya+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":ya+=ea;break;default:ya=2<=ea.length&&"["===ea.slice(0,1)&&"]"===ea.slice(-1)?ya+("'"+ea.slice(1,-1)+"'"):ya+("'"+ea+"'")}}return ya}function N(O,ya,Ha){switch(Ha){case "\x3e":return O>ya;case "\x3c":return O<ya;case "\x3e\x3d":return O>=ya;case "\x3c\x3d":return O<=ya}return!1}function K(O,ya){if(O===ya||null===O&&ya===B.voidOperation||null===ya&&O===B.voidOperation)return!0;
if(J(O)&&J(ya))return O.equals(ya);if(O instanceof q||O instanceof m)return O.equalityTest(ya);if(O instanceof k&&ya instanceof k){var Ha=O.getCacheValue("_arcadeCacheId"),ea=ya.getCacheValue("_arcadeCacheId");if(void 0!==Ha&&null!==Ha)return Ha===ea}return U(O)&&U(ya)&&(O._arcadeCacheId===ya._arcadeCacheId&&void 0!==O._arcadeCacheId&&null!==O._arcadeCacheId||O._underlyingGraphic===ya._underlyingGraphic&&void 0!==O._underlyingGraphic&&null!==O._underlyingGraphic)?!0:!1}function W(O,ya){if(F(O))return O;
if(null===O)return"";if(L(O))return aa(O,ya);if(H(O))return O.toString();if(J(O))return la(O,ya);if(O instanceof n)return JSON.stringify(O.toJson());if(M(O)){ya=[];for(var Ha=0;Ha<O.length;Ha++)ya[Ha]=fa(O[Ha]);return"["+ya.join(",")+"]"}if(O instanceof d){ya=[];for(Ha=0;Ha<O.length();Ha++)ya[Ha]=fa(O.get(Ha));return"["+ya.join(",")+"]"}return null!==O&&"object"===typeof O&&void 0!==O.castToText?O.castToText():v(O)?"object, Function":O===B.voidOperation?"":A(O)?"object, Module":""}function da(O,ya,
Ha){void 0===Ha&&(Ha=!1);if(F(O))return O;if(null===O)return"";if(L(O))return aa(O,ya);if(H(O))return O.toString();if(J(O))return la(O,ya);if(O instanceof n)return O instanceof h?'{"xmin":'+O.xmin.toString()+',"ymin":'+O.ymin.toString()+","+(O.hasZ?'"zmin":'+O.zmin.toString()+",":"")+(O.hasM?'"mmin":'+O.mmin.toString()+",":"")+'"xmax":'+O.xmax.toString()+',"ymax":'+O.ymax.toString()+","+(O.hasZ?'"zmax":'+O.zmax.toString()+",":"")+(O.hasM?'"mmax":'+O.mmax.toString()+",":"")+'"spatialReference":'+Ga(O.spatialReference)+
"}":Ga(O.toJson(),function(Oa,Na){return Oa.key===Na.key?0:"spatialReference"===Oa.key?1:"spatialReference"===Na.key||Oa.key<Na.key?-1:Oa.key>Na.key?1:0});if(M(O)){ya=[];for(var ea=0;ea<O.length;ea++)ya[ea]=fa(O[ea],Ha);return"["+ya.join(",")+"]"}if(O instanceof d){ya=[];for(ea=0;ea<O.length();ea++)ya[ea]=fa(O.get(ea),Ha);return"["+ya.join(",")+"]"}return null!==O&&"object"===typeof O&&void 0!==O.castToText?O.castToText(Ha):v(O)?"object, Function":O===B.voidOperation?"":A(O)?"object, Module":""}function fa(O,
ya){void 0===ya&&(ya=!1);return null===O?"null":H(O)||L(O)||F(O)?JSON.stringify(O):O instanceof n||O instanceof d||O instanceof Array?da(O,null,ya):J(O)?ya?JSON.stringify(O.getTime()):JSON.stringify(la(O,"")):null!==O&&"object"===typeof O&&void 0!==O.castToText?O.castToText(ya):"null"}function ha(O,ya){return L(O)?O:null===O||""===O?0:J(O)?NaN:H(O)?O?1:0:M(O)||""===O||void 0===O?NaN:void 0!==ya&&F(O)?(ya=y(ya,"\u2030",""),ya=y(ya,"\u00a4",""),x.parse(O,{pattern:ya})):O===B.voidOperation?0:Number(O)}
function ra(O,ya){if(!O||!O.domain)return ya;var Ha=null;if("string"===O.field.type||"esriFieldTypeString"===O.field.type)ya=W(ya);else{if(null===ya||void 0===ya)return null;if(""===ya)return ya;ya=ha(ya)}for(var ea=0;ea<O.domain.codedValues.length;ea++){var Oa=O.domain.codedValues[ea];Oa.code===ya&&(Ha=Oa)}return null===Ha?ya:Ha.name}function za(O,ya){if(!O||!O.domain)return ya;var Ha=null;ya=W(ya);for(var ea=0;ea<O.domain.codedValues.length;ea++){var Oa=O.domain.codedValues[ea];Oa.name===ya&&(Ha=
Oa)}return null===Ha?ya:Ha.code}function Da(O,ya,Ha,ea){void 0===Ha&&(Ha=null);void 0===ea&&(ea=null);if(!ya||!ya.fields)return null;for(var Oa=null,Na=0;Na<ya.fields.length;Na++){var Ca=ya.fields[Na];Ca.name.toLowerCase()===O.toString().toLowerCase()&&(Oa=Ca)}if(null===Oa)throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.FieldNotFound,null,{key:O});var X,oa;null===ea&&Ha&&ya.typeIdField&&(ea=Ha.hasField(ya.typeIdField)?Ha.field(ya.typeIdField):null);null!==ea&&void 0!==ea&&ya.types.some(function(pa){return pa.id===
ea?((X=pa.domains&&pa.domains[Oa.name])&&"inherited"===X.type&&(X=va(Oa.name,ya),oa=!0),!0):!1});oa||X||(X=va(O,ya));return{field:Oa,domain:X}}function va(O,ya){var Ha;ya.fields.some(function(ea){ea.name.toLowerCase()===O.toLowerCase()&&(Ha=ea.domain);return!!Ha});return Ha}function Ga(O,ya){ya||(ya={});"function"===typeof ya&&(ya={cmp:ya});var Ha="boolean"===typeof ya.cycles?ya.cycles:!1,ea=ya.cmp&&function(Na){return function(Ca){return function(X,oa){return Na({key:X,value:Ca[X]},{key:oa,value:Ca[oa]})}}}(ya.cmp),
Oa=[];return function X(Ca){Ca&&Ca.toJson&&"function"===typeof Ca.toJson&&(Ca=Ca.toJson());if(void 0!==Ca){if("number"===typeof Ca)return isFinite(Ca)?""+Ca:"null";if("object"!==typeof Ca)return JSON.stringify(Ca);var oa;if(Array.isArray(Ca)){var pa="[";for(oa=0;oa<Ca.length;oa++)oa&&(pa+=","),pa+=X(Ca[oa])||"null";return pa+"]"}if(null===Ca)return"null";if(Oa.includes(Ca)){if(Ha)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var Z=Oa.push(Ca)-1,ja=
Object.keys(Ca).sort(ea&&ea(Ca));pa="";for(oa=0;oa<ja.length;oa++){var ta=ja[oa],xa=X(Ca[ta]);xa&&(pa&&(pa+=","),pa+=JSON.stringify(ta)+":"+xa)}Oa.splice(Z,1);return"{"+pa+"}"}}(O)}function ba(O,ya){if(ya instanceof k)O.push([ya.x,ya.y]);else throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.InvalidParameter,null);}function ia(O,ya){void 0===ya&&(ya=null);if(null!=O){if(H(O)||L(O)||F(O))return O;if(O instanceof n)return!0===(null===ya||void 0===ya?void 0:ya.keepGeometryType)?O:O.toJson();
if(O instanceof d)return O.toArray().map(function(Ha){return ia(Ha,ya)});if(O instanceof Array)return O.map(function(Ha){return ia(Ha,ya)});if(Y(O))return O;if(J(O))return O.toJSDate();if(null!==O&&"object"===typeof O&&void 0!==O.castAsJson)return O.castAsJson(ya)}return null}function wa(O,ya,Ha,ea,Oa){return l(this,void 0,void 0,function(){var Na;return e(this,function(Ca){switch(Ca.label){case 0:return[4,Aa(O,ya,Ha)];case 1:return Na=Ca.sent(),Oa[ea]=Na,[2]}})})}function Aa(O,ya,Ha){void 0===ya&&
(ya=null);void 0===Ha&&(Ha=null);return l(this,void 0,void 0,function(){var ea,Oa,Na,Ca,X;return e(this,function(oa){switch(oa.label){case 0:return O instanceof d&&(O=O.toArray()),null!=O?[3,1]:[2,null];case 1:return G(O)||O instanceof n||Y(O)||J(O)?[2,ia(O,Ha)]:[3,2];case 2:if(!(O instanceof Array))return[3,5];ea=[];Oa=[];Na=0;for(Ca=O;Na<Ca.length;Na++)X=Ca[Na],null===X||G(X)||X instanceof n||Y(X)||J(X)?Oa.push(ia(X,Ha)):(Oa.push(null),ea.push(wa(X,ya,Ha,Oa.length-1,Oa)));return 0<ea.length?[4,
Promise.all(ea)]:[3,4];case 3:oa.sent(),oa.label=4;case 4:return[2,Oa];case 5:if(null!==O&&"object"===typeof O&&void 0!==O.castAsJsonAsync)return[2,O.castAsJsonAsync(ya,Ha)];oa.label=6;case 6:return[2,null]}})})}Object.defineProperty(B,"__esModule",{value:!0});B.featureSchema=B.defaultTimeZone=B.featureDomainCodeLookup=B.featureDomainValueLookup=B.featureSubtypes=B.featureFullDomain=B.castAsJsonAsync=B.castAsJson=B.binaryOperator=B.tick=B.toStringArray=B.autoCastArrayOfPointsToMultiPoint=B.autoCastArrayOfPointsToPolyline=
B.autoCastArrayOfPointsToPolygon=B.autoCastFeatureToGeometry=B.stableStringify=B.getDomain=B.getDomainCode=B.getDomainValue=B.fixNullGeometry=B.fixSpatialReference=B.toBoolean=B.toDate=B.toNumber=B.toStringExplicit=B.toNumberArray=B.toString=B.equalityTest=B.greaterThanLessThan=B.standardiseDateFormat=B.formatDate=B.formatNumber=B.generateUUID=B.absRound=B.pcCheck=B.isJsDate=B.isObject=B.isDate=B.isImmutableArray=B.isFeatureSetCollection=B.isFeatureSet=B.isFeature=B.isArray=B.isInteger=B.isNumber=
B.isBoolean=B.isString=B.getType=B.defaultUndefined=B.isSimpleType=B.isModule=B.isFunctionParameter=B.multiReplace=B.continueResult=B.breakResult=B.voidOperation=B.ReturnResult=B.ImplicitResult=B.ImplicitResultE=B.ReturnResultE=void 0;f=function(){return function(O){this.value=O}}();B.ReturnResultE=f;c=function(){return function(O){this.value=O}}();B.ImplicitResultE=c;B.ImplicitResult=c;B.ReturnResult=f;B.voidOperation={type:"VOID"};B.breakResult={type:"BREAK"};B.continueResult={type:"CONTINUE"};
B.multiReplace=y;B.isFunctionParameter=v;B.isModule=A;B.isSimpleType=G;B.defaultUndefined=function(O,ya){return void 0===O?ya:O};B.getType=function(O){return null==O?"":M(O)||P(O)?"Array":J(O)?"Date":F(O)?"String":H(O)?"Boolean":L(O)?"Number":"esri.arcade.Attachment"===(null===O||void 0===O?void 0:O.declaredClass)?"Attachment":"esri.arcade.Portal"===(null===O||void 0===O?void 0:O.declaredClass)?"Portal":"esri.arcade.Dictionary"===(null===O||void 0===O?void 0:O.declaredClass)?"Dictionary":O instanceof
E.ArcadeModule?"Module":Q(O)?"Feature":O instanceof k?"Point":O instanceof g?"Polygon":O instanceof b?"Polyline":O instanceof r?"Multipoint":O instanceof h?"Extent":v(O)?"Function":S(O)?"FeatureSet":I(O)?"FeatureSetCollection":O===B.voidOperation?"":"number"===typeof O&&isNaN(O)?"Number":"Unrecognised Type"};B.isString=F;B.isBoolean=H;B.isNumber=L;B.isInteger=function(O){return"number"===typeof O&&isFinite(O)&&Math.floor(O)===O};B.isArray=M;B.isFeature=Q;B.isFeatureSet=S;B.isFeatureSetCollection=
I;B.isImmutableArray=P;B.isDate=J;B.isObject=U;B.isJsDate=Y;B.pcCheck=function(O,ya,Ha,ea,Oa){if(O.length<ya||O.length>Ha)throw new C.ArcadeExecutionError(ea,C.ExecutionErrorCodes.WrongNumberOfParameters,Oa);};B.absRound=function(O){return 0>O?-Math.round(-O):Math.round(O)};B.generateUUID=function(){var O=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ya){var Ha=(O+16*Math.random())%16|0;O=Math.floor(O/16);return("x"===ya?Ha:Ha&3|8).toString(16)})};B.formatNumber=
aa;B.formatDate=la;B.standardiseDateFormat=T;B.greaterThanLessThan=function(O,ya,Ha){if(null===O){if(null===ya||ya===B.voidOperation)return N(null,null,Ha);if(L(ya))return N(0,ya,Ha);if(F(ya)||H(ya))return N(0,ha(ya),Ha);if(J(ya))return N(0,ya.toNumber(),Ha)}if(O===B.voidOperation){if(null===ya||ya===B.voidOperation)return N(null,null,Ha);if(L(ya))return N(0,ya,Ha);if(F(ya)||H(ya))return N(0,ha(ya),Ha);if(J(ya))return N(0,ya.toNumber(),Ha)}else if(L(O)){if(L(ya))return N(O,ya,Ha);if(H(ya))return N(O,
ha(ya),Ha);if(null===ya||ya===B.voidOperation)return N(O,0,Ha);if(F(ya))return N(O,ha(ya),Ha);if(J(ya))return N(O,ya.toNumber(),Ha)}else if(F(O)){if(F(ya))return N(W(O),W(ya),Ha);if(J(ya))return N(ha(O),ya.toNumber(),Ha);if(L(ya))return N(ha(O),ya,Ha);if(null===ya||ya===B.voidOperation)return N(ha(O),0,Ha);if(H(ya))return N(ha(O),ha(ya),Ha)}else if(J(O)){if(J(ya))return N(O.toNumber(),ya.toNumber(),Ha);if(null===ya||ya===B.voidOperation)return N(O.toNumber(),0,Ha);if(L(ya))return N(O.toNumber(),ya,
Ha);if(H(ya)||F(ya))return N(O.toNumber(),ha(ya),Ha)}else if(H(O)){if(H(ya))return N(O,ya,Ha);if(L(ya))return N(ha(O),ha(ya),Ha);if(J(ya))return N(ha(O),ya.toNumber(),Ha);if(null===ya||ya===B.voidOperation)return N(ha(O),0,Ha);if(F(ya))return N(ha(O),ha(ya),Ha)}return!K(O,ya)||"\x3c\x3d"!==Ha&&"\x3e\x3d"!==Ha?!1:!0};B.equalityTest=K;B.toString=W;B.toNumberArray=function(O){var ya=[];if(!M(O))return null;if(O instanceof d){for(var Ha=0;Ha<O.length();Ha++)ya[Ha]=ha(O.get(Ha));return ya}for(Ha=0;Ha<
O.length;Ha++)ya[Ha]=ha(O[Ha]);return ya};B.toStringExplicit=da;B.toNumber=ha;B.toDate=function(O,ya){if(J(O))return O;if(F(O)){a:{var Ha=/ (\d\d)/,ea=a.createDateTimeZone(ya);ea=w.DateTime.fromISO(O,{zone:ea});if(ea.isValid)ya=ea;else{if(Ha.test(O)&&(O=O.replace(Ha,"T$1"),ea=w.DateTime.fromISO(O,{zone:ya}),ea.isValid)){ya=ea;break a}ya=null}}if(ya)return a.ArcadeDate.dateTimeToArcadeDate(ya)}return null};B.toBoolean=function(O){return H(O)?O:F(O)?(O=O.toLowerCase(),"true"===O?!0:!1):L(O)?0===O||
isNaN(O)?!1:!0:!1};B.fixSpatialReference=function(O,ya){if(null===O||void 0===O)return null;if(null===O.spatialReference||void 0===O.spatialReference)O.spatialReference=ya;return O};B.fixNullGeometry=function(O){if(null===O)return null;if(O instanceof k)return"NaN"===O.x||null===O.x||isNaN(O.x)?null:O;if(O instanceof g){if(0===O.rings.length)return null;for(var ya=0,Ha=O.rings;ya<Ha.length;ya++){var ea=Ha[ya];if(0<ea.length)return O}return null}if(O instanceof b){if(0===O.paths.length)return null;
ya=0;for(Ha=O.paths;ya<Ha.length;ya++)if(ea=Ha[ya],0<ea.length)return O;return null}return O instanceof r?0===O.points.length?null:O:O instanceof h?"NaN"===O.xmin||null===O.xmin||isNaN(O.xmin)?null:O:null};B.getDomainValue=ra;B.getDomainCode=za;B.getDomain=Da;B.stableStringify=Ga;B.autoCastFeatureToGeometry=function(O){if(null===O)return null;for(var ya=[],Ha=0;Ha<O.length;Ha++){var ea=O[Ha];ea&&ea.arcadeDeclaredClass&&"esri.arcade.Feature"===ea.arcadeDeclaredClass?ya.push(ea.geometry()):ya.push(ea)}return ya};
B.autoCastArrayOfPointsToPolygon=function(O,ya){if(M(O)||P(O)){var Ha=!1,ea=!1,Oa=[];if(M(O)){for(var Na=0;Na<O.length;Na++){var Ca=O[Na];ba(Oa,Ca)}0<Oa.length&&(ya=O[0].spatialReference,Ha=O[0].hasZ,ea=O[0].hasM)}else if(O instanceof m)Oa=O._elements,0<Oa.length&&(Ha=O._hasZ,ea=O._hasM,ya=O.get(0).spatialReference);else if(P(O)){Na=0;for(var X=O.toArray();Na<X.length;Na++)Ca=X[Na],ba(Oa,Ca);0<Oa.length&&(ya=O.get(0).spatialReference,Ha=!0===O.get(0).hasZ,ea=!0===O.get(0).hasM)}else throw new C.ArcadeExecutionError(null,
C.ExecutionErrorCodes.InvalidParameter,null);if(0===Oa.length)return null;(new g({rings:[],spatialReference:{wkid:4326}})).isClockwise(Oa)||(Oa=Oa.slice(0).reverse());return new g({rings:[Oa],spatialReference:ya,hasZ:Ha,hasM:ea})}return O};B.autoCastArrayOfPointsToPolyline=function(O,ya){if(M(O)||P(O)){var Ha=!1,ea=!1,Oa=[];if(M(O)){for(var Na=0;Na<O.length;Na++){var Ca=O[Na];ba(Oa,Ca)}0<Oa.length&&(ya=O[0].spatialReference,Ha=!0===O[0].hasZ,ea=!0===O[0].hasM)}else if(O instanceof m)Oa=O._elements,
0<Oa.length&&(Ha=O._hasZ,ea=O._hasM,ya=O.get(0).spatialReference);else if(P(O)){Na=0;for(var X=O.toArray();Na<X.length;Na++)Ca=X[Na],ba(Oa,Ca);0<Oa.length&&(ya=O.get(0).spatialReference,Ha=!0===O.get(0).hasZ,ea=!0===O.get(0).hasM)}return 0===Oa.length?null:new b({paths:[Oa],spatialReference:ya,hasZ:Ha,hasM:ea})}return O};B.autoCastArrayOfPointsToMultiPoint=function(O,ya){if(M(O)||P(O)){var Ha=!1,ea=!1,Oa=[];if(M(O)){for(var Na=0;Na<O.length;Na++){var Ca=O[Na];ba(Oa,Ca)}0<Oa.length&&(ya=O[0].spatialReference,
Ha=!0===O[0].hasZ,ea=!0===O[0].hasM)}else if(O instanceof m)Oa=O._elements,0<Oa.length&&(Ha=O._hasZ,ea=O._hasM,ya=O.get(0).spatialReference);else if(P(O)){Na=0;for(var X=O.toArray();Na<X.length;Na++)Ca=X[Na],ba(Oa,Ca);0<Oa.length&&(ya=O.get(0).spatialReference,Ha=!0===O.get(0).hasZ,ea=!0===O.get(0).hasM)}return 0===Oa.length?null:new r({points:Oa,spatialReference:ya,hasZ:Ha,hasM:ea})}return O};B.toStringArray=function(O,ya){void 0===ya&&(ya=!1);var Ha=[];if(null===O)return Ha;if(!0===M(O)){for(var ea=
0;ea<O.length;ea++){var Oa=W(O[ea]);""===Oa&&!0!==ya||Ha.push(Oa)}return Ha}if(O instanceof d){for(ea=0;ea<O.length();ea++)Oa=W(O.get(ea)),""===Oa&&!0!==ya||Ha.push(Oa);return Ha}return G(O)?(Oa=W(O),""===Oa&&!0!==ya||Ha.push(Oa),Ha):[]};var Fa=0;B.tick=function(O){Fa++;return 0===Fa%100?(Fa=0,new Promise(function(ya){setTimeout(function(){ya(O)},0)})):O};B.binaryOperator=function(O,ya,Ha){switch(Ha){case "\x26":return O&ya;case "|":return O|ya;case "^":return O^ya;case "\x3c\x3c":return O<<ya;case "\x3e\x3e":return O>>
ya;case "\x3e\x3e\x3e":return O>>>ya}};B.castAsJson=ia;B.castAsJsonAsync=Aa;B.featureFullDomain=function(O,ya,Ha){var ea=O.fullSchema();return null!==ea&&ea.fields?Da(ya,ea,O,Ha):null};B.featureSubtypes=function(O){O=O.fullSchema();return null!==O&&O.fields?O.typeIdField?{subtypeField:O.typeIdField,subtypes:O.types?O.types.map(function(ya){return{name:ya.name,code:ya.id}}):[]}:null:null};B.featureDomainValueLookup=function(O,ya,Ha,ea){var Oa=O.fullSchema();if(null===Oa||!Oa.fields)return null;ea=
Da(ya,Oa,O,ea);if(void 0===Ha)try{Ha=O.field(ya)}catch(Na){return null}return ra(ea,Ha)};B.featureDomainCodeLookup=function(O,ya,Ha,ea){var Oa=O.fullSchema();if(null===Oa||!Oa.fields)return null;if(void 0===Ha){try{Ha=O.field(ya)}catch(Na){return null}return Ha}O=Da(ya,Oa,O,ea);return za(O,Ha)};B.defaultTimeZone=function(O){var ya,Ha;return(null===(ya=null===O||void 0===O?void 0:O.timeReference)||void 0===ya?0:ya.timeZone)?null===(Ha=null===O||void 0===O?void 0:O.timeReference)||void 0===Ha?void 0:
Ha.timeZone:"system"};B.featureSchema=function(O){O=O.fullSchema();if(null===O||!O.fields)return null;for(var ya=[],Ha=0,ea=O.fields;Ha<ea.length;Ha++)ya.push(D.esriFieldToJson(ea[Ha]));return{objectIdField:O.objectIdField,globalIdField:O.globalIdField,geometryType:void 0===D.layerGeometryEsriRestConstants[O.geometryType]?"":D.layerGeometryEsriRestConstants[O.geometryType],fields:ya}}})},"esri/arcade/FunctionWrapper":function(){define("require exports ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./polyfill/tsSupport/extends ./polyfill/promiseUtils".split(" "),
function(f,B,l,e,c,u){function t(m,a,h){if(m instanceof d&&!(m instanceof q)){var n=new q;n.fn=m;n.parameterEvaluator=h;n.context=a;return n}return m}Object.defineProperty(B,"__esModule",{value:!0});B.ScopeMarshalledFunction=B.NativeFunction=B.wrapModuleScopedResponse=B.ArcadeFunction=void 0;var d=function(){return function(){}}();B.ArcadeFunction=d;B.wrapModuleScopedResponse=t;f=function(m){function a(h){var n=m.call(this)||this;n.fn=h;return n}c(a,m);a.prototype.createFunction=function(h){var n=
this;return function(){for(var r=[],k=0;k<arguments.length;k++)r[k]=arguments[k];return n.fn(h,{preparsed:!0,arguments:r})}};a.prototype.call=function(h,n){return this.fn(h,n)};a.prototype.marshalledCall=function(h,n,r,k){var g=this;return k(h,n,function(b,w,x){x=x.map(function(z){return z instanceof d&&!(z instanceof q)?t(z,h,k):z});b=g.call(r,{args:x});return u.isPromiseLike(b)?b.then(function(z){return t(z,r,k)}):b})};return a}(d);B.NativeFunction=f;var q=function(m){function a(){var h=null!==
m&&m.apply(this,arguments)||this;h.fn=null;h.context=null;return h}c(a,m);a.prototype.createFunction=function(h){return this.fn.createFunction(this.context)};a.prototype.call=function(h,n){return this.fn.marshalledCall(h,n,this.context,this.parameterEvaluator)};a.prototype.marshalledCall=function(h,n,r){return this.fn.marshalledCall(h,n,this.context,this.parameterEvaluator)};return a}(d);B.ScopeMarshalledFunction=q})},"esri/arcade/polyfill/promiseUtils":function(){define(["require","exports","dojo/Deferred"],
function(f,B,l){function e(u){void 0===u&&(u=void 0);var t=new l;t.resolve(u);return t.promise}function c(u){return u&&"function"===typeof u.then?u:e(u)}Object.defineProperty(B,"__esModule",{value:!0});B.create=B.when=B.resolve=B.isPromiseLike=void 0;B.isPromiseLike=function(u){return u&&"function"===typeof u.then};B.resolve=e;B.when=c;B.create=function(u,t){var d=new l(t);u(function(q){return c(q).then(d.resolve)},d.reject);return d.promise}})},"esri/arcade/ImmutablePathArray":function(){define(["require",
"exports","./polyfill/tsSupport/extends","./ImmutableArray","./ImmutablePointArray"],function(f,B,l,e,c){return function(u){function t(d,q,m,a,h){d=u.call(this,d)||this;d._lazyPath=[];d._hasZ=!1;d._hasM=!1;d._hasZ=m;d._hasM=a;d._spRef=q;d._cacheId=h;return d}l(t,u);t.prototype.get=function(d){if(void 0===this._lazyPath[d]){var q=this._elements[d];if(void 0===q)return;this._lazyPath[d]=new c(q,this._spRef,this._hasZ,this._hasM,this._cacheId,d)}return this._lazyPath[d]};t.prototype.equalityTest=function(d){return d===
this?!0:null===d||!1===d instanceof t?!1:d.getUniqueHash()===this.getUniqueHash()};t.prototype.getUniqueHash=function(){return this._cacheId.toString()};return t}(e)})},"esri/arcade/ImmutablePointArray":function(){define(["require","exports","./polyfill/tsSupport/extends","./ImmutableArray","../geometry/Point"],function(f,B,l,e,c){return function(u){function t(d,q,m,a,h,n){d=u.call(this,d)||this;d._lazyPt=[];d._hasZ=!1;d._hasM=!1;d._spRef=q;d._hasZ=m;d._hasM=a;d._cacheId=h;d._partId=n;return d}l(t,
u);t.prototype.get=function(d){if(void 0===this._lazyPt[d]){var q=this._elements[d];if(void 0===q)return;var m=this._hasZ,a=this._hasM,h=null;h=m&&!a?new c(q[0],q[1],q[2],void 0,this._spRef):a&&!m?new c(q[0],q[1],void 0,q[2],this._spRef):m&&a?new c(q[0],q[1],q[2],q[3],this._spRef):new c(q[0],q[1],this._spRef);h.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+d.toString());this._lazyPt[d]=h}return this._lazyPt[d]};t.prototype.equalityTest=function(d){return d===
this?!0:null===d||!1===d instanceof t?!1:d.getUniqueHash()===this.getUniqueHash()};t.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return t}(e)})},"esri/arcade/featureset/support/shared":function(){define("require exports ../../polyfill/tsSupport/assign ../../polyfill/tsSupport/spreadarray ../../ArcadeDate ../../../geometry/Extent ../../../layers/Field".split(" "),function(f,B,l,e,c,u,t){function d(a){var h=null;a.domain&&(h="range"===a.domain.type?
{type:"range",range:[a.domain.minValue,a.domain.maxValue]}:{type:"codedValue",codedValues:a.domain.toJson().codedValues});return l(l({name:a.name,type:a.type,alias:a.alias},void 0!==a.length?{length:a.length}:{}),{editable:!0===a.editable,nullable:!0===a.nullable,domain:h})}function q(a){return a instanceof Date}function m(a){return a instanceof c.ArcadeDate}Object.defineProperty(B,"__esModule",{value:!0});B.stableStringify=B.extractServiceUrl=B.toEsriGeometryType=B.layerFieldEsriConstants=B.layerGeometryEsriRestConstants=
B.layerGeometryEsriConstants=B.callback=B.errback=B.defaultMaxRecords=B.sameGeomType=B.convertLinearUnitsToCode=B.shapeExtent=B.convertSquareUnitsToCode=B.cloneAttributes=B.equalityTest=B.isArcadeDate=B.isDate=B.isArray=B.isNumber=B.isBoolean=B.isString=B.IdState=B.esriFieldToJson=B.cloneField=B.FeatureServiceDatabaseType=void 0;(function(a){a[a.Standardised=0]="Standardised";a[a.StandardisedNoInterval=1]="StandardisedNoInterval";a[a.SqlServer=2]="SqlServer";a[a.Oracle=3]="Oracle";a[a.Postgres=4]=
"Postgres";a[a.PGDB=5]="PGDB";a[a.FILEGDB=6]="FILEGDB";a[a.NotEvaluated=7]="NotEvaluated"})(B.FeatureServiceDatabaseType||(B.FeatureServiceDatabaseType={}));B.cloneField=function(a){return new t(d(a))};B.esriFieldToJson=d;(function(a){a[a.InFeatureSet=0]="InFeatureSet";a[a.NotInFeatureSet=1]="NotInFeatureSet";a[a.Unknown=2]="Unknown"})(B.IdState||(B.IdState={}));B.isString=function(a){return"string"===typeof a||a instanceof String};B.isBoolean=function(a){return"boolean"===typeof a};B.isNumber=function(a){return"number"===
typeof a};B.isArray=function(a){return a instanceof Array};B.isDate=q;B.isArcadeDate=m;B.equalityTest=function(a,h){return a===h?!0:(q(a)||m(a))&&(q(h)||m(h))?a.getTime()===h.getTime():!1};B.cloneAttributes=function(a){var h={},n;for(n in a)h[n]=a[n];return h};B.convertSquareUnitsToCode=function(a){if(null==a)return null;if("number"===typeof a)return a;switch(a.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109439;case "kilometers":case "kilometer":case "km":return 109414}return null};
B.shapeExtent=function(a){if(null==a)return null;switch(a.type){case "polygon":case "multipoint":case "polyline":return a.getExtent();case "point":return new u({xmin:a.x,ymin:a.y,xmax:a.x,ymax:a.y,spatialReference:a.spatialReference});case "extent":return a}return null};B.convertLinearUnitsToCode=function(a){if(null==a)return null;if("number"===typeof a||"number"===typeof a)return a;switch(a.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9093;case "kilometers":case "kilometer":case "km":return 9036}return null};
B.sameGeomType=function(a,h){return a===h||"point"===a&&"esriGeometryPoint"===h||"polyline"===a&&"esriGeometryPolyline"===h||"polygon"===a&&"esriGeometryPolygon"===h||"extent"===a&&"esriGeometryEnvelope"===h||"multipoint"===a&&"esriGeometryMultipoint"===h||"point"===h&&"esriGeometryPoint"===a||"polyline"===h&&"esriGeometryPolyline"===a||"polygon"===h&&"esriGeometryPolygon"===a||"extent"===h&&"esriGeometryEnvelope"===a||"multipoint"===h&&"esriGeometryMultipoint"===a?!0:!1};B.defaultMaxRecords=1E3;
B.errback=function(a){return function(h){a.reject(h)}};B.callback=function(a,h){return function(){try{a.apply(null,arguments)}catch(n){h.reject(n)}}};B.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};B.layerGeometryEsriRestConstants={point:"esriGeometryPoint",
polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};B.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger","long":"esriFieldTypeLong",
single:"esriFieldTypeSingle","double":"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",
esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};B.toEsriGeometryType=function(a){switch(a){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";
case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};B.extractServiceUrl=function(a){if(void 0===a)return"";a=a.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");a=a.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return a=a.split("?")[0]};B.stableStringify=function(a,h){h||(h={});"function"===typeof h&&(h={cmp:h});var n="boolean"===typeof h.cycles?h.cycles:!1,r=h.cmp&&function(g){return function(b){return function(w,x){return g({key:w,value:b[w]},{key:x,value:b[x]})}}}(h.cmp),
k=[];return function w(b){b&&b.toJson&&"function"===typeof b.toJson&&(b=b.toJson());if(void 0!==b){if("number"===typeof b)return isFinite(b)?""+b:"null";if("object"!==typeof b)return JSON.stringify(b);var x;if(Array.isArray(b)){var z="[";for(x=0;x<b.length;x++)x&&(z+=","),z+=w(b[x])||"null";return z+"]"}if(null===b)return"null";if(k.includes(b)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var D=k.push(b)-1,E=Object.keys(b).sort(r&&r(b));z=
"";for(x=0;x<E.length;x++){var C=E[x],y=w(b[C]);y&&(z&&(z+=","),z+=JSON.stringify(C)+":"+y)}k.splice(D,1);return"{"+z+"}"}}(a)}})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./RangeDomain ./CodedValueDomain".split(" "),function(f,B,l,e,c,u,t){f=f(null,{declaredClass:"esri.layers.Field",constructor:function(d){if(d&&B.isObject(d)&&(this.name=d.name,this.type=d.type,this.alias=d.alias,this.length=d.length,this.editable=d.editable,this.nullable=
d.nullable,this.defaultValue=d.defaultValue,this.description=d.description?JSON.parse(d.description):null,this.isViewOverride=!!d.isViewOverride,(d=d.domain)&&B.isObject(d)))switch(d.type){case "range":this.domain=new u(d);break;case "codedValue":this.domain=new t(d)}},toJson:function(){return c.fixJson({name:this.name,type:this.type,alias:this.alias,length:this.length,editable:this.editable,nullable:this.nullable,defaultValue:this.defaultValue,description:this.description?JSON.stringify(this.description):
null,domain:this.domain?this.domain.toJson():null,isViewOverride:this.isViewOverride||void 0})},toJSON:function(){return this.toJson()}});B.setObject("layers.Field",f,e);return f})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(f,B,l,e,c,u){f=f([u],{declaredClass:"esri.layers.RangeDomain",constructor:function(t){t&&B.isObject(t)&&(this.minValue=t.range[0],this.maxValue=t.range[1])},toJson:function(){var t=this.inherited(arguments);
t.range=[this.minValue,this.maxValue];return c.fixJson(t)}});B.setObject("layers.RangeDomain",f,e);return f})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(f,B,l,e,c){f=f(null,{declaredClass:"esri.layers.Domain",constructor:function(u){u&&B.isObject(u)&&(this.name=u.name,this.type=u.type)},toJson:function(){return c.fixJson({name:this.name,type:this.type})}});B.setObject("layers.Domain",f,e);return f})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),
function(f,B,l,e,c,u,t){f=f([t],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(d){d&&B.isObject(d)&&(this.codedValues=d.codedValues)},getName:function(d){var q;l.some(this.codedValues,function(m){m.code==d&&(q=m.name);return!!q});return q},toJson:function(){var d=this.inherited(arguments);d.codedValues=B.clone(this.codedValues);return u.fixJson(d)}});B.setObject("layers.CodedValueDomain",f,c);return f})},"esri/arcade/ArcadeModule":function(){define(["require","exports"],function(f,
B){Object.defineProperty(B,"__esModule",{value:!0});B.ArcadeModule=void 0;f=function(){return function(l){this.source=l}}();B.ArcadeModule=f})},"esri/arcade/Feature":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils ./polyfill/maybe ./ArcadeDate ./executionError".split(" "),function(f,B,
l,e,c,u,t,d,q,m,a,h,n,r,k){return function(){function g(){this.arcadeDeclaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=null;this._datesfixed=!0;this.contextTimeReference=this.dateTimeReferenceFieldIndex=null;this.immutable=!0;this._datefields=null;this.immutable=!0}g.createFromGraphic=function(b,w){var x=new g;x.contextTimeReference=null!==w&&void 0!==w?w:null;x._geometry=n.isSome(b.geometry)?b.geometry:null;x.attributes=void 0===b.attributes?{}:null===b.attributes?{}:
b.attributes;b._sourceLayer?(x._layer=b._sourceLayer,x._datesfixed=!1):b._layer?(x._layer=b._layer,x._datesfixed=!1):b.layer&&"fields"in b.layer?(x._layer=b.layer,x._datesfixed=!1):b.sourceLayer&&"fields"in b.sourceLayer&&(x._layer=b.sourceLayer,x._datesfixed=!1);return x};g.createFromArcadeFeature=function(b){var w=new g;w._datesfixed=b._datesfixed;w.attributes=b.attributes;w._geometry=b._geometry;b._layer&&(w._layer=b._layer);w.dateTimeReferenceFieldIndex=b.dateTimeReferenceFieldIndex;w.contextTimeReference=
b.contextTimeReference;return w};g.createFromArcadeDictionary=function(b){var w=new g;w.attributes=b.field("attributes");null!==w.attributes?w.attributes instanceof t?(w.attributes=w.attributes.attributes,null===w.attributes&&(w.attributes={})):w.attributes={}:w.attributes={};w._geometry=b.field("geometry");null!==w._geometry&&(w._geometry instanceof t?w._geometry=g.parseGeometryFromDictionary(w._geometry):w._geometry instanceof m||(w._geometry=null));return w};g.createFromGraphicLikeObject=function(b,
w,x,z){void 0===x&&(x=null);var D=new g;D.contextTimeReference=null!==z&&void 0!==z?z:null;null===w&&(w={});D.attributes=w;D._geometry=b?b:null;D._layer=x;D._layer&&(D._datesfixed=!1);return D};g.prototype.repurposeFromGraphicLikeObject=function(b,w,x){void 0===x&&(x=null);null===w&&(w={});this.attributes=w;this._geometry=b?b:null;this._datesfixed=(this._layer=x)?!1:!0};Object.defineProperty(g.prototype,"layerPreferredTimeZone",{get:function(){var b,w;return null!==(w=null===(b=this.dateTimeReferenceFieldIndex)||
void 0===b?void 0:b.layerPreferredTimeZone)&&void 0!==w?w:""},enumerable:!1,configurable:!0});g.prototype.fieldSourceTimeZone=function(b){var w,x;return null!==(x=null===(w=this.dateTimeReferenceFieldIndex)||void 0===w?void 0:w.fieldTimeZone(b))&&void 0!==x?x:""};g.prototype.castToText=function(b){void 0===b&&(b=!1);var w="";!1===this._datesfixed&&this._fixDates();for(var x in this.attributes){""!==w&&(w+=",");var z=this.attributes[x];null==z?w+=JSON.stringify(x)+":null":q.isBoolean(z)||q.isNumber(z)||
q.isString(z)?w+=JSON.stringify(x)+":"+JSON.stringify(z):z instanceof m?w+=JSON.stringify(x)+":"+q.toStringExplicit(z):z instanceof d?w+=JSON.stringify(x)+":"+q.toStringExplicit(z,null,b):z instanceof Array?w+=JSON.stringify(x)+":"+q.toStringExplicit(z,null,b):z instanceof r.ArcadeDate?w=b?w+(JSON.stringify(x)+":"+JSON.stringify(z.getTime())):w+(JSON.stringify(x)+":"+z.stringify()):null!==z&&"object"===typeof z&&void 0!==z.castToText&&(w+=JSON.stringify(x)+":"+z.castToText(b))}return'{"geometry":'+
(null===this.geometry()?"null":q.toStringExplicit(this.geometry()))+',"attributes":{'+w+"}}"};g.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);else{for(var b=[],w=this._layer.fields,x=0;x<w.length;x++){var z=w[x],D=z.type;"date"!==D&&"esriFieldTypeDate"!==D||b.push(z.name)}this._datefields=b;0<b.length&&this._fixDateFields(b)}this._datesfixed=!0};g.prototype.isUnknownDateTimeField=function(b){var w;return"unknown"===(null===
(w=this.dateTimeReferenceFieldIndex)||void 0===w?void 0:w.fieldTimeZone(b))};g.prototype._fixDateFields=function(b){var w,x;this.attributes=c({},this.attributes);var z=null!==(x=null===(w=this.contextTimeReference)||void 0===w?void 0:w.timeZone)&&void 0!==x?x:"system";for(w=0;w<b.length;w++)if(x=this.attributes[b[w]],null!==x)if(void 0===x)for(var D in this.attributes){if(D.toLowerCase()===b[w].toLowerCase()){x=this.attributes[D];if(null!==x){var E=this.isUnknownDateTimeField(D);q.isDate(x)?this.attributes[D]=
x:this.attributes[D]=x instanceof Date?E?r.ArcadeDate.unknownDateJSToArcadeDate(x):r.ArcadeDate.dateJSAndZoneToArcadeDate(x,z):E?r.ArcadeDate.unknownEpochToArcadeDate(x):r.ArcadeDate.epochToArcadeDate(x,z)}break}}else E=this.isUnknownDateTimeField(b[w]),q.isDate(x)?this.attributes[b[w]]=x:this.attributes[b[w]]=x instanceof Date?E?r.ArcadeDate.unknownDateJSToArcadeDate(x):r.ArcadeDate.dateJSAndZoneToArcadeDate(x,z):E?r.ArcadeDate.unknownEpochToArcadeDate(x):r.ArcadeDate.epochToArcadeDate(x,z)};g.prototype.geometry=
function(){if(null===this._geometry)return this._geometry;this._geometry instanceof m||(this._geometry=h.fromJson(this._geometry));return this._geometry};g.prototype.field=function(b){!1===this._datesfixed&&this._fixDates();var w=this.attributes[b];if(void 0!==w)return w;w=b.toLowerCase();for(var x in this.attributes)if(x.toLowerCase()===w)return this.attributes[x];if(this._hasFieldDefinition(w))return null;throw new k.ArcadeExecutionError(null,k.ExecutionErrorCodes.FieldNotFound,null,{key:b});};
g.prototype._hasFieldDefinition=function(b){if(null===this._layer)return!1;for(var w=0;w<this._layer.fields.length;w++)if(this._layer.fields[w].name.toLowerCase()===b)return!0;return!1};g.prototype.setField=function(b,w){if(this.immutable)throw new k.ArcadeExecutionError(null,k.ExecutionErrorCodes.Immutable,null);w instanceof Date&&(w=this.isUnknownDateTimeField(b)?r.ArcadeDate.unknownDateJSToArcadeDate(w):r.ArcadeDate.dateJSToArcadeDate(w));if(!1===q.isSimpleType(w))throw new k.ArcadeExecutionError(null,
k.ExecutionErrorCodes.TypeNotAllowedInFeature,null);var x=b.toLowerCase();if(void 0===this.attributes[b])for(var z in this.attributes)if(z.toLowerCase()===x){this.attributes[z]=w;return}this.attributes[b]=w};g.prototype.hasField=function(b){var w=b.toLowerCase();if(void 0!==this.attributes[b])return!0;for(var x in this.attributes)if(x.toLowerCase()===w)return!0;return this._hasFieldDefinition(w)?!0:!1};g.prototype.keys=function(){var b=[],w={},x;for(x in this.attributes)b.push(x),w[x.toLowerCase()]=
1;if(null!==this._layer)for(x=0;x<this._layer.fields.length;x++){var z=this._layer.fields[x];1!==w[z.name.toLowerCase()]&&b.push(z.name)}return b=b.sort()};g.parseGeometryFromDictionary=function(b){b=g._convertDictionaryToJson(b,!0);void 0!==b.hasm&&(b.hasM=b.hasm,delete b.hasm);void 0!==b.hasz&&(b.hasZ=b.hasz,delete b.hasz);void 0!==b.spatialreference&&(b.spatialReference=b.spatialreference,delete b.spatialreference);void 0!==b.rings&&(b.rings=this._fixPathArrays(b.rings,!0===b.hasZ,!0===b.hasZ));
void 0!==b.paths&&(b.paths=this._fixPathArrays(b.paths,!0===b.hasZ,!0===b.hasM));void 0!==b.points&&(b.points=this._fixPointArrays(b.points,!0===b.hasZ,!0===b.hasM));return h.fromJson(b)};g._fixPathArrays=function(b,w,x){var z=[];if(b instanceof Array)for(var D=0;D<b.length;D++)z.push(this._fixPointArrays(b[D],w,x));else if(b instanceof d)for(D=0;D<b.length();D++)z.push(this._fixPointArrays(b.get(D),w,x));return z};g._fixPointArrays=function(b,w,x){var z=[];if(b instanceof Array)for(var D=0;D<b.length;D++){var E=
b[D];E instanceof a?w&&x?z.push([E.x,E.y,E.z,E.m]):w?z.push([E.x,E.y,E.z]):x?z.push([E.x,E.y,E.m]):z.push([E.x,E.y]):E instanceof d?z.push(E.toArray()):z.push(E)}else if(b instanceof d)for(D=0;D<b.length();D++)E=b.get(D),E instanceof a?w&&x?z.push([E.x,E.y,E.z,E.m]):w?z.push([E.x,E.y,E.z]):x?z.push([E.x,E.y,E.m]):z.push([E.x,E.y]):E instanceof d?z.push(E.toArray()):z.push(E);return z};g._convertDictionaryToJson=function(b,w){void 0===w&&(w=!1);var x={},z;for(z in b.attributes){var D=b.attributes[z];
D instanceof t&&(D=g._convertDictionaryToJson(D));w?x[z.toLowerCase()]=D:x[z]=D}return x};g.parseAttributesFromDictionary=function(b){var w={},x;for(x in b.attributes){var z=b.attributes[x];if(q.isSimpleType(z))w[x]=z;else throw new k.ArcadeExecutionError(null,k.ExecutionErrorCodes.InvalidParameter,null);}return w};g.fromJson=function(b,w){var x=null;null!==b.geometry&&void 0!==b.geometry&&(x=h.fromJson(b.geometry));var z={};if(null!==b.attributes&&void 0!==b.attributes)for(var D in b.attributes){var E=
b.attributes[D];if(null===E)z[D]=E;else if(q.isString(E)||q.isNumber(E)||q.isBoolean(E)||q.isDate(E))z[D]=E;else throw new k.ArcadeExecutionError(null,k.ExecutionErrorCodes.InvalidParameter,null);}return g.createFromGraphicLikeObject(x,z,null,null!==w&&void 0!==w?w:null)};g.prototype.fullSchema=function(){return this._layer};g.prototype.gdbVersion=function(){if(null===this._layer)return"";var b=this._layer.gdbVersion;return void 0===b?"":""===b&&this._layer.capabilities&&this._layer.capabilities.isVersioned?
"SDE.DEFAULT":b};g.prototype.castAsJson=function(b){var w,x,z={attributes:{},geometry:!0===(null===b||void 0===b?void 0:b.keepGeometryType)?this.geometry():null!==(x=null===(w=this.geometry())||void 0===w?void 0:w.toJson())&&void 0!==x?x:null},D;for(D in this.attributes)w=this.attributes[D],void 0!==w&&(z.attributes[D]=q.castAsJson(w,b));return z};g.prototype.castAsJsonAsync=function(b,w){void 0===b&&(b=null);return l(this,void 0,void 0,function(){return e(this,function(x){return[2,this.castAsJson(w)]})})};
return g}()})},"esri/arcade/polyfill/maybe":function(){define(["require","exports"],function(f,B){function l(e,c){if(null==e)throw Error(null!==c&&void 0!==c?c:"value is None");}Object.defineProperty(B,"__esModule",{value:!0});B.unwrapOrThrow=B.assertIsSome=B.isNone=B.isSome=B.none=void 0;B.none=null;B.isSome=function(e){return null!=e};B.isNone=function(e){return null==e};B.assertIsSome=l;B.unwrapOrThrow=function(e,c){l(e,c);return e}})},"esri/arcade/treeAnalysis":function(){define(["require","exports",
"./polyfill/tsSupport/awaiter","./polyfill/tsSupport/generator"],function(f,B,l,e){function c(k){return"string"===typeof k||k instanceof String}function u(k,g){if(k)for(var b=0;b<k.length;b++)t(k[b],g)}function t(k,g){if(k&&!1!==g(k))switch(k.type){case "ImportDeclaration":u(k.specifiers,g);t(k.source,g);break;case "ExportNamedDeclaration":t(k.declaration,g);break;case "ArrayExpression":u(k.elements,g);break;case "AssignmentExpression":case "BinaryExpression":t(k.left,g);t(k.right,g);break;case "BlockStatement":u(k.body,
g);break;case "Program":u(k.body,g);break;case "CallExpression":t(k.callee,g);u(k.arguments,g);break;case "ExpressionStatement":t(k.expression,g);break;case "ForInStatement":t(k.left,g);t(k.right,g);t(k.body,g);break;case "ForStatement":t(k.init,g);t(k.test,g);t(k.update,g);t(k.body,g);break;case "WhileStatement":t(k.test,g);t(k.body,g);break;case "FunctionDeclaration":t(k.id,g);u(k.params,g);t(k.body,g);break;case "IfStatement":t(k.test,g);t(k.consequent,g);t(k.alternate,g);break;case "LogicalExpression":t(k.left,
g);t(k.right,g);break;case "MemberExpression":t(k.object,g);t(k.property,g);break;case "ObjectExpression":u(k.properties,g);break;case "Property":t(k.key,g);t(k.value,g);break;case "ReturnStatement":t(k.argument,g);break;case "UnaryExpression":t(k.argument,g);break;case "UpdateExpression":t(k.argument,g);break;case "VariableDeclaration":u(k.declarations,g);break;case "VariableDeclarator":t(k.id,g);t(k.init,g);break;case "TemplateLiteral":u(k.expressions,g),u(k.quasis,g)}}function d(k,g){var b=!1,
w=g.toLowerCase();t(k,function(x){if(b)return!1;"Identifier"===x.type&&x.name&&x.name.toLowerCase()===w&&(b=!0);return!0});return b}function q(k){var g=[];t(k,function(b){"ImportDeclaration"===b.type&&b.source&&b.source.value&&g.push({libname:b.specifiers[0].local.name.toLowerCase(),source:b.source.value});return!0});return g}function m(k){var g=[];t(k,function(b){"CallExpression"===b.type&&"Identifier"===b.callee.type&&g.push(b.callee.name.toLowerCase());return!0});return g}Object.defineProperty(B,
"__esModule",{value:!0});B.scriptUsesFeatureSet=B.findScriptDependencies=B.findFunctionCalls=B.extractFunctionDeclaration=B.findExpectedFieldLiterals=B.findFieldLiterals=B.referencesFunction=B.findModuleImports=B.referencesMember=B.walk=B.addFunctionDeclaration=B.fullArcadeApiAsync=B.fullArcadeApiSync=void 0;f={all:{min:2,max:2},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,
max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,
max:1},includes:{min:2,max:2},array:{min:1,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,
max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:2},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,
max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,
max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},
contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,
max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,max:1},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1}};B.fullArcadeApiSync={functionDefinitions:new Map,
constantDefinitions:new Map};B.fullArcadeApiAsync={functionDefinitions:new Map,constantDefinitions:new Map};l=0;for(e=["pi","infinity"];l<e.length;l++){var a=e[l];B.fullArcadeApiAsync.constantDefinitions.set(a,{type:"constant"});B.fullArcadeApiSync.constantDefinitions.set(a,{type:"constant"})}B.fullArcadeApiAsync.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},
{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"newline",type:"constant"}]});B.fullArcadeApiSync.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"newline",type:"constant"}]});for(var h in f)l=f[h],B.fullArcadeApiAsync.functionDefinitions.set(h,{overloads:[{type:"function",
parametersInfo:{min:l.min,max:l.max}}]}),B.fullArcadeApiSync.functionDefinitions.set(h,{overloads:[{type:"function",parametersInfo:{min:l.min,max:l.max}}]});var n="featureset featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl getfeatureset getuser attachments featuresetbyportalitem".split(" "),r="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length length3d lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple convexhull simplify multiparttosinglepart".split(" ");
B.addFunctionDeclaration=function(k,g){var b;g="sync"===g?B.fullArcadeApiSync:B.fullArcadeApiAsync;g.functionDefinitions.has(k.name.toLowerCase())?null===(b=g.functionDefinitions.get(k.name.toLowerCase()))||void 0===b?void 0:b.overloads.push({type:"function",parametersInfo:{min:k.min,max:k.max}}):g.functionDefinitions.set(k.name.toLowerCase(),{overloads:[{type:"function",parametersInfo:{min:k.min,max:k.max}}]})};B.walk=t;B.referencesMember=d;B.findModuleImports=q;B.referencesFunction=function(k,g){var b=
!1,w=g.toLowerCase();t(k,function(x){return b?!1:"CallExpression"===x.type&&"Identifier"===x.callee.type&&x.callee.name&&x.callee.name.toLowerCase()===w?(b=!0,!1):!0});return b};B.findFieldLiterals=function(k){var g=[];t(k,function(b){var w;if("MemberExpression"!==b.type||"Identifier"!==b.object.type)return!0;!1===b.computed&&b.object&&b.object.name&&b.property&&"Identifier"===b.property.type&&b.property.name?g.push(b.object.name.toLowerCase()+"."+b.property.name.toLowerCase()):b.object&&b.object.name&&
b.property&&"Literal"===b.property.type&&"string"===typeof b.property.value&&g.push(b.object.name.toLowerCase()+"."+(null===(w=b.property.value)||void 0===w?void 0:w.toString().toLowerCase()));return!1});return g};B.findExpectedFieldLiterals=function(k){var g=[];t(k,function(b){if("CallExpression"===b.type){if("Identifier"===b.callee.type&&"expects"===b.callee.name.toLowerCase()){var w="";for(var x=0;x<(b.arguments||[]).length;x++)0===x?"Identifier"===b.arguments[x].type&&(w=b.arguments[x].name.toLowerCase()):
w&&"Literal"===b.arguments[x].type&&c(b.arguments[x].value)&&g.push(w+"."+b.arguments[x].value.toLowerCase());return!1}if("Identifier"===b.callee.type&&["domainname","domaincode","domain","haskey"].includes(b.callee.name.toLowerCase())&&2<=b.arguments.length)return w="","Identifier"===b.arguments[0].type&&(w=b.arguments[0].name.toLowerCase()),w&&"Literal"===b.arguments[1].type&&c(b.arguments[1].value)&&g.push(w+"."+b.arguments[1].value.toLowerCase()),!1}if("MemberExpression"!==b.type||"Identifier"!==
b.object.type)return!0;!1===b.computed&&b.object&&b.object.name&&b.property&&"Identifier"===b.property.type&&b.property.name?g.push(b.object.name.toLowerCase()+"."+b.property.name.toLowerCase()):b.object&&b.object.name&&b.property&&"Literal"===b.property.type&&"string"===typeof b.property.value&&g.push(b.object.name.toLowerCase()+"."+(null===(w=b.property.value)||void 0===w?void 0:w.toString().toLowerCase()));return!1});return g};B.extractFunctionDeclaration=function(k,g){var b=[];if(void 0!==g.params&&
null!==g.params)for(var w=0;w<g.params.length;w++)b.push("any");return{name:k,return:"any",params:b}};B.findFunctionCalls=m;B.findScriptDependencies=function(k,g){void 0===g&&(g=[]);var b=null;if(void 0===k.usesFeatureSet){null===b&&(b=m(k));k.usesFeatureSet=!1;for(var w=0;w<b.length;w++)n.includes(b[w])&&(k.usesFeatureSet=!0,k.isAsync=!0);if(!1===k.usesFeatureSet&&g&&0<g.length)for(w=0;w<g.length;w++)if(d(k,g[w])){k.usesFeatureSet=!0;k.isAsync=!0;break}}void 0===k.usesModules&&(k.usesModules=!1,
0<q(k).length&&(k.usesModules=!0));if(void 0===k.usesGeometry)for(k.usesGeometry=!1,null===b&&(b=m(k)),w=0;w<b.length;w++)r.includes(b[w])&&(k.usesGeometry=!0)};B.scriptUsesFeatureSet=function(k){k=m(k);for(var g=0;g<k.length;g++)if(n.includes(k[g]))return!0;return!1}})},"esri/arcade/functions/array":function(){define("require exports ../polyfill/tsSupport/awaiter ../polyfill/tsSupport/generator ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../executionError ../ImmutableArray ../languageUtils ../polyfill/promiseUtils".split(" "),
function(f,B,l,e,c,u,t,d,q,m){Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=void 0;B.registerFunctions=function(a){function h(b,w,x){if(b instanceof d)return b.toArray();if(q.isArray(b))return b;throw new t.ArcadeExecutionError(w,t.ExecutionErrorCodes.InvalidParameter,x);}function n(b,w){var x=b.length,z=Math.floor(x/2);if(0===x)return[];if(1===x)return[b[0]];var D=n(b.slice(0,z),w);b=n(b.slice(z,x),w);for(x=[];0<D.length||0<b.length;)0<D.length&&0<b.length?(z=w(D[0],b[0]),
isNaN(z)&&(z=0),0>=z?(x.push(D[0]),D=D.slice(1)):(x.push(b[0]),b=b.slice(1))):0<D.length?(x.push(D[0]),D=D.slice(1)):0<b.length&&(x.push(b[0]),b=b.slice(1));return x}function r(b,w){return l(this,void 0,void 0,function(){var x,z,D,E;return e(this,function(C){switch(C.label){case 0:return x=b.length,z=Math.floor(x/2),0===x?[2,[]]:1===x?[2,[b[0]]]:[4,r(b.slice(0,z),w)];case 1:return E=[C.sent()],[4,r(b.slice(z,x),w)];case 2:return D=E.concat([C.sent()]),[2,k(D[0],D[1],w,[])]}})})}function k(b,w,x,z){return l(this,
void 0,void 0,function(){var D,E;return e(this,function(C){switch(C.label){case 0:return D=z,0<b.length||0<w.length?0<b.length&&0<w.length?[4,x(b[0],w[0])]:[3,2]:[3,4];case 1:return E=C.sent(),isNaN(E)&&(E=1),0>=E?(D.push(b[0]),b=b.slice(1)):(D.push(w[0]),w=w.slice(1)),[2,k(b,w,x,z)];case 2:if(0<b.length)return D.push(b[0]),b=b.slice(1),[2,k(b,w,x,z)];if(0<w.length)return D.push(w[0]),w=w.slice(1),[2,k(b,w,x,z)];C.label=3;case 3:return[3,5];case 4:return[2,z];case 5:return[2]}})})}function g(b,w,
x,z){q.pcCheck(x,1,2,b,w);var D=x[0];q.isImmutableArray(D)&&(D=D.toArray());if(!1===q.isArray(D))throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,w);if(1<x.length){if(!1===q.isFunctionParameter(x[1]))throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,w);var E=D,C=x[1].createFunction(b);return z?r(E,C):E=n(E,function(y,v){return C(y,v)})}b=D;if(0===b.length)return[];x={};for(z=0;z<b.length;z++)w=q.getType(b[z]),""!==w&&(x[w]=!0);if(!0===x.Array||!0===
x.Dictionary||!0===x.Feature||!0===x.Point||!0===x.Polygon||!0===x.Polyline||!0===x.Multipoint||!0===x.Extent||!0===x.Function)return b.slice(0);z=0;w="";for(E in x)z++,w=E;return b=1<z||"String"===w?n(b,function(y,v){if(null===y||void 0===y||y===q.voidOperation)return null===v||void 0===v||v===q.voidOperation?0:1;if(null===v||void 0===v||v===q.voidOperation)return-1;y=q.toString(y);v=q.toString(v);return y<v?-1:y===v?0:1}):"Number"===w?n(b,function(y,v){return y-v}):"Boolean"===w?n(b,function(y,
v){return y===v?0:v?-1:1}):"Date"===w?n(b,function(y,v){return v-y}):b.slice(0)}a.functions.array=function(b,w){return a.standardFunction(b,w,function(x,z,D){q.pcCheck(D,1,2,b,w);x=q.toNumber(D[0]);if(isNaN(x)||!1===q.isInteger(x))throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,w);D=q.defaultUndefined(D[1],null);x=Array(x);x.fill(D);return x})};a.functions.front=function(b,w){return a.standardFunction(b,w,function(x,z,D){q.pcCheck(D,1,1,b,w);if(q.isImmutableArray(D[0])){if(0>=
D[0].length())throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.OutOfBounds,w);return D[0].get(0)}if(q.isArray(D[0])){if(0>=D[0].length)throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.OutOfBounds,w);return D[0][0]}throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,w);})};a.functions.back=function(b,w){return a.standardFunction(b,w,function(x,z,D){q.pcCheck(D,1,1,b,w);if(q.isImmutableArray(D[0])){if(0>=D[0].length())throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.OutOfBounds,
w);return D[0].get(D[0].length()-1)}if(q.isArray(D[0])){if(0>=D[0].length)throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.OutOfBounds,w);return D[0][D[0].length-1]}throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,w);})};a.functions.push=function(b,w){return a.standardFunction(b,w,function(x,z,D){q.pcCheck(D,1,2,b,w);if(q.isArray(D[0]))return D[0][D[0].length]=D[1],D[0].length;throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,w);})};a.functions.pop=
function(b,w){return a.standardFunction(b,w,function(x,z,D){q.pcCheck(D,1,1,b,w);if(q.isArray(D[0])){if(0>=D[0].length)throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.OutOfBounds,w);x=D[0][D[0].length-1];--D[0].length;return x}throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,w);})};a.functions.erase=function(b,w){return a.standardFunction(b,w,function(x,z,D){q.pcCheck(D,2,2,b,w);if(q.isArray(D[0])){x=q.toNumber(D[1]);if(isNaN(x)||!1===q.isInteger(x))throw new t.ArcadeExecutionError(b,
t.ExecutionErrorCodes.InvalidParameter,w);D=D[0];if(0>=D.length)throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.OutOfBounds,w);0>x&&(x=D.length+x);if(0>x)throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.OutOfBounds,w);if(x>=D.length)throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.OutOfBounds,w);D.splice(x,1);return q.voidOperation}throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,w);})};a.functions.insert=function(b,w){return a.standardFunction(b,
w,function(x,z,D){q.pcCheck(D,3,3,b,w);if(q.isArray(D[0])){x=q.toNumber(D[1]);if(isNaN(x)||!1===q.isInteger(x))throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,w);z=D[2];D=D[0];if(x>D.length)throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.OutOfBounds,w);if(0>x&&x<-1*D.length)throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.OutOfBounds,w);if(x===D.length)return D[x]=z,q.voidOperation;D.splice(x,0,z);return q.voidOperation}throw new t.ArcadeExecutionError(b,
t.ExecutionErrorCodes.InvalidParameter,w);})};a.functions.resize=function(b,w){return a.standardFunction(b,w,function(x,z,D){q.pcCheck(D,2,3,b,w);if(q.isArray(D[0])){z=q.toNumber(D[1]);if(isNaN(z)||!1===q.isInteger(z))throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,w);if(0>z)throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,w);x=q.defaultUndefined(D[2],null);D=D[0];if(D.length>=z)return D.length=z,q.voidOperation;var E=D.length;D.length=z;for(z=E;z<
D.length;z++)D[z]=x;return q.voidOperation}throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,w);})};a.functions.includes=function(b,w){return a.standardFunction(b,w,function(x,z,D){q.pcCheck(D,2,2,b,w);if(q.isArray(D[0])){var E=D[1];x=D[0];return-1<x.findIndex(function(y){return q.equalityTest(y,E)})?!0:!1}if(q.isImmutableArray(D[0])){var C=D[1];x=D[0].toArray();return-1<x.findIndex(function(y){return q.equalityTest(y,C)})?!0:!1}throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,
w);})};a.functions.slice=function(b,w){return a.standardFunction(b,w,function(x,z,D){q.pcCheck(D,1,3,b,w);if(q.isArray(D[0])){x=q.toNumber(q.defaultUndefined(D[1],0));z=q.toNumber(q.defaultUndefined(D[2],D[0].length));if(isNaN(x)||!1===q.isInteger(x))throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,w);if(isNaN(z)||!1===q.isInteger(z))throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,w);var E=D[0];return E.slice(x,z)}if(q.isImmutableArray(D[0])){E=D[0];
x=q.toNumber(q.defaultUndefined(D[1],0));z=q.toNumber(q.defaultUndefined(D[2],E.length()));if(isNaN(x)||!1===q.isInteger(x))throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,w);if(isNaN(z)||!1===q.isInteger(z))throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,w);return E.toArray().slice(x,z)}throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,w);})};a.functions.splice=function(b,w){return a.standardFunction(b,w,function(x,z,D){x=
[];for(z=0;z<D.length;z++)q.isArray(D[z])?x.push.apply(x,D[z]):q.isImmutableArray(D[z])?x.push.apply(x,D[z].toArray()):x.push(D[z]);return x})};a.functions.top=function(b,w){return a.standardFunction(b,w,function(x,z,D){q.pcCheck(D,2,2,b,w);if(q.isArray(D[0]))return q.toNumber(D[1])>=D[0].length?D[0].slice(0):D[0].slice(0,q.toNumber(D[1]));if(q.isImmutableArray(D[0]))return q.toNumber(D[1])>=D[0].length()?D[0].slice(0):D[0].slice(0,q.toNumber(D[1]));throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,
w);})};a.functions.first=function(b,w){return a.standardFunction(b,w,function(x,z,D){q.pcCheck(D,1,1,b,w);return q.isArray(D[0])?0===D[0].length?null:D[0][0]:q.isImmutableArray(D[0])?0===D[0].length()?null:D[0].get(0):null})};"sync"===a.mode&&(a.functions.sort=function(b,w){return a.standardFunction(b,w,function(x,z,D){return g(b,w,D,!1)})},a.functions.any=function(b,w){return a.standardFunction(b,w,function(x,z,D){q.pcCheck(D,2,2,b,w);x=D[1].createFunction(b);z=0;for(D=h(D[0],b,w);z<D.length;z++){var E=
x(D[z]);if(q.isBoolean(E)&&!0===E)return!0}return!1})},a.functions.all=function(b,w){return a.standardFunction(b,w,function(x,z,D){q.pcCheck(D,2,2,b,w);x=D[1].createFunction(b);z=0;for(D=h(D[0],b,w);z<D.length;z++)if(!0!==x(D[z]))return!1;return!0})},a.functions.none=function(b,w){return a.standardFunction(b,w,function(x,z,D){q.pcCheck(D,2,2,b,w);x=D[1].createFunction(b);z=0;for(D=h(D[0],b,w);z<D.length;z++)if(!0===x(D[z]))return!1;return!0})},a.functions.reduce=function(b,w){return a.standardFunction(b,
w,function(x,z,D){q.pcCheck(D,2,3,b,w);var E=D[1].createFunction(b);x=h(D[0],b,w);return 2===D.length?0===x.length?null:x.reduce(function(C,y){C=E(C,y);return C=void 0!==C&&C!==q.voidOperation?C:null}):x.reduce(function(C,y){C=E(C,y);return C=void 0!==C&&C!==q.voidOperation?C:null},D[2])})},a.functions.map=function(b,w){return a.standardFunction(b,w,function(x,z,D){q.pcCheck(D,2,2,b,w);x=D[1].createFunction(b);z=[];var E=0;for(D=h(D[0],b,w);E<D.length;E++){var C=x(D[E]);void 0!==C&&C!==q.voidOperation?
z.push(C):z.push(null)}return z})},a.functions.filter=function(b,w){return a.standardFunction(b,w,function(x,z,D){q.pcCheck(D,2,2,b,w);x=D[1].createFunction(b);z=[];var E=0;for(D=h(D[0],b,w);E<D.length;E++){var C=D[E];!0===x(C)&&z.push(C)}return z})});"async"===a.mode&&(a.functions.sort=function(b,w){return a.standardFunctionAsync(b,w,function(x,z,D){return g(b,w,D,!0)})},a.functions.any=function(b,w){var x=this;return a.standardFunctionAsync(b,w,function(z,D,E){return l(x,void 0,void 0,function(){var C,
y,v,A,G,F,H;return e(this,function(L){switch(L.label){case 0:q.pcCheck(E,2,2,b,w),C=E[1].createFunction(b),y=h(E[0],b,w),v=0,A=y,L.label=1;case 1:if(!(v<A.length))return[3,7];G=A[v];return[4,C(G)];case 2:return F=L.sent(),H=null,m.isPromiseLike(H)?[4,F]:[3,4];case 3:return H=L.sent(),[3,5];case 4:H=F,L.label=5;case 5:if(q.isBoolean(H)&&!0===H)return[2,!0];L.label=6;case 6:return v++,[3,1];case 7:return[2,!1]}})})})},a.functions.all=function(b,w){var x=this;return a.standardFunctionAsync(b,w,function(z,
D,E){return l(x,void 0,void 0,function(){var C,y,v,A,G,F,H;return e(this,function(L){switch(L.label){case 0:q.pcCheck(E,2,2,b,w),C=E[1].createFunction(b),y=h(E[0],b,w),v=0,A=y,L.label=1;case 1:if(!(v<A.length))return[3,7];G=A[v];return[4,C(G)];case 2:return F=L.sent(),H=null,m.isPromiseLike(H)?[4,F]:[3,4];case 3:return H=L.sent(),[3,5];case 4:H=F,L.label=5;case 5:if(!0!==H)return[2,!1];L.label=6;case 6:return v++,[3,1];case 7:return[2,!0]}})})})},a.functions.none=function(b,w){var x=this;return a.standardFunctionAsync(b,
w,function(z,D,E){return l(x,void 0,void 0,function(){var C,y,v,A,G,F,H;return e(this,function(L){switch(L.label){case 0:q.pcCheck(E,2,2,b,w),C=E[1].createFunction(b),y=h(E[0],b,w),v=0,A=y,L.label=1;case 1:if(!(v<A.length))return[3,7];G=A[v];return[4,C(G)];case 2:return F=L.sent(),H=null,m.isPromiseLike(H)?[4,F]:[3,4];case 3:return H=L.sent(),[3,5];case 4:H=F,L.label=5;case 5:if(!0===H)return[2,!1];L.label=6;case 6:return v++,[3,1];case 7:return[2,!0]}})})})},a.functions.filter=function(b,w){var x=
this;return a.standardFunctionAsync(b,w,function(z,D,E){return l(x,void 0,void 0,function(){var C,y,v,A,G,F,H,L;return e(this,function(M){switch(M.label){case 0:q.pcCheck(E,2,2,b,w),C=E[1].createFunction(b),y=h(E[0],b,w),v=[],A=0,G=y,M.label=1;case 1:if(!(A<G.length))return[3,7];F=G[A];return[4,C(F)];case 2:return H=M.sent(),L=null,m.isPromiseLike(L)?[4,H]:[3,4];case 3:return L=M.sent(),[3,5];case 4:L=H,M.label=5;case 5:!0===L&&v.push(F),M.label=6;case 6:return A++,[3,1];case 7:return[2,v]}})})})},
a.functions.reduce=function(b,w){var x=this;return a.standardFunctionAsync(b,w,function(z,D,E){q.pcCheck(E,2,3,b,w);var C=E[1].createFunction(b);z=h(E[0],b,w);D=null;if(2<E.length)E=q.defaultUndefined(E[2],null),D=z.reduce(function(y,v){return l(x,void 0,void 0,function(){var A;return e(this,function(G){switch(G.label){case 0:return[4,y];case 1:A=G.sent();if(void 0===A||A===q.voidOperation)A=null;return[2,C(A,v)]}})})},Promise.resolve(E));else{if(0===z.length)return null;D=z.reduce(function(y,v,A){return l(x,
void 0,void 0,function(){var G;return e(this,function(F){switch(F.label){case 0:return 1>=A?[2,C(y,v)]:[4,y];case 1:G=F.sent();if(void 0===G||G===q.voidOperation)G=null;return[2,C(G,v)]}})})})}return D.then(function(y){return void 0!==y&&y!==q.voidOperation?y:null})})},a.functions.map=function(b,w){var x=this;return a.standardFunctionAsync(b,w,function(z,D,E){return l(x,void 0,void 0,function(){var C,y,v,A,G,F,H,L;return e(this,function(M){switch(M.label){case 0:q.pcCheck(E,2,2,b,w),C=E[1].createFunction(b),
y=h(E[0],b,w),v=[],A=0,G=y,M.label=1;case 1:if(!(A<G.length))return[3,7];F=G[A];return[4,C(F)];case 2:return H=M.sent(),L=null,m.isPromiseLike(L)?[4,H]:[3,4];case 3:return L=M.sent(),[3,5];case 4:L=H,M.label=5;case 5:void 0!==L&&L!==q.voidOperation?v.push(L):v.push(null),M.label=6;case 6:return A++,[3,1];case 7:return[2,v]}})})})})}})},"esri/arcade/functions/date":function(){define("require exports ../ArcadeDate ../languageUtils ../executionError ../../libs/luxon/luxon dojo/_base/kernel".split(" "),
function(f,B,l,e,c,u,t){function d(h){return null===h?h:!1===h.isValid?null:h}function q(h,n){return""===h||"default"===h.toLowerCase().trim()?e.defaultTimeZone(n):h}Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=void 0;var m=[0,31,59,90,120,151,181,212,243,273,304,334],a=[0,31,60,91,121,152,182,213,244,274,305,335];B.registerFunctions=function(h,n){h.today=function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,0,0,r,k);g=new Date;g.setHours(0,0,0,0);return l.ArcadeDate.dateJSAndZoneToArcadeDate(g,
e.defaultTimeZone(r))})};h.changetimezone=function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,2,2,r,k);g=e.toDate(w[0],e.defaultTimeZone(r));if(null===g)return null;w=l.ArcadeDate.arcadeDateAndZoneToArcadeDate(g,q(e.toString(w[1]),r));return!1===w.isValid?null:w})};h.timezone=function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,1,2,r,k);g=e.toDate(w[0],e.defaultTimeZone(r));if(null===g)return null;g=g.timeZone;return"system"===g?l.ArcadeDate.systemTimeZoneCanonicalName:g})};h.timezoneoffset=
function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,1,1,r,k);g=e.toDate(w[0],e.defaultTimeZone(r));return null===g?null:g.timeZoneOffset})};h.now=function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,0,0,r,k);g=l.ArcadeDate.nowToArcadeDate(e.defaultTimeZone(r));return!1===g.isValid?null:g})};h.timestamp=function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,0,0,r,k);g=l.ArcadeDate.nowUTCToArcadeDate();return!1===g.isValid?null:g})};h.toutc=function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,
1,1,r,k);g=e.toDate(w[0],e.defaultTimeZone(r));return null===g?null:g.toUTC()})};h.tolocal=function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,1,1,r,k);g=e.toDate(w[0],e.defaultTimeZone(r));return null===g?null:g.toLocal()})};h.day=function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,1,1,r,k);g=e.toDate(w[0],e.defaultTimeZone(r));return null===g?NaN:g.day})};h.month=function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,1,1,r,k);g=e.toDate(w[0],e.defaultTimeZone(r));return null===g?NaN:g.monthJS})};
h.year=function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,1,1,r,k);g=e.toDate(w[0],e.defaultTimeZone(r));return null===g?NaN:g.year})};h.hour=function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,1,1,r,k);g=e.toDate(w[0],e.defaultTimeZone(r));return null===g?NaN:g.hour})};h.second=function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,1,1,r,k);g=e.toDate(w[0],e.defaultTimeZone(r));return null===g?NaN:g.second})};h.millisecond=function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,1,1,r,k);g=
e.toDate(w[0],e.defaultTimeZone(r));return null===g?NaN:g.millisecond})};h.minute=function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,1,1,r,k);g=e.toDate(w[0],e.defaultTimeZone(r));return null===g?NaN:g.minute})};h.week=function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,1,2,r,k);b=e.toDate(w[0],e.defaultTimeZone(r));if(null===b)return NaN;w=e.toNumber(e.defaultUndefined(w[1],0));if(0>w||6<w)throw new c.ArcadeExecutionError(r,c.ExecutionErrorCodes.InvalidParameter,k);g=b.dayOfWeekJS;var x=b.year;
b=b.day+(0!==x%4||0===x%100&&0!==x%400?m:a)[b.monthJS]-1;x=Math.floor(b/7);return g-w+(0>g-w?7:0)<b-7*x?x+1:x})};h.weekday=function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,1,1,r,k);g=e.toDate(w[0],e.defaultTimeZone(r));return null===g?NaN:g.dayOfWeekJS})};h.isoweekday=function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,1,1,r,k);g=e.toDate(w[0],e.defaultTimeZone(r));return null===g?NaN:g.dayOfWeekISO})};h.isomonth=function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,1,1,r,k);g=e.toDate(w[0],
e.defaultTimeZone(r));return null===g?NaN:g.monthISO})};h.isoweek=function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,1,1,r,k);g=e.toDate(w[0],e.defaultTimeZone(r));return null===g?NaN:g.weekISO})};h.isoyear=function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,1,1,r,k);g=e.toDate(w[0],e.defaultTimeZone(r));return null===g?NaN:g.yearISO})};h.date=function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,0,8,r,k);if(3===w.length)return d(l.ArcadeDate.fromParts(e.toNumber(w[0]),e.toNumber(w[1])+1,
e.toNumber(w[2]),0,0,0,0,e.defaultTimeZone(r)));if(4===w.length)return d(l.ArcadeDate.fromParts(e.toNumber(w[0]),e.toNumber(w[1])+1,e.toNumber(w[2]),e.toNumber(w[3]),0,0,0,e.defaultTimeZone(r)));if(5===w.length)return d(l.ArcadeDate.fromParts(e.toNumber(w[0]),e.toNumber(w[1])+1,e.toNumber(w[2]),e.toNumber(w[3]),e.toNumber(w[4]),0,0,e.defaultTimeZone(r)));if(6===w.length)return d(l.ArcadeDate.fromParts(e.toNumber(w[0]),e.toNumber(w[1])+1,e.toNumber(w[2]),e.toNumber(w[3]),e.toNumber(w[4]),e.toNumber(w[5]),
0,e.defaultTimeZone(r)));if(7===w.length)return d(l.ArcadeDate.fromParts(e.toNumber(w[0]),e.toNumber(w[1])+1,e.toNumber(w[2]),e.toNumber(w[3]),e.toNumber(w[4]),e.toNumber(w[5]),e.toNumber(w[6]),e.defaultTimeZone(r)));if(8===w.length)return d(l.ArcadeDate.fromParts(e.toNumber(w[0]),e.toNumber(w[1])+1,e.toNumber(w[2]),e.toNumber(w[3]),e.toNumber(w[4]),e.toNumber(w[5]),e.toNumber(w[6]),q(e.toString(w[7]),r)));if(2===w.length){g=e.toString(w[1]);if(""===g)return null;g=e.standardiseDateFormat(g);b=void 0;
b="X"===g?u.DateTime.fromSeconds(e.toNumber(w[0])):"x"===g?u.DateTime.fromMillis(e.toNumber(w[0])):u.DateTime.fromFormat(e.toString(w[0]),g,{locale:t.locale,numberingSystem:"latn"});return b.isValid?l.ArcadeDate.dateTimeToArcadeDate(b):null}if(1===w.length){if(e.isString(w[0])){if(""===w[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(w[0]))return e.toDate(w[0]+"-01-01",e.defaultTimeZone(r))}g=e.toNumber(w[0]);return!1===isNaN(g)?(b=u.DateTime.fromMillis(g),
b.isValid?l.ArcadeDate.dateTimeAndZoneToArcadeDate(b,e.defaultTimeZone(r)):null):e.toDate(w[0],e.defaultTimeZone(r))}return 0===w.length?l.ArcadeDate.nowToArcadeDate(e.defaultTimeZone(r)):null})};h.datediff=function(r,k){return n(r,k,function(g,b,w){e.pcCheck(w,2,4,r,k);g=e.toDate(w[0],e.defaultTimeZone(r));b=e.toDate(w[1],e.defaultTimeZone(r));if(null===g||null===b)return NaN;var x=e.defaultUndefined(w[3],"");""!==x&&null!==x?(x=e.toString(x),g=l.ArcadeDate.arcadeDateAndZoneToArcadeDate(g,x),b=l.ArcadeDate.arcadeDateAndZoneToArcadeDate(b,
x)):g.timeZone!==b.timeZone&&(g.isUnknownTimeZone?g=l.ArcadeDate.arcadeDateAndZoneToArcadeDate(g,b.timeZone):b=l.ArcadeDate.arcadeDateAndZoneToArcadeDate(b,g.timeZone));switch(e.toString(w[2]).toLowerCase()){case "days":case "day":case "d":return g.diff(b,"days");case "months":case "month":return g.diff(b,"months");case "minutes":case "minute":case "m":return"M"===w[2]?g.diff(b,"months"):g.diff(b,"minutes");case "seconds":case "second":case "s":return g.diff(b,"seconds");case "milliseconds":case "millisecond":case "ms":return g.diff(b);
case "hours":case "hour":case "h":return g.diff(b,"hours");case "years":case "year":case "y":return g.diff(b,"years");default:return g.diff(b)}})};h.dateadd=function(r,k){return n(r,k,function(g,b,w){var x;e.pcCheck(w,2,3,r,k);g=e.toDate(w[0],e.defaultTimeZone(r));if(null===g)return null;b=e.toNumber(w[1]);if(isNaN(b))return g;var z="milliseconds";switch(e.toString(w[2]).toLowerCase()){case "days":case "day":case "d":z="days";b=e.absRound(b);break;case "months":case "month":z="months";b=e.absRound(b);
break;case "minutes":case "minute":case "m":z="M"===w[2]?"months":"minutes";break;case "seconds":case "second":case "s":z="seconds";break;case "milliseconds":case "millisecond":case "ms":z="milliseconds";break;case "hours":case "hour":case "h":z="hours";break;case "years":case "year":case "y":z="years"}return g.plus((x={},x[z]=b,x))})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils ../executionError ../ImmutablePathArray".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w){function x(E){return E&&"esri.arcade.Feature"===E.arcadeDeclaredClass}function z(E,C,y,v,A){void 0===A&&(A=1);C=C.toLowerCase();switch(C){case "hasz":return E=E.hasZ,void 0===E?!1:E;case "hasm":return E=E.hasM,void 0===E?!1:E;case "spatialreference":return C=E.spatialReference._arcadeCacheId,void 0===C&&(y=!0,Object.freeze&&Object.isFrozen(E.spatialReference)&&(y=!1),y&&(D++,C=E.spatialReference._arcadeCacheId=D)),E=new c({wkt:E.spatialReference.wkt,wkid:E.spatialReference.wkid}),
void 0!==C&&(E._arcadeCacheId="SPREF"+C.toString()),E}switch(E.type){case "extent":switch(C){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return E=E[C],void 0!==E?E:null;case "type":return"Extent"}break;case "polygon":switch(C){case "rings":return C=E.getCacheValue("_arcadeCacheId"),void 0===C&&(D++,C=D,E.setCacheValue("_arcadeCacheId",C)),E=new w(E.rings,E.spatialReference,!0===E.hasZ,!0===E.hasM,C);case "type":return"Polygon"}break;case "point":switch(C){case "x":case "y":case "z":case "m":return void 0!==
E[C]?E[C]:null;case "type":return"Point"}break;case "polyline":switch(C){case "paths":return C=E.getCacheValue("_arcadeCacheId"),void 0===C&&(D++,C=D,E.setCacheValue("_arcadeCacheId",C)),E=new w(E.paths,E.spatialReference,!0===E.hasZ,!0===E.hasM,C);case "type":return"Polyline"}break;case "multipoint":switch(C){case "points":return C=E.getCacheValue("_arcadeCacheId"),void 0===C&&(D++,C=D,E.setCacheValue("_arcadeCacheId",C)),E=new t(E.points,E.spatialReference,!0===E.hasZ,!0===E.hasM,C,1);case "type":return"Multipoint"}}if(1===
A)throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidIdentifier,v);return 2===A?{keystate:"notfound"}:null}Object.defineProperty(B,"__esModule",{value:!0});B.geometryMember=B.registerFunctions=void 0;B.registerFunctions=function(E,C){E.ringisclockwise=function(y,v){return C(y,v,function(A,G,F){d.pcCheck(F,1,1,y,v);A=[];if(null===F[0])return!1;if(d.isArray(F[0])){var H=0;for(F=F[0];H<F.length;H++)if(G=F[H],G instanceof h)A.push([G.x,G.y]);else throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,
v);}else if(F[0]instanceof t)A=F[0]._elements;else if(d.isImmutableArray(F[0])){H=0;for(var L=F[0].toArray();H<L.length;H++)if(G=L[H],G instanceof h)A.push([G.x,G.y]);else throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,v);0<A.length&&(F[0].get(0),F[0].get(0))}else throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,v);return 3>A.length?!1:(new n({rings:[],spatialReference:{wkid:4326}})).isClockwise(A)})};E.polygon=function(y,v){return C(y,v,function(A,
G,F){d.pcCheck(F,1,1,y,v);A=null;if(F[0]instanceof c){if(A=d.fixSpatialReference(u.parseGeometryFromDictionary(F[0]),y.spatialReference),!1===A instanceof n)throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,v);}else A=F[0]instanceof n?g.fromJson(F[0].toJson()):d.fixSpatialReference(new n(JSON.parse(F[0])),y.spatialReference);if(null!==A&&!1===A.spatialReference.equals(y.spatialReference))throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.WrongSpatialReference,v);return d.fixNullGeometry(A)})};
E.polyline=function(y,v){return C(y,v,function(A,G,F){d.pcCheck(F,1,1,y,v);A=null;if(F[0]instanceof c){if(A=d.fixSpatialReference(u.parseGeometryFromDictionary(F[0]),y.spatialReference),!1===A instanceof r)throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,v);}else A=F[0]instanceof r?g.fromJson(F[0].toJson()):d.fixSpatialReference(new r(JSON.parse(F[0])),y.spatialReference);if(null!==A&&!1===A.spatialReference.equals(y.spatialReference))throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.WrongSpatialReference,
v);return d.fixNullGeometry(A)})};E.point=function(y,v){return C(y,v,function(A,G,F){d.pcCheck(F,1,1,y,v);A=null;if(F[0]instanceof c){if(A=d.fixSpatialReference(u.parseGeometryFromDictionary(F[0]),y.spatialReference),!1===A instanceof h)throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,v);}else A=F[0]instanceof h?g.fromJson(F[0].toJson()):d.fixSpatialReference(new h(JSON.parse(F[0])),y.spatialReference);if(null!==A&&!1===A.spatialReference.equals(y.spatialReference))throw new b.ArcadeExecutionError(y,
b.ExecutionErrorCodes.WrongSpatialReference,v);return d.fixNullGeometry(A)})};E.multipoint=function(y,v){return C(y,v,function(A,G,F){d.pcCheck(F,1,1,y,v);A=null;if(F[0]instanceof c){if(A=d.fixSpatialReference(u.parseGeometryFromDictionary(F[0]),y.spatialReference),!1===A instanceof a)throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,v);}else A=F[0]instanceof a?g.fromJson(F[0].toJson()):d.fixSpatialReference(new a(JSON.parse(F[0])),y.spatialReference);if(null!==A&&!1===A.spatialReference.equals(y.spatialReference))throw new b.ArcadeExecutionError(y,
b.ExecutionErrorCodes.WrongSpatialReference,v);return d.fixNullGeometry(A)})};E.extent=function(y,v){return C(y,v,function(A,G,F){F=d.autoCastFeatureToGeometry(F);d.pcCheck(F,1,1,y,v);A=null;F[0]instanceof c?A=d.fixSpatialReference(u.parseGeometryFromDictionary(F[0]),y.spatialReference):F[0]instanceof h?(A={xmin:F[0].x,ymin:F[0].y,xmax:F[0].x,ymax:F[0].y,spatialReference:F[0].spatialReference.toJson()},F=F[0],F.hasZ?(A.zmin=F.z,A.zmax=F.z):F.hasM&&(A.mmin=F.m,A.mmax=F.m),A=g.fromJson(A)):A=F[0]instanceof
n?g.fromJson(F[0].getExtent().toJson()):F[0]instanceof r?g.fromJson(F[0].getExtent().toJson()):F[0]instanceof a?g.fromJson(F[0].getExtent().toJson()):F[0]instanceof q?g.fromJson(F[0].toJson()):d.fixSpatialReference(new q(JSON.parse(F[0])),y.spatialReference);if(null!==A&&!1===A.spatialReference.equals(y.spatialReference))throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.WrongSpatialReference,v);return d.fixNullGeometry(A)})};E.geometry=function(y,v){return C(y,v,function(A,G,F){d.pcCheck(F,
1,1,y,v);A=null;if(null===F[0])return null;A=x(F[0])?d.fixSpatialReference(F[0].geometry(),y.spatialReference):F[0]instanceof c?d.fixSpatialReference(u.parseGeometryFromDictionary(F[0]),y.spatialReference):d.fixSpatialReference(g.fromJson(JSON.parse(F[0])),y.spatialReference);if(null!==A&&!1===A.spatialReference.equals(y.spatialReference))throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.WrongSpatialReference,v);return d.fixNullGeometry(A)})};E.setgeometry=function(y,v){return C(y,v,function(A,
G,F){d.pcCheck(F,2,2,y,v);if(x(F[0])){if(!0===F[0].immutable)throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.Immutable,v);if(F[1]instanceof m||null===F[1])F[0]._geometry=F[1];else throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,v);}else throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,v);return d.voidOperation})};E.feature=function(y,v){return C(y,v,function(A,G,F){if(0===F.length)throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.WrongNumberOfParameters,
v);A=null;if(1===F.length)if(d.isString(F[0]))A=u.fromJson(JSON.parse(F[0]),y.timeReference);else if(x(F[0]))A=u.createFromArcadeFeature(F[0]);else if(F[0]instanceof m)A=u.createFromGraphicLikeObject(F[0],null,null,y.timeReference);else if(F[0]instanceof c)A=F[0].hasField("geometry")?F[0].field("geometry"):null,G=F[0].hasField("attributes")?F[0].field("attributes"):null,null!==A&&A instanceof c&&(A=u.parseGeometryFromDictionary(A)),null!==G&&(G=u.parseAttributesFromDictionary(G)),A=u.createFromGraphicLikeObject(A,
G,null,y.timeReference);else throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,v);else{if(2===F.length){G=A=null;if(null!==F[0])if(F[0]instanceof m)A=F[0];else if(A instanceof c)A=u.parseGeometryFromDictionary(F[0]);else throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,v);if(null!==F[1])if(F[1]instanceof c)G=u.parseAttributesFromDictionary(F[1]);else throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,v);}else{A=null;G={};if(null!==
F[0])if(F[0]instanceof m)A=F[0];else if(A instanceof c)A=u.parseGeometryFromDictionary(F[0]);else throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,v);for(var H=1;H<F.length;H+=2){var L=d.toString(F[H]),M=F[H+1];if(null===M||void 0===M||d.isString(M)||isNaN(M)||d.isDate(M)||d.isNumber(M)||d.isBoolean(M)){if(d.isFunctionParameter(M)||!1===d.isSimpleType(M))throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,v);G[L]=M===d.voidOperation?null:M}else throw new b.ArcadeExecutionError(y,
b.ExecutionErrorCodes.InvalidParameter,v);}}A=u.createFromGraphicLikeObject(A,G,null,y.timeReference)}A._geometry=d.fixSpatialReference(A.geometry(),y.spatialReference);A.immutable=!1;return A})};E.dictionary=function(y,v){return C(y,v,function(A,G,F){if(0===F.length)return F=new c,F.immutable=!1,F;if(1===F.length&&d.isString(F[0]))try{var H=JSON.parse(F[0]),L=c.convertObjectToArcadeDictionary(H,d.defaultTimeZone(y),!1);L.immutable=!1;return L}catch(M){throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,
v);}if(0!==F.length%2)throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.WrongNumberOfParameters,v);A={};for(G=0;G<F.length;G+=2)if(H=d.toString(F[G]),L=F[G+1],null===L||void 0===L||d.isString(L)||isNaN(L)||d.isDate(L)||d.isNumber(L)||d.isBoolean(L)||d.isArray(L)||d.isImmutableArray(L)){if(d.isFunctionParameter(L))throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,v);A[H]=L===d.voidOperation?null:L}else throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,
v);F=new c(A);F.immutable=!1;return F})};E.haskey=function(y,v){return C(y,v,function(A,G,F){d.pcCheck(F,2,2,y,v);A=d.toString(F[1]);if(x(F[0])||F[0]instanceof c)return F[0].hasField(A);if(F[0]instanceof m)return(F=z(F[0],A,null,null,2))&&"notfound"===F.keystate?!1:!0;throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,v);})};E.hasvalue=function(y,v){return C(y,v,function(A,G,F){d.pcCheck(F,2,2,y,v);if(null===F[0]||null===F[1])return!1;A=d.toString(F[1]);return d.isFeature(F[0])||
F[0]instanceof c?F[0].hasField(A)&&null!==F[0].field(A)?!0:!1:F[0]instanceof m?null===z(F[0],A,null,null,0)?!1:!0:!1})};E.indexof=function(y,v){return C(y,v,function(A,G,F){d.pcCheck(F,2,2,y,v);A=F[1];if(d.isArray(F[0])){for(G=0;G<F[0].length;G++)if(d.equalityTest(A,F[0][G]))return G;return-1}if(d.isImmutableArray(F[0])){var H=F[0].length();for(G=0;G<H;G++)if(d.equalityTest(A,F[0].get(G)))return G;return-1}throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,v);})};E.angle=function(y,
v){return C(y,v,function(A,G,F){F=d.autoCastFeatureToGeometry(F);d.pcCheck(F,2,3,y,v);if(!(F[0]instanceof h))throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,v);if(!(F[1]instanceof h))throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,v);if(2<F.length&&!(F[2]instanceof h))throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,v);return 2===F.length?k.angle2D(F[0],F[1]):k.angleBetween2D(F[0],F[1],F[2])})};E.bearing=function(y,v){return C(y,
v,function(A,G,F){F=d.autoCastFeatureToGeometry(F);d.pcCheck(F,2,3,y,v);if(!(F[0]instanceof h))throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,v);if(!(F[1]instanceof h))throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,v);if(2<F.length&&!(F[2]instanceof h))throw new b.ArcadeExecutionError(y,b.ExecutionErrorCodes.InvalidParameter,v);return 2===F.length?k.bearing2D(F[0],F[1]):k.bearingBetween2D(F[0],F[1],F[2])})};E.isselfintersecting=function(y,v){return C(y,
v,function(A,G,F){F=d.autoCastFeatureToGeometry(F);d.pcCheck(F,1,1,y,v);A=F[0];if(A instanceof n)return A.isSelfIntersecting(A);if(A instanceof r)return A=A.paths,k.pathsSelfIntersecting(A);if(A instanceof a)for(G=A.points,F=0;F<G.length;F++)for(var H=0;H<G.length;H++)if(H!==F){for(var L=!0,M=0;M<G[F].length;M++)if(G[F][M]!==G[H][M]){L=!1;break}if(!0===L)return!0}return d.isArray(A)||d.isImmutableArray(A)?(A=d.autoCastArrayOfPointsToPolyline(A,y.spatialReference),null!==A&&(A=A.paths),k.pathsSelfIntersecting(A)):
!1})}};var D=0;B.geometryMember=z})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(f,B,l){function e(a,h,n){var r={x:0,y:0};h&&(r.z=0);n&&(r.m=0);for(var k=0,g=a[0],b=0;b<a.length;b++){var w=a[b];a:if(w.length!==g.length)var x=!1;else{for(x=0;x<w.length;x++)if(w[x]!==g[x]){x=!1;break a}x=!0}if(!1===x){x=c(g,w,h);var z=w,D=h,E=n,C={x:(g[0]+z[0])/2,y:(g[1]+z[1])/2};D&&(C.z=(g[2]+z[2])/2);D&&E?C.m=(g[3]+z[3])/2:E&&(C.m=(g[2]+z[2])/2);g=C;g.x*=
x;g.y*=x;r.x+=g.x;r.y+=g.y;h&&(g.z*=x,r.z+=g.z);n&&(g.m*=x,r.m+=g.m);k+=x;g=w}}0<k?(r.x/=k,r.y/=k,h&&(r.z/=k),n&&(r.m/=k)):(r.x=a[0][0],r.y=a[0][1],h&&(r.z=a[0][2]),n&&h?r.m=a[0][3]:n&&(r.m=a[0][2]));return r}function c(a,h,n){var r=h[0]-a[0];a=h[1]-a[1];return n?(h=h[2]-h[2],Math.sqrt(r*r+a*a+h*h)):Math.sqrt(r*r+a*a)}function u(a,h,n){for(void 0===n&&(n=0);a<n;)a+=h;for(n+=h;a>=n;)a-=h;return a}function t(a,h){return Math.atan2(h.y-a.y,h.x-a.x)}function d(a,h,n){var r=a.x-h.x;a=a.y-h.y;var k=n.x-
h.x;h=n.y-h.y;return Math.atan2(r*h-k*a,r*k+a*h)}function q(a,h,n,r,k){var g=a[0];a=a[1];var b=h[0];h=h[1];var w=n[0],x=n[1];n=r[0]-w;w=g-w;var z=b-g;r=r[1]-x;x=a-x;var D=h-a,E=r*z-n*D;if(0===E)return!1;n=(n*x-r*w)/E;w=(z*x-D*w)/E;return 0<=n&&1>=n&&0<=w&&1>=w?(k&&(k[0]=g+n*(b-g),k[1]=a+n*(h-a)),!0):!1}Object.defineProperty(B,"__esModule",{value:!0});B.pathsSelfIntersecting=B.bearingBetween2D=B.angleBetween2D=B.angleBetweenRad=B.bearing2D=B.angle2D=B.angleRad=B.centroidMultiPoint=B.centroidPolyline=
void 0;B.centroidPolyline=function(a){for(var h={x:0,y:0,spatialReference:a.spatialReference.toJson()},n={x:0,y:0,spatialReference:a.spatialReference.toJson()},r=0,k=0,g=0;g<a.paths.length;g++)if(0!==a.paths[g].length){var b=a.paths[g];var w=!0===a.hasZ;if(1>=b.length)b=0;else{for(var x=0,z=1;z<b.length;z++)x+=c(b[z-1],b[z],w);b=x}0===b?(w=e(a.paths[g],!0===a.hasZ,!0===a.hasM),h.x+=w.x,h.y+=w.y,!0===a.hasZ&&(h.z+=w.z),!0===a.hasM&&(h.m+=w.m),++r):(w=e(a.paths[g],!0===a.hasZ,!0===a.hasM),n.x+=w.x*
b,n.y+=w.y*b,!0===a.hasZ&&(n.z+=w.z*b),!0===a.hasM&&(n.m+=w.m*b),k+=b)}return 0<k?(n.x/=k,n.y/=k,!0===a.hasZ&&(n.z/=k),!0===a.hasM&&(n.m/=k),new l(n)):0<r?(h.x/=r,h.y/=r,!0===a.hasZ&&(n.z/=r),!0===a.hasM&&(h.m/=r),new l(h)):null};B.centroidMultiPoint=function(a){if(0===a.points.length)return null;for(var h=0,n=0,r=0,k=0,g=0;g<a.points.length;g++){var b=a.getPoint(g);!0===b.hasZ&&(r+=b.z);!0===b.hasM&&(k+=b.m);h+=b.x;n+=b.y;k+=b.m}h={x:h/a.points.length,y:n/a.points.length,spatialReference:null};h.spatialReference=
a.spatialReference.toJson();!0===a.hasZ&&(h.z=r/a.points.length);!0===a.hasM&&(h.m=k/a.points.length);return new l(h)};B.angleRad=t;B.angle2D=function(a,h){return u(t(a,h),2*Math.PI)*(180/Math.PI)};B.bearing2D=function(a,h){return u(Math.PI/2-t(a,h),2*Math.PI)*(180/Math.PI)};B.angleBetweenRad=d;B.angleBetween2D=function(a,h,n){return u(d(a,h,n),2*Math.PI)*(180/Math.PI)};B.bearingBetween2D=function(a,h,n){return u(-1*d(a,h,n),2*Math.PI)*(180/Math.PI)};var m=[0,0];B.pathsSelfIntersecting=function(a){for(var h=
0;h<a.length;h++){for(var n=a[h],r=0;r<n.length-1;r++)for(var k=n[r],g=n[r+1],b=h+1;b<a.length;b++)for(var w=0;w<a[b].length-1;w++){var x=a[b][w],z=a[b][w+1],D=q(k,g,x,z,m);if(D&&!(m[0]===k[0]&&m[1]===k[1]||m[0]===x[0]&&m[1]===x[1]||m[0]===g[0]&&m[1]===g[1]||m[0]===z[0]&&m[1]===z[1]))return!0}w=n.length;if(!(3>w))for(r=0;r<=w-2;r++)for(k=n[r],g=n[r+1],b=r+2;b<=w-2;b++)if(x=n[b],z=n[b+1],(D=q(k,g,x,z,m))&&!(m[0]===k[0]&&m[1]===k[1]||m[0]===x[0]&&m[1]===x[1]||m[0]===g[0]&&m[1]===g[1]||m[0]===z[0]&&
m[1]===z[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils ../executionError".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h,n,r){function k(b){return 0===l.version.indexOf("4.")?a.fromExtent(b):new a({spatialReference:b.spatialReference,rings:[[[b.xmin,
b.ymin],[b.xmin,b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]]]})}Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=B.setGeometryEngine=void 0;var g=null;B.setGeometryEngine=function(b){g=b};B.registerFunctions=function(b,w){function x(z,D,E){c.pcCheck(E,2,2,z,D);if(!(E[0]instanceof d&&E[1]instanceof d||E[0]instanceof d&&null===E[1]||E[1]instanceof d&&null===E[0]||null===E[0]&&null===E[1]))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);}b.disjoint=
function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);x(z,D,y);return null===y[0]||null===y[1]?!0:g.disjoint(y[0],y[1])})};b.intersects=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);x(z,D,y);return null===y[0]||null===y[1]?!1:g.intersects(y[0],y[1])})};b.touches=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);x(z,D,y);return null===y[0]||null===y[1]?!1:g.touches(y[0],y[1])})};b.crosses=function(z,D){return w(z,D,function(E,
C,y){y=c.autoCastFeatureToGeometry(y);x(z,D,y);return null===y[0]||null===y[1]?!1:g.crosses(y[0],y[1])})};b.within=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);x(z,D,y);return null===y[0]||null===y[1]?!1:g.within(y[0],y[1])})};b.contains=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);x(z,D,y);return null===y[0]||null===y[1]?!1:g.contains(y[0],y[1])})};b.overlaps=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);
x(z,D,y);return null===y[0]||null===y[1]?!1:g.overlaps(y[0],y[1])})};b.equals=function(z,D){return w(z,D,function(E,C,y){c.pcCheck(y,2,2,z,D);return y[0]===y[1]?!0:y[0]instanceof d&&y[1]instanceof d?g.equals(y[0],y[1]):c.isDate(y[0])&&c.isDate(y[1])?y[0].equals(y[1]):!1})};b.relate=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);c.pcCheck(y,3,3,z,D);if(y[0]instanceof d&&y[1]instanceof d)return g.relate(y[0],y[1],c.toString(y[2]));if(y[0]instanceof d&&null===y[1]||y[1]instanceof
d&&null===y[0]||null===y[0]&&null===y[1])return!1;throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);})};b.intersection=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);x(z,D,y);return null===y[0]||null===y[1]?null:g.intersect(y[0],y[1])})};b.union=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);E=[];if(0===y.length)throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.WrongNumberOfParameters,D);if(1===y.length)if(c.isArray(y[0]))for(y=
c.autoCastFeatureToGeometry(y[0]),C=0;C<y.length;C++){if(null!==y[C]){if(!(y[C]instanceof d))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);E.push(y[C])}}else if(c.isImmutableArray(y[0]))for(y=c.autoCastFeatureToGeometry(y[0].toArray()),C=0;C<y.length;C++){if(null!==y[C]){if(!(y[C]instanceof d))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);E.push(y[C])}}else{if(y[0]instanceof d)return c.fixSpatialReference(e.cloneGeometry(y[0]),z.spatialReference);
if(null===y[0])return null;throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);}else for(C=0;C<y.length;C++)if(null!==y[C]){if(!(y[C]instanceof d))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);E.push(y[C])}return 0===E.length?null:g.union(E)})};b.difference=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);x(z,D,y);return null!==y[0]&&null===y[1]?e.cloneGeometry(y[0]):null===y[0]?null:g.difference(y[0],y[1])})};b.symmetricdifference=
function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);x(z,D,y);return null===y[0]&&null===y[1]?null:null===y[0]?e.cloneGeometry(y[1]):null===y[1]?e.cloneGeometry(y[0]):g.symmetricDifference(y[0],y[1])})};b.clip=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);c.pcCheck(y,2,2,z,D);if(!(y[1]instanceof t)&&null!==y[1])throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);if(null===y[0])return null;if(!(y[0]instanceof d))throw new r.ArcadeExecutionError(z,
r.ExecutionErrorCodes.InvalidParameter,D);return null===y[1]?null:g.clip(y[0],y[1])})};b.cut=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);c.pcCheck(y,2,2,z,D);if(!(y[1]instanceof h)&&null!==y[1])throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);if(null===y[0])return[];if(!(y[0]instanceof d))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);return null===y[1]?[e.cloneGeometry(y[0])]:g.cut(y[0],y[1])})};b.area=function(z,
D){return w(z,D,function(E,C,y){c.pcCheck(y,1,2,z,D);y=c.autoCastFeatureToGeometry(y);if(null===y[0])return 0;if(c.isArray(y[0])||c.isImmutableArray(y[0]))return E=c.autoCastArrayOfPointsToPolygon(y[0],z.spatialReference),null===E?0:g.planarArea(E,e.convertSquareUnitsToCode(c.defaultUndefined(y[1],-1)));if(!(y[0]instanceof d))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);return g.planarArea(y[0],e.convertSquareUnitsToCode(c.defaultUndefined(y[1],-1)))})};b.areageodetic=
function(z,D){return w(z,D,function(E,C,y){c.pcCheck(y,1,2,z,D);y=c.autoCastFeatureToGeometry(y);if(null===y[0])return 0;if(c.isArray(y[0])||c.isImmutableArray(y[0]))return E=c.autoCastArrayOfPointsToPolygon(y[0],z.spatialReference),null===E?0:g.geodesicArea(E,e.convertSquareUnitsToCode(c.defaultUndefined(y[1],-1)));if(!(y[0]instanceof d))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);return g.geodesicArea(y[0],e.convertSquareUnitsToCode(c.defaultUndefined(y[1],-1)))})};
b.length=function(z,D){return w(z,D,function(E,C,y){c.pcCheck(y,1,2,z,D);y=c.autoCastFeatureToGeometry(y);if(null===y[0])return 0;if(c.isArray(y[0])||c.isImmutableArray(y[0]))return E=c.autoCastArrayOfPointsToPolyline(y[0],z.spatialReference),null===E?0:g.planarLength(E,e.convertLinearUnitsToCode(c.defaultUndefined(y[1],-1)));if(!(y[0]instanceof d))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);return g.planarLength(y[0],e.convertLinearUnitsToCode(c.defaultUndefined(y[1],
-1)))})};b.length3d=function(z,D){return w(z,D,function(E,C,y){c.pcCheck(y,1,2,z,D);y=c.autoCastFeatureToGeometry(y);if(null===y[0])return 0;if(c.isArray(y[0])||c.isImmutableArray(y[0]))return E=c.autoCastArrayOfPointsToPolyline(y[0],z.spatialReference),null===E?0:g.planarLength(E,e.convertLinearUnitsToCode(c.defaultUndefined(y[1],-1)));if(!(y[0]instanceof d))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);return g.planarLength(y[0],e.convertLinearUnitsToCode(c.defaultUndefined(y[1],
-1)))})};b.lengthgeodetic=function(z,D){return w(z,D,function(E,C,y){c.pcCheck(y,1,2,z,D);y=c.autoCastFeatureToGeometry(y);if(null===y[0])return 0;if(c.isArray(y[0])||c.isImmutableArray(y[0]))return E=c.autoCastArrayOfPointsToPolyline(y[0],z.spatialReference),null===E?0:g.geodesicLength(E,e.convertLinearUnitsToCode(c.defaultUndefined(y[1],-1)));if(!(y[0]instanceof d))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);return g.geodesicLength(y[0],e.convertLinearUnitsToCode(c.defaultUndefined(y[1],
-1)))})};b.distance=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);c.pcCheck(y,2,3,z,D);E=y[0];if(c.isArray(y[0])||c.isImmutableArray(y[0]))E=c.autoCastArrayOfPointsToMultiPoint(y[0],z.spatialReference);C=y[1];if(c.isArray(y[1])||c.isImmutableArray(y[1]))C=c.autoCastArrayOfPointsToMultiPoint(y[1],z.spatialReference);if(!(E instanceof d))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);if(!(C instanceof d))throw new r.ArcadeExecutionError(z,
r.ExecutionErrorCodes.InvalidParameter,D);return g.distance(E,C,e.convertLinearUnitsToCode(c.defaultUndefined(y[2],-1)))})};b.distancegeodetic=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);c.pcCheck(y,2,3,z,D);E=y[0];C=y[1];if(!(E instanceof m))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);if(!(C instanceof m))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);var v=new h({paths:[],spatialReference:E.spatialReference});
v.addPath([E,C]);return g.geodesicLength(v,e.convertLinearUnitsToCode(c.defaultUndefined(y[2],-1)))})};b.densify=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);c.pcCheck(y,2,3,z,D);if(null===y[0])return null;if(!(y[0]instanceof d))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);E=c.toNumber(y[1]);if(isNaN(E))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);if(0>=E)throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,
D);return y[0]instanceof a||y[0]instanceof h?g.densify(y[0],E,e.convertLinearUnitsToCode(c.defaultUndefined(y[2],-1))):y[0]instanceof t?g.densify(k(y[0]),E,e.convertLinearUnitsToCode(c.defaultUndefined(y[2],-1))):y[0]})};b.densifygeodetic=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);c.pcCheck(y,2,3,z,D);if(null===y[0])return null;if(!(y[0]instanceof d))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);E=c.toNumber(y[1]);if(isNaN(E))throw new r.ArcadeExecutionError(z,
r.ExecutionErrorCodes.InvalidParameter,D);if(0>=E)throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);return y[0]instanceof a||y[0]instanceof h?g.geodesicDensify(y[0],E,e.convertLinearUnitsToCode(c.defaultUndefined(y[2],-1))):y[0]instanceof t?g.geodesicDensify(k(y[0]),E,e.convertLinearUnitsToCode(c.defaultUndefined(y[2],-1))):y[0]})};b.generalize=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);c.pcCheck(y,2,4,z,D);if(null===y[0])return null;if(!(y[0]instanceof
d))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);E=c.toNumber(y[1]);if(isNaN(E))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);return g.generalize(y[0],E,c.toBoolean(c.defaultUndefined(y[2],!0)),e.convertLinearUnitsToCode(c.defaultUndefined(y[3],-1)))})};b.buffer=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);c.pcCheck(y,2,3,z,D);if(null===y[0])return null;if(!(y[0]instanceof d))throw new r.ArcadeExecutionError(z,
r.ExecutionErrorCodes.InvalidParameter,D);E=c.toNumber(y[1]);if(isNaN(E))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);return 0===E?e.cloneGeometry(y[0]):g.buffer(y[0],E,e.convertLinearUnitsToCode(c.defaultUndefined(y[2],-1)))})};b.buffergeodetic=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);c.pcCheck(y,2,3,z,D);if(null===y[0])return null;if(!(y[0]instanceof d))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);
E=c.toNumber(y[1]);if(isNaN(E))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);return 0===E?e.cloneGeometry(y[0]):g.geodesicBuffer(y[0],E,e.convertLinearUnitsToCode(c.defaultUndefined(y[2],-1)))})};b.offset=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);c.pcCheck(y,2,6,z,D);if(null===y[0])return null;if(!(y[0]instanceof a||y[0]instanceof h))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);E=c.toNumber(y[1]);if(isNaN(E))throw new r.ArcadeExecutionError(z,
r.ExecutionErrorCodes.InvalidParameter,D);C=c.toNumber(c.defaultUndefined(y[4],10));if(isNaN(C))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);var v=c.toNumber(c.defaultUndefined(y[5],0));if(isNaN(v))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);return g.offset(y[0],E,e.convertLinearUnitsToCode(c.defaultUndefined(y[2],-1)),c.toString(c.defaultUndefined(y[3],"round")).toLowerCase(),C,v)})};b.rotate=function(z,D){return w(z,D,function(E,C,
y){y=c.autoCastFeatureToGeometry(y);c.pcCheck(y,2,3,z,D);E=y[0];if(null===E)return null;if(!(E instanceof d))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);E instanceof t&&(E=a.fromExtent(E));C=c.toNumber(y[1]);if(isNaN(C))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);y=c.defaultUndefined(y[2],null);if(null===y)return g.rotate(E,C);if(y instanceof m)return g.rotate(E,C,y);throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,
D);})};b.centroid=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);c.pcCheck(y,1,1,z,D);if(null===y[0])return null;E=y[0];if(c.isArray(y[0])||c.isImmutableArray(y[0]))E=c.autoCastArrayOfPointsToMultiPoint(y[0],z.spatialReference);if(null===E)return null;if(!(E instanceof d))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);return E instanceof m?c.fixSpatialReference(e.cloneGeometry(y[0]),z.spatialReference):E instanceof a?E.getCentroid():E instanceof
h?u.centroidPolyline(E):E instanceof q?u.centroidMultiPoint(E):E instanceof t?E.getCenter():null})};b.multiparttosinglepart=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);c.pcCheck(y,1,1,z,D);C=[];if(null===y[0])return null;if(!(y[0]instanceof d))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);if(y[0]instanceof m||y[0]instanceof t)return[c.fixSpatialReference(e.cloneGeometry(y[0]),z.spatialReference)];E=g.simplify(y[0]);if(E instanceof a){C=
[];var v=[];for(y=0;y<E.rings.length;y++)if(E.isClockwise(E.rings[y])){var A=n.fromJson({rings:[E.rings[y]],hasZ:!0===E.hasZ,hasM:!0===E.hasM,spatialReference:E.spatialReference.toJson()});C.push(A)}else v.push({ring:E.rings[y],pt:E.getPoint(y,0)});for(E=0;E<v.length;E++)for(y=0;y<C.length;y++)if(C[y].contains(v[E].pt)){C[y].addRing(v[E].ring);break}return C}if(E instanceof h){C=[];for(y=0;y<E.paths.length;y++)v=n.fromJson({paths:[E.paths[y]],hasZ:!0===E.hasZ,hasM:!0===E.hasM,spatialReference:E.spatialReference.toJson()}),
C.push(v);return C}if(y[0]instanceof q){E=c.fixSpatialReference(e.cloneGeometry(y[0]),z.spatialReference);for(y=0;y<E.points.length;y++)C.push(E.getPoint(y));return C}return null})};b.issimple=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);c.pcCheck(y,1,1,z,D);if(null===y[0])return!0;if(!(y[0]instanceof d))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);return g.isSimple(y[0])})};b.simplify=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);
c.pcCheck(y,1,1,z,D);if(null===y[0])return null;if(!(y[0]instanceof d))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);return g.simplify(y[0])})};b.convexhull=function(z,D){return w(z,D,function(E,C,y){y=c.autoCastFeatureToGeometry(y);c.pcCheck(y,1,1,z,D);if(null===y[0])return null;if(!(y[0]instanceof d))throw new r.ArcadeExecutionError(z,r.ExecutionErrorCodes.InvalidParameter,D);return g.convexHull(y[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports",
"../geometry/Extent","../geometry/jsonUtils"],function(f,B,l,e){Object.defineProperty(B,"__esModule",{value:!0});B.cloneGeometry=B.sameGeomType=B.convertLinearUnitsToCode=B.shapeExtent=B.convertSquareUnitsToCode=void 0;B.convertSquareUnitsToCode=function(c){if(null==c)return null;if("number"===typeof c)return c;c=c.toLowerCase();c=c.replace(/\s/g,"");c=c.replace(/-/g,"");switch(c){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;
case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};
B.shapeExtent=function(c){if(null==c)return null;switch(c.type){case "polygon":case "multipoint":case "polyline":return c.extent;case "point":return new l({xmin:c.x,ymin:c.y,xmax:c.x,ymax:c.y,spatialReference:c.spatialReference});case "extent":return c}return null};B.convertLinearUnitsToCode=function(c){if(null==c)return null;if("number"===typeof c)return c;c=c.toLowerCase();c=c.replace(/\s/g,"");c=c.replace(/-/g,"");switch(c){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};B.sameGeomType=function(c,u){return c===
u||"point"===c&&"esriGeometryPoint"===u||"polyline"===c&&"esriGeometryPolyline"===u||"polygon"===c&&"esriGeometryPolygon"===u||"extent"===c&&"esriGeometryEnvelope"===u||"multipoint"===c&&"esriGeometryMultipoint"===u||"point"===u&&"esriGeometryPoint"===c||"polyline"===u&&"esriGeometryPolyline"===c||"polygon"===u&&"esriGeometryPolygon"===c||"extent"===u&&"esriGeometryEnvelope"===c||"multipoint"===u&&"esriGeometryMultipoint"===c?!0:!1};B.cloneGeometry=function(c){if(null==c)return null;var u=e.fromJson(c.toJson());
c.getCacheValue("_geVersion")&&u.setCacheValue("_geVersion",c.getCacheValue("_geVersion"));return u}})},"esri/arcade/functions/maths":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../languageUtils dojo/number".split(" "),function(f,B,l,e,c,u){function t(d,q,m){if("undefined"===typeof m||0===+m)return Math[d](q);q=+q;m=+m;if(isNaN(q)||"number"!==typeof m||0!==m%1)return NaN;q=q.toString().split("e");q=Math[d](+(q[0]+"e"+(q[1]?+q[1]-m:-m)));q=q.toString().split("e");
return+(q[0]+"e"+(q[1]?+q[1]+m:m))}Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=void 0;B.registerFunctions=function(d,q){function m(a,h,n){a=c.toNumber(a);return isNaN(a)?a:isNaN(h)||isNaN(n)||h>n?NaN:a<h?h:a>n?n:a}d.number=function(a,h){return q(a,h,function(n,r,k){c.pcCheck(k,1,2,a,h);n=k[0];return c.isNumber(n)?n:null===n?0:c.isDate(n)?n.toNumber():c.isBoolean(n)?Number(n):c.isArray(n)?NaN:""===n||void 0===n?Number(n):c.isString(n)?void 0!==k[1]?(k=c.multiReplace(k[1],"\u2030",
""),k=c.multiReplace(k,"\u00a4",""),u.parse(n,{pattern:k})):Number(n.trim()):Number(n)})};d.abs=function(a,h){return q(a,h,function(n,r,k){c.pcCheck(k,1,1,a,h);return Math.abs(c.toNumber(k[0]))})};d.acos=function(a,h){return q(a,h,function(n,r,k){c.pcCheck(k,1,1,a,h);return Math.acos(c.toNumber(k[0]))})};d.asin=function(a,h){return q(a,h,function(n,r,k){c.pcCheck(k,1,1,a,h);return Math.asin(c.toNumber(k[0]))})};d.atan=function(a,h){return q(a,h,function(n,r,k){c.pcCheck(k,1,1,a,h);return Math.atan(c.toNumber(k[0]))})};
d.atan2=function(a,h){return q(a,h,function(n,r,k){c.pcCheck(k,2,2,a,h);return Math.atan2(c.toNumber(k[0]),c.toNumber(k[1]))})};d.ceil=function(a,h){return q(a,h,function(n,r,k){c.pcCheck(k,1,2,a,h);return 2===k.length?(n=c.toNumber(k[1]),isNaN(n)&&(n=0),t("ceil",c.toNumber(k[0]),-1*n)):Math.ceil(c.toNumber(k[0]))})};d.round=function(a,h){return q(a,h,function(n,r,k){c.pcCheck(k,1,2,a,h);return 2===k.length?(n=c.toNumber(k[1]),isNaN(n)&&(n=0),t("round",c.toNumber(k[0]),-1*n)):Math.round(c.toNumber(k[0]))})};
d.floor=function(a,h){return q(a,h,function(n,r,k){c.pcCheck(k,1,2,a,h);return 2===k.length?(n=c.toNumber(k[1]),isNaN(n)&&(n=0),t("floor",c.toNumber(k[0]),-1*n)):Math.floor(c.toNumber(k[0]))})};d.cos=function(a,h){return q(a,h,function(n,r,k){c.pcCheck(k,1,1,a,h);return Math.cos(c.toNumber(k[0]))})};d.isnan=function(a,h){return q(a,h,function(n,r,k){c.pcCheck(k,1,1,a,h);return"number"===typeof k[0]&&isNaN(k[0])})};d.exp=function(a,h){return q(a,h,function(n,r,k){c.pcCheck(k,1,1,a,h);return Math.exp(c.toNumber(k[0]))})};
d.log=function(a,h){return q(a,h,function(n,r,k){c.pcCheck(k,1,1,a,h);return Math.log(c.toNumber(k[0]))})};d.pow=function(a,h){return q(a,h,function(n,r,k){c.pcCheck(k,2,2,a,h);return Math.pow(c.toNumber(k[0]),c.toNumber(k[1]))})};d.random=function(a,h){return q(a,h,function(n,r,k){c.pcCheck(k,0,0,a,h);return Math.random()})};d.sin=function(a,h){return q(a,h,function(n,r,k){c.pcCheck(k,1,1,a,h);return Math.sin(c.toNumber(k[0]))})};d.sqrt=function(a,h){return q(a,h,function(n,r,k){c.pcCheck(k,1,1,
a,h);return Math.sqrt(c.toNumber(k[0]))})};d.tan=function(a,h){return q(a,h,function(n,r,k){c.pcCheck(k,1,1,a,h);return Math.tan(c.toNumber(k[0]))})};d.defaultvalue=function(a,h){return q(a,h,function(n,r,k){c.pcCheck(k,2,2,a,h);return null===k[0]||""===k[0]||void 0===k[0]?k[1]:k[0]})};d.isempty=function(a,h){return q(a,h,function(n,r,k){c.pcCheck(k,1,1,a,h);return null===k[0]||""===k[0]||void 0===k[0]?!0:!1})};d["boolean"]=function(a,h){return q(a,h,function(n,r,k){c.pcCheck(k,1,1,a,h);return c.toBoolean(k[0])})};
d.constrain=function(a,h){return q(a,h,function(n,r,k){c.pcCheck(k,3,3,a,h);n=c.toNumber(k[1]);r=c.toNumber(k[2]);if(c.isArray(k[0])){var g=[],b=0;for(k=k[0];b<k.length;b++)g.push(m(k[b],n,r));return g}if(c.isImmutableArray(k[0])){g=[];for(b=0;b<k[0].length();b++)g.push(m(k[0].get(b),n,r));return g}return m(k[0],n,r)})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../executionError","../languageUtils","./fieldStats"],function(f,B,l,e,c){function u(t,d,q,m){if(1===m.length){if(e.isArray(m[0]))return c.calculateStat(t,
m[0],-1);if(e.isImmutableArray(m[0]))return c.calculateStat(t,m[0].toArray(),-1)}return c.calculateStat(t,m,-1)}Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=void 0;B.registerFunctions=function(t,d){t.stdev=function(q,m){return d(q,m,function(a,h,n){return u("stdev",a,h,n)})};t.variance=function(q,m){return d(q,m,function(a,h,n){return u("variance",a,h,n)})};t.average=function(q,m){return d(q,m,function(a,h,n){return u("mean",a,h,n)})};t.mean=function(q,m){return d(q,m,function(a,
h,n){return u("mean",a,h,n)})};t.sum=function(q,m){return d(q,m,function(a,h,n){return u("sum",a,h,n)})};t.min=function(q,m){return d(q,m,function(a,h,n){return u("min",a,h,n)})};t.max=function(q,m){return d(q,m,function(a,h,n){return u("max",a,h,n)})};t.distinct=function(q,m){return d(q,m,function(a,h,n){return u("distinct",a,h,n)})};t.count=function(q,m){return d(q,m,function(a,h,n){e.pcCheck(n,1,1,q,m);if(e.isArray(n[0])||e.isString(n[0]))return n[0].length;if(e.isImmutableArray(n[0]))return n[0].length();
throw new l.ArcadeExecutionError(q,l.ExecutionErrorCodes.InvalidParameter,m);})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(f,B,l){function e(u){for(var t=0,d=0;d<u.length;d++)t+=u[d];return t/u.length}function c(u){for(var t=e(u),d=0,q=0;q<u.length;q++)d+=Math.pow(t-u[q],2);return d/u.length}Object.defineProperty(B,"__esModule",{value:!0});B.calculateStat=B.decodeStatType=void 0;B.decodeStatType=function(u){switch(u.toLowerCase()){case "distinct":return"distinct";
case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};B.calculateStat=function(u,t,d){void 0===d&&(d=1E3);switch(u.toLowerCase()){case "distinct":a:{u=d;d=[];for(var q={},m=[],a=0;a<t.length;a++){if(void 0!==t[a]&&null!==t[a]&&t[a]!==l.voidOperation){var h=t[a];if(l.isNumber(h)||l.isString(h))void 0===q[h]&&(d.push(h),q[h]=1);else{for(var n=
!1,r=0;r<m.length;r++)!0===l.equalityTest(m[r],h)&&(n=!0);!1===n&&(m.push(h),d.push(h))}}if(d.length>=u&&-1!==u){t=d;break a}}t=d}return t;case "avg":case "mean":return e(l.toNumberArray(t));case "min":return Math.min.apply(Math,l.toNumberArray(t));case "sum":t=l.toNumberArray(t);for(d=u=0;d<t.length;d++)u+=t[d];return u;case "max":return Math.max.apply(Math,l.toNumberArray(t));case "stdev":case "stddev":return Math.sqrt(c(l.toNumberArray(t)));case "var":case "variance":return c(l.toNumberArray(t));
case "count":return t.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../ArcadePortal ../Attachment ../Dictionary ../executionError ../languageUtils ../featureset/support/shared ./convertdirection ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../SpatialReference ../../arcgis/Portal".split(" "),function(f,B,l,e,c,u,t,d,
q,m,a,h,n,r,k,g,b,w,x){function z(E,C){return E&&C?E.x===C.x&&E.y===C.y?!0:!1:E===C}function D(E,C,y){if(null===E)C.updateUint8Array([0,139]);else if(q.isArray(E)){C.updateUint8Array([61]);if(y.map.has(E))E=y.map.get(E),C.updateIntArray([E^61237541]);else{y.map.set(E,y.currentLength++);for(var v=0;v<E.length;v++){var A=E[v];D(A,C,y)}y.map.delete(E);y.currentLength--}C.updateUint8Array([199])}else if(q.isImmutableArray(E)){C.updateUint8Array([61]);if(y.map.has(E))E=y.map.get(E),C.updateIntArray([E^
61237541]);else{y.map.set(E,y.currentLength++);v=0;for(var G=E.toArray();v<G.length;v++)A=G[v],D(A,C,y);y.map.delete(E);y.currentLength--}C.updateUint8Array([199])}else if(q.isDate(E))C.updateIntArray([E.toNumber()]),C.updateUint8Array([241]);else if(q.isString(E))C.updateIntArray([E.length]),C.updateWithString(E),C.updateUint8Array([41]);else if(q.isBoolean(E))C.updateUint8Array([!0===E?1:0,113]);else if(q.isNumber(E))C.updateFloatArray([E]),C.updateUint8Array([173]);else{if(E instanceof u)throw new d.ArcadeExecutionError(y.context,
d.ExecutionErrorCodes.UnsupportedHashType,y.node);if(E instanceof c)throw new d.ArcadeExecutionError(y.context,d.ExecutionErrorCodes.UnsupportedHashType,y.node);if(E instanceof t){C.updateUint8Array([223]);if(y.map.has(E))E=y.map.get(E),C.updateIntArray([E^61237541]);else{y.map.set(E,y.currentLength++);v=0;for(G=E.keys();v<G.length;v++)A=G[v],C.updateIntArray([A.length]),C.updateWithString(A),C.updateUint8Array([251]),A=E.field(A),D(A,C,y),C.updateUint8Array([239]);y.map.delete(E);y.currentLength--}C.updateUint8Array([73])}else{if(q.isFeature(E))throw new d.ArcadeExecutionError(y.context,
d.ExecutionErrorCodes.UnsupportedHashType,y.node);if(E instanceof k)C.updateIntArray([3833836621]),C.updateIntArray([0]),C.updateFloatArray([E.x]),C.updateIntArray([1]),C.updateFloatArray([E.y]),C.updateIntArray([3765347959]),D(E.spatialReference.wkid,C,y);else if(E instanceof g){C.updateIntArray([1266616829]);for(v=0;v<E.rings.length;v++){G=E.rings[v];var F=[],H=null,L=null;for(A=0;A<G.length;A++){var M=E.getPoint(v,A);if(0===A)H=M;else if(z(L,M))continue;L=M;A===G.length-1&&z(H,M)||F.push(M)}C.updateIntArray([1397116793,
F.length]);for(A=0;A<F.length;A++)M=F[A],C.updateIntArray([3962308117,A]),D(M,C,y),C.updateIntArray([2716288009]);C.updateIntArray([2278822459])}C.updateIntArray([3878477243]);D(E.spatialReference.wkid,C,y)}else if(E instanceof b){C.updateIntArray([4106883559]);for(v=0;v<E.paths.length;v++){G=E.paths[v];C.updateIntArray([1397116793,G.length]);for(A=0;A<G.length;A++)C.updateIntArray([3962308117,A]),D(E.getPoint(v,A),C,y),C.updateIntArray([2716288009]);C.updateIntArray([2278822459])}C.updateIntArray([2568784753]);
D(E.spatialReference.wkid,C,y)}else if(E instanceof r){C.updateIntArray([588535921,E.points.length]);for(A=0;A<E.points.length;A++)v=E.getPoint(A),C.updateIntArray([A]),D(v,C,y);C.updateIntArray([1700171621]);D(E.spatialReference.wkid,C,y)}else if(E instanceof n)C.updateIntArray([3483648373]),C.updateIntArray([0]),C.updateFloatArray([E.xmax]),C.updateIntArray([1]),C.updateFloatArray([E.xmin]),C.updateIntArray([2]),C.updateFloatArray([E.ymax]),C.updateIntArray([3]),C.updateFloatArray([E.ymin]),C.updateIntArray([3622027469]),
D(E.spatialReference.wkid,C,y);else if(E instanceof w)C.updateIntArray([14]),void 0!==E.wkid&&null!==E.wkid&&C.updateIntArray([E.wkid]),E.wkt&&C.updateWithString(E.wkt);else{if(q.isFunctionParameter(E))throw new d.ArcadeExecutionError(y.context,d.ExecutionErrorCodes.UnsupportedHashType,y.node);if(q.isFeatureSet(E))throw new d.ArcadeExecutionError(y.context,d.ExecutionErrorCodes.UnsupportedHashType,y.node);q.isFeatureSetCollection(E);throw new d.ArcadeExecutionError(y.context,d.ExecutionErrorCodes.UnsupportedHashType,
y.node);}}}}Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=void 0;B.registerFunctions=function(E,C){E.portal=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,1,1,y,v);return new c(q.toString(F[0]))})};E.typeof=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,1,1,y,v);A=q.getType(F[0]);if("Unrecognised Type"===A)throw new d.ArcadeExecutionError(y,d.ExecutionErrorCodes.UnrecognisedType,v);return A})};E.trim=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,1,1,
y,v);return q.toString(F[0]).trim()})};E.tohex=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,1,1,y,v);A=q.toNumber(F[0]);return isNaN(A)?A:A.toString(16)})};E.upper=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,1,1,y,v);return q.toString(F[0]).toUpperCase()})};E.proper=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,1,2,y,v);A=1;2===F.length&&"firstword"===q.toString(F[1]).toLowerCase()&&(A=2);G=/\s/;F=q.toString(F[0]);for(var H="",L=!0,M=0;M<F.length;M++){var Q=F[M];G.test(Q)?
1===A&&(L=!0):Q.toUpperCase()!==Q.toLowerCase()&&(L?(Q=Q.toUpperCase(),L=!1):Q=Q.toLowerCase());H+=Q}return H})};E.lower=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,1,1,y,v);return q.toString(F[0]).toLowerCase()})};E.guid=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,0,1,y,v);if(0<F.length)switch(q.toString(F[0]).toLowerCase()){case "digits":return q.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return q.generateUUID();case "digits-hyphen-parentheses":return"("+
q.generateUUID()+")"}return"{"+q.generateUUID()+"}"})};E.standardizeguid=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,2,2,y,v);A=q.toString(F[0]);if(""===A||null===A)return"";A=/^(\{|\()?([0-9a-z]{8})(\-?)([0-9a-z]{4})(\-?)([0-9a-z]{4})(\-?)([0-9a-z]{4})(\-?)([0-9a-z]{12})(\}|\))?$/gim.exec(A);if(!A)return"";G=[];for(var H=1;H<A.length;H++){var L=A[H];void 0!==L&&""!==L&&null!==L&&0>["-","}","{","(",")"].indexOf(L)&&G.push(L)}if(5!==G.length)return"";A=G[0]+"-"+G[1]+"-"+G[2]+"-"+G[3]+"-"+
G[4];switch(q.toString(F[1]).toLowerCase()){case "digits":return A.replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return A;case "digits-hyphen-parentheses":return"("+A+")"}return"{"+A+"}"})};E.console=function(y,v){return C(y,v,function(A,G,F){0!==F.length&&(1===F.length?y.console(q.toString(F[0])):y.console(q.toString(F)));return q.voidOperation})};E.mid=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,2,3,y,v);A=q.toNumber(F[1]);if(isNaN(A))return"";0>
A&&(A=0);if(2===F.length)return q.toString(F[0]).substr(A);G=q.toNumber(F[2]);if(isNaN(G))return"";0>G&&(G=0);return q.toString(F[0]).substr(A,G)})};E.find=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,2,3,y,v);A=0;if(2<F.length){A=q.toNumber(q.defaultUndefined(F[2],0));if(isNaN(A))return-1;0>A&&(A=0)}return q.toString(F[1]).indexOf(q.toString(F[0]),A)})};E.left=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,2,2,y,v);A=q.toNumber(F[1]);if(isNaN(A))return"";0>A&&(A=0);return q.toString(F[0]).substr(0,
A)})};E.right=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,2,2,y,v);A=q.toNumber(F[1]);if(isNaN(A))return"";0>A&&(A=0);return q.toString(F[0]).substr(-1*A,A)})};E.split=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,2,4,y,v);A=q.toNumber(q.defaultUndefined(F[2],-1));G=q.toBoolean(q.defaultUndefined(F[3],!1));-1===A||null===A||!0===G?F=q.toString(F[0]).split(q.toString(F[1])):(isNaN(A)&&(A=-1),-1>A&&(A=-1),F=q.toString(F[0]).split(q.toString(F[1]),A));if(!1===G)return F;G=[];for(var H=
0;H<F.length&&!(-1!==A&&G.length>=A);H++)""!==F[H]&&void 0!==F[H]&&G.push(F[H]);return G})};E.text=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,1,2,y,v);return q.toStringExplicit(F[0],F[1])})};E.concatenate=function(y,v){return C(y,v,function(A,G,F){A=[];if(1>F.length)return"";if(q.isArray(F[0])){G=q.defaultUndefined(F[2],"");for(var H=0;H<F[0].length;H++)A[H]=q.toStringExplicit(F[0][H],G);return 1<F.length?A.join(F[1]):A.join("")}if(q.isImmutableArray(F[0])){G=q.defaultUndefined(F[2],"");
for(H=0;H<F[0].length();H++)A[H]=q.toStringExplicit(F[0].get(H),G);return 1<F.length?A.join(F[1]):A.join("")}for(H=0;H<F.length;H++)A[H]=q.toStringExplicit(F[H]);return A.join("")})};E.reverse=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,1,1,y,v);if(q.isArray(F[0]))return A=F[0].slice(0),A.reverse(),A;if(q.isImmutableArray(F[0]))return A=F[0].toArray().slice(0),A.reverse(),A;throw new d.ArcadeExecutionError(y,d.ExecutionErrorCodes.InvalidParameter,v);})};E.replace=function(y,v){return C(y,
v,function(A,G,F){q.pcCheck(F,3,4,y,v);A=q.toString(F[0]);G=q.toString(F[1]);var H=q.toString(F[2]);return(4===F.length?q.toBoolean(F[3]):1)?q.multiReplace(A,G,H):A.replace(G,H)})};E.schema=function(y,v){return C(y,v,function(A,G,F){if(q.isFeature(F[0]))return(A=q.featureSchema(F[0]))?t.convertObjectToArcadeDictionary(A,q.defaultTimeZone(y)):null;throw new d.ArcadeExecutionError(y,d.ExecutionErrorCodes.InvalidParameter,v);})};E.subtypes=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,1,1,y,
v);if(q.isFeature(F[0]))return(A=q.featureSubtypes(F[0]))?t.convertObjectToArcadeDictionary(A,q.defaultTimeZone(y)):null;throw new d.ArcadeExecutionError(y,d.ExecutionErrorCodes.InvalidParameter,v);})};E.subtypecode=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,1,1,y,v);if(q.isFeature(F[0])){G=q.featureSubtypes(F[0]);if(!G)return null;if(G.subtypeField&&F[0].hasField(G.subtypeField))for(F=F[0].field(G.subtypeField),A=0,G=G.subtypes;A<G.length;A++){var H=G[A];if(H.code===F)return H.code}return null}throw new d.ArcadeExecutionError(y,
d.ExecutionErrorCodes.InvalidParameter,v);})};E.subtypename=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,1,1,y,v);if(q.isFeature(F[0])){G=q.featureSubtypes(F[0]);if(!G)return"";if(G.subtypeField&&F[0].hasField(G.subtypeField))for(F=F[0].field(G.subtypeField),A=0,G=G.subtypes;A<G.length;A++){var H=G[A];if(H.code===F)return H.name}return""}throw new d.ArcadeExecutionError(y,d.ExecutionErrorCodes.InvalidParameter,v);})};E.gdbversion=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,1,
1,y,v);if(q.isFeature(F[0]))return F[0].gdbVersion();throw new d.ArcadeExecutionError(y,d.ExecutionErrorCodes.InvalidParameter,v);})};E.domain=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,2,3,y,v);if(q.isFeature(F[0]))return(A=q.featureFullDomain(F[0],q.toString(F[1]),void 0===F[2]?void 0:q.toNumber(F[2])))&&A.domain?"coded-value"===A.domain.type||"codedValue"===A.domain.type?t.convertObjectToArcadeDictionary({type:"codedValue",name:A.domain.name,dataType:m.layerFieldEsriConstants[A.field.type],
codedValues:A.domain.codedValues.map(function(H){return{name:H.name,code:H.code}})},q.defaultTimeZone(y)):t.convertObjectToArcadeDictionary({type:"range",name:A.domain.name,dataType:m.layerFieldEsriConstants[A.field.type],min:A.domain.min,max:A.domain.max},q.defaultTimeZone(y)):null;throw new d.ArcadeExecutionError(y,d.ExecutionErrorCodes.InvalidParameter,v);})};E.domainname=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,2,4,y,v);if(q.isFeature(F[0]))return q.featureDomainValueLookup(F[0],
q.toString(F[1]),F[2],void 0===F[3]?void 0:q.toNumber(F[3]));throw new d.ArcadeExecutionError(y,d.ExecutionErrorCodes.InvalidParameter,v);})};E.domaincode=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,2,4,y,v);if(q.isFeature(F[0]))return q.featureDomainCodeLookup(F[0],q.toString(F[1]),F[2],void 0===F[3]?void 0:q.toNumber(F[3]));throw new d.ArcadeExecutionError(y,d.ExecutionErrorCodes.InvalidParameter,v);})};E.urlencode=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,1,1,y,v);if(null===
F[0])return"";if(F[0]instanceof t){A="";G=0;for(var H=F[0].keys();G<H.length;G++){var L=H[G],M=F[0].field(L);""!==A&&(A+="\x26");A=null===M?A+(encodeURIComponent(L)+"\x3d"):A+(encodeURIComponent(L)+"\x3d"+encodeURIComponent(M))}return A}return encodeURIComponent(q.toString(F[0]))})};E.hash=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,1,1,y,v);A=new h.XXH(0);D(F[0],A,{context:y,node:v,map:new Map,currentLength:0});return A.digest()})};E.convertdirection=function(y,v){return C(y,v,function(A,
G,F){q.pcCheck(F,3,3,y,v);return a.convertDirection(F[0],F[1],F[2])})};E.fromjson=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,1,1,y,v);if(!1===q.isString(F[0]))throw new d.ArcadeExecutionError(y,d.ExecutionErrorCodes.InvalidParameter,v);return t.convertJsonToArcade(JSON.parse(q.toString(F[0])),q.defaultTimeZone(y))})};E.expects=function(y,v){return C(y,v,function(A,G,F){if(1>F.length)throw new d.ArcadeExecutionError(y,d.ExecutionErrorCodes.WrongNumberOfParameters,v);return q.voidOperation})};
E.tocharcode=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,1,2,y,v);A=q.toNumber(q.defaultUndefined(F[1],0));G=q.toString(F[0]);if(0===G.length&&1===F.length)return null;if(G.length<=A||0>A)throw new d.ArcadeExecutionError(y,d.ExecutionErrorCodes.OutOfBounds,v);return G.charCodeAt(A)})};E.tocodepoint=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,1,2,y,v);A=q.toNumber(q.defaultUndefined(F[1],0));G=q.toString(F[0]);if(0===G.length&&1===F.length)return null;if(G.length<=A||0>A)throw new d.ArcadeExecutionError(y,
d.ExecutionErrorCodes.OutOfBounds,v);return G.codePointAt(A)})};E.fromcharcode=function(y,v){return C(y,v,function(A,G,F){if(1>F.length)throw new d.ArcadeExecutionError(y,d.ExecutionErrorCodes.WrongNumberOfParameters,v);A=F.map(function(H){return Math.trunc(q.toNumber(H))}).filter(function(H){return 0<=H&&65535>=H});return 0===A.length?null:String.fromCharCode.apply(null,A)})};E.fromcodepoint=function(y,v){return C(y,v,function(A,G,F){if(1>F.length)throw new d.ArcadeExecutionError(y,d.ExecutionErrorCodes.WrongNumberOfParameters,
v);try{var H=F.map(function(L){return Math.trunc(q.toNumber(L))}).filter(function(L){return 1114111>=L&&L>>>0===L})}catch(L){return null}return 0===H.length?null:String.fromCodePoint.apply(null,H)})};E.getuser=function(y,v){return C(y,v,function(A,G,F){q.pcCheck(F,0,2,y,v);A=q.defaultUndefined(F[1],"");A=!0===A||!1===A?"":q.toString(A);if(null!==A&&""!==A)return null;if(0===F.length||F[0]instanceof c){G=null;y.services&&y.services.portal&&(G=y.services.portal);if(0<F.length){F=F[0].field("url");var H=
G;F=F?(new x.Portal(F)).portalUrl===((null===H||void 0===H?void 0:H.portalUrl)||""):!1;if(!F)return null}if(!G)return null;if(""===A){a:{A=G;if(A.getPortalUser()&&(A=A.getPortalUser())){G={};F=0;for(H="username id fullName availableCredits assignedCredits firstName lastName preferredView description email idpUsername favGroupId lastLogin mfaEnabled access storageUsage storageQuota orgId role privileges".split(" ");F<H.length;F++){var L=H[F];void 0!==A[L]&&(G[L]=A[L])}A=G;break a}A=null}if(A){A=JSON.parse(JSON.stringify(A));
G=0;for(F=["lastLogin","created","modified"];G<F.length;G++)H=F[G],void 0!==A[H]&&null!==A[H]&&(A[H]=new Date(A[H]));return t.convertObjectToArcadeDictionary(A,q.defaultTimeZone(y))}}return null}throw new d.ArcadeExecutionError(y,d.ExecutionErrorCodes.InvalidParameter,v);})}}})},"esri/arcade/ArcadePortal":function(){define(["require","exports","./polyfill/tsSupport/extends","./Dictionary"],function(f,B,l,e){return function(c){function u(t){var d=c.call(this)||this;d.declaredClass="esri.arcade.Portal";
d.immutable=!1;d.setField("url",t);d.immutable=!0;return d}l(u,c);return u}(e)})},"esri/arcade/Attachment":function(){define(["require","exports","./polyfill/tsSupport/extends","./Dictionary"],function(f,B,l,e){return function(c){function u(t,d,q,m,a,h){var n=c.call(this)||this;n.attachmentUrl=a;n.declaredClass="esri.arcade.Attachment";n.immutable=!1;n.setField("id",t);n.setField("name",d);n.setField("contenttype",q);n.setField("size",m);n.setField("exifinfo",h);n.immutable=!0;return n}l(u,c);return u}(e)})},
"esri/arcade/functions/convertdirection":function(){define("require exports ../Dictionary ../executionError ../languageUtils ../polyfill/maybe".split(" "),function(f,B,l,e,c,u){function t(T){if(!1===c.isString(T))throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.InvalidParameter,null);return T}function d(T,N){N=Math.pow(10,N);return Math.round(T*N)/N}function q(T){var N=parseFloat,K=T.toString(),W=K.replace;var da=+T;da=isFinite(da)?da-da%1||(0>da?-0:0===da?da:0):da;N=N(W.call(K,da.toString(),
"0"))*((0<T)-(0>T)||+T);return 0>T?{fraction:N,integer:Math.ceil(T)}:{fraction:N,integer:Math.floor(T)}}function m(T,N){switch(T){case 0:return"SHORT"===N?"N":"North";case 1:return"SHORT"===N?"E":"East";case 2:return"SHORT"===N?"S":"South";case 3:return"SHORT"===N?"W":"West"}}function a(T,N,K){for(;T.length<K;)T=N+T;return T}function h(T,N){return T-Math.floor(T/N)*N}function n(T){switch(T){case 6:case 1:return 360;case 4:return H;case 5:return 400;case 2:return 1296E3;case 7:return 60;case 8:return 60;
default:throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.LogicError,null,{reason:"unsupported evaluations"});}}function r(T){switch(T.toUpperCase().trim()){case "NORTH":case "NORTHAZIMUTH":case "NORTH AZIMUTH":return 1;case "POLAR":return 2;case "QUADRANT":return 3;case "SOUTH":case "SOUTHAZIMUTH":case "SOUTH AZIMUTH":return 4}throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.LogicError,null,{reason:"unsupported directionType"});}function k(T){switch(T.toUpperCase().trim()){case "D":case "DD":case "DECIMALDEGREE":case "DECIMAL DEGREE":case "DEGREE":case "DECIMALDEGREES":case "DECIMAL DEGREES":case "DEGREES":return 1;
case "DMS":case "DEGREESMINUTESSECONDS":case "DEGREES MINUTES SECONDS":return 3;case "R":case "RAD":case "RADS":case "RADIAN":case "RADIANS":return 4;case "G":case "GON":case "GONS":case "GRAD":case "GRADS":case "GRADIAN":case "GRADIANS":return 5}throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.LogicError,null,{reason:"unsupported units"});}function g(T,N,K){var W=null;switch(N){case 1:W=B.preciseMultiply(T,3600);break;case 2:W=T;break;case 5:W=B.preciseMultiply(T,3240);break;case 4:W=
B.preciseMultiply(T,L);break;default:throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}switch(K){case 1:return B.preciseDivide(W,3600);case 2:return W;case 5:return B.preciseDivide(W,3240);case 4:return W/L;default:throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}}function b(T){u.assertIsSome(T);switch(T){case 1:case 6:case 3:return 1;case 5:return 5;case 7:return 7;case 4:return 4;
case 2:case 8:return 2}}function w(T){switch(c.toNumber(T)){case 1:return{first:0,second:1};case 2:return{first:2,second:1};case 3:return{first:2,second:3};case 4:return{first:0,second:3}}return null}function x(T){switch(T.toUpperCase().trim()){case "N":case "NORTH":return 0;case "E":case "EAST":return 1;case "S":case "SOUTH":return 2;case "W":case "WEST":return 3}return null}function z(T){T=parseFloat(T);if(c.isNumber(T)){if(isNaN(T))throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.LogicError,
null,{reason:"invalid conversion"});return T}throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}function D(T,N,K){var W=3===K,da=null,fa=null,ha=0,ra=0;ra=0;if(W){if(2>T.length)throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});ra=1;(fa=w(c.toString(T[T.length-1])))?(da=fa.first,fa=fa.second):(ha=1,da=x(c.toString(T[0])),fa=x(c.toString(T[T.length-1])));if(null===da||null===fa)throw new e.ArcadeExecutionError(null,
e.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}switch(N){case 1:case 4:case 5:if(0===T.length)break;return W?Y.createFromAngleMeridianAndDirection(aa.createFromAngleAndUnits(z(T[ha]),b(N)),da,fa):Y.createFromAngleAndDirection(aa.createFromAngleAndUnits(z(T[ha]),b(N)),K);case 3:ra=T.length-ra-ha;if(3===ra)return T=aa.createFromDegreesMinutesSeconds(z(T[ha]),z(T[ha+1]),z(T[ha+2])),W?Y.createFromAngleMeridianAndDirection(T,da,fa):Y.createFromAngleAndDirection(T,K);if(1===ra)return T=
z(T[ha]),T=J.numberToDms(T),T=aa.createFromDegreesMinutesSeconds(T.m_degrees,T.m_minutes,T.m_seconds),W?Y.createFromAngleMeridianAndDirection(T,da,fa):Y.createFromAngleAndDirection(T,K)}throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}function E(T){for(var N=[" ","-","/","'",'"',"\\","^","\u00b0",M,"\t","\r","\n","*"],K="",W=0;W<T.length;W++){var da=T.charAt(W);K=N.includes(da)?K+"RRSPLITRRSPLITRR":K+da}return K.split("RRSPLITRRSPLITRR").filter(function(fa){return""!==
fa})}function C(T,N,K){for(var W={padding:0,rounding:0,newpos:N},da=!1;N<T.length;){var fa=T[N];if(fa===K)da?W.rounding++:W.padding++,N++;else if("."===fa)da=!0,N++;else break}W.newpos=N-1;return W}Object.defineProperty(B,"__esModule",{value:!0});B.convertDirection=B.preciseDivide=B.preciseMultiply=B.preciseMinus=B.preciseAdd=void 0;var y=function(T){return function(N,K,W){W=W||14;return+T(N,K).toFixed(W)}},v=function(T,N){return T+N},A=function(T,N){return T-N},G=function(T,N){return T*N},F=function(T,
N){return T/N};B.preciseAdd=function(T,N,K){return y(v)(T,N,K)};B.preciseMinus=function(T,N,K){return y(A)(T,N,K)};B.preciseMultiply=function(T,N,K){return y(G)(T,N,K)};B.preciseDivide=function(T,N,K){return y(F)(T,N,K)};var H=2*Math.PI,L=648E3/Math.PI,M=String.fromCharCode(7501),Q;(function(T){T[T.north=0]="north";T[T.east=1]="east";T[T.south=2]="south";T[T.west=3]="west"})(Q||(Q={}));var S;(function(T){T[T.decimal_degrees=1]="decimal_degrees";T[T.seconds=2]="seconds";T[T.degrees_minutes_seconds=
3]="degrees_minutes_seconds";T[T.radians=4]="radians";T[T.gradians=5]="gradians";T[T.truncated_degrees=6]="truncated_degrees";T[T.fractional_degree_minutes=7]="fractional_degree_minutes";T[T.fractional_minute_seconds=8]="fractional_minute_seconds"})(S||(S={}));var I;(function(T){T[T.north_azimuth=1]="north_azimuth";T[T.polar=2]="polar";T[T.quadrant=3]="quadrant";T[T.south_azimuth=4]="south_azimuth"})(I||(I={}));var P;(function(T){T[T.meridian=0]="meridian";T[T.direction=1]="direction"})(P||(P={}));
var J=function(){function T(N,K,W){this.m_degrees=N;this.m_minutes=K;this.m_seconds=W}T.prototype.getField=function(N){switch(N){case 1:case 6:return this.m_degrees;case 7:return this.m_minutes;case 2:case 8:return this.m_seconds;default:throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}};T.secondsToDMS=function(N){var K=q(N).fraction;N=q(N).integer;var W=Math.floor(N/3600);N-=3600*W;var da=Math.floor(N/60);return new T(W,da,N-60*da+K)};
T.numberToDms=function(N){var K=q(N).fraction;N=q(N).integer;var W=B.preciseMultiply(q(100*K).fraction,100);K=q(100*K).integer;return new T(N,K,W)};T.prototype.format=function(N,K){K=d(this.m_seconds,K);var W=this.m_minutes,da=this.m_degrees;if(2===N||8===N)60<=K&&(K-=60,++W),60<=W&&(W=0,++da),360<=da&&(da=0);else if(7===N)K=0,W=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,da=this.m_degrees,60<=W&&(W=0,++da),360<=da&&(da=0);else if(1===N||6===N)N=B.preciseDivide(this.m_seconds,3600),K=B.preciseDivide(this.m_minutes,
60),da=Math.round(this.m_degrees+K+N),K=W=0;return new T(da,W,K)};T.dmsToSeconds=function(N,K,W){return 3600*N+60*K+W};return T}(),U=function(){function T(N,K,W){this.meridian=N;this.angle=K;this.direction=W}T.prototype.fetchAzimuth=function(N){return N===P.meridian?this.meridian:this.direction};return T}(),Y=function(){function T(N){this._angle=N}T.createFromAngleAndDirection=function(N,K){return new T(new aa(T._convertDirectionFormat(N.extractAngularUnits(2),K,1)))};T.prototype.getAngle=function(N){var K=
this._angle.extractAngularUnits(2);switch(N){case 1:case 4:case 2:return N=new aa(T._convertDirectionFormat(K,1,N));case 3:return N=T.secondsNorthAzimuthToQuadrant(K),N=new aa(N.angle)}};T.prototype.getMeridian=function(N){var K=this._angle.extractAngularUnits(2);switch(N){case 1:return 0;case 4:return 2;case 2:return 1;case 3:return T.secondsNorthAzimuthToQuadrant(K).meridian}};T.prototype.getDirection=function(N){var K=this._angle.extractAngularUnits(2);switch(N){case 1:return 1;case 4:return 3;
case 2:return 0;case 3:return T.secondsNorthAzimuthToQuadrant(K).direction}};T.secondsNorthAzimuthToQuadrant=function(N){var K=324E3>=N||972E3<=N?0:2;return new U(K,0===K?Math.min(1296E3-N,N):Math.abs(N-648E3),648E3<N?3:1)};T.createFromAngleMeridianAndDirection=function(N,K,W){return new T(new aa(T.secondsQuadrantToNorthAzimuth(N.extractAngularUnits(2),K,W)))};T.secondsQuadrantToNorthAzimuth=function(N,K,W){return 0===K?1===W?N:1296E3-N:1===W?648E3-N:648E3+N};T._convertDirectionFormat=function(N,
K,W){var da=0;switch(K){case 1:da=N;break;case 2:da=324E3-N;break;case 3:throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});case 4:da=N+648E3}N=0;switch(W){case 1:N=da;break;case 2:N=324E3-da;break;case 3:throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});case 4:N=da-648E3}N%=1296E3;return 0>N?1296E3+N:N};return T}(),aa=function(){function T(N){this._seconds=N}T.createFromAngleAndUnits=
function(N,K){return new T(g(N,K,2))};T.prototype.extractAngularUnits=function(N){return g(this._seconds,2,b(N))};T.createFromDegreesMinutesSeconds=function(N,K,W){return new T(B.preciseAdd(B.preciseAdd(B.preciseMultiply(N,3600),B.preciseMultiply(K,60)),W))};return T}(),la=function(){function T(N,K,W,da){this.view=N;this.angle=K;this.merdian=W;this.direction=da;this._formattedDms=this._dms=null}T.createFromStringAndBearing=function(N,K,W){return new T(N,K.getAngle(W),K.getMeridian(W),K.getDirection(W))};
T.prototype.fetchAngle=function(){return this.angle};T.prototype.fetchMeridian=function(){return this.merdian};T.prototype.fetchDirection=function(){return this.direction};T.prototype.fetchView=function(){return this.view};T.prototype.fetchDms=function(){null===this._dms&&this._calculateDms();return this._dms};T.prototype.fetchFormattedDms=function(){null===this._formattedDms&&this._calculateDms();return this._formattedDms};T.prototype._calculateDms=function(){var N=null,K=6,W=0;for(N=0;N<this.view.length;N++){var da=
this.view[N];switch(da){case "m":N=C(this.view,N,da);K=6===K?7:K;N=N.newpos;continue;case "s":N=C(this.view,N,da),K=8,W=W<N.rounding?N.rounding:W,N=N.newpos}}this._dms=J.secondsToDMS(this.angle.extractAngularUnits(2));this._formattedDms=J.secondsToDMS(this.angle.extractAngularUnits(2)).format(K,W)};return T}();B.convertDirection=function(T,N,K){if(!(N instanceof l))throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.InvalidParameter,null);if(!1===N.hasField("directionType"))throw new e.ArcadeExecutionError(null,
e.ExecutionErrorCodes.LogicError,null,{reason:"missing directionType"});if(!1===N.hasField("angleType"))throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.LogicError,null,{reason:"missing angleType"});var W=r(t(N.field("directiontype")));N=k(t(N.field("angletype")));if(c.isNumber(T)){T=c.toNumber(T);if(3===W)throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});3===N?(T=J.numberToDms(T),N=Y.createFromAngleAndDirection(aa.createFromDegreesMinutesSeconds(T.m_degrees,
T.m_minutes,T.m_seconds),W)):N=Y.createFromAngleAndDirection(aa.createFromAngleAndUnits(T,b(N)),W)}else if(c.isString(T))N=D(E(T),N,W);else if(c.isArray(T))N=D(T,N,W);else if(c.isImmutableArray(T))N=D(T.toArray(),N,W);else throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});if(!(K instanceof l))throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.InvalidParameter,null);if(!1===K.hasField("directionType"))throw new e.ArcadeExecutionError(null,
e.ExecutionErrorCodes.LogicError,null,{reason:"missing directionType"});if(!1===K.hasField("outputType"))throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.LogicError,null,{reason:"missing angleType"});W=r(t(K.field("directiontype")));T=K.hasField("angleType")?k(t(K.field("angletype"))):null;var da=t(K.field("outputType")).toUpperCase().trim();if(!W||!da)throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});if(!(T||"TEXT"===da&&K.hasField("format")))throw new e.ArcadeExecutionError(null,
e.ExecutionErrorCodes.LogicError,null,{reason:"invalid unit"});switch(da){case "VALUE":if(3===W||3===T)return K=N,N=K.getAngle(W),3===W&&3===T?(T=J.secondsToDMS(N.extractAngularUnits(2)),W=[m(K.getMeridian(W),"SHORT"),T.m_degrees,T.m_minutes,T.m_seconds,m(K.getDirection(W),"SHORT")]):3===T?(T=J.secondsToDMS(N.extractAngularUnits(2)),W=[T.m_degrees,T.m_minutes,T.m_seconds]):W=3===W?[m(K.getMeridian(W),"SHORT"),N.extractAngularUnits(T),m(K.getDirection(W),"SHORT")]:[N.extractAngularUnits(T)],W;K=N;
if((N=b(T))&&3!==T)W=K.getAngle(W).extractAngularUnits(N);else throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});return W;case "TEXT":da="";K.hasField("format")&&(da=c.toString(K.field("format")));if(null===da||""===da){K="";switch(T){case 1:K=3===W?"DD.DD\u00b0":"DDD.DD\u00b0";break;case 3:K=3===W?"dd\u00b0 mm' ss\"":"ddd\u00b0 mm' ss.ss\"";break;case 4:K="R.RR";break;case 5:K="GGG.GG"+M;break;default:throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.LogicError,
null,{reason:"conversion error"});}3===W&&(K="p "+K+" b");da=K}K=N;T=da;var fa="",ha=null,ra=null;N=la.createFromStringAndBearing(T,K,W);da={D:1,d:6,m:7,s:8,R:4,G:5};for(ra=0;ra<T.length;ra++){var za=T[ra];switch(za){case "[":ha=T;za={escaped:"",newpos:ra};for(ra++;ra<ha.length;){var Da=ha[ra];ra++;if("]"===Da)break;za.escaped+=Da}za.newpos=ra-1;ha=za;fa+=ha.escaped;ra=ha.newpos;continue;case "D":case "d":case "m":case "s":case "R":case "G":ha=C(T,ra,za);ra=K.getAngle(W);a:{za=da[za];Da=ha.padding;
var va=ha.rounding,Ga=N,ba=null;switch(za){case 1:case 4:case 5:ba=h(d(ra.extractAngularUnits(za),va),n(za));ra=a(ba.toFixed(va),"0",Da+va+(0<va?1:0));break a;case 6:case 7:ba=h(Ga.fetchFormattedDms().getField(za),n(za));ra=a(ba.toFixed(va),"0",Da+va+(0<va?1:0));break a;case 8:ba=h(d(Ga.fetchDms().getField(za),va),n(za));ra=a(ba.toFixed(va),"0",Da+va+(0<va?1:0));break a;default:throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}}fa+=ra;ra=
ha.newpos;continue;case "P":case "p":fa+=m(N.fetchMeridian(),"p"===za?"SHORT":"LONG");continue;case "B":case "b":fa+=m(N.fetchDirection(),"b"===za?"SHORT":"LONG");continue;default:fa+=za}}return fa;default:throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.InvalidParameter,null);}}})},"esri/arcade/functions/hash":function(){define(["require","exports"],function(f,B){function l(e){for(var c=[],u=0,t=e.length;u<t;u++){var d=e.charCodeAt(u);128>d?c.push(d):2048>d?c.push(192|d>>6,128|d&63):55296>
d||57344<=d?c.push(224|d>>12,128|d>>6&63,128|d&63):(u++,d=65536+((d&1023)<<10|e.charCodeAt(u)&1023),c.push(240|d>>18,128|d>>12&63,128|d>>6&63,128|d&63))}return new Uint8Array(c)}Object.defineProperty(B,"__esModule",{value:!0});B.XXH=void 0;f=function(){function e(c){this._seed=c;this._totallen=0;this._bufs=[];this.init()}e.prototype.init=function(){this._bufs=[];this._totallen=0;return this};e.prototype.updateFloatArray=function(c){for(var u=[],t=0;t<c.length;t++){var d=c[t];isNaN(d)?u.push("NaN"):
Infinity===d?u.push("Infinity"):-Infinity===d?u.push("-Infinity"):0===d?u.push("0"):u.push(d.toString(16))}this.update(l(u.join("")))};e.prototype.updateIntArray=function(c){c=Int32Array.from(c);this.update(new Uint8Array(c.buffer))};e.prototype.updateUint8Array=function(c){this.update(Uint8Array.from(c))};e.prototype.updateWithString=function(c){return this.update(l(c))};e.prototype.update=function(c){this._bufs.push(c);this._totallen+=c.length;return this};e.prototype.digest=function(){for(var c=
new Uint8Array(this._totallen),u=0,t=0,d=this._bufs;t<d.length;t++){var q=d[t];c.set(q,u);u+=q.length}this.init();return this._xxHash32(c,this._seed)};e.prototype._xxHash32=function(c,u){void 0===u&&(u=0);var t=u+374761393&4294967295,d=0;if(16<=c.length){t=[u+2654435761+2246822519&4294967295,u+2246822519&4294967295,u+0&4294967295,u-2654435761&4294967295];var q=c.length-16;for(d=u=0;(d&4294967280)<=q;d+=4){var m=d,a=c[m+0]+(c[m+1]<<8);m=c[m+2]+(c[m+3]<<8);a=t[u]+(2246822519*a+(2246822519*m<<16))&4294967295;
a=a<<13|a>>>19;t[u]=2654435761*(a&65535)+(2654435761*(a>>>16)<<16)&4294967295;u=u+1&3}t=(t[0]<<1|t[0]>>>31)+(t[1]<<7|t[1]>>>25)+(t[2]<<12|t[2]>>>20)+(t[3]<<18|t[3]>>>14)&4294967295}t=t+c.length&4294967295;for(u=c.length-4;d<=u;d+=4)m=d,a=c[m+0]+(c[m+1]<<8),m=c[m+2]+(c[m+3]<<8),t=t+(3266489917*a+(3266489917*m<<16))&4294967295,t=t<<17|t>>>15,t=668265263*(t&65535)+(668265263*(t>>>16)<<16)&4294967295;for(;d<c.length;++d)u=c[d],t+=374761393*u,t=t<<11|t>>>21,t=2654435761*(t&65535)+(2654435761*(t>>>16)<<
16)&4294967295;t^=t>>>15;t=(2246822519*(t&65535)&4294967295)+(2246822519*(t>>>16)<<16);t^=t>>>13;t=(3266489917*(t&65535)&4294967295)+(3266489917*(t>>>16)<<16);t^=t>>>16;return 0>t?t+4294967296:t};return e}();B.XXH=f})},"esri/arcade/ArcadeModuleLoader":function(){define(["require","exports"],function(f,B){Object.defineProperty(B,"__esModule",{value:!0});B.ArcadeModuleLoader=void 0;f=function(){function l(e,c){this._moduleSingletons=e;this._syntaxModules=c}l.prototype.loadLibrary=function(e){return null==
this._syntaxModules?null:(e=this._syntaxModules[e.toLowerCase()])?{syntax:e.script,uri:e.uri}:null};return l}();B.ArcadeModuleLoader=f})},"esri/arcade/ArcadeModuleResolver":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ../request ./parser ./featureset/support/RecentlyUsedCache ./executionError".split(" "),function(f,B,l,e,c,u,t,d,q,m){Object.defineProperty(B,"__esModule",{value:!0});B.ArcadeModuleResolver=
void 0;f=function(){function a(h){this.portalUri=h}a.prototype.extractRegexGroups=function(h,n){for(var r=[],k=0;k<n.length;k++)r[n[k]]="";k=0;for(var g=1;g<h.length;g++){var b=h[g];if(null!==b&&void 0!==b&&(r[n[k]]=b,k++,k>=n.length))break}return r};a.prototype.normalizeModuleUri=function(h){var n=/^[a-z0-9A-Z]+(@[0-9]+\.[0-9]+\.[0-9]+)?([\?|\/].*)?$/gi,r=/(.+)\/home\/item\.html\?id=(.+)$/gi,k=/(.+)\/sharing\/rest\/content\/users\/[a-zA-Z0-9]+\/items\/(.+)$/gi,g=/(.+)\/sharing\/rest\/content\/items\/(.+)$/gi,
b=/(.*)@([0-9]+\.[0-9]+\.[0-9]+)([\?|\/].*)?$/gi;if(h.startsWith("portal+")){var w=h.substring(7),x="",z=w,D=!1,E=0;for(r=[r,g,k];E<r.length;E++)if(k=r[E].exec(w),null!==k){D=this.extractRegexGroups(k,["portalurl","itemid"]);z=D.itemid;x=D.portalurl;D=!0;break}if(!1===D)if(n.test(w))z=w,x=this.portalUri;else throw new m.ModuleError(m.ModuleErrorCodes.UnsupportedUriProtocol,{uri:h});z.includes("/")&&(z=z.split("/")[0]);z.includes("?")&&(z=z.split("?")[0]);h="current";b=b.exec(z);null!==b&&(D=this.extractRegexGroups(b,
["itemid","versionstring"]),z=D.itemid,h=D.versionstring);x=(w||x).replace(/\/+$/,"");w=(-1!==x.indexOf("/sharing")?x+"/":x+"/sharing/rest/")+"content/items/"+z+"/resources/"+h+".arc";return{url:w,scheme:"portal",uri:"PO:"+w}}if(h.startsWith("mock")){if("mock"===h)return{url:"",scheme:"mock",data:'\n      export var hello \x3d 1;\n      export function helloWorld() {\n          return "Hello World " + hello;\n      }\n  ',uri:"mock"};w=h.replace("mock:","");if(void 0!==a.mocks[w])return{url:"",scheme:"mock",
data:a.mocks[w],uri:h}}throw new m.ModuleError(m.ModuleErrorCodes.UnrecognisedUri,{uri:h});};a.prototype.fetchModule=function(h){return l(this,void 0,void 0,function(){var n,r,k,g;return e(this,function(b){switch(b.label){case 0:if(n=a.cachedModules.getFromCache(h.uri))return[2,n];r=this.fetchSource(h);a.cachedModules.addToCache(h.uri,r);k=null;b.label=1;case 1:return b.trys.push([1,3,,4]),[4,r];case 2:return k=b.sent(),[3,4];case 3:throw g=b.sent(),a.cachedModules.removeFromCache(h.uri),g;case 4:return[2,
k]}})})};a.prototype.fetchSource=function(h){var n;return l(this,void 0,void 0,function(){var r;return e(this,function(k){switch(k.label){case 0:return"portal"!==h.scheme?[3,2]:[4,t({url:h.url,handleAs:"text",content:{},callbackParamName:"callback"})];case 1:if(r=k.sent())return[2,d.parseScript(r,[])];k.label=2;case 2:if("mock"===h.scheme)return[2,d.parseScript(null!==(n=h.data)&&void 0!==n?n:"",[])];throw new m.ModuleError(m.ModuleErrorCodes.UnsupportedUriProtocol);}})})};a.create=function(h){return new a(h)};
a.getDefault=function(){var h;return null!==(h=this._default)&&void 0!==h?h:a._default=a._moduleResolverFactory()};Object.defineProperty(a,"moduleResolverClass",{set:function(h){this._moduleResolverFactory=h;this._default=null},enumerable:!1,configurable:!0});a.mocks={};a.cachedModules=new q(30);a._default=null;a._moduleResolverFactory=function(){return new a("https://www.arcgis.com")};return a}();B.ArcadeModuleResolver=f})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis",
"./lib/arcade-parser","./lib/arcade-parser"],function(f,B,l,e,c){Object.defineProperty(B,"__esModule",{value:!0});B.parseScript=void 0;B.parseScript=function(u,t){void 0===t&&(t=[]);u=e.parse(u);if(null===u.body||void 0===u.body)throw new c.ParsingError({index:0,line:0,column:0,data:null,description:"",code:c.ParsingErrorCodes.InvalidExpression});if(0===u.body.length)throw new c.ParsingError({index:0,line:0,column:0,data:null,description:"",code:c.ParsingErrorCodes.InvalidExpression});if(0===u.body.length)throw new c.ParsingError({index:0,
line:0,column:0,data:null,description:"",code:c.ParsingErrorCodes.InvalidExpression});u.loadedModules={};l.findScriptDependencies(u,t);return u}})},"esri/arcade/lib/arcade-parser":function(){define("require exports ../polyfill/tsSupport/exportstar ./parser ./tokenizer ./types".split(" "),function(f,B,l,e,c,u){Object.defineProperty(B,"__esModule",{value:!0});B.tokenize=B.parse=void 0;l(u,B);B.parse=function(t,d,q){return(new e.Parser(t,d,q)).parseScript()};B.tokenize=function(t,d,q){t=new c.Tokenizer(t,
d);d=[];var m=void 0;try{for(var a=void 0;a=t.getNextToken();)q&&(a=q(a)),d.push(a)}catch(h){t.errorHandler.tolerate(h)}t.errorHandler.tolerant&&(m=t.errors());return{tokens:d,errors:m}}})},"esri/arcade/polyfill/tsSupport/exportstar":function(){define([],function(){return function(){var f=this&&this.__createBinding||(Object.create?function(B,l,e,c){void 0===c&&(c=e);Object.defineProperty(B,c,{enumerable:!0,get:function(){return l[e]}})}:function(B,l,e,c){void 0===c&&(c=e);B[c]=l[e]});return function(B,
l){for(var e in B)"default"===e||Object.prototype.hasOwnProperty.call(l,e)||f(l,B,e)}}()})},"esri/arcade/lib/parser":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../polyfill/tsSupport/extends ./comment-handler ./error-handler ./scanner ./types".split(" "),function(f,B,l,e,c,u,t,d,q){function m(k,g){void 0===g&&(g=0);var b=k.start-k.lineStart,w=k.lineNumber;0>b&&(b+=g,w--);return{index:k.start,line:w,column:b}}function a(k){return[l({index:k.range[0]},
k.loc.start),l({index:k.range[1]},k.loc.end)]}function h(k){var g;return null!==(g=q.OperatorPrecedence[k])&&void 0!==g?g:0}Object.defineProperty(B,"__esModule",{value:!0});B.Parser=B.binaryOperatorPrecedence=void 0;var n;(function(k){k[k.None=0]="None";k[k.Function=1]="Function";k[k.IfClause=2]="IfClause";k[k.ForLoop=4]="ForLoop";k[k.WhileLoop=8]="WhileLoop"})(n||(n={}));var r;(function(k){k[k.AsObject=0]="AsObject";k[k.Automatic=1]="Automatic"})(r||(r={}));B.binaryOperatorPrecedence=h;f=function(){function k(g,
b,w){void 0===b&&(b={});this.delegate=w;this.hasLineTerminator=!1;this.options={tokens:"boolean"===typeof b.tokens&&b.tokens,comments:"boolean"===typeof b.comments&&b.comments,tolerant:"boolean"===typeof b.tolerant&&b.tolerant};this.options.comments&&(this.commentHandler=new u.CommentHandler);this.errorHandler=new t.ErrorHandler(this.options.tolerant);this.scanner=new d.Scanner(g,this.errorHandler);this.context={isAssignmentTarget:!1,blockContext:n.None,curlyParsingType:r.AsObject};this.rawToken=
{type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};this.endMarker={index:0,line:this.scanner.lineNumber,column:0};this.readNextRawToken();this.endMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}k.prototype.throwIfInvalidType=function(g,b,w){var x=w.validTypes;w=w.invalidTypes;(null===x||void 0===x?0:x.some(function(z){return g.type===
z}))||null!==w&&void 0!==w&&w.some(function(z){return g.type===z})&&this.throwError(q.ParsingErrorCodes.InvalidExpression,b)};k.prototype.throwError=function(g,b,w){void 0===w&&(w=this.endMarker);var x=b.index;this.errorHandler.throwError({code:g,index:x,line:b.line,column:b.column+1,len:w.index-x-1})};k.prototype.tolerateError=function(g,b){throw Error("######################################### !!!");};k.prototype.unexpectedTokenError=function(g){void 0===g&&(g={});var b=g.rawToken,w=g.code;g=g.data;
if(b){if(!w)switch(b.type){case 2:w=q.ParsingErrorCodes.UnexpectedEndOfScript;break;case 3:w=q.ParsingErrorCodes.UnexpectedIdentifier;break;case 6:w=q.ParsingErrorCodes.UnexpectedNumber;break;case 8:w=q.ParsingErrorCodes.UnexpectedString;break;case 10:w=q.ParsingErrorCodes.UnexpectedTemplate}var x=b.value.toString()}else x="ILLEGAL";w=null!==w&&void 0!==w?w:q.ParsingErrorCodes.UnexpectedToken;g||(g={value:x});x=t.formatErrorDescription(w,g);if(b)return new q.ParsingError({code:w,index:b.start,line:b.lineNumber,
column:b.start-b.lineStart+1,len:b.end-b.start-1,data:g,description:x});b=this.endMarker;return new q.ParsingError({code:w,index:b.index,line:b.line,column:this.endMarker.column+1,data:g,description:x})};k.prototype.throwUnexpectedToken=function(g){var b;void 0===g&&(g={});g.rawToken=null!==(b=g.rawToken)&&void 0!==b?b:this.rawToken;throw this.unexpectedTokenError(g);};k.prototype.collectComments=function(g){var b=this,w=this.commentHandler;w&&g.length&&g.forEach(function(x){x={type:x.multiLine?"BlockComment":
"LineComment",value:b.getSourceValue(x),range:x.range,loc:x.loc};w.collectComment(x)})};k.prototype.peekAhead=function(g){var b=this,w=this.scanner.saveState();g=g.call(this,function(){b.scanner.scanComments();return b.scanner.lex()});this.scanner.restoreState(w);return g};k.prototype.getSourceValue=function(g){return this.scanner.source.slice(g.start,g.end)};k.prototype.convertToToken=function(g){return{type:q.TokenNames[g.type],value:this.getSourceValue(g),range:[g.start,g.end],loc:{start:{line:this.startMarker.line,
column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}}};k.prototype.readNextRawToken=function(){this.endMarker.index=this.scanner.index;this.endMarker.line=this.scanner.lineNumber;this.endMarker.column=this.scanner.index-this.scanner.lineStart;var g=this.rawToken;this.collectComments(this.scanner.scanComments());this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,
this.startMarker.column=this.scanner.index-this.scanner.lineStart);this.rawToken=this.scanner.lex();this.hasLineTerminator=g.lineNumber!==this.rawToken.lineNumber;this.options.tokens&&2!==this.rawToken.type&&this.tokens.push(this.convertToToken(this.rawToken))};k.prototype.captureStartMarker=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};k.prototype.getItemLocation=function(g){return{range:[g.index,this.endMarker.index],loc:{start:{line:g.line,
column:g.column},end:{line:this.endMarker.line,column:this.endMarker.column}}}};k.prototype.finalize=function(g){var b,w;if(this.delegate||this.commentHandler)null===(b=this.commentHandler)||void 0===b?void 0:b.attachComments(g),null===(w=this.delegate)||void 0===w?void 0:w.call(this,g);return g};k.prototype.expectPunctuator=function(g){var b=this.rawToken;this.matchPunctuator(g)?this.readNextRawToken():this.throwUnexpectedToken({rawToken:b,code:q.ParsingErrorCodes.PunctuatorExpected,data:{value:g}})};
k.prototype.expectKeyword=function(g){4===this.rawToken.type&&this.rawToken.value.toLowerCase()===g?this.readNextRawToken():this.throwUnexpectedToken({rawToken:this.rawToken})};k.prototype.expectContextualKeyword=function(g){3===this.rawToken.type&&this.rawToken.value.toLowerCase()===g?this.readNextRawToken():this.throwUnexpectedToken({rawToken:this.rawToken})};k.prototype.matchKeyword=function(g){return 4===this.rawToken.type&&this.rawToken.value.toLowerCase()===g};k.prototype.matchContextualKeyword=
function(g){return 3===this.rawToken.type&&this.rawToken.value===g};k.prototype.matchPunctuator=function(g){return 7===this.rawToken.type&&this.rawToken.value===g};k.prototype.getMatchingPunctuator=function(g){"string"===typeof g&&(g=g.split(""));if(7===this.rawToken.type&&null!==g&&void 0!==g&&g.length)return g.find(this.matchPunctuator,this)};k.prototype.isolateCoverGrammar=function(g){var b=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;g=g.call(this);this.context.isAssignmentTarget=
b;return g};k.prototype.inheritCoverGrammar=function(g){var b=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;g=g.call(this);this.context.isAssignmentTarget=this.context.isAssignmentTarget&&b;return g};k.prototype.withBlockContext=function(g,b){var w=this.context.blockContext;this.context.blockContext|=g;g=this.context.curlyParsingType;this.context.curlyParsingType=r.Automatic;b=b.call(this);this.context.blockContext=w;this.context.curlyParsingType=g;return b};k.prototype.consumeSemicolon=
function(){this.matchPunctuator(";")?this.readNextRawToken():this.hasLineTerminator||(2===this.rawToken.type||this.matchPunctuator("}")?(this.endMarker.index=this.startMarker.index,this.endMarker.line=this.startMarker.line,this.endMarker.column=this.startMarker.column):this.throwUnexpectedToken({rawToken:this.rawToken}))};k.prototype.parsePrimaryExpression=function(){var g=this.captureStartMarker(),b=this.rawToken;switch(b.type){case 3:return this.readNextRawToken(),this.finalize(l({type:"Identifier",
name:b.value},this.getItemLocation(g)));case 6:case 8:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize(l({type:"Literal",value:b.value,raw:this.getSourceValue(b),isString:"string"===typeof b.value},this.getItemLocation(g)));case 1:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize(l({type:"Literal",value:b.value.toLowerCase()===q.Keywords.True,raw:this.getSourceValue(b),isString:!1},this.getItemLocation(g)));case 5:return this.context.isAssignmentTarget=
!1,this.readNextRawToken(),this.finalize(l({type:"Literal",value:null,raw:this.getSourceValue(b),isString:!1},this.getItemLocation(g)));case 10:return this.parseTemplateLiteral();case 7:switch(b.value){case "(":return this.inheritCoverGrammar(this.parseGroupExpression);case "[":return this.inheritCoverGrammar(this.parseArrayInitializer);case "{":return this.inheritCoverGrammar(this.parseObjectExpression);default:return this.throwUnexpectedToken({rawToken:this.rawToken})}case 4:return this.context.isAssignmentTarget=
!1,this.throwUnexpectedToken({rawToken:this.rawToken});default:return this.throwUnexpectedToken({rawToken:this.rawToken})}};k.prototype.parseArrayInitializer=function(){var g=this.captureStartMarker();this.expectPunctuator("[");for(var b=[];!this.matchPunctuator("]");){var w=this.captureStartMarker();this.matchPunctuator(",")?(this.readNextRawToken(),this.throwError(q.ParsingErrorCodes.InvalidExpression,w)):(b.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.matchPunctuator("]")||
this.expectPunctuator(","))}this.expectPunctuator("]");return this.finalize(l({type:"ArrayExpression",elements:b},this.getItemLocation(g)))};k.prototype.parseObjectPropertyKey=function(){var g=this.captureStartMarker(),b=this.rawToken;switch(b.type){case 8:return this.readNextRawToken(),this.finalize(l({type:"Literal",value:b.value,raw:this.getSourceValue(b),isString:!0},this.getItemLocation(g)));case 3:case 1:case 5:case 4:return this.readNextRawToken(),this.finalize(l({type:"Identifier",name:b.value},
this.getItemLocation(g)));default:this.throwError(q.ParsingErrorCodes.KeyMustBeString,g)}};k.prototype.parseObjectProperty=function(){var g=this.rawToken,b=this.captureStartMarker(),w=this.parseObjectPropertyKey(),x=!1,z=null;this.matchPunctuator(":")?(this.readNextRawToken(),z=this.inheritCoverGrammar(this.parseAssignmentExpression)):3===g.type?(x=!0,z=this.finalize(l({type:"Identifier",name:g.value},this.getItemLocation(b)))):this.throwUnexpectedToken({rawToken:this.rawToken});return this.finalize(l({type:"Property",
kind:"init",key:w,value:z,shorthand:x},this.getItemLocation(b)))};k.prototype.parseObjectExpression=function(){var g=this.captureStartMarker();this.expectPunctuator("{");for(var b=[];!this.matchPunctuator("}");)b.push(this.parseObjectProperty()),this.matchPunctuator("}")||this.expectPunctuator(",");this.expectPunctuator("}");return this.finalize(l({type:"ObjectExpression",properties:b},this.getItemLocation(g)))};k.prototype.parseTemplateElement=function(g){void 0===g&&(g=!1);var b=this.rawToken;10!==
b.type&&this.throwUnexpectedToken({rawToken:b});g&&!b.head&&this.throwUnexpectedToken({code:q.ParsingErrorCodes.InvalidTemplateHead,rawToken:b});var w=this.captureStartMarker();this.readNextRawToken();g=b.tail;b=this.finalize(l({type:"TemplateElement",value:{raw:b.value,cooked:b.cooked},tail:g},this.getItemLocation(w)));b.loc.start.column++;b.loc.end.column-=g?1:2;return b};k.prototype.parseTemplateLiteral=function(){var g=this.captureStartMarker(),b=[],w=[],x=this.parseTemplateElement(!0);for(w.push(x);!x.tail;)b.push(this.parseExpression()),
x=this.parseTemplateElement(),w.push(x);return this.finalize(l({type:"TemplateLiteral",quasis:w,expressions:b},this.getItemLocation(g)))};k.prototype.parseGroupExpression=function(){this.expectPunctuator("(");var g=this.inheritCoverGrammar(this.parseAssignmentExpression);this.expectPunctuator(")");return g};k.prototype.parseArguments=function(){this.expectPunctuator("(");var g=[];if(!this.matchPunctuator(")"))for(;;){var b=this.isolateCoverGrammar(this.parseAssignmentExpression);g.push(b);if(this.matchPunctuator(")"))break;
this.expectPunctuator(",");if(this.matchPunctuator(")"))break}this.expectPunctuator(")");return g};k.prototype.parseMemberName=function(){var g=this.rawToken,b=this.captureStartMarker();this.readNextRawToken();5!==g.type&&3!==g.type&&4!==g.type&&1!==g.type&&this.throwUnexpectedToken({rawToken:g});return this.finalize(l({type:"Identifier",name:g.value},this.getItemLocation(b)))};k.prototype.parseLeftHandSideExpression=function(){for(var g=this.captureStartMarker(),b=this.inheritCoverGrammar(this.parsePrimaryExpression),
w=this.captureStartMarker(),x;x=this.getMatchingPunctuator("([.");)switch(x){case "(":this.context.isAssignmentTarget=!1;"Identifier"!==b.type&&"MemberExpression"!==b.type&&this.throwError(q.ParsingErrorCodes.IdentiferExpected,g,w);x=this.parseArguments();b=this.finalize(l({type:"CallExpression",callee:b,arguments:x},this.getItemLocation(g)));continue;case "[":this.context.isAssignmentTarget=!0;this.expectPunctuator("[");x=this.isolateCoverGrammar(this.parseExpression);this.expectPunctuator("]");
b=this.finalize(l({type:"MemberExpression",computed:!0,object:b,property:x},this.getItemLocation(g)));continue;case ".":this.context.isAssignmentTarget=!0,this.expectPunctuator("."),x=this.parseMemberName(),b=this.finalize(l({type:"MemberExpression",computed:!1,object:b,property:x},this.getItemLocation(g)))}return b};k.prototype.parseUpdateExpression=function(){var g=this.captureStartMarker(),b=this.getMatchingPunctuator(q.UpdateOperators);if(b){this.readNextRawToken();var w=this.captureStartMarker(),
x=this.inheritCoverGrammar(this.parseUnaryExpression);"Identifier"!==x.type&&"MemberExpression"!==x.type&&"CallExpression"!==x.type&&this.throwError(q.ParsingErrorCodes.InvalidExpression,w);this.context.isAssignmentTarget||this.tolerateError(q.ParsingErrorCodes.InvalidLeftHandSideInAssignment,g);this.context.isAssignmentTarget=!1;return this.finalize(l({type:"UpdateExpression",operator:b,argument:x,prefix:!0},this.getItemLocation(g)))}w=this.captureStartMarker();x=this.inheritCoverGrammar(this.parseLeftHandSideExpression);
var z=this.captureStartMarker();if(this.hasLineTerminator)return x;b=this.getMatchingPunctuator(q.UpdateOperators);if(!b)return x;"Identifier"!==x.type&&"MemberExpression"!==x.type&&this.throwError(q.ParsingErrorCodes.InvalidExpression,w,z);this.context.isAssignmentTarget||this.tolerateError(q.ParsingErrorCodes.InvalidLeftHandSideInAssignment,g);this.readNextRawToken();this.context.isAssignmentTarget=!1;return this.finalize(l({type:"UpdateExpression",operator:b,argument:x,prefix:!1},this.getItemLocation(g)))};
k.prototype.parseUnaryExpression=function(){var g=this.getMatchingPunctuator(q.UnaryOperators);if(g){var b=this.captureStartMarker();this.readNextRawToken();var w=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.isAssignmentTarget=!1;return this.finalize(l({type:"UnaryExpression",operator:g,argument:w,prefix:!0},this.getItemLocation(b)))}return this.parseUpdateExpression()};k.prototype.parseBinaryExpression=function(){var g=this.rawToken,b=this.inheritCoverGrammar(this.parseUnaryExpression);
if(7!==this.rawToken.type)return b;var w=this.rawToken.value,x=h(w);if(0===x)return b;this.readNextRawToken();this.context.isAssignmentTarget=!1;g=[g,this.rawToken];var z=this.inheritCoverGrammar(this.parseUnaryExpression);w=[b,w,z];for(var D=[x];7===this.rawToken.type&&0<(x=h(this.rawToken.value));){for(;2<w.length&&x<=D[D.length-1];){z=w.pop();var E=w.pop();D.pop();b=w.pop();g.pop();var C=g[g.length-1];C=m(C,C.lineStart);w.push(this.finalize(this.createBinaryOrLogicalExpression(C,E,b,z)))}w.push(this.rawToken.value);
D.push(x);g.push(this.rawToken);this.readNextRawToken();w.push(this.inheritCoverGrammar(this.parseUnaryExpression))}x=w.length-1;b=w[x];for(C=g.pop();1<x;){z=g.pop();if(!z)break;C=m(z,null===C||void 0===C?void 0:C.lineStart);b=this.finalize(this.createBinaryOrLogicalExpression(C,w[x-1],w[x-2],b));x-=2;C=z}return b};k.prototype.createBinaryOrLogicalExpression=function(g,b,w,x){var z=q.LogicalOperators.includes(b)?"LogicalExpression":"BinaryExpression";if("BinaryExpression"===z)return l({type:z,operator:b,
left:w,right:x},this.getItemLocation(g));"AssignmentExpression"!==w.type&&"UpdateExpression"!==w.type||this.throwError.apply(this,e([q.ParsingErrorCodes.InvalidExpression],a(w)));"AssignmentExpression"!==x.type&&"UpdateExpression"!==x.type||this.throwError.apply(this,e([q.ParsingErrorCodes.InvalidExpression],a(w)));return l({type:z,operator:b,left:w,right:x},this.getItemLocation(g))};k.prototype.parseAssignmentExpression=function(){var g=this.captureStartMarker(),b=this.inheritCoverGrammar(this.parseBinaryExpression),
w=this.captureStartMarker(),x=this.getMatchingPunctuator(q.AssignmentOperators);if(!x)return b;"Identifier"!==b.type&&"MemberExpression"!==b.type&&this.throwError(q.ParsingErrorCodes.InvalidExpression,g,w);this.context.isAssignmentTarget||this.tolerateError(q.ParsingErrorCodes.InvalidLeftHandSideInAssignment,g);this.matchPunctuator("\x3d")||(this.context.isAssignmentTarget=!1);this.readNextRawToken();w=this.isolateCoverGrammar(this.parseAssignmentExpression);return this.finalize(l({type:"AssignmentExpression",
left:b,operator:x,right:w},this.getItemLocation(g)))};k.prototype.parseExpression=function(){return this.isolateCoverGrammar(this.parseAssignmentExpression)};k.prototype.parseStatements=function(g){for(var b=[];2!==this.rawToken.type&&!this.matchPunctuator(g);){var w=this.parseStatementListItem();q.isEmptyStatement(w)||b.push(w)}return b};k.prototype.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;return this.matchKeyword(q.Keywords.Function)?this.parseFunctionDeclaration():this.matchKeyword(q.Keywords.Export)?
this.parseExportDeclaration():this.matchKeyword(q.Keywords.Import)?this.parseImportDeclaration():this.parseStatement()};k.prototype.parseBlock=function(){var g=this.captureStartMarker();this.expectPunctuator("{");var b=this.parseStatements("}");this.expectPunctuator("}");return this.finalize(l({type:"BlockStatement",body:b},this.getItemLocation(g)))};k.prototype.parseObjectStatement=function(){var g=this.captureStartMarker(),b=this.parseObjectExpression();return this.finalize(l({type:"ExpressionStatement",
expression:b},this.getItemLocation(g)))};k.prototype.parseBlockOrObjectStatement=function(){return this.context.curlyParsingType===r.AsObject||this.peekAhead(function(g){var b=g();if(3!==b.type&&8!==b.type)return!1;b=g();return 7!==b.type||":"!==b.value?!1:!0})?this.parseObjectStatement():this.parseBlock()};k.prototype.parseIdentifier=function(){var g=this.rawToken;if(3!==g.type)return null;var b=this.captureStartMarker();this.readNextRawToken();return this.finalize(l({type:"Identifier",name:g.value},
this.getItemLocation(b)))};k.prototype.parseVariableDeclarator=function(){var g=this.captureStartMarker(),b=this.parseIdentifier();b||this.throwUnexpectedToken({code:q.ParsingErrorCodes.IdentiferExpected});var w=null;if(this.matchPunctuator("\x3d")){this.readNextRawToken();var x=this.rawToken;try{w=this.isolateCoverGrammar(this.parseAssignmentExpression)}catch(z){this.throwUnexpectedToken({rawToken:x,code:q.ParsingErrorCodes.InvalidVariableAssignment})}}return this.finalize(l({type:"VariableDeclarator",
id:b,init:w},this.getItemLocation(g)))};k.prototype.parseVariableDeclarationList=function(){for(var g=[this.parseVariableDeclarator()];this.matchPunctuator(",");)this.readNextRawToken(),g.push(this.parseVariableDeclarator());return g};k.prototype.parseVariableDeclaration=function(){var g=this.captureStartMarker();this.expectKeyword(q.Keywords.Var);var b=this.parseVariableDeclarationList();this.consumeSemicolon();return this.finalize(l({type:"VariableDeclaration",declarations:b,kind:"var"},this.getItemLocation(g)))};
k.prototype.parseEmptyStatement=function(){var g=this.captureStartMarker();this.expectPunctuator(";");return this.finalize(l({type:"EmptyStatement"},this.getItemLocation(g)))};k.prototype.parseExpressionStatement=function(){var g=this.captureStartMarker(),b=this.parseExpression();this.consumeSemicolon();return this.finalize(l({type:"ExpressionStatement",expression:b},this.getItemLocation(g)))};k.prototype.parseIfClause=function(){return this.withBlockContext(n.IfClause,this.parseStatement)};k.prototype.parseIfStatement=
function(){var g=this.captureStartMarker();this.expectKeyword(q.Keywords.If);this.expectPunctuator("(");var b=this.captureStartMarker(),w=this.parseExpression(),x=this.captureStartMarker();this.expectPunctuator(")");"AssignmentExpression"!==w.type&&"UpdateExpression"!==w.type||this.throwError(q.ParsingErrorCodes.InvalidExpression,b,x);b=this.parseIfClause();x=null;this.matchKeyword(q.Keywords.Else)&&(this.readNextRawToken(),x=this.parseIfClause());return this.finalize(l({type:"IfStatement",test:w,
consequent:b,alternate:x},this.getItemLocation(g)))};k.prototype.parseWhileStatement=function(){var g=this.captureStartMarker();this.expectKeyword(q.Keywords.While);this.expectPunctuator("(");var b=this.captureStartMarker(),w=this.parseExpression(),x=this.captureStartMarker();this.expectPunctuator(")");"AssignmentExpression"!==w.type&&"UpdateExpression"!==w.type||this.throwError(q.ParsingErrorCodes.InvalidExpression,b,x);b=this.withBlockContext(n.WhileLoop,this.parseStatement);return this.finalize(l({type:"WhileStatement",
test:w,body:b},this.getItemLocation(g)))};k.prototype.parseForStatement=function(){var g=this,b=null,w=null,x=null,z=null,D=null,E=this.captureStartMarker();this.expectKeyword(q.Keywords.For);this.expectPunctuator("(");if(this.matchPunctuator(";"))this.readNextRawToken();else if(this.matchKeyword(q.Keywords.Var)){var C=this.captureStartMarker();this.readNextRawToken();var y=this.parseVariableDeclarationList();1===y.length&&this.matchKeyword(q.Keywords.In)?(y[0].init&&this.throwError(q.ParsingErrorCodes.ForInOfLoopInitializer,
C),z=this.finalize(l({type:"VariableDeclaration",declarations:y,kind:"var"},this.getItemLocation(C))),this.readNextRawToken(),D=this.parseExpression()):(this.matchKeyword(q.Keywords.In)&&this.throwError(q.ParsingErrorCodes.InvalidLeftHandSideInForIn,C),b=this.finalize(l({type:"VariableDeclaration",declarations:y,kind:"var"},this.getItemLocation(C))),this.expectPunctuator(";"))}else y=this.context.isAssignmentTarget,C=this.captureStartMarker(),b=this.inheritCoverGrammar(this.parseAssignmentExpression),
this.matchKeyword(q.Keywords.In)?(this.context.isAssignmentTarget||this.tolerateError(q.ParsingErrorCodes.InvalidLeftHandSideInForIn,C),"Identifier"!==b.type&&this.throwError(q.ParsingErrorCodes.InvalidLeftHandSideInForIn,C),this.readNextRawToken(),z=b,D=this.parseExpression(),b=null):(this.context.isAssignmentTarget=y,this.expectPunctuator(";"));z||(this.matchPunctuator(";")||(w=this.isolateCoverGrammar(this.parseExpression)),this.expectPunctuator(";"),this.matchPunctuator(")")||(x=this.isolateCoverGrammar(this.parseExpression)));
this.expectPunctuator(")");C=this.withBlockContext(n.ForLoop,function(){return g.isolateCoverGrammar(g.parseStatement)});return z&&D?this.finalize(l({type:"ForInStatement",left:z,right:D,body:C},this.getItemLocation(E))):this.finalize(l({type:"ForStatement",init:b,test:w,update:x,body:C},this.getItemLocation(E)))};k.prototype.parseContinueStatement=function(){var g=this.captureStartMarker();this.expectKeyword(q.Keywords.Continue);this.consumeSemicolon();return this.finalize(l({type:"ContinueStatement"},
this.getItemLocation(g)))};k.prototype.parseBreakStatement=function(){var g=this.captureStartMarker();this.expectKeyword(q.Keywords.Break);this.consumeSemicolon();return this.finalize(l({type:"BreakStatement"},this.getItemLocation(g)))};k.prototype.parseReturnStatement=function(){var g=this.captureStartMarker();this.expectKeyword(q.Keywords.Return);var b=(this.matchPunctuator(";")||this.matchPunctuator("}")||this.hasLineTerminator||2===this.rawToken.type)&&8!==this.rawToken.type&&10!==this.rawToken.type?
null:this.parseExpression();this.consumeSemicolon();return this.finalize(l({type:"ReturnStatement",argument:b},this.getItemLocation(g)))};k.prototype.parseStatement=function(){switch(this.rawToken.type){case 1:case 5:case 6:case 8:case 10:case 3:return this.parseExpressionStatement();case 7:return"{"===this.rawToken.value?this.parseBlockOrObjectStatement():"("===this.rawToken.value?this.parseExpressionStatement():";"===this.rawToken.value?this.parseEmptyStatement():this.parseExpressionStatement();
case 4:switch(this.rawToken.value.toLowerCase()){case q.Keywords.Break:return this.parseBreakStatement();case q.Keywords.Continue:return this.parseContinueStatement();case q.Keywords.For:return this.parseForStatement();case q.Keywords.Function:return this.parseFunctionDeclaration();case q.Keywords.If:return this.parseIfStatement();case q.Keywords.Return:return this.parseReturnStatement();case q.Keywords.Var:return this.parseVariableDeclaration();case q.Keywords.While:return this.parseWhileStatement();
default:return this.parseExpressionStatement()}default:return this.throwUnexpectedToken({rawToken:this.rawToken})}};k.prototype.parseFormalParameters=function(){var g=[];this.expectPunctuator("(");if(!this.matchPunctuator(")"))for(;2!==this.rawToken.type;){var b=this.parseIdentifier();b||this.throwUnexpectedToken({rawToken:this.rawToken,code:q.ParsingErrorCodes.IdentiferExpected});g.push(b);if(this.matchPunctuator(")"))break;this.expectPunctuator(",");if(this.matchPunctuator(")"))break}this.expectPunctuator(")");
return g};k.prototype.parseFunctionDeclaration=function(){(this.context.blockContext&n.Function)===n.Function&&this.throwUnexpectedToken({code:q.ParsingErrorCodes.NoFunctionInsideFunction});(this.context.blockContext&n.WhileLoop)!==n.WhileLoop&&(this.context.blockContext&n.IfClause)!==n.IfClause||this.throwUnexpectedToken({code:q.ParsingErrorCodes.NoFunctionInsideBlock});var g=this.captureStartMarker();this.expectKeyword(q.Keywords.Function);var b=this.parseIdentifier();b||this.throwUnexpectedToken({code:q.ParsingErrorCodes.InvalidFunctionIdentifier});
var w=this.parseFormalParameters(),x=this.context.blockContext;this.context.blockContext|=n.Function;var z=this.parseBlock();this.context.blockContext=x;return this.finalize(l({type:"FunctionDeclaration",id:b,params:w,body:z},this.getItemLocation(g)))};k.prototype.parseScript=function(){var g=this.captureStartMarker(),b=this.parseStatements();g=this.finalize(l({type:"Program",body:b},this.getItemLocation(g)));this.options.tokens&&(g.tokens=this.tokens);this.options.tolerant&&(g.errors=this.errorHandler.errors);
return g};k.prototype.parseExportDeclaration=function(){this.context.blockContext!==n.None&&this.throwUnexpectedToken({code:q.ParsingErrorCodes.ModuleExportRootOnly});var g=null,b=this.captureStartMarker();this.expectKeyword(q.Keywords.Export);this.matchKeyword(q.Keywords.Var)?g=this.parseVariableDeclaration():this.matchKeyword("function")?g=this.parseFunctionDeclaration():this.throwUnexpectedToken({code:q.ParsingErrorCodes.InvalidExpression});return this.finalize(l({type:"ExportNamedDeclaration",
declaration:g,specifiers:[],source:null},this.getItemLocation(b)))};k.prototype.parseModuleSpecifier=function(){var g=this.captureStartMarker(),b=this.rawToken;if(8===b.type)return this.readNextRawToken(),this.finalize(l({type:"Literal",value:b.value,raw:this.getSourceValue(b),isString:!0},this.getItemLocation(g)));this.throwError(q.ParsingErrorCodes.InvalidModuleUri,g)};k.prototype.parseDefaultSpecifier=function(){var g=this.captureStartMarker(),b=this.parseIdentifier();b||this.throwUnexpectedToken({code:q.ParsingErrorCodes.IdentiferExpected});
return this.finalize(l({type:"ImportDefaultSpecifier",local:b},this.getItemLocation(g)))};k.prototype.parseImportDeclaration=function(){this.context.blockContext!==n.None&&this.throwUnexpectedToken({code:q.ParsingErrorCodes.ModuleImportRootOnly});var g=this.captureStartMarker();this.expectKeyword(q.Keywords.Import);var b=this.parseDefaultSpecifier();this.expectContextualKeyword(q.Keywords.From);var w=this.parseModuleSpecifier();return this.finalize(l({type:"ImportDeclaration",specifiers:[b],source:w},
this.getItemLocation(g)))};return k}();B.Parser=f})},"esri/arcade/lib/comment-handler":function(){define(["require","exports","../polyfill/tsSupport/assign","../polyfill/tsSupport/spreadarray","./types"],function(f,B,l,e,c){function u(t,d){return d?d.loc.end.line===t.loc.start.line&&d.loc.end.column<=t.loc.start.column:!1}Object.defineProperty(B,"__esModule",{value:!0});B.CommentHandler=void 0;f=function(){function t(){this.comments=[];this._nodeStack=[];this._newComments=[]}t.prototype.insertInnerComments=
function(d){if(c.isBlockStatement(d)&&0===d.body.length){for(var q=[],m=this._newComments.length-1;0<=m;--m){var a=this._newComments[m];d.range[1]>=a.range[0]&&(q.unshift(a),this._newComments.splice(m,1))}q.length&&(d.innerComments=q)}};t.prototype.attachTrailingComments=function(d){var q,m;if(d){var a=this._nodeStack[this._nodeStack.length-1];if(c.isBlockStatement(d)&&a.range[0]>=d.range[0]&&a.range[1]<=d.range[1])for(var h=this._newComments.length-1;0<=h;--h){var n=this._newComments[h];n.range[0]>=
d.range[0]&&n.range[1]<=d.range[1]&&(a.trailingComments=e(e([],null!==(q=a.trailingComments)&&void 0!==q?q:[]),[n]),this._newComments.splice(h,1))}q=[];if(0<this._newComments.length)for(h=this._newComments.length-1;0<=h;--h)n=this._newComments[h],u(n,a)?(a.trailingComments=e(e([],null!==(m=a.trailingComments)&&void 0!==m?m:[]),[n]),this._newComments.splice(h,1)):u(n,d)&&(q.unshift(n),this._newComments.splice(h,1));(null===a||void 0===a?0:a.trailingComments)&&u(a.trailingComments[0],d)&&(q=e(e([],
q),a.trailingComments),delete a.trailingComments);0<q.length&&(d.trailingComments=q)}};t.prototype.attachLeadingComments=function(d){var q,m,a,h;if(d){for(var n;0<this._nodeStack.length;){var r=this._nodeStack[this._nodeStack.length-1];if(d.range[0]<=r.range[0])n=r,this._nodeStack.pop();else break}r=[];var k=[];if(n){for(var g=(null!==(m=null===(q=n.leadingComments)||void 0===q?void 0:q.length)&&void 0!==m?m:0)-1;0<=g;--g)q=n.leadingComments[g],d.range[0]>=q.range[1]?(r.unshift(q),n.leadingComments.splice(g,
1)):c.isVariableDeclarator(d)&&!c.isBlockComment(q)&&(k.unshift(q),n.leadingComments.splice(g,1));0===(null===(a=n.leadingComments)||void 0===a?void 0:a.length)&&delete n.leadingComments;r.length&&(d.leadingComments=r);k.length&&(d.trailingComments=e(e([],k),null!==(h=d.trailingComments)&&void 0!==h?h:[]))}else{for(g=this._newComments.length-1;0<=g;--g)q=this._newComments[g],d.range[0]>=q.range[0]&&(r.unshift(q),this._newComments.splice(g,1));r.length&&(d.leadingComments=r)}}};t.prototype.attachComments=
function(d){var q;if(c.isProgram(d)&&0<d.body.length){var m=this._nodeStack[this._nodeStack.length-1];m?(m.trailingComments=e(e([],null!==(q=m.trailingComments)&&void 0!==q?q:[]),this._newComments),this._newComments.length=0,this._nodeStack.pop()):(d.trailingComments=e([],this._newComments),this._newComments.length=0)}else this.attachTrailingComments(d),this.attachLeadingComments(d),this.insertInnerComments(d),this._nodeStack.push(d)};t.prototype.collectComment=function(d){this.comments.push(d);this._newComments.push(d)};
return t}();B.CommentHandler=f})},"esri/arcade/lib/types":function(){define(["require","exports","../polyfill/tsSupport/extends"],function(f,B,l){var e;Object.defineProperty(B,"__esModule",{value:!0});B.isTemplateElement=B.isProperty=B.isVariableDeclarator=B.isUpdateExpression=B.isUnaryExpression=B.isMemberExpression=B.isTemplateLiteral=B.isObjectExpression=B.isLogicalExpression=B.isLiteral=B.isIdentifier=B.isCallExpression=B.isBinaryExpression=B.isAssignmentExpression=B.isArrayExpression=B.isExpression=
B.isVariableDeclaration=B.isReturnStatement=B.isIfStatement=B.isFunctionDeclaration=B.isForStatement=B.isForInStatement=B.isExpressionStatement=B.isEmptyStatement=B.isContinueStatement=B.isBreakStatement=B.isBlockComment=B.isBlockStatement=B.isStatement=B.isProgram=B.ParsingError=B.ParsingErrorMessages=B.ParsingErrorCodes=B.TokenNames=B.TokenType=B.OperatorPrecedence=B.BinaryOperators=B.LogicalOperators=B.AssignmentOperators=B.UnaryOperators=B.UpdateOperators=B.Syntax=B.Keywords=void 0;(function(c){c.Break=
"break";c.Continue="continue";c.Else="else";c.False="false";c.For="for";c.From="from";c.Function="function";c.If="if";c.Import="import";c.Export="export";c.In="in";c.Null="null";c.Return="return";c.True="true";c.Var="var";c.While="while"})(B.Keywords||(B.Keywords={}));(function(c){c.AssignmentExpression="AssignmentExpression";c.ArrayExpression="ArrayExpression";c.BlockComment="BlockComment";c.BlockStatement="BlockStatement";c.BinaryExpression="BinaryExpression";c.BreakStatement="BreakStatement";c.CallExpression=
"CallExpression";c.ContinueStatement="ContinueStatement";c.EmptyStatement="EmptyStatement";c.ExpressionStatement="ExpressionStatement";c.ExportNamedDeclaration="ExportNamedDeclaration";c.ExportSpecifier="ExportSpecifier";c.ForStatement="ForStatement";c.ForInStatement="ForInStatement";c.FunctionDeclaration="FunctionDeclaration";c.Identifier="Identifier";c.IfStatement="IfStatement";c.ImportDeclaration="ImportDeclaration";c.ImportDefaultSpecifier="ImportDefaultSpecifier";c.LineComment="LineComment";
c.Literal="Literal";c.LogicalExpression="LogicalExpression";c.MemberExpression="MemberExpression";c.ObjectExpression="ObjectExpression";c.Program="Program";c.Property="Property";c.ReturnStatement="ReturnStatement";c.TemplateElement="TemplateElement";c.TemplateLiteral="TemplateLiteral";c.UnaryExpression="UnaryExpression";c.UpdateExpression="UpdateExpression";c.VariableDeclaration="VariableDeclaration";c.VariableDeclarator="VariableDeclarator";c.WhileStatement="WhileStatement"})(B.Syntax||(B.Syntax=
{}));B.UpdateOperators=["++","--"];B.UnaryOperators=["-","+","!","~"];B.AssignmentOperators="\x3d /\x3d *\x3d %\x3d +\x3d -\x3d".split(" ");B.LogicalOperators=["||","\x26\x26"];B.BinaryOperators="| \x26 \x3e\x3e \x3c\x3c \x3e\x3e\x3e ^ \x3d\x3d !\x3d \x3c \x3c\x3d \x3e \x3e\x3d + - * / %".split(" ");B.OperatorPrecedence={"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":10,"/":10,"%":10};
(function(c){c[c.Unknown=0]="Unknown";c[c.BooleanLiteral=1]="BooleanLiteral";c[c.EOF=2]="EOF";c[c.Identifier=3]="Identifier";c[c.Keyword=4]="Keyword";c[c.NullLiteral=5]="NullLiteral";c[c.NumericLiteral=6]="NumericLiteral";c[c.Punctuator=7]="Punctuator";c[c.StringLiteral=8]="StringLiteral";c[c.Template=10]="Template"})(B.TokenType||(B.TokenType={}));B.TokenNames="Unknown Boolean \x3cend\x3e Identifier Keyword Null Numeric Punctuator String RegularExpression Template".split(" ");(function(c){c.InvalidModuleUri=
"InvalidModuleUri";c.ForInOfLoopInitializer="ForInOfLoopInitializer";c.IdentiferExpected="IdentiferExpected";c.InvalidEscapedReservedWord="InvalidEscapedReservedWord";c.InvalidExpression="InvalidExpression";c.InvalidFunctionIdentifier="InvalidFunctionIdentifier";c.InvalidHexEscapeSequence="InvalidHexEscapeSequence";c.InvalidLeftHandSideInAssignment="InvalidLeftHandSideInAssignment";c.InvalidLeftHandSideInForIn="InvalidLeftHandSideInForIn";c.InvalidTemplateHead="InvalidTemplateHead";c.InvalidVariableAssignment=
"InvalidVariableAssignment";c.KeyMustBeString="KeyMustBeString";c.NoFunctionInsideBlock="NoFunctionInsideBlock";c.NoFunctionInsideFunction="NoFunctionInsideFunction";c.ModuleExportRootOnly="ModuleExportRootOnly";c.ModuleImportRootOnly="ModuleImportRootOnly";c.PunctuatorExpected="PunctuatorExpected";c.TemplateOctalLiteral="TemplateOctalLiteral";c.UnexpectedBoolean="UnexpectedBoolean";c.UnexpectedEndOfScript="UnexpectedEndOfScript";c.UnexpectedIdentifier="UnexpectedIdentifier";c.UnexpectedKeyword="UnexpectedKeyword";
c.UnexpectedNull="UnexpectedNull";c.UnexpectedNumber="UnexpectedNumber";c.UnexpectedPunctuator="UnexpectedPunctuator";c.UnexpectedString="UnexpectedString";c.UnexpectedTemplate="UnexpectedTemplate";c.UnexpectedToken="UnexpectedToken"})(f=B.ParsingErrorCodes||(B.ParsingErrorCodes={}));B.ParsingErrorMessages=(e={},e[f.InvalidModuleUri]="Module uri must be a text literal.",e[f.ForInOfLoopInitializer]="for-in loop variable declaration may not have an initializer.",e[f.IdentiferExpected]="'${value}' is an invalid identifier.",
e[f.InvalidEscapedReservedWord]="Keyword cannot contain escaped characters.",e[f.InvalidExpression]="Invalid expression.",e[f.InvalidFunctionIdentifier]="'${value}' is an invalid function identifier.",e[f.InvalidHexEscapeSequence]="Invalid hexadecimal escape sequence.",e[f.InvalidLeftHandSideInAssignment]="Invalid left-hand side in assignment.",e[f.InvalidLeftHandSideInForIn]="Invalid left-hand side in for-in.",e[f.InvalidTemplateHead]="Invalid template structure.",e[f.InvalidVariableAssignment]=
"Invalid variable assignment.",e[f.KeyMustBeString]="Object property keys must be a word starting with a letter.",e[f.NoFunctionInsideBlock]="Functions cannot be declared inside of code blocks.",e[f.NoFunctionInsideFunction]="Functions cannot be declared inside another function.",e[f.ModuleExportRootOnly]="Module exports cannot be declared inside of code blocks.",e[f.ModuleImportRootOnly]="Module import cannot be declared inside of code blocks.",e[f.PunctuatorExpected]="'${value}' expected.",e[f.TemplateOctalLiteral]=
"Octal literals are not allowed in template literals.",e[f.UnexpectedBoolean]="Unexpected boolean literal.",e[f.UnexpectedEndOfScript]="Unexpected end of Arcade expression.",e[f.UnexpectedIdentifier]="Unexpected identifier.",e[f.UnexpectedKeyword]="Unexpected keyword.",e[f.UnexpectedNull]="Unexpected null literal.",e[f.UnexpectedNumber]="Unexpected number.",e[f.UnexpectedPunctuator]="Unexpected ponctuator.",e[f.UnexpectedString]="Unexpected text literal.",e[f.UnexpectedTemplate]="Unexpected quasi '${value}'.",
e[f.UnexpectedToken]="Unexpected token '${value}'.",e);e=function(c){function u(t){var d=t.code,q=t.index,m=t.line,a=t.column,h=t.len;h=void 0===h?0:h;var n=t.description;t=t.data;var r,k,g=c.call(this,""+(null!==n&&void 0!==n?n:d))||this;g.declaredRootClass="esri.arcade.lib.parsingerror";g.name="ParsingError";g.code=d;g.index=q;g.line=m;g.column=a;g.len=h;g.data=t;g.description=n;g.range={start:{line:m,column:a-1},end:{line:m,column:a+h}};null===(k=(r=Error).captureStackTrace)||void 0===k?void 0:
k.call(r,g,u);return g}l(u,c);return u}(Error);B.ParsingError=e;B.isProgram=function(c){return"Program"===(null===c||void 0===c?void 0:c.type)};B.isStatement=function(c){switch(null===c||void 0===c?void 0:c.type){case "BlockStatement":case "BreakStatement":case "ContinueStatement":case "EmptyStatement":case "ExpressionStatement":case "ForInStatement":case "ForStatement":case "FunctionDeclaration":case "IfStatement":case "ReturnStatement":case "VariableDeclaration":return!0;default:return!1}};B.isBlockStatement=
function(c){return"BlockStatement"===(null===c||void 0===c?void 0:c.type)};B.isBlockComment=function(c){return"BlockComment"===(null===c||void 0===c?void 0:c.type)};B.isBreakStatement=function(c){return"BreakStatement"===(null===c||void 0===c?void 0:c.type)};B.isContinueStatement=function(c){return"ContinueStatement"===(null===c||void 0===c?void 0:c.type)};B.isEmptyStatement=function(c){return"EmptyStatement"===(null===c||void 0===c?void 0:c.type)};B.isExpressionStatement=function(c){return"ExpressionStatement"===
(null===c||void 0===c?void 0:c.type)};B.isForInStatement=function(c){return"ForInStatement"===(null===c||void 0===c?void 0:c.type)};B.isForStatement=function(c){return"ForStatement"===(null===c||void 0===c?void 0:c.type)};B.isFunctionDeclaration=function(c){return"FunctionDeclaration"===(null===c||void 0===c?void 0:c.type)};B.isIfStatement=function(c){return"IfStatement"===(null===c||void 0===c?void 0:c.type)};B.isReturnStatement=function(c){return"ReturnStatement"===(null===c||void 0===c?void 0:
c.type)};B.isVariableDeclaration=function(c){return"VariableDeclaration"===(null===c||void 0===c?void 0:c.type)};B.isExpression=function(c){switch(null===c||void 0===c?void 0:c.type){case "ArrayExpression":case "AssignmentExpression":case "BinaryExpression":case "CallExpression":case "Identifier":case "Literal":case "LogicalExpression":case "MemberExpression":case "ObjectExpression":case "TemplateLiteral":case "UpdateExpression":case "UnaryExpression":return!0;default:return!1}};B.isArrayExpression=
function(c){return"ArrayExpression"===(null===c||void 0===c?void 0:c.type)};B.isAssignmentExpression=function(c){return"AssignmentExpression"===(null===c||void 0===c?void 0:c.type)};B.isBinaryExpression=function(c){return"BinaryExpression"===(null===c||void 0===c?void 0:c.type)};B.isCallExpression=function(c){return"CallExpression"===(null===c||void 0===c?void 0:c.type)};B.isIdentifier=function(c){return"Identifier"===(null===c||void 0===c?void 0:c.type)};B.isLiteral=function(c){return"Literal"===
(null===c||void 0===c?void 0:c.type)};B.isLogicalExpression=function(c){return"LogicalExpression"===(null===c||void 0===c?void 0:c.type)};B.isObjectExpression=function(c){return"ObjectExpression"===(null===c||void 0===c?void 0:c.type)};B.isTemplateLiteral=function(c){return"TemplateLiteral"===(null===c||void 0===c?void 0:c.type)};B.isMemberExpression=function(c){return"MemberExpression"===(null===c||void 0===c?void 0:c.type)};B.isUnaryExpression=function(c){return"UnaryExpression"===(null===c||void 0===
c?void 0:c.type)};B.isUpdateExpression=function(c){return"UpdateExpression"===(null===c||void 0===c?void 0:c.type)};B.isVariableDeclarator=function(c){return"VariableDeclarator"===(null===c||void 0===c?void 0:c.type)};B.isProperty=function(c){return"Property"===(null===c||void 0===c?void 0:c.type)};B.isTemplateElement=function(c){return"TemplateElement"===(null===c||void 0===c?void 0:c.type)}})},"esri/arcade/lib/error-handler":function(){define(["require","exports","./types"],function(f,B,l){function e(c,
u){c=l.ParsingErrorMessages[c];return u?c.replace(/\${(.*?)}/g,function(t,d){var q,m;return null!==(m=null===(q=u[d])||void 0===q?void 0:q.toString())&&void 0!==m?m:""}):c}Object.defineProperty(B,"__esModule",{value:!0});B.ErrorHandler=B.formatErrorDescription=void 0;B.formatErrorDescription=e;f=function(){function c(u){void 0===u&&(u=!1);this.tolerant=u;this.errors=[]}c.prototype.recordError=function(u){this.errors.push(u)};c.prototype.tolerate=function(u){if(this.tolerant)this.recordError(u);else throw u;
};c.prototype.throwError=function(u){var t;u.description=null!==(t=u.description)&&void 0!==t?t:e(u.code,u.data);throw new l.ParsingError(u);};c.prototype.tolerateError=function(u){var t;u.description=null!==(t=u.description)&&void 0!==t?t:e(u.code,u.data);u=new l.ParsingError(u);if(this.tolerant)this.recordError(u);else throw u;};return c}();B.ErrorHandler=f})},"esri/arcade/lib/scanner":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../polyfill/tsSupport/extends ./assert ./character ./types".split(" "),
function(f,B,l,e,c,u,t,d){Object.defineProperty(B,"__esModule",{value:!0});B.Scanner=void 0;var q=[[],[],[]];d.UpdateOperators.forEach(function(m){return q[m.length-1].push(m)});d.UnaryOperators.forEach(function(m){return q[m.length-1].push(m)});d.LogicalOperators.forEach(function(m){return q[m.length-1].push(m)});d.AssignmentOperators.forEach(function(m){return q[m.length-1].push(m)});d.BinaryOperators.forEach(function(m){return q[m.length-1].push(m)});f=function(){function m(a,h){this.source=a;
this.errorHandler=h;this._length=a.length;this.index=0;this.lineNumber=1;this.lineStart=0;this.curlyStack=[]}m.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}};m.prototype.restoreState=function(a){this.index=a.index;this.lineNumber=a.lineNumber;this.lineStart=a.lineStart;this.curlyStack=a.curlyStack};m.prototype.eof=function(){return this.index>=this._length};m.prototype.throwUnexpectedToken=function(a){void 0===
a&&(a=d.ParsingErrorCodes.UnexpectedToken);this.errorHandler.throwError({code:a,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})};m.prototype.tolerateUnexpectedToken=function(a){void 0===a&&(a=d.ParsingErrorCodes.UnexpectedToken);this.errorHandler.tolerateError({code:a,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})};m.prototype.skipSingleLineComment=function(a){for(var h=[],n=this.index-a,r={start:{line:this.lineNumber,column:this.index-this.lineStart-
a},end:{line:0,column:0}};!this.eof();){var k=this.source.charCodeAt(this.index);++this.index;if(t.Character.isLineTerminator(k))return r&&(r.end={line:this.lineNumber,column:this.index-this.lineStart-1},a={multiLine:!1,start:n+a,end:this.index-1,range:[n,this.index-1],loc:r},h.push(a)),13===k&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,h}r&&(r.end={line:this.lineNumber,column:this.index-this.lineStart},a={multiLine:!1,start:n+a,end:this.index,
range:[n,this.index],loc:r},h.push(a));return h};m.prototype.skipMultiLineComment=function(){for(var a=[],h=this.index-2,n={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}};!this.eof();){var r=this.source.charCodeAt(this.index);if(t.Character.isLineTerminator(r))13===r&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===r&&47===this.source.charCodeAt(this.index+1))return this.index+=2,
n&&(n.end={line:this.lineNumber,column:this.index-this.lineStart},h={multiLine:!0,start:h+2,end:this.index-2,range:[h,this.index],loc:n},a.push(h)),a;++this.index}}n&&(n.end={line:this.lineNumber,column:this.index-this.lineStart},h={multiLine:!0,start:h+2,end:this.index,range:[h,this.index],loc:n},a.push(h));this.tolerateUnexpectedToken();return a};m.prototype.scanComments=function(){for(var a=[];!this.eof();){var h=this.source.charCodeAt(this.index);if(t.Character.isWhiteSpace(h))++this.index;else if(t.Character.isLineTerminator(h))++this.index,
13===h&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index;else if(47===h)if(h=this.source.charCodeAt(this.index+1),47===h)this.index+=2,h=this.skipSingleLineComment(2),a=e(e([],a),h);else if(42===h)this.index+=2,h=this.skipMultiLineComment(),a=e(e([],a),h);else break;else break}return a};m.prototype.isKeyword=function(a){a=a.toLowerCase();switch(a.length){case 2:return a===d.Keywords.If||a===d.Keywords.In;case 3:return a===d.Keywords.Var||a===d.Keywords.For;
case 4:return a===d.Keywords.Else;case 5:return a===d.Keywords.Break||a===d.Keywords.While;case 6:return a===d.Keywords.Return||a===d.Keywords.Import||a===d.Keywords.Export;case 8:return a===d.Keywords.Function||a===d.Keywords.Continue;default:return!1}};m.prototype.codePointAt=function(a){var h=this.source.charCodeAt(a);55296<=h&&56319>=h&&(a=this.source.charCodeAt(a+1),56320<=a&&57343>=a&&(h=1024*(h-55296)+a-56320+65536));return h};m.prototype.scanHexEscape=function(a){a="u"===a?4:2;for(var h=0,
n=0;n<a;++n)if(!this.eof()&&t.Character.isHexDigit(this.source.charCodeAt(this.index)))h=16*h+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(h)};m.prototype.scanUnicodeCodePointEscape=function(){var a=this.source[this.index],h=0;for("}"===a&&this.throwUnexpectedToken();!this.eof();){a=this.source[this.index++];if(!t.Character.isHexDigit(a.charCodeAt(0)))break;h=16*h+"0123456789abcdef".indexOf(a.toLowerCase())}(1114111<h||"}"!==a)&&this.throwUnexpectedToken();
return t.Character.fromCodePoint(h)};m.prototype.getIdentifier=function(){for(var a=this.index++;!this.eof();){var h=this.source.charCodeAt(this.index);if(92===h||55296<=h&&57343>h)return this.index=a,this.getComplexIdentifier();if(t.Character.isIdentifierPart(h))++this.index;else break}return this.source.slice(a,this.index)};m.prototype.getComplexIdentifier=function(){var a=this.codePointAt(this.index),h=t.Character.fromCodePoint(a);this.index+=h.length;if(92===a){117!==this.source.charCodeAt(this.index)&&
this.throwUnexpectedToken();++this.index;if("{"===this.source[this.index]){++this.index;var n=this.scanUnicodeCodePointEscape()}else n=this.scanHexEscape("u"),null!==n&&"\\"!==n&&t.Character.isIdentifierStart(n.charCodeAt(0))||this.throwUnexpectedToken();h=n}for(;!this.eof();){a=this.codePointAt(this.index);if(!t.Character.isIdentifierPart(a))break;n=t.Character.fromCodePoint(a);h+=n;this.index+=n.length;92===a&&(h=h.substring(0,h.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),
++this.index,"{"===this.source[this.index]?(++this.index,n=this.scanUnicodeCodePointEscape()):(n=this.scanHexEscape("u"),null!==n&&"\\"!==n&&t.Character.isIdentifierPart(n.charCodeAt(0))||this.throwUnexpectedToken()),h+=n)}return h};m.prototype.octalToDecimal=function(a){var h="0"!==a,n="01234567".indexOf(a);!this.eof()&&t.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(h=!0,n=8*n+"01234567".indexOf(this.source[this.index++]),"0123".includes(a)&&!this.eof()&&t.Character.isOctalDigit(this.source.charCodeAt(this.index))&&
(n=8*n+"01234567".indexOf(this.source[this.index++])));return{code:n,octal:h}};m.prototype.scanIdentifier=function(){var a=this.index,h=92===this.source.charCodeAt(a)?this.getComplexIdentifier():this.getIdentifier();var n=1===h.length?3:this.isKeyword(h)?4:h.toLowerCase()===d.Keywords.Null?5:h.toLowerCase()===d.Keywords.True||h.toLowerCase()===d.Keywords.False?1:3;if(3!==n&&a+h.length!==this.index){var r=this.index;this.index=a;this.tolerateUnexpectedToken(d.ParsingErrorCodes.InvalidEscapedReservedWord);
this.index=r}return{type:n,value:h,lineNumber:this.lineNumber,lineStart:this.lineStart,start:a,end:this.index}};m.prototype.scanPunctuator=function(){var a=this.index,h=this.source[this.index];switch(h){case "(":case "{":"{"===h&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;break;case "}":++this.index;this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;break;default:for(var n=q.length;0<n;n--)if(h=this.source.substring(this.index,
this.index+n),q[n-1].includes(h)){this.index+=n;break}}this.index===a&&this.throwUnexpectedToken();return{type:7,value:h,lineNumber:this.lineNumber,lineStart:this.lineStart,start:a,end:this.index}};m.prototype.scanHexLiteral=function(a){for(var h="";!this.eof()&&t.Character.isHexDigit(this.source.charCodeAt(this.index));)h+=this.source[this.index++];0===h.length&&this.throwUnexpectedToken();t.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,
value:parseInt("0x"+h,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:a,end:this.index}};m.prototype.scanBinaryLiteral=function(a){for(var h="";!this.eof();){var n=this.source[this.index];if("0"!==n&&"1"!==n)break;h+=this.source[this.index++]}0===h.length&&this.throwUnexpectedToken();this.eof()||(n=this.source.charCodeAt(this.index),(t.Character.isIdentifierStart(n)||t.Character.isDecimalDigit(n))&&this.throwUnexpectedToken());return{type:6,value:parseInt(h,2),lineNumber:this.lineNumber,
lineStart:this.lineStart,start:a,end:this.index}};m.prototype.scanOctalLiteral=function(a,h){var n="",r=!1;t.Character.isOctalDigit(a.charCodeAt(0))?(r=!0,n="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&t.Character.isOctalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];r||0!==n.length||this.throwUnexpectedToken();(t.Character.isIdentifierStart(this.source.charCodeAt(this.index))||t.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken();
return{type:6,value:parseInt(n,8),lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}};m.prototype.scanNumericLiteral=function(){var a=this.index,h=this.source[a];u.assert(t.Character.isDecimalDigit(h.charCodeAt(0))||"."===h,"Numeric literal must start with a decimal digit or a decimal point");var n="";if("."!==h){n=this.source[this.index++];h=this.source[this.index];if("0"===n){if("x"===h||"X"===h)return++this.index,this.scanHexLiteral(a);if("b"===h||"B"===h)return++this.index,
this.scanBinaryLiteral(a);if("o"===h||"O"===h)return this.scanOctalLiteral(h,a)}for(;t.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];h=this.source[this.index]}if("."===h){for(n+=this.source[this.index++];t.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];h=this.source[this.index]}if("e"===h||"E"===h){n+=this.source[this.index++];h=this.source[this.index];if("+"===h||"-"===h)n+=this.source[this.index++];if(t.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;t.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=
this.source[this.index++];else this.throwUnexpectedToken()}t.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,value:parseFloat(n),lineNumber:this.lineNumber,lineStart:this.lineStart,start:a,end:this.index}};m.prototype.scanStringLiteral=function(){var a=this.index,h=this.source[a];u.assert("'"===h||'"'===h,"String literal must starts with a quote");++this.index;for(var n="";!this.eof();){var r=this.source[this.index++];if(r===h){h="";break}if("\\"===
r)if((r=this.source[this.index++])&&t.Character.isLineTerminator(r.charCodeAt(0)))++this.lineNumber,"\r"===r&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(r){case "u":"{"===this.source[this.index]?(++this.index,n+=this.scanUnicodeCodePointEscape()):(r=this.scanHexEscape(r),null===r&&this.throwUnexpectedToken(),n+=r);break;case "x":r=this.scanHexEscape(r);null===r&&this.throwUnexpectedToken(d.ParsingErrorCodes.InvalidHexEscapeSequence);n+=r;break;case "n":n+="\n";
break;case "r":n+="\r";break;case "t":n+="\t";break;case "b":n+="\b";break;case "f":n+="\f";break;case "v":n+="\v";break;case "8":case "9":n+=r;this.tolerateUnexpectedToken();break;default:r&&t.Character.isOctalDigit(r.charCodeAt(0))?(r=this.octalToDecimal(r),n+=String.fromCharCode(r.code)):n+=r}else if(t.Character.isLineTerminator(r.charCodeAt(0)))break;else n+=r}""!==h&&(this.index=a,this.throwUnexpectedToken());return{type:8,value:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:a,end:this.index}};
m.prototype.scanTemplate=function(){var a="",h=!1,n=this.index,r="`"===this.source[n],k=!1,g=2;for(++this.index;!this.eof();){var b=this.source[this.index++];if("`"===b){g=1;h=k=!0;break}if("$"===b){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;h=!0;break}a+=b}else if("\\"===b)if(b=this.source[this.index++],t.Character.isLineTerminator(b.charCodeAt(0)))++this.lineNumber,"\r"===b&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(b){case "n":a+=
"\n";break;case "r":a+="\r";break;case "t":a+="\t";break;case "u":if("{"===this.source[this.index])++this.index,a+=this.scanUnicodeCodePointEscape();else{var w=this.index,x=this.scanHexEscape(b);null!==x?a+=x:(this.index=w,a+=b)}break;case "x":b=this.scanHexEscape(b);null===b&&this.throwUnexpectedToken(d.ParsingErrorCodes.InvalidHexEscapeSequence);a+=b;break;case "b":a+="\b";break;case "f":a+="\f";break;case "v":a+="\v";break;default:"0"===b?(t.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&
this.throwUnexpectedToken(d.ParsingErrorCodes.TemplateOctalLiteral),a+="\x00"):t.Character.isOctalDigit(b.charCodeAt(0))?this.throwUnexpectedToken(d.ParsingErrorCodes.TemplateOctalLiteral):a+=b}else t.Character.isLineTerminator(b.charCodeAt(0))?(++this.lineNumber,"\r"===b&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,a+="\n"):a+=b}h||this.throwUnexpectedToken();r||this.curlyStack.pop();return{type:10,value:this.source.slice(n+1,this.index-g),cooked:a,head:r,tail:k,lineNumber:this.lineNumber,
lineStart:this.lineStart,start:n,end:this.index}};m.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var a=this.source.charCodeAt(this.index);return t.Character.isIdentifierStart(a)?this.scanIdentifier():40===a||41===a||59===a?this.scanPunctuator():39===a||34===a?this.scanStringLiteral():46===a?t.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():
t.Character.isDecimalDigit(a)?this.scanNumericLiteral():96===a||125===a&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():55296<=a&&57343>a&&t.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()};return m}();B.Scanner=f})},"esri/arcade/lib/assert":function(){define(["require","exports"],function(f,B){Object.defineProperty(B,"__esModule",{value:!0});B.assert=void 0;B.assert=function(l,e){if(!l)throw Error("ASSERT: "+e);}})},"esri/arcade/lib/character":function(){define(["require",
"exports"],function(f,B){Object.defineProperty(B,"__esModule",{value:!0});B.Character=void 0;var l=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
e=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
B.Character={fromCodePoint:function(c){return 65536>c?String.fromCharCode(c):String.fromCharCode(55296+(c-65536>>10))+String.fromCharCode(56320+(c-65536&1023))},isWhiteSpace:function(c){return 32===c||9===c||11===c||12===c||160===c||5760<=c&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(c)},isLineTerminator:function(c){return 10===c||13===c||8232===c||8233===c},isIdentifierStart:function(c){return 36===c||95===c||65<=c&&90>=c||97<=c&&122>=c||92===c||
128<=c&&l.test(B.Character.fromCodePoint(c))},isIdentifierPart:function(c){return 36===c||95===c||65<=c&&90>=c||97<=c&&122>=c||48<=c&&57>=c||92===c||128<=c&&e.test(B.Character.fromCodePoint(c))},isDecimalDigit:function(c){return 48<=c&&57>=c},isHexDigit:function(c){return 48<=c&&57>=c||65<=c&&70>=c||97<=c&&102>=c},isOctalDigit:function(c){return 48<=c&&55>=c}}})},"esri/arcade/lib/tokenizer":function(){define(["require","exports","./error-handler","./scanner","./types"],function(f,B,l,e,c){Object.defineProperty(B,
"__esModule",{value:!0});B.Tokenizer=void 0;f=function(){function u(t,d){this.errorHandler=new l.ErrorHandler;this.errorHandler.tolerant=d?"boolean"===typeof d.tolerant&&d.tolerant:!1;this.scanner=new e.Scanner(t,this.errorHandler);this.trackComments=d?"boolean"===typeof d.comment&&d.comment:!1;this.buffer=[]}u.prototype.errors=function(){return this.errorHandler.errors};u.prototype.getNextToken=function(){var t=this;if(0===this.buffer.length){var d=this.scanner.scanComments();this.trackComments&&
d&&d.forEach(function(a){var h=t.scanner.source.slice(a.start,a.end);t.buffer.push({type:a.multiLine?"BlockComment":"LineComment",value:h,range:a.range,loc:a.loc})});if(!this.scanner.eof()){d={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart};var q=this.scanner.lex(),m={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart};d={type:c.TokenNames[q.type],value:this.scanner.source.slice(q.start,q.end),range:[q.start,q.end],loc:{start:d,end:m}};this.buffer.push(d)}}return this.buffer.shift()};
return u}();B.Tokenizer=f})},"esri/arcade/featureset/support/RecentlyUsedCache":function(){define(["require","exports"],function(f,B){var l=function(){function c(u){var t=this;t._keys=[];t._values=[];t.length=0;u&&u.forEach(function(d){t.set(d[0],d[1])})}c.prototype.entries=function(){var u=this;return[].slice.call(this.keys().map(function(t,d){return[t,u._values[d]]}))};c.prototype.keys=function(){return[].slice.call(this._keys)};c.prototype.values=function(){return[].slice.call(this._values)};c.prototype.has=
function(u){return this._keys.includes(u)};c.prototype.get=function(u){u=this._keys.indexOf(u);return-1<u?this._values[u]:null};c.prototype.deepGet=function(u){if(!u||!u.length)return null;var t=function(d,q){return null==d?null:q.length?t(d instanceof c?d.get(q[0]):d[q[0]],q.slice(1)):d};return t(this.get(u[0]),u.slice(1))};c.prototype.set=function(u,t){var d=this._keys.indexOf(u);-1<d?this._values[d]=t:(this._keys.push(u),this._values.push(t),this.length=this._values.length);return this};c.prototype.sortedSet=
function(u,t,d,q){var m=this._keys.length;d=d||0;q=void 0!==q?q:m-1;if(0===m)return this._keys.push(u),this._values.push(t),this;if(u===this._keys[d])return this._values.splice(d,0,t),this;if(u===this._keys[q])return this._values.splice(q,0,t),this;if(u>this._keys[q])return this._keys.splice(q+1,0,u),this._values.splice(q+1,0,t),this;if(u<this._keys[d])return this._values.splice(d,0,t),this._keys.splice(d,0,u),this;if(d>=q)return this;m=d+Math.floor((q-d)/2);return u<this._keys[m]?this.sortedSet(u,
t,d,m-1):u>this._keys[m]?this.sortedSet(u,t,m+1,q):this};c.prototype.size=function(){return this.length};c.prototype.clear=function(){this._keys.length=this.length=this._values.length=0;return this};c.prototype.delete=function(u){u=this._keys.indexOf(u);return-1<u?(this._keys.splice(u,1),this._values.splice(u,1),this.length=this._keys.length,!0):!1};c.prototype.forEach=function(u){var t=this;this._keys.forEach(function(d,q){u(t._values[q],d,q)})};c.prototype.map=function(u){var t=this;return this.keys().map(function(d,
q){return u(t._values[q],d,q)})};c.prototype.filter=function(u){var t=this;t._keys.forEach(function(d,q){!1===u(t._values[q],d,q)&&t.delete(d)});return this};c.prototype.clone=function(){return new c(this.entries())};return c}(),e=function(){function c(u){void 0===u&&(u=20);this._maxEntries=u;this._values=new l}c.prototype.delete=function(u){this._values.has(u)&&this._values.delete(u)};c.prototype.get=function(u){var t=null;this._values.has(u)&&(t=this._values.get(u),this._values.delete(u),this._values.set(u,
t));return t};c.prototype.put=function(u,t){if(this._values.size()>=this._maxEntries){var d=this._values.keys()[0];this._values.delete(d)}this._values.set(u,t)};return c}();return function(){function c(u){void 0===u&&(u=20);this._maxEntries=u;this._cache=new e(this._maxEntries)}c.prototype.clear=function(){this._cache=new e(this._maxEntries)};c.prototype.addToCache=function(u,t){this._cache.put(u,t)};c.prototype.removeFromCache=function(u){this._cache.delete(u)};c.prototype.getFromCache=function(u){return this._cache.get(u)};
return c}()})},"esri/arcade/arcadeRuntime":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./polyfill/tsSupport/extends ./ArcadeModule ./ArcadeModuleLoader ./Dictionary ./executionError ./Feature ./FunctionWrapper ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Geometry ../SpatialReference".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E,C,y){function v(fa,ha){for(var ra=[],za=0;za<ha.arguments.length;za++)ra.push(G(fa,ha.arguments[za]));return ra}function A(fa,ha,ra){try{return!0===ha.preparsed?ra(fa,null,ha.arguments):ra(fa,ha,v(fa,ha))}catch(za){throw za;}}function G(fa,ha){try{switch(null===ha||void 0===ha?void 0:ha.type){case "EmptyStatement":return r.voidOperation;case "VariableDeclarator":var ra=null===ha.init?null:G(fa,ha.init);ra===r.voidOperation&&(ra=null);if("Identifier"!==
ha.id.type)throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.InvalidIdentifier,ha);var za=ha.id.name.toLowerCase();null!=fa.localScope?fa.localScope[za]={value:ra,valueset:!0,node:ha.init}:fa.globalScope[za]={value:ra,valueset:!0,node:ha.init};return r.voidOperation;case "VariableDeclaration":for(var Da=0;Da<ha.declarations.length;Da++)G(fa,ha.declarations[Da]);return r.voidOperation;case "ImportDeclaration":var va,Ga,ba=ha.specifiers[0].local.name.toLowerCase(),ia=fa.libraryResolver.loadLibrary(ba);
Da=null;(null===(va=fa.libraryResolver._moduleSingletons)||void 0===va?0:va.has(ia.uri))?Da=fa.libraryResolver._moduleSingletons.get(ia.uri):(Da=new N(ia),Da.loadModule(fa),null===(Ga=fa.libraryResolver._moduleSingletons)||void 0===Ga?void 0:Ga.set(ia.uri,Da));fa.globalScope[ba]={value:Da,valueset:!0,node:ha};return r.voidOperation;case "ExportNamedDeclaration":G(fa,ha.declaration);if("FunctionDeclaration"===ha.declaration.type)fa.exports[ha.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===
ha.declaration.type){Da=0;for(var wa=ha.declaration.declarations;Da<wa.length;Da++)fa.exports[wa[Da].id.name.toLowerCase()]="variable"}return r.voidOperation;case "BlockStatement":case "Program":a:{var Aa=r.voidOperation;for(Da=0;Da<ha.body.length;Da++)if(Aa=G(fa,ha.body[Da]),Aa instanceof r.ReturnResult||Aa===r.breakResult||Aa===r.continueResult){var Fa=Aa;break a}Fa=Aa}return Fa;case "FunctionDeclaration":var O=ha.id.name.toLowerCase();fa.globalScope[O]={valueset:!0,node:null,value:new T(ha,fa)};
return r.voidOperation;case "ReturnStatement":if(null===ha.argument)var ya=new r.ReturnResult(r.voidOperation);else{var Ha=G(fa,ha.argument);ya=new r.ReturnResult(Ha)}return ya;case "IfStatement":var ea=G(fa,ha.test);if(!0===ea)var Oa=G(fa,ha.consequent);else if(!1===ea)Oa=null!==ha.alternate?G(fa,ha.alternate):r.voidOperation;else throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.BooleanConditionRequired,ha);return Oa;case "ExpressionStatement":if("AssignmentExpression"===ha.expression.type||
"UpdateExpression"===ha.expression.type)var Na=G(fa,ha.expression);else{var Ca=G(fa,ha.expression);Na=Ca===r.voidOperation?r.voidOperation:new r.ImplicitResult(Ca)}return Na;case "AssignmentExpression":Da=null;var X="";if("MemberExpression"===ha.left.type){Da=G(fa,ha.left.object);if(!0===ha.left.computed)X=G(fa,ha.left.property);else if("Identifier"===ha.left.property.type)X=ha.left.property.name;else throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.InvalidIdentifier,ha);var oa=G(fa,ha.right);
if(r.isArray(Da))if(r.isNumber(X)){0>X&&(X=Da.length+X);if(0>X||X>Da.length)throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.OutOfBounds,ha);if(X===Da.length&&"\x3d"!==ha.operator)throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.OutOfBounds,ha);Da[X]=H(oa,ha.operator,Da[X],ha,fa)}else throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.ArrayAccessorMustBeNumber,ha);else if(Da instanceof m){if(!1===r.isString(X))throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.KeyAccessorMustBeString,
ha);if(!0===Da.hasField(X))Da.setField(X,H(oa,ha.operator,Da.field(X),ha,fa));else{if("\x3d"!==ha.operator)throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.FieldNotFound,ha,{key:X});Da.setField(X,H(oa,ha.operator,null,ha,fa))}}else if(r.isFeature(Da)){if(!1===r.isString(X))throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.KeyAccessorMustBeString,ha);if(!0===Da.hasField(X))Da.setField(X,H(oa,ha.operator,Da.field(X),ha,fa));else{if("\x3d"!==ha.operator)throw new a.ArcadeExecutionError(fa,
a.ExecutionErrorCodes.FieldNotFound,ha,{key:X});Da.setField(X,H(oa,ha.operator,null,ha,fa))}}else{if(r.isImmutableArray(Da))throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.Immutable,ha);if(Da instanceof N){if(!1===r.isString(X))throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.ModuleAccessorMustBeString,ha);if(!0===Da.hasGlobal(X))Da.setGlobal(X,H(oa,ha.operator,Da.global(X),ha,fa));else throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.ModuleExportNotFound,ha);}else throw new a.ArcadeExecutionError(fa,
a.ExecutionErrorCodes.InvalidIdentifier,ha);}var pa=r.voidOperation}else{Da=ha.left.name.toLowerCase();var Z=G(fa,ha.right);if(null!=fa.localScope&&void 0!==fa.localScope[Da])fa.localScope[Da]={value:H(Z,ha.operator,fa.localScope[Da].value,ha,fa),valueset:!0,node:ha.right},pa=r.voidOperation;else if(void 0!==fa.globalScope[Da])fa.globalScope[Da]={value:H(Z,ha.operator,fa.globalScope[Da].value,ha,fa),valueset:!0,node:ha.right},pa=r.voidOperation;else throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.InvalidIdentifier,
ha);}return pa;case "UpdateExpression":Da=null;X="";if("MemberExpression"===ha.argument.type){Da=G(fa,ha.argument.object);!0===ha.argument.computed?X=G(fa,ha.argument.property):"Identifier"===ha.argument.property.type&&(X=ha.argument.property.name);if(r.isArray(Da))if(r.isNumber(X)){0>X&&(X=Da.length+X);if(0>X||X>=Da.length)throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.OutOfBounds,ha);var ja=r.toNumber(Da[X]);Da[X]="++"===ha.operator?ja+1:ja-1}else throw new a.ArcadeExecutionError(fa,
a.ExecutionErrorCodes.ArrayAccessorMustBeNumber,ha);else if(Da instanceof m){if(!1===r.isString(X))throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.KeyAccessorMustBeString,ha);if(!0===Da.hasField(X))ja=r.toNumber(Da.field(X)),Da.setField(X,"++"===ha.operator?ja+1:ja-1);else throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.FieldNotFound,ha);}else if(r.isFeature(Da)){if(!1===r.isString(X))throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.KeyAccessorMustBeString,ha);if(!0===
Da.hasField(X))ja=r.toNumber(Da.field(X)),Da.setField(X,"++"===ha.operator?ja+1:ja-1);else throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.FieldNotFound,ha);}else{if(r.isImmutableArray(Da))throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.Immutable,ha);if(Da instanceof N){if(!1===r.isString(X))throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.ModuleAccessorMustBeString,ha);if(!0===Da.hasGlobal(X))ja=r.toNumber(Da.global(X)),Da.setGlobal(X,"++"===ha.operator?ja+1:ja-1);else throw new a.ArcadeExecutionError(fa,
a.ExecutionErrorCodes.ModuleExportNotFound,ha);}else throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.InvalidParameter,ha);}var ta=!1===ha.prefix?ja:"++"===ha.operator?ja+1:ja-1}else{Da="Identifier"===ha.argument.type?ha.argument.name.toLowerCase():"";if(!Da)throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.InvalidIdentifier,ha);if(null!=fa.localScope&&void 0!==fa.localScope[Da])ja=r.toNumber(fa.localScope[Da].value),fa.localScope[Da]={value:"++"===ha.operator?ja+1:ja-1,valueset:!0,
node:ha},ta=!1===ha.prefix?ja:"++"===ha.operator?ja+1:ja-1;else if(void 0!==fa.globalScope[Da])ja=r.toNumber(fa.globalScope[Da].value),fa.globalScope[Da]={value:"++"===ha.operator?ja+1:ja-1,valueset:!0,node:ha},ta=!1===ha.prefix?ja:"++"===ha.operator?ja+1:ja-1;else throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.InvalidIdentifier,ha);}return ta;case "BreakStatement":return r.breakResult;case "ContinueStatement":return r.continueResult;case "TemplateElement":return ha.value?ha.value.cooked:
"";case "TemplateLiteral":var xa="",Ea=0;pa=0;for(Da=ha.quasis;pa<Da.length;pa++)if(X=Da[pa],xa+=X.value?X.value.cooked:"",!1===X.tail){if(ha.expressions[Ea]){oa=r;var Ja=oa.toString,La=G(fa,ha.expressions[Ea]);Z=fa;ta=ha;if(r.isFunctionParameter(La))throw new a.ArcadeExecutionError(Z,a.ExecutionErrorCodes.NoFunctionInTemplateLiteral,ta);var Ya=Ja.call(oa,La)}else Ya="";xa+=Ya;Ea++}return xa;case "ForStatement":null!==ha.init&&G(fa,ha.init);Ea={testResult:!0,lastAction:r.voidOperation};do b:{Da=fa;
X=ha;Ya=Ea;if(null!==X.test){Ya.testResult=G(Da,X.test);if(!1===Ya.testResult)break b;if(!0!==Ya.testResult)throw new a.ArcadeExecutionError(Da,a.ExecutionErrorCodes.BooleanConditionRequired,X);}Ya.lastAction=G(Da,X.body);Ya.lastAction===r.breakResult?Ya.testResult=!1:Ya.lastAction instanceof r.ReturnResult?Ya.testResult=!1:null!==X.update&&G(Da,X.update)}while(!0===Ea.testResult);xa=Ea.lastAction instanceof r.ReturnResult?Ea.lastAction:r.voidOperation;return xa;case "ForInStatement":return F(fa,
ha);case "WhileStatement":Da=!0;var Ua=r.voidOperation;Da=G(fa,ha.test);if(!1===Da)var Ta=r.voidOperation;else{if(!0!==Da)throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.BooleanConditionRequired,ha);for(;!0===Da;){Ua=G(fa,ha.body);if(Ua===r.breakResult)break;if(Ua instanceof r.ReturnResult)break;Da=G(fa,ha.test);if(!0!==Da&&!1!==Da)throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.BooleanConditionRequired,ha);}Ta=Ua instanceof r.ReturnResult?Ua:r.voidOperation}return Ta;case "Identifier":return I(fa,
ha);case "MemberExpression":return L(fa,ha);case "Literal":return ha.value;case "CallExpression":a:try{if("MemberExpression"===ha.callee.type){var ab=G(fa,ha.callee.object);if(!(ab instanceof N))throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.FuncionNotFound,ha);var fb=!1===ha.callee.computed?ha.callee.property.name:G(fa,ha.callee.property);if(!ab.hasGlobal(fb))throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.FuncionNotFound,ha);var kb=ab.global(fb);if(!r.isFunctionParameter(kb))throw new a.ArcadeExecutionError(fa,
a.ExecutionErrorCodes.CallNonFunction,ha);var qb=kb.call(fa,ha)}else{if("Identifier"!==ha.callee.type)throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.FuncionNotFound,ha);if(null!=fa.localScope&&void 0!==fa.localScope[ha.callee.name.toLowerCase()]){var ob=fa.localScope[ha.callee.name.toLowerCase()];if(r.isFunctionParameter(ob.value)){qb=ob.value.call(fa,ha);break a}throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.CallNonFunction,ha);}if(void 0!==fa.globalScope[ha.callee.name.toLowerCase()]){ob=
fa.globalScope[ha.callee.name.toLowerCase()];if(r.isFunctionParameter(ob.value)){qb=ob.value.call(fa,ha);break a}throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.CallNonFunction,ha);}throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.FuncionNotFound,ha);}}catch(Hb){throw Hb;}return qb;case "UnaryExpression":return M(fa,ha);case "BinaryExpression":return Q(fa,ha);case "LogicalExpression":return S(fa,ha);case "ArrayExpression":try{Da=[];for(X=0;X<ha.elements.length;X++){var wb=G(fa,
ha.elements[X]);if(r.isFunctionParameter(wb))throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.NoFunctionInArray,ha);wb===r.voidOperation?Da.push(null):Da.push(wb)}var Gb=Da}catch(Hb){throw Hb;}return Gb;case "ObjectExpression":Da={};var yb=new Map;for(X=0;X<ha.properties.length;X++){var lb=G(fa,ha.properties[X]);if(r.isFunctionParameter(lb.value))throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.NoFunctionInDictionary,ha);if(!1===r.isString(lb.key))throw new a.ArcadeExecutionError(fa,
a.ExecutionErrorCodes.KeyMustBeString,ha);var Db=lb.key.toString(),Sb=Db.toLowerCase();yb.has(Sb)?Db=yb.get(Sb):yb.set(Sb,Db);Da[Db]=lb.value===r.voidOperation?null:lb.value}var Eb=new m(Da);Eb.immutable=!1;return Eb;case "Property":return{key:"Identifier"===ha.key.type?ha.key.name:G(fa,ha.key),value:G(fa,ha.value)};default:throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.Unrecognised,ha);}}catch(Hb){throw a.ensureArcadeExecutionError(fa,ha,Hb);}}function F(fa,ha){var ra=G(fa,ha.right);"VariableDeclaration"===
ha.left.type&&G(fa,ha.left);var za=null,Da="";if("VariableDeclaration"===ha.left.type){var va=ha.left.declarations[0].id;"Identifier"===va.type&&(Da=va.name)}else"Identifier"===ha.left.type&&(Da=ha.left.name);if(!Da)throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.InvalidIdentifier,ha);Da=Da.toLowerCase();null!=fa.localScope&&void 0!==fa.localScope[Da]&&(za=fa.localScope[Da]);null===za&&void 0!==fa.globalScope[Da]&&(za=fa.globalScope[Da]);if(null===za)throw new a.ArcadeExecutionError(fa,
a.ExecutionErrorCodes.InvalidIdentifier,ha);if(r.isArray(ra)||r.isString(ra)){ra=ra.length;for(va=0;va<ra;va++){za.value=va;Da=G(fa,ha.body);if(Da===r.breakResult)break;if(Da instanceof r.ReturnResult)return Da}return r.voidOperation}if(r.isImmutableArray(ra)){for(va=0;va<ra.length();va++){za.value=va;Da=G(fa,ha.body);if(Da===r.breakResult)break;if(Da instanceof r.ReturnResult)return Da}return r.voidOperation}if(ra instanceof m||r.isFeature(ra))for(ra=ra.keys(),va=0;va<ra.length;va++){za.value=ra[va];
Da=G(fa,ha.body);if(Da===r.breakResult)break;if(Da instanceof r.ReturnResult)return Da}else return r.voidOperation}function H(fa,ha,ra,za,Da){switch(ha){case "\x3d":return fa===r.voidOperation?null:fa;case "/\x3d":return r.toNumber(ra)/r.toNumber(fa);case "*\x3d":return r.toNumber(ra)*r.toNumber(fa);case "-\x3d":return r.toNumber(ra)-r.toNumber(fa);case "+\x3d":return r.isString(ra)||r.isString(fa)?r.toString(ra)+r.toString(fa):r.toNumber(ra)+r.toNumber(fa);case "%\x3d":return r.toNumber(ra)%r.toNumber(fa);
default:throw new a.ArcadeExecutionError(Da,a.ExecutionErrorCodes.UnsupportedOperator,za);}}function L(fa,ha){try{var ra=G(fa,ha.object);if(null===ra)throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.MemberOfNull,ha);if(!1===ha.computed){if("Identifier"===ha.property.type){if(ra instanceof m||r.isFeature(ra))return ra.field(ha.property.name);if(ra instanceof C)return w.geometryMember(ra,ha.property.name,ha,fa);if(ra instanceof N){if(!ra.hasGlobal(ha.property.name))throw new a.ArcadeExecutionError(fa,
a.ExecutionErrorCodes.InvalidIdentifier,ha);return ra.global(ha.property.name)}}throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.InvalidMemberAccessKey,ha);}var za=G(fa,ha.property);if(ra instanceof m||r.isFeature(ra)){if(r.isString(za))return ra.field(za);throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.InvalidMemberAccessKey,ha);}if(ra instanceof N){if(r.isString(za))return ra.global(za);throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.InvalidMemberAccessKey,ha);}if(ra instanceof
C){if(r.isString(za))return w.geometryMember(ra,za,ha,fa);throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.InvalidMemberAccessKey,ha);}if(r.isArray(ra)){if(r.isNumber(za)&&isFinite(za)&&Math.floor(za)===za){0>za&&(za=ra.length+za);if(za>=ra.length||0>za)throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.OutOfBounds,ha);return ra[za]}throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.InvalidMemberAccessKey,ha);}if(r.isString(ra)){if(r.isNumber(za)&&isFinite(za)&&Math.floor(za)===
za){0>za&&(za=ra.length+za);if(za>=ra.length||0>za)throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.OutOfBounds,ha);return ra[za]}throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.InvalidMemberAccessKey,ha);}if(r.isImmutableArray(ra)&&r.isNumber(za)&&isFinite(za)&&Math.floor(za)===za){0>za&&(za=ra.length()+za);if(za>=ra.length()||0>za)throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.OutOfBounds,ha);return ra.get(za)}throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.InvalidMemberAccessKey,
ha);}catch(Da){throw Da;}}function M(fa,ha){try{var ra=G(fa,ha.argument);if(r.isBoolean(ra)){if("!"===ha.operator)return!ra;if("-"===ha.operator)return-1*r.toNumber(ra);if("+"===ha.operator)return 1*r.toNumber(ra);if("~"===ha.operator)return~r.toNumber(ra);throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.UnsupportedUnaryOperator,ha);}if("~"===ha.operator)return~r.toNumber(ra);if("-"===ha.operator)return-1*r.toNumber(ra);if("+"===ha.operator)return 1*r.toNumber(ra);throw new a.ArcadeExecutionError(fa,
a.ExecutionErrorCodes.UnsupportedUnaryOperator,ha);}catch(za){throw za;}}function Q(fa,ha){try{var ra=[G(fa,ha.left),G(fa,ha.right)],za=ra[0],Da=ra[1];switch(ha.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return r.binaryOperator(r.toNumber(za),r.toNumber(Da),ha.operator);case "\x3d\x3d":return r.equalityTest(za,Da);case "!\x3d":return!r.equalityTest(za,Da);case "\x3c":return r.greaterThanLessThan(za,Da,ha.operator);case "\x3e":return r.greaterThanLessThan(za,
Da,ha.operator);case "\x3c\x3d":return r.greaterThanLessThan(za,Da,ha.operator);case "\x3e\x3d":return r.greaterThanLessThan(za,Da,ha.operator);case "+":return r.isString(za)||r.isString(Da)?r.toString(za)+r.toString(Da):r.toNumber(za)+r.toNumber(Da);case "-":return r.toNumber(za)-r.toNumber(Da);case "*":return r.toNumber(za)*r.toNumber(Da);case "/":return r.toNumber(za)/r.toNumber(Da);case "%":return r.toNumber(za)%r.toNumber(Da);default:throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.UnsupportedOperator,
ha);}}catch(va){throw va;}}function S(fa,ha){try{var ra=G(fa,ha.left);if(r.isBoolean(ra))switch(ha.operator){case "||":if(!0===ra)return ra;var za=G(fa,ha.right);if(r.isBoolean(za))return za;throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.LogicExpressionOrAnd,ha);case "\x26\x26":if(!1===ra)return ra;za=G(fa,ha.right);if(r.isBoolean(za))return za;throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.LogicExpressionOrAnd,ha);default:throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.LogicExpressionOrAnd,
ha);}throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,ha);}catch(Da){throw Da;}}function I(fa,ha){try{var ra=ha.name.toLowerCase();if(null!=fa.localScope&&void 0!==fa.localScope[ra]){var za=fa.localScope[ra];if(!0===za.valueset)return za.value;za.value=G(fa,za.node);za.valueset=!0;return za.value}if(void 0!==fa.globalScope[ra]){za=fa.globalScope[ra];if(!0===za.valueset)return za.value;za.value=G(fa,za.node);za.valueset=!0;return za.value}throw new a.ArcadeExecutionError(fa,
a.ExecutionErrorCodes.InvalidIdentifier,ha);}catch(Da){throw Da;}}function P(fa,ha,ra,za){try{var Da=G(fa,ha.arguments[ra]);if(r.equalityTest(Da,za))return G(fa,ha.arguments[ra+1]);var va=ha.arguments.length-ra;return 1===va?G(fa,ha.arguments[ra]):2===va?null:3===va?G(fa,ha.arguments[ra+2]):P(fa,ha,ra+2,za)}catch(Ga){throw Ga;}}function J(fa,ha,ra,za){try{if(!0===za)return G(fa,ha.arguments[ra+1]);if(3===ha.arguments.length-ra)return G(fa,ha.arguments[ra+2]);var Da=G(fa,ha.arguments[ra+2]);if(!1===
r.isBoolean(Da))throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.BooleanConditionRequired,ha.arguments[ra+2]);return J(fa,ha,ra+2,Da)}catch(va){throw va;}}function U(fa,ha,ra,za){try{var Da=fa.body;if(ra.length!==fa.params.length)throw new a.ArcadeExecutionError(ha,a.ExecutionErrorCodes.WrongNumberOfParameters,za);if(null!=ha.localScope)for(var va=0;va<ra.length;va++)ha.localScope[fa.params[va].name.toLowerCase()]={value:ra[va],valueset:!0,node:null};var Ga=G(ha,Da);if(Ga instanceof r.ReturnResult)return Ga.value;
if(Ga===r.breakResult)throw new a.ArcadeExecutionError(ha,a.ExecutionErrorCodes.UnexpectedToken,za);if(Ga===r.continueResult)throw new a.ArcadeExecutionError(ha,a.ExecutionErrorCodes.UnexpectedToken,za);return Ga instanceof r.ImplicitResult?Ga.value:Ga}catch(ba){throw ba;}}function Y(fa,ha,ra){var za=new da;fa||(fa={});ha||(ha={});var Da=new m({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});Da.immutable=!1;za.textformatting={value:Da,valueset:!0,node:null};
for(var va in ha)za[va]={value:new n.NativeFunction(ha[va]),native:!0,valueset:!0,node:null};for(va in fa)za[va]=fa[va]&&"esri.Graphic"===fa[va].declaredClass?{value:h.createFromGraphic(fa[va],ra),valueset:!0,node:null}:{value:fa[va],valueset:!0,node:null};return za}function aa(fa){}function la(fa){for(var ha={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:A,evaluateIdentifier:I},ra=0;ra<fa.length;ra++)fa[ra].registerFunctions(ha);for(var za in ha.functions)K[za]={value:new n.NativeFunction(ha.functions[za]),
valueset:!0,node:null},da.prototype[za]=K[za];for(ra=0;ra<ha.signatures.length;ra++)k.addFunctionDeclaration(ha.signatures[ra],"sync")}Object.defineProperty(B,"__esModule",{value:!0});B.executeScript=B.extend=B.functionHelper=void 0;var T=function(fa){function ha(ra,za){var Da=fa.call(this)||this;Da.definition=null;Da.context=null;Da.definition=ra;Da.context=za;return Da}t(ha,fa);ha.prototype.createFunction=function(ra){var za=this;return function(){for(var Da=[],va=0;va<arguments.length;va++)Da[va]=
arguments[va];va={spatialReference:za.context.spatialReference,console:za.context.console,timeReference:za.context.timeReference?za.context.timeReference:null,lrucache:za.context.lrucache,exports:za.context.exports,libraryResolver:za.context.libraryResolver,interceptor:za.context.interceptor,localScope:{},depthCounter:{depth:ra.depthCounter.depth+1},globalScope:za.context.globalScope};if(64<va.depthCounter.depth)throw new a.ArcadeExecutionError(ra,a.ExecutionErrorCodes.MaximumCallDepth,null);return U(za.definition,
va,Da,null)}};ha.prototype.call=function(ra,za){var Da=this;return A(ra,za,function(va,Ga,ba){var ia;va={spatialReference:ra.spatialReference,globalScope:ra.globalScope,depthCounter:{depth:ra.depthCounter.depth+1},libraryResolver:ra.libraryResolver,exports:ra.exports,timeReference:null!==(ia=ra.timeReference)&&void 0!==ia?ia:null,console:ra.console,lrucache:ra.lrucache,interceptor:ra.interceptor,localScope:{}};if(64<va.depthCounter.depth)throw new a.ArcadeExecutionError(ra,a.ExecutionErrorCodes.MaximumCallDepth,
za);return U(Da.definition,va,ba,za)})};ha.prototype.marshalledCall=function(ra,za,Da,va){var Ga=this;return va(ra,za,function(ba,ia,wa){var Aa;ba={spatialReference:ra.spatialReference,globalScope:Da.globalScope,depthCounter:{depth:ra.depthCounter.depth+1},libraryResolver:ra.libraryResolver,exports:ra.exports,console:ra.console,timeReference:null!==(Aa=ra.timeReference)&&void 0!==Aa?Aa:null,lrucache:ra.lrucache,interceptor:ra.interceptor,localScope:{}};wa=wa.map(function(Fa){return!r.isFunctionParameter(Fa)||
Fa instanceof n.ScopeMarshalledFunction?Fa:n.wrapModuleScopedResponse(Fa,ra,va)});return n.wrapModuleScopedResponse(U(Ga.definition,ba,wa,za),Da,va)})};return ha}(n.ArcadeFunction),N=function(fa){function ha(ra){return fa.call(this,ra)||this}t(ha,fa);ha.prototype.global=function(ra){ra=this.executingContext.globalScope[ra.toLowerCase()];ra.valueset||(ra.value=G(this.executingContext,ra.node),ra.valueset=!0);if(r.isFunctionParameter(ra.value)&&!(ra.value instanceof n.ScopeMarshalledFunction)){var za=
new n.ScopeMarshalledFunction;za.fn=ra.value;za.parameterEvaluator=A;za.context=this.executingContext;ra.value=za}return ra.value};ha.prototype.setGlobal=function(ra,za){if(r.isFunctionParameter(za))throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.AssignModuleFunction,null);this.executingContext.globalScope[ra.toLowerCase()]={value:za,valueset:!0,node:null}};ha.prototype.hasGlobal=function(ra){void 0===this.executingContext.exports[ra]&&(ra=ra.toLowerCase());return void 0!==this.executingContext.exports[ra]?
!0:!1};ha.prototype.loadModule=function(ra){var za,Da=ra.spatialReference;if(null===Da||void 0===Da)Da=new y({wkid:102100});this.moduleScope=Y({},ra.customfunctions,ra.timeReference);this.executingContext={spatialReference:Da,globalScope:this.moduleScope,localScope:null,libraryResolver:new q.ArcadeModuleLoader(ra.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),exports:{},console:ra.console?ra.console:aa,timeReference:null!==(za=ra.timeReference)&&void 0!==za?za:null,lrucache:ra.lrucache,
interceptor:ra.interceptor,depthCounter:{depth:1}};G(this.executingContext,this.source.syntax)};return ha}(d.ArcadeModule),K={};b.registerFunctions(K,A);E.registerFunctions(K,A);z.registerFunctions(K,A);w.registerFunctions(K,A);D.registerFunctions(K,A);x.registerFunctions(K,A);K.iif=function(fa,ha){try{r.pcCheck(null===ha.arguments?[]:ha.arguments,3,3,fa,ha);var ra=G(fa,ha.arguments[0]);if(!1===r.isBoolean(ra))throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.BooleanConditionRequired,ha);
return!0===ra?G(fa,ha.arguments[1]):G(fa,ha.arguments[2])}catch(za){throw za;}};K.decode=function(fa,ha){try{if(2>ha.arguments.length)throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.WrongNumberOfParameters,ha);if(2===ha.arguments.length)return G(fa,ha.arguments[1]);if(0===(ha.arguments.length-1)%2)throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.WrongNumberOfParameters,ha);var ra=G(fa,ha.arguments[0]);return P(fa,ha,1,ra)}catch(za){throw za;}};K.when=function(fa,ha){try{if(3>ha.arguments.length)throw new a.ArcadeExecutionError(fa,
a.ExecutionErrorCodes.WrongNumberOfParameters,ha);if(0===ha.arguments.length%2)throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.WrongNumberOfParameters,ha);var ra=G(fa,ha.arguments[0]);if(!1===r.isBoolean(ra))throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.BooleanConditionRequired,ha.arguments[0]);return J(fa,ha,0,ra)}catch(za){throw za;}};for(var W in K)K[W]={value:new n.NativeFunction(K[W]),valueset:!0,node:null};var da=function(){};da.prototype=K;da.prototype.infinity={value:Number.POSITIVE_INFINITY,
valueset:!0,node:null};da.prototype.pi={value:Math.PI,valueset:!0,node:null};B.functionHelper={fixSpatialReference:r.fixSpatialReference,parseArguments:v,standardFunction:A};B.extend=la;la([g]);B.executeScript=function(fa,ha){var ra,za=ha.spatialReference;if(null===za||void 0===za)za=new y({wkid:102100});var Da=null;fa.usesModules&&(Da=new q.ArcadeModuleLoader(new Map,fa.loadedModules));var va=Y(ha.vars,ha.customfunctions,ha.timeReference);za={spatialReference:za,globalScope:va,localScope:null,exports:{},
libraryResolver:Da,console:ha.console?ha.console:aa,timeReference:null!==(ra=ha.timeReference)&&void 0!==ra?ra:null,lrucache:ha.lrucache,interceptor:ha.interceptor,depthCounter:{depth:1}};fa=G(za,fa);fa instanceof r.ReturnResult&&(fa=fa.value);fa instanceof r.ImplicitResult&&(fa=fa.value);fa===r.voidOperation&&(fa=null);if(fa===r.breakResult)throw new a.ArcadeExecutionError(za,a.ExecutionErrorCodes.IllegalResult,null);if(fa===r.continueResult)throw new a.ArcadeExecutionError(za,a.ExecutionErrorCodes.IllegalResult,
null);if(r.isFunctionParameter(fa))throw new a.ArcadeExecutionError(za,a.ExecutionErrorCodes.IllegalResult,null);return fa}})},"esri/arcadeProfiles/visualizationProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../support/expressionUtils ./utils".split(" "),function(f,B,l,e,c,u,t){f=new (f(null,{declaredClass:"esri.arcadeProfiles.VisualizationProfile",initialize:function(d){var q=[];t.hasGeometryOperations(d)&&q.push(u.enableGeometryOperations());return c(q)}}));
B.setObject("arcadeProfiles.visualizationProfile",f,e);return f})},"esri/arcadeProfiles/utils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","../kernel","../support/expressionUtils"],function(f,B,l,e,c){var u=/(\/(MapServer|FeatureServer)).*/ig;l={hasGeometryOperations:function(t){return B.some(t,function(d){return d.hasGeometryOperations?d.hasGeometryOperations():c.hasGeometryOperations(d)})},hasFeatureSetOperations:function(t){return B.some(t,function(d){return d.hasFeatureSetOperations?
d.hasFeatureSetOperations():c.hasFeatureSetOperations(d)})},hasVariables:function(t,d){return B.some(t,function(q){return B.some(d,function(m){return q.hasVariable?q.hasVariable(m):c.hasVariable(q,m)})})},isAsync:function(t){return B.some(t,function(d){return d.async})},getServiceUrl:function(t){return u.test(t)?t.replace(u,"$1"):null}};f.setObject("arcadeProfiles.utils",l,e);return l})},"esri/renderers/UniqueValueRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),
function(f,B,l,e,c,u,t,d,q){f=f(d,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(m,a,h,n,r,k){this.values=[];this._symbols={};this.infos=[];m&&!m.declaredClass?(a=m,h=k&&k.geometryType,this.defaultSymbol=(m=a.defaultSymbol)&&(m.declaredClass?m:t.fromJson(m,k)),this.attributeField=a.field1,this.attributeField2=a.field2,this.attributeField3=a.field3,this.fieldDelimiter=a.fieldDelimiter,this.defaultLabel=a.defaultLabel,this.setValueExpression(a.valueExpression),this.valueExpressionTitle=
a.valueExpressionTitle,this.legendOptions=a.legendOptions,a.backgroundFillSymbol&&(this.backgroundFillSymbol=t.fromJson(a.backgroundFillSymbol,h?{geometryType:"esriGeometryPolygon"}:null)),"esriGeometryPolygon"===h&&this.hasVisualVariables("sizeInfo",!1)&&(k={geometryType:"esriGeometryPoint"}),B.forEach(a.uniqueValueInfos,function(g){this._addValueInfo(g,k)},this)):(this.defaultSymbol=m,this.attributeField=a,this.attributeField2=h,this.attributeField3=n,this.fieldDelimiter=r);this._multiple=!!this.attributeField2},
addValue:function(m,a){m=l.isObject(m)?m:{value:m,symbol:a};this._addValueInfo(m)},removeValue:function(m){var a=B.indexOf(this.values,m);-1!==a&&(this.values.splice(a,1),this._hasNullKeyword=this._evalNullKeyword(this.values),delete this._symbols[m],this.infos.splice(a,1))},getUniqueValueInfo:function(m){var a=this.attributeField,h=m.attributes;if(this.valueExpression)a=this._getDataValue(m,this._uvInfo,null,this._cache.uvInfo),a=this._normalizeNullValue(a);else if(this._multiple){m=this.attributeField2;
var n=this.attributeField3,r=[];a&&r.push(this._normalizeNullValue(h[a]));m&&r.push(this._normalizeNullValue(h[m]));n&&r.push(this._normalizeNullValue(h[n]));a=r.join(this.fieldDelimiter||"")}else a=l.isFunction(a)?a(m):h[a],a=this._normalizeNullValue(a);return this._symbols[a]},setValueExpression:function(m){this.valueExpression=m;this._uvInfo={valueExpression:m};this._cache.uvInfo=this._createCache(this._uvInfo,!0)},getFieldsUsedInExpressions:function(m){var a=this.inherited(arguments);this.valueExpression&&
(a=a.concat(q.extractFieldNames(this.valueExpression,m)));a.sort();return B.filter(a,function(h,n){return 0===n||a[n-1]!==h})},getSymbol:function(m){return(m=this.getUniqueValueInfo(m))&&m.symbol||this.defaultSymbol},_addValueInfo:function(m,a){var h=m.value;this.values.push(h);this._hasNullKeyword=this._evalNullKeyword(this.values);this.infos.push(m);var n=m.symbol;n&&!n.declaredClass&&(m.symbol=t.fromJson(n,a));this._symbols[h]=m},_nullCode:"\x3cNull\x3e",_normalizeNullValue:function(m){return this._hasNullKeyword&&
null==m?this._nullCode:m},_evalNullKeyword:function(m){var a=this.fieldDelimiter||"",h=new RegExp("(^|"+a+")("+this._nullCode+")("+a+"|$)");return B.some(m,function(n){return h.test(n)})},toJson:function(){var m=u.fixJson;var a={type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:l.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&
this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:B.map(this.infos||[],function(h){h=l.mixin({},h);h.symbol=h.symbol&&h.symbol.toJson();h.value+="";return m(h)})};this.backgroundFillSymbol&&(a.backgroundFillSymbol=this.backgroundFillSymbol.toJson());a=l.mixin(this.inherited(arguments),a);return m(a)}});l.setObject("renderer.UniqueValueRenderer",f,c);return f})},"esri/renderers/jsonUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../Color ../symbols/jsonUtils ./SimpleRenderer ./UniqueValueRenderer ./ClassBreaksRenderer ./VectorFieldRenderer ./DotDensityRenderer ./ScaleDependentRenderer ./TimeClassBreaksAger ./TimeRampAger ./TemporalRenderer ./HeatmapRenderer ./StretchRenderer ./ShadedReliefRenderer ./ColormapRenderer".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z){var D={createDefaultRenderer:function(E){E=t.createDefaultSymbol(E);return new d(E)},fromJson:function(E,C){switch(E.type||""){case "simple":E=new d(E,C);break;case "uniqueValue":E=new q(E,null,null,null,null,C);break;case "classBreaks":E=new m(E,null,C);break;case "vectorField":E=new a(E);break;case "scaleDependent":E=this._scaleDependentFromJson(E);break;case "dotDensity":E=E.attributes?D.createDefaultRenderer("esriGeometryPolygon"):this._dotDensityFromJson(E);
break;case "temporal":E=this._temporalFromJson(E,C);break;case "heatmap":E=this._heatmapFromJson(E);break;case "rasterStretch":E=new w(E);break;case "rasterShadedRelief":E=new x(E);break;case "rasterColormap":E=new z(E);break;default:E=(E=C&&C.geometryType)?D.createDefaultRenderer(E):null}return E},_scaleDependentFromJson:function(E){var C={},y=E.minScale;C.rendererInfos=f.map(E.rendererInfos,function(v){var A=v.maxScale;v={minScale:y,maxScale:A,renderer:v.renderer&&this.fromJson(v.renderer)};y=A;
return v},this);return new n(C)},_dotDensityFromJson:function(E){E.backgroundColor&&B.isArray(E.backgroundColor)&&(E.backgroundColor=u.toDojoColor(E.backgroundColor));0<E.dotSize&&(E.dotSize=e.pt2px(E.dotSize));E.fields&&f.forEach(E.fields,function(C){C&&B.isArray(C.color)&&(C.color=u.toDojoColor(C.color))});E.legendOptions&&(E.legendOptions.backgroundColor&&B.isArray(E.legendOptions.backgroundColor)&&(E.legendOptions.backgroundColor=u.toDojoColor(E.legendOptions.backgroundColor)),E.legendOptions.outline&&
(E.legendOptions.outline=t.fromJson(E.legendOptions.outline)));E.outline&&(E.outline=t.fromJson(E.outline));return new h(E)},_temporalFromJson:function(E,C){var y=C&&C.geometryType;E=E||{};var v=this.fromJson(E.observationRenderer,C);C=E.latestObservationRenderer?this.fromJson(E.latestObservationRenderer,C):null;y=E.trackRenderer?this.fromJson(E.trackRenderer,y?{geometryType:"esriGeometryPolyline"}:null):null;E=this._agerFromJson(E.observationAger);return new g(v,C,y,E)},_agerFromJson:function(E){var C;
E=E||{};E.colorRange||E.sizeRange||E.alphaRange?C=this._timeRampFromJson(E):E.agerClassBreakInfos&&(C=this._timeClassBreaksFromJson(E));return C},_timeRampFromJson:function(E){var C,y,v;E.colorRange&&1<E.colorRange.length&&(C=[u.toDojoColor(E.colorRange[0]),u.toDojoColor(E.colorRange[1])]);E.sizeRange&&1<E.sizeRange.length&&(y=[E.sizeRange[0],E.sizeRange[1]]);E.alphaRange&&1<E.alphaRange.length&&(v=[E.alphaRange[0]/255,E.alphaRange[1]/255]);return new k(C,y,v)},_timeClassBreaksFromJson:function(E){var C=
E.agerClassBreakInfos,y=[],v;var A=r.UNIT_DAYS;switch(E.timeUnits){case "esriTimeUnitsSeconds":A=r.UNIT_SECONDS;break;case "esriTimeUnitsMilliseconds":A=r.UNIT_MILLISECONDS;break;case "esriTimeUnitsHours":A=r.UNIT_HOURS;break;case "esriTimeUnitsMinutes":A=r.UNIT_MINUTES;break;case "esriTimeUnitsMonths":A=r.UNIT_MONTHS;break;case "esriTimeUnitsWeeks":A=r.UNIT_WEEKS;break;case "esriTimeUnitsYears":A=r.UNIT_YEARS}for(v=0;v<C.length;v+=1){E=C[v];var G={minAge:0,maxAge:E.oldestAge||Infinity};E.color&&
(G.color=u.toDojoColor(E.color));E.alpha&&(G.alpha=E.alpha/255);G.size=E.size;y[v]=G}return new r(y,A)},_heatmapFromJson:function(E){var C=E.colorStops;C&&C instanceof Array&&f.forEach(C,function(y){y.color=u.toDojoColor(y.color)});return new b(E)}};B.mixin(B.getObject("renderer",!0,c),D);return D})},"esri/renderers/ClassBreaksRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),
function(f,B,l,e,c,u,t,d,q){f=f(d,{declaredClass:"esri.renderer.ClassBreaksRenderer",constructor:function(m,a,h){this.breaks=[];this._symbols={};this.infos=[];this.isMaxInclusive=!0;if(m&&!m.declaredClass){var n=m;a=h&&h.geometryType;this.attributeField=n.field;this.setValueExpression(n.valueExpression);this.valueExpressionTitle=n.valueExpressionTitle;this.legendOptions=n.legendOptions;this.defaultSymbol=(m=n.defaultSymbol)&&(m.declaredClass?m:t.fromJson(m,h));this.backgroundFillSymbol=(m=n.backgroundFillSymbol)&&
(m.declaredClass?m:t.fromJson(m,a?{geometryType:"esriGeometryPolygon"}:null));this._copy(["defaultLabel","classificationMethod:rest","normalizationType:rest","normalizationField","normalizationTotal"],n,this);var r=n.minValue;(m=n.classBreakInfos)&&m[0]&&u.isDefined(m[0].classMaxValue)&&B.forEach(m,function(k){var g=k.classMaxValue;k.minValue=r;r=k.maxValue=g},this);"esriGeometryPolygon"===a&&(this.hasVisualVariables("sizeInfo",!1)||t.isPointSymbol(t.getFirstSupportedSymbol(B.map(m,function(k){return k.symbol}))))&&
(h={geometryType:"esriGeometryPoint"});B.forEach(m,function(k){this._addBreakInfo(k,h)},this)}else this.defaultSymbol=m,this.attributeField=a},addBreak:function(m,a,h){m=l.isObject(m)?m:{minValue:m,maxValue:a,symbol:h};this._addBreakInfo(m)},removeBreak:function(m,a){var h=this.breaks,n,r=h.length,k=this._symbols;for(n=0;n<r;n++){var g=h[n];if(g[0]==m&&g[1]==a){h.splice(n,1);delete k[m+"-"+a];this.infos.splice(n,1);break}}},clearBreaks:function(){this.breaks=[];this._symbols={};this.infos=[]},getBreakIndex:function(m){var a=
this.attributeField,h=m.attributes,n=this.breaks,r=n.length,k=this.isMaxInclusive;if(this.valueExpression)m=this._getDataValue(m,this._cbInfo,null,this._cache.cbInfo);else if(l.isFunction(a))m=a(m);else if(m=parseFloat(h[a]),a=this.normalizationType,a){var g=parseFloat(this.normalizationTotal);h=parseFloat(h[this.normalizationField]);if("log"===a)m=Math.log(m)*Math.LOG10E;else if("percent-of-total"===a&&!isNaN(g))m=m/g*100;else if("field"===a){if(isNaN(m)||isNaN(h))return-1;m/=h}}if(null!=m&&!isNaN(m)&&
"number"===typeof m)for(h=0;h<r;h++)if(a=n[h],a[0]<=m&&(k?m<=a[1]:m<a[1]))return h;return-1},getBreakInfo:function(m){m=this.getBreakIndex(m);return-1!==m?this.infos[m]:null},getSymbol:function(m){return(m=this.breaks[this.getBreakIndex(m)])?this._symbols[m[0]+"-"+m[1]]:this.defaultSymbol},setMaxInclusive:function(m){this.isMaxInclusive=m},setValueExpression:function(m){this.valueExpression=m;this._cbInfo={valueExpression:m};this._cache.cbInfo=this._createCache(this._cbInfo)},getFieldsUsedInExpressions:function(m){var a=
this.inherited(arguments);this.valueExpression&&(a=a.concat(q.extractFieldNames(this.valueExpression,m)));a.sort();return B.filter(a,function(h,n){return 0===n||a[n-1]!==h})},isContinuousRenderer:function(){var m=!1;if(this.infos&&1===this.infos.length){var a=this.attributeField,h=this.normalizationField,n=this.valueExpression;m=this.getVisualVariablesForType("colorInfo",!1)||[];var r=this.getVisualVariablesForType("sizeInfo",!1)||[],k=this.getVisualVariablesForType("opacityInfo",!1)||[];m=m.concat(r).concat(k);
m=B.some(m,function(g){return(g.field===a||g.valueExpression===n)&&g.normalizationField==h})}return m},_normalizationTypeEnums:[["field","esriNormalizeByField"],["log","esriNormalizeByLog"],["percent-of-total","esriNormalizeByPercentOfTotal"]],_classificationMethodEnums:[["natural-breaks","esriClassifyNaturalBreaks"],["equal-interval","esriClassifyEqualInterval"],["quantile","esriClassifyQuantile"],["standard-deviation","esriClassifyStandardDeviation"],["geometrical-interval","esriClassifyGeometricalInterval"],
["defined-interval","esriClassifyDefinedInterval"],["manual-interval","esriClassifyManual"]],_copy:function(m,a,h){B.forEach(m,function(n){var r=n.split(":");if(1<r.length){n=r[0];var k=this["_"+n+"Enums"];if("rest"===r[1]){var g="1";var b="0"}else"sdk"===r[1]&&(g="0",b="1")}r=a[n];if(void 0!==r&&(h[n]=r,k&&g)){var w,x=k.length;for(w=0;w<x;w++)if(k[w][g]===r){h[n]=k[w][b];break}}},this)},_addBreakInfo:function(m,a){var h=m.minValue,n=m.maxValue;this.breaks.push([h,n]);this.infos.push(m);var r=m.symbol;
r&&!r.declaredClass&&(m.symbol=t.fromJson(r,a));this._symbols[h+"-"+n]=m.symbol},toJson:function(){var m=this.infos||[],a=u.fixJson,h=m[0]&&m[0].minValue,n=this.backgroundFillSymbol;m=l.mixin(this.inherited(arguments),{type:"classBreaks",field:this.attributeField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:l.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),backgroundFillSymbol:n&&n.toJson(),minValue:-Infinity===
h?-Number.MAX_VALUE:h,classBreakInfos:B.map(m,function(r){r=l.mixin({},r);r.symbol=r.symbol&&r.symbol.toJson();r.classMaxValue=Infinity===r.maxValue?Number.MAX_VALUE:r.maxValue;delete r.minValue;delete r.maxValue;return a(r)})});this._copy(["defaultLabel","classificationMethod:sdk","normalizationType:sdk","normalizationField","normalizationTotal"],this,m);m.hasOwnProperty("normalizationType")&&!m.normalizationType&&delete m.normalizationType;m.hasOwnProperty("classificationMethod")&&!m.classificationMethod&&
delete m.classificationMethod;return a(m)}});l.setObject("renderer.ClassBreaksRenderer",f,c);return f})},"esri/renderers/VectorFieldRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/_base/array ../kernel ../lang ../Color ./Renderer ./ClassBreaksRenderer ../symbols/SimpleMarkerSymbol ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/jsonUtils require".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h,n,r){var k={STYLE_WIND_BARBS:"wind_speed",STYLE_SINGLE_ARROW:"single_arrow",
STYLE_CLASSIFIED_ARROW:"classified_arrow",STYLE_BEAUFORT_KN:"beaufort_kn",STYLE_BEAUFORT_METER:"beaufort_m",STYLE_BEAUFORT_MILE:"beaufort_mi",STYLE_BEAUFORT_FEET:"beaufort_ft",STYLE_BEAUFORT_KM:"beaufort_km",STYLE_OCEAN_CURRENT_M:"ocean_current_m",STYLE_OCEAN_CURRENT_KN:"ocean_current_kn",STYLE_SCALAR:"simple_scalar"},g=f(d,{declaredClass:"esri.renderer.VectorFieldRenderer",iconFolderPath:"../images/symbol/sfs/",constructor:function(b){u.isDefined(b)||(b={});b.attributeField=b.attributeField||"Magnitude";
b.rotationInfo=b.rotationInfo||this._getRotationInfo(b);f.safeMixin(this,b);this.setRotationInfo(this.rotationInfo);this.style=this.style||g.STYLE_SINGLE_ARROW;this.singleArrowSymbol&&(this.singleArrowSymbol=this.singleArrowSymbol.declaredClass?this.singleArrowSymbol:n.fromJson(this.singleArrowSymbol));this.renderer=new q(this._getDefaultSymbol(),b.attributeField);this._updateRenderer(this.style);this.flowRepresentation=this.flowRepresentation||this.FLOW_FROM},getSymbol:function(b){return this.renderer&&
this.renderer.getSymbol(b)},setVisualVariables:function(b){b=e.filter(b,function(w){if("sizeInfo"===w.type)return u.isDefined(this._updateSizeInfo(w))},this);this.inherited(arguments);return this},setSizeInfo:function(b){this._updateSizeInfo(b);this.inherited(arguments);return this},setProportionalSymbolInfo:function(b){this.setSizeInfo(b);return this},setColorInfo:function(b){return this},_updateRenderer:function(b){return u.isDefined(this.renderer)?b===g.STYLE_SINGLE_ARROW?this._createSingleArrowRenderer():
b===g.STYLE_BEAUFORT_KN?this._createBeaufortKnotsRenderer():b===g.STYLE_BEAUFORT_METER?this._createBeaufortMeterRenderer():b===g.STYLE_BEAUFORT_FEET?this._createBeaufortFeetRenderer():b===g.STYLE_BEAUFORT_MILE?this._createBeaufortMilesRenderer():b===g.STYLE_BEAUFORT_KM?this._createBeaufortKilometersRenderer():b===g.STYLE_OCEAN_CURRENT_M?this._createCurrentMeterRenderer():b===g.STYLE_OCEAN_CURRENT_KN?this._createCurrentKnotsRenderer():b===g.STYLE_SCALAR?this._createSimpleScalarRenderer():b===g.STYLE_WIND_BARBS?
this._createWindBarbsRenderer():this._createClassifiedArrowRenderer():Error("Invalid Renderer!")},_updateSizeInfo:function(b){return b&&u.isDefined(b.minSize)&&u.isDefined(b.maxSize)&&u.isDefined(b.minDataValue)&&u.isDefined(b.maxDataValue)?(this.style===g.STYLE_WIND_BARBS&&(b.minSize=b.maxSize),b.field=b.field||"Magnitude",b.type="sizeInfo",this.minDataValue=b.minDataValue,this.maxDataValue=b.maxDataValue,b):null},_createClassifiedArrowRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new t([56,
168,0]));var b=[0,1E-6,3.5,7,10.5,14];if(u.isDefined(this.minDataValue)&&u.isDefined(this.maxDataValue)){var w=(this.maxDataValue-this.minDataValue)/5;b=[];var x;var z=this.minDataValue;for(x=0;6>x;x++)b[x]=z,z+=w}this._addBreaks(b,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])},_createSingleArrowRenderer:function(){this.renderer.defaultSymbol=this.singleArrowSymbol||this._getDefaultSymbol()},_createBeaufortMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new t([214,
47,39]));this._addBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new t([214,47,39]));this._addBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,
250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])},_createBeaufortFeetRenderer:function(){var b=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];e.forEach(b,function(w,x){b[x]*=3.28084});this.renderer.defaultSymbol=this._getDefaultSymbol(new t([214,47,39]));this._addBreaks(b,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortMilesRenderer:function(){var b=
[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];e.forEach(b,function(w,x){b[x]*=2.23694});this.renderer.defaultSymbol=this._getDefaultSymbol(new t([214,47,39]));this._addBreaks(b,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKilometersRenderer:function(){var b=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];e.forEach(b,function(w,x){b[x]*=3.6});this.renderer.defaultSymbol=
this._getDefaultSymbol(new t([214,47,39]));this._addBreaks(b,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createCurrentMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new t([177,177,177]));this._addBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]])},_createCurrentKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new t([177,
177,177]));this._addBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])},_createSimpleScalarRenderer:function(){this.renderer.defaultSymbol=new a({url:r.toUrl(this.iconFolderPath+"scalar.png"),height:20,width:20,type:"esriPMS",angle:0})},_createWindBarbsRenderer:function(){var b=[],w;for(w=0;150>=w;w+=5)b.push(w);var x="M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20;M25 0 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40;M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35;M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15 M25 10 M25 5 L17.5 7.5".split(";");
var z=new a({url:r.toUrl(this.iconFolderPath+"windbarb.png"),height:20,width:20,type:"esriPMS",angle:0});this.renderer.defaultSymbol=z;for(w=0;w<b.length-1;w++)0===w?this.renderer.addBreak({minValue:b[w],maxValue:b[w+1],symbol:z}):this.renderer.addBreak({minValue:b[w],maxValue:b[w+1],symbol:(new m).setPath(x[w]).setOutline((new h).setWidth(1.5)).setSize(20).setColor(new t([0,0,0,255]))})},_getDefaultSymbol:function(b){return(new m).setPath("M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z").setOutline((new h).setWidth(0)).setSize(20).setColor(b||
new t([0,92,230]))},_getRotationInfo:function(b){var w=b&&b.rotationField||"Direction",x=(b&&b.flowRepresentation||g.FLOW_FROM)===g.FLOW_FROM;!b.style||b.style!==k.STYLE_OCEAN_CURRENT_KN&&b.style!==k.STYLE_OCEAN_CURRENT_M||(x=!x);return{field:function(z){z=z.attributes[w];return x?z:z+180},type:"geographic"}},_addBreaks:function(b,w){if(!u.isDefined(this.renderer))return Error("Invalid Renderer!");if(!(b&&w&&b.length&&w.length&&b.length>=w.length))return Error("AddBreaks: Input arguments break values and colors not valid");
var x;for(x=0;x<w.length;x++)this.renderer.addBreak({minValue:b[x],maxValue:b[x+1],symbol:this._getDefaultSymbol(new t(w[x]))})},toJson:function(){var b=B.mixin(this.inherited(arguments),{type:"vectorField",style:this.style,attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,symbolTileSize:this.symbolTileSize,inputUnit:this.inputUnit,outputUnit:this.outputUnit});this.renderer&&this.renderer.defaultSymbol&&this.style===g.STYLE_SINGLE_ARROW&&(b.singleArrowSymbol=this.renderer.defaultSymbol.toJson());
return u.fixJson(b)}});B.mixin(g,k,{FLOW_FROM:"flow_from",FLOW_TO:"flow_to"});B.setObject("renderer.VectorFieldRenderer",g,c);return g})},"esri/renderers/DotDensityRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Renderer ../symbols/PictureFillSymbol ../geometry/ScreenPoint ../geometry/Point".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h,n){f=f(m,{declaredClass:"esri.renderer.DotDensityRenderer",
constructor:function(r){this.dotSize=r.dotSize||3;this.dotValue=r.dotValue;this.fields=r.fields;this.outline=r.outline;this.backgroundColor=r.backgroundColor;this.exactCount=r.exactCount||!0;this.dotShape=r.dotShape||"square";this.legendOptions=r.legendOptions;this._exactCountMinArea=1E4;this._currentMapScale=this._map=this._canvas=null;this._symbolMap={};this._currentGraphic=this._currentResolution=this._objectIdField=null;this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1},getSymbol:function(r){this._currentGraphic=
r;if(!this._supportsCanvas)return null;this._map||(this._map=r.getLayer()._map,this._objectIdField=r.getLayer().objectIdField,this._currentMapScale=this._map.getScale(),this._currentResolution=this._map.extent.getWidth()/this._map.width,this._map.on("zoom-end",B.hitch(this,function(b){this._currentMapScale=this._map.getScale();this._currentResolution=b.extent.getWidth()/this._map.width;this._symbolMap[this._currentMapScale]={}})));if(this._symbolMap[this._currentMapScale]&&this._symbolMap[this._currentMapScale][r.attributes[this._objectIdField]]){var k=
this._symbolMap[this._currentMapScale][r.attributes[this._objectIdField]];var g=this._getShapeProperties(r);k.setOffset(g.dx,g.dy);return k}k=this._generateFieldsCount(this.fields,r.attributes,this.dotValue);g=this._getShapeProperties(r);if(!g.width||!g.height)return null;k=new a(this._generateImageSrc(g.width,g.height,k,g.minXY,g.maxXY),this.outline,g.width,g.height);k.setOffset(g.dx,g.dy);this._symbolMap[this._currentMapScale]||(this._symbolMap[this._currentMapScale]={});return this._symbolMap[this._currentMapScale][r.attributes[this._objectIdField]]=
k},_generateFieldsCount:function(r,k,g){var b;for(b=r.length-1;0<=b;b--){var w=k[r[b].name]/g;r[b].numPoints=Math.round(w)}return r},_getShapeProperties:function(r){var k=r.geometry.getExtent();k.contains(this._map.extent)&&(k=this._map.extent);var g=Math.ceil(k.getWidth()/this._currentResolution);var b=Math.ceil(k.getHeight()/this._currentResolution);var w=this._map.toScreen(new n(k.xmin,k.ymin,k.spatialReference));k=this._map.toScreen(new n(k.xmax,k.ymax,k.spatialReference));r=r.getLayer().getNavigationTransform();
return{minXY:w,maxXY:k,dx:(w.x-r.dx)%g,dy:(k.y-r.dy)%b,width:g,height:b}},_generateImageSrc:function(r,k,g,b,w,x){var z=this.dotSize,D;this._canvas?(this._canvas.width=r,this._canvas.height=k):this._canvas=this._initCanvas(r,k);var E=this._canvas.getContext("2d");if(x=x||this.backgroundColor)E.fillStyle=x.toCss(!0),E.fillRect(0,0,r,k),E.fill();for(x=g.length-1;0<=x;x--)for(E.fillStyle=g[x].color.toCss(!0),D=g[x].numPoints-1;0<=D;D--){var C=this._getRandomPoint(r,k,b,w);"square"===this.dotShape?E.fillRect(C.x,
C.y,z,z):"circle"===this.dotShape&&(E.beginPath(),E.arc(C.x,C.y,z/2,0,2*Math.PI,!0));E.fill()}return this._canvas.toDataURL()},_initCanvas:function(r,k){r=e.create("canvas",{id:"canvas",width:r+"px",height:k+"px",style:"position: absolute; left: -10000px; top: 0px;"},null);document.body.appendChild(r);return r},_getRandomInt:function(r,k){return Math.floor(Math.random()*(k-r+1)+r)},_getRandomPoint:function(r,k,g,b){var w={},x=this.outline&&this.outline.width?this.outline.width:0;if(!0===this.exactCount&&
r*k>this._exactCountMinArea){r=!1;do w.x=this._getRandomInt(g.x,b.x),w.y=this._getRandomInt(b.y,g.y),r=new h(w.x,w.y),r=this._checkPointShapeBounds(r,this.dotSize+x,this._currentGraphic.geometry),!0===r&&(w.x-=g.x,w.y-=b.y);while(!1===r)}else w.x=this._getRandomInt(0,r),w.y=this._getRandomInt(0,k);return w},_checkPointShapeBounds:function(r,k,g){var b=null;b=!1;var w=!0,x=0;do{switch(x){case 1:r.x+=k;break;case 2:r.y+=k;break;case 3:r.x-=k}b=this._map.toMap(r);b=g.contains(b);!1===b&&(w=!1);x+=1}while(3>=
x&&!0===w);return b},setDotSize:function(r){0<r&&(this.dotSize=r)},setDotValue:function(r){0<r&&(this.dotValue=r)},setOutline:function(r){this.outline=r},setBackgroundColor:function(r){this.backgroundColor=r},toJson:function(){var r=B.mixin(this.inherited(arguments),{type:"dotDensity",backgroundColor:q.toJsonColor(this.backgroundColor),dotShape:this.dotShape,dotSize:0<this.dotSize?u.px2pt(this.dotSize):0,dotValue:this.dotValue,fields:l.map(this.fields,function(k){return d.fixJson({color:q.toJsonColor(k.color),
name:k.name})}),legendOptions:this.legendOptions&&d.fixJson({backgroundColor:q.toJsonColor(this.legendOptions.backgroundColor),dotCoverage:this.legendOptions.dotCoverage,outline:this.legendOptions.outline&&this.legendOptions.outline.toJson(),valueUnit:this.legendOptions.valueUnit}),outline:this.outline&&this.outline.toJson()});return d.fixJson(r)}});B.setObject("renderer.DotDensityRenderer",f,t);return f})},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has",
"../kernel","./Point"],function(f,B,l,e,c){f=f(c,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}});B.setObject("geometry.ScreenPoint",f,e);return f})},"esri/renderers/ScaleDependentRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ./Renderer".split(" "),function(f,B,l,e,c,u,t){f=f(t,{declaredClass:"esri.renderer.ScaleDependentRenderer",constructor:function(d){this.setRendererInfos(d&&d.rendererInfos||[])},setRendererInfos:function(d){this.rendererInfos=
d;this._setRangeType();return this},getSymbol:function(d){var q=this.getRendererInfo(d);return q&&q.renderer&&q.renderer.getSymbol(d)},getRendererInfo:function(d){d=d.getLayer().getMap();return"zoom"===this.rangeType?this.getRendererInfoByZoom(d.getZoom()):this.getRendererInfoByScale(d.getScale())},getRendererInfoByZoom:function(d){var q=this.rendererInfos,m,a=0;do{var h=q[a];d>=h.minZoom&&d<=h.maxZoom&&(m=h);a++}while(!m&&a<q.length);return m},getRendererInfoByScale:function(d){var q=this.rendererInfos,
m,a=0;do{var h=q[a];var n=h.minScale;var r=h.maxScale;var k=!n;var g=!r;!k&&d<=n&&(k=!0);!g&&d>=r&&(g=!0);k&&g&&(m=h);a++}while(!m&&a<q.length);return m},addRendererInfo:function(d){var q=0,m=this.rendererInfos,a=d.hasOwnProperty("minZoom")?"minZoom":"minScale",h=m.length;do{var n=m[q];if(h===q||d[a]<n[a]){m.splice(q,0,d);this._setRangeType();var r=!0}q++}while(!r&&q<h);return this},_setRangeType:function(){var d=this.rendererInfos;if(d=d&&d[0])this.rangeType=d.hasOwnProperty("minZoom")?"zoom":d.hasOwnProperty("minScale")?
"scale":""},toJson:function(){if("zoom"===this.rangeType)return null;var d=this.rendererInfos||[],q=d[0]&&d[0].minScale;d=l.mixin(this.inherited(arguments),{type:"scaleDependent",minScale:0<q?q:0,rendererInfos:B.map(d,function(m){return u.fixJson({maxScale:0<m.maxScale?m.maxScale:0,renderer:m.renderer&&m.renderer.toJson()})})});return u.fixJson(d)}});l.setObject("renderer.ScaleDependentRenderer",f,c);return f})},"esri/renderers/TimeClassBreaksAger":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has dojo/date ../kernel ../lang ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),
function(f,B,l,e,c,u,t,d,q,m){var a=f(m,{declaredClass:"esri.renderer.TimeClassBreaksAger",constructor:function(h,n){this.infos=h;this.timeUnits=n||"day";h.sort(function(r,k){return r.minAge<k.minAge?-1:r.minAge>k.minAge?1:0})},getAgedSymbol:function(h,n){var r=n.getLayer();n=n.attributes;var k=t.isDefined;h=d.fromJson(h.toJson());var g=r._map.timeExtent.endTime;if(!g)return h;var b=c.difference(new Date(n[r._startTimeField]),g,this.timeUnits);B.some(this.infos,function(w){if(b>=w.minAge&&b<=w.maxAge){var x=
w.color,z=w.size;w=w.alpha;x&&h.setColor(x);k(z)&&this._setSymbolSize(h,z);k(w)&&h.color&&(h.color.a=w);return!0}},this);return h},toJson:function(){var h={agerClassBreakInfos:[]},n;h.timeUnits=this._getRestUnits(this.timeUnits);for(n=0;n<this.infos.length;n+=1){var r=this.infos[n];var k={};k.oldestAge=Infinity===r.maxAge?null:r.maxAge;k.size=r.size;r.color&&(k.color=q.toJsonColor(r.color));r.alpha&&(k.alpha=Math.round(255*r.alpha));h.agerClassBreakInfos[n]=k}return h},_getRestUnits:function(h){var n=
"esriTimeUnitsDays";switch(h){case a.UNIT_SECONDS:n="esriTimeUnitsSeconds";break;case a.UNIT_MILLISECONDS:n="esriTimeUnitsMilliseconds";break;case a.UNIT_HOURS:n="esriTimeUnitsHours";break;case a.UNIT_MINUTES:n="esriTimeUnitsMinutes";break;case a.UNIT_MONTHS:n="esriTimeUnitsMonths";break;case a.UNIT_WEEKS:n="esriTimeUnitsWeeks";break;case a.UNIT_YEARS:n="esriTimeUnitsYears"}return n}});l.mixin(a,{UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",
UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"});l.setObject("renderer.TimeClassBreaksAger",a,u);return a})},"esri/renderers/SymbolAger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,e){f=f(null,{declaredClass:"esri.renderer.SymbolAger",getAgedSymbol:function(c,u){},_setSymbolSize:function(c,u){switch(c.type){case "simplemarkersymbol":c.setSize(u);break;case "picturemarkersymbol":c.setWidth(u);c.setHeight(u);break;case "simplelinesymbol":case "cartographiclinesymbol":c.setWidth(u);
break;case "simplefillsymbol":case "picturefillsymbol":c.outline&&c.outline.setWidth(u)}}});B.setObject("renderer.SymbolAger",f,e);return f})},"esri/renderers/TimeRampAger":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has ../kernel ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(f,B,l,e,c,u,t,d){f=f(d,{declaredClass:"esri.renderer.TimeRampAger",constructor:function(q,m,a){this.colorRange=q;this.sizeRange=m;this.alphaRange=a},getAgedSymbol:function(q,
m){var a=m.getLayer(),h=m.attributes;q=u.fromJson(q.toJson());var n=a._map.timeExtent;m=n.startTime;n=n.endTime;if(!m||!n)return q;m=m.getTime();n=n.getTime();a=new Date(h[a._startTimeField]);a=a.getTime();a<m&&(a=m);a=n===m?1:(a-m)/(n-m);if(m=this.sizeRange)h=m[0],n=m[1],m=Math.abs(n-h)*a,this._setSymbolSize(q,h<n?h+m:h-m);if(m=this.colorRange){n=m[0];var r=m[1],k=Math.round;h=new l;var g=n.r,b=r.r;m=Math.abs(b-g)*a;h.r=k(g<b?g+m:g-m);g=n.g;b=r.g;m=Math.abs(b-g)*a;h.g=k(g<b?g+m:g-m);g=n.b;b=r.b;
m=Math.abs(b-g)*a;h.b=k(g<b?g+m:g-m);n=n.a;r=r.a;m=Math.abs(r-n)*a;h.a=n<r?n+m:n-m;q.setColor(h)}h=q.color;(m=this.alphaRange)&&h&&(n=m[0],r=m[1],m=Math.abs(r-n)*a,h.a=n<r?n+m:n-m);return q},toJson:function(){var q={};this.sizeRange&&(q.sizeRange=this.sizeRange);this.colorRange&&(q.colorRange=[t.toJsonColor(this.colorRange[0]),t.toJsonColor(this.colorRange[1])]);this.alphaRange&&(q.alphaRange=[Math.round(255*this.alphaRange[0]),Math.round(255*this.alphaRange[1])]);return q}});B.setObject("renderer.TimeRampAger",
f,c);return f})},"esri/renderers/TemporalRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Renderer"],function(f,B,l,e,c){f=f(c,{declaredClass:"esri.renderer.TemporalRenderer",constructor:function(u,t,d,q){this.observationRenderer=u;this.latestObservationRenderer=t;this.trackRenderer=d;this.observationAger=q},getSymbol:function(u){var t=u.getLayer(),d=this.getObservationRenderer(u),q=d&&d.getSymbol(u),m=this.observationAger;t.timeInfo&&t._map.timeExtent&&
d===this.observationRenderer&&m&&q&&(q=m.getAgedSymbol(q,u));return q},getObservationRenderer:function(u){return 0===u.getLayer()._getKind(u)?this.observationRenderer:this.latestObservationRenderer||this.observationRenderer},toJson:function(){var u={type:"temporal"};u.observationRenderer=this.observationRenderer.toJson();this.latestObservationRenderer&&(u.latestObservationRenderer=this.latestObservationRenderer.toJson());this.trackRenderer&&(u.trackRenderer=this.trackRenderer.toJson());this.observationAger&&
(u.observationAger=this.observationAger.toJson());return u}});B.setObject("renderer.TemporalRenderer",f,e);return f})},"esri/renderers/HeatmapRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct ../sniff ../kernel ../lang ../symbols/PictureMarkerSymbol ../Color ./Renderer".split(" "),function(f,B,l,e,c,u,t,d,q,m){f=f([m],{declaredClass:"esri.renderer.HeatmapRenderer",colors:null,blurRadius:10,maxPixelIntensity:100,minPixelIntensity:0,field:null,fieldOffset:null,
colorStops:null,constructor:function(a){if(this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1)"string"==typeof a&&(a=JSON.parse(a)),B.mixin(this,a),this._canvas=null,this.colors||this.colorStops||(this.colorStops=[{ratio:0,color:"rgba(255, 140, 0, 0)"},{ratio:.75,color:"rgba(255, 140, 0, 1)"},{ratio:.9,color:"rgba(255, 0,   0, 1)"}]),this.gradient=this._generateGradient(this.colorStops||this.colors)},getSymbol:function(a){if(!this._supportsCanvas)return!1;var h=a.attributes.imageData;a=a.attributes.size;
if(!a)return null;var n=this._getContext(a[0],a[1]),r=n.getImageData(0,0,a[0],a[1]);window.ArrayBuffer&&h instanceof ArrayBuffer?h=window.Uint8ClampedArray?new Uint8ClampedArray(h):new Uint8Array(h):h.BYTES_PER_ELEMENT&&1!==h.BYTES_PER_ELEMENT&&(h=window.Uint8ClampedArray?new Uint8ClampedArray(h.buffer):new Uint8Array(h.buffer));if(window.CanvasPixelArray&&r.data instanceof window.CanvasPixelArray)for(var k=r.data,g=k.length;g--;)k[g]=h[g];else r.data.set(h);n.putImageData(r,0,0);return new d(n.canvas.toDataURL(),
a[0],a[1])},setColors:function(a){a&&(a instanceof Array||a.colors)&&(this.gradient=this._generateGradient(a.colors||a),this.colors=a);return this},setColorStops:function(a){a&&(a instanceof Array||a.colorStops)&&(this.gradient=this._generateGradient(a.colorStops||a),this.colorStops=a);return this},setMaxPixelIntensity:function(a){this.maxPixelIntensity=a;return this},setMinPixelIntensity:function(a){this.minPixelIntensity=a;return this},setField:function(a){this.field=a;return this},setFieldOffset:function(a){this.fieldOffset=
a;return this},setBlurRadius:function(a){this.blurRadius=a;return this},getStats:function(){},getHistogramData:function(){},toJson:function(){var a=B.mixin(this.inherited(arguments),{type:"heatmap",blurRadius:this.blurRadius,colorStops:this._colorsToStops(this.colorStops||this.colors),maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity,field:this.field});null!=this.fieldOffset&&(a.fieldOffset=this.fieldOffset);l.forEach(a.colorStops,function(h){h.color=q.toJsonColor(h.color)});
return t.fixJson(a)},_getContext:function(a,h){this._canvas?(this._canvas.width=a,this._canvas.height=h):this._canvas=this._initCanvas(a,h);return this._canvas.getContext("2d")},_initCanvas:function(a,h){var n=e.create("canvas",{id:"hm_canvas-"+Math.floor(1E3*Math.random()),style:"position: absolute; left: 0px; top: -10000px;"},null);n.width=a;n.height=h;document.body.appendChild(n);return n},_generateGradient:function(a,h){h||(h=512);a=this._colorsToStops(a);for(var n=this._getContext(1,h||512),
r=n.createLinearGradient(0,0,0,h),k=0,g;k<a.length;k++)g=a[k],r.addColorStop(g.ratio,g.color.toCss(!0));n.fillStyle=r;n.fillRect(0,0,1,h);return n.getImageData(0,0,1,h).data},_colorsToStops:function(a){var h=[];if(!a[0])return h;if(null!=a[0].ratio)h=l.map(a,function(w){return{ratio:w.ratio,color:this._toColor(w.color)}},this);else if(null!=a[0].value){var n=Infinity;h=-Infinity;var r=0,k;for(k=0;k<a.length;k++){var g=a[k].value;g<n&&(n=g);g>h&&(h=g)}r=h-n;this.maxPixelIntensity=h;this.minPixelIntensity=
n;h=l.map(a,function(w){var x=w.value;w=this._toColor(w.color);return{value:x,ratio:(x-n)/r,color:w}},this)}else{var b=a.length-1;h=l.map(a,function(w,x){return{color:this._toColor(w),ratio:x/b}},this)}return h},_toColor:function(a){a.toRgba||a.declaredClass||(a=new q(a));return a}});B.setObject("renderer.HeatmapRenderer",f,u);return f})},"esri/renderers/StretchRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),
function(f,B,l,e,c,u,t,d){var q={TYPE_NONE:"none",TYPE_STANDARDDEVIATION:"standardDeviation",TYPE_HISTOGRAMEQUALIZATION:"histogramEqualization",TYPE_MINMAX:"minMax",TYPE_PERCENTCLIP:"percentClip",TYPE_SIGMOID:"sigmoid"};f=f(null,{declaredClass:"esri.renderer.StretchRenderer",constructor:function(m){m=m||{};this.stretchType=q.TYPE_NONE;this.dra=!0;this.statistics=[];this.gamma=[];this.computeGamma=this.useGamma=!1;this.sigmoidStrengthLevel=this.numberOfStandardDeviations=this.minPercent=this.maxPercent=
this.min=this.max=null;l.mixin(this,m);this.colorRamp=d.fromJson(m.colorRamp)},toJson:function(){var m={type:"rasterStretch",stretchType:this.stretchType,colorRamp:this.colorRamp&&this.colorRamp.toJson(),min:this.min,max:this.max,numberOfStandardDeviations:this.numberOfStandardDeviations,statistics:l.clone(this.statistics),dra:this.dra,minPercent:this.minPercent,maxPercent:this.maxPercent,useGamma:this.useGamma,gamma:l.clone(this.gamma),computeGamma:this.computeGamma,sigmoidStrengthLevel:this.sigmoidStrengthLevel};
return u.fixJson(m)},toRenderingRule:function(m){m=m||{};var a=new t;a.functionName="Stretch";var h=this._convertStretchTypeEnumToIndex(this.stretchType),n={StretchType:h,Statistics:this.statistics,DRA:this.dra,UseGamma:this.useGamma,Gamma:this.gamma,ComputeGamma:this.computeGamma};u.isDefined(this.min)&&(n.Min=this.min);u.isDefined(this.min)&&(n.Max=this.max);3===h?(n.NumberOfStandardDeviations=this.numberOfStandardDeviations,a.outputPixelType="U8"):6===h?(n.MinPercent=parseFloat(this.minPercent),
n.MaxPercent=parseFloat(this.maxPercent),a.outputPixelType="U8"):5===h?a.outputPixelType="U8":9===h&&(n.SigmoidStrengthLevel=this.sigmoidStrengthLevel);a.functionArguments=n;a.variableName="Raster";return this.colorRamp?(h=new t,h.functionArguments=m.convertToColormap?{Colormap:d.convertColorRampToColormap(this.colorRamp,256)}:{colorRamp:this.colorRamp.toJson()},h.variableName="Raster",h.functionName="Colormap",h.functionArguments.Raster=a,h):a},_convertStretchTypeEnumToIndex:function(m){var a=0;
m===q.TYPE_STANDARDDEVIATION?a=3:m===q.TYPE_HISTOGRAMEQUALIZATION?a=4:m===q.TYPE_MINMAX?a=5:m===q.TYPE_PERCENTCLIP?a=6:m===q.TYPE_SIGMOID&&(a=9);return a},_convertStretchTypeIndexToEnum:function(m){var a=q.TYPE_NONE;3===m?a=q.TYPE_STANDARDDEVIATION:4===m?a=q.TYPE_HISTOGRAMEQUALIZATION:5===m?a=q.TYPE_MINMAX:6===m?a=q.TYPE_PERCENTCLIP:9===m&&(a=q.TYPE_SIGMOID);return a}});l.mixin(f,q);l.setObject("renderer.StretchRenderer",f,c);return f})},"esri/layers/RasterFunction":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../lang"],function(f,B,l,e,c){var u=f(null,{declaredClass:"esri.layers.RasterFunction",functionName:null,arguments:null,functionArguments:null,variableName:null,outputPixelType:null,_isTemplate:null,_templateJson:null,constructor:function(t){if(B.isObject(t)){this._isRFTJson(t)&&(this._isTemplate=!0,this._templateJson=t);var d=0;this.functionName=t.rasterFunction||t.name;this.functionArguments=B.clone(t.rasterFunctionArguments||t.arguments);B.mixin(this,t);
if(t=this.functionArguments)if(t.Raster=this._toRasterFunction(t.Raster),t.Raster2=this._toRasterFunction(t.Raster2),t.DEM=this._toRasterFunction(t.DEM),t.FillRaster=this._toRasterFunction(t.FillRaster),t.Rasters&&t.Rasters.length)for(d=0;d<t.Rasters.length;d++)t.Rasters[d]=this._toRasterFunction(t.Rasters[d])}},_isRFTJson:function(t){return t.name&&t.arguments&&t.function&&t.hasOwnProperty("functionType")},_toRasterFunction:function(t){return t&&(t.rasterFunction||t.functionName)?new u(t):t},_rfToJson:function(t){t&&
"esri.layers.RasterFunction"===t.declaredClass&&(t=t.toJson());return t},toJson:function(){if(this._isTemplate)return this._templateJson;var t=B.clone(this.functionArguments||this.arguments);if(t&&(t.Raster=this._rfToJson(t.Raster),t.Raster2=this._rfToJson(t.Raster2),t.DEM=this._rfToJson(t.DEM),t.FillRaster=this._rfToJson(t.FillRaster),t.Rasters&&t.Rasters.length)){var d,q=[];for(d=0;d<t.Rasters.length;d++)q.push(this._rfToJson(t.Rasters[d]));t.Rasters=q}return c.filter({rasterFunction:this.functionName,
rasterFunctionArguments:t,variableName:this.variableName,outputPixelType:this.outputPixelType?this.outputPixelType:null},function(m){if(null!==m&&void 0!==m)return!0})}});B.setObject("layers.RasterFunction",u,e);return u})},"esri/renderers/colorRampUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/store/Memory ../tasks/AlgorithmicColorRamp ../tasks/MultipartColorRamp ../Color ./colorUtils".split(" "),function(f,B,l,e,c,u,t){function d(x){if(null==x||"algorithmic"!==x.type&&!x.fromColor)return x;
var z=x.declaredClass?new e:f.clone(x);z.fromColor=x.toColor;z.toColor=x.fromColor;z.algorithm=x.algorithm;return z}function q(x){if(null==x)return null;if("multipart"===x.type||x.colorRamps&&0<x.colorRamps.length){var z=x.declaredClass?new c:f.clone(x);z.colorRamps=B.map(x.colorRamps.slice().reverse(),function(D){return d(D)});return z}return d(x)}function m(x,z,D){if(!x)return{id:null,isInverted:!1};var E=x.name;E&&(x.fromColor||x.colorRamps)&&(x.name=void 0);var C=a(x,z,D);if(C)return E&&(x.name=
E),{id:C,isInverted:!1};C=a(x,z,D,!0);E&&(x.name=E);return C?{id:C,isInverted:!0}:E&&(C=a(x,z,D))?{id:C,isInverted:!1}:{id:null,isInverted:!1}}function a(x,z,D,E){if(x){E&&(x=q(x));z=z||g;D=D||b;var C=null;E=x.declaredClass;var y,v;if((y="string"===typeof x?x:x.name)&&B.some(D,function(A){if(A.name===y)return C=A.id,!0})&&C)return C;"esri.tasks.AlgorithmicColorRamp"===E?B.some(z,function(A){if(n(x.fromColor.toRgb(),A.fromColor)&&n(x.toColor.toRgb(),A.toColor))return C=A.id,!0},this):"esri.tasks.MultipartColorRamp"===
E&&B.some(z,function(A){if(x.colorRamps&&A.colorRamps&&x.colorRamps.length===A.colorRamps.length&&(v=x.colorRamps,!B.some(A.colorRamps,function(G,F){if(!n(v[F].fromColor.toRgb(),G.fromColor)||!n(v[F].toColor.toRgb(),G.toColor))return!0},this))){if(C)return!0;C=A.id}},this);return C}}function h(x){var z=new e,D=x.algorithm;z.fromColor=u.toDojoColor(x.fromColor);z.toColor=u.toDojoColor(x.toColor);D?"esriCIELabAlgorithm"===D?z.algorithm="cie-lab":"esriHSVAlgorithm"===D?z.algorithm="hsv":"esriLabLChAlgorithm"===
D&&(z.algorithm="lab-lch"):z.algorithm="hsv";return z}function n(x,z){if(!x||!z)return!1;x=x.slice(0,3);z=z.slice(0,3);return!B.some(x,function(D,E){if(D>z[E]+2||D<z[E]-2)return!0})}function r(x,z,D){x=t.toLAB(x);z=t.toLAB(z);return t.toRGB({l:x.l*(1-D)+D*z.l,a:x.a*(1-D)+D*z.a,b:x.b*(1-D)+D*z.b})}var k={},g=[{id:"none",selected:!0},{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,
254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",
fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},
{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"cividis_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,32,77,255],toColor:[0,33,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,33,79,255],toColor:[0,34,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,34,80,255],toColor:[0,35,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,35,82,255],toColor:[0,35,84,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[0,35,84,255],toColor:[0,36,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,36,85,255],toColor:[0,37,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,37,87,255],toColor:[0,38,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,38,89,255],toColor:[0,38,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,38,91,255],toColor:[0,39,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[0,39,92,255],toColor:[0,40,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,40,94,255],toColor:[0,40,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,40,96,255],toColor:[0,41,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,41,98,255],toColor:[0,42,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,42,100,255],toColor:[0,42,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
42,101,255],toColor:[0,43,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,43,103,255],toColor:[0,44,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,44,105,255],toColor:[0,45,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,45,107,255],toColor:[0,45,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,45,109,255],toColor:[0,46,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
46,110,255],toColor:[0,47,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,111,255],toColor:[0,47,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,112,255],toColor:[0,47,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,112,255],toColor:[0,48,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,48,112,255],toColor:[0,49,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
49,112,255],toColor:[0,49,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,49,112,255],toColor:[0,50,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,50,112,255],toColor:[0,51,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,51,111,255],toColor:[0,52,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,52,111,255],toColor:[0,52,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
52,111,255],toColor:[0,53,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,53,111,255],toColor:[1,54,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,54,111,255],toColor:[6,55,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,55,110,255],toColor:[11,55,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,55,110,255],toColor:[15,56,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[15,
56,110,255],toColor:[18,57,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,57,110,255],toColor:[21,57,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,57,110,255],toColor:[24,58,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,58,110,255],toColor:[26,59,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[26,59,109,255],toColor:[29,60,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[29,60,109,255],toColor:[31,60,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,60,109,255],toColor:[33,61,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,61,109,255],toColor:[35,62,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,62,109,255],toColor:[37,63,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,63,109,255],toColor:[38,63,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[38,63,109,255],toColor:[40,64,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,64,108,255],toColor:[42,65,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,65,108,255],toColor:[43,65,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,65,108,255],toColor:[45,66,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,66,108,255],toColor:[46,67,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[46,67,108,255],toColor:[48,68,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,68,108,255],toColor:[49,68,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,68,108,255],toColor:[51,69,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,69,108,255],toColor:[52,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,70,108,255],toColor:[53,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[53,70,108,255],toColor:[55,71,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,71,108,255],toColor:[56,72,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,72,108,255],toColor:[57,73,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,73,108,255],toColor:[58,73,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,73,108,255],toColor:[60,74,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[60,74,108,255],toColor:[61,75,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,75,108,255],toColor:[62,75,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,75,108,255],toColor:[63,76,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,76,108,255],toColor:[64,77,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,77,108,255],toColor:[65,78,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,78,108,255],toColor:[67,78,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,78,108,255],toColor:[68,79,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,79,108,255],toColor:[69,80,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,80,108,255],toColor:[70,80,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,80,108,255],toColor:[71,81,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[71,81,108,255],toColor:[72,82,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,82,108,255],toColor:[73,83,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,83,108,255],toColor:[74,83,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[74,83,108,255],toColor:[75,84,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,84,108,255],toColor:[76,85,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[76,85,108,255],toColor:[77,86,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[77,86,108,255],toColor:[78,86,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,86,108,255],toColor:[79,87,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[79,87,108,255],toColor:[80,88,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,88,108,255],toColor:[81,88,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[81,88,109,255],toColor:[82,89,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,89,109,255],toColor:[83,90,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,90,109,255],toColor:[84,91,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,91,109,255],toColor:[85,91,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[85,91,109,255],toColor:[86,92,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[86,92,109,255],toColor:[87,93,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[87,93,109,255],toColor:[88,93,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,93,109,255],toColor:[89,94,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,94,110,255],toColor:[90,95,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[90,95,110,255],toColor:[91,96,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[91,96,110,255],toColor:[92,96,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,96,110,255],toColor:[93,97,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[93,97,110,255],toColor:[94,98,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,98,110,255],toColor:[94,99,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,99,111,255],toColor:[95,99,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,99,111,255],toColor:[96,100,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[96,100,111,255],toColor:[97,101,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,101,111,255],toColor:[98,101,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,101,111,255],toColor:[99,102,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,102,112,255],toColor:[100,103,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[100,103,112,255],toColor:[101,104,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,104,112,255],toColor:[102,104,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,104,112,255],toColor:[103,105,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[103,105,113,255],toColor:[104,106,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[104,106,113,255],toColor:[104,107,113,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[104,107,113,255],toColor:[105,107,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,107,113,255],toColor:[106,108,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[106,108,114,255],toColor:[107,109,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,109,114,255],toColor:[108,109,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,109,114,255],toColor:[109,
110,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[109,110,115,255],toColor:[110,111,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,111,115,255],toColor:[111,112,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,112,115,255],toColor:[111,112,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,112,115,255],toColor:[112,113,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,
113,116,255],toColor:[113,114,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,114,116,255],toColor:[114,115,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[114,115,116,255],toColor:[115,115,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,115,117,255],toColor:[116,116,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,116,117,255],toColor:[117,117,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[117,117,117,255],toColor:[117,118,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,118,118,255],toColor:[118,118,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,118,118,255],toColor:[119,119,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[119,119,119,255],toColor:[120,120,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,120,119,255],toColor:[121,121,119,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[121,121,119,255],toColor:[122,121,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,121,120,255],toColor:[123,122,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,122,120,255],toColor:[124,123,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,123,120,255],toColor:[124,124,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,124,121,255],toColor:[125,
124,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,124,121,255],toColor:[126,125,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[126,125,121,255],toColor:[127,126,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,126,121,255],toColor:[128,127,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,127,121,255],toColor:[129,127,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[129,
127,121,255],toColor:[130,128,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,128,121,255],toColor:[131,129,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[131,129,121,255],toColor:[132,130,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,130,121,255],toColor:[133,130,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,130,121,255],toColor:[134,131,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[134,131,121,255],toColor:[135,132,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[135,132,121,255],toColor:[136,133,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,133,121,255],toColor:[137,134,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,134,121,255],toColor:[138,134,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,134,121,255],toColor:[139,135,121,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[139,135,121,255],toColor:[140,136,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,136,121,255],toColor:[141,137,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,137,121,255],toColor:[142,137,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[142,137,121,255],toColor:[143,138,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[143,138,121,255],toColor:[144,
139,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,139,121,255],toColor:[145,140,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,140,121,255],toColor:[146,141,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,141,121,255],toColor:[147,141,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,141,121,255],toColor:[148,142,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,
142,121,255],toColor:[149,143,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[149,143,121,255],toColor:[150,144,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,144,121,255],toColor:[151,145,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,145,120,255],toColor:[152,145,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[152,145,120,255],toColor:[153,146,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[153,146,120,255],toColor:[154,147,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,147,120,255],toColor:[155,148,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,148,120,255],toColor:[156,149,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[156,149,120,255],toColor:[157,149,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[157,149,120,255],toColor:[158,150,120,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[158,150,120,255],toColor:[159,151,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[159,151,119,255],toColor:[160,152,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,152,119,255],toColor:[161,153,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[161,153,119,255],toColor:[162,153,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,153,119,255],toColor:[163,
154,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,154,119,255],toColor:[164,155,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,155,118,255],toColor:[165,156,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,156,118,255],toColor:[166,157,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[166,157,118,255],toColor:[167,158,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,
158,118,255],toColor:[168,158,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[168,158,118,255],toColor:[169,159,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,159,117,255],toColor:[170,160,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,160,117,255],toColor:[171,161,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[171,161,117,255],toColor:[172,162,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[172,162,117,255],toColor:[173,162,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,162,116,255],toColor:[174,163,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,163,116,255],toColor:[175,164,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[175,164,116,255],toColor:[177,165,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[177,165,115,255],toColor:[178,166,115,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[178,166,115,255],toColor:[179,167,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,167,115,255],toColor:[180,168,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,168,115,255],toColor:[181,168,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[181,168,114,255],toColor:[182,169,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,169,114,255],toColor:[183,
170,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[183,170,114,255],toColor:[184,171,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,171,113,255],toColor:[185,172,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,172,113,255],toColor:[186,173,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[186,173,113,255],toColor:[187,173,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,
173,112,255],toColor:[188,174,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,174,112,255],toColor:[189,175,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[189,175,111,255],toColor:[190,176,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,176,111,255],toColor:[191,177,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,177,111,255],toColor:[192,178,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[192,178,110,255],toColor:[194,179,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[194,179,110,255],toColor:[195,180,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,180,109,255],toColor:[196,180,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,180,109,255],toColor:[197,181,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[197,181,109,255],toColor:[198,182,108,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[198,182,108,255],toColor:[199,183,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[199,183,108,255],toColor:[200,184,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,184,107,255],toColor:[201,185,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,185,107,255],toColor:[202,186,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,186,106,255],toColor:[203,
187,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,187,106,255],toColor:[204,187,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,187,105,255],toColor:[205,188,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,188,105,255],toColor:[207,189,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,189,104,255],toColor:[208,190,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[208,
190,104,255],toColor:[209,191,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,191,103,255],toColor:[210,192,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[210,192,103,255],toColor:[211,193,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,193,102,255],toColor:[212,194,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,194,101,255],toColor:[213,195,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[213,195,101,255],toColor:[214,196,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,196,100,255],toColor:[215,196,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[215,196,100,255],toColor:[217,197,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[217,197,99,255],toColor:[218,198,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,198,98,255],toColor:[219,199,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[219,199,98,255],toColor:[220,200,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,200,97,255],toColor:[221,201,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,201,96,255],toColor:[222,202,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[222,202,96,255],toColor:[223,203,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,203,95,255],toColor:[224,204,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[224,204,94,255],toColor:[226,205,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,205,94,255],toColor:[227,206,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,206,93,255],toColor:[228,207,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,207,92,255],toColor:[229,208,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,208,91,255],toColor:[230,209,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[230,209,91,255],toColor:[231,209,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,209,90,255],toColor:[233,210,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,210,89,255],toColor:[234,211,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,211,88,255],toColor:[235,212,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,212,87,255],toColor:[236,213,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[236,213,86,255],toColor:[237,214,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,214,86,255],toColor:[238,215,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,215,85,255],toColor:[239,216,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,216,84,255],toColor:[241,217,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,217,83,255],toColor:[242,218,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,218,82,255],toColor:[243,219,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,219,81,255],toColor:[244,220,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,220,80,255],toColor:[245,221,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,221,79,255],toColor:[246,222,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,222,78,255],toColor:[248,223,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[248,223,77,255],toColor:[249,224,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,224,75,255],toColor:[250,225,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,225,74,255],toColor:[251,226,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,226,73,255],toColor:[252,227,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,227,72,255],toColor:[254,228,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,228,71,255],toColor:[255,229,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,229,69,255],toColor:[255,230,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,230,68,255],toColor:[255,231,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,231,67,255],toColor:[255,232,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,232,66,255],toColor:[255,233,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,233,67,255],toColor:[255,234,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,234,69,255],toColor:[255,235,70,255]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,
255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},
{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,
96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,
204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"inferno_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,0,4,255],toColor:[1,0,5,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,0,5,255],toColor:[1,1,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,6,255],toColor:[1,1,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,8,255],toColor:[2,1,10,
255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,1,10,255],toColor:[2,2,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,12,255],toColor:[2,2,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,14,255],toColor:[3,2,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[3,2,16,255],toColor:[4,3,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,3,18,255],toColor:[4,3,21,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[4,3,21,255],toColor:[5,4,23,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[5,4,23,255],toColor:[6,4,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,4,25,255],toColor:[7,5,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[7,5,27,255],toColor:[8,6,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[8,6,29,255],toColor:[9,6,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[9,6,32,255],toColor:[10,7,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[10,7,34,255],toColor:[11,7,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,7,36,255],toColor:[12,8,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[12,8,38,255],toColor:[13,8,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,8,41,255],toColor:[14,9,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[14,
9,43,255],toColor:[16,9,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,9,45,255],toColor:[17,10,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[17,10,48,255],toColor:[18,10,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,10,50,255],toColor:[20,11,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[20,11,53,255],toColor:[21,11,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,
11,55,255],toColor:[22,11,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[22,11,58,255],toColor:[24,12,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,12,60,255],toColor:[25,12,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,12,62,255],toColor:[27,12,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[27,12,65,255],toColor:[28,12,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[28,
12,67,255],toColor:[30,12,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[30,12,70,255],toColor:[31,12,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,12,72,255],toColor:[33,12,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,12,74,255],toColor:[35,12,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,12,77,255],toColor:[36,12,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,
12,79,255],toColor:[38,12,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,12,81,255],toColor:[40,11,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,11,83,255],toColor:[42,11,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,11,85,255],toColor:[43,11,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,11,87,255],toColor:[45,11,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,
11,89,255],toColor:[47,10,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,10,91,255],toColor:[49,10,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,10,93,255],toColor:[51,10,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,10,94,255],toColor:[52,10,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,10,96,255],toColor:[54,9,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,
9,97,255],toColor:[56,9,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,9,98,255],toColor:[58,9,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,9,99,255],toColor:[59,9,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,9,100,255],toColor:[61,9,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,9,101,255],toColor:[63,9,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,9,
102,255],toColor:[64,10,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,10,103,255],toColor:[66,10,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,10,104,255],toColor:[68,10,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,10,105,255],toColor:[69,10,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,10,105,255],toColor:[71,11,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,
11,106,255],toColor:[73,11,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,11,107,255],toColor:[74,12,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[74,12,107,255],toColor:[76,12,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,12,108,255],toColor:[78,13,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,13,108,255],toColor:[79,13,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[79,13,108,255],toColor:[81,14,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[81,14,109,255],toColor:[83,14,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,14,109,255],toColor:[84,15,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,15,109,255],toColor:[86,15,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,15,110,255],toColor:[87,16,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[87,16,110,255],toColor:[89,17,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,17,110,255],toColor:[91,17,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,17,110,255],toColor:[92,18,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,18,110,255],toColor:[94,18,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,18,111,255],toColor:[95,19,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,19,111,255],toColor:[97,20,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,20,111,255],toColor:[99,20,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,20,111,255],toColor:[100,21,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[100,21,111,255],toColor:[102,21,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,21,111,255],toColor:[103,22,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[103,22,111,255],toColor:[105,23,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,23,111,255],toColor:[107,23,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,23,111,255],toColor:[108,24,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,24,111,255],toColor:[110,24,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,24,111,255],toColor:[111,25,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[111,25,111,255],toColor:[113,25,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,25,110,255],toColor:[115,26,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,26,110,255],toColor:[116,27,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,27,110,255],toColor:[118,27,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,27,110,255],toColor:[119,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[119,28,110,255],toColor:[121,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[121,28,110,255],toColor:[123,29,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,29,109,255],toColor:[124,29,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,29,109,255],toColor:[126,30,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[126,30,109,255],toColor:[127,31,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[127,31,109,255],toColor:[129,31,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[129,31,108,255],toColor:[130,32,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,32,108,255],toColor:[132,32,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,32,108,255],toColor:[134,33,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,33,107,255],toColor:[135,33,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[135,33,107,255],toColor:[137,34,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,34,107,255],toColor:[138,34,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,34,106,255],toColor:[140,35,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,35,106,255],toColor:[142,36,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[142,36,105,255],toColor:[143,36,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[143,36,105,255],toColor:[145,37,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,37,105,255],toColor:[146,37,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,37,104,255],toColor:[148,38,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,38,104,255],toColor:[150,38,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,38,103,255],toColor:[151,39,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[151,39,102,255],toColor:[153,40,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[153,40,102,255],toColor:[154,40,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,40,101,255],toColor:[156,41,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[156,41,101,255],toColor:[158,41,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,41,100,255],toColor:[159,42,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[159,42,100,255],toColor:[161,43,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[161,43,99,255],toColor:[162,43,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,43,98,255],toColor:[164,44,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,44,98,255],toColor:[165,45,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,45,97,255],toColor:[167,45,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[167,45,96,255],toColor:[169,46,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,46,95,255],toColor:[170,46,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,46,95,255],toColor:[172,47,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[172,47,94,255],toColor:[173,48,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,48,93,255],toColor:[175,49,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[175,49,92,255],toColor:[176,49,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,49,92,255],toColor:[178,50,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[178,50,91,255],toColor:[179,51,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,51,90,255],toColor:[181,51,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[181,51,89,255],toColor:[182,52,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[182,52,88,255],toColor:[184,53,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,53,87,255],toColor:[185,54,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,54,86,255],toColor:[187,54,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,54,85,255],toColor:[188,55,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,55,85,255],toColor:[190,56,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[190,56,84,255],toColor:[191,57,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,57,83,255],toColor:[193,58,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,58,82,255],toColor:[194,59,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[194,59,81,255],toColor:[196,60,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,60,80,255],toColor:[197,60,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[197,60,79,255],toColor:[198,61,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,61,78,255],toColor:[200,62,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,62,77,255],toColor:[201,63,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,63,76,255],toColor:[203,64,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,64,75,255],toColor:[204,65,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[204,65,74,255],toColor:[205,66,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,66,72,255],toColor:[207,67,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,67,71,255],toColor:[208,68,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[208,68,70,255],toColor:[209,69,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,69,69,255],toColor:[211,70,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[211,70,68,255],toColor:[212,72,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,72,67,255],toColor:[213,73,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[213,73,66,255],toColor:[214,74,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,74,65,255],toColor:[216,75,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,75,64,255],toColor:[217,76,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[217,76,62,255],toColor:[218,77,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,77,61,255],toColor:[219,79,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,79,60,255],toColor:[220,80,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,80,59,255],toColor:[221,81,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,81,58,255],toColor:[223,82,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[223,82,57,255],toColor:[224,84,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,84,56,255],toColor:[225,85,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[225,85,54,255],toColor:[226,86,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,86,53,255],toColor:[227,88,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,88,52,255],toColor:[228,89,51,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[228,89,51,255],toColor:[229,90,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,90,50,255],toColor:[230,92,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,92,48,255],toColor:[231,93,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,93,47,255],toColor:[232,95,46,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,95,46,255],toColor:[233,96,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[233,96,45,255],toColor:[234,98,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,98,43,255],toColor:[235,99,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,99,42,255],toColor:[235,101,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,101,41,255],toColor:[236,102,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,102,40,255],toColor:[237,104,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[237,104,38,255],toColor:[238,105,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,105,37,255],toColor:[239,107,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,107,36,255],toColor:[240,109,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,109,35,255],toColor:[240,110,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,110,33,255],toColor:[241,112,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[241,112,32,255],toColor:[242,113,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,113,31,255],toColor:[242,115,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,115,30,255],toColor:[243,117,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,117,28,255],toColor:[244,118,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,118,27,255],toColor:[244,120,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[244,120,26,255],toColor:[245,122,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,122,24,255],toColor:[246,123,23,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,123,23,255],toColor:[246,125,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,125,22,255],toColor:[247,127,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,127,20,255],toColor:[247,129,19,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,129,19,255],toColor:[248,130,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,130,18,255],toColor:[248,132,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,132,16,255],toColor:[249,134,15,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,134,15,255],toColor:[249,136,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,136,14,255],toColor:[249,137,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[249,137,12,255],toColor:[250,139,11,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,139,11,255],toColor:[250,141,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,141,10,255],toColor:[250,143,9,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,143,9,255],toColor:[251,145,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,145,8,255],toColor:[251,146,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,146,7,255],toColor:[251,148,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,148,7,255],toColor:[252,150,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,150,6,255],toColor:[252,152,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,152,6,255],toColor:[252,154,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,154,6,255],toColor:[252,156,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,156,6,255],toColor:[252,158,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,158,7,255],toColor:[253,160,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,160,7,255],toColor:[253,161,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,161,8,255],toColor:[253,163,9,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,163,9,255],toColor:[253,165,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,165,10,255],toColor:[253,167,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,167,12,255],toColor:[253,169,13,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,169,13,255],toColor:[253,171,15,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,171,15,255],toColor:[253,173,17,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,173,17,255],toColor:[253,175,19,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,175,19,255],toColor:[253,177,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,177,20,255],toColor:[253,179,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,179,22,255],toColor:[253,181,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,181,25,255],toColor:[252,183,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,183,27,255],toColor:[252,185,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,185,29,255],toColor:[252,186,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,186,31,255],toColor:[252,188,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,188,33,255],toColor:[252,190,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,190,35,255],toColor:[251,192,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,192,38,255],toColor:[251,194,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,194,40,255],toColor:[251,196,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,196,43,255],toColor:[251,198,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,198,45,255],toColor:[250,200,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,200,48,255],toColor:[250,202,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,202,50,255],toColor:[250,204,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[250,204,53,255],toColor:[249,206,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,206,56,255],toColor:[249,208,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,208,58,255],toColor:[248,210,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,210,61,255],toColor:[248,212,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,212,64,255],toColor:[247,214,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,214,67,255],toColor:[247,216,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,216,70,255],toColor:[246,218,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,218,73,255],toColor:[246,220,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,220,76,255],toColor:[245,222,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,222,80,255],toColor:[245,224,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[245,224,83,255],toColor:[244,226,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,226,86,255],toColor:[244,228,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,228,90,255],toColor:[244,229,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,229,94,255],toColor:[243,231,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,231,97,255],toColor:[243,233,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[243,233,101,255],toColor:[243,235,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,235,105,255],toColor:[242,237,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,237,109,255],toColor:[242,238,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,238,113,255],toColor:[242,240,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,240,117,255],toColor:[242,242,122,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[242,242,122,255],toColor:[243,243,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,243,126,255],toColor:[243,245,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,245,130,255],toColor:[244,246,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,246,134,255],toColor:[244,247,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,247,138,255],toColor:[245,
249,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,249,142,255],toColor:[246,250,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,250,146,255],toColor:[247,251,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,251,150,255],toColor:[249,252,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,252,154,255],toColor:[250,253,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,
253,158,255],toColor:[251,254,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,254,162,255],toColor:[253,255,165,255]}]},{id:"magma_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,0,4,255],toColor:[1,0,5,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,0,5,255],toColor:[1,1,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,6,255],toColor:[1,1,8,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[1,1,8,255],toColor:[2,1,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,1,10,255],toColor:[2,2,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,12,255],toColor:[2,2,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,14,255],toColor:[3,3,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[3,3,16,255],toColor:[4,3,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[4,3,18,255],toColor:[4,4,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,4,20,255],toColor:[5,4,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[5,4,22,255],toColor:[6,5,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,5,24,255],toColor:[6,5,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,5,26,255],toColor:[7,6,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[7,6,28,
255],toColor:[8,7,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[8,7,30,255],toColor:[9,7,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[9,7,32,255],toColor:[10,8,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[10,8,34,255],toColor:[11,9,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,9,36,255],toColor:[12,9,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[12,9,38,255],toColor:[13,
10,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,10,41,255],toColor:[14,11,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[14,11,43,255],toColor:[16,11,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,11,45,255],toColor:[17,12,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[17,12,47,255],toColor:[18,13,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,13,50,255],toColor:[19,
13,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[19,13,52,255],toColor:[20,14,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[20,14,54,255],toColor:[21,14,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,14,57,255],toColor:[23,15,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[23,15,59,255],toColor:[24,15,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,15,61,255],toColor:[25,
16,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,16,64,255],toColor:[26,16,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[26,16,66,255],toColor:[28,16,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[28,16,68,255],toColor:[29,17,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[29,17,71,255],toColor:[30,17,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[30,17,73,255],toColor:[32,
17,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,17,76,255],toColor:[33,17,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,17,78,255],toColor:[35,18,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,18,81,255],toColor:[36,18,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,18,83,255],toColor:[38,18,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,18,86,255],toColor:[39,
18,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,18,88,255],toColor:[41,18,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,18,90,255],toColor:[42,17,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,17,93,255],toColor:[44,17,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,17,95,255],toColor:[46,17,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,17,97,255],toColor:[47,
17,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,17,99,255],toColor:[49,17,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,17,101,255],toColor:[51,16,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,16,103,255],toColor:[52,16,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,16,105,255],toColor:[54,16,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,16,107,255],
toColor:[56,16,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,16,109,255],toColor:[58,15,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,15,111,255],toColor:[59,15,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,15,112,255],toColor:[61,15,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,15,113,255],toColor:[63,15,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,
15,115,255],toColor:[65,15,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,15,116,255],toColor:[66,15,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,15,117,255],toColor:[68,15,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,15,118,255],toColor:[70,16,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,16,119,255],toColor:[71,16,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[71,16,120,255],toColor:[73,16,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,16,121,255],toColor:[75,17,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,17,122,255],toColor:[76,17,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,17,122,255],toColor:[78,17,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,17,123,255],toColor:[79,18,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[79,18,124,255],toColor:[81,18,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[81,18,124,255],toColor:[83,19,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,19,125,255],toColor:[84,19,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,19,125,255],toColor:[86,20,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,20,126,255],toColor:[87,21,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[87,21,126,255],toColor:[89,21,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,21,126,255],toColor:[91,22,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,22,127,255],toColor:[92,22,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,22,127,255],toColor:[94,23,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,23,127,255],toColor:[95,24,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,24,128,255],toColor:[97,24,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,24,128,255],toColor:[98,25,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,25,128,255],toColor:[100,26,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[100,26,128,255],toColor:[101,26,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,26,129,255],toColor:[103,27,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[103,27,129,255],toColor:[105,28,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,28,129,255],toColor:[106,28,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[106,28,129,255],toColor:[108,29,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,29,129,255],toColor:[109,30,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[109,30,129,255],toColor:[111,30,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[111,30,130,255],toColor:[112,31,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,31,130,255],toColor:[114,31,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[114,31,130,255],toColor:[116,32,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,32,130,255],toColor:[117,33,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,33,130,255],toColor:[119,33,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[119,33,130,255],toColor:[120,34,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,34,130,255],toColor:[122,34,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,34,130,255],toColor:[123,35,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,35,130,255],toColor:[125,36,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,36,130,255],toColor:[127,36,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[127,36,130,255],toColor:[128,37,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,37,130,255],toColor:[130,37,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,37,130,255],toColor:[131,38,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[131,38,130,255],toColor:[133,39,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,39,130,255],toColor:[134,39,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[134,39,130,255],toColor:[136,40,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,40,130,255],toColor:[138,40,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,40,130,255],toColor:[139,41,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[139,41,130,255],toColor:[141,41,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,41,129,255],toColor:[142,42,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[142,42,129,255],toColor:[144,42,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,42,129,255],toColor:[146,43,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,43,129,255],toColor:[147,43,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,43,129,255],toColor:[149,44,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[149,44,129,255],toColor:[151,44,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[151,44,129,255],toColor:[152,45,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[152,45,128,255],toColor:[154,46,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,46,128,255],toColor:[155,46,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,46,128,255],toColor:[157,47,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[157,47,128,255],toColor:[159,47,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[159,47,127,255],toColor:[160,48,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,48,127,255],toColor:[162,48,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,48,127,255],toColor:[164,49,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,49,127,255],toColor:[165,49,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,49,126,255],toColor:[167,50,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[167,50,126,255],toColor:[169,50,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,50,126,255],toColor:[170,51,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,51,125,255],toColor:[172,51,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[172,51,125,255],toColor:[174,52,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,52,124,255],toColor:[175,52,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[175,52,124,255],toColor:[177,53,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[177,53,124,255],toColor:[178,53,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[178,53,123,255],toColor:[180,54,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,54,123,255],toColor:[182,54,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,54,122,255],toColor:[183,55,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[183,55,122,255],toColor:[185,56,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,56,121,255],toColor:[187,56,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,56,121,255],toColor:[188,57,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,57,120,255],toColor:[190,57,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,57,120,255],toColor:[192,58,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[192,58,119,255],toColor:[193,59,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,59,118,255],toColor:[195,59,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,59,118,255],toColor:[196,60,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,60,117,255],toColor:[198,60,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,60,117,255],toColor:[200,61,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[200,61,116,255],toColor:[201,62,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,62,115,255],toColor:[203,63,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,63,115,255],toColor:[204,63,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,63,114,255],toColor:[206,64,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,64,113,255],toColor:[208,65,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[208,65,112,255],toColor:[209,66,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,66,112,255],toColor:[211,66,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,66,111,255],toColor:[212,67,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,67,110,255],toColor:[214,68,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,68,109,255],toColor:[215,69,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[215,69,109,255],toColor:[217,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[217,70,108,255],toColor:[218,71,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,71,107,255],toColor:[220,72,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,72,106,255],toColor:[221,73,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,73,106,255],toColor:[222,74,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[222,74,105,255],toColor:[224,75,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,75,104,255],toColor:[225,76,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[225,76,103,255],toColor:[226,77,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,77,102,255],toColor:[228,78,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,78,102,255],toColor:[229,79,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[229,79,101,255],toColor:[230,81,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,81,100,255],toColor:[231,82,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,82,99,255],toColor:[233,83,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,83,99,255],toColor:[234,84,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,84,98,255],toColor:[235,86,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[235,86,97,255],toColor:[236,87,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,87,97,255],toColor:[237,89,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,89,96,255],toColor:[238,90,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,90,95,255],toColor:[239,92,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,92,95,255],toColor:[240,93,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[240,93,94,255],toColor:[241,95,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,95,94,255],toColor:[242,97,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,97,93,255],toColor:[242,98,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,98,93,255],toColor:[243,100,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,100,93,255],toColor:[244,102,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[244,102,93,255],toColor:[245,104,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,104,92,255],toColor:[245,105,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,105,92,255],toColor:[246,107,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,107,92,255],toColor:[247,109,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,109,92,255],toColor:[247,111,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,111,92,255],toColor:[248,113,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,113,92,255],toColor:[248,114,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,114,92,255],toColor:[249,116,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,116,92,255],toColor:[249,118,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,118,93,255],toColor:[250,120,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[250,120,93,255],toColor:[250,122,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,122,93,255],toColor:[250,124,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,124,94,255],toColor:[251,126,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,126,94,255],toColor:[251,128,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,128,95,255],toColor:[251,130,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,130,95,255],toColor:[252,131,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,131,96,255],toColor:[252,133,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,133,96,255],toColor:[252,135,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,135,97,255],toColor:[253,137,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,137,98,255],toColor:[253,139,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,139,99,255],toColor:[253,141,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,141,99,255],toColor:[253,143,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,143,100,255],toColor:[253,145,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,145,101,255],toColor:[254,147,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,147,102,255],toColor:[254,149,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,149,103,255],toColor:[254,150,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,150,104,255],toColor:[254,152,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,152,105,255],toColor:[254,154,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,154,106,255],toColor:[254,156,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,156,107,255],toColor:[255,158,108,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[255,158,108,255],toColor:[255,160,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,160,109,255],toColor:[255,162,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,162,111,255],toColor:[255,164,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,164,112,255],toColor:[255,165,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,165,113,255],toColor:[255,
167,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,167,114,255],toColor:[255,169,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,169,116,255],toColor:[255,171,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,171,117,255],toColor:[255,173,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,173,118,255],toColor:[255,175,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,
175,119,255],toColor:[255,177,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,177,121,255],toColor:[255,179,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,179,122,255],toColor:[255,180,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,180,124,255],toColor:[255,182,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,182,125,255],toColor:[255,184,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,184,126,255],toColor:[255,186,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,186,128,255],toColor:[255,188,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,188,129,255],toColor:[255,190,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,190,131,255],toColor:[255,191,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,191,132,255],toColor:[255,193,134,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[255,193,134,255],toColor:[255,195,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,195,135,255],toColor:[255,197,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,197,137,255],toColor:[255,199,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,199,139,255],toColor:[255,201,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,201,140,255],toColor:[255,
203,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,203,142,255],toColor:[255,204,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,204,143,255],toColor:[255,206,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,206,145,255],toColor:[255,208,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,208,147,255],toColor:[255,210,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,
210,148,255],toColor:[255,212,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,212,150,255],toColor:[255,214,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,214,152,255],toColor:[255,215,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,215,153,255],toColor:[255,217,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,217,155,255],toColor:[254,219,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,219,157,255],toColor:[254,221,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,221,159,255],toColor:[254,223,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,223,160,255],toColor:[254,225,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,225,162,255],toColor:[254,226,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,226,164,255],toColor:[254,228,166,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[254,228,166,255],toColor:[254,230,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,230,167,255],toColor:[254,232,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,232,169,255],toColor:[254,234,171,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,234,171,255],toColor:[254,236,173,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,236,173,255],toColor:[253,
237,175,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,237,175,255],toColor:[253,239,177,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,239,177,255],toColor:[253,241,179,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,241,179,255],toColor:[253,243,180,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,243,180,255],toColor:[253,245,182,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,
245,182,255],toColor:[253,247,184,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,247,184,255],toColor:[253,248,186,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,248,186,255],toColor:[253,250,188,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,250,188,255],toColor:[253,252,190,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,252,190,255],toColor:[253,254,192,255]}]},{id:"orangeBright_predefined",fromColor:[255,
235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,
255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,
191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"plasma_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,8,135,255],toColor:[16,7,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,7,136,255],toColor:[19,7,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[19,7,138,255],toColor:[22,7,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[22,7,139,255],toColor:[25,6,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,6,140,255],toColor:[27,6,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[27,6,141,255],toColor:[29,6,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[29,6,142,255],toColor:[32,6,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[32,6,143,255],toColor:[34,6,144,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,6,144,255],toColor:[36,6,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,6,145,255],toColor:[38,5,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,5,146,255],toColor:[40,5,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,5,147,255],toColor:[42,5,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[42,5,148,255],toColor:[44,5,149,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,5,149,255],toColor:[46,5,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,5,150,255],toColor:[48,5,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,5,150,255],toColor:[50,5,151,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,5,151,255],toColor:[51,5,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[51,5,152,255],toColor:[53,4,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,4,153,255],toColor:[55,4,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,4,153,255],toColor:[57,4,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,4,154,255],toColor:[58,4,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,4,155,255],toColor:[60,4,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[60,4,156,255],toColor:[62,4,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,4,156,255],toColor:[64,4,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,4,157,255],toColor:[65,4,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,4,158,255],toColor:[67,3,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,3,158,255],toColor:[69,3,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[69,3,159,255],toColor:[70,3,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,3,159,255],toColor:[72,3,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,3,160,255],toColor:[73,3,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,3,161,255],toColor:[75,3,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,3,161,255],toColor:[77,2,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[77,2,162,255],toColor:[78,2,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,2,162,255],toColor:[80,2,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,2,163,255],toColor:[82,2,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,2,163,255],toColor:[83,2,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,2,164,255],toColor:[85,2,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[85,2,164,255],toColor:[86,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,1,165,255],toColor:[88,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,1,165,255],toColor:[90,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[90,1,165,255],toColor:[91,1,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,1,166,255],toColor:[93,1,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[93,1,166,255],toColor:[94,1,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,1,167,255],toColor:[96,1,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[96,1,167,255],toColor:[98,0,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,0,167,255],toColor:[99,0,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,0,167,255],toColor:[101,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[101,0,168,255],toColor:[102,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,0,168,255],toColor:[104,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[104,0,168,255],toColor:[105,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,0,168,255],toColor:[107,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,0,169,255],toColor:[108,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[108,0,169,255],toColor:[110,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,0,169,255],toColor:[112,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,0,169,255],toColor:[113,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,0,169,255],toColor:[115,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,1,169,255],toColor:[116,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[116,1,169,255],toColor:[118,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,1,169,255],toColor:[119,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[119,1,169,255],toColor:[121,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[121,1,169,255],toColor:[122,2,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,2,169,255],toColor:[124,2,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[124,2,169,255],toColor:[125,3,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,3,169,255],toColor:[127,3,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,3,168,255],toColor:[128,4,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,4,168,255],toColor:[130,4,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,4,168,255],toColor:[131,5,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[131,5,168,255],toColor:[133,6,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,6,167,255],toColor:[134,6,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,6,167,255],toColor:[136,7,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,7,167,255],toColor:[137,8,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,8,166,255],toColor:[138,9,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[138,9,166,255],toColor:[140,10,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,10,166,255],toColor:[141,11,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,11,165,255],toColor:[143,12,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[143,12,165,255],toColor:[144,13,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,13,164,255],toColor:[145,14,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[145,14,164,255],toColor:[147,15,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,15,163,255],toColor:[148,16,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,16,163,255],toColor:[150,18,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,18,162,255],toColor:[151,19,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,19,161,255],toColor:[152,20,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[152,20,161,255],toColor:[154,21,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,21,160,255],toColor:[155,22,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,22,159,255],toColor:[156,23,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[156,23,159,255],toColor:[158,24,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,24,158,255],toColor:[159,25,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[159,25,157,255],toColor:[160,26,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,26,156,255],toColor:[162,28,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,28,156,255],toColor:[163,29,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,29,155,255],toColor:[164,30,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,30,154,255],toColor:[165,31,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[165,31,153,255],toColor:[167,32,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,32,152,255],toColor:[168,33,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[168,33,152,255],toColor:[169,34,151,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,34,151,255],toColor:[170,35,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,35,150,255],toColor:[171,37,149,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[171,37,149,255],toColor:[173,38,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,38,148,255],toColor:[174,39,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,39,147,255],toColor:[175,40,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[175,40,146,255],toColor:[176,41,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,41,145,255],toColor:[177,42,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[177,42,145,255],toColor:[179,43,144,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,43,144,255],toColor:[180,45,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,45,143,255],toColor:[181,46,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[181,46,142,255],toColor:[182,47,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,47,141,255],toColor:[183,48,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[183,48,140,255],toColor:[184,49,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,49,139,255],toColor:[185,50,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,50,138,255],toColor:[186,51,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[186,51,137,255],toColor:[187,52,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,52,136,255],toColor:[188,54,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[188,54,135,255],toColor:[189,55,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[189,55,134,255],toColor:[191,56,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,56,133,255],toColor:[192,57,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[192,57,132,255],toColor:[193,58,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,58,131,255],toColor:[194,59,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[194,59,130,255],toColor:[195,60,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,60,129,255],toColor:[196,62,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,62,129,255],toColor:[197,63,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[197,63,128,255],toColor:[198,64,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,64,127,255],toColor:[199,65,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[199,65,126,255],toColor:[200,66,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,66,125,255],toColor:[201,67,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,67,124,255],toColor:[202,68,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,68,123,255],toColor:[202,69,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,69,122,255],toColor:[203,71,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[203,71,121,255],toColor:[204,72,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,72,120,255],toColor:[205,73,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,73,119,255],toColor:[206,74,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,74,118,255],toColor:[207,75,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,75,117,255],toColor:[208,76,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[208,76,117,255],toColor:[209,77,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,77,116,255],toColor:[210,79,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[210,79,115,255],toColor:[211,80,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,80,114,255],toColor:[212,81,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,81,113,255],toColor:[212,82,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[212,82,112,255],toColor:[213,83,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[213,83,111,255],toColor:[214,84,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,84,110,255],toColor:[215,85,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[215,85,109,255],toColor:[216,87,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,87,109,255],toColor:[217,88,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[217,88,108,255],toColor:[218,89,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,89,107,255],toColor:[218,90,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,90,106,255],toColor:[219,91,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,91,105,255],toColor:[220,92,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,92,104,255],toColor:[221,93,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[221,93,103,255],toColor:[222,95,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[222,95,102,255],toColor:[223,96,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,96,102,255],toColor:[223,97,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,97,101,255],toColor:[224,98,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,98,100,255],toColor:[225,99,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[225,99,99,255],toColor:[226,100,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,100,98,255],toColor:[226,102,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,102,97,255],toColor:[227,103,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,103,96,255],toColor:[228,104,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,104,96,255],toColor:[229,105,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[229,105,95,255],toColor:[229,106,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,106,94,255],toColor:[230,108,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,108,93,255],toColor:[231,109,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,109,92,255],toColor:[232,110,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,110,91,255],toColor:[232,111,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[232,111,90,255],toColor:[233,112,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,112,90,255],toColor:[234,114,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,114,89,255],toColor:[234,115,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,115,88,255],toColor:[235,116,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,116,87,255],toColor:[236,117,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[236,117,86,255],toColor:[236,119,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,119,85,255],toColor:[237,120,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,120,84,255],toColor:[238,121,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,121,83,255],toColor:[238,122,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,122,83,255],toColor:[239,124,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[239,124,82,255],toColor:[240,125,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,125,81,255],toColor:[240,126,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,126,80,255],toColor:[241,127,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,127,79,255],toColor:[241,129,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,129,78,255],toColor:[242,130,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,130,77,255],toColor:[242,131,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,131,77,255],toColor:[243,133,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,133,76,255],toColor:[244,134,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,134,75,255],toColor:[244,135,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,135,74,255],toColor:[245,136,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[245,136,73,255],toColor:[245,138,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,138,72,255],toColor:[246,139,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,139,71,255],toColor:[246,140,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,140,70,255],toColor:[247,142,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,142,70,255],toColor:[247,143,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,143,69,255],toColor:[248,144,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,144,68,255],toColor:[248,146,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,146,67,255],toColor:[248,147,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,147,66,255],toColor:[249,149,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,149,65,255],toColor:[249,150,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[249,150,64,255],toColor:[250,151,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,151,64,255],toColor:[250,153,63,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,153,63,255],toColor:[250,154,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,154,62,255],toColor:[251,156,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,156,61,255],toColor:[251,157,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,157,60,255],toColor:[251,158,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,158,59,255],toColor:[252,160,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,160,58,255],toColor:[252,161,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,161,58,255],toColor:[252,163,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,163,57,255],toColor:[253,164,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,164,56,255],toColor:[253,166,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,166,55,255],toColor:[253,167,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,167,54,255],toColor:[253,168,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,168,53,255],toColor:[253,170,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,170,52,255],toColor:[254,171,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,171,52,255],toColor:[254,173,51,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,173,51,255],toColor:[254,174,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,174,50,255],toColor:[254,176,49,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,176,49,255],toColor:[254,177,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,177,48,255],toColor:[254,179,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,179,48,255],toColor:[254,180,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,180,47,255],toColor:[254,182,46,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,182,46,255],toColor:[255,183,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,183,45,255],toColor:[255,185,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,185,45,255],toColor:[255,187,44,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,187,44,255],toColor:[255,188,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,188,43,255],toColor:[255,190,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,190,43,255],toColor:[255,191,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,191,42,255],toColor:[255,193,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,193,41,255],toColor:[254,194,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,194,41,255],toColor:[254,196,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,196,40,255],toColor:[254,198,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,198,40,255],toColor:[254,199,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,199,39,255],toColor:[254,201,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,201,39,255],toColor:[254,202,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,202,38,255],toColor:[254,204,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,204,38,255],toColor:[253,206,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,206,38,255],toColor:[253,207,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,207,37,255],toColor:[253,209,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,209,37,255],toColor:[253,211,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,211,37,255],toColor:[252,212,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,212,37,255],toColor:[252,214,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,214,36,255],toColor:[252,216,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,216,36,255],toColor:[251,217,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,217,36,255],toColor:[251,219,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,219,36,255],toColor:[250,221,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,221,37,255],toColor:[250,222,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,222,37,255],toColor:[249,224,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,224,37,255],toColor:[249,226,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,226,37,255],toColor:[248,227,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[248,227,37,255],toColor:[248,229,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,229,38,255],toColor:[247,231,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,231,38,255],toColor:[247,232,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,232,38,255],toColor:[246,234,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,234,39,255],toColor:[246,236,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[246,236,39,255],toColor:[245,238,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,238,39,255],toColor:[244,239,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,239,39,255],toColor:[244,241,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,241,39,255],toColor:[243,243,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,243,39,255],toColor:[242,245,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,245,38,255],toColor:[242,246,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,246,38,255],toColor:[241,248,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,248,36,255],toColor:[241,250,34,255]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,
153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,
14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",
fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,
245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",
type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,
255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,
255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"viridis_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,1,84,255],toColor:[69,2,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,2,86,255],toColor:[69,4,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,4,87,255],toColor:[69,5,89,
255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,5,89,255],toColor:[70,7,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,7,90,255],toColor:[70,8,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,8,92,255],toColor:[70,10,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,10,93,255],toColor:[71,11,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,11,95,255],toColor:[71,13,96,255]},
{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,13,96,255],toColor:[71,14,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,14,98,255],toColor:[71,16,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,16,99,255],toColor:[72,17,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,17,100,255],toColor:[72,19,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,19,102,255],toColor:[72,20,103,
255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,20,103,255],toColor:[72,22,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,22,104,255],toColor:[72,23,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,23,106,255],toColor:[72,24,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,24,107,255],toColor:[72,26,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,26,108,255],toColor:[72,
27,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,27,109,255],toColor:[72,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,28,110,255],toColor:[73,30,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,30,112,255],toColor:[73,31,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,31,113,255],toColor:[72,32,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,32,114,255],
toColor:[72,34,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,34,115,255],toColor:[72,35,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,35,116,255],toColor:[72,36,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,36,117,255],toColor:[72,37,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,37,118,255],toColor:[72,39,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,
39,119,255],toColor:[72,40,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,40,120,255],toColor:[72,41,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,41,121,255],toColor:[72,42,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,42,122,255],toColor:[72,44,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,44,123,255],toColor:[71,45,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[71,45,124,255],toColor:[71,46,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,46,125,255],toColor:[71,47,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,47,125,255],toColor:[71,49,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,49,126,255],toColor:[70,50,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,50,127,255],toColor:[70,51,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[70,51,128,255],toColor:[70,52,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,52,128,255],toColor:[70,54,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,54,129,255],toColor:[69,55,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,55,130,255],toColor:[69,56,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,56,130,255],toColor:[69,57,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[69,57,131,255],toColor:[68,58,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,58,132,255],toColor:[68,60,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,60,132,255],toColor:[68,61,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,61,133,255],toColor:[67,62,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,62,133,255],toColor:[67,63,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[67,63,134,255],toColor:[66,64,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,64,134,255],toColor:[66,66,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,66,135,255],toColor:[65,67,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,67,135,255],toColor:[65,68,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,68,136,255],toColor:[65,69,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,69,136,255],toColor:[64,70,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,70,136,255],toColor:[64,71,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,71,137,255],toColor:[63,73,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,73,137,255],toColor:[63,74,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,74,138,255],toColor:[62,75,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[62,75,138,255],toColor:[62,76,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,76,138,255],toColor:[61,77,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,77,138,255],toColor:[61,78,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,78,139,255],toColor:[60,79,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,79,139,255],toColor:[60,80,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[60,80,139,255],toColor:[59,81,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,81,139,255],toColor:[59,83,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,83,140,255],toColor:[58,84,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,84,140,255],toColor:[58,85,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,85,140,255],toColor:[57,86,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[57,86,140,255],toColor:[57,87,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,87,140,255],toColor:[56,88,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,88,141,255],toColor:[56,89,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,89,141,255],toColor:[55,90,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,90,141,255],toColor:[55,91,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[55,91,141,255],toColor:[54,92,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,92,141,255],toColor:[54,93,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,93,141,255],toColor:[53,94,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,94,141,255],toColor:[53,95,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,95,142,255],toColor:[52,96,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[52,96,142,255],toColor:[52,97,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,97,142,255],toColor:[52,98,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,98,142,255],toColor:[51,99,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,99,142,255],toColor:[51,100,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,100,142,255],toColor:[50,101,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[50,101,142,255],toColor:[50,102,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,102,142,255],toColor:[49,103,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,103,142,255],toColor:[49,104,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,104,142,255],toColor:[48,105,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,105,142,255],toColor:[48,106,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[48,106,142,255],toColor:[48,107,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,107,143,255],toColor:[47,108,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,108,143,255],toColor:[47,109,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,109,143,255],toColor:[46,110,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,110,143,255],toColor:[46,111,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[46,111,143,255],toColor:[45,112,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,112,143,255],toColor:[45,113,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,113,143,255],toColor:[45,114,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,114,143,255],toColor:[44,115,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,115,143,255],toColor:[44,116,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[44,116,143,255],toColor:[43,117,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,117,143,255],toColor:[43,118,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,118,143,255],toColor:[43,119,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,119,143,255],toColor:[42,120,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,120,143,255],toColor:[42,121,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[42,121,143,255],toColor:[42,122,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,122,143,255],toColor:[41,123,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,123,143,255],toColor:[41,123,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,123,143,255],toColor:[40,124,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,124,143,255],toColor:[40,125,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[40,125,143,255],toColor:[40,126,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,126,143,255],toColor:[39,127,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,127,143,255],toColor:[39,128,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,128,143,255],toColor:[39,129,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,129,143,255],toColor:[38,130,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[38,130,143,255],toColor:[38,131,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,131,143,255],toColor:[37,132,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,132,143,255],toColor:[37,133,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,133,142,255],toColor:[37,134,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,134,142,255],toColor:[36,135,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[36,135,142,255],toColor:[36,136,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,136,142,255],toColor:[36,137,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,137,142,255],toColor:[35,138,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,138,142,255],toColor:[35,139,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,139,142,255],toColor:[35,139,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[35,139,142,255],toColor:[34,140,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,140,142,255],toColor:[34,141,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,141,142,255],toColor:[34,142,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,142,141,255],toColor:[33,143,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,143,141,255],toColor:[33,144,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[33,144,141,255],toColor:[33,145,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,145,141,255],toColor:[32,146,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,146,141,255],toColor:[32,147,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,147,141,255],toColor:[32,148,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,148,140,255],toColor:[32,149,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[32,149,140,255],toColor:[31,150,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,150,140,255],toColor:[31,151,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,151,140,255],toColor:[31,152,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,152,139,255],toColor:[31,153,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,153,139,255],toColor:[31,154,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[31,154,139,255],toColor:[31,155,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,155,139,255],toColor:[31,156,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,156,138,255],toColor:[31,156,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,156,138,255],toColor:[31,157,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,157,138,255],toColor:[31,158,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[31,158,137,255],toColor:[31,159,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,159,137,255],toColor:[31,160,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,160,137,255],toColor:[31,161,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,161,136,255],toColor:[31,162,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,162,136,255],toColor:[32,163,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[32,163,135,255],toColor:[32,164,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,164,135,255],toColor:[32,165,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,165,134,255],toColor:[33,166,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,166,134,255],toColor:[33,167,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,167,134,255],toColor:[34,168,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[34,168,133,255],toColor:[34,169,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,169,133,255],toColor:[35,170,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,170,132,255],toColor:[36,170,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,170,131,255],toColor:[37,171,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,171,131,255],toColor:[38,172,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[38,172,130,255],toColor:[38,173,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,173,130,255],toColor:[39,174,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,174,129,255],toColor:[40,175,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,175,128,255],toColor:[41,176,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,176,128,255],toColor:[43,177,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[43,177,127,255],toColor:[44,178,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,178,126,255],toColor:[45,179,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,179,126,255],toColor:[46,180,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,180,125,255],toColor:[48,180,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,180,124,255],toColor:[49,181,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[49,181,123,255],toColor:[50,182,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,182,123,255],toColor:[52,183,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,183,122,255],toColor:[53,184,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,184,121,255],toColor:[55,185,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,185,120,255],toColor:[56,186,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[56,186,119,255],toColor:[58,187,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,187,118,255],toColor:[60,187,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,187,118,255],toColor:[61,188,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,188,117,255],toColor:[63,189,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,189,116,255],toColor:[65,190,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,190,115,255],toColor:[67,191,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,191,114,255],toColor:[68,192,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,192,113,255],toColor:[70,193,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,193,112,255],toColor:[72,193,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,193,111,255],toColor:[74,194,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[74,194,110,255],toColor:[76,195,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,195,109,255],toColor:[78,196,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,196,108,255],toColor:[80,197,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,197,106,255],toColor:[82,197,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,197,105,255],toColor:[84,198,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[84,198,104,255],toColor:[86,199,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,199,103,255],toColor:[88,200,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,200,102,255],toColor:[90,200,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[90,200,101,255],toColor:[92,201,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,201,99,255],toColor:[95,202,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,202,98,255],toColor:[97,203,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,203,97,255],toColor:[99,203,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,203,95,255],toColor:[101,204,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,204,94,255],toColor:[103,205,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[103,205,93,255],toColor:[106,206,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[106,206,91,255],toColor:[108,206,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,206,90,255],toColor:[110,207,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,207,89,255],toColor:[113,208,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,208,87,255],toColor:[115,208,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,208,86,255],toColor:[117,209,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[117,209,84,255],toColor:[120,210,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,210,83,255],toColor:[122,210,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,210,81,255],toColor:[125,211,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,211,80,255],toColor:[127,212,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,212,78,255],toColor:[130,212,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[130,212,77,255],toColor:[132,213,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,213,75,255],toColor:[135,213,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[135,213,74,255],toColor:[137,214,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,214,72,255],toColor:[140,215,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,215,71,255],toColor:[142,215,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[142,215,69,255],toColor:[145,216,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,216,67,255],toColor:[147,216,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,216,66,255],toColor:[150,217,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,217,64,255],toColor:[153,217,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[153,217,62,255],toColor:[155,218,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[155,218,61,255],toColor:[158,218,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,218,59,255],toColor:[160,219,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,219,57,255],toColor:[163,219,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,219,55,255],toColor:[166,220,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[166,220,54,255],toColor:[168,220,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[168,220,52,255],toColor:[171,221,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[171,221,50,255],toColor:[174,221,49,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,221,49,255],toColor:[176,222,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,222,47,255],toColor:[179,222,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,222,45,255],toColor:[182,222,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[182,222,43,255],toColor:[184,223,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,223,42,255],toColor:[187,223,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,223,40,255],toColor:[190,224,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,224,38,255],toColor:[192,224,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[192,224,37,255],toColor:[195,224,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[195,224,35,255],toColor:[198,225,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,225,34,255],toColor:[201,225,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,225,32,255],toColor:[203,225,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,225,31,255],toColor:[206,226,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,226,29,255],toColor:[209,226,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[209,226,28,255],toColor:[211,226,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,226,27,255],toColor:[214,227,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,227,26,255],toColor:[216,227,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,227,26,255],toColor:[219,227,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,227,25,255],toColor:[222,228,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[222,228,25,255],toColor:[224,228,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,228,24,255],toColor:[227,228,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,228,24,255],toColor:[229,229,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,229,25,255],toColor:[232,229,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,229,25,255],toColor:[235,229,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[235,229,26,255],toColor:[237,230,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,230,27,255],toColor:[240,230,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,230,28,255],toColor:[242,230,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,230,29,255],toColor:[245,231,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,231,30,255],toColor:[247,231,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,231,32,255],toColor:[249,231,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,231,33,255],toColor:[252,232,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,232,35,255],toColor:[254,232,37,255]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",
type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],b=[{name:"Aspect",id:"aspect_predefined"},{name:"Black to White",id:"blackToWhite_predefined"},{name:"Blue Bright",
id:"blueBright_predefined"},{name:"Blue Light to Dark",id:"blueLightToDark_predefined"},{name:"Blue-Green Bright",id:"blueGreenBright_predefined"},{name:"Blue-Green Light to Dark",id:"blueGreenLightToDark_predefined"},{name:"Brown Light to Dark",id:"brownLightToDark_predefined"},{name:"Brown to Blue Green Diverging, Bright",id:"brownToBlueGreenDivergingBright_predefined"},{name:"Brown to Blue Green Diverging, Dark",id:"brownToBlueGreenDivergingDark_predefined"},{name:"Cividis",id:"cividis_predefined"},
{name:"Coefficient Bias",id:"coefficientBias_predefined"},{name:"Cold to Hot Diverging",id:"coldToHotDiverging_predefined"},{name:"Condition Number",id:"conditionNumber_predefined"},{name:"Cyan to Purple",id:"cyanToPurple_predefined"},{name:"Cyan-Light to Blue-Dark",id:"cyanLightToBlueDark_predefined"},{name:"Distance",id:"distance_predefined"},{id:"elevation1_predefined",name:"Elevation #1"},{id:"elevation2_predefined",name:"Elevation #2"},{id:"errors_predefined",name:"Errors"},{id:"grayLightToDark_predefined",
name:"Gray Light to Dark"},{id:"greenBright_predefined",name:"Green Bright"},{id:"greenLightToDark_predefined",name:"Green Light to Dark"},{name:"Green to Blue",id:"greenToBlue_predefined"},{name:"Inferno",id:"inferno_predefined"},{name:"Magma",id:"magma_predefined"},{name:"Orange Bright",id:"orangeBright_predefined"},{name:"Orange Light to Dark",id:"orangeLightToDark_predefined"},{id:"partialSpectrum_predefined",name:"Partial Spectrum"},{id:"partialSpectrum1Diverging_predefined",name:"Partial Spectrum 1 Diverging",
type:"multipart"},{id:"partialSpectrum2Diverging_predefined",name:"Partial Spectrum 2 Diverging"},{name:"Plasma",id:"plasma_predefined"},{name:"Pink to YellowGreen Diverging, Bright",id:"pinkToYellowGreenDivergingBright_predefined"},{name:"Pink to YellowGreen Diverging, Dark",id:"pinkToYellowGreenDivergingDark_predefined"},{id:"precipitation_predefined",name:"Precipitation"},{id:"prediction_predefined",name:"Prediction"},{name:"Purple Bright",id:"purpleBright_predefined"},{id:"purpleToGreenDivergingBright_predefined",
name:"Purple to Green Diverging, Bright"},{id:"purpleToGreenDivergingDark_predefined",name:"Purple to Green Diverging, Dark"},{name:"Purple-Blue Bright",id:"purpleBlueBright_predefined"},{name:"Purple-Blue Light to Dark",id:"purpleBlueLightToDark_predefined"},{name:"Purple-Red Bright",id:"purpleRedBright_predefined"},{name:"Purple-Red Light to Dark",id:"purpleRedLightToDark_predefined"},{name:"Red Bright",id:"redBright_predefined"},{name:"Red Light to Dark",id:"redLightToDark_predefined"},{id:"redToBlueDivergingBright_predefined",
name:"Red to Blue Diverging, Bright"},{id:"redToBlueDivergingDark_predefined",name:"Red to Blue Diverging, Dark"},{id:"redToGreen_predefined",name:"Red to Green"},{id:"redToGreenDivergingBright_predefined",name:"Red to Green Diverging, Bright"},{id:"redToGreenDivergingDark_predefined",name:"Red to Green Diverging, Dark"},{name:"Slope",id:"slope_predefined"},{id:"spectrumFullBright_predefined",name:"Spectrum-Full Bright"},{id:"spectrumFullDark_predefined",name:"Spectrum-Full Dark"},{id:"spectrumFullLight_predefined",
name:"Spectrum-Full Light"},{id:"surface_predefined",name:"Surface"},{id:"temperature_predefined",name:"Temperature"},{name:"Viridis",id:"viridis_predefined"},{name:"White to Black",id:"whiteToBlack_predefined"},{id:"yellowToDarkRed_predefined",name:"Yellow to Dark Red"},{id:"yellowToGreenToDarkBlue_predefined",name:"Yellow to Green to Dark Blue"},{name:"Yellow to Red",id:"yellowToRed_predefined"},{name:"Yellow-Green Bright",id:"yellowGreenBright_predefined"},{name:"Yellow-Green Light to Dark",id:"yellowGreenLightToDark_predefined"}],
w=new l({data:b});f.mixin(k,{predefinedColorRamps:g,predefinedColorRampNameMap:b,getColorRampName:function(x){x=m(x);return x.id?(x=w.query({id:x.id}),x[0]?x[0].name:null):null},fromJson:function(x){var z=null;if(!x)return z;"multipart"===x.type?(z=new c,z.colorRamps=B.map(x.colorRamps,function(D){return h(D)},this)):"algorithmic"===x.type&&(z=h(x));return z},colorsEqual:n,getColorRampId:m,invertColorRamp:q,convertColorRampToColormap:function(x,z){if(x&&z){var D=x.colorRamps?x.colorRamps.length:1,
E=[],C=[],y,v,A,G,F=0,H=0;for(F=0;F<D;F++)E[F]={},E[F].start=H,E[F].end=H+1/D,H=E[F].end;for(F=0;F<z;F++){var L=(F+.5)/z;B.forEach(E,function(M,Q){L>=M.start&&L<M.end&&(G=(L-M.start)/(M.end-M.start),1<E.length?(y=t.getDojoColor(x.colorRamps[Q].fromColor),v=t.getDojoColor(x.colorRamps[Q].toColor)):(y=t.getDojoColor(x.fromColor),v=t.getDojoColor(x.toColor)),A=r(y,v,G),C.push([F,A.r,A.g,A.b]))},this)}return C}},interpolateLabColor:r});return k})},"esri/tasks/AlgorithmicColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../Color ./ColorRamp".split(" "),
function(f,B,l,e,c,u){f=f(u,{declaredClass:"esri.tasks.AlgorithmicColorRamp",type:"algorithmic",fromColor:null,toColor:null,algorithm:null,toJson:function(){switch(this.algorithm&&this.algorithm.toLowerCase()){case "cie-lab":var t="esriCIELabAlgorithm";break;case "hsv":t="esriHSVAlgorithm";break;case "lab-lch":t="esriLabLChAlgorithm"}t={type:"algorithmic",algorithm:t};t.fromColor=c.toJsonColor(this.fromColor);t.toColor=c.toJsonColor(this.toColor);return t}});B.setObject("tasks.AlgorithmicColorRamp",
f,e);return f})},"esri/tasks/ColorRamp":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,e){f=f(null,{declaredClass:"esri.tasks.ColorRamp",type:null});B.setObject("tasks.ColorRamp",f,e);return f})},"esri/tasks/MultipartColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../symbols/Symbol ./ColorRamp".split(" "),function(f,B,l,e,c,u){f=f(u,{declaredClass:"esri.tasks.MultipartColorRamp",type:"multipart",
constructor:function(){this.colorRamps=[]},addColorRamp:function(t){this.colorRamps.push(t)},toJson:function(){return{type:"multipart",colorRamps:l.map(this.colorRamps,function(t){return t.toJson()})}}});B.setObject("tasks.MultipartColorRamp",f,c);return f})},"esri/renderers/colorUtils":function(){define(["dojo/_base/Color","dojo/_base/array"],function(f,B){var l={COEF_RGB2XYZ:[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],COEF_XYZ2RGB:[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],
[.0557,-.204,1.057]],matrixProduct:function(c,u){var t=[],d,q;if(c[0].length!==u.length)throw"dimensions do not match";var m=c.length,a=c[0].length,h=0;for(d=0;d<m;d++){for(q=h=0;q<a;q++)h+=c[d][q]*u[q];t.push(h)}return t},rgb2xyz:function(c){c=[c.r/255,c.g/255,c.b/255].map(function(u){return.04045>=u?u/12.92:Math.pow((u+.055)/1.055,2.4)});c=this.matrixProduct(this.COEF_RGB2XYZ,c);return{x:100*c[0],y:100*c[1],z:100*c[2]}},xyz2rgb:function(c){c=this.matrixProduct(this.COEF_XYZ2RGB,[c.x/100,c.y/100,
c.z/100]).map(function(u){return Math.min(1,Math.max(.0031308>=u?12.92*u:1.055*Math.pow(u,1/2.4)-.055,0))});return{r:Math.round(255*c[0]),g:Math.round(255*c[1]),b:Math.round(255*c[2])}},xyz2lab:function(c){c=[c.x/95.047,c.y/100,c.z/108.883].map(function(u){return u>Math.pow(6/29,3)?Math.pow(u,1/3):1/3*Math.pow(29/6,2)*u+4/29});return{l:116*c[1]-16,a:500*(c[0]-c[1]),b:200*(c[1]-c[2])}},lab2xyz:function(c){var u=c.l;c=[(u+16)/116+c.a/500,(u+16)/116,(u+16)/116-c.b/200].map(function(t){return t>6/29?
Math.pow(t,3):3*Math.pow(6/29,2)*(t-4/29)});return{x:95.047*c[0],y:100*c[1],z:108.883*c[2]}},lab2lch:function(c){var u=c.l,t=c.a,d=c.b;c=Math.sqrt(t*t+d*d);t=Math.atan2(d,t);t=0<t?t:t+2*Math.PI;return{l:u,c,h:t}},lch2lab:function(c){var u=c.c,t=c.h;return{l:c.l,a:u*Math.cos(t),b:u*Math.sin(t)}},rgb2lab:function(c){return this.xyz2lab(this.rgb2xyz(c))},lab2rgb:function(c){return this.xyz2rgb(this.lab2xyz(c))},rgb2lch:function(c){return this.lab2lch(this.xyz2lab(this.rgb2xyz(c)))},lch2rgb:function(c){return this.xyz2rgb(this.lab2xyz(this.lch2lab(c)))}},
e={rgb2hsv:function(c){var u=c.r,t=c.g;c=c.b;var d=Math.max(u,t,c),q=d-Math.min(u,t,c),m;0===q?m=0:d===u?m=(t-c)/q%6:d===t?m=(c-u)/q+2:d===c&&(m=(u-t)/q+4);0>m&&(m+=6);return{h:60*m,s:100*(0===q?0:q/d),v:100/255*d}},hsv2rgb:function(c){var u=(c.h+360)%360/60,t=c.v/100*255;c=c.s/100*t;var d=c*(1-Math.abs(u%2-1));switch(Math.floor(u)){case 0:u={r:c,g:d,b:0};break;case 1:u={r:d,g:c,b:0};break;case 2:u={r:0,g:c,b:d};break;case 3:u={r:0,g:d,b:c};break;case 4:u={r:d,g:0,b:c};break;case 5:case 6:u={r:c,
g:0,b:d};break;default:u={r:0,g:0,b:0}}u.r=Math.round(u.r+t-c);u.g=Math.round(u.g+t-c);u.b=Math.round(u.b+t-c);return u}};return{toRGB:function(c){var u;void 0!==c.r&&void 0!==c.g&&void 0!==c.b?u=c:void 0!==c.l&&void 0!==c.c&&void 0!==c.h?u=l.lch2rgb(c):void 0!==c.l&&void 0!==c.a&&void 0!==c.b?u=l.lab2rgb(c):void 0!==c.x&&void 0!==c.y&&void 0!==c.z?u=l.xyz2rgb(c):void 0!==c.h&&void 0!==c.s&&void 0!==c.v&&(u=e.hsv2rgb(c));return u},toHSV:function(c){if(void 0!==c.h&&void 0!==c.s&&void 0!==c.v)return c;
c=this.toRGB(c);return e.rgb2hsv(c)},toLAB:function(c){return void 0!==c.l&&void 0!==c.a&&void 0!==c.b?c:l.rgb2lab(this.toRGB(c))},toLCH:function(c){return void 0!==c.l&&void 0!==c.c&&void 0!==c.h?c:l.rgb2lch(this.toRGB(c))},toXYZ:function(c){return void 0!==c.x&&void 0!==c.y&&void 0!==c.z?c:l.rgb2xyz(this.toRGB(c))},getDojoColor:function(c){if(c){if(Array.isArray(c))return f.fromArray(c);if(void 0!==c.r&&void 0!==c.g&&void 0!==c.b)return c}},correctRGBLimits:function(c){var u=[c.r,c.g,c.b];B.forEach(u,
function(t,d){0>u[d]?u[d]=0:255<u[d]&&(u[d]=255);u[d]=Math.floor(u[d])});return{r:u[0],g:u[1],b:u[2],a:1}}}})},"esri/renderers/ShadedReliefRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),function(f,B,l,e,c,u,t,d){f=f(null,{declaredClass:"esri.renderer.ShadedReliefRenderer",constructor:function(q){q=q||{};this.hillshadeType=q.hillshadeType||"traditional";this.azimuth=null!=q.azimuth?q.azimuth:
315;this.altitude=null!=q.altitude?q.altitude:45;this.zFactor=q.zFactor||1;this.scalingType=q.scalingType||"none";this.pixelSizePower=null!=q.pixelSizePower?q.pixelSizePower:.664;this.pixelSizeFactor=null!=q.pixelSizeFactor?q.pixelSizeFactor:.024;this.removeEdgeEffect=q.removeEdgeEffect||!1;this.colorRamp=d.fromJson(q.colorRamp)},toJson:function(){var q={type:"rasterShadedRelief",hillshadeType:this.hillshadeType,azimuth:this.azimuth,altitude:this.altitude,zFactor:this.zFactor,scalingType:this.scalingType,
pixelSizePower:this.pixelSizePower,pixelSizeFactor:this.pixelSizeFactor,colorRamp:this.colorRamp&&this.colorRamp.toJson()};return u.fixJson(q)},toRenderingRule:function(q){}});l.setObject("renderer.ShadedReliefRenderer",f,c);return f})},"esri/renderers/ColormapRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ./arcadeUtils".split(" "),function(f,B,l,e,c,u,t,d,q){f=f(d,{declaredClass:"esri.renderer.ColormapRenderer",
constructor:function(m){this.colormapInfos=m&&m.colormapInfos},toJson:function(){var m=u.fixJson;var a={type:"rasterColormap",colormapInfos:B.map(this.colormapInfos||[],function(h,n){var r={};h.color&&null!==h.color&&3<=h.color.length&&(r.color=h.color,r.value=h.value||n,r.label=(h.label||n)+"");return m(r)})};a=l.mixin(this.inherited(arguments),a);return m(a)}});l.setObject("renderer.ColormapRenderer",f,c);return f})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel",
"../support/expressionUtils"],function(f,B,l,e){f.setObject("renderer.arcadeUtils",e,l);return e})},"esri/arcadeProfiles/labelingProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(f,B,l,e,c,u,t,d){f=new (f(null,{declaredClass:"esri.arcadeProfiles.LabelingProfile",defaults:{context:{vars:{$feature:"any"}}},initialize:function(q){var m=[];d.hasGeometryOperations(q)&&m.push(t.enableGeometryOperations());
return c(m)},isAsync:function(q){return!1},parse:function(q){return t.createSyntaxTree(q.expression)},compile:function(q){var m=B.clone(this.defaults.context);return q.syntaxTree?t.createFunction(q.syntaxTree,m):null},getEvalOptions:function(q){var m=q.feature;return{context:{vars:{$feature:m&&q.expression.hasVariable("$feature")?u.createFromGraphicLikeObject(m.geometry,m.attributes,q.layer):null},spatialReference:q.spatialReference}}}}));B.setObject("arcadeProfiles.labelingProfile",f,e);return f})},
"esri/tasks/QueryTask":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/DeferredList ../kernel ../sniff ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k){var g=q("esri-pbf"),b=B(null,{url:null,query:null,requestOptions:null,pagination:null,pageSize:null,_fetchDfd:null,_startPage:null,_result:null,constructor:function(x){this._handleSuccess=
l.hitch(this,this._handleSuccess);this._handleError=l.hitch(this,this._handleError);l.mixin(this,x);null==this.pagination&&(this.pagination=!1);null==this.pageSize&&(this.pageSize=1E3)},execute:function(){var x=new c(this._canceler);this._fetchDfd=x;this._result=null;this._sendRequest();return x.promise},_canceler:function(x){var z=x._pendingRequest;if(!x.isFulfilled()&&z&&!z.isFulfilled()){z.cancel();var D=z.results&&z.results[1]}x._pendingRequest=null;return D},_sendRequest:function(x){var z=this.query;
this.pagination&&(this._startPage=z.resultOffset=null==x?0:x,z.resultRecordCount=this.pageSize);x=this.requestOptions;this._fetchDfd._pendingRequest=m({url:this.url,content:z,handleAs:"pbf"===z.f?"arraybuffer":"json",callbackParamName:"callback",timeout:x&&x.timeout},x);this._fetchDfd._pendingRequest.then(this._handleSuccess).otherwise(this._handleError)},_handleSuccess:function(x){this.pagination?(x.exceededTransferLimit&&this._sendRequest(this._startPage+this.pageSize),this._result?this._result.features=
this._result.features.concat(x.features):this._result=x,this._fetchDfd.progress(x),x.exceededTransferLimit||this._fetchDfd.resolve(this._result)):(this._fetchDfd.progress(x),this._fetchDfd.resolve(x))},_handleError:function(x){this._fetchDfd.reject(x)}}),w=B(r,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},constructor:function(x,z){this._handler=
l.hitch(this,this._handler);this._relationshipQueryHandler=l.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=l.hitch(this,this._executeForIdsHandler);this._countHandler=l.hitch(this,this._countHandler);this._extentHandler=l.hitch(this,this._extentHandler);this.source=z&&z.source;this.gdbVersion=z&&z.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"rawExecute",c:2,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,
p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onRawExecuteComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(x,z,D,E,C){var y=C.assembly;x=this._encode(l.mixin({},this._url.query,{f:E&&E.format||"json"},x.toJson(y&&y[0])));var v=this._handler,
A=this._errorHandler;this.source&&(E={source:this.source.toJson()},x.layer=u.toJson(E));this.gdbVersion&&(x.gdbVersion=this.gdbVersion);var G="pbf"===x.f;if(G){var F;g||(F="QueryTask.execute: 'pbf' format is not supported in your browser.");if(F)return x=new c,x.addErrback(function(H){A(H,D,C.dfd)}),x.reject(Error(F)),x}F=this.requestOptions;F=m({url:this._url.path+"/query",content:x,callbackParamName:"callback",handleAs:G?"arraybuffer":"json",timeout:F&&F.timeout},F);x=[F];G&&x.push(w.loadPBFReader());
(new t(x)).then(function(H){C.dfd.isFulfilled()||(H=H[0],H[0]?v(H[1],G,z,D,C.dfd):A(H[1],D,C.dfd))});return F},rawExecute:function(x,z,D){z=z||{};x=this._encode(l.mixin({},this._url.query,{f:z.format||"json"},x.toJson(D.assembly&&D.assembly[0])));this.source&&(x.layer=u.toJson({source:this.source.toJson()}));this.gdbVersion&&(x.gdbVersion=this.gdbVersion);return(new b({url:this._url.path+"/query",query:x,requestOptions:this.requestOptions,pagination:z.pagination,pageSize:z.pageSize})).execute().then(null,
null,function(E){D.dfd.progress(E)}).then(l.hitch(this,function(E){this._successHandler([E],"onRawExecuteComplete",null,D.dfd)})).otherwise(l.hitch(this,function(E){this._errorHandler(E,null,D.dfd)}))},executeRelationshipQuery:function(x,z,D){x=this._encode(l.mixin({},this._url.query,{f:"json"},x.toJson()));var E=this._relationshipQueryHandler,C=this._errorHandler;this.gdbVersion&&(x.gdbVersion=this.gdbVersion);var y=new c(a._dfdCanceller),v=this.requestOptions,A=this._url.path;this.source&&void 0!==
this.source.mapLayerId&&null!==this.source.mapLayerId&&A.endsWith("/dynamicLayer")&&(A=A.slice(0,-13),A=A+"/"+this.source.mapLayerId);y._pendingDfd=m({url:A+"/queryRelatedRecords",content:x,callbackParamName:"callback",timeout:v&&v.timeout,load:function(G,F){E(G,F,z,D,y)},error:function(G){C(G,D,y)}},v);return y},executeForIds:function(x,z,D,E){var C=E.assembly;x=this._encode(l.mixin({},this._url.query,{f:"json",returnIdsOnly:!0},x.toJson(C&&C[0])));var y=this._executeForIdsHandler,v=this._errorHandler;
this.source&&(C={source:this.source.toJson()},x.layer=u.toJson(C));this.gdbVersion&&(x.gdbVersion=this.gdbVersion);C=this.requestOptions;return m({url:this._url.path+"/query",content:x,callbackParamName:"callback",timeout:C&&C.timeout,load:function(A,G){y(A,G,z,D,E.dfd)},error:function(A){v(A,D,E.dfd)}},C)},executeForCount:function(x,z,D,E){var C=E.assembly;x=this._encode(l.mixin({},this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},x.toJson(C&&C[0])));var y=this._countHandler,v=this._errorHandler;
this.source&&(C={source:this.source.toJson()},x.layer=u.toJson(C));this.gdbVersion&&(x.gdbVersion=this.gdbVersion);C=this.requestOptions;return m({url:this._url.path+"/query",content:x,callbackParamName:"callback",timeout:C&&C.timeout,load:function(A,G){y(A,G,z,D,E.dfd)},error:function(A){v(A,D,E.dfd)}},C)},executeForExtent:function(x,z,D,E){var C=E.assembly;x=this._encode(l.mixin({},this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},x.toJson(C&&C[0])));var y=this._extentHandler,v=
this._errorHandler;this.source&&(C={source:this.source.toJson()},x.layer=u.toJson(C));this.gdbVersion&&(x.gdbVersion=this.gdbVersion);C=this.requestOptions;return m({url:this._url.path+"/query",content:x,callbackParamName:"callback",timeout:C&&C.timeout,load:function(A,G){y(A,G,z,D,E.dfd)},error:function(A){v(A,D,E.dfd)}},C)},_handler:function(x,z,D,E,C){try{x&&z&&(x=w.pbfDeps.optimizedFeatures.convertToFeatureSet(w.pbfDeps.pbfQueryUtils.parsePBFFeatureQuery(x)));var y=new k(x);this._successHandler([y],
"onComplete",D,C)}catch(v){this._errorHandler(v,E,C)}},_relationshipQueryHandler:function(x,z,D,E,C){try{var y=x.geometryType,v=x.spatialReference,A={};e.forEach(x.relatedRecordGroups,function(G){var F={};F.geometryType=y;F.spatialReference=v;F.features=G.relatedRecords;F=new k(F);if(null!=G.objectId)A[G.objectId]=F;else for(var H in G)G.hasOwnProperty(H)&&"relatedRecords"!==H&&(A[G[H]]=F)});this._successHandler([A],"onExecuteRelationshipQueryComplete",D,C)}catch(G){this._errorHandler(G,E,C)}},_executeForIdsHandler:function(x,
z,D,E,C){try{this._successHandler([x.objectIds],"onExecuteForIdsComplete",D,C)}catch(y){this._errorHandler(y,E,C)}},_countHandler:function(x,z,D,E,C){try{var y=x.features,v=x.objectIds;if(v)var A=v.length;else{if(y)throw Error("Unable to perform query. Please check your parameters.");A=x.count}this._successHandler([A],"onExecuteForCountComplete",D,C)}catch(G){this._errorHandler(G,E,C)}},_extentHandler:function(x,z,D,E,C){try{x.extent&&(x.extent=new h(x.extent)),this._successHandler([x],"onExecuteForExtentComplete",
D,C)}catch(y){this._errorHandler(y,E,C)}}});w.loadPBFReader=function(){var x=new c;w.pbfDeps?x.resolve():f(["./support/pbfDeps"],function(z){w.pbfDeps=z;x.isFulfilled()||x.resolve()});return x.promise};n._createWrappers(w);l.setObject("tasks.QueryTask",w,d);return w})},"esri/tasks/query":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/jsonUtils ./SpatialRelationship ./QueryTask ./RelationshipQuery ./StatisticDefinition".split(" "),
function(f,B,l,e,c,u,t,d){var q=f(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=q.SPATIAL_REL_INTERSECTS},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnCentroid:null,returnDistinctValues:!1,returnExceededLimitFeatures:null,maxRecordCountFactor:null,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,fullText:null,distance:null,
units:null,resultOffset:null,resultRecordCount:null,resultType:null,cacheHint:null,sqlFormat:null,quantizationParameters:null,_units:{meters:"esriSRUnit_Meter",kilometers:"esriSRUnit_Kilometer",feet:"esriSRUnit_Foot",miles:"esriSRUnit_StatuteMile","nautical-miles":"esriSRUnit_NauticalMile","us-nautical-miles":"esriSRUnit_USNauticalMile"},toJson:function(m){var a={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,
geometryPrecision:this.geometryPrecision,sqlFormat:this.sqlFormat},h=m&&m.geometry||this.geometry,n=this.objectIds,r=this.outFields,k=this.outSpatialReference,g=this.groupByFieldsForStatistics,b=this.orderByFields,w=this.outStatistics;m=this.distance;h&&(a.geometry=h,a.geometryType=t.getJsonType(h),a.inSR=h.spatialReference.wkid||e.toJson(h.spatialReference.toJson()));n&&(a.objectIds=n.join(","));r&&(a.outFields=r.join(","));null!=this.returnCentroid&&(a.returnCentroid=this.returnCentroid);this.returnDistinctValues&&
(a.returnDistinctValues=!0);null!=this.returnExceededLimitFeatures&&(a.returnExceededLimitFeatures=this.returnExceededLimitFeatures);null!=this.maxRecordCountFactor&&(a.maxRecordCountFactor=this.maxRecordCountFactor);g&&(a.groupByFieldsForStatistics=g.join(","));b&&(a.orderByFields=b.join(","));if(w){var x=[];l.forEach(w,function(z){x.push(z.toJson())});a.outStatistics=e.toJson(x)}k?a.outSR=k.wkid||e.toJson(k.toJson()):h&&(a.outSR=h.spatialReference.wkid||e.toJson(h.spatialReference.toJson()));h=
this.timeExtent;a.time=h?h.toJson().join(","):null;(h=this.relationParam)&&this.spatialRelationship===q.SPATIAL_REL_RELATION&&(a.relationParam=h);m&&(a.distance=this.distance,this.hasOwnProperty("units")?a.units=this._units[this.units]||this._units.meters:a.units=this._units.meters);this.hasOwnProperty("start")&&(a.resultOffset=this.start,a.resultRecordCount=10,""===a.where&&(a.where="1\x3d1"));this.hasOwnProperty("num")&&(a.resultRecordCount=this.num);a.resultType=this.resultType;null!=this.cacheHint&&
(a.cacheHint=this.cacheHint);a.fullText=this.fullText?e.toJson(this.fullText):null;a.pixelSize=this.pixelSize?e.toJson(this.pixelSize.toJson()):null;a.multipatchOption=this.multipatchOption;this.quantizationParameters&&(a.quantizationParameters=e.toJson(this.quantizationParameters));a._ts=this._ts;return a}});B.mixin(q,d);B.setObject("tasks.Query",q,u);return q})},"esri/tasks/SpatialRelationship":function(){define(["dojo/_base/lang","dojo/has","../kernel"],function(f,B,l){B={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",
SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};f.setObject("tasks._SpatialRelationship",B,l);return B})},"esri/tasks/RelationshipQuery":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/json","dojo/has","../kernel"],function(f,B,l,e,c){f=f(null,{declaredClass:"esri.tasks.RelationshipQuery",definitionExpression:"",relationshipId:null,returnGeometry:!1,objectIds:null,outSpatialReference:null,outFields:null,orderByFields:null,toJson:function(){var u={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},t=this.objectIds,
d=this.outFields,q=this.outSpatialReference,m=this.orderByFields;t&&(u.objectIds=t.join(","));d&&(u.outFields=d.join(","));q&&(u.outSR=q.wkid||l.toJson(q.toJson()));m&&(u.orderByFields=m.join(","));u._ts=this._ts;return u}});B.setObject("tasks.RelationshipQuery",f,c);return f})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,e){f=f(null,{declaredClass:"esri.tasks.StatisticDefinition",toJson:function(){return{statisticType:this.statisticType,
onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}});B.setObject("tasks.StatisticDefinition",f,e);return f})},"esri/layers/GraphicsLayer":function(){define("require dojo/_base/declare dojo/_base/Deferred dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/window dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom dojox/gfx dojox/gfx/matrix ./gfxSniff!esri-svg?dojox/gfx/filters ./layer ./support/webglUtils ./support/WebGLSurface ../kernel ../lang ../sniff ../Color ../domUtils ../symbols/MarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols/utils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/mathUtils ../geometry/screenUtils ../PluginTarget ./gfxSniff!esri-svg?dojox/gfx/svgext".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E,C,y,v,A,G,F,H,L,M){var Q=-1!==h.renderer.toLowerCase().indexOf("svg"),S=-1!==h.renderer.toLowerCase().indexOf("canvas"),I=S?"canvas-2d":h.renderer,P=9>z("ie");t=10===z("ie");var J=void 0===z("ie")&&7==z("trident"),U=t||J,Y=z("esri-touch"),aa=!!z("chrome"),la=g.isWebGLEnabled(),T=Q&&z("esri-will-change"),N=la||S;g=B(null,{declaredClass:"esri.layers._GraphicsContainer",_setMap:function(K,W){var da=this._connects=[];this._map=K;this._useWillChange=
this._useGlobalTransform="css-transforms"===K.navigationMode&&T;if(N){var fa=q.create("div",{style:{position:"absolute",overflow:"visible"}},W);this._surface={getEventSource:function(){return fa}};S&&(da.push(e.connect(fa,"onmousedown",this,this._canvasDownHandler)),da.push(e.connect(fa,"onmouseup",this,this._canvasUpHandler)),da.push(e.connect(fa,"onclick",this,this._canvasClickHandler)));la&&(this._webglSurface=new b({map:K,node:fa}))}else fa=(this._surface=h.createSurface(W,K.width,K.height)).getEventSource(),
this._useWillChange&&m.set(fa,"will-change","transform"),m.set(fa=P?fa.parentNode:fa,{overflow:"visible",position:"absolute"});da.push(e.connect(K,"onResize",this,"_onResizeHandler"));this._useGlobalTransform&&(da.push(e.connect(K,"onPan",this,"_onPanHandler")),da.push(e.connect(K,"onPanEnd",this,"_onPanEndHandler")),da.push(e.connect(K,"onExtentChange",this,"_onExtentChangeHandler")));return fa},_reorderLayer:function(K,W,da){W=W.getEventSource();N&&"svg"===K.surfaceType&&(W=W.parentNode);q.place(W,
this._surface.getEventSource(),da)},_onPanHandler:function(K,W){var da=this._map.__visibleRect;K=da.x+W.x;W=da.y+W.y;this._panDx=K;this._panDy=W;N||m.set(this._surface.getEventSource(),w._css.names.transform,w._css.translate(K,W))},_onPanEndHandler:function(K,W){W=this._map.__visibleRect;K=W.x;W=W.y;this._panDx=K;this._panDy=W;N||m.set(this._surface.getEventSource(),w._css.names.transform,w._css.translate(K,W))},_onExtentChangeHandler:function(K,W,da,fa){da&&(this._panDy=this._panDx=0,N||m.set(this._surface.getEventSource(),
w._css.names.transform,w._css.translate(0,0)))},_getTransform:function(){return{dx:this._panDx||0,dy:this._panDy||0}},_onResizeHandler:function(K,W,da){K=this._surface.getEventSource();var fa=this._map,ha;P&&m.set(K=K.parentNode,{width:W+"px",height:da+"px",clip:"rect(0px "+W+"px "+da+"px 0px)"});d.set(K,"width",W);d.set(K,"height",da);this._surface.declaredClass||u.forEach(K.childNodes,function(ra){d.set(ra,"width",W);d.set(ra,"height",da)});fa.loaded&&(fa.graphics.suspended||(fa.graphics._resized=
!0),u.forEach(fa.graphicsLayerIds,function(ra){ha=fa.getLayer(ra);ha.suspended||(ha._resized=!0,ha._childLayer&&(ha._childLayer._resized=!0));ha._updateSVGFilters(null,null,W,da)}),fa.graphics._updateSVGFilters(null,null,W,da),fa._labels&&fa._labels._updateSVGFilters(null,null,W,da))},_cleanUp:function(){u.forEach(this._connects,e.disconnect,e);this._map=this._surface=null},_processEvent:function(K){var W=this._map;K.screenPoint=new G(K.pageX-W.position.x,K.pageY-W.position.y);K.mapPoint=W.toMap(K.screenPoint)},
_canvasDownHandler:function(K){this._processEvent(K);this._downPt=K.screenPoint.x+","+K.screenPoint.y},_canvasUpHandler:function(K){this._processEvent(K);this._upPt=K.screenPoint.x+","+K.screenPoint.y},_tolerance:15,_isPrimaryMatch:function(K,W,da,fa){if(!K.visible||!W)return!1;var ha=W.getTransformedBoundingBox();if(ha){var ra=new F(ha[0].x,ha[0].y,ha[2].x,ha[2].y);delete ra.spatialReference;return Y?ra.intersects(da):ra.contains(fa)}return u.some(W.children||[],function(za){ha=za.getTransformedBoundingBox();
ra=new F(ha[0].x,ha[0].y,ha[2].x,ha[2].y);delete ra.spatialReference;return Y?ra.intersects(da):ra.contains(fa)})},_canvasClickHandler:function(K){if(this._downPt&&this._upPt&&this._downPt===this._upPt){this._processEvent(K);var W=this._map,da=u.map(W.graphicsLayerIds,function(ia){return W.getLayer(ia)});da.push(W.graphics);da.reverse();da=u.filter(da,function(ia){return ia.loaded&&!ia.hasWebGLSurface()&&ia._mouseEvents&&!ia.suspended&&(!x.isDefined(ia.opacity)||0<ia.opacity)});var fa=K.screenPoint,
ha=this._tolerance,ra=fa.x-ha,za=fa.y+ha,Da=fa.x+ha;ha=fa.y-ha;var va=new F(ra,ha,Da,za);ra=W.toMap(new G(ra,za));Da=W.toMap(new G(Da,ha));za=ra.spatialReference._getInfo();var Ga=new F(F.prototype._normalizeX(ra.x,za).x,ra.y,F.prototype._normalizeX(Da.x,za).x,Da.y,ra.spatialReference),ba;delete va.spatialReference;u.some(da,function(ia){ia=u.filter(ia.graphics,function(Aa){return this._isPrimaryMatch(Aa,Aa.getDojoShape(),va,fa)||!(!Aa._bgShape||!this._isPrimaryMatch(Aa,Aa._bgShape,va,fa))},this);
ia.reverse();if(0<ia.length){var wa;u.some(ia,function(Aa){return Aa.geometry&&Ga.intersects(Aa.geometry)?(wa=Aa,!0):!1});if(wa)return ba=wa,!0}return!1},this);ba&&(da=ba.getLayer())&&(K.graphic=ba,da.onClick(K))}}});k=B(k,{declaredClass:"esri.layers._GraphicsLayer",managedSuspension:!0,surfaceType:I,webglEnabled:la,renderer:null,_eventMap:{"graphic-add":["graphic"],"graphic-remove":["graphic"],"renderer-change":["renderer"]},_suspendGraphics:!1,constructor:function(K,W){K=K||{};if(c.isString(K)||
c.isObject(K)&&(K.layerDefinition||K.query))K=W;this._params=c.mixin({displayOnPan:!0,drawMode:!0,styling:!0},K);W=this._params.dataAttributes;"string"===typeof W&&(W=[W]);this.styling=Q?this._params.styling:!0;this.dataAttributes=W;this.infoTemplate=K&&K.infoTemplate;this.graphics=[];this._draw=c.hitch(this,this._draw);this._refresh=c.hitch(this,this._refresh);this._acquireSVGMarker=c.hitch(this,this._acquireSVGMarker);this._evalSurfaceType=c.hitch(this,this._evalSurfaceType);this._setSurfaceType=
c.hitch(this,this._setSurfaceType);this.setWebGLEnabled(null!=this._params.webglEnabled?this._params.webglEnabled:this.webglEnabled);this.registerConnectEvents()},getNode:function(){return this._div&&this._div.getEventSource()},setDrawMode:function(K){this._params.drawMode=K},suspendGraphics:function(K){this._suspendGraphics=K;u.forEach(this.graphics,function(W){W._suspended=K})},setWebGLEnabled:function(K){var W=this.webglEnabled;this.webglEnabled=(K||!1)&&la;W!==this.webglEnabled&&(this._evalSurfaceType(),
this.onWebGLEnabledChange())},hasWebGLSurface:function(){return"webgl"===this.surfaceType},_getSurfaceType:function(K){return K&&"webgl"===K.surfaceType?"webgl":I},_evalSurfaceType:function(K){la&&(K?this._setSurfaceType():null==this._evalSurfaceTimerHandle&&(this._evalSurfaceTimerHandle=setTimeout(this._setSurfaceType,0)))},_hasPendingSurfaceEval:function(){return!!this._evalSurfaceTimerHandle},_setSurfaceType:function(){clearTimeout(this._evalSurfaceTimerHandle);this._evalSurfaceTimerHandle=null;
var K=this._canUseWebGLSurface()?"webgl":I;this.surfaceType!==K?(this.surfaceType=K,this._handleSurfaceChange(),this.onSurfaceChange()):this._pendingRedraw&&this._redraw()},_handleSurfaceChange:function(){this._cancelWebGLDepsLoad();this._webglDepsPromise=this._prepareToAttach(this._map);this._webglDepsPromise.always(c.hitch(this,function(K){this._webglDepsPromise=null;K&&"cancel"===K.dojoType||this._evalSurface()}))},_cancelWebGLDepsLoad:function(){this._webglDepsPromise&&!this._webglDepsPromise.isFulfilled()&&
this._webglDepsPromise.cancel();this._webglDepsPromise=null},_evalSurface:function(){var K=this._map,W=this._div;K&&W&&this._getSurfaceType(W)!==this.surfaceType&&(K._detachGraphicsLayer(this),K._attachGraphicsLayer(this))},_canUseWebGLSurface:function(K){K=K||this._map;return this.webglEnabled&&(!K||K.webglEnabled&&(K.ownsWebGLContext(this)||K.isWebGLContextAvailable()))&&this._params.drawMode&&this._isWebGLCompatible()},_isWebGLCompatible:function(){return!1},_prepareToAttach:function(K){var W=
new l;!this.webglDeps&&this._canUseWebGLSurface(K)?f(["./support/webglDeps"],c.hitch(this,function(da){this.webglDeps=da;W.isFulfilled()||W.resolve()})):W.resolve();return W.promise},_setMap:function(K,W){this.inherited(arguments);this._map=K;this._evalSurfaceType(!0);this._webglChangeMapHandle=K.on("webgl-enabled-change",c.hitch(this,function(){this._evalSurfaceType()}));this._wrap=K.wrapAround180;this._srInfo=K.spatialReference._getInfo();this._svgFilters={};this._lineMarkers={};if(this.hasWebGLSurface())K.acquireWebGLContext(this),
this._div=K._gc._webglSurface.createRenderer(this.webglDeps.WebGLRenderer,K.width,K.height,this);else{if("svg"===this.surfaceType)if(N){W=h.createSurface(W.getEventSource(),K.width,K.height);var da=W.getEventSource();m.set(da,{position:"absolute",overflow:"visible",pointerEvents:"none"});K._gc._useWillChange&&m.set(da,"will-change","transform");this._div=W.createGroup();m.set(this._div.getEventSource(),"pointer-events","auto")}else this._div=W.createGroup();else W=h.createSurface(W.getEventSource(),
K.width,K.height),m.set(W.rawNode,"position","absolute"),this._div=W.createGroup(),this._renderProto=this._div.constructor.prototype._render,this._div._render=c.hitch(this,this._canvasRender);this._bgGroup=this._div.createGroup()}this._div.getEventSource().id=this.id+"_layer";this._initOpacity();return this._div},_unsetMap:function(K,W){K.releaseWebGLContext(this);"webgl"===this._div.surfaceType?K._gc._webglSurface.destroyRenderer(this._div):(u.forEach(this.graphics,function(da){da._shape=null}),
"svg"===this.surfaceType?N?(W=this._div.parent,this._div.clear(),W.remove(this._div),q.destroy(this._div.getEventSource()),q.destroy(W.getEventSource())):(this._div.clear(),W.remove(this._div),q.destroy(this._div.getEventSource())):(W=this._div.getParent(),W._parent={},q.destroy(W.rawNode),W.destroy()));this._map=this._div=this._svgFilters=this._lineMarkers=null;this._pendingRedraw=!1;clearTimeout(this._wakeTimer);this._wakeTimer=null;clearTimeout(this._evalSurfaceTimerHandle);this._evalSurfaceTimerHandle=
null;this._webglChangeMapHandle&&this._webglChangeMapHandle.remove();this._cancelWebGLDepsLoad();this._disableDrawConnectors();this.inherited(arguments)},_initOpacity:function(){var K=this.opacity;x.isDefined(K)&&1>K&&this.setOpacity(K,!0)},_onZoomStartHandler:function(){this.hasWebGLSurface()||E.hide(this._div.getEventSource())},_onExtentChangeHandler:function(K,W,da,fa){clearTimeout(this._wakeTimer);this._wakeTimer=null;da?(K=this._map.__visibleRect,W=this._div,this._evalSDRenderer(),this._refresh(!0),
this._params._child||this._updateTransform(W,K.x,K.y,!0),this._renderProto&&W.surface.pendingRender?this._dirty=!0:this.suspended||E.show(W.getEventSource())):this._resized&&(this._resized=!1,this._refresh(!1));if(0<this.graphics.length)this.onUpdate()},_canvasRender:function(){var K=this._div;this._dirty&&(delete this._dirty,this.suspended||E.show(K.getEventSource()));return this._renderProto.apply(K,arguments)},_refresh:function(K){if(!this.hasWebGLSurface()){var W=this.graphics,da=W.length,fa,
ha=this._draw;for(fa=0;fa<da;fa++)ha(W[fa],K)}},refresh:function(){this._refresh(!0)},_redraw:function(){this._pendingRedraw=!1;this.hasWebGLSurface()?this._div&&this._div.redraw():this._refresh(!0)},redraw:function(){this._hasPendingSurfaceEval()?this._pendingRedraw=!0:this._redraw()},hasLocalNavigationTransform:function(){return!(this._map&&this._map._gc._useGlobalTransform)},getNavigationTransform:function(){var K={dx:0,dy:0};this._map&&(this.hasLocalNavigationTransform()?this._div&&!this.hasWebGLSurface()&&
(K=this._div.getTransform()):K=this._map._gc._getTransform());return K},_onPanHandler:function(K,W){this._panDx=W.x;this._panDy=W.y;K=this._map.__visibleRect;this._updateTransform(this._div,K.x+W.x,K.y+W.y);J&&this._updateSVGMarkers()},_onPanEndUpdateHandler:function(K,W){K=this._map.__visibleRect;this._params._child||W.x===this._panDx&&W.y===this._panDy?(this._updateSVGFilters(-K.x,-K.y),this._updateSVGMarkers()):this._updateTransform(this._div,K.x,K.y,!0);this._refresh(!1);if(this.graphics.length)this.onUpdate()},
_onPanStartHandler:function(){E.hide(this._div.getEventSource())},_onPanEndHandler:function(){var K=this._map.__visibleRect,W=this._div;this._updateTransform(W,K.x,K.y,!0);this._refresh(!1);this._renderProto&&W.surface.pendingRender?this._dirty=!0:E.show(W.getEventSource());if(this.graphics.length)this.onUpdate()},_updateTransform:function(K,W,da,fa){this.hasWebGLSurface()||(this.hasLocalNavigationTransform()?K.setTransform(n.translate({x:W,y:da})):N&&m.set(this._div.parent.getEventSource(),w._css.names.transform,
w._css.translate(W,da)),fa&&(this._updateSVGFilters(-W,-da),this._updateSVGMarkers()))},onSuspend:function(){this.inherited(arguments);E.hide(this._div.getEventSource());clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(K){this.inherited(arguments);K.firstOccurrence&&this._evalSDRenderer();this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(c.hitch(this,function(){this.suspended||this._map.__zooming||this._onExtentChangeHandler(null,
null,!0)}),0)},_enableDrawConnectors:function(){var K=this._map,W=e.connect;this._disableDrawConnectors();this._params.displayOnPan?(this._params._child||(this._onPanHandler_connect=W(K,"onPan",this,"_onPanHandler")),this._onPanEndHandler_connect=W(K,"onPanEnd",this,"_onPanEndUpdateHandler")):(this._onPanStartHandler_connect=W(K,"onPanStart",this,"_onPanStartHandler"),this._onPanEndHandler_connect=W(K,"onPanEnd",this,"_onPanEndHandler"));this._onZoomStartHandler_connect=W(K,"onZoomStart",this,"_onZoomStartHandler");
this._onExtentChangeHandler_connect=W(K,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var K=e.disconnect;K(this._onExtentChangeHandler_connect);K(this._onZoomStartHandler_connect);K(this._onPanHandler_connect);K(this._onPanStartHandler_connect);K(this._onPanEndHandler_connect);this._onExtentChangeHandler_connect=this._onZoomStartHandler_connect=this._onPanHandler_connect=this._onPanStartHandler_connect=this._onPanEndHandler_connect=null},_updateExtent:function(K){var W=
K.geometry;if(!W)K._extent=null;else if(!(K._extent=W.getExtent())){if("esri.geometry.Point"===W.declaredClass){var da=W.x;var fa=W.y}else if("esri.geometry.Multipoint"===W.declaredClass)da=W.points[0][0],fa=W.points[0][1];else{K._extent=null;return}K._extent=new F(da,fa,da,fa,W.spatialReference)}},_intersects:function(K,W,da){var fa=K.spatialReference,ha=W.spatialReference,ra=fa&&ha&&!fa.equals(ha)&&fa._canProject(ha)&&4326===ha.wkid;if(this._wrap&&!da){da=[];fa=K._getFrameWidth();var za=this._srInfo,
Da=K._clip?K._getAvailExtent():K.extent,va,Ga=[];var ba=W._partwise;ra&&(Da=K.geographicExtent,za=ha._getInfo());K=Da._getParts(za);if(ba&&ba.length)for(W=[],ha=0,ra=ba.length;ha<ra;ha++)W=W.concat(ba[ha]._getParts(za));else W=W._getParts(za);ha=0;for(ra=W.length;ha<ra;ha++){var ia=W[ha];za=0;for(Da=K.length;za<Da;za++){var wa=K[za];if(wa.extent.intersects(ia.extent))for(ba=0,va=ia.frameIds.length;ba<va;ba++)da.push((wa.frameIds[0]-ia.frameIds[ba])*fa)}}ha=0;for(ra=da.length;ha<ra;ha++)ba=da[ha],
u.indexOf(da,ba)===ha&&Ga.push(ba);return Ga.length?Ga:null}return(ra?K.geographicExtent:K.extent).intersects(W)?[0]:null},_defaultMarker:{type:"simplemarkersymbol",style:"square",size:1,xoffset:0,yoffset:0,angle:0},_draw:function(K,W){if(!this.hasWebGLSurface()&&this._params.drawMode&&this._map&&!this.suspended&&!this._map.__zooming&&!this._resized)try{var da=K._extent,fa,ha,ra=!Q||this.styling,za=Q&&this.dataAttributes,Da=K.getDojoShape(),va;if(!K._suspended&&K.visible&&da&&(fa=this._intersects(this._map,
da,K.geometry._originOnly))&&(ha=ra?this._getSymbol(K):this._defaultMarker)){if(K._offsets&&K._offsets.join(",")===fa.join(",")?va=!0:K._offsets=fa,!Da||W||!va){var Ga=K.geometry.type;W={graphic:K};var ba=K._bgShape,ia=ra&&!K.symbol?this._getRenderer(K):null,wa=ia&&ia.backgroundFillSymbol;if("point"===Ga)this._isInvalidShape(ha,Da)&&this._removeShape(K),K._shape=this._drawPoint(this._div,K.geometry,ha,K.getDojoShape(),fa,ia,K),ra&&this._symbolizePoint(K.getDojoShape(),ha,ia,K);else if("multipoint"===
Ga)this._drawMarkers(K,ha,fa,ia),ra&&this._symbolizeMarkers(K,ha,ia);else{var Aa;Ga=ha;var Fa;ra&&(Ga=(Aa="simplemarkersymbol"===ha.type||"picturemarkersymbol"===ha.type||"textsymbol"===ha.type?ha:null)?wa:ha);if(ra&&Ga&&-1<Ga.type.indexOf("fillsymbol")){var O=this._bgGroup;var ya=!(!O||!Aa)}ba&&!ya&&this._removeBgShape(K);if(Ga){!ya&&(this._isInvalidShape(Ga,K._shape)||K._shape&&K._shape._isCentroidMarker)&&this._removeShape(K,!1);if(Fa=this._drawShape(K,fa,O||this._div,ya?ba:K.getDojoShape()))Fa._isCentroidMarker=
!1;ra&&this._symbolizeShape(Fa,Ga,ia,Ga===wa,K);K[ya?"_bgShape":"_shape"]=Fa}if(Aa){(this._isInvalidShape(Aa,K._shape)||K._shape&&!K._shape._isCentroidMarker)&&this._removeShape(K,!1);var Ha=K.geometry.getCentroid();if(Fa=Ha&&this._drawPoint(this._div,Ha,Aa,K._shape,fa,ia,K))Fa._isCentroidMarker=!0,this._symbolizePoint(Fa,Aa,ia,K);K._shape=Fa}}S||(K._bgShape&&this._initNode(K,K._bgShape,K._bgShape!==ba,W,za),K._shape&&this._initNode(K,K._shape,K._shape!==Da,W,za));K._applyDataAttrs();W.node=K.getNode();
this.onGraphicDraw(W)}}else Da&&this._removeShape(K)}catch(ea){this._errorHandler(ea,K)}},_initNode:function(K,W,da,fa,ha){if(W=W&&W.getNode())W.e_graphic=K,this._addDataAttrs(K,ha,W),da&&(fa.node=W,this.onGraphicNodeAdd(fa))},_removeShape:function(K,W,da){var fa=K.getDojoShape(),ha=fa&&fa.getNode();fa&&!da&&(fa.removeShape(),fa.destroy());K._shape=K._offsets=null;!1!==W&&this._removeBgShape(K,da);if(ha&&(ha.e_graphic=null,!S))this.onGraphicNodeRemove({graphic:K,node:ha})},_removeBgShape:function(K,
W){var da=K._bgShape,fa=da&&da.getNode();da&&!W&&(da.removeShape(),da.destroy());K._bgShape=null;if(fa&&(fa.e_graphic=null,!S))this.onGraphicNodeRemove({graphic:K,node:fa})},_addDataAttrs:function(K,W,da){var fa=K.attributes,ha,ra=W?W.length:0,za=this._getRenderer(K);if(da&&fa){for(ha=0;ha<ra;ha++)(da=W[ha])&&K.attr("data-"+da,fa[da]);!this.styling&&za&&(za.getBreakIndex?(W=za.getBreakIndex(K),K.attr("data-class-break",-1!==W?W:null)):za.getUniqueValueInfo&&(W=za.getUniqueValueInfo(K),K.attr("data-unique-value",
W?W.value:null)))}},_drawShape:function(K,W,da,fa){K=K.geometry;var ha=K.type,ra=this._map,za=ra.extent,Da=ra.width,va=ra.height;ra=ra.__visibleRect;var Ga=[],ba;var ia="extent"===ha;if("rect"===ha||ia)Ga={x:0,y:0,spatialReference:K.spatialReference},Ga.x=ia?K.xmin:K.x,Ga.y=ia?K.ymax:K.y,ha=L.toScreenPoint(za,Da,va,Ga),Ga.x=ia?K.xmax:K.x+K.width,Ga.y=ia?K.ymin:K.y+K.height,K=L.toScreenPoint(za,Da,va,Ga),W={x:ha.x-ra.x+W[0],y:ha.y-ra.y,width:Math.abs(K.x-ha.x),height:Math.abs(K.y-ha.y)},0===W.width&&
(W.width=1),0===W.height&&(W.height=1),fa=this._drawRect(da,fa,W);else if("polyline"===ha||"polygon"===ha){ia=0;for(ba=W.length;ia<ba;ia++)Ga=Ga.concat(L._toScreenPath(za,Da,va,K,-ra.x+W[ia],-ra.y));fa=this._drawPath(da,fa,Ga);this._rendererLimits&&("polyline"===ha?this._clipPolyline(fa,K):this._clipPolygon(fa,K))}return fa},_drawRect:function(K,W,da){return W?W.setShape(da):K.createRect(da)},_drawImage:function(K,W,da){return W?W.setShape(da):K.createImage(da)},_drawCircle:function(K,W,da){return W?
W.setShape(da):K.createCircle(da)},_drawPath:function(){return P?function(K,W,da,fa){da=fa?da:da.join(" ");if(W)return W.setShape(da);W=K.createObject(fa?h.Path:h.EsriPath,da);K._overrideSize(W.getEventSource());return W}:function(K,W,da,fa){da=fa?da:da.join(" ");return W?W.setShape(da):K.createPath(da)}}(),_drawText:function(K,W,da){return W?W.setShape(da):K.createText(da)},_evalSDRenderer:function(K){var W=this._map,da=this.renderer,fa,ha=this._rndForScale;W&&W.loaded&&da&&da.getRendererInfo&&(fa=
"zoom"===da.rangeType?da.getRendererInfoByZoom(W.getZoom()):da.getRendererInfoByScale(W.getScale()));this._rndForScale=fa&&fa.renderer;K||this._rndForScale==ha||this.emit("renderer-change",{renderer:this._rndForScale})},_getRenderer:function(K){var W=this._rndForScale||this.renderer;K&&W&&W.getObservationRenderer&&(W=W.getObservationRenderer(K));return W},_getSymbol:function(K){var W=this._getRenderer();return K.symbol||W&&W.getSymbol(K)},_getVariable:function(K,W,da){if(K)var fa=(K=K.getVisualVariablesForType(W,
da))&&K[0];return fa},_applyOpacity:function(K,W,da,fa){W=W.getOpacity(fa,{opacityInfo:da});null!=W&&(K=new D(K),K.a=W);return K},_symbolizeShape:function(K,W,da,fa,ha){var ra=W.getStroke(),za=W.getFill(),Da=W.type,va=-1!==Da.indexOf("linesymbol"),Ga=-1!==Da.indexOf("fillsymbol")?null:this._getVariable(da,"sizeInfo",!1),ba=this._getVariable(da,"colorInfo",!1),ia=this._getVariable(da,"opacityInfo",!1),wa=va?"none"!==W.style:W.outline&&"none"!==W.outline.style,Aa=va?null:this._getVariable(da,"sizeInfo",
"outline");Ga=(Ga=fa?Aa:Aa||Ga)?da.getSize(ha,{sizeInfo:Ga,resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):null;fa&&(ba=ia=null);if((ba||ia)&&"picturefillsymbol"!==Da)if(va){var Fa=ra&&ra.color;ba&&(Fa=da.getColor(ha,{colorInfo:ba})||Fa);Fa&&ia&&(Fa=this._applyOpacity(Fa,da,ia,ha))}else if(za&&za.toCss){var O=za;ba&&(O=da.getColor(ha,{colorInfo:ba})||O);O&&ia&&(O=this._applyOpacity(O,da,ia,ha))}K.setStroke(!wa||null==Ga&&!Fa?ra:c.mixin({},ra,null!=Ga?{width:Ga}:null,Fa&&
{color:Fa})).setFill(O||za);va&&v.applyLineMarker(K,W,Fa,this._acquireSVGMarker)},_smsToPath:function(){return P?function(K,W,da,fa,ha,ra,za,Da,va){switch(W){case K.STYLE_SQUARE:return["M",ha+","+za,"L",ra+","+za,ra+","+Da,ha+","+Da,"X","E"];case K.STYLE_CROSS:return["M",da+","+za,"L",da+","+Da,"M",ha+","+fa,"L",ra+","+fa,"E"];case K.STYLE_X:return["M",ha+","+za,"L",ra+","+Da,"M",ha+","+Da,"L",ra+","+za,"E"];case K.STYLE_DIAMOND:return["M",da+","+za,"L",ra+","+fa,da+","+Da,ha+","+fa,"X","E"];case K.STYLE_TARGET:return["M",
ha+","+za,"L",ra+","+za,ra+","+Da,ha+","+Da,ha+","+za,"M",ha-va+","+fa,"L",ha+","+fa,"M",da+","+(za-va),"L",da+","+za,"M",ra+va+","+fa,"L",ra+","+fa,"M",da+","+(Da+va),"L",da+","+Da,"E"]}}:function(K,W,da,fa,ha,ra,za,Da,va){switch(W){case K.STYLE_SQUARE:return["M",ha+","+za,ra+","+za,ra+","+Da,ha+","+Da,"Z"];case K.STYLE_TRIANGLE:return["M",da+","+za,ra+","+Da,ha+","+Da,"Z"];case K.STYLE_CROSS:return["M",da+","+za,da+","+Da,"M",ha+","+fa,ra+","+fa];case K.STYLE_X:return["M",ha+","+za,ra+","+Da,"M",
ha+","+Da,ra+","+za];case K.STYLE_DIAMOND:return["M",da+","+za,ra+","+fa,da+","+Da,ha+","+fa,"Z"];case K.STYLE_TARGET:return K=["M",ha+","+za,ra+","+za,ra+","+Da,ha+","+Da,ha+","+za],va&&K.push("M",ha-va+","+fa,ha+","+fa,"M",da+","+(za-va),da+","+za,"M",ra+va+","+fa,ra+","+fa,"M",da+","+(Da+va),da+","+Da),K}}}(),_pathStyles:{square:1,cross:1,x:1,diamond:1,target:1},_typeMaps:{picturemarkersymbol:"image",picturefillsymbol:"path",simplefillsymbol:"path",simplelinesymbol:"path",cartographiclinesymbol:"path",
textsymbol:"text"},_isInvalidShape:function(K,W){W=W&&W.shape&&W.shape.type;var da=K&&K.type;K=K&&K.style;"rect"===W&&(W="path");da&&(K=this._typeMaps[da]||K);this._pathStyles[K]&&(K="path");return"shieldlabelsymbol"===da?!0:!(!W||!K||W===K)},_reArialFont:/\s*(^|,)\s*arial\s*(,|$)\s*/i,_fallbackFont:"Arial",_drawPoint:function(K,W,da,fa,ha,ra,za){var Da=da.type,va=this._map,Ga=va.__visibleRect,ba=L.toScreenPoint(va.extent,va.width,va.height,W).offset(-Ga.x+ha[0],-Ga.y);Ga=ba.x;var ia=ba.y;W=[];var wa=
this._getVariable(ra,"rotationInfo",!1);wa=wa?ra.getRotationAngle(za,{rotationInfo:wa}):null;var Aa=this._getVariable(ra,"sizeInfo",!1);va=null!=za.size?za.size:Aa&&ra.getSize(za,{sizeInfo:Aa,shape:da.style,resolution:va.getResolutionInMeters(),scale:va.getScale()});wa&&W.push(n.rotategAt(wa,ba));if(0!==da.xoffset||0!==da.yoffset){var Fa=n.translate(da.xoffset,-da.yoffset);W.push(Fa)}0!==da.angle&&W.push(n.rotategAt(da.angle,ba));if("simplemarkersymbol"===Da){var O=da.style;ra=Math.round;null!=va?
Fa&&(null!=Fa.dx&&(Fa.dx=Fa.dx/da.size*va),null!=Fa.dy&&(Fa.dy=Fa.dy/da.size*va)):va=da.size;switch(O){case y.STYLE_SQUARE:case y.STYLE_TRIANGLE:case y.STYLE_CROSS:case y.STYLE_X:case y.STYLE_DIAMOND:da=isNaN(va)?16:va/2;O=this._drawPath(K,fa,this._smsToPath(y,O,Ga,ia,ra(Ga-da),ra(Ga+da),ra(ia-da),ra(ia+da)));break;case y.STYLE_TARGET:za=da._targetWidth/2;Fa=da._targetHeight/2;O=this._drawPath(K,fa,this._smsToPath(y,O,Ga,ia,ra(Ga-za),ra(Ga+za),ra(ia-Fa),ra(ia+Fa),da._spikeSize));break;case y.STYLE_PATH:O=
this._drawPath(K,fa,da.path,!0);da=O.getBoundingBox();K=this._getScaleMatrix(da,va);1===K.xx&&1===K.yy||W.push(n.scaleAt(K.xx,K.yy,ba));W.push(n.translate(-(da.x+da.width/2)+Ga,-(da.y+da.height/2)+ia));break;default:da=isNaN(va)?16:va/2,O=this._drawCircle(K,fa,{cx:Ga,cy:ia,r:da})}}else if("shieldlabelsymbol"===Da)O=da.width,ba=da.height,fa=K.createGroup(),O=K.createImage({x:Ga-O/2,y:ia-ba/2,width:O,height:ba,src:da.url}),fa.add(O),null!=da.font&&(ia+=.2*da.getHeight(),K=K.createText({type:"text",
text:da.text,x:Ga,y:ia,align:"middle",decoration:da.decoration,rotated:da.rotated,kerning:da.kerning}),K.setFont(da.font),K.setFill(da.color),fa.add(K)),O=fa;else if("picturemarkersymbol"===Da){if(null==va?(O=da.width,ba=da.height):(ba=va,O=da.width/da.height*ba,Fa&&(null!=Fa.dx&&(Fa.dx=Fa.dx/da.width*O),null!=Fa.dy&&(Fa.dy=Fa.dy/da.height*ba))),O=this._drawImage(K,fa,{x:Ga-O/2,y:ia-ba/2,width:O,height:ba,src:da.url}),Q&&(K=O.getNode()))da=(da=this._getVariable(ra,"opacityInfo",!1))?ra.getOpacity(za,
{opacityInfo:da}):null,null!=da?K.setAttribute("opacity",da):K.setAttribute("opacity",1)}else if("textsymbol"===Da){if(ra=da.font){O=null!=va;za=ra.family&&!this._reArialFont.test(ra.family);if(O||za||S)ra=new ra.constructor(ra.toJson());O&&ra.setSize(va);S&&(ra.size+="px");za&&ra.setFamily(ra.family+","+this._fallbackFont)}O=this._drawText(K,fa,{type:"text",text:da.text,x:Ga,y:ia,align:da.getSVGAlign(),decoration:da.decoration||ra&&ra.decoration,rotated:da.rotated,kerning:da.kerning});ra&&O.setFont(ra);
Q&&(K=O.getNode(),Ga=da.getSVGBaseline(),ia=da.getSVGBaselineShift(),K&&(K.setAttribute("dominant-baseline",Ga),ia&&K.setAttribute("baseline-shift",ia),this._applyHalo(O,da.haloColor,da.haloSize)))}O.setTransform(n.multiply(W));O._wrapOffsets=ha;return O},_acquireSVGMarker:function(K,W,da,fa){K=this._getSVGMarkerId(W,fa);var ha=this._getSVGMarker(K);ha||(ha=v.createSVGMarker(W,K,da,fa),this._div.getParent().defNode.appendChild(ha),this._lineMarkers[K]=ha);return ha},_getSVGMarkerId:function(K,W){return"marker_"+
this._map.id+"_"+K.r+"_"+K.g+"_"+K.b+"_"+W},_getSVGMarker:function(K){return this._lineMarkers[K]},_updateSVGMarkers:function(){if(Q&&U){var K=this._lineMarkers,W;for(W in K){var da=K[W];da.setAttribute("id",W+"_temp");da.setAttribute("id",W)}}},_applyHalo:function(K,W,da){var fa=W&&da?this._getHaloId(W,da):null;K.setFilter(W&&da?z("webkit")||z("ff")?this._getDilateFilter(W,da,fa):this._getOffsetFilter(W,da,fa):null)},_getDilateFilter:function(K,W,da){var fa=this._getSVGFilter(da);fa||(fa=this._createSVGFilter({id:da},
[r.feMorphology({operator:"dilate",radius:W,result:"dilated"}),r.feFlood({"flood-color":K.toCss(!0)}),r.feComposite({in2:"dilated",operator:"in",result:"composite"}),r.feMerge("composite","SourceGraphic")]));return fa},_getOffsetFilter:function(K,W,da){var fa=this._getSVGFilter(da);if(!fa){K=K.toCss(!0);fa=this._offsetPrimitives;var ha,ra=fa.length,za=[],Da=[];for(ha=0;ha<ra;ha++){var va=fa[ha],Ga="offset"+va.dir,ba="composite"+va.dir;Da.push(ba);za.push(r.feOffset({dx:va.dx*W,dy:va.dy*W,"in":"SourceAlpha",
result:Ga}),r.feFlood({"flood-color":K}),r.feComposite({in2:Ga,operator:"in",result:ba}))}Da.push("SourceGraphic");za.push(r.feMerge.apply(r.feMerge,Da));fa=this._createSVGFilter({id:da},za)}return fa},_offsetPrimitives:[{dir:"L",dx:-1,dy:0},{dir:"TL",dx:-1,dy:-1},{dir:"T",dx:0,dy:-1},{dir:"TR",dx:1,dy:-1},{dir:"R",dx:1,dy:0},{dir:"BR",dx:1,dy:1},{dir:"B",dx:0,dy:1},{dir:"BL",dx:-1,dy:1}],_getHaloId:function(K,W){return"halo_"+this._map.id+"_"+this.id+"_"+K.r+"_"+K.g+"_"+K.b+"_"+K.a+"_"+W},_getSVGFilter:function(K){return this._svgFilters[K]},
_createSVGFilter:function(K,W){W=r.createFilter(K,W);var da=this._map,fa=da.__visibleRect;W.x=-fa.x;W.y=-fa.y;W.width=da.width;W.height=da.height;return this._svgFilters[K.id]=W},_updateSVGFilters:function(K,W,da,fa){var ha=this._svgFilters,ra,za,Da;for(za in ha)if(ra=ha[za]){if(Da=a.byId(za))null!=K&&Da.setAttribute("x",K),null!=W&&Da.setAttribute("y",W),null!=da&&Da.setAttribute("width",da),null!=fa&&Da.setAttribute("height",fa);null!=K&&(ra.x=K);null!=W&&(ra.y=W);null!=da&&(ra.width=da);null!=
fa&&(ra.height=fa)}},_getScaleMatrix:function(K,W){var da=K.width/K.height,fa=1,ha=1;isNaN(W)||(1<da?(fa=W/K.width,ha=W/da/K.height):(ha=W/K.height,fa=W*da/K.width));return{xx:fa,yy:ha}},_symbolizePoint:function(K,W,da,fa){var ha=W.type,ra=W.style;if("shieldlabelsymbol"!==ha&&"picturemarkersymbol"!==ha){var za=W.getStroke();W=W.getFill();ra=ra===y.STYLE_X||ra===y.STYLE_CROSS;var Da=za&&za.color,va=ra?Da:W;if(da){var Ga=this._getVariable(da,"colorInfo",!1),ba=this._getVariable(da,"opacityInfo",!1);
Ga&&(va=da.getColor(fa,{colorInfo:Ga})||va);va&&ba&&(va=this._applyOpacity(va,da,ba,fa));va&&(ra?va!==Da&&(za=za?c.mixin({},za):{},za.color=va):va!==W&&(W=va))}"textsymbol"===ha?K.setFill(W):"simplemarkersymbol"===ha&&K.setFill(W).setStroke(za)}},_drawMarkers:function(K,W,da,fa){var ha=K.geometry,ra=ha.points,za=K.getDojoShape()||this._div.createGroup(),Da,va=ra.length,Ga=[],ba=0,ia,wa=da?da.length:0;za.children[0]&&this._isInvalidShape(W,za.children[0])&&za.clear();for(Da=0;Da<va;Da++){var Aa=ra[Da];
for(ia=0;ia<wa;ia++)Ga[0]=da[ia],this._drawPoint(za,{x:Aa[0],y:Aa[1],spatialReference:ha.spatialReference},W,za.children[ba++],Ga,fa,K)}W=za.children.length;if(va*da.length<W)for(Da=W-1;Da>=va*da.length;Da--)za.children[Da].removeShape();K._shape=za},_symbolizeMarkers:function(K,W,da){var fa=K.getDojoShape().children,ha,ra=fa.length;for(ha=0;ha<ra;ha++)this._symbolizePoint(fa[ha],W,da,K)},_errorHandler:function(K,W){W&&(K.message="Unable to draw graphic (geometry:"+(W.geometry?W.geometry.declaredClass:
null)+", symbol:"+(W.symbol?W.symbol.declaredClass:null)+"): "+K.message);this.inherited(arguments)},_rendererLimits:function(){if(P){var K=1E5;var W=-1E5;var da=1E5}else z("chrome")&&6>z("chrome")&&(K=8150,W=-1E4,da=1E4);if(K)return{clipLimit:K,rangeMin:W,rangeMax:da,clipBBox:[-K,-K,K,K],clipSegments:[[[-K,-K],[K,-K]],[[K,-K],[K,K]],[[K,K],[-K,K]],[[-K,K],[-K,-K]]]}}(),_clipPolyline:function(K,W){W=this._getCorners(K,W);var da=W.br,fa=this._rendererLimits,ha=fa.rangeMin,ra=fa.rangeMax,za=fa.clipBBox,
Da=fa.clipSegments;fa=this._isPointWithinRange;var va=this._isPointWithinBBox,Ga=this._getClipperIntersection,ba=this._getPlaneIndex;if(!fa(W.tl,ha,ra)||!fa(da,ha,ra)){P&&this._createSegments(K);var ia=[];u.forEach(K.segments,function(wa){wa=wa.args;var Aa=wa.length,Fa=[],O;for(O=0;O<Aa;O+=2){var ya=[wa[O],wa[O+1]],Ha=[wa[O+2],wa[O+3]],ea=va(ya,za),Oa=va(Ha,za);if(ea^Oa){if(Oa=Ga([ya,Ha],Da))ea?(O?Fa.push(Oa[1]):Fa.push(ya,Oa[1]),ia.push(Fa),Fa=[]):Fa.push(Oa[1],Ha)}else ea?O?Fa.push(Ha):Fa.push(ya,
Ha):(Oa=ba(ya,za),ea=ba(Ha,za),-1!==Oa&&-1!==ea&&Oa!==ea&&(ya=Ga([ya,Ha],Da,!0),0<ya.length&&(ya[Oa]||(Oa=ya[Oa[0]]?Oa[0]:Oa[1]),ya[ea]||(ea=ya[ea[0]]?ea[0]:ea[1]),Ha=ya[Oa],ya=ya[ea],Ha&&Fa.push(Ha),ya&&(Fa.push(ya),ia.push(Fa),Fa=[]))))}ia.push(Fa)});K.setShape(this._getPathStringFromPaths(ia))}},_clipPolygon:function(K,W){W=this._getCorners(K,W);var da=W.br,fa=this._rendererLimits,ha=fa.clipLimit,ra=fa.rangeMin,za=fa.rangeMax,Da=fa.clipBBox,va=fa.clipSegments;fa=this._isPointWithinRange;var Ga=
this._isPointWithinBBox,ba=this._getClipperIntersection,ia=this._getPlaneIndex,wa=H._pointLineDistance;fa(W.tl,ra,za)&&fa(da,ra,za)||(P&&this._createSegments(K),W=u.filter(K.segments,function(Aa){return Aa.args&&Aa.args.length}),W=u.map(W,function(Aa){var Fa=Aa.args,O=Fa.length,ya=[];Aa=[];var Ha;for(Ha=0;Ha<O;Ha+=2){var ea=[Fa[Ha],Fa[Ha+1]],Oa=[Fa[Ha+2],Fa[Ha+3]];if(Ha===O-2){ya.push(ea);break}var Na=Ga(ea,Da),Ca=Ga(Oa,Da);ya.push(ea);if(Na^Ca){if(Ca=ba([ea,Oa],va))ea=Ca[1],ea[Na?"inOut":"outIn"]=
!0,ya.push(ea),Aa.push([Na?"INOUT":"OUTIN",ya.length-1,Ca[0]])}else if(!Na){Na=ia(ea,Da);var X=ia(Oa,Da);-1!==Na&&-1!==X&&Na!==X&&(Ca=ba([ea,Oa],va,!0),0<Ca.length?(Ca[Na]||(Na=Ca[Na[0]]?Na[0]:Na[1]),Ca[X]||(X=Ca[X[0]]?X[0]:X[1]),ea=Ca[Na],Oa=Ca[X],ea&&(ea.outIn=!0,ya.push(ea),Aa.push(["OUTIN",ya.length-1,Na])),Oa&&(Oa.inOut=!0,ya.push(Oa),Aa.push(["INOUT",ya.length-1,X]))):c.isArray(Na)&&c.isArray(X)&&(Ca=Na.concat(X),Ca.sort(),"0123"===Ca.join("")&&(Ca=[],3===Na[0]+Na[1]?Ca.push([ha,-ha],[-ha,ha]):
Ca.push([-ha,-ha],[ha,ha]),Na=wa(Ca[0],[ea,Oa]),ea=wa(Ca[1],[ea,Oa]),ya.push(Na<ea?Ca[0]:Ca[1]))))}}var oa=Da[0],pa=Da[1],Z=Da[2],ja=Da[3];u.forEach(ya,function(Ea){Ea[0]<oa&&(Ea[1]>=pa&&Ea[1]<=ja?Ea[0]=oa:(Ea[0]=oa,Ea[1]=Ea[1]<pa?pa:ja))});u.forEach(ya,function(Ea){Ea[1]<pa&&(Ea[0]>=oa&&Ea[0]<=Z?Ea[1]=pa:(Ea[1]=pa,Ea[0]=Ea[0]<oa?oa:Z))});u.forEach(ya,function(Ea){Ea[0]>Z&&(Ea[1]>=pa&&Ea[1]<=ja?Ea[0]=Z:(Ea[0]=Z,Ea[1]=Ea[1]<pa?pa:ja))});u.forEach(ya,function(Ea){Ea[1]>ja&&(Ea[0]>=oa&&Ea[0]<=Z?Ea[1]=
ja:(Ea[1]=ja,Ea[0]=Ea[0]<oa?oa:Z))});Fa=0;O=Aa.length;if(0<O){do{Oa=Aa[Fa];Ha=Aa[(Fa+1)%O];if(Oa[2]===Ha[2]&&"INOUT"===Oa[0]&&"OUTIN"===Ha[0])if(ea=Oa[1],Ha=Ha[1],ea<Ha)for(ea+=1;ea<Ha;ea++)ya[ea][2]=!0;else if(ea>Ha){for(ea+=1;ea<ya.length;ea++)ya[ea][2]=!0;for(ea=0;ea<Ha;ea++)ya[ea][2]=!0}Fa=(Fa+1)%O}while(0!==Fa)}O=ya[0];Fa=ya[ya.length-1];O[2]&&(Fa[2]=!0,u.some(Aa,function(Ea){return 1===Ea[1]?(ya.splice(ya.length-1,0,c.clone(ya[1])),!0):!1}));ya=u.filter(ya,function(Ea){return Ea[2]?!1:!0});
for(Fa=0;Fa<ya.length-1;Fa++)O=ya[Fa],(Ha=ya[Fa+1])&&O[0]===Ha[0]&&O[1]===Ha[1]&&(Ha.outIn?O.outIn=!0:Ha.inOut&&(O.inOut=!0),ya.splice(Fa+1,1));O=Math.abs;Aa=[];for(Fa=0;Fa<ya.length-1;Fa++){Oa=ya[Fa];ea=Oa[0];Oa=Oa[1];Na=O(ea)===ha;Ca=O(Oa)===ha;Ha=ya[Fa+1];X=Ha[0];Ha=Ha[1];var ta=O(X)===ha,xa=O(Ha)===ha;Na&&xa?Aa.push([Fa+1,[ea,Ha]]):Ca&&ta&&Aa.push([Fa+1,[X,Oa]])}for(Fa=Aa.length-1;0<=Fa;Fa--)Ha=Aa[Fa],ea=ya[Ha[0]-1],O=ya[Ha[0]],ea.outIn||ea.inOut||O.outIn||O.inOut||ya.splice(Ha[0],0,Ha[1]);O=
ya[0];Fa=ya[ya.length-1];O[0]===Fa[0]&&O[1]===Fa[1]||ya.push(O);return ya}),K.setShape(this._getPathStringFromPaths(W)))},_getCorners:function(K,W){if(P){K=this._map;var da=W.getExtent(),fa=da.spatialReference;W=K.toScreen(new A(da.xmin,da.ymax,fa));K=K.toScreen(new A(da.xmax,da.ymin,fa));return{tl:W,br:K}}K=K.getTransformedBoundingBox();return{tl:K[0],br:K[2]}},_createSegments:function(K){K.shape.path=K.vmlPath;K.segmented=!1;K._confirmSegmented();var W=K.segments;1<W.length&&(K.segments=u.filter(W,
function(da,fa,ha){fa=ha[fa+1];return"M"===da.action&&fa&&"L"===fa.action?(da.args=da.args.concat(fa.args),!0):!1}))},_getPathStringFromPaths:function(K){P?(K=u.map(K,function(W){return"m "+u.map(W,function(da,fa){return(1===fa?"l ":"")+da.join(",")}).join(" ")}),K.push("e")):K=u.map(K,function(W){return"M "+u.map(W,function(da){return da.join(",")}).join(" ")});return K.join(" ")},_isPointWithinBBox:function(K,W){var da=W[1],fa=W[2],ha=W[3],ra=K[0];K=K[1];return ra>W[0]&&ra<fa&&K>da&&K<ha?!0:!1},
_isPointWithinRange:function(K,W,da){var fa=K.x;K=K.y;return fa<W||K<W||fa>da||K>da?!1:!0},_getClipperIntersection:function(K,W,da){var fa,ha=H._getLineIntersection2,ra=Math.round,za={length:0};for(fa=0;4>fa;fa++){var Da=ha(K,W[fa]);if(Da)if(Da[0]=ra(Da[0]),Da[1]=ra(Da[1]),da)za[fa]=Da,za.length++;else return[fa,Da]}return da?za:null},_getPlaneIndex:function(K,W){var da=K[0];K=K[1];var fa=W[0],ha=W[1],ra=W[2];W=W[3];return da<=fa?K>=ha&&K<=W?3:K<ha?[0,3]:[2,3]:K<=ha?da>=fa&&da<=ra?0:da<fa?[3,0]:[1,
0]:da>=ra?K>=ha&&K<=W?1:K<ha?[0,1]:[2,1]:K>=W?da>=fa&&da<=ra?2:da<fa?[3,2]:[1,2]:-1},onGraphicAdd:function(){},onGraphicRemove:function(){},onGraphicNodeAdd:function(){},onGraphicNodeRemove:function(){},onGraphicDraw:function(){},onGraphicsClear:function(){},onRendererChange:function(){},onOpacityChange:function(){},onInfoTemplateChange:function(){},onSurfaceChange:function(){},onWebGLEnabledChange:function(){},setInfoTemplate:function(K){this.infoTemplate=K;this._evalSurfaceType();this.onInfoTemplateChange()},
add:function(K,W){if(K._graphicsLayer===this)return K;K._suspended=this._suspendGraphics;W||this.graphics.push(K);K._graphicsLayer=this;K._sourceLayer||(K._layer&&"esri.layers.GraphicsLayer"!==K._layer.declaredClass?K._sourceLayer=K._layer:"esri.layers.GraphicsLayer"!==this.declaredClass&&(K._sourceLayer=this));K._layer=this;this.hasWebGLSurface()||(this._updateExtent(K),this._draw(K));if(!W)this.onGraphicAdd(K);return K},remove:function(K,W,da){if(!W&&!da){W=this.graphics;var fa;if(-1===(fa=u.indexOf(W,
K)))return null;if(!aa||64<=aa)W.splice(fa,1);else{var ha=W.length;if(ha){for(;fa<ha;)W[fa]=W[fa+1],fa++;W.length--}}}this.hasWebGLSurface()||K.getDojoShape()&&this._removeShape(K,null,da);K._shape=K._graphicsLayer=null;this.onGraphicRemove(K);return K},clear:function(K,W){K=this.graphics;var da,fa=!P;for(da=K.length-1;0<=da;da--)this.remove(K[da],null,fa);this.graphics=[];this.hasWebGLSurface()||this._destroyAllNodes();if(!W)this.onGraphicsClear()},_destroyAllNodes:function(){if(!P&&this._div){var K;
this._childLayer&&(K=this._childLayer.getNode())&&K.parentNode&&K.parentNode.removeChild(K);this._bgGroup.clear();this._div.clear();this._bgGroup=this._div.createGroup();K&&this._div.getEventSource().appendChild(K);this._initOpacity()}},clearNodes:function(){if(!this.hasWebGLSurface()){var K=this.graphics,W=K.length,da;for(da=0;da<W;da++)this._removeShape(K[da],!0,!0);this._destroyAllNodes()}},_graphicVisibilityChanged:function(K){},_setIEOpacity:function(K,W){var da=K&&K.getNode();if(da){var fa=
K.strokeStyle,ha=da.stroke;fa&&ha&&(ha.opacity=fa.color.a*W);K=K.fillStyle;fa=da.fill;K&&fa&&("tile"===fa.type?m.set(da,"opacity",W):fa.opacity=K.a*W)}},setOpacity:function(K,W){if(W||this.opacity!=K){var da=this._div;da&&!this.hasWebGLSurface()&&(P?(u.forEach(this.graphics,function(fa){this._setIEOpacity(fa._shape,K);this._setIEOpacity(fa._bgShape,K)},this),da._esriIeOpacity=K,this._bgGroup._esriIeOpacity=K):"canvas-2d"===this.surfaceType?m.set(da.getEventSource(),"opacity",K):da.getEventSource().setAttribute("opacity",
K));this.opacity=K;if(!W)this.onOpacityChange(K)}},setRenderer:function(K){this.renderer=K;this._evalSDRenderer(!0);this._evalSurfaceType();this.emit("renderer-change",{renderer:this._rndForScale||K})}});B=B([k,M],{declaredClass:"esri.layers.GraphicsLayer",constructor:function(){this._processEvent=c.hitch(this,this._processEvent);this._initLayer()},_initLayer:function(){this.loaded=!0;this.onLoad(this)},_setMap:function(){var K=this.inherited("_setMap",arguments);this.enableMouseEvents();return K},
_unsetMap:function(){this.disableMouseEvents();this.inherited("_unsetMap",arguments)},_processEvent:function(K){var W=this._map,da=K.target,fa;K.screenPoint=new G(K.pageX-W.position.x,K.pageY-W.position.y);for(K.mapPoint=W.toMap(K.screenPoint);da&&!(fa=da.e_graphic);)da=da.parentNode;if(fa)return K.graphic=fa,K},_onMouseOverHandler:function(K){if(this._processEvent(K))this.onMouseOver(K)},_onMouseMoveHandler:function(K){if(this._processEvent(K))this.onMouseMove(K)},_onMouseDragHandler:function(K){if(this._processEvent(K))this.onMouseDrag(K)},
_onMouseOutHandler:function(K){if(this._processEvent(K))this.onMouseOut(K)},_onMouseDownHandler:function(K){this._downGr=this._downPt=null;this._processEvent(K)&&(e.disconnect(this._onmousemove_connect),e.disconnect(this._onmousedrag_connect),this._onmousedrag_connect=e.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseDragHandler"),this._downGr=K.graphic,this._downPt=K.screenPoint.x+","+K.screenPoint.y,this.onMouseDown(K))},_onMouseUpHandler:function(K){this._upGr=this._upPt=null;this._processEvent(K)&&
(e.disconnect(this._onmousedrag_connect),e.disconnect(this._onmousemove_connect),this._onmousemove_connect=e.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseMoveHandler"),this._upGr=K.graphic,this._upPt=K.screenPoint.x+","+K.screenPoint.y,this.onMouseUp(K))},_onClickHandler:function(K){if(this._processEvent(K)){var W=this._downGr,da=this._upGr;W&&da&&W===da&&this._downPt===this._upPt&&(P&&(w._ieGraphic=K.graphic),this.onClick(K))}},_onDblClickHandler:function(K){if(this._processEvent(K))this.onDblClick(K)},
onMouseOver:function(){},onMouseMove:function(){},onMouseDrag:function(){},onMouseOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onClick:function(){},onDblClick:function(){},enableMouseEvents:function(){if(!this._mouseEvents){var K=e.connect,W=this._div.getEventSource();S||(this._onmouseover_connect=K(W,"onmouseover",this,"_onMouseOverHandler"),this._onmousemove_connect=K(W,"onmousemove",this,"_onMouseMoveHandler"),this._onmouseout_connect=K(W,"onmouseout",this,"_onMouseOutHandler"),
this._onmousedown_connect=K(W,"onmousedown",this,"_onMouseDownHandler"),this._onmouseup_connect=K(W,"onmouseup",this,"_onMouseUpHandler"),this._onclick_connect=K(W,"onclick",this,"_onClickHandler"),this._ondblclick_connect=K(W,"ondblclick",this,"_onDblClickHandler"));this._mouseEvents=!0}},disableMouseEvents:function(){if(this._mouseEvents){var K=e.disconnect;K(this._onmouseover_connect);K(this._onmousemove_connect);K(this._onmousedrag_connect);K(this._onmouseout_connect);K(this._onmousedown_connect);
K(this._onmouseup_connect);K(this._onclick_connect);K(this._ondblclick_connect);this._mouseEvents=!1}}});B._GraphicsContainer=g;B._GraphicsLayer=k;c.setObject("layers.GraphicsLayer",B,w);c.setObject("layers._GraphicsContainer",g,w);c.setObject("layers._GraphicsLayer",k,w);return B})},"esri/layers/gfxSniff":function(){define(["dojo/has","dojox/gfx"],function(f,B){f.add("esri-svg",function(){return-1!==B.renderer.toLowerCase().indexOf("svg")});return f})},"esri/layers/support/webglUtils":function(){define(["dojo/_base/lang",
"dojo/_base/array","dojo/has","../../kernel"],function(f,B,l,e){var c=!1,u=l("esri-webgl-max-contexts");u=null!=u?u:l("esri-mobile")?8:16;var t={isWebGLSupported:function(){return!!c},isWebGLEnabled:function(){return this.isWebGLSupported()&&!!l("esri-featurelayer-webgl")},createCanvas:function(d,q){var m=document.createElement("canvas");m.style.width=d+"px";m.style.height=q+"px";return m},createWebGLContext:function(d){var q;B.some(["webgl","experimental-webgl","webkit-3d","moz-webgl"],function(m){try{q=
d.getContext?d.getContext(m):null}catch(a){q=null}return!!q});return q},_contextOwners:[],isContextAvailable:function(){return-1===u||0<u&&t._contextOwners.length<u},acquireContext:function(d){return-1!==B.indexOf(t._contextOwners,d)?!0:t.isContextAvailable()?(t._contextOwners.push(d),!0):!1},releaseContext:function(d){d=B.indexOf(t._contextOwners,d);-1!==d&&t._contextOwners.splice(d,1)}};c=t.createWebGLContext(t.createCanvas());f.setObject("layers.support.webglUtils",t,e);return t})},"esri/layers/support/WebGLSurface":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/array","dojo/has","../../kernel"],function(f,B,l,e,c){f=f(null,{map:null,node:null,renderers:null,constructor:function(u){B.mixin(this,u);this.renderers=[]},destroy:function(){l.forEach(this.renderers,function(u){u.destroy()});this.renderers=null},getEventSource:function(){return this.node},createRenderer:function(u,t,d,q){u=new u({surface:this,width:t,height:d,map:this.map,layer:q});this.renderers.push(u);return u},destroyRenderer:function(u){var t=l.indexOf(this.renderers,
u);-1<t&&(u.destroy(),this.renderers.splice(t,1))},_createNode:function(){var u=document.createElement("div");u.style.pointerEvents="auto";u.style.position="absolute";return u}});B.setObject("layers.support.WebGLSurface",f,c);return f})},"esri/symbols/utils":function(){define("dojo/_base/lang dojo/_base/window dojo/has dojox/gfx ../kernel ../Color".split(" "),function(f,B,l,e,c,u){function t(n){n.removeAttribute("marker-start");n.removeAttribute("marker-end");n.removeAttribute("opacity")}function d(n,
r){for(var k in r)n.setAttribute(k,r[k])}function q(n,r,k){r="url(#"+r.getAttribute("id")+")";n.rawNode.setAttribute("marker-"+k,r)}var m=-1!==e.renderer.toLowerCase().indexOf("svg"),a=9===l("ie"),h={marker:{markerWidth:"6",markerHeight:"6",markerUnits:"strokeWidth",orient:"auto"},spear:{marker:{end:{viewBox:"0 0 25.4 23.43",refX:"20",refY:"12.76"},start:{viewBox:"-25.4 0 25.4 23.43",refX:"-20",refY:"12.76"}},path:{common:{d:"M1.63 23.43 L5.37 16.6 L5.37 8.93 L1.63 2.09 L25.4 12.76 L1.63 23.43 Z",
"stroke-width":"0","fill-opacity":"1"},start:{transform:"matrix(-1, 0, 0, 1, 0, 0)"}}}};l={applyLineMarker:function(n,r,k,g){if(m&&!a){var b=n&&n.rawNode,w=r.marker;k=k||r.color;b&&"none"!==r.style&&k&&w&&"arrow"===w.style&&w.placement?b.getTotalLength&&0===b.getTotalLength()?t(b):(r=-1!==w.placement.indexOf("begin"),w=-1!==w.placement.indexOf("end"),r||w?(b.removeAttribute("stroke-opacity"),b.setAttribute("opacity",k.a),r?(r=g(n,k,"spear","start"),q(n,r,"start")):b.removeAttribute("marker-start"),
w?(k=g(n,k,"spear","end"),q(n,k,"end")):b.removeAttribute("marker-end")):t(b)):b&&t(b)}},createSVGMarker:function(n,r,k,g){k=h[k];var b=B.doc.createElementNS("http://www.w3.org/2000/svg","marker");b.setAttribute("id",r);d(b,h.marker);d(b,k.marker[g]);r=B.doc.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("fill",n.toCss());d(r,k.path.common);d(r,k.path[g]);b.appendChild(r);return b},create2DColorRamp:function(n){var r=n.surface.createGroup(),k=n.colors,g=n.numClasses;n=(n.size||
75)/g;for(var b=0;b<g;b++)for(var w=b*n,x=0;x<g;x++){var z=k[b][x];r.createRect({x:x*n,y:w,width:n,height:n}).setFill(z).setStroke(null)}return r},setSymbolFillColor:function(n,r){if(n)switch(r=r?new u(r):null,n.type){case "simplemarkersymbol":"cross"===n.style||"x"===n.style?n.outline&&n.outline.setColor(r):n.setColor(r);break;case "simplelinesymbol":case "cartographiclinesymbol":case "simplefillsymbol":case "shieldlabelsymbol":case "textsymbol":n.setColor(r)}}};f.setObject("renderer.utils",l,c);
return l})},"esri/geometry/screenUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(f,B,l,e,c,u,t,d,q,m){var a=function(){return 9>l("ie")?function(n,r,k,g,b,w,x,z,D){var E=[],C=Math.round,y,v=x.length,A;for(y=0;y<v;y++){var G=x[y];var F=z?z(G[0][0],G[0][1],D):G[0];if(1<(A=G.length)){var H=C((F[0]-n)*k+b);var L=C((r-F[1])*g+w);F=z?z(G[1][0],G[1][1],D):G[1];var M=C((F[0]-n)*k+b);F=C((r-
F[1])*g+w);E.push("M",H+","+L,"L",M+","+F);for(M=2;M<A;M++)F=z?z(G[M][0],G[M][1],D):G[M],H=C((F[0]-n)*k+b),L=C((r-F[1])*g+w),E.push(H+","+L)}else H=C((F[0]-n)*k+b),L=C((r-F[1])*g+w),E.push("M",H+","+L)}return E}:function(n,r,k,g,b,w,x,z,D,E){var C=[],y,v,A=Math.round;var G=0;for(y=x?x.length:0;G<y;G++){var F=x[G];C.push("M");var H=0;for(v=F?F.length:0;H<v;H++){var L=z?z(F[H][0],F[H][1],D):F[H];C.push(A((L[0]-n)*k+b)+","+A((r-L[1])*g+w))}E||C.push("Z")}return C}}(),h={toScreenPoint:function(n,r,k,
g,b){var w=n.spatialReference,x=g.spatialReference,z=g.x;g=g.y;w&&x&&!w.equals(x)&&w._canProject(x)&&(w=w.isWebMercator()?c.lngLatToXY(z,g):c.xyToLngLat(z,g,!0),z=w[0],g=w[1]);z=(z-n.xmin)*(r/n.getWidth());g=(n.ymax-g)*(k/n.getHeight());b||(z=Math.round(z),g=Math.round(g));return new u(z,g)},toScreenGeometry:function(n,r,k,g){var b=n.xmin,w=n.ymax,x=r/n.getWidth(),z=k/n.getHeight(),D=f.forEach,E=Math.round;if(g instanceof c)return new c(E((g.x-b)*x),E((w-g.y)*z));if(g instanceof q){n=new q;var C=
n.points;D(g.points,function(F,H){C[H]=[E((F[0]-b)*x),E((w-F[1])*z)]});return n}if(g instanceof m)return new m(E((g.xmin-b)*x),E((w-g.ymin)*z),E((g.xmax-b)*x),E((w-g.ymax)*x));if(g instanceof t){n=new t;var y=n.paths,v;D(g.paths,function(F,H){v=y[H]=[];D(F,function(L,M){v[M]=[E((L[0]-b)*x),E((w-L[1])*z)]})});return n}if(g instanceof d){n=new d;var A=n.rings,G;D(g.rings,function(F,H){G=A[H]=[];D(F,function(L,M){G[M]=[E((L[0]-b)*x),E((w-L[1])*z)]})});return n}},_toScreenPath:function(n,r,k,g,b,w){var x=
g instanceof t,z=n.spatialReference,D=g.spatialReference;if(z&&D&&!z.equals(D)&&z._canProject(D))if(z.isWebMercator())var E=c.lngLatToXY;else{E=c.xyToLngLat;var C=!0}return a(n.xmin,n.ymax,r/n.getWidth(),k/n.getHeight(),b,w,x?g.paths:g.rings,E,C,x)},toMapPoint:function(n,r,k,g){return new c(n.xmin+g.x/(r/n.getWidth()),n.ymax-g.y/(k/n.getHeight()),n.spatialReference)},toMapGeometry:function(n,r,k,g){var b=n.xmin,w=n.ymax,x=n.spatialReference,z=r/n.getWidth(),D=k/n.getHeight(),E=f.forEach;if(g instanceof
c)return new c(b+g.x/z,w-g.y/D,x);if(g instanceof q){n=new q(x);var C=n.points;E(g.points,function(F,H){C[H]=[b+F[0]/z,w-F[1]/D]});return n}if(g instanceof m)return new m(b+g.xmin/z,w-g.ymin/D,b+g.xmax/z,w-g.ymax/D,x);if(g instanceof t){n=new t(x);var y=n.paths,v;E(g.paths,function(F,H){v=y[H]=[];E(F,function(L,M){v[M]=[b+L[0]/z,w-L[1]/D]})});return n}if(g instanceof d){n=new d(x);var A=n.rings,G;E(g.rings,function(F,H){G=A[H]=[];E(F,function(L,M){G[M]=[b+L[0]/z,w-L[1]/D]})});return n}}};B.mixin(B.getObject("geometry",
!0,e),h);return h})},"esri/PluginTarget":function(){define("require dojo/aspect dojo/_base/array dojo/_base/lang dojo/Deferred dojo/when".split(" "),function(f,B,l,e,c,u){function t(){B.after(this.constructor._meta,"ctor",this._pluginsHandler,!0);this._plugins={}}t.prototype={addPlugin:function(d,q){var m=this,a=this._plugins,h=new c;try{f([d],function(n){d in a?h.resolve({id:a[d].declaredId||d.replace(/\//g,".")}):(a[d]=n,u(n.add(m,q),function(){var r={id:n.declaredId||d.replace(/\//g,".")};m.emit("plugin-add",
r);h.resolve(r)},function(r){h.reject(r)}))})}catch(n){h.reject(n)}return h.promise},removePlugin:function(d){if(d in this._plugins){var q=this._plugins[d];q.remove(this);delete this._plugins[d];this.emit("plugin-remove",{id:q.declaredId||d.replace(/\//g,".")})}},_pluginsHandler:function(){var d=this;l.some(arguments,function(q){if(q&&q.plugins&&q.plugins instanceof Array){q=q.plugins;var m;for(m=0;m<q.length;m++){var a=q[m];var h=a instanceof Object?a.id:a;d.addPlugin(h,a.options)}return!0}})}};
return t})},"esri/layers/FeatureType":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../symbols/jsonUtils ./FeatureTemplate ./support/domainUtils".split(" "),function(f,B,l,e,c,u,t,d,q){f=f(null,{declaredClass:"esri.layers.FeatureType",constructor:function(m){if(m&&B.isObject(m)){this.id=m.id;this.name=m.name;var a=m.symbol;a&&(this.symbol=t.fromJson(a));a=m.domains;var h=this.domains={};for(n in a)a.hasOwnProperty(n)&&(h[n]=q.fromJson(a[n]));if(m=
m.templates){var n=this.templates=[];for(a=0;a<m.length;a++)n.push(new d(m[a]))}}},toJson:function(){var m={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()},a,h=this.domains,n=this.templates,r=u.fixJson;if(h){var k=m.domains={};for(a in h)h.hasOwnProperty(a)&&(k[a]=h[a]&&h[a].toJson());r(k)}n&&(m.templates=l.map(n,function(g){return g.toJson()}));return r(m)}});B.setObject("layers.FeatureType",f,c);return f})},"esri/layers/FeatureTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../graphic".split(" "),
function(f,B,l,e,c,u){f=f(null,{declaredClass:"esri.layers.FeatureTemplate",constructor:function(t){t&&B.isObject(t)&&(this.name=t.name,this.description=t.description,this.drawingTool=t.drawingTool,this.thumbnail=t.thumbnail,t=t.prototype,this.prototype=new u(t.geometry,null,t.attributes))},toJson:function(){return c.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,thumbnail:c.fixJson(B.clone(this.thumbnail)),prototype:this.prototype&&this.prototype.toJson()})}});
B.mixin(f,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",
TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});B.setObject("layers.FeatureTemplate",f,e);return f})},"esri/layers/support/domainUtils":function(){define("dojo/_base/lang dojo/has ../../kernel ../RangeDomain ../CodedValueDomain ../InheritedDomain".split(" "),function(f,B,l,e,c,u){B={fromJson:function(t){if(t)switch(t.type){case "range":var d=new e(t);break;case "codedValue":d=new c(t);break;case "inherited":d=
new u(t)}return d}};f.setObject("layers.support.domainUtils",B,l);return B})},"esri/layers/InheritedDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Domain"],function(f,B,l,e,c){f=f([c],{declaredClass:"esri.layers.InheritedDomain"});B.setObject("layers.InheritedDomain",f,e);return f})},"esri/layers/FeatureSubtype":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./support/domainUtils".split(" "),function(f,B,l,e,c,u){f=f(null,
{declaredClass:"esri.layers.FeatureSubtype",constructor:function(t){if(t&&B.isObject(t)){this.code=t.code;this.name=t.name;this.defaultValues=t.defaultValues;t=t.domains;var d=this.domains={},q;for(q in t)t.hasOwnProperty(q)&&(d[q]=u.fromJson(t[q]))}},toJson:function(){var t=c.fixJson,d={code:this.code,name:this.name,defaultValues:t(B.clone(this.defaultValues))},q=this.domains;if(q){var m=d.domains={},a;for(a in q)q.hasOwnProperty(a)&&(m[a]=q[a]&&q[a].toJson());t(m)}return t(d)}});B.setObject("layers.FeatureSubtype",
f,e);return f})},"esri/layers/FeatureEditResult":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,e){f=f(null,{declaredClass:"esri.layers.FeatureEditResult",constructor:function(c){c&&B.isObject(c)&&(this.objectId=c.objectId,this.globalId=c.globalId,this.success=c.success,c.success||(c=c.error,this.error=Error(),this.error.code=c.code,this.error.message=c.description))}});B.setObject("layers.FeatureEditResult",f,e);return f})},"esri/layers/LabelClass":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../symbols/TextSymbol ../symbols/ShieldLabelSymbol".split(" "),
function(f,B,l,e,c,u,t,d){var q=RegExp("__begin__","ig"),m=RegExp("__end__","ig"),a=RegExp("^__begin__","i"),h=RegExp("__end__$","i");f=f(null,{declaredClass:"esri.layers.LabelClass",labelPlacement:null,labelExpression:null,format:null,fieldInfos:null,useCodedValues:null,symbol:null,maxScale:0,minScale:0,where:null,sizeInfo:null,_labelPlacementLookup:{"above-center":"esriServerPointLabelPlacementAboveCenter","above-left":"esriServerPointLabelPlacementAboveLeft","above-right":"esriServerPointLabelPlacementAboveRight",
"below-center":"esriServerPointLabelPlacementBelowCenter","below-left":"esriServerPointLabelPlacementBelowLeft","below-right":"esriServerPointLabelPlacementBelowRight","center-center":"esriServerPointLabelPlacementCenterCenter","center-left":"esriServerPointLabelPlacementCenterLeft","center-right":"esriServerPointLabelPlacementCenterRight","above-after":"esriServerLinePlacementAboveAfter","above-along":"esriServerLinePlacementAboveAlong","above-before":"esriServerLinePlacementAboveBefore","above-start":"esriServerLinePlacementAboveStart",
"above-end":"esriServerLinePlacementAboveEnd","below-after":"esriServerLinePlacementBelowAfter","below-along":"esriServerLinePlacementBelowAlong","below-before":"esriServerLinePlacementBelowBefore","below-start":"esriServerLinePlacementBelowStart","below-end":"esriServerLinePlacementBelowEnd","center-after":"esriServerLinePlacementCenterAfter","center-along":"esriServerLinePlacementCenterAlong","center-before":"esriServerLinePlacementCenterBefore","center-start":"esriServerLinePlacementCenterStart",
"center-end":"esriServerLinePlacementCenterEnd","always-horizontal":"esriServerPolygonPlacementAlwaysHorizontal"},constructor:function(n){n&&(B.mixin(this,n),this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)||(this.labelPlacement=u.valueOf(this._labelPlacementLookup,n.labelPlacement)),n.format&&(this.format=n.format),n.fieldInfos&&(this.fieldInfos=n.fieldInfos),n.symbol&&(this.symbol="esriSHD"===n.symbol.type?new d(n.symbol):new t(n.symbol)),n=this.sizeInfo)&&(n.minSize&&(n.minSize=e.pt2px(n.minSize)),
n.maxSize&&(n.maxSize=e.pt2px(n.maxSize)))},getSymbol:function(){return this.symbol},toJson:function(){var n=this.sizeInfo;n&&(n=B.mixin({},n),n.minSize&&(n.minSize=e.px2pt(n.minSize)),n.maxSize&&(n.maxSize=e.px2pt(n.maxSize)));var r=u.fixJson(this.labelExpressionInfo&&B.clone(this.labelExpressionInfo));this._processLabelExpressionInfo(r);n={name:this.name,labelExpression:this.labelExpression,labelExpressionInfo:r,format:this.format||void 0,fieldInfos:this.fieldInfos||void 0,useCodedValues:this.useCodedValues,
maxScale:this.maxScale,minScale:this.minScale,where:this.where,sizeInfo:n||void 0,labelPlacement:this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)?this._labelPlacementLookup[this.labelPlacement]:this.labelPlacement,symbol:this.symbol&&this.symbol.toJson()};return u.fixJson(n)},_processLabelExpressionInfo:function(n){n&&n.value&&(n.expression=this._convertTemplatedStringToArcade(n.value))},_convertTemplatedStringToArcade:function(n){if(n){var r=B.replace(n,function(k,g){return'__begin__$feature["'+
g+'"]__end__'});r=a.test(r)?r.replace(a,""):'"'+r;r=h.test(r)?r.replace(h,""):r+'"';r=r.replace(q,'" + ').replace(m,' + "')}return r}});B.setObject("layers.LabelClass",f,c);return f})},"esri/symbols/ShieldLabelSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol ./Font".split(" "),function(f,B,l,e,c,u,t,d,q){var m={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};f=f(d,{declaredClass:"esri.symbol.ShieldLabelSymbol",
type:"shieldlabelsymbol",color:[255,255,255,1],width:32,height:32,font:e.defaultFont,constructor:function(a,h,n,r,k){a?B.isString(a)?(this.url=a,h&&(this.color=h),n&&(this.width=n),r&&(this.height=r),void 0!==k&&(this.font=k)):(this.width=e.pt2px(a.width),this.height=e.pt2px(a.height),h=a.imageData,9>l("ie")||!h||(n=this.url,this.url="data:"+(a.contentType||"image")+";base64,"+h,this.imageData=n)):B.mixin(this,m)},getStroke:function(){return null},getFill:function(){return this.color},setWidth:function(a){this.width=
a;return this},setHeight:function(a){this.height=a;return this},setUrl:function(a){a!==this.url&&(delete this.imageData,delete this.contentType);this.url=a;return this},setFont:function(a){this.font=a;return this},setText:function(a){this.text=a;return this},getWidth:function(){return this.width},getHeight:function(){return this.height},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||
""},fill:null,stroke:null}},toJson:function(){var a=this.url,h=this.imageData;if(0===a.indexOf("data:")){var n=a;a=h;h=n.indexOf(";base64,")+8;h=n.substr(h)}a=t.getAbsoluteUrl(a);n=e.px2pt(this.width);n=isNaN(n)?void 0:n;var r=e.px2pt(this.height);r=isNaN(r)?void 0:r;a=u.fixJson(B.mixin(this.inherited("toJson",arguments),{type:"esriSHD",url:a,imageData:h,contentType:this.contentType,width:n,height:r}));this.font?(h=new q(this.font),a.font=h.toJson()):a.font=null;delete a.size;a.imageData||delete a.imageData;
return a}});f.defaultProps=m;B.setObject("symbol.ShieldLabelSymbol",f,c);c.symbol.defaultShieldLabelSymbol=m;return f})},"esri/layers/SnapshotMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ../srUtils ../tasks/query ./RenderMode ./support/ParallelSnapshot".split(" "),function(f,B,l,e,c,u,t,d,q){f=f([d],{declaredClass:"esri.layers._SnapshotMode",maxFeatures:5E4,maxRecordCountFactor:1,scaleToTileFactor:1,_isSuspendedAtStartup:!1,_pendingRefresh:!1,
constructor:function(m){this.featureLayer=m;this._featureMap={};this._hasUpdateError=this._hasPartialFeatures=!1;this._drawFeatures=B.hitch(this,this._drawFeatures);this._queryErrorHandler=B.hitch(this,this._queryErrorHandler);this._handleSuccess=B.hitch(this,this._handleSuccess);this._handleError=B.hitch(this,this._handleError);this._handleProgress=B.hitch(this,this._handleProgress)},startup:function(){if(!this._started||this._isSuspendedAtStartup){this.inherited(arguments);var m=this.featureLayer,
a=m.reHostedFS.test(m.url);this.pagination=m.queryPagination&&null!=m.maxRecordCount;this._cacheHintSupported=m._isCacheHintSupported();this.scaleToTileFactor=this._getScaleToTileFactor();a&&this.pagination&&(this._parallelSnapshot=new q({layer:m,mode:this,queryTask:m._task}));this._isSuspendedAtStartup=m.suspended;this._startup()}},propertyChangeHandler:function(m){this._init&&(m?this.featureLayer._collection||this._fetchAll():this._applyTimeFilter())},destroy:function(){this._isSuspendedAtStartup=
this._pendingRefresh=!1;this._cancelPendingRequest(this._pendingRequest);this._parallelSnapshot&&this._parallelSnapshot.destroy();this.inherited(arguments)},drawFeature:function(m){var a=m.attributes[this.featureLayer.objectIdField];this._addFeatureIIf(a,m);this._incRefCount(a)},resume:function(){this._isSuspendedAtStartup||this._pendingRefresh?(this._isSuspendedAtStartup=!1,this._startup()):this.propertyChangeHandler(0)},refresh:function(){var m=this.featureLayer;m._collection?(m._fireUpdateStart(),
m._refresh(!0),m._fireUpdateEnd()):this._fetchAll()},hasAllFeatures:function(){return!this._hasPartialFeatures},hasUpdateError:function(){return this._hasUpdateError},canFetchPBF:function(m){return this.inherited(arguments)&&this.featureLayer._canFetchPBFForQuery(m)},_startup:function(){this.featureLayer._collection?this._applyTimeFilter():this._fetchAll()},_fetchAll:function(){var m=this.featureLayer;m._collection||m.suspended||!m.isQueryable()?this._pendingRefresh=m.suspended:(this._pendingRefresh=
!1,m._fireUpdateStart(),this._clearIIf(),this._hasUpdateError=this._hasPartialFeatures=!1,this._parallelSnapshot?this._parallelSnapshot.fetch().then(this._handleSuccess,this._handleError,this._handleProgress):this._sendRequest())},_handleSuccess:function(m){this._hasPartialFeatures=m.hasPartialFeatures;this._hasUpdateError=m.hasUpdateError;this.featureLayer._fireUpdateEnd(null)},_handleError:function(m){this._queryErrorHandler(m)},_handleProgress:function(m){m.isError?this.featureLayer._errorHandler(m.error):
this._addFeatures(m.features)},_getScaleToTileFactor:function(){var m=this.featureLayer.tileMaxRecordCount,a=this.featureLayer.maxRecordCount,h=1;null!=m&&null!=a&&(h=Number((m/a).toFixed(2)));return h},_getPageSize:function(m){var a=this.featureLayer.tileMaxRecordCount;a="tile"===m.resultType&&a?a:this.featureLayer.maxRecordCount;m.maxRecordCountFactor&&(a=Math.floor(a*m.maxRecordCountFactor));return a},_sendRequest:function(m){var a=this.featureLayer,h=this._createQueryInfo(),n=h.query;this.pagination&&
(this._pageSize=this._getPageSize(n),this._start=n.start=null==m?0:m,n.num=this._pageSize);this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);this._pendingRequest=a._task.execute(n,this._drawFeatures,this._queryErrorHandler,h.pbf?{format:"pbf"}:null)},_drawFeatures:function(m){this._pendingRequest=null;this.featureLayer._isImageService&&10.7>this.featureLayer.version&&void 0===m.exceededTransferLimit&&(m.exceededTransferLimit=m.features.length===this.featureLayer.maxRecordCount);
var a=this.featureLayer,h=m.exceededTransferLimit,n=h&&!a._collection;m=this._checkMaxLimit(m.features);var r=m.maxLimitReached;this._addFeatures(m.features);this.pagination&&n&&!r||(this._hasPartialFeatures=!!h,a._fireUpdateEnd(null,h?{queryLimitExceeded:!0}:null));n&&(this.pagination&&!r&&this._sendRequest(this._start+this._pageSize),a.onQueryLimitExceeded())},_queryErrorHandler:function(m){this._pendingRequest=null;this._hasUpdateError=this._hasPartialFeatures=!0;var a=this.featureLayer;a._errorHandler(m);
a._fireUpdateEnd(m)},_checkMaxLimit:function(m){var a=m?m.length:0,h=this.featureLayer.graphics.length+a,n=h>=this.maxFeatures;if(n){var r=h-this.maxFeatures;r&&m.splice(a-r,r)}return{maxLimitReached:n,featuresDiscarded:h>this.maxFeatures,features:m}},_createQueryInfo:function(){var m=this.featureLayer,a=new t;a.outFields=m.getOutFields();a.where=m._getAttributeFilter()||"1\x3d1";a.returnGeometry=!0;a.outSpatialReference=u.createSpatialReference(this.map.spatialReference.toJson());a.timeExtent=m.getTimeDefinition();
a.maxAllowableOffset=m._maxOffset;a.quantizationParameters=m._quantizationParameters;a.orderByFields=m.supportsAdvancedQueries?m.getOrderByFields():null;a.multipatchOption=m.multipatchOption;m._ts&&(a._ts=(new Date).getTime());this._cacheHintSupported&&m._enableCacheHint(a);var h=this.canFetchPBF(a);m._enableEditModeQuantization(a,h);this._applyMaxRecordCountFactor(a,h);return{query:a,pbf:h}},_applyMaxRecordCountFactor:function(m,a){var h=this.featureLayer.advancedQueryCapabilities;this.featureLayer._isCacheHintEnabled(m)&&
h&&h.supportsMaxRecordCountFactor&&("tile"!==m.resultType&&1<this.scaleToTileFactor&&(m.maxRecordCountFactor=this.scaleToTileFactor),a&&1<this.maxRecordCountFactor&&(m.maxRecordCountFactor=this.maxRecordCountFactor),5<m.maxRecordCountFactor&&(m.maxRecordCountFactor=5))},_addFeatures:function(m){var a=this.featureLayer,h=a.objectIdField,n=m.length,r=a._selectedFeatures,k=a.mode===a.constructor.MODE_AUTO;a._fireUpdateStart();a._sortFeatures(m);for(a=0;a<n;a++){var g=m[a];var b=g.attributes[h];var w=
this._addFeatureIIf(b,g);this._incRefCount(b);k&&w!==g&&r[b]&&(w.setGeometry(g.geometry),w.setAttributes(g.attributes))}this._applyTimeFilter(!0)}});B.setObject("layers._SnapshotMode",f,e);return f})},"esri/layers/RenderMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","../sniff","../kernel"],function(f,B,l,e,c){var u=!!e("esri-pbf");e=!!e("esri-featurelayer-pbf");f=f(null,{declaredClass:"esri.layers._RenderMode",enablePBFQuery:u&&e,initialize:function(t){this.map=
t;this._init=!0},startup:function(){this._started=!0},propertyChangeHandler:function(t){},destroy:function(){this._init=this._started=!1},drawFeature:function(t){},suspend:function(){},resume:function(){},refresh:function(){},hasAllFeatures:function(){return!0},hasUpdateError:function(){return!1},canFetchPBF:function(t){return!(!this.featureLayer._canFetchPBF()||!this.enablePBFQuery)},_incRefCount:function(t){(t=this._featureMap[t])&&t._count++},_decRefCount:function(t){(t=this._featureMap[t])&&t._count--},
_getFeature:function(t){return this._featureMap[t]},_addFeatureIIf:function(t,d){var q=this._featureMap,m=q[t],a=this.featureLayer;m||(q[t]=d,a._add(d),d._count=0);return m||d},_removeFeatureIIf:function(t){var d=this._featureMap[t],q=this.featureLayer;if(d){if(d._count)return;delete this._featureMap[t];q._remove(d)}return d},_registerFeature:function(t,d){var q=this._featureMap,m=q[t];m?(m.attributes=d.attributes,m.geometry=d.geometry):(q[t]=d,d._count=0,d._layer=d._graphicsLayer=d._sourceLayer=
this.featureLayer);return m||d},_unregisterFeature:function(t){var d=this._featureMap,q=d[t];q&&!q._count&&(delete d[t],q._graphicsLayer=null)},_clearIIf:function(){var t=this.featureLayer;var d=t.graphics,q=t._selectedFeatures,m=t.getSelectedFeatures().length,a=t.objectIdField;if(m)for(t=d.length-1;0<=t;t--){m=d[t];var h=m.attributes[a];h in q?m._count=1:(m._count=0,this._removeFeatureIIf(h))}else t.clear(),this._featureMap={}},_cancelPendingRequest:function(t){if(t)try{t.cancel()}catch(d){}},_toggleVisibility:function(t){var d=
this.featureLayer,q=d.graphics,m=t?"show":"hide",a,h=q.length;t=t&&d._ager;for(a=0;a<h;a++){var n=q[a];n[m]();t&&d._repaint(n)}},_applyTimeFilter:function(t){var d=this.featureLayer;if(d.timeInfo&&!d.suspended){t||d._fireUpdateStart();var q=d._trackManager;q&&q.clearTracks();var m=d.getTimeDefinition(),a=d._getOffsettedTE(d._mapTimeExtent);a?(a=d._getTimeOverlap(m,a))?(m=d._filterByTime(d.graphics,a.startTime,a.endTime),q&&q.addFeatures(m.match),l.forEach(m.match,function(h){var n=h._shape;h.visible||
(h.show(),(n=h._shape)&&n._moveToFront());d._ager&&n&&d._repaint(h)}),l.forEach(m.noMatch,function(h){h.visible&&h.hide()})):this._toggleVisibility(!1):(q&&q.addFeatures(d.graphics),this._toggleVisibility(!0));q&&(q.moveLatestToFront(),q.drawTracks());t||d._fireUpdateEnd()}}});B.setObject("layers._RenderMode",f,c);return f})},"esri/layers/support/ParallelSnapshot":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../../kernel".split(" "),function(f,B,l,
e,c,u){f=f(null,{declaredClass:"esri.layers.support.ParallelSnapshot",layer:null,mode:null,queryTask:null,batchSize:5,_queryInfo:null,_fetchDfd:null,_startPage:null,_lastPage:null,_pageSize:null,_maxPages:null,_requests:null,constructor:function(t){B.mixin(this,t);this._requests={}},destroy:function(){this.cancel()},fetch:function(){var t=new c;this.cancel(!0);this._queryInfo=this.mode._createQueryInfo();this._pageSize=this.mode._getPageSize(this._queryInfo.query);this._maxPages=Math.ceil(this._getFeatureCount()/
this._pageSize);this._fetchDfd=t;this._sendRequests();return t.promise},cancel:function(t){this._cancelPendingRequests(t);this._reset()},_reset:function(){this._startPage=this._lastPage=null;this._requests={}},_getFeatureCount:function(){return this.layer.mode===this.layer.constructor.MODE_AUTO&&0===this.layer.getLastExceedsLimitResult()?this.layer._getMaxFeaturesForAutoSnapshotMode():this.mode.maxFeatures},_sendRequests:function(t){var d=this._queryInfo.query,q=this.queryTask,m=this._requests;t=
null==t?1:t;var a=t+this.batchSize-1;a>this._maxPages&&(a=this._maxPages);if(!(t>a))for(this._startPage=t,this._lastPage=a;t<=a;t++)d.start=(t-1)*this._pageSize,d.num=this._pageSize,m[t]=q.execute(d,null,null,this._queryInfo.pbf?{format:"pbf"}:null),m[t].then(B.hitch(this,this._handleSuccess,t)).otherwise(B.hitch(this,this._handleError,t))},_evalNextBatch:function(t){t===this._lastPage&&this._sendRequests(this._lastPage+1)},_handleSuccess:function(t,d){d.exceededTransferLimit||this._cancelLaterRequests(t,
!0);var q=this.mode._checkMaxLimit(d.features);this._fetchDfd.progress({features:q.features,isError:!1});q.maxLimitReached?((t=q.featuresDiscarded||this._hasRejectedRequests())||(t=!!this._getResult(this._getLastSuccessfulRequest()).exceededTransferLimit),this._resolveFetch(t)):(d.exceededTransferLimit&&this._evalNextBatch(t),this._evalResolution())},_handleError:function(t,d){var q=this._requests;q&&q[t]&&(1===t?this._rejectFetch(d):(this._evalNextBatch(t),this._fetchDfd.progress({error:d,isError:!0}),
this._evalResolution()))},_evalResolution:function(){this._hasPendingRequests()||this._resolveFetch(this._hasRejectedRequests())},_resolveFetch:function(t){var d=this._hasRejectedRequests();this.cancel(!0);this._fetchDfd.resolve({hasPartialFeatures:t,hasUpdateError:d})},_rejectFetch:function(t){this.cancel(!0);this._fetchDfd.reject(t)},_getResult:function(t){return t&&t.dfd.results[0]},_hasPendingRequests:function(){return!!this._getPendingRequests().length},_getPendingRequests:function(){var t=this._requests,
d,q=[];for(d in t){var m=t[d];m.isFulfilled()||q.push({pageId:Number(d),dfd:m})}return q},_getLastSuccessfulRequest:function(){var t=this._getResolvedRequests(),d=-Infinity,q;t=l.filter(t,function(m){return!!this._getResult(m).features.length||1===m.pageId},this);l.forEach(t,function(m){m.pageId>d&&(d=m.pageId,q=m)});return q},_getResolvedRequests:function(){var t=this._requests,d,q=[];for(d in t){var m=t[d];m.isResolved()&&q.push({pageId:Number(d),dfd:m})}return q},_hasRejectedRequests:function(){var t=
this._getRejectedRequests(),d=this._getLastSuccessfulRequest(),q=this._getResult(d);q&&!q.exceededTransferLimit&&(t=l.filter(t,function(m){return m.pageId<=d.pageId}));return!!t.length},_getRejectedRequests:function(){var t=this._requests,d,q=[];for(d in t){var m=t[d];m.isRejected()&&q.push({pageId:Number(d),dfd:m})}return q},_cancelPendingRequests:function(t){this._cancelRequests(this._getPendingRequests(),t)},_cancelLaterRequests:function(t,d){var q=l.filter(this._getPendingRequests(),function(m){return m.pageId>
t});this._cancelRequests(q,d)},_cancelRequests:function(t,d){var q=this.mode,m=this._requests;l.forEach(t,function(a){d&&delete m[a.pageId];q._cancelPendingRequest(a.dfd)})}});B.setObject("layers.support.ParallelSnapshot",f,u);return f})},"esri/layers/OnDemandMode":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../tasks/query ./RenderMode ./GridLayout".split(" "),function(f,B,l,e,c,u,t,d,q,m){f=f([q],{declaredClass:"esri.layers._OnDemandMode",
constructor:function(a){this.featureLayer=a;this._featureMap={}},initialize:function(a){this.inherited(arguments);this._cellMap={};this._gridLayer=m.createFromFeatureLayer({layer:this.featureLayer,map:a})},startup:function(){if(!this._started||this._isSuspendedAtStartup)this.inherited(arguments),this._ioQueue=[],this._isSuspendedAtStartup=this.featureLayer.suspended,this.featureLayer.suspended||(this._zoomHandler(),this._enableConnectors())},propertyChangeHandler:function(a){this._init&&2>a&&this._zoomHandler()},
destroy:function(){this._disableConnectors();this._processIOQueue(!0);this.inherited(arguments)},drawFeature:function(a){var h=a.geometry,n=[];if(h){n=this._gridLayer.getCellsInExtent("point"===h.type?{xmin:h.x,ymin:h.y,xmax:h.x,ymax:h.y}:h.getExtent(),!1).cells;h=this._cellMap;var r,k=a.attributes[this.featureLayer.objectIdField];for(r=0;r<n.length;r++){var g=n[r];var b=g.latticeID;var w=g.row;var x=g.col;b?g=h[b]=h[b]||g:(h[w]=h[w]||{},g=h[w][x]=h[w][x]||g);g.features=g.features||[];g.features.push(a);
this._addFeatureIIf(k,a);this._incRefCount(k)}}},suspend:function(){this._init&&this._disableConnectors()},resume:function(){this._init&&(this._enableConnectors(),this._zoomHandler())},refresh:function(){this._zoomHandler()},hasAllFeatures:function(){var a=!1,h=this._getCurrentCells(),n;for(n=0;n<h.length;n++)if(h[n].hasPartialFeatures){a=!0;break}return!a},hasUpdateError:function(){var a=!1,h=this._getCurrentCells(),n;for(n=0;n<h.length;n++)if(h[n].hasUpdateError){a=!0;break}return a},canFetchPBF:function(a){return this.inherited(arguments)&&
this.featureLayer._canFetchPBFForQuery(a)},_enableConnectors:function(){var a=this.map;this._zoomConnect=B.connect(a,"onZoomEnd",this,this._zoomHandler);this._panConnect=B.connect(a,"onPanEnd",this,this._panHandler);this._resizeConnect=B.connect(a,"onResize",this,this._panHandler)},_disableConnectors:function(){B.disconnect(this._zoomConnect);B.disconnect(this._panConnect);B.disconnect(this._resizeConnect)},_zoomHandler:function(){this._processIOQueue(!0);var a=this.featureLayer,h=this.map;!a.suspended&&
a.isQueryable()&&(a._fireUpdateStart(),this._clearIIf(),(a=a._trackManager)&&a.clearTracks(),this._cellMap={},this._gridLayer.setResolution(h.extent),this._sendRequest())},_panHandler:function(a){if(this.featureLayer.isQueryable()){this.featureLayer._fireUpdateStart();var h=this.featureLayer._resized;a=h?a:null;h&&this._gridLayer.setMapState(a,this.map.width,this.map.height);this._sendRequest(a)}},_sendRequest:function(a){this._exceeds=!1;var h=this.featureLayer,n=this.map;a=a||n.extent;n=this._gridLayer.getCellsInExtent(a,
h.latticeTiling).cells;if(!h.isEditable()){var r=this._cellMap;n=e.filter(n,function(w){if(w.lattice){if(r[w.latticeID])return!1}else if(r[w.row]&&r[w.row][w.col])return!1;return!0})}this._pending=this._pending||0;var k;for(k=0;k<n.length;k++){var g=n[k],b=this._createQueryInfo(g);this._pending++;this._ioQueue.push(h._task.execute(b.query,l.hitch(this,this._drawFeatures,g),l.hitch(this,this._queryErrorHandler,g),b.pbf?{format:"pbf"}:null))}this._removeOldCells(a);this._endCheck()},_drawFeatures:function(a,
h){this.featureLayer._isImageService&&10.7>this.featureLayer.version&&void 0===h.exceededTransferLimit&&(h.exceededTransferLimit=h.features.length===this.featureLayer.maxRecordCount);a.hasPartialFeatures=!!h.exceededTransferLimit;a.hasUpdateError=!1;this._exceeds=this._exceeds||h.exceededTransferLimit;this._finalizeIO();var n=this.featureLayer,r=this.map.extent,k=a.extent,g=a.row,b=a.col,w=n.objectIdField;h=h.features;var x=this._gridLayer,z=this._cellMap,D=a.latticeID;z=D?z[D]:z[g]&&z[g][b];if(a.resolution==
x.resolution&&(D?D===x.getLatticeID(r):x.intersects(k,r)))if(z)n._sortFeatures(h),this._updateCell(z,h);else for(n._sortFeatures(h),a.features=h,this._addCellToCellMap(a),n=h.length,a=0;a<n;a++)r=h[a],k=r.attributes[w],this._addFeatureIIf(k,r),this._incRefCount(k);else z&&this._removeCell(g,b,D);this._endCheck()},_queryErrorHandler:function(a,h){this._finalizeIO();a.hasPartialFeatures=!0;a.hasUpdateError=!0;this._addCellToCellMap(a);this.featureLayer._errorHandler(h);this._endCheck(h)},_finalizeIO:function(){this._pending--},
_endCheck:function(a){if(0===this._pending){this._processIOQueue();var h=this.featureLayer,n=h._trackManager;n&&(n.clearTracks(),n.addFeatures(h.graphics),h._ager&&e.forEach(h.graphics,function(r){r._shape&&h._repaint(r)}),n.moveLatestToFront(),n.drawTracks());this.featureLayer._fireUpdateEnd(!!a&&Error("FeatureLayer: "+(a.message||"an error occurred while updating the layer.")),this._exceeds?{queryLimitExceeded:!0}:null);if(this._exceeds)h.onQueryLimitExceeded()}},_processIOQueue:function(a){this._ioQueue=
e.filter(this._ioQueue,function(h){return-1<h.fired?!1:!0});a&&e.forEach(this._ioQueue,this._cancelPendingRequest)},_createQueryInfo:function(a){var h=this.featureLayer,n=new d;n.outFields=h.getOutFields();n.where=h._getAttributeFilter();n.returnGeometry=!0;n.geometry=a.extent||a.lattice;h.latticeTiling&&a.extent&&(n.spatialRelationship=d.SPATIAL_REL_CONTAINS);n.timeExtent=h._getOffsettedTE(h._mapTimeExtent);n.maxAllowableOffset=h._maxOffset;n.quantizationParameters=h._quantizationParameters;n.orderByFields=
h.supportsAdvancedQueries?h.getOrderByFields():null;n.multipatchOption=h.multipatchOption;h._ts&&(n._ts=(new Date).getTime());(a=h.advancedQueryCapabilities)&&a.supportsQueryWithResultType&&(n.resultType="tile");a=this.canFetchPBF(n);h._enableEditModeQuantization(n,a);return{query:n,pbf:a}},_getCurrentCells:function(a){var h=[];a=a||this._cellMap;for(var n in a)if(a.hasOwnProperty(n)){var r=a[n];r&&(r.hasOwnProperty("row")||r.hasOwnProperty("latticeID")?h.push(r):"object"===typeof r&&h.push.apply(h,
this._getCurrentCells(r)))}return h},_addCellToCellMap:function(a){var h=this._cellMap;if(a.latticeID)h[a.latticeID]=a;else{var n=a.row,r=a.col;h[n]=h[n]||{};h[n][r]=a}},_removeOldCells:function(a){var h=this._cellMap,n=this._gridLayer,r,k;for(r in h)if(h[r]){var g=h[r],b=g.latticeID,w=0,x=0;if(b)w++,b!==n.getLatticeID(a)&&(this._removeCell(null,null,b),x++);else for(k in g)g[k]&&(w++,n.intersects(g[k].extent,a)||(this._removeCell(r,k),x++));x===w&&delete h[r]}},_updateCell:function(a,h){var n=this.featureLayer,
r=n.objectIdField;n=n._selectedFeatures;var k,g=h.length;a.features=a.features||[];for(k=0;k<g;k++){var b=h[k],w=b.attributes[r],x=this._addFeatureIIf(w,b);x===b?(this._incRefCount(w),a.features.push(x)):w in n||(x.setGeometry(b.geometry),x.setAttributes(b.attributes))}},_removeCell:function(a,h,n){var r=this._cellMap,k=this.featureLayer,g=k.objectIdField,b=n?r[n]:r[a]&&r[a][h];if(b&&(n?delete r[n]:delete r[a][h],a=b.features))for(h=0;h<a.length;h++)n=a[h].attributes[g],this._decRefCount(n),n in k._selectedFeatures||
this._removeFeatureIIf(n)}});l.setObject("layers._OnDemandMode",f,u);return f})},"esri/layers/GridLayout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/normalizeUtils ../srUtils".split(" "),function(f,B,l,e,c,u,t,d,q,m,a){var h=f(null,{declaredClass:"esri.layers._GridLayout",constructor:function(n,r,k,g){this.origin=n;this.cellWidth=r.width;this.cellHeight=r.height;
this.mapWidth=k.width;this.mapHeight=k.height;this.srInfo=g},setResolution:function(n){this.resolution=(n.xmax-n.xmin)/this.mapWidth;this.srInfo&&(n=Math.round(Math.round(2*this.srInfo.valid[1]/this.resolution)/this.cellWidth),this._frameStats=[n,0,n-1])},setMapState:function(n,r,k){this.mapWidth=r;this.mapHeight=k;this.setResolution(n)},getCellCoordinates:function(n){var r=this.resolution,k=this.origin;return{row:Math.floor((k.y-n.y)/(this.cellHeight*r)),col:Math.floor((n.x-k.x)/(this.cellWidth*
r))}},normalize:function(n){var r=this._frameStats;if(r){var k=r[0],g=r[1];r=r[2];n<g?(n%=k,n=n<g?n+k:n):n>r&&(n%=k)}return n},intersects:function(n,r){var k=this.srInfo;return k?l.some(r._getParts(k),function(g){return n.intersects(g.extent)}):n.intersects(r)},getCellExtent:function(n,r){var k=this.resolution,g=this.origin,b=this.cellWidth,w=this.cellHeight;return new t(r*b*k+g.x,g.y-(n+1)*w*k,(r+1)*b*k+g.x,g.y-n*w*k,a.createSpatialReference(g.spatialReference.toJson()))},getLatticeID:function(n){var r=
this.getCellCoordinates({x:n.xmin,y:n.ymax}),k=this.getCellCoordinates({x:n.xmax,y:n.ymin});n=r.row;var g=k.row;r=this.normalize(r.col);k=this.normalize(k.col);return n+"_"+g+"_"+r+"_"+k},sorter:function(n,r){return n<r?-1:1},getCellsInExtent:function(n,r){var k=this.getCellCoordinates({x:n.xmin,y:n.ymax}),g=this.getCellCoordinates({x:n.xmax,y:n.ymin}),b=k.row,w=g.row;k=k.col;g=g.col;var x=[],z,D,E=[],C=[],y=[];for(z=b;z<=w;z++)for(D=k;D<=g;D++){var v=this.normalize(D);n=this.getCellExtent(z,v);l.some(x,
function(F){return F.row===z&&F.col===v})||x.push({row:z,col:v,extent:n,resolution:this.resolution});r&&(E.push(n.xmin,n.xmax),C.push(n.ymin,n.ymax))}k=this.normalize(k);g=this.normalize(g);E.sort(this.sorter);C.sort(this.sorter);r=E.length;for(z=r-1;0<=z;z--)z<r-1&&E[z]===E[z+1]&&E.splice(z,1);r=C.length;for(z=r-1;0<=z;z--)z<r-1&&C[z]===C[z+1]&&C.splice(z,1);if(E.length&&C.length){n=E[0];D=E[E.length-1];var A=C[0];var G=C[C.length-1];r=E.length;for(z=0;z<r;z++)y.push([[E[z],G],[E[z],A]]);r=C.length;
for(z=0;z<r;z++)y.push([[n,C[z]],[D,C[z]]]);E=new d({paths:y,spatialReference:this.origin.spatialReference.toJson()});x.push({latticeID:b+"_"+w+"_"+k+"_"+g,lattice:E,resolution:this.resolution})}return{minRow:b,maxRow:w,minCol:k,maxCol:g,topRow:b,bottomRow:w,leftCol:k,rightCol:g,cells:x}},_findCell:function(n,r,k){var g;l.some(n,function(b){b.row===r&&b.col===k&&(g=b);return!!g});return g},getExtentOfIntersectingCells:function(n){var r=this.getCellsInExtent(n),k=r&&r.cells;if(k&&k.length){var g=r.topRow,
b=r.leftCol,w=0;l.forEach(k,function(E){E.row===g&&w++});var x=this._findCell(k,g,b).extent,z=this.srInfo;if(!z||w!==this._frameStats[0]&&b!==r.rightCol){var D=x.xmin;z=D+w*x.getWidth()}else D=z.valid[0],z=z.valid[1];r=this._findCell(k,r.bottomRow,b).extent.ymin;(n=(new t(D,r,z,x.ymax,n.spatialReference))._normalize(!1,!1))&&n.rings&&(n=new q(n),n=m.getDenormalizedExtent(n));return n}}});h.createFromFeatureLayer=function(n){var r=n.layer;n=r.getMap()||n.map;var k=r._srInfo;(r=n&&n.loaded?new h(new u(k?
k.valid[0]:n.extent.xmin,k?k.valid[1]:n.extent.ymax,n.spatialReference),{width:r._tileWidth,height:r._tileHeight},{width:n.width,height:n.height},k):null)&&r.setResolution(n.extent);return r};B.setObject("layers._GridLayout",h,c);return h})},"esri/layers/SelectionMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./RenderMode"],function(f,B,l,e,c){f=f([c],{declaredClass:"esri.layers._SelectionMode",constructor:function(u){this.featureLayer=u;this._featureMap={}},
propertyChangeHandler:function(u){this._init&&0===u&&this._applyTimeFilter()},resume:function(){this.propertyChangeHandler(0)},hasAllFeatures:function(){return!this.featureLayer._hasPartialSelectedFeatures},hasUpdateError:function(){return this.featureLayer._hasSelectionError}});B.setObject("layers._SelectionMode",f,e);return f})},"esri/layers/StreamMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/has ../kernel ../SpatialReference ../tasks/query ../tasks/QueryTask ../geometry/jsonUtils ./RenderMode".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a){f=f([a],{declaredClass:"esri.layers._StreamMode",constructor:function(h,n){this.featureLayer=h;this._featureMap={};this._setRefreshRate();this._drawBuffer={adds:[],updates:[]};this._timeoutId=null;this._flushDrawBuffer=B.hitch(this,this._flushDrawBuffer);this._featuresByTime={};this._lastEndTimeCheck=null;this._maxFeatureAge=0;h.purgeOptions&&h.purgeOptions.age&&"number"===typeof h.purgeOptions.age&&(this._maxFeatureAge=1E3*Math.ceil(60*h.purgeOptions.age));this._drawFeatures=
B.hitch(this,this._drawFeatures);this._queryErrorHandler=B.hitch(this,this._queryErrorHandler)},startup:function(){this._started||this.inherited(arguments)},propertyChangeHandler:function(h){this._init&&(0===h?this._applyTimeFilter():3===h&&this._redrawAllTracks())},destroy:function(){this.inherited(arguments);clearTimeout(this._timeoutId);this._featuresByTime=this._drawBuffer=this._featureMap=null},drawFeature:function(h){var n=this.featureLayer,r=n.objectIdField;this._timeoutId||(this._timeoutId=
setTimeout(this._flushDrawBuffer,this._refreshRate));n._joinField&&this._getFeature(h.attributes[r])?this._drawBuffer.updates.push({oid:h.attributes[r],updates:h}):this._drawBuffer.adds.push(h)},resume:function(){this.propertyChangeHandler(0)},refresh:function(){this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);var h=this.featureLayer;h&&(h._relatedUrl||h._keepLatestUrl?(h._fireUpdateStart(),h._refreshing=!0,h.disconnect(),h.clear(),h._relatedQueried=!1,h._keepLatestQueried=!1,
h.connect()):(h._fireUpdateStart(),h.clear(),h._fireUpdateEnd()))},_drawFeatures:function(h,n){var r=this.featureLayer;r._create(h.features||[]);r._fireUpdateEnd(null,n)},_applyTimeFilter:function(h){this.inherited(arguments);this._redrawAllTracks()},_removeFeatures:function(h){var n=this.featureLayer,r=n.objectIdField;h&&l.forEach(h,function(k){k=k.attributes[r];n._unSelectFeatureIIf(k,this);this._decRefCount(k);this._removeFeatureIIf(k)},this)},_addFeatures:function(h){var n=this.featureLayer,r=
n._endTimeField,k=n._startTimeField,g,b=[],w=[],x=[];var z=n._trackManager;var D=n.objectIdField;if(z)for(g in h=z.addFeatures(h),h)h.hasOwnProperty(g)&&(b.push(g),h[g].adds&&(w=w.concat(h[g].adds)),h[g].deletes&&(x=x.concat(h[g].deletes)));else w=h;l.forEach(w,function(E){var C=E.attributes[D];var y=r&&E.attributes[r];!y&&this._maxFeatureAge&&(y=k&&E.attributes[k]?E.attributes[k]+this._maxFeatureAge:Date.now()+this._maxFeatureAge);y&&(y=1E3*Math.ceil(y/1E3),this._featuresByTime[y]?this._featuresByTime[y].push(C):
this._featuresByTime[y]=[C]);this._addFeatureIIf(C,E);this._incRefCount(C)},this);x.length&&this._removeFeatures(x);z&&z.refreshTracks(b)},_updateFeatures:function(h){var n=this.featureLayer,r=[];var k=n._trackManager;var g=n._trackIdField;l.forEach(h,function(b){var w=b.updates;b=this._getFeature(b.oid);var x;if(b){w.geometry&&b.setGeometry(w.geometry);w=w.attributes||{};for(x in w)w.hasOwnProperty(x)&&(b.attributes[x]=w[x]);b.setAttributes(b.attributes);b.visible=this._checkFeatureTimeIntersects(b);
k&&b.attributes[g]?r.push(b.attributes[g]):n._repaint(b,null,!0)}},this);r.length&&k.refreshTracks(r)},_redrawAllTracks:function(){var h=this.featureLayer._trackManager,n;h&&(n=h.trimTracks())&&0<n.length&&(this._removeFeatures(n),h.refreshTracks())},_flushDrawBuffer:function(){clearTimeout(this._timeoutId);var h=this._drawBuffer,n=h.adds.splice(0,h.adds.length),r=h.updates.splice(0,h.updates.length);h=this.featureLayer;if(!h)return!1;h.updating||h._fireUpdateStart();this._addFeatures(n);this._updateFeatures(r);
(n=this._getExpiredFeatures())&&n.length&&(this._removeFeatures(n),h._trackManager&&h._trackManager.removeFeatures(n));h._purge();h._fireUpdateEnd();this._timeoutId=null},_clearDrawBuffer:function(){var h=this._timeoutId,n=this._drawBuffer,r=n.adds;n=n.updates;h&&clearTimeout(h);r.splice(0,r.length);n.splice(0,n.length);this._timeoutId=null},_clearTimeBin:function(){this._featuresByTime={};this._lastEndTimeCheck=1E3*Math.ceil(Date.now()/1E3)},_clearFeatureMap:function(){this._featureMap={}},_setRefreshRate:function(h){h=
h||0===h?h:200;0>h&&(h=200);this._refreshRate=h},_checkFeatureTimeIntersects:function(h){var n=this.featureLayer,r=n.getMap();return(r=r?r.timeExtent:null)&&n.timeInfo&&(n.timeInfo.startTimeField||n.timeInfo.endTimeField)?0<n._filterByTime([h],r.startTime,r.endTime).match.length:!0},_fetchArchive:function(h){var n=new e,r=this.featureLayer;this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);r._fireUpdateStart();if(h&&this.map){h=new q(h);var k=new d;var g=this.map;var b=r.getFilter()||
{};var w=b.where||"1\x3d1";var x=b.geometry?m.fromJson(b.geometry):null;b=b.outFields?b.outFields.split(","):["*"];k.geometry=x;k.where=w;k.outFields=b;k.returnGeometry=!0;k.outSpatialReference=new t(g.spatialReference.toJson());this._pendingRequest=h.execute(k).then(function(z){this._pendingRequest=null;var D=this._fixFieldNameCasing(r,z);z.features=D;this._drawFeatures(z);r._fireUpdateEnd();n.resolve()}.bind(this)).otherwise(function(z){this._pendingRequest=null;r._errorHandler(z);r._fireUpdateEnd(z);
n.reject(z)}.bind(this))}else n.resolve();return n.promise},_queryErrorHandler:function(h){var n=this.featureLayer;n._errorHandler(h);n._fireUpdateEnd(h)},_fixFieldNameCasing:function(h,n){var r=n.features||[],k=n.fields;if(!k||!r.length)return r;h=this._mapFieldNameDifferences(h.fields,k);k=[];for(var g,b=0,w=n.features.length;b<w;b++)n=r[b],g=this._swizzleResponseAttributes(n.attributes,h),k.push({geometry:n.geometry,attributes:g});return k},_mapFieldNameDifferences:function(h,n){var r=[],k={},
g;var b=0;for(g=n.length;b<g;b++)r.push(n[b].name);b=0;for(g=h.length;b<g;b++){n=h[b].name;var w=this._checkForStreamFieldName(n,r);w&&(k[w]=n)}return k},_checkForStreamFieldName:function(h,n){h=h.toLowerCase();for(var r,k=0,g=n.length;k<g;k++)if(n[k].toLowerCase()===h){r=n[k];break}return r},_swizzleResponseAttributes:function(h,n){var r={},k;for(k in h)if(h.hasOwnProperty(k)){var g=h[k];n.hasOwnProperty(k)?r[n[k]]=g:r[k]=g}return r},_getExpiredFeatures:function(){var h,n,r=[],k=[];if(!this.featureLayer._endTimeField&&
!this._maxFeatureAge)return k;var g=1E3*Math.floor(this._lastEndTimeCheck/1E3);this._lastEndTimeCheck=h=1E3*Math.ceil(Date.now()/1E3);if(g&&g!==h)for(n=this._featuresByTime;g<=h;g+=1E3)n[g]&&(r=r.concat(n[g]),delete n[g]);l.forEach(r,function(b){(b=this._getFeature(b))&&k.push(b)},this);return k}});B.setObject("layers._StreamMode",f,u);return f})},"esri/layers/TrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/dom-construct dojox/gfx ../kernel ../graphic ../geometry/Polyline ./GraphicsLayer".split(" "),
function(f,B,l,e,c,u,t,d,q,m){var a=-1!==u.renderer.toLowerCase().indexOf("canvas");f=f(null,{declaredClass:"esri.layers._TrackManager",constructor:function(h){this.layer=h;this.trackMap={};this.trackLineMap={}},initialize:function(h){this.map=h;h=this.layer;this.createTracklineContainer()&&(this._handles=[h.on("visibility-change",B.hitch(this,function(n){this.container.setVisibility(n.visible);this.container.evaluateSuspension()})),h.on("scale-range-change",B.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,
this.layer.maxScale)}))])},createTracklineContainer:function(){var h=this.layer;if("esriGeometryPoint"!==h.geometryType)return null;var n=this.map,r=h._getRenderer();r=r&&r.trackRenderer;var k=this.container=new m._GraphicsLayer({id:h.id+"_tracks",_child:!0,visible:h.visible,minScale:h.minScale,maxScale:h.maxScale});k.loaded=!0;k.onLoad(k);k._setMap(n,h._div);a||(n=k._div.getNode(),h=h._div.getNode(),n&&h&&c.place(n,h,"first"));k.setRenderer(r);return k},addFeatures:function(h){var n=this.trackMap,
r=this.layer,k=r._trackIdField,g=[];l.forEach(h,function(z){var D=z.attributes[k];(n[D]=n[D]||[]).push(z);-1===l.indexOf(g,D)&&g.push(D)});var b=r._startTimeField,w=r.objectIdField,x=function(z,D){var E=z.attributes[b],C=D.attributes[b];return E===C?z.attributes[w]<D.attributes[w]?-1:1:E<C?-1:1};l.forEach(g,function(z){n[z].sort(x)})},trimTracks:function(h){function n(w){for(w=r[w]||[];w.length>k;)g.push(w.shift())}var r=this.trackMap,k=this.layer.maximumTrackPoints||0,g=[],b;if(!k)return g;if(h)l.forEach(h,
function(w){n(w)});else for(b in r)r.hasOwnProperty(b)&&n(b);return g},drawTracks:function(h){function n(z){var D=b[z],E,C;var y=r.trackLineMap[z];k.remove(y);delete r.trackLineMap[z];y=null;if(!D||2>D.length)return!1;y=[];for(E=D.length-1;0<=E;E--)(C=D[E].geometry)&&y.push([C.x,C.y]);D={};D[x]=z;1<y.length&&(y=new d(new q({paths:[y],spatialReference:w}),null,D),k.add(y),r.trackLineMap[z]=y)}var r=this,k=this.container,g;if(k){var b=this.trackMap;var w=this.map.spatialReference;var x=this.layer._trackIdField;
if(h)l.forEach(h,function(z){n(z)});else for(g in b)b.hasOwnProperty(g)&&n(g)}},refreshTracks:function(h){function n(x){var z;r.drawTracks([x]);if(b&&b.latestObservationRenderer){x=k[x]||[];var D=x.length;for(z=0;z<D;z++)g._repaint(x[z],null,!0)}}var r=this,k=this.trackMap,g=this.layer,b=g._getRenderer(),w;if(h)l.forEach(h,function(x){n(x)});else for(w in k)k.hasOwnProperty(w)&&n(w);this.moveLatestToFront()},moveLatestToFront:function(h){l.forEach(this.getLatestObservations(h),function(n){var r=n._shape;
r&&r._moveToFront();this._repaint(n,null,!0)},this.layer)},getLatestObservations:function(h){function n(w){w=g[w];return w[w.length-1]}var r=[],k=this.layer._getRenderer(),g=this.trackMap,b;if(!k.latestObservationRenderer)return r;if(h)l.forEach(h,function(w){r.push(n(w))});else for(b in g)g.hasOwnProperty(b)&&r.push(n(b));return r},clearTracks:function(h){var n=this.getLatestObservations(h),r=this.container,k=this.trackMap,g;if(h)l.forEach(h,function(w){delete this.trackMap[w];r&&(b=this.trackLineMap[w],
r.remove(b),delete this.trackLineMap[w])},this);else{if(r)for(g in k){var b=this.trackLineMap[g];r.remove(b)}this.trackMap={};this.trackLineMap={}}l.forEach(n,function(w){this._repaint(w,null,!0)},this.layer)},isLatestObservation:function(h){var n=this.trackMap[h.attributes[this.layer._trackIdField]];return n?n[n.length-1]===h:!1},destroy:function(){l.forEach(this._handles,function(n){n.remove()});var h=this.container;h&&(h.clear(),h._unsetMap(this.map,this.layer._div));this.map=this.layer=this.trackMap=
this.container=null}});B.setObject("layers._TrackManager",f,t);return f})},"esri/layers/HeatmapManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/_base/array require ../kernel ../sniff ../geometry/Point ../geometry/webMercatorUtils ./MapImage ../renderers/HeatmapRenderer ../tasks/query dojo/_base/fx".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h,n){function r(){}function k(g){var b=g.layer;return{geometry:g.geometry,attributes:g.attributes,getLayer:function(){return b}}}
f=f(null,{declaredClass:"esri.layers.HeatmapManager",heatmapRenderer:null,sourceLayer:null,imageLayer:null,useTiles:!0,useWorker:!1,map:null,constructor:function(g){this.sourceLayer=g;this._hndls=[]},initialize:function(g){this.map=g;var b=this.sourceLayer,w=b.renderer;b.setDrawMode(!1);this.imageLayer=g._getMapImageLyr();var x=this;this.heatmapRenderer=w instanceof a?w:(w.getRendererInfoByZoom(g.getZoom())||w.getRendererInfoByScale(g.getScale())).renderer;this.redraw=this.redraw.bind(this);this.recalculateHeatmap=
this.recalculateHeatmap.bind(this);this._removeRenderer=this._removeRenderer.bind(this);this._handleRendererChange=this._handleRendererChange.bind(this);this._rendererChangeHandle=this.sourceLayer.on("renderer-change",this._handleRendererChange);this._handleOpacityChange=this._handleOpacityChange.bind(this);this._reprojectFeature=this._reprojectFeature.bind(this);c(["../workers/heatmapCalculator"],function(z){x._calculator=new z(B.mixin({width:x.map.width,height:x.map.height},x._getOptions()));x._setupRenderer();
x.heatmapRenderer.getStats=z.calculateStats;x.heatmapRenderer.getHistogramData=z.getHistogramData})},destroy:function(){this._removeHandlers();this._rendererChangeHandle&&this._rendererChangeHandle.remove();this._rendererChangeHandle=this.sourceLayer=this.imageLayer=this.map=this.heatmapRenderer=this._hndls=null},_handleRendererChange:function(g){var b=g.renderer,w=b instanceof a;this.heatmapRenderer?w?this.heatmapRenderer=b:this._removeRenderer(g):w&&(this.heatmapRenderer=b,this.sourceLayer&&this.map&&
this._setupRenderer())},_handleOpacityChange:function(g){g=g.opacity;var b=this._getImageBySourceId(this.sourceLayer.id);b&&b.setOpacity(g)},_setupRenderer:function(){var g=this._hndls,b=this.sourceLayer,w=this.map,x=this;b._originalDraw=b._draw;b._draw=r;b._div.clear();clearTimeout(this._resetTimer);this._resetTimer=setTimeout(this._resetGraphics.bind(this),250);g.push(b.on("update-end",this.redraw));g.push(b.on("suspend",function(z){(z=x._getImageBySourceId(x.sourceLayer.id))&&z.hide()}));g.push(b.on("resume",
function(z){(z=x._getImageBySourceId(x.sourceLayer.id))&&z.show()}));g.push(l.after(b,"redraw",this.redraw));g.push(w.on("layer-remove",function(z){z.layer==b&&((z=x._getImageBySourceId(x.sourceLayer.id))&&x.imageLayer.removeImage(z),x._removeRenderer({target:b}))}));b._collection&&g.push(b.on("graphic-add",function(z){x._reprojectFeature(z.graphic);x.redraw()}));1!==b.mode&&(g.push(w.on("resize, pan-end",this.redraw)),g.push(w.on("zoom-end",this.redraw)));g.push(b.on("opacity-change",this._handleOpacityChange));
this.imageLayer.suspended&&this.imageLayer.resume();b.graphics&&b.graphics.length&&(b.graphics[0].geometry&&!w.spatialReference.equals(b.graphics[0].geometry.spatialReference)&&e.forEach(b.graphics,function(z){this._reprojectFeature(z)}.bind(this)),this.redraw())},redraw:function(){if(!this._drawTimer){var g=this;this._drawTimer=setTimeout(function(){clearTimeout(g._drawTimer);g._drawTimer=null;g.sourceLayer._getRenderer().isInstanceOf(a)&&g.recalculateHeatmap()},16)}},_removeRenderer:function(g){var b=
g.target;b._draw=b._originalDraw;delete b._originalDraw;b.setDrawMode(!0);this._removeHandlers();this._hndls=[];var w=this._getImageBySourceId(this.sourceLayer.id);w&&this.imageLayer.removeImage(w);clearTimeout(this._drawTimer);clearTimeout(this._resetTimer);this._drawTimer=this._resetTimer=null;b.renderer!=g.renderer&&b.renderer.getRendererInfo?this.heatmapRenderer=null:(this.destroy(),b.renderer&&b.renderer.getRendererInfo&&b.redraw())},recalculateHeatmap:function(){this._calculator?this._doMainCalculation():
this._calculatorClient&&this._doWorkerCalculation()},_reprojectFeature:function(g){if(g&&g.geometry){var b=g.geometry,w=this.map.spatialReference;w.equals(b.spatialReference)||(b=q.project(b,w),null!=b&&(g.geometry=b))}},_doWorkerCalculation:function(){},_doMainCalculation:function(){var g=this.sourceLayer,b=this.map,w=this.heatmapRenderer,x=this.map.extent,z=this.map.width,D=this.map.height,E=this._calculator,C=this,y=function(A){A=C._getScreenPoints(A.features,b,g);A=E.calculateImageData(B.mixin({screenPoints:A,
mapinfo:{extent:[x.xmin,x.ymin,x.xmax,x.ymax],resolution:b.getResolution()},width:z,height:D},C._getOptions()));A=w.getSymbol(k({geometry:b.extent,attributes:{size:[z,D],imageData:A},layer:g}));A=new m({extent:b.extent,href:A.url,opacity:0,sourceId:g.id});C._swapMapImages(A,C._getImageBySourceId(g.id));g.suspended&&A.hide()},v={geometry:b.extent,timeExtent:g.useMapTime?b.timeExtent:void 0,spatialRelationship:h.SPATIAL_REL_INTERSECTS};null!=g._canDoClientSideQuery(v)?g.queryFeatures(v,y):y({features:g.graphics})},
_getScreenPoints:function(g,b,w){var x=[],z=g.length,D=0,E=0,C=new d(b.extent.xmin,b.extent.ymax,b.spatialReference),y=b.toScreen(C),v=y.x;y=y.y;var A=b.getResolution(),G;for((E=b.extent.getCacheValue("_parts"))&&(G=e.map(E,function(H){return w._intersects(b,H.extent)[0]}));z--;)if(E=g[z],E.geometry&&E.visible){var F={x:Math.ceil((E.geometry.x-C.x)/A+v),y:Math.floor((C.y-E.geometry.y)/A-y),attributes:E.attributes};G&&(E=1<G.length&&F.x<-G[0]?G[1]:G[0],F.x+=E);x[D++]=F}return x},_getImageBySourceId:function(g){var b=
this.imageLayer.getImages();b=e.filter(b,function(w){return w.sourceId==g});if(b.length)return b[b.length-1]},_swapMapImages:function(g,b){function w(){x.removeImage(b)}var x=this.imageLayer,z=this.sourceLayer.opacity;x.addImage(g);n.anim(g._node,{opacity:z},null,null,function(){g.opacity=z});null!=b&&n.anim(b._node,{opacity:0},null,null,w)},_removeHandlers:function(){if(null!=this._hndls)for(var g=this._hndls.length;g--;)this._hndls[g].remove()},_getOptions:function(){var g=this.heatmapRenderer;
return{blurRadius:g.blurRadius,gradient:g.gradient,maxPixelIntensity:g.maxPixelIntensity,minPixelIntensity:g.minPixelIntensity,field:g.field,fieldOffset:g.fieldOffset}},_resetGraphics:function(){clearTimeout(this._resetTimer);this._resetTimer=null;for(var g=this.sourceLayer.graphics,b=g.length,w;b--;)w=g[b],w._shape=w._offsets=void 0}});B.setObject("layers.HeatmapManager",f,u);return f})},"esri/layers/clustering/ClusterManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../../kernel ../../Evented ../../graphic ../../lang ../../Color ../../graphicsUtils ../../dijit/PopupTemplate ../../dijit/Legend/utils ../../renderers/ClassBreaksRenderer ../../symbols/SimpleMarkerSymbol ../support/attributeUtils ../GraphicsLayer ../Field ./GeohashAggregation ./statUtils dojo/i18n!../../nls/jsapi".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z){var D=z.layers.clusters,E=z.widgets.popup,C=D.numFeatures,y=Math.pow(2,53)-1;f=f(u,{declaredClass:"esri.layers.clustering.ClusterManager",layer:null,aggregationInfo:null,container:null,defaults:{clusterRadius:80,markerSymbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}}},_initialized:!1,_map:null,_eventHandles:null,_clusterRadius:null,
_renderer:null,_statisticInfos:null,_fields:null,_infoTemplate:null,_clusterGenerator:null,_singleGraphics:null,constructor:function(v){this._eventHandles=[];this.layer=v.layer;this.setAggregationInfo(v.aggregationInfo)},initialize:function(v){this._initialized=!0;this._map=v;this._removeFromPopup(this.layer);this.container=this._createContainer();this._clusterGenerator=this._createClusterGenerator();this._initClusterGenerator();this._createLayerEventListeners();this._createMapEventListeners();this._createPopupEventListeners()},
destroy:function(v){this._clearSingleGraphics();this._removeClusterBoundary();this._destroyEventListeners();this._removeFromPopup(this.container);this._removeFromPopup(this.layer);this._resetClusterNav();this._destroyClusterGenerator(v);this._destroyContainer();this.layer=this.aggregationInfo=this._map=null},setAggregationInfo:function(v){this.aggregationInfo=v?B.mixin({},v):null;this._applyAggregationInfo()},getClusterRenderer:function(){return this._renderer},getClusterFields:function(){return this._fields||
[]},getFeaturesInCluster:function(v){v=v&&v.getAggregationInfo();return this._clusterGenerator?this._clusterGenerator.getFeaturesInCluster(v):[]},getAggregateGraphics:function(){return this.container?this.container.graphics.slice(0):[]},getSingleGraphics:function(){return this._singleGraphics?this._singleGraphics.slice(0):[]},redraw:function(){this.container&&this.container.redraw()},isClusteringEnabled:function(){return!(!this._clusterGenerator||!this._clusterGenerator.clustersEnabled)},isClusteringActive:function(){return!!(this._clusterGenerator&&
0<this._clusterGenerator.getNumFeatures())},toggleFeatureVisibility:function(v){this._clusterGenerator&&this._clusterGenerator.toggleFeatureVisibility(v)},_createContainer:function(){var v=this.layer,A=new g._GraphicsLayer({_child:!0,id:v.id+"_clusters",visible:v.visible,minScale:v.minScale,maxScale:v.maxScale,infoTemplate:this._infoTemplate});A.fields=this._fields;A.setRenderer(this._renderer);A.loaded=!0;A.onLoad(A);A._setMap(this._map,v._div);return v._childLayer=A},_destroyContainer:function(){var v=
this.container;v&&(v.clear(),v._unsetMap(this._map,this.layer._div),this.layer._childLayer=null);this.container=null},_createClusterGenerator:function(){return new w({map:this._map,layer:this.layer,clusterRadius:this._clusterRadius,statisticInfos:this._statisticInfos})},_initClusterGenerator:function(){var v=this._clusterGenerator;v.loaded?this._awaitClusterGenerator():this._eventHandles.push(v.on("load",B.hitch(this,function(){this._awaitClusterGenerator()})),v.on("load-error",B.hitch(this,function(A){})))},
_destroyClusterGenerator:function(v){this._clusterGenerator&&this._clusterGenerator.destroy(v);this._clusterGenerator=null},_awaitClusterGenerator:function(){var v=this._clusterGenerator;v.started?(this._applyRenderer(),this._initClusterUpdates()):this._eventHandles.push(v.on("start",B.hitch(this,function(){this._applyRenderer();this._initClusterUpdates()})))},_applyAggregationInfo:function(){this._applyClusterRadius();this._applyRenderer();this._clusterGenerator&&!this._clusterGenerator.isUpdateScheduled()&&
this.redraw()},_applyClusterRadius:function(){var v=this.aggregationInfo;this._clusterRadius=v&&v.clusterRadius||this.defaults.clusterRadius;this._clusterGenerator&&this._clusterGenerator.setClusterRadius(this._clusterRadius);this._computeClusterRadius()},_computeClusterRadius:function(){var v=this.aggregationInfo||{};v.clusterRadius=this._clusterRadius;this.aggregationInfo=v},_applyRenderer:function(){var v=this.container,A=this._getClusterRendererInfo(),G=this._compareStatInfos(this._statisticInfos,
A.statisticInfos);G&&(this._statisticInfos=A.statisticInfos,this._clusterGenerator&&(this._clusterGenerator.setStatisticInfos(l.map(this._statisticInfos,function(F){return{attributeInfo:F.attributeInfo,statisticType:F.statisticType}})),v&&l.forEach(v.graphics,function(F){this._applyClusterAttributes(F,F.getAggregationInfo())},this)));this._renderer=A.renderer;this._applyFields();this._applyInfoTemplate(!!G&&this._initialized);v&&(v.setRenderer(this._renderer),this.emit("renderer-change"))},_applyFields:function(){this._fields=
this._getFields(this._statisticInfos);this.container&&(this.container.fields=this._fields)},_applyInfoTemplate:function(v){var A=this.aggregationInfo,G=A&&A.disablePopup;this.layer.infoTemplate&&!G?(A=A&&A.infoTemplate||this._infoTemplate,v=v||!A?this._createInfoTemplate():this._updateInfoTemplate(A)):v=null;this._infoTemplate=v;this.container&&this.container.setInfoTemplate(this._infoTemplate);this._computeInfoTemplate()},_computeInfoTemplate:function(){var v=this.aggregationInfo||{};v.infoTemplate=
this._infoTemplate;this.aggregationInfo=v},_getClusterRendererInfo:function(){var v=this.layer&&this.layer.renderer;return v?this._createClusterRenderer(v):this._getDefaultClusterRenderer()},_getDefaultClusterRenderer:function(){var v=this._createContinuousCountRenderer();this._addSizeByCountVariable(v);return{renderer:v,statisticInfos:[]}},_createContinuousCountRenderer:function(v){var A=new n(null,"cluster_count");A.addBreak({minValue:-y,maxValue:y,symbol:v?new v.constructor(v.toJson()):new r(B.clone(this.defaults.markerSymbol))});
return A},_createClusterRenderer:function(v){if(!this._isSupportedRenderer(v))return this._getDefaultClusterRenderer();var A=[];if(this._isSimpleRenderer(v))var G=this._createContinuousCountRenderer(v.symbol);else{G=new v.constructor(v.toJson());var F=this._getRendererAttributeInfo(v);if(this._isCBRenderer(G)){var H=x.getClusterField(F,"avg");A.push(this._getStatInfo(F,"avg"));G.normalizationType=null;G.normalizationField=null;G.normalizationTotal=null}else this._isUVRenderer(G)&&(H=x.getClusterField(F,
"type"),A.push(this._getStatInfo(F,"type")));G.attributeField=H;G.setValueExpression(null);G.valueExpressionTitle=null;G.setVisualVariables(null);this._setRendererTitle(G,v)}v=this._getSupportedVariables(v);F=this._createClusterVariables(v.allVars,A);G.setVisualVariables(F);v.sizeVars.length||this._isCBSizeRenderer(G)||this._addSizeByCountVariable(G);return{renderer:G,statisticInfos:A}},_isSupportedRenderer:function(v){if(this._isSimpleRenderer(v))return!0;if(this._isCBRenderer(v)){var A=v.normalizationType;
return"function"===typeof v.attributeField||A&&"field"!==A?!1:!0}return this._isUVRenderer(v)?"function"===typeof v.attributeField||v.attributeField2?!1:!0:!1},_isSimpleRenderer:function(v){return-1<v.declaredClass.toLowerCase().indexOf("simplerenderer")},_isCBRenderer:function(v){return-1<v.declaredClass.toLowerCase().indexOf("classbreaksrenderer")},_isUVRenderer:function(v){return-1<v.declaredClass.toLowerCase().indexOf("uniquevaluerenderer")},_isCBSizeRenderer:function(v){var A=v.infos;if(!this._isCBRenderer(v)||
!A||2>A.length)return!1;var G=Infinity,F=-Infinity;l.forEach(A,function(H){if(H=H.symbol){var L=0;switch(H.type){case "simplemarkersymbol":L=H.size;break;case "picturemarkersymbol":L=(H.width+H.height)/2}G=Math.min(G,L);F=Math.max(F,L)}});return Infinity!==G&&-Infinity!==F&&G!==F},_getRendererAttributeInfo:function(v){var A=v.attributeField,G=A?this.layer.getField(A):null;return{field:A,attributeType:G&&"esriFieldTypeDate"===G.type?"date":null,rotationType:null,valueExpression:v.valueExpression,valueExpressionTitle:v.valueExpressionTitle,
normalizationField:v.normalizationField}},_setRendererTitle:function(v,A){v.legendOptions=B.clone(A.legendOptions);v.legendOptions&&v.legendOptions.title||(v.legendOptions=v.legendOptions||{},v.legendOptions.title=h.getRendererTitle(A,this.layer))},_getSupportedVariables:function(v){var A=v.getVisualVariablesForType("colorInfo",!1)||[],G=v.getVisualVariablesForType("sizeInfo",!1)||[],F=v.getVisualVariablesForType("opacityInfo",!1)||[];v=v.getVisualVariablesForType("rotationInfo",!1)||[];A=l.filter(A,
this._variableFilter);G=l.filter(G,this._variableFilter);F=l.filter(F,this._variableFilter);v=l.filter(v,this._variableFilter);return{sizeVars:G,allVars:A.concat(G).concat(F).concat(v)}},_variableFilter:function(v){return"function"!==typeof v.field&&!k.viewScaleRE.test(v.valueExpression)},_createClusterVariables:function(v,A){return l.map(v,function(G){return this._createVarForAvg(G,A)},this)},_createVarForAvg:function(v,A){var G=B.clone(v),F=this._getVariableAttributeInfo(v);G.field=x.getClusterField(F,
"avg");G.normalizationField=null;G.valueExpression=null;G.valueExpressionTitle=null;F=this._getStatInfo(F,"avg");this._addStatInfo(A,F);this._setVariableTitle(G,v);return G},_getVariableAttributeInfo:function(v){var A="rotationInfo"===v.type,G=A?"angle":null;A=A?v.rotationType:null;var F=v.legendOptions&&v.legendOptions.title,H=v.field,L=H?this.layer.getField(H):null;L&&"esriFieldTypeDate"===L.type&&(G="date");return{field:H,attributeType:G,rotationType:A,valueExpression:v.valueExpression,valueExpressionTitle:v.valueExpressionTitle||
v.valueExpression&&F,normalizationField:v.normalizationField}},_setVariableTitle:function(v,A){v.legendOptions&&v.legendOptions.title||(v.legendOptions=v.legendOptions||{},v.legendOptions.title=h.getVisualVariableTitle(A,this.layer))},_getStatInfo:function(v,A){return{statisticHash:x.getStatisticHash(v,A),attributeInfo:v,statisticType:A}},_addStatInfo:function(v,A){var G=this._findStatInfo(v,A);G?G.attributeInfo.valueExpressionTitle||(G.attributeInfo.valueExpressionTitle=A.attributeInfo.valueExpressionTitle):
v.push(A)},_findStatInfo:function(v,A){var G;l.some(v,function(F){F.statisticHash===A.statisticHash&&(G=F);return!!G});return G},_compareStatInfos:function(v,A){var G=l.filter(v,function(H){return!this._findStatInfo(A,H)},this),F=l.filter(A,function(H){return!this._findStatInfo(v,H)},this);return F.length||G.length?{added:F,removed:G}:null},_addSizeByCountVariable:function(v){var A=this._createSizeByCountVariable();A&&this._addVariable(v,A)},_getSizeByCountVariable:function(v){v=v.getVisualVariablesForType("sizeInfo",
!1)||[];return l.filter(v,function(A){return"cluster_count"===A.field})[0]},_updateSizeByCountVariable:function(){var v=this._renderer,A=this._getSizeByCountVariable(v);if(A){var G=this._createSizeByCountVariable();G&&this._replaceVariable(v,A,G)}},_createSizeByCountVariable:function(){var v=this._clusterGenerator;if(v){var A=v.getCurrentLodStats();if(A){var G=v.getNumFeatures();v=v.clusters;var F=A.min,H=A.max;1===A.count&&F===G||1===v.length&&v[0].count===G?(F=1,H=G):F&&F===H&&(H=2*F);G={type:"sizeInfo",
field:"cluster_count",valueUnit:"unknown",minSize:12,maxSize:50,minDataValue:F,maxDataValue:H,legendOptions:{title:C}}}}return G},_addVariable:function(v,A){var G=v.visualVariables||[];G.push(A);v.setVisualVariables(G)},_replaceVariable:function(v,A,G){var F=v.visualVariables;A=l.indexOf(F,A);-1<A&&F.splice(A,1);F.push(G);v.setVisualVariables(F)},_getFields:function(v){var A=[new b({name:"cluster_count",type:"esriFieldTypeInteger"})];l.forEach(v,function(G){var F=G.statisticType;G=G.attributeInfo;
var H;"avg"===F?H="date"===G.attributeType?"esriFieldTypeDate":"esriFieldTypeDouble":"type"===F&&(H=G.field?this.layer.getField(G.field).type:"esriFieldTypeString");A.push(new b({name:x.getClusterField(G,F),type:H}))},this);return A},_createInfoTemplate:function(){var v=this._statisticInfos,A=this._renderer,G=[{fieldName:"cluster_count",label:C,visible:!0,format:{digitSeparator:!0,places:0}}],F=[],H=[d.substitute({count:"{cluster_count}"},D.countSummary)],L=this._isUVRenderer(A)?A.infos:[];l.forEach(v,
function(M){var Q=M.statisticType,S=M.attributeInfo,I=x.getClusterField(S,Q),P=this._getFieldLabel(M);if("avg"===Q){var J={fieldName:I,label:P,visible:!0,format:"date"===S.attributeType?{dateFormat:"shortDateShortTime"}:{digitSeparator:!0,places:1}};var U=this._getFieldSummary(M,I)}else"type"===Q&&(U="expression/"+I,J={fieldName:U,visible:!0},F.push({name:I,title:P,returnType:"string",expression:this._getExpression(L,I)}),U=this._getFieldSummary(M,U));J&&G.push(J);U&&H.push(U)},this);return this._createPopupTemplate({fieldInfos:G,
expressionInfos:F,description:H.join("\x3cbr/\x3e\x3cbr/\x3e")})},_updateInfoTemplate:function(v){var A=v.toJson(),G=this._isUVRenderer(this._renderer)?this._renderer.infos:[];l.forEach(this._statisticInfos,function(F){var H=F.statisticType;F=x.getClusterField(F.attributeInfo,H);"type"===H&&(H=this._findExpressionInfo(F,A))&&(H.expression=this._getExpression(G,F))},this);return this._createPopupTemplate(A)},_createPopupTemplate:function(v){var A=new a(v),G=A.title;A.setTitle(B.hitch(this,function(F){var H=
this._map&&this._map.infoWindow;if("esri.dijit.PopupMobile"!==(H&&H.declaredClass)||A.info.title)return G.call(A,F);F=(F=F.attributes)&&F.cluster_count;return null==F?"":d.substitute({count:F},D.countTitle)}));return A},_findExpressionInfo:function(v,A){var G;l.some(A.expressionInfos,function(F){F.name===v&&(G=F);return!!G});return G},_escapeDoubleQuotes:function(v){return v?v.replace(/"/g,'\\"'):""},_getExpression:function(v,A){return["var uvInfos \x3d ["+this._getObjects(v).join(", ")+"];",'var predominantType \x3d Text($feature["'+
A+'"]);','var label \x3d "'+this._escapeDoubleQuotes(D.predominantNoneValue)+'";',"for (var i \x3d 0; i \x3c Count(uvInfos); i++) {\nif (uvInfos[i].value \x3d\x3d predominantType) {\nlabel \x3d uvInfos[i].label;\nbreak;\n}\n}\nreturn label;"].join("\n")},_getObjects:function(v){return l.map(v,function(A){return'{"value": "'+String(A.value)+'","label": "'+this._escapeDoubleQuotes(String(A.label))+'"}'},this)},_getFieldLabel:function(v){var A=v.statisticType,G=v.attributeInfo,F=G.field;v=G.normalizationField;
var H="";if("avg"===A)var L=v?D.avgNormFieldLabel:D.avgFieldLabel;else"type"===A&&(L=D.predominantFieldLabel);L&&(A=G.valueExpression?G.valueExpressionTitle:this.layer.getFieldLabel(F),v=v&&this.layer.getFieldLabel(v),H=d.substitute({fieldLabel:A||"",normFieldLabel:v||""},L));return H},_getFieldSummary:function(v,A){var G=v.statisticType,F=v.attributeInfo,H=F.field;v=F.normalizationField;var L="";if("avg"===G)var M=v?D.avgNormFieldSummary:D.avgFieldSummary;else"type"===G&&(M=D.predominantFieldSummary);
M&&(G=F.valueExpression?F.valueExpressionTitle:this.layer.getFieldLabel(H),v=v&&this.layer.getFieldLabel(v),L=d.substitute({fieldLabel:G||"",normFieldLabel:v||"",fieldValue:"{"+A+"}"},M));return L},_removeFromPopup:function(v){var A=this._map.infoWindow,G=A.features;if(G&&G.length){var F=l.filter(G,function(H){return H.getLayer()!==v});F.length<G.length&&(F.length?A.setFeatures(F):(A.clearFeatures(),A.hide()))}},_resetClusterNav:function(){this._resetClusterNavPartial();this._popupClusterGraphic=
null},_resetClusterNavPartial:function(){this._map.infoWindow.removeActions&&this._map.infoWindow.removeActions(this._popupActions);this._hideSingleGraphic(this._popupSingleGraphic);this._popupSingleGraphic=null},_addClusterBoundary:function(v,A){(A=A.clusterFillSymbol)&&(A=new A.constructor(A.toJson()));v=new t(v,A);this._map.graphics.add(v);this._clusterBoundary=v},_removeClusterBoundary:function(){this._map.graphics.remove(this._clusterBoundary);this._clusterBoundary=null},_createBrowseFeaturesAction:function(){return this._map.infoWindow.addActions([{title:E.NLS_browseFeatures,
className:"browseFeatures",callback:B.hitch(this,function(v){v.preventDefault();v=this._map.infoWindow;var A=v.getSelectedFeature(),G=A.getChildGraphics(),F=v.getCurrentAnchor();v.setFeatures(G,{anchor:F});if(G=m.graphicsExtent(G))this._addClusterBoundary(G,v),v.show(this._getPopupLocation(G,F));this._popupClusterGraphic=A})}])[0]},_getPopupLocation:function(v,A){var G=v.getCenter();A=A.toLowerCase();-1<A.indexOf("top")?G.update(G.x,v.ymax):-1<A.indexOf("bottom")?G.update(G.x,v.ymin):-1<A.indexOf("left")?
G.update(v.xmin,G.y):G.update(v.xmax,G.y);return G},_createViewSummaryAction:function(){return this._map.infoWindow.addActions([{title:E.NLS_viewSummary,className:"viewSummary",callback:B.hitch(this,function(v){v.preventDefault();v=this._popupClusterGraphic;var A=this._map.infoWindow;A.setFeatures([v]);A.show(v.geometry);this._popupClusterGraphic=null})}])[0]},_initClusterUpdates:function(){this._updateSizeVariable();this._updateClusterGraphics();this._eventHandles.push(this._clusterGenerator.on("update-end",
B.hitch(this,function(v){(v.mapLevelChange||v.indexChange)&&this._updateSizeVariable();this._updateClusterGraphics()})),this._clusterGenerator.on("index-complete",B.hitch(this,function(){this._updateSizeVariable()})))},_updateClusterGraphics:function(){this._hideSingleGraphics();var v=[],A=[];l.forEach(this._clusterGenerator.clusters,function(G){var F=new t(G.centroid);F.setAggregationSourceLayer(this.layer);F.setAggregationInfo(G);this._applyClusterAttributes(F,G);1===G.count?(G=this._getSingleGraphic(F),
A.push(G)):v.push(F)},this);this._showSingleGraphics(A);this._addGraphics(v)},_addGraphics:function(v){var A=this.container;A.clear();l.forEach(v,function(G){A.add(G)})},_getSingleGraphic:function(v){var A=this._clusterGenerator.getCell(v.getAggregationInfo().primary).features[0],G=this.layer.renderer;G=G&&G.getSymbol(A);var F=this._getSizeByCountVariable(this._renderer);G&&F&&(v=F?this._renderer.getSize(v,{sizeInfo:F,shape:G.style,resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):
null,A.setSize(v));return A},_showSingleGraphics:function(v){l.forEach(v,this._showSingleGraphic);this._singleGraphics=v},_hideSingleGraphics:function(){l.forEach(this._singleGraphics,function(v){v.setSize(null);this._hideSingleGraphic(v)},this);this._singleGraphics=null},_clearSingleGraphics:function(){l.forEach(this._singleGraphics,function(v){v.setSize(null)});this._singleGraphics=null},_showSingleGraphic:function(v){v&&v._resume()},_hideSingleGraphic:function(v){v&&v._suspend()},_updateSizeVariable:function(){this.isClusteringEnabled()&&
(this._updateSizeByCountVariable(),this.emit("renderer-change"))},_applyClusterAttributes:function(v,A){v.setAttributes(A.attributes)},_createLayerEventListeners:function(){var v=this.layer;this._eventHandles.push(v.on("visibility-change",B.hitch(this,function(A){this.container.setVisibility(A.visible)})),v.on("scale-range-change",B.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,this.layer.maxScale)})),v.on("renderer-change",B.hitch(this,function(){this._applyRenderer()})),
v.on("info-template-change",B.hitch(this,function(){this._applyInfoTemplate()})))},_createMapEventListeners:function(){this._eventHandles.push(this._map.on("zoom-start",B.hitch(this,function(){this._removeClusterBoundary();this._removeFromPopup(this.container);this._removeFromPopup(this.layer);this._resetClusterNav();this.container.clear();this._hideSingleGraphics()})))},_createPopupEventListeners:function(){var v=this._map.infoWindow;this._eventHandles.push(v.on("selection-change",B.hitch(this,function(){this._resetClusterNavPartial();
var A=this._map.infoWindow.getSelectedFeature(),G=A&&A.getLayer();if(G){var F;G===this.container?(this._removeClusterBoundary(),this._map.infoWindow.addActions&&(F=this._createBrowseFeaturesAction())):G===this.layer&&A._isSuspended()?(this._map.infoWindow.addActions&&(F=this._createViewSummaryAction()),this._popupSingleGraphic=A,this._showSingleGraphic(this._popupSingleGraphic)):this._removeClusterBoundary();this._popupActions=F?[F]:null}})),v.on("clear-features",B.hitch(this,function(A){this._resetClusterNav();
A.isIntermediate||this._removeClusterBoundary()})),v.on("hide",B.hitch(this,function(){this._popupSingleGraphic&&this._popupSingleGraphic._suspend();this._clusterBoundary&&this._clusterBoundary.hide()})),v.on("show",B.hitch(this,function(){this._popupSingleGraphic&&this._popupSingleGraphic._resume();this._clusterBoundary&&this._clusterBoundary.show()})))},_destroyEventListeners:function(){l.forEach(this._eventHandles,function(v){v.remove()})}});B.setObject("layers.clustering.ClusterManager",f,c);
return f})},"esri/dijit/PopupTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "),function(f,B,l,e,c,u,t,d){f=f([u,t],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,constructor:function(q,m){B.mixin(this,m);this.initialize(q,m)},getTitle:function(q){var m;this.info&&(m=this.titleHasRelatedFields||this.titleHasAsyncExpressions?"":this._getPopupValues(q,
this._fetchAttributes(q,null,this.getExpressionFieldsInTitle()),!0).title);return m||""},getContent:function(q){return this.info?(new d({template:this,graphic:q,chartTheme:this.chartTheme},e.create("div"))).domNode:""}});B.setObject("dijit.PopupTemplate",f,c);return f})},"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all dojox/html/entities ./lang ./kernel ./request ./promiseList ./ArcadeExpression ./tasks/query ./tasks/QueryTask ./tasks/RelationshipQuery ./tasks/StatisticDefinition ./arcadeProfiles/popupProfile ./layers/support/attributeUtils dojo/i18n!dojo/cldr/nls/number".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E){f=f(null,{declaredClass:"esri.PopupInfo",_reNewline:/(\n)/ig,_reExprField:/^\s*expression\//i,_reExprFieldPattern:/\{expression\/([^\}]+)\}/ig,_exprPrefix:"expression/",_relatedFieldPrefix:"relationships/",_aggregatedFeaturesVariable:"$aggregatedfeatures",initialize:function(C,y){if(C){B.mixin(this,y);this.info=C;this.title=this.getTitle;this.content=this.getContent;this._exprCache=this._compileExpressions(this.info.expressionInfos);var v=this._fieldLabels=
{},A=this._fieldsMap={};this.info.fieldInfos&&l.forEach(this.info.fieldInfos,function(G){var F=G.fieldName.toLowerCase(),H=this._isExpressionField(F)?this.getExpressionInfo(F):null;v[F]=H?H.title:G.label;A[F]=G},this);this.titleHasRelatedFields=!(!this.info.title||-1===this.info.title.indexOf("{"+this._relatedFieldPrefix));this.titleHasAsyncExpressions=this._titleHasAsyncExpressions();this.contentHasAsyncExpressions=this._contentHasAyncExpressions()}},toJson:function(){return e.fromJson(e.toJson(this.info))},
getTitle:function(){},getContent:function(){},getFieldInfo:function(C){var y;l.some(this.info&&this.info.fieldInfos,function(v){v.fieldName===C&&(y=v);return!!y});return y},getExpressionInfo:function(C){if(C=this._getExprField(C)){C=C.toLowerCase();var y;l.some(this.info.expressionInfos,function(v){v.name.toLowerCase()===C&&(y=v);return!!y});return y}},getExpressionFieldsInTitle:function(){return this._getExprFieldsFromTemplatedString(this.info.title)},getExpressionFieldsInContent:function(){var C=
this._collectExprFieldsFromTemplatedString(this.info.description,[]);this.info.description||l.forEach(this.info.fieldInfos,function(y){y.visible&&this._collectExprField(y.fieldName,C)},this);l.forEach(this.info.mediaInfos,function(y){this._collectExprFieldsFromTemplatedString(y.title,C);this._collectExprFieldsFromTemplatedString(y.caption,C);if(y=y.value)this._collectExprFieldsFromTemplatedString(y.linkURL,C),this._collectExprFieldsFromTemplatedString(y.sourceURL,C),l.forEach(y.fields,function(v){this._collectExprField(v,
C)},this),this._collectExprField(y.normalizeField,C),this._collectExprField(y.tooltipField,C)},this);return C},getRequiredExpressionFields:function(){return this.getExpressionFieldsInTitle().concat(this.getExpressionFieldsInContent())},hasGeometryOperations:function(){return l.some(this._getArcadeExpressions(),function(C){return C.hasGeometryOperations()})},hasAsyncExpressions:function(){return l.some(this._getArcadeExpressions(),function(C){return C.async})},initializeArcadeEngine:function(){return z.initialize(this._getArcadeExpressions())},
getComponents:function(C,y){var v=this.info,A={initArcadeEngine:this.initializeArcadeEngine()};v.fieldInfos&&(v=l.filter(v.fieldInfos,function(G){return-1!==G.fieldName.indexOf(this._relatedFieldPrefix)},this))&&0<v.length&&(A.relatedInfo=this._getRelatedRecords({graphic:C,fieldsInfo:v}));this._needFullResolutionFeature(C)&&(A.fullResolutionFeature=this._getFullResolutionFeature(C));this._needAggregatedFeaturesLayer(C)&&(A.aggregatedFeaturesLayer=this._getAggregatedFeaturesLayer(C));return r(A).then(B.hitch(this,
function(G){var F=G.fullResolutionFeature,H=y&&y.evaluateAllExpressions,L=H?null:this.getRequiredExpressionFields();G=(H?this.hasAsyncExpressions():this._hasAsyncExpressions(L))?this._fetchAttributesAsync(C,F,L,G.aggregatedFeaturesLayer):this._fetchAttributes(C,F,L);return r([G]).then(B.hitch(this,function(M){return this._getPopupValues(C,M[0])}))}))},getAttachments:function(C){var y=C.getSourceLayer();C=C.attributes;if(this.info.showAttachments&&y&&y.hasAttachments&&y.objectIdField&&(C=C&&C[y.objectIdField]))return y.queryAttachmentInfos(C)},
_needAggregatedFeaturesLayer:function(C){return C.isAggregate()?l.some(this._getArcadeExpressions(),function(y){return y.hasVariable(this._aggregatedFeaturesVariable)},this):!1},_getAggregatedFeaturesLayer:function(C){return C.getAggregationSourceLayer().getFeatureCollectionLayer(C.getChildGraphics()).always(function(y){return y instanceof Error?null:y})},_needFullResolutionFeature:function(C){return(C=C.getSourceLayer())?"function"===typeof C.getMaxAllowableOffset&&0<C.getMaxAllowableOffset()&&this.hasGeometryOperations():
!1},_getFullResolutionFeature:function(C){var y=C.getSourceLayer(),v=y.objectIdField;C=(C=C.attributes)&&v&&C[v];if(null==C)return null;var A=new g;A.where=v+"\x3d"+C;A.maxAllowableOffset=0;A.outFields=[v];y._enableCacheHint(A);return y.queryFeatures(A).then(function(G){return G.features&&G.features[0]})},_isExpressionField:function(C){return this._reExprField.test(C)},_getExprField:function(C){return this._isExpressionField(C)?C.replace(this._reExprField,""):null},_collectExprField:function(C,y){(C=
this._getExprField(C))&&y.push(C);return y},_collectExprFieldsFromTemplatedString:function(C,y){C=this._getExprFieldsFromTemplatedString(C);C.length&&Array.prototype.push.apply(y,C);return y},_getExprFieldsFromTemplatedString:function(C){C=C?C.match(this._reExprFieldPattern):null;return l.map(C,function(y){return y.replace(this._reExprFieldPattern,"$1")},this)},_titleHasAsyncExpressions:function(){return this._hasAsyncExpressions(this.getExpressionFieldsInTitle())},_contentHasAyncExpressions:function(){return this._hasAsyncExpressions(this.getExpressionFieldsInContent())},
_hasAsyncExpressions:function(C){return l.some(C,function(y){y=this._exprCache[y];return!(!y||!y.async)},this)},_compileExpressions:function(C){var y={};l.forEach(C,function(v){var A=v.returnType&&v.returnType.toLowerCase();y[v.name]=new k({expression:v.expression,returnType:"number"===A?"number":"string",profile:z})});return y},_getArcadeExpressions:function(){var C=[],y;for(y in this._exprCache)C.push(this._exprCache[y]);return C},_fetchAttributesAsync:function(C,y,v,A){var G=this._fetchAttributes(C,
y,v,A);C={};for(var F in G)(y=G[F])&&y.then&&(C[F]=y);return r(C).then(B.hitch(this,function(H){for(var L in H){var M=H[L];G[L]=M instanceof Error?null:this._processArcadeResult(M)}return G}))},_processArcadeResult:function(C){"string"===typeof C&&(C=m.encode(C));return C},_fetchAttributes:function(C,y,v,A){var G=B.clone(C.attributes)||{},F=y&&y.geometry,H=this._exprPrefix,L=this._exprCache;v=v||l.map(this.info.expressionInfos,function(M){return M.name});l.forEach(v,function(M){var Q=H+M;M=(M=L[M])?
C.evaluateExpression(M,this._getEvalOptions(M,C,F,A)):null;G[Q]=this._processArcadeResult(M)},this);return G},_getEvalOptions:function(C,y,v,A){var G=C.hasGeometryOperations(),F=y.getSourceLayer(),H=F&&(F.getMap()||F.parentLayer&&F.parentLayer.getMap());A&&(A._map=H);C=z.getEvalOptions({expression:C,feature:y,layer:F,aggregatedFeaturesLayer:A,map:H,spatialReference:H&&H.spatialReference});y=C.context.vars.$feature;G=!(!G||!v);y&&G&&(y._geometry=v);C.skipCache=G;return C},_getPopupValues:function(C,
y,v){y=y||this._fetchAttributes(C);var A=this.info,G=C.getSourceLayer(),F=B.clone(y),H="",L="",M,Q,S=G&&G._getDateOpts&&G._getDateOpts().properties;S=S&&S.slice(0);var I={dateFormat:{properties:S,formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)},format:null};if(this._relatedInfo)for(U in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(U)){var P=this._relatedInfo[U],J=this._relatedLayersInfo[U];P&&(l.forEach(P.relatedFeatures,function(N){for(Q in N.attributes)if(N.attributes.hasOwnProperty(Q)&&
"esriRelCardinalityOneToOne"===J.relation.cardinality){var K=this._toRelatedFieldName([J.relation.id,Q]);y[K]=F[K]=N.attributes[Q]}},this),l.forEach(P.relatedStatsFeatures,function(N){for(Q in N.attributes)if(N.attributes.hasOwnProperty(Q)){var K=this._toRelatedFieldName([J.relation.id,Q]);y[K]=F[K]=N.attributes[Q]}},this))}for(M in F){var U=this._fieldsMap[M.toLowerCase()];P=this._getLayerFieldInfo(G,M);U&&P&&(U.fieldName=P.name);F[M]=this._formatValue(F[M],M,I);S&&U&&U.format&&U.format.dateFormat&&
(U=l.indexOf(S,M),-1<U&&S.splice(U,1))}if(G)for(M in S=G.typeIdField,y)if(y.hasOwnProperty(M)&&-1===M.indexOf(this._relatedFieldPrefix)){var Y=y[M];a.isDefined(Y)&&(U=this._getDomainName(G,C,M,Y),a.isDefined(U)?F[M]=U:M===S&&(U=this._getTypeName(G,C,Y),a.isDefined(U)&&(F[M]=U)))}A.title&&(H=this._processFieldsInLinks(this._fixTokens(A.title,G),y),H=B.trim(this._removeEmptyHref(a.substitute(F,H,I)||"")));if(v)return{title:H};A.description&&(L=this._processFieldsInLinks(this._fixTokens(A.description,
G),y),L=B.trim(this._removeEmptyHref(a.substitute(F,L,I)||"")));if(A.fieldInfos){var aa=[];l.forEach(A.fieldInfos,function(N){(M=N.fieldName)&&N.visible&&aa.push([this._fieldLabels[M.toLowerCase()]||M,a.substitute(F,"${"+M+"}",I)||""])},this)}var la;if(A.mediaInfos){var T=[];l.forEach(A.mediaInfos,function(N){la=0;Y=N.value;switch(N.type){case "image":var K=Y.sourceURL;K=K&&B.trim(this._removeEmptyHref(a.substitute(y,this._fixTokens(K,G))));la=!!K;break;case "piechart":case "linechart":case "columnchart":case "barchart":K=
Y.normalizeField;Y.fields=l.map(Y.fields,function(ra){return(W=this._getLayerFieldInfo(G,ra))?W.name:ra},this);if(K){var W=this._getLayerFieldInfo(G,K);Y.normalizeField=W?W.name:K}la=l.some(Y.fields,function(ra){return a.isDefined(y[ra])||-1!==ra.indexOf(this._relatedFieldPrefix)&&this._relatedInfo},this);break;default:return}if(la){N=B.clone(N);Y=N.value;K=N.title?this._processFieldsInLinks(this._fixTokens(N.title,G),y):"";var da=N.caption?this._processFieldsInLinks(this._fixTokens(N.caption,G),
y):"";N.title=K?B.trim(this._removeEmptyHref(a.substitute(F,K,I)||"")):"";N.caption=da?B.trim(this._removeEmptyHref(a.substitute(F,da,I)||"")):"";if("image"===N.type)Y.sourceURL=a.substitute(y,this._fixTokens(Y.sourceURL,G)),Y.linkURL&&(Y.linkURL=B.trim(a.substitute(y,this._fixTokens(Y.linkURL,G))||""));else{var fa,ha;l.forEach(Y.fields,function(ra,za){if(-1!==ra.indexOf(this._relatedFieldPrefix))ha=this._getRelatedChartInfos(ra,Y,y,I),ha instanceof Array?Y.fields=ha:Y.fields[za]=ha;else{var Da=y[ra];
Da=void 0===Da?null:Da;fa=y[Y.normalizeField]||0;Da&&fa&&(Da/=fa);Y.fields[za]={y:Da,tooltip:(this._fieldLabels[ra.toLowerCase()]||ra)+":\x3cbr/\x3e"+this._formatValue(Da,ra,I,!!fa)}}},this)}T.push(N)}},this)}return{title:H,description:L,hasDescription:!!A.description,fields:aa&&aa.length?aa:null,mediaInfos:T&&T.length?T:null,formatted:F,editSummary:!1!==A.showLastEditInfo&&G&&G.getEditSummary?G.getEditSummary(C):""}},_getRelatedChartInfos:function(C,y,v,A){var G,F;var H=[];var L=this._fromRelatedFieldName(C);
var M=L[0];var Q=this._relatedInfo[M];M=this._relatedLayersInfo[M];Q&&l.forEach(Q.relatedFeatures,function(S){S=S.attributes;var I;for(I in S)if(S.hasOwnProperty(I)&&I===L[1]){var P={};F=S[I];y.normalizeField&&(G=-1!==y.normalizeField.indexOf(this._relatedFieldPrefix)?S[this._fromRelatedFieldName(y.normalizeField)[1]]:v[y.normalizeField]);F&&G&&(F/=G);if(y.tooltipField)if(-1!==y.tooltipField.indexOf(this._relatedFieldPrefix)){var J=this._fromRelatedFieldName(y.tooltipField)[1],U=a.isDefined(S[J])?
this._formatValue(S[J],y.tooltipField,A,!!G):J;P.tooltip=U+":\x3cbr/\x3e"+this._formatValue(F,J,A,!!G)}else P.tooltip=(this._fieldLabels[C.toLowerCase()]||C)+":\x3cbr/\x3e"+this._formatValue(F,y.tooltipField,A,!!G);else P.tooltip=F;P.y=F;H.push(P)}},this);return"esriRelCardinalityOneToMany"===M.relation.cardinality||"esriRelCardinalityManyToMany"===M.relation.cardinality?H:H[0]},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",
shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",
shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",longMonthDayYearShortTime:"(datePattern: 'MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",longMonthDayYearShortTime24:"(datePattern: 'MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",longMonthDayYearLongTime:"(datePattern: 'MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",
longMonthDayYearLongTime24:"(datePattern: 'MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",dayShortMonthYearShortTime:"(datePattern: 'd MMM y', timePattern: 'h:mm a', selector: 'date and time')",dayShortMonthYearShortTime24:"(datePattern: 'd MMM y', timePattern: 'H:mm', selector: 'date and time')",dayShortMonthYearLongTime:"(datePattern: 'd MMM y', timePattern: 'h:mm:ss a', selector: 'date and time')",dayShortMonthYearLongTime24:"(datePattern: 'd MMM y', timePattern: 'H:mm:ss', selector: 'date and time')",
longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",longDateShortTime:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",longDateShortTime24:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",longDateLongTime:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",longDateLongTime24:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",
shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"},_dateFormatsJson:{shortDate:{datePattern:"M/d/y",selector:"date"},shortDateShortTime:{datePattern:"M/d/y",timePattern:"h:mm a",selector:"date and time"},shortDateShortTime24:{datePattern:"M/d/y",timePattern:"H:mm",selector:"date and time"},shortDateLongTime:{datePattern:"M/d/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLongTime24:{datePattern:"M/d/y",timePattern:"H:mm:ss",selector:"date and time"},
shortDateLE:{datePattern:"d/M/y",selector:"date"},shortDateLEShortTime:{datePattern:"d/M/y",timePattern:"h:mm a",selector:"date and time"},shortDateLEShortTime24:{datePattern:"d/M/y",timePattern:"H:mm",selector:"date and time"},shortDateLELongTime:{datePattern:"d/M/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLELongTime24:{datePattern:"d/M/y",timePattern:"H:mm:ss",selector:"date and time"},longMonthDayYear:{datePattern:"MMMM d, y",selector:"date"},longMonthDayYearShortTime:{datePattern:"MMMM d, y",
timePattern:"h:mm a",selector:"date and time"},longMonthDayYearShortTime24:{datePattern:"MMMM d, y",timePattern:"H:mm",selector:"date and time"},longMonthDayYearLongTime:{datePattern:"MMMM d, y",timePattern:"h:mm:ss a",selector:"date and time"},longMonthDayYearLongTime24:{datePattern:"MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},dayShortMonthYear:{datePattern:"d MMM y",selector:"date"},dayShortMonthYearShortTime:{datePattern:"d MMM y",timePattern:"h:mm a",selector:"date and time"},dayShortMonthYearShortTime24:{datePattern:"d MMM y",
timePattern:"H:mm",selector:"date and time"},dayShortMonthYearLongTime:{datePattern:"d MMM y",timePattern:"h:mm:ss a",selector:"date and time"},dayShortMonthYearLongTime24:{datePattern:"d MMM y",timePattern:"H:mm:ss",selector:"date and time"},longDate:{datePattern:"EEEE, MMMM d, y",selector:"date"},longDateShortTime:{datePattern:"EEEE, MMMM d, y",timePattern:"h:mm a",selector:"date and time"},longDateShortTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm",selector:"date and time"},longDateLongTime:{datePattern:"EEEE, MMMM d, y",
timePattern:"h:mm:ss a",selector:"date and time"},longDateLongTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},longMonthYear:{datePattern:"MMMM y",selector:"date"},shortMonthYear:{datePattern:"MMM y",selector:"date"},year:{datePattern:"y",selector:"date"}},_reHref:/href\s*=\s*(")([^"]+)"/ig,_reHrefApos:/href\s*=\s*(')([^']+)'/ig,_fixTokens:function(C,y){var v=this;return C.replace(/(\{([^\{\r\n]+)\})/g,function(A,G,F){A=v._getLayerFieldInfo(y,F);return"$"+(A?"{"+
A.name+"}":G)})},_encodeAttributes:function(C,y){C=B.clone(C)||{};var v,A;for(v in C)(A=C[v])&&"string"===typeof A&&(A=y?A:encodeURIComponent(A),A=A.replace(/'/g,"\x26apos;"),C[v]=A);return C},_processFieldsInLinks:function(C,y){var v=this._encodeAttributes(y),A=this._encodeAttributes(y,!0);y=B.hitch(this,this._addValuesToHref,y,v,A);C&&(C=C.replace(this._reHref,y).replace(this._reHrefApos,y));return C},_addValuesToHref:function(C,y,v,A,G,F){F=F&&B.trim(F);return A=a.substitute(F&&0===F.indexOf("${")?
"'"===G?v:C:y,A)},_getLayerFieldInfo:function(C,y){return C&&C.getField?C.getField(y):null},_formatValue:function(C,y,v,A){var G=this._fieldsMap[y.toLowerCase()],F=G&&G.format;y=-1!==l.indexOf(v.dateFormat.properties,y);var H="number"===typeof C&&!y&&(!F||!F.dateFormat);if(!a.isDefined(C)||!G||!a.isDefined(F))return this._applyFormatting(C,H);G=F.hasOwnProperty("places")||F.hasOwnProperty("digitSeparator");var L=F.hasOwnProperty("digitSeparator")?F.digitSeparator:!0;if(G&&!y)var M={formatType:"NumberFormat",
places:a.isDefined(F.places)&&(!A||0<F.places)?Number(F.places):Infinity};else if(F.dateFormat)M=B.mixin({formatType:"DateFormat",utcOffset:this.utcOffset},this._dateFormatsJson[F.dateFormat]||this._dateFormatsJson.shortDateShortTime);else return this._applyFormatting(C,H);var Q=this._applyFormatFunctions(C,M,v);G&&-1<C.constructor.toString().indexOf("Array")&&(Q="",l.forEach(C,B.hitch(this,function(S,I){I&&(Q+=" ");Q+=this._applyFormatFunctions(S,M,v)})));G&&!L&&E.group&&(Q=Q.replace(new RegExp("\\"+
E.group,"g"),""));y&&(Q='\x3cspan class\x3d"esriDateValue"\x3e'+Q+"\x3c/span\x3e");return this._applyFormatting(Q,H)},_applyFormatFunctions:function(C,y,v){y&&v&&(v.format={myKey:y});C=a.substitute({myKey:C},"${myKey}",v)||"";y&&v&&(v.format=null);return C},_applyFormatting:function(C,y){return y?this._forceLTR(C):this._applyPreWrap(C)},_forceLTR:function(C){var y=d("ie");return y&&10>=y?C:"\x3cspan class\x3d'esriNumericValue'\x3e"+C+"\x3c/span\x3e"},_applyPreWrap:function(C){return"string"===typeof C?
C.replace(this._reNewline,"\x3cspan class\x3d'charNewLine'\x3e$1\x3c/span\x3e"):C},_insertOffset:function(C){C&&(C=a.isDefined(this.utcOffset)?C.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):C);return C},_getDomainName:function(C,y,v,A){return(C=C.getDomain&&C.getDomain(v,{feature:y}))&&C.codedValues?C.getName(A):null},_getTypeName:function(C,y,v){return(C=C.getType&&C.getType(y))&&C.name},_getRelatedRecords:function(C){var y=C.graphic,v;this._relatedLayersInfoPromise||(this._relatedLayersInfoPromise=
this._getRelatedLayersInfo(C).then(B.hitch(this,function(A){for(v in A)A.hasOwnProperty(v)&&A[v]&&(this._relatedLayersInfo[v].relatedLayerInfo=A[v])})));return this._relatedLayersInfoPromise.then(B.hitch(this,function(){return this._queryRelatedLayers(y)})).then(B.hitch(this,function(A){this._setRelatedRecords(y,A);return A}))},_getRelatedLayersInfo:function(C){var y=C.fieldsInfo,v,A={};var G=C.graphic.getSourceLayer();this._relatedLayersInfo||(this._relatedLayersInfo={});l.forEach(y,function(F){var H;
var L=this._fromRelatedFieldName(F.fieldName);var M=L[0];L=L[1];if(M&&(!this._relatedLayersInfo[M]&&G&&G.relationships&&(l.some(G.relationships,function(S){if(S.id==M)return H=S,!0}),H&&(this._relatedLayersInfo[M]={relation:H,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[M]&&(this._relatedLayersInfo[M].relatedFields.push(L),F.statisticType))){var Q=new x;Q.statisticType=F.statisticType;Q.onStatisticField=L;Q.outStatisticFieldName=L;this._relatedLayersInfo[M].outStatistics.push(Q)}},
this);for(v in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(v)&&this._relatedLayersInfo[v]&&(C=this._relatedLayersInfo[v].relation,C=G.url.replace(/[0-9]+$/,C.relatedTableId),this._relatedLayersInfo[v].relatedLayerUrl=C,A[v]=n({url:C,content:{f:"json"},callbackParamName:"callback"}));return q(A)},_queryRelatedLayers:function(C){var y={},v;for(v in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(v)&&(y[v]=this._queryRelatedLayer({graphic:C,relatedInfo:this._relatedLayersInfo[v]}));
return q(y)},_queryRelatedLayer:function(C){var y,v;var A=C.graphic;var G=A.getSourceLayer();var F=G.url.match(/[0-9]+$/g)[0];var H=C.relatedInfo;var L=H.relatedLayerInfo;var M=H.relatedLayerUrl;var Q=H.relation;C=l.filter(L.relationships,function(Y){return Y.relatedTableId===parseInt(F,10)});1===C.length?y=C[0]:1<C.length&&l.some(C,function(Y){Y.id===Q.id&&(y=Y);return!!y});if(y){var S=new g;l.some(L.fields,function(Y){if(Y.name===y.keyField)return v=-1!==l.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger",
"esriFieldTypeSingle","esriFieldTypeDouble"],Y.type)?"number":"string",!0});if(y.relationshipTableId&&y.keyFieldInRelationshipTable){var I=new t;this._queryRelatedRecords(A,y).then(B.hitch(this,function(Y){var aa;(aa=Y[A.attributes[G.objectIdField]])?(Y=l.map(aa.features,function(la){return la.attributes[L.objectIdField]},this),H.outStatistics&&0<H.outStatistics.length&&L.supportsStatistics&&(J=new g,J.where=this._chunkWhereInClause(L.objectIdField,Y,1E3),J.outFields=S.outFields,J.outStatistics=H.outStatistics),
J&&(U=new b(M),U.execute(J).then(B.hitch(this,function(la){var T=[];T.push(aa);T.push(la);I.resolve(T)})))):I.resolve()}))}else{var P="string"===v?y.keyField+"\x3d'"+A.attributes[Q.keyField]+"'":y.keyField+"\x3d"+A.attributes[Q.keyField];S.where=P;S.outFields=H.relatedFields;if(H.outStatistics&&0<H.outStatistics.length&&L.supportsStatistics){var J=new g;J.where=S.where;J.outFields=S.outFields;J.outStatistics=H.outStatistics}var U=new b(M);P=[];P.push(U.execute(S));J&&P.push(U.execute(J))}}return P?
q(P):I?I.promise:void 0},_setRelatedRecords:function(C,y){this._relatedInfo=[];for(var v in y)y.hasOwnProperty(v)&&y[v]&&(C=y[v],this._relatedInfo[v]={},this._relatedInfo[v].relatedFeatures=C[0].features,a.isDefined(C[1])&&(this._relatedInfo[v].relatedStatsFeatures=C[1].features))},_handlerErrorResponse:function(C,y){C.reject(y)},_fromRelatedFieldName:function(C){var y=[];-1!==C.indexOf(this._relatedFieldPrefix)&&(C=C.split("/"),y=C.slice(1));return y},_toRelatedFieldName:function(C){var y="";C&&
0<C.length&&(y=this._relatedFieldPrefix+C[0]+"/"+C[1]);return y},_queryRelatedRecords:function(C,y){var v=C.getSourceLayer(),A=new w;A.outFields=["*"];A.relationshipId=y.id;A.objectIds=[C.attributes[v.objectIdField]];return v.queryRelatedFeatures(A)},_removeEmptyHref:function(C){return C.replace(/href=(""|'')/gi,"")},_chunkWhereInClause:function(C,y,v){for(var A=0,G=[];A<y.length;)G.push(C+" IN ("+y.slice(A,v+A)+")"),A+=v;return G.join(" OR ")}});return h.PopupInfo=h.PopupInfoTemplate=f})},"dojox/html/entities":function(){define(["dojo/_base/lang"],
function(f){var B=f.getObject("dojox.html.entities",!0),l=function(c,u){if(u._encCache&&u._encCache.regexp&&u._encCache.mapper&&u.length==u._encCache.length){var t=u._encCache.mapper;var d=u._encCache.regexp}else{t={};d=["["];var q;for(q=0;q<u.length;q++)t[u[q][0]]="\x26"+u[q][1]+";",d.push(u[q][0]);d.push("]");d=new RegExp(d.join(""),"g");u._encCache={mapper:t,regexp:d,length:u.length}}return c=c.replace(d,function(m){return t[m]})},e=function(c,u){if(u._decCache&&u._decCache.regexp&&u._decCache.mapper&&
u.length==u._decCache.length){var t=u._decCache.mapper;var d=u._decCache.regexp}else{t={};d=["("];var q;for(q=0;q<u.length;q++){var m="\x26"+u[q][1]+";";q&&d.push("|");t[m]=u[q][0];d.push(m)}d.push(")");d=new RegExp(d.join(""),"g");u._decCache={mapper:t,regexp:d,length:u.length}}return c=c.replace(d,function(a){return t[a]})};B.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];B.latin=[["\u00a1","iexcl"],["\u00a2","cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4",
"curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],
["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],
["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1","ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],
["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],
["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],
["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],
["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],["\u222b","int"],["\u2234","there4"],["\u223c","sim"],
["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665","hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153",
"oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039","lsaquo"],["\u203a","rsaquo"]];B.encode=function(c,
u){c&&(u?c=l(c,u):(c=l(c,B.html),c=l(c,B.latin)));return c};B.decode=function(c,u){c&&(u?c=e(c,u):(c=e(c,B.html),c=e(c,B.latin)));return c};return B})},"esri/ArcadeExpression":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./layers/support/attributeUtils ./support/expressionUtils".split(" "),function(f,B,l,e,c,u){f=f(null,{declaredClass:"esri.ArcadeExpression",expression:null,profile:null,returnType:null,async:null,id:null,syntaxTree:null,_traits:null,_attributeDef:null,_attributeCache:null,
_compiled:!1,constructor:function(t){B.mixin(this,t);this.returnType=this.returnType||"string";this.id=c.getAttributeId(this.expression);this._setSyntaxTree(this.profile.parse(this));this.async=this.async||this.profile.isAsync(this)},hasGeometryOperations:function(){var t=this._traits.geometryOperations;void 0===t&&(t=this._traits.geometryOperations=u.hasGeometryOperations(this.syntaxTree));return t},hasFeatureSetOperations:function(){var t=this._traits.featureSetOperations;void 0===t&&(t=this._traits.featureSetOperations=
u.hasFeatureSetOperations(this.syntaxTree));return t},hasVariable:function(t){var d=this._traits.variables;void 0===d[t]&&(d[t]=u.hasVariable(this.syntaxTree,t));return d[t]},hasFunction:function(t){var d=this._traits.functions;void 0===d[t]&&(d[t]=u.hasFunction(this.syntaxTree,t));return d[t]},evaluate:function(t){this._compile();var d=this._attributeCache.compiledFunc;return this.async?u.executeAsyncFunction(d,t):u.executeFunction(d,t)},_setSyntaxTree:function(t){this.syntaxTree=t;this._compiled=
!1;this._traits={variables:{},functions:{}};this._createLegacyValueObjects()},_createLegacyValueObjects:function(){this._attributeDef={valueExpression:this.expression};this._attributeCache={attributeInfo:this._attributeDef,isNumeric:"number"===this.returnType,idSource:this.expression,id:this.id,hasExpr:!0,compiledFunc:null,syntaxTree:this.syntaxTree,isScaleDriven:!1,dependsOnView:this.hasVariable("$view"),dependsOnGeometry:this.hasGeometryOperations(),isJSFunc:!1}},_compile:function(){this._compiled||
(this._attributeCache.compiledFunc=this.profile.compile(this),this._compiled=!0)}});return e.ArcadeExpression=f})},"esri/arcadeProfiles/popupProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(f,B,l,e,c,u,t,d){f=new (f(null,{declaredClass:"esri.arcadeProfiles.PopupProfile",defaults:{globals:{featureSet:["$layer","$datastore","$map","$aggregatedfeatures"],async:["$layer","$datastore",
"$map","$aggregatedfeatures"]},context:{vars:{$feature:"any",$layer:"any",$datastore:"any",$map:"any",$aggregatedfeatures:"any"}}},initialize:function(q){var m=[];d.hasGeometryOperations(q)&&m.push(t.enableGeometryOperations());(d.hasFeatureSetOperations(q)||d.hasVariables(q,this.defaults.globals.featureSet))&&m.push(t.enableFeatureSetOperations());d.isAsync(q)&&m.push(t.enableAsyncOperations());return c(m)},isAsync:function(q){q=[q];return d.hasFeatureSetOperations(q)||d.hasVariables(q,this.defaults.globals.async)},
parse:function(q){return t.createSyntaxTree(q.expression)},compile:function(q){var m=B.clone(this.defaults.context);m.useAsync=q.async;return q.syntaxTree?t.createFunction(q.syntaxTree,m):null},getEvalOptions:function(q){var m=q.expression,a=q.feature,h=q.layer,n=q.aggregatedFeaturesLayer,r=q.map;q=q.spatialReference;a=a&&m.hasVariable("$feature")?u.createFromGraphicLikeObject(a.geometry,a.attributes,h):null;var k,g;if(h){var b={spatialReference:q};m.hasVariable("$layer")&&(k=h.getMap()?t.createFeatureSetFromLayer(h,
b):t.createFeatureSetFromLayerUrl(h.url,b));if(m.hasVariable("$datastore"))var w=(w=d.getServiceUrl(h.url))?t.createFeatureSetCollectionFromServiceUrl(w,b):null;m.hasVariable("$aggregatedfeatures")&&n&&(g=n.getMap()?t.createFeatureSetFromLayer(n,b):null)}m=r&&m.hasVariable("$map")?t.createFeatureSetCollectionFromMap(r):null;return{context:{vars:{$feature:a,$layer:k,$datastore:w,$map:m,$aggregatedfeatures:g},spatialReference:q}}}}));B.setObject("arcadeProfiles.popupProfile",f,e);return f})},"esri/dijit/PopupRenderer":function(){define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/sniff dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style ../libs/sanitizer/Sanitizer dojox/html/entities dijit/_Widget dijit/_Templated ../kernel ../lang ../urlUtils ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E){var C=0,y=E.widgets.popup,v=E.widgets.templatePicker;B=B([D,g,b],{declaredClass:"esri.dijit._PopupRenderer",_sanitizer:new r({whiteList:{span:["class"],dd:[],dl:[],dt:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],sub:[],sup:[],animate:[],animatetransform:[],circle:[],clippath:[],defs:[],ellipse:[],g:[],image:[],line:[],lineargradient:[],marker:[],mask:[],path:[],pattern:[],polygon:[],polyline:[],radialgradient:[],rect:[],stop:[],svg:[],"switch":[],symbol:[],
text:[],textpath:[],tspan:[],use:[]}},!0),constructor:function(){this._nls=e.mixin({},y)},templateString:"\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'statusSection hidden' dojoAttachPoint\x3d'_status'\x3e\x3c/div\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
showTitle:!0,startup:function(){this.inherited(arguments);this._showStatus(v.loading);this._contentDfd=this.template.getComponents(this.graphic).then(e.hitch(this,this._handleComponentsSuccess)).otherwise(e.hitch(this,this._handleComponentsError))},destroy:function(){this._contentDfd&&this._contentDfd.cancel();this._attachmentsDfd&&this._attachmentsDfd.cancel();this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._contentDfd=this._attachmentsDfd=null;this.inherited(arguments)},
_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia())},_goToNextMedia:function(){this._mediaPtr+1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia())},_updateUI:function(){var A=this._mediaInfos,G=A.length,F=this.domNode,H=this._prevMedia,L=this._nextMedia;if(1<G){var M=0,Q=0;c.forEach(A,function(S){"image"===S.type?M++:-1!==S.type.indexOf("chart")&&Q++});M&&(m.set(this._imageCount,"innerHTML",M),u.query(".summary .image",
F).removeClass("hidden"));Q&&(m.set(this._chartCount,"innerHTML",Q),u.query(".summary .chart",F).removeClass("hidden"))}else u.query(".summary",F).addClass("hidden"),a.add(H,"hidden"),a.add(L,"hidden");A=this._mediaPtr;0===A?a.add(H,"hidden"):a.remove(H,"hidden");A===G-1?a.add(L,"hidden"):a.remove(L,"hidden");this._destroyFrame()},_displayMedia:function(){var A=this._mediaInfos[this._mediaPtr],G=A.title,F=A.caption,H=u.query(".mediaSection .hzLine",this.domNode)[0];m.set(this._mediaTitle,"innerHTML",
this._sanitizer.sanitize(G));a[G?"remove":"add"](this._mediaTitle,"hidden");m.set(this._mediaCaption,"innerHTML",this._sanitizer.sanitize(F));a[F?"remove":"add"](this._mediaCaption,"hidden");a[G&&F?"remove":"add"](H,"hidden");this._rid=null;if("image"===A.type)this._showImage(A);else{var L=this;G=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"];F=A.value.theme||this.chartTheme;e.isString(F)&&(F=F.replace(/\./gi,"/"),-1===F.indexOf("/")&&(F="dojox/charting/themes/"+F));F||(F="./Rainbow");
G.push(F);try{var M=this._rid=C++;f(G,function(Q,S,I){M===L._rid&&(L._rid=null,L._showChart(A.type,A.value,Q,S,I))})}catch(Q){}}},_preventNewTab:function(A){return(A=A&&e.trim(A).toLowerCase())&&(0===A.indexOf("mailto:")||0===A.indexOf("tel:"))},_showImage:function(A){a.add(this._mediaFrame,"image");var G=n.get(this._gallery,"height"),F=A.value,H=k.decode(F.linkURL);F=k.decode(F.sourceURL);var L;H&&(L=h.create("a",{href:H,target:this._preventNewTab(H)?"":"_blank"},this._mediaFrame));H=A.refreshInterval?
this._addURLParameter(F,"timestamp",Date.now()):F;h.create("img",{className:"esriPopupMediaImage",src:H},L||this._mediaFrame);var M=u.query(".esriPopupMediaImage",this._mediaFrame)[0];this._imageLoadHandle=l.connect(M,"onload",this,function(){this._clearImageHandles();this._imageLoaded(M,G);this._initImageRefresh(A)})},_addURLParameter:function(A,G,F){var H=-1===A.indexOf("?")?"?":"\x26";return A+H+G+"\x3d"+F},_initImageRefresh:function(A){if(A.refreshInterval){var G=6E4*A.refreshInterval;this._imageRefreshHandle=
setTimeout(e.hitch(this,function(){this._destroyFrame();this._showImage(A)}),G)}},_clearImageHandles:function(){l.disconnect(this._imageLoadHandle);this._imageLoadHandle=null;clearTimeout(this._imageRefreshHandle);this._imageRefreshHandle=null},_showChart:function(A,G,F,H,L){a.remove(this._mediaFrame,"image");F=this._chart=new F(h.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});L&&F.setTheme(L);switch(A){case "piechart":F.addPlot("default",{type:"Pie",labels:!1});F.addSeries("Series A",
G.fields);break;case "linechart":F.addPlot("default",{type:"Markers"});F.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});F.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});c.forEach(G.fields,function(M,Q){M.x=Q+1});F.addSeries("Series A",G.fields);break;case "columnchart":F.addPlot("default",{type:"Columns",gap:3});F.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});F.addSeries("Series A",G.fields);break;case "barchart":F.addPlot("default",{type:"Bars",
gap:3}),F.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),F.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),F.addSeries("Series A",G.fields)}this._action=new H(F);F.render()},_destroyFrame:function(){this._rid=null;this._clearImageHandles();this._chart&&(this._chart.destroy(),this._chart=null);this._action&&(this._action.destroy(),this._action=null);m.set(this._mediaFrame,"innerHTML","")},_imageLoaded:function(A,G){var F=A.height;F<G&&n.set(A,"marginTop",
Math.round((G-F)/2)+"px")},_attListHandler:function(A,G){if(A===this._attachmentsDfd){this._attachmentsDfd=null;var F="";G instanceof Error||!G||!G.length||c.forEach(G,function(H){F+="\x3cli\x3e";F+="\x3ca href\x3d'"+z.addProxy(H.url)+"' target\x3d'_blank'\x3e"+(H.name||"[No name]")+"\x3c/a\x3e";F+="\x3c/li\x3e"});m.set(this._attachmentsList,"innerHTML",F||"\x3cli\x3e"+this._nls.NLS_noAttach+"\x3c/li\x3e")}},_createLinkIfURI:function(A,G){var F=z.getURIInfo(A);if(F){var H=A.match(F.pattern);A=H&&
H[2];H=k.decode(H[1]);h.create("a",{target:"_blank",href:H,title:H,innerHTML:this._sanitizer.sanitize(x.substitute({appName:F.appName,hierPart:A},F.label))},G)}else m.set(G,"innerHTML",this._sanitizer.sanitize(A))},_showStatus:function(A){m.set(this._status,"innerHTML",A);a.remove(this._status,"hidden");u.query(".mainSection",this.domNode).addClass("hidden")},_hideStatus:function(){m.set(this._status,"innerHTML","");a.add(this._status,"hidden");u.query(".mainSection",this.domNode).removeClass("hidden")},
_handleComponentsSuccess:function(A){if(A){this._hideStatus();var G=this.showTitle?A.title:"",F=A.description,H=A.fields,L=A.mediaInfos,M=this.domNode,Q=this._nls,S=this,I=this.template,P=this.graphic;this._prevMedia.title=Q.NLS_prevMedia;this._nextMedia.title=Q.NLS_nextMedia;m.set(this._title,"innerHTML",this._sanitizer.sanitize(G));G||a.add(this._title,"hidden");if(!A.hasDescription&&H&&(F="",H=c.map(H,function(U){var Y=h.create("tr",{vAlign:"top"});h.create("td",{className:"attrName",innerHTML:this._sanitizer.sanitize(U[0])},
Y);var aa=h.create("td",{className:"attrValue"},Y);this._createLinkIfURI(U[1],aa);return Y},this),H.length)){var J=h.create("table",{className:"attrTable",cellPadding:"0px",cellSpacing:"0px"});c.forEach(H,function(U){J.appendChild(U)})}J?(this._description.appendChild(J),F=!0):m.set(this._description,"innerHTML",this._sanitizer.sanitize(F));F||a.add(this._description,"hidden");u.query("a",this._description).forEach(function(U){S._preventNewTab(U.href)?"_blank"===U.target&&m.remove(U,"target"):m.set(U,
"target","_blank")});G&&F?u.query(".mainSection .hzLine",M).removeClass("hidden"):G||F?u.query(".mainSection .hzLine",M).addClass("hidden"):u.query(".mainSection",M).addClass("hidden");if(G=this._attachmentsDfd=I.getAttachments(P))G.addBoth(e.hitch(this,this._attListHandler,G)),m.set(this._attachmentsList,"innerHTML","\x3cli\x3e"+Q.NLS_searching+"...\x3c/li\x3e"),u.query(".attachmentsSection",M).removeClass("hidden");L&&L.length&&(u.query(".mediaSection",M).removeClass("hidden"),q.setSelectable(this._mediaFrame,
!1),this._mediaInfos=L,this._mediaPtr=0,this._updateUI(),this._displayMedia());A.editSummary&&(m.set(this._editSummary,"innerHTML",this._sanitizer.sanitize(A.editSummary)),L&&L.length&&a.remove(this._mediaBreak,"hidden"),a.remove(this._editSummarySection,"hidden"));this.emit("content-update")}else this._showStatus(y.NLS_noInfo)},_handleComponentsError:function(A){A&&"cancel"===A.dojoType||this._showStatus(y.NLS_noInfo)}});e.setObject("dijit._PopupRenderer",B,w);return B})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),
function(f,B,l,e,c,u){return f([u,c],{_onMap:function(t){var d=this.constructor._onMap;d&&d.FINAL||(delete this.constructor._onMap,d=this.registerConnectEvents(),d.FINAL=!0);t=t.toLowerCase();if(d[t])var q=this[d[t].method];else t=this._onCamelCase(t),this[t]&&(q=t);return q},on:function(t,d){var q=this._onMap(t),m=t.replace(/\-/g,""),a="on"+m in this.domNode;return q||!a?this.inherited(arguments):this.own(e(this.domNode,m,d))[0]},emit:function(t,d,q){var m,a=t.toLowerCase(),h=this.constructor._onMap||
this.registerConnectEvents();var n=this[this._onMap(a)];d=d||{};d.target||(d.target=this);if(n&&h&&h[a]){this._onObj2Arr(function(){m=Array.prototype.slice.call(arguments)},h[a].argKeys)(d);var r=B.mixin({},arguments);r[2]=m;r[0]=h[a].name.replace(/^on/,"")}return this.inherited(r||arguments)}})})},"esri/dijit/Legend/utils":function(){define(["dojo/_base/lang","../../lang","dojo/i18n!../../nls/jsapi"],function(f,B,l){var e=l.widgets.legend;return{getVisualVariableTitle:function(c,u){var t=c.field,
d=c.normalizationField,q=!1,m=!1,a=!1;t=f.isFunction(t)?null:t;d=f.isFunction(d)?null:d;if(c.legendOptions&&c.legendOptions.title)var h=c.legendOptions.title;else if(c.valueExpressionTitle)h=c.valueExpressionTitle;else{if(u.renderer&&u.renderer.authoringInfo&&u.renderer.authoringInfo.visualVariables){var n=u.renderer.authoringInfo.visualVariables;for(c=0;c<n.length;c++){var r=n[c];if("colorInfo"===r.type&&"ratio"===r.style){q=!0;break}else if("colorInfo"===r.type&&"percent"===r.style){m=!0;break}else if("colorInfo"===
r.type&&"percentTotal"===r.style){a=!0;break}}}(q=a&&"showRatioPercentTotal"||m&&"showRatioPercent"||q&&"showRatio"||d&&"showNormField"||t&&"showField"||null)&&(h=B.substitute({field:t&&u.getFieldLabel(t),normField:d&&u.getFieldLabel(d)},"showField"===q?"${field}":e[q]))}return h},getRendererTitle:function(c,u){if(c){if("esri.renderer.ClassBreaksRenderer"===c.declaredClass){var t=c.attributeField;var d=c.normalizationField;var q="percent-of-total"===c.normalizationType}t=f.isFunction(t)?null:t;d=
f.isFunction(d)?null:d;if(c.legendOptions&&c.legendOptions.title)var m=c.legendOptions.title;else c.valueExpressionTitle?m=c.valueExpressionTitle:(c=d&&"showNormField"||(q?"showNormPct":null)||t&&"showField"||null)&&(m=B.substitute({field:t&&u.getFieldLabel(t),normField:d&&u.getFieldLabel(d)},"showField"===c?"${field}":e[c]))}return m}}})},"esri/layers/clustering/GeohashAggregation":function(){define("dojo/has dojo/_base/declare dojo/_base/lang dojo/_base/array ../../kernel ../../Evented ../../geometry/Point ../../geometry/Extent ../../geometry/mathUtils ../../support/expressionUtils ../../core/timerUtils ../support/attributeUtils ./geohashUtils ./statUtils".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r){f=B(u,{loaded:!1,started:!1,map:null,layer:null,lod:null,tolerance:null,clusterMode:null,clusterRadius:null,sortEnabled:!0,filterEnabled:!0,bufferEnabled:!0,updateEnabled:!0,clusters:null,clustersEnabled:!0,statisticInfos:null,defaults:{lod:1,tolerance:0,clusterMode:"auto",clusterRadius:80,sortEnabled:!0,filterEnabled:!0,bufferEnabled:!0,updateEnabled:!0},_eventHandles:null,_updateHandle:null,_indexHandle:null,_cellIndex:null,_globalIndex:null,_perfProfile:null,
_indexUpdated:!1,_cellSizeScaleFactor:1.5,_extentScaleFactor:1.25,_maxGeohashLength:12,_minClusterRadius:15,_levelChange:!0,_clusterFieldPrefix:"cluster_",_mapLevelChange:!1,constructor:function(k){this._update=l.hitch(this,this._update);this._indexFeatures=l.hitch(this,this._indexFeatures);this._eventHandles=[];this._globalIndex={numFeatures:null,fullExtent:null,lodStats:null};this._perfProfile={lastIndex:{total:null,numFeatures:0},lastUpdate:{cells:null,clusters:null,total:null}};this.clusters=
[];this.map=k.map;this.layer=k.layer;this.setLod(k.lod);this.setTolerance(k.tolerance);this.setClusterMode(k.clusterMode);this.setClusterRadius(k.clusterRadius);this.setSortEnabled(k.sortEnabled);this.setFilterEnabled(k.filterEnabled);this.setBufferEnabled(k.bufferEnabled);this.setUpdateEnabled(k.updateEnabled);this.setStatisticInfos(k.statisticInfos);this._load();this.loaded?this._startup():this._eventHandles.push(this.on("load",l.hitch(this,this._startup)))},destroy:function(k){this._displayFeatures(!0,
k);e.forEach(this._eventHandles,function(g){g.remove()});a.clearTimeout(this._updateHandle);a.clearTimeout(this._indexHandle);this._cellIndex=this._globalIndex=this._eventHandles=this._updateHandle=this._indexHandle=this.map=this.layer=this.clusters=null},setLod:function(k){var g=this.lod;this.lod=k||this.defaults.lod;g!==this.lod&&this.update()},setTolerance:function(k){var g=this.tolerance;this.tolerance=k||this.defaults.tolerance;g!==this.tolerance&&this.update()},setClusterMode:function(k){var g=
this.clusterMode;this.clusterMode=k||this.defaults.clusterMode;this._evalClusterParams();g!==this.clusterMode&&this.update()},setClusterRadius:function(k){var g=this.clusterRadius;this.clusterRadius=null!=k?k:this.defaults.clusterRadius;this._evalClusterParams();g!==this.clusterRadius&&this.update()},setSortEnabled:function(k){var g=this.sortEnabled;this.sortEnabled=null!=k?!!k:this.defaults.sortEnabled;g!==this.sortEnabled&&this.update()},setFilterEnabled:function(k){var g=this.filterEnabled;this.filterEnabled=
null!=k?!!k:this.defaults.filterEnabled;g!==this.filterEnabled&&this.update()},setBufferEnabled:function(k){var g=this.bufferEnabled;this.bufferEnabled=null!=k?!!k:this.defaults.bufferEnabled;g!==this.bufferEnabled&&this.update()},setUpdateEnabled:function(k){var g=this.updateEnabled;(this.updateEnabled=null!=k?!!k:this.defaults.updateEnabled)&&g!==this.updateEnabled&&(this._mapLevelChange=!0,this.update())},setStatisticInfos:function(k){this.statisticInfos=k||[];this.loaded&&this._applyStatInfos(this.statisticInfos)},
update:function(){this.loaded&&null==this._updateHandle&&(this._updateHandle=a.setTimeout(this._update,a.priority.HIGH))},isUpdateScheduled:function(){return null!=this._updateHandle},index:function(){this.loaded&&null==this._indexHandle&&(this._indexHandle=a.setTimeout(this._indexFeatures,a.priority.HIGH))},getCell:function(k){return this._cellIndex[k.length][k]},getCluster:function(k){var g;e.some(this.clusters,function(b){-1<e.indexOf(b.geohashes,k)&&(g=b);return!!g});return g},getCellsInCluster:function(k){var g=
[];e.forEach(k&&k.geohashes,function(b){(b=this.getCell(b))&&g.push(b)},this);return g},getFeaturesInCluster:function(k){var g=[];k=this.getCellsInCluster(k);e.forEach(k,function(b){Array.prototype.push.apply(g,b.features)});return g},toggleFeatureVisibility:function(k){this.index()},getCurrentLodStats:function(){var k=this._globalIndex.lodStats;return k&&k[this.lod]},getNumFeatures:function(){return this._globalIndex.numFeatures},getFullExtent:function(){var k=this._globalIndex.fullExtent;return k&&
Infinity!==k.xmin?new d(k):null},_load:function(){this._displayFeatures(!1);this._checkLoadStatus();this.map.loaded||this._eventHandles.push(this.map.on("load",l.hitch(this,this._checkLoadStatus)));this.layer.loaded||this._eventHandles.push(this.layer.on("load",l.hitch(this,this._checkLoadStatus)))},_checkLoadStatus:function(){if(this.map.loaded&&this.layer.loaded){if("esriGeometryPoint"!==this.layer.geometryType)var k=Error("GeohashAggregation is supported only for points");else{var g=this.map.spatialReference;
g.isWebMercator()||4326===g.wkid||(k=Error("GeohashAggregation is supported only when map spatial reference is WGS84 or WebMercator"))}k?(this.loadError=k,this.emit("load-error",{error:k})):(this.loaded=!0,this.emit("load"))}},_startup:function(){this._evalUpdateStatus();this.index();this._processExtentChange();this._eventHandles.push(this.layer.on("update-end",l.hitch(this,this.index)),this.layer.on("edits-complete",l.hitch(this,this.index)),this.layer.on("graphics-clear",l.hitch(this,this.index)),
this.layer.on("suspend",l.hitch(this,this._evalUpdateStatus)),this.layer.on("resume",l.hitch(this,this._evalUpdateStatus)),this.map.on("extent-change",l.hitch(this,this._processExtentChange)))},_evalUpdateStatus:function(){this.setUpdateEnabled(!this.layer.suspended)},_processExtentChange:function(k){this._mapLevelChange=!(!k||!k.levelChange);this._evalClusterParams();this.update()},_update:function(){this._updateHandle=null;if(this.updateEnabled){this.emit("update-start");if(this.clustersEnabled){var k=
this.map.geographicExtent;if(k){var g=this._getIntersectingCells(k);k=this._getClusters(g.cells,k);this.clusters=k.clusters;this._applyStatInfosToClusters();g=g.profile;k=k.profile;var b=g.total+k.total;g.total=this._getElapsedTime(g.total);k.total=this._getElapsedTime(k.total);var w=this._perfProfile.lastUpdate={};w.cells=g;w.clusters=k;w.total=this._getElapsedTime(b)}}else this.clusters=[],this._perfProfile.lastUpdate=null;g=this._indexUpdated;this._indexUpdated=!1;k=this._mapLevelChange;this._mapLevelChange=
!1;this.emit("update-end",{levelChange:this._levelChange,mapLevelChange:k,indexChange:g})}},_displayFeatures:function(k,g){var b=this.layer;k=!k;b.suspendGraphics(k);!1!==g&&(k?b.clearNodes():b.redraw())},_indexFeatures:function(){this._indexHandle=null;var k=this._getTime();this._initializeIndexing();var g=0,b=this._globalIndex.fullExtent;e.forEach(this.layer.graphics,function(z){if(z.visible){var D=z.geometry,E=this._getLngLat(D);if(E){var C=D.getCacheValue("_geohash");void 0===C&&(C=n.pointToGeohash(E),
D.setCacheValue("_geohash",C||null))}C&&(this._addGeohashToIndex(C,z,E),g++,this._updateExtent(b,E))}},this);this._applyStatInfosToIndex();this._globalIndex.numFeatures=g;for(var w=this._globalIndex.lodStats,x=1;x<=this._maxGeohashLength;x++)w[x]=this._getLODStats(x,g);this._perfProfile.lastIndex.total=this._getElapsedTime(k,this._getTime());this._perfProfile.lastIndex.numFeatures=g;this._indexUpdated=!0;this.emit("index-complete");this.started||(this.started=!0,this.emit("start"));this.update()},
_initializeIndexing:function(){this._globalIndex={numFeatures:0,fullExtent:{xmin:Infinity,ymin:Infinity,xmax:-Infinity,ymax:-Infinity},lodStats:{}};for(var k=this._cellIndex=[],g=1;g<=this._maxGeohashLength;g++)k[g]={}},_getLngLat:function(k){if(k){var g=k.getLongitude();k=k.getLatitude();k=null!=g&&null!=k?{x:g,y:k}:null}return k},_addGeohashToIndex:function(k,g,b){for(var w=this._cellIndex,x="",z=0;z<this._maxGeohashLength;z++){x+=k[z];var D=w[x.length],E=D[x];E||(E=D[x]={count:0,centroid:{x:null,
y:null},extent:{xmin:Infinity,ymin:Infinity,xmax:-Infinity,ymax:-Infinity},features:[],geohash:x,statistics:null});this._updateItem(E,1,b,!0);E.features.push(g)}},_getLODStats:function(k,g){var b=this._cellIndex[k],w=0,x=Infinity,z=-Infinity,D=null,E;for(E in b){var C=b[E];w++;C.count<x&&(x=C.count);C.count>z&&(z=C.count)}0<w&&(D=Number((g/w).toFixed(2)));return{lod:k,count:w,min:Infinity===x?null:x,max:-Infinity===z?null:z,avg:D}},_evalClusterParams:function(){if(this.loaded&&"auto"===this.clusterMode){var k=
this._getClusterParams(this.map.getResolutionInMeters(),this.clusterRadius,this._minClusterRadius);this._levelChange=this.lod!==k.lod;this.lod=k.lod;this.tolerance=k.tolerance}},_getClusterParams:function(k,g,b){g<b&&(g=b);k=Math.ceil(k*g);g=this._getClosestLODRange(k).max;do b=this._getCellSize(g),(b=k>=this._cellSizeScaleFactor*b||1===b)||(g+=1);while(!b);b=k/this._getCellSize(g);return{lod:g,tolerance:k,multiplier:Number(b.toFixed(2))}},_getClosestLODRange:function(k){for(var g,b=this._maxGeohashLength;1<=
b;b--)if(this._getCellSize(b)>=k){g=b;break}null==g&&(g=1);k=g+1;k>this._maxGeohashLength&&(k=this._maxGeohashLength);return{min:g,max:k}},_getCellSize:function(k){k=n.getCellSizeInMeters(k);return Math.ceil(Math.min(k.width,k.height))},_sorter:function(k,g){var b=k.centroid,w=g.centroid;return k.count>g.count?-1:k.count<g.count?1:b.x>w.x?-1:b.x<w.x?1:0},_getIntersectingCells:function(k){var g=this._getTime();this.bufferEnabled&&(k=k.expand(this._extentScaleFactor));var b=n.getIntersecting(k,this.lod,
this.bufferEnabled?this.tolerance:0);k=this._getTime();var w=[],x=this.tolerance,z=this.sortEnabled;e.forEach(b,function(D){(D=this.getCell(D))&&w.push(D)},this);x&&z&&w.sort(this._sorter);b=this._getTime();return{cells:w,profile:{findCells:this._getElapsedTime(g,k),scanAndSortCells:this._getElapsedTime(k,b),total:b-g}}},_getClusters:function(k,g){var b=this._getTime(),w=[],x={},z={findCells:0};e.forEach(k,function(D,E){(D=this._createCluster(D,x,z))&&w.push(D)},this);this._markIntersecting(w,g);
this.filterEnabled&&(w=this._getIntersectingClusters(w));k=this._getTime();return{clusters:w,profile:{findCellsInCluster:this._getElapsedTime(z.findCells),total:k-b}}},_markIntersecting:function(k,g){var b=g.normalize();e.forEach(k,function(w){var x=w.centroid.x,z=w.centroid.y;w.isIntersecting=e.some(b,function(D){return x>=D.xmin&&x<=D.xmax&&z>=D.ymin&&z<=D.ymax})})},_getIntersectingClusters:function(k){return e.filter(k,function(g){return g.isIntersecting})},_createCluster:function(k,g,b){if(!g[k.geohash]){var w=
[{cell:k,distance:0}];if(this.tolerance){var x=this._getTime(),z=n.getNeighborsWithinDistance(k.centroid,this.lod,this.tolerance);b.findCells+=this._getTime()-x;e.forEach(z,function(D){if(D!==k.geohash&&(D=this.getCell(D))){var E=this._calculateDistance(k.centroid,D.centroid);E<=this.tolerance&&w.push({cell:D,distance:E})}},this)}return this._mergeCells(w,g)}},_calculateDistance:function(k,g){return q.getLength(n.geographicToWebMercator(k),n.geographicToWebMercator(g))},_mergeCells:function(k,g){var b=
this._initializeCluster({},k[0].cell.geohash);e.forEach(k,function(w){var x=w.cell,z=x.geohash;w=w.distance;var D=g[z];if(D)if(w<D.distance)this._removeCellFromCluster(z,g);else return;g[z]={cluster:b,distance:w};this._updateItem(b,x.count,x.centroid);b.geohashes.push(z)},this);return b},_removeCellFromCluster:function(k,g){var b=g[k].cluster;delete g[k];k=e.indexOf(b.geohashes,k);-1<k&&b.geohashes.splice(k,1);this._reevaluateCluster(b)},_reevaluateCluster:function(k){var g=k.geohashes;k=this._initializeCluster(k,
k.primary);e.forEach(g,function(b){var w=this.getCell(b);w&&(this._updateItem(k,w.count,w.centroid),k.geohashes.push(b))},this)},_initializeCluster:function(k,g){k.count=0;k.centroid=new t(null,null);k.geohashes=[];k.primary=g;k.statistics=null;return k},_applyStatInfos:function(k){k=this._getValidStatInfos(k);this._applyStatInfosToIndex(k);this._applyStatInfosToClusters(k)},_getValidStatInfos:function(k){var g=[];e.forEach(k,function(b){var w=b.attributeInfo;b=b.statisticType;var x="angle"===w.attributeType;
if(r.isSupportedStatisticType(b)&&(!x||"avg"===b)){var z="arithmetic"===w.rotationType;g.push({attributeCache:h.createAttributeCache(w,"type"===b),identifier:r.getStatisticId(w,b),statFunctions:r.getStatisticFunctions(b),isAngular:x,isDate:"date"===w.attributeType,isArithmetic:z})}});return g},_applyStatInfosToIndex:function(k){k=k||this._getValidStatInfos(this.statisticInfos);var g=this._cellIndex;if(g)for(var b=1;b<=this._maxGeohashLength;b++){var w=g[b],x;for(x in w)this._applyStatInfosToCell(w[x],
k)}},_applyStatInfosToCell:function(k,g){var b=this._initializeStats(k,g);e.forEach(k.features,function(w){this._calcFeatureStats(w,g,b)},this);this._summarizeStats(k,b,g)},_calcFeatureStats:function(k,g,b){k.attributes&&e.forEach(g,function(w){var x=b[w.identifier],z=w.attributeCache;z=z?k._getDataValue(z.attributeInfo,z,m):null;w.statFunctions.updateCellStat(x,z,w)})},_applyStatInfosToClusters:function(k){k=k||this._getValidStatInfos(this.statisticInfos);var g=this._clusterFieldPrefix;e.forEach(this.clusters,
function(b){var w=this._initializeStats(b,k);e.forEach(this.getCellsInCluster(b),function(x){this._calcCellStats(x,k,w)},this);this._summarizeStats(b,w,k,g);b.attributes[g+"id"]=b.primary},this)},_calcCellStats:function(k,g,b){var w=k.statistics;e.forEach(g,function(x){var z=x.identifier;x.statFunctions.updateClusterStat(b[z],w[z],x)})},_initializeStats:function(k,g){var b=k.statistics={};e.forEach(g,function(w){b[w.identifier]=w.statFunctions.initialize(w)});return b},_summarizeStats:function(k,
g,b,w){var x=k.attributes={};w=w||"";x[w+"count"]=k.count;e.forEach(b,function(z){var D=this._getStatFieldName(z,w);x[D]=z.statFunctions.summarize(g[z.identifier],z)},this)},_getStatFieldName:function(k,g){return(g||"")+k.identifier},_updateItem:function(k,g,b,w){var x=b.y,z=k.centroid,D=k.count;z.x=(D*z.x+g*b.x)/(D+g);z.y=(D*z.y+g*x)/(D+g);k.count+=g;w&&this._updateExtent(k.extent,b)},_updateExtent:function(k,g){var b=g.x;g=g.y;b<k.xmin&&(k.xmin=b);b>k.xmax&&(k.xmax=b);g<k.ymin&&(k.ymin=g);g>k.ymax&&
(k.ymax=g)},_getTime:function(){return window.performance?window.performance.now():(new Date).getTime()},_getElapsedTime:function(k,g){k=null!=k&&null!=g?g-k:k;if(null!=k){var b="millisecond";1E3<=k&&(k/=1E3,b="second",60<=k&&(k/=60,b="minute"));b={value:Number(k.toFixed(2)),unit:b}}return b}});l.setObject("layers.clustering.GeohashAggregation",f,c);return f})},"esri/core/timerUtils":function(){define([],function(){function f(u){var t,d=u.length;for(t=0;t<d;t++)u[t]()}var B={LOW:1,HIGH:2},l,e={};
e[B.LOW]=[];e[B.HIGH]=[];var c=function(){clearTimeout(l);l=null;var u=e[B.HIGH];e[B.HIGH]=[];f(u);u=e[B.LOW];e[B.LOW]=[];f(u)};return{priority:B,callbackQueue:e,setTimeout:function(u,t){u=[t,e[t].push(u)-1];l||(l=setTimeout(c,0));return u},clearTimeout:function(u){u&&e[u[0]].splice(u[1],1)}}})},"esri/layers/clustering/geohashUtils":function(){define("dojo/has dojo/string dojo/_base/lang dojo/_base/array ../../kernel ../../geometry/Point ../../geometry/Extent ../../SpatialReference ../../geometry/webMercatorUtils".split(" "),
function(f,B,l,e,c,u,t,d,q){function m(F){var H=F.spatialReference;if(!H)return{x:F.x,y:F.y};var L=H.isWebMercator(),M;4326===H.wkid?M={x:F.x,y:F.y}:L&&(M={x:F.getLongitude(),y:F.getLatitude()});return M}function a(F){var H=F.spatialReference,L=!(!H||!H.isWebMercator()),M;H&&4326===H.wkid?M=new t(F.toJson()):L&&(M=q.webMercatorToGeographic(F,!0));return M}function h(F,H){H.x=u.prototype._normalizeX(F.x,d.prototype._info[4326]);H.y=F.y;return H}function n(F,H){H=H.slice();H.splice(1,0,0);for(var L=
H[0],M=H[2],Q=0;Q<F.length;Q++){Number(F[Q])?H[0]=H[1]:H[2]=H[1];var S=H[1]=(H[0]+H[2])/2;L=H[0];M=H[2]}return{value:S,min:L,max:M}}function r(F,H,L){var M=[];H=H.slice();H.splice(1,0,0);for(var Q=H[0],S=H[2],I=0;I<L;I++)F>=H[1]?(H[0]=H[1],Q=1):(H[2]=H[1],Q=0),H[1]=(H[0]+H[2])/2,M.push(Q),Q=H[0],S=H[2];return{value:M.join(""),min:Q,max:S}}function k(F){var H=F*A.bitsPerBase32Char;0===H%2?F=H/=2:(F=(H+1)/2,H-=F);return{lon:F,lat:H}}function g(F,H){var L={x:F.xmin,y:F.ymax},M={x:F.xmax,y:F.ymin},Q=
{x:F.xmax,y:F.ymax};return{sw:G.pointToGeohash({x:F.xmin,y:F.ymin},H),nw:G.pointToGeohash(L,H),se:G.pointToGeohash(M,H),ne:G.pointToGeohash(Q,H)}}function b(F,H,L,M,Q){var S=F;do Q[S]||(Q[S]=!0,M.push(S)),(F=S===H)||(S=v(S,L));while(!F)}function w(F,H,L,M){var Q=g(F,H);F=[];b(Q.sw,Q.nw,"n",F,{});H=[];b(Q.se,Q.ne,"n",H,{});for(Q=0;Q<F.length;Q++)b(F[Q],H[Q],"e",L,M)}function x(F){return e.filter(F,function(H){return 180===H.xmax?!0:!1})[0]}function z(F){return e.filter(F,function(H){return-180===H.xmin?
!0:!1})[0]}function D(F,H,L,M){var Q=G.geographicToWebMercator(F);F={x:Q.x-H,y:Q.y-H};H=G.webMercatorToGeographic({x:Q.x+H,y:Q.y+H},!0);F=G.webMercatorToGeographic(F,!0);return new t(null!=L?L:F.x,F.y,null!=M?M:H.x,H.y)}function E(F,H,L,M){F=g(F,H);var Q,S;"min"===M?S=180:"max"===M&&(Q=-180);var I=Q;M=S;var P=G.geohashToCell(F.sw).extent;H=G.geohashToCell(F.ne).extent;F=null!=I?I:P.xmin;P=P.ymin;M=null!=M?M:H.xmax;H=H.ymax;F=D({x:F,y:P},L,Q,S);L=D({x:M,y:H},L,Q,S);return new t(F.xmin,F.ymin,L.xmax,
L.ymax)}function C(F,H,L){var M=F,Q=0;do Q++,(F=M===H)||(M=v(M,L));while(!F);return Q}function y(F,H){F=g(F,H);H=C(F.nw,F.ne,"e");return{rows:C(F.nw,F.sw,"s"),cols:H}}function v(F,H){var L=F.length%2,M=F.slice(-1),Q=A.decimals[M];F=F.slice(0,-1);-1!=A.borders[H][L].indexOf(M)&&F&&(F=v(F,H));return F+A.neighbors[H][L][Q]}var A={base32:"0123456789bcdefghjkmnpqrstuvwxyz",decimals:function(){for(var F={},H=0;32>H;H++)F["0123456789bcdefghjkmnpqrstuvwxyz"[H]]=H;return F}(),neighbors:{n:[null,"238967debc01fg45kmstqrwxuvhjyznp"],
s:[null,"bc01fg45238967deuvhjyznpkmstqrwx"],e:[null,"14365h7k9dcfesgujnmqp0r2twvyx8zb"],w:[null,"p0r21436x8zb9dcf5h7kjnmqesgutwvy"]},borders:{n:[null,"bcfguvyz"],s:[null,"0145hjnp"],e:[null,"prxz"],w:[null,"028b"]},bitsPerBase32Char:5,maxGeohashLength:12,longitudeRange:[-180,180],latitudeRange:[-90,90]};A.neighbors.n[0]="14365h7k9dcfesgujnmqp0r2twvyx8zb";A.neighbors.s[0]="p0r21436x8zb9dcf5h7kjnmqesgutwvy";A.neighbors.e[0]="238967debc01fg45kmstqrwxuvhjyznp";A.neighbors.w[0]="bc01fg45238967deuvhjyznpkmstqrwx";
A.borders.n[0]="prxz";A.borders.s[0]="028b";A.borders.e[0]="bcfguvyz";A.borders.w[0]="0145hjnp";var G={geographicToWebMercator:function(F){F=u.lngLatToXY(F.x,F.y);return{x:F[0],y:F[1]}},webMercatorToGeographic:function(F,H){F=u.xyToLngLat(F.x,F.y,H);return{x:F[0],y:F[1]}},geohashToCell:function(F){var H;var L=[];for(H=0;H<F.length;H++){var M=L,Q=M.push;var S=A.decimals[F[H]].toString(2);S=B.pad(S,A.bitsPerBase32Char,"0");Q.call(M,S)}L=L.join("");H=[];M=[];for(Q=0;Q<L.length;Q++)0===Q%2?H.push(L[Q]):
M.push(L[Q]);H=H.join("");M=M.join("");H=[H,M];L=n(H[0],A.longitudeRange);M=n(H[1],A.latitudeRange);H=L.value;return{point:{x:H,y:M.value},extent:{xmin:L.min,xmax:L.max,ymin:M.min,ymax:M.max},geohash:F}},pointToCell:function(F,H){H=H||A.maxGeohashLength;if(F=m(F)){F=h(F,F);var L=k(H);H=r(F.x,A.longitudeRange,L.lon);var M=r(F.y,A.latitudeRange,L.lat);L=H.value;var Q=M.value;H={xmin:H.min,xmax:H.max,ymin:M.min,ymax:M.max};M=[];for(var S=Math.ceil((L.length+Q.length)/A.bitsPerBase32Char),I=0,P=0,J=0;J<
S*A.bitsPerBase32Char;J++){var U=0===J%2?L[I++]:Q[P++];null==U&&(U=0);M.push(U)}L=M.join("");Q=A.bitsPerBase32Char;M=L.length/Q;S=[];for(I=0;I<M;I++){U=L.substr(I*Q,Q);P=S;J=P.push;var Y=0;U=U.split("").reverse().join("");for(var aa=0;aa<U.length;aa++)Y+=Number(U[aa])*Math.pow(2,aa);J.call(P,A.base32[Y])}L=S.join("");return{point:F,extent:H,geohash:L}}},geohashToPoint:function(F){return G.geohashToCell(F).point},pointToGeohash:function(F,H){return(F=G.pointToCell(F,H))&&F.geohash},getCells:function(F){return e.map(F,
function(H){return G.geohashToCell(H)})},getCellSize:function(F){var H=A.longitudeRange,L=A.latitudeRange;H=Math.abs(H[1]-H[0]);L=Math.abs(L[1]-L[0]);F=k(F||1);return{width:H/Math.pow(2,F.lon),height:L/Math.pow(2,F.lat)}},getCellSizeInMeters:function(F){F=G.getCellSize(F);var H=q.metersPerDegree;F.width*=H;F.height*=H;return F},getIntersecting:function(F,H,L){H=H||1;L=L||0;var M=[],Q=a(F);if(Q){L&&(Q=G.expandExtent(F,H,L));F=Q.normalize();var S={};e.forEach(F,function(I){w(I,H,M,S)})}return M},countIntersecting:function(F,
H,L){H=H||1;L=L||0;var M=0,Q=a(F);if(Q){L&&(Q=G.expandExtent(F,H,L));F=Q.normalize();if(2===F.length){M=x(F);Q=z(F);L=y(M,H);var S=y(Q,H);F=L.rows;L=L.cols+S.cols;M={x:M.xmin,y:M.ymax};Q={x:Q.xmax,y:Q.ymax};M=h(M,{});Q=h(Q,{});M=G.pointToGeohash(M,H);H=G.pointToGeohash(Q,H);M===H&&L--;H={rows:F,cols:L}}else H=y(F[0],H);M=H.cols*H.rows}return M},getChildren:function(F){F=F||"";var H=[],L;for(L in A.decimals)H.push(F+L);return H},getNeighbors:function(F){var H=v(F,"n"),L=v(F,"s");return[H,v(H,"e"),
v(H,"w"),L,v(L,"e"),v(L,"w"),v(F,"e"),v(F,"w")]},getExtentFromDistance:function(F,H){H=H||1E3;var L;(F=m(F))&&(L=D(F,H));return L},expandExtent:function(F,H,L){H=H||1;L=L||0;if(F=a(F)){if(L){F=F.normalize();if(2===F.length){var M=L;L=x(F);F=z(F);L=E(L,H,M,"min");F=E(F,H,M,"max");360<=L.getWidth()+F.getWidth()?(H=-180,F=180):(H=L.xmin,F=F.xmax);return new t(H,L.ymin,F,L.ymax)}return E(F[0],H,L)}return F}},getNeighborsWithinDistance:function(F,H,L){L=L||1E3;H=H||1;var M=[];if(F=m(F)){L=D(F,L).normalize();
var Q={};e.forEach(L,function(S){w(S,H,M,Q)})}return M}};l.setObject("layers.clustering.geohashUtils",G,c);return G})},"esri/layers/clustering/statUtils":function(){define(["dojo/_base/lang","../support/attributeUtils"],function(f,B){function l(u){return"number"===typeof u&&!isNaN(u)&&Infinity!==u&&-Infinity!==u}var e={sum:{initialize:function(){return{count:0,sum:null}},updateCellStat:function(u,t){l(t)&&(u.count++,u.sum+=t)},updateClusterStat:function(u,t){t.count&&(u.count+=t.count,u.sum+=t.sum)},
summarize:function(u){return u.sum}},avg:{initialize:function(u){return{count:0,sum:null,avg:null,sum_cosine:null,sum_sine:null}},updateCellStat:function(u,t,d){l(t)&&(u.count++,d.isAngular?(d.isArithmetic||(t=-1*t+90),u.sum_cosine+=Math.cos(t*Math.PI/180),u.sum_sine+=Math.sin(t*Math.PI/180)):u.sum+=t)},updateClusterStat:function(u,t,d){t.count&&(u.count+=t.count,d.isAngular?(u.sum_cosine+=t.sum_cosine,u.sum_sine+=t.sum_sine):u.sum+=t.sum)},summarize:function(u,t){if(0<u.count){var d=u.count;t.isAngular?
(d=180*Math.atan2(u.sum_sine/d,u.sum_cosine/d)/Math.PI,t.isArithmetic||(d=-1*(d-90)),u.avg=0>d?d+360:d):(u.avg=u.sum/d,t.isDate&&(u.avg=Math.ceil(u.avg)))}return u.avg}},type:{initialize:function(){return{uvInfos:{}}},updateCellStat:function(u,t){if(null==t||""===t||"string"===typeof t&&""===f.trim(t))t=null;u=u.uvInfos;null==u[t]?u[t]={count:1,value:t}:u[t].count++},updateClusterStat:function(u,t){u=u.uvInfos;t=t.uvInfos;for(var d in t){var q=t[d];null==u[d]?u[d]={count:q.count,value:q.value}:u[d].count+=
q.count}},summarize:function(u){u=u.uvInfos;var t,d=-Infinity;for(t in u){var q=u[t];if(q.count>d){d=q.count;var m=q.value}else q.count===d&&(m=null)}return m}}},c={isSupportedStatisticType:function(u){return e.hasOwnProperty(u)},getStatisticFunctions:function(u){return e[u]},getStatisticId:function(u,t){var d=B.getAttributeIdSource(u);u=d&&B.getAttributeId(d)||u.field;return t+"_"+u},getClusterField:function(u,t){return"cluster_"+c.getStatisticId(u,t)},getStatisticHash:function(u,t){t=[c.getStatisticId(u,
t)];u.attributeType&&t.push(u.attributeType.toLowerCase());u.rotationType&&t.push(u.rotationType.toLowerCase());return t.join("_")}};return c})},"esri/layers/agscommon":function(){define("./ArcGISMapServiceLayer ./LayerInfo ./TimeInfo ./LayerTimeOptions ./TimeReference ./Field ./Domain ./RangeDomain ./CodedValueDomain ./InheritedDomain ./LayerSource ./LayerMapSource ./LayerDataSource ./DataSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource ./DynamicLayerInfo ./LayerDrawingOptions ../geometry ../utils".split(" "),
function(){return{}})},"esri/layers/LayerDrawingOptions":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../renderers/jsonUtils ./LabelClass".split(" "),function(f,B,l,e,c,u,t,d){f=f(null,{declaredClass:"esri.layers.LayerDrawingOptions",constructor:function(q){if(q&&(B.mixin(this,q),q.renderer&&(this.renderer=t.fromJson(q.renderer)),q.labelingInfo&&0<q.labelingInfo.length)){this.labelingInfo=[];var m;l.forEach(q.labelingInfo,function(a){m=new d(a);
this.labelingInfo.push(m)},this)}},toJson:function(){var q={renderer:this.renderer&&this.renderer.toJson(),transparency:this.transparency,scaleSymbols:this.scaleSymbols,showLabels:this.showLabels};this.labelingInfo&&0<this.labelingInfo.length&&(q.labelingInfo=[],l.forEach(this.labelingInfo,function(m){q.labelingInfo.push(m.toJson())}));return u.fixJson(q)}});B.setObject("layers.LayerDrawingOptions",f,c);return f})},"esri/geometry":function(){define("./units ./SpatialReference ./geometry/Geometry ./geometry/Point ./geometry/ScreenPoint ./geometry/Multipoint ./geometry/Polyline ./geometry/Polygon ./geometry/Extent ./geometry/Rect ./geometry/geodesicUtils ./geometry/jsonUtils ./geometry/mathUtils ./geometry/normalizeUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b){return{units:f,SpatialReference:B,Geometry:l,Point:e,ScreenPoint:c,Multipoint:u,Polyline:t,Polygon:d,Extent:q,Rect:m,geodesicUtils:a,jsonUtils:h,mathUtils:n,normalizeUtils:r,scaleUtils:k,screenUtils:g,webMercatorUtils:b}})},"esri/units":function(){define(["dojo/has","./kernel"],function(f,B){f={CENTIMETERS:"esriCentimeters",DECIMAL_DEGREES:"esriDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds",DECIMETERS:"esriDecimeters",FEET:"esriFeet",FEET_US:"esriFeetUS",
INCHES:"esriInches",KILOMETERS:"esriKilometers",METERS:"esriMeters",MILES:"esriMiles",MILES_US:"esriMilesUS",MILLIMETERS:"esriMillimeters",NAUTICAL_MILES:"esriNauticalMiles",POINTS:"esriPoints",UNKNOWN:"esriUnknownUnits",YARDS:"esriYards",YARDS_US:"esriYardsUS",ACRES:"esriAcres",ACRES_US:"esriAcresUS",ARES:"esriAres",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_MILES_US:"esriSquareMilesUS",SQUARE_FEET:"esriSquareFeet",SQUARE_FEET_US:"esriSquareFeetUS",SQUARE_METERS:"esriSquareMeters",
HECTARES:"esriHectares",SQUARE_YARDS:"esriSquareYards",SQUARE_YARDS_US:"esriSquareYardsUS",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters",SQUARE_NAUTICAL_MILES:"esriSquareNauticalMiles",METERS_PER_SECOND:"esriMetersPerSecond",KILOMETERS_PER_HOUR:"esriKilometersPerHour",KNOTS:"esriKnots",FEET_PER_SECOND:"esriFeetPerSecond",MILES_PER_HOUR:"esriMilesPerHour",RADIANS:"esriDURadians"};return B.Units=
f})},"esri/geometry/Rect":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Geometry ./Point ./Extent ../srUtils".split(" "),function(f,B,l,e,c,u,t,d,q){function m(h){return new d(parseFloat(h.x),parseFloat(h.y)-parseFloat(h.height),parseFloat(h.x)+parseFloat(h.width),parseFloat(h.y),h.spatialReference)}var a=f(u,{declaredClass:"esri.geometry.Rect",type:"rect",x:0,y:0,width:100,height:100,constructor:function(h,n,r,k,g){c.isObject(h)&&"extent"===h.type&&(n=h.ymax,
r=h.getWidth(),k=h.getHeight(),g=h.spatialReference,h=h.xmin);c.isObject(h)?(c.mixin(this,h),this.spatialReference&&(this.spatialReference=q.createSpatialReference(this.spatialReference))):(this.x=h,this.y=n,this.width=r,this.height=k,this.spatialReference=g);this.verifySR()},getCenter:function(){return new t(this.x+this.width/2,this.y+this.height/2,this.spatialReference)},offset:function(h,n){return new a(this.x+h,this.y+n,this.width,this.height,this.spatialReference)},intersects:function(h){return h.x+
h.width<=this.x||h.y+h.height<=this.y||h.y>=this.y+this.height||h.x>=this.x+this.width?!1:!0},getExtent:function(){return m(this)},update:function(h,n,r,k,g){this.x=h;this.y=n;this.width=r;this.height=k;this.spatialReference=g;this.clearCache();return this}});B.setObject("geometry.Rect",a,e);e.geometry._rectToExtent=m;e.geometry._extentToRect=function(h){return new a(h)};return a})},"esri/geometry/geodesicUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point ./Polyline ./Polygon".split(" "),
function(f,B,l,e,c,u,t,d){function q(w){return!!(w&&w.wkid&&b[w.wkid])}function m(w){return q(w)?b[w.wkid]:b[4326]}function a(w){var x=w.spatialReference,z=m(x),D=z.a;z=z.eSq;var E=Math.sqrt(z),C=Math.sin(w.y*g);return new u(D*w.x*g,0<z?D*(1-z)*(C/(1-z*C*C)-1/(2*E)*Math.log((1-E*C)/(1+E*C)))*.5:D*C,x)}function h(w,x,z,D,E){var C=m(E),y=C.a,v=C.b;C=C.f;var A=Math.sin(z);z=Math.cos(z);var G=(1-C)*Math.tan(w);w=1/Math.sqrt(1+G*G);var F=G*w,H=Math.atan2(G,z);G=w*A;var L=G*G,M=1-L;y=M*(y*y-v*v)/(v*v);
var Q=1+y/16384*(4096+y*(-768+y*(320-175*y))),S=y/1024*(256+y*(-128+y*(74-47*y)));y=D/(v*Q);for(var I=2*Math.PI,P,J,U,Y;1E-12<Math.abs(y-I);)U=Math.cos(2*H+y),P=Math.sin(y),J=Math.cos(y),Y=S*P*(U+S/4*(J*(-1+2*U*U)-S/6*U*(-3+4*P*P)*(-3+4*U*U))),I=y,y=D/(v*Q)+Y;D=F*P-w*J*z;v=C/16*M*(4+C*(4-3*M));return new u((x+(Math.atan2(P*A,w*J-F*P*z)-(1-v)*C*G*(y+v*P*(U+v*J*(-1+2*U*U)))))/g,Math.atan2(F*J+w*P*z,(1-C)*Math.sqrt(L+D*D))/g,E)}function n(w,x,z,D,E){var C=m(E),y=C.a;E=C.b;var v=C.f,A=D-x,G=Math.atan((1-
v)*Math.tan(w)),F=Math.atan((1-v)*Math.tan(z)),H=Math.sin(G);G=Math.cos(G);var L=Math.sin(F);F=Math.cos(F);var M=A,Q=1E3;do{var S=Math.sin(M);var I=Math.cos(M);var P=Math.sqrt(F*S*F*S+(G*L-H*F*I)*(G*L-H*F*I));if(0===P)return 0;I=H*L+G*F*I;var J=Math.atan2(P,I);var U=G*F*S/P;var Y=1-U*U;S=I-2*H*L/Y;isNaN(S)&&(S=0);var aa=v/16*Y*(4+v*(4-3*Y));var la=M;M=A+(1-aa)*v*U*(J+aa*P*(S+aa*I*(-1+2*S*S)))}while(1E-12<Math.abs(M-la)&&0<--Q);if(0===Q)return E=D-x,{azimuth:Math.atan2(Math.sin(E)*Math.cos(z),Math.cos(w)*
Math.sin(z)-Math.sin(w)*Math.cos(z)*Math.cos(E)),geodesicDistance:Math.acos(Math.sin(w)*Math.sin(z)+Math.cos(w)*Math.cos(z)*Math.cos(D-x))*C.radius};w=Y*(y*y-E*E)/(E*E);x=w/1024*(256+w*(-128+w*(74-47*w)));return{azimuth:Math.atan2(F*Math.sin(M),G*L-H*F*Math.cos(M)),geodesicDistance:E*(1+w/16384*(4096+w*(-768+w*(320-175*w))))*(J-x*P*(S+x/4*(I*(-1+2*S*S)-x/6*S*(-3+4*P*P)*(-3+4*S*S)))),reverseAzimuth:Math.atan2(G*Math.sin(M),G*L*Math.cos(M)-H*F)}}function r(w,x){if(!(w instanceof t||w instanceof d))throw Error("_geodesicDensify: the input geometry is neither polyline nor polygon");
var z=w.spatialReference,D=m(z).radius/1E4;x<D&&(x=D);D=w instanceof t;var E=[],C;f.forEach(D?w.paths:w.rings,function(y){E.push(C=[]);C.push([y[0][0],y[0][1]]);var v,A;var G=y[0][0]*g;var F=y[0][1]*g;for(v=0;v<y.length-1;v++){var H=y[v+1][0]*g;var L=y[v+1][1]*g;if(G!==H||F!==L){L=n(F,G,L,H,z);H=L.azimuth;L=L.geodesicDistance;var M=L/x;if(1<M){for(A=1;A<=M-1;A++){var Q=h(F,G,H,A*x,z);C.push([Q.x,Q.y])}A=h(F,G,H,(L+Math.floor(M-1)*x)/2,z);C.push([A.x,A.y])}F=h(F,G,H,L,z);C.push([F.x,F.y]);G=F.x*g;
F=F.y*g}}});return D?new t({paths:E,spatialReference:z}):new d({rings:E,spatialReference:z})}var k={esriMeters:1,esriKilometers:1E3,esriYards:.9144,esriFeet:.3048,esriMiles:1609.344,esriNauticalMiles:1852,esriInches:.0254,esriDecimeters:.1,esriCentimeters:.01,esriMillimeters:.001,esriSquareMeters:1,esriSquareKilometers:1E6,esriSquareYards:.83612736,esriSquareFeet:.09290304,esriSquareMiles:2589988.110336,esriAcres:4046.8564224,esriHectares:1E4,esriAres:100,esriSquareInches:6.4516E-4,esriSquareMillimeters:1E-6,
esriSquareCentimeters:1E-4,esriSquareDecimeters:.01},g=Math.PI/180,b={4326:{a:6378137,b:6356752.31424518,f:1/298.257223563,eSq:.006694379990197414,radius:6371008.771415059},104900:{a:2439700,b:2439700,f:0,eSq:0,radius:2439700},104901:{a:6051E3,b:6051E3,f:0,eSq:0,radius:6051E3},104902:{a:6051800,b:6051800,f:0,eSq:0,radius:6051800},104903:{a:1737400,b:1737400,f:0,eSq:0,radius:1737400},104904:{a:3393400,b:3375730,f:1/192.04301075,eSq:.01038722,radius:3387510},104905:{a:3396190,b:3376200,f:1/169.89444722,
eSq:.01173737,radius:3389526.6666666665},104906:{a:6200,b:6200,f:0,eSq:0,radius:6200},104907:{a:11100,b:11100,f:0,eSq:0,radius:11100},104912:{a:2409300,b:2409300,f:0,eSq:0,radius:2409300},104915:{a:1562090,b:1562090,f:0,eSq:0,radius:1562090},104916:{a:2632345,b:2632345,f:0,eSq:0,radius:2632345},104918:{a:1821460,b:1821460,f:0,eSq:0,radius:1821460},104929:{a:249400,b:249400,f:0,eSq:0,radius:249400},104943:{a:2575E3,b:2575E3,f:0,eSq:0,radius:2575E3},104971:{a:3396190,b:3396190,f:0,eSq:0,radius:3396190},
104972:{a:47E4,b:47E4,f:0,eSq:0,radius:47E4},104973:{a:255E3,b:255E3,f:0,eSq:0,radius:255E3},104974:{a:2439400,b:2439400,f:0,eSq:0,radius:2439400}};l={isSupported:q,getSpheroidInfo:m,geodesicDensify:r,geodesicLengths:function(w,x){var z=[];f.forEach(w,function(D,E){var C=0,y=D.spatialReference;f.forEach(D.paths,function(v,A){A=0;var G;for(G=1;G<v.length;G++){var F=v[G-1][0]*g;var H=v[G][0]*g;var L=v[G-1][1]*g;var M=v[G][1]*g;if(L!==M||F!==H)F=n(L,F,M,H,y),A+=F.geodesicDistance}C+=A});C/=k[x];z.push(C)});
return z},geodesicAreas:function(w,x){var z=[],D=[];f.forEach(w,function(E,C){C=.0015696101447650193*m(E.spatialReference).radius;z.push(r(E,C))});f.forEach(z,function(E,C){var y=0,v=E.spatialReference;f.forEach(E.rings,function(A,G){G=a(new u(A[0][0],A[0][1],v));var F=a(new u(A[A.length-1][0],A[A.length-1][1],v)),H=F.x*G.y-G.x*F.y,L;for(L=0;L<A.length-1;L++)G=a(new u(A[L+1][0],A[L+1][1],v)),F=a(new u(A[L][0],A[L][1],v)),H+=F.x*G.y-G.x*F.y;y+=H});y/=k[x];D.push(y/-2)});return D},_unitsDictionary:k,
_toEqualAreaPoint:a,_directGeodeticSolver:h,_inverseGeodeticSolver:n};B.mixin(B.getObject("geometry",!0,e),l);return l})},"arcgisonline/map/thumbnail/buildThumbnailURLFromWebMap":function(){define("dojo/on dojo/dom dojo/json dojo/aspect dojo/Deferred dojo/promise/all dojo/dom-construct dojo/_base/lang dojo/_base/array esri/arcgis/utils arcgisonline/map/thumbnail/createThumbnailImage arcgisonline/map/thumbnail/createHiddenMap".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h){return function(n,r,k,g){var b=
function(w,x){k(x);w.destroy();B.byId("hiddenMapDiv").removeChild(B.byId("hiddenMap"))};h(n,r,d.hitch(this,function(w){a(w,d.hitch(this,b,w),g)}),g)}})},"esri/arcgis/utils":function(){define("require dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/on dojo/DeferredList dojo/dom-construct dojo/sniff dojox/gfx/_base ../kernel ../config ../Color ../lang ../request ../SpatialReference ../map ../urlUtils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/webMercatorUtils ../symbols/jsonUtils ../renderers/jsonUtils ../dijit/PopupTemplate ../dijit/Popup ../tasks/query ../tasks/GeometryService ../layers/ArcGISTiledMapServiceLayer ../layers/FeatureLayer dojo/i18n!../nls/jsapi".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E,C,y,v,A,G,F,H,L,M,Q,S){function I(na){return!(!na||"BingMapsAerial"!==na.layerType&&"BingMapsAerial"!==na.type)}function P(na){return!(!na||"BingMapsRoad"!==na.layerType&&"BingMapsRoad"!==na.type)}function J(na){return I(na)||P(na)||!(!na||"BingMapsHybrid"!==na.layerType&&"BingMapsHybrid"!==na.type)}function U(na){return!(!na||"OpenStreetMap"!==na.layerType&&"OpenStreetMap"!==na.type)}function Y(na){return!!(na&&na.url&&(-1<"ArcGISFeatureLayer ArcGISImageServiceLayer ArcGISImageServiceVectorLayer ArcGISMapServiceLayer ArcGISStreamLayer ArcGISTiledImageServiceLayer ArcGISTiledMapServiceLayer".split(" ").indexOf(na.layerType)||
!na.layerType&&!na.type))}function aa(na){return b({url:Jb.arcgisUrl+"/"+na.itemId+"/data",content:{f:"json"},callbackParamName:"callback"},{disableIdentityLookup:!0,_preLookup:!0})}function la(na,Ra){var Sa={f:"json"};Ra&&(Sa.token=Ra);return b({url:na,content:Sa,callbackParamName:"callback"},{disableIdentityLookup:!0})}function T(na){!na.layerDefinition||na.layerDefinition.drawingInfo&&na.layerDefinition.drawingInfo.labelingInfo||(na.showLabels=!1);na.itemProperties.layerDefinition&&(na.layerDefinition?
(na.layerDefinition.drawingInfo||(na.layerDefinition.drawingInfo=na.itemProperties.layerDefinition.drawingInfo),g.isDefined(na.layerDefinition.definitionExpression)||(na.layerDefinition.definitionExpression=na.itemProperties.layerDefinition.definitionExpression),g.isDefined(na.layerDefinition.minScale)||(na.layerDefinition.minScale=na.itemProperties.layerDefinition.minScale),g.isDefined(na.layerDefinition.maxScale)||(na.layerDefinition.maxScale=na.itemProperties.layerDefinition.maxScale)):na.layerDefinition=
na.itemProperties.layerDefinition);!na.itemProperties.popupInfo||na.popupInfo||na.disablePopup||(na.popupInfo=na.itemProperties.popupInfo);g.isDefined(na.itemProperties.showLabels)&&!g.isDefined(na.showLabels)&&(na.showLabels=na.itemProperties.showLabels);g.isDefined(na.itemProperties.showLegend)&&!g.isDefined(na.showLegend)&&(na.showLegend=na.itemProperties.showLegend);g.isDefined(na.itemProperties.refreshInterval)&&!g.isDefined(na.refreshInterval)&&(na.refreshInterval=na.itemProperties.refreshInterval)}
function N(na){T(na);na.itemProperties.layerDefinition&&na.layerDefinition&&(!g.isDefined(na.layerDefinition.maximumTrackPoints)&&g.isDefined(na.itemProperties.layerDefinition.maximumTrackPoints)&&(na.layerDefinition.maximumTrackPoints=na.itemProperties.layerDefinition.maximumTrackPoints),!na.layerDefinition.definitionGeometry&&na.itemProperties.layerDefinition.definitionGeometry&&(na.layerDefinition.definitionGeometry=na.itemProperties.layerDefinition.definitionGeometry));na.itemProperties.purgeOptions&&
!na.purgeOptions&&(na.purgeOptions=na.itemProperties.purgeOptions)}function K(na,Ra){var Sa=new c;Ra=na.itemData;var Ka=[],Ma=[];l.forEach(Ra.operationalLayers,function(Wa){if(Wa.itemId&&Y(Wa)){var Pa=Wa.url.toLowerCase();-1<Pa.indexOf("/featureserver")||-1<Pa.indexOf("/mapserver/")?(Ma.push(Wa),Ka.push(aa(Wa))):-1<Pa.indexOf("/mapserver")&&-1===Pa.indexOf("/mapserver/")&&(!Wa.layers||!g.isDefined(Wa.minScale)&&!g.isDefined(Wa.maxScale))?(Ma.push(Wa),Ka.push(aa(Wa))):-1<Pa.indexOf("/imageserver")?
(Ma.push(Wa),Ka.push(aa(Wa))):-1<Pa.indexOf("/streamserver")&&(Ma.push(Wa),Ka.push(aa(Wa)))}});Ra.baseMap&&Ra.baseMap.baseMapLayers&&l.forEach(Ra.baseMap.baseMapLayers,function(Wa){Wa.itemId&&"VectorTileLayer"!==Wa.layerType&&(Ma.push(Wa),Ka.push(aa(Wa)))});if(0<Ka.length){var Xa={};(new q(Ka)).addCallback(function(Wa){l.forEach(Ma,function(Pa,Za){if((Za=Wa[Za][1])&&!(Za instanceof Error)&&(Xa[Pa.itemId]=Za,Y(Pa))){var cb=Pa.url.toLowerCase();(-1<cb.indexOf("/featureserver")||-1<cb.indexOf("/mapserver/"))&&
Za.layers?l.forEach(Za.layers,function(eb){var nb="/featureserver/"+eb.id;(nb=cb.match(nb+"$")==nb)||(nb="/mapserver/"+eb.id,nb=cb.match(nb+"$")==nb);nb&&(Pa.itemProperties=eb,T(Pa))}):-1<cb.indexOf("/streamserver")?(Pa.itemProperties=Za,N(Pa)):-1<cb.indexOf("/mapserver")?(Za.layers&&!Pa.layers&&(Pa.layers=Za.layers),g.isDefined(Za.minScale)&&!g.isDefined(Pa.minScale)&&(Pa.minScale=Za.minScale),g.isDefined(Za.maxScale)&&!g.isDefined(Pa.maxScale)&&(Pa.maxScale=Za.maxScale),g.isDefined(Za.refreshInterval)&&
!g.isDefined(Pa.refreshInterval)&&(Pa.refreshInterval=Za.refreshInterval),Za.visibleLayers&&!Pa.visibleLayers&&(Pa.visibleLayers=Za.visibleLayers)):-1<cb.indexOf("/imageserver")&&(g.isDefined(Za.minScale)&&!g.isDefined(Pa.minScale)&&(Pa.minScale=Za.minScale),g.isDefined(Za.maxScale)&&!g.isDefined(Pa.maxScale)&&(Pa.maxScale=Za.maxScale),g.isDefined(Za.refreshInterval)&&!g.isDefined(Pa.refreshInterval)&&(Pa.refreshInterval=Za.refreshInterval),!Za.popupInfo||Pa.popupInfo||Pa.disablePopup||(Pa.popupInfo=
Za.popupInfo),Za.renderingRule&&!Pa.renderingRule&&(Pa.renderingRule=Za.renderingRule,Za.renderingRule.functionName&&(Pa.renderingRule.rasterFunction=Za.renderingRule.functionName)),Za.bandIds&&!Pa.bandIds&&(Pa.bandIds=Za.bandIds),Za.mosaicRule&&!Pa.mosaicRule&&(Pa.mosaicRule=Za.mosaicRule),Za.format&&!Pa.format&&(Pa.format=Za.format),g.isDefined(Za.compressionQuality)&&!g.isDefined(Pa.compressionQuality)&&(Pa.compressionQuality=Za.compressionQuality),!Za.layerDefinition||!Za.layerDefinition.definitionExpression||
g.isDefined(Pa.layerDefinition)&&g.isDefined(Pa.layerDefinition.definitionExpression)||(Pa.layerDefinition=Pa.layerDefinition||{},Pa.layerDefinition.definitionExpression=Za.layerDefinition.definitionExpression),Za=B.getObject("layerDefinition.drawingInfo.renderer",!1,Za),null==B.getObject("layerDefinition.drawingInfo.renderer",!1,Pa)&&null!=Za&&(Pa.layerDefinition=Pa.layerDefinition||{},Pa.layerDefinition.drawingInfo=Pa.layerDefinition.drawingInfo||{},Pa.layerDefinition.drawingInfo.renderer=Za))}});
na.relatedItemsData=Xa;Sa.callback(na)})}else Sa.callback(na);return Sa}function W(na,Ra){var Sa=new c,Ka=na.itemData,Ma=Ka.baseMap.baseMapLayers[0];if(J(Ma))if(Ma.portalUrl&&n.id)delete Ra.bingMapsKey,n.id.checkSignInStatus(z.urlToObject(Jb.arcgisUrl).path).then(B.hitch(null,function(Wa,Pa,Za,cb,eb){la(Ma.portalUrl,eb.token).then(B.hitch(null,fa,Wa,Pa,Za,cb),B.hitch(null,ha,Wa,Pa,Za,cb))},na,Ra,Ka,Sa),B.hitch(null,function(Wa,Pa,Za,cb,eb){la(Ma.portalUrl).then(B.hitch(null,fa,Wa,Pa,Za,cb),B.hitch(null,
ha,Wa,Pa,Za,cb))},na,Ra,Ka,Sa));else if(Ra.bingMapsKey){var Xa=new cc({bingMapsKey:Ra.bingMapsKey,mapStyle:cc.MAP_STYLE_AERIAL});e.connect(Xa,"onLoad",B.hitch(this,function(){Sa.callback([na,Ra])}));e.connect(Xa,"onError",function(Wa){delete Ra.bingMapsKey;na.itemData=ra(Ka);Ma=na.itemData.baseMap.baseMapLayers[0];Ma.errors=[];Ma.errors.push({message:"The owner of the application has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});Sa.callback([na,Ra])})}else na.itemData=
ra(Ka),Ma=na.itemData.baseMap.baseMapLayers[0],Ma.errors=[],Ma.errors.push({message:"The owner of the application has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."}),Sa.callback([na,Ra]);else Sa.callback([na,Ra]);return Sa}function da(na){var Ra=new c;na=na.itemData;var Sa=na.baseMap&&na.baseMap.baseMapLayers;if(Xb&&!Xb.supported())for(na=0;na<Sa.length;na++){var Ka=Sa[na];if(!Ka.isReference){if("VectorTileLayer"===Ka.layerType){var Ma=Ka.itemId;var Xa=na}break}}Ma?
Sb(Ma,!1).addBoth(function(Wa){var Pa=/^https?:\/\/basemaps(dev)?\.arcgis\.com\/arcgis\/rest\/services\/World_Basemap\/VectorTileServer/i;Wa&&Wa.item&&Pa.test(Wa.item.url)&&(Sa[Xa]={id:"FB_"+Ka.id,layerType:"ArcGISTiledMapServiceLayer",opacity:"opacity"in Ka?Ka.opacity:1,visibility:"visibility"in Ka?Ka.visibility:!0,url:"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer"});Ra.resolve()}):Ra.resolve();return Ra}function fa(na,Ra,Sa,Ka,Ma){Ma.bingKey?(Ra.bingMapsKey=
Ma.bingKey,Ma=new cc({bingMapsKey:Ra.bingMapsKey,mapStyle:cc.MAP_STYLE_AERIAL}),e.connect(Ma,"onLoad",B.hitch(this,function(){Ka.callback([na,Ra])})),e.connect(Ma,"onError",function(Xa){delete Ra.bingMapsKey;na.itemData=ra(Sa);Xa=na.itemData.baseMap.baseMapLayers[0];Xa.errors=[];Xa.errors.push({message:"The owner of the map has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});Ka.callback([na,Ra])})):ha(na,Ra,Sa,Ka)}function ha(na,Ra,Sa,Ka){delete Ra.bingMapsKey;
na.itemData=ra(Sa);Sa=na.itemData.baseMap.baseMapLayers[0];Sa.errors=[];Sa.errors.push({message:"The owner of the map has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."});Ka.callback([na,Ra])}function ra(na){I(na.baseMap.baseMapLayers[0])?na.baseMap={title:"Imagery",baseMapLayers:[{id:"World_Imagery_2017",visibility:!0,opacity:1,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]}:P(na.baseMap.baseMapLayers[0])?na.baseMap={title:"Streets",
baseMapLayers:[{id:"World_Street_Map_8421",opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]}:na.baseMap={title:"Imagery with Labels",baseMapLayers:[{id:"World_Imagery_6611",opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{id:"World_Boundaries_and_Places_1145",isReference:!0,opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer"}]};
return na}function za(na,Ra,Sa,Ka){var Ma=na.dynamicLayerInfos||na.layerInfos,Xa=Ra.layers;if(Xa&&Ma)if(Ka.usePopupManager){var Wa;l.forEach(Ma,function(mb){var gb=mb.id;if(!mb.subLayerIds)for(mb=0;mb<Xa.length;mb++){var tb=Xa[mb];if(tb.id===gb&&tb.popupInfo&&!tb.disablePopup){Wa||(Wa={});Wa[gb]={infoTemplate:new Sa(tb.popupInfo),layerUrl:tb.layerUrl};break}}});Wa&&na.setInfoTemplates(Wa)}else{var Pa=[],Za=[],cb=[],eb=[],nb=[],db=[];l.forEach(Ma,function(mb){var gb=mb.id;if(!mb.subLayerIds&&-1!==
l.indexOf(na.visibleLayers,gb))for(mb=0;mb<Xa.length;mb++){var tb=Xa[mb];if(tb.id===gb){Za.push(gb);Pa.push(tb.popupInfo);cb.push(tb.layerUrl||"");tb.layerDefinition&&tb.layerDefinition.definitionExpression?eb.push(tb.layerDefinition.definitionExpression):eb.push("");nb.push(g.isDefined(tb.minScale)?tb.minScale:null);db.push(g.isDefined(tb.maxScale)?tb.maxScale:null);break}}});Pa.length&&(na.__popups=Pa,na.__popupIds=Za,na.__popupUrls=cb,na.__popupWhereClauses=eb,na.__popupMinScales=nb,na.__popupMaxScales=
db,na.__resourceInfo=Ra.resourceInfo)}}function Da(na){if(!na)return!1;var Ra=(new t(Jb.arcgisUrl)).authority;return-1!==na.indexOf(".arcgis.com/")||-1!==na.indexOf(Ra)}function va(na){return na?-1!==na.indexOf("/services.arcgisonline.com/")||-1!==na.indexOf("/server.arcgisonline.com/"):!1}function Ga(na){"https:"===location.protocol&&(Da(na)||va(na))&&(na=na.replace("http:","https:"));return na}function ba(na,Ra,Sa){var Ka=[];na.displayLevels||(Ka=l.map(na.resourceInfo.tileInfo.lods,function(Wa){return Wa.level}));
if(na.exclusionAreas){var Ma=B.clone(na.exclusionAreas);Ma=l.map(Ma,function(Wa){Wa.geometry=new C(Wa.geometry);return Wa})}var Xa=na.resourceInfo&&"Raster"===na.resourceInfo.cacheType;Xa?(Ka=na.layerDefinition&&na.layerDefinition.drawingInfo&&na.layerDefinition.drawingInfo.renderer,Ka=new Ic(Ga(na.url),{resourceInfo:na.resourceInfo,opacity:na.opacity,visible:na.visibility,id:na.id,minScale:na.minScale,maxScale:na.maxScale,refreshInterval:na.refreshInterval,multidimensionalDefinition:na.multidimensionalDefinition,
bandIds:na.bandIds,renderer:Ka||null})):Ka=new M(Ga(na.url),{resourceInfo:na.resourceInfo,opacity:na.opacity,visible:na.visibility,displayLevels:na.displayLevels||Ka,id:na.id,minScale:na.minScale,maxScale:na.maxScale,refreshInterval:na.refreshInterval,exclusionAreas:Ma});Sa.ignorePopups||(Xa&&na.popupInfo&&!na.disablePopup?Ka.setInfoTemplate(new Ra(na.popupInfo)):za(Ka,na,Ra,Sa));return Ka}function ia(na,Ra){if(!na||!Ra||0===Ra.length)return[];Ra=","+Ra+",";var Sa=[],Ka,Ma=",";for(Ka=0;Ka<na.length;Ka++)if(null!==
na[Ka].subLayerIds){if(-1===Ra.indexOf(","+na[Ka].id+",")||-1<Ma.indexOf(","+na[Ka].id+","))Ma+=na[Ka].subLayerIds.toString()+","}else-1<Ra.indexOf(","+na[Ka].id+",")&&-1===Ma.indexOf(","+na[Ka].id+",")&&Sa.push(na[Ka].id);return Sa}function wa(na,Ra,Sa){var Ka=new Ub;Ka.format="png24";na.resourceInfo&&na.resourceInfo.supportedImageFormatTypes&&-1<na.resourceInfo.supportedImageFormatTypes.indexOf("PNG32")&&(Ka.format="png32");Ka=new Eb(Ga(na.url),{resourceInfo:na.resourceInfo,opacity:na.opacity,visible:na.visibility,
id:na.id,imageParameters:Ka,minScale:na.minScale,maxScale:na.maxScale,refreshInterval:na.refreshInterval});var Ma=na.visibleLayers;if(!na.visibleLayers){var Xa="";l.forEach(Ka.layerInfos,function(db){db.defaultVisibility&&(Xa+=(0<Xa.length?",":"")+db.id)});Ma=Xa}if(na.layers&&0<na.layers.length){var Wa=[],Pa=[],Za,cb=[],eb,nb;l.forEach(na.layers,function(db){var mb=db.layerDefinition;mb&&mb.definitionExpression&&(Wa[db.id]=mb.definitionExpression);if(mb&&mb.source){Za=null;nb=mb.source;if("mapLayer"===
nb.type){var gb=l.filter(na.resourceInfo.layers,function(tb){return tb.id===nb.mapLayerId});gb.length&&(Za=B.mixin(gb[0],db))}else Za=B.mixin({},db);Za&&(Za.source=nb,delete Za.popupInfo,Za=new Ob(Za),na.visibleLayers&&(gb="string"==typeof na.visibleLayers?na.visibleLayers.split(","):na.visibleLayers,-1<l.indexOf(gb,db.id)?Za.defaultVisibility=!0:Za.defaultVisibility=!1),Pa.push(Za))}mb&&null!=mb.transparency&&(gb=mb.drawingInfo||{},null==gb.transparency&&(gb.transparency=mb.transparency,mb.drawingInfo=
gb));mb&&mb.source&&mb.drawingInfo&&(eb=new xc(mb.drawingInfo),cb[db.id]=eb)},this);0<Wa.length&&Ka.setLayerDefinitions(Wa);0<Pa.length?(Ka.setDynamicLayerInfos(Pa,!0),0<cb.length&&Ka.setLayerDrawingOptions(cb,!0)):(Ma=ia(Ka.layerInfos,Ma),Ka.setVisibleLayers(Ma))}else Ma=ia(Ka.layerInfos,Ma),Ka.setVisibleLayers(Ma);Sa.ignorePopups||za(Ka,na,Ra,Sa);return Ka}function Aa(na,Ra,Sa){var Ka=new wc;Ka.bandIds=na.bandIds;null!=na.format&&(Ka.format=na.format,null!=na.compressionQuality&&(Ka.compressionQuality=
na.compressionQuality));if(na.renderingRule&&na.renderingRule.rasterFunction){var Ma=new Mc(na.renderingRule);Ka.renderingRule=Ma}na.mosaicRule&&(Ma=new yc(na.mosaicRule),Ka.mosaicRule=Ma);g.isDefined(na.noData)&&(Ka.noData=na.noData);g.isDefined(na.noDataInterpretation)&&(Ka.noDataInterpretation=na.noDataInterpretation);g.isDefined(na.interpolation)&&(Ka.interpolation=na.interpolation);Ma=na.layerType?"ArcGISImageServiceVectorLayer"===na.layerType:!1;g.isDefined(na.layerType)||(Ma=na.resourceInfo.hasMultidimensions&&
("esriImageServiceDataTypeVector-UV"===na.resourceInfo.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===na.resourceInfo.serviceDataType));Ka={resourceInfo:na.resourceInfo,opacity:na.opacity,visible:na.visibility,id:na.id,imageServiceParameters:Ka,minScale:na.minScale,maxScale:na.maxScale,refreshInterval:na.refreshInterval};Ka=Ma?new Nb(Ga(na.url),Ka):new Hb(Ga(na.url),Ka);na.layerDefinition&&(na.layerDefinition.drawingInfo&&na.layerDefinition.drawingInfo.renderer&&(Ma=A.fromJson(na.layerDefinition.drawingInfo.renderer),
Ka.setRenderer(Ma)),na.layerDefinition.definitionExpression&&Ka.setDefinitionExpression(na.layerDefinition.definitionExpression,!0));Sa.ignorePopups||!na.popupInfo||na.disablePopup||Ka.setInfoTemplate(new Ra(na.popupInfo));return Ka}function Fa(na,Ra,Sa){var Ka=[102113,102100,3857],Ma=Sa||new w(Ra[0].layerObject.fullExtent.spatialReference),Xa=new w(na.resourceInfo.fullExtent.spatialReference);return Ma.wkt==Xa.wkt&&(Ma.wkid==Xa.wkid||g.isDefined(Ma.latestWkid)&&Ma.latestWkid==Xa.wkid||g.isDefined(Xa.latestWkid)&&
Ma.wkid==Xa.latestWkid||g.isDefined(Ma.latestWkid)&&Ma.latestWkid==Xa.latestWkid)||Ma.wkid&&Xa.wkid&&l.some(Ka,function(Wa){return Wa===Xa.wkid})&&l.some(Ka,function(Wa){return Wa===Ma.wkid})?!0:!1}function O(na,Ra,Sa){if(!Ra[0].layerObject.tileInfo)return!1;na=na.resourceInfo.tileInfo;Ra=Ra[0].layerObject.tileInfo;Sa=Sa.width>Sa.height?Sa.width:Sa.height;for(var Ka=!1,Ma=!1,Xa=0;Xa<na.lods.length;Xa++){for(var Wa=na.lods[Xa].scale/na.dpi,Pa=0;Pa<Ra.lods.length;Pa++){var Za=Ra.lods[Pa].scale/Ra.dpi;
if(Math.abs(Za-Wa)/Za<1/Sa)if(Ka){Ma=!0;break}else Ka=!0}if(Ma)break}return Ma||Ka&&(1===na.lods.length||1===Ra.lods.length)?!0:!1}function ya(na,Ra,Sa,Ka,Ma,Xa){var Wa=Sa._clazz;if(U(na))var Pa=new Hc({id:na.id,opacity:na.opacity,visible:null!==na.visibility&&void 0!==na.visibility?na.visibility:!0});else if(na&&("WFS"===na.layerType||"WFS"===na.type)){var Za={customParameters:na.wfsInfo.customParameters,geometryType:na.layerDefinition.geometryType,id:na.id,labelingInfo:na.layerDefinition.drawingInfo.labelingInfo,
maxFeatures:na.wfsInfo.maxFeatures,mode:na.mode,name:na.wfsInfo.name,showLabels:!0,swapXY:na.wfsInfo.swapXY,title:na.title,url:na.url,version:na.wfsInfo.version,visible:na.visibility,wkid:na.layerDefinition.spatialReference.wkid};Pa=new Yb;Pa.fromJson(Za,function(){g.isDefined(na.opacity)&&Pa.setOpacity(na.opacity);g.isDefined(na.visibility)&&Pa.setVisibility(na.visibility);(na.minScale||na.maxScale)&&Pa.setScaleRange(na.minScale,na.maxScale);Pa.renderer=A.fromJson(na.layerDefinition.drawingInfo.renderer,
{geometryType:Za.geometryType});!Sa.ignorePopups&&na.popupInfo&&Pa.setInfoTemplate(new Wa(na.popupInfo));Pa.emit("fromJsonComplete")})}else if(na&&("WMS"===na.layerType||"WMS"===na.type)){var cb=[],eb=[];l.forEach(na.layers,function(gb){eb.push(new Pb({name:gb.name,title:gb.title,legendURL:gb.legendURL||gb.legendUrl,queryable:gb.queryable,showPopup:gb.showPopup}));cb.push(gb.name)},this);na.visibleLayers&&(cb=na.visibleLayers);Ka=new C(na.extent[0][0],na.extent[0][1],na.extent[1][0],na.extent[1][1],
new w({wkid:4326}));Ka={customLayerParameters:na.customLayerParameters,customParameters:na.customParameters,extent:Ka,layerInfos:eb,version:na.version,maxWidth:na.maxWidth,maxHeight:na.maxHeight,featureInfoFormat:na.featureInfoFormat,getFeatureInfoURL:na.featureInfoUrl,getMapURL:na.mapUrl,spatialReferences:na.spatialReferences,title:na.title,copyright:na.copyright,minScale:na.minScale||0,maxScale:na.maxScale||0,format:na.format};Pa=new Oc(na.url,{id:na.id,visibleLayers:cb,format:"png",transparent:na.firstLayer?
!1:!0,opacity:na.opacity,visible:null!==na.visibility?na.visibility:!0,resourceInfo:Ka,refreshInterval:na.refreshInterval});Pa.spatialReference.wkid=Ka.spatialReferences[0]}else if(na&&("KML"===na.layerType||"KML"===na.type)){var nb=na.url;if(n.id){var db=n.id.findCredential(z.urlToObject(Jb.arcgisUrl).path);db&&(Ra=Jb.arcgisUrl.substring(Jb.arcgisUrl.indexOf("//")+2,Jb.arcgisUrl.indexOf("/",Jb.arcgisUrl.indexOf("//")+3)),Ma=Ra.split("."),Ma=Ma[Ma.length-2]+"."+Ma[Ma.length-1],Xa=nb.indexOf(Ma),-1<
Xa&&(nb="https://"+Ra+nb.substring(Xa+Ma.length),nb+="?token\x3d"+db.token))}Pa=new hc(nb,{id:na.id,visible:null!==na.visibility?na.visibility:!0,outSR:Ka,refreshInterval:na.refreshInterval});e.connect(Pa,"onLoad",function(){(na.opacity||0===na.opacity)&&Pa.setOpacity(na.opacity);g.isDefined(na.minScale)&&g.isDefined(na.maxScale)&&Pa.setScaleRange(na.minScale,na.maxScale);na.visibleFolders&&l.forEach(Pa.folders,function(gb){-1<l.indexOf(na.visibleFolders,gb.id)?Pa.setFolderVisibility(gb,!0):Pa.setFolderVisibility(gb,
!1)},this)})}else if(!na||"WebTiledLayer"!==na.layerType&&"WebTiledLayer"!==na.type)if(!na||"GeoRSS"!==na.layerType&&"GeoRSS"!==na.type)if(na&&("CSV"===na.layerType||"CSV"===na.type)&&na.url)Ka={layerDefinition:na.layerDefinition,columnDelimiter:na.columnDelimiter,id:na.id?na.id:null,visible:null!==na.visibility?na.visibility:!0,opacity:na.opacity,refreshInterval:na.refreshInterval},na.locationInfo&&(Ka.latitudeFieldName=na.locationInfo.latitudeFieldName,Ka.longitudeFieldName=na.locationInfo.longitudeFieldName),
!Sa.ignorePopups&&na.popupInfo&&(Ka.infoTemplate=new Wa(na.popupInfo)),Pa=new $b(na.url,Ka);else if("VectorTileLayer"!==na.layerType||!na.styleUrl||na.resourceInfo&&na.resourceInfo instanceof Error)if(na.layerDefinition&&!na.url)Ka=u.fromJson(u.toJson(na)),delete Ka.id,delete Ka.opacity,delete Ka.visibility,Pa=new Q(Ka,{id:na.id,opacity:na.opacity,visible:na.visibility,outFields:["*"],autoGeneralize:!0}),Sa.ignorePopups||!Ka.popupInfo||Ka.disablePopup||Pa.setInfoTemplate(new Wa(Ka.popupInfo)),Na(Pa);
else if(J(na))Sa.bingMapsKey?(Ka=cc.MAP_STYLE_AERIAL_WITH_LABELS,I(na)?Ka=cc.MAP_STYLE_AERIAL:P(na)&&(Ka=cc.MAP_STYLE_ROAD),Pa=new cc({bingMapsKey:Sa.bingMapsKey,mapStyle:Ka,opacity:na.opacity,id:na.id}),e.connect(Pa,"onError",B.hitch(this,function(gb){gb.errors=gb.errors||[];gb.errors.push({message:"This application does not have a valid Bing Key for the Bing layer that is included in this map. [type:"+(gb?gb.layerType||gb.type:"")+"]"})},na))):(na.errors=na.errors||[],na.errors.push({message:"This application does not provide a Bing Key for the Bing layer that is included in this map. [type:"+
(na?na.layerType||na.type:"")+"]"}));else if(na.resourceInfo&&(na.resourceInfo.mapName||""===na.resourceInfo.mapName))Pa=!0===na.resourceInfo.singleFusedMapCache&&(na.baseMapLayer||Fa(na,Ra,Ka)&&O(na,Ma,Xa))?ba(na,Wa,Sa):wa(na,Wa,Sa);else if(na.resourceInfo&&na.resourceInfo.pixelSizeX)Pa=!0===na.resourceInfo.singleFusedMapCache&&"ArcGISImageServiceLayer"!==na.layerType&&(na.baseMapLayer||"Raster"===na.resourceInfo.cacheType||Fa(na,Ra,Ka)&&O(na,Ma,Xa))?ba(na,Wa,Sa):Aa(na,Wa,Sa);else if(na.resourceInfo&&
"Feature Layer"===na.resourceInfo.type){na.capabilities&&(na.resourceInfo.capabilities=na.capabilities);var mb;!1===Sa.editable?mb=!1:Sa.privileges&&-1===l.indexOf(Sa.privileges,"features:user:edit")&&n.id&&n.id.findCredential(na.url)&&(mb=!1);Pa=new Q(Ga(na.url),{resourceInfo:na.resourceInfo,opacity:na.opacity,visible:na.visibility,id:na.id,mode:na.mode===Q.MODE_SELECTION?Q.MODE_SELECTION:Q.MODE_AUTO,editable:mb,outFields:["*"],autoGeneralize:!0,refreshInterval:na.refreshInterval});Sa.ignorePopups||
!na.popupInfo||na.disablePopup||Pa.setInfoTemplate(new Wa(na.popupInfo));na.layerDefinition&&(na.layerDefinition.drawingInfo&&na.layerDefinition.drawingInfo.renderer&&(Ka=A.fromJson(na.layerDefinition.drawingInfo.renderer,{geometryType:Pa.geometryType}),Ka.isMaxInclusive=!0,Pa.setRenderer(Ka)),na.layerDefinition.drawingInfo&&na.layerDefinition.drawingInfo.labelingInfo&&(Ka=l.map(na.layerDefinition.drawingInfo.labelingInfo,function(gb){return new ic(gb)}),Pa.setLabelingInfo(Ka)),na.layerDefinition.definitionExpression&&
Pa.setDefinitionExpression(na.layerDefinition.definitionExpression),g.isDefined(na.layerDefinition.minScale)&&Pa.setMinScale(na.layerDefinition.minScale),g.isDefined(na.layerDefinition.maxScale)&&Pa.setMaxScale(na.layerDefinition.maxScale));Na(Pa)}else na.resourceInfo&&na.resourceInfo.streamUrls&&(Ka={resourceInfo:na.resourceInfo,opacity:na.opacity,visible:na.visibility,id:na.id},na.layerDefinition&&(nb=na.layerDefinition.drawingInfo,na.layerDefinition.definitionGeometry&&(db=db||{},db.geometry=na.layerDefinition.definitionGeometry),
g.isDefined(na.layerDefinition.definitionExpression)&&(db=db||{},db.where=na.layerDefinition.definitionExpression),g.isDefined(na.layerDefinition.maximumTrackPoints)&&(Ka.maximumTrackPoints=na.layerDefinition.maximumTrackPoints)),db&&(Ka.filter=db),na.purgeOptions&&(Ka.purgeOptions=na.purgeOptions),Pa=new zc(Ga(na.url),Ka),nb&&nb.renderer&&(Ka=nb.renderer,Pa.setRenderer(A.fromJson(Ka,{geometryType:na.resourceInfo.geometryType}))),nb&&nb.labelingInfo&&(Ka=l.map(nb.labelingInfo,function(gb){return new ic(gb)}),
Pa.setLabelingInfo(Ka)),Sa.ignorePopups||!na.popupInfo||na.disablePopup||Pa.setInfoTemplate(new Wa(na.popupInfo)),na.layerDefinition&&(g.isDefined(na.layerDefinition.minScale)&&Pa.setMinScale(na.layerDefinition.minScale),g.isDefined(na.layerDefinition.maxScale)&&Pa.setMaxScale(na.layerDefinition.maxScale)),d.once(Pa,"error",function(gb){na.errors.push({message:"Error loading stream layer. Check websocket url"})}));else Pa=new Xb(na.styleUrl,{id:na.id,minScale:na.minScale,maxScale:na.maxScale,opacity:na.opacity,
visible:na.visibility,resourceInfo:na.resourceInfo});else Pa=new bc(na.url,{id:na.id,opacity:na.opacity,outSpatialReference:Ka,refreshInterval:na.refreshInterval}),e.connect(Pa,"onLoad",function(){!1===na.visibility&&Pa.hide();g.isDefined(na.minScale)&&g.isDefined(na.maxScale)&&Pa.setScaleRange(na.minScale,na.maxScale);var gb=Pa.getFeatureLayers();l.forEach(gb,function(tb){na.pointSymbol&&"esriGeometryPoint"===tb.geometryType?(tb.renderer.symbol=v.fromJson(na.pointSymbol),1===gb.length&&(Pa.pointSymbol=
v.fromJson(na.pointSymbol))):na.lineSymbol&&"esriGeometryPolyline"===tb.geometryType?(tb.renderer.symbol=v.fromJson(na.lineSymbol),1===gb.length&&(Pa.polylineSymbol=v.fromJson(na.lineSymbol))):na.polygonSymbol&&"esriGeometryPolygon"===tb.geometryType&&(tb.renderer.symbol=v.fromJson(na.polygonSymbol),1===gb.length&&(Pa.polygonSymbol=v.fromJson(na.polygonSymbol)))})});else if(Pa=new dc(na.templateUrl,{id:na.id,visible:null!==na.visibility?na.visibility:!0,opacity:na.opacity,copyright:na.copyright,fullExtent:na.fullExtent&&
new C(na.fullExtent),initialExtent:na.fullExtent&&new C(na.fullExtent),subDomains:na.subDomains,tileInfo:na.tileInfo?new tc(na.tileInfo):null,refreshInterval:na.refreshInterval,wmtsInfo:na.wmtsInfo}),g.isDefined(na.minScale)||g.isDefined(na.maxScale))Pa.loaded?Pa.setScaleRange(na.minScale,na.maxScale):e.connect(Pa,"onLoad",function(){Pa.setScaleRange(na.minScale,na.maxScale)});Pa&&(Pa.arcgisProps={title:na.title},na.baseMapLayer&&(na.isReference?(Pa.attr("data-reference",!0),Pa._basemapGalleryLayerType=
"reference"):Pa._basemapGalleryLayerType="basemap"),Pa instanceof Q&&na.layerDefinition&&na.layerDefinition.featureReduction&&"cluster"===na.layerDefinition.featureReduction.type&&(Ka=na.layerDefinition.featureReduction,Ka.clusterSize&&(Ka.clusterSize=h.pt2px(Ka.clusterSize)),Ka.clusterRadius&&(Ka.clusterRadius=h.pt2px(Ka.clusterRadius)),Ka.popupInfo&&(Ka.infoTemplate=new G(Ka.popupInfo),delete Ka.popupInfo),Pa.setFeatureReduction(Ka)));return Pa}function Ha(na,Ra,Sa,Ka,Ma){l.forEach(na,function(Pa){Pa.layerObject=
ya(Pa,na,Ra,Sa,Ka,Ma)});var Xa=l.filter(na,function(Pa){return!Pa.isReference}),Wa=l.filter(na,function(Pa){return!!Pa.isReference});return na=Xa.concat(Wa)}function ea(na){var Ra=null;na=na[0];na.url&&Y(na)&&na.resourceInfo.spatialReference&&(Ra=new w,na.resourceInfo.spatialReference.wkid&&(Ra.wkid=na.resourceInfo.spatialReference.wkid),na.resourceInfo.spatialReference.wkt&&(Ra.wkt=na.resourceInfo.spatialReference.wkt));J(na)||U(na)?Ra=new w({wkid:102100}):na&&("WMS"===na.layerType||"WMS"===na.type)&&
(Ra=new w({wkid:na.spatialReferences[0]}));return Ra}function Oa(na,Ra,Sa,Ka,Ma,Xa,Wa,Pa){l.forEach(Ra,function(Za){if(Y(Za)||Za&&"VectorTileLayer"===Za.layerType)Za.resourceInfo=na[Za.deferredsPos][1],delete Za.deferredsPos});Xa=Xa||ea(Ra);Ra=Ha(Ra,Sa,Xa,Wa,Pa);Ma.callback(Ra);return Ma}function Na(na){!window.CanvasRenderingContext2D&&na.renderer&&"esri.renderer.HeatmapRenderer"===na.renderer.declaredClass&&na.setRenderer(A.fromJson({type:"simple",symbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,
yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}}}))}function Ca(na,Ra,Sa){na.message=na.message?na.message+(" [url:"+Ra+"]"):"[url:"+Ra+"]";Sa.push(na);r.defaults.io.errorHandler(na)}function X(na,Ra){var Sa=Ga(na);return b({url:Sa,content:{f:"json"},callbackParamName:"callback",error:function(Ka,Ma){Ca(Ka,Sa,Ra)}})}function oa(na){var Ra=Jb.arcgisUrl+"/"+na.itemId+"/data";return b({url:Ra,content:{f:"json"},callbackParamName:"callback",
error:function(Sa,Ka){na.errors=na.errors||[];Ca(Sa,Ra,na.errors)}})}function pa(na,Ra){return Nc.loadMetadata(na).otherwise(function(Sa){Ca(Sa,na,Ra);return Sa})}function Z(na,Ra,Sa){var Ka=new c;if(!(Sa.featureCollection&&Sa.featureCollection.layers||Sa.layers))return na.errors=na.errors||[],na.errors.push({message:"Invalid Feature Collection item data. [item id: "+na.itemId+"]"}),Ka.errback(),Ka;Sa.layers&&(Sa.featureCollection={layers:Sa.layers},delete Sa.layers,g.isDefined(Sa.showLegend)&&(Sa.featureCollection.showLegend=
Sa.showLegend,delete Sa.showLegend));ja(na,Sa.featureCollection,Ra).then(function(Ma){Sa.featureCollection=Ma;na.featureCollection&&na.featureCollection.layers?l.forEach(Sa.featureCollection.layers,function(Xa,Wa){Wa=na.featureCollection.layers[Wa];Wa.popupInfo||Wa.layerDefinition?Wa.layerDefinition?(g.isDefined(Wa.layerDefinition.minScale)&&g.isDefined(Wa.layerDefinition.maxScale)&&(Wa.layerDefinition.minScale!==Xa.layerDefinition.minScale||Wa.layerDefinition.maxScale!==Xa.layerDefinition.maxScale)&&
(delete Xa.layerDefinition.minScale,delete Xa.layerDefinition.maxScale),Wa.layerDefinition.drawingInfo&&u.toJson(Wa.layerDefinition.drawingInfo)!==u.toJson(Xa.layerDefinition.drawingInfo)&&delete Xa.layerDefinition.drawingInfo,Wa.layerDefinition.showLegend!==Xa.layerDefinition.showLegend&&delete Xa.layerDefinition.showLegend,Wa.layerDefinition=B.mixin(Wa.layerDefinition,Xa.layerDefinition)):Wa.layerDefinition=Xa.layerDefinition:(Wa.popupInfo=Xa.popupInfo,Wa.layerDefinition=Xa.layerDefinition);Wa.featureSet=
Xa.featureSet;Wa.nextObjectId=Xa.nextObjectId}):(na.featureCollection=na.featureCollection||{},na.featureCollection=B.mixin(na.featureCollection,Sa.featureCollection));Ka.callback(na)});return Ka}function ja(na,Ra,Sa){var Ka=new c;f(["./csv"],function(Ma){var Xa=[];l.forEach(Ra.layers,function(Wa){Wa.featureSet&&Wa.featureSet.features&&Wa.featureSet.features.length&&Wa.featureSet.features[0].geometry&&Wa.featureSet.features[0].geometry.spatialReference&&(Wa.deferredsPos=Xa.length,Xa.push(Ma.projectFeatureCollection(Wa,
Sa,Wa.featureSet.features[0].geometry.spatialReference)))});(new q(Xa)).addCallback(function(){l.forEach(Ra.layers,function(Wa){g.isDefined(Wa.deferredsPos)&&(Xa[Wa.deferredsPos].results&&Xa[Wa.deferredsPos].results.length?Wa=Xa[Wa.deferredsPos].results[0]:(Wa.errors=Wa.errors||[],Wa.errors.push({message:"Errors projecting feature collection. ["+na.title+" - "+Wa.layerDefinition.name+"]"})),delete Wa.deferredsPos)});Ka.callback(Ra)})});return Ka}function ta(na,Ra,Sa,Ka,Ma){var Xa=new c,Wa=new c,Pa=
[];l.forEach(na.operationalLayers,function(cb){cb.itemId&&"Feature Collection"==cb.type&&Pa.push(oa(cb).then(B.hitch(null,Z,cb,Sa)))});if(0===Pa.length)xa(na,Ra,Sa,Ka,Wa,Ma);else{var Za=new q(Pa);Za.addCallback(function(cb){xa(na,Ra,Sa,Ka,Wa,Ma)})}Wa.then(function(cb){Pa=[];l.forEach(cb,function(nb){nb=nb.layerObject;if(nb instanceof Q&&!nb.loaded&&!nb.loadError){var db=new c;d.once(nb,"load, error",function(){db.callback(nb)});Pa.push(db)}else nb&&"esri.layers.WFSLayer"===nb.declaredClass&&!nb.loadError&&
(db=new c,d.once(nb,"fromJsonComplete, error",function(mb){db.callback(nb)}),Pa.push(db))});if(Pa.length){var eb=new c;Za=new q(Pa);Za.addCallback(function(){eb.callback(cb)});return eb.promise}return cb}).then(function(cb){var eb=[];l.forEach(cb,function(nb){var db=nb.layerObject;db&&(db instanceof Q||"esri.layers.StreamLayer"===db.declaredClass)?db.loaded&&db.labelingInfo&&(nb.showLabels||db._collection?eb.push(db):db.setShowLabels&&db.setShowLabels(!1)):db&&"esri.layers.WFSLayer"===db.declaredClass&&
db.loaded&&db.labelingInfo&&eb.push(db)});eb.length?f(["../layers/LabelLayer"],function(nb){var db=new nb;l.forEach(eb,function(mb){db.addFeatureLayer(mb)});cb.push({layerObject:db});Xa.callback(cb)}):Xa.callback(cb)});return Xa}function xa(na,Ra,Sa,Ka,Ma,Xa){var Wa=[],Pa=[],Za=[];l.forEach(na.operationalLayers,function(cb,eb){if(cb.featureCollection&&cb.featureCollection.layers){var nb=cb.featureCollection.layers.length;l.forEach(cb.featureCollection.layers,function(db,mb){var gb=!0;cb.visibleLayers&&
-1==l.indexOf(cb.visibleLayers,mb)&&(gb=!1);db.visibility=(null!=cb.visibility?!!cb.visibility:!0)&&gb;db.opacity=cb.opacity;db.id=(cb.id||"operational"+eb)+"_"+mb;cb.title&&(db.title=1!==nb&&db.layerDefinition.name&&cb.title!==db.layerDefinition.name?cb.title+" - "+db.layerDefinition.name:cb.title);null==db.disablePopup&&(db.disablePopup=cb.disablePopup);Za.push(db)},this)}else Za.push(cb)});l.forEach(na.baseMap.baseMapLayers,function(cb,eb){cb.baseMapLayer=!0;cb.id=cb.id||"base"+eb;Wa.push(cb)});
l.forEach(Za,function(cb,eb){cb.id=cb.id||"operational"+eb;Wa.push(cb)});l.forEach(Wa,function(cb){var eb=!(!cb||"VectorTileLayer"!==cb.layerType);if(Y(cb)||eb)cb.deferredsPos=Pa.length,cb.errors=cb.errors||[],eb?Pa.push(pa(cb.styleUrl,cb.errors)):Pa.push(X(cb.url,cb.errors))});0===Pa.length?(Sa=Sa||ea(Wa),Wa=Ha(Wa,Ra,Sa,Ka,Xa),Ma.callback(Wa)):(new q(Pa)).addCallback(function(cb){Oa(cb,Wa,Ra,Pa,Ma,Sa,Ka,Xa)});return Ma}function Ea(na,Ra,Sa,Ka){var Ma=na.minScale,Xa=na.maxScale;if(10.1>=Sa.version&&
Ra)for(na=Ra.length-1;0<=na;na--){if(Ra[na].id==Ka)if(0==Ma&&0<Ra[na].minScale?Ma=Ra[na].minScale:0<Ma&&0==Ra[na].minScale?Ma=Sa.minScale:0<Ma&&0<Ra[na].minScale&&(Ma=Math.min(Ma,Ra[na].minScale)),Xa=Math.max(Sa.maxScale||0,Ra[na].maxScale||0),Sa.setScaleRange(Ma,Xa),-1<Ra[na].parentLayerId)Ka=Ra[na].parentLayerId;else break}else 10.1<Sa.version&&(l.forEach(na.layerInfos,function(Wa){Wa.id==Ka&&(0==Ma&&0<Wa.minScale?Ma=Wa.minScale:0<Ma&&0==Wa.minScale||0<Ma&&0<Wa.minScale&&(Ma=Math.min(Ma,Wa.minScale)),
Xa=Math.max(Xa||0,Wa.maxScale||0))}),Sa.setScaleRange(Ma,Xa))}function Ja(na,Ra,Sa,Ka){var Ma=na.url,Xa=na.__popupIds,Wa=na.__popupUrls,Pa=na.__popupWhereClauses,Za=na.__popupMinScales,cb=na.__popupMaxScales,eb=na.__resourceInfo,nb=[];l.forEach(na.__popups,function(db,mb){if(db){var gb=[];l.forEach(db.fieldInfos,function(Bb){"shape"!==Bb.fieldName.toLowerCase()&&gb.push(Bb.fieldName)});if(na.dynamicLayerInfos&&0<na.dynamicLayerInfos.length){var tb=l.filter(na.dynamicLayerInfos,function(Bb){return Xa[mb]==
Bb.id})[0].source;var Vb=new Q(Ma+"/dynamicLayer",{parentLayer:na,id:na.id+"_"+Xa[mb],source:tb,outFields:gb,mode:Q.MODE_SELECTION,infoTemplate:db&&new Sa(db),drawMode:!1,visible:na.visible,autoGeneralize:!0});var Ac=function(Bb,jc){0<Pa[Bb].length&&jc.setDefinitionExpression(Pa[Bb]);if(g.isDefined(Za[Bb])||g.isDefined(cb[Bb]))if(g.isDefined(na.minScale)||g.isDefined(na.maxScale)){var kc=na.minScale,lc=na.maxScale;0==kc&&0<Za[Bb]?kc=Za[Bb]:0<kc&&0==Za[Bb]||0<kc&&0<Za[Bb]&&(kc=Math.min(kc,Za[Bb]));
lc=Math.max(lc||0,cb[Bb]||0);jc.setScaleRange(kc,lc)}else jc.setScaleRange(Za[Bb],cb[Bb]);else Ea(na,Ra||eb.layers,jc,Xa[Bb])};Vb.loaded?Ac(mb,Vb):e.connect(Vb,"onLoad",function(Bb){Ac(mb,Vb)})}else{var Cc=null,Bc=Ma+"/"+Xa[mb];if(Wa[mb].length)Bc=Wa[mb];else if(Ra)for(tb=0;tb<Ra.length;tb++)if(Ra[tb].id===Xa[mb]){Cc=Ra[tb];break}Vb=new Q(Ga(Bc),{parentLayer:na,id:na.id+"_"+Xa[mb],outFields:gb,mode:Q.MODE_SELECTION,infoTemplate:db&&new Sa(db),drawMode:!1,visible:na.visible,resourceInfo:Cc,autoGeneralize:!0});
Vb.loaded?(0<Pa[mb].length&&Vb.setDefinitionExpression(Pa[mb]),Ea(na,Ra||eb.layers,Vb,Xa[mb])):e.connect(Vb,"onLoad",function(Bb){0<Pa[mb].length&&Vb.setDefinitionExpression(Pa[mb]);Ea(na,Ra||eb.layers,Bb,Xa[mb])})}nb.push(Vb)}});0<nb.length&&(e.connect(na,"onVisibilityChange",B.hitch(this,function(db,mb){l.forEach(db,function(gb){mb?gb.show():gb.hide()})},nb)),e.connect(Ka,"onLayerRemove",B.hitch(this,function(db,mb,gb){db.id===gb.id&&l.forEach(mb,function(tb){Ka.removeLayer(tb)})},na,nb)));delete na.__popups;
delete na.__popupIds;delete na.__popupUrls;delete na.__popupWhereClauses;delete na.__popupMinScales;delete na.__popupMaxScales;delete na.__resourceInfo;return nb}function La(na){return b({url:Ga(na.url+"/layers"),content:{f:"json"},callbackParamName:"callback",error:function(){}})}function Ya(na,Ra,Sa){var Ka=[];l.forEach(na,function(Xa){var Wa=Xa.__popups;Wa&&1<Wa.length&&10<=Xa.version&&(Xa.__deferredsPos=Ka.length,Ka.push(La(Xa)))});var Ma=[];0<Ka.length?(new q(Ka)).addCallback(function(Xa){l.forEach(na,
function(Wa){Wa.__popups&&0<Wa.__popups.length&&(Wa.__deferredsPos||0===Wa.__deferredsPos?(Ma=Ma.concat(Ja(Wa,Xa[Wa.__deferredsPos][1].layers,Sa,Ra)),delete Wa.__deferredsPos):Ma=Ma.concat(Ja(Wa,null,Sa,Ra)))});Ra.addLayers(Ma)}):(l.forEach(na,function(Xa){Xa.__popups&&0<Xa.__popups.length&&(Ma=Ma.concat(Ja(Xa,null,Sa,Ra)))}),Ra.addLayers(Ma))}function Ua(na){l.forEach(na,function(Ra){var Sa=Ra.layer;Sa.toJson&&(Ra=Sa.toJson(),Ra.featureSet&&Sa.name&&-1<Sa.name.indexOf("Text")&&l.forEach(Ra.featureSet.features,
function(Ka,Ma){Ka.attributes.TEXT&&(Ma=Sa.graphics[Ma],Ma.symbol.setText(Ka.attributes.TEXT),Ka.symbol.horizontalAlignment&&(Ma.symbol.align=Ka.symbol.horizontalAlignment),Ma.setSymbol(Ma.symbol),Ma.setAttributes(Ka.attributes))},this))})}function Ta(na){var Ra=6;l.forEach(na,function(Sa){if(Sa=Sa.renderer)"esri.renderer.SimpleRenderer"===Sa.declaredClass?((Sa=Sa.symbol)&&Sa.xoffset&&(Ra=Math.max(Ra,Math.abs(Sa.xoffset))),Sa&&Sa.yoffset&&(Ra=Math.max(Ra,Math.abs(Sa.yoffset)))):"esri.renderer.UniqueValueRenderer"!==
Sa.declaredClass&&"esri.renderer.ClassBreaksRenderer"!==Sa.declaredClass||l.forEach(Sa.infos,function(Ka){(Ka=Ka.symbol)&&Ka.xoffset&&(Ra=Math.max(Ra,Math.abs(Ka.xoffset)));Ka&&Ka.yoffset&&(Ra=Math.max(Ra,Math.abs(Ka.yoffset)))})});return Ra}function ab(na){var Ra=this,Sa=Ra.infoWindow,Ka=na.graphic;if(Ra.loaded){Sa.hide();Sa.clearFeatures();var Ma=[];l.forEach(Ra.graphicsLayerIds,function(db){(db=Ra.getLayer(db))&&db instanceof Q&&db.loaded&&db.visible&&(db.clearSelection(),db.infoTemplate&&!db.suspended&&
Ma.push(db))});l.forEach(Ra.layerIds,function(db){(db=Ra.getLayer(db))&&(-1!==db.declaredClass.indexOf("ArcGISImageServiceLayer")||-1!==db.declaredClass.indexOf("RasterXLayer"))&&db.loaded&&db.visible&&db.infoTemplate&&Ma.push(db)});Ka=Ka&&Ka.getInfoTemplate()?Ka:null;if(Ma.length||Ka){var Xa=Ta(Ma),Wa=na.screenPoint,Pa=Ra.toMap(new E(Wa.x-Xa,Wa.y+Xa));Xa=Ra.toMap(new E(Wa.x+Xa,Wa.y-Xa));var Za=new C(Pa.x,Pa.y,Xa.x,Xa.y,Ra.spatialReference),cb=new H;cb.geometry=Za;cb.timeExtent=Ra.timeExtent;var eb=
!0;Pa=l.map(Ma,function(db){db=db&&db.isFeatureReductionActive&&db.isFeatureReductionActive()?db.getFeatureReductionLayer():db;if(-1!==db.declaredClass.indexOf("ArcGISImageServiceLayer")){cb.geometry=na.mapPoint;eb=!1;var mb=db.queryVisibleRasters(cb,{rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0});mb.addCallback(function(){return db.getVisibleRasters()})}else if(-1!==db.declaredClass.indexOf("RasterXLayer"))mb=db.fetchPopupFromTiles({geometry:na.mapPoint});else if("function"===
typeof db.selectFeatures)mb=db.selectFeatures(cb),mb.addCallback(function(){return db.getSelectedFeatures()});else{mb=new c;var gb=l.filter(db.graphics,function(tb){return tb&&tb.visible&&Za.intersects(tb.geometry)});mb.resolve(gb)}return mb});Ka&&(Xa=new c,Xa.callback([Ka]),Pa.splice(0,0,Xa));if(!l.some(Pa,function(db){return-1===db.fired})){var nb=Ka?1:0;l.forEach(Ma,function(db){nb=-1!==db.declaredClass.indexOf("ArcGISImageServiceLayer")?nb+db.getVisibleRasters().length:-1!==db.declaredClass.indexOf("RasterXLayer")?
nb+db.getPopupFromTiles().length:nb+db.getSelectedFeatures().length});if(!nb)return}Sa.setFeatures(Pa);Sa.show(na.mapPoint,{closestFirst:eb})}}}function fb(na,Ra){var Sa=Ra.mapOptions||{};if(!Sa.infoWindow){var Ka=new F({visibleWhenEmpty:!1},m.create("div"));Sa.infoWindow=Ka}g.isDefined(Sa.showInfoWindowOnClick)||Ra.usePopupManager||(Sa.showInfoWindowOnClick=!1);na=new x(na,Sa);e.connect(na,"onLayersAddResult",Ua);return na}function kb(na,Ra,Sa,Ka,Ma,Xa){if(Ka.map){var Wa=Ka.map;var Pa=Ka.clickEventHandle;
var Za=Ka.clickEventListener;var cb=Ka.errors}else{var eb=Sa.itemData;!Ma.mapOptions.backgroundColor&&eb.background&&eb.background.color&&null!=eb.background.color[0]&&(Ma.mapOptions.backgroundColor=k.toDojoColor(eb.background.color));Wa=fb(Ka,Ma);Ma.ignorePopups||Ma.disableClickBehavior||Ma.usePopupManager||(Pa=e.connect(Wa,"onClick",ab),Za=ab)}Wa.addLayers(na);Ma.ignorePopups||Ma.usePopupManager||Ya(na,Wa,Ma._clazz);var nb=cb||[];l.forEach(Ra,function(db){db.errors&&(nb=nb.concat(db.errors))},this);
Wa.loaded?Xa.callback({map:Wa,itemInfo:Sa,errors:nb,clickEventHandle:Pa,clickEventListener:Za}):e.connect(Wa,"onLoad",function(){Xa.callback({map:Wa,itemInfo:Sa,errors:nb,clickEventHandle:Pa,clickEventListener:Za})})}function qb(na,Ra,Sa,Ka,Ma){var Xa=[];l.forEach(Ma,function(Za){B.isArray(Za.layerObject)?l.forEach(Za.layerObject,function(cb){Xa.push(cb)}):Xa.push(Za.layerObject)});if(J(Ma[0]))var Wa=setInterval(function(){if(Ma[0].layerObject&&Ma[0].layerObject.loaded)clearInterval(Wa),ob(na,Ra,
Sa,Ka,Ma,Xa);else if(Ma[0].errors){clearInterval(Wa);var Za="";Ma[0].errors&&Ma[0].errors.length&&(Za=" ("+Ma[0].errors[0].message+")");Ka.errback(Error(S.arcgis.utils.baseLayerError+Za))}},10);else if(!Xa[0]&&Ma[0].baseMapLayer){var Pa="";Ma[0].errors&&Ma[0].errors.length&&(Pa=" ("+Ma[0].errors[0].message+")");Ka.errback(Error(S.arcgis.utils.baseLayerError+Pa))}else ob(na,Ra,Sa,Ka,Ma,Xa)}function ob(na,Ra,Sa,Ka,Ma,Xa){try{var Wa=Sa.mapOptions||{};Sa.mapOptions=Wa;Xa=l.filter(Xa,g.isDefined);if(Ra.map||
Wa.extent)kb(Xa,Ma,na,Ra,Sa,Ka);else{var Pa=Xa[0].spatialReference;if(Wa.center&&(null!=Wa.zoom||Wa.scale)&&(B.isArray(Wa.center)&&(Wa.center=new D(Wa.center)),y.canProject(Wa.center,Pa))){kb(Xa,Ma,na,Ra,Sa,Ka);return}var Za=na.item;if(Za&&Za.extent&&Za.extent.length){var cb=new C(Za.extent[0][0],Za.extent[0][1],Za.extent[1][0],Za.extent[1][1],new w({wkid:4326}));4326===Pa.wkid?(Wa.extent=cb,kb(Xa,Ma,na,Ra,Sa,Ka)):900913===Pa.wkid||102100===Pa.wkid||102113===Pa.wkid||3857===Pa.wkid?(cb.xmin=Math.max(cb.xmin,
-180),cb.xmax=Math.min(cb.xmax,180),cb.ymin=Math.max(cb.ymin,-89.99),cb.ymax=Math.min(cb.ymax,89.99),Wa.extent=y.geographicToWebMercator(cb),kb(Xa,Ma,na,Ra,Sa,Ka)):Sa.geometryServiceURL||r.defaults.geometryService?(Sa.geometryServiceURL?new L(Sa.geometryServiceURL):r.defaults.geometryService).project([cb],Pa,function(eb){eb=eb[0];Wa.extent=Wa.extent||eb;kb(Xa,Ma,na,Ra,Sa,Ka)},function(){kb(Xa,Ma,na,Ra,Sa,Ka)}):Ka.errback(Error(S.arcgis.utils.geometryServiceError))}else kb(Xa,Ma,na,Ra,Sa,Ka)}}catch(eb){Ka.errback(eb)}}
function wb(na){var Ra=[];l.forEach(na.operationalLayers,function(Sa){Sa.featureCollection?Ra.push({featureCollection:Sa.featureCollection,visibility:null!=Sa.visibility?!!Sa.visibility:!0,title:Sa.title}):Sa.layerObject&&Ra.push({layer:Sa.layerObject,visibility:null!=Sa.visibility?!!Sa.visibility:!0,title:Sa.title})});return Ra}function Gb(na){var Ra=[],Sa=na.baseMap.baseMapLayers;na.operationalLayers&&(Sa=Sa.concat(na.operationalLayers));l.forEach(Sa,function(Ka){var Ma={};if(Ka.featureCollection&&
(!Ka||"CSV"!==Ka.layerType&&"CSV"!==Ka.type))!0===Ka.featureCollection.showLegend&&l.forEach(Ka.featureCollection.layers,function(Pa){if(!1!==Pa.showLegend){var Za=Pa.layerObject.renderer;Ma={layer:Pa.layerObject,title:Ka.title,defaultSymbol:Za&&Za.defaultSymbol&&Za.defaultLabel?!0:!1};1<Ka.featureCollection.layers.length&&(Ma.title+=" - "+Pa.layerDefinition.name);Ra.push(Ma)}});else if(Ka.baseMapLayer&&!0===Ka.showLegend&&Ka.layerObject||!Ka.baseMapLayer&&!1!==Ka.showLegend&&Ka.layerObject&&!(Ka.layerObject instanceof
Q&&Ka.layerObject.mode===Q.MODE_SELECTION)){var Xa=Ka.layerObject.renderer,Wa=Ka.layerObject.declaredClass;Xa=!Xa||Xa&&Xa.defaultSymbol&&Xa.defaultLabel?!0:!1;if(10.1>Ka.layerObject.version&&("esri.layers.ArcGISDynamicMapServiceLayer"===Wa||"esri.layers.ArcGISTiledMapServiceLayer"===Wa)||"esri.layers.ArcGISImageServiceLayer"===Wa)Xa=!0;Ma={layer:Ka.layerObject,title:Ka.title,defaultSymbol:Xa};Ka.layers&&(Wa=l.map(l.filter(Ka.layers,function(Pa){return!1===Pa.showLegend}),function(Pa){return Pa.id}),
Wa.length&&(Ma.hideLayers=Wa));Ra.push(Ma)}});return Ra}function yb(na,Ra){function Sa(Pa,Za){l.forEach(Pa,function(cb,eb){switch(cb){case "../layers/ArcGISDynamicMapServiceLayer":Eb=Za[eb];break;case "../layers/ArcGISImageServiceLayer":Hb=Za[eb];break;case "../layers/ArcGISImageServiceVectorLayer":Nb=Za[eb];break;case "../layers/CSVLayer":$b=Za[eb];break;case "../layers/DynamicLayerInfo":Ob=Za[eb];break;case "../layers/GeoRSSLayer":bc=Za[eb];break;case "../layers/ImageParameters":Ub=Za[eb];break;
case "../layers/ImageServiceParameters":wc=Za[eb];break;case "../layers/KMLLayer":hc=Za[eb];break;case "../layers/LabelClass":ic=Za[eb];break;case "../layers/LayerDrawingOptions":xc=Za[eb];break;case "../layers/MosaicRule":yc=Za[eb];break;case "../layers/OpenStreetMapLayer":Hc=Za[eb];break;case "../layers/RasterFunction":Mc=Za[eb];break;case "../layers/RasterXLayer":Ic=Za[eb];break;case "../layers/StreamLayer":zc=Za[eb];break;case "../layers/TileInfo":tc=Za[eb];break;case "../layers/VectorTileLayer":Xb=
Za[eb];break;case "../layers/vectorTiles/layers/support/vectorTileLayerLoader":Nc=Za[eb];break;case "../virtualearth/VETiledLayer":cc=Za[eb];break;case "../layers/WebTiledLayer":dc=Za[eb];break;case "../layers/WFSLayer":Yb=Za[eb];break;case "../layers/WMSLayer":Oc=Za[eb];break;case "../layers/WMSLayerInfo":Pb=Za[eb]}})}var Ka=new c;na=na.itemData;Ra=[];na.baseMap&&na.baseMap.baseMapLayers&&(Ra=Ra.concat(na.baseMap.baseMapLayers));na.operationalLayers&&(Ra=Ra.concat(na.operationalLayers));na=l.map(Ra,
function(Pa){return Pa&&Pa.layerType});var Ma=[],Xa=[];Ra=!1;for(var Wa=0;Wa<na.length;Wa++){switch(na[Wa]){case "ArcGISFeatureLayer":-1===l.indexOf(Ma,"../layers/LabelClass")&&Ma.push("../layers/LabelClass");break;case "ArcGISImageServiceLayer":case "ArcGISTiledImageServiceLayer":-1===l.indexOf(Ma,"../layers/ArcGISImageServiceLayer")&&(Ma.push("../layers/ArcGISImageServiceLayer"),Xa.push("../layers/ImageServiceParameters"),Xa.push("../layers/MosaicRule"),Xa.push("../layers/RasterFunction"),Ma.push("../layers/RasterXLayer"));
break;case "ArcGISImageServiceVectorLayer":-1===l.indexOf(Ma,"../layers/ArcGISImageServiceVectorLayer")&&(Ma.push("../layers/ArcGISImageServiceVectorLayer"),Xa.push("../layers/ImageServiceParameters"),Xa.push("../layers/MosaicRule"),Xa.push("../layers/RasterFunction"));break;case "ArcGISMapServiceLayer":case "ArcGISTiledMapServiceLayer":-1===l.indexOf(Ma,"../layers/ArcGISDynamicMapServiceLayer")&&(Ma.push("../layers/ArcGISDynamicMapServiceLayer"),Xa.push("../layers/DynamicLayerInfo"),Xa.push("../layers/ImageParameters"),
Xa.push("../layers/LayerDrawingOptions"));break;case "ArcGISStreamLayer":-1===l.indexOf(Ma,"../layers/StreamLayer")&&Ma.push("../layers/StreamLayer");-1===l.indexOf(Ma,"../layers/LabelClass")&&Ma.push("../layers/LabelClass");break;case "BingMapsAerial":case "BingMapsHybrid":case "BingMapsRoad":-1===l.indexOf(Ma,"../virtualearth/VETiledLayer")&&Ma.push("../virtualearth/VETiledLayer");break;case "CSV":-1===l.indexOf(Ma,"../layers/CSVLayer")&&(Ma.push("../layers/CSVLayer"),Xa.push("./csv"));break;case "GeoRSS":-1===
l.indexOf(Ma,"../layers/GeoRSSLayer")&&Ma.push("../layers/GeoRSSLayer");break;case "KML":-1===l.indexOf(Ma,"../layers/KMLLayer")&&Ma.push("../layers/KMLLayer");break;case "OpenStreetMap":-1===l.indexOf(Ma,"../layers/OpenStreetMapLayer")&&Ma.push("../layers/OpenStreetMapLayer");break;case "VectorTileLayer":-1===l.indexOf(Ma,"../layers/VectorTileLayer")&&Ma.push("../layers/VectorTileLayer");-1===l.indexOf(Xa,"../layers/vectorTiles/layers/support/vectorTileLayerLoader")&&Xa.push("../layers/vectorTiles/layers/support/vectorTileLayerLoader");
break;case "WebTiledLayer":-1===l.indexOf(Ma,"../layers/WebTiledLayer")&&(Ma.push("../layers/WebTiledLayer"),Xa.push("../layers/TileInfo"));break;case "WFS":-1===l.indexOf(Ma,"../layers/WFSLayer")&&Ma.push("../layers/WFSLayer");break;case "WMS":-1===l.indexOf(Ma,"../layers/WMSLayer")&&(Ma.push("../layers/WMSLayer"),Xa.push("../layers/WMSLayerInfo"));break;default:Ra=!0}if(Ra)break}Ra&&(Ma=ac,Xa=Dc);Ma.length?f(Ma,function(){Sa(Ma,arguments);Xa.length?f(Xa,function(){Sa(Xa,arguments);Ka.resolve()}):
Ka.resolve()}):Ka.resolve();return Ka}function lb(na){na=na.itemData;var Ra=function(Ka,Ma){"GroupLayer"===Ka.layerType?l.forEach(Ka.layers,function(Xa){Xa.visibility=!1!==Ka.visibility&&!1!==Xa.visibility;Xa.opacity=g.isDefined(Ka.opacity)?g.isDefined(Xa.opacity)?Xa.opacity*Ka.opacity:Ka.opacity:Xa.opacity;Ra(Xa,Ma)}):Ma.push(Ka)},Sa=[];l.forEach(na.operationalLayers,function(Ka){Ra(Ka,Sa)});na.operationalLayers=Sa}function Db(na,Ra,Sa,Ka){lb(Ka);var Ma=Ka.itemData;Ma.baseMap&&Ma.baseMap.baseMapLayers&&
Ma.baseMap.baseMapLayers.length&&(Ma.baseMap.baseMapLayers[0].firstLayer=!0);var Xa=Ra.layerMixins,Wa=Xa&&Xa.length;if(Wa){var Pa=function(Za){for(var cb=0;cb<Wa;cb++){var eb=Xa[cb];if(eb.mixin)if(eb.hasOwnProperty("id")){if(Za.id===eb.id){B.mixin(Za,eb.mixin);break}}else if(Za.url===eb.url){B.mixin(Za,eb.mixin);break}}};l.forEach(Ma.baseMap&&Ma.baseMap.baseMapLayers,Pa);l.forEach(Ma.operationalLayers,Pa)}yb(Ka,Ra).then(function(){return da(Ka,Ra)}).then(function(){return W(Ka,Ra)}).then(function(Za){var cb=
Za[0],eb=Za[1];if(cb.itemData.operationalLayers&&0!==cb.itemData.operationalLayers.length){var nb=new c,db=cb.itemData.baseMap.baseMapLayers.slice(),mb=l.filter(cb.itemData.baseMap.baseMapLayers,function(gb){return!gb.isReference});Za={item:cb.item,itemData:{baseMap:{baseMapLayers:mb},background:B.clone(cb.itemData.background)}};cb.itemData.baseMap.baseMapLayers=l.filter(cb.itemData.baseMap.baseMapLayers,function(gb){return gb.isReference});K(Za,eb).addCallback(function(gb){ta(gb.itemData,eb).addCallback(B.hitch(null,
qb,gb,na,eb,nb))});nb.then(function(gb){K(cb,eb).addCallback(function(tb){ta(tb.itemData,eb,gb.map.spatialReference,mb,gb.map).addCallback(function(Vb){tb.itemData.baseMap.baseMapLayers=db;qb(tb,gb,eb,Sa,Vb)})})},B.hitch(Sa,Sa.errback))}else K(cb,eb).addCallback(function(gb){ta(gb.itemData,eb).addCallback(B.hitch(null,qb,gb,na,eb,Sa))})})}function Sb(na,Ra){"undefined"===typeof Ra&&(Ra=!0);Jb._arcgisUrl&&0<Jb._arcgisUrl.length&&(Jb.arcgisUrl=Jb._arcgisUrl);var Sa={},Ka=new c;b({url:Jb.arcgisUrl+"/"+
na,content:{f:"json"},callbackParamName:"callback",load:function(Ma){Sa.item=Ma;Ra?b({url:Jb.arcgisUrl+"/"+na+"/data",content:{f:"json"},callbackParamName:"callback",load:function(Xa){Sa.itemData=Xa;Ka.callback(Sa)},error:function(Xa){Ka.errback(Xa)}}):Ka.callback(Sa)},error:function(Ma){Ka.errback(Ma)}});return Ka}var Eb,Hb,Nb,$b,Ob,bc,Ub,wc,hc,ic,xc,yc,Hc,Mc,Ic,zc,tc,Xb,Nc,cc,dc,Yb,Oc,Pb,ac="../layers/ArcGISDynamicMapServiceLayer ../layers/ArcGISImageServiceLayer ../layers/ArcGISImageServiceVectorLayer ../layers/CSVLayer ../layers/GeoRSSLayer ../layers/KMLLayer ../layers/LabelClass ../layers/OpenStreetMapLayer ../layers/RasterXLayer ../layers/StreamLayer ../layers/VectorTileLayer ../virtualearth/VETiledLayer ../layers/WebTiledLayer ../layers/WFSLayer ../layers/WMSLayer".split(" "),
Dc="./csv ../layers/DynamicLayerInfo ../layers/ImageParameters ../layers/ImageServiceParameters ../layers/LayerDrawingOptions ../layers/MosaicRule ../layers/RasterFunction ../layers/TileInfo ../layers/vectorTiles/layers/support/vectorTileLayerLoader ../layers/WMSLayerInfo".split(" ");var Jb={arcgisUrl:z.getProtocolForWebResource()+"//www.arcgis.com/sharing/rest/content/items",getItem:Sb,createMap:function(na,Ra,Sa){var Ka=new c;Sa=Sa||{};var Ma=Sa.infoTemplateClass;Sa._clazz=Ma&&(B.isObject(Ma)?Ma:
B.getObject(Ma))||G;B.isString(na)?Sb(na).addCallback(B.hitch(null,Db,Ra,Sa,Ka)).addErrback(B.hitch(Ka,Ka.errback)):Db(Ra,Sa,Ka,na);Ka.addCallback(function(Xa){var Wa=Xa.map;Wa&&(Wa.tables=B.getObject("itemInfo.itemData.tables",!1,Xa)||[])});return Ka},getLayerList:function(na){return na&&na.itemInfo&&na.itemInfo.itemData?wb(na.itemInfo.itemData):[]},getLegendLayers:function(na){return na&&na.itemInfo&&na.itemInfo.itemData?Gb(na.itemInfo.itemData):[]},_arcgisUrl:null,_getItemProps:K,_getItemData:aa,
_getBingKey:la,_portalUrlResponse:fa,_portalUrlFailure:ha,_processFSItemProperties:T,_processSSItemProperties:N,_getLayers:ta,_preBuildLayerObjects:Oa,_buildLayerObjects:Ha,_preCreateMap:qb,_getMapSR:ea,_createMap:kb,_addSelectionLayers:Ya,_createSelectionFeatureLayers:Ja,_getServiceInfo:X,_getFeatureCollectionItem:oa,_mergeFeatureCollectionItem:Z,_projectFeatureCollection:ja,_getLayersInfo:La,_initLayer:ya,_loadAsCached:ba,_loadAsDynamic:wa,_processPopups:za,_onLayersAddResult:Ua,_sameSpatialReferenceAsBasemap:Fa,
_sameTilingSchemeAsBasemap:O,_showPopup:ab,_calculateClickTolerance:Ta,_getVisibleFeatureLayers:ia,_updateLayerScaleInfo:Ea,_checkUrl:Ga,_isHostedService:Da,_isAgolService:va,_getLegendLayers:Gb};B.setObject("arcgis.utils",Jb,n);return Jb})},"esri/map":function(){define("require dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/event dojo/on dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/a11yclick dijit/registry ./kernel ./config ./sniff ./lang ./_coremap ./MapNavigationManager dojo/i18n!./nls/jsapi".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E,C,y){var v={up:"panUp",right:"panRight",down:"panDown",left:"panLeft"},A={upperRight:"panUpperRight",lowerRight:"panLowerRight",lowerLeft:"panLowerLeft",upperLeft:"panUpperLeft"},G=e.connect,F=e.disconnect,H=n.create,L=k.set,M=c.hitch,Q=r.getMarginBox,S=B.deprecated,I=c.mixin,P=0;B=l(E,{declaredClass:"esri.Map",constructor:function(J,U){U=U||{};I(this,{_slider:null,_navDiv:null,_mapParams:I({attributionWidth:.45,slider:!0,nav:!1,logo:!0,sliderStyle:"small",
sliderPosition:"top-left",sliderOrientation:"vertical",autoResize:!0},U)});I(this,{isMapNavigation:null!=U.isMapNavigation?U.isMapNavigation:!0,isDoubleClickZoom:null!=U.isDoubleClickZoom?U.isDoubleClickZoom:!0,isClickRecenter:null!=U.isClickRecenter?U.isClickRecenter:!0,isPan:null!=U.isPan?U.isPan:!0,isRubberBandZoom:null!=U.isRubberBandZoom?U.isRubberBandZoom:!0,isPinchZoom:null!=U.isPinchZoom?U.isPinchZoom:!0,isKeyboardNavigation:null!=U.isKeyboardNavigation?U.isKeyboardNavigation:!0,isScrollWheel:null!=
U.isScrollWheel?U.isScrollWheel:!0,isShiftDoubleClickZoom:!1,isScrollWheelZoom:!1,isPanArrows:!1,isZoomSlider:!1});c.isFunction(w._css)&&(w._css=w._css(this._mapParams.force3DTransforms),this.force3DTransforms=this._mapParams.force3DTransforms);J=z("esri-transforms")&&z("esri-transitions");this.navigationMode=this._mapParams.navigationMode||J&&"css-transforms"||"classic";"css-transforms"!==this.navigationMode||J||(this.navigationMode="classic");this.fadeOnZoom=D.isDefined(this._mapParams.fadeOnZoom)?
this._mapParams.fadeOnZoom:"css-transforms"===this.navigationMode;"css-transforms"!==this.navigationMode&&(this.fadeOnZoom=!1);this.setMapCursor("default");this.smartNavigation=U&&U.smartNavigation;if(!(D.isDefined(this.smartNavigation)||!z("mac")||z("esri-touch")||z("esri-pointer")||3.5>=z("ff"))){var Y=navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|_)([\d]+)\D/i);Y&&D.isDefined(Y[1])&&D.isDefined(Y[3])&&(J=parseInt(Y[1],10),Y=parseInt(Y[3],10),this.smartNavigation=10<J||10===J&&6<=Y)}this.showAttribution=
D.isDefined(this._mapParams.showAttribution)?this._mapParams.showAttribution:!0;this._onLoadHandler_connect=G(this,"onLoad",this,"_onLoadInitNavsHandler");var aa=H("div",{class:"esriControlsBR"+(this._mapParams.nav?" withPanArrows":"")},this.root);if(this.showAttribution)if(J=c.getObject("esri.dijit.Attribution",!1))this._initAttribution(J,aa);else{var la=P++,T=this;this._rids&&this._rids.push(la);f(["./dijit/Attribution"],function(N){var K=T._rids?u.indexOf(T._rids,la):-1;-1!==K&&(T._rids.splice(K,
1),T._initAttribution(N,aa))})}this._mapParams.logo&&(J={},6===z("ie")&&(J.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+f.toUrl("./images/map/logo-med.png")+"')"),this._ogol=H("div",{style:J,tabIndex:"0",title:"Esri"},aa),this._setLogoSize(),this._onMapResizeLogo_connect=G(this,"onResize",this,"_setLogoSize"),this._ogol_connect=G(this._ogol,g,this,"_openLogoLink"));this.navigationManager=new C(this);U&&U.basemap&&(this._onLoadFix=
!0,this.setBasemap(U.basemap),this._onLoadFix=!1);if(this.autoResize=this._mapParams.autoResize)U=this._getEnclosingResizableWidget(this.container)||window,J=this.resize,this._rszSignal=d.pausable(U,"resize",J),this._oriSignal=d.pausable(window,"orientationchange",J),q.after(U,"resize",J,!0),this._startResizeTimer()},_startResizeTimer:function(){clearTimeout(this._persistentTimer);this._persistentTimer=setTimeout(this._timedResize,2*this.resizeDelay)},_getEnclosingResizableWidget:function(J){var U=
b.getEnclosingWidget(J);return U?U.resize?U:this._getEnclosingResizableWidget(J.parentNode):U},_setLogoSize:function(){this._ogol&&(25E4>this.root.clientWidth*this.root.clientHeight?(h.remove(this._ogol,"logo-med"),h.add(this._ogol,"logo-sm")):(h.remove(this._ogol,"logo-sm"),h.add(this._ogol,"logo-med")))},_initAttribution:function(J,U){U=H("span",{class:"esriAttribution"},U,"first");L(U,"maxWidth",Math.floor(this.width*this._mapParams.attributionWidth)+"px");this._connects.push(G(U,g,function(){h.contains(this,
"esriAttributionOpen")?h.remove(this,"esriAttributionOpen"):this.scrollWidth>this.clientWidth&&h.add(this,"esriAttributionOpen")}));this.attribution=new J({map:this},U)},_cleanUp:function(){this.disableMapNavigation();this.navigationManager.destroy();var J=this._slider;J&&J.destroy&&!J._destroyed&&J.destroy();J=this._navDiv;var U=this.attribution;J&&n.destroy(J);U&&U.destroy();this._connects.push(this._slider_connect,this._ogol_connect,this._rszSignal,this._oriSignal);u.forEach(this._connects,F);
clearInterval(this._persistentTimer);this.attribution=this.navigationManager=this._rids=this._connects=this._slider_connect=this._ogol_connect=this._rszSignal=this._oriSignal=this._persistentTimer=null;this.inherited("_cleanUp",arguments)},_isPanningOrZooming:function(){return this.__panning||this.__zooming},_canZoom:function(J){var U=this.getLevel();return!this.__tileInfo||!(U===this.getMinZoom()&&0>J||U===this.getMaxZoom()&&0<J)},_onLoadInitNavsHandler:function(){this._evalMapNavigation();this._createNav();
if("small"===this._mapParams.sliderStyle||!this._createSlider)this._createSimpleSlider();else if(this._mapParams.slider){var J=-1!==this._getSliderClass(!0).indexOf("Horizontal");J=[J?"dijit.form.HorizontalSlider":"dijit.form.VerticalSlider",J?"dijit.form.HorizontalRule":"dijit.form.VerticalRule",J?"dijit.form.HorizontalRuleLabels":"dijit.form.VerticalRuleLabels"];if(u.some(J,function(aa){return!c.getObject(aa,!1)})){J=u.map(J,function(aa){return aa.replace(/\./g,"/")});var U=P++,Y=this;this._rids&&
this._rids.push(U);f(J,function(){var aa=Y._rids?u.indexOf(Y._rids,U):-1;-1!==aa&&(Y._rids.splice(aa,1),Y._createSlider.apply(Y,arguments))})}else J=u.map(J,function(aa){return c.getObject(aa,!1)}),this._createSlider.apply(this,J)}F(this._onLoadHandler_connect)},_createNav:function(){if(this._mapParams.nav){var J,U=h.add,Y=this.id;this._navDiv=H("div",{id:Y+"_navdiv"},this.root);U(this._navDiv,"navDiv");var aa=this.width/2,la=this.height/2;for(J in v){var T=v[J];var N=H("div",{id:Y+"_pan_"+J},this._navDiv);
U(N,"fixedPan "+T);if("up"===J||"down"===J){var K=parseInt(Q(N).w,10)/2;L(N,{left:aa-K+"px",zIndex:30})}else K=parseInt(Q(N).h,10)/2,L(N,{top:la-K+"px",zIndex:30});this._connects.push(G(N,"onclick",M(this,this[T])))}this._onMapResizeNavHandler_connect=G(this,"onResize",this,"_onMapResizeNavHandler");for(J in A)T=A[J],N=H("div",{id:Y+"_pan_"+J,style:{zIndex:30}},this._navDiv),U(N,"fixedPan "+T),this._connects.push(G(N,"onclick",M(this,this[T])));this.isPanArrows=!0}},_onMapResizeNavHandler:function(J,
U,Y){J=this.id;U/=2;Y/=2;var aa=m.byId,la;for(la in v){var T=aa(J+"_pan_"+la);if("up"===la||"down"===la){var N=parseInt(Q(T).w,10)/2;L(T,"left",U-N+"px")}else N=parseInt(Q(T).h,10)/2,L(T,"top",Y-N+"px")}},_createSimpleSlider:function(){if(this._mapParams.slider){var J=this._slider=H("div",{id:this.id+"_zoom_slider",class:this._getSliderClass(),style:{zIndex:30}}),U=H("div",{class:"esriSimpleSliderIncrementButton",tabIndex:"0",role:"button"},J),Y=H("div",{class:"esriSimpleSliderDecrementButton",tabIndex:"0",
role:"button"},J);this._addZoomButtonTooltips(U,Y);this._incButton=U;this._decButton=Y;this._simpleSliderZoomHandler(null,null,null,this.getLevel());var aa=y.widgets.zoomSlider;this._addZoomButtonIcon(U,"+",aa.zoomIn);this._addZoomButtonIcon(Y,"\x26minus;",aa.zoomOut);8>z("ie")&&h.add(Y,"dj_ie67Fix");this._connects.push(G(U,g,this,this._simpleSliderChangeHandler));this._connects.push(G(Y,g,this,this._simpleSliderChangeHandler));(-1<this.getMaxZoom()||-1<this.getMinZoom())&&this._connects.push(G(this,
"onZoomEnd",this,this._simpleSliderZoomHandler));10>z("ie")&&m.setSelectable(J,!1);this.root.appendChild(J);this.isZoomSlider=!0}},_simpleSliderChangeHandler:function(J){t.stop(J);J=-1!==J.currentTarget.className.indexOf("IncrementButton")?!0:!1;this._extentUtil({numLevels:J?1:-1})},_simpleSliderZoomHandler:function(J,U,Y,aa){var la;J=this._incButton;U=this._decButton;-1<aa&&aa===this.getMaxZoom()?la=J:-1<aa&&aa===this.getMinZoom()&&(la=U);la?(h.add(la,"esriSimpleSliderDisabledButton"),h.remove(la===
J?U:J,"esriSimpleSliderDisabledButton")):(h.remove(J,"esriSimpleSliderDisabledButton"),h.remove(U,"esriSimpleSliderDisabledButton"))},_getSliderClass:function(J){J=J?"Large":"Simple";var U=this._mapParams.sliderOrientation,Y=this._mapParams.sliderPosition||"";U=U&&"horizontal"===U.toLowerCase()?"esri"+J+"SliderHorizontal":"esri"+J+"SliderVertical";if(Y)switch(Y.toLowerCase()){case "top-left":Y="esri"+J+"SliderTL";break;case "top-right":Y="esri"+J+"SliderTR";break;case "bottom-left":Y="esri"+J+"SliderBL";
break;case "bottom-right":Y="esri"+J+"SliderBR"}return"esri"+J+"Slider "+U+" "+Y},_addZoomButtonIcon:function(J,U,Y){n.create("span",{"aria-hidden":"true",role:"presentation",innerHTML:U},J);n.create("span",{class:"esriIconFallbackText",innerHTML:Y},J)},_addZoomButtonTooltips:function(J,U){var Y=y.widgets.zoomSlider;a.set(J,"title",Y.zoomIn);a.set(U,"title",Y.zoomOut)},_createSlider:function(J,U,Y){if(this._mapParams.slider){var aa=H("div",{id:this.id+"_zoom_slider"},this.root),la=x.defaults.map,
T=this._getSliderClass(!0),N=-1!==T.indexOf("Horizontal"),K=this.getNumLevels();if(0<K){var W,da,fa=this._mapParams.sliderLabels,ha=!!fa,ra=!1!==fa;if(ra){var za=N?"bottomDecoration":"rightDecoration";if(!fa)for(fa=[],la=0;la<K;la++)fa[la]="";u.forEach([{class:"esriLargeSliderTicks",container:za,count:K,dijitClass:U},{class:ha&&"esriLargeSliderLabels",container:za,count:K,labels:fa,dijitClass:Y}],function(va){var Ga=H("div"),ba=va.dijitClass;delete va.dijitClass;aa.appendChild(Ga);ba===U?W=new ba(va,
Ga):da=new ba(va,Ga)})}J=this._slider=new J({id:aa.id,class:T,minimum:this.getMinZoom(),maximum:this.getMaxZoom(),discreteValues:K,value:this.getLevel(),clickSelect:!0,intermediateChanges:!0,style:"z-index:30;"},aa);J.startup();ra&&(W.startup(),da.startup());this._slider_connect=G(J,"onChange",this,"_onSliderChangeHandler");this._connects.push(G(this,"onExtentChange",this,"_onExtentChangeSliderHandler"));this._connects.push(G(J._movable,"onFirstMove",this,"_onSliderMoveStartHandler"))}else{J=this._slider=
new J({id:aa.id,class:T,minimum:0,maximum:2,discreteValues:3,value:1,clickSelect:!0,intermediateChanges:la.sliderChangeImmediate,style:"height:50px; z-index:30;"},aa);Y=J.domNode.firstChild.childNodes;for(la=1;3>=la;la++)L(Y[la],"visibility","hidden");J.startup();this._slider_connect=G(J,"onChange",this,"_onDynSliderChangeHandler");this._connects.push(G(this,"onExtentChange",this,"_onExtentChangeDynSliderHandler"))}la=J.incrementButton;Y=J.decrementButton;N?this._addZoomButtonTooltips(la,Y):this._addZoomButtonTooltips(Y,
la);la.style.outline="none";Y.style.outline="none";J.sliderHandle.style.outline="none";J._onKeyPress=function(){};if(N=J._movable){var Da=N.onMouseDown;N.onMouseDown=function(va){9>z("ie")&&1!==va.button||Da.apply(this,arguments)}}this.isZoomSlider=!0}},_onSliderMoveStartHandler:function(){F(this._slider_connect);F(this._slidermovestop_connect);this._slider_connect=G(this._slider,"onChange",this,"_onSliderChangeDragHandler");this._slidermovestop_connect=G(this._slider._movable,"onMoveStop",this,"_onSliderMoveEndHandler")},
_onSliderChangeDragHandler:function(J){this._extentUtil({targetLevel:J})},_onSliderMoveEndHandler:function(){F(this._slider_connect);F(this._slidermovestop_connect)},_onSliderChangeHandler:function(J){this.setLevel(J)},_updateSliderValue:function(J,U){F(this._slider_connect);var Y=this._slider,aa=Y._onChangeActive;Y._onChangeActive=!1;Y.set("value",J);Y._onChangeActive=aa;this._slider_connect=G(Y,"onChange",this,U)},_onExtentChangeSliderHandler:function(J,U,Y,aa){F(this._slidermovestop_connect);this._updateSliderValue(aa.level,
"_onSliderChangeHandler")},_onDynSliderChangeHandler:function(J){this._extentUtil({numLevels:0<J?1:-1})},_onExtentChangeDynSliderHandler:function(){this._updateSliderValue(1,"_onDynSliderChangeHandler")},_openLogoLink:function(J){window.open(x.defaults.map.logoLink,"_blank");t.stop(J)},enableMapNavigation:function(){this.isMapNavigation||(this.isMapNavigation=!0,this._evalMapNavigation())},disableMapNavigation:function(){this.isMapNavigation&&(this.isMapNavigation=!1,this._evalMapNavigation())},_evalMapNavigation:function(){this.isMapNavigation?
this.navigationManager.enableNavigation():this.navigationManager.disableNavigation()},_evalNavigationFeature:function(J){if(this.isMapNavigation&&this["is"+J])this.navigationManager["enable"+J]();else this.navigationManager["disable"+J]()},enableDoubleClickZoom:function(){this.isDoubleClickZoom||(this.isDoubleClickZoom=!0,this._evalNavigationFeature("DoubleClickZoom"))},disableDoubleClickZoom:function(){this.isDoubleClickZoom&&(this.isDoubleClickZoom=!1,this._evalNavigationFeature("DoubleClickZoom"))},
enableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom||(S(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.enableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!0)},disableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom&&(S(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",
null,"v2.0"),this.navigationManager.disableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!1)},enableClickRecenter:function(){this.isClickRecenter||(this.isClickRecenter=!0,this._evalNavigationFeature("ClickRecenter"))},disableClickRecenter:function(){this.isClickRecenter&&(this.isClickRecenter=!1,this._evalNavigationFeature("ClickRecenter"))},enablePan:function(){this.isPan||(this.isPan=!0,this._evalNavigationFeature("Pan"))},disablePan:function(){this.isPan&&(this.isPan=!1,this._evalNavigationFeature("Pan"))},
enableRubberBandZoom:function(){this.isRubberBandZoom||(this.isRubberBandZoom=!0,this._evalNavigationFeature("RubberBandZoom"))},disableRubberBandZoom:function(){this.isRubberBandZoom&&(this.isRubberBandZoom=!1,this._evalNavigationFeature("RubberBandZoom"))},enablePinchZoom:function(){this.isPinchZoom||(this.isPinchZoom=!0,this._evalNavigationFeature("PinchZoom"))},disablePinchZoom:function(){this.isPinchZoom&&(this.isPinchZoom=!1,this._evalNavigationFeature("PinchZoom"))},enableKeyboardNavigation:function(){this.isKeyboardNavigation||
(this.isKeyboardNavigation=!0,this._evalNavigationFeature("KeyboardNavigation"))},disableKeyboardNavigation:function(){this.isKeyboardNavigation&&(this.isKeyboardNavigation=!1,this._evalNavigationFeature("KeyboardNavigation"))},enableScrollWheel:function(){this.isScrollWheel||(this.isScrollWheel=!0,this._evalNavigationFeature("ScrollWheel"))},disableScrollWheel:function(){this.isScrollWheel&&(this.isScrollWheel=!1,this._evalNavigationFeature("ScrollWheel"))},enableScrollWheelZoom:function(){this.isScrollWheelZoom||
(this.navigationManager.enableScrollWheelZoom(),this.isScrollWheelZoom=!0)},disableScrollWheelZoom:function(){this.isScrollWheelZoom&&(this.navigationManager.disableScrollWheelZoom(),this.isScrollWheelZoom=!1)},enableScrollWheelPan:function(){this.isScrollWheelPan||this.navigationManager.enableScrollWheelPan()},disableScrollWheelPan:function(){this.isScrollWheelPan&&this.navigationManager.disableScrollWheelPan()},showPanArrows:function(){this._navDiv&&(this._navDiv.style.display="block",this.isPanArrows=
!0)},hidePanArrows:function(){this._navDiv&&(this._navDiv.style.display="none",this.isPanArrows=!1)},showZoomSlider:function(){this._slider&&(L(this._slider.domNode||this._slider,"visibility","inherit"),this.isZoomSlider=!0)},hideZoomSlider:function(){this._slider&&(L(this._slider.domNode||this._slider,"visibility","hidden"),this.isZoomSlider=!1)},onClick:function(J){J.graphic||(J.graphic=this.syncHitTestForWebGL(J))}});return w.Map=B})},"esri/_coremap":function(){define("require module dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/event dojo/_base/unload dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/sniff dijit/registry dojox/gfx/matrix ./kernel ./config ./basemaps ./lang ./Evented ./fx ./deferredUtils ./tileUtils ./urlUtils ./PluginTarget ./Color ./promiseList ./arcade/Dictionary ./geometry/Point ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils ./layers/GraphicsLayer ./layers/TileInfo ./layers/LOD ./layers/ArcGISTiledMapServiceLayer ./layers/MapImageLayer ./layers/OpenStreetMapLayer ./layers/support/webglUtils ./dijit/Popup ./plugins/popupManager dojo/uacss".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E,C,y,v,A,G,F,H,L,M,Q,S,I,P,J,U,Y,aa,la,T,N,K,W,da,fa,ha,ra){function za(Z,ja){var ta=Z.lods;ta.sort(function(La,Ya){return La.scale>Ya.scale?-1:La.scale<Ya.scale?1:0});var xa=[];ta=d.filter(ta,function(La){if(-1===Fa(xa,La.scale))return xa.push(La.scale),!0});var Ea=ja.lods=[],Ja;d.forEach(ta,function(La,Ya){Ja=Ea[Ya]=new K(La);Ja.level=Ya});ja.tileInfo=new N(O(Z,{lods:Ea}))}var Da,va=aa.toMapPoint,Ga=aa.toScreenPoint,ba=c.connect,ia=c.disconnect,
wa=t.hitch,Aa=g.set,Fa=d.indexOf,O=t.mixin,ya=0,Ha=D.defaults.map,ea=Ha.layerNamePrefix,Oa=Ha.graphicsLayerNamePrefix,Na=new RegExp("^"+ea+"(\\d+)$"),Ca=new RegExp("^"+Oa+"(\\d+)$"),X=function(){},oa=0,pa=ha.isWebGLEnabled();e=e([y,H],{declaredClass:"esri._CoreMap",tables:null,resizeDelay:300,invalidExtent:"Map does not have a valid extent.",invalidGeometry:"Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",unknownBasemap:'Unable to find basemap definition for: "${basemapName}". Try one of these: ${list}',
invalidBasemap:'Unable to add basemap: "${basemapName}".',unknownLayerType:'Unknown basemap layer type: "${type}" found in basemap definition for: "${basemapName}".',visible:!0,webglEnabled:pa,_eventMap:{"basemap-change":!0,"extent-change":["extent","delta","levelChange","lod"],"layer-add":["layer"],"layer-add-result":["layer","error"],"layer-remove":["layer"],"layer-reorder":["layer","index"],"layer-resume":["layer"],"layer-suspend":["layer"],"layers-add-result":["layers"],"layers-removed":!0,"layers-reordered":["layerIds"],
load:["map"],pan:["extent","delta"],"pan-end":["extent","delta"],"pan-start":["extent","screenPoint"],reposition:["x","y"],resize:["extent","width","height"],scale:["matrix","immediate"],"time-extent-change":["timeExtent"],"before-unload":["map"],unload:["map"],"update-end":["error"],"update-start":!0,zoom:["extent","zoomFactor","anchor"],"zoom-end":["extent","zoomFactor","anchor","level"],"zoom-start":["extent","zoomFactor","anchor","level"],click:!0,"dbl-click":!0,"key-down":!0,"key-up":!0,"mouse-down":!0,
"mouse-drag":!0,"mouse-drag-end":!0,"mouse-drag-start":!0,"mouse-move":!0,"mouse-out":!0,"mouse-over":!0,"mouse-up":!0,"mouse-wheel":!0,"basic-tap":!0,"double-tap":!0,"pinch-end":!0,"pinch-move":!0,"pinch-start":!0,"processed-double-tap":!0,"processed-tap":!0,"swipe-end":!0,"swipe-move":!0,"swipe-start":!0,tap:!0,"two-finger-tap":!0},constructor:function(Z,ja){ja=ja||{};this.registerConnectEvents();O(this,{_internalLayerIds:[],_layers:[],_layerDivs:[],_basemapPending:!1,_connects:[],_layerAddPromises:{},
_zoomAnimDiv:null,_zoomAnim:null,_layersDiv:null,_firstLayerId:null,_delta:null,_cursor:null,_ratioW:1,_ratioH:1,_params:null,_minResolution:0,_maxResolution:0,cursor:null,layerIds:[],graphicsLayerIds:[],graphics:null,_labels:null,loaded:!1,__panning:!1,__zooming:!1,__container:null,root:null,__LOD:null,__tileInfo:null,__visibleRect:null,__visibleDelta:null,_rids:[],_webglContextOwners:[]});var ta=this.container=a.byId(Z),xa=this.id=h.get(ta,"id")||w.getUniqueId(this.declaredClass);n.add(ta,"map");
var Ea=k.getContentBox(ta);Z=n.add;var Ja=r.create;this.position=new I(0,0);this._reposition();var La=this.width=0<Ea.w?Ea.w:Ha.width,Ya=this.height=0<Ea.h?Ea.h:Ha.height,Ua=this.root=Ja("div",{id:xa+"_root",style:{width:La+"px",height:Ya+"px",direction:"ltr"}});Z(Ua,"esriMapContainer");Ea=this.__container=Ja("div",{id:xa+"_container"},Ua);Aa(Ea,"position","absolute");Z(Ea,"esriMapContainer");ta.appendChild(Ua);ja=this._params=O({slider:!0,nav:!1,zoom:-1,minZoom:-1,maxZoom:-1,scale:-1,minScale:0,
maxScale:0,showInfoWindowOnClick:!0,displayGraphicsOnPan:!0,wrapAround180:!0,fitExtent:!1,optimizePanAnimation:!0},ja);this.setWebGLEnabled(null!=ja.webglEnabled?ja.webglEnabled:this.webglEnabled);this.maxWebGLContexts=null!=ja.maxWebGLContexts?ja.maxWebGLContexts:-1;this.wrapAround180=ja.wrapAround180;this.optimizePanAnimation=ja.optimizePanAnimation;this.setBackgroundColor(ja.backgroundColor);C.isDefined(ja.resizeDelay)&&(this.resizeDelay=ja.resizeDelay);ja.lods&&(za({rows:512,cols:512,dpi:96,format:"JPEG",
compressionQuality:75,origin:{x:-180,y:90},spatialReference:{wkid:4326},lods:ja.lods},ja),this.__tileInfo=ja.tileInfo);this.extent=ja.extent;this._extentUtil({mapCenter:ja.center,targetLevel:ja.zoom,targetScale:ja.scale});this.__visibleRect=new J(0,0,La,Ya);this.__visibleDelta=new J(0,0,La,Ya);xa=this._layersDiv=Ja("div",{id:xa+"_layers"});Z(xa,"esriMapLayers");Ea.appendChild(xa);this._zoomAnimDiv=Ja("div",{style:{position:"absolute"}});ja.infoWindow?this.infoWindow=ja.infoWindow:(Z=this.infoWindow=
new ra(ja.popupOptions,Ja("div")),Z.startup(),Z._ootb=!0,Aa(Z.domNode,"zIndex",40));if(ja.showLabels){var Ta=this;f(["./layers/LabelLayer"],function(ab){Da=ab;Ta._createLabelLayer()});this.on("load",function(){Ta._createLabelLayer()})}this.addPlugin(this._getAbsMid("./plugins/popupManager"),{enabled:ja.showInfoWindowOnClick});this._zoomStartHandler=wa(this,this._zoomStartHandler);this._zoomingHandler=wa(this,this._zoomingHandler);this._zoomEndHandler=wa(this,this._zoomEndHandler);this._panningHandler=
wa(this,this._panningHandler);this._panEndHandler=wa(this,this._panEndHandler);this._endTranslate=wa(this,this._endTranslate);this._timedResize=wa(this,this._timedResize);this._execResize=wa(this,this._execResize);this._processLabelLayers=wa(this,this._processLabelLayers);this._updateLabelLayers=wa(this,this._updateLabelLayers);this.resize=wa(this,this.resize);m.addOnWindowUnload(this,this.destroy)},_getAbsMid:function(Z){return f.toAbsMid?f.toAbsMid(Z):B.id.replace(/\/[^\/]*$/ig,"/")+Z},_cleanUp:function(){var Z=
this.infoWindow;Z&&(Z._ootb&&Z.destroy?Z.destroy():Z.unsetMap(this),delete this.infoWindow);ia(this._tsTimeExtentChange_connect);this.removePlugin("./plugins/popupManager");r.destroy(this.root);this.root=null},_addLayer:function(Z,ja,ta){if(Z.id){var xa=Z.id.match(Z instanceof T?Ca:Na);xa&&xa[1]&&(xa=Number(xa[1]),ya<=xa&&(ya=xa+1))}var Ea=Z.id||(Z instanceof T?Oa:ea)+ya++;Z.id=Ea;this._layers[Ea]=Z;Z._isRefLayer="top"===ta;ta=!C.isDefined(ta)||0>ta||ta>ja.length||"top"===ta?ja.length:ta;var Ja;if(!Z._isRefLayer)for(;(Ja=
this.getLayer(ja[ta-1]))&&Ja._isRefLayer;)ta--;if(xa=!this._firstLayerId&&!this.loaded&&!this._basemapPending&&0===ta&&(ja===this.layerIds||ja===this.graphicsLayerIds))this._firstLayerId=Ea;ja.splice(ta,0,Ea);var La=wa(this,this._addLayerHandler),Ya=this;ta=this._connects;Ja=function(){Z.loaded?Ya._onLoadFix?(Ya._onLoadFix=!1,setTimeout(function(){La(Z)},0)):La(Z):(Ya["_"+Ea+"_addtoken_load"]=ba(Z,"onLoad",Ya,"_addLayerHandler"),Ya["_"+Ea+"_addtoken_err"]=ba(Z,"onError",Ya,function(Ua){La(Z,Ua,ja)}))};
this.loaded||xa||Z.loaded&&-1===Fa(this.graphicsLayerIds,Ea)?Ja():ta.push(ba(this,"onLoad",Ja));return Z},_forgetLayer:function(Z){Z=Z.id;ia(this["_"+Z+"_addtoken_load"]);ia(this["_"+Z+"_addtoken_err"]);var ja=this._layerAddPromises[Z];ja&&(delete this._layerAddPromises[Z],ja.cancel())},_addLayerHandler:function(Z,ja,ta){ja?this._attachLayerToMap(Z,ja,ta):Z._prepareToAttach?(this._layerAddPromises[Z.id]=Z._prepareToAttach(this)).always(t.hitch(this,function(xa){xa&&"cancel"===xa.dojoType||this._attachLayerToMap(Z,
null,ta)})):Z.declaredClass&&(-1<Z.declaredClass.toLowerCase().indexOf("vectortilelayer")||-1<Z.declaredClass.toLowerCase().indexOf("rasterxlayer")&&Z.useWebGL)&&!this.isWebGLContextAvailable()?(ja=Error("Too many WebGL contexts. Unable to add the layer: ",Z.url),this._attachLayerToMap(Z,ja,this.layerIds)):this._attachLayerToMap(Z,ja,ta)},_attachLayerToMap:function(Z,ja,ta){var xa=this.id,Ea=Z.id,Ja=Fa(Z instanceof T?this.graphicsLayerIds:this.layerIds,Ea),La=Ja,Ya=!1,Ua=this._params;this._forgetLayer(Z);
if(ja)delete this._layers[Ea],-1!==Ja&&(ta.splice(Ja,1),this.onLayerAddResult(Z,ja));else{-1===Ja&&(Ja=Fa(this._internalLayerIds,Ea),La=20+Ja,Ya=!0);if(Ea===this._firstLayerId){ja=Z.spatialReference;ta=this.extent&&this.extent.spatialReference;!ta||ta.equals(ja)||!Z.tileInfo&&Z.url||(ta=null);ta=this.spatialReference=ta||ja;this.wrapAround180=this.wrapAround180&&ta&&ta._isWrappable()?!0:!1;Z.tileInfo&&(this.__tileInfo?(ja=this.__tileInfo.lods,this.__tileInfo=O({},Z.tileInfo),this.__tileInfo.lods=
ja):(za(O({},Z.tileInfo),Ua),this.__tileInfo=Ua.tileInfo));if(this.wrapAround180){ja=this.__tileInfo;ta=ta._getInfo();if(!ja||Math.abs(ta.origin[0]-ja.origin.x)>ta.dx)this.wrapAround180=!1;this.wrapAround180&&ja&&G._addFrameInfo(ja,ta)}Ua.units=Z.units;if((ja=this.__tileInfo&&this.__tileInfo.lods)&&ja.length){ta=Ua.minScale;Ja=Ua.maxScale;var Ta=-1,ab=-1,fb=!1,kb=!1,qb;for(qb=0;qb<ja.length;qb++)0<ta&&!fb&&ta>=ja[qb].scale&&(Ta=ja[qb].level,fb=!0),0<Ja&&!kb&&Ja>=ja[qb].scale&&(ab=0<qb?ja[qb-1].level:
-1,kb=!0);-1===Ua.minZoom&&(Ua.minZoom=0===ta?ja[0].level:Ta);-1===Ua.maxZoom&&(Ua.maxZoom=0===Ja?ja[ja.length-1].level:ab);for(qb=0;qb<ja.length;qb++)Ua.minZoom===ja[qb].level&&(Ua.minScale=ja[qb].scale,this._minResolution=ja[qb].resolution),Ua.maxZoom===ja[qb].level&&(Ua.maxScale=ja[qb].scale,this._maxResolution=ja[qb].resolution)}else Ua.minZoom=Ua.maxZoom=Ua.zoom=-1}Z instanceof T?(this._gc||(this._gc=new T._GraphicsContainer,this._gc._setMap(this,this._layersDiv).id=xa+"_gc"),this._attachGraphicsLayer(Z).id=
xa+"_"+Ea):(La=Z._setMap(this,this._layersDiv,La,this.__LOD),La.id=xa+"_"+Ea,this._layerDivs[Ea]=La,this._reorderLayers(this.layerIds),Ya||-1===Z.declaredClass.indexOf("VETiledLayer")||this._onBingLayerAdd(Z));Ea===this._firstLayerId&&(this.graphics=new T({id:xa+"_graphics",displayOnPan:Ua.displayGraphicsOnPan}),this._addLayer(this.graphics,this._internalLayerIds,20));if(Z===this.graphics){ta=this._layers[this._firstLayerId];xa=Ua.zoom;La=Ua.scale;ja=Ua.center;ta=ta.initialExtent||ta.fullExtent;this._firstLayerId=
null;this.extent&&(this.extent=this._convertGeometry(this,this.extent));!this.extent&&ta&&(ja&&(ja=this._convertGeometry(ta,ja)),ja&&(ta=ta.centerAt(ja),ja=null));if(ja=this.extent||ta&&new P(ta.toJson()))-1<xa?ja=this.__getExtentForLevel(xa,null,ja).extent:0<La&&(ja=Y.getExtentForScale(this,La,ja));if(!ja)return;Ua=this._fixExtent(ja,Ua.fitExtent);this.extent=Ua.extent;this.__LOD=Ua.lod;this.__setExtent(this.extent);this.loaded=!0;this.attr("data-loaded","");this.infoWindow.setMap(this);this.onLoad(this)}Ya||
(this.onLayerAdd(Z),this.onLayerAddResult(Z));ia(this[Ea+"_addLayerHandler_connect"])}},_convertGeometry:function(Z,ja){Z=Z&&Z.spatialReference;var ta=ja&&ja.spatialReference;Z&&ta&&!Z.equals(ta)&&(Z._canProject(ta)?Z.isWebMercator()?ja=la.geographicToWebMercator(ja):4326===Z.wkid&&(ja=la.webMercatorToGeographic(ja,!0)):ja=null);return ja},_attachGraphicsLayer:function(Z){var ja=Z.id;Z=Z._setMap(this,this._gc._surface);this._layerDivs[ja]=Z;this._reorderLayers(this.graphicsLayerIds);return Z},_detachGraphicsLayer:function(Z){Z.loaded&&
Z.getMap()&&Z._unsetMap(this,this._gc._surface)},_reorderLayers:function(Z){var ja=this.onLayerReorder,ta=r.place,xa=this._layerDivs,Ea=this._layers,Ja=this._gc?this._gc._surface.getEventSource():null;if(Z===this.graphicsLayerIds)d.forEach(Z,function(ab,fb){var kb=xa[ab];ab=Ea[ab];kb&&(this._gc._reorderLayer(ab,kb,fb),ja(ab,fb))},this);else{var La=this.graphics,Ya=La?La.id:null,Ua=this._layersDiv,Ta;d.forEach(Z,function(ab,fb){Ta=xa[ab];ab!==Ya&&Ta&&(ta(Ta,Ua,fb),ja(Ea[ab],fb))});this._mapImageLyr&&
this._placeMapImageLyr();Ja&&(Ja=9>b("ie")?Ja.parentNode:Ja,ta(Ja,Ja.parentNode,"last"))}this.onLayersReordered([].concat(Z))},_zoomStartHandler:function(){this.__zoomStart(this._zoomAnimDiv.startingExtent,this._zoomAnimDiv.anchor)},_zoomingHandler:function(Z){var ja=parseFloat(Z.left),ta=parseFloat(Z.top);Z=new P(ja,ta-parseFloat(Z.height),ja+parseFloat(Z.width),ta,this.spatialReference);ja=this.extent.getWidth()/Z.getWidth();this.__zoom(Z,ja,this._zoomAnimDiv.anchor)},_zoomEndHandler:function(){var Z=
this._zoomAnimDiv,ja=Z.extent,ta=this.extent.getWidth()/ja.getWidth(),xa=Z.anchor,Ea=Z.newLod,Ja=Z.levelChange;Z.extent=Z.anchor=Z.levelChange=Z.startingExtent=Z.newLod=this._delta=this._zoomAnim=null;this.__zoomEnd(ja,ta,xa,Ea,Ja)},_panningHandler:function(Z){if(isNaN(parseFloat(Z.left))||isNaN(parseFloat(Z.top))){var ja=Math.round,ta=this._panAnim.node;Z.left=-1*(this._delta.x-ja(this.width/2))+"px";Z.top=-1*(this._delta.y-ja(this.height/2))+"px";g.set(ta,"left",Z.left);g.set(ta,"top",Z.top)}Z=
new I(parseFloat(Z.left),parseFloat(Z.top));ja=this.toMap(Z);this.onPan(this.extent.offset(this.extent.xmin-ja.x,this.extent.ymax-ja.y),Z)},_panEndHandler:function(Z){this.__panning=!1;var ja=Math.round;Z=new I(-ja(parseFloat(Z.style.left)),-ja(parseFloat(Z.style.top)));ja=Z.x;var ta=Z.y,xa=this.__visibleRect,Ea=this.__visibleDelta;xa.x+=-ja;xa.y+=-ta;Ea.x+=-ja;Ea.y+=-ta;Aa(this._zoomAnimDiv,{left:"0px",top:"0px"});xa=this.extent;Ea=this._ratioW;var Ja=this._ratioH;xa=new P(xa.xmin+ja/Ea,xa.ymin-
ta/Ja,xa.xmax+ja/Ea,xa.ymax-ta/Ja,this.spatialReference);Z.setX(-Z.x);Z.setY(-Z.y);this._delta=this._panAnim=null;this._updateExtent(xa);this.onPanEnd(xa,Z);this._fireExtChg([xa,Z,!1,this.__LOD])},_fixExtent:function(Z,ja){for(var ta=this._reshapeExtent(Z),xa=1.25;!0===ja&&(ta.extent.getWidth()<Z.getWidth()||ta.extent.getHeight()<Z.getHeight())&&0<ta.lod.level&&3>=xa;)ta=this._reshapeExtent(Z.expand(xa)),xa+=.25;return ta},_getFrameWidth:function(){var Z=-1,ja=this.spatialReference._getInfo();this.__LOD?
(ja=this.__LOD._frameInfo)&&(Z=ja[3]):ja&&(Z=Math.round(2*ja.valid[1]/(this.extent.getWidth()/this.width)));return Z},_fixAspectRatio:function(Z){var ja=Z.getWidth(),ta=Z.getHeight(),xa=ja/ta,Ea=this.width/this.height,Ja=0,La=0;this.width>this.height?ja>ta?Ea>xa?Ja=ta*Ea-ja:La=ja/Ea-ta:Ja=ta*Ea-ja:this.width<this.height?ja<ta?Ea>xa?Ja=ta*Ea-ja:La=ja/Ea-ta:La=ja/Ea-ta:ja<ta?Ja=ta-ja:ja>ta&&(La=ja/Ea-ta);Ja&&(Z.xmin-=Ja/2,Z.xmax+=Ja/2);La&&(Z.ymin-=La/2,Z.ymax+=La/2);return Z},_reshapeExtent:function(Z){Z=
this._fixAspectRatio(Z);return this._getAdjustedExtent(Z)},_getAdjustedExtent:function(Z){if(this.__tileInfo)return G.getCandidateTileInfo(this,this.__tileInfo,Z);var ja=Y.getScale(this,Z),ta=this.getMinScale(),xa=this.getMaxScale();!ta||ja<=ta?!xa||ja>=xa||(Z=Y.getExtentForScale(this,xa,Z)):Z=Y.getExtentForScale(this,ta,Z);return{extent:Z}},_onBingLayerAdd:function(Z){this["__"+Z.id+"_vis_connect"]=c.connect(Z,"onVisibilityChange",this,"_toggleBingLogo");this._toggleBingLogo(Z.visible)},_onBingLayerRemove:function(Z){c.disconnect(this["__"+
Z.id+"_vis_connect"]);delete this["__"+Z.id+"_vis_connect"];var ja=d.some(this.layerIds,function(ta){return(Z=this._layers[ta])&&Z.visible&&-1!==Z.declaredClass.indexOf("VETiledLayer")},this);this._toggleBingLogo(ja)},_toggleBingLogo:function(Z){Z&&!this._bingLogo?(Z={left:this._mapParams&&this._mapParams.nav?"25px":""},6===b("ie")&&(Z.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+f.toUrl("./images/map/bing-logo-lg.png")+"')"),Z=this._bingLogo=
r.create("div",{style:Z},this.root),n.add(Z,"bingLogo-lg")):!Z&&this._bingLogo&&(r.destroy(this._bingLogo),delete this._bingLogo)},__panStart:function(Z,ja){var ta=this._zoomAnim,xa=this._panAnim;if(ta&&ta._active)ta.stop(),ta._fire("onEnd",[ta.node]);else if(xa&&xa._active){xa.stop();this._panAnim=null;ja=xa.curve.getValue(xa._getStep());Z=Math.round(parseFloat(ja.left));ja=Math.round(parseFloat(ja.top));ta=this.navigationManager._dragOrigin;this.__pan(Z,ja);ta&&(ta.x-=Z,ta.y-=ja);return}this.__panning=
!0;this.onPanStart(this.extent,new I(Z,ja))},__pan:function(Z,ja){var ta=this.extent,xa=this._ratioW,Ea=this._ratioH;this.onPan(new P(ta.xmin-Z/xa,ta.ymin+ja/Ea,ta.xmax-Z/xa,ta.ymax+ja/Ea,this.spatialReference),new I(Z,ja))},__panEnd:function(Z,ja){var ta=this.__visibleRect,xa=this.__visibleDelta;ta.x+=Z;ta.y+=ja;xa.x+=Z;xa.y+=ja;ta=new I(Z,ja);xa=this.extent;var Ea=this._ratioW,Ja=this._ratioH;xa=new P(xa.xmin-Z/Ea,xa.ymin+ja/Ja,xa.xmax-Z/Ea,xa.ymax+ja/Ja,this.spatialReference);this.__panning=!1;
this._updateExtent(xa);this.onPanEnd(xa,ta);this._fireExtChg([xa,ta,!1,this.__LOD])},__zoomStart:function(Z,ja){this.__zooming=!0;this.onZoomStart(Z,1,ja,this.__LOD?this.__LOD.level:null)},__zoom:function(Z,ja,ta){this.onZoom(Z,ja,ta)},__zoomEnd:function(Z,ja,ta,xa,Ea){Aa(this._layersDiv,{left:"0px",top:"0px"});this._delta=new I(0,0);this.__visibleRect.x=this.__visibleRect.y=0;Z=new P(Z);this.__LOD=xa;this._ratioW=this.width/Z.getWidth();this._ratioH=this.height/Z.getHeight();var Ja=this._delta;this._delta=
null;this.__zooming=!1;this._updateExtent(Z,Ea);this.onZoomEnd(Z,ja,ta,xa?xa.level:null);this._fireExtChg([Z,Ja,Ea,xa])},_extentUtil:function(Z,ja,ta,xa,Ea){var Ja=new u,La=this.width,Ya=this.height;if(Z){var Ua=Z.numLevels;var Ta=Z.targetLevel;var ab=C.isDefined(Ta);var fb=Z.factor;var kb=Z.mapAnchor;var qb=Z.screenAnchor;var ob=Z.mapCenter;var wb=Z.levelOrFactor;var Gb=Z.targetScale;var yb=C.isDefined(Gb)&&0<Gb}if(ja){var lb=ja.dx;var Db=ja.dy;ob=ja.mapCenter}t.isArray(ob)&&(ob=new S(ob));var Sb=
this._panAnim;ja=(Z=this._stopAnim())?Z.divExtent:this.extent;var Eb=this.__tileInfo,Hb=this._params;if(!this.loaded){if(ta)ja&&(ta=this._convertGeometry(ja,ta)),ta&&(this.extent=ta,Hb.zoom=Hb.scale=-1,Hb.center=null);else if(ob||ab||yb){if(ob)if(ja){if(ob=this._convertGeometry(ja,ob))this.extent=ja.centerAt(ob),Hb.center=null}else Hb.center=ob;ab&&-1<Ta?(Hb.zoom=Ta,Hb.scale=-1):yb&&(Hb.scale=Gb,Hb.zoom=-1)}Ja.resolve();return Ja}if(ob&&(ob=this._convertGeometry(this,ob),!ob)||kb&&(kb=this._convertGeometry(this,
kb),!kb)||ta&&(ta=this._convertGeometry(this,ta),!ta))return Ja.reject(),Ja;Sb&&kb&&qb&&(kb=va(this.extent,La,Ya,qb));Z&&kb&&qb&&(kb=va(Z.divExtent,La,Ya,qb));if(ab)if(Eb)Ua=this.getMinZoom(),ab=this.getMaxZoom(),Ta<Ua?Ta=Ua:Ta>ab&&(Ta=ab),Ua=Ta-(Z?Z.level:this.getLevel());else{Ua=0<Ta?-1:1;var Nb=wb?Ta:null}if(!ta)if(C.isDefined(Ua))Eb?(La=Z?Z.level:this.getLevel(),La=this.__getExtentForLevel(La+Ua,ob,ja).extent):(La=(Z?Z.end:this.extent).expand(Nb||(0<Ua?.5*Ua:2*-Ua)),Nb&&ob&&(La=La.centerAt(ob))),
La&&(ob?ta=La:(lb=kb||ja.getCenter(),Ya=La.getWidth(),Db=La.getHeight(),La=lb.x>=ja.xmin&&lb.x<=ja.xmax?(lb.x-ja.xmin)/ja.getWidth():.5,ta=lb.y>=ja.ymin&&lb.y<=ja.ymax?(lb.y-ja.ymin)/ja.getHeight():.5,La=lb.x-La*Ya,lb=lb.y-ta*Db,ta=new P(La,lb,La+Ya,lb+Db,this.spatialReference)));else if(yb)ta=Y.getExtentForScale(this,Gb,ja);else if(C.isDefined(fb))ta=ja.expand(fb);else if(lb||Db)Z?(ta=Z.end,kb=ta.getCenter(),Nb=Ga(ta,La,Ya,kb),Nb.x+=lb,Nb.y+=Db,Nb=va(ta,La,Ya,Nb),ta=ta.offset(Nb.x-kb.x,Nb.y-kb.y)):
(lb=new I(La/2+lb,Ya/2+Db),lb=va(ja,La,Ya,lb),Ya=ja.getWidth(),Db=ja.getHeight(),La=lb.x-Ya/2,lb=lb.y-Db/2,ta=new P(La,lb,La+Ya,lb+Db,this.spatialReference));ta||(ob?(ja=Z?Z.end:ja,Ya=ja.getWidth(),Db=ja.getHeight(),La=ob.x-Ya/2,lb=ob.y-Db/2,ta=new P(La,lb,La+Ya,lb+Db,this.spatialReference)):Z&&(ta=Z.end));ta?(this._extentDfd&&-1===this._extentDfd.fired&&(this._extentDfd.then(null,X),this._extentDfd.reject()),this._extentDfd=Ja,this.__setExtent(ta,null,qb,xa,Z,Ea)):Ja.reject();return Ja},__setExtent:function(Z,
ja,ta,xa,Ea,Ja){try{if(this._firstLayerId)this.extent=Z;else{var La=!0,Ya=this.spatialReference,Ua=Ea?Ea.divExtent:this.extent,Ta=this._fixExtent(Z,xa||!1);Z=Ta.extent;var ab=Z.getWidth(),fb=Z.getHeight(),kb=Math.round;if(Ua){var qb=kb(1E6*Ua.getWidth()),ob=kb(1E6*ab),wb=kb(1E6*Ua.getHeight()),Gb=kb(1E6*fb);La=qb!==ob||wb!==Gb}var yb,lb=Ea&&Ea.rect,Db=Ea&&Ea.divExtent;if(Ha.zoomDuration&&La&&Ua){Db=Db||new P(Ua);lb=lb||{left:Ua.xmin,top:Ua.ymax,width:Ua.getWidth(),height:Ua.getHeight()};var Sb={left:Z.xmin,
top:Z.ymax,width:ab,height:fb};var Eb=new S(Z.xmin,Z.ymax,Ya),Hb=new S(Z.xmin,Z.ymin,Ya),Nb=new S(this.extent.xmin,this.extent.ymax,Ya),$b=new S(this.extent.xmin,this.extent.ymin,Ya);(yb=U.getLineIntersection(Nb,Eb,$b,Hb,Ya))||Ea||(La=!1)}this._ratioW=this.width/ab;this._ratioH=this.height/fb;var Ob=this._zoomAnimDiv;if(La)if(Aa(this._layersDiv,{left:"0px",top:"0px"}),ja=new I(0,0),this.__visibleRect.x=this.__visibleRect.y=0,lb&&Sb){this._delta=ja;Ob.id="_zAD";Ob.startingExtent=Db;Ob.extent=Z;Ob.levelChange=
La;Ob.newLod=Ta.lod;Ob.anchor=ta?ta:!yb&&Ea?Ea.anchor:Ga(this.extent,this.width,this.height,yb);var bc=this.extent.getWidth()/Z.getWidth();Ha.zoomAnimationThrottled&&1024<(1>bc?1/bc:bc)?(this.__zoomStart(Db,Ob.anchor),this.__zoom(Db,1,Ob.anchor),this._fireOnScale(1,Ob.anchor,!0),this.__zoomEnd(Z,bc,Ob.anchor,Ta.lod,La)):(this._zoomAnim=v.resize({node:Ob,start:lb,end:Sb,duration:Ha.zoomDuration,rate:Ha.zoomRate,beforeBegin:Ea?null:this._zoomStartHandler,onAnimate:this._zoomingHandler,onEnd:this._zoomEndHandler}).play(),
this._fireOnScale(bc,Ob.anchor,Ja))}else this._updateExtent(Z,La,Ja),this._fireExtChg([this.extent,ja,La,this.__LOD=Ta.lod]);else if(!this.__panning)if(!1===this.loaded||Ja)this._updateExtent(Z,La,Ja),this._fireExtChg([this.extent,ja,La,this.__LOD=Ta.lod]);else{this.__panning=!0;lb=(new J(0,0,this.width,this.height,this.spatialReference)).getCenter();lb.x=kb(lb.x);lb.y=kb(lb.y);var Ub=this._delta=this.toScreen(Z.getCenter()),wc=Math.abs(lb.x-Ub.x),hc=Math.abs(lb.y-Ub.y);this.optimizePanAnimation&&
(wc>2*this.width||hc>2*this.height)?(this.__panStart(0,0),this.__pan(0,0),this.__visibleRect.x=this.__visibleRect.y=this.__visibleDelta.x=this.__visibleDelta.y=0,this.__panning=!1,this._delta=null,this._updateExtent(Z,!1,Ja),this.onPanEnd(this.extent,new I(0,0)),this._fireExtChg([this.extent,new I(0,0),!0,this.__LOD])):(this.onPanStart(this.extent,new I(0,0)),this._panAnim=v.slideTo({node:Ob,left:lb.x-Ub.x,top:lb.y-Ub.y,duration:Ha.panDuration,rate:Ha.panRate,onAnimate:this._panningHandler,onEnd:this._panEndHandler}),
this._panAnim.play())}}}catch(ic){}},_fireOnScale:function(Z,ja,ta){if("css-transforms"===this.navigationMode){var xa=this.__visibleDelta;this.onScale(x.scaleAt(Z,{x:-1*(this.width/2-(ja.x-xa.x)),y:-1*(this.height/2-(ja.y-xa.y))}),ta)}},_stopAnim:function(){var Z=this._zoomAnim,ja=this._panAnim;if(Z&&Z._active){Z.stop();ja=Z.curve.getValue(Z._getStep());var ta=parseFloat(ja.left),xa=parseFloat(ja.top);Z=Z.node;return{anchor:Z.anchor,start:Z.startingExtent,end:Z.extent,level:Z.newLod&&Z.newLod.level,
rect:ja,divExtent:new P(ta,xa-parseFloat(ja.height),ta+parseFloat(ja.width),xa,this.spatialReference)}}ja&&ja._active&&(ja.stop(),ja._fire("onEnd",[ja.node]))},__getExtentForLevel:function(Z,ja,ta){var xa=this.__tileInfo;xa=xa&&xa.lods;Z=C.isDefined(Z)?Z:0;ta=ta||this.extent;ja=ja||ta&&ta.getCenter();if(xa){if(ja){ta=this.getMinZoom();var Ea=this.getMaxZoom();Z>Ea&&(Z=Ea);Z<ta&&(Z=ta);Z=xa[Z];xa=this.width*Z.resolution/2;ta=this.height*Z.resolution/2;return{extent:new P(ja.x-xa,ja.y-ta,ja.x+xa,ja.y+
ta,ja.spatialReference),lod:Z}}}else return ta?{extent:ta.expand(!Z||1>Z?1:Z).centerAt(ja)}:void 0},_jobs:0,_incr:function(){1===++this._jobs&&(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart())},_decr:function(){var Z=--this._jobs;Z?0>Z&&(this._jobs=0):(this.updating=!1,this.attr("data-updating"),this.onUpdateEnd())},_fireEvent:function(Z,ja){this[Z]&&this[Z].apply(this,ja)},_updateExtent:function(Z,ja,ta){this.extent=Z;Z=this.spatialReference;this._viewInfo={view:new Q({viewingMode:"map",
scale:this.getScale()}),sr:Z,version:ja?++oa:oa};(ja||ta)&&this._setClipRect();this._calcGeographicExtent()},_calcGeographicExtent:function(){var Z=this.spatialReference;Z&&(Z.isWebMercator()?this.geographicExtent=la.webMercatorToGeographic(this._getAvailExtent(),!0):4326===Z.wkid&&(this.geographicExtent=new P(this._getAvailExtent().toJson())))},_fireExtChg:function(Z){this.attr("data-zoom",this.getZoom());this.attr("data-scale",this.getScale());this._fireEvent("onExtentChange",Z);if(Z=this._extentDfd)delete this._extentDfd,
Z.resolve()},attr:function(Z,ja){var ta=this.container;ta&&(null==ja?ta.removeAttribute(Z):ta.setAttribute(Z,ja));return this},onUpdateStart:function(){},onUpdateEnd:function(){},onLoad:function(){this._setClipRect();this._calcGeographicExtent()},onBeforeUnload:function(){},onUnload:function(){},onExtentChange:function(Z,ja,ta){},onTimeExtentChange:function(){},onWebGLEnabledChange:function(){},onLayerAdd:function(){},onLayerAddResult:function(){},onLayersAddResult:function(){},onLayerRemove:function(){},
onLayersRemoved:function(){},onLayerReorder:function(){},onLayersReordered:function(){},onLayerSuspend:function(){},onLayerResume:function(){},onPanStart:function(){},onPan:function(){},onPanEnd:function(){},onScale:function(){},onZoomStart:function(){},onZoom:function(){},onZoomEnd:function(){},onResize:function(){this._setClipRect()},onReposition:function(){},destroy:function(){this._destroyed||(this.onBeforeUnload(this),this.removeAllLayers(),this.releaseAllWebGLContexts(),this._cleanUp(),clearTimeout(this._resizeTimerHandle),
this._gc&&this._gc._cleanUp(),this._destroyed=!0,this.onUnload(this))},setCursor:function(Z){Aa(this.__container,"cursor",this.cursor=Z)},setMapCursor:function(Z){this.setCursor(this._cursor=Z)},resetMapCursor:function(){this.setCursor(this._cursor)},setBackgroundColor:function(Z){Z&&!Z.declaredClass&&(Z=new L(Z));this.backgroundColor=Z||null;var ja="";Z&&(ja=9>b("ie")?Z.toHex():"rgba("+Z.toRgba().join(",")+")");g.set(this.root,{backgroundColor:ja})},setInfoWindow:function(Z){var ja=this.infoWindow;
ja&&ja.unsetMap(this);this.infoWindow=Z;this.loaded&&Z&&Z.setMap(this)},setInfoWindowOnClick:function(Z){this._params.showInfoWindowOnClick=Z;this.popupManager&&this.popupManager.set("enabled",Z)},getInfoWindowAnchor:function(Z){return this.infoWindow&&this.infoWindow._getAnchor&&this.infoWindow._getAnchor(Z)||"upperright"},toScreen:function(Z,ja){return Ga(this.extent,this.width,this.height,Z,ja)},toMap:function(Z){return va(this.extent,this.width,this.height,Z)},addLayer:function(Z,ja){Z&&!this.getLayer(Z.id)&&
this._addLayer(Z,Z instanceof T?this.graphicsLayerIds:this.layerIds,ja);return Z},addLayers:function(Z){var ja=[],ta=Z.length,xa,Ea=Z.length;var Ja=c.connect(this,"onLayerAddResult",function(La,Ya){-1!==d.indexOf(Z,La)&&(ta--,ja.push({layer:La,success:!Ya,error:Ya}),ta||(c.disconnect(Ja),this.onLayersAddResult(ja)))});for(xa=0;xa<Ea;xa++)this.addLayer(Z[xa]);return this},removeLayer:function(Z,ja){var ta=Z.id,xa=Z instanceof T?this.graphicsLayerIds:this.layerIds,Ea=Fa(xa,ta);0<=Ea&&(this._forgetLayer(Z),
xa.splice(Ea,1),this.loaded||this._firstLayerId!==ta||(this._firstLayerId=null),Z instanceof T?this._detachGraphicsLayer(Z):Z.loaded&&(Z.getMap()&&Z._unsetMap(this,this._layersDiv),-1!==Z.declaredClass.indexOf("VETiledLayer")&&this._onBingLayerRemove(Z)),delete this._layers[ta],delete this._layerDivs[ta],ja||this._reorderLayers(xa),this.onLayerRemove(Z))},removeAllLayers:function(){var Z=this.layerIds,ja;for(ja=Z.length-1;0<=ja;ja--)this.removeLayer(this._layers[Z[ja]],1);Z=this.graphicsLayerIds;
for(ja=Z.length-1;0<=ja;ja--)this.removeLayer(this._layers[Z[ja]],1);this.onLayersRemoved()},reorderLayer:function(Z,ja){t.isString(Z)&&(l.deprecated(this.declaredClass+": Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).",null,"v2.0"),Z=this.getLayer(Z));var ta=Z.id,xa=Z instanceof T?this.graphicsLayerIds:this.layerIds;0>ja?ja=0:ja>=xa.length&&(ja=xa.length-1);Z=Fa(xa,ta);-1!==Z&&Z!==ja&&(xa.splice(Z,1),xa.splice(ja,0,ta),this._reorderLayers(xa))},
getLayer:function(Z){return this._layers[Z]},setWebGLEnabled:function(Z){var ja=this.webglEnabled;this.webglEnabled=(Z||!1)&&pa;if(ja!==this.webglEnabled)this.onWebGLEnabledChange()},isWebGLContextAvailable:function(){return ha.isContextAvailable()&&(-1===this.maxWebGLContexts||0<this.maxWebGLContexts&&this._webglContextOwners.length<this.maxWebGLContexts)},ownsWebGLContext:function(Z){return-1!==d.indexOf(this._webglContextOwners,Z)},acquireWebGLContext:function(Z){return-1!==d.indexOf(this._webglContextOwners,
Z)?!0:this.isWebGLContextAvailable()?(ha.acquireContext(Z),this._webglContextOwners.push(Z),!0):!1},releaseWebGLContext:function(Z){var ja=d.indexOf(this._webglContextOwners,Z);-1!==ja&&this._webglContextOwners.splice(ja,1);ha.releaseContext(Z)},releaseAllWebGLContexts:function(){var Z=this._webglContextOwners.slice(0);d.forEach(Z,function(ja){this.releaseWebGLContext(ja)},this)},syncHitTestForWebGL:function(Z){var ja,ta=Z.screenPoint;Z=this.graphicsLayerIds.slice(0).reverse();d.some(Z,function(xa){xa=
this.getLayer(xa);xa.loaded&&!xa.suspended&&xa.hasWebGLSurface()&&(ja=xa._div.syncHitTest(ta.x,ta.y));return!!ja},this);return ja},setExtent:function(Z,ja){Z=new P(Z.toJson());var ta=Z.getWidth(),xa=Z.getHeight();return 0===ta&&0===xa?this.centerAt(new S({x:Z.xmin,y:Z.ymin,spatialReference:Z.spatialReference&&Z.spatialReference.toJson()})):this._extentUtil(null,null,Z,ja)},getTargetExtent:function(Z){if(Z)return Z=new P(Z.toJson()),0!==Z.getWidth()&&0!==Z.getHeight()&&(Z=(Z=this._convertGeometry(this,
Z))&&this._fixExtent(Z).extent),Z},centerAt:function(Z){return this._extentUtil(null,{mapCenter:Z})},centerAndZoom:function(Z,ja){return this._extentUtil({targetLevel:ja,mapCenter:Z,levelOrFactor:!0})},getScale:function(){return this.__LOD?this.__LOD.scale:Y.getScale(this)},getResolution:function(){return this.__LOD?this.__LOD.resolution:this.extent?this.extent.getWidth()/this.width:0},getResolutionInMeters:function(){return this.getResolution()*Y.getUnitValueForSR(this.spatialReference)},getResolutionForPopup:function(){var Z=
this.getResolution(),ja=this.getResolutionInMeters(),ta=ja/16;return 10>=ta?0:Z/ja*ta},getMinResolution:function(){return this._minResolution},getMaxResolution:function(){return this._maxResolution},getMinScale:function(){return this._params.minScale},getMaxScale:function(){return this._params.maxScale},getViewInfo:function(){return this._viewInfo},setScale:function(Z){return this._extentUtil({targetScale:Z})},getLayersVisibleAtScale:function(Z){var ja=[];(Z=Z||this.getScale())&&d.forEach(this.layerIds.concat(this.graphicsLayerIds),
function(ta){ta=this.getLayer(ta);ta.isVisibleAtScale(Z)&&ja.push(ta)},this);return ja},getNumLevels:function(){var Z=this.getMinZoom(),ja=this.getMaxZoom();return Z===ja&&0>Z?0:ja-Z+1},getLevel:function(){return this.__LOD?this.__LOD.level:-1},setLevel:function(Z){if(-1<Z)return this._extentUtil({targetLevel:Z})},getZoom:function(){return this.getLevel()},setZoom:function(Z){return this.setLevel(Z)},getMinZoom:function(){return this._params.minZoom},getMaxZoom:function(){return this._params.maxZoom},
setBasemap:function(Z){if(t.isObject(Z)){var ja=Z;Z=ja.title}else ja=E&&E[Z];if(ja){this._basemapDfd&&!this._basemapDfd.isFulfilled()&&this._basemapDfd.cancel();var ta=[],xa=0;d.forEach(ja.baseMapLayers||ja.layers,function(Ja){var La={id:Ja.id,displayLevels:Ja.displayLevels,opacity:C.isDefined(Ja.opacity)?Ja.opacity:null,visible:C.isDefined(Ja.visibility)?Ja.visibility:null};if(La=this._createBaseLayerInstance(Ja,La,Z))ta.push(La),Ja.isReference||xa++},this);ta.length&&xa&&(this._basemapDfd=M(ta).otherwise(wa(this,
function(Ja){this._basemapPending=!1;Ja&&"cancel"===Ja.dojoType&&d.forEach(ta,function(La){La.cancel()});throw Ja;})).then(function(Ja){var La=[],Ya=[];d.forEach(Ja,function(Ua){Ua&&(Ua.layerInfo&&La.push(Ua.layerInfo),Ua.layer&&Ya.push(Ua.layer))});return{basemapName:Z,infos:La,layers:Ya}}).then(wa(this,this._waitForBaseLayers)).then(wa(this,this._setBasemap)),this._basemapPending=!this.loaded&&!this._basemapDfd.isFulfilled())}else{ja=[];for(var Ea in E)ja.push(Ea)}},_createBaseLayerInstance:function(Z,
ja,ta){var xa=new u;if(Z.type)switch(Z.type){case "OpenStreetMap":xa.resolve({layerInfo:Z,layer:new fa(ja)});break;case "VectorTile":f(["./layers/VectorTileLayer"],function(Ja){Ea=F.normalize(Z.url);xa.promise.isFulfilled()||xa.resolve({layerInfo:Z,layer:new Ja(Ea,ja)})});break;default:return null}else{var Ea=F.normalize(Z.url);xa.resolve({layerInfo:Z,layer:new W(Ea,ja)})}return xa.promise},_waitForBaseLayers:function(Z){var ja=new u(A._dfdCanceller);ja.promise.otherwise(function(xa){if(xa&&"cancel"===
xa.dojoType){for(var Ea in ja._layerEvents)xa=ja._layerEvents[Ea],c.disconnect(xa[0]),c.disconnect(xa[1]);delete ja._layerEvents}});if(!this.loaded)return ja.resolve(Z),ja.promise;var ta=function(xa){ja._pendingLayers--;xa=d.indexOf(Z.layers,this);-1<xa&&(xa=ja._layerEvents[xa])&&(c.disconnect(xa[0]),c.disconnect(xa[1]));0>=ja._pendingLayers&&(delete ja._layerEvents,ja.isFulfilled()||ja.resolve(Z))};ja._pendingLayers=0;ja._layerEvents={};d.forEach(Z.layers,function(xa,Ea){xa&&ja._pendingLayers++});
d.forEach(Z.layers,function(xa,Ea){xa&&(xa.loaded?ta(xa):ja._layerEvents[Ea]=[c.connect(xa,"onLoad",xa,ta),c.connect(xa,"onError",xa,ta)])});return ja.promise},_setBasemap:function(Z){var ja=Z.layers,ta=Z.infos,xa=0,Ea=!0;this._basemapPending=!1;this.loaded&&(d.forEach(ja,function(La,Ya){La.loaded&&(ta[Ya].isReference||xa++)}),Ea=xa);if(Ea){if(Ea=this._getBasemapLayerIds()){var Ja={basemapName:this._basemap,infos:E&&E[this._basemap]&&E[this._basemap].baseMapLayers};Ja.basemapName||(d.forEach(Ea,function(La){if(this.getLayer(La)instanceof
fa)return Ja.basemapName="osm",Ja.infos=E&&E.osm&&E.osm.baseMapLayers,!1},this),Ja.basemapName||(Ja=null))}this._removeBasemap(Ea);this._basemap=Z.basemapName;this.basemapLayerIds=this._addBasemapLayers(ja,ta);this.attr("data-basemap",this.getBasemap());this.emit("basemap-change",{current:Z,previous:Ja})}},_getBasemapLayerIds:function(){var Z=[];d.forEach(this.layerIds,function(ja){ja=this.getLayer(ja);ja._basemapGalleryLayerType&&Z.push(ja.id)},this);return Z},_addBasemapLayers:function(Z,ja){var ta=
[],xa=[],Ea=0;d.forEach(Z,function(Ja,La){ja[La].isReference?ta.push(Ja):(Ja._basemapGalleryLayerType="basemap",this.addLayer(Ja,Ea++),xa.push(Ja.id))},this);ta.length&&d.forEach(ta,function(Ja){Ja.attr("data-reference",!0);Ja._basemapGalleryLayerType="reference";this.addLayer(Ja,"top");xa.push(Ja.id)},this);return xa},_removeBasemap:function(Z){d.forEach(Z,function(ja){(ja=this.getLayer(ja))&&this.removeLayer(ja)},this)},getBasemap:function(){return this._basemap||""},translate:function(Z,ja){Z=
Z||0;ja=ja||0;if(!this._txTimer){this._tx=this._ty=0;var ta=this.toScreen(this.extent.getCenter());this.__panStart(ta.x,ta.y)}this._tx+=Z;this._ty+=ja;this.__pan(this._tx,this._ty);clearTimeout(this._txTimer);this._txTimer=setTimeout(this._endTranslate,150)},_endTranslate:function(){clearTimeout(this._txTimer);this._txTimer=null;var Z=this._tx,ja=this._ty;this._tx=this._ty=0;this.__panEnd(Z,ja)},setTimeExtent:function(Z){Z=(this.timeExtent=Z)?new Z.constructor(Z.toJson()):null;this.onTimeExtentChange(Z)},
setTimeSlider:function(Z){this.timeSlider&&(ia(this._tsTimeExtentChange_connect),this.timeSlider=this._tsTimeExtentChange_connect=null);Z&&(this.timeSlider=Z,this.setTimeExtent(Z.getCurrentTimeExtent()),this._tsTimeExtentChange_connect=ba(Z,"onTimeExtentChange",this,"setTimeExtent"))},setVisibility:function(Z){if(this.visible!==Z){this.visible=Z;Z||(this._display=this.container.style.display);this.container.style.display=Z?this._display:"none";if(this.autoResize){var ja=Z?"resume":"pause";this._rszSignal[ja]();
this._oriSignal[ja]()}Z&&this.resize()}return this},resize:function(Z){clearTimeout(this._resizeTimerHandle);this._destroyed||(!0===Z?this._execResize():this._resizeTimerHandle=setTimeout(this._execResize,this.resizeDelay))},_timedResize:function(){this._resizeTimerHandle||this._execResize()},_execResize:function(){clearTimeout(this._resizeTimerHandle);this._resizeTimerHandle=null;this.reposition();this._resize();this.autoResize&&this._startResizeTimer()},_resize:function(){var Z=this.width,ja=this.height,
ta=g.get(this.container,"display"),xa=k.getContentBox(this.container);if(!("none"===ta||0>=xa.w||0>=xa.h||Z===xa.w&&ja===xa.h)){if(ta=this._zoomAnim||this._panAnim)ta.stop(),ta._fire("onEnd",[ta.node]);Aa(this.root,{width:(this.width=xa.w)+"px",height:(this.height=xa.h)+"px"});xa=this.width;ta=this.height;this.attribution&&this.attribution.domNode&&g.set(this.attribution.domNode,"maxWidth",Math.floor(xa*this._mapParams.attributionWidth)+"px");this.__visibleRect.update(this.__visibleRect.x,this.__visibleRect.y,
xa,ta);this.__visibleDelta.update(this.__visibleDelta.x,this.__visibleDelta.y,xa,ta);var Ea=new J(this.extent);Z=(new J(Ea.x,Ea.y,xa/Z*Ea.width,ta/ja*Ea.height,this.spatialReference)).getExtent();this.onResize(Z,xa,ta);this._extentUtil(null,null,Z,null,!0)}},reposition:function(){var Z=this.position,ja=Z.x,ta=Z.y;this._reposition();Z=this.position;if(ja!==Z.x||ta!==Z.y)this.onReposition(Z.x,Z.y)},_reposition:function(){var Z=k.position(this.container,!0),ja=k.getPadBorderExtents(this.container);this.position.update(Z.x+
ja.l,Z.y+ja.t)},_setClipRect:function(){delete this._clip;var Z=7>=b("ie")||void 0===b("ie")&&7<=b("trident")?"rect(auto,auto,auto,auto)":"auto";if(this.wrapAround180){var ja=this.width,ta=this.height,xa=this._getFrameWidth(),Ea=ja-xa;0<Ea&&(Z=Ea/2,Z="rect(0px,"+(Z+xa)+"px,"+ta+"px,"+Z+"px)",ta=this.extent.getWidth(),ja=xa/ja*ta,this._clip=[(ta-ja)/2,ja])}Aa(this.__container,"clip",Z)},_getAvailExtent:function(){var Z=this.extent,ja=this._clip;if(ja){if(!Z._clip){var ta=new J(Z);ta.width=ja[1];ta.x+=
ja[0];Z._clip=ta.getExtent()}return Z._clip}return Z},_fixedPan:function(Z,ja){return this._extentUtil(null,{dx:Z,dy:ja})},panUp:function(){return this._fixedPan(0,-.75*this.height)},panUpperRight:function(){return this._fixedPan(.75*this.width,-.75*this.height)},panRight:function(){return this._fixedPan(.75*this.width,0)},panLowerRight:function(){return this._fixedPan(.75*this.width,.75*this.height)},panDown:function(){return this._fixedPan(0,.75*this.height)},panLowerLeft:function(){return this._fixedPan(-.75*
this.width,.75*this.height)},panLeft:function(){return this._fixedPan(-.75*this.width,0)},panUpperLeft:function(){return this._fixedPan(-.75*this.width,-.75*this.height)},enableSnapping:function(Z){Z=Z||{};if("esri.SnappingManager"===Z.declaredClass)this.snappingManager=Z;else{var ja=ya++,ta=this;this._rids&&this._rids.push(ja);f(["./SnappingManager"],function(xa){var Ea=ta._rids?d.indexOf(ta._rids,ja):-1;-1!==Ea&&(ta._rids.splice(Ea,1),ta.snappingManager=new xa(t.mixin({map:ta},Z)))})}return this.snappingManager},
disableSnapping:function(){this.snappingManager&&this.snappingManager.destroy();this.snappingManager=null},_createLabelLayer:function(){!this._labels&&Da&&this.loaded&&(this._labels=new Da({id:"_internal_LabelLayer"}),this._labels._setMap(this,this._gc._surface),this._processLabelLayers(),this.on("layers-reordered",this._processLabelLayers))},_processLabelLayers:function(){null==this._labelProcessor&&(this._labelProcessor=setTimeout(this._updateLabelLayers,0))},_updateLabelLayers:function(){this._labelProcessor=
null;this._labels&&(this._labels.removeAllFeatureLayers(),d.forEach(this.graphicsLayerIds,function(Z){Z=this.getLayer(Z);"function"===typeof Z.applyEdits?this._labels.addFeatureLayer(Z):"esri.layers.WFSLayer"===Z.declaredClass&&this._labels.addFeatureLayer(Z)},this))},_getMapImageLyr:function(){this.loaded&&!this._mapImageLyr&&(this._mapImageLyr=new da,this._mapImageLyr._setMap(this,this._layersDiv),this._placeMapImageLyr());return this._mapImageLyr},_placeMapImageLyr:function(){for(var Z=this.layerIds,
ja=this._layerDivs,ta=!1,xa,Ea,Ja=Z.length-1;0<=Ja;Ja--)if(xa=Z[Ja],Ea=this.getLayer(xa),xa=ja[xa],Ea&&xa&&!Ea._isReference){r.place(this._mapImageLyr._div,xa,"after");ta=!0;break}ta||r.place(this._mapImageLyr._div,this._layersDiv,"first")}});return z._CoreMap=e})},"esri/basemaps":function(){define(["require","dojo/has","./kernel","dojo/i18n!./nls/jsapi"],function(f,B,l,e){f={streets:{title:e.basemaps.streets,thumbnailUrl:f.toUrl("./images/basemap/streets.jpg"),itemId:"d8855ee4d3d74413babfb0f41203b168",
baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]},satellite:{title:e.basemaps.satellite,thumbnailUrl:f.toUrl("./images/basemap/satellite.jpg"),itemId:"86de95d4e0244cba80f0fa2c9403a7b2",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]},hybrid:{title:e.basemaps.hybrid,thumbnailUrl:f.toUrl("./images/basemap/hybrid.jpg"),itemId:"413fd05bbd7342f5991d5ec96f4f8b18",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},
{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",isReference:!0}]},terrain:{title:e.basemaps.terrain,thumbnailUrl:f.toUrl("./images/basemap/terrain.jpg"),itemId:"aab054ab883c4a4094c72e949566ad40",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",isReference:!0}]},topo:{title:e.basemaps.topo,
thumbnailUrl:f.toUrl("./images/basemap/topo.jpg"),itemId:"6e03e8c26aad4b9c92a87c1063ddb0e3",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}]},gray:{title:e.basemaps.gray,thumbnailUrl:f.toUrl("./images/basemap/gray.jpg"),itemId:"8b3b470883a744aeb60e5fff0a319ce7",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",
isReference:!0}]},"dark-gray":{title:e.basemaps["dark-gray"],thumbnailUrl:f.toUrl("./images/basemap/dark-gray.jpg"),itemId:"da65bacab5bd4defb576f839b6b28098",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",isReference:!0}]},oceans:{title:e.basemaps.oceans,thumbnailUrl:f.toUrl("./images/basemap/oceans.jpg"),itemId:"48b8cec7ebf04b5fbdcaf70d09daff21",
baseMapLayers:[{url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",isReference:!0}]},"national-geographic":{title:e.basemaps["national-geographic"],thumbnailUrl:f.toUrl("./images/basemap/national-geographic.jpg"),itemId:"509e2d6b034246d692a461724ae2d62c",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"}]},
osm:{title:e.basemaps.osm,thumbnailUrl:f.toUrl("./images/basemap/osm.jpg"),itemId:"5d2bfa736f8448b3a1708e1f6be23eed",baseMapLayers:[{type:"OpenStreetMap"}]},"dark-gray-vector":{title:e.basemaps["dark-gray"],thumbnailUrl:f.toUrl("./images/basemap/dark-gray.jpg"),itemId:"c11ce4f7801740b2905eb03ddc963ac8",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/c11ce4f7801740b2905eb03ddc963ac8/resources/styles/root.json",type:"VectorTile"}]},"gray-vector":{title:e.basemaps.gray,thumbnailUrl:f.toUrl("./images/basemap/gray.jpg"),
itemId:"8a2cba3b0ebf4140b7c0dc5ee149549a",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/8a2cba3b0ebf4140b7c0dc5ee149549a/resources/styles/root.json",type:"VectorTile"}]},"streets-vector":{title:e.basemaps.streets,thumbnailUrl:f.toUrl("./images/basemap/streets.jpg"),itemId:"de26a3cf4cc9451298ea173c4b324736",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",type:"VectorTile"}]},"topo-vector":{title:e.basemaps.topo,
thumbnailUrl:f.toUrl("./images/basemap/topo.jpg"),itemId:"7dc6cea0b1764a1f9af2e679f642f0f5",baseMapLayers:[{url:"https://services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{url:"https://www.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",type:"VectorTile"}]},"streets-night-vector":{title:e.basemaps["streets-night-vector"],thumbnailUrl:f.toUrl("./images/basemap/streets-night.jpg"),itemId:"86f556a2d1fd468181855a35e344567f",
baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",type:"VectorTile"}]},"streets-relief-vector":{title:e.basemaps["streets-relief-vector"],thumbnailUrl:f.toUrl("./images/basemap/streets-relief.jpg"),itemId:"b266e6d17fc345b498345613930fbd76",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",type:"VectorTile"}]},"streets-navigation-vector":{title:e.basemaps["streets-navigation-vector"],
thumbnailUrl:f.toUrl("./images/basemap/streets-navigation.jpg"),itemId:"63c47b7177f946b49902c24129b87252",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",type:"VectorTile"}]}};return l.basemaps=f})},"esri/fx":function(){define("dojo/_base/connect dojo/_base/fx dojo/_base/lang dojo/dom dojo/dom-geometry dojo/dom-style dojo/fx dojo/has ./kernel".split(" "),function(f,B,l,e,c,u,t,d,q){d={animateRange:function(m){var a=
m.range;return new B.Animation(l.mixin({curve:new B._Line(a.start,a.end)},m))},resize:function(m){var a=m.node=e.byId(m.node),h=m.start,n=m.end;h||(h=c.getMarginBox(a),a=c.getPadBorderExtents(a),h=m.start={left:h.l+a.l,top:h.t+a.t,width:h.w-a.w,height:h.h-a.h});n||(n=m.anchor?m.anchor:{x:h.left,y:h.top},a=m.size,n=m.end={left:h.left-(a.width-h.width)*(n.x-h.left)/h.width,top:h.top-(a.height-h.height)*(n.y-h.top)/h.height,width:a.width,height:a.height});return B.animateProperty(l.mixin({properties:{left:{start:h.left,
end:n.left},top:{start:h.top,end:n.top},width:{start:h.width,end:n.width},height:{start:h.height,end:n.height}}},m))},slideTo:function(m){var a=m.node=e.byId(m.node),h=u.getComputedStyle,n=null,r=null,k=function(){return function(){var g="absolute"==a.style.position?"absolute":"relative";n="absolute"==g?a.offsetTop:parseInt(h(a).top)||0;r="absolute"==g?a.offsetLeft:parseInt(h(a).left)||0;"absolute"!=g&&"relative"!=g&&(g=c.position(a,!0),n=g.y,r=g.x,a.style.position="absolute",a.style.top=n+"px",a.style.left=
r+"px")}}();k();m=B.animateProperty(l.mixin({properties:{top:{start:n,end:m.top||0},left:{start:r,end:m.left||0}}},m));f.connect(m,"beforeBegin",m,k);return m},flash:function(m){m=l.mixin({end:"#f00",duration:500,count:1},m);m.duration/=2*m.count;var a=e.byId(m.node),h=m.start;h||(h=u.getComputedStyle(a).backgroundColor);var n=m.end,r=[],k=m.count;a={node:a,duration:m.duration};for(m=0;m<k;m++)r.push(B.animateProperty(l.mixin({properties:{backgroundColor:{start:h,end:n}}},a))),r.push(B.animateProperty(l.mixin({properties:{backgroundColor:{start:n,
end:h}}},a)));return t.chain(r)}};l.mixin(l.getObject("fx",!0,q),d);return d})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),function(f,B,l,e,c,u,t,d,q,m,a){l.isAsync||m(0,function(){a(["./fx/Toggler"])});l=l.fx={};m={_fire:function(r,k){this[r]&&this[r].apply(this,k||[]);return this}};var h=function(r){this._index=-1;this._animations=r||[];this._current=this._onAnimateCtx=this._onEndCtx=
null;this.duration=0;e.forEach(this._animations,function(k){k&&("undefined"!=typeof k.duration&&(this.duration+=k.duration),k.delay&&(this.duration+=k.delay))},this)};h.prototype=new B;f.extend(h,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=c.after(this._current,
"onAnimate",f.hitch(this,"_onAnimate"),!0),this._onEndCtx=c.after(this._current,"onEnd",f.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(r,k){this._current||(this._current=this._animations[this._index=0]);if(!k&&"playing"==this._current.status())return this;var g=c.after(this._current,"beforeBegin",f.hitch(this,function(){this._fire("beforeBegin")}),!0),b=c.after(this._current,"onBegin",f.hitch(this,function(x){this._fire("onBegin",arguments)}),!0),w=c.after(this._current,"onPlay",
f.hitch(this,function(x){this._fire("onPlay",arguments);g.remove();b.remove();w.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=c.after(this._current,"onAnimate",f.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=c.after(this._current,"onEnd",f.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var r=c.after(this._current,"onPause",f.hitch(this,function(k){this._fire("onPause",
arguments);r.remove()}),!0);this._current.pause()}return this},gotoPercent:function(r,k){this.pause();var g=this.duration*r;this._current=null;e.some(this._animations,function(b,w){if(g<=b.duration)return this._current=b,this._index=w,!0;g-=b.duration;return!1},this);this._current&&this._current.gotoPercent(g/this._current.duration);k&&this.play();return this},stop:function(r){if(this._current){if(r){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=
this._animations[this._index]}var k=c.after(this._current,"onStop",f.hitch(this,function(g){this._fire("onStop",arguments);k.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this.stop();this._onAnimateCtx&&this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});f.extend(h,m);l.chain=function(r){return new h(f.isArray(r)?r:Array.prototype.slice.call(r,0))};var n=function(r){this._animations=r||
[];this._connects=[];this.duration=this._finished=0;e.forEach(r,function(g){var b=g.duration;g.delay&&(b+=g.delay);this.duration<b&&(this.duration=b);this._connects.push(c.after(g,"onEnd",f.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=new u.Animation({curve:[0,1],duration:this.duration});var k=this;e.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(g){k._connects.push(c.after(k._pseudoAnimation,g,function(){k._fire(g,arguments)},!0))})};f.extend(n,
{_doAction:function(r,k){e.forEach(this._animations,function(g){g[r].apply(g,k)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(r,k){var g=this._pseudoAnimation;g[r].apply(g,k)},play:function(r,k){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(r,k){var g=this.duration*r;e.forEach(this._animations,
function(b){b.gotoPercent(b.duration<g?1:g/b.duration,k)});this._call("gotoPercent",arguments);return this},stop:function(r){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){this.stop();e.forEach(this._connects,function(r){r.remove()})}});f.extend(n,m);l.combine=function(r){return new n(f.isArray(r)?r:Array.prototype.slice.call(r,0))};l.wipeIn=function(r){var k=r.node=t.byId(r.node),g=k.style,b;r=
u.animateProperty(f.mixin({properties:{height:{start:function(){b=g.overflow;g.overflow="hidden";if("hidden"==g.visibility||"none"==g.display)return g.height="1px",g.display="",g.visibility="",1;var x=d.get(k,"height");return Math.max(x,1)},end:function(){return k.scrollHeight}}}},r));var w=function(){g.height="auto";g.overflow=b};c.after(r,"onStop",w,!0);c.after(r,"onEnd",w,!0);return r};l.wipeOut=function(r){var k=(r.node=t.byId(r.node)).style,g;r=u.animateProperty(f.mixin({properties:{height:{end:1}}},
r));c.after(r,"beforeBegin",function(){g=k.overflow;k.overflow="hidden";k.display=""},!0);var b=function(){k.overflow=g;k.height="auto";k.display="none"};c.after(r,"onStop",b,!0);c.after(r,"onEnd",b,!0);return r};l.slideTo=function(r){var k=null,g=null,b=function(w){return function(){var x=d.getComputedStyle(w),z=x.position;k="absolute"==z?w.offsetTop:parseInt(x.top)||0;g="absolute"==z?w.offsetLeft:parseInt(x.left)||0;"absolute"!=z&&"relative"!=z&&(x=q.position(w,!0),k=x.y,g=x.x,w.style.position=
"absolute",w.style.top=k+"px",w.style.left=g+"px")}}(r.node=t.byId(r.node));b();r=u.animateProperty(f.mixin({properties:{top:r.top||0,left:r.left||0}},r));c.after(r,"beforeBegin",b,!0);return r};return l})},"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),function(f,B,l,e,c,u,t,d,q){f=f(null,{declaredClass:"esri.layers.TileInfo",constructor:function(m){B.mixin(this,m);this.width=
this.cols;this.height=this.rows;this._levelToLOD={};m=this.spatialReference;var a=this.origin;m&&(m=this.spatialReference=new t(m.toJson?m.toJson():m));a&&(this.origin=new d(a.toJson?a.toJson():a),!a.spatialReference&&m&&this.origin.setSpatialReference(new t(m.toJson())));this.lods=l.map(this.lods,function(r){return new q(r)});l.forEach(this.lods,function(r){this._levelToLOD[r.level]=r},this);m=!1;a=this.spatialReference;var h=this.origin;if(a&&h){var n=a._getInfo();n&&(m=a._isWrappable()&&Math.abs(n.origin[0]-
h.x)<=n.dx)}this.isWrappable=m;this._initializeUpsampleLevels()},toJson:function(){return u.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&l.map(this.lods,function(m){return m.toJson()})})},lodAt:function(m){return this._levelToLOD&&this._levelToLOD[m]||null},updateTileInfo:function(m){var a=this.lodAt(m.level),
h=a.resolution*this.width;a=a.resolution*this.height;m.id=m.level+"/"+m.row+"/"+m.col;m.extent||(m.extent=[0,0,0,0]);m.extent[0]=this.origin.x+m.col*h;m.extent[1]=this.origin.y-(m.row+1)*a;m.extent[2]=m.extent[0]+h;m.extent[3]=m.extent[1]+a},upsampleTile:function(m){var a=this._upsampleLevels[m.level];if(!a||-1===a.parentLevel)return!1;m.level=a.parentLevel;m.row=Math.floor(m.row/a.factor+.001);m.col=Math.floor(m.col/a.factor+.001);this.updateTileInfo(m);return!0},_initializeUpsampleLevels:function(){var m=
this.lods;this._upsampleLevels=[];for(var a=null,h=0;h<m.length;h++){var n=m[h];this._upsampleLevels[n.level]={parentLevel:a?a.level:-1,factor:a?a.resolution/n.resolution:0};a=n}}});B.setObject("layers.TileInfo",f,c);return f})},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(f,B,l,e,c){f=f(null,{declaredClass:"esri.layers.LOD",constructor:function(u){B.mixin(this,u)},toJson:function(){return c.fixJson({level:this.level,levelValue:this.levelValue,
resolution:this.resolution,scale:this.scale})}});B.setObject("layers.LOD",f,e);return f})},"esri/layers/ArcGISTiledMapServiceLayer":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has dojo/io-query ../kernel ../urlUtils ../SpatialReference ./TiledMapServiceLayer ./ArcGISMapServiceLayer ./TileInfo ./TimeInfo ./TileMap".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k){B=B([a,h],{declaredClass:"esri.layers.ArcGISTiledMapServiceLayer",_agolAttrs:"Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),
_isReference:!1,_referenceLayers:"Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Reference Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Reference_Overlay Reference/World_Transportation".split(" "),constructor:function(g,b){b&&(b.roundrobin&&(f.deprecated(this.declaredClass+" : Constructor option 'roundrobin' deprecated. Use option 'tileServers'."),b.tileServers=b.roundrobin),this._setTileServers(b.tileServers),
this._loadCallback=b.loadCallback);this._params=l.mixin({},this._url.query);this._initLayer=l.hitch(this,this._initLayer);(g=b&&b.resourceInfo)?this._initLayer(g):(this._load=l.hitch(this,this._load),this._load())},_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_setTileServers:function(g){if(g&&0<g.length){this.tileServers=g;var b,w=g.length;for(b=0;b<w;b++)g[b]=q.urlToObject(g[b]).path}},_initLayer:function(g,b){this.inherited(arguments);this.resourceInfo=
c.toJson(g);this.tileInfo=new n(g.tileInfo);!1!==this.resampling&&(g.capabilities&&-1<g.capabilities.indexOf("Tilemap")?(this.resampling=!0,this.tileMap=new k(this)):this.resampling=!!g.resampling);!this.spatialReference&&this.tileInfo.spatialReference&&(this.spatialReference=new m(this.tileInfo.spatialReference.toJson()));this.isPNG32="PNG24"===this.tileInfo.format||"PNG32"===this.tileInfo.format;g.timeInfo&&(this.timeInfo=new r(g.timeInfo));g.mensurationCapabilities&&(this.mensurationCapabilities=
g.mensurationCapabilities);var w=this._url.path,x=this._loadCallback,z=q.getProtocolForWebResource(!0),D=w.match(/^https?:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);D=D&&D[2];if(!this.tileServers)if(g.tileServers)this._setTileServers(g.tileServers);else{var E=-1!==w.search(/^https?:\/\/server\.arcgisonline\.com/i),C=-1!==w.search(/^https?:\/\/services\.arcgisonline\.com/i);(E||C)&&this._setTileServers([w,w.replace(E?/server\.arcgisonline/i:
/services\.arcgisonline/i,E?"services.arcgisonline":"server.arcgisonline")])}if(D){D=D.toLowerCase();for(w=0;w<this._agolAttrs.length;w++)if(E=this._agolAttrs[w],E.toLowerCase()===D){this.hasAttributionData=!0;this.attributionDataUrl=this.attributionDataUrl||z+"//static.arcgis.com/attribution/"+E;break}for(w=0;w<this._referenceLayers.length;w++)if(E=this._referenceLayers[w],E.toLowerCase()===D){this._isReference=!0;break}}this.loaded=!0;this.onLoad(this);x&&(delete this._loadCallback,x(this))},getTileUrl:function(g,
b,w){var x=this.tileServers,z=this._getToken(),D=this._url.query;g=(x?x[b%x.length]:this._url.path)+"/tile/"+g+"/"+b+"/"+w;g=q.upgradeToHTTPS(g);this.resampling&&!this.tileMap&&(g+="?blankTile\x3dfalse");D&&(g=this.resampling&&!this.tileMap?g+("\x26"+t.objectToQuery(D)):g+("?"+t.objectToQuery(D)));!z||D&&D.token||(g+=(-1===g.indexOf("?")?"?":"\x26")+"token\x3d"+z);g=this.addTimestampToURL(g);return q.addProxy(g)}});l.setObject("layers.ArcGISTiledMapServiceLayer",B,d);return B})},"esri/layers/TiledMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/url dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/dom dojox/collections/ArrayList dojox/gfx/matrix ../kernel ../config ../sniff ../domUtils ../tileUtils ../geometry/Point ../geometry/Rect ../geometry/Extent ./layer".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D){f=f(D,{declaredClass:"esri.layers.TiledMapServiceLayer",constructor:function(E,C){B.connect(this,"onLoad",this,"_initTiledLayer");this._lowestLevel=(this._displayLevels=C?C.displayLevels:null)?this._displayLevels[0]:0;this.resampling=C?C.resampling:void 0;this._resamplingTolerance=C?C.resamplingTolerance:null;this.exclusionAreas=C?C.exclusionAreas:null;E=l.hitch;this._addImage=E(this,this._addImage);this._tileLoadHandler=E(this,this._tileLoadHandler);
this._tileErrorHandler=E(this,this._tileErrorHandler);this._popTile=E(this,this._popTile);this._cleanUpRemovedImages=E(this,this._cleanUpRemovedImages);this._fireOnUpdateEvent=E(this,this._fireOnUpdateEvent);this._transitionEnd=E(this,this._transitionEnd);this._tileMapCallback=E(this,this._tileMapCallback)},opacity:1,isPNG32:!1,_multiple:1,isResampling:!1,_initTiledLayer:function(){var E=this.tileInfo,C=E.lods;this.resampling=null!=this.resampling?this.resampling:!1;this._tileW=E.width;this._tileH=
E.height;var y=this.scales=[],v=this._displayLevels,A=-Infinity,G=Infinity,F=this.fullExtent,H=new w(F.xmin,F.ymax);F=new w(F.xmax,F.ymin);var L=b.getContainingTileCoords,M,Q=C.length;for(M=0;M<Q;M++){var S=C[M];var I=L(E,H,S);S.startTileRow=0>I.row?0:I.row;S.startTileCol=0>I.col?0:I.col;I=L(E,F,S);S.endTileRow=I.row;S.endTileCol=I.col;v&&-1===e.indexOf(v,S.level)||(y[M]=S.scale,A=S.scale>A?S.scale:A,G=S.scale<G?S.scale:G)}-Infinity===A||this._hasMin||this.setMinScale(A);Infinity===G||this._hasMax||
this.setMaxScale(G);this.setExclusionAreas(this.exclusionAreas);this._patchIE=6<=k("ie")&&7>k("ie")&&(this.isPNG32||"Mixed"===E.format)},isVisibleAtScale:function(E){return E?D.prototype._isMapAtVisibleScale.call(this,E,!0):!1},_isMapAtVisibleScale:function(E){var C=this.inherited(arguments,[E,!0]);if(C){var y=this._map;C=this.scales;var v=y.getScale(),A=!1,G=y.width>y.height?y.width:y.height;for(y=0;y<C.length;y++)if(Math.abs(C[y]-v)/C[y]<1/G){A=!0;break}C=A}return C},_setMap:function(E,C,y,v){this.inherited(arguments);
this._map=E;var A=this._div=u.create("div",null,C),G=E.__visibleDelta,F=B.connect,H=n._css.names,L={position:"absolute",width:E.width+"px",height:E.height+"px",overflow:"visible"},M=r.defaults.map.zoomDuration;"css-transforms"===E.navigationMode?(L[H.transform]=n._css.translate(-G.x,-G.y),q.set(A,L),delete L[H.transform],L[H.transition]=H.transformName+" "+M+"ms ease",q.set(this._active=u.create("div",null,A),L),this._active._remove=0,this._passives=[]):(L.left=-G.x+"px",L.top=-G.y+"px",q.set(A,L));
this._onResizeHandler_connect=F(E,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=F(this,"onOpacityChange",this,"_opacityChangeHandler");G=this.tileInfo;F=G.spatialReference;H=F._getInfo();(this._wrap=E.wrapAround180&&F._isWrappable()&&Math.abs(H.origin[0]-G.origin.x)<=H.dx)&&b._addFrameInfo(G,H);this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension();if(this.suspended&&!E.loaded)var Q=B.connect(E,"onLoad",this,function(){B.disconnect(Q);Q=null;this.setExclusionAreas(this.exclusionAreas);
this.evaluateSuspension()});return A},_unsetMap:function(E,C){this.suspended||this._suspendImpl();u.destroy(this._div);this._map=this._div=null;var y=B.disconnect;y(this._onResizeHandler_connect);y(this._opacityChangeHandler_connect);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(){g.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();var E=this._tiles,C=this._tileIds,y=this._loadingList,
v,A,G=B.disconnect,F=u.destroy;y&&0<y.count&&(y.forEach(function(L){if(v=E[L])G(v._onload_connect),G(v._onerror_connect),G(v._onabort_connect),v._onload_connect=v._onerror_connect=v._onabort_connect=null}),y.clear(),this._fireUpdateEnd());this._removeList.clear();for(y=C.length-1;0<=y;y--)(v=(A=C[y])&&E[A])&&F(v);if("css-transforms"===this._map.navigationMode){C=this._active;A=this._passives;this._noDom=0;for(y=A.length-1;0<=y;y--){var H=A[y];H._endHandle&&G(H._endHandle);H._matrix=H._multiply=H._endHandle=
null;H._marked=H._remove=0;A.splice(y,1);F(H)}C._matrix=C._multiply=null;C._marked=C._remove=0}this._tileIds=this._tiles=this._tileBounds=this._ct=this._loadingList=this._removeList=this._standby=null},onResume:function(){this.inherited(arguments);this._tileIds=[];this._tiles=[];this._tileBounds=[];this._ct=null;this._removeList=new a;this._loadingList=new a;g.show(this._div);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(l.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,
null,!0,this._map.__LOD)}),0)},_enableDrawConnectors:function(){var E=this._map,C=B.connect;if("css-transforms"===E.navigationMode){if(this._onScaleHandler_connect=C(E,"onScale",this,this._onScaleHandler),k("esri-mobile")){this._standby=[];var y=this,v=function(){y._noDom=1};this._onPanStartHandler_connect=C(E,"onPanStart",v);this._onZoomStartHandler_connect=C(E,"onZoomStart",v)}}else this._onZoomHandler_connect=C(E,"onZoom",this,"_onZoomHandler");this._onPanHandler_connect=C(E,"onPan",this,"_onPanHandler");
this._onExtentChangeHandler_connect=C(E,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var E=B.disconnect;E(this._onPanHandler_connect);E(this._onZoomHandler_connect);E(this._onScaleHandler_connect);E(this._onExtentChangeHandler_connect);E(this._onPanStartHandler_connect);E(this._onZoomStartHandler_connect);this._onPanHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=this._onExtentChangeHandler_connect=this._onPanStartHandler_connect=this._onZoomStartHandler_connect=
null},_onResizeHandler:function(E,C,y){E={width:C+"px",height:y+"px"};C=q.set;C(this._div,E);if("css-transforms"===this._map.navigationMode)for(this._active&&C(this._active,E),y=this._passives.length-1;0<=y;y--)C(this._passives[y],E)},_onExtentChangeHandler:function(E,C,y,v){C=this._map;var A=this._standby;clearTimeout(this._wakeTimer);this._wakeTimer=null;if(!C._isPanningOrZooming()){if("css-transforms"===C.navigationMode){if(y)for(v=this._passives.length-1;0<=v;v--){var G=this._passives[v];q.set(G,
n._css.names.transition,"none");G._marked?(this._passives.splice(v,1),G.parentNode&&G.parentNode.removeChild(G),u.destroy(G)):0<G.childNodes.length&&(G._multiply=G._multiply?h.multiply(G._matrix,G._multiply):G._matrix)}this._noDom=0;if(A&&A.length)for(v=A.length-1;0<=v;v--)G=A[v],q.set(G,"visibility","inherit"),this._popTile(G),A.splice(v,1)}this._fireUpdateStart();this._rrIndex=0;v=b.getCandidateTileInfo(C,this.tileInfo,E);E=C.__visibleDelta;if(!this._ct||v.lod.level!==this._ct.lod.level||y){G=v&&
this._ct&&v.lod.level!==this._ct.lod.level;this._ct=v;var F=this._tiles,H=this._tileIds,L=this._tileBounds,M=this._removeList,Q=H.length;this._cleanUpRemovedImages();for(v=0;v<Q;v++){A=H[v];var S=F[A];L[A]=H[v]=null;"css-transforms"===C.navigationMode&&G&&S.parentNode&&C.fadeOnZoom&&(S._fadeOut=G,S.parentNode._remove++);M.add(S)}y&&(this._tileIds=[],this._tiles=[],this._tileBounds=[])}v=E.x;y=E.y;"css-transforms"===C.navigationMode?(A={},A[n._css.names.transform]=n._css.translate(v,y),q.set(this._div,
A)):q.set(this._div,{left:v+"px",top:y+"px"});this.__coords_dx=v;this.__coords_dy=y;this._updateImages(new x(0,0,E.width,E.height));0===this._loadingList.count?(this._cleanUpRemovedImages(),this.onUpdate(),this._fireUpdateEnd()):this._fireOnUpdate=!0;y=this._tileW;F=this._tileH;E=new x(-E.x,-E.y,E.width,E.height);for(v=this._tileIds.length-1;0<=v;v--)(A=this._tileIds[v])?(G=this._tiles[A],H=d.getMarginBox(G),H=new x(H.l,H.t,y,F),"css-transforms"===C.navigationMode&&(H.x=G._left,H.y=G._top),E.intersects(H)?
this._tileBounds[A]=H:(this._loadingList.contains(A)&&this._popTile(G),u.destroy(G),this._tileIds.splice(v,1),delete this._tileBounds[A],delete this._tiles[A])):(this._tileIds.splice(v,1),delete this._tileBounds[A],delete this._tiles[A])}},_onPanHandler:function(E,C){E=this._map;C=E.__visibleDelta.offset(C.x,C.y);this.__coords_dx=this.__coords_dy=0;"css-transforms"===E.navigationMode?(E={},E[n._css.names.transform]=n._css.translate(C.x,C.y),q.set(this._div,E),k("esri-mobile")||this._updateImages({x:-C.x,
y:-C.y,width:C.width,height:C.height})):(q.set(this._div,{left:C.x+"px",top:C.y+"px"}),this._updateImages({x:-C.x,y:-C.y,width:C.width,height:C.height}));0<this._loadingList.count&&(this._fireUpdateStart(),this._fireOnUpdate=!0)},_onScaleHandler:function(E,C){var y,v={},A=n._css.names,G=this._map,F=r.defaults.map.zoomDuration;for(y=this._passives.length-1;0<=y;y--){var H=this._passives[y];0===H.childNodes.length?(this._passives.splice(y,1),u.destroy(H)):("none"===H.style[A.transition]&&q.set(H,A.transition,
A.transformName+" "+F+"ms ease"),q.set(H,A.transition,C?"none":A.transformName+" "+F+"ms ease"),H._matrix=E,v[A.transform]=n._css.matrix(H._multiply?h.multiply(E,H._multiply):E),q.set(H,v))}this._active&&0===this._active.childNodes.length||(q.set(this._active,A.transition,C?"none":A.transformName+" "+F+"ms ease"),this._active._matrix=E,v[A.transform]=n._css.matrix(this._active._matrix),q.set(this._active,v),this._passives.push(this._active),v={position:"absolute",width:G.width+"px",height:G.height+
"px",overflow:"visible"},v[A.transition]=A.transformName+" "+F+"ms ease",q.set(this._active=u.create("div",null,this._div),v),this._active._remove=0,G.fadeOnZoom&&u.place(this._active,this._div,"first"))},_onZoomHandler:function(E,C,y){E=d.getMarginBox(this._div);y=y.offset(-E.l,-E.t);this._previousScale&&1!==C||(this._previousScale=1);var v,A=this._tileW*C,G=this._tileH*C,F=this._tileBounds,H=this._tiles,L=this._previousScale,M=this._multiple,Q=q.set,S,I;if((E=k("ie"))&&8>E)e.forEach(this._tileIds,
function(aa){I="";v=F[aa];S=H[aa].style.margin.split(" ");e.forEach(S,function(la){""!==I&&(I+=" ");la=parseFloat(la);I+=la/L*C+"px"});Q(H[aa],{left:v.x-(A-v.width)*(y.x-v.x)/v.width+"px",top:v.y-(G-v.height)*(y.y-v.y)/v.height+"px",margin:1!==M&&-1===I.indexOf("NaN")?I:"",zoom:C})});else{var P=A*M,J=G*M,U,Y;e.forEach(this._tileIds,function(aa){I="";v=F[aa];U=v.x-(A-v.width)*(y.x-v.x)/v.width;Y=v.y-(G-v.height)*(y.y-v.y)/v.height;S=H[aa].style.margin.split(" ");e.forEach(S,function(la){""!==I&&(I+=
" ");la=parseFloat(la);I+=la/L*C+"px"});Q(H[aa],{left:U+"px",top:Y+"px",margin:1!==M&&-1===I.indexOf("NaN")?I:"",width:P+"px",height:J+"px"})})}this._previousScale=C},_updateImages:function(E){if(this._ct){var C=this._tileW,y=this._tileH,v=this._ct;var A=v.lod;v=v.tile;var G=v.offsets,F=v.coords,H=F.row;F=F.col;var L=A.level,M=this.opacity,Q=this._tileIds,S=this._loadingList,I=this._addImage,P=this._map.id,J=this.id,U=E.x,Y=E.y,aa=A.startTileRow,la=A.endTileRow,T=A.startTileCol,N=A.endTileCol,K=e.indexOf,
W=G.x-this.__coords_dx,da=G.y-this.__coords_dy;var fa=C-W+-E.x;var ha=y-da+-E.y;var ra=Math.ceil;fa=0<fa?fa%C:C-Math.abs(fa)%C;ha=0<ha?ha%y:y-Math.abs(ha)%y;U=0<U?Math.floor((U+W)/C):ra((U-(C-W))/C);Y=0<Y?Math.floor((Y+da)/y):ra((Y-(y-da))/y);da=U+ra((E.width-fa)/C);E=Y+ra((E.height-ha)/y);if(this._wrap){var za=A._frameInfo;var Da=za[0];var va=za[1];za=za[2]}for(ha=U;ha<=da;ha++)for(U=Y;U<=E;U++)ra=H+U,fa=F+ha,this._wrap&&(fa<va?(fa%=Da,fa=fa<va?fa+Da:fa):fa>za&&(fa%=Da)),!this._isExcluded(L,ra,fa)&&
ra>=aa&&ra<=la&&fa>=T&&fa<=N&&(A=P+"_"+J+"_tile_"+L+"_"+U+"_"+ha,-1===K(Q,A)&&(S.add(A),Q.push(A),I(L,U,ra,ha,fa,A,C,y,M,v,G)))}},_cleanUpRemovedImages:function(){var E=this._removeList,C=u.destroy,y,v=n._css.names;E.forEach(function(G){G._fadeOut||(G.style.filter="",G.style.zoom=1,C(G))});if("css-transforms"===this._map.navigationMode)for(y=this._passives.length-1;0<=y;y--){var A=this._passives[y];0===A.childNodes.length?(this._passives.splice(y,1),C(A)):this._map.fadeOnZoom&&!A._marked&&A._remove===
A.childNodes.length&&(A._marked=1,2048>n._css.getScaleFromMatrix(q.get(A,v.transform))?(q.set(A,v.transition,"opacity 0.65s"),q.set(A,"opacity",0),B.disconnect(A._endHandle),A._endHandle=B.connect(A,v.endEvent,this._transitionEnd)):this._transitionEnd({propertyName:"opacity",target:A}))}E.clear()},_transitionEnd:function(E){var C=E.target;"opacity"===E.propertyName&&(B.disconnect(C._endHandle),C._endHandle=null,E=e.indexOf(this._passives,C),-1<E&&this._passives.splice(E,1),C.parentNode&&C.parentNode.removeChild(C),
u.destroy(C))},_addImage:function(E,C,y,v,A,G,F,H,L,M,Q){if(this._patchIE)M=this._tiles[G]=u.create("div"),M.id=G,t.add(M,"layerTile"),q.set(M,{left:F*v-Q.x+"px",top:H*C-Q.y+"px",width:F+"px",height:H+"px",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+this.getTileUrl(E,y,A)+"', sizingMethod\x3d'scale')"}),1>L&&q.set(M,"opacity",L),E=M.appendChild(u.create("div")),q.set(E,{opacity:0,width:F+"px",height:H+"px"}),this._div.appendChild(M),M=null,this._loadingList.remove(G),this._fireOnUpdateEvent();
else{M=this._tiles[G]=u.create("img");var S=B.connect;M.id=G;M._uid=E+"_"+y+"_"+A;M.alt="";t.add(M,"layerTile");v=F*v-Q.x;Q=H*C-Q.y;C=this._map;var I=n._css.names;F={width:F+"px",height:H+"px",visibility:"hidden"};"css-transforms"===C.navigationMode?(F[I.transform]=n._css.translate(v,Q),q.set(M,F),M._left=v,M._top=Q):(F.left=v+"px",F.top=Q+"px",q.set(M,F));1>L&&q.set(M,"opacity",L);M._onload_connect=S(M,"onload",this,"_tileLoadHandler");M._onerror_connect=S(M,"onerror",l.hitch(this,"_tileErrorHandler",
y,A));M._onabort_connect=S(M,"onabort",this,"_tileAbortHandler");if(this.tileMap)this.tileMap.getTile(E,y,A,G,this._tileMapCallback);else if(G=this.getTileUrl(E,y,A,M))this._failedRequests&&this._failedRequests[G]?(q.set(M,this._failedRequests[G].css),M.src=this._failedRequests[G].src,this._multiple=parseInt(this._failedRequests[G].css.width)/this._tileW,this.isResampling=1!==this._multiple):(this._multiple=1,this.isResampling=!1,M.src=G);"css-transforms"===C.navigationMode?this._active.appendChild(M):
this._div.appendChild(M);M=null}},_tileMapCallback:function(E,C){if(!this.suspended){var y=this._tiles[C.id]||m.byId(C.id);var v=C.level+"_"+C.row+"_"+C.col;y&&y._uid===v?(this._multiple=2*(C.level-E.level)||1,this.isResampling=1!==this._multiple,C=this.tileMap.style(E,C),q.set(y,C),y.src=this.getTileUrl(E.level,E.row,E.col)):this._popTile(C)}},getTileUrl:function(E,C,y){},refresh:function(){this.suspended||(this._refreshTS=Date.now(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},
_popTile:function(E){var C=B.disconnect;C(E._onload_connect);C(E._onerror_connect);C(E._onabort_connect);E._onload_connect=E._onerror_connect=E._onabort_connect=null;this._loadingList.remove(E.id);this._fireOnUpdateEvent()},_tileLoadHandler:function(E){E=E.currentTarget;this._noDom?this._standby.push(E):(q.set(E,"visibility","inherit"),this._popTile(E))},_tileAbortHandler:function(E){E=E.currentTarget;this.onError(Error("Unable to load tile: "+E.src));q.set(E,"visibility","hidden");this._popTile(E)},
_tileErrorHandler:function(E,C,y){y=y.currentTarget;var v=!0;if(this.tileMap||!this.resampling)v=!1;else{var A=new c(y.src);A=A.path.split("/");A=parseInt(A[A.length-3]);var G=this._ct.lod.level-A+1;this._multiple=Math.pow(2,G);if(A===this._lowestLevel||0===this._resamplingTolerance||this._resamplingTolerance&&Math.log(this._multiple)/Math.LN2>this._resamplingTolerance)v=!1}v?(this.isResampling=!0,this._resample(y,E,C)):(this.onError(Error("Unable to load tile: "+y.src)),q.set(y,"visibility","hidden"),
this._popTile(y))},_resample:function(E,C,y){var v=(new c(E.src)).path.split("/"),A=this._multiple,G=parseInt(v[v.length-3])-1,F=parseInt(C/A),H=parseInt(y/A);v=y%A;var L=C%A;F=this.getTileUrl(G,F,H);C=this.getTileUrl(G+Math.log(A)/Math.LN2,C,y);A={width:this._tileW*A+"px",height:this._tileH*A+"px",margin:"-"+this._tileW*L+"px 0 0 -"+(this._tileH*v+"px")};this._failedRequests||(this._failedRequests={});this._failedRequests[C]={src:F,css:A};q.set(E,A);k("chrome")&&E.setAttribute("src",null);E.src=
F},_fireOnUpdateEvent:function(){0===this._loadingList.count&&(this._cleanUpRemovedImages(),this._fireOnUpdate&&(this._fireOnUpdate=!1,this.onUpdate(),this._fireUpdateEnd()))},setOpacity:function(E){if(this.opacity!=E)this.onOpacityChange(this.opacity=E)},onOpacityChange:function(){},_opacityChangeHandler:function(E){var C=q.set,y,v;if("css-transforms"===this._map.navigationMode){if(this._active){var A=this._active.childNodes;for(y=A.length-1;0<=y;y--)C(A[y],"opacity",E)}for(y=this._passives.length-
1;0<=y;y--)for(A=this._passives[y].childNodes,v=A.length-1;0<=v;v--)C(A[v],"opacity",E)}else for(A=this._div.childNodes,y=A.length-1;0<=y;y--)C(A[y],"opacity",E)},setExclusionAreas:function(E){this.exclusionAreas=E;if(this.loaded&&this._map&&this._map.loaded){var C=this._map.spatialReference,y=this.tileInfo,v=y.origin,A=y.lods,G=A[0].level,F=A[A.length-1].level,H,L,M;if(this.exclusionAreas&&this.exclusionAreas.length){this._exclusionsPerZoom=[];var Q=0;for(H=E.length;Q<H;Q++){var S=E[Q];if((M=S.geometry)&&
"extent"===M.type&&M.xmin<=M.xmax&&M.ymin<=M.ymax){if(!C.equals(M.spatialReference))if(C._canProject(M.spatialReference)){if(C.isWebMercator()){var I=w.lngLatToXY(M.xmin,M.ymin);M=w.lngLatToXY(M.xmax,M.ymax)}else I=w.xyToLngLat(M.xmin,M.ymin,!0),M=w.xyToLngLat(M.xmax,M.ymax,!0);M=new z(I[0],I[1],M[0],M[1],C)}else continue;var P=-1;if(S.minZoom&&-1!==S.minZoom)P=S.minZoom;else if(S.minScale&&-1!==S.minScale){var J=0;for(L=A.length;J<L;J++)if(A[J].scale<=S.minScale){P=A[J].level;break}}P=Math.max(P,
G);I=-1;if(S.maxZoom&&-1!==S.maxZoom)I=S.maxZoom;else if(S.maxScale&&-1!==S.maxScale)for(J=0,L=A.length;J<L;J++)if(A[J].scale<S.maxScale){I=A[J-1].level;break}else if(A[J].scale===S.maxScale){I=A[J].level;break}I=-1===I?F:Math.min(I,F);for(S=P;S<=I;S++){J=0;for(L=A.length;J<L;J++)if(A[J].level===S){var U=A[J];break}U&&(this._exclusionsPerZoom[S]||(this._exclusionsPerZoom[S]=[]),J=1/U.resolution/y.rows,L=1/U.resolution/y.cols,this._exclusionsPerZoom[S].push({rowFrom:Math.floor((v.y-M.ymax)*J),rowTo:Math.ceil((v.y-
M.ymin)*J),colFrom:Math.floor((M.xmin-v.x)*L),colTo:Math.ceil((M.xmax-v.x)*L)}))}}}}else this._exclusionsPerZoom=null;this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD)}},_isExcluded:function(E,C,y){var v;if(!this._exclusionsPerZoom)return!1;var A=this._exclusionsPerZoom[E];if(!A)return!1;var G=0;for(v=A.length;G<v;G++)if(E=A[G],C>=E.rowFrom&&C<E.rowTo&&y>=E.colFrom&&y<E.colTo)return!0;return!1}});l.setObject("layers.TiledMapServiceLayer",f,n);return f})},"dojox/collections/ArrayList":function(){define(["dojo/_base/kernel",
"dojo/_base/array","./_base"],function(f,B,l){l.ArrayList=function(e){var c=[];e&&(c=c.concat(e));this.count=c.length;this.add=function(u){c.push(u);this.count=c.length};this.addRange=function(u){if(u.getIterator)for(u=u.getIterator();!u.atEnd();)this.add(u.get());else for(var t=0;t<u.length;t++)c.push(u[t]);this.count=c.length};this.clear=function(){c.splice(0,c.length);this.count=0};this.clone=function(){return new l.ArrayList(c)};this.contains=function(u){for(var t=0;t<c.length;t++)if(c[t]==u)return!0;
return!1};this.forEach=function(u,t){f.forEach(c,u,t)};this.getIterator=function(){return new l.Iterator(c)};this.indexOf=function(u){for(var t=0;t<c.length;t++)if(c[t]==u)return t;return-1};this.insert=function(u,t){c.splice(u,0,t);this.count=c.length};this.item=function(u){return c[u]};this.remove=function(u){u=this.indexOf(u);0<=u&&c.splice(u,1);this.count=c.length};this.removeAt=function(u){c.splice(u,1);this.count=c.length};this.reverse=function(){c.reverse()};this.sort=function(u){u?c.sort(u):
c.sort()};this.setByIndex=function(u,t){c[u]=t;this.count=c.length};this.toArray=function(){return[].concat(c)};this.toString=function(u){return c.join(u||",")}};return l.ArrayList})},"dojox/collections/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(f,B,l){f=B.getObject("dojox.collections",!0);f.DictionaryEntry=function(e,c){this.key=e;this.value=c;this.valueOf=function(){return this.value};this.toString=function(){return String(this.value)}};f.Iterator=
function(e){var c=0;this.element=e[c]||null;this.atEnd=function(){return c>=e.length};this.get=function(){return this.atEnd()?null:this.element=e[c++]};this.map=function(u,t){return l.map(e,u,t)};this.reset=function(){c=0;this.element=e[c]}};f.DictionaryIterator=function(e){var c=[],u={},t;for(t in e)u[t]||c.push(e[t]);var d=0;this.element=c[d]||null;this.atEnd=function(){return d>=c.length};this.get=function(){return this.atEnd()?null:this.element=c[d++]};this.map=function(q,m){return l.map(c,q,
m)};this.reset=function(){d=0;this.element=c[d]}};return f})},"esri/layers/TileMap":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/io-query ../request ../urlUtils".split(" "),function(f,B,l,e,c,u,t){return f(null,{declaredClass:"esri.layers.TileMap",constructor:function(d){this.layer=d;this._tileMaps={}},getTile:function(d,q,m,a,h){d={id:a,level:d,row:q,col:m};q=this._getResamplingBudget();0<q?this._process({tile:d,requestedTile:d,callback:h,resamplingBudget:q}):
(h||this.callback).call(this,d,d)},statusOf:function(d,q,m){var a=this._getResamplingBudget();d={level:d,row:q,col:m};if(0===a)return 1;for(;0<=a;){q=this._tileToTileMap(d);if(!this._tileMaps[q.uid])return-1;q=this._tileMaps[q.uid];if(!q.promise.isFulfilled())return-1;if(this._isTileAvailable(d,q))return 1;d=this._parentTile(d);if(!d)break;a--}return 0},style:function(d,q){if(d.level!==q.level||d.row!==q.row||d.col!==q.col){var m=this.layer.tileInfo,a=m.lods,h=m.cols;m=m.rows;for(var n,r,k=a.length-
1;!n||!r;)n||a[k].level!==d.level||(n=a[k]),r||a[k].level!==q.level||(r=a[k]),k--;a=Math.round(n.resolution/r.resolution);d=q.col%a*-1*h;q=q.row%a*-1*m;a={width:h*a+"px",height:m*a+"px",margin:q+"px 0 0 "+d+"px","will-change":"transform"};d=0===d?0:-1*d;q=0===q?0:-1*q;a.clip="rect("+q+"px,"+(d+h)+"px,"+(q+m)+"px,"+d+"px)";return a}},_process:function(d){var q=d.tile,m=this._tileToTileMap(q),a=this._parentTile(q);this._getTileMap(m).then(B.hitch(this,function(h){m=h;this._isTileAvailable(q,m)?(d.callback||
this.callback).call(this,q,d.requestedTile):0<d.resamplingBudget&&a?(d.resamplingBudget--,d.tile=a,this._process(d)):(d.callback||this.callback).call(this,d.requestedTile,d.requestedTile)}),B.hitch(this,function(){(d.callback||this.callback).call(this,d.requestedTile,d.requestedTile)}))},_getTileMap:function(d){var q,m,a=null;if(this._tileMaps[d.uid]){d=this._tileMaps[d.uid];var h=d.promise}else{this._tileMaps[d.uid]=d;var n=new e;u({url:this._getTileMapUrl(d.level,d.row,d.col),handleAs:"json",content:{f:"json"},
callbackParamName:"callback",timeout:3E3,load:function(r){B.mixin(d,r);if(d.data&&0<d.data.length){m=d.data.length;if(1===m)a=d.data[0];else for(a=d.data[0],q=1;q<m;q++)if(d.data[q]!==a){a=null;break}null!==a&&(delete d.data,d.value=a);null==d.valid&&(d.valid=!0)}n.resolve(d)},error:function(r){r&&422===r.code?(B.mixin(d,{location:{top:d.row,left:d.col,width:8,height:8},valid:!0,value:0}),n.resolve(d)):n.reject()}});h=d.promise=n.promise}return h},_parentTile:function(d){var q=this.layer.tileInfo.lods,
m,a,h=null;l.some(q,function(n,r){return d.level===n.level?(m=n,a=r,!0):!1});0<a&&(q=q[a-1],h={id:d.id,level:q.level,row:Math.floor(d.row*m.resolution/q.resolution+.01),col:Math.floor(d.col*m.resolution/q.resolution+.01)});return h},_tileToTileMap:function(d){var q=8*Math.floor(d.row/8),m=8*Math.floor(d.col/8);return{uid:d.level+"_"+q+"_"+m,level:d.level,row:q,col:m}},_isTileAvailable:function(d,q){if(q.valid)if(void 0!==q.value)d=q.value;else{var m=q.location.left;var a=q.location.top;d=(d.row-a)*
q.location.width+(d.col-m);d=d<q.data.length?q.data[d]:0}else d=0;return d},_getTileMapUrl:function(d,q,m){var a=this.layer,h=a.tileServers,n=a._getToken(),r=a._url.query;d=(h?h[q%h.length]:a._url.path)+"/tilemap/"+d+"/"+q+"/"+m+"/8/8";r&&(d+="?"+c.objectToQuery(r));!n||r&&r.token||(d+=(-1===d.indexOf("?")?"?":"\x26")+"token\x3d"+n);return d=a.addTimestampToURL(d)},_getResamplingBudget:function(){var d=this.layer,q=0;d.resampling&&(q=d._resamplingTolerance,null===q||void 0===q)&&(q=d.tileInfo.lods.length);
return q}})})},"esri/layers/MapImageLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style ../kernel ../config ../sniff ../domUtils ../geometry/Point ../geometry/webMercatorUtils ./layer".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h,n){var r=f([n],{declaredClass:"esri.layers.MapImageLayer","-chains-":{constructor:"manual"},constructor:function(k){this.inherited(arguments,[null,k]);this._mapImages=[];var g=l.hitch;this._panStart=
g(this,this._panStart);this._pan=g(this,this._pan);this._extentChange=g(this,this._extentChange);this._zoom=g(this,this._zoom);this._zoomStart=g(this,this._zoomStart);this._scale=g(this,this._scale);this._resize=g(this,this._resize);B.connect(this,"onSuspend",this,this._onSuspend);B.connect(this,"onResume",this,this._onResume);this.loaded=!0;this.onLoad(this)},opacity:1,addImage:function(k){var g=this._mapImages.push(k);--g;k._idx=g;k._layer=this;this._div&&this._createImage(k,g)},removeImage:function(k){if(k){var g=
k._idx,b=this._mapImages;if(b[g]===k){delete b[g];if(g=k._node)this._clearEvents(g),g.e_idx=g.e_bl=g.e_tr=g.e_l=g.e_t=g.e_w=g.e_h=null,g.parentNode&&(g.parentNode.removeChild(g),c.destroy(g));k._node=k._idx=k._layer=null}}},removeAllImages:function(){var k=this._mapImages,g,b=k.length;for(g=0;g<b;g++){var w=k[g];w&&this.removeImage(w)}this._mapImages=[]},getImages:function(){var k=this._mapImages,g=[],b,w=k.length;for(b=0;b<w;b++)k[b]&&g.push(k[b]);return g},setOpacity:function(k){this.opacity!=k&&
(this._opacityChanged(this.opacity=k),this.onOpacityChange())},onOpacityChange:function(){},_opacityChanged:function(k){var g=this._div;if(g)if(!q("ie")||8<q("ie"))u.set(g,"opacity",k);else{var b=g.childNodes;var w=b.length;for(g=0;g<w;g++)u.set(b[g],"opacity",k)}},_createImage:function(k,g){var b=c.create("img");u.set(b,{position:"absolute"});1>k.opacity?u.set(b,"opacity",k.opacity):8>=q("ie")&&u.set(b,"opacity",this.opacity);!k.rotation||9>q("ie")||u.set(b,t._css.names.transform,t._css.rotate(360-
k.rotation));k._node=b;b.e_idx=g;b.e_layer=this;b.e_load=B.connect(b,"onload",r.prototype._imageLoaded);b.e_error=B.connect(b,"onerror",r.prototype._imageError);b.e_abort=B.connect(b,"onabort",r.prototype._imageError);b.src=k.href},_imageLoaded:function(k,g){k=g||k.target||k.currentTarget;g=k.e_layer;var b=g._mapImages[k.e_idx],w=g._map;w&&(w.__zooming||w.__panning||!g._sr)?g._standby.push(k):(g._clearEvents(k),b&&b._node===k&&w&&g._attach(b))},_imageError:function(k){k=k.target||k.currentTarget;
var g=k.e_layer,b=g._mapImages[k.e_idx];g._clearEvents(k);b&&(b._node=null)},_clearEvents:function(k){var g=B.disconnect;g(k.e_load);g(k.e_error);g(k.e_abort);k.e_load=k.e_error=k.e_abort=k.e_layer=null},_attach:function(k){var g=k.extent,b=g.spatialReference,w=this._sr,x=this._div,z=k._node,D=new a({x:g.xmin,y:g.ymin,spatialReference:b});g=new a({x:g.xmax,y:g.ymax,spatialReference:b});w.equals(b)||(w.isWebMercator()&&4326===b.wkid?(D=h.geographicToWebMercator(D),g=h.geographicToWebMercator(g)):b.isWebMercator()&&
4326===w.wkid&&(D=h.webMercatorToGeographic(D),g=h.webMercatorToGeographic(g)));z.e_bl=D;z.e_tr=g;k.visible&&(this._setPos(z,x._left,x._top),(this._active||x).appendChild(z))},_setPos:function(k,g,b){var w=k.e_bl,x=k.e_tr,z=this._map;w=z.toScreen(w);x=z.toScreen(x);g=w.x-g;b=x.y-b;var D=Math.abs(x.x-w.x);w=Math.abs(w.y-x.y);x={width:D+"px",height:w+"px"};var E=this._mapImages[k.e_idx];"css-transforms"===z.navigationMode?x[t._css.names.transform]=t._css.translate(g,b)+(E.rotation?" "+t._css.rotate(360-
E.rotation):""):(x.left=g+"px",x.top=b+"px");u.set(k,x);k.e_l=g;k.e_t=b;k.e_w=D;k.e_h=w},managedSuspension:!0,_setMap:function(k,g){this.inherited(arguments);var b=this._div=c.create("div",null,g),w=t._css.names,x={position:"absolute"},z=k.__visibleDelta;if(!q("ie")||8<q("ie"))x.opacity=this.opacity;"css-transforms"===k.navigationMode?(x[w.transform]=t._css.translate(z.x,z.y),u.set(b,x),b._left=z.x,b._top=z.y,x={position:"absolute",width:k.width+"px",height:k.height+"px",overflow:"visible"},this._active=
c.create("div",null,b),u.set(this._active,x),this._passive=c.create("div",null,b),u.set(this._passive,x)):(b._left=0,b._top=0,u.set(b,x));this._standby=[];w=this._mapImages;z=w.length;for(x=0;x<z;x++){var D=w[x];D._node||this._createImage(D,D._idx)}m.hide(b);return b},_unsetMap:function(k,g){this._disconnect();var b=this._div;if(b){var w=this._mapImages,x,z=w.length;for(x=0;x<z;x++){var D=w[x];if(D){var E=D._node;E&&(this._clearEvents(E),E.e_idx=E.e_bl=E.e_tr=E.e_l=E.e_t=E.e_w=E.e_h=null);D._node=
null}}g.removeChild(b);c.destroy(b)}this._map=this._div=this._sr=this._active=this._passive=this._standby=null;this.inherited(arguments)},_onSuspend:function(){this._disconnect();m.hide(this._div)},_onResume:function(k){k.firstOccurrence&&(this._sr=this._map.spatialReference,this._processStandbyList());k=this._map;var g=this._div,b=k.__visibleDelta;"css-transforms"===k.navigationMode&&(g._left=b.x,g._top=b.y,u.set(g,t._css.names.transform,t._css.translate(g._left,g._top)));this._redraw("css-transforms"===
k.navigationMode);this._connect(k);m.show(g)},_connect:function(k){if(!this._connections){var g=B.connect,b="css-transforms"===k.navigationMode;this._connections=[g(k,"onPanStart",this._panStart),g(k,"onPan",this._pan),g(k,"onExtentChange",this._extentChange),b&&g(k,"onZoomStart",this._zoomStart),b?g(k,"onScale",this._scale):g(k,"onZoom",this._zoom),b&&g(k,"onResize",this._resize)];b&&this._resize(k.extent,k.width,k.height)}},_disconnect:function(){this._connections&&(e.forEach(this._connections,
B.disconnect),this._connections=null)},_panStart:function(){this._panL=this._div._left;this._panT=this._div._top},_pan:function(k,g){k=this._div;k._left=this._panL+g.x;k._top=this._panT+g.y;"css-transforms"===this._map.navigationMode?u.set(k,t._css.names.transform,t._css.translate(k._left,k._top)):u.set(k,{left:k._left+"px",top:k._top+"px"})},_extentChange:function(k,g,b){b?this._redraw("css-transforms"===this._map.navigationMode):g&&this._pan(k,g);this._processStandbyList()},_processStandbyList:function(){var k,
g=this._standby;if(g&&g.length)for(k=g.length-1;0<=k;k--)this._imageLoaded(null,g[k]),g.splice(k,1)},_redraw:function(k){if(k){k=this._passive;var g=t._css.names;u.set(k,g.transition,"none");this._moveImages(k,this._active);u.set(k,g.transform,"none")}k=this._active||this._div;g=this._div._left;var b=this._div._top,w,x=k.childNodes.length;for(w=0;w<x;w++){var z=k.childNodes[w];this._setPos(z,g,b)}},_zoom:function(k,g,b){k=this._div;var w=k._left,x=k._top,z,D=k.childNodes.length;for(z=0;z<D;z++){var E=
k.childNodes[z];var C=E.e_w*g,y=E.e_h*g,v=(b.x-w-E.e_l)*(C-E.e_w)/E.e_w,A=(b.y-x-E.e_t)*(y-E.e_h)/E.e_h;v=isNaN(v)?0:v;A=isNaN(A)?0:A;u.set(E,{left:E.e_l-v+"px",top:E.e_t-A+"px",width:C+"px",height:y+"px"})}},_zoomStart:function(){this._moveImages(this._active,this._passive)},_moveImages:function(k,g){k=k.childNodes;var b=k.length;if(0<b)for(--b;0<=b;b--)g.appendChild(k[b])},_scale:function(k,g){var b=t._css.names,w=this._passive;u.set(w,b.transition,g?"none":b.transformName+" "+d.defaults.map.zoomDuration+
"ms ease");({})[b.transform]=t._css.matrix(k);u.set(w,b.transform,t._css.matrix(k))},_resize:function(k,g,b){u.set(this._active,{width:g+"px",height:b+"px"});u.set(this._passive,{width:g+"px",height:b+"px"})}});l.setObject("layers.MapImageLayer",r,t);return r})},"esri/layers/OpenStreetMapLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../urlUtils ../SpatialReference ../geometry/Extent ./TiledMapServiceLayer ./TileInfo".split(" "),function(f,B,l,e,c,u,t,d,q){f=f(d,{declaredClass:"esri.layers.OpenStreetMapLayer",
constructor:function(m){this.spatialReference=new u({wkid:102100});this.tileInfo=new q({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:0,scale:5.91657527591555E8,resolution:156543.033928},{level:1,scale:2.95828763795777E8,resolution:78271.5169639999},{level:2,scale:1.47914381897889E8,resolution:39135.7584820001},{level:3,scale:7.3957190948944E7,resolution:19567.8792409999},{level:4,scale:3.6978595474472E7,
resolution:9783.93962049996},{level:5,scale:1.8489297737236E7,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},
{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:.597164283559817},{level:19,scale:1128.497176,resolution:.298582141647617}]});this.fullExtent=new t({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,
spatialReference:{wkid:102100}});this.initialExtent=new t({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.tileServers=m&&m.tileServers||["//a.tile.openstreetmap.org","//b.tile.openstreetmap.org","//c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=m?m.displayLevels:null;this.copyright=m&&m.copyright||"Map data \u00a9 OpenStreetMap contributors, CC-BY-SA";this.loaded=!0;this.onLoad(this);(m=
m&&m.loadCallback)&&m(this)},getTileUrl:function(m,a,h){m=this.tileServers[a%this.serversLength]+"/"+m+"/"+h+"/"+a+".png";m=c.normalize(m);m=this.addTimestampToURL(m);return c.addProxy(m)}});B.setObject("layers.OpenStreetMapLayer",f,e);return f})},"esri/dijit/Popup":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/window dojo/Stateful dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/registry ../kernel ../lang ../domUtils ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/normalizeUtils ../InfoWindowBase ../PopupBase dojo/i18n!../nls/jsapi dojo/NodeList-dom ./PopupTemplate ./PopupRenderer".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E,C,y,v,A){f=f([y,v,d],{declaredClass:"esri.dijit.Popup",offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:!0,pagingControls:!0,pagingInfo:!0,keepHighlightOnHide:!1,popupWindow:!0,titleInBody:!0,anchor:"auto",visibleWhenEmpty:!0,hideDelay:1E3,location:null,constructor:function(G,F){this.initialize();B.mixin(this,G);this.domNode=m.byId(F);F=this._nls=B.mixin({},A.widgets.popup);G=this.domNode;h.add(G,"esriPopup");(this._isRTL=!r.isBodyLtr())&&
k.set(G,"direction","rtl");a.set(G,"innerHTML","\x3cdiv class\x3d'esriPopupWrapper' style\x3d'position: absolute;'\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'titlePane'\x3e\x3cdiv class\x3d'spinner hidden' title\x3d'"+F.NLS_searching+"...'\x3e\x3c/div\x3e\x3cdiv class\x3d'title'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton prev hidden' title\x3d'"+F.NLS_prevFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton next hidden' title\x3d'"+F.NLS_nextFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton maximize' title\x3d'"+
F.NLS_maximize+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton close' title\x3d'"+F.NLS_close+"'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer content'\x3e\x3cdiv class\x3d'contentPane'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'actionsPane'\x3e\x3cdiv class\x3d'actionList hidden'\x3e\x3ca title\x3d'"+F.NLS_zoomTo+"' class\x3d'action zoomTo' href\x3d'javascript:void(0);'\x3e\x3cspan\x3e"+F.NLS_zoomTo+"\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'pointer hidden'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'outerPointer hidden'\x3e\x3c/div\x3e");
this._sizers=c.query(".sizer",G);F=c.query(".titlePane",G)[0];this._title=c.query(".title",F)[0];this._prevFeatureButton=c.query(".prev",F)[0];this._nextFeatureButton=c.query(".next",F)[0];this._maxButton=c.query(".maximize",F)[0];this._spinner=c.query(".spinner",F)[0];this._contentPane=c.query(".contentPane",G)[0];this._positioner=c.query(".esriPopupWrapper",G)[0];this._pointer=c.query(".pointer",G)[0];this._outerPointer=c.query(".outerPointer",G)[0];this._actionList=c.query(".actionsPane .actionList",
G)[0];this._contentUpdateHandles={};this._eventConnections=[e.connect(c.query(".close",F)[0],"onclick",this,this.hide),e.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),e.connect(this._nextFeatureButton,"onclick",this,this.selectNext),e.connect(this._maxButton,"onclick",this,this._toggleSize),e.connect(c.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature),e.connect(this,"onClearFeatures",this,this._featuresCleared),e.connect(this,"onSelectionChange",this,this._featureSelected),
e.connect(this,"onDfdComplete",this,this._updateUI)];u("esri-touch")&&(G=x.setScrollable(this._contentPane),this._eventConnections.push(G[0],G[1]));this._toggleVisibility(!1)},onMaximize:function(){},onRestore:function(){},setMap:function(G){this.inherited(arguments);n.place(this.domNode,G.root);this.highlight&&this.enableHighlight(G);this._maxHeight=k.get(this._contentPane,"maxHeight")},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments)},setTitle:function(G){this.popupWindow&&
(w.isDefined(G)&&""!==G||(G="\x26nbsp;"),this.destroyDijits(this._title),this.place(G,this._title),this.isShowing&&(this.startupDijits(this._title),this.reposition()))},setContent:function(G){this.popupWindow&&(w.isDefined(G)&&""!==G||(G="\x26nbsp;"),this._destroyContent(),this.place(G,this._contentPane),this.isShowing&&(this._startupContent(),this.reposition()))},show:function(G,F){if(this.popupWindow)if(this._delayHide=!1,G){var H=this.map;G.spatialReference?(this.location=G,G=H.toScreen(G)):this.location=
H.toMap(G);var L=H._getFrameWidth();if(-1!==L&&(G.x%=L,0>G.x&&(G.x+=L),H.width>L))for(H=(H.width-L)/2;G.x<H;)G.x+=L;this._maximized?this.restore():this._setPosition(G);F&&F.closestFirst&&this.showClosestFirst(this.location);this.isShowing||(this._toggleVisibility(!0),this._followMap(),this.startupDijits(this._title),this._startupContent(),this.reposition(),this.showHighlight(),this.onShow())}else this._toggleVisibility(!0)},hide:function(){this.isShowing&&(this._toggleVisibility(!1),this._unfollowMap(),
this.keepHighlightOnHide||this.hideHighlight(),this.onHide())},resize:function(G,F){this.popupWindow&&(this._sizers.style({width:G+"px"}),k.set(this._contentPane,"maxHeight",F+"px"),this._maxHeight=F,this.isShowing&&this.reposition())},reposition:function(){this.popupWindow&&this.map&&this.location&&!this._maximized&&this.isShowing&&this._setPosition(this.map.toScreen(this.location))},addActions:function(G){return l.map(G,function(F){var H=n.create("a",{href:"javascript:void(0);",className:"action "+
F.className,title:F.title,innerHTML:F.title},this._actionList);e.connect(H,"onclick",F.callback);return{action:F,node:H}},this)},removeActions:function(G){l.forEach(G,function(F){n.destroy(F.node)})},getCurrentAnchor:function(){return this._anchor},maximize:function(){var G=this.map;if(G&&!this._maximized&&this.popupWindow){this._maximized=!0;var F=this._maxButton;h.remove(F,"maximize");h.add(F,"restore");a.set(F,"title",this._nls.NLS_restore);F=this.marginLeft;var H=this.marginTop,L=G.width-2*F;
G=G.height-2*H;k.set(this.domNode,{left:this._isRTL?null:F+"px",right:this._isRTL?F+"px":null,top:H+"px",bottom:null});k.set(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=k.get(this._sizers[0],"width");this._savedHeight=k.get(this._contentPane,"maxHeight");this._sizers.style({width:L+"px"});k.set(this._contentPane,{maxHeight:G-65+"px",height:G-65+"px"});this._showPointer("");this._unfollowMap();h.add(this.domNode,"esriPopupMaximized");this.onMaximize()}},restore:function(){if(this.map&&
this._maximized&&this.popupWindow){this._maximized=!1;var G=this._maxButton;h.remove(G,"restore");h.add(G,"maximize");a.set(G,"title",this._nls.NLS_maximize);k.set(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this.location);this._followMap();h.remove(this.domNode,"esriPopupMaximized");this.onRestore()}},startup:function(){},destroy:function(){this.map&&this.unsetMap();this.cleanup();this.isShowing&&this.hide();this.destroyDijits(this._title);
this._destroyContent();l.forEach(this._eventConnections,e.disconnect);n.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null},selectNext:function(){this.select(this.selectedIndex+1)},selectPrevious:function(){this.select(this.selectedIndex-1)},setFeatures:function(G,F){this._transientAnchor=
F&&F.anchor;this.inherited(arguments);this._updateUI()},clearFeatures:function(G){G||(this._transientAnchor=null);this.inherited(arguments)},postscript:null,_highlightSetter:function(G){var F=this.highlight,H=this.map;this.highlight=G;if(H&&G!==F)if(G){if(this.enableHighlight(H),G=this.features&&this.features[this.selectedIndex])this.updateHighlight(H,G),this.showHighlight()}else this.disableHighlight(H)},_pagingControlsSetter:function(G){var F=this.pagingControls,H=this.map;this.pagingControls=G;
H&&G!==F&&this._updatePagingControls()},_pagingInfoSetter:function(G){var F=this.pagingInfo,H=this.map;this.pagingInfo=G;H&&G!==F&&this.features&&this.features.length&&this._updatePagingInfo()},_popupWindowSetter:function(G){var F=this.popupWindow,H=this.map;this.popupWindow=G;H&&G!==F&&(G?(this._updateUI(),this._updateWindow()):(this.hide(),this.showHighlight()))},_anchorSetter:function(G){var F=this.anchor;this.anchor=G;this.map&&G!==F&&this.reposition()},_startupContent:function(){var G=this._contentPane;
this.startupDijits(G);l.forEach(this._getPopupRendererDijits(G),function(F){if(!this._contentUpdateHandles[F.id]){var H=F.on("content-update",B.hitch(this,function(){this.reposition()}));this._contentUpdateHandles[F.id]=H}},this)},_destroyContent:function(){var G=this._contentPane;l.forEach(this._getPopupRendererDijits(G),function(F){var H=this._contentUpdateHandles[F.id];H&&(H.remove(),delete this._contentUpdateHandles[F.id])},this);this.destroyDijits(G)},_getPopupRendererDijits:function(G){G=this.getDijits(G);
return G=l.filter(G,function(F){return F&&F.set&&/_PopupRenderer/.test(F.declaredClass)})},_featuresCleared:function(){this.setTitle("\x26nbsp;");this.setContent("\x26nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight()},_featureSelected:function(){this._updateUI();this._updateWindow()},_updateWindow:function(){var G=this.selectedIndex;if(0<=G){var F=this.features[G].getContent();if(!this.titleInBody&&F&&B.isString(F.id)){var H=g.byId(F.id);H&&H.set&&/_PopupRenderer/.test(H.declaredClass)&&
H.set("showTitle",!1)}this.setContent(F);this.updateHighlight(this.map,this.features[G]);this.showHighlight()}},_toggleVisibility:function(G){this._setVisibility(G);this.isShowing=G},_setVisibility:function(G){h.toggle(this.domNode,"esriPopupVisible",G);h.toggle(this.domNode,"esriPopupHidden",!G)},_waitAndHide:function(G){var F=this;this._delayHide=!0;setTimeout(function(){F._delayHide&&(F._delayHide=!1,F.hide())},G)},_followMap:function(){this._unfollowMap();var G=this.map;this._handles=[e.connect(G,
"onPanStart",this,this._onPanStart),e.connect(G,"onPan",this,this._onPan),e.connect(G,"onZoomStart",this,this._onZoomStart),e.connect(G,"onExtentChange",this,this._onExtentChange)]},_unfollowMap:function(){var G=this._handles;G&&(l.forEach(G,e.disconnect),this._handles=null)},_onPanStart:function(){var G=this.domNode.style;this._panOrigin={left:G.left,top:G.top,right:G.right,bottom:G.bottom}},_onPan:function(G,F){var H=this._panOrigin;G=F.x;F=F.y;var L=H.left,M=H.top,Q=H.right;H=H.bottom;L&&(L=parseFloat(L)+
G+"px");M&&(M=parseFloat(M)+F+"px");Q&&(Q=parseFloat(Q)-G+"px");H&&(H=parseFloat(H)-F+"px");k.set(this.domNode,{left:L,top:M,right:Q,bottom:H})},_onZoomStart:function(){this._setVisibility(!1)},_onExtentChange:function(G,F,H){H&&(this._setVisibility(!0),this.show(this._targetLocation||this.location));this._targetLocation=null},_toggleSize:function(){this._maximized?this.restore():this.maximize()},_getTargetAnchor:function(){return this._transientAnchor||this.anchor},_setPosition:function(G){var F=
G.x,H=G.y;G=this.offsetX||0;var L=this.offsetY||0,M=0,Q=0,S=this.map,I=S.position.x,P=S.position.y,J=S.width,U=S.height;S="Left";var Y="bottom",aa="right",la="top",T=r.getContentBox(this._positioner),N=T.w/2,K=T.h/2,W=k.get(this._sizers[0],"height")+this._maxHeight+k.get(this._sizers[2],"height"),da=W/2,fa=0,ha=0,ra=J,za=U,Da=F,va=H,Ga=this._getTargetAnchor().toLowerCase();if("auto"===Ga){if(Ga=t.getBox)Ga=Ga(),fa=Math.max(Ga.l,I),ra=Math.min(Ga.l+Ga.w,I+J),ha=Math.max(Ga.t,P),za=Math.min(Ga.t+Ga.h,
P+U),Da+=I,va+=P;I=va-ha>=W;P=za-va>=W;J=ra-Da>=T.w;T=Da-fa>=T.w;va-ha>da&&za-va>=da&&(J?(Y="",S="Left",la="",aa="right"):T&&(Y="",S="Right",la="",aa="left"));S&&Y&&Da-fa>N&&ra-Da>=N&&(I?(S="",Y="bottom",aa="",la="top"):P&&(S="",Y="top",aa="",la="bottom"));S&&Y&&(J&&I?(S="Left",Y="bottom",aa="right",la="top"):J&&P?(S="Left",Y="top",aa="right",la="bottom"):T&&P?(S="Right",Y="top",aa="left",la="bottom"):T&&I&&(S="Right",Y="bottom",aa="left",la="top"));this._anchor=la&&aa?la+"-"+aa:la||aa}else Y=S="",
-1!==Ga.indexOf("top")?Y="bottom":-1!==Ga.indexOf("bottom")&&(Y="top"),-1!==Ga.indexOf("left")?S="Right":-1!==Ga.indexOf("right")&&(S="Left"),this._anchor=this._getTargetAnchor();aa=Y+S;switch(aa){case "top":case "bottom":Q=14;break;case "Left":case "Right":M=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":Q=14,M=-16}k.set(this.domNode,{left:F+"px",top:H+"px",right:null,bottom:null});F={left:null,right:null,top:null,bottom:null};S?F[S.toLowerCase()]=M+G+"px":F.left=-N+
"px";Y?F[Y]=Q+L+"px":F.top=-K+"px";k.set(this._positioner,F);this._showPointer(aa)},_showPointer:function(G){h.remove(this._pointer,"top bottom right left topLeft topRight bottomRight bottomLeft hidden".split(" "));h.remove(this._outerPointer,["right","left","hidden"]);"Right"===G||"Left"===G?(G=G.toLowerCase(),h.add(this._outerPointer,G)):h.add(this._pointer,G)},_setPagerCallbacks:function(G,F,H){if(this.pagingControls&&(G!==this||this._pagerScope&&this._pagerScope!==this)&&G!==this._pagerScope){this._pagerScope=
G;G===this&&(F=this.selectPrevious,H=this.selectNext);var L=this._eventConnections;e.disconnect(L[1]);e.disconnect(L[2]);F&&(L[1]=e.connect(this._prevFeatureButton,"onclick",G,F));H&&(L[2]=e.connect(this._nextFeatureButton,"onclick",G,H))}},_getLocation:function(G){var F=G&&G.geometry;if(F)switch(F.type){case "point":var H=F;if(G.isAggregate()){G=G.getChildGraphics();var L=G[0];G=(L=L.geometry&&L.geometry.spatialReference)&&new E({points:l.map(G,function(M){M=M.geometry;return[M.x,M.y]}),spatialReference:L.toJson()});
L=C.getDenormalizedExtent(G)}break;case "multipoint":H=F.getPoint(0);L=C.getDenormalizedExtent(F);break;case "polyline":case "polygon":H=F.getPoint(0,0),L=C.getDenormalizedExtent(F)}return[H,L]},_zoomToFeature:function(G){G.preventDefault();var F=this.features,H=this.selectedIndex;G=this.map;if(F)if(H=this._getLocation(F[H]),F=H[0],H=H[1],F||(F=this.location),H&&H.intersects(this.location)||(this.location=F),H&&H.getWidth()&&H.getHeight())G.setExtent(H,!0);else{var L=G.getNumLevels();H=G.getLevel();
var M=G.getMaxZoom(),Q=this.zoomFactor||1;0<L?H!==M&&(L=H+Q,L>M&&(L=M),G.navigationManager._wheelZoom({value:L-H,mapPoint:F},!0)):G.navigationManager._wheelZoom({value:1/Math.pow(2,Q)*2,mapPoint:F},!0)}},_updatePagingControls:function(){var G=this._prevFeatureButton,F=this._nextFeatureButton,H=this.selectedIndex,L=this.features?this.features.length:0;this.pagingControls&&1<L?(0===H?h.add(G,"hidden"):h.remove(G,"hidden"),H===L-1?h.add(F,"hidden"):h.remove(F,"hidden")):(h.add(G,"hidden"),h.add(F,"hidden"))},
_updatePagingInfo:function(){var G=this.features?this.features.length:0,F=this._nls,H="\x26nbsp;";this.pagingInfo&&1<G&&F.NLS_pagingInfo&&(H=w.substitute({index:this.selectedIndex+1,total:G},F.NLS_pagingInfo));G&&(F=this.getSelectedFeature(),G=F.getInfoTemplate(),F=F.getTitle(),G&&!/esri\.InfoTemplate/.test(G.declaredClass)&&this.titleInBody||!F||(H=F+("\x26nbsp;"===H?"":" "+H)));this.setTitle(H)},_updateUI:function(){if(this.popupWindow){var G=this.features,F=this.deferreds,H=G?G.length:0,L=this._spinner,
M=this._actionList,Q=this._nls;this._updatePagingControls();this._updatePagingInfo();H?h.remove(M,"hidden"):h.add(M,"hidden");F&&F.length?G?h.remove(L,"hidden"):this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+Q.NLS_searching+"...\x3c/div\x3e"):h.add(L,"hidden");H||F&&F.length?this._delayHide=!1:(this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+Q.NLS_noInfo+".\x3c/div\x3e"),this.visibleWhenEmpty||this._waitAndHide(this.hideDelay))}}});B.setObject("dijit.Popup",f,b);return f})},
"esri/InfoWindowBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/dom-construct dojo/has dijit/registry ./kernel ./lang ./geometry/ScreenPoint".split(" "),function(f,B,l,e,c,u,t,d,q,m,a){f=f(null,{declaredClass:"esri.InfoWindowBase",constructor:function(){var h=B.hitch;this.__set_title=h(this,this.__set_title);this.__err_title=h(this,this.__err_title);this.__set_content=h(this,this.__set_content);this.__err_content=h(this,this.__err_content)},
setMap:function(h){this.map=h},unsetMap:function(h){delete this.map},setTitle:function(){},setContent:function(){},show:function(){},hide:function(){},resize:function(){},onShow:function(){},onHide:function(){},place:function(h,n){m.isDefined(h)?B.isObject(h)?u.place(h,n,"only"):n.innerHTML=h:n.innerHTML=""},startupDijits:function(h){this._processDijits(h)},destroyDijits:function(h){this._processDijits(h,!0)},getDijits:function(h){var n=[];h&&1===h.children.length&&(h=h.children[0])&&(n=(n=d.byNode(h))?
[n]:d.findWidgets(h));return n},_processDijits:function(h,n){h=this.getDijits(h);l.forEach(h,function(r){if(n){if(r._started&&!r._destroyed)try{r.destroyRecursive?r.destroyRecursive():r.destroy&&r.destroy()}catch(k){}}else if(!r._started)try{r.startup()}catch(k){}})},__registerMapListeners:function(){this.__unregisterMapListeners();var h=this.map;this.__handles=[e.connect(h,"onPan",this,this.__onMapPan),e.connect(h,"onZoomStart",this,this.__onMapZmStart),e.connect(h,"onExtentChange",this,this.__onMapExtChg)]},
__unregisterMapListeners:function(){var h=this.__handles;h&&(l.forEach(h,e.disconnect,e),this.__handles=null)},__onMapPan:function(h,n){this.move(n,!0)},__onMapZmStart:function(){this.__mcoords=this.mapCoords||this.map.toMap(new a(this.coords));this.hide(null,!0)},__onMapExtChg:function(h,n,r){h=this.map;var k=this.mapCoords;k?this.show(k,null,!0):(n=r?h.toScreen(this.__mcoords):this.coords.offset(n&&n.x||0,n&&n.y||0),this.show(n,null,!0))},__setValue:function(h,n){this[h].innerHTML="";var r="_dfd"+
h,k=this[r];k&&-1===k.fired&&(k.cancel(),this[r]=null);m.isDefined(n)&&(n instanceof c?(this[r]=n,n.addCallbacks(this["__set"+h],this["__err"+h])):this.__render(h,n))},__set_title:function(h){this._dfd_title=null;this.__render("_title",h)},__err_title:function(h){this._dfd_title=null},__set_content:function(h){this._dfd_content=null;this.__render("_content",h)},__err_content:function(h){this._dfd_content=null},__render:function(h,n){var r=this[h];this.place(n,r);this.isShowing&&(this.startupDijits(r),
"_title"===h&&this._adjustContentArea&&this._adjustContentArea())}});return q.InfoWindowBase=f})},"esri/PopupBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/_base/Deferred dojo/has ./kernel ./graphic ./geometry/Point ./geometry/jsonUtils ./geometry/mathUtils ./geometry/webMercatorUtils ./symbols/SimpleMarkerSymbol ./symbols/SimpleLineSymbol ./symbols/CartographicLineSymbol ./symbols/SimpleFillSymbol ./tasks/query ./Evented ./PopupInfo".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w){function x(z){return"sizeInfo"===z.type}f=f(w,{declaredClass:"esri.PopupBase",_featureLayers:{},_updateEndHandles:[],_mapLevelChangeHandle:null,_evtMap:{"set-features":!0,"clear-features":!0,"selection-change":!0,"dfd-complete":!0},onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){},initialize:function(){this.count=0;this.selectedIndex=-1;this.on("clear-features",B.hitch(this,this._resetUpdateEndListeners));
this.on("dfd-complete",B.hitch(this,this._processFeatures));this.on("set-features",B.hitch(this,this._processFeatures));this.on("selection-change",B.hitch(this,this._checkFeatureResolution))},cleanup:function(){this.features=this.deferreds=null;this._resetUpdateEndListeners();this._untrackMapLevelChange()},setFeatures:function(z){if(z&&z.length){this.clearFeatures(!0);var D,E;z[0]instanceof c?E=z:D=z;D?this._updateFeatures(null,D):(this.deferreds=E,E=E.slice(0),l.forEach(E,function(C){C.addBoth(B.hitch(this,
this._updateFeatures,C))},this))}},clearFeatures:function(z){this.features=this.deferreds=this._marked=null;this.count=0;var D=this.selectedIndex;this.selectedIndex=-1;if(-1<D)this.onSelectionChange();this.onClearFeatures({isIntermediate:!!z})},getSelectedFeature:function(){var z=this.features;if(z)return z[this.selectedIndex]},select:function(z){0>z||z>=this.count||(this.selectedIndex=z,this.onSelectionChange())},enableHighlight:function(z){this._highlighted=z.graphics.add(new d(new q(0,0,z.spatialReference)));
this._highlighted.attr("data-popup-highlight","");this._highlighted.hide();this._trackMapLevelChange(z);this.markerSymbol||(z=this.markerSymbol=new n,z.setStyle(n.STYLE_TARGET),z._setDim(16,16,0),z.setOutline(new k(r.STYLE_SOLID,new e([0,255,255]),2,k.CAP_ROUND,k.JOIN_ROUND)),z.setColor(new e([0,0,0,0])));this.lineSymbol||(this.lineSymbol=new r(r.STYLE_SOLID,new e([0,255,255]),2));this.fillSymbol||(this.fillSymbol=new g(g.STYLE_NULL,new r(r.STYLE_SOLID,new e([0,255,255]),2),new e([0,0,0,0])));this.clusterFillSymbol||
(this.clusterFillSymbol=new g(g.STYLE_SOLID,new r(r.STYLE_SOLID,new e([0,255,255]),1.33),null))},disableHighlight:function(z){var D=this._highlighted;D&&(D.hide(),z.graphics.remove(D),delete this._highlighted);this._untrackMapLevelChange();this.markerSymbol=this.lineSymbol=this.fillSymbol=null},showHighlight:function(){var z=this.features&&this.features[this.selectedIndex];this._highlighted&&z&&z.geometry&&this._highlighted.show()},hideHighlight:function(){this._highlighted&&this._highlighted.hide()},
updateHighlight:function(z,D){var E=D.geometry,C=this._highlighted;if(E&&C){C.hide();!C._graphicsLayer&&z&&z.graphics.add(C);C.setGeometry(m.fromJson(E.toJson()));switch(E.type){case "point":case "multipoint":var y=D.getLayer(),v=D.symbol||y&&y._getSymbol(D);if(y&&v){var A;E=v.xoffset||0;var G=v.yoffset||0,F=v.angle||0;switch(v.type){case "simplemarkersymbol":var H=A=v.size||0;break;case "picturemarkersymbol":H=v.width||0;A=v.height||0;break;case "textsymbol":H=A=v.font&&v.font.size||0}var L=D.symbol?
null:y._getRenderer(D);(y=this._getSizeInfo(L))?z=D=L.getSize(D,{sizeInfo:y,shape:v.style,resolution:z&&z.getResolutionInMeters&&z.getResolutionInMeters()}):null!=D.size?z=D=D.size:(z=H,D=A);L=this.markerSymbol;z&&D&&(E&&(E=E/H*z),G&&(G=G/A*D),L._setDim(z+4,D+4,0));L.setOffset(E,G);L.setAngle(F)}break;case "polyline":L=this.lineSymbol;break;case "polygon":L=this.fillSymbol}C.setSymbol(L)}else C&&C.hide()},showClosestFirst:function(z){var D=this.features;if(D&&D.length){if(1<D.length){var E,C=Infinity,
y=-1,v,A=a.getLength,G=z.spatialReference;z=z.normalize();for(E=D.length-1;0<=E;E--)if(v=D[E].geometry){var F=v.spatialReference;var H=0;try{var L="point"===v.type?v:v.getExtent().getCenter();L=L.normalize();G&&F&&!G.equals(F)&&G._canProject(F)&&(L=G.isWebMercator()?h.geographicToWebMercator(L):h.webMercatorToGeographic(L));H=A(z,L)}catch(M){}0<H&&H<C&&(C=H,y=E)}0<y&&(D.splice(0,0,D.splice(y,1)[0]),this.select(0))}}else this.deferreds&&(this._marked=z)},_trackMapLevelChange:function(z){this._untrackMapLevelChange();
this._mapLevelChangeHandle=z.on("extent-change",B.hitch(this,function(D){D.levelChange&&this._checkFeatureResolution()}))},_untrackMapLevelChange:function(){this._mapLevelChangeHandle&&(this._mapLevelChangeHandle.remove(),this._mapLevelChangeHandle=null)},_unbind:function(z){z=l.indexOf(this.deferreds,z);if(-1!==z)return this.deferreds.splice(z,1),this.deferreds.length?1:(this.deferreds=null,2)},_fireComplete:function(z){var D=this._marked;D&&(this._marked=null,this.showClosestFirst(D));this.onDfdComplete(z)},
_updateFeatures:function(z,D){if(z){if(this.deferreds&&(z=this._unbind(z)))if(D&&D instanceof Error){if(this._fireComplete(D),2===z)this.onSetFeatures()}else if(D&&D.length)if(this.features){if(D=l.filter(D,function(E){return-1===l.indexOf(this.features,E)},this),this.features=this.features.concat(D),this.count=this.features.length,this._fireComplete(),2===z)this.onSetFeatures()}else{this.features=D;this.count=D.length;this.selectedIndex=0;this._fireComplete();if(2===z)this.onSetFeatures();this.select(0)}else if(this._fireComplete(),
2===z)this.onSetFeatures()}else this.features=D,this.count=D.length,this.selectedIndex=0,this.onSetFeatures(),this.select(0)},_getSizeInfo:function(z){return z?z.sizeInfo||l.filter(z.visualVariables,x)[0]:null},_resetUpdateEndListeners:function(){this._featureLayers={};l.forEach(this._updateEndHandles,function(z){z.remove()});this._updateEndHandles=[]},_processFeatures:function(){l.forEach(this.features,function(z){(z=z.getLayer())&&!this._featureLayers[z.id]&&(1===z.currentMode||0===z.currentMode&&
6===z.mode)&&z.objectIdField&&z.hasXYFootprint&&z.queryFeatures&&(this._featureLayers[z.id]=z,z=z.on("update-end",B.hitch(this,this._fLyrUpdateEndHandler)),this._updateEndHandles.push(z))},this)},_fLyrUpdateEndHandler:function(z){if(!z.error){var D=this,E=z.target,C=E.getSelectedFeatures(),y=0===E.currentMode&&6===E.mode,v={},A=[];l.forEach(this.features,function(G){if(G.getLayer()===E){var F=G.attributes[E.objectIdField];v[F]=G;A.push(F)}});A.length&&(z=new b,z.objectIds=A,E.queryFeatures(z,function(G){l.forEach(G.features,
function(F){var H=v[F.attributes[E.objectIdField]],L=!1;H.geometry!==F.geometry||E.hasWebGLSurface()?(H.setGeometry(F.geometry),L=!0):y&&C&&-1!==l.indexOf(C,F)&&(L=!0);L&&this._highlighted&&H===this.getSelectedFeature()&&this._highlighted.setGeometry(F.geometry)},D)}))}},_checkFeatureResolution:function(){var z=this.getSelectedFeature(),D=this.map;if(z&&D){var E=z.getLayer();if(E){var C=z.getResolution();2===E.currentMode&&z.geometry&&C&&C>D.getResolution()&&(D=D.getResolutionForPopup(),(E=this._refetchFeature(z,
D,E))&&E.then(B.hitch(this,this._updateFeatureResolution,z,D)))}}},_refetchFeature:function(z,D,E){if(z=this._createQueryForCustomResolution(z,D,E))return E.queryFeatures(z).then(function(C){return C&&C.features[0]})},_createQueryForCustomResolution:function(z,D,E){E=E.objectIdField;var C=z.attributes;C=C&&E&&C[E];if(null==C)return null;var y=new b;y.objectIds=[C];y.maxAllowableOffset=D;y.outFields=[E];y.outSpatialReference=z.geometry.spatialReference;return y},_updateFeatureResolution:function(z,
D,E){z.getResolution()!==D&&(z.setResolution(D),z.setGeometry(E.geometry),this._highlighted&&z===this.getSelectedFeature()&&this._highlighted.setGeometry(z.geometry))}});return t.PopupBase=f})},"esri/plugins/popupManager":function(){define(["../PopupManager"],function(f){return{add:function(B,l){B.popupManager||(B.popupManager=new f(l),B.popupManager.setMap(B))},remove:function(B){var l=B.popupManager;l&&(l.unsetMap(),B.popupManager=void 0)}}})},"esri/PopupManager":function(){define("./geometry/Extent ./geometry/ScreenPoint ./kernel ./layerUtils ./tasks/query dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/lang esri/sniff dojo/on dojo/promise/all dojo/Stateful require".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k){var g;d=d(r,{declaredClass:"esri.PopupManager",enabled:!1,map:null,_mapClickHandle:null,_featureLayersCache:{},constructor:function(b){this._mapClickHandler=m.hitch(this,this._mapClickHandler)},setMap:function(b){if(this.map)if(b!==this.map)this.unsetMap();else return;this.map=b;this._setupClickHandler()},unsetMap:function(){this.map&&(this.map=null);this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null)},getMapLayer:function(b){var w;
if(b&&(w=b.getLayer())&&(b=w.id,this._featureLayersCache[b])){var x=b.lastIndexOf("_");-1<x&&(b=b.substring(0,x),w=this.map.getLayer(b))}return w},_enabledSetter:function(b){this.enabled=b;this._setupClickHandler()},_setupClickHandler:function(){this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null);this.enabled&&this.map&&(this._mapClickHandle=this.map.on("click",this._mapClickHandler))},_mapClickHandler:function(b){var w=this.map.infoWindow,x=b.graphic;w&&this.map.loaded&&
(w.clearFeatures&&w.setFeatures?this._showPopup(b):x&&x.getInfoTemplate()&&this._showInfoWindow(x,b.mapPoint))},_showPopup:function(b){var w=this.map,x=w.infoWindow,z=this,D=[],E=[w.graphics].concat(t.map(w.graphicsLayerIds,w.getLayer,w));t.forEach(E,function(v){var A=v.getFeatureReduction&&v.getFeatureReduction();v&&v.loaded&&v.infoTemplate&&!v.suspended&&(!A||!z._isReductionEnabled(v)||A.infoTemplate&&!A.disablePopup)&&D.push(v)});var C=[];t.forEach(w.layerIds,function(v){(v=w.getLayer(v))&&v.loaded&&
!v.suspended&&(z._isImageServiceLayer(v)&&v.infoTemplate?D.push(v):"esri.layers.WMSLayer"===v.declaredClass&&v.getFeatureInfoURL?D.push(v):"esri.layers.ArcGISDynamicMapServiceLayer"!==v.declaredClass&&"esri.layers.ArcGISTiledMapServiceLayer"!==v.declaredClass||!v.infoTemplates||C.push(v))});var y=w.getResolutionForPopup();this._getSubLayerFeatureLayers(C,y).then(function(v){D=D.concat(v);v=b.graphic&&b.graphic.getParentGraphic()||b.graphic;var A=null;v&&v.getInfoTemplate()&&!z._isImageServiceLayer(v.getLayer())&&
(A=v);if(D.length||A){var G=z._calculateClickTolerance(D),F=b.screenPoint;v=w.toMap(new B(F.x-G,F.y+G));G=w.toMap(new B(F.x+G,F.y-G));var H=new f(v.x,v.y,G.x,G.y,w.spatialReference);if(H=H.intersects(w.extent)){var L=new c,M=!!A,Q=!0;v=t.map(D,function(S){L.timeExtent=S.useMapTime?w.timeExtent:null;var I=z._isReductionEnabled(S);S=I?S.getFeatureReductionLayer():S;var P=z._featureLayersCache[S.id];if(z._isImageServiceLayer(S)){L.geometry=b.mapPoint;Q=!1;var J={rasterAttributeTableFieldPrefix:"Raster.",
returnDomainValues:!0};z._isTiledImageServiceLayer(S)?J=S.fetchPopupFromTiles(L):(J=S.queryVisibleRasters(L,J),J.addCallback(function(){var Y=S.getVisibleRasters();M=M||0<Y.length;return Y}))}else if("esri.layers.WMSLayer"===S.declaredClass){J=new q;var U=S._getPopupGraphic(w,b.screenPoint);U?(J.resolve([U]),M=!0):J.resolve([])}else P||"function"===typeof S.queryFeatures&&(0===S.currentMode||1===S.currentMode)?(L.geometry=H,J=S.queryFeatures(L),J.addCallback(function(Y){var aa=[];t.forEach(Y.features,
function(la){la.visible&&(aa.push(la),P&&la.setResolution(y))});M=M||0<aa.length;return aa})):(J=new q,U=t.filter(S.graphics,function(Y){return Y&&Y.visible&&H.intersects(Y.geometry)}),I&&z._isParentLayer(S,A)&&(I=z._findGraphicById(U,A,"cluster_id"))&&(A=I),M=M||0<U.length,J.resolve(U));return J});A&&(G=new q,G.resolve([A]),v.unshift(G));t.some(v,function(S){return!S.isFulfilled()})||M?(x.setFeatures(v),x.show(b.mapPoint,{closestFirst:Q})):(x.hide(),x.clearFeatures())}}})},_getSubLayerFeatureLayers:function(b,
w,x){w=w||null;var z=x||new q,D=[];x=b.length;var E=this.map.getScale(),C=!1,y=this,v=0;a:for(;v<x;v++){var A=b[v],G=A.dynamicLayerInfos||A.layerInfos;if(G){var F=null;A._params&&(A._params.layers||A._params.dynamicLayers)&&(F=A.visibleLayers);F=e._getVisibleLayers(G,F);for(var H=e._getLayersForScale(E,G),L=G.length,M=0;M<L;M++){var Q=G[M],S=Q.id,I=A.infoTemplates[S];if(!Q.subLayerIds&&I&&I.infoTemplate&&-1<t.indexOf(F,S)&&-1<t.indexOf(H,S)){if(!g){C=!0;break a}var P=A.id+"_"+S,J=this._featureLayersCache[P];
J&&J.loadError||(J||((J=I.layerUrl)||(J=Q.source?this._getLayerUrl(A.url,"/dynamicLayer"):this._getLayerUrl(A.url,S)),J=new g(J,{parentLayer:A,id:P,drawMode:!1,mode:g.MODE_SELECTION,outFields:this._getOutFields(I.infoTemplate),resourceInfo:I.resourceInfo,source:Q.source}),this._featureLayersCache[P]=J),J.setDefinitionExpression(A.layerDefinitions&&A.layerDefinitions[S]),J.setGDBVersion(A.gdbVersion),J.setInfoTemplate(I.infoTemplate),J.setMaxAllowableOffset(w),J.setUseMapTime(!!A.useMapTime),A.layerDrawingOptions&&
A.layerDrawingOptions[S]&&A.layerDrawingOptions[S].renderer&&J.setRenderer(A.layerDrawingOptions[S].renderer),D.push(J))}}}}if(C){var U=new q;k(["./layers/FeatureLayer"],function(aa){g=aa;U.resolve()});U.then(function(){y._getSubLayerFeatureLayers(b,w,z)})}else{var Y=[];t.forEach(D,function(aa){if(!aa.loaded){var la=new q;h.once(aa,"load, error",function(){la.resolve()});Y.push(la.promise)}});Y.length?n(Y).then(function(){D=t.filter(D,function(aa){return!aa.loadError&&aa.isVisibleAtScale(E)});z.resolve(D)}):
(D=t.filter(D,function(aa){return aa.isVisibleAtScale(E)}),z.resolve(D))}return z.promise},_getLayerUrl:function(b,w){var x=b.indexOf("?");return-1===x?b+"/"+w:b.substring(0,x)+"/"+w+b.substring(x)},_getOutFields:function(b){var w=b.info&&b.info.fieldInfos;if(w&&w.length&&"esri.dijit.PopupTemplate"===b.declaredClass){var x=[];t.forEach(w,function(z){var D=z.fieldName&&z.fieldName.toLowerCase();D&&"shape"!==D&&0!==D.indexOf("relationships/")&&x.push(z.fieldName)})}else x=["*"];return x},_calculateClickTolerance:function(b){var w=
a("esri-touch")?9:6,x,z;t.forEach(b,function(D){if(x=D.renderer)"esri.renderer.SimpleRenderer"===x.declaredClass?((z=x.symbol)&&z.xoffset&&(w=Math.max(w,Math.abs(z.xoffset))),z&&z.yoffset&&(w=Math.max(w,Math.abs(z.yoffset)))):"esri.renderer.UniqueValueRenderer"!==x.declaredClass&&"esri.renderer.ClassBreaksRenderer"!==x.declaredClass||t.forEach(x.infos,function(E){(z=E.symbol)&&z.xoffset&&(w=Math.max(w,Math.abs(z.xoffset)));z&&z.yoffset&&(w=Math.max(w,Math.abs(z.yoffset)))})});return w},_showInfoWindow:function(b,
w){var x=this.map.infoWindow,z=b.geometry;w=z&&"point"===z.type?z:w;z=b.getContent();x.setTitle(b.getTitle());z&&m.isString(z.id)&&(b=u.byId(z.id))&&b.set&&/_PopupRenderer/.test(b.declaredClass)&&b.set("showTitle",!1);x.setContent(z);x.show(w)},_findGraphicById:function(b,w,x){var z,D=(w=w.attributes)&&w[x];t.some(b,function(E){var C=E.attributes;C&&C[x]===D&&(z=E);return!!z});return z},_isParentLayer:function(b,w){w=w&&w.getLayer();return b&&w===b},_isReductionEnabled:function(b){return b&&b.isFeatureReductionActive&&
b.isFeatureReductionActive()},_isImageServiceLayer:function(b){return"esri.layers.ArcGISImageServiceLayer"===b.declaredClass||"esri.layers.ArcGISImageServiceVectorLayer"===b.declaredClass||"esri.layers.RasterXLayer"===b.declaredClass},_isTiledImageServiceLayer:function(b){return"esri.layers.RasterXLayer"===b.declaredClass}});return l.PopupManager=d})},"esri/MapNavigationManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/event dojo/mouse dojo/keys dijit/focus ./kernel ./MouseEvents ./TouchEvents ./PointerEvents ./config ./sniff ./lang ./fx ./graphic ./tileUtils ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./symbols/SimpleFillSymbol".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E,C){var y=e.connect,v=e.disconnect,A=r("chrome"),G=r("safari"),F=[t.NUMPAD_PLUS,61,187,t.NUMPAD_MINUS,173,189,t.UP_ARROW,t.NUMPAD_8,t.RIGHT_ARROW,t.NUMPAD_6,t.DOWN_ARROW,t.NUMPAD_2,t.LEFT_ARROW,t.NUMPAD_4,t.PAGE_UP,t.NUMPAD_9,t.PAGE_DOWN,t.NUMPAD_3,t.END,t.NUMPAD_1,t.HOME,t.NUMPAD_7];f=f(null,{declaredClass:"esri.MapNavigationManager",eventModel:"",constructor:function(H,L){this.map=H;B.mixin(this,L);L=H.__container;r("esri-pointer")?(this.pointerEvents=
new h(L,{map:H}),this.eventModel="pointer"):r("esri-touch")?(r("ios")||(this.mouseEvents=new m(L,{map:H})),this.touchEvents=new a(L,{map:H,mouseEvents:this.mouseEvents}),this.eventModel="touch"):(this.mouseEvents=new m(L,{map:H}),this.eventModel="mouse");this._zoomRect=new b(null,new C(n.defaults.map.zoomSymbol));this._keyDx=this._keyDy=0;this._adjustPinch=B.hitch(this,this._adjustPinch);this._adjustPinchEnd=B.hitch(this,this._adjustPinchEnd)},_panInit:function(H){var L=this.mouseEvents;u.isLeft(H)&&
this.map.isPan&&!H.shiftKey&&(this._dragOrigin=new x(0,0),B.mixin(this._dragOrigin,H.screenPoint),v(this._panStartHandle),v(this._panHandle),v(this._panEndHandle),this._panStartHandle=y(L,"onMouseDragStart",this,this._panStart),this._panHandle=y(L,"onMouseDrag",this,this._pan),this._panEndHandle=y(L,"onMouseUp",this,this._panEnd),A||G)&&(H.preventDefault(),d.curNode&&d.curNode.blur())},_panStart:function(H){this.map.setCursor("move");this.map.__panStart(H.screenPoint.x,H.screenPoint.y)},_pan:function(H){this.map.__pan(H.screenPoint.x-
this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y)},_panEnd:function(H){v(this._panStartHandle);v(this._panHandle);v(this._panEndHandle);this._panStartHandle=this._panHandle=this._panEndHandle=null;var L=this.map;L.__panning&&(L.__panEnd(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y),L.resetMapCursor())},_zoomInit:function(H){var L=this.map,M=this.pointerEvents||this.mouseEvents;(u.isLeft(H)||H.pointerType)&&L.isRubberBandZoom&&H.shiftKey&&(L.setCursor("crosshair"),this._dragOrigin=
B.mixin({},H.screenPoint),this._zoomDir=H.ctrlKey||H.metaKey?-1:1,this.pointerEvents?(this._zoomHandle=y(M,"onSwipeMove",this,this._zoom),this._zoomEndHandle=y(M,"onSwipeEnd",this,this._zoomEnd)):(this._zoomHandle=y(M,"onMouseDrag",this,this._zoom),this._zoomEndHandle=y(M,"onMouseUp",this,this._zoomEnd)),A&&H.preventDefault())},_zoom:function(H){var L=this.map,M=this._normalizeRect(H).offset(L.__visibleRect.x,L.__visibleRect.y);H=L.graphics;var Q=this._zoomRect;Q.geometry||L.setCursor("crosshair");
Q.geometry&&H.remove(Q,!0);var S=L.toMap(new x(M.x,M.y));M=L.toMap(new x(M.x+M.width,M.y+M.height));M=new D(S.x,S.y,M.x-S.x,S.y-M.y,L.spatialReference);M._originOnly=!0;Q.setGeometry(M);H.add(Q,!0)},_zoomEnd:function(H){var L=this._zoomRect,M=this.map,Q=M.extent,S=M.spatialReference;v(this._zoomHandle);v(this._zoomEndHandle);this._zoomHandle=this._zoomEndHandle=null;if(M._canZoom(this._zoomDir)&&L.getDojoShape()){M.graphics.remove(L);L.geometry=null;H=this._normalizeRect(H);H.x+=M.__visibleRect.x;
H.y+=M.__visibleRect.y;if(-1===this._zoomDir){var I=Q.getWidth();H=(I*M.width/H.width-I)/2;S=new z(Q.xmin-H,Q.ymin-H,Q.xmax+H,Q.ymax+H,S)}else Q=M.toMap({x:H.x,y:H.y+H.height}),H=M.toMap({x:H.x+H.width,y:H.y}),S=new z(Q.x,Q.y,H.x,H.y,S);M._extentUtil(null,null,S)}L.getDojoShape()&&M.graphics.remove(L,!0);this._zoomDir=0;M.resetMapCursor()},_wheelZoom:function(H,L){var M=this.map;if(!L){if(M.smartNavigation&&!H.shiftKey&&!M._isPanningOrZooming()){M.disableScrollWheelZoom();this._setScrollWheelPan(!0);
this._wheelPan(H);return}L=H.timeStamp;if(!k.isDefined(L)||0>=L)L=(new Date).getTime();if(100>(this._mwts?L-this._mwts:L))return;this._mwts=L}M._canZoom(H.value)&&M._extentUtil({numLevels:H.value,mapAnchor:H.mapPoint,screenAnchor:H.screenPoint})},_wheelPan:function(H){var L=this.map;if(H.shiftKey&&!L._isPanningOrZooming())this._setScrollWheelPan(!1),L.enableScrollWheelZoom(),this._wheelZoom(H);else{var M=0,Q=0;r("ff")?H.axis===H.HORIZONTAL_AXIS?M=-H.detail:Q=-H.detail:(M=H.wheelDeltaX,Q=H.wheelDeltaY);
L.translate(M,Q)}},_setScrollWheelPan:function(H){this.map.isScrollWheelPan=H;this.mouseEvents&&this.mouseEvents.enableMouseWheel(H);v(this._mwMacHandle);this._mwMacHandle=null;H&&(this._mwMacHandle=y(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelPan))},_recenter:function(H){H.shiftKey&&!this.map._isPanningOrZooming()&&this.map.centerAt(H.mapPoint)},_recenterZoom:function(H){H.shiftKey&&!this.map._isPanningOrZooming()&&(H.value=H.ctrlKey||H.metaKey?-1:1,this._wheelZoom(H,!0))},
_dblClickZoom:function(H){this.map._isPanningOrZooming()||(H.value=1,this._wheelZoom(H,!0))},_twoFingerTap:function(H){this.map._isPanningOrZooming()||(H.value=-1,this._wheelZoom(H,!0))},_keyDown:function(H){var L=H.keyCode,M=this.map;if(-1!==l.indexOf(F,L)){if(L===t.NUMPAD_PLUS||61===L||187===L)M._extentUtil({numLevels:1});else if(L===t.NUMPAD_MINUS||173===L||189===L)M._extentUtil({numLevels:-1});else{M.__panning||M.__panStart(0,0);switch(L){case t.UP_ARROW:case t.NUMPAD_8:this._keyDy+=10;break;
case t.RIGHT_ARROW:case t.NUMPAD_6:this._keyDx-=10;break;case t.DOWN_ARROW:case t.NUMPAD_2:this._keyDy-=10;break;case t.LEFT_ARROW:case t.NUMPAD_4:this._keyDx+=10;break;case t.PAGE_UP:case t.NUMPAD_9:this._keyDx-=10;this._keyDy+=10;break;case t.PAGE_DOWN:case t.NUMPAD_3:this._keyDx-=10;this._keyDy-=10;break;case t.END:case t.NUMPAD_1:this._keyDx+=10;this._keyDy-=10;break;case t.HOME:case t.NUMPAD_7:this._keyDx+=10;this._keyDy+=10;break;default:return}M.__pan(this._keyDx,this._keyDy)}c.stop(H)}},_keyEnd:function(H){var L=
this.map;L.__panning&&H.keyCode!==t.SHIFT&&(L.__panEnd(this._keyDx,this._keyDy),this._keyDx=this._keyDy=0)},_swipeInit:function(H){var L=this.map;L=L._zoomAnim||L._panAnim;if(H.shiftKey)return!1;L&&L._active&&(L.stop(),L._fire("onEnd",[L.node]));this._dragOrigin=new x(0,0);B.mixin(this._dragOrigin,H.screenPoint);v(this._swipeHandle);v(this._swipeEndHandle);this._swipeHandle=y(this.touchEvents||this.pointerEvents,"onSwipeMove",this,this._swipe);this._swipeEndHandle=y(this.touchEvents||this.pointerEvents,
"onSwipeEnd",this,this._swipeEnd)},_swipe:function(H){var L=this.map;L.__panning?(this._panX=H.screenPoint.x,this._panY=H.screenPoint.y,L.__pan(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y)):(L.setCursor("move"),L.__panStart(H.screenPoint.x,H.screenPoint.y))},_swipeEnd:function(H){v(this._swipeHandle);v(this._swipeEndHandle);this._swipeHandle=this._swipeEndHandle=null;var L=this.map;L.__panning&&(L.resetMapCursor(),L.__panEnd(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-
this._dragOrigin.y))},_pinchInit:function(H){var L=this.map,M=L._zoomAnim||L._panAnim;M&&M._active?(M.stop(),M._fire("onEnd",[M.node])):L.__panning&&(H.screenPoint=new x(this._panX,this._panY),H.mapPoint=L.toMap(H.screenPoint),this._swipeEnd(H));v(this._pinchHandle);v(this._pinchEndHandle);this._pinchHandle=y(this.touchEvents||this.pointerEvents,"onPinchMove",this,this._pinch);this._pinchEndHandle=y(this.touchEvents||this.pointerEvents,"onPinchEnd",this,this._pinchEnd)},_pinch:function(H){var L=this.map;
if(H.screenPoints){this.currLength=E.getLength(H.screenPoints[0],H.screenPoints[1]);if(L.__zooming){var M=this.currLength/this._length;this._zoomStartExtent=this.__scaleExtent(L.extent,M,this._dragOrigin);L.__zoom(this._zoomStartExtent,M,this._dragOrigin)}else this._dragOrigin=new x((H.screenPoints[0].x+H.screenPoints[1].x)/2,(H.screenPoints[0].y+H.screenPoints[1].y)/2),this._length=this.currLength,L.__zoomStart(L.extent,this._dragOrigin);this._pinchScale=M;L._fireOnScale(this.currLength/this._length,
this._dragOrigin,!0)}},_pinchEnd:function(H){H=this.map;v(this._pinchHandle);v(this._pinchEndHandle);this._pinchHandle=this._pinchEndHandle=null;this._pinchScale=0;if(H.__zooming&&null===H._zoomAnim){var L=this.currLength/this._length,M=H.extent.getWidth();this._zoomAnimAnchor=H.toMap(this._dragOrigin);this._zoomStartExtent=this.__scaleExtent(H.extent,1/L,this._zoomAnimAnchor);if(H.__tileInfo){var Q=w.getCandidateTileInfo(H,H.__tileInfo,this._zoomStartExtent),S=H.__getExtentForLevel(Q.lod.level,this._zoomAnimAnchor),
I=H.getMinZoom(),P=H.getMaxZoom(),J=S.extent;S=S.lod;var U=M/J.getWidth(),Y=Q.lod.level;1>L?U>L&&Y--:U<L&&Y++;Y<I?Y=I:Y>P&&(Y=P);Y!==Q.lod.level&&(S=H.__getExtentForLevel(Y,this._zoomAnimAnchor),J=S.extent,S=S.lod);this._zoomEndExtent=J;this._zoomEndLod=S;H._zoomAnim=g.animateRange({range:{start:M/this._zoomStartExtent.getWidth(),end:U},duration:n.defaults.map.zoomDuration,rate:n.defaults.map.zoomRate,onAnimate:this._adjustPinch,onEnd:this._adjustPinchEnd});H._zoomAnim.play();H._fireOnScale(H.extent.getWidth()/
this._zoomEndExtent.getWidth(),this._dragOrigin)}else this._zoomEndExtent=this._zoomStartExtent,H._fireOnScale(H.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin),this._adjustPinchEnd()}},_adjustPinch:function(H){var L=this.__scaleExtent(this.map.extent,H,this._zoomAnimAnchor);this.map.__zoom(L,H,this._dragOrigin)},_adjustPinchEnd:function(){var H=this.map,L=H.extent.getWidth()/this._zoomEndExtent.getWidth(),M=this.__scaleExtent(H.extent,1/L,this._zoomAnimAnchor),Q=this._dragOrigin,
S=this._zoomEndLod;this._zoomStartExtent=this._zoomEndExtent=this._zoomEndLod=this._dragOrigin=H._zoomAnim=this._zoomAnimAnchor=null;H.__zoomEnd(M,L,Q,S,!0)},__scaleExtent:function(H,L,M){M=M||H.getCenter();L=H.expand(L);var Q=H.xmin-(L.getWidth()-H.getWidth())*(M.x-H.xmin)/H.getWidth();M=H.ymax-(L.getHeight()-H.getHeight())*(M.y-H.ymax)/H.getHeight();return new z(Q,M-L.getHeight(),Q+L.getWidth(),M,H.spatialReference)},_normalizeRect:function(H){H=H.screenPoint;var L=this._dragOrigin.x,M=this._dragOrigin.y;
H=new D((H.x<L?H.x:L)-this.map.__visibleRect.x,(H.y<M?H.y:M)-this.map.__visibleRect.y,Math.abs(H.x-L),Math.abs(H.y-M));delete H.spatialReference;0===H.width&&(H.width=1);0===H.height&&(H.height=1);return H},setImmediateClick:function(H){switch(this.eventModel){case "mouse":this.mouseEvents.setImmediateClick(H);break;case "touch":this.touchEvents.setImmediateTap(H);this.mouseEvents&&this.mouseEvents.setImmediateClick(H);break;case "pointer":this.pointerEvents.setImmediateTap(H)}},enablePan:function(){this.disablePan();
switch(this.eventModel){case "mouse":this._panInitHandle=y(this.mouseEvents,"onMouseDown",this,this._panInit);break;case "touch":this._panInitHandle=y(this.mouseEvents,"onMouseDown",this,this._panInit);this._swipeInitHandle=y(this.touchEvents,"onSwipeStart",this,this._swipeInit);break;case "pointer":this._swipeInitHandle=y(this.pointerEvents,"onSwipeStart",this,this._swipeInit)}},disablePan:function(){v(this._panInitHandle);this._panInitHandle=null;v(this._swipeInitHandle);this._swipeInitHandle=null},
enableRubberBandZoom:function(){this.disableRubberBandZoom();this._zoomInitHandle=this.pointerEvents?y(this.pointerEvents,"onSwipeStart",this,this._zoomInit):y(this.mouseEvents,"onMouseDown",this,this._zoomInit)},disableRubberBandZoom:function(){v(this._zoomInitHandle);this._zoomInitHandle=null},enablePinchZoom:function(){this.disablePinchZoom();if("touch"===this.eventModel||"pointer"===this.eventModel)this._pinchInitHandle=y(this.touchEvents||this.pointerEvents,"onPinchStart",this,this._pinchInit)},
disablePinchZoom:function(){v(this._pinchInitHandle);this._pinchInitHandle=null},enableScrollWheelZoom:function(){this.disableScrollWheelZoom();this._wheelHandle=y(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelZoom)},disableScrollWheelZoom:function(){v(this._wheelHandle);this._wheelHandle=null},enableScrollWheelPan:function(){var H=this.map;H&&H.loaded&&H.smartNavigation&&(this.disableScrollWheelPan(),this._setScrollWheelPan(!0))},disableScrollWheelPan:function(){var H=this.map;
H&&H.loaded&&H.smartNavigation&&this._setScrollWheelPan(!1)},enableDoubleClickZoom:function(){this.disableDoubleClickZoom();switch(this.eventModel){case "mouse":this._dblClickHandle=y(this.mouseEvents,"onDblClick",this,this._dblClickZoom);break;case "touch":this._dblClickHandle=y(this.mouseEvents,"onDblClick",this,this._dblClickZoom);this._dblTapHandle=y(this.touchEvents,"onDoubleTap",this,this._dblClickZoom);this._zoomOutHandle=y(this.touchEvents,"onTwoFingerTap",this,this._twoFingerTap);break;case "pointer":this._dblTapHandle=
y(this.pointerEvents,"onDoubleTap",this,this._dblClickZoom),this._zoomOutHandle=y(this.pointerEvents,"onTwoFingerTap",this,this._twoFingerTap)}},disableDoubleClickZoom:function(){v(this._dblClickHandle);v(this._zoomOutHandle);this._dblTapHandle&&v(this._dblTapHandle);this._dblClickHandle=this._zoomOutHandle=this._dblTapHandle=null},enableShiftDoubleClickZoom:function(){this.disableShiftDoubleClickZoom();this._sDblClickHandle=y(this.pointerEvents||this.mouseEvents,"onDblClick",this,this._recenterZoom)},
disableShiftDoubleClickZoom:function(){v(this._sDblClickHandle);this._sDblClickHandle=null},enableClickRecenter:function(){this.disableClickRecenter();this._recenterHandle=y(this.pointerEvents||this.mouseEvents,"onClick",this,this._recenter)},disableClickRecenter:function(){v(this._recenterHandle);this._recenterHandle=null},enableKeyboardNavigation:function(){this.disableKeyboardNavigation();this._keyHandle=y(this.pointerEvents||this.mouseEvents,"onKeyDown",this,this._keyDown);this._keyEndHandle=
y(this.pointerEvents||this.mouseEvents,"onKeyUp",this,this._keyEnd)},disableKeyboardNavigation:function(){v(this._keyHandle);v(this._keyEndHandle);this._keyHandle=this._keyEndHandle=null},enableScrollWheel:function(){var H=this.map;H&&(H.smartNavigation?this.enableScrollWheelPan():H.enableScrollWheelZoom())},disableScrollWheel:function(){var H=this.map;H&&(H.disableScrollWheelZoom(),H.smartNavigation&&this.disableScrollWheelPan())},enableNavigation:function(){var H=this.map;H&&H.loaded&&(H._evalNavigationFeature("DoubleClickZoom"),
H._evalNavigationFeature("ClickRecenter"),H._evalNavigationFeature("Pan"),H._evalNavigationFeature("RubberBandZoom"),H._evalNavigationFeature("PinchZoom"),H._evalNavigationFeature("KeyboardNavigation"),H._evalNavigationFeature("ScrollWheel"))},disableNavigation:function(){var H=this.map;H&&H.loaded&&(H._evalNavigationFeature("DoubleClickZoom"),H._evalNavigationFeature("ClickRecenter"),H._evalNavigationFeature("Pan"),H._evalNavigationFeature("RubberBandZoom"),H._evalNavigationFeature("PinchZoom"),
H._evalNavigationFeature("KeyboardNavigation"),H._evalNavigationFeature("ScrollWheel"))},destroy:function(){this.touchEvents&&this.touchEvents.destroy();this.mouseEvents&&this.mouseEvents.destroy();this.pointerEvents&&this.pointerEvents.destroy();var H,L=[this._panInitHandle,this._panStartHandle,this._panHandle,this._panEndHandle,this._zoomInitHandle,this._zoomHandle,this._zoomEndHandle,this._wheelHandle,this._mwMacHandle,this._dblClickHandle,this._zoomOutHandle,this._recenterHandle,this._sDblClickHandle,
this._dblTapHandle,this._keyHandle,this._keyEndHandle,this._swipeInitHandle,this._swipeHandle,this._swipeEndHandle,this._pinchInitHandle,this._pinchHandle,this._pinchEndHandle];for(H=0;H<L.length;H++)v(L[H]);this.map=this.touchEvents=this.mouseEvents=this.eventModel=this.pointerEvents=this._zoomRect=this._dragOrigin=this._panInitHandle=this._panStartHandle=this._panHandle=this._panEndHandle=this._zoomInitHandle=this._zoomHandle=this._zoomEndHandle=this._wheelHandle=this._mwMacHandle=this._dblClickHandle=
this._zoomOutHandle=this._recenterHandle=this._sDblClickHandle=this._dblTapHandle=this._keyHandle=this._keyEndHandle=this._swipeInitHandle=this._swipeHandle=this._swipeEndHandle=this._pinchInitHandle=this._pinchHandle=this._pinchEndHandle=null}});return q.MapNavigationManager=f})},"esri/MouseEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/_base/connect dojo/_base/event ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(f,
B,l,e,c,u,t,d,q,m){var a=c.connect,h=c.disconnect;f=f([d],{declaredClass:"esri.MouseEvents",doubleClickDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==e("mac")?1:3,wheelDivisor:2>e("chrome")?360:120,preventPageScroll:!0,map:null,constructor:function(n,r){this.node=n;l.mixin(this,r);r=function(k){u.stop(k);return!1};e("mozilla")&&B.style(n,"MozUserSelect","none");this._handles=[a(n,"onselectstart",r),a(n,"ondragstart",r),a(n,"onmouseenter",this,this._onMouseEnterHandler),a(n,"onmouseleave",
this,this._onMouseLeaveHandler),a(n,"onmousedown",this,this._onMouseDownHandler),a(n,"onclick",this,this._onClickHandler),a(n,"ondblclick",this,this._onDblClickHandler)];this._onMouseMoveHandler_connect=a(n,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=a(n,"onmouseup",this,this._onMouseUpHandler);this._fireClickEvent=l.hitch(this,this._fireClickEvent);this._initialDuration=this.doubleClickDuration;this.preventPageScroll=(n=this.map)?n.isScrollWheelZoom||n.isScrollWheelPan:
this.preventPageScroll;this.enableMouseWheel(!1)},_fire:function(n,r){if(!this._preventClick||"onClick"!==n&&"onDblClick"!==n){if(this[n])this[n](r);if(this.map&&this.map[n])this.map[n](r)}},_processEvent:function(n){n=u.fix(n,n.target);var r=this.map,k=r&&r.position;k&&("DOMMouseScroll"===n.type&&3>e("ff")?n.screenPoint=new m(window.scrollX+n.screenX-k.x,window.scrollY+n.screenY-k.y):n.screenPoint=new m(n.pageX-k.x,n.pageY-k.y),n.mapPoint=r.extent?r.toMap(n.screenPoint):new q);n.numPoints=0;return n},
_onMouseEnterHandler:function(n){h(this._onKeyDown_connect);h(this._onKeyUp_connect);this._onKeyDown_connect=a(document,"onkeydown",this,this._onKeyDownHandler);this._onKeyUp_connect=a(document,"onkeyup",this,this._onKeyUpHandler);this._fire("onMouseOver",this._processEvent(n))},_onMouseLeaveHandler:function(n){h(this._onKeyDown_connect);h(this._onKeyUp_connect);this._onKeyDown_connect=this._onKeyUp_connect=null;this._fire("onMouseOut",this._processEvent(n))},_onMouseMoveHandler:function(n){this._dragEnd?
this._dragEnd=!1:this._fire("onMouseMove",this._processEvent(n))},_onMouseDownHandler:function(n){h(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=null;this.node.setCapture&&this.node.setCapture(!1);h(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=a(document,"onmousemove",this,this._onMouseDragHandler);this._startX=n.pageX;this._startY=n.pageY;this._fire("onMouseDown",this._processEvent(n))},_onMouseUpHandler:function(n){var r=this.node;r.releaseCapture&&r.releaseCapture();
h(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=null;h(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=a(r,"onmousemove",this,this._onMouseMoveHandler);this._fire("onMouseUp",this._processEvent(n))},_onMouseDragHandler:function(n){h(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=a(document,"onmousemove",this,this._onMouseDraggingHandler);h(this._onMouseUpHandler_connect);this._onMouseUpHandler_connect=a(document,"onmouseup",this,this._onDragMouseUpHandler);
this._docLeaveConnect=a(document,"onmouseout",this,this._onDocMouseOut);this._fire("onMouseDragStart",this._processEvent(n))},_onMouseDraggingHandler:function(n){u.stop(n);this._fire("onMouseDrag",this._processEvent(n))},_onDragMouseUpHandler:function(n){var r=this.node;r.releaseCapture&&r.releaseCapture();this._dragEnd=!0;h(this._docLeaveConnect);h(this._onMouseDragHandler_connect);h(this._onMouseUpHandler_connect);this._docLeaveConnect=this._onMouseDragHandler_connect=null;this._onMouseMoveHandler_connect=
a(r,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=a(r,"onmouseup",this,this._onMouseUpHandler);n=this._processEvent(n);this._fire("onMouseDragEnd",n);this._fire("onMouseUp",n)},_onDocMouseOut:function(n){var r=9>e("ie")?n.toElement:n.relatedTarget,k=r&&r.nodeName.toLowerCase();(!r||(e("chrome")||e("safari"))&&"html"===k)&&this._onDragMouseUpHandler(n)},_onClickHandler:function(n){n=this._processEvent(n);if(n.pageX===this._startX&&n.pageY===this._startY){clearTimeout(this._clickTimer);
var r={},k="movementX"in n,g;for(g in n)"mozInputSource"===g||"mozPressure"===g||k&&("webkitMovementX"===g||"webkitMovementY"===g)||(r[g]=n[g]);this._clickEvent=r;this._clickTimer=setTimeout(this._fireClickEvent,this.doubleClickDuration)}},_fireClickEvent:function(){clearTimeout(this._clickTimer);9>e("ie")&&(this._clickEvent.graphic=t._ieGraphic,delete t._ieGraphic);this._fire("onClick",this._clickEvent)},_onDblClickHandler:function(n){clearTimeout(this._clickTimer);this._fire("onDblClick",this._processEvent(n))},
_onMouseWheelHandler:function(n){var r=this.map;(r?r.isScrollWheelZoom||r.isScrollWheelPan:this.preventPageScroll)&&u.stop(n);r=e("ff")||e("mozilla")?-n.detail/this.mozWheelDivisor:n.wheelDelta/this.wheelDivisor;var k=Math.abs(r);k=k<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;n.value=0>r?-k:k;this._fire("onMouseWheel",this._processEvent(n))},_onKeyDownHandler:function(n){this._fire("onKeyDown",n)},_onKeyUpHandler:function(n){this._fire("onKeyUp",n)},enableMouseWheel:function(n){h(this._scrollHandle);
this._scrollHandle=a(this.node,e("ff")||e("mozilla")?n?"MozMousePixelScroll":"DOMMouseScroll":"onmousewheel",this,this._onMouseWheelHandler)},setImmediateClick:function(n){this.doubleClickDuration=n?0:this._initialDuration},preventClickEvents:function(n){this._preventClick=n},destroy:function(){var n=this._handles.concat([this._onMouseMoveHandler_connect,this._onMouseUpHandler_connect,this._onMouseDragHandler_connect,this._scrollHandle,this._onKeyDown_connect,this._onKeyUp_connect,this._docLeaveConnect]),
r;for(r=0;r<n.length;r++)h(n[r]);clearTimeout(this._clickTimer);this.node=this.map=this._handles=this._clickEvent=this._onMouseMoveHandler_connect=this._onMouseUpHandler_connect=this._onMouseDragHandler_connect=this._scrollHandle=this._onKeyDown_connect=this._onKeyUp_connect=this._docLeaveConnect=null}});return t.MouseEvents=f})},"esri/TouchEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/dom ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),
function(f,B,l,e,c,u,t,d,q){f=f([t],{declaredClass:"esri.TouchEvents",tapRadius:8,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,map:null,constructor:function(m,a){this.node=m;l.mixin(this,a);B.setSelectable(m,!1);this._touchStart=l.hitch(this,this._touchStart);this._touchMove=l.hitch(this,this._touchMove);this._touchEnd=l.hitch(this,this._touchEnd);this._touchCancel=l.hitch(this,this._touchCancel);this._fireClickEvent=l.hitch(this,this._fireClickEvent);m.addEventListener("touchstart",
this._touchStart,!1);m.addEventListener("touchmove",this._touchMove,!1);m.addEventListener("touchend",this._touchEnd,!1);m.addEventListener("touchcancel",this._touchCancel,!1);this.map&&e("ios")&&(this._mouseOver=l.hitch(this,this._mouseOver),this._mouseOut=l.hitch(this,this._mouseOut),this._mouseDown=l.hitch(this,this._mouseDown),this._mouseUp=l.hitch(this,this._mouseUp),this._mouseClick=l.hitch(this,this._mouseClick),m.addEventListener("mouseover",this._mouseOver,!1),m.addEventListener("mouseout",
this._mouseOut,!1),m.addEventListener("mousedown",this._mouseDown,!1),m.addEventListener("mouseup",this._mouseUp,!1),m.addEventListener("click",this._mouseClick,!1));this._numTouches=0;this._nodeTouches=[];this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_touchStart:function(m){var a=this._touches,h,n=m.changedTouches.length,r,k,g=(new Date).getTime();this._touchStartTS=g;if(!(e("android")&&e("safari")&&1===m.targetTouches.length&&m.touches.length===m.targetTouches.length&&m.targetTouches.length===
m.changedTouches.length&&0===m.changedTouches[0].identifier&&a[m.changedTouches[0].identifier])){this._addTouch(m);for(h=0;h<n;h++){var b=m.changedTouches[h];var w=a[b.identifier]={};w.startX=b.pageX;w.startY=b.pageY;w.startTS=g;-1===this._touchIds.indexOf(b.identifier)&&this._touchIds.push(b.identifier)}this._swipeActive&&(r=this._nodeTouches[0]);this._pinchActive&&(k=this._nodeTouches[1]);1===this._numTouches?this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(m,
r))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(m,[r,k]))):2===this._numTouches?this._swipeActive&&(r&&(w=a[this._touchIds[0]],w.startX=r.pageX,w.startY=r.pageY,w.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(m,r))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(m,r))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(m,[r,k])))}},_touchMove:function(m){m.preventDefault();
this._updateTouch(m);var a=this._touches,h,n=m.changedTouches.length,r;if(!(e("android")&&e("safari")&&1===m.targetTouches.length&&m.touches.length===m.targetTouches.length&&m.targetTouches.length===m.changedTouches.length&&0===m.changedTouches[0].identifier&&a[m.changedTouches[0].identifier]&&1<this._touchIds.length)){for(h=0;h<n;h++){var k=m.changedTouches[h];if(r=a[k.identifier]){var g=Math.abs(k.pageX-r.startX);k=Math.abs(k.pageY-r.startY);!r.moved&&(g>=this.tapRadius||k>=this.tapRadius)&&(r.moved=
r.absMoved=!0);var b=b?b:r.moved}}1===this._numTouches?(a=m.changedTouches[0],this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(m,a)):b&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(m,a)))):2===this._numTouches&&(h=this._nodeTouches[0],n=this._nodeTouches[1],this._pinchActive?this._fire("onPinchMove",this._processTouchEvent(m,[h,n])):b&&(b=a[h.identifier],r=a[n.identifier],a=Math.abs(b.startX-r.startX),b=Math.abs(b.startY-r.startY),r=Math.abs(h.pageX-n.pageX),
g=Math.abs(h.pageY-n.pageY),Math.abs(Math.sqrt(r*r+g*g)-Math.sqrt(a*a+b*b))>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(m,[h,n])))))}},_touchEnd:function(m){this._removeTouch(m);var a=this._touches,h=m.changedTouches,n,r=h.length,k,g,b=(new Date).getTime(),w=this._touchIds;for(n=0;n<r;n++)if(g=a[h[n].identifier])g.absMoved&&(k=!0),g.pageX=h[n].pageX,g.pageY=h[n].pageY,g.endTS=b;if(0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=
!1,this._fire("onSwipeEnd",this._processTouchEvent(m,h[0]));else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(m,h));else{if(!k){r=Infinity;k=-Infinity;b=Infinity;var x=-Infinity,z=this.tapStartTolerance,D=[],E=!0;for(n=0;n<w.length;n++)g=a[w[n]],D.push(g),g.startTS<r&&(r=g.startTS),g.startTS>k&&(k=g.startTS),g.endTS<b&&(b=g.endTS),g.endTS>x&&(x=g.endTS),delete a[w[n]];1===D.length&&h[0]&&(a=Math.abs(h[0].pageY-D[0].startY),Math.abs(h[0].pageX-D[0].startX)>=
this.tapRadius||a>=this.tapRadius)&&(E=!1);E&&Math.abs(k-r)<=z&&Math.abs(x-b)<=z&&this._basicTap(m,D)}}else 1===this._numTouches&&this._pinchActive&&(n=this._nodeTouches[0],g=a[n.identifier],g.startX=n.pageX,g.startY=n.pageY,this._pinchActive=g.moved=!1,this._fire("onPinchEnd",this._processTouchEvent(m,[h[0],n])))},_touchCancel:function(m){this._numTouches&&this._touchEnd(m)},_basicTap:function(m,a){var h=(new Date).getTime(),n=this;m=this._processTouchEvent(m,a);this._taps.push({touchInfos:a,ts:h,
event:m});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",m);clearTimeout(this._tapTimer);this._immediate?this._analyzeTap(!0):this._tapTimer=setTimeout(function(){var r=n;n=null;clearTimeout(r._tapTimer);r._analyzeTap()},2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration)},_analyzeTap:function(m){var a=this._taps,h=a[0],n=a[1],r=h.touchInfos,k=n&&n.touchInfos;a.length&&(m||(this._taps=[]),h&&n?r.length===k.length?n.ts-h.ts<=this.doubleTapDuration?(1===r.length?
(m=Math.abs(r[0].startX-k[0].startX),r=Math.abs(r[0].startY-k[0].startY),r=m<=this.doubleTapRadius&&r<=this.doubleTapRadius):r=!0,r?this._processedDoubleTap(a):this._processedTap(n)):this._processedTap(n):this._processedTap(n):this._processedTap(h||n))},_processedTap:function(m){var a=m.event;this._fire("onProcessedTap",a);1===m.touchInfos.length?this._fire("onTap",this._fixEvent(a)):2===m.touchInfos.length&&this._fire("onTwoFingerTap",a)},_processedDoubleTap:function(m){var a=1===m[1].touchInfos.length;
if(a){var h=[this._fixEvent(m[0].event),this._fixEvent(m[1].event)];h[1].relatedEvents=h}m=[m[0].event,m[1].event];m[1].relatedEvents=m;this._fire("onProcessedDoubleTap",m[1]);a&&(this._fire("onDoubleTap",h[1]),this._fire("onDblClick",h[1]))},_addTouch:function(m){var a=m.changedTouches,h=this._nodeTouches,n;this._numTouches+=a.length;for(m=0;m<a.length;m++){var r=h.length;var k=!1;for(n=0;n<r&&!(k=h[n].identifier===a[m].identifier);n++);k?this._numTouches--:h.push(a[m])}for(m=h.length-1;0<=m;m--)c.isDescendant(h[m].target,
document.body)||(h.splice(m,1),this._numTouches--);0>this._numTouches&&(this._numTouches=0)},_removeTouch:function(m){var a=[],h=[],n=m.changedTouches,r=this._nodeTouches;this._numTouches-=n.length;0>this._numTouches&&(this._numTouches=0);for(m=0;m<n.length;m++)a.push(n[m].identifier);for(m=r.length-1;0<=m;m--)-1!==a.indexOf(r[m].identifier)&&h.push(r.splice(m,1)[0]);return h},_updateTouch:function(m){var a=[],h=m.changedTouches,n=this._nodeTouches;for(m=0;m<h.length;m++)a.push(h[m].identifier);for(m=
0;m<n.length;m++){var r=a.indexOf(n[m].identifier);-1!==r&&n.splice(m,1,h[r])}},_mouseOver:function(m){this._fire("onMouseOver",this._processMouseEvent(m))},_mouseOut:function(m){this._fire("onMouseOut",this._processMouseEvent(m))},_mouseDown:function(m){this._fire("onMouseDown",this._processMouseEvent(m))},_mouseUp:function(m){this._fire("onMouseUp",this._processMouseEvent(m))},_mouseClick:function(m){clearTimeout(this._clickTimer);300<(new Date).getTime()-this._touchStartTS?this._fire("onClick",
this._processMouseEvent(m)):(this._clickEvent=m,this._clickTimer=setTimeout(this._fireClickEvent,this.doubleTapDuration))},_fireClickEvent:function(){clearTimeout(this._clickTimer);this._fire("onClick",this._processMouseEvent(this._clickEvent))},_fire:function(m,a){"onDblClick"===m&&clearTimeout(this._clickTimer);if("onDblClick"===m&&this.mouseEvents){this.mouseEvents.preventClickEvents(!0);var h=this;setTimeout(function(){h.mouseEvents.preventClickEvents(!1)},350)}if(this[m])this[m](a);if(this.map&&
this.map[m])this.map[m](a)},_fixEvent:function(m){var a={},h;for(h in m)a[h]=m[h];this.map&&(a.screenPoint=a.screenPoints[0],a.mapPoint=a.mapPoints[0]);return a},_processTouchEvent:function(m,a){var h=this.map,n=h&&h.position,r=0;if(n&&a)if(l.isArray(a)){var k;m.screenPoints=[];m.mapPoints=[];for(k=0;k<a.length;k++)if(a[k]){var g=new q(a[k].pageX-n.x,a[k].pageY-n.y);m.screenPoints.push(g);m.mapPoints.push(h.extent?h.toMap(g):new d)}else r++}else m.screenPoint=new q(a.pageX-n.x,a.pageY-n.y),m.mapPoint=
h.extent?h.toMap(m.screenPoint):new d;m.numPoints=a?l.isArray(a)?a.length-r:1:0;return m},_processMouseEvent:function(m){var a=this.map,h=a&&a.position;h&&(m.screenPoint=new q(m.pageX-h.x,m.pageY-h.y),m.mapPoint=a.extent?a.toMap(m.screenPoint):new d);return m},setImmediateTap:function(m){this._immediate=m},destroy:function(){var m=this.node;m.removeEventListener("touchstart",this._touchStart,!1);m.removeEventListener("touchmove",this._touchMove,!1);m.removeEventListener("touchend",this._touchEnd,
!1);m.removeEventListener("touchcancel",this._touchCancel,!1);this.map&&(m.removeEventListener("mouseover",this._mouseOver,!1),m.removeEventListener("mouseout",this._mouseOut,!1),m.removeEventListener("mousedown",this._mouseDown,!1),m.removeEventListener("mouseup",this._mouseUp,!1),m.removeEventListener("click",this._mouseClick,!1));B.setSelectable(m,!0);clearTimeout(this._tapTimer);clearTimeout(this._clickTimer);this.node=this.map=this._numTouches=this._nodeTouches=this._touches=this._touchIds=this._taps=
null}});return u.TouchEvents=f})},"esri/PointerEvents":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(f,B,l,e,c,u,t,d){f=f([u],{declaredClass:"esri.PointerEvents",tapRadius:8,clickRadius:2,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==e("mac")?1:3,wheelDivisor:120,preventPageScroll:!0,_dragging:!1,constructor:function(q,
m){this.node=q;B.mixin(this,m);void 0!==q.style.msTouchAction?q.style.msTouchAction="none":void 0!==q.style.touchAction&&(q.style.touchAction="none");m=navigator.msPointerEnabled;var a=function(h){h.preventDefault()};q.addEventListener("selectstart",a,!1);q.addEventListener("dragstart",a,!1);this._pointerDown=B.hitch(this,this._pointerDown);this._pointerMove=B.hitch(this,this._pointerMove);this._pointerUp=B.hitch(this,this._pointerUp);this._pointerCancel=B.hitch(this,this._pointerCancel);q.addEventListener(m?
"MSPointerDown":"pointerdown",this._pointerDown,!1);q.addEventListener(m?"MSPointerMove":"pointermove",this._pointerMove,!1);q.addEventListener(m?"MSPointerUp":"pointerup",this._pointerUp,!1);q.addEventListener(m?"MSPointerCancel":"pointercancel",this._pointerCancel,!1);this.map&&(this._mouseOver=B.hitch(this,this._mouseOver),this._mouseOut=B.hitch(this,this._mouseOut),this._mouseLeave=B.hitch(this,this._mouseLeave),this._mouseDown=B.hitch(this,this._mouseDown),this._mouseUp=B.hitch(this,this._mouseUp),
this._mouseClick=B.hitch(this,this._mouseClick),this._mouseWheel=B.hitch(this,this._mouseWheel),this._mouseMove=B.hitch(this,this._mouseMove),this._mouseEnter=B.hitch(this,this._mouseEnter),this._onKeyDown=B.hitch(this,this._onKeyDown),this._onKeyUp=B.hitch(this,this._onKeyUp),q.addEventListener("mouseover",this._mouseOver,!1),q.addEventListener("mouseout",this._mouseOut,!1),q.addEventListener("mouseleave",this._mouseLeave,!1),q.addEventListener("mousedown",this._mouseDown,!1),q.addEventListener("mouseup",
this._mouseUp,!1),q.addEventListener("click",this._mouseClick,!1),q.addEventListener("mousewheel",this._mouseWheel,!1),q.addEventListener("mousemove",this._mouseMove,!1),q.addEventListener("mouseenter",this._mouseEnter,!1));this._numTouches=0;this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_pointerDown:function(q){if(-1<l.indexOf(this._touchIds,q.pointerId))this._pointerUp(q);else{var m=this._touches,a=q.target,h=q.pointerId,n=this._touchIds,r=(new Date).getTime();var k=m[h]=
{};k.pointerId=h;k.startX=k.pageX=q.pageX;k.startY=k.pageY=q.pageY;k.startTS=r;n.push(h);this._numTouches++;a.setPointerCapture?a.setPointerCapture(h):a.msSetPointerCapture&&a.msSetPointerCapture(h);a=m[n[0]];m=m[n[1]];1!==this._numTouches&&(2===this._numTouches?this._swipeActive&&(a&&(a.startX=a.pageX,a.startY=a.pageY,a.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(q,a))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(q,a))):
this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(q,[a,m]))))}},_pointerMove:function(q){var m=this._touches,a=this._touchIds,h;if((h=m[q.pointerId])&&(h.pageX!==q.pageX||h.pageY!==q.pageY)){h.pageX=q.pageX;h.pageY=q.pageY;var n=Math.abs(h.pageX-h.startX);var r=Math.abs(h.pageY-h.startY);!h.moved&&(n>=this.tapRadius||r>=this.tapRadius)&&(h.moved=h.absMoved=!0);if(1===this._numTouches)this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(q,q)):h.moved&&
(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(q,q)));else if(2===this._numTouches)if(h=m[a[0]],m=m[a[1]],this._pinchActive)this._fire("onPinchMove",this._processTouchEvent(q,[h,m]));else if(h.moved||m.moved){a=Math.abs(h.startX-m.startX);n=Math.abs(h.startY-m.startY);r=Math.abs(h.pageX-m.pageX);var k=Math.abs(h.pageY-m.pageY);Math.abs(Math.sqrt(r*r+k*k)-Math.sqrt(a*a+n*n))>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(q,[h,m])))}}},
_pointerUp:function(q){var m=this._touches,a,h=this.node,n=q.target,r=q.pointerId,k=this._touchIds,g=k.slice(0),b=l.map(g,function(D){return m[D]}),w=(new Date).getTime();if(a=m[r])if(a.pageX=q.pageX,a.pageY=q.pageY,a.endTS=w,this._numTouches--,n.releasePointerCapture?n.releasePointerCapture(r):n.msReleasePointerCapture&&n.msReleasePointerCapture(r),0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(q,q));
else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(q,q));else{if(!a.absMoved){n=Infinity;r=-Infinity;k=Infinity;w=-Infinity;var x=this.tapStartTolerance,z;for(z=0;z<g.length;z++)a=b[z],a.startTS<n&&(n=a.startTS),a.startTS>r&&(r=a.startTS),a.endTS<k&&(k=a.endTS),a.endTS>w&&(w=a.endTS);Math.abs(r-n)<=x&&Math.abs(w-k)<=x&&this._basicTap(q,b)}}else 1===this._numTouches&&this._pinchActive&&(k.splice(l.indexOf(k,q.pointerId),1),delete m[q.pointerId],a=m[k[0]],
a.startX=a.pageX,a.startY=a.pageY,a.moved=!1,document.msElementsFromPoint&&(g=document.msElementsFromPoint(a.pageX,a.pageY),l.some(g,function(D){return D===h})||(this._touches={},this._touchIds=[],this._numTouches=0)),this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(q,[q,a])))},_pointerCancel:function(q){this._numTouches&&this._pointerUp(q)},_basicTap:function(q,m){var a=(new Date).getTime(),h=this,n=this._immediate;q=this._processTouchEvent(q,m);this._taps.push({touchInfos:m,
ts:a,event:q});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",q);clearTimeout(this._tapTimer);q=2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration;this._tapTimer=setTimeout(function(){var r=h;h=null;clearTimeout(r._tapTimer);r._analyzeTap(n)},n?0:q)},_analyzeTap:function(q){var m=this._taps,a=m[0],h=m[1],n=a.touchInfos,r=h&&h.touchInfos;m.length&&(q||(this._taps=[]),a&&h?n.length===r.length?h.ts-a.ts<=this.doubleTapDuration?(1===n.length?(q=Math.abs(n[0].startX-
r[0].startX),n=Math.abs(n[0].startY-r[0].startY),n=q<=this.doubleTapRadius&&n<=this.doubleTapRadius):n=!0,n?this._processedDoubleTap(m):this._processedTap(h)):this._processedTap(h):this._processedTap(h):this._processedTap(a||h))},_processedTap:function(q){var m=q.event;this._fire("onProcessedTap",m);1===q.touchInfos.length?this._fire("onTap",this._fixEvent(m)):2===q.touchInfos.length&&this._fire("onTwoFingerTap",m)},_processedDoubleTap:function(q){var m=1===q[1].touchInfos.length;if(m){var a=[this._fixEvent(q[0].event),
this._fixEvent(q[1].event)];a[1].relatedEvents=a}q=[q[0].event,q[1].event];q[1].relatedEvents=q;this._fire("onProcessedDoubleTap",q[1]);m&&(this._fire("onDoubleTap",a[1]),this._fire("onDblClick",a[1]))},_mouseOver:function(q){this._fire("onMouseOver",this._processMouseEvent(q))},_mouseMove:function(q){this._dragging?this._fire("onMouseDrag",this._processMouseEvent(q)):this._fire("onMouseMove",this._processMouseEvent(q))},_mouseOut:function(q){this._fire("onMouseOut",this._processMouseEvent(q))},_mouseLeave:function(q){document.removeEventListener("keydown",
this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseOut",this._processMouseEvent(q))},_mouseDown:function(q){this._downX=q.pageX;this._downY=q.pageY;this._fire("onMouseDown",this._processMouseEvent(q));0===q.button&&(this._dragging=!0,this._fire("onMouseDragStart",this._processMouseEvent(q)))},_mouseUp:function(q){this._dragging&&(this._dragging=!1,this._fire("onMouseDragEnd",this._processMouseEvent(q)));this._fire("onMouseUp",this._processMouseEvent(q))},
_mouseClick:function(q){Math.abs(q.pageX-this._downX)<=this.clickRadius&&Math.abs(q.pageY-this._downY)<=this.clickRadius&&this._fire("onClick",this._processMouseEvent(q))},_mouseWheel:function(q){var m=this.map;(m?m.isScrollWheelZoom||m.isScrollWheelPan:this.preventPageScroll)&&q.preventDefault();m=q.wheelDelta?q.wheelDelta/this.wheelDivisor:-q.detail/this.mozWheelDivisor;var a=Math.abs(m);a=a<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;q.value=0>m?-a:a;this._fire("onMouseWheel",this._processMouseEvent(q))},
_mouseEnter:function(q){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);document.addEventListener("keydown",this._onKeyDown,!1);document.addEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseEnter",this._processMouseEvent(q))},_onKeyDown:function(q){this._fire("onKeyDown",q)},_onKeyUp:function(q){this._fire("onKeyUp",q)},_fire:function(q,m){if(this[q])this[q](m);if(this.map&&this.map[q])this.map[q](m)},_fixEvent:function(q){var m=
{},a;for(a in q)m[a]=q[a];m.preventDefault=function(){q.preventDefault()};m.stopPropagation=function(){q.stopPropagation()};this.map&&(m.screenPoint=m.screenPoints[0],m.mapPoint=m.mapPoints[0]);return m},_processTouchEvent:function(q,m){var a=this.map,h=a&&a.position,n=0;if(h&&m)if(B.isArray(m)){var r;q.screenPoints=[];q.mapPoints=[];for(r=0;r<m.length;r++)if(m[r]){var k=new d(m[r].pageX-h.x,m[r].pageY-h.y);q.screenPoints.push(k);q.mapPoints.push(a.extent?a.toMap(k):new t)}else n++}else q.screenPoint=
new d(m.pageX-h.x,m.pageY-h.y),q.mapPoint=a.extent?a.toMap(q.screenPoint):new t;q.numPoints=m?B.isArray(m)?m.length-n:1:0;return q},_processMouseEvent:function(q){var m=this.map,a=m&&m.position;a&&(q.screenPoint=new d(q.pageX-a.x,q.pageY-a.y),q.mapPoint=m.extent?m.toMap(q.screenPoint):new t);return q},setImmediateTap:function(q){this._immediate=q},destroy:function(){var q=this.node;q.removeEventListener("MSPointerDown",this._pointerDown,!1);q.removeEventListener("MSPointerMove",this._pointerMove,
!1);q.removeEventListener("MSPointerUp",this._pointerUp,!1);q.removeEventListener("MSPointerCancel",this._pointerCancel,!1);this.map&&(q.removeEventListener("mouseover",this._mouseOver,!1),q.removeEventListener("mousemove",this._mouseMove,!1),q.removeEventListener("mouseout",this._mouseOut,!1),q.removeEventListener("mouseleave",this._mouseLeave,!1),q.removeEventListener("mousedown",this._mouseDown,!1),q.removeEventListener("mouseup",this._mouseUp,!1),q.removeEventListener("click",this._mouseClick,
!1),q.removeEventListener("mouseenter",this._mouseEnter,!1));clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._touches=this._touchIds=this._taps=null}});return c.PointerEvents=f})},"esri/tasks/GeometryService":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/jsonUtils".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k){f=f(m,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],"cut-complete":["result"],"densify-complete":["geometries"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],
"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]},constructor:function(g){g=B.hitch;this._projectHandler=g(this,this._projectHandler);this._simplifyHandler=g(this,this._simplifyHandler);this._bufferHandler=g(this,this._bufferHandler);this._areasAndLengthsHandler=g(this,this._areasAndLengthsHandler);this._lengthsHandler=
g(this,this._lengthsHandler);this._labelPointsHandler=g(this,this._labelPointsHandler);this._relationHandler=g(this,this._relationHandler);this._convexHullHandler=g(this,this._convexHullHandler);this._unionHandler=g(this,this._unionHandler);this._autoCompleteHandler=g(this,this._autoCompleteHandler);this._reshapeHandler=g(this,this._reshapeHandler);this._cutHandler=g(this,this._cutHandler);this._intersectHandler=g(this,this._intersectHandler);this._differenceHandler=g(this,this._differenceHandler);
this._trimExtendHandler=g(this,this._trimExtendHandler);this._densifyHandler=g(this,this._densifyHandler);this._generalizeHandler=g(this,this._densifyHandler);this._offsetHandler=g(this,this._offsetHandler);this._distanceHandler=g(this,this._distanceHandler);this._toGeoCoordinateHandler=g(this,this._toGeoCoordinateHandler);this._fromGeoCoordinateHandler=g(this,this._fromGeoCoordinateHandler);this.registerConnectEvents()},_encodeGeometries:function(g){var b=[],w,x=g.length;for(w=0;w<x;w++)b.push(g[w].toJson());
return{geometryType:k.getJsonType(g[0]),geometries:b}},_decodeGeometries:function(g,b,w){var x=k.getGeometryType(b);g=g.geometries;var z=[],D={spatialReference:w.toJson()},E=B.mixin;l.forEach(g,function(C,y){z[y]=new x(E(C,D))});return z},_toProjectGeometry:function(g){var b=g.spatialReference.toJson();return g instanceof a?new n({rings:[[[g.xmin,g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]]],spatialReference:b}):new h({paths:[[].concat(g.points)],spatialReference:b})},
_fromProjectedGeometry:function(g,b,w){return"esriGeometryEnvelope"===b?(g=g.rings[0],new a(g[0][0],g[0][1],g[2][0],g[2][1],w)):new r({points:g.paths[0],spatialReference:w.toJson()})},project:function(g,b,w,x){var z=B.mixin({},this._url.query,{f:"json"});if(g.geometries){x=w;w=b;b=g.outSR;var D=g.geometries[0];z=B.mixin(z,g.toJson())}else D=g[0],z=B.mixin(z,{outSR:b.wkid||e.toJson(b.toJson()),inSR:D.spatialReference.wkid||e.toJson(D.spatialReference.toJson()),geometries:e.toJson(this._encodeGeometries(g))});
var E=k.getJsonType(D),C=this._projectHandler,y=this._errorHandler,v=new c(q._dfdCanceller);v._pendingDfd=d({url:this._url.path+"/project",content:z,callbackParamName:"callback",load:function(A,G){C(A,G,E,b,w,x,v)},error:function(A){y(A,x,v)}});return v},_projectHandler:function(g,b,w,x,z,D,E){try{var C=this._decodeGeometries(g,w,x);this._successHandler([C],"onProjectComplete",z,E)}catch(y){this._errorHandler(y,D,E)}},onProjectComplete:function(){},simplify:function(g,b,w){var x=g[0].spatialReference,
z=B.mixin({},this._url.query,{f:"json",sr:x.wkid?x.wkid:e.toJson(x.toJson()),geometries:e.toJson(this._encodeGeometries(g))}),D=k.getJsonType(g[0]),E=this._simplifyHandler,C=this._errorHandler,y=new c(q._dfdCanceller);y._pendingDfd=d({url:this._url.path+"/simplify",content:z,callbackParamName:"callback",load:function(v,A){E(v,A,D,x,b,w,y)},error:function(v){C(v,w,y)}});return y},_simplifyHandler:function(g,b,w,x,z,D,E){try{var C=this._decodeGeometries(g,w,x);this._successHandler([C],"onSimplifyComplete",
z,E)}catch(y){this._errorHandler(y,D,E)}},onSimplifyComplete:function(){},convexHull:function(g,b,w){var x=g[0].spatialReference;g=B.mixin({},this._url.query,{f:"json",sr:e.toJson(x.toJson()),geometries:e.toJson(this._encodeGeometries(g))});var z=this._convexHullHandler,D=this._errorHandler,E=new c(q._dfdCanceller);E._pendingDfd=d({url:this._url.path+"/convexHull",content:g,callbackParamName:"callback",load:function(C,y){z(C,y,x,b,w,E)},error:function(C){D(C,w,E)}});return E},_convexHullHandler:function(g,
b,w,x,z,D){try{var E=k.fromJson(g.geometry).setSpatialReference(w);this._successHandler([E],"onConvexHullComplete",x,D)}catch(C){this._errorHandler(C,z,D)}},onConvexHullComplete:function(){},union:function(g,b,w){var x=g[0].spatialReference;g=B.mixin({},this._url.query,{f:"json",sr:e.toJson(x.toJson()),geometries:e.toJson(this._encodeGeometries(g))});var z=this._unionHandler,D=this._errorHandler,E=new c(q._dfdCanceller);E._pendingDfd=d({url:this._url.path+"/union",content:g,callbackParamName:"callback",
load:function(C,y){z(C,y,x,b,w,E)},error:function(C){D(C,w,E)}});return E},_unionHandler:function(g,b,w,x,z,D){try{var E=k.fromJson(g.geometry).setSpatialReference(w);this._successHandler([E],"onUnionComplete",x,D)}catch(C){this._errorHandler(C,z,D)}},onUnionComplete:function(){},autoComplete:function(g,b,w,x){var z=g[0].spatialReference;g=B.mixin({},this._url.query,{f:"json",sr:e.toJson(z.toJson()),polygons:e.toJson(this._encodeGeometries(g).geometries),polylines:e.toJson(this._encodeGeometries(b).geometries)});
var D=this._autoCompleteHandler,E=this._errorHandler,C=new c(q._dfdCanceller);C._pendingDfd=d({url:this._url.path+"/autoComplete",content:g,callbackParamName:"callback",load:function(y,v){D(y,v,z,w,x,C)},error:function(y){E(y,x,C)}});return C},_autoCompleteHandler:function(g,b,w,x,z,D){try{var E=g.geometries;g=[];var C,y=E.length;for(C=0;C<y;C++)g[C]=new n({spatialReference:w,rings:E[C].rings});this._successHandler([g],"onAutoCompleteComplete",x,D)}catch(v){this._errorHandler(v,z,D)}},onAutoCompleteComplete:function(){},
reshape:function(g,b,w,x){var z=g.spatialReference;g=B.mixin({},this._url.query,{f:"json",sr:e.toJson(z.toJson()),target:e.toJson({geometryType:k.getJsonType(g),geometry:g.toJson()}),reshaper:e.toJson(b.toJson())});var D=this._reshapeHandler,E=this._errorHandler,C=new c(q._dfdCanceller);C._pendingDfd=d({url:this._url.path+"/reshape",content:g,callbackParamName:"callback",load:function(y,v){D(y,v,z,w,x,C)},error:function(y){E(y,x,C)}});return C},_reshapeHandler:function(g,b,w,x,z,D){try{var E=k.fromJson(g.geometry).setSpatialReference(w);
this._successHandler([E],"onReshapeComplete",x,D)}catch(C){this._errorHandler(C,z,D)}},onReshapeComplete:function(){},cut:function(g,b,w,x){var z=g[0].spatialReference,D=l.map(g,function(v){return v.toJson()});g=B.mixin({},this._url.query,{f:"json",sr:e.toJson(z.toJson()),target:e.toJson({geometryType:k.getJsonType(g[0]),geometries:D}),cutter:e.toJson(b.toJson())});var E=this._cutHandler,C=this._errorHandler,y=new c(q._dfdCanceller);y._pendingDfd=d({url:this._url.path+"/cut",content:g,callbackParamName:"callback",
load:function(v,A){E(v,A,z,w,x,y)},error:function(v){C(v,x,y)}});return y},_cutHandler:function(g,b,w,x,z,D){try{var E=g.geometries,C={};C.cutIndexes=g.cutIndexes;C.geometries=[];l.forEach(E,function(y){C.geometries.push(k.fromJson(y).setSpatialReference(w))});this._successHandler([C],"onCutComplete",x,D)}catch(y){this._errorHandler(y,z,D)}},onCutComplete:function(){},intersect:function(g,b,w,x){var z=g[0].spatialReference;g=B.mixin({},this._url.query,{f:"json",sr:e.toJson(z.toJson()),geometries:e.toJson(this._encodeGeometries(g)),
geometry:e.toJson({geometryType:k.getJsonType(b),geometry:b.toJson()})});var D=this._intersectHandler,E=this._errorHandler,C=new c(q._dfdCanceller);C._pendingDfd=d({url:this._url.path+"/intersect",content:g,callbackParamName:"callback",load:function(y,v){D(y,v,z,w,x,C)},error:function(y){E(y,x,C)}});return C},_intersectHandler:function(g,b,w,x,z,D){try{var E=[];l.forEach(g.geometries,function(C){E.push(k.fromJson(C).setSpatialReference(w))});this._successHandler([E],"onIntersectComplete",x,D)}catch(C){this._errorHandler(C,
z,D)}},onIntersectComplete:function(){},difference:function(g,b,w,x){var z=g[0].spatialReference;g=B.mixin({},this._url.query,{f:"json",sr:e.toJson(z.toJson()),geometries:e.toJson(this._encodeGeometries(g)),geometry:e.toJson({geometryType:k.getJsonType(b),geometry:b.toJson()})});var D=this._differenceHandler,E=this._errorHandler,C=new c(q._dfdCanceller);C._pendingDfd=d({url:this._url.path+"/difference",content:g,callbackParamName:"callback",load:function(y,v){D(y,v,z,w,x,C)},error:function(y){E(y,
x,C)}});return C},_differenceHandler:function(g,b,w,x,z,D){try{var E=[];l.forEach(g.geometries,function(C){E.push(k.fromJson(C).setSpatialReference(w))});this._successHandler([E],"onDifferenceComplete",x,D)}catch(C){this._errorHandler(C,z,D)}},onDifferenceComplete:function(){},buffer:function(g,b,w){var x=B.mixin({},this._url.query,{f:"json"},g.toJson()),z=g.outSpatialReference||g.geometries[0].spatialReference,D=this._bufferHandler,E=this._errorHandler,C=new c(q._dfdCanceller);C._pendingDfd=d({url:this._url.path+
"/buffer",content:x,callbackParamName:"callback",load:function(y,v){D(y,v,z,b,w,C)},error:function(y){E(y,w,C)}});return C},_bufferHandler:function(g,b,w,x,z,D){try{var E=g.geometries;g=[];var C,y=E.length;for(C=0;C<y;C++)g[C]=new n({spatialReference:w,rings:E[C].rings});this._successHandler([g],"onBufferComplete",x,D)}catch(v){this._errorHandler(v,z,D)}},onBufferComplete:function(){},areasAndLengths:function(g,b,w){g=B.mixin({},this._url.query,{f:"json"},g.toJson());var x=this._areasAndLengthsHandler,
z=this._errorHandler,D=new c(q._dfdCanceller);D._pendingDfd=d({url:this._url.path+"/areasAndLengths",content:g,callbackParamName:"callback",load:function(E,C){x(E,C,b,w,D)},error:function(E){z(E,w,D)}});return D},_areasAndLengthsHandler:function(g,b,w,x,z){try{this._successHandler([g],"onAreasAndLengthsComplete",w,z)}catch(D){this._errorHandler(D,x,z)}},onAreasAndLengthsComplete:function(){},lengths:function(g,b,w){g=B.mixin({},this._url.query,{f:"json"},g.toJson());var x=this._lengthsHandler,z=this._errorHandler,
D=new c(q._dfdCanceller);D._pendingDfd=d({url:this._url.path+"/lengths",content:g,callbackParamName:"callback",load:function(E,C){x(E,C,b,w,D)},error:function(E){z(E,w,D)}});return D},_lengthsHandler:function(g,b,w,x,z){try{this._successHandler([g],"onLengthsComplete",w,z)}catch(D){this._errorHandler(D,x,z)}},onLengthsComplete:function(){},labelPoints:function(g,b,w){var x=l.map(g,function(y){return y.toJson()}),z=g[0].spatialReference;x=B.mixin({},this._url.query,{f:"json",sr:z.wkid?z.wkid:e.toJson(z.toJson()),
polygons:e.toJson(x)});var D=this._labelPointsHandler,E=this._errorHandler,C=new c(q._dfdCanceller);C._pendingDfd=d({url:this._url.path+"/labelPoints",content:x,callbackParamName:"callback",load:function(y,v){D(y,v,g,z,b,w,C)},error:function(y){E(y,w,C)}});return C},_labelPointsHandler:function(g,b,w,x,z,D,E){try{var C=[];l.forEach(g.labelPoints,function(y){C.push(k.fromJson(y).setSpatialReference(x))});this._successHandler([C],"onLabelPointsComplete",z,E)}catch(y){this._errorHandler(y,D,E)}},onLabelPointsComplete:function(){},
relation:function(g,b,w){g=B.mixin({},this._url.query,{f:"json"},g.toJson());var x=this._relationHandler,z=this._errorHandler,D=new c(q._dfdCanceller);D._pendingDfd=d({url:this._url.path+"/relation",content:g,callbackParamName:"callback",load:function(E,C){x(E,C,b,w,D)},error:function(E){z(E,w,D)}});return D},_relationHandler:function(g,b,w,x,z){try{this._successHandler([g.relations],"onRelationComplete",w,z)}catch(D){this._errorHandler(D,x,z)}},onRelationComplete:function(){},trimExtend:function(g,
b,w){var x=B.mixin({},this._url.query,{f:"json"},g.toJson()),z=g.sr,D=this._trimExtendHandler,E=this._errorHandler,C=new c(q._dfdCanceller);C._pendingDfd=d({url:this._url.path+"/trimExtend",content:x,callbackParamName:"callback",load:function(y,v){D(y,v,z,b,w,C)},error:function(y){E(y,w,C)}});return C},_trimExtendHandler:function(g,b,w,x,z,D){try{var E=g.geometries;g=[];var C,y=E.length;for(C=0;C<y;C++)g[C]=new h({spatialReference:w,paths:E[C].paths});this._successHandler([g],"onTrimExtendComplete",
x,D)}catch(v){this._errorHandler(v,z,D)}},onTrimExtendComplete:function(){},densify:function(g,b,w){var x=B.mixin({},this._url.query,{f:"json"},g.toJson()),z=g.geometries[0].spatialReference,D=this._densifyHandler,E=this._errorHandler,C=new c(q._dfdCanceller);C._pendingDfd=d({url:this._url.path+"/densify",content:x,callbackParamName:"callback",load:function(y,v){D(y,v,z,b,w,C)},error:function(y){E(y,w,C)}});return C},_densifyHandler:function(g,b,w,x,z,D){try{var E=[];l.forEach(g.geometries,function(C){E.push(k.fromJson(C).setSpatialReference(w))});
this._successHandler([E],"onDensifyComplete",x,D)}catch(C){this._errorHandler(C,z,D)}},onDensifyComplete:function(){},generalize:function(g,b,w){var x=B.mixin({},this._url.query,{f:"json"},g.toJson()),z=g.geometries[0].spatialReference,D=this._generalizeHandler,E=this._errorHandler,C=new c(q._dfdCanceller);C._pendingDfd=d({url:this._url.path+"/generalize",content:x,callbackParamName:"callback",load:function(y,v){D(y,v,z,b,w,C)},error:function(y){E(y,w,C)}});return C},_generalizeHandler:function(g,
b,w,x,z,D){try{var E=[];l.forEach(g.geometries,function(C){E.push(k.fromJson(C).setSpatialReference(w))});this._successHandler([E],"onGeneralizeComplete",x,D)}catch(C){this._errorHandler(C,z,D)}},onGeneralizeComplete:function(){},offset:function(g,b,w){var x=B.mixin({},this._url.query,{f:"json"},g.toJson()),z=g.geometries[0].spatialReference,D=this._offsetHandler,E=this._errorHandler,C=new c(q._dfdCanceller);C._pendingDfd=d({url:this._url.path+"/offset",content:x,callbackParamName:"callback",load:function(y,
v){D(y,v,z,b,w,C)},error:function(y){E(y,w,C)}});return C},_offsetHandler:function(g,b,w,x,z,D){try{var E=[];l.forEach(g.geometries,function(C){E.push(k.fromJson(C).setSpatialReference(w))});this._successHandler([E],"onOffsetComplete",x,D)}catch(C){this._errorHandler(C,z,D)}},onOffsetComplete:function(){},distance:function(g,b,w){var x=B.mixin({},this._url.query,{f:"json"},g.toJson()),z=g.geometry1.spatialReference,D=this._distanceHandler,E=this._errorHandler,C=new c(q._dfdCanceller);C._pendingDfd=
d({url:this._url.path+"/distance",content:x,callbackParamName:"callback",load:function(y,v){D(y,v,z,b,w,C)},error:function(y){E(y,w,C)}});return C},_distanceHandler:function(g,b,w,x,z,D){try{g=g&&g.distance,this._successHandler([g],"onDistanceComplete",x,D)}catch(E){this._errorHandler(E,z,D)}},onDistanceComplete:function(){},toGeoCoordinateString:function(g,b,w){var x={};B.isObject(g.sr)?x.sr=g.sr.wkid||e.toJson(g.sr.toJson()):x.sr=g.sr;x.coordinates=e.toJson(g.coordinates);x.conversionType=g.conversionType||
"MGRS";x.conversionMode=g.conversionMode;x.numOfDigits=g.numOfDigits;x.rounding=g.rounding;x.addSpaces=g.addSpaces;g=B.mixin({},this._url.query,{f:"json"},x);var z=this._toGeoCoordinateHandler,D=this._errorHandler,E=new c(q._dfdCanceller);E._pendingDfd=d({url:this._url.path+"/toGeoCoordinateString",content:g,callbackParamName:"callback",load:function(C,y){z(C,y,b,w,E)},error:function(C){D(C,w,E)}});return E},_toGeoCoordinateHandler:function(g,b,w,x,z){try{this._successHandler([g.strings],"onToGeoCoordinateStringComplete",
w,z)}catch(D){this._errorHandler(D,x,z)}},onToGeoCoordinateStringComplete:function(){},fromGeoCoordinateString:function(g,b,w){var x={};B.isObject(g.sr)?x.sr=g.sr.wkid||e.toJson(g.sr.toJson()):x.sr=g.sr;x.strings=e.toJson(g.strings);x.conversionType=g.conversionType||"MGRS";x.conversionMode=g.conversionMode;g=B.mixin({},this._url.query,{f:"json"},x);var z=this._fromGeoCoordinateHandler,D=this._errorHandler,E=new c(q._dfdCanceller);E._pendingDfd=d({url:this._url.path+"/fromGeoCoordinateString",content:g,
callbackParamName:"callback",load:function(C,y){z(C,y,b,w,E)},error:function(C){D(C,w,E)}});return E},_fromGeoCoordinateHandler:function(g,b,w,x,z){try{this._successHandler([g.coordinates],"onToGeoCoordinateStringComplete",w,z)}catch(D){this._errorHandler(D,x,z)}},onFromGeoCoordinateStringComplete:function(){}});B.mixin(f,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});B.setObject("tasks.GeometryService",f,t);return f})},"arcgisonline/map/thumbnail/createThumbnailImage":function(){define("dojo/_base/lang arcgisonline/map/core/getScaleForExtent esri/kernel esri/tasks/PrintTemplate esri/tasks/PrintTask esri/tasks/PrintParameters".split(" "),
function(f,B,l,e,c,u){var t=window.esriGeowConfig;return function(d,q,m,a,h){for(var n=600,r=400,k=function(g){return a&&(g=B(d.extent,g),a[0].scale<g)?!1:!0};!k(n)&&!(n*=2,r*=2,1600<=n););k=new e;k.layout="MAP_ONLY";k.format="png32";k.preserveScale=!1;k.showAttribution=!1;k.showLabels=!1;k.exportOptions={width:n,height:r,dpi:96};h||(h=new c(t.self.helperServices.printTask.url,{}));n=new u;n.map=d;n.template=k;l.config.defaults.io.timeout=12E4;h.execute(n,f.hitch(this,function(g){l.config.defaults.io.timeout=
6E4;return q(g.url)}),f.hitch(this,function(g){l.config.defaults.io.timeout=6E4;if(m)return m(g)}))}})},"arcgisonline/map/core/getScaleForExtent":function(){define(["require","exports","tslib","esri/config","esri/WKIDUnitConversion"],function(f,B,l,e,c){e=l.__importDefault(e);c=l.__importDefault(c);return function(u,t){var d=20015077/180,q=u.spatialReference,m=null===q||void 0===q?void 0:q.wkid;q=null===q||void 0===q?void 0:q.wkt;if(m)var a=c.default.values[c.default[m]];else q&&-1!==q.search(/^PROJCS/i)&&
(m=/UNIT\[([^\]]+)\]\]$/i.exec(q),null===m||void 0===m?0:m[1])&&(a=parseFloat(m[1].split(",")[1]));return u.getWidth()/t*(a||d)*39.37*e.default.defaults.screenDPI}})},"esri/tasks/PrintTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,e){f=f(null,{declaredClass:"esri.tasks.PrintTemplate",label:null,exportOptions:{width:800,height:1100,dpi:96},layoutOptions:null,format:"PNG32",layout:"MAP_ONLY",outScale:0,preserveScale:!0,forceFeatureAttributes:!1,
showAttribution:null,showLabels:!0});B.setObject("tasks.PrintTemplate",f,e);return f})},"esri/tasks/PrintTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../lang ../layerUtils ../deferredUtils ../Color ../request ../urlUtils ../geometry/Polygon ../renderers/SimpleRenderer ../symbols/FillSymbol ./Geoprocessor ./PrintTemplate ./Task dojo/dom-attr dojo/dom-construct dojox/gfx/_base dojox/gfx/canvas dojox/json/query ./PrintParameters ./LegendLayer".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E,C,y){f=f(x,{declaredClass:"esri.tasks.PrintTask",constructor:function(v,A){this.url=v;this.printGp=new b(this.url);this._handler=B.hitch(this,this._handler);A&&A.async&&(this.async=!0);this._colorEvaluator=y("$..color")},async:!1,_vtlExtent:null,_cimVersion:null,_is11xService:!1,_loadGpServerMetadata:!0,execute:function(v,A,G){if(!this._loadGpServerMetadata)return this._execute(v,A,G);var F=new c(m._dfdCanceller),H=this._url.path,L=H.lastIndexOf("/GPServer/");
0<L&&(H=H.slice(0,L+9));F._pendingDfd=h({url:H,callbackParamName:"callback",content:B.mixin({},this._url.query,{f:"json"})}).then(B.hitch(this,function(M){this._loadGpServerMetadata=!1;this.async="esriExecutionTypeAsynchronous"===M.executionType;this._cimVersion=M.cimVersion;this._is11xService=!!this._cimVersion;F._pendingDfd=this._execute(v);return F._pendingDfd})).then(B.hitch(this,function(M){this._successHandler([M],null,A,F)})).otherwise(function(M){G&&G(M);F.errback(M)});return F},_handler:function(v,
A,G,F,H){try{if(this.async)"esriJobSucceeded"===v.jobStatus?this.printGp.getResultData(v.jobId,"Output_File",B.hitch(this,function(M){L=M.value;this._successHandler([L],"onComplete",G,H)})):this._errorHandler(Error(v.jobStatus),F,H);else{var L=v[0].value;this._successHandler([L],"onComplete",G,H)}}catch(M){this._errorHandler(M,F,H)}},_execute:function(v,A,G){var F=this._handler,H=this._errorHandler,L=v.template||new w;L.hasOwnProperty("showLabels")||(L.showLabels=!0);var M=L.exportOptions,Q;M&&(Q=
{outputSize:[M.width,M.height],dpi:M.dpi});M=L.layoutOptions;var S=[];if(M){this.legendAll=!1;M.legendLayers?l.forEach(M.legendLayers,function(W){var da={};da.id=W.layerId;W.subLayerIds&&(da.subLayerIds=W.subLayerIds);S.push(da)}):this.legendAll=!0;if("Miles"===M.scalebarUnit||"Kilometers"===M.scalebarUnit){var I="esriKilometers";var P="esriMiles"}else if("Meters"===M.scalebarUnit||"Feet"===M.scalebarUnit)I="esriMeters",P="esriFeet";var J={esriMiles:"mi",esriKilometers:"km",esriFeet:"ft",esriMeters:"m"};
J={titleText:M.titleText,authorText:M.authorText,copyrightText:M.copyrightText,customTextElements:M.customTextElements,scaleBarOptions:{metricUnit:I,metricLabel:J[I],nonMetricUnit:P,nonMetricLabel:J[P]},legendOptions:{operationalLayers:S}}}I=this._getPrintDefinition(v.map,L);v.outSpatialReference&&(I.mapOptions.spatialReference=v.outSpatialReference.toJson());v.template&&d.isDefined(v.template.showAttribution)&&(I.mapOptions.showAttribution=v.template.showAttribution);B.mixin(I,{exportOptions:Q,layoutOptions:J});
this.allLayerslegend&&B.mixin(I.layoutOptions,{legendOptions:{operationalLayers:this.allLayerslegend}});if(I.operationalLayers){Q=I.operationalLayers;var U=function(W){return d.fixJson(B.mixin(W,{type:"esriSLS",cap:void 0,join:void 0,meterLimit:void 0}))},Y=RegExp("[\\u4E00-\\u9FFF\\u0E00-\\u0E7F\\u0900-\\u097F\\u3040-\\u309F\\u30A0-\\u30FF\\u31F0-\\u31FF]"),aa=/[\u0600-\u06FF]/,la=function(W){var da=W.text,fa=(W=W.font)&&W.family&&W.family.toLowerCase();da&&W&&("arial"===fa||"arial unicode ms"===
fa)&&(W.family=Y.test(da)?"Arial Unicode MS":"Arial","normal"!==W.style&&aa.test(da)&&(W.family="Arial Unicode MS"))};for(J=0;J<Q.length;J++)if(Q[J].featureCollection&&Q[J].featureCollection.layers)for(P=0;P<Q[J].featureCollection.layers.length;P++){var T=Q[J].featureCollection.layers[P];if(T.layerDefinition&&T.layerDefinition.drawingInfo&&T.layerDefinition.drawingInfo.renderer&&T.layerDefinition.drawingInfo.renderer.symbol){var N=T.layerDefinition.drawingInfo.renderer;"esriCLS"===N.symbol.type?N.symbol=
U(N.symbol):"esriTS"===N.symbol.type?la(N.symbol):N.symbol.outline&&"esriCLS"===N.symbol.outline.type&&(N.symbol.outline=U(N.symbol.outline))}if(T.featureSet&&T.featureSet.features)for(M=0;M<T.featureSet.features.length;M++)N=T.featureSet.features[M],N.symbol&&("esriCLS"===N.symbol.type?N.symbol=U(N.symbol):"esriTS"===N.symbol.type?la(N.symbol):N.symbol.outline&&"esriCLS"===N.symbol.outline.type&&(N.symbol.outline=U(N.symbol.outline)))}}L={Web_Map_as_JSON:e.toJson(d.fixJson(I)),Format:L.format,Layout_Template:L.layout};
v.extraParameters&&(L=B.mixin(L,v.extraParameters));var K=new c(m._dfdCanceller);v=function(W,da){F(W,da,A,G,K)};I=function(W){H(W,G,K)};K._pendingDfd=this.async?this.printGp.submitJob(L,v,null,I):this.printGp.execute(L,v,I);return K},onComplete:function(){},_createMultipointLayer:function(){return{layerDefinition:{name:"multipointLayer",geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryMultipoint",features:[]}}},_createPolygonLayer:function(){return{layerDefinition:{name:"polygonLayer",
geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolygon",features:[]}}},_createPointLayer:function(){return{layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}}},_createPolylineLayer:function(){return{layerDefinition:{name:"polylineLayer",geometryType:"esriGeometryPolyline",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolyline",
features:[]}}},_convertSvgSymbol:function(v){if(!(8>=u("ie")||!v.path&&"image/svg+xml"!==v.contentType)){var A=C.createSurface(D.create("div"),1024,1024);var G="image/svg+xml"===v.contentType?A.createObject(C.Image,{src:"data:image/svg+xml;base64,"+v.imageData,width:E.pt2px(v.width),height:E.pt2px(v.height),x:0,y:0}):A.createObject(C.Path,v.path).setFill(v.color).setStroke(v.outline);"pendingRender"in A&&A._render(!0);var F=A.rawNode.getContext("2d"),H=Math.ceil(G.getBoundingBox().width),L=Math.ceil(G.getBoundingBox().height);
G=F.getImageData(G.getBoundingBox().x,G.getBoundingBox().y,H,L);F.canvas.width=H;F.canvas.height=L;F.putImageData(G,0,0);F=F.canvas.toDataURL("image/png");v={type:"esriPMS",imageData:F.substr(22,F.length),angle:v.angle,contentType:"image/png",height:v.size?v.size:E.px2pt(L),width:v.size?H/L*v.size:E.px2pt(H),xoffset:v.xoffset,yoffset:v.yoffset};A.destroy();return v}},_convertSvgRenderer:function(v){"simple"===v.type&&v.symbol&&(v.symbol.path||"image/svg+xml"===v.symbol.contentType)?v.symbol=this._convertSvgSymbol(v.symbol):
"uniqueValue"===v.type?(v.defaultSymbol&&(v.defaultSymbol.path||"image/svg+xml"===v.defaultSymbol.contentType)&&(v.defaultSymbol=this._convertSvgSymbol(v.defaultSymbol)),v.uniqueValueInfos&&l.forEach(v.uniqueValueInfos,function(A){if(A.symbol.path||"image/svg+xml"===A.symbol.contentType)A.symbol=this._convertSvgSymbol(A.symbol)},this)):"classBreaks"===v.type&&(v.defaultSymbol&&(v.defaultSymbol.path||"image/svg+xml"===v.defaultSymbol.contentType)&&(v.defaultSymbol=this._convertSvgSymbol(v.defaultSymbol)),
v.classBreakInfos&&l.forEach(v.classBreakInfos,function(A){if(A.symbol.path||"image/svg+xml"===A.symbol.contentType)A.symbol=this._convertSvgSymbol(A.symbol)},this))},_createFeatureCollection:function(v,A,G,F){var H=this._createPolygonLayer(),L=this._createPolylineLayer(),M=this._createPointLayer(),Q=this._createMultipointLayer(),S=this._createPointLayer();S.layerDefinition.name="textLayer";delete S.layerDefinition.drawingInfo;if("esri.layers.FeatureLayer"===v.declaredClass||"esri.layers.StreamLayer"===
v.declaredClass)H.layerDefinition.name=L.layerDefinition.name=M.layerDefinition.name=Q.layerDefinition.name=B.getObject("arcgisProps.title",!1,v)||v.name||v.id;var I=v.renderer&&"esri.renderer.SimpleRenderer"===v.renderer.declaredClass;if(!v.renderer||v.renderer.valueExpression||B.isFunction(v.renderer.attributeField))delete H.layerDefinition.drawingInfo,delete L.layerDefinition.drawingInfo,delete M.layerDefinition.drawingInfo,delete Q.layerDefinition.drawingInfo;else{var P=v.renderer.toJson({useLegacyRotationProperties:!0});
if("temporal"===P.type){P={latestObservationRenderer:P.latestObservationRenderer,trackLinesRenderer:P.trackRenderer,observationAger:P.observationAger,renderer:P.observationRenderer};var J={};v._trackIdField&&(J.trackIdField=v._trackIdField);v._startTimeField&&(J.startTimeField=v._startTimeField);v._endTimeField&&(J.endTimeField=v._endTimeField);H.layerDefinition.drawingInfo=P;H.layerDefinition.timeInfo=J;L.layerDefinition.drawingInfo=P;L.layerDefinition.timeInfo=J;M.layerDefinition.drawingInfo=P;
M.layerDefinition.timeInfo=J;Q.layerDefinition.drawingInfo=P;Q.layerDefinition.timeInfo=J}else H.layerDefinition.drawingInfo.renderer=P,L.layerDefinition.drawingInfo.renderer=P,M.layerDefinition.drawingInfo.renderer=P,Q.layerDefinition.drawingInfo.renderer=P}P=v.fields;P||!v.renderer||v.renderer.valueExpression||B.isFunction(v.renderer.attributeField)||("esri.renderer.ClassBreaksRenderer"===v.renderer.declaredClass?(P=[{name:v.renderer.attributeField,type:"esriFieldTypeDouble"}],v.renderer.normalizationField&&
P.push({name:v.renderer.normalizationField,type:"esriFieldTypeDouble"})):"esri.renderer.UniqueValueRenderer"===v.renderer.declaredClass&&(P=[{name:v.renderer.attributeField,type:"esriFieldTypeString"}],v.renderer.attributeField2&&P.push({name:v.renderer.attributeField2,type:"esriFieldTypeString"}),v.renderer.attributeField3&&P.push({name:v.renderer.attributeField3,type:"esriFieldTypeString"})));P&&(H.layerDefinition.fields=P,L.layerDefinition.fields=P,M.layerDefinition.fields=P,Q.layerDefinition.fields=
P);P=v.graphics;v.isFeatureReductionActive&&v.isFeatureReductionActive()&&(P=v.getSingleGraphics());J=P.length;var U;for(U=0;U<J;U++){var Y=P[U];if(!1!==Y.visible&&Y.geometry){var aa=Y.toJson();aa.symbol&&aa.symbol.outline&&aa.symbol.outline.color&&aa.symbol.outline.color[3]&&!this._is11xService&&(aa.symbol.outline.color[3]=255);if(v.renderer&&!aa.symbol&&(B.isFunction(v.renderer.attributeField)||v.renderer.valueExpression||this._isFeatureCollectionRequired(v.renderer,v)||"esri.renderer.DotDensityRenderer"===
v.renderer.declaredClass||G)){G=G||v.renderer;var la=null;try{la=G.getSymbol(Y)}catch(T){}if(!la)continue;aa.symbol=la.toJson();this._isFeatureCollectionRequired(G,v)&&this._applyVisualVariables(aa.symbol,{renderer:G,graphic:Y,symbol:la,mapResolution:A&&A.getResolutionInMeters(),mapScale:A&&A.getScale()})}aa.symbol&&(aa.symbol.path||"image/svg+xml"===aa.symbol.contentType?aa.symbol=this._convertSvgSymbol(aa.symbol):aa.symbol.text&&delete aa.attributes);switch(Y.geometry.type){case "polygon":H.featureSet.features.push(aa);
break;case "polyline":L.featureSet.features.push(aa);break;case "point":aa.symbol&&aa.symbol.text?S.featureSet.features.push(aa):M.featureSet.features.push(aa);break;case "multipoint":Q.featureSet.features.push(aa);break;case "extent":aa.geometry=r.fromExtent(Y.geometry).toJson(),H.featureSet.features.push(aa)}}}A=[];0<H.featureSet.features.length&&A.push(H);0<L.featureSet.features.length&&A.push(L);0<Q.featureSet.features.length&&A.push(Q);0<M.featureSet.features.length&&A.push(M);0<S.featureSet.features.length&&
A.push(S);if(!A.length)return null;l.forEach(A,function(T){var N=l.every(T.featureSet.features,function(K){return K.symbol});if(I||N)F&&F.forceFeatureAttributes||l.forEach(T.featureSet.features,function(K){delete K.attributes}),F.forceFeatureAttributes||delete T.layerDefinition.fields;N&&delete T.layerDefinition.drawingInfo});l.forEach(A,function(T){T.layerDefinition.drawingInfo&&T.layerDefinition.drawingInfo.renderer&&this._convertSvgRenderer(T.layerDefinition.drawingInfo.renderer)},this);return{id:v.id,
opacity:v.opacity,minScale:v.minScale||0,maxScale:v.maxScale||0,featureCollection:{layers:A}}},_getPrintDefinition:function(v,A){var G={operationalLayers:this._createOperationalLayers(v,A)},F=this._vtlExtent||v.extent,H=v.spatialReference;this._vtlExtent=null;v.spatialReference._isWrappable()&&(F=F._normalize(!0),H=F.spatialReference);F={mapOptions:{showAttribution:v.showAttribution,extent:F.toJson(),spatialReference:H.toJson()}};A.preserveScale&&B.mixin(F.mapOptions,{scale:A.outScale||v.getScale()});
v.timeExtent&&B.mixin(F.mapOptions,{time:[v.timeExtent.startTime.getTime(),v.timeExtent.endTime.getTime()]});v={};B.mixin(v,F,G);return v},_createOperationalLayers:function(v,A){var G,F=[],H=0;A.preserveScale&&(H=A.outScale||v.getScale());this.allLayerslegend=this.legendAll?[]:null;this._vtlExtent=null;var L=l.map(v.layerIds,v.getLayer,v);v._mapImageLyr&&L.push(v._mapImageLyr);for(G=0;G<L.length;G++){var M=L[G];if(M.loaded&&M.visible&&(!H||M.isVisibleAtScale(H))){var Q=M.declaredClass;var S={id:M.id,
title:B.getObject("arcgisProps.title",!1,M)||M.id,opacity:M.opacity,minScale:M.minScale||0,maxScale:M.maxScale||0};S=B.mixin(S,this._getUrlAndToken(M));M.getNode()&&z.get(M.getNode(),"data-reference")&&(S._isRefLayer=!0);switch(Q){case "esri.layers.ArcGISDynamicMapServiceLayer":var I=[];Q=!!M._params.layers;if(M._params.dynamicLayers)Q=A.outScale?M._getDynLayerObjs(A.outScale):e.fromJson(M._params.dynamicLayers),l.forEach(Q,function(aa){I.push({id:aa.id,name:aa.name,layerDefinition:aa});delete aa.id;
delete aa.name;delete aa.maxScale;delete aa.minScale}),0===I.length&&(S.visibleLayers=[-1]);else if(M.supportsDynamicLayers){if(Q||M.layerDefinitions||M.layerTimeOptions){var P=M.createDynamicLayerInfosFromLayerInfos(),J=null;Q&&(J=M.visibleLayers);J=q._getVisibleLayers(P,J);var U=q._getLayersForScale(A.outScale||v.getScale(),P);l.forEach(P,function(aa){if(!aa.subLayerIds){var la=aa.id;-1<l.indexOf(J,la)&&-1<l.indexOf(U,la)&&(aa={source:aa.source.toJson()},M.layerDefinitions&&M.layerDefinitions[la]&&
(aa.definitionExpression=M.layerDefinitions[la]),M.layerTimeOptions&&M.layerTimeOptions[la]&&(aa.layerTimeOptions=M.layerTimeOptions[la].toJson()),I.push({id:la,layerDefinition:aa}))}});0===I.length&&(S.visibleLayers=[-1])}}else l.forEach(M.layerInfos,function(aa){var la={id:aa.id,layerDefinition:{}};M.layerDefinitions&&M.layerDefinitions[aa.id]&&(la.layerDefinition.definitionExpression=M.layerDefinitions[aa.id]);M.layerTimeOptions&&M.layerTimeOptions[aa.id]&&(la.layerDefinition.layerTimeOptions=
M.layerTimeOptions[aa.id].toJson());(la.layerDefinition.definitionExpression||la.layerDefinition.layerTimeOptions)&&I.push(la)}),Q&&(S.visibleLayers=M.visibleLayers.length?M.visibleLayers:[-1]);I.length&&(S.layers=I);F.push(S);this.allLayerslegend&&this.allLayerslegend.push({id:M.id,subLayerIds:M.visibleLayers});break;case "esri.layers.ArcGISImageServiceLayer":S=B.mixin(S,{url:M.url,bandIds:M.bandIds,compressionQuality:M.compressionQuality,format:M.format,interpolation:M.interpolation});M.mosaicRule&&
B.mixin(S,{mosaicRule:M.mosaicRule.toJson()});if(M.renderingRule||M.renderer)this._is11xService?(M.renderingRule&&(S.renderingRule=M.renderingRule.toJson()),M.renderer&&(S.layerDefinition=S.layerDefinition||{},S.layerDefinition.drawingInfo=S.layerDefinition.drawingInfo||{},S.layerDefinition.drawingInfo.renderer=M.renderer.toJson())):(Q=M.getExportImageRenderingRule())&&B.mixin(S,{renderingRule:Q.toJson()});F.push(S);this.allLayerslegend&&this.allLayerslegend.push({id:M.id});break;case "esri.layers.RasterXLayer":this._is11xService&&
(S=B.mixin(S,{url:M.url,bandIds:M.bandIds,interpolation:M.interpolation}),M.renderer&&(S.layerDefinition=S.layerDefinition||{},S.layerDefinition.drawingInfo=S.layerDefinition.drawingInfo||{},S.layerDefinition.drawingInfo.renderer=M.renderer.toJson()),F.push(S),this.allLayerslegend&&this.allLayerslegend.push({id:M.id}));break;case "esri.layers.WMSLayer":S=B.mixin(S,{url:M.url,title:M.title,type:"wms",version:M.version,transparentBackground:M.imageTransparency,visibleLayers:M.visibleLayers});F.push(S);
this.allLayerslegend&&this.allLayerslegend.push({id:M.id,subLayerIds:M.visibleLayers});break;case "esri.virtualearth.VETiledLayer":Q=M.mapStyle;"roadOnDemand"===Q?Q="Road":"aerialWithLabelsOnDemand"===Q&&(Q="Hybrid");S=B.mixin(S,{visibility:M.visible,type:"BingMaps"+Q,culture:M.culture,key:M.bingMapsKey});F.push(S);break;case "esri.layers.OpenStreetMapLayer":S=B.mixin(S,{credits:M.copyright,type:"OpenStreetMap",url:n.getAbsoluteUrl(M.tileServers[0])});F.push(S);break;case "esri.layers.WMTSLayer":S=
B.mixin(S,{url:M.url,type:"wmts",layer:M._identifier,style:M._style,format:M.format,tileMatrixSet:M._tileMatrixSetId});F.push(S);break;case "esri.layers.MapImageLayer":Q=M.getImages();l.forEach(Q,function(aa,la){aa.visible&&aa.href&&(S={id:M.id+"_image"+la,type:"image",title:M.id,minScale:M.minScale||0,maxScale:M.maxScale||0,opacity:M.opacity*aa.opacity,extent:aa.extent.toJson()},"data:image/png;base64,"===aa.href.substr(0,22)?S.imageData=aa.href.substr(22):S.url=aa.href,F.push(S))});break;case "esri.layers.VectorTileLayer":delete S.url;
delete S.token;if(this._is11xService&&M.currentStyleInfo.serviceUrl&&M.currentStyleInfo.styleUrl&&(Q=t.id&&t.id.findCredential(M.currentStyleInfo.styleUrl),P=t.id&&t.id.findCredential(M.currentStyleInfo.serviceUrl),!Q&&!P||"2.1.0"!==this._cimVersion)){S.type="VectorTileLayer";S.styleUrl=M.currentStyleInfo.styleUrl;Q&&(S.token=Q.token);P&&P.token!==S.token&&(S.additionalTokens=[{url:M.currentStyleInfo.serviceUrl,token:P.token}]);F.push(S);break}S.type="image";Q=this._vtlExtent||v.extent.offset(0,0);
var Y=A.exportOptions&&A.exportOptions.dpi||96;P={format:"png",pixelRatio:Y/96};"MAP_ONLY"!==A.layout||!A.preserveScale||A.outScale&&A.outScale!==v.getScale()||96!==Y||!A.exportOptions||A.exportOptions.width%2===v.width%2&&A.exportOptions.height%2===v.height%2||(P.area={x:0,y:0,width:v.width,height:v.height},A.exportOptions.width%2!==v.width%2&&--P.area.width,A.exportOptions.height%2!==v.height%2&&--P.area.height,this._vtlExtent||(Y=v.toMap({x:P.area.width,y:P.area.height}),Q.update(Q.xmin,Y.y,Y.x,
Q.ymax,Q.spatialReference),this._vtlExtent=Q));S.extent=Q._normalize(!0).toJson();Q=M.takeScreenshot(P);Q.isResolved()&&Q.then(function(aa){"data:image/png;base64,"===aa.dataURL.substr(0,22)&&(S.imageData=aa.dataURL.substr(22))});S.imageData&&F.push(S);break;case "esri.layers.WebTiledLayer":Q=M.url.replace(/\$\{/g,"{");S=B.mixin(S,{type:"WebTiledLayer",urlTemplate:Q,credits:M.copyright});M.subDomains&&0<M.subDomains.length&&(S.subDomains=M.subDomains);M._wmtsInfo&&(S.wmtsInfo=M._wmtsInfo);delete S.url;
F.push(S);break;default:if(M.getTileUrl||M.getImageUrl)S=B.mixin(S,{url:M.url}),F.push(S)}}}L=l.map(v.graphicsLayerIds,v.getLayer,v);for(G=0;G<L.length;G++)M=L[G],M.isFeatureReductionActive&&M.isFeatureReductionActive()&&(M.getSingleGraphics().length?L.splice(++G,0,M.getFeatureReductionLayer()):L[G]=M.getFeatureReductionLayer());for(G=0;G<L.length;G++)if(M=L[G],M.loaded&&M.visible&&(!H||M.isVisibleAtScale(H)))switch(Q=M.declaredClass,Q){case "esri.layers.CSVLayer":if(this._is11xService){S={id:M.id,
url:M.url,title:M.title,opacity:M.opacity,minScale:M.minScale||0,maxScale:M.maxScale||0,type:"CSV",locationInfo:{latitudeFieldName:M.latitudeFieldName,longitudeFieldName:M.longitudeFieldName},layerDefinition:{drawingInfo:{renderer:M.renderer&&M.renderer.toJson()}}};F.push(S);break}case "esri.layers.FeatureLayer":case "esri.layers.LabelLayer":case "esri.layers.StreamLayer":if("esri.layers.LabelLayer"===Q&&!A.showLabels||M.renderer&&"esri.renderer.HeatmapRenderer"===M.renderer.declaredClass)continue;
Q=null;M.url&&M.renderer&&("esri.renderer.ScaleDependentRenderer"===M.renderer.declaredClass?"scale"===M.renderer.rangeType?Q=M.renderer.getRendererInfoByScale(v.getScale())&&M.renderer.getRendererInfoByScale(v.getScale()).renderer:"zoom"===M.renderer.rangeType&&(Q=M.renderer.getRendererInfoByZoom(v.getZoom())&&M.renderer.getRendererInfoByZoom(v.getZoom()).renderer):Q=M.renderer);P=Q&&"esri.layers.CSVLayer"!==M.declaredClass&&!this._isFeatureCollectionRequired(Q,M)&&!Q.valueExpression;Y=M.isFeatureReductionActive&&
M.isFeatureReductionActive();if(Q&&!Y&&"esri.renderer.DotDensityRenderer"!==Q.declaredClass&&"esri.layers.StreamLayer"!==M.declaredClass&&(this._is11xService||P)&&("esri.renderer.SimpleRenderer"===Q.declaredClass||"esri.renderer.TemporalRenderer"===Q.declaredClass||null==Q.attributeField||B.isString(Q.attributeField)&&M._getField(Q.attributeField,!0)))if(S={id:M.id,title:B.getObject("arcgisProps.title",!1,M)||M.id,opacity:M.opacity,minScale:M.minScale||0,maxScale:M.maxScale||0,layerDefinition:{drawingInfo:{renderer:Q.toJson({useLegacyRotationProperties:!this._is11xService})}}},
S=B.mixin(S,this._getUrlAndToken(M)),"esri.renderer.TemporalRenderer"===Q.declaredClass&&(P=S.layerDefinition.drawingInfo,P.latestObservationRenderer=P.renderer.latestObservationRenderer,P.trackLinesRenderer=P.renderer.trackRenderer,P.observationAger=P.renderer.observationAger,P.renderer=P.renderer.observationRenderer,M._trackIdField&&(S.layerDefinition.timeInfo={trackIdField:M._trackIdField})),this._convertSvgRenderer(S.layerDefinition.drawingInfo.renderer),this._is11xService||1>M.opacity||"esri.renderer.TemporalRenderer"===
Q.declaredClass||this._updateLayerOpacity(S))if(M._params.source&&(Q=M._params.source.toJson(),B.mixin(S.layerDefinition,{source:Q})),M.getDefinitionExpression()&&B.mixin(S.layerDefinition,{definitionExpression:M.getDefinitionExpression()}),2!==M.mode)0<M.getSelectedFeatures().length&&(Q=l.map(M.getSelectedFeatures(),function(aa){return aa.attributes[M.objectIdField]}),0<Q.length&&M.getSelectionSymbol()&&B.mixin(S,{selectionObjectIds:Q,selectionSymbol:M.getSelectionSymbol().toJson()}));else{Q=l.map(M.getSelectedFeatures(),
function(aa){return aa.attributes[M.objectIdField]});if(0===Q.length||!M._params.drawMode)break;B.mixin(S.layerDefinition,{objectIds:Q});Q=null;M.getSelectionSymbol()&&(Q=new k(M.getSelectionSymbol()));B.mixin(S.layerDefinition.drawingInfo,{renderer:Q&&Q.toJson()})}else S=this._createFeatureCollection(M,v,null,A);else S=Q&&(Q.valueExpression||this._isFeatureCollectionRequired(Q,M)||"esri.renderer.DotDensityRenderer"===Q.declaredClass)?this._createFeatureCollection(M,v,Q,A):this._createFeatureCollection(M,
v,null,A);if(!S)continue;F.push(S);this.allLayerslegend&&this.allLayerslegend.push({id:M.id});break;case "esri.layers._GraphicsLayer":case "esri.layers.GraphicsLayer":case "esri.layers.WFSLayer":S=this._createFeatureCollection(M,v,null,A);if(!S)continue;F.push(S);this.allLayerslegend&&this.allLayerslegend.push({id:M.id});break;case "esri.layers.ArcGISImageServiceVectorLayer":S={id:M.id,title:B.getObject("arcgisProps.title",!1,M)||M.id,opacity:M.opacity,minScale:M.minScale||0,maxScale:M.maxScale||
0,visibility:M.visible,symbolTileSize:M.symbolTileSize,layerDefinition:{drawingInfo:{renderer:M.renderer.toJson({useLegacyRotationProperties:!this._is11xService})}}},S=B.mixin(S,this._getUrlAndToken(M)),M.mosaicRule&&B.mixin(S,{mosaicRule:M.mosaicRule.toJson()}),F.push(S),this.allLayerslegend&&this.allLayerslegend.push({id:M.id})}H&&l.forEach(F,function(aa){aa.minScale=0;aa.maxScale=0});v.graphics&&0<v.graphics.graphics.length&&(S=this._createFeatureCollection(v.graphics,v,null,A))&&F.push(S);v._labels&&
A.showLabels&&(S=this._createFeatureCollection(v._labels,v,null,A))&&F.push(S);l.forEach(F,function(aa,la,T){aa._isRefLayer&&(delete aa._isRefLayer,T.splice(la,1),T.push(aa))});return F},_getUrlAndToken:function(v){return{token:v._getToken(),url:v._url?v._url.path:null}},_updateLayerOpacity:function(v){var A=this._colorEvaluator(v);A=l.filter(A,function(L){return B.isArray(L)&&4===L.length});var G=!0;if(A.length){var F=A[0][3],H;for(H=1;H<A.length;H++)if(F!==A[H][3]){G=!1;break}if(G)for(v.opacity=
F/255,H=0;H<A.length;H++)A[H][3]=255}return G},_isFeatureCollectionRequired:function(v,A){if(A&&A.isFeatureReductionActive&&A.isFeatureReductionActive())return!0;var G=!1;if(A=this._getVariable(v,"rotationInfo",!1))G=(G=A.field)&&B.isFunction(G)||A.valueExpression;return v.hasVisualVariables("sizeInfo")||v.hasVisualVariables("colorInfo")||v.hasVisualVariables("opacityInfo")||G},_getVariable:function(v,A,G){if(v)var F=(v=v.getVisualVariablesForType(A,G))&&v[0];return F},_applyVisualVariables:function(v,
A){var G=A.renderer,F=A.graphic,H=A.symbol,L=A.mapResolution,M=A.mapScale,Q=H.type;if("textsymbol"!==Q&&"shieldlabelsymbol"!==Q){var S=this._getVariable(G,"sizeInfo",!1),I=this._getVariable(G,"colorInfo",!1),P=this._getVariable(G,"opacityInfo",!1);A=this._getVariable(G,"rotationInfo",!1);H instanceof g&&(S=this._getVariable(G,"sizeInfo","outline")||S);L=S?G.getSize(F,{sizeInfo:S,shape:"simplemarkersymbol"===Q?H.style:null,resolution:L,scale:M}):F.size;null!=L&&("simplemarkersymbol"===Q?v.size=E.px2pt(L):
"picturemarkersymbol"===Q?(M=H.width/H.height*L,v.width=E.px2pt(M),v.height=E.px2pt(L),0!==H.xoffset&&(v.xoffset=E.px2pt(H.xoffset/H.width*M)),0!==H.yoffset&&(v.yoffset=E.px2pt(H.yoffset/H.height*L))):"simplelinesymbol"===Q?v.width=E.px2pt(L):v.outline&&(v.outline.width=E.px2pt(L)));I&&(!(H=G.getColor(F,{colorInfo:I}))||"simplemarkersymbol"!==Q&&"simplelinesymbol"!==Q&&"simplefillsymbol"!==Q||(v.color=a.toJsonColor(H)));P&&(H=G.getOpacity(F,{opacityInfo:P}),null!=H&&v.color&&(v.color[3]=Math.round(255*
H)));A&&(G=G.getRotationAngle(F,{rotationInfo:A}))&&(v.angle=-G)}}});B.setObject("tasks.PrintTask",f,t);return f})},"dojox/gfx/canvas":function(){define("./_base dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/window dojo/dom-geometry dojo/dom ./shape ./path ./arc ./matrix ./decompose ./bezierutils".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h,n){function r(I,P,J,U,Y,aa,la,T,N,K){var W=P.length,da=0;if(K){var fa=K.l/Y;da=K.i}else fa=P[0]/Y;for(;aa<la;){if(aa+fa>la){var ha={l:(aa+fa-
la)*Y,i:da};fa=la-aa}da%2||(I.beginPath(),I.arc(J,U,Y,aa,aa+fa,T),N&&I.stroke());aa+=fa;++da;fa=P[da%W]/Y}return ha}function k(I,P,J,U){var Y=0,aa=0,la=0;if(U){var T=U.l;la=U.i}else T=P[0];for(;1>aa;)aa=n.tAtLength(I,T),1==aa&&(Y=n.computeLength(I),Y={l:T-Y,i:la}),I=n.splitBezierAtT(I,aa),la%2||J.push(I[0]),I=I[1],++la,T=P[la%P.length];return Y}function g(I,P,J,U){var Y=[P.last.x,P.last.y].concat(J),aa=!(I instanceof Array);J=4===J.length?"quadraticCurveTo":"bezierCurveTo";var la=[];P=k(Y,P.canvasDash,
la,U);for(U=0;U<la.length;++U)Y=la[U],aa?(I.moveTo(Y[0],Y[1]),I[J].apply(I,Y.slice(2))):(I.push("moveTo",[Y[0],Y[1]]),I.push(J,Y.slice(2)));return P}function b(I,P,J,U,Y,aa,la){var T=0,N=0,K=0,W=n.distance(J,U,Y,aa),da=0;P=P.canvasDash;var fa=J,ha=U,ra=!(I instanceof Array);la?(K=la.l,da=la.i):K+=P[0];for(;.01<Math.abs(1-N);){K>W&&(T={l:K-W,i:da},K=W);N=K/W;la=J+(Y-J)*N;var za=U+(aa-U)*N;da++%2||(ra?(I.moveTo(fa,ha),I.lineTo(la,za)):(I.push("moveTo",[fa,ha]),I.push("lineTo",[la,za])));fa=la;ha=za;
K+=P[da%P.length]}return T}var w=f.canvas={},x=null,z=a.multiplyPoint,D=Math.PI,E=2*D,C=D/2;h=B.extend;if(c.global.CanvasRenderingContext2D){c=c.doc.createElement("canvas").getContext("2d");var y="function"==typeof c.setLineDash,v="function"==typeof c.fillText}var A={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};w.Shape=e("dojox.gfx.canvas.Shape",
d.Shape,{_render:function(I){I.save();this._renderTransform(I);this._renderClip(I);this._renderShape(I);this._renderFill(I,!0);this._renderStroke(I,!0);I.restore()},_renderClip:function(I){this.canvasClip&&(this.canvasClip.render(I),I.clip())},_renderTransform:function(I){if("canvasTransform"in this){var P=this.canvasTransform;I.translate(P.dx,P.dy);I.rotate(P.angle2);I.scale(P.sx,P.sy);I.rotate(P.angle1)}},_renderShape:function(I){},_renderFill:function(I,P){if("canvasFill"in this){var J=this.fillStyle;
if("canvasFillImage"in this){var U=J.width,Y=J.height,aa=this.canvasFillImage.width,la=this.canvasFillImage.height,T=Math.min(U==aa?1:U/aa,Y==la?1:Y/la),N=(U-T*aa)/2,K=(Y-T*la)/2;x.width=U;x.height=Y;var W=x.getContext("2d");W.clearRect(0,0,U,Y);W.drawImage(this.canvasFillImage,0,0,aa,la,N,K,T*aa,T*la);this.canvasFill=I.createPattern(x,"repeat");delete this.canvasFillImage}I.fillStyle=this.canvasFill;P&&("pattern"!==J.type||0===J.x&&0===J.y||I.translate(J.x,J.y),I.fill())}else I.fillStyle="rgba(0,0,0,0.0)"},
_renderStroke:function(I,P){var J=this.strokeStyle;J?(I.strokeStyle=J.color.toString(),I.lineWidth=J.width,I.lineCap=J.cap,"number"==typeof J.join?(I.lineJoin="miter",I.miterLimit=J.join):I.lineJoin=J.join,this.canvasDash?y?(I.setLineDash(this.canvasDash),P&&I.stroke()):this._renderDashedStroke(I,P):P&&I.stroke()):P||(I.strokeStyle="rgba(0,0,0,0.0)")},_renderDashedStroke:function(I,P){},getEventSource:function(){return null},on:function(){},connect:function(){},disconnect:function(){},canvasClip:null,
setClip:function(I){this.inherited(arguments);var P=I?"width"in I?"rect":"cx"in I?"ellipse":"points"in I?"polyline":"d"in I?"path":null:null;if(I&&!P)return this;this.canvasClip=I?G(P,I):null;this.parent&&this.parent._makeDirty();return this}});var G=function(I,P){switch(I){case "ellipse":return{canvasEllipse:M({shape:P}),render:function(J){return w.Ellipse.prototype._renderShape.call(this,J)}};case "rect":return{shape:B.delegate(P,{r:0}),render:function(J){return w.Rect.prototype._renderShape.call(this,
J)}};case "path":return{canvasPath:F(P),render:function(J){this.canvasPath._renderShape(J)}};case "polyline":return{canvasPolyline:P.points,render:function(J){return w.Polyline.prototype._renderShape.call(this,J)}}}return null},F=function(I){var P=new dojox.gfx.canvas.Path;P.canvasPath=[];P._setPath(I.d);return P},H=function(I,P,J){var U=I.prototype[P];I.prototype[P]=J?function(){this.parent&&this.parent._makeDirty();U.apply(this,arguments);J.call(this);return this}:function(){this.parent&&this.parent._makeDirty();
return U.apply(this,arguments)}};H(w.Shape,"setTransform",function(){this.matrix?this.canvasTransform=f.decompose(this.matrix):delete this.canvasTransform});H(w.Shape,"setFill",function(){var I=this.fillStyle;if(I){if("object"==typeof I&&"type"in I){var P=this.surface.rawNode.getContext("2d");switch(I.type){case "linear":case "radial":var J="linear"==I.type?P.createLinearGradient(I.x1,I.y1,I.x2,I.y2):P.createRadialGradient(I.cx,I.cy,0,I.cx,I.cy,I.r);l.forEach(I.colors,function(U){J.addColorStop(U.offset,
f.normalizeColor(U.color).toString())});break;case "pattern":x||(x=document.createElement("canvas")),P=new Image,this.surface.downloadImage(P,I.src),this.canvasFillImage=P}}else J=I.toString();this.canvasFill=J}else delete this.canvasFill});H(w.Shape,"setStroke",function(){var I=this.strokeStyle;if(I){var P=this.strokeStyle.style.toLowerCase();P in A&&(P=A[P]);if(P instanceof Array){this.canvasDash=P=P.slice();var J;for(J=0;J<P.length;++J)P[J]*=I.width;if("butt"!=I.cap){for(J=0;J<P.length;J+=2)P[J]-=
I.width,1>P[J]&&(P[J]=1);for(J=1;J<P.length;J+=2)P[J]+=I.width}}else delete this.canvasDash}else delete this.canvasDash;this._needsDash=!y&&!!this.canvasDash});H(w.Shape,"setShape");w.Group=e("dojox.gfx.canvas.Group",w.Shape,{constructor:function(){d.Container._init.call(this)},_render:function(I){I.save();this._renderTransform(I);this._renderClip(I);for(var P=0;P<this.children.length;++P)this.children[P]._render(I);I.restore()},destroy:function(){d.Container.clear.call(this,!0);w.Shape.prototype.destroy.apply(this,
arguments)}});w.Rect=e("dojox.gfx.canvas.Rect",[w.Shape,d.Rect],{_renderShape:function(I){var P=this.shape,J=Math.min(P.r,P.height/2,P.width/2),U=P.x,Y=U+P.width,aa=P.y;P=aa+P.height;var la=U+J,T=Y-J,N=aa+J,K=P-J;I.beginPath();I.moveTo(la,aa);J?(I.arc(T,N,J,-C,0,!1),I.arc(T,K,J,0,C,!1),I.arc(la,K,J,C,D,!1),I.arc(la,N,J,D,D+C,!1)):(I.lineTo(T,aa),I.lineTo(Y,K),I.lineTo(la,P),I.lineTo(U,N));I.closePath()},_renderDashedStroke:function(I,P){var J=this.shape,U=Math.min(J.r,J.height/2,J.width/2),Y=J.x,
aa=Y+J.width,la=J.y,T=la+J.height,N=Y+U,K=aa-U,W=la+U,da=T-U;U?(I.beginPath(),J=b(I,this,N,la,K,la),P&&I.stroke(),J=r(I,this.canvasDash,K,W,U,-C,0,!1,P,J),I.beginPath(),J=b(I,this,aa,W,aa,da,J),P&&I.stroke(),J=r(I,this.canvasDash,K,da,U,0,C,!1,P,J),I.beginPath(),J=b(I,this,K,T,N,T,J),P&&I.stroke(),J=r(I,this.canvasDash,N,da,U,C,D,!1,P,J),I.beginPath(),J=b(I,this,Y,da,Y,W,J),P&&I.stroke(),r(I,this.canvasDash,N,W,U,D,D+C,!1,P,J)):(I.beginPath(),J=b(I,this,N,la,K,la),J=b(I,this,K,la,aa,da,J),J=b(I,this,
aa,da,N,T,J),b(I,this,N,T,Y,W,J),P&&I.stroke())}});var L=[];(function(){var I=m.curvePI4;L.push(I.s,I.c1,I.c2,I.e);for(var P=45;360>P;P+=45){var J=a.rotateg(P);L.push(z(J,I.c1),z(J,I.c2),z(J,I.e))}})();var M=function(I){var P=[],J=I.shape,U=a.normalize([a.translate(J.cx,J.cy),a.scale(J.rx,J.ry)]);var Y=z(U,L[0]);P.push([Y.x,Y.y]);for(J=1;J<L.length;J+=3){var aa=z(U,L[J]);var la=z(U,L[J+1]);Y=z(U,L[J+2]);P.push([aa.x,aa.y,la.x,la.y,Y.x,Y.y])}if(I._needsDash){Y=[];aa=P[0];for(J=1;J<P.length;++J)la=
[],k(aa.concat(P[J]),I.canvasDash,la),aa=[P[J][4],P[J][5]],Y.push(la);I._dashedPoints=Y}return P};w.Ellipse=e("dojox.gfx.canvas.Ellipse",[w.Shape,d.Ellipse],{setShape:function(){this.inherited(arguments);this.canvasEllipse=M(this);return this},setStroke:function(){this.inherited(arguments);y||(this.canvasEllipse=M(this));return this},_renderShape:function(I){var P=this.canvasEllipse,J;I.beginPath();I.moveTo.apply(I,P[0]);for(J=1;J<P.length;++J)I.bezierCurveTo.apply(I,P[J]);I.closePath()},_renderDashedStroke:function(I,
P){var J=this._dashedPoints;I.beginPath();for(var U=0;U<J.length;++U)for(var Y=J[U],aa=0;aa<Y.length;++aa){var la=Y[aa];I.moveTo(la[0],la[1]);I.bezierCurveTo(la[2],la[3],la[4],la[5],la[6],la[7])}P&&I.stroke()}});w.Circle=e("dojox.gfx.canvas.Circle",[w.Shape,d.Circle],{_renderShape:function(I){var P=this.shape;I.beginPath();I.arc(P.cx,P.cy,P.r,0,E,1)},_renderDashedStroke:function(I,P){var J=this.shape,U=0,Y=this.canvasDash.length;for(i=0;U<E;){var aa=this.canvasDash[i%Y]/J.r;i%2||(I.beginPath(),I.arc(J.cx,
J.cy,J.r,U,U+aa,0),P&&I.stroke());U+=aa;++i}}});w.Line=e("dojox.gfx.canvas.Line",[w.Shape,d.Line],{_renderShape:function(I){var P=this.shape;I.beginPath();I.moveTo(P.x1,P.y1);I.lineTo(P.x2,P.y2)},_renderDashedStroke:function(I,P){var J=this.shape;I.beginPath();b(I,this,J.x1,J.y1,J.x2,J.y2);P&&I.stroke()}});w.Polyline=e("dojox.gfx.canvas.Polyline",[w.Shape,d.Polyline],{setShape:function(){this.inherited(arguments);var I=this.shape.points,P=I[0],J;this.bbox=null;this._normalizePoints();if(I.length)if("number"==
typeof P)P=I;else for(P=[],J=0;J<I.length;++J){var U=I[J];P.push(U.x,U.y)}else P=[];this.canvasPolyline=P;return this},_renderShape:function(I){var P=this.canvasPolyline;if(P.length){I.beginPath();I.moveTo(P[0],P[1]);for(var J=2;J<P.length;J+=2)I.lineTo(P[J],P[J+1])}},_renderDashedStroke:function(I,P){var J=this.canvasPolyline,U=0;I.beginPath();for(var Y=0;Y<J.length;Y+=2)U=b(I,this,J[Y],J[Y+1],J[Y+2],J[Y+3],U);P&&I.stroke()}});w.Image=e("dojox.gfx.canvas.Image",[w.Shape,d.Image],{setShape:function(){this.inherited(arguments);
var I=new Image;this.surface.downloadImage(I,this.shape.src);this.canvasImage=I;return this},_renderShape:function(I){var P=this.shape;I.drawImage(this.canvasImage,P.x,P.y,P.width,P.height)}});w.Text=e("dojox.gfx.canvas.Text",[w.Shape,d.Text],{_setFont:function(){this.fontStyle?this.canvasFont=f.makeFontString(this.fontStyle):delete this.canvasFont},getTextWidth:function(){var I=this.shape,P=0;if(I.text){var J=this.surface.rawNode.getContext("2d");J.save();this._renderTransform(J);this._renderFill(J,
!1);this._renderStroke(J,!1);this.canvasFont&&(J.font=this.canvasFont);P=J.measureText(I.text).width;J.restore()}return P},_render:function(I){I.save();this._renderTransform(I);this._renderFill(I,!1);this._renderStroke(I,!1);this._renderShape(I);I.restore()},_renderShape:function(I){var P=this.shape;P.text&&(I.textAlign="middle"===P.align?"center":P.align,this.canvasFont&&(I.font=this.canvasFont),this.canvasFill&&I.fillText(P.text,P.x,P.y),this.strokeStyle&&(I.beginPath(),I.strokeText(P.text,P.x,
P.y),I.closePath()))}});H(w.Text,"setFont");v||w.Text.extend({getTextWidth:function(){return 0},getBoundingBox:function(){return null},_renderShape:function(){}});var Q={M:"_moveToA",m:"_moveToR",L:"_lineToA",l:"_lineToR",H:"_hLineToA",h:"_hLineToR",V:"_vLineToA",v:"_vLineToR",C:"_curveToA",c:"_curveToR",S:"_smoothCurveToA",s:"_smoothCurveToR",Q:"_qCurveToA",q:"_qCurveToR",T:"_qSmoothCurveToA",t:"_qSmoothCurveToR",A:"_arcTo",a:"_arcTo",Z:"_closePath",z:"_closePath"};w.Path=e("dojox.gfx.canvas.Path",
[w.Shape,q.Path],{constructor:function(){this.lastControl={}},setShape:function(){this.canvasPath=[];this._dashedPath=[];return this.inherited(arguments)},setStroke:function(){this.inherited(arguments);y||(this.segmented=!1,this._confirmSegmented());return this},_setPath:function(){this._dashResidue=null;this.inherited(arguments)},_updateWithSegment:function(I){var P=B.clone(this.last);this[Q[I.action]](this.canvasPath,I.action,I.args,this._needsDash?this._dashedPath:null);this.last=P;this.inherited(arguments)},
_renderShape:function(I){var P=this.canvasPath;I.beginPath();for(var J=0;J<P.length;J+=2)I[P[J]].apply(I,P[J+1])},_renderDashedStroke:y?function(){}:function(I,P){var J=this._dashedPath;I.beginPath();for(var U=0;U<J.length;U+=2)I[J[U]].apply(I,J[U+1]);P&&I.stroke()},_moveToA:function(I,P,J,U){I.push("moveTo",[J[0],J[1]]);U&&U.push("moveTo",[J[0],J[1]]);for(P=2;P<J.length;P+=2)I.push("lineTo",[J[P],J[P+1]]),U&&(this._dashResidue=b(U,this,J[P-2],J[P-1],J[P],J[P+1],this._dashResidue));this.last.x=J[J.length-
2];this.last.y=J[J.length-1];this.lastControl={}},_moveToR:function(I,P,J,U){P="x"in this.last?[this.last.x+=J[0],this.last.y+=J[1]]:[this.last.x=J[0],this.last.y=J[1]];I.push("moveTo",P);U&&U.push("moveTo",P);for(P=2;P<J.length;P+=2)I.push("lineTo",[this.last.x+=J[P],this.last.y+=J[P+1]]),U&&(this._dashResidue=b(U,this,U[U.length-1][0],U[U.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_lineToA:function(I,P,J,U){for(P=0;P<J.length;P+=2)U&&(this._dashResidue=b(U,this,
this.last.x,this.last.y,J[P],J[P+1],this._dashResidue)),I.push("lineTo",[J[P],J[P+1]]);this.last.x=J[J.length-2];this.last.y=J[J.length-1];this.lastControl={}},_lineToR:function(I,P,J,U){for(P=0;P<J.length;P+=2)I.push("lineTo",[this.last.x+=J[P],this.last.y+=J[P+1]]),U&&(this._dashResidue=b(U,this,U[U.length-1][0],U[U.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_hLineToA:function(I,P,J,U){for(P=0;P<J.length;++P)I.push("lineTo",[J[P],this.last.y]),U&&(this._dashResidue=
b(U,this,U[U.length-1][0],U[U.length-1][1],J[P],this.last.y,this._dashResidue));this.last.x=J[J.length-1];this.lastControl={}},_hLineToR:function(I,P,J,U){for(P=0;P<J.length;++P)I.push("lineTo",[this.last.x+=J[P],this.last.y]),U&&(this._dashResidue=b(U,this,U[U.length-1][0],U[U.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_vLineToA:function(I,P,J,U){for(P=0;P<J.length;++P)I.push("lineTo",[this.last.x,J[P]]),U&&(this._dashResidue=b(U,this,U[U.length-1][0],U[U.length-
1][1],this.last.x,J[P],this._dashResidue));this.last.y=J[J.length-1];this.lastControl={}},_vLineToR:function(I,P,J,U){for(P=0;P<J.length;++P)I.push("lineTo",[this.last.x,this.last.y+=J[P]]),U&&(this._dashResidue=b(U,this,U[U.length-1][0],U[U.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_curveToA:function(I,P,J,U){for(P=0;P<J.length;P+=6)I.push("bezierCurveTo",J.slice(P,P+6)),U&&(this._dashResidue=g(U,this,I[I.length-1],this._dashResidue));this.last.x=J[J.length-2];
this.last.y=J[J.length-1];this.lastControl.x=J[J.length-4];this.lastControl.y=J[J.length-3];this.lastControl.type="C"},_curveToR:function(I,P,J,U){for(P=0;P<J.length;P+=6)I.push("bezierCurveTo",[this.last.x+J[P],this.last.y+J[P+1],this.lastControl.x=this.last.x+J[P+2],this.lastControl.y=this.last.y+J[P+3],this.last.x+J[P+4],this.last.y+J[P+5]]),U&&(this._dashResidue=g(U,this,I[I.length-1],this._dashResidue)),this.last.x+=J[P+4],this.last.y+=J[P+5];this.lastControl.type="C"},_smoothCurveToA:function(I,
P,J,U){for(P=0;P<J.length;P+=4){var Y="C"==this.lastControl.type;I.push("bezierCurveTo",[Y?2*this.last.x-this.lastControl.x:this.last.x,Y?2*this.last.y-this.lastControl.y:this.last.y,J[P],J[P+1],J[P+2],J[P+3]]);U&&(this._dashResidue=g(U,this,I[I.length-1],this._dashResidue));this.lastControl.x=J[P];this.lastControl.y=J[P+1];this.lastControl.type="C"}this.last.x=J[J.length-2];this.last.y=J[J.length-1]},_smoothCurveToR:function(I,P,J,U){for(P=0;P<J.length;P+=4){var Y="C"==this.lastControl.type;I.push("bezierCurveTo",
[Y?2*this.last.x-this.lastControl.x:this.last.x,Y?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+J[P],this.last.y+J[P+1],this.last.x+J[P+2],this.last.y+J[P+3]]);U&&(this._dashResidue=g(U,this,I[I.length-1],this._dashResidue));this.lastControl.x=this.last.x+J[P];this.lastControl.y=this.last.y+J[P+1];this.lastControl.type="C";this.last.x+=J[P+2];this.last.y+=J[P+3]}},_qCurveToA:function(I,P,J,U){for(P=0;P<J.length;P+=4)I.push("quadraticCurveTo",J.slice(P,P+4));U&&(this._dashResidue=g(U,this,
I[I.length-1],this._dashResidue));this.last.x=J[J.length-2];this.last.y=J[J.length-1];this.lastControl.x=J[J.length-4];this.lastControl.y=J[J.length-3];this.lastControl.type="Q"},_qCurveToR:function(I,P,J,U){for(P=0;P<J.length;P+=4)I.push("quadraticCurveTo",[this.lastControl.x=this.last.x+J[P],this.lastControl.y=this.last.y+J[P+1],this.last.x+J[P+2],this.last.y+J[P+3]]),U&&(this._dashResidue=g(U,this,I[I.length-1],this._dashResidue)),this.last.x+=J[P+2],this.last.y+=J[P+3];this.lastControl.type="Q"},
_qSmoothCurveToA:function(I,P,J,U){for(P=0;P<J.length;P+=2){var Y="Q"==this.lastControl.type;I.push("quadraticCurveTo",[this.lastControl.x=Y?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=Y?2*this.last.y-this.lastControl.y:this.last.y,J[P],J[P+1]]);U&&(this._dashResidue=g(U,this,I[I.length-1],this._dashResidue));this.lastControl.type="Q"}this.last.x=J[J.length-2];this.last.y=J[J.length-1]},_qSmoothCurveToR:function(I,P,J,U){for(P=0;P<J.length;P+=2){var Y="Q"==this.lastControl.type;
I.push("quadraticCurveTo",[this.lastControl.x=Y?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=Y?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+J[P],this.last.y+J[P+1]]);U&&(this._dashResidue=g(U,this,I[I.length-1],this._dashResidue));this.lastControl.type="Q";this.last.x+=J[P];this.last.y+=J[P+1]}},_arcTo:function(I,P,J,U){P="a"==P;for(var Y=0;Y<J.length;Y+=7){var aa=J[Y+5],la=J[Y+6];P&&(aa+=this.last.x,la+=this.last.y);var T=m.arcAsBezier(this.last,J[Y],J[Y+1],J[Y+2],
J[Y+3]?1:0,J[Y+4]?1:0,aa,la);l.forEach(T,function(N){I.push("bezierCurveTo",N)});U&&(this._dashResidue=g(U,this,p,this._dashResidue));this.last.x=aa;this.last.y=la}this.lastControl={}},_closePath:function(I,P,J,U){I.push("closePath",[]);U&&(this._dashResidue=b(U,this,this.last.x,this.last.y,U[1][0],U[1][1],this._dashResidue));this.lastControl={}}});l.forEach("moveTo lineTo hLineTo vLineTo curveTo smoothCurveTo qCurveTo qSmoothCurveTo arcTo closePath".split(" "),function(I){H(w.Path,I)});w.TextPath=
e("dojox.gfx.canvas.TextPath",[w.Shape,q.TextPath],{_renderShape:function(I){},_setText:function(){},_setFont:function(){}});w.Surface=e("dojox.gfx.canvas.Surface",d.Surface,{constructor:function(){d.Container._init.call(this);this.pendingImageCount=0;this.makeDirty()},destroy:function(){d.Container.clear.call(this,!0);this.inherited(arguments)},setDimensions:function(I,P){this.width=f.normalizedLength(I);this.height=f.normalizedLength(P);if(!this.rawNode)return this;I=!1;this.rawNode.width!=this.width&&
(this.rawNode.width=this.width,I=!0);this.rawNode.height!=this.height&&(this.rawNode.height=this.height,I=!0);I&&this.makeDirty();return this},getDimensions:function(){return this.rawNode?{width:this.rawNode.width,height:this.rawNode.height}:null},_render:function(I){!this.rawNode||!I&&this.pendingImageCount||(I=this.rawNode.getContext("2d"),I.clearRect(0,0,this.rawNode.width,this.rawNode.height),this.render(I),"pendingRender"in this&&(clearTimeout(this.pendingRender),delete this.pendingRender))},
render:function(I){I.save();for(var P=0;P<this.children.length;++P)this.children[P]._render(I);I.restore()},makeDirty:function(){this.pendingImagesCount||"pendingRender"in this||this._batch||(this.pendingRender=setTimeout(B.hitch(this,this._render),0))},downloadImage:function(I,P){var J=B.hitch(this,this.onImageLoad);!this.pendingImageCount++&&"pendingRender"in this&&(clearTimeout(this.pendingRender),delete this.pendingRender);I.onload=J;I.onerror=J;I.onabort=J;I.src=P},onImageLoad:function(){--this.pendingImageCount||
(this.onImagesLoaded(),this._render())},onImagesLoaded:function(){},getEventSource:function(){return null},connect:function(){},disconnect:function(){},on:function(){}});w.createSurface=function(I,P,J){if(!P&&!J){var U=u.position(I);P=P||U.w;J=J||U.h}"number"==typeof P&&(P+="px");"number"==typeof J&&(J+="px");U=new w.Surface;I=t.byId(I);var Y=I.ownerDocument.createElement("canvas");Y.width=f.normalizedLength(P);Y.height=f.normalizedLength(J);I.appendChild(Y);U.rawNode=Y;U._parent=I;return U.surface=
U};var S=d.Container;e={openBatch:function(){++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this._makeDirty();return this},_makeDirty:function(){this._batch||this.surface.makeDirty()},add:function(I){this._makeDirty();return S.add.apply(this,arguments)},remove:function(I,P){this._makeDirty();return S.remove.apply(this,arguments)},clear:function(){this._makeDirty();return S.clear.apply(this,arguments)},getBoundingBox:S.getBoundingBox,_moveChildToFront:function(I){this._makeDirty();
return S._moveChildToFront.apply(this,arguments)},_moveChildToBack:function(I){this._makeDirty();return S._moveChildToBack.apply(this,arguments)}};q={createObject:function(I,P){I=new I;I.surface=this.surface;I.setShape(P);this.add(I);return I}};h(w.Group,e);h(w.Group,d.Creator);h(w.Group,q);h(w.Surface,e);h(w.Surface,d.Creator);h(w.Surface,q);w.fixTarget=function(I,P){return!0};return w})},"dojox/gfx/arc":function(){define(["./_base","dojo/_base/lang","./matrix"],function(f,B,l){function e(m){var a=
Math.cos(m);m=Math.sin(m);var h={x:a+4/3*(1-a),y:m-4/3*a*(1-a)/m};return{s:{x:a,y:-m},c1:{x:h.x,y:-h.y},c2:h,e:{x:a,y:m}}}var c=2*Math.PI,u=Math.PI/4,t=Math.PI/8,d=u+t,q=e(t);return f.arc={unitArcAsBezier:e,curvePI4:q,arcAsBezier:function(m,a,h,n,r,k,g,b){r=!!r;k=!!k;var w=l._degToRad(n);n=a*a;var x=h*h,z=l.multiplyPoint(l.rotate(-w),{x:(m.x-g)/2,y:(m.y-b)/2}),D=z.x*z.x,E=z.y*z.y;n=Math.sqrt((n*x-n*E-x*D)/(n*E+x*D));isNaN(n)&&(n=0);n={x:n*a*z.y/h,y:-n*h*z.x/a};r==k&&(n={x:-n.x,y:-n.y});n=l.multiplyPoint([l.translate((m.x+
g)/2,(m.y+b)/2),l.rotate(w)],n);a=l.normalize([l.translate(n.x,n.y),l.rotate(w),l.scale(a,h)]);n=l.invert(a);m=l.multiplyPoint(n,m);b=l.multiplyPoint(n,g,b);g=Math.atan2(m.y,m.x);n=g-Math.atan2(b.y,b.x);k&&(n=-n);0>n?n+=c:n>c&&(n-=c);h=t;b=q;h=k?h:-h;m=[];for(r=n;0<r;r-=u)r<d&&(h=r/2,b=e(h),h=k?h:-h,r=0),z=l.normalize([a,l.rotate(g+h)]),k?(n=l.multiplyPoint(z,b.c1),w=l.multiplyPoint(z,b.c2),z=l.multiplyPoint(z,b.e)):(n=l.multiplyPoint(z,b.c2),w=l.multiplyPoint(z,b.c1),z=l.multiplyPoint(z,b.s)),m.push([n.x,
n.y,w.x,w.y,z.x,z.y]),g+=2*h;return m}}})},"dojox/gfx/decompose":function(){define(["./_base","dojo/_base/lang","./matrix"],function(f,B,l){function e(q,m){return Math.abs(q-m)<=1E-6*(Math.abs(q)+Math.abs(m))}function c(q,m,a,h){if(!isFinite(q))return a;if(!isFinite(a))return q;m=Math.abs(m);h=Math.abs(h);return(m*q+h*a)/(m+h)}function u(q){q=l.normalize(q);var m=-q.xx-q.yy,a=q.xx*q.yy-q.xy*q.yx,h=Math.sqrt(m*m-4*a);m=-(m+(0>m?-h:h))/2;a/=m;h=q.xy/(m-q.xx);var n=1,r=q.xy/(a-q.xx),k=1;e(m,a)&&(h=1,
r=n=0,k=1);isFinite(h)||(h=1,n=(m-q.xx)/q.xy,isFinite(n)||(h=(m-q.yy)/q.yx,n=1,isFinite(h)||(h=1,n=q.yx/(m-q.yy))));isFinite(r)||(r=1,k=(a-q.xx)/q.xy,isFinite(k)||(r=(a-q.yy)/q.yx,k=1,isFinite(r)||(r=1,k=q.yx/(a-q.yy))));q=Math.sqrt(h*h+n*n);var g=Math.sqrt(r*r+k*k);isFinite(h/=q)||(h=0);isFinite(n/=q)||(n=0);isFinite(r/=g)||(r=0);isFinite(k/=g)||(k=0);return{value1:m,value2:a,vector1:{x:h,y:n},vector2:{x:r,y:k}}}function t(q,m){var a=0>q.xx*q.yy||0<q.xy*q.yx?-1:1,h=m.angle1=(Math.atan2(q.yx,q.yy)+
Math.atan2(-a*q.xy,a*q.xx))/2;a=Math.cos(h);h=Math.sin(h);m.sx=c(q.xx/a,a,-q.xy/h,h);m.sy=c(q.yy/a,a,q.yx/h,h);return m}function d(q,m){var a=0>q.xx*q.yy||0<q.xy*q.yx?-1:1,h=m.angle2=(Math.atan2(a*q.yx,a*q.xx)+Math.atan2(-q.xy,q.yy))/2;a=Math.cos(h);h=Math.sin(h);m.sx=c(q.xx/a,a,q.yx/h,h);m.sy=c(q.yy/a,a,-q.xy/h,h);return m}return f.decompose=function(q){var m=l.normalize(q);q={dx:m.dx,dy:m.dy,sx:1,sy:1,angle1:0,angle2:0};if(e(m.xy,0)&&e(m.yx,0))return B.mixin(q,{sx:m.xx,sy:m.yy});if(e(m.xx*m.yx,
-m.xy*m.yy))return t(m,q);if(e(m.xx*m.xy,-m.yx*m.yy))return d(m,q);var a=new l.Matrix2D(m);var h=B.mixin(a,{dx:0,dy:0,xy:a.yx,yx:a.xy});a=u([m,h]);h=u([h,m]);a=new l.Matrix2D({xx:a.vector1.x,xy:a.vector2.x,yx:a.vector1.y,yy:a.vector2.y});h=new l.Matrix2D({xx:h.vector1.x,xy:h.vector1.y,yx:h.vector2.x,yy:h.vector2.y});m=new l.Matrix2D([l.invert(a),m,l.invert(h)]);t(h,q);m.xx*=q.sx;m.yy*=q.sy;d(a,q);m.xx*=q.sx;m.yy*=q.sy;return B.mixin(q,{sx:m.xx,sy:m.yy})}})},"dojox/gfx/bezierutils":function(){define(["./_base"],
function(f){f=f.bezierutils={};f.tAtLength=function(t,d){var q=0,m=6==t.length,a=0,h=0,n=m?e:u,r=function(k,g){for(var b=0,w=0;w<k.length-2;w+=2)b+=l(k[w],k[w+1],k[w+2],k[w+3]);w=m?l(t[0],t[1],t[4],t[5]):l(t[0],t[1],t[6],t[7]);b-w>g||a+b>d+g?(++h,k=n(k,.5),r(k[0],g),Math.abs(a-d)<=g||r(k[1],g)):(a+=b,q+=1/(1<<h))};d&&r(t,.5);return q};var B=f.computeLength=function(t){for(var d=6==t.length,q=0,m=0;m<t.length-2;m+=2)q+=l(t[m],t[m+1],t[m+2],t[m+3]);m=d?l(t[0],t[1],t[4],t[5]):l(t[0],t[1],t[6],t[7]);
return.1<q-m?(t=d?e(t,.5):c(t,.5),q=B(t[0],d),q+=B(t[1],d)):q},l=f.distance=function(t,d,q,m){return Math.sqrt((q-t)*(q-t)+(m-d)*(m-d))},e=function(t,d){var q=1-d,m=q*q,a=d*d,h=t[0],n=t[1],r=t[2],k=t[3],g=t[4];t=t[5];var b=m*h+2*q*d*r+a*g;m=m*n+2*q*d*k+a*t;return[[h,n,q*h+d*r,q*n+d*k,b,m],[b,m,q*r+d*g,q*k+d*t,g,t]]},c=function(t,d){var q=1-d,m=q*q,a=m*q,h=d*d,n=h*d,r=t[0],k=t[1],g=t[2],b=t[3],w=t[4],x=t[5],z=t[6];t=t[7];var D=a*r+3*m*d*g+3*q*h*w+n*z;a=a*k+3*m*d*b+3*q*h*x+n*t;return[[r,k,q*r+d*g,q*
k+d*b,m*r+2*q*d*g+h*w,m*k+2*q*d*b+h*x,D,a],[D,a,m*g+2*q*d*w+h*z,m*b+2*q*d*x+h*t,q*w+d*z,q*x+d*t,z,t]]},u=f.splitBezierAtT=function(t,d){return 6==t.length?e(t,d):c(t,d)};return f})},"dojox/json/query":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojox","dojo/_base/array"],function(f,B,l){B.getObject("json",!0,l);l.json._slice=function(e,c,u,t){var d=e.length,q=[];u=u||d;c=0>c?Math.max(0,c+d):Math.min(d,c);for(u=0>u?Math.max(0,u+d):Math.min(d,u);c<u;c+=t)q.push(e[c]);return q};l.json._find=
function(e,c){function u(q){c&&(!0!==c||q instanceof Array?q[c]&&t.push(q[c]):t.push(q));for(var m in q){var a=q[m];c?a&&"object"==typeof a&&u(a):t.push(a)}}var t=[];if(c instanceof Array){if(1==c.length)return e[c[0]];for(var d=0;d<c.length;d++)t.push(e[c[d]])}else u(e);return t};l.json._distinctFilter=function(e,c){for(var u=[],t={},d=0,q=e.length;d<q;++d){var m=e[d];c(m,d,e)&&("object"==typeof m&&m?m.__included||(m.__included=!0,u.push(m)):t[m+typeof m]||(t[m+typeof m]=!0,u.push(m)))}d=0;for(q=
u.length;d<q;++d)u[d]&&delete u[d].__included;return u};return l.json.query=function(e,c){function u(h,n,r,k,g,b,w,x){return d[x].match(/[\*\?]/)||"~"==w?"/^"+d[x].substring(1,d[x].length-1).replace(/\\([btnfr\\"'])|([^\w\*\?])/g,"\\$1$2").replace(/([\*\?])/g,"[\\w\\W]$1")+("~"==w?"$/i":"$/")+".test("+n+")":h}var t=0,d=[];e=e.replace(/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'|[\[\]]/g,function(h){t+="["==h?1:"]"==h?-1:0;return"]"==h&&0<t?"`]":'"'==h.charAt(0)||"'"==h.charAt(0)?"`"+(d.push(h)-1):h});var q="";
e.replace(/(\]|\)|push|pop|shift|splice|sort|reverse)\s*\(/,function(){throw Error("Unsafe function call");});e=e.replace(/([^<>=]=)([^=])/g,"$1\x3d$2").replace(/@|(\.\s*)?[a-zA-Z\$_]+(\s*:)?/g,function(h){return"."==h.charAt(0)?h:"@"==h?"$obj":(h.match(/:|^(\$|Math|true|false|null)$/)?"":"$obj.")+h}).replace(/\.?\.?\[(`\]|[^\]])*\]|\?.*|\.\.([\w\$_]+)|\.\*/g,function(h,n,r){return(n=h.match(/^\.?\.?(\[\s*\^?\?|\^?\?|\[\s*==)(.*?)\]?$/))?(r="",h.match(/^\./)&&(q="dojox.json._find("+q,r=",true)"),
q=(n[1].match(/=/)?"dojo.map":n[1].match(/\^/)?"dojox.json._distinctFilter":"dojo.filter")+"("+q,r+",function($obj){return "+n[2]+"})"):(n=h.match(/^\[\s*([\/\\].*)\]/))?".concat().sort(function(a,b){"+n[1].replace(/\s*,?\s*([\/\\])\s*([^,\\\/]+)/g,function(k,g,b){return"var av\x3d "+b.replace(/\$obj/,"a")+",bv\x3d "+b.replace(/\$obj/,"b")+";if(av\x3ebv||bv\x3d\x3dnull){return "+("/"==g?1:-1)+";}\nif(bv\x3eav||av\x3d\x3dnull){return "+("/"==g?-1:1)+";}\n"})+"return 0;})":(n=h.match(/^\[(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)\]/))?
(q="dojox.json._slice("+q,","+(n[1]||0)+","+(n[2]||0)+","+(n[3]||1)+")"):h.match(/^\.\.|\.\*|\[\s*\*\s*\]|,/)?(q="dojox.json._find("+q,("."==h.charAt(1)?",'"+r+"'":h.match(/,/)?","+h:"")+")"):h}).replace(/(\$obj\s*((\.\s*[\w_$]+\s*)|(\[\s*`([0-9]+)\s*`\]))*)(==|~)\s*`([0-9]+)/g,u).replace(/`([0-9]+)\s*(==|~)\s*(\$obj\s*((\.\s*[\w_$]+)|(\[\s*`([0-9]+)\s*`\]))*)/g,function(h,n,r,k,g,b,w,x){return u(h,k,g,b,w,x,r,n)});e=q+("$"==e.charAt(0)?"":"$")+e.replace(/`([0-9]+|\])/g,function(h,n){return"]"==n?
"]":d[n]});for(var m=eval("1\x26\x26function($,$1,$2,$3,$4,$5,$6,$7,$8,$9){var $obj\x3d$;return "+e+"}"),a=0;a<arguments.length-1;a++)arguments[a]=arguments[a+1];return c?m.apply(this,arguments):m}})},"esri/tasks/PrintParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,e){f=f(null,{declaredClass:"esri.tasks.PrintParameters",map:null,template:null,outSpatialReference:null,extraParameters:null});B.setObject("tasks.PrintParameters",f,e);return f})},
"esri/tasks/LegendLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,e){f=f(null,{declaredClass:"esri.tasks.LegendLayer",layerId:null,subLayerIds:null});B.setObject("tasks.LegendLayer",f,e);return f})},"arcgisonline/map/thumbnail/createHiddenMap":function(){define("dojo/on dojo/dom dojo/json dojo/aspect dojo/Deferred dojo/promise/all dojo/dom-construct dojo/_base/lang dojo/_base/array ../../esriGeowConfig esri/arcgis/utils".split(" "),function(f,
B,l,e,c,u,t,d,q,m,a){return function(h,n,r,k){var g=B.byId("hiddenMapDiv");B.byId("hiddenMapDiv")||(g=t.create("div",{id:"hiddenMapDiv",style:{position:"absolute",left:"-1000px",top:"-1000px",width:"200px",height:"130px"}},document.body));t.create("div",{id:"hiddenMap",style:{width:"200px",height:"130px"}},g);g={item:{}};g.item.extent=n;g.itemData=h;a.arcgisUrl=m.restBaseUrl+"content/items";a.createMap(g,"hiddenMap",{mapOptions:{nav:!1},bingMapsKey:window.esriGeowConfig.self.bingKey}).then(function(b){var w=
function(C){var y=new c;C._heatmapManager?e.after(C._heatmapManager,"recalculateHeatmap",function(){y.resolve()}):y.resolve();return y},x=function(C){var y=new c;if(C.updating){"esri.layers.VectorTileLayer"===C.declaredClass&&setTimeout(function(){v&&(v.remove(),y.resolve())},1E4);var v=f(C,"update-end",function(){v.remove();y.resolve()})}else y.resolve();return y},z=function(C){var y=new c;"esri.layers.VectorTileLayer"===C.declaredClass&&setTimeout(function(){v&&(v.remove(),y.resolve())},5E3);var v=
f(C,"update-start",function(){v.remove();x(C).then(function(){y.resolve()})});return y},D=function(C){var y=new c,v=setInterval(d.hitch(this,function(A,G){A.graphics&&A.graphics.length?(clearInterval(v),y.resolve()):10<G[0]?(clearInterval(v),y.resolve()):G[0]+=1},C,[0]),500);return y},E=[];q.forEach(b.map.graphicsLayerIds,function(C){C=b.map.getLayer(C);C.renderer&&"heatmap"===C.renderer.type?E.push(w(C)):"esri.layers.WFSLayer"===C.declaredClass?E.push(D(C)):C.updating&&E.push(x(C))});q.forEach(b.map.layerIds,
function(C){C=b.map.getLayer(C);C.updating?E.push(x(C)):"esri.layers.VectorTileLayer"===C.declaredClass&&E.push(z(C))});E.length?u(E).then(function(C){setTimeout(function(){r(b.map)},1E3)}):r(b.map)},function(b){k&&k(b)})}})},"arcgisonline/map/thumbnail/getExtentWithFeatures":function(){define("dojo/Deferred esri/layers/FeatureLayer esri/layers/StreamLayer esri/SpatialReference arcgisonline/map/core/projectExtent arcgisonline/map/core/getExtentFromCenter arcgisonline/map/core/getScaleForExtent".split(" "),
function(f,B,l,e,c,u,t){return function(d,q,m){function a(){h.resolve(q)}var h=new f;if(!(d.layer instanceof B)||d.layer instanceof l)return h.resolve(q),h;var n=d.layer;d.layers&&(n=d.layers[0]);n.addPlugin("esri/plugins/FeatureLayerStatistics").then(function(){n.statisticsPlugin.getSuggestedScaleRange().then(function(r){if(r.center){var k=u(r.center,1280,r.minScale);if(0<r.relaxedMinScale)for(var g=t(k,200),b=800;g>r.relaxedMinScale&&!(k=u(r.center,b,r.minScale),g=t(k,200),b-=200,0>=b););c(k,new e({wkid:4326}),
function(w){q=[[w[0].xmin,w[0].ymin],[w[0].xmax,w[0].ymax]];a()},a)}else a()},a)},a);return h}})},"esri/layers/StreamLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/array dojo/_base/Color dojo/_base/lang dojo/Deferred dojo/has dojo/io-query dojo/on dojo/aspect ../kernel ../request ../graphic ./FeatureLayer ./StreamMode ./StreamTrackManager ../geometry/jsonUtils ../symbols/SimpleFillSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../renderers/SimpleRenderer ./PurgeOptions".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E){f=f([r],{declaredClass:"esri.layers.StreamLayer",_preventInit:!0,constructor:function(C,y){y=y||{};y.mode&&y.mode!==r.MODE_STREAM||(this._isStream=!0,this.currentMode=this.mode=r.MODE_STREAM,this._mode=new k(this));this.purgeOptions=new E(this,y.purgeOptions||{});this.purgeInterval=y.purgeInterval||0;this._reconnectAttempts=0;this.maxReconnectAttempts=10;this.socket=this._reconnectTimeoutId=null;this._keepLatestQueried=!1;this._keepLatestUrl=null;
this._relatedQueried=!1;this._joinField=this._relatedUrl=null;this._refreshing=!1;this._attemptReconnect=c.hitch(this,this._attemptReconnect);this._purge=c.hitch(this,this._purge);this._processServiceJson=c.hitch(this,this._processServiceJson);if(c.isObject(C)&&C.layerDefinition)this._initFeatureLayer(C,y);else{var v=this;h({url:C,content:c.mixin({f:"json"}),callbackParamName:"callback"}).then(function(A){v._processServiceJson(A,y)},function(A){v._errorHandler(A)})}},_processServiceJson:function(C,
y){var v=this;C.relatedFeatures&&C.relatedFeatures.featuresUrl&&C.relatedFeatures.joinField?(this._relatedUrl=C.relatedFeatures.featuresUrl,this.objectIdField=this._joinField=C.relatedFeatures.joinField,h({url:this._relatedUrl,content:{f:"json"},callbackParamName:"callback"}).then(function(A){A=A.fields||[];var G=l.map(C.fields,function(F){return F.name.toLowerCase()});l.forEach(A,function(F){-1===l.indexOf(G,F.name.toLowerCase())&&C.fields.push(F)});y.resourceInfo=C;v._initFeatureLayer(v._url,y)},
function(A){v.onError({error:A})})):(y.resourceInfo=C,this._initFeatureLayer(this._url,y))},_initLayer:function(C,y){this.inherited(arguments);if(C){var v;if(C.layerDefinition)this.purgeOptions=new E(this,this._params.purgeOptions||{}),this.socketUrl=this._params.socketUrl||C.layerDefinition.socketUrl||void 0;else{if(this._params.socketUrl)this.socketUrl=this._params.socketUrl;else{var A=this._getWebsocketConnectionInfo(C),G=A.urls;G&&G.length?(this._socketUrls=G,this.socketUrl=G[0],this.socketDirection=
"broadcast"===this._params.socketDirection?"broadcast":"subscribe",this.socketUrl+="/"+this.socketDirection,this._websocketToken=A.token,G.length>this.maxReconnectAttempts&&(this.maxReconnectAttempts=G.length)):(this.socketUrl=void 0,A="No web socket urls were retrieved from the Stream Service. Layer will not attempt to connect.","https:"===location.protocol&&(A+=" An insecure web socket connection cannot be made from a secure web page."),this.onError(Error(A)))}if(this._params.filter)try{this._filter=
v=this._makeFilter(this._params.filter)}catch(F){this.onError(Error("Error trying to create filter object: "+F+". Layer will not have filter applied")),this._filter=null}if(this._params.geometryDefinition||this._outFields||this._defnExpr){v=v||{};v.geometry=this._params.geometryDefinition;v.outFields=this._outFields;v.where=this._defnExpr;try{this._filter=v=this._makeFilter(v)}catch(F){this.onError(Error("Error trying to create filter object: "+F+". Layer will not have filter applied")),this._filter=
null}}}this.maximumTrackPoints=this._params.maximumTrackPoints||0===this._params.maximumTrackPoints?this._params.maximumTrackPoints:1;(this._params.refreshRate||0===this._params.refreshRate)&&this._mode&&this._mode._setRefreshRate&&this._mode._setRefreshRate(this._params.refreshRate);this._keepLatestUrl=C.keepLatestArchive?C.keepLatestArchive.featuresUrl:null;C.relatedFeatures&&C.relatedFeatures.featuresUrl&&C.relatedFeatures.joinField&&(this._relatedUrl=C.relatedFeatures.featuresUrl,this.objectIdField=
this._joinField=C.relatedFeatures.joinField);this.objectIdField||this._makeObjectIdField();this._map&&this.socketUrl&&!this._connected&&this.connect()}},_isWebGLCompatible:function(){return!1},_setMap:function(C){var y=this.inherited(arguments),v=this._getRenderer();this.timeInfo&&(this._trackIdField||v&&(v.latestObservationRenderer||v.trackRenderer))&&(this._trackManager=new g(this),this._trackManager.initialize(C));this.socketUrl&&!this._connected&&this._map&&this.connect();return y},_unsetMap:function(C,
y){l.forEach(this._connects,B.disconnect);(this._connected||this._reconnecting||this.socket)&&this.disconnect();this._togglePurgeT();this.inherited(arguments);this._map=null},_suspend:function(){this._togglePurgeT();this.inherited(arguments)},_resume:function(){this.inherited(arguments);this._togglePurgeT(!0)},clear:function(){try{this._mode&&this._mode._clearDrawBuffer&&this._mode._clearDrawBuffer(),this._mode&&this._mode._clearTimeBin&&this._mode._clearTimeBin(),this._mode&&this._mode._clearFeatureMap&&
this._mode._clearFeatureMap(),this._trackManager&&this._trackManager.clearTracks()}catch(C){}this.inherited(arguments);this._trackManager&&this._trackManager.createTracklineContainer()},redraw:function(){this._mode&&this._mode._flushDrawBuffer&&this._mode._flushDrawBuffer();this.inherited(arguments)},setDefinitionExpression:function(C){this.setFilter({where:C})},getDefinitionExpression:function(){if(this._filter)var C=this._filter.where;return C},destroy:function(){this.disconnect();this.inherited(arguments)},
onResume:function(C){this.inherited(arguments)},setGeometryDefinition:function(C){this.setFilter({geometry:C})},getGeometryDefinition:function(){if(this._filter)var C=this._filter.geometry;return C},connect:function(C){var y=new u,v={},A=this._filter,G,F,H=this.socketUrl,L;try{this._connected||this._connecting?y.reject(Error("Cannot start new connection process. Layer is connecting.")):(this._connecting=!0,this._getRelatedFeatures().then(function(){return this._getKeepLatestFeatures()}.bind(this)).then(function(){this._websocketToken&&
(v.token=this._websocketToken);this._map&&this._map.spatialReference&&this.spatialReference&&this._map.spatialReference.wkid!==this.spatialReference.wkid&&(v.outSR=this._map.spatialReference.wkid);if(A)for(F in A)null!==A[F]&&(G="geometry"===F?JSON.stringify(A[F]):A[F],v[F]=G);H+="?"+d.objectToQuery(v);L=this._createConnection(H,C);y.resolve(L)}.bind(this)).otherwise(function(M){y.reject(M)}))}catch(M){C&&(C(M,!1),y.reject(M)),this.onConnectionError({error:M})}return y.promise},disconnect:function(C){var y=
this._refreshing?"Disconnecting as part of layer refresh cycle":"Connection closed from client",v=this._refreshing?!0:!1;this._reconnectTimeoutId&&clearTimeout(this._reconnectTimeoutId);this._refreshing=this._reconnecting=this._connecting=this._connected=!1;this.socket&&this.socket.close();this.onDisconnect({willReconnect:v,message:y});C&&C(null,!0)},setFilter:function(C){if(this._collection)return this.onError("Filter can only be set when the source of the layer is a Stream Service"),!1;try{if(void 0!==
C.outFields){var y=Error("Outfields property cannot be changed after layer is created");this.onFilterChange({filter:this.getFilter(),error:y});return!1}var v=this._makeFilter(C)}catch(A){return y=Error(A),this.onFilterChange({filter:this.getFilter(),error:y}),!1}if(this.socket)C={filter:v},this.socket.send(JSON.stringify(C));else q.once(this,"connect",function(A){this.setFilter(v)});return!0},getFilter:function(){var C=this._filter,y={},v=["geometry","outFields","where"];C&&l.forEach(v,function(A){var G=
C[A];G&&("geometry"===A?G=b.fromJson(G):"outFields"===A&&(G=G.split(",")),y[A]=G)});return y},setMaximumTrackPoints:function(C){if(!C&&0!==C)return!1;this.maximumTrackPoints=C;this._mode.propertyChangeHandler(3)},getUniqueValues:function(C){var y={},v=[];var A=this._getField(C,!0);if(!A)return v;C=A.name;l.forEach(this.graphics||[],function(G){G=(G.attributes||{})[C];void 0===G||y[G]||(y[G]=1,v.push(G))});v.sort(function(G,F){return G<F?-1:G>F?1:0});return v},getLatestObservations:function(){var C=
[];return C=this._trackManager?this._trackManager.getLatestObservations():this.graphics},setPurgeInterval:function(C){var y=this.purgeInterval;this.purgeInterval=C;this._togglePurgeT();C&&this._togglePurgeT(!0);if(y!==C)this.onPurgeIntervalChange();return this},_togglePurgeT:function(C){if(C&&this.purgeInterval){var y=this;clearTimeout(this._purgeT);this._mode&&this._mode._flushDrawBuffer&&(this._purgeT=setTimeout(function(){y.updating||y.suspended||(y._mode._flushDrawBuffer(),y._togglePurgeT(!0))},
6E4*this.purgeInterval))}else this._purgeT&&(clearTimeout(this._purgeT),this._purgeT=null)},onMessage:function(){},onConnect:function(){},onDisconnect:function(){},onFilterChange:function(){},onAttemptReconnect:function(){},onConnectionError:function(){},onPurgeIntervalChange:function(){},_createConnection:function(C,y){var v=this,A=new WebSocket(C);A.onopen=function(){v.socket=A;v._connected=!0;v._connecting=!1;v._reconnecting=!1;v._reconnectAttempts=0;v._bind();v.onConnect();y&&y(null,!0)};A.onclose=
function(G){var F=!0,H=v._connected,L=null;if(v._connected||v._reconnecting){if(G.code){var M="Connection failed: ";if(1001===G.code)M+=G.reason||"Service is going away.",F=!1;else if(4400===G.code)M+=G.reason||"Invalid url parameters. Check filter properties.",F=!1;else if(4404===G.code)M+="Service not found",F=!1;else if(4401===G.code||4403===G.code)M+="Not authorized",F=!1}F&&(v._reconnectAttempts+=1,v._reconnectAttempts>v.maxReconnectAttempts&&(M="Maximum reconnect attempts exceeded",F=!1,H=!0));
v._connected=!1;H&&(M&&(L=Error(M)),v.onDisconnect({error:L,willReconnect:F}));F?v._attemptReconnect():v.socket=null}else v.socket||(L=Error("Could not make connection to service"),v.onConnectionError({error:L})),v.socket=null,v._connected=!1};A.onerror=function(G){};return A},_getKeepLatestFeatures:function(){var C=new u;this._map&&this._keepLatestUrl&&!this._keepLatestQueried&&this._mode._fetchArchive?this._mode._fetchArchive(this._keepLatestUrl).then(function(){C.resolve()}.bind(this)).otherwise(function(y){C.reject(y)}).always(function(){this._keepLatestQueried=
!0}.bind(this)):C.resolve();return C.promise},_getRelatedFeatures:function(){var C=new u;this._map&&this._relatedUrl&&!this._relatedQueried&&this._mode._fetchArchive?this._mode._fetchArchive(this._relatedUrl).then(function(){C.resolve()}.bind(this)).otherwise(function(y){C.reject(y)}).always(function(){this._relatedQueried=!0}.bind(this)):C.resolve();return C.promise},_purge:function(){var C,y=[];if(this.purgeOptions.displayCount&&this.graphics.length>this.purgeOptions.displayCount)for(C=0;C<this.graphics.length-
this.purgeOptions.displayCount;C++){var v=this.graphics[C];y.push(v)}0<y.length&&(this._mode._removeFeatures(y),this._trackManager&&this._trackManager.removeFeatures(y))},_bind:function(){var C=this;this.socket.onmessage=function(y){C._onMessage(JSON.parse(y.data))}},_onMessage:function(C){var y=this;this.onMessage(C);var v={create:function(A){y._create(A)},update:function(A){y._update(A)},"delete":function(A){y._delete(A)}};if(C.type)v[C.type](C.feature);else C.hasOwnProperty("filter")?y._handleFilterMessage(C):
this._create(C)},_create:function(C){function y(G){if(!v._featureHasOID(G,A)){if(!G.geometry)return!1;G.attributes=G.attributes||{};G.attributes[A]=v._nextId++}G=G.declaredClass?G:new n(G);v._mode.drawFeature(G)}var v=this,A=v.objectIdField;C.length?C.forEach(function(G){G&&y(G)}):C&&y(C)},_delete:function(C){var y=this,v=C[y.objectIdField]||C.attributes[y.objectIdField],A=!1;this.graphics.forEach(function(G){G.attributes[y.objectIdField]==v&&(A=G)});A&&this.remove(A)},_update:function(C){var y=this,
v=!1;this.graphics.forEach(function(A){A.attributes[y.objectIdField]==C.attributes[y.objectIdField]&&(v=A)});v&&(C.attributes&&v.setAttributes(C.attributes),C.geometry&&v.setGeometry(b.fromJson(C.geometry)))},_makeFilter:function(C){var y=null;C=C||{};if(void 0!==C.geometry)if(y=y||{},null===C.geometry)y.geometry=null;else{var v="string"===typeof C.geometry?b.fromJson(JSON.parse(C.geometry)):C.geometry.declaredClass?C.geometry:b.fromJson(C.geometry);if(!v||"point"===v.type)throw"Query object contains invalid geometry";
"extent"!==v.type&&(v=v.getExtent());if(!v||0===v.getHeight()&&0===v.getWidth())throw"Invalid filter geometry: Extent cannot have a height and width of 0";y.spatialRel="esriSpatialRelIntersects";y.geometryType="esriGeometryEnvelope";y.geometry=v.toJson()}void 0!==C.where&&(y=y||{},y.where=C.where);if(void 0!==C.outFields&&(y=y||{},C="string"===typeof C.outFields?"*"===C.outFields?null:C.outFields.replace(/,\s+/g,",").split(","):null===C.outFields?null:C.outFields,C=this._makeOutFields(C))){if(C.errors&&
0<C.errors.length)throw"Invalid filter outFields. "+C.errors.join(",");y.outFields=C.fields?C.fields.join(","):null}return y},_makeOutFields:function(C){var y=this,v=[],A=[],G={fields:null};if(!C||0===C.length)return G;l.forEach(C,function(F){if("*"===F)return G;var H=y._getField(F,!0);H?v.push(H.name):A.push("Field named "+F+" not found in schema.")});C=y._getOutFields();l.forEach(C,function(F){y._getField(F)&&-1===l.indexOf(v,F)&&v.push(F)});G.fields=v;G.errors=A;return G},_handleFilterMessage:function(C){C.error?
(C=Error(C.error.join(",")),this.onFilterChange({filter:this.getFilter(),error:C})):(C=C.filter,C.geometry&&"string"===typeof C.geometry&&(C.geometry=JSON.parse(C.geometry)),this._filter=C,this.onFilterChange({filter:this.getFilter()}))},_getWebsocketConnectionInfo:function(C){var y={urls:[]},v,A=[],G=[],F;C.streamUrls&&l.forEach(C.streamUrls,function(M){"ws"===M.transport&&(v=M.urls,y.token=M.token)});if(!v)return y;l.forEach(v,function(M){0===M.lastIndexOf("wss",0)?G.push(M):A.push(M)});C="https:"===
location.protocol||0===this.url.lastIndexOf("https:",0)?G:0===A.length?G:A;if(1<C.length)for(F=0;F<C.length-1;F++){var H=F+Math.floor(Math.random()*(C.length-F));var L=C[H];C[H]=C[F];C[F]=L}y.urls=C;return y},_attemptReconnect:function(){var C=this;this._reconnectTimeoutId=null;C._connected=!1;if(!C._socketUrls)return!1;if(!C._collection&&!C._reconnecting&&C.socket&&C.credential)return C._reconnecting=!0,C._getServiceConnectionMetadata(C._attemptReconnect),!1;C._reconnecting=!0;C.socket=null;if(C._reconnectAttempts>
C.maxReconnectAttempts)return C._reconnecting=!1;C.socketUrl=C._socketUrls[C._reconnectAttempts>C._socketUrls.length-1?C._reconnectAttempts%C._socketUrls.length:C._reconnectAttempts];C.socketUrl+="/"+C.socketDirection;var y=C._randomIntFromInterval(0,1E3);this._reconnectTimeoutId=setTimeout(function(){C.onAttemptReconnect({count:C._reconnectAttempts,url:C.socketUrl});C.connect()},1E3*C._reconnectAttempts+y)},_getServiceConnectionMetadata:function(C){var y=this,v=y._url.path;C="function"===typeof C?
C:null;h({url:v,content:c.mixin({f:"json"},this._url.query),callbackParamName:"callback"}).then(function(A){A=y._getWebsocketConnectionInfo(A);y._websocketToken=A.token;C&&C()},function(A){y.onError(Error(A))})},_setDefaultRenderer:function(){var C=this.geometryType,y=new e([5,112,176,.8]),v=new e([255,255,255]);v=new x(x.STYLE_SOLID,v,1);if("esriGeometryPoint"===C||"esriGeometryMultipoint"===C)var A=new z(z.STYLE_CIRCLE,10,v,y);else if("esriGeometryPolyline"===C)A=new x(x.STYLE_SOLID,y,2);else if("esriGeometryPolygon"===
C||"esriGeometryEnvelope"===C)y=new e([5,112,176,.2]),v=new e([5,112,176,.8]),v=new x(x.STYLE_SOLID,v,1),A=new w(w.STYLE_SOLID,v,y);A&&this.setRenderer(new D(A))},_makeObjectIdField:function(){var C=1,y,v=[];if(!this.objectIdField){var A=this.fields.length;for(y=0;y<A;y++)v.push(this.fields[y].name.toLowerCase());for(;-1!==l.indexOf(v,"objectid_"+C);)C+=1;this.objectIdField="objectid_"+C;this.fields.push({name:"objectid_"+C,type:"esriFieldTypeOID",alias:"objectid_"+C,nullable:!1})}},_featureHasOID:function(C,
y){return C.attributes&&(C.attributes[y]||0===C.attributes[y])},_randomIntFromInterval:function(C,y){return Math.floor(Math.random()*(y-C+1)+C)}});c.setObject("layers.StreamLayer",f,a);return f})},"esri/layers/StreamTrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../graphic ../geometry/Point ../geometry/Polyline ./TrackManager".split(" "),function(f,B,l,e,c,u,t,d,q){f=f([q],{declaredClass:"esri.layers._StreamTrackManager",constructor:function(m){this.inherited(arguments);
var a=m.getMap().spatialReference;this.isWebMercator=a.isWebMercator();this.canWrap=a._isWrappable();this.wrapThreshold=this.isWebMercator?2.0037508342788905E7:180},initialize:function(m){this.inherited(arguments)},addFeatures:function(m,a){function h(z,D){var E,C;g[z]||(g[z]=[]);z=g[z];if(0<x){D.length>x&&D.splice(0,D.length-x);var y=D.length+z.length;y>x&&(E=z.splice(0,y-x))}y=D.length;for(C=0;C<y;C+=1)z.push(D[C]);return{deletes:E,adds:D}}var n={},r={},k;if(a)return this.inherited(arguments),n;
var g=this.trackMap;var b=this.layer;var w=b._trackIdField;var x=b.maximumTrackPoints||0;l.forEach(m,function(z){var D=z.attributes[w];z.visible&&(r[D]||(r[D]=[]),r[D].push(z))});for(k in r)r.hasOwnProperty(k)&&(b=h(k,r[k]),n[k]=b);return n},removeFeatures:function(m){var a=[],h=this.layer.objectIdField,n=this.layer._trackIdField;m&&(l.forEach(m,function(r){var k;var g=r.attributes[n];var b=r.attributes[h];if(k=this.trackMap[g])for(r=0;r<k.length;r+=1){var w=k[r];if(w.attributes[h]===b){this.trackMap[g].splice(r,
1);-1===l.indexOf(g)&&a.push(g);break}}},this),0<m.length&&this.refreshTracks(a))},drawTracks:function(m){function a(w){var x=k[w],z=x&&1<x.length,D=h.trackLineMap[w];D&&!z&&(n.remove(D),delete h.trackLineMap[w],D=null);if(!z)return!1;z=[];for(var E=[],C,y=x.length,v=0;v<y;v++)if(C=x[v].geometry){C=C.normalize();var A=C.x,G=0,F=!1;H&&h.canWrap&&(G=A-H.x,Math.abs(G)>h.wrapThreshold&&(F=!0));F?(E.push([h.getWrappedX(A),C.y]),z.push(E.slice(0)),E=[[A,C.y]]):E.push([A,C.y]);var H=new t(A,C.y,g)}1<E.length&&
z.push(E);x={};x[b]=w;if(z.length)if(D){for(var L=D.geometry;L.paths.length;)L.removePath(L.paths.length-1);z.forEach(function(M){L.addPath(M)});D.setGeometry(L)}else D=new u(new d({paths:z,spatialReference:g}),null,x),n.add(D),h.trackLineMap[w]=D}var h=this,n=this.container,r;if(n){var k=this.trackMap;var g=this.map.spatialReference;var b=this.layer._trackIdField;if(m)l.forEach(m,function(w){a(w)});else for(r in k)k.hasOwnProperty(r)&&a(r)}},refreshTracks:function(m){function a(k){var g;k=h[k]||
[];var b=k.length;for(g=0;g<b;g++)n._repaint(k[g],null,!0)}var h=this.trackMap,n=this.layer,r;this.drawTracks(m);if(m)l.forEach(m,function(k){a(k)});else for(r in h)h.hasOwnProperty(r)&&a(r)},getLatestObservations:function(){var m,a=this.trackMap,h=[];for(m in a)if(a.hasOwnProperty(m)){var n=a[m];h.push(n[n.length-1])}return h},destroy:function(){this.inherited(arguments);this.trackLineMap=null},getWrappedX:function(m){var a=this.isWebMercator,h=a?2.0037508342788905E7:180;a=a?-2.0037508342788905E7:
-180;return(0<m?a:h)-((0<m?h:a)-m)}});B.setObject("layers._StreamTrackManager",f,c);return f})},"esri/layers/PurgeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Stateful","dojo/has","../kernel"],function(f,B,l,e,c){f=f([l],{declaredClass:"esri.layers.PurgeOptions",constructor:function(u,t){this.parent=u;for(var d in t)this[d]=t[d]},_displayCountSetter:function(u){this.displayCount=u;this.parent.refresh()}});B.setObject("layers.PurgeOptions",f,c);return f})},"arcgisonline/map/core/projectExtent":function(){define("require exports tslib ../utils/contains esri/geometry/Extent esri/geometry/webMercatorUtils esri/geometry/Polygon esri/tasks/GeometryService".split(" "),
function(f,B,l,e,c,u,t,d){function q(m,a){if(m&&a.xmin>a.xmax){var h=m.valid[1]-a.xmin,n=a.xmax-m.valid[0];h>n?a.xmax=m.valid[1]+n:a.xmin=m.valid[0]-h}}e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);return function(m,a,h,n,r,k){var g=[102113,102100,3857],b=m.spatialReference.wkid;if(b===a.wkid)return h([m],null);if(4326===b&&(0,e.default)(g,a.wkid))return m.ymin=Math.max(m.ymin,-89.99),m.ymax=Math.min(m.ymax,89.99),m=u.default.geographicToWebMercator(m),
r=m.spatialReference._getInfo(),q(r,m),m.spatialReference.wkid=a.wkid,h([m],null);if((0,e.default)(g,b)&&4326===a.wkid)return m=u.default.webMercatorToGeographic(m),r=m.spatialReference._getInfo(),q(r,m),h([m],null);k||(k=new d.default(window.esriGeowConfig.self.helperServices.geometry.url));if((null===r||void 0===r?0:r.wrapAround180)&&"extent"===m.type){var w=m;m=t.default.fromExtent(m)}k.project([m],a,function(x,z){var D;if(!(0<(null===x||void 0===x?void 0:x.length)&&"extent"===(null===(D=x[0])||
void 0===D?void 0:D.type))||isNaN(x[0].xmin)||isNaN(x[0].ymin)||isNaN(x[0].xmax)||isNaN(x[0].ymax)){if(x&&0<x.length&&x[0]&&"point"===x[0].type&&!isNaN(x[0].x)&&!isNaN(x[0].y))return h(x,z);if(w&&"polygon"===x[0].type){if(1===x[0].rings.length)x[0]=new c.default(x[0].getExtent());else{D=(new t.default(x[0].spatialReference.toJson())).addRing(x[0].rings[0]).getExtent();var E=(new t.default(x[0].spatialReference.toJson())).addRing(x[0].rings[1]).getExtent();x[0]=E;x[0].xmin=E.xmin-D.getWidth();x[0].ymin=
Math.min(E.ymin,D.ymin);x[0].ymax=Math.max(E.ymax,D.ymax)}return h(x,z)}if(n)return n()}else return h(x,z)},n)}})},"arcgisonline/map/utils/contains":function(){define(["require","exports"],function(f,B){Object.defineProperty(B,"__esModule",{value:!0});B.default=function(l,e){for(var c=l.length;c--;)if(l[c]===e)return!0;return!1}})},"arcgisonline/map/core/getExtentFromCenter":function(){define(["require","exports","tslib","./getExtentForScale","esri/geometry/Extent"],function(f,B,l,e,c){e=l.__importDefault(e);
c=l.__importDefault(c);return function(u,t,d){u=new c.default(u.x-1,u.y-.5,u.x+1,u.y+.5,u.spatialReference);return(0,e.default)(u,t,d)}})},"arcgisonline/map/core/getExtentForScale":function(){define(["require","exports","tslib","esri/config","esri/WKIDUnitConversion"],function(f,B,l,e,c){e=l.__importDefault(e);c=l.__importDefault(c);return function(u,t,d){var q=20015077/180,m=u.spatialReference,a=null===m||void 0===m?void 0:m.wkid,h=null===m||void 0===m?void 0:m.wkt;m=null;a?m=c.default.values[c.default[a]]:
h&&-1!==h.search(/^PROJCS/i)&&(a=/UNIT\[([^\]]+)\]\]$/i.exec(h),null===a||void 0===a?0:a[1])&&(m=parseFloat(a[1].split(",")[1]));return u.expand(d*t/(39.37*(m||q)*e.default.defaults.screenDPI)/u.getWidth())}})},"arcgisonline/map/thumbnail/getItemData":function(){define(["dojo/Deferred","dojo/_base/lang","arcgisonline/sharing/util"],function(f,B,l){return function(e,c,u){l.request({url:window.esriGeowConfig.restBaseUrl+"content/items/"+e+"/data"},{disableIdentityLookup:!0}).then(B.hitch(this,function(t){if(t&&
(t.wfsInfo||t.wmtsInfo))var d=t;else if(t&&t.layers)d=t.layers;else if(u){u();return}c&&c(d)}),B.hitch(this,function(t){u&&u(t)}))}})},"arcgisonline/map/layer/getServiceInfo":function(){define("dojo/_base/lang dojo/_base/array dojo/topic dojo/Deferred esri/kernel esri/request esri/SpatialReference esri/geometry/Extent arcgisonline/sharing/util arcgisonline/map/core/projectExtent arcgisonline/sharing/dijit/dialog/GeneralDlg".split(" "),function(f,B,l,e,c,u,t,d,q,m,a){var h=window.esriGeowConfig;return function w(r,
k,g,b){var x=function(y,v){clearTimeout(E);l.publish("ServiceAnswerReceived",[]);var A=y.fullExtent;A||(A=y.extent);!A||A.spatialReference&&(A.spatialReference.wkid||A.spatialReference.wkt)||(y.fullExtent=null,A=y.extent=null);(h.allSSL||"https:"==location.protocol)&&y.tileServers&&y.tileServers.length&&B.forEach(y.tileServers,function(G,F){if(q.isHostedService(G)||q.supportsHttps(G))y.tileServers[F]=G.replace("http:","https:")});A?g&&g(y,r,v):y.spatialReference&&(y.spatialReference.wkid||y.spatialReference.wkt)?
(A=new d(-180,-90,180,90,new t({wkid:4326})),m(A,new t(y.spatialReference),f.hitch(this,function(G){y.fullExtent=G[0];y.extent=G[0];g&&g(y,r,v)}),f.hitch(this,function(G,F){b&&(G.details=[],G.details.push("Missing extent and could not project GCS into service spatial reference."),b(G,F))}))):g&&g(y,r,v)},z=function(y,v){clearTimeout(E);l.publish("ServiceAnswerReceived",[]);b&&b(y,v)},D=!1,E=setTimeout(function(){clearTimeout(E);E=null;var y=r.toLowerCase();if(-1===y.indexOf("/arcgis/rest/")&&-1<y.indexOf("/arcgis/"))return r=
r.replace("/arcgis/","/arcgis/rest/").replace("/ArcGIS/","/ArcGIS/rest/"),w(r,k,g,b);c.id.isBusy()?D=!0:k?(a.prototype.statics.getInstance().show({title:c.i18nBundle.generalDlg.waitDlgTitle,message:k}),E=setTimeout(function(){clearTimeout(E);E=null;c.id.isBusy()?D=!0:z("Request timed out.",{args:{url:r}})},45E3)):z("Request timed out.",{args:{url:r}})},1E4),C=r+(-1<r.indexOf("?")?"\x26f\x3djson":"?f\x3djson");u({url:C,callbackParamName:"callback",load:function(y,v){if(E||D)clearTimeout(E),y?y.error&&
""!==y.error?z(y.error,v):x(y,v):z("Request error.",{args:{url:r}})},error:function(y){if(E||D)clearTimeout(E),y&&y.message&&-1<y.message.indexOf("Aborted the Sign-In process")?l.publish("ServiceAnswerReceived",[]):z(y,{args:{url:r}})}})}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromImageryItem":function(){define("require exports tslib esri/IdentityManager esri/request esri/urlUtils".split(" "),function(f,B,l,e,c,u){function t(h,n){return new Promise(function(r,k){return window.require(["esri/layers/ArcGISImageServiceLayer",
"esri/layers/MosaicRule","esri/layers/RasterFunction","esri/renderers/jsonUtils"],function(g,b,w,x){var z;g=new g(h);g.onError(function(){return k(Error("failed to generate thumbnail for service ".concat(h)))});var D=n.layerProperties;D&&((null===(z=D.bandIds)||void 0===z?0:z.length)&&g.setBandIds(D.bandIds,!0),D.mosaicRule&&g.setMosaicRule(new b(D.mosaicRule),!0),D.renderingRule&&g.setRenderingRule(new w(D.renderingRule),!0),D.renderer&&g.setRenderer(x.fromJson(D.renderer),!0));g.getImageUrl(n.extent||
n.serviceInfo.extent,n.size[0],n.size[1],function(E){if(!n.returnDataURL)return r({url:E});(0,c.default)({url:E,content:{},handleAs:"arraybuffer"}).then(function(C){var y=q(C);if(y)return m(C,y);k(Error("failed to generate thumbnail for service ".concat(h)))})})})})}function d(h,n){return l.__awaiter(this,void 0,void 0,function(){var r,k,g,b,w,x,z,D,E,C,y,v,A,G,F,H,L,M,Q,S,I,P,J,U,Y;return l.__generator(this,function(aa){switch(aa.label){case 0:return r=n.serviceInfo,k=n.size,g=n.query,b=n.layerProperties,
w=n.returnDataURL,x=null!==(J=n.extent)&&void 0!==J?J:r.extent,z=x.xmin,D=x.ymin,E=x.xmax,C=x.ymax,y=x.spatialReference,v="".concat(z,",").concat(D,",").concat(E,",").concat(C),A=y?y.wkid||y.wkt:null,G=r.serviceDataType,F=r.bandCount,H=2===F&&(null===G||void 0===G?0:G.includes("Vector"))?{rasterFunction:"VectorFieldRenderer",rasterFunctionArguments:{MagnitudeBandID:0,DirectionBandID:1,IsUVComponents:"esriImageServiceDataTypeVector-UV"===G,ReferenceSystem:1,MassFlowAngleRepresentation:0,SymbolTileSize:30,
SymbolTileSizeUnits:100,CalculationMethod:"Vector Average",SymbologyName:"Single Arrow",MinimumMagnitude:1,MaximumMagnitude:-1,MinimumSymbolSize:40,MaximumSymbolSize:80},outputPixelType:"U8",variableName:"Raster"}:null===b||void 0===b?void 0:b.renderingRule,L=(null===b||void 0===b?void 0:b.mosaicRule)&&JSON.stringify(b.mosaicRule),M=w?"image":"json",Q=w?"arraybuffer":"json",[4,(0,c.default)({url:"".concat(h,"/exportImage"),content:l.__assign({bbox:v,bboxSR:A,size:k.join(","),bandIds:null===(U=null===
b||void 0===b?void 0:b.bandIds)||void 0===U?void 0:U.join(","),mosaicRule:L,renderingRule:H&&JSON.stringify(H),f:M},g),handleAs:Q})];case 1:S=aa.sent();if(w){I=q(S);if(!I)throw Error("failed to generate thumbnail for service ".concat(h));return[2,m(S,I)]}(P=(null===(Y=e.default.findCredential(h))||void 0===Y?void 0:Y.token)||(null===g||void 0===g?void 0:g.token))&&(null===S||void 0===S?0:S.href)&&(S.href+="?token\x3d".concat(P));return[2,{url:null===S||void 0===S?void 0:S.href}]}})})}function q(h){if(!h||
10>h.byteLength)return null;h=new Uint8Array(h,0,4);return 255===h[0]&&216===h[1]?"jpeg":137===h[0]&&80===h[1]&&78===h[2]&&71===h[3]?"png":null}function m(h,n){h=new Blob([h],{type:"image/".concat(n)});var r=new FileReader;r.readAsDataURL(h);return new Promise(function(k){r.onloadend=function(){k({dataURL:r.result})}})}function a(h){var n,r;"string"===typeof h.extent?(h=h.extent.split(",").map(function(k){return parseFloat(k)}),4===h.length&&(r=[[h[0],h[1]],[h[2],h[3]]])):0<(null===(n=h.extent)||
void 0===n?void 0:n.length)&&(r=h.extent);return(null===r||void 0===r?0:r.length)?{xmin:r[0][0],ymin:r[0][1],xmax:r[1][0],ymax:r[1][1],spatialReference:{wkid:4326}}:null}Object.defineProperty(B,"__esModule",{value:!0});e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);B.default=function(h,n){return l.__awaiter(this,arguments,void 0,function(r,k,g){var b,w,x,z,D,E,C,y,v,A,G,F,H,L,M,Q,S,I,P,J,U,Y,aa,la,T;void 0===g&&(g=!0);return l.__generator(this,function(N){switch(N.label){case 0:return b=
u.default.urlToObject(r.url),w=b.path,x=b.query,(z=r.serviceInfo)&&Object.keys(z).length?[3,2]:[4,(0,c.default)({url:w,content:l.__assign({f:"json"},x)})];case 1:z=N.sent(),N.label=2;case 2:if(null===z||void 0===z||!z.bandCount)throw Error("failed to access service info for service: ".concat(w));if(D=null===(J=z.capabilities)||void 0===J?void 0:J.toLowerCase().includes("tilesonly"))throw Error("unsupported thumbnail request for tiled imagery");if(null===(U=r.itemData)||void 0===U)return[3,3];C=U;
return[3,5];case 3:return[4,r.getData()];case 4:C=N.sent(),N.label=5;case 5:E=null!==(Y=C)&&void 0!==Y?Y:{};y=E.bandIds;v=E.mosaicRule;A=E.renderingRule;G=null===(la=null===(aa=E.layerDefinition)||void 0===aa?void 0:aa.drawingInfo)||void 0===la?void 0:la.renderer;if((F=(null===y||void 0===y?void 0:y.length)||v||A||G)||r.isHostedService||!(10.1<=z.currentVersion))return[3,7];H="".concat(w,"/info/thumbnail");return[4,(0,c.default)({url:H,content:l.__assign({},x),handleAs:"arraybuffer"})];case 6:L=N.sent();
if(M=q(L)){if(g)return[2,m(L,M)];S=(Q=(null===(T=e.default.findCredential(w))||void 0===T?void 0:T.token)||(null===x||void 0===x?void 0:x.token))?"".concat(H,"?token\x3d").concat(Q):H;return[2,{url:S}]}N.label=7;case 7:return I=a(r),P=F?{bandIds:y,mosaicRule:v,renderingRule:A,renderer:G}:null,G?[2,t(w,{serviceInfo:z,extent:I,size:k,layerProperties:P,query:x,returnDataURL:g})]:[2,d(w,{serviceInfo:z,extent:I,size:k,layerProperties:P,query:x,returnDataURL:g})]}})})}})},"arcgisonline/pages/portal/CommentsUtil":function(){define("require exports tslib ./Comment ../../sharing/util dojo/promise/all dojo/Deferred dojo/_base/lang".split(" "),
function(f,B,l,e,c,u,t,d){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);return function(){function q(){}q.fetchComments=function(m,a,h){var n=this,r=new t.default,k=h.item,g=(null===k||void 0===k?void 0:k.itemUrl)+"/comments",b,w=(null===h||void 0===h?void 0:h.parentId)||"none";m=m||(null===h||void 0===h?void 0:h.nextStart)||h.start;var x=h.sortField,z=h.sortOrder;a=a||h.overrideNum||h.num;var D=h.comments;if(-1===m)r.resolve(D);
else{var E={parentId:w,sortField:x,sortOrder:z,start:m,num:a};c.default.request({url:g,content:E}).then(function(C){return n._toPortalComments(k,C)}).then(function(C){b=d.default.mixin(h,C,{num:h.num,comments:[].concat(h.comments||[]).concat(C.comments)});E=C;return E.comments}).then(function(C){return n._getOwnerProfiles(C)}).then(function(C){E.comments=E.comments.map(function(y,v){y.ownerProfile=C[v];return y});r.resolve({commentsInfo:b,comments:b.comments})})}return r};q._toPortalComments=function(m,
a){var h=new t.default,n=m.portal;a.comments=a.comments.map(function(r){return new e.default(l.__assign(l.__assign({},r),{item:m,portal:n}))});h.resolve(a);return h};q._getOwnerProfiles=function(m){m=m.map(function(a){return a.portal.getUserProfile(a.owner)});return(0,u.default)(m)};return q}()})},"arcgisonline/pages/portal/Comment":function(){define("require exports tslib ../pageUtil ../../tsutils/declareDecorator dojo/Deferred dojo/_base/lang dojo/Stateful esri/arcgis/Portal".split(" "),function(f,
B,l,e,c,u,t,d,q){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);return function(){function m(a){this.owner=a.owner||"deletedUser";this.repliesInfo={parentId:this.id,sortField:"created",sortOrder:"desc",start:0,num:100,comments:[],item:this.item};this.comment=e.default.linkify(unescape(a.comment))}m.prototype.postscript=function(){};m.prototype.getReplies=function(a,h){var n=this,r=new u.default,k=window.require("arcgisonline/pages/portal/CommentsUtil");
this.numReplies?k.fetchComments(a,h,this.repliesInfo).then(function(g){n.repliesInfo=t.default.mixin(n.repliesInfo,g.commentsInfo);n.replies=n.repliesInfo.comments;r.resolve(n.replies)}):r.resolve([]);return r};return m=l.__decorate([(0,c.default)(q.default.PortalComment,d.default)],m)}()})},"arcgisonline/pages/item/_Info":function(){define("require exports tslib ../../sharing/util ../utils/arrays dojo/i18n!../../nls/arcgisonline ../utils/url".split(" "),function(f,B,l,e,c,u,t){e=l.__importDefault(e);
c=l.__importDefault(c);u=l.__importDefault(u);return{Unknown:{privileges:[],openIn:[],types:[],attributes:[],classification:"file"},"Feature Service":{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:"is-layer is-2d is-scene-2 is-feature is-data is-desktopPro".split(" "),classification:"layer",hasServiceInfo:!0},"Map Service":{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],
types:["is-2d","is-scene-2","is-tile","is-desktopPro","is-mapService"],classification:"layer",hasServiceInfo:!0},"Media Layer":{defaultOpenText:u.default.itemLinks.openMapViewerBeta,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d"],classification:"layer",hasServiceInfo:!0},"Group Layer":{defaultOpenText:u.default.itemLinks.openMapViewerBeta,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d"],classification:"layer",hasServiceInfo:!0},"Map Image Layer":{defaultOpenText:u.default.itemLinks.openMapViewer,
defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-scene-2","is-desktopPro","is-service","is-mapImage"],classification:"layer",hasServiceInfo:!0},"Image Service":{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-desktopPro","is-service","is-scene-2","is-imageManagement"],classification:"layer",hasServiceInfo:!0},"Scene Service":{defaultOpenText:u.default.itemLinks.openSceneViewer,defaultOpenIcon:"launch",
openIn:["sceneViewer"],types:["is-3d","is-service","is-pro"],classification:"layer",hasServiceInfo:!0},"3DTiles Service":{types:["is-tile","is-service","is-scene-2"],openIn:["sceneViewer"],classification:"layer",hasServiceInfo:!0},Table:{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-table","is-data","is-desktopPro"],classification:"layer",hasServiceInfo:!0},"Feature Collection":{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",
openIn:["mapViewer"],types:["is-featureCollection","is-data","is-publish","is-views","is-pro"],classification:"layer"},"Route Layer":{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-featureCollection","is-publish","is-views"],classification:"layer"},"Geocoding Service":{types:["is-service"],classification:"layer"},"Geoenrichment Service":{types:["is-service"],classification:"layer"},"Network Analysis Service":{types:["is-service"],classification:"layer"},
"Globe Service":{types:["is-desktop"],classification:"layer",openLyr:!0},"Geoprocessing Service":{types:["is-desktop","is-service"],classification:"layer"},Tool:{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d","is-desktop","is-service","is-tool"],classification:"layer",hasServiceInfo:!0},"Geodata Service":{types:["is-service"],classification:"layer"},"Geometry Service":{classification:"layer"},"Workflow Manager Service":{types:["is-service"],
classification:"layer"},"Stream Service":{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d","is-service","is-streamLayer","is-pro"],classification:"layer",hasServiceInfo:!0},Feed:{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","iotFeed"],types:["is-2d","is-service","is-feedLayer","is-pro"],classification:"layer",hasServiceInfo:!0},"GeoBIM Project":{defaultOpenText:u.default.itemLinks.openGeoBIM,
defaultOpenIcon:"launch",openIn:["geoBIM"],types:["is-geoBIM"]},"GeoBIM Application":{defaultOpenText:u.default.itemLinks.openGeoBIM,defaultOpenIcon:"launch",openIn:["geoBIM"],types:["is-geoBIM"]},"Knowledge Graph":{defaultOpenText:u.default.itemLinks.openKnowledgeStudio,openIn:["knowledgeStudio"],types:["is-service","is-knowledge-studio"],classification:"layer",hasServiceInfo:!0},"Big Data Analytic":{defaultOpenText:u.default.itemLinks.openAnalyticsIoT,defaultOpenIcon:"launch",openIn:["iotViewer"],
types:["is-bigDataAnalytic"],classification:"app"},"Real Time Analytic":{defaultOpenText:u.default.itemLinks.openAnalyticsIoT,defaultOpenIcon:"launch",openIn:["iotViewer"],types:["is-realTimeAnalytic"],classification:"app"},WMS:{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-desktopPro","is-scene-2"],classification:"layer"},WFS:{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer",
"sceneViewer"],types:["is-2d","is-desktopPro","is-scene-2"],classification:"layer"},OGCFeatureServer:{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d"],classification:"layer"},WMTS:{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-desktopPro","is-scene-2"],classification:"layer"},KML:{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",
openIn:["mapViewer"],types:["is-2d","is-desktopPro"],classification:"layer"},"Elevation Layer":{defaultOpenText:u.default.itemLinks.openSceneViewer,defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d"],classification:"layer",hasServiceInfo:!0},"Vector Tile Service":{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer","viewStyle","downloadStyle"],types:["is-vectorTile","is-service","is-scene-2","is-pro"],classification:"layer",hasServiceInfo:!0,
hasViewStyle:!0},"Relational Database Connection":{classification:"layer"},Markup:{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-featureCollection","is-views"],classification:"layer"},"Video Service":{defaultOpenText:u.default.itemLinks.openExcalibur,defaultOpenIcon:"launch",openIn:["excaliburMediaViewer"],types:["is-excaliburMedia"],classification:"layer"},"Web Map":{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",
openIn:["mapViewer"],types:["is-map","is-desktopPro"],classification:"map",openPkg:!0},"Web Scene":{defaultOpenText:u.default.itemLinks.openSceneViewer,defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d","is-scene","is-pro"],classification:"map"},"3D Web Scene":{defaultOpenText:u.default.itemLinks.openSceneViewer,defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d"],classification:"map"},"Web Mapping Application":{defaultOpenText:u.default.itemLinks.viewApp,defaultOpenIcon:"launch",
openIn:["appViewer","configureApp","downloadAttachment"],types:["is-app","is-web"],classification:"app",hasItemData:!0},"Hub Initiative":{defaultOpenText:u.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Site Initiative":{defaultOpenText:u.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Hub Site Application":{defaultOpenText:u.default.itemLinks.viewApp,
defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Site Application":{defaultOpenText:u.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Hub Event":{defaultOpenText:u.default.itemLinks.viewInHub,defaultOpenIcon:"launch",openIn:["hubEventViewer"],types:["is-hubEvent"],classification:"app"},"Site Page":{defaultOpenText:u.default.itemLinks.viewApp,defaultOpenIcon:"launch",
openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},Application:{defaultOpenText:u.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer"],classification:"app",types:["is-app"]},"Mobile Application":{defaultOpenText:u.default.itemLinks.getApp,defaultOpenIcon:"launch",openIn:["appViewer","downloadAttachment"],types:["is-mobile-app","is-mobile"],classification:"app"},"Desktop Application":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",
openIn:["downloadAttachment"],types:["is-file","is-update","is-platform"],classification:"app"},"Native Application":{classification:"app"},"Workforce Project":{defaultOpenText:u.default.itemLinks.openWorkforce,defaultOpenIcon:"launch",openIn:["workforceViewer"],types:["is-workforceProject"],classification:"app",hasItemData:!0},Workflow:{defaultOpenText:u.default.itemLinks.openWorkflow,defaultOpenIcon:"launch",openIn:["workflowViewer"],types:["is-workflow","is-pro"],classification:"app",hasItemData:!0},
Form:{defaultOpenText:u.default.itemLinks.openSurvey123,defaultOpenIcon:"launch",openIn:["surveyViewer"],classification:"app"},"Insights Workbook":{defaultOpenText:u.default.itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights"],classification:"app"},"Insights Data Engineering Workbook":{defaultOpenText:u.default.itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights"],classification:"app"},"Insights Page":{defaultOpenText:u.default.itemLinks.openInsights,
defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsPage"],classification:"app"},"Insights Model":{defaultOpenText:u.default.itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsModel"],classification:"app"},"Insights Data Engineering Model":{defaultOpenText:u.default.itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsModel"],classification:"app"},"Insights Theme":{defaultOpenText:u.default.itemLinks.openInsights,
defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsTheme"],classification:"app"},"Ortho Mapping Project":{defaultOpenText:u.default.itemLinks.openOrthoMaker,defaultOpenIcon:"launch",openIn:["orthoMaker"],types:["is-orthoMaker"],classification:"app"},Mission:{defaultOpenText:u.default.itemLinks.openMission,defaultOpenIcon:"launch",openIn:["missionViewer"],types:["is-mission"],classification:"app"},"Hub Initiative Template":{defaultOpenText:u.default.itemLinks.openHubInitiative,
defaultOpenIcon:"launch",openIn:["hubInitiative"],types:["is-hubInitiative"],classification:"app"},"Hub Project":{defaultOpenText:u.default.itemLinks.openHubInitiative,defaultOpenIcon:"launch",openIn:["hubProject"],types:["is-hubProject"],classification:"app"},"QuickCapture Project":{types:["is-quickCaptureProject"],classification:"app"},Solution:{classification:"solution",hasItemData:!0},"Deep Learning Studio Project":{defaultOpenText:u.default.itemLinks.openGeoAIStudio,defaultOpenIcon:"launch",
openIn:["geoAIStudioUrlViewer"],types:["is-geoAIStudioProject"],classification:"app"},StoryMap:{classification:"app",types:["is-storymap"]},Notebook:{defaultOpenText:u.default.itemLinks.openNotebook,defaultOpenIcon:"launch",openIn:["notebookViewer"],types:["is-notebook","is-download"],classification:"notebook"},"Data Store":{types:["is-data-store"],classification:"data store"},"Excalibur Imagery Project":{defaultOpenText:u.default.itemLinks.openExcalibur,defaultOpenIcon:"launch",openIn:["excaliburViewer"],
types:["is-excaliburProject"],classification:"app"},"Urban Model":{defaultOpenText:u.default.itemLinks.openUrbanModel,defaultOpenIcon:"launch",openIn:["urbanViewer"],types:["is-urbanModel"],classification:"app"},"Web Experience":{defaultOpenText:u.default.itemLinks.view,defaultOpenIcon:"launch",openIn:["webExperienceViewer"],types:["is-webExperience"],classification:"app"},"Web Experience Template":{defaultOpenText:u.default.itemLinks.view,defaultOpenIcon:"launch",openIn:["webExperienceViewer"],types:["is-webExperienceTemplate"],
classification:"app"},"360 VR Experience":{defaultOpenText:u.default.itemLinks.openVRExperience,defaultOpenIcon:"launch",openIn:["vrExperienceViewer"],types:["is-vrExperience","is-file","is-update"],classification:"app"},"API Key":{openIn:[],types:[],classification:"app"},CSV:{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature","is-documentUrl"],classification:"file"},Shapefile:{defaultOpenText:u.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature"],classification:"file"},"File Geodatabase":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature"],classification:"file"},GeoJSON:{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature"],classification:"file"},"Service Definition":{defaultOpenText:u.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature","is-tile"],classification:"file"},"3DTiles Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-publish","is-tile"],classification:"file"},"Tile Package":{defaultOpenText:u.default.itemLinks.openArcMap,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-tile","is-desktopPro"],classification:"file",openPkg:!0},"Compact Tile Package":{defaultOpenText:u.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-tile","is-compact"],classification:"file",openPkg:!0},"Scene Layer Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-scene-package"],classification:"file"},"Vector Tile Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-vector-tile","is-desktop"],classification:"file",
openPkg:!0},"Deep Learning Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file",openPkg:!0},"Esri Classifier Definition":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file",openPkg:!0},"Pro Report Template":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Image Collection":{defaultOpenText:u.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-image-collection"],classification:"file"},Layout:{defaultOpenText:u.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file",openData:!0},"Desktop Add In":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openData:!0},"ArcGIS Pro Add In":{defaultOpenText:u.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},GML:{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Explorer Add In":{types:["is-explorer","is-update"],classification:"file"},"Operations Dashboard Add In":{types:["is-views"],classification:"file",isRetired:!0},"Survey123 Add In":{types:["is-file","is-update"],classification:"file"},"Operations Dashboard Extension":{types:["is-views"],classification:"file",
isRetired:!0},"AppBuilder Extension":{types:["is-views"],classification:"file"},"AppBuilder Widget Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Windows Viewer Add In":{types:["is-file","is-desktop","is-update"],classification:"file",openData:!0},"ArcGIS Pro Configuration":{types:["is-file","is-update"],classification:"file"},"Globe Document":{types:["is-desktop","is-update"],classification:"file",openData:!0},
"Map Document":{types:["is-desktop","is-update","is-views"],classification:"file",openData:!0},"Pro Map":{defaultOpenText:u.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file"},"Published Map":{types:["is-desktop","is-update","is-views"],classification:"file",openData:!0},"Scene Document":{types:["is-desktop","is-update","is-views"],classification:"file",openData:!0},"CityEngine Web Scene":{defaultOpenText:u.default.itemLinks.viewApp,defaultOpenIcon:"launch",
openIn:["cityEngineViewer"],types:["is-city-engine","is-download","is-update"],classification:"file"},"Desktop Style":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Geoprocessing Sample":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Task File":{defaultOpenText:u.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update",
"is-pro"],classification:"file"},Layer:{defaultOpenText:u.default.itemLinks.openArcMap,types:["is-update","is-desktopPro"],classification:"file",openData:!0},"Pro Layer":{defaultOpenText:u.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro","is-download","is-update"],classification:"file"},"Pro Report":{defaultOpenText:u.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro","is-download","is-update"],classification:"file"},Style:{defaultOpenText:u.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Operation View":{types:["is-operationView","is-views"],isRetired:!0,classification:"file"},Dashboard:{defaultOpenText:u.default.itemLinks.dashboardView,openIn:["dashboard"],types:["is-dashboard","is-views"],classification:"file"},"Geoprocessing Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openPkg:!0},"Layer Package":{defaultOpenText:u.default.itemLinks.openArcMap,
defaultOpenIcon:"download-to",types:["is-file","is-desktopPro","is-update"],classification:"file",openData:!0},"Pro Layer Package":{defaultOpenText:u.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-pro","is-update"],classification:"file"},"Locator Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openPkg:!0},"Map Package":{defaultOpenText:u.default.itemLinks.openArcMap,defaultOpenIcon:"download-to",
types:["is-desktopPro","is-file","is-download","is-update"],classification:"file",openData:!0},"Pro Map Package":{defaultOpenText:u.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro","is-download","is-update"],classification:"file"},"Mobile Basemap Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Windows Mobile Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",
types:["is-file","is-update"],classification:"file"},"Toolbox Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openPkg:!0},"ArcPad Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Basemap Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},
"Mobile Map Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Mobile Scene Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Project Package":{defaultOpenText:u.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file"},"Pro Project":{defaultOpenText:u.default.itemLinks.openPro,
defaultOpenIcon:"launch",types:["is-pro"],classification:"file"},"Data Pipeline":{defaultOpenText:u.default.itemLinks.openDataPipelines,openIn:["dataPipeline"],types:["is-data-pipeline"]},"Knowledge Studio Project":{defaultOpenText:u.default.itemLinks.openKnowledgeStudio,openIn:["knowledgeStudio"],types:["is-knowledge-studio"]},"Insights Workbook Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"launch",types:["is-file","is-update"],classification:"file"},"Apache Parquet":{defaultOpenText:u.default.itemLinks.download,
defaultOpenIcon:"launch",types:["is-file"],classification:"file"},"Rule Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Window Mobile Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Workflow Manager Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},
GeoPackage:{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish"],classification:"file"},"Export Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Desktop Application Template":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Native Application Template":{classification:"file"},
"Native Application Installer":{types:["is-file","is-update"],classification:"file"},"Application Configuration":{classification:"file"},"Viewer Configuration":{classification:"file"},"Windows Viewer Configuration":{classification:"file"},"Map Template":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Project Template":{defaultOpenText:u.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update",
"is-pro"],classification:"file"},"Raster function template":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-download"],classification:"file"},"Feature Collection Template":{classification:"file"},"Layer Template":{classification:"file"},"Administrative Report":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Report Template":{classification:"file"},"Color Set":{classification:"file"},
"Explorer Layer":{types:["is-explorer","is-update","is-views"],classification:"file"},"Explorer Map":{types:["is-explorer","is-update","is-views"],classification:"file"},"Symbol Set":{classification:"file"},"Document Link":{defaultOpenText:u.default.itemLinks.open,defaultOpenIcon:"launch",openIn:["appViewer"],types:["is-link","is-documentUrl","is-views"],classification:"file"},PDF:{defaultOpenText:u.default.itemLinks.open,defaultOpenIcon:"launch",types:["is-dataUrl","is-pdf","is-update","is-documentUrl"],
classification:"file"},"CAD Drawing":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"CSV Collection":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},Image:{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"KML Collection":{defaultOpenText:u.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Code Attachment":{types:["is-file","is-update"],classification:"file"},"Code Sample":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Earth Configuration":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"iWork Keynote":{defaultOpenText:u.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"iWork Numbers":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"iWork Pages":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Microsoft Excel":{defaultOpenText:u.default.itemLinks.download,
defaultOpenIcon:"download-to",types:"is-publish is-feature is-dataUrl is-file is-update is-documentUrl".split(" "),classification:"file"},"Microsoft Powerpoint":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Microsoft Word":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Visio Document":{defaultOpenText:u.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Statistical Data Collection":{types:[],classification:"file"},netCDF:{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Link Chart":{defaultOpenText:u.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-linkChart","is-pro"],classification:"app"},"Experience Builder Widget Package":{defaultOpenText:u.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},filePath:"js/arcgisonline/img/item-types/",computeFileName:function(d){var q,m,a,h,n,r,k="Web Mapping Application"===d.type&&(null===(q=d.typeKeywords)||void 0===q?void 0:q.includes("configurableApp"));q=null===(m=null===d||void 0===d?void 0:d.iconUrl)||void 0===m?void 0:m.split("/").pop();"featureshosted16.png"===q&&(q="features16.png");d.isUtilityNetwork&&(q="utilitynetwork16.png");k&&
(q="instantapps16.png");"Form"===d.type&&(null===(a=d.typeKeywords)||void 0===a?0:a.includes("Survey123"))&&(q="survey16.png");"Data Store"===d.type&&(q="datastore16.png");c.default.includes(d.typeKeywords,"storymapcollection")&&(q="storymapcollection16.png");if("notebook code snippets"===(null===(h=d.type)||void 0===h?void 0:h.toLowerCase())||"notebook code snippet library"===(null===(n=d.type)||void 0===n?void 0:n.toLowerCase()))q="codeSnippet16.svg";"media layer"===(null===(r=d.type)||void 0===
r?void 0:r.toLowerCase())&&(q="medialayer16.svg");return q},computeSvgIconUrl:function(d,q,m){return d?"".concat(this.filePath).concat(d.replace("16.png","".concat(m,".svg"))):q.iconUrl},getSvgIconUrl:function(d,q){var m=this.computeFileName(d);return this.computeSvgIconUrl(m,d,q)},getItemInfo:function(d){var q,m,a,h,n,r,k,g,b,w,x,z=this[d.displayName]?d.displayName:d.type,D=!!d.origin,E=this[d.type],C="Web Mapping Application"===d.type&&(null===(q=d.typeKeywords)||void 0===q?void 0:q.includes("configurableApp"));
"GeoJson"===d.type&&(d.type="GeoJSON");q=this.computeFileName(d);d.svgIconUrl16=this.computeSvgIconUrl(q,d,"16");d.svgIconUrl32=this.computeSvgIconUrl(q,d,"32");this[d.displayName]&&(E=this[d.displayName]);E=l.__assign({privileges:[],openIn:[],types:["is-views"],attributes:[],classification:"file"},E);"Feature Collection"===d.type&&c.default.includes(d.typeKeywords,"Table")&&(E.types=c.default.filterOut(E.types,["is-data"]));if("Feature Service"===d.type){q=["is-data","is-layer"];if(c.default.includes(d.typeKeywords,
"Multipatch")||c.default.includes(d.typeKeywords,"HasOnlyMultipatchGeometries"))q=l.__spreadArray(l.__spreadArray([],q,!0),["is-scene-2"],!1);E.types=c.default.filterOut(E.types,q);c.default.includes(d.typeKeywords,"EditExtensionIndoorsSpaces")&&(E.displayName="Indoors Spaces Feature Layer");c.default.includes(d.typeKeywords,"ArcgisWorkflowManager")&&(c.default.includes(d.typeKeywords,"View Service")&&(E.displayName="Workflow View"),E.displayName="Workflow Layer");c.default.includes(d.typeKeywords,
"ArcgisWorkflowJobLocation")&&c.default.includes(d.typeKeywords,"View Service")&&(E.displayName="Workflow Job Location View")}d.isUtilityNetwork&&(q=(d.canUpdate||d.canDelete)&&d.isHostedService?", ".concat(u.default.viewsWidget.hostedData):"",E.displayName="".concat(d.displayName," (").concat(u.default.itemProperties.utilityNetwork).concat(q,")"));"Application"!==d.type||d.url||(E.openIn=[],E.defaultOpenText=null);q="Desktop Add In;Globe Document;Map Document;Published Map;Scene Document;Geoprocessing Package;Geoprocessing Service;Globe Service;Locator Package".split(";");
e.default.couldHaveArcGISDesktop()&&-1<q.indexOf(z)&&(E.defaultOpenText=c.default.includes(d.types,"is-desktopPro")?u.default.itemLinks.openArcMap:u.default.itemLinks.openDesktop,E.defaultOpenIcon="launch");"Layer"===d.type&&c.default.includes(d.typeKeywords,"lyrx")&&(E=l.__assign(l.__assign({},E),this["Pro Layer"]));"Layer Package"===d.type&&c.default.includes(d.typeKeywords,"lpkx")&&(E=l.__assign(l.__assign({},E),this["Pro Layer Package"]));"Map Package"===d.type&&c.default.includes(d.typeKeywords,
"mpkx")&&(E=l.__assign(l.__assign({},E),this["Pro Map Package"]));"Compact Tile Package"===d.type&&(d.type="Tile Package");"Dashboard"===d.type&&e.default._isOperationsViewSupportedBrowser(!0)&&(E.types.push("is-browser"),d.isSupportedBrowser=!0);E.types=c.default.concatUnique(E.types,"public"===d.access?["is-public"]:["is-not-public"]);z="Tool"===z&&d.typeKeywords.includes("Notebook Web Tool");if(!e.default.couldHaveArcGISDesktop()||z)E.types=E.types.filter(function(y){return"is-desktop"!==y&&"is-desktopPro"!==
y});z=null===(a=null===(m=d.portalUser)||void 0===m?void 0:m.userRole)||void 0===a?void 0:a.canUpdateOrgItems();"3DTiles Service"===d.type&&(E.displayName="3D Tiles layer",null===(h=d.typeKeywords)||void 0===h?0:h.includes("IntegratedMesh"))&&(E.defaultOpenText=u.default.itemLinks.openSceneViewer,E.openIn=["sceneViewer"]);"3DTiles Package"===d.type&&(E.displayName="3D Tiles package");if("StoryMap"===d.type){if(m=c.default.includes(d.typeKeywords,"storymapcollection"))E.displayName="StoryMap Collection";
if(a=c.default.includes(d.typeKeywords,"storymapbriefing"))E.displayName="StoryMap Briefing",d.svgIconUrl16=null===(n=d.svgIconUrl16)||void 0===n?void 0:n.replace("storymap","storymapbriefing"),d.svgIconUrl32=null===(r=d.svgIconUrl32)||void 0===r?void 0:r.replace("storymap","storymapbriefing");n=c.default.includes(d.typeKeywords,"smstatusdraft");r=d.isOwner||d.canUpdate&&(d.isAdmin||z);h=!r||!n||D;E.types.push(m?"is-storymap-collection":a?"is-storymap-briefing":"is-storymap-item");h&&(E.openIn=["storyMapViewer"],
E.defaultOpenText=u.default.itemLinks[m?"viewStorymapCollection":a?"viewBriefing":"viewStorymap"],E.defaultOpenIcon="launch");r&&!D&&(E.types.push("is-editable-storymap"),E.openIn=E.openIn||[],E.openIn.push("configureStoryMap"),h||(E.defaultOpenText=u.default.itemLinks[m?"editStorymapCollection":a?"editBriefing":"editStorymap"],E.defaultOpenIcon="launch"));n||E.types.push("is-published-storymap")}"StoryMap Theme"===d.type&&(n=c.default.includes(d.typeKeywords,"smstatusdraft"),!n&&(null===(g=null===
(k=d.portalUser)||void 0===k?void 0:k.userRole)||void 0===g?0:g.canCreateItem())&&E.types.push("is-published-storymap-theme"),d.isOwner||d.canUpdate&&(d.isAdmin||z))&&(E.openIn=["configureStoryMapTheme"],E.types.push("is-editable-storymap-theme"));"Web Experience"===d.type&&(c.default.includes(d.typeKeywords,"status: Published")||c.default.includes(d.typeKeywords,"status: Changed"))&&E.types.push("is-published-webExperience");"Web Experience Template"===d.type&&(c.default.includes(d.typeKeywords,
"status: Published")||c.default.includes(d.typeKeywords,"status: Changed"))&&E.types.push("is-published-webExperienceTemplate");"Web Mapping Application"===d.type&&(c.default.includes(d.typeKeywords,"configurableApp")&&(d.isOwner||d.isOwnedByMyOrg&&(d.isAdmin||z))&&E.types.push("can-configure"),d.url=(0,t.redirectExternalAppURL)(d,d.url));"Web Map"===d.type&&(k=d.portalUser,g=d.isOwner||d.isAdmin,(null===(b=null===k||void 0===k?void 0:k.userRole)||void 0===b?0:b.canCreateItem())&&(null===k||void 0===
k?0:k.isOrgUser)&&g&&(E.openIn.push("fieldMaps"),E.types.push("is-fieldMaps")));"Image Service"!==d.type||c.default.includes(d.typeKeywords,"Managed Image Collection")||(E.types=E.types.filter(function(y){return"is-imageManagement"!==y}));d.canOpenInNewMapViewer&&(E.defaultOpenText="modern"===d.portal.defaultMapViewer?u.default.itemLinks.openMapViewerBeta:u.default.itemLinks.openMapViewer,E.types.push("can-openInNewMapViewer"));"KML"===d.type&&d.name&&!d.url&&E.types.push("is-download");-1<d.type.indexOf("GeoBIM")&&
(null===(w=d.portal)||void 0===w||!w.canCreateGeoBIM)&&(E={privileges:[],openIn:[],types:["is-views"],attributes:[],classification:"file"});"Group Layer"===d.type&&(null===(x=d.typeKeywords)||void 0===x?0:x.includes("Scene"))&&(E.openIn=[]);C&&(E.displayName=u.default.items.instantApp);b=(null===E||void 0===E?void 0:E.displayName)||d.displayName;d.sentenceCaseDisplayName={CSV:"CSV",GeoJson:"GeoJson",JSON:"JSON","Tile Package":"Tile package","Vector Tile Package":"Vector tile package","Feature Service":"Feature service",
"Feature Layer":"Feature layer","Service Definition":"Service definition","Scene Package":"Scene layer package","Desktop Application Template":"Desktop application template","Microsoft Excel":"Microsoft Excel",Shapefile:"Shapefile","File Geodatabase":"File geodatabase","Map Template":"Map template","Geoprocessing Sample":"Geoprocessing sample","Code Sample":"Code sample","ArcPad Package":"ArcPad package","CAD Drawing":"CAD drawing","CSV Collection":"CSV collection","KML Collection":"KML collection",
"AppBuilder Widget Package":"AppBuilder widget package","Photos with Locations":"Photos with locations","Image Collection":"Image collection","iWork Pages":"iWork Pages","iWork Numbers":"iWork Numbers","iWork Keynote":"iWork Keynote","Deep Learning Package":"Deep learning package",GML:"GML",Application:"Application","Google Sheets":"Google Sheets","Tile Layer":"Tile layer","Scene Layer":"Scene layer"}[b]||b||d.type;return E}}})},"arcgisonline/pages/utils/url":function(){define(["require","exports",
"tslib","../utils/arrays"],function(f,B,l,e){Object.defineProperty(B,"__esModule",{value:!0});B.redirectExternalAppURL=B.sanitizeServerURL=void 0;e=l.__importDefault(e);B.sanitizeServerURL=function(c){c=c||"";var u=c.split("/"),t=u.indexOf("FeatureServer");0<t&&(c=t-1,u.splice(c,1,u[c].replace(/:/g,"")),c=u.join("/"));return c};B.redirectExternalAppURL=function(c,u,t){var d=["Web Mapping Application","Dashboard"],q=e.default.find([{org:".mapsdevext.arcgis.com",www:"devext.arcgis.com"},{org:".maps.arcgis.com",
www:"www.arcgis.com"},{org:".mapsqa.arcgis.com",www:"qaext.arcgis.com"}],function(m){return-1<(null===u||void 0===u?void 0:u.indexOf(m.org))});if(!c.portalUser&&"self"!==c.contentOrigin&&"public"===c.access&&(t||-1<d.indexOf(c.type))&&u){if(0===u.indexOf("/apps/"))return"https://".concat(c.portal.portalHostname).concat(u);if(q)return c=u.split(q.org),c=c[c.length-1],"https://".concat(q.www).concat(c)}return u}})},"arcgisonline/pages/utils/item":function(){define("require exports tslib ../utils/arrays ../pageUtil ../../sharing/util ../../esriGeowConfig dojo/string dojo/Deferred dojo/promise/all dojo/i18n!../../nls/arcgisonline dojo/text!../dijit/Card/badges/authoritative.html dojo/text!../dijit/Card/badges/deprecated.html dojo/text!../dijit/Card/badges/solution.html dojo/text!../dijit/Card/badges/living-atlas.html dojo/text!../dijit/Card/badges/marketplace.html dojo/text!../dijit/Card/badges/open-data.html dojo/text!../dijit/Card/badges/premium.html dojo/text!../dijit/Card/badges/retired.html dojo/text!../dijit/Card/badges/registered.html dojo/text!../dijit/Card/badges/public-data-collection.html dojo/text!../dijit/Card/badges/subscriber.html dojo/text!../dijit/Card/badges/collaboration.html".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E,C){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);n=l.__importDefault(n);r=l.__importDefault(r);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);w=l.__importDefault(w);x=l.__importDefault(x);z=l.__importDefault(z);D=l.__importDefault(D);E=l.__importDefault(E);C=l.__importDefault(C);
return function(){function y(){}y.getBadges=function(v,A,G,F){var H,L,M;F=null!==F&&void 0!==F?F:!0;var Q=[],S=[],I={i18n:a.default,hideText:A?"":"hide",tooltipClass:"tooltip tooltip-bottom-left tooltip-multiline"};A=A?"":"Labeled";var P=v.groupDesignations&&v.groupDesignations.split(", "),J=null===(H=v.portal)||void 0===H?void 0:H.isPortal;"org_authoritative"===v.contentStatus&&(I.tooltipLabel=a.default.badges["authoritativeTooltip"+A],Q.push(d.default.substitute(h.default,I)),S.push("authoritative"));
"public_authoritative"===v.contentStatus&&(v.verified||J)&&(I.tooltipLabel=d.default.substitute(a.default.badges["publicAuthoritativeTooltip"+A],{name:J?v.portal.name:v.verified.name}),Q.push(d.default.substitute(h.default,I)),S.push("authoritative"));"Solution"===v.type&&-1<v.typeKeywords.indexOf("ArcGIS Solution")&&(I.tooltipLabel=a.default.badges["solutionTooltip"+A],Q.push(d.default.substitute(r.default,I)),S.push("solution"));"deprecated"===v.contentStatus&&(I.tooltipLabel=a.default.badges["deprecatedTooltip"+
A],Q.push(d.default.substitute(n.default,I)),S.push("deprecated"));-1<(null===(L=v.typeKeywords)||void 0===L?void 0:L.indexOf("Public Data Collection"))&&G&&(I.tooltipLabel=a.default.badges["publicDataCollectionTooltip".concat(A)],Q.push(d.default.substitute(D.default,I)),S.push("public data collection"));v.isRetired&&(I.tooltipLabel=a.default.badges["retiredTooltip"+A],Q.push(d.default.substitute(x.default,I)),S.push("retired"));v.isRetiredStoryMap&&(I.tooltipLabel=a.default.badges["retiredStoryMapTooltip"+
A],Q.push(d.default.substitute(x.default,I)),S.push("retired"));v.isRetiredApp&&(I.tooltipClass=I.tooltipClass.replace("tooltip-bottom-left","tooltip-right"),I.tooltipLabel=a.default.badges["retiredAppTooltip"+A],Q.push(d.default.substitute(x.default,I)),S.push("retired"));P&&-1<P.indexOf("livingatlas")&&(I.tooltipLabel=a.default.badges["livingAtlasTooltip"+A],Q.push(d.default.substitute(k.default,I)),S.push("living atlas"));P&&-1<P.indexOf("opendata")&&(Q.push(d.default.substitute(b.default,I)),
S.push("open data"));v.isPremium&&(H=(null===(M=v.portal)||void 0===M?0:M.user)?v.portal.user.orgId?"org":"public":"anon",I.tooltipLabel=a.default.badges[H+(v.requiresCredits?"PremiumTooltip":"SubscriberTooltip")+A],Q.push(d.default.substitute(v.requiresCredits?w.default:E.default,I)),S.push(v.requiresCredits?"premium":"subscriber"));v.listed&&!J&&(Q.push(d.default.substitute(g.default,I)),S.push("marketplace"));v.origin&&(Q.push(d.default.substitute(C.default,I)),S.push("distributed collaboration"));
this.shouldShowRegisteredBadge(v,G)&&(I.tooltipLabel=a.default.badges["registeredTooltip"+A],Q.push(d.default.substitute(z.default,I)),S.push("oauth 2.0"));return F?Q.join(""):S.join(",")};y.getContentStatusBadges=function(v){var A,G={i18n:a.default,hideText:"",tooltipClass:"tooltip tooltip-bottom-left tooltip-multiline"},F=null===(A=v.portal)||void 0===A?void 0:A.isPortal;switch(v.contentStatus){case "org_authoritative":return G.tooltipLabel=a.default.badges.authoritativeTooltip,d.default.substitute(h.default,
G);case "public_authoritative":if(v.verified||F)return G.tooltipLabel=d.default.substitute(a.default.badges.publicAuthoritativeTooltip,{name:F?v.portal.name:v.verified.name}),d.default.substitute(h.default,G);break;case "deprecated":return G.tooltipLabel=a.default.badges.deprecatedTooltip,d.default.substitute(n.default,G)}};y.isItemAdmin=function(v,A){var G,F=!1;F=v.owner;A=null!==A&&void 0!==A?A:v.portal;var H=-1<(null===(G=v.itemControl)||void 0===G?void 0:G.indexOf("admin"));G=["esri_livingatlas",
"esri_demographics","esri_boundaries"];return F=A.isPortal&&!v.isOwner&&H&&-1<F.indexOf("esri_")&&!e.default.includes(G,F)?!1:!!H};y.canShareItem=function(v,A){var G,F,H=A||{},L=H.userRole;A=H.canShare;var M=H.canShareOthers&&v.isOwnedByMyOrg,Q=(null===L||void 0===L?void 0:L.canPurchaseMarketplace())||(null===L||void 0===L?void 0:L.canTrialMarketplace()),S=v.access||"private",I=v.isAdmin||v.isOwner||H.isOrgAdmin&&v.isOwnedByMyOrg||M,P="public"===S&&"AppBuilder Extension"!==v.type&&"AppBuilder Widget Package"!==
v.type;S="org"===S&&v.isOrgItem;var J="licenseByUser"===(null===(G=v.listingProperties)||void 0===G?void 0:G.licenseBy);G="Native Application Installer"!==v.type&&"API Key"!==v.type&&!u.default.isProApp(v)&&!J&&!(null===(F=null===v||void 0===v?void 0:v.typeKeywords)||void 0===F?0:F.includes("ArcgisWorkflowManager"))&&"IPS Configuration"!==v.type;F=Q&&v.listed;H=((null===L||void 0===L?void 0:L.canShareItemToGroup())||!H.isOrgUser)&&(P||S);v="Data Store"===v.type&&!v.portal.isPortal;return G&&(A&&(I||
F||H)||M)&&!v};y.canDeleteItem=function(v,A){var G=A||{};A=G.userRole;G=v.isAdmin||v.isOwner||G.isOrgAdmin&&v.isOwnedByMyOrg;A=(null===A||void 0===A?void 0:A.isCustom())&&A.canDeleteOrgItems();return!!(G||v.isOwnedByMyOrg&&A)};y.canRecycleItem=function(v){return l.__awaiter(this,void 0,void 0,function(){var A;return l.__generator(this,function(G){switch(G.label){case 0:return A="".concat(v.userItemUrl,"/canRecycle"),[4,u.default.request({url:A})];case 1:return[2,G.sent()]}})})};y.getProtectedItems=
function(v){var A=new q.default,G=[],F=[],H=[];v.forEach(function(M){M.protected?G.push(M):H.push(M)});var L=H.map(function(M){return M.portal.isPortal?M.canBeDeleted().then(function(Q){Q&&!Q.success?(M.error=Q,G.push(M)):F.push(M)}):M.getResultData().then(function(Q){Q=(null===Q||void 0===Q?void 0:Q.length)&&!Q.every(function(I){return v.find(function(P){return P.id===I.id})});var S=["Vector Tile Package","Tile Package","Scene Package","Scene Layer Package"].includes(M.type);Q&&!S?G.push(M):F.push(M)})});
(0,m.default)(L).then(function(){A.resolve({protectedItems:G,unprotectedItems:F})});return A};y.deleteItemsByOwner=function(v,A,G){var F=this;void 0===G&&(G=!1);var H=new q.default;v="".concat(t.default.restBaseUrl,"content/users/").concat(v);if(1===A.length){var L=A[0];var M=L.folderId&&"/"!==L.folderId?"/".concat(L.folderId):"";v="".concat(v).concat(G?"":M,"/items/").concat(L.id,"/delete");L={permanentDelete:G};u.default.request({url:v,content:L},{usePost:!0}).then(function(S){return H.resolve([S])},
function(S){return H.resolve([S])})}else 1<A.length&&(v="".concat(v,"/deleteItems"),L={items:A.map(function(S){return S.id}).join(","),permanentDelete:G},u.default.request({url:v,content:L},{usePost:!0}).then(function(S){return l.__awaiter(F,void 0,void 0,function(){var I,P;return l.__generator(this,function(J){switch(J.label){case 0:return I=S.results.filter(function(U){return U.success}),P=S.results.filter(function(U){return!U.success}),G&&0<(null===P||void 0===P?void 0:P.length)?[4,Q(P)]:[3,2];
case 1:P=J.sent(),J.label=2;case 2:return[2,H.resolve(l.__spreadArray(l.__spreadArray([],I,!0),P,!0))]}})})},function(S){return H.resolve([S])}));var Q=function(S){return l.__awaiter(F,void 0,void 0,function(){var I,P,J,U,Y=this;return l.__generator(this,function(aa){switch(aa.label){case 0:return I=[],P=[],S.forEach(function(la){return l.__awaiter(Y,void 0,void 0,function(){return l.__generator(this,function(T){"CONT_00486"===la.error.messageCode?I.push(A.find(function(N){return N.id===la.itemId})):
P.push(A.find(function(N){return N.id===la.itemId}));return[2]})})}),[4,Promise.all(I.map(function(la){return Y.deleteItemsByOwner(la.owner,[la],!0)}))];case 1:return J=aa.sent(),[4,Promise.all(P.map(function(la){return Y.deleteItemsByOwner(la.owner,[la],!0)}))];case 2:return U=aa.sent(),[2,l.__spreadArray(l.__spreadArray([],J,!0),U,!0).flat()]}})})};return H};y.deleteItems=function(v,A){var G=this;void 0===A&&(A=!1);var F=new q.default,H={},L=[],M=[],Q=[];v.forEach(function(I){var P;"Deep Learning Package"===
(null===I||void 0===I?void 0:I.type)?L.push(c.default.uninstallDeepLearningPackage(I).then(function(J){var U;"uninstallFail"===(null===J||void 0===J?void 0:J.messageCode)?M.push(J):H[I.owner]=[I].concat(null!==(U=H[I.owner])&&void 0!==U?U:[])})):H[I.owner]=[I].concat(null!==(P=H[I.owner])&&void 0!==P?P:[])});var S=Object.keys(H).map(function(I){return G.deleteItemsByOwner(I,H[I],A)});(0,m.default)(L).then(function(){return(0,m.default)(S)}).then(function(I){I.forEach(function(P){P.forEach(function(J){J.success?
Q.push(J):M.push(J)})});F.resolve({removed:Q,errors:M})});return F};y.restoreItemsByOwner=function(v,A,G){var F=new q.default,H="".concat(t.default.restBaseUrl,"content/users/").concat(v),L={folder:G.id!==v?G.id:"/"};1===A.length?(v=A[0],v="".concat(H,"/items/").concat(v.id,"/restore"),u.default.request({url:v,content:L},{usePost:!0}).then(function(M){return F.resolve([M])},function(M){return F.resolve([M])})):A.forEach(function(M){M="".concat(H,"/items/").concat(M.id,"/restore");u.default.request({url:M,
content:L},{usePost:!0}).then(function(Q){return F.resolve([Q])},function(Q){return F.resolve([Q])})});return F};y.restoreItems=function(v,A){var G=this,F=new q.default,H={},L=[],M=[];v.forEach(function(Q){var S;H[Q.owner]=[Q].concat(null!==(S=H[Q.owner])&&void 0!==S?S:[])});v=Object.keys(H).map(function(Q){return G.restoreItemsByOwner(Q,H[Q],A)});(0,m.default)(v).then(function(Q){Q.forEach(function(S){S.forEach(function(I){I.success?M.push(I):L.push(I)})});F.resolve({restored:M,destinationFolder:A,
errors:L})});return F};y.getContentStatus=function(v){if(v.contentStatus&&-1<v.contentStatus.indexOf("authoritative")){var A=v.portal;return"public"===v.access&&(null===A||void 0===A?0:A.isVerified)?"public_authoritative":"org_authoritative"}return v.contentStatus};y.shouldOpenToItemURLInNewTab=function(v){return-1<"Web Mapping Application;Mobile Application;Document Link;Site Application;Hub Site Application;StoryMap".split(";").indexOf(v.type)};y.shouldOpenInNewTab=function(v){return-1<["CityEngine Web Scene",
"Dashboard","Operation View"].indexOf(v.type)};y.shouldShowRegisteredBadge=function(v,A){if("esri_apps"===v.owner)return!1;var G=v.type,F=v.typeKeywords,H=v.isOwner,L=v.isAdmin,M=v.isOwnedByMyOrg;v=(null===F||void 0===F?void 0:F.includes("Registered App"))&&"API Key"!==G;A=L||H||(null===A||void 0===A?void 0:A.isOrgAdmin)&&M;G=["StoryMap, Dashboard"].includes(G)||["Web AppBuilder","configurableApp"].some(function(Q){return F.includes(Q)});return v?G?A:!0:!1};y.isHubType=function(v){return["Hub Site Application",
"Site Application"].includes(v)};return y}()})},"arcgisonline/pages/utils/socialMedia":function(){define(["require","exports","tslib","../../esriGeowConfig","esri/lang"],function(f,B,l,e,c){e=l.__importDefault(e);c=l.__importDefault(c);return function(){function u(){}u.canShowSocialMediaLinks=function(t){var d=t.isPortal,q=c.default.isDefined(t.canSharePublic)?!!t.canSharePublic:!0,m=!!t.portalProperties&&c.default.isDefined(t.portalProperties.showSocialMediaLinks);t=m&&!0===t.portalProperties.showSocialMediaLinks;
return e.default.showSocialMediaLinks&&!0===e.default.showSocialMediaLinks&&(d?q&&t:q&&(!m||t))};u.canShowSocialMediaLinksOnItems=function(t){var d=t.portalUser,q=!!d&&!d.orgId,m=!!d&&!!d.orgId;d=!d||q||m&&(d.userRole.canShareItemToPublic()||d.userRole.canShareOthersItemsToPublic());return this.canShowSocialMediaLinks(t)&&d};u.canShowSocialMediaLinksOnGroups=function(t){var d=t.portalUser,q=!!d&&!d.orgId,m=!!d&&!!d.orgId;d=!d||q||m&&d.userRole.canShareGroupToPublic();return this.canShowSocialMediaLinks(t)&&
d};return u}()})},"arcgisonline/pages/utils/getLivingAtlasCategorySet":function(){define("require exports tslib ../portal/PortalItem ../../sharing/util dojo/promise/all dojo/Deferred dojo/i18n!../../nls/arcgisonline dojo/_base/kernel dojo/_base/lang".split(" "),function(f,B,l,e,c,u,t,d,q,m){function a(x){var z=new t.default;c.default.request({url:x.portalUrl+"portals/self",content:{culture:q.default.locale,default:!0}}).then(function(D){z.resolve(null===D||void 0===D?void 0:D.contentCategorySetsGroupQuery)});
return z}function h(x,z){var D=new t.default,E=window.require("arcgisonline/pages/portal/PortalGroup");z?x.queryGroups(z,!0).then(function(C){(C=C.total?C.results.shift():null)?D.resolve(new E(m.default.mixin(C,{portal:x}))):D.reject(!1)}):D.reject(!1);return D}function n(x,z,D,E){var C=new t.default;E?z?r(x,E,z).then(function(y){return k(x,D,[y])}).then(function(y){return C.resolve(y)}):E.groupContent().then(function(y){return C.resolve(y.items)}).then(function(y){return k(x,D,y)}).then(function(y){return C.resolve(y)}):
C.reject(!1);return C}function r(x,z,D){var E=new t.default,C;z.search({q:"group:"+z.id+' typekeywords:"'+D+'"',num:1}).then(function(y){C=y.total?y.items.shift():{};E.resolve(new e.default(m.default.mixin(C,{portal:x})))});return E}function k(x,z,D){var E=new t.default;D=m.default.isArray(D)?D:[D];z=z&&!x.isPortal;D=D.map(function(C){return g(x,z,C)});(0,u.default)(D).then(function(C){E.resolve(C)});return E}function g(x,z,D){var E=new t.default,C=[w(D)];z&&C.push(b(x));(0,u.default)(C).then(function(y){D.set("categorySchema",
y);E.resolve(D)});return E}function b(x){var z=new t.default,D={title:"Region",description:"Living Atlas Regions",displayName:d.default.common.regions};x.getRegions().then(function(E){E=(E||[]).map(function(C){return m.default.mixin(C,{displayName:C.localizedName,name:C.region})});D=m.default.mixin(D,{categories:E});z.resolve(D)});return z}function w(x){var z=new t.default;x.getData().then(function(D){D=null===D||void 0===D?void 0:D.categorySchema;D=(null===D||void 0===D?0:D.length)?D.shift():{};
z.resolve(m.default.mixin(D,{displayName:d.default.GroupWidget.categories}))});return z}e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);return function(x,z,D){var E=new t.default;a(x).then(function(C){return h(x,C)}).then(function(C){return n(x,z,D,C)}).then(function(C){return E.resolve(C)},function(){return E.resolve(null)});return E}})},"arcgisonline/pages/utils/verified":function(){define(["require",
"exports","tslib","../../sharing/util","dojo/Deferred"],function(f,B,l,e,c){e=l.__importDefault(e);c=l.__importDefault(c);return function(){function u(){}u.getVerifiedInfo=function(t){var d,q,m,a=new c.default,h=u.orgHash,n=null!==(d=t.orgId)&&void 0!==d?d:null===(q=t.portal)||void 0===q?void 0:q.id;d=null===(m=t.portal)||void 0===m?void 0:m.isPortal;if(t.contentStatus&&"public_authoritative"===t.contentStatus&&n&&!d)if(h[n])a.resolve(u.orgHash[n]);else{var r="".concat(location.protocol,"//").concat(t.portal.portalHostname,
"/sharing/rest/portals/").concat(n);e.default.request({url:r}).then(function(k){return u.getOrgProps(r).then(function(g){g&&(k.localizedOrgProperties=g);return k})}).then(function(k){var g,b,w=k.urlKey||"";w="".concat(k.allSSL?"https://":"http://").concat(w,".").concat(k.customBaseUrl,"/");var x=k.thumbnail?w+"sharing/rest/portals/self/resources/"+k.thumbnail:"./images/group-no-image.png";h[k.id]={name:k.name,description:null===(b=null===(g=k.localizedOrgProperties)||void 0===g?void 0:g.default)||
void 0===b?void 0:b.description,url:w+"home/",thumbnail:x};a.resolve(h[k.id])},function(k){return 0})}else a.resolve(!1);return a};u.getOrgProps=function(t){var d=new c.default;t="".concat(t,"/resources/localizedOrgProperties");e.default.request({url:t,content:{start:1,num:100}}).then(function(q){q&&!q.code?d.resolve(q):d.resolve(!1)},function(){d.resolve(!1)});return d};u.setVerifiedInfo=function(t){var d=new c.default;u.getVerifiedInfo(t).then(function(q){t.verified=q;d.resolve(t)});return d};u.orgHash=
{};return u}()})},"arcgisonline/pages/utils/itemsgroups":function(){define("require exports tslib dojo/_base/Deferred ./arrays ./promises arcgisonline/sharing/util".split(" "),function(f,B,l,e,c,u,t){function d(h){var n=h.response,r=h.url,k=h.portalUser;h=h.contentUser;var g=[];k&&(g=g.concat(k.userGroups||[]));h&&(g=g.concat(h.groups||[]));if(n.results&&0<(null===g||void 0===g?void 0:g.length)){var b=n.results.map(function(w){return w.id}).join(",");k=g.map(function(w){return w.id});k=c.default.batch(k,
100).map(function(w){return q(r,w,b)});return u.default.eachAlwaysValues(k).then(function(w){w=m(w);return a(n,w)})}k=new e.default;k.resolve(n);return k}function q(h,n,r){if(!r||0===n.length)return r=new e.default,r.resolve({}),r;h="".concat(h,"content/itemsgroups");n=n.join(",");return t.default.request({url:h,content:{items:r,groups:n}})}function m(h){return h.reduce(function(n,r){r&&Object.keys(r).forEach(function(k){k&&r[k]&&(n[k]=r[k])});return n},{})}function a(h,n){if(n){var r={};h.results.forEach(function(k){return r[k.id]=
k});Object.keys(n).forEach(function(k){var g=n[k];if(g&&g.items){k=n[k];var b=k.groupId,w=k.groupTitle,x=k.groupThumbnail;k.items.forEach(function(z){z=r[z.itemId];z.groupData=z.groupData||[];z.sharedGroups=z.sharedGroups||0;0!==z.groupData.length&&c.default.find(z.groupData,function(D){return D.id===b||D.groupId===b})||(z.groupData.push({groupId:b,groupTitle:w,groupThumbnail:x}),z.sharedGroups+=1)})}})}return h}Object.defineProperty(B,"__esModule",{value:!0});B.parseItemsGroups=B.collateItemsGroupsResponse=
B.fetchItemsGroupsPage=B.getAllItemsGroups=B.getItemGroups=void 0;e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);B.getItemGroups=function(h){var n=h.url,r=h.portalUser,k=h.contentUser;h={results:[h.item]};var g=new e.default;d({response:h,url:n,portalUser:r,contentUser:k}).then(function(b){g.resolve(null===b||void 0===b?void 0:b.results[0])});return g};B.getAllItemsGroups=d;B.fetchItemsGroupsPage=q;B.collateItemsGroupsResponse=m;B.parseItemsGroups=a})},
"arcgisonline/pages/utils/promises":function(){define(["require","exports","tslib","dojo/Deferred","dojo/promise/all"],function(f,B,l,e,c){e=l.__importDefault(e);c=l.__importDefault(c);return{isPromise:function(u){return u&&"function"===typeof u.then},resolve:function(u){var t=new e.default;t.resolve(u);return t.promise},reject:function(u){var t=new e.default;t.reject(u);return t.promise},when:function(u){return this.isPromise(u)?u:this.resolve(u)},create:function(u,t,d){var q=this,m=new e.default(d);
u(function(a){return q.when(a).then(m.resolve,m.reject)});return m.promise},all:c.default,filter:function(u,t){var d=u.slice();return this.all(u.map(function(q,m){return t(q,m)})).then(function(q){return d.filter(function(m,a){return q[a]})})},eachAlways:function(u){if(u){if("function"!==typeof u.forEach){var t=Object.keys(u),d=t.map(function(q){return u[q]});return this.eachAlways(d).then(function(q){var m={};t.forEach(function(a,h){m[a]=q[h]});return m})}return this.create(function(q){var m=[],
a=u.length;0===a&&q(m);u.forEach(function(h){var n={promise:h};m.push(n);h.then(function(r){n.value=r}).catch(function(r){n.error=r}).then(function(){--a;0===a&&q(m)})})},function(q){u.forEach(function(m){m.cancel(q)})})}},eachAlwaysValues:function(u){return this.eachAlways(u).then(function(t){return t.filter(function(d){return d.value}).map(function(d){return d.value})})},after:function(u,t){var d=this,q=0;return this.create(function(m){q=window.setTimeout(function(){d.resolve(t)},u)},function(){q&&
(clearTimeout(q),q=0)})},timeout:function(u,t,d){var q=0,m=new e.default(u.cancel);u.then(function(a){m.isFulfilled()||(m.resolve(a),q&&(clearTimeout(q),q=0))});u.catch(function(a){m.isFulfilled()||(m.reject(a),q&&(clearTimeout(q),q=0))});q=window.setTimeout(function(){var a=d||Error("promiseUtils:timeout\n          The wrapped promise did not resolve within ".concat(t,"ms"));m.reject(a)},t);return m.promise}}})},"arcgisonline/pages/portal/LicenseInfo":function(){define("require exports tslib ../utils/organization ../../sharing/geow/Licenses dojo/Deferred".split(" "),
function(f,B,l,e,c,u){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);return{_licensesAPI:new c.default,licenses:{arcgiswebapps:{valid:!1,className:"web-apps-not-licensed"},arcgisinsights:{valid:!1,className:"insights-not-licensed"},hubforarcgis:{valid:!1},orthomaker:{valid:!1,className:"orthomaker-not-licensed"},opsdashboard:{valid:!1,className:"web-dashboard-not-licensed"},workforce:{valid:!1,className:"workforce-not-licensed"},survey123:{valid:!1,className:"survey123-not-licensed"},
arcgisurban:{valid:!1,className:"arcgisUrban-not-licensed"},analytics4iot:{valid:!1,isCapability:!0},storymaps:{valid:!1,className:"storymaps-not-licensed"}},getLicenseInfo:function(){var t=this,d=new u.default,q=this.licenses||{};this._getSubscriptionInfo().then(function(){return t._getProvisionedListings()}).then(function(){return d.resolve(q)});return d},_getSubscriptionInfo:function(){var t=this,d=new u.default,q=this.licenses||{};this.portal.user&&this.isOrgUser?e.default.getSubscriptionInfo().then(function(m){var a;
t.orgCapabilities=null!==(a=null===m||void 0===m?void 0:m.orgCapabilities)&&void 0!==a?a:[];t.orgCapabilities.forEach(function(h){return t._addCapabilityInfo(h)});d.resolve(q)}):d.resolve(q);return d},_addCapabilityInfo:function(t){var d,q,m=this.licenses||{},a=(null===(d=t.id)||void 0===d?void 0:d.toLowerCase())||null;t&&(d=null!==(q=m[a])&&void 0!==q?q:{},m[a]=l.__assign(l.__assign(l.__assign({},d),t),{title:t.id,valid:!0}))},_getProvisionedListings:function(){var t=this,d=new u.default,q=this.portal.user,
m={returnAppClientIds:!0,returnAllProvisions:!0},a=this.licenses||{};q&&this.isOrgUser?this._licensesAPI.getUserProvisionedListings(q.username,m).then(function(h){t.provisionedListings=null!==h&&void 0!==h?h:[];t.provisionedListings.forEach(function(n){return t._addListingInfo(n)});d.resolve(a)},function(){d.resolve([])}):(Object.keys(a).forEach(function(h){a[h].isCapability||(a[h].valid=!0)}),d.resolve(a));return d},_addListingInfo:function(t){var d,q=this.licenses||{},m=(null===(d=t.clientId)||
void 0===d?void 0:d.toLowerCase())||null;m&&(q[m]=l.__assign(l.__assign({},q[m]||{}),{valid:!0,itemId:t.itemId,clientId:t.clientId}))},isLicensed:function(t){var d,q,m;t=null!==(d=null===t||void 0===t?void 0:t.toLowerCase())&&void 0!==d?d:"";d=this.licenses||{};return null!==(m=null===(q=null===d||void 0===d?void 0:d[t])||void 0===q?void 0:q.valid)&&void 0!==m?m:!1}}})},"arcgisonline/sharing/geow/Licenses":function(){define("require exports tslib dojo/Deferred dojo/string dojo/i18n!../../nls/arcgisonline esri/lang ../../esriGeowConfig ../../pages/pageUtil ../../pages/utils/organization ../../pages/utils/promises ../../pages/components/ManageBlockedApps/blocked-apps-service ../util".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);n=l.__importDefault(n);return function(){function r(){this.proEntitlements=[];this._productListings=[];this.productEntitlements={};this._remainingProEntitlements={};this._remainingProductEntitlements={};this.appUserCounts=[];this._userEntitlementsUrl=d.default.restBaseUrl+
"content/listings/${itemId}/userEntitlements";this._userEntitlementUrl=this._userEntitlementsUrl+"/${username}";this._userSessionsUrl=d.default.restBaseUrl+"content/listings/${itemId}/users/${username}/sessions"}r.terminateUserSession=function(k,g,b){var w=n.default.getSecureUrl(d.default.restBaseUrl);k="".concat(w,"content/listings/").concat(k,"/terminateUserSession");return n.default.request({url:k,content:{username:g,sessionId:b}},{usePost:!0})};r.prototype.provisionUserEntitlements=function(k,
g,b){return q.default.sendAllResourcesSerially("".concat(d.default.restBaseUrl,"content/listings/").concat(k,"/provisionUserEntitlements"),25,g.users,function(w){return{userEntitlements:JSON.stringify({users:w,entitlements:g.entitlements}),suppressCustomerEmail:!b}})};r.prototype.retrieveProvisionedUserEntitlement=function(k,g){k=c.default.substitute(this._userEntitlementUrl,{itemId:k,username:g});return n.default.request({url:k})};r.prototype.retrieveProvisionedUserEntitlements=function(k,g,b){k=
c.default.substitute(this._userEntitlementsUrl,{itemId:k});return n.default.request({url:k,content:{start:g?g:1,num:b?b:10}})};r.prototype.retrieveSessionInformation=function(k,g){k=c.default.substitute(this._userSessionsUrl,{itemId:k,username:g});return n.default.request({url:k})};r.prototype.provisionUserAppBundle=function(k,g,b){var w=new e.default,x=new e.default;b?x.resolve():this.getAppBundles(!0).then(function(z){z=z.appBundles.filter(function(D){return D.appBundleItemId===k})[0];z.maxUsers-
z.assigned>=g.length?x.resolve():w.reject()});x.then(function(){q.default.sendAllResourcesWithDelay("".concat(d.default.restBaseUrl,"content/listings/").concat(k,"/provisionUserAppBundle"),25,g,function(z){return{users:JSON.stringify(z),revoke:b}},500).then(function(z){w.resolve(z)},function(z){w.reject(z)})});return w};r.prototype.updateUserLicenseType=function(k,g){var b=new e.default;q.default.sendAllResourcesSerially("".concat(d.default.restBaseUrl,"portals/self/updateUserLicenseType"),25,k,function(w){return{users:JSON.stringify(w),
userLicenseType:g}}).then(function(w){b.resolve(w)},function(){b.reject()});return b};r.prototype.getUserCounts=function(k){return n.default.request({url:"".concat(d.default.restBaseUrl,"portals/self/users/counts?type\x3d").concat(k)})};r.prototype.getUserLicenseType=function(k){var g=new e.default,b;h.default.getBlockedAppsWithInfo().then(function(w){b=w;return n.default.request({url:"".concat(d.default.restBaseUrl,"community/users/").concat(k,"/userLicenseType")})}).then(function(w){w.apps.forEach(function(x){x.isAppBundle?
x.apps.forEach(function(z){z.blocked=h.default.isBlocked(b,z)}):x.blocked=h.default.isBlocked(b,x)});g.resolve(w)},function(){g.resolve()});return g};r.prototype.getUserAppBundles=function(k){return q.default.fetchAllResources("".concat(d.default.restBaseUrl,"community/users/").concat(k,"/appBundles"),{num:10},"appBundles")};r.prototype.getUserProvisionedListings=function(k,g,b){var w=g||{},x=new e.default,z;b?h.default.getBlockedAppsWithInfo().then(function(D){x.resolve(D)}):x.resolve([]);return x.then(function(D){z=
D;return q.default.fetchAllResources("".concat(d.default.restBaseUrl,"community/users/").concat(k,"/provisionedListings"),w,"provisionedListings")}).then(function(D){m.default.licensesConfig&&D.forEach(function(E){var C=m.default.licensesConfig.apps.filter(function(y){return y.title===E.title})[0];C&&C.label&&(E.title=C.label);E.blocked=h.default.isBlocked(z,E)});return D})};r.prototype.getUserEntitlements=function(k,g){return n.default.request({url:"".concat(d.default.restBaseUrl,"content/listings/").concat(k,
"/userEntitlements/").concat(g)})};r.prototype.getLicenseTypes=function(k){var g=this,b=new e.default,w;h.default.getBlockedAppsWithInfo().then(function(x){w=x;return q.default.fetchAllResources("".concat(d.default.restBaseUrl,"portals/self/userLicenseTypes"),{num:10},"userLicenseTypes")}).then(function(x){(null===w||void 0===w?0:w.length)&&x.forEach(function(z){z.apps.forEach(function(D){D.isAppBundle?D.apps.forEach(function(E){E.blocked=w.some(function(C){var y;return C.itemid&&C.itemid===E.id||
C.title===E.title||(null===(y=C.related)||void 0===y?void 0:y.some(function(v){return v.itemid&&v.itemid===E.id||v.title===E.title}))})}):D.blocked=w.some(function(E){var C;return E.itemid&&E.itemid===D.id||E.title===D.title||(null===(C=E.related)||void 0===C?void 0:C.some(function(y){return y.itemid&&y.itemid===D.id||y.title===D.title}))})})});g.getUserCounts("userLicenseType").then(function(z){x.forEach(function(E){var C=z.results.filter(function(y){return y.key===E.id})[0];E.assigned=C?C.count:
0});var D=x.filter(function(E){return k||0!==E.assigned||0!==E.maxUsers});q.default.sortListByStrProp(D,"name");b.resolve({userLicenseTypes:D})})});return b};r.prototype.getAppBundles=function(k){var g=this,b=new e.default,w;h.default.getBlockedAppsWithInfo().then(function(x){w=x;return n.default.request({url:"".concat(d.default.restBaseUrl,"portals/self/appBundles")})}).then(function(x){x.appBundles.forEach(function(z){z.apps.forEach(function(D){D.blocked=w.some(function(E){var C;return E.itemid&&
E.itemid===D.id||E.title===D.title||(null===(C=E.related)||void 0===C?void 0:C.some(function(y){return y.itemid&&y.itemid===D.id||y.title===D.title}))})})});g.getUserCounts("appBundle").then(function(z){x.appBundles.forEach(function(D){var E=z.results.filter(function(C){return C.key===D.appBundleItemId})[0];D.assigned=E?E.count:0});x.appBundles=x.appBundles.filter(function(D){return 0!==D.maxUsers||0!==D.assigned});q.default.sortListByStrProp(x.appBundles,"name");k?b.resolve(x):a.default.eachAlways(x.appBundles.map(function(D){return g.getUsersForAppBundle(D.appBundleItemId)})).then(function(D){D.forEach(function(E,
C){x.appBundles[C].usernames=E.value.results.map(function(y){return y.username})});a.default.eachAlways(x.appBundles.map(function(E){return g.getAppBundleListing(E.appBundleItemId)})).then(function(E){x.appBundles.forEach(function(C,y){C.allowedLevels=E[y].value.allowedUserLevels?E[y].value.allowedUserLevels.split(",").map(function(v){return v.trim()}):[]});b.resolve(x)})})})});return b};r.prototype.getAppBundleListing=function(k){return n.default.request({url:"".concat(n.default.getSecureUrl(d.default.restBaseUrl),
"content/listings/").concat(k)})};r.prototype.getUsersForAppBundle=function(k){return n.default.request({url:"".concat(d.default.restBaseUrl,"portals/self/users/search"),content:{q:"appbundle: ".concat(k)}})};r.prototype.getLicensedEntitlements=function(){var k=this,g=new e.default,b;m.default.initLicensesConfig(d.default.portal).then(function(){return h.default.getBlockedAppsWithInfo()}).then(function(w){b=w;return k.retrieveProductListings()}).then(function(){k._retrieveUserEntitlements().then(function(){var w;
k._hasNegativeLicenses();var x=[];if(k._hasProListing()){var z={};k.appUserCounts.forEach(function(y){y.key!==k._proListing.listing.itemId||z[y.secondaryKey]||(z[y.secondaryKey]={num:0})});var D=!(k._proListing.provision.orgEntitlements&&k._proListing.provision.orgEntitlements.entitlements),E=[];var C=D?z:k._proListing.provision.orgEntitlements.entitlements;D||Object.keys(z).forEach(function(y){C[y]||(C[y]=z[y],E.push(y))});Object.keys(C).forEach(function(y){var v;D||(D=-1!==E.indexOf(y));var A=(null===
(v=k.appUserCounts.filter(function(M){return M.key===k._proListing.listing.itemId&&M.secondaryKey===y})[0])||void 0===v?void 0:v.count)||0;v=C[y].num;var G=v-A,F=k.proEntitlements.filter(function(M){return-1!==M.entitlements.indexOf(y)}),H=-1===["desktopBasicN","desktopStdN","desktopAdvN"].indexOf(y),L=k._isLicenseExpired(k._proListing.provision.endDate,D,v,A);A={title:r.getProEntitlementTitle(y),key:y,total:v,used:A,remaining:G,status:c.default.substitute(r.i18n.licensesUsed,{used:A,total:v}),isPro:!0,
proEntitlements:k.proEntitlements,allowedLevels:["2"],itemId:k._proListing.listing.itemId,usernames:F.map(function(M){return M.username}),extNotSupported:r.getExtNotSupported(y),expiration:k._proListing.provision.endDate,isExpired:L,isExtension:H,trial:k._proListing.provision.trial,isEsriApp:!0};x.push(A)})}null===(w=k._productListings)||void 0===w?void 0:w.forEach(function(y){var v,A=y.listing,G=A.itemId,F={},H=!(y.provision.orgEntitlements&&y.provision.orgEntitlements.entitlements),L=A.title,M=
k.appUserCounts.filter(function(I){return I.key===G})[0];M&&(F[M.secondaryKey]={num:0});C=H?F:y.provision.orgEntitlements.entitlements;F&&Object.keys(F).length&&Object.keys(F).forEach(function(I){C[I]||(C[I]=F[I])});var Q=[],S="esri"===A.owner||"esri_apps"===A.owner;!S&&C&&Object.keys(C).length&&(Q=Object.keys(C),M=Q[0],C=(v={},v[M]=C[M],v));Object.keys(C).forEach(function(I){var P,J,U,Y=!0;if(m.default.licensesConfig){var aa=-1<(null===(P=y.listing.typeKeywords)||void 0===P?void 0:P.indexOf("User License Type Extension"));
P=aa?m.default.licensesConfig.userTypeExtensions:m.default.licensesConfig.apps;if(P=null===P||void 0===P?void 0:P.filter(function(T){return T.entitlement===I})[0])aa||(L=P.label||P.title),"false"===P.supportsKubernetes&&(Y=!1)}aa=(null===(J=k.appUserCounts.filter(function(T){return T.key===G&&T.secondaryKey===I})[0])||void 0===J?void 0:J.count)||0;J={drone2MapAdvN:"ArcGIS Drone2Map Advanced",drone2MapStdN:"ArcGIS Drone2Map Standard"};J[I]&&(L=J[I]);J=C[I].num;P=J-aa;var la=k._isLicenseExpired(y.provision.endDate,
H,J,aa);Y={title:L,key:I,total:J,used:aa,remaining:P,status:c.default.substitute(r.i18n.licensesUsed,{used:aa,total:J}),icon:A.icon,properties:A.properties,itemId:G,type:A.type,allowedLevels:A.allowedUserLevels?A.allowedUserLevels.split(",").map(function(T){return T.trim()}):[],usernames:k.productEntitlements[G]?k.productEntitlements[G].map(function(T){return T.username}):[],expiration:y.provision.endDate,isExpired:la,trial:y.provision.trial,requiredListings:A.requiredListings,dependentListings:A.dependentListings,
owner:A.owner,isBusinessAnalyst:m.default.isBusinessAnalyst(I),isDrone2Map:m.default.isDrone2Map(I),blocked:b.some(function(T){var N;return T.itemid&&T.itemid===G||T.title===L||(null===(N=T.related)||void 0===N?void 0:N.some(function(K){return K.itemid&&K.itemid===G||K.title===L}))}),entitlementKeys:Q,isEsriApp:S,supportsKubernetes:Y};"ArcGIS for Power BI"===Y.title&&(null===(U=m.default.licensesConfig)||void 0===U?0:U.hidePowerBI)||x.push(Y)})});q.default.sortListByStrProp(x,"title");g.resolve(x)})});
return g};r.prototype.getProListing=function(){return this._hasProListing()?this._proListing:void 0};r.prototype.getDisconnectSettingForListing=function(k){k="".concat(n.default.getSecureUrl(d.default.restBaseUrl),"content/listings/").concat(k,"/disconnectSettings");return n.default.request({url:k})};r.prototype.updateDisconnectSettingForListing=function(k,g,b){k="".concat(n.default.getSecureUrl(d.default.restBaseUrl),"content/listings/").concat(k,"/setDisconnectSettings");var w=new e.default;g={canDisconnect:g};
t.default.isDefined(b)&&(g.maxDisconnectTime=b);n.default.request({url:k,content:g},{usePost:!0}).then(function(x){x&&x.code&&x.messageCode?w.resolve({error:!0,messageCode:x.messageCode}):w.resolve(x)},function(x){var z={error:!0,messageCode:void 0};x&&x.messageCode&&(z.messageCode=x.messageCode);w.resolve(z)});return w};r.getExtNotSupported=function(k){return this._extNotSupported[k]};r.getProEntitlementTitle=function(k){switch(k){case "desktopBasicN":return r.i18n.licenseTypes.agsProLabel+" "+r.i18n.licenseTypes.basicLabel;
case "desktopStdN":return r.i18n.licenseTypes.agsProLabel+" "+r.i18n.licenseTypes.standardLabel;case "desktopAdvN":return r.i18n.licenseTypes.agsProLabel+" "+r.i18n.licenseTypes.advancedLabel;case "spatialAnalystN":return r.i18n.licenseTypes.spatialAnalyst;case "3DAnalystN":return r.i18n.licenseTypes.threeDAnalyst;case "networkAnalystN":return r.i18n.licenseTypes.networkAnalyst;case "geostatAnalystN":return r.i18n.licenseTypes.geostatisticalAnalyst;case "dataReviewerN":return r.i18n.licenseTypes.dataReviewer;
case "workflowMgrN":return r.i18n.licenseTypes.workflowManager;case "dataInteropN":return r.i18n.licenseTypes.dataInterop;case "defenseN":return r.i18n.licenseTypes.defenseMapping;case "FMVN":return r.i18n.licenseTypes.fullMotionVideo;case "businessBasicN":return r.i18n.licenseTypes.businessBasic;case "businessStdN":return r.i18n.licenseTypes.businessStd;case "roadsHighwaysN":return r.i18n.licenseTypes.roadsHighways;case "publisherN":return r.i18n.licenseTypes.publisher;case "productionMapN":return r.i18n.licenseTypes.productionMapping;
case "schematicsN":return r.i18n.licenseTypes.schematics;case "trackingN":return r.i18n.licenseTypes.tracking;case "aviationN":return r.i18n.licenseTypes.aviation;case "airportsN":return r.i18n.licenseTypes.airports;case "maritimeN":return r.i18n.licenseTypes.maritime;case "bathymetryN":return r.i18n.licenseTypes.bathymetry;case "smpNAmericaN":return r.i18n.licenseTypes.streetMapNA;case "smpEuropeN":return r.i18n.licenseTypes.streetMapEU;case "smpAsiaPacificN":return r.i18n.licenseTypes.streetMapAPAC;
case "smpMidEAfricaN":return r.i18n.licenseTypes.streetMapMEA;case "smpLAmericaN":return r.i18n.licenseTypes.streetMapLA;case "smpJapanN":return r.i18n.licenseTypes.streetMapJA;case "LocRefDesktopN":return r.i18n.licenseTypes.locationRef;case "imageAnalystN":return r.i18n.licenseTypes.imageAnalyst;case "locateXTN":return r.i18n.licenseTypes.locateXT;case "indoorsN":return r.i18n.licenseTypes.indoors;default:return""}};r.prototype._hasNegativeLicenses=function(){var k=this,g={},b=!1,w=!1;this._proListing&&
(this._proListing.provision.orgEntitlements&&this._proListing.provision.orgEntitlements.entitlements&&(g=this._convertOrgEntitlementsToPurchaseMap(this._proListing.provision.orgEntitlements.entitlements)),this._remainingProEntitlements=l.__assign({},g),this.proEntitlements.forEach(function(x){x.entitlements.forEach(function(z){k._remainingProEntitlements[z]||(k._remainingProEntitlements[z]=0);--k._remainingProEntitlements[z];0>k._remainingProEntitlements[z]&&(b=!0)})}));this._productListings&&0<this._productListings.length&&
(this._remainingProductEntitlements={},this._productListings.forEach(function(x){g={};var z=x.listing.itemId;x.provision.orgEntitlements&&x.provision.orgEntitlements.entitlements&&(g=k._convertOrgEntitlementsToPurchaseMap(x.provision.orgEntitlements.entitlements));k._remainingProductEntitlements[z]=l.__assign({},g);k.productEntitlements[z]&&k.productEntitlements[z].forEach(function(D){D.entitlements.forEach(function(E){k._remainingProductEntitlements[z]||(k._remainingProductEntitlements[z]={});k._remainingProductEntitlements[z][E]||
(k._remainingProductEntitlements[z][E]=0);--k._remainingProductEntitlements[z][E];0>k._remainingProductEntitlements[z][E]&&(w=!0)})})}));return b||w};r.prototype._convertOrgEntitlementsToPurchaseMap=function(k){var g={};if(k)for(var b in k)k[b]&&t.default.isDefined(k[b].num)?g[b]=k[b].num:g[b]=k[b];return g};r.prototype._hasProListing=function(){var k=this;return!!(this._proListing&&this._proListing.provision&&(this._proListing.provision.orgEntitlements&&!q.default.isEmptyObject(this._proListing.provision.orgEntitlements)||
this.appUserCounts.some(function(g){var b;return g.key===(null===(b=k._proListing.listing)||void 0===b?void 0:b.itemId)})))};r.prototype._isLicenseExpired=function(k,g,b,w){var x=t.default.isDefined(k),z=-1===k;k=k<Date.now();return x&&!z&&k||g||0===b&&0<w};r.prototype.retrieveProductListings=function(){var k=this,g=new e.default;n.default.findLicenseByUserProducts().then(function(b){b&&b.pro&&(k._proListing=l.__assign({},b.pro));b&&b.products&&(k._productListings=l.__spreadArray([],b.products,!0));
g.resolve()},function(){k._proListing=void 0;k._productListings=void 0;g.resolve()});return g};r.prototype.retrieveUserEntitlementsForListing=function(k){k=c.default.substitute(this._userEntitlementsUrl,{itemId:k});return q.default.fetchAllResources(k,{},"userEntitlements")};r.prototype.getAppUserCounts=function(){var k=this;return q.default.fetchAllResources("".concat(d.default.restBaseUrl,"portals/self/users/counts?type\x3dapp")).then(function(g){k.appUserCounts=g})};r.prototype._retrieveUserEntitlements=
function(){var k=new e.default;this.getAppUserCounts().then(function(){k.resolve()},function(){k.resolve()});return k};r.prototype._retrieveProUserEntitlements=function(){var k=c.default.substitute(this._userEntitlementsUrl,{itemId:this._proListing.listing.itemId});return q.default.fetchAllResources(k,{},"userEntitlements")};r.prototype._retrieveProductUserEntitlements=function(){var k=this,g={};this._productListings.forEach(function(b){b=b.listing.itemId;var w=c.default.substitute(k._userEntitlementsUrl,
{itemId:b});g[b]=q.default.fetchAllResources(w,{},"userEntitlements")});return g};r.prototype.getUserLicensedItems=function(k){return l.__awaiter(this,void 0,void 0,function(){var g;return l.__generator(this,function(b){switch(b.label){case 0:return b.trys.push([0,2,,3]),[4,n.default.request({url:"".concat(d.default.restBaseUrl,"community/users/").concat(k),content:{returnUserLicensedItems:!0}})];case 1:return g=b.sent(),[2,(null===g||void 0===g?void 0:g.userLicensedItems)||[]];case 2:return b.sent(),
[2,[]];case 3:return[2]}})})};r.i18n=l.__assign({},u.default.manageLicenses);r._extNotSupported={desktopBasicN:"defenseN roadsHighwaysN productionMapN aviationN airportsN maritimeN bathymetryN LocRefDesktopN".split(" "),desktopStdN:[],desktopAdvN:[]};return r}()})},"arcgisonline/pages/components/ManageBlockedApps/blocked-apps-service":function(){define("require exports tslib dojo/Deferred dojo/promise/all arcgisonline/sharing/util arcgisonline/esriGeowConfig".split(" "),function(f,B,l,e,c,u,t){Object.defineProperty(B,
"__esModule",{value:!0});e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);var d,q,m,a,h,n,r=function(w){var x=new e.default;if(m&&!w)return m;if(!w&&(null===q||void 0===q?0:q.blockedApps)&&3E3>=Date.now()-q.timestamp)return x.resolve(q.blockedApps),m=void 0,x;m=x;(0,c.default)({signinSettings:u.default.request({url:"".concat(t.default.restBaseUrl,"portals/self/signinSettings")}),blockable:b()}).then(function(z){var D=z.signinSettings;z=z.blockable;var E=
D.blockedApps;!w&&D.blockBetaApps&&z.forEach(function(C){C.isBeta&&!E.includes(C.clientid)&&E.push(C.clientid)});q={blockedApps:E,timestamp:Date.now()};x.resolve(E);m=void 0},function(){x.resolve([]);m=void 0});return x},k=function(){var w=new e.default;if(n)return w.resolve(n),w;if(a)return a;a=w;u.default.request({url:"".concat(t.default.restBaseUrl,"search"),content:{num:10,start:0,sortField:"title",sortOrder:"asc",q:t.default.blockedAppsConfigItemQuery}}).then(function(x){a=void 0;n=x;w.resolve(x)},
function(){a=void 0;w.resolve(void 0)});return w},g=function(w){var x=new e.default;if(!w)return x.resolve(void 0),x;if(h)return h;h=x;u.default.request({url:"".concat(t.default.restBaseUrl,"content/items/").concat(w,"/data")}).then(function(z){h=void 0;d=(null===z||void 0===z?void 0:z.blockedApps)||[];x.resolve(d)},function(){h=void 0;x.resolve(d)});return x},b=function(){var w=new e.default;if(d)return w.resolve(d),w;k().then(function(x){var z,D;if(x)return x=null===(D=null===(z=x.results)||void 0===
z?void 0:z[0])||void 0===D?void 0:D.id,g(x);w.resolve(d)}).then(function(x){w.resolve(x)});return w};B.default={updateBlockedApps:function(w){w=l.__assign({blockedApps:w.length?JSON.stringify(w):""},!w.length&&{clearEmptyFields:!0});return u.default.request({url:"".concat(t.default.restBaseUrl,"portals/self/setSigninSettings"),content:w},{usePost:!0})},getBlockedApps:r,getBlockableApps:b,getBlockedAppsWithInfo:function(w){var x=new e.default;(0,c.default)({blockable:b(),clientIds:r(w)}).then(function(z){var D=
z.blockable,E=z.clientIds;(null===D||void 0===D?0:D.length)&&E||x.resolve([]);x.resolve((D||[]).filter(function(C){return-1<(null===E||void 0===E?void 0:E.indexOf(C.clientid))}))},function(){x.resolve([])});return x},isBlocked:function(w,x){return w.some(function(z){var D;return z.itemid&&(z.itemid===x.id||z.itemid===x.itemId)||z.title===x.title||(null===(D=z.related)||void 0===D?void 0:D.some(function(E){return E.itemid&&(E.itemid===x.id||E.itemid===x.itemId)||E.title===x.title}))})},extractClientIds:function(w){var x=
[];w.forEach(function(z){var D,E;x.push(z.clientid);null===(E=null===(D=z.related)||void 0===D?void 0:D.forEach)||void 0===E?void 0:E.call(D,function(C){x.push(C.clientid)})});return x}}})},"arcgisonline/sharing/dijit/Role":function(){define("require exports tslib ../../esriGeowConfig ../../pages/utils/arrays ./_LevelAwareMixin esri/lang dojo/i18n!../../nls/custom-roles".split(" "),function(f,B,l,e,c,u,t,d){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);
d=l.__importDefault(d);return function(q){function m(a){var h=q.call(this)||this;h.declaredClass="arcgisonline.sharing.dijit.Role";h.id=null;h.baseRole=null;h.name=null;h.description=null;h.privileges=[];h.privilegeObj={portal:{admin:{inviteUsers:!1,disableUsers:!1,viewUsers:!1,updateUsers:!1,deleteUsers:!1,changeUserRoles:!1,viewGroups:!1,updateGroups:!1,deleteGroups:!1,reassignGroups:!1,assignToGroups:!1,manageEnterpriseGroups:!1,viewItems:!1,updateItems:!1,deleteItems:!1,reassignItems:!1,manageLicenses:!1,
shareToOrg:!1,shareToPublic:!1,createUpdateCapableGroup:!1,updateItemCategorySchema:!1,updateMemberCategorySchema:!1,manageCollaborations:!1,manageSecurity:!1,manageWebsite:!1,manageRoles:!1,manageServers:!1,manageUtilityServices:!1,manageCredits:!1,manageWebhooks:!1,createGPWebhook:!1,createReports:!1,createLeavingDisallowedGroup:!1},publisher:{publishFeatures:!1,publishTiles:!1,publishScenes:!1,publishTiledImagery:!1,publishDynamicImagery:!1,publishServerServices:!1,publishServerGPServices:!1,publishKnowledgeGraph:!1,
registerDataStores:!1,bulkPublishFromDataStores:!1,enumerateDataStores:!1,createFeatureWebhook:!1,createDataPipelines:!1,publishVideo:!1,publishLivestreamVideo:!1,publishFeeds:!1,publishRealTimeAnalytics:!1,publishBigDataAnalytics:!1},user:{createGroup:!1,joinGroup:!1,joinNonOrgGroup:!1,invitePartneredCollaborationMembers:!1,addExternalMembersToGroup:!1,createItem:!1,reassignItems:!1,receiveItems:!1,runWebTool:!1,shareToGroup:!1,shareToOrg:!1,shareToPublic:!1,shareGroupToOrg:!1,shareGroupToPublic:!1,
viewOrgUsers:!1,viewOrgItems:!1,viewOrgGroups:!1,viewTracks:!1}},features:{user:{edit:!1,fullEdit:!1,manageVersions:!1,editIndoorsSpaces:!1}},opendata:{user:{openDataAdmin:!1,designateGroup:!1}},premium:{user:{geocode:!1,networkanalysis:!1,spatialanalysis:!1,geoenrichment:!1,demographics:!1,featurereport:!1},publisher:{geoanalytics:!1,rasteranalysis:!1,createNotebooks:!1,scheduleNotebooks:!1,publishNotebooks:!1,createAdvancedNotebooks:!1}},marketplace:{admin:{manage:!1,purchase:!1,startTrial:!1}}};
a=a||{};var n=a.portalUser;n?(h.id=n.roleId?n.roleId:n.role,h.baseRole=n.role,h.setPrivileges(n.privileges)):(h.id=a.id,h.baseRole=a.role,h.name=a.name,h.description=a.description,a.privileges&&h.setPrivileges(a.privileges));a.viewOnly&&h.setViewOnly();return h}l.__extends(m,q);m.prototype.setViewOnly=function(){var a=this;this.baseRole="org_user";this.id=this.SYSTEM_ROLES.VIEWER;var h=this._buildPrivilegesArray().filter(function(n){return c.default.includes(a.SYSTEM_ROLES.PRIVILEGES[a.id],n)});this.setPrivileges(h)};
m.prototype.isViewer=function(){return t.default.isDefined(this.id)&&this.id===this.SYSTEM_ROLES.VIEWER};m.prototype.isDataEditor=function(){return t.default.isDefined(this.id)&&this.id===this.SYSTEM_ROLES.DATA_EDITOR};m.prototype.isFacilitator=function(){return t.default.isDefined(this.id)&&this.id===this.SYSTEM_ROLES.FACILITATOR};m.prototype.isUser=function(){return t.default.isDefined(this.id)&&("org_user"===this.id||"account_user"===this.id)};m.prototype.isPublisher=function(){return t.default.isDefined(this.id)&&
("org_publisher"===this.id||"account_publisher"===this.id)};m.prototype.isAdmin=function(){return t.default.isDefined(this.id)&&("org_admin"===this.id||"account_admin"===this.id)};m.prototype.isBasedOnUser=function(){return this.isUser()||t.default.isDefined(this.baseRole)&&("org_user"===this.baseRole||"account_user"===this.baseRole)};m.prototype.isBasedOnPublisher=function(){return this.isPublisher()||t.default.isDefined(this.baseRole)&&("org_publisher"===this.baseRole||"account_publisher"===this.baseRole)};
m.prototype.isBasedOnAdmin=function(){return this.isAdmin()||t.default.isDefined(this.baseRole)&&("org_admin"===this.baseRole||"account_admin"===this.baseRole)};m.prototype.isCustom=function(){return!this.isUser()&&!this.isPublisher()&&!this.isAdmin()&&t.default.isDefined(this.id)&&0<this.id.length};m.prototype.isBuiltIn=function(){var a=this.isUser()||this.isPublisher()||this.isAdmin(),h=this.isViewer()||this.isDataEditor()||this.isFacilitator();return a||h};m.prototype.canInviteUsers=function(){var a;
return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.inviteUsers};m.prototype.canDisableUsers=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.disableUsers};m.prototype.canViewUsers=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.viewUsers};m.prototype.canGetCoordinators=function(){return this.canViewUsers()||this.canViewOrgUsers()};m.prototype.canUpdateUsers=function(){var a;return null===(a=this.privilegeObj)||
void 0===a?void 0:a.portal.admin.updateUsers};m.prototype.canDeleteUsers=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.deleteUsers};m.prototype.canChangeUserRoles=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.changeUserRoles};m.prototype.canViewOrgGroups=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.viewGroups};m.prototype.canUpdateOrgGroups=function(){var a;return null===(a=
this.privilegeObj)||void 0===a?void 0:a.portal.admin.updateGroups};m.prototype.canDeleteOrgGroups=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.deleteGroups};m.prototype.canReassignOrgGroups=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.reassignGroups};m.prototype.canAssignUsersToOrgGroups=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.assignToGroups};m.prototype.canManageEnterpriseGroups=
function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.manageEnterpriseGroups};m.prototype.canViewOrgItems=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.viewItems};m.prototype.canUpdateOrgItems=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.updateItems};m.prototype.canDeleteOrgItems=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.deleteItems};m.prototype.canReassignOrgItems=
function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.reassignItems};m.prototype.canReassignOwnItems=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.reassignItems};m.prototype.canReceiveUserItems=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.receiveItems};m.prototype.canRunWebTool=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.runWebTool};m.prototype.canManageItems=
function(){return this.isAdmin()||this.canViewUsers()&&this.canViewOrgItems()&&(this.canUpdateOrgItems()||this.canDeleteOrgItems()||this.canReassignOrgItems())};m.prototype.canManageOrgRecycleBin=function(){return this.isAdmin()||this.canDeleteOrgItems()&&this.canViewUsers()&&this.canViewOrgItems()&&this.canUpdateOrgItems()};m.prototype.canManageLicenses=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.manageLicenses};m.prototype.canShareOthersItemsToOrg=function(){var a;
return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.shareToOrg};m.prototype.canShareOthersItemsToPublic=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.shareToPublic};m.prototype.canCreateUpdateCapableGroup=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.createUpdateCapableGroup};m.prototype.canUpdateItemCategories=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.updateItemCategorySchema};
m.prototype.canUpdateMemberCategories=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.updateMemberCategorySchema};m.prototype.canManageCollaborations=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.manageCollaborations};m.prototype.canManageSecurity=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.manageSecurity};m.prototype.canManageWebsite=function(){var a;return null===(a=this.privilegeObj)||
void 0===a?void 0:a.portal.admin.manageWebsite};m.prototype.canManageRoles=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.manageRoles};m.prototype.canManageServers=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.manageServers};m.prototype.canManageUtilityServices=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.manageUtilityServices};m.prototype.canManageCredits=function(){var a;return null===
(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.manageCredits};m.prototype.canManageWebhooks=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.manageWebhooks};m.prototype.canCreateGeoprocessingWebhook=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.createGPWebhook};m.prototype.canCreateReports=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.createReports};m.prototype.canCreateLeavingDisallowedGroup=
function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.createLeavingDisallowedGroup};m.prototype.canCreateGroup=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.createGroup};m.prototype.canJoinOrgGroup=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.joinGroup};m.prototype.canJoinNonOrgGroup=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.joinNonOrgGroup};
m.prototype.canManageCollaborationGroupMembers=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.invitePartneredCollaborationMembers};m.prototype.canAddExternalMembersToGroup=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.addExternalMembersToGroup};m.prototype.canPublishFeatures=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishFeatures};m.prototype.canPublishTiles=function(){var a;
return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishTiles};m.prototype.canPublishScenes=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishScenes};m.prototype.canPublishTiledImagery=function(){var a,h;return(null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishTiledImagery)&&!(null===(h=e.default.self)||void 0===h?0:h.isPortal)&&this._hasImageEntitlement()};m.prototype.canPublishDynamicImagery=function(){var a,
h;return(null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishDynamicImagery)&&((null===(h=e.default.self)||void 0===h?void 0:h.isPortal)||this._hasImageEntitlement())};m.prototype.canPublishServerServices=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishServerServices};m.prototype.canPublishServerGPServices=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishServerGPServices};m.prototype.canPublishKnowledgeGraphServices=
function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishKnowledgeGraph};m.prototype.canPublishVideo=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishVideo};m.prototype.canPublishLivestreamVideo=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishLivestreamVideo};m.prototype.canPublishFeeds=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishFeeds};
m.prototype.canPublishRealTimeAnalytics=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishRealTimeAnalytics};m.prototype.canPublishBigDataAnalytics=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishBigDataAnalytics};m.prototype.canPublishVectorTiles=function(){return!0};m.prototype.canPublishImageCollection=function(){var a=e.default.self&&e.default.self.isPortal,h=this.canPublishDynamicImagery()||this.canPublishTiledImagery();
return a?this.canPublishDynamicImagery():h};m.prototype.canCreateItem=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.createItem};m.prototype.canShareItemToGroup=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.shareToGroup};m.prototype.canShareItemToOrg=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.shareToOrg};m.prototype.canShareItemToPublic=function(){var a;return null===(a=this.privilegeObj)||
void 0===a?void 0:a.portal.user.shareToPublic};m.prototype.canShareGroupToOrg=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.shareGroupToOrg};m.prototype.canShareGroupToPublic=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.shareGroupToPublic};m.prototype.canViewOrgUsers=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.viewOrgUsers};m.prototype.canViewOrgUserContent=function(){var a;return null===
(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.viewOrgItems};m.prototype.canViewOrgUserGroups=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.viewOrgGroups};m.prototype.canViewTracks=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.viewTracks};m.prototype.canEditFeatures=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.features.user.edit};m.prototype.canEditFeaturesFullControl=function(){var a;
return null===(a=this.privilegeObj)||void 0===a?void 0:a.features.user.fullEdit};m.prototype.canManageVersions=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.features.user.manageVersions};m.prototype.canEditIndoorsSpaces=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.features.user.editIndoorsSpaces};m.prototype.canManageOpenData=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.opendata.user.openDataAdmin};m.prototype.canDesignateOpenDataGroups=
function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.opendata.user.designateGroup};m.prototype.canUseGeocode=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.user.geocode};m.prototype.canUseNetworkAnalysis=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.user.networkanalysis};m.prototype.canUseSpatialAnalysis=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.user.spatialanalysis};
m.prototype.canUseGeoenrichment=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.user.geoenrichment};m.prototype.canUseDemographics=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.user.demographics};m.prototype.canUseFeatureReport=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.user.featurereport};m.prototype.canUseGeoanalytics=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:
a.premium.publisher.geoanalytics};m.prototype.canUseRasterAnalysis=function(){var a;return(null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.publisher.rasteranalysis)&&this.canPublishImageCollection()};m.prototype.canPurchaseMarketplace=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.marketplace.admin.purchase};m.prototype.canManageMarketplace=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.marketplace.admin.manage};m.prototype.canTrialMarketplace=
function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.marketplace.admin.startTrial};m.prototype.canCreateNotebooks=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.publisher.createNotebooks};m.prototype.canScheduleNotebooks=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.publisher.scheduleNotebooks};m.prototype.canPublishNotebooks=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.publisher.publishNotebooks};
m.prototype.canCreateAdvancedNotebooks=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.publisher.createAdvancedNotebooks};m.prototype.canBulkPublishFromDataStores=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.bulkPublishFromDataStores};m.prototype.canEnumerateDataStores=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.enumerateDataStores};m.prototype.canRegisterDataStores=function(){var a;
return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.registerDataStores};m.prototype.canCreateFeatureWebhook=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.createFeatureWebhook};m.prototype.canCreateDataPipelines=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.createDataPipelines};m.prototype.setPrivileges=function(a){this.privileges=a;this._initPrivilegesObject();t.default.isDefined(a)&&this._readPrivileges(a)};
m.prototype.summarize=function(){var a=[],h=e.default.self&&e.default.self.isPortal,n=e.default.self&&e.default.self.portalProperties&&e.default.self.portalProperties.openData&&!0===e.default.self.portalProperties.openData.enabled,r=this.privilegeObj;r.portal.user.viewOrgUsers&&a.push(h?d.default.customRoles.users.canViewOrgUsersSumPortal:d.default.customRoles.users.canViewOrgUsersSum);r.portal.user.createGroup&&a.push(d.default.customRoles.groups.canCreateSum);r.portal.user.joinGroup&&a.push(h?d.default.customRoles.groups.canJoinIntSumPortal:
d.default.customRoles.groups.canJoinIntSum);r.portal.user.joinNonOrgGroup&&a.push(d.default.customRoles.groups.canJoinExt);r.portal.user.viewOrgGroups&&a.push(h?d.default.customRoles.groups.canViewOrgGroupsPortal:d.default.customRoles.groups.canViewOrgGroups);!h&&r.portal.user.invitePartneredCollaborationMembers&&a.push(d.default.customRoles.groups.canInvitePartnered);!h&&r.portal.user.addExternalMembersToGroup&&a.push(d.default.customRoles.groups.canAddExternal);r.portal.user.createItem&&a.push(d.default.customRoles.items.canCreateSum);
r.portal.publisher.publishFeatures&&a.push(d.default.customRoles.items.canPublishFeatures);r.portal.publisher.publishTiles&&a.push(d.default.customRoles.items.canPublishTiles);r.portal.publisher.publishScenes&&a.push(d.default.customRoles.items.canPublishScenes);r.portal.publisher.publishTiledImagery&&a.push(d.default.customRoles.items.canPublishTiledImagery);r.portal.publisher.publishDynamicImagery&&a.push(d.default.customRoles.items.canPublishDynamicImagery);h&&r.portal.publisher.publishServerServices&&
a.push(d.default.customRoles.items.canPublishServerServices);h&&r.portal.publisher.registerDataStores&&a.push(d.default.customRoles.items.canRegisterDataStore);h&&r.portal.publisher.createFeatureWebhook&&a.push(d.default.customRoles.webhooks.canCreateFeatureSum);r.portal.publisher.createDataPipelines&&a.push(d.default.customRoles.items.canCreatePipelines);r.portal.publisher.publishFeeds&&a.push(d.default.customRoles.items.canPublishFeeds);r.portal.publisher.publishRealTimeAnalytics&&a.push(d.default.customRoles.items.canPublishRealTime);
r.portal.publisher.publishBigDataAnalytics&&a.push(d.default.customRoles.items.canPublishBigData);h&&(r.portal.publisher.publishVideo&&a.push(d.default.customRoles.items.canPublishVideo),r.portal.publisher.publishLivestreamVideo&&a.push(d.default.customRoles.items.canPublishLivestreamVideo));r.portal.user.viewOrgItems&&a.push(h?d.default.customRoles.items.canViewOrgItemsPortal:d.default.customRoles.items.canViewOrgItems);r.portal.user.viewTracks&&a.push(d.default.customRoles.items.canViewTracks);
r.portal.user.reassignItems&&a.push(d.default.customRoles.items.canReassignOwnItems);r.portal.user.receiveItems&&a.push(d.default.customRoles.items.canReceiveReassignment);r.portal.user.shareToGroup&&a.push(d.default.customRoles.itemSharing.canShareGroupsSum);r.portal.user.shareToOrg&&a.push(h?d.default.customRoles.itemSharing.canShareOrgSumPortal:d.default.customRoles.itemSharing.canShareOrgSum);r.portal.user.shareToPublic&&a.push(d.default.customRoles.itemSharing.canSharePublicSum);r.portal.user.shareGroupToOrg&&
a.push(h?d.default.customRoles.groupSharing.canShareOrgPortal:d.default.customRoles.groupSharing.canShareOrg);r.portal.user.shareGroupToPublic&&a.push(d.default.customRoles.groupSharing.canSharePublic);n&&r.opendata.user.openDataAdmin&&a.push(d.default.customRoles.openData.canAdmin);r.premium.user.geocode&&a.push(d.default.customRoles.geoservices.canUseGeocoding);r.premium.user.networkanalysis&&a.push(d.default.customRoles.geoservices.canUseNA);r.premium.user.spatialanalysis&&a.push(d.default.customRoles.geoservices.canUseSA);
r.premium.user.geoenrichment&&a.push(d.default.customRoles.geoservices.canUseGeoenrichment);r.premium.user.demographics&&a.push(d.default.customRoles.geoservices.canUseDemographics);r.premium.user.featurereport&&a.push(d.default.customRoles.geoservices.canUseFeatureReport);h&&r.premium.publisher.geoanalytics&&a.push(d.default.customRoles.geoservices.canUseGeoanalytics);r.premium.publisher.rasteranalysis&&a.push(d.default.customRoles.geoservices.canUseRasterAnalysis);r.portal.user.runWebTool&&a.push(d.default.customRoles.geoservices.canRunWebTool);
r.features.user.edit&&a.push(d.default.customRoles.features.canEditSum);r.features.user.fullEdit&&a.push(d.default.customRoles.features.canManageSum);r.features.user.manageVersions&&a.push(d.default.customRoles.versioning.canManage);n&&r.opendata.user.designateGroup&&a.push(d.default.customRoles.openData.canDesignate);r.portal.admin.viewUsers&&a.push(h?d.default.customRoles.userAdmin.canViewSumPortal:d.default.customRoles.userAdmin.canViewSum);r.portal.admin.updateUsers&&a.push(h?d.default.customRoles.userAdmin.canUpdateSumPortal:
d.default.customRoles.userAdmin.canUpdateSum);r.portal.admin.deleteUsers&&a.push(h?d.default.customRoles.userAdmin.canDeleteSumPortal:d.default.customRoles.userAdmin.canDeleteSum);r.portal.admin.inviteUsers&&a.push(h?d.default.customRoles.userAdmin.canAddSum:d.default.customRoles.userAdmin.canInviteSum);r.portal.admin.disableUsers&&a.push(h?d.default.customRoles.userAdmin.canDisableSumPortal:d.default.customRoles.userAdmin.canDisableSum);r.portal.admin.changeUserRoles&&a.push(h?d.default.customRoles.userAdmin.canChangeRolesSumPortal:
d.default.customRoles.userAdmin.canChangeRolesSum);r.portal.admin.manageLicenses&&a.push(h?d.default.customRoles.userAdmin.canManageLicensesSumPortal:d.default.customRoles.userAdmin.canManageLicensesSum);r.portal.admin.viewGroups&&a.push(h?d.default.customRoles.groupAdmin.canViewSumPortal:d.default.customRoles.groupAdmin.canViewSum);r.portal.admin.updateGroups&&a.push(h?d.default.customRoles.groupAdmin.canUpdateSumPortal:d.default.customRoles.groupAdmin.canUpdateSum);r.portal.admin.deleteGroups&&
a.push(h?d.default.customRoles.groupAdmin.canDeleteSumPortal:d.default.customRoles.groupAdmin.canDeleteSum);r.portal.admin.reassignGroups&&a.push(h?d.default.customRoles.groupAdmin.canReassignSumPortal:d.default.customRoles.groupAdmin.canReassignSum);r.portal.admin.assignToGroups&&a.push(h?d.default.customRoles.groupAdmin.canAssignSumPortal:d.default.customRoles.groupAdmin.canAssignSum);r.portal.admin.manageEnterpriseGroups&&a.push(d.default.customRoles.groupAdmin.canLink);r.portal.admin.createUpdateCapableGroup&&
a.push(d.default.customRoles.groupAdmin.canCreateUpdateCapable);r.portal.admin.createLeavingDisallowedGroup&&a.push(d.default.customRoles.groupAdmin.canCreateLeavingDisallowedGroup);r.portal.admin.viewItems&&a.push(h?d.default.customRoles.itemAdmin.canViewSumPortal:d.default.customRoles.itemAdmin.canViewSum);r.portal.admin.updateItems&&a.push(h?d.default.customRoles.itemAdmin.canUpdateSumPortal:d.default.customRoles.itemAdmin.canUpdateSum);r.portal.admin.deleteItems&&a.push(h?d.default.customRoles.itemAdmin.canDeleteSumPortal:
d.default.customRoles.itemAdmin.canDeleteSum);r.portal.admin.reassignItems&&a.push(h?d.default.customRoles.itemAdmin.canReassignSumPortal:d.default.customRoles.itemAdmin.canReassignSum);r.portal.admin.updateItemCategorySchema&&a.push(h?d.default.customRoles.itemAdmin.canManageItemCategoriesSumPortal:d.default.customRoles.itemAdmin.canManageItemCategoriesSum);r.portal.admin.updateMemberCategorySchema&&a.push(h?d.default.customRoles.userAdmin.canManageMemberCategoriesSumPortal:d.default.customRoles.userAdmin.canManageMemberCategoriesSum);
r.portal.admin.manageCollaborations&&a.push(h?d.default.customRoles.settingsAdmin.canManageCollabPortalSum:d.default.customRoles.settingsAdmin.canManageCollabSum);r.portal.admin.manageSecurity&&a.push(h?d.default.customRoles.settingsAdmin.canManageSecurityPortalSum:d.default.customRoles.settingsAdmin.canManageSecuritySum);r.portal.admin.manageWebsite&&a.push(h?d.default.customRoles.settingsAdmin.canManageWebsitePortalSum:d.default.customRoles.settingsAdmin.canManageWebsiteSum);r.portal.admin.manageRoles&&
a.push(h?d.default.customRoles.settingsAdmin.canManageRolesPortalSum:d.default.customRoles.settingsAdmin.canManageRolesSum);r.portal.admin.manageServers&&a.push(d.default.customRoles.settingsAdmin.canManageServersSum);r.portal.admin.manageUtilityServices&&a.push(h?d.default.customRoles.settingsAdmin.canManageUtilityServicesPortalSum:d.default.customRoles.settingsAdmin.canManageUtilityServicesSum);r.portal.admin.manageCredits&&a.push(d.default.customRoles.settingsAdmin.canManageCreditsSum);h&&r.portal.admin.manageWebhooks&&
a.push(d.default.customRoles.admin.manageWebhooksSum);h&&r.portal.admin.createGPWebhook&&a.push(d.default.customRoles.webhooksAdmin.canCreateGPSum);r.portal.admin.createReports&&a.push(d.default.customRoles.itemAdmin.canCreateReports);h&&r.portal.publisher.publishServerGPServices&&a.push(d.default.customRoles.items.canPublishServerGPServices);h&&r.portal.publisher.publishKnowledgeGraph&&a.push(d.default.customRoles.items.canPublishKnowledgeGraph);r.portal.admin.shareToOrg&&a.push(h?d.default.customRoles.itemAdmin.canShareToOrgSumPortal:
d.default.customRoles.itemAdmin.canShareToOrgSum);r.portal.admin.shareToPublic&&a.push(d.default.customRoles.itemAdmin.canShareToPublicSum);h||(r.marketplace.admin.manage&&a.push(d.default.customRoles.marketplace.canAdminSum),r.marketplace.admin.purchase&&a.push(d.default.customRoles.marketplace.canPurchaseSum),r.marketplace.admin.startTrial&&a.push(d.default.customRoles.marketplace.canTrialSum));r.premium.publisher.createAdvancedNotebooks&&a.push(d.default.customRoles.geoservices.canUseAdvancedNotebooks);
r.premium.publisher.createNotebooks&&a.push(d.default.customRoles.items.canCreateNotebooks);r.premium.publisher.publishNotebooks&&a.push(d.default.customRoles.items.canPublishNotebooks);r.premium.publisher.scheduleNotebooks&&a.push(d.default.customRoles.itemAdmin.canScheduleNotebooks);return a};m.prototype._initPrivilegesObject=function(){this._applyToAll(!1)};m.prototype._readPrivileges=function(a){var h=this;t.default.isDefined(a)&&a instanceof Array&&a.forEach(function(n){h._readPrivilege(n)})};
m.prototype._readPrivilege=function(a){this._applyEffectToAction(!0,a)};m.prototype._hasImageEntitlement=function(){var a,h,n;return!(null===(n=null===(h=null===(a=e.default.self)||void 0===a?void 0:a.communitySelf)||void 0===h?void 0:h.userLicensedItems)||void 0===n||!n.some(function(r){var k;return null===(k=r.entitlements)||void 0===k?void 0:k.some(function(g){return"image"===g.toLowerCase()})}))};m.prototype._applyEffectToAction=function(a,h){switch(h){case "portal:admin:inviteUsers":this.privilegeObj.portal.admin.inviteUsers=
a;break;case "portal:admin:disableUsers":this.privilegeObj.portal.admin.disableUsers=a;break;case "portal:admin:viewUsers":this.privilegeObj.portal.admin.viewUsers=a;break;case "portal:admin:updateUsers":this.privilegeObj.portal.admin.updateUsers=a;break;case "portal:admin:deleteUsers":this.privilegeObj.portal.admin.deleteUsers=a;break;case "portal:admin:changeUserRoles":this.privilegeObj.portal.admin.changeUserRoles=a;break;case "portal:admin:viewGroups":this.privilegeObj.portal.admin.viewGroups=
a;break;case "portal:admin:updateGroups":this.privilegeObj.portal.admin.updateGroups=a;break;case "portal:admin:deleteGroups":this.privilegeObj.portal.admin.deleteGroups=a;break;case "portal:admin:reassignGroups":this.privilegeObj.portal.admin.reassignGroups=a;break;case "portal:admin:assignToGroups":this.privilegeObj.portal.admin.assignToGroups=a;break;case "portal:admin:manageEnterpriseGroups":this.privilegeObj.portal.admin.manageEnterpriseGroups=a;break;case "portal:admin:viewItems":this.privilegeObj.portal.admin.viewItems=
a;break;case "portal:admin:updateItems":this.privilegeObj.portal.admin.updateItems=a;break;case "portal:admin:deleteItems":this.privilegeObj.portal.admin.deleteItems=a;break;case "portal:admin:reassignItems":this.privilegeObj.portal.admin.reassignItems=a;break;case "portal:admin:manageLicenses":this.privilegeObj.portal.admin.manageLicenses=a;break;case "portal:admin:shareToOrg":this.privilegeObj.portal.admin.shareToOrg=a;break;case "portal:admin:shareToPublic":this.privilegeObj.portal.admin.shareToPublic=
a;break;case "portal:admin:createUpdateCapableGroup":this.privilegeObj.portal.admin.createUpdateCapableGroup=a;break;case "portal:admin:updateItemCategorySchema":this.privilegeObj.portal.admin.updateItemCategorySchema=a;break;case "portal:admin:updateMemberCategorySchema":this.privilegeObj.portal.admin.updateMemberCategorySchema=a;break;case "portal:admin:manageCollaborations":this.privilegeObj.portal.admin.manageCollaborations=a;break;case "portal:admin:manageSecurity":this.privilegeObj.portal.admin.manageSecurity=
a;break;case "portal:admin:manageWebsite":this.privilegeObj.portal.admin.manageWebsite=a;break;case "portal:admin:manageRoles":this.privilegeObj.portal.admin.manageRoles=a;break;case "portal:admin:manageServers":this.privilegeObj.portal.admin.manageServers=a;break;case "portal:admin:manageUtilityServices":this.privilegeObj.portal.admin.manageUtilityServices=a;break;case "portal:admin:manageCredits":this.privilegeObj.portal.admin.manageCredits=a;break;case "portal:admin:manageWebhooks":this.privilegeObj.portal.admin.manageWebhooks=
a;break;case "portal:admin:createGPWebhook":this.privilegeObj.portal.admin.createGPWebhook=a;break;case "portal:admin:createReports":this.privilegeObj.portal.admin.createReports=a;break;case "portal:admin:createLeavingDisallowedGroup":this.privilegeObj.portal.admin.createLeavingDisallowedGroup=a;break;case "portal:publisher:publishFeatures":this.privilegeObj.portal.publisher.publishFeatures=a;break;case "portal:publisher:publishTiles":this.privilegeObj.portal.publisher.publishTiles=a;break;case "portal:publisher:publishScenes":this.privilegeObj.portal.publisher.publishScenes=
a;break;case "portal:publisher:publishTiledImagery":this.privilegeObj.portal.publisher.publishTiledImagery=a;break;case "portal:publisher:publishDynamicImagery":this.privilegeObj.portal.publisher.publishDynamicImagery=a;break;case "portal:publisher:publishServerServices":this.privilegeObj.portal.publisher.publishServerServices=a;break;case "portal:publisher:publishServerGPServices":this.privilegeObj.portal.publisher.publishServerGPServices=a;break;case "portal:publisher:bulkPublishFromDataStores":this.privilegeObj.portal.publisher.bulkPublishFromDataStores=
a;break;case "portal:publisher:enumerateDataStores":this.privilegeObj.portal.publisher.enumerateDataStores=a;break;case "portal:publisher:registerDataStores":this.privilegeObj.portal.publisher.registerDataStores=a;break;case "portal:publisher:createFeatureWebhook":this.privilegeObj.portal.publisher.createFeatureWebhook=a;break;case "portal:publisher:createDataPipelines":this.privilegeObj.portal.publisher.createDataPipelines=a;break;case "portal:publisher:publishVideo":this.privilegeObj.portal.publisher.publishVideo=
a;break;case "portal:publisher:publishLivestreamVideo":this.privilegeObj.portal.publisher.publishLivestreamVideo=a;break;case "portal:publisher:publishFeeds":this.privilegeObj.portal.publisher.publishFeeds=a;break;case "portal:publisher:publishRealTimeAnalytics":this.privilegeObj.portal.publisher.publishRealTimeAnalytics=a;break;case "portal:publisher:publishBigDataAnalytics":this.privilegeObj.portal.publisher.publishBigDataAnalytics=a;break;case "portal:user:createGroup":this.privilegeObj.portal.user.createGroup=
a;break;case "portal:user:joinGroup":this.privilegeObj.portal.user.joinGroup=a;break;case "portal:user:joinNonOrgGroup":this.privilegeObj.portal.user.joinNonOrgGroup=a;break;case "portal:user:invitePartneredCollaborationMembers":this.privilegeObj.portal.user.invitePartneredCollaborationMembers=a;break;case "portal:user:addExternalMembersToGroup":this.privilegeObj.portal.user.addExternalMembersToGroup=a;break;case "portal:user:createItem":this.privilegeObj.portal.user.createItem=a;break;case "portal:user:shareToGroup":this.privilegeObj.portal.user.shareToGroup=
a;break;case "portal:user:shareToOrg":this.privilegeObj.portal.user.shareToOrg=a;break;case "portal:user:shareToPublic":this.privilegeObj.portal.user.shareToPublic=a;break;case "portal:user:shareGroupToOrg":this.privilegeObj.portal.user.shareGroupToOrg=a;break;case "portal:user:shareGroupToPublic":this.privilegeObj.portal.user.shareGroupToPublic=a;break;case "portal:user:viewOrgUsers":this.privilegeObj.portal.user.viewOrgUsers=a;break;case "portal:user:viewOrgItems":this.privilegeObj.portal.user.viewOrgItems=
a;break;case "portal:user:viewOrgGroups":this.privilegeObj.portal.user.viewOrgGroups=a;break;case "portal:user:viewTracks":this.privilegeObj.portal.user.viewTracks=a;break;case "portal:user:reassignItems":this.privilegeObj.portal.user.reassignItems=a;break;case "portal:user:receiveItems":this.privilegeObj.portal.user.receiveItems=a;break;case "portal:user:runWebTool":this.privilegeObj.portal.user.runWebTool=a;break;case "features:user:edit":this.privilegeObj.features.user.edit=a;break;case "features:user:fullEdit":this.privilegeObj.features.user.fullEdit=
a;break;case "features:user:manageVersions":this.privilegeObj.features.user.manageVersions;break;case "features:user:editIndoorsSpaces":this.privilegeObj.features.user.editIndoorsSpaces;break;case "opendata:user:openDataAdmin":this.privilegeObj.opendata.user.openDataAdmin=a;break;case "opendata:user:designateGroup":this.privilegeObj.opendata.user.designateGroup=a;break;case "premium:user:geocode":this.privilegeObj.premium.user.geocode=a;break;case "premium:user:networkanalysis":this.privilegeObj.premium.user.networkanalysis=
a;break;case "premium:user:spatialanalysis":this.privilegeObj.premium.user.spatialanalysis=a;break;case "premium:user:geoenrichment":this.privilegeObj.premium.user.geoenrichment=a;break;case "premium:user:demographics":this.privilegeObj.premium.user.demographics=a;break;case "premium:user:featurereport":this.privilegeObj.premium.user.featurereport=a;break;case "premium:publisher:geoanalytics":this.privilegeObj.premium.publisher.geoanalytics=a;break;case "premium:publisher:rasteranalysis":this.privilegeObj.premium.publisher.rasteranalysis=
a;break;case "marketplace:admin:purchase":this.privilegeObj.marketplace.admin.purchase=a;break;case "marketplace:admin:manage":this.privilegeObj.marketplace.admin.manage=a;break;case "marketplace:admin:startTrial":this.privilegeObj.marketplace.admin.startTrial=a;break;case "premium:publisher:createNotebooks":this.privilegeObj.premium.publisher.createNotebooks=a;break;case "premium:publisher:scheduleNotebooks":this.privilegeObj.premium.publisher.scheduleNotebooks=a;break;case "premium:publisher:publishNotebooks":this.privilegeObj.premium.publisher.publishNotebooks=
a;break;case "premium:publisher:createAdvancedNotebooks":this.privilegeObj.premium.publisher.createAdvancedNotebooks=a}};m.prototype._applyToAll=function(a){this.privilegeObj.portal.admin.inviteUsers=a;this.privilegeObj.portal.admin.disableUsers=a;this.privilegeObj.portal.admin.viewUsers=a;this.privilegeObj.portal.admin.updateUsers=a;this.privilegeObj.portal.admin.deleteUsers=a;this.privilegeObj.portal.admin.changeUserRoles=a;this.privilegeObj.portal.admin.viewGroups=a;this.privilegeObj.portal.admin.updateGroups=
a;this.privilegeObj.portal.admin.deleteGroups=a;this.privilegeObj.portal.admin.reassignGroups=a;this.privilegeObj.portal.admin.assignToGroups=a;this.privilegeObj.portal.admin.manageEnterpriseGroups=a;this.privilegeObj.portal.admin.viewItems=a;this.privilegeObj.portal.admin.updateItems=a;this.privilegeObj.portal.admin.deleteItems=a;this.privilegeObj.portal.admin.reassignItems=a;this.privilegeObj.portal.admin.manageLicenses=a;this.privilegeObj.portal.admin.shareToOrg=a;this.privilegeObj.portal.admin.shareToPublic=
a;this.privilegeObj.portal.admin.createUpdateCapableGroup=a;this.privilegeObj.portal.admin.updateItemCategorySchema=a;this.privilegeObj.portal.admin.updateMemberCategorySchema=a;this.privilegeObj.portal.admin.manageCollaborations=a;this.privilegeObj.portal.admin.manageSecurity=a;this.privilegeObj.portal.admin.manageWebsite=a;this.privilegeObj.portal.admin.manageRoles=a;this.privilegeObj.portal.admin.manageServers=a;this.privilegeObj.portal.admin.manageUtilityServices=a;this.privilegeObj.portal.admin.manageCredits=
a;this.privilegeObj.portal.admin.manageWebhooks=a;this.privilegeObj.portal.admin.createGPWebhook=a;this.privilegeObj.portal.admin.createReports=a;this.privilegeObj.portal.admin.createLeavingDisallowedGroup=a;this.privilegeObj.portal.publisher.publishFeatures=a;this.privilegeObj.portal.publisher.publishTiles=a;this.privilegeObj.portal.publisher.publishScenes=a;this.privilegeObj.portal.publisher.publishServerServices=a;this.privilegeObj.portal.publisher.publishServerGPServices=a;this.privilegeObj.portal.publisher.publishTiledImagery=
a;this.privilegeObj.portal.publisher.publishDynamicImagery=a;this.privilegeObj.portal.publisher.publishKnowledgeGraph=a;this.privilegeObj.portal.publisher.registerDataStores=a;this.privilegeObj.portal.publisher.bulkPublishFromDataStores=a;this.privilegeObj.portal.publisher.enumerateDataStores=a;this.privilegeObj.portal.publisher.createFeatureWebhook=a;this.privilegeObj.portal.publisher.createDataPipelines=a;this.privilegeObj.portal.user.createGroup=a;this.privilegeObj.portal.user.joinGroup=a;this.privilegeObj.portal.user.joinNonOrgGroup=
a;this.privilegeObj.portal.user.invitePartneredCollaborationMembers=a;this.privilegeObj.portal.user.addExternalMembersToGroup=a;this.privilegeObj.portal.user.createItem=a;this.privilegeObj.portal.user.reassignItems=a;this.privilegeObj.portal.user.receiveItems=a;this.privilegeObj.portal.user.runWebTool=a;this.privilegeObj.portal.user.shareToGroup=a;this.privilegeObj.portal.user.shareToOrg=a;this.privilegeObj.portal.user.shareToPublic=a;this.privilegeObj.portal.user.shareGroupToOrg=a;this.privilegeObj.portal.user.shareGroupToPublic=
a;this.privilegeObj.portal.user.viewOrgUsers=a;this.privilegeObj.portal.user.viewOrgItems=a;this.privilegeObj.portal.user.viewOrgGroups=a;this.privilegeObj.portal.user.viewTracks=a;this.privilegeObj.features.user.edit=a;this.privilegeObj.features.user.fullEdit=a;this.privilegeObj.features.user.manageVersions=a;this.privilegeObj.features.user.editIndoorsSpaces=a;this.privilegeObj.opendata.user.openDataAdmin=a;this.privilegeObj.opendata.user.designateGroup=a;this.privilegeObj.premium.user.geocode=a;
this.privilegeObj.premium.user.networkanalysis=a;this.privilegeObj.premium.user.spatialanalysis=a;this.privilegeObj.premium.user.geoenrichment=a;this.privilegeObj.premium.user.demographics=a;this.privilegeObj.premium.user.featurereport=a;this.privilegeObj.premium.publisher.geoanalytics=a;this.privilegeObj.premium.publisher.rasteranalysis=a;this.privilegeObj.premium.publisher.createNotebooks=a;this.privilegeObj.premium.publisher.scheduleNotebooks=a;this.privilegeObj.premium.publisher.publishNotebooks=
a;this.privilegeObj.premium.publisher.createAdvancedNotebooks=a;this.privilegeObj.portal.publisher.publishVideo=a;this.privilegeObj.portal.publisher.publishLivestreamVideo=a;this.privilegeObj.portal.publisher.publishFeeds=a;this.privilegeObj.portal.publisher.publishRealTimeAnalytics=a;this.privilegeObj.portal.publisher.publishBigDataAnalytics=a;this.privilegeObj.marketplace.admin.purchase=a;this.privilegeObj.marketplace.admin.manage=a;this.privilegeObj.marketplace.admin.startTrial=a};m.prototype._buildPrivilegesArray=
function(){var a=[];!0===this.privilegeObj.portal.admin.inviteUsers&&a.push("portal:admin:inviteUsers");!0===this.privilegeObj.portal.admin.disableUsers&&a.push("portal:admin:disableUsers");!0===this.privilegeObj.portal.admin.viewUsers&&a.push("portal:admin:viewUsers");!0===this.privilegeObj.portal.admin.updateUsers&&a.push("portal:admin:updateUsers");!0===this.privilegeObj.portal.admin.deleteUsers&&a.push("portal:admin:deleteUsers");!0===this.privilegeObj.portal.admin.changeUserRoles&&a.push("portal:admin:changeUserRoles");
!0===this.privilegeObj.portal.admin.viewGroups&&a.push("portal:admin:viewGroups");!0===this.privilegeObj.portal.admin.updateGroups&&a.push("portal:admin:updateGroups");!0===this.privilegeObj.portal.admin.deleteGroups&&a.push("portal:admin:deleteGroups");!0===this.privilegeObj.portal.admin.reassignGroups&&a.push("portal:admin:reassignGroups");!0===this.privilegeObj.portal.admin.assignToGroups&&a.push("portal:admin:assignToGroups");!0===this.privilegeObj.portal.admin.manageEnterpriseGroups&&a.push("portal:admin:manageEnterpriseGroups");
!0===this.privilegeObj.portal.admin.viewItems&&a.push("portal:admin:viewItems");!0===this.privilegeObj.portal.admin.updateItems&&a.push("portal:admin:updateItems");!0===this.privilegeObj.portal.admin.deleteItems&&a.push("portal:admin:deleteItems");!0===this.privilegeObj.portal.admin.reassignItems&&a.push("portal:admin:reassignItems");!0===this.privilegeObj.portal.admin.manageLicenses&&a.push("portal:admin:manageLicenses");!0===this.privilegeObj.portal.admin.shareToOrg&&a.push("portal:admin:shareToOrg");
!0===this.privilegeObj.portal.admin.shareToPublic&&a.push("portal:admin:shareToPublic");!0===this.privilegeObj.portal.admin.createUpdateCapableGroup&&a.push("portal:admin:createUpdateCapableGroup");!0===this.privilegeObj.portal.admin.updateItemCategorySchema&&a.push("portal:admin:updateItemCategorySchema");!0===this.privilegeObj.portal.admin.updateMemberCategorySchema&&a.push("portal:admin:updateMemberCategorySchema");!0===this.privilegeObj.portal.admin.manageCollaborations&&a.push("portal:admin:manageCollaborations");
!0===this.privilegeObj.portal.admin.manageSecurity&&a.push("portal:admin:manageSecurity");!0===this.privilegeObj.portal.admin.manageWebsite&&a.push("portal:admin:manageWebsite");!0===this.privilegeObj.portal.admin.manageRoles&&a.push("portal:admin:manageRoles");!0===this.privilegeObj.portal.admin.manageServers&&a.push("portal:admin:manageServers");!0===this.privilegeObj.portal.admin.manageUtilityServices&&a.push("portal:admin:manageUtilityServices");!0===this.privilegeObj.portal.admin.manageCredits&&
a.push("portal:admin:manageCredits");!0===this.privilegeObj.portal.admin.manageWebhooks&&a.push("portal:admin:manageWebhooks");!0===this.privilegeObj.portal.admin.createGPWebhook&&a.push("portal:admin:createGPWebhook");!0===this.privilegeObj.portal.admin.createReports&&a.push("portal:admin:createReports");!0===this.privilegeObj.portal.admin.createLeavingDisallowedGroup&&a.push("portal:admin:createLeavingDisallowedGroup");!0===this.privilegeObj.portal.publisher.publishFeatures&&a.push("portal:publisher:publishFeatures");
!0===this.privilegeObj.portal.publisher.publishTiles&&a.push("portal:publisher:publishTiles");!0===this.privilegeObj.portal.publisher.publishScenes&&a.push("portal:publisher:publishScenes");!0===this.privilegeObj.portal.publisher.publishTiledImagery&&a.push("portal:publisher:publishTiledImagery");!0===this.privilegeObj.portal.publisher.publishDynamicImagery&&a.push("portal:publisher:publishDynamicImagery");!0===this.privilegeObj.portal.publisher.publishKnowledgeGraph&&a.push("portal:publisher:publishKnowledgeGraph");
!0===this.privilegeObj.portal.publisher.publishServerServices&&a.push("portal:publisher:publishServerServices");!0===this.privilegeObj.portal.publisher.publishServerGPServices&&a.push("portal:publisher:publishServerGPServices");!0===this.privilegeObj.portal.publisher.bulkPublishFromDataStores&&a.push("portal:publisher:bulkPublishFromDataStores");!0===this.privilegeObj.portal.publisher.enumerateDataStores&&a.push("portal:publisher:enumerateDataStores");!0===this.privilegeObj.portal.publisher.registerDataStores&&
a.push("portal:publisher:registerDataStores");!0===this.privilegeObj.portal.publisher.createFeatureWebhook&&a.push("portal:publisher:createFeatureWebhook");!0===this.privilegeObj.portal.publisher.createDataPipelines&&a.push("portal:publisher:createDataPipelines");!0===this.privilegeObj.portal.publisher.publishVideo&&a.push("portal:publisher:publishVideo");!0===this.privilegeObj.portal.publisher.publishLivestreamVideo&&a.push("portal:publisher:publishLivestreamVideo");!0===this.privilegeObj.portal.publisher.publishFeeds&&
a.push("portal:publisher:publishFeeds");!0===this.privilegeObj.portal.publisher.publishRealTimeAnalytics&&a.push("portal:publisher:publishRealTimeAnalytics");!0===this.privilegeObj.portal.publisher.publishBigDataAnalytics&&a.push("portal:publisher:publishBigDataAnalytics");!0===this.privilegeObj.portal.user.createGroup&&a.push("portal:user:createGroup");!0===this.privilegeObj.portal.user.joinGroup&&a.push("portal:user:joinGroup");!0===this.privilegeObj.portal.user.joinNonOrgGroup&&a.push("portal:user:joinNonOrgGroup");
!0===this.privilegeObj.portal.user.invitePartneredCollaborationMembers&&a.push("portal:user:invitePartneredCollaborationMembers");!0===this.privilegeObj.portal.user.addExternalMembersToGroup&&a.push("portal:user:addExternalMembersToGroup");!0===this.privilegeObj.portal.user.createItem&&a.push("portal:user:createItem");!0===this.privilegeObj.portal.user.reassignItems&&a.push("portal:user:reassignItems");!0===this.privilegeObj.portal.user.receiveItems&&a.push("portal:user:receiveItems");!0===this.privilegeObj.portal.user.runWebTool&&
a.push("portal:user:runWebTool");!0===this.privilegeObj.portal.user.shareToGroup&&a.push("portal:user:shareToGroup");!0===this.privilegeObj.portal.user.shareToOrg&&a.push("portal:user:shareToOrg");!0===this.privilegeObj.portal.user.shareToPublic&&a.push("portal:user:shareToPublic");!0===this.privilegeObj.portal.user.shareGroupToOrg&&a.push("portal:user:shareGroupToOrg");!0===this.privilegeObj.portal.user.shareGroupToPublic&&a.push("portal:user:shareGroupToPublic");!0===this.privilegeObj.portal.user.viewOrgUsers&&
a.push("portal:user:viewOrgUsers");!0===this.privilegeObj.portal.user.viewOrgItems&&a.push("portal:user:viewOrgItems");!0===this.privilegeObj.portal.user.viewOrgGroups&&a.push("portal:user:viewOrgGroups");!0===this.privilegeObj.portal.user.viewTracks&&a.push("portal:user:viewTracks");!0===this.privilegeObj.features.user.edit&&a.push("features:user:edit");!0===this.privilegeObj.features.user.fullEdit&&a.push("features:user:fullEdit");!0===this.privilegeObj.features.user.manageVersions&&a.push("features:user:manageVersions");
!0===this.privilegeObj.features.user.editIndoorsSpaces&&a.push("features:user:editIndoorsSpaces");!0===this.privilegeObj.opendata.user.openDataAdmin&&a.push("opendata:user:openDataAdmin");!0===this.privilegeObj.opendata.user.designateGroup&&a.push("opendata:user:designateGroup");!0===this.privilegeObj.premium.user.geocode&&a.push("premium:user:geocode");!0===this.privilegeObj.premium.user.networkanalysis&&a.push("premium:user:networkanalysis");!0===this.privilegeObj.premium.user.spatialanalysis&&
a.push("premium:user:spatialanalysis");!0===this.privilegeObj.premium.user.geoenrichment&&a.push("premium:user:geoenrichment");!0===this.privilegeObj.premium.user.demographics&&a.push("premium:user:demographics");!0===this.privilegeObj.premium.user.featurereport&&a.push("premium:user:featurereport");!0===this.privilegeObj.premium.publisher.geoanalytics&&a.push("premium:publisher:geoanalytics");!0===this.privilegeObj.premium.publisher.rasteranalysis&&a.push("premium:publisher:rasteranalysis");!0===
this.privilegeObj.premium.publisher.createNotebooks&&a.push("premium:publisher:createNotebooks");!0===this.privilegeObj.premium.publisher.scheduleNotebooks&&a.push("premium:publisher:scheduleNotebooks");!0===this.privilegeObj.premium.publisher.publishNotebooks&&a.push("premium:publisher:publishNotebooks");!0===this.privilegeObj.premium.publisher.createAdvancedNotebooks&&a.push("premium:publisher:createAdvancedNotebooks");!0===this.privilegeObj.marketplace.admin.purchase&&a.push("marketplace:admin:purchase");
!0===this.privilegeObj.marketplace.admin.manage&&a.push("marketplace:admin:manage");!0===this.privilegeObj.marketplace.admin.startTrial&&a.push("marketplace:admin:startTrial");return a};return m}(u.default)})},"arcgisonline/sharing/dijit/_LevelAwareMixin":function(){define(["require","exports","tslib"],function(f,B,l){Object.defineProperty(B,"__esModule",{value:!0});B.LevelAwareInfo=void 0;f="portal:user:joinGroup portal:user:viewOrgGroups portal:user:viewOrgItems portal:user:viewOrgUsers premium:user:demographics premium:user:featurereport premium:user:geocode premium:user:networkanalysis".split(" ");
var e=l.__spreadArray(["features:user:edit"],f,!0);B.LevelAwareInfo={SYSTEM_ROLES:{VIEWER:"iAAAAAAAAAAAAAAA",DATA_EDITOR:"iBBBBBBBBBBBBBBB",FACILITATOR:"iCCCCCCCCCCCCCCC",PRIVILEGES:{iAAAAAAAAAAAAAAA:f,iBBBBBBBBBBBBBBB:e,iCCCCCCCCCCCCCCC:l.__spreadArray("portal:admin:createUpdateCapableGroup portal:user:invitePartneredCollaborationMembers portal:user:addExternalMembersToGroup portal:publisher:publishFeatures portal:publisher:publishTiles portal:publisher:publishServerServices portal:user:createGroup portal:user:createItem portal:user:joinNonOrgGroup portal:user:shareGroupToOrg portal:user:shareGroupToPublic portal:user:shareToGroup portal:user:shareToOrg portal:user:shareToPublic portal:user:viewOrgUsers portal:user:viewOrgItems portal:user:viewOrgGroups premium:user:geoenrichment premium:user:spatialanalysis premium:publisher:geoanalytics premium:publisher:rasteranalysis portal:publisher:bulkPublishFromDataStores portal:publisher:enumerateDataStores portal:publisher:registerDataStores".split(" "),
e,!0)}},LICENSE_LEVELS:{ONE:"1",ONE_PLUS_EDIT:"11",TWO:"2"}};l=function(){return function(){this.SYSTEM_ROLES=B.LevelAwareInfo.SYSTEM_ROLES;this.LICENSE_LEVELS=B.LevelAwareInfo.LICENSE_LEVELS}}();B.default=l})},"arcgisonline/telemetry":function(){define(["require","exports","tslib","./esriGeowConfig","telemetry/telemetry.dojo.min"],function(f,B,l,e,c){Object.defineProperty(B,"__esModule",{value:!0});e=l.__importDefault(e);c=l.__importDefault(c);f=function(){function u(){}u.init=function(t,d){if(this._instance)return this._instance;
this._envCredentials=JSON.parse(atob(e.default.telemetryConfig||"Int9Ig\x3d\x3d"));if(JSON.stringify(this._envCredentials)!==JSON.stringify("{}"))return d=new c.default({disabled:!(e.default.usageTrackingEnabled&&!t.disabled&&!t.config.isPortal),portal:t.config,amazon:this._getAmazonCredentials(t)}),"logPageView"in t&&!0!==t.logPageView||(null===d||void 0===d?void 0:d.logEvent({eventType:"pageView",pageName:this.getPageName(),path:window.location.pathname,pageUrl:window.location.href})),this._instance=
d};u.getPageName=function(){if(!window.location.pathname||!window.location.pathname.includes(".html")||window.location.pathname.includes("index.html"))return"home";var t=window.location.pathname.split("/").find(function(d){return d.includes(".html")});return t?t.replace(".html",""):"ArcGIS"};u._getAmazonCredentials=function(t){var d=this._getEnvironment(t.config.portalHostname);return{userPoolID:this._envCredentials[d].userPoolID,app:{name:t.name||"Arcgis Online",id:this._envCredentials[d].appId,
version:t.config.currentVersion||"5.2"}}};u._getEnvironment=function(t){t=t.replace("www.","");return"arcgis.com"===t&&"production"||"qaext.arcgis.com"===t&&"qa"||"dev"};return u}();B.default=f})},"telemetry/telemetry.dojo.min":function(){define(function(){function f(T,N){var K=new XMLHttpRequest;K.addEventListener("load",function(){N(K.responseText)});K.open(T.method,T.url);Object.keys(T.headers).forEach(function(W){K.setRequestHeader(W,T.headers[W])});K.send(T.body)}function B(T,N){var K=D.get(A);
if(K&&Date.now()/1E3<K.Expiration)return N(K);l(T,function(W){D.set(A,W);N(W)})}function l(T,N){var K=v({},G);K.headers["X-Amz-Target"]="AWSCognitoIdentityService.GetId";K.body=JSON.stringify({IdentityPoolId:T});f(K,function(W){e(JSON.parse(W),N)})}function e(T,N){var K=v({},G);K.headers["X-Amz-Target"]="AWSCognitoIdentityService.GetCredentialsForIdentity";K.body=JSON.stringify({IdentityId:T.IdentityId});f(K,function(W){W=JSON.parse(W);N(W.Credentials)})}function c(){var T=void 0,N=D.get(H);var K=
((!N||Date.now()>N.expiration)&&(T=!0,N={id:Math.floor(17592186044416*(1+Math.random())).toString(16),startTimestamp:(new Date).toISOString()}),N.expiration=Date.now()+F,D.set(H,N),T&&(N.new=!0),N);N=D.get(L);T=(N||(N=u()+u()+"-"+u()+"-"+u()+"-"+u()+"-"+u()+u()+u(),D.set(L,N)),N);return{session:K,id:T}}function u(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function t(T,N){var K={host:N.uri.host,"content-type":T.config.defaultContentType,accept:T.config.defaultAcceptType,
"x-amz-date":q(N.signDate)};N.request.method=N.request.method.toUpperCase();N.request.body?N.payload=N.request.body:N.request.data&&T.payloadSerializer?N.payload=T.payloadSerializer(N.request.data):delete K["content-type"];N.request.headers=m(K,Object.keys(N.request.headers||{}).reduce(function(W,da){return W[da.toLowerCase()]=N.request.headers[da],W},{}));N.sortedHeaderKeys=Object.keys(N.request.headers).sort();N.request.headers["content-type"]&&(N.request.headers["content-type"]=N.request.headers["content-type"].split(";")[0]);
"object"===E(N.request.params)&&m(N.uri.queryParams,N.request.params)}function d(T,N){N.signedHeaders=N.sortedHeaderKeys.map(function(K){return K.toLowerCase()}).join(";");N.canonicalRequest=String(N.request.method).toUpperCase()+"\n"+encodeURI(N.uri.path)+"\n"+Object.keys(N.uri.queryParams).sort().map(function(K){return encodeURIComponent(K)+"\x3d"+encodeURIComponent(N.uri.queryParams[K])}).join("\x26")+"\n"+N.sortedHeaderKeys.map(function(K){return K.toLocaleLowerCase()+":"+N.request.headers[K]}).join("\n")+
"\n\n"+N.signedHeaders+"\n"+T.hasher.hash(N.payload?N.payload:"")}function q(T,N){T=T.toISOString().replace(/[:\-]|\.\d{3}/g,"").substr(0,17);return N?T.substr(0,8):T}function m(T){return[].slice.call(arguments,1).forEach(function(N){N&&"object"===(void 0===N?"undefined":E(N))&&Object.keys(N).forEach(function(K){var W=N[K];void 0!==W&&(null!==W&&"object"===(void 0===W?"undefined":E(W))?(T[K]=Array.isArray(W)?[]:{},m(T[K],W)):T[K]=W)})}),T}function a(T){var N=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:{},K=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},W=c().session;return{eventType:"pageView",timestamp:(new Date).toISOString(),session:{id:W.id,startTimestamp:W.startTimestamp},attributes:v({referrer:document.referrer,hostname:window.location.hostname,path:T||window.location.pathname,pageUrl:T||window.location.pathname,pageName:document.title,previousPageUrl:N.pageUrl,previousPageName:N.pageName},h(K)),metrics:n(K)}}function h(T){var N=v({},T);return delete N.workflow,I.forEach(function(K){return delete N[K]}),
Object.keys(N).forEach(function(K){N[K]="json"===K?N[K]?JSON.stringify(N[K]):"null":void 0!==N[K]?N[K].toString():"null"}),N}function n(T){var N={};return I.forEach(function(K){T[K]&&(N[K]=T[K])}),N}function r(){var T=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},N=arguments[1];return(new S({region:"us-east-1",service:"mobileanalytics",accessKeyId:T.AccessKeyId,secretAccessKey:T.SecretKey,sessionToken:T.SessionToken})).sign(N)}function k(T,N,K){var W=c();T=Array.isArray(T)?T:[T];var da=
g(T);B(N,function(fa){try{da.headers=r(fa,da),da.headers["x-amz-Client-Context"]=JSON.stringify({client:{client_id:W.id,app_title:K.name,app_version_name:K.version||"unknown"},services:{mobile_analytics:{app_id:K.id}}})}catch(ha){return}f(da,function(ha){})})}function g(T){return{url:1<arguments.length&&void 0!==arguments[1]?arguments[1]:P,method:"POST",body:JSON.stringify({events:T})}}function b(T){window.ga&&window.ga(function(){T(window.ga.getAll())})}function w(T,N){return z({hitType:"pageview",
page:T||window.location.pathname},N,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},3<arguments.length&&void 0!==arguments[3]?arguments[3]:{})}function x(T){return z({hitType:"event",eventCategory:T.category||"none",eventAction:T.action,eventLabel:T.label},T,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:{})}function z(T,N,K,W){return Object.keys(K).forEach(function(da){T["dimension"+K[da]]=N[da]}),Object.keys(W).forEach(function(da){T["metric"+
W[da]]=N[da]}),T}var D={storage:{},memory:!0,get:function(T){var N=void 0;try{N=window.localStorage&&window.localStorage.getItem(T)||this.storage[T]}catch(K){N=this.storage[T]}if(N)try{return JSON.parse(N)}catch(K){}},set:function(T,N){N=JSON.stringify(N);try{window.localStorage.setItem(T,N)}catch(K){this.memory||(this.memory=!0),this.storage[T]=N}},delete:function(T){try{window.localStorage.removeItem(T)}catch(N){this.memory||(this.memory=!0),delete this.storage[T]}}},E="function"==typeof Symbol&&
"symbol"==typeof Symbol.iterator?function(T){return typeof T}:function(T){return T&&"function"==typeof Symbol&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},C=function(T,N){if(!(T instanceof N))throw new TypeError("Cannot call a class as a function");},y=function(){function T(N,K){for(var W=0;W<K.length;W++){var da=K[W];da.enumerable=da.enumerable||!1;da.configurable=!0;"value"in da&&(da.writable=!0);Object.defineProperty(N,da.key,da)}}return function(N,K,W){return K&&T(N.prototype,
K),W&&T(N,W),N}}(),v=Object.assign||function(T){for(var N=1;N<arguments.length;N++){var K=arguments[N],W;for(W in K)Object.prototype.hasOwnProperty.call(K,W)&&(T[W]=K[W])}return T},A="TELEMETRY_COGNITO_CREDENTIALS",G={method:"POST",url:"https://cognito-identity.us-east-1.amazonaws.com/",headers:{"Content-type":"application/x-amz-json-1.1"}},F=18E5,H="TELEMETRY_SESSION",L="TELEMETRY_CLIENT_ID",M=function(T,N){N={};var K=N.lib={},W=function(){},da=K.Base={extend:function(ba){W.prototype=this;var ia=
new W;return ba&&ia.mixIn(ba),ia.hasOwnProperty("init")||(ia.init=function(){ia.$super.init.apply(this,arguments)}),ia.init.prototype=ia,ia.$super=this,ia},create:function(){var ba=this.extend();return ba.init.apply(ba,arguments),ba},init:function(){},mixIn:function(ba){for(var ia in ba)ba.hasOwnProperty(ia)&&(this[ia]=ba[ia]);ba.hasOwnProperty("toString")&&(this.toString=ba.toString)},clone:function(){return this.init.prototype.extend(this)}},fa=K.WordArray=da.extend({init:function(ba,ia){ba=this.words=
ba||[];this.sigBytes=void 0!=ia?ia:4*ba.length},toString:function(ba){return(ba||ra).stringify(this)},concat:function(ba){var ia=this.words,wa=ba.words,Aa=this.sigBytes;if(ba=ba.sigBytes,this.clamp(),Aa%4)for(var Fa=0;Fa<ba;Fa++)ia[Aa+Fa>>>2]|=(wa[Fa>>>2]>>>24-Fa%4*8&255)<<24-(Aa+Fa)%4*8;else if(65535<wa.length)for(Fa=0;Fa<ba;Fa+=4)ia[Aa+Fa>>>2]=wa[Fa>>>2];else ia.push.apply(ia,wa);return this.sigBytes+=ba,this},clamp:function(){var ba=this.words,ia=this.sigBytes;ba[ia>>>2]&=4294967295<<32-ia%4*8;
ba.length=T.ceil(ia/4)},clone:function(){var ba=da.clone.call(this);return ba.words=this.words.slice(0),ba},random:function(ba){for(var ia=[],wa=0;wa<ba;wa+=4)ia.push(4294967296*T.random()|0);return new fa.init(ia,ba)}}),ha=N.enc={},ra=ha.Hex={stringify:function(ba){var ia=ba.words;ba=ba.sigBytes;for(var wa=[],Aa=0;Aa<ba;Aa++){var Fa=ia[Aa>>>2]>>>24-Aa%4*8&255;wa.push((Fa>>>4).toString(16));wa.push((15&Fa).toString(16))}return wa.join("")},parse:function(ba){for(var ia=ba.length,wa=[],Aa=0;Aa<ia;Aa+=
2)wa[Aa>>>3]|=parseInt(ba.substr(Aa,2),16)<<24-Aa%8*4;return new fa.init(wa,ia/2)}},za=ha.Latin1={stringify:function(ba){var ia=ba.words;ba=ba.sigBytes;for(var wa=[],Aa=0;Aa<ba;Aa++)wa.push(String.fromCharCode(ia[Aa>>>2]>>>24-Aa%4*8&255));return wa.join("")},parse:function(ba){for(var ia=ba.length,wa=[],Aa=0;Aa<ia;Aa++)wa[Aa>>>2]|=(255&ba.charCodeAt(Aa))<<24-Aa%4*8;return new fa.init(wa,ia)}},Da=ha.Utf8={stringify:function(ba){try{return decodeURIComponent(escape(za.stringify(ba)))}catch(ia){throw Error("Malformed UTF-8 data");
}},parse:function(ba){return za.parse(unescape(encodeURIComponent(ba)))}},va=K.BufferedBlockAlgorithm=da.extend({reset:function(){this._data=new fa.init;this._nDataBytes=0},_append:function(ba){"string"==typeof ba&&(ba=Da.parse(ba));this._data.concat(ba);this._nDataBytes+=ba.sigBytes},_process:function(ba){var ia=this._data,wa=ia.words,Aa=ia.sigBytes,Fa=this.blockSize,O=Aa/(4*Fa);O=ba?T.ceil(O):T.max((0|O)-this._minBufferSize,0);if(ba=O*Fa,Aa=T.min(4*ba,Aa),ba){for(var ya=0;ya<ba;ya+=Fa)this._doProcessBlock(wa,
ya);ya=wa.splice(0,ba);ia.sigBytes-=Aa}return new fa.init(ya,Aa)},clone:function(){var ba=da.clone.call(this);return ba._data=this._data.clone(),ba},_minBufferSize:0});K.Hasher=va.extend({cfg:da.extend(),init:function(ba){this.cfg=this.cfg.extend(ba);this.reset()},reset:function(){va.reset.call(this);this._doReset()},update:function(ba){return this._append(ba),this._process(),this},finalize:function(ba){return ba&&this._append(ba),this._doFinalize()},blockSize:16,_createHelper:function(ba){return function(ia,
wa){return(new ba.init(wa)).finalize(ia)}},_createHmacHelper:function(ba){return function(ia,wa){return(new Ga.HMAC.init(ba,wa)).finalize(ia)}}});var Ga=N.algo={};return N}(Math);!function(T){var N=M.lib,K=N.WordArray,W=N.Hasher;N=M.algo;for(var da=[],fa=[],ha=function(ia){return 4294967296*(ia-(0|ia))|0},ra=2,za=0;64>za;){a:{var Da=ra;for(var va=T.sqrt(Da),Ga=2;Ga<=va;Ga++)if(!(Da%Ga)){Da=!1;break a}Da=!0}Da&&(8>za&&(da[za]=ha(T.pow(ra,.5))),fa[za]=ha(T.pow(ra,1/3)),za++);ra++}var ba=[];N=N.SHA256=
W.extend({_doReset:function(){this._hash=new K.init(da.slice(0))},_doProcessBlock:function(ia,wa){for(var Aa=this._hash.words,Fa=Aa[0],O=Aa[1],ya=Aa[2],Ha=Aa[3],ea=Aa[4],Oa=Aa[5],Na=Aa[6],Ca=Aa[7],X=0;64>X;X++){if(16>X)ba[X]=0|ia[wa+X];else{var oa=ba[X-15],pa=ba[X-2];ba[X]=((oa<<25|oa>>>7)^(oa<<14|oa>>>18)^oa>>>3)+ba[X-7]+((pa<<15|pa>>>17)^(pa<<13|pa>>>19)^pa>>>10)+ba[X-16]}oa=Ca+((ea<<26|ea>>>6)^(ea<<21|ea>>>11)^(ea<<7|ea>>>25))+(ea&Oa^~ea&Na)+fa[X]+ba[X];pa=((Fa<<30|Fa>>>2)^(Fa<<19|Fa>>>13)^(Fa<<
10|Fa>>>22))+(Fa&O^Fa&ya^O&ya);Ca=Na;Na=Oa;Oa=ea;ea=Ha+oa|0;Ha=ya;ya=O;O=Fa;Fa=oa+pa|0}Aa[0]=Aa[0]+Fa|0;Aa[1]=Aa[1]+O|0;Aa[2]=Aa[2]+ya|0;Aa[3]=Aa[3]+Ha|0;Aa[4]=Aa[4]+ea|0;Aa[5]=Aa[5]+Oa|0;Aa[6]=Aa[6]+Na|0;Aa[7]=Aa[7]+Ca|0},_doFinalize:function(){var ia=this._data,wa=ia.words,Aa=8*this._nDataBytes,Fa=8*ia.sigBytes;return wa[Fa>>>5]|=128<<24-Fa%32,wa[14+(Fa+64>>>9<<4)]=T.floor(Aa/4294967296),wa[15+(Fa+64>>>9<<4)]=Aa,ia.sigBytes=4*wa.length,this._process(),this._hash},clone:function(){var ia=W.clone.call(this);
return ia._hash=this._hash.clone(),ia}});M.SHA256=W._createHelper(N);M.HmacSHA256=W._createHmacHelper(N)}(Math);(function(){var T=M.enc.Utf8;M.algo.HMAC=M.lib.Base.extend({init:function(N,K){N=this._hasher=new N.init;"string"==typeof K&&(K=T.parse(K));var W=N.blockSize,da=4*W;K.sigBytes>da&&(K=N.finalize(K));K.clamp();N=this._oKey=K.clone();K=this._iKey=K.clone();for(var fa=N.words,ha=K.words,ra=0;ra<W;ra++)fa[ra]^=1549556828,ha[ra]^=909522486;N.sigBytes=K.sigBytes=da;this.reset()},reset:function(){var N=
this._hasher;N.reset();N.update(this._iKey)},update:function(N){return this._hasher.update(N),this},finalize:function(N){var K=this._hasher;return N=K.finalize(N),K.reset(),K.finalize(this._oKey.clone().concat(N))}})})();var Q={region:"eu-west-1",service:"execute-api",defaultContentType:"application/json",defaultAcceptType:"application/json",payloadSerializerFactory:function(){return function(T){return JSON.stringify(T)}},uriParserFactory:function(){function T(K){return/^\??(.*)$/.exec(K)[1].split("\x26").reduce(function(W,
da){return da=/^(.+)=(.*)$/.exec(da),da&&(W[da[1]]=da[2]),W},{})}var N=document?document.createElement("a"):{};return function(K){return N.href=K,{protocol:N.protocol,host:N.host.replace(/^(.*):((80)|(443))$/,"$1"),path:("/"!==N.pathname.charAt(0)?"/":"")+N.pathname,queryParams:T(N.search)}}},hasherFactory:function(){return{hash:function(T,N){N=m({hexOutput:!0,textInput:!0},N);T=M.SHA256(T);return N.hexOutput?T.toString(M.enc.Hex):T},hmac:function(T,N,K){K=m({hexOutput:!0,textInput:!0},K);T=M.HmacSHA256(N,
T,{asBytes:!0});return K.hexOutput?T.toString(M.enc.Hex):T}}}},S=function(){function T(N){C(this,T);this.config=m({},Q,N);this.payloadSerializer=this.config.payloadSerializer||this.config.payloadSerializerFactory();this.uriParser=this.config.uriParserFactory();this.hasher=this.config.hasherFactory();N=this.config.accessKeyId;if(void 0===N||!N)throw Error("AwsSigner requires AWS AccessKeyID");N=this.config.secretAccessKey;if(void 0===N||!N)throw Error("AwsSigner requires AWS SecretAccessKey");}return y(T,
[{key:"sign",value:function(N,K){N={request:m({},N),signDate:K||new Date,uri:this.uriParser(N.url)};t(this,N);d(this,N);N.credentialScope=[q(N.signDate,!0),this.config.region,this.config.service,"aws4_request"].join("/");N.stringToSign="AWS4-HMAC-SHA256\n"+q(N.signDate)+"\n"+N.credentialScope+"\n"+this.hasher.hash(N.canonicalRequest);K=this.hasher.hmac;var W=K(K(K(K("AWS4"+this.config.secretAccessKey,q(N.signDate,!0),{hexOutput:!1}),this.config.region,{hexOutput:!1,textInput:!1}),this.config.service,
{hexOutput:!1,textInput:!1}),"aws4_request",{hexOutput:!1,textInput:!1});N.signature=K(W,N.stringToSign,{textInput:!1});N.authorization="AWS4-HMAC-SHA256 Credential\x3d"+this.config.accessKeyId+"/"+N.credentialScope+", SignedHeaders\x3d"+N.signedHeaders+", Signature\x3d"+N.signature;return{Accept:N.request.headers.accept,Authorization:N.authorization,"Content-Type":N.request.headers["content-type"],"x-amz-date":N.request.headers["x-amz-date"],"x-amz-security-token":this.config.sessionToken||void 0}}}]),
T}(),I=["size","duration","position","number","count"],P="https://mobileanalytics.us-east-1.amazonaws.com/2014-06-05/events",J=function(){function T(N){C(this,T);this.name="amazon";v(this,N);c().session.new&&!N.test&&this.logEvent({eventType:"_session.start"})}return y(T,[{key:"logPageView",value:function(N,K){N=a(N,this.previousPage,K);k(N,this.userPoolID,this.app);this.previousPage=N.attributes}},{key:"logEvent",value:function(N){var K=c().session;N={eventType:N.eventType||"other",timestamp:(new Date).toISOString(),
session:{id:K.id,startTimestamp:K.startTimestamp},attributes:v({referrer:document.referrer,hostname:window.location.hostname,path:window.location.pathname},h(N)),metrics:n(N)};k(N,this.userPoolID,this.app)}}]),T}(),U=function(){function T(){var N=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};C(this,T);this.name="google";v(this,N)}return y(T,[{key:"logPageView",value:function(N,K){var W=w(N,K,this.dimensions,this.metrics);b(function(da){da.forEach(function(fa){fa.send(W)})})}},{key:"logEvent",
value:function(N){var K=x(N,this.dimensions,this.metrics);b(function(W){W.forEach(function(da){da.send(K)})})}}]),T}(),Y=function(T){if(T)return M.SHA256(T).toString(M.enc.Hex)},aa="esri.com esriuk.com esri.de esri.ca esrifrance.fr esri.nl esri-portugal.pt esribulgaria.com esri.fi esri.kr esrimalaysia.com.my esri.es esriaustralia.com.au esri-southafrica.com esri.cl esrichina.com.cn esri.co esriturkey.com.tr geodata.no esriitalia.it esri.pl".split(" "),la=function(){var T=0<arguments.length&&void 0!==
arguments[0]?arguments[0]:{},N=T.portal||{};return!T.disabled&&"1"!==navigator.doNotTrack&&"1"!==window.doNotTrack&&(void 0===N.eueiEnabled||!1!==N.eueiEnabled)&&(!(!N.eueiEnabled||!N.user||N.user.orgId!==N.id)||!(!N.user||N.user.orgId||"US"!==N.ipCntryCode)||!N.user&&"US"===N.ipCntryCode||!(0<Object.keys(N).length))};return function(){function T(N){C(this,T);try{(this.trackers=[],this.workflows={},this.test=N.test,this.debug=N.debug,this.disabled=!la(N),N.portal&&N.portal.user)?this.setUser(N.portal.user,
(N.portal.subscriptionInfo||{}).type):N.user&&this.setUser(N.user),this.disabled||this._initTrackers(N)}catch(K){this.disabled=!0}}return y(T,[{key:"_initTrackers",value:function(N){if(N.amazon){var K=new J(N.amazon);this.trackers.push(K)}N.google&&(N=new U(N.google),this.trackers.push(N))}},{key:"setUser",value:function(){var N=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},K=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Public";this.user=N="string"==typeof N?{username:N}:N;
this.user.accountType=K;var W=void 0;if(N.email&&N.email.split){var da=N.email.split("@")[1];W=0<aa.filter(function(fa){return da===fa}).length}(W||-1<["In House","Demo and Marketing"].indexOf(K))&&(this.user.internalUser=!0)}},{key:"logPageView",value:function(N){var K=this.preProcess(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});return this.debug||!this.test||this.disabled?!this.trackers.length||this.disabled?!1:(this.trackers.forEach(function(W){try{W.logPageView(N,K)}catch(da){}}),
!0):K}},{key:"logEvent",value:function(){var N=this.preProcess(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});return!this.debug&&this.test?N:!this.trackers.length||this.disabled?!1:(this.trackers.forEach(function(K){try{K.logEvent(N)}catch(W){}}),!0)}},{key:"logError",value:function(){var N=v({eventType:"error"},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});this.logEvent(N)}},{key:"startWorkflow",value:function(N){var K=1<arguments.length&&void 0!==arguments[1]?arguments[1]:
{},W={name:N,start:Date.now(),steps:[],workflowId:Math.floor(17592186044416*(1+Math.random())).toString(16)};this._saveWorkflow(W);K=v({name:N,step:"start"},K);return this._logWorkflow(K),W}},{key:"stepWorkflow",value:function(N,K){var W=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};W=v({name:N,step:K,details:"string"==typeof options?W:W.details},W);this._logWorkflow(W)}},{key:"endWorkflow",value:function(N){var K=v({name:N,step:"finish"},1<arguments.length&&void 0!==arguments[1]?arguments[1]:
{});this._logWorkflow(K)}},{key:"cancelWorkflow",value:function(N){var K=v({name:N,step:"cancel"},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});this._logWorkflow(K)}},{key:"getWorkflow",value:function(N){if(N=D.get("TELEMETRY-WORKFLOW:"+N)){if(18E5>Date.now()-N.start)return N;this._deleteWorkflow(N)}}},{key:"_saveWorkflow",value:function(N){D.set("TELEMETRY-WORKFLOW:"+N.name,N)}},{key:"_deleteWorkflow",value:function(N){D.delete("TELEMETRY-WORKFLOW:"+N.name)}},{key:"_logWorkflow",value:function(){var N=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};N=this.preProcess(N);var K=this.getWorkflow(N.name);K||(this.startWorkflow(N.name),K=this.getWorkflow(N.name));K.steps.push(N.step);K.duration=(Date.now()-K.start)/1E3;-1<["cancel","finish"].indexOf(N.step)?this._deleteWorkflow(K):this._saveWorkflow(K);N=v(N,{eventType:"workflow",category:N.name,action:N.step,label:N.details,duration:K.duration,workflowId:K.workflowId});this.logEvent(N)}},{key:"preProcess",value:function(){var N=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:{},K={};return this.user&&(K={user:Y(this.user.username),orgId:Y(this.user.orgId),lastLogin:this.user.lastLogin,userSince:this.user.created,internalUser:this.user.internalUser||!1,accountType:this.user.accountType}),v({},N,K)}}]),T}()})},"arcgisonline/pages/portal/Portal":function(){define("require exports tslib ../../esriGeowConfig ./PortalItem ./UserProfiles ../utils/clone ../utils/enterprise ../utils/promises ../utils/verified ../components/ManageBlockedApps/blocked-apps-service ../../sharing/util ../../tsutils/declareDecorator dojo/Deferred dojo/Stateful dojo/_base/kernel dojo/_base/lang dojo/promise/all esri/arcgis/Portal esri/lang esri/request esri/IdentityManager ../utils/itemsgroups ../utils/mapViewer ../utils/queryHandler".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E,C,y,v){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);n=l.__importDefault(n);r=l.__importDefault(r);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);w=l.__importDefault(w);x=l.__importDefault(x);z=l.__importDefault(z);D=l.__importDefault(D);E=l.__importDefault(E);v=l.__importStar(v);
return function(){function A(G){this.blockedApps=[];this.blockedAppsTimestamp=-1;this.userProfiles=new u.default({portal:this})}A.prototype.postscript=function(){};A.prototype._getSelf=function(G){var F=this,H,L=new r.default,M="".concat(G,"portals/helpmap"),Q="".concat(G,"community/self"),S=null===(H=E.default.findCredential(G))||void 0===H?void 0:H.token;q.default.eachAlways({selfResult:this.inherited(arguments),helpMapResult:this._hasHelpMap?q.default.resolve(null):x.default.PortalUtil.request(M,
{culture:g.default.locale}),communitySelfResult:S?x.default.PortalUtil.request(Q,{returnUserLicensedItems:!0,token:S}):q.default.resolve(null)}).then(function(I){var P,J,U,Y,aa,la;if(null===(P=I.selfResult)||void 0===P?0:P.error)L.reject(I.selfResult.error);else{var T={};if(null===(J=I.selfResult)||void 0===J?0:J.value)if(T=l.__assign(l.__assign({},T),I.selfResult.value),!F._hasHelpMap&&(null===(U=I.helpMapResult)||void 0===U?0:U.value)&&(T=l.__assign(l.__assign({},T),I.helpMapResult.value)),null===
(Y=I.communitySelfResult)||void 0===Y?0:Y.value)T=l.__assign(l.__assign({},T),{communitySelf:I.communitySelfResult.value}),F.canCreateGeoBIM=null===(la=null===(aa=F.communitySelf)||void 0===aa?void 0:aa.userLicensedItems)||void 0===la?void 0:la.find(function(N){var K;return-1<(null===(K=null===N||void 0===N?void 0:N.entitlements)||void 0===K?void 0:K.indexOf("geobim"))});F._hasHelpMap=F._hasHelpMap||!!T.helpMap;e.default.self=l.__assign(l.__assign({},e.default.self||{}),(0,t.default)(T));T.isPortal?
F.getPortalAppSettings().then(function(N){if(N&&!N.code&&N.portalConfigProperties){var K=d.default.copyPortalConfigProperties(N.portalConfigProperties,e.default);Object.keys(K).forEach(function(W){e.default[W]=K[W]})}L.resolve(T)},function(){L.resolve(T)}):L.resolve(T)}});return L};A.prototype.getPortalUser=function(){return this.portalUser};A.prototype.getEnvironment=function(){var G=this.customBaseUrl;G=null===G||void 0===G?void 0:G.split(".")[0].replace("maps","");return-1<(null===G||void 0===
G?void 0:G.indexOf("dev"))?"dev":-1<(null===G||void 0===G?void 0:G.indexOf("qa"))?"qa":""};A.prototype.getPortalAppSettings=function(){return h.default.request({url:"".concat(e.default.restBaseUrl,"portals/self/settings")})};A.prototype.getDefaultMapViewer=function(){var G=this,F=new r.default,H=this.portalUser,L=this.portalProperties,M=(0,y.determineOrgMapViewer)({mapViewer:null===L||void 0===L?void 0:L.mapViewer,created:this.created,subscriptionInfo:this.subscriptionInfo,isPortal:this.isPortal});
this.defaultMapViewer?F.resolve(this.defaultMapViewer):H?H.getDefaultMapViewer().then(function(Q){G.defaultMapViewer=H.isOrgUser?Q||M:Q||M||y.MapViewerType.Classic;F.resolve(G.defaultMapViewer)}):(this.defaultMapViewer=M||y.MapViewerType.Modern,F.resolve(this.defaultMapViewer));return F};A.prototype.queryItems=function(G,F,H,L){var M=this,Q,S=new r.default,I=null!==(Q=null===G||void 0===G?void 0:G.q)&&void 0!==Q?Q:G;Q=null===I||void 0===I?void 0:I.match(/ownerfolder:([^\s]+)/);var P=(null===Q||void 0===
Q?0:Q.length)?Q[0].split(":")[1]:null,J=this.url,U=this.portalUser;Q="".concat(J,"search");G?(G.categories&&(Q="".concat(Q,"?categories\x3d").concat(G.categories),delete G.categories),"object"===typeof G&&"bbox"in G&&(G.sortField="bbox",G.srSort="true",G.spatialFilter="true",I=v.queryToObject(document.URL.replace(/^[^\?]*\?/,"")),G.srsConfig="srsConfig"in I?I.srsConfig:"offset:.5,scale:2"),L&&(G.filter=L),this._queryPortal(Q,x.default.PortalUtil.formatQueryParams({},G,F),x.default.PortalItem).then(function(Y){return(0,C.getAllItemsGroups)({response:Y,
contentUser:H,portalUser:U,url:J})}).then(function(Y){return M.toPortalItems(P,M.isAdminView,Y)}).then(function(Y){return M.addHighlights(Y)}).then(function(Y){return S.resolve(b.default.mixin(Y,{total:Y.total,nextStart:Y.nextQueryParams.start,start:Y.queryParams.start}))})):S.resolve({items:[],results:[],total:0,nextStart:-1,start:-1});return x.default.PortalResult(S)};A.prototype.getUserProfile=function(G){var F=new r.default;this.userProfiles.find(G).then(function(H){return F.resolve(H)});return F};
A.prototype.getFederatedServers=function(G){var F=this,H=new r.default,L=this.getPortalUser(),M="".concat(this.url,"portals/self/servers/");L?this.federatedServers&&!G?H.resolve(this.federatedServers):h.default.request({url:M}).then(function(Q){h.default.setFederatedServers((null===Q||void 0===Q?void 0:Q.servers)||[]);F.federatedServers=Q;H.resolve((null===Q||void 0===Q?0:Q.servers)?Q:null)}):H.resolve(null);return H};A.prototype.getHostedFederatedServers=function(G){var F=new r.default,H;this.getFederatedServers(G).then(function(L){var M;
H=(null!==(M=null===L||void 0===L?void 0:L.servers)&&void 0!==M?M:[]).filter(function(Q){return Q.isHosted});F.resolve(H[0])});return F};A.prototype.getFederatedServerByFunction=function(G,F){var H=new r.default,L;this.getFederatedServers(F).then(function(M){var Q;L=(null!==(Q=null===M||void 0===M?void 0:M.servers)&&void 0!==Q?Q:[]).filter(function(S){var I;return-1<(null===(I=S.serverFunction)||void 0===I?void 0:I.indexOf(G))});H.resolve(L.shift())});return H};A.prototype.getFederatedServerByUrl=
function(G,F){var H=-1<G.indexOf(":6080")?G.replace("http:","https:").replace(":6080",":6443"):G,L=new r.default,M;this.getFederatedServers(F).then(function(Q){var S;M=(null!==(S=null===Q||void 0===Q?void 0:Q.servers)&&void 0!==S?S:[]).filter(function(I){var P=I.url?h.default.getUrlWithoutScheme(I.url):I.url,J=I.adminUrl?h.default.getUrlWithoutScheme(I.adminUrl):I.adminUrl;P=-1<P.indexOf(":")?I.url:P;J=-1<J.indexOf(":")?I.adminUrl:J;I=H!==G;return-1<G.indexOf(P)||-1<G.indexOf(J)||I&&(-1<H.indexOf(P)||
-1<H.indexOf(J))});L.resolve(M.shift())});return L};A.prototype.getManagedServers=function(){var G=new r.default,F,H;this.getHostedFederatedServers().then(function(L){L?(F="".concat(L.adminUrl,"/admin/data/findItems"),h.default.request({url:F,content:{managed:!0}},{useProxy:h.default.shouldUseProxy(F)}).then(function(M){var Q;H=(null!==(Q=null===M||void 0===M?void 0:M.items)&&void 0!==Q?Q:M||[]).filter(function(S){var I;return"arcgis data store"===(null===(I=null===S||void 0===S?void 0:S.provider)||
void 0===I?void 0:I.toLowerCase())});G.resolve(H)},function(){return G.resolve(null)})):G.resolve(null)});return G};A.prototype.getIsBackedBySDS=function(){var G=this,F,H,L,M,Q,S,I,P=new r.default,J=this.getPortalUser(),U=null!==(F=null===J||void 0===J?void 0:J.userRole)&&void 0!==F?F:{},Y;z.default.isDefined(this.isBackedBySDS)?P.resolve(this.isBackedBySDS):(F=(null===(H=U.isAdmin)||void 0===H?void 0:H.call(U))||(null===(L=U.canManageSecurity)||void 0===L?void 0:L.call(U))||(null===(M=U.canManageServers)||
void 0===M?void 0:M.call(U))||(null===(Q=U.canUpdateOrgItems)||void 0===Q?void 0:Q.call(U))||(null===(S=U.canDeleteOrgItems)||void 0===S?void 0:S.call(U)),this.isPortal&&J&&(F||(null===(I=U.isBasedOnPublisher)||void 0===I?0:I.call(U)))?this.getManagedServers().then(function(aa){var la;Y=null!==(la=null===aa||void 0===aa?void 0:aa[0])&&void 0!==la?la:null;G.isBackedBySDS=Y?!0:!1;P.resolve(G.isBackedBySDS)}):(this.isBackedBySDS=!0,P.resolve(!0)));return P};A.prototype.getOrgIsVerified=function(G){var F,
H=new r.default;return!G&&z.default.isDefined(this.isVerified)?(H.resolve(this.isVerified),H):this.queryItems({q:"(orgid: ".concat(G||(null===(F=this.portalUser)||void 0===F?void 0:F.orgId)," AND contentstatus: public_authoritative)"),num:1}).then(function(L){return!!L.total})};A.prototype.getCategories=function(){var G=new r.default,F="".concat(this.url,"portals/").concat(this.id,"/categorySchema");h.default.request({url:F}).then(function(H){return G.resolve(H.categorySchema)},function(H){return G.reject(H)});
return G};A.prototype.getRegions=function(){var G,F,H=new r.default,L=(null===(G=this.portalUser)||void 0===G?void 0:G.culture)||(null===(F=this.portal)||void 0===F?void 0:F.culture)||g.default.locale||"en";G="".concat(this.portalUrl,"portals/regions");var M;h.default.request({url:G,content:{culture:L}}).then(function(Q){Q&&Q.length&&(M=Q.sort(function(S,I){return"WO"===S.region?-1:S.localizedName.localeCompare(I.localizedName)}));H.resolve(M)});return H};A.prototype.getMemberDefaults=function(){var G=
this,F=new r.default;h.default.request({url:"".concat(this.url,"portals/self/userDefaultSettings")}).then(function(H){G.userDefaults=H;F.resolve()},function(){F.resolve()});return F};A.prototype.getHomePageConfig=function(){var G=this,F=new r.default;h.default.request({url:"".concat(this.url,"portals/self/resources/home.page.json")}).then(function(H){G.homePageConfig=H;F.resolve()},function(){F.resolve()});return F};A.prototype.toPortalItems=function(G,F,H){var L=this,M={},Q=new r.default;G&&"root"!==
G&&b.default.mixin(M,{folderId:G,ownerFolder:G});F&&(M.isAdminView=!0);this.getBlockedApps().then(function(){var S=H.results.map(function(I){var P=new c.default(b.default.mixin(I,M,{portal:L}));P.groupData=I.groupData;P.removeBlockedTypes(L.blockedApps);return m.default.setVerifiedInfo(P)});(0,w.default)(S).then(function(I){H.items=I;Q.resolve(H)},function(I){return 0})});return Q};A.prototype.addHighlights=function(G){var F=new r.default;if(!e.default.deepLayerSearchEnabled)return F.resolve(G),F;
var H=G.items.reduce(function(L,M){L[M.id]=M;return L},{});(G.highlights||[]).forEach(function(L){var M=H[L.id];if(M.sublayers){var Q=Object.keys(L).filter(function(S){return"id"!==S&&S.includes("sublayers.")}).reduce(function(S,I){S[I.replace("sublayers.","")]=L[I].map(function(P){return P.replaceAll("\x3cem\x3e","").replaceAll("\x3c/em\x3e","")});return S},{});M.highlights=L;M.sublayers=M.sublayers.map(function(S){S.matched=Object.keys(S).some(function(I){var P;return null===(P=Q[I])||void 0===
P?void 0:P.some(function(J){return S[I].includes(J)})});return S})}});F.resolve(G);return F};A.prototype.formatThumbnailUrl=function(G){return x.default.PortalUtil.formatUrl("".concat(this.portalUrl,"portals/self/resources/").concat(G))};A.prototype.getLocalizedOrgProperties=function(){var G=this,F,H,L=new r.default,M="".concat(e.default.restBaseUrl,"portals/self/resources"),Q=null===(H=null===(F=this.portalUser)||void 0===F?void 0:F.credential)||void 0===H?void 0:H.token;F="".concat(M,"/").concat("localizedOrgProperties");
H={f:"json"};Q&&(H.token=Q);(0,D.default)({url:F,content:H},{disableIdentityLookup:!0}).then(function(S){S&&!S.code?(G.localizedOrgProperties=S,G.localizedOrgProperties.default||(G.localizedOrgProperties.default={name:G.name,description:null})):G.createLocalizedOrgPropertiesDefault();L.resolve(G.localizedOrgProperties)},function(){G.createLocalizedOrgPropertiesDefault();L.resolve(G.localizedOrgProperties)});return L};A.prototype.isTrialOrg=function(){var G,F=null===(G=this.subscriptionInfo)||void 0===
G?void 0:G.type;return"Trial"===F||"Trial Press"===F||"Trial Developer"===F||"Developer Subscription"===F};A.prototype.canHavePartnerCollab=function(){var G="Organizational Plan;Community;In House;ConnectED;ELA;Education Site License;Education;HUP Online Entitlement;Demo and Marketing".split(";");return this.subscriptionInfo&&-1<G.indexOf(this.subscriptionInfo.type)};A.prototype.isKubernetes=function(){return"ArcGISEnterpriseOnKubernetes"===this.portalDeploymentType};A.prototype.getGeoAnalyticsPlan=
function(){var G;return null===(G=this.subscriptionInfo)||void 0===G?void 0:G.subType};A.prototype.getGeoAnalyticsBillingType=function(){var G;return null===(G=this.subscriptionInfo)||void 0===G?void 0:G.billingType};A.prototype.getRemainingCoreHours=function(){return this.availableCredits||0};A.prototype.getContentCategoryLimit=function(){var G=this,F=new r.default;if(this.isPortal||!this.id)return this.maxCategoriesPerItem=20,F.resolve(),F;h.default.request({url:"".concat(this.url,"portals/self/limits"),
content:{limitsType:"content",limitName:"MaxCategories"}}).then(function(H){G.maxCategoriesPerItem=(null===H||void 0===H?void 0:H.limitValue)||20;F.resolve()},function(){F.resolve()});return F};A.prototype.getHelpUrl=function(G){var F,H=(null===(F=this.helpMap)||void 0===F?void 0:F.m[G])||"";return"".concat(this.helpBase).concat(H)};A.prototype.createLocalizedOrgPropertiesDefault=function(){this.localizedOrgProperties={default:{name:this.name,description:null}}};A.prototype.getBlockedApps=function(){var G=
this,F,H=new r.default;if(null===(F=this.portalUser)||void 0===F||!F.orgId)return H.resolve(),H;a.default.getBlockedApps().then(function(L){G.blockedApps=L;H.resolve()});return H};A.prototype.getOIDCId=function(){return l.__awaiter(this,void 0,void 0,function(){var G,F,H;return l.__generator(this,function(L){switch(L.label){case 0:if(this.oidcId)return[2,this.oidcId];L.label=1;case 1:return L.trys.push([1,3,,4]),[4,h.default.request({url:"".concat(e.default.restBaseUrl,"portals/self/oidc")})];case 2:return G=
L.sent(),this.oidcId=null===(H=null===(F=null===G||void 0===G?void 0:G.oidcProviders)||void 0===F?void 0:F[0])||void 0===H?void 0:H.id,[2,this.oidcId];case 3:return L.sent(),[2];case 4:return[2]}})})};return A=l.__decorate([(0,n.default)(x.default.Portal,k.default)],A)}()})},"arcgisonline/pages/portal/UserProfiles":function(){define("require exports tslib ./PortalUser ../../sharing/util ../../tsutils/declareDecorator dojo/Deferred dojo/i18n!../../nls/arcgisonline dojo/_base/lang dojo/Stateful".split(" "),
function(f,B,l,e,c,u,t,d,q,m){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);return function(){function a(h){this.NO_THUMBNAIL_PATH=c.default.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg");this.users={}}a.prototype.find=function(h){var n=this,r=this.users,k="string"===typeof h?{username:h}:h,g=k&&k.username;k="deletedUser"===g;var b={username:k?d.default.common.deletedUser:
g,thumbnailUrl:this.NO_THUMBNAIL_PATH},w=new t.default;"fetching"===r[g]?setTimeout(function(){n.find(h).then(function(x){w.resolve(x)})},50):r[g]?w.resolve(r[g]):k?(r[g]=q.default.mixin({},{isDeleted:!0},b),w.resolve(r[g])):(r[g]="fetching",this.getUserProfile(g).then(function(x){r[g]=x;w.resolve(r[g])},function(){r[g]=q.default.mixin({},b);w.resolve(r[g])}));return w};a.prototype.getUserProfile=function(h){var n=this,r=new t.default,k;c.default.request({url:this.portal.portalUrl+"community/users/"+
h}).then(function(g){k=new e.default(q.default.mixin(g,{portal:n.portal}));r.resolve(k)});return r};return a=l.__decorate([(0,u.default)(m.default)],a)}()})},"arcgisonline/pages/utils/enterprise":function(){define(["require","exports","tslib"],function(f,B,l){Object.defineProperty(B,"__esModule",{value:!0});var e="extentService footerLinks gcsBasemapService httpsDomains longTokenExpiration restrictOrganizationPageToAdmin searchArcGISOnlineEnabled showCreateDashboard showInAppLauncher sceneViewerEnabled surveyUrl tokenExpiration webAppBuilderEnabled configurePortalAGOEnv portalAGOConfigEnabled portalLivingAtlasConfigEnabled showSocialMediaLinks iotViewerUrl".split(" ");
B.default={copyPortalConfigProperties:function(c,u){if(!c)return u;var t=l.__assign({},u);e.forEach(function(d){void 0!==c[d]&&(t[d]=c[d])});return t}}})},"dojo/NodeList-fx":function(){define(["./query","./_base/lang","./aspect","./_base/fx","./fx"],function(f,B,l,e,c){f=f.NodeList;B.extend(f,{_anim:function(u,t,d){d=d||{};var q=c.combine(this.map(function(m){m={node:m};B.mixin(m,d);return u[t](m)}));return d.auto?q.play()&&this:q},wipeIn:function(u){return this._anim(c,"wipeIn",u)},wipeOut:function(u){return this._anim(c,
"wipeOut",u)},slideTo:function(u){return this._anim(c,"slideTo",u)},fadeIn:function(u){return this._anim(e,"fadeIn",u)},fadeOut:function(u){return this._anim(e,"fadeOut",u)},animateProperty:function(u){return this._anim(e,"animateProperty",u)},anim:function(u,t,d,q,m){var a=c.combine(this.map(function(h){return e.animateProperty({node:h,properties:u,duration:t||350,easing:d})}));q&&l.after(a,"onEnd",q,!0);return a.play(m||0)}});return f})},"arcgisonline/sharing/geow/QueryReadStore":function(){define("require exports tslib ./Community ./Content ../../tsutils/declareDecorator dojo/topic dojox/data/QueryReadStore".split(" "),
function(f,B,l,e,c,u,t,d){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);return function(){function q(){}q.prototype._fetchItems=function(m,a,h){var n=this,r=m.serverQuery||m.query||{};r.start=m.start||0;r.start++;m.count&&(r.num=m.count);c.default.search(this.url,r,function(k){var g=k.total||-1;t.default.publish("gridCount",[k.total]);n.onResultCount(k.total);n._total=k.total;n._items=[];(k.results||[]).forEach(function(x){var z,
D,E=x.tags||x.keywords||[],C=void 0===x.imageUrl?c.default._getItemImageUrl(x):x.imageUrl,y=x.uploaded||x.created,v=void 0===x.extent?e.default._getGroupTitleLink(x):x.title,A=x.item||"",G="";0<(null===(z=x.snippet)||void 0===z?void 0:z.length)&&"null"!==x.snippet?G=150<x.snippet.length?x.snippet.substring(0,150)+"...":x.snippet:0<(null===(D=x.description)||void 0===D?void 0:D.length)&&"null"!==x.description&&(G=150<x.description.length?x.description.substring(0,150)+"...":x.description);x={id:x.id||
"",owner:x.owner,title:v,description:x.description,snippet:G,snippetFull:x.snippet,tags:E.join?E.join(","):E,imageUrl:C,thumbnail:x.thumbnail,isInvitationOnly:x.isInvitationOnly,created:y,modified:x.modified,itemType:x.itemType||"",typeKeywords:x.typeKeywords||"",type:x.type||"",extent:x.extent||"",item:A,numComments:x.numComments,numRatings:x.numRatings,avgRating:x.avgRating,numViews:x.numViews};n._items.push({i:x,r:n})},n);n._itemsByIdentity={};n._identifier="id";for(k=0;k<n._items.length;++k){var b=
n._items[k].i,w=b.id;n._itemsByIdentity[w]||(n._itemsByIdentity[w]=b)}g=-1===g?n._items.length:g;a(n._items,m,g);n.lastRequestHash=(new Date).getTime()+"-"+String(Math.random()).substring(2);n._lastServerQuery=l.__assign({},r)}.bind(this))};q.prototype.onResultCount=function(m){};return q=l.__decorate([(0,u.default)(d.default)],q)}()})},"arcgisonline/sharing/geow/Community":function(){define("require exports tslib ../../esriGeowConfig ../util dojo/Deferred dojo/topic dojo/data/ItemFileReadStore dojo/i18n!../../nls/arcgisonline".split(" "),
function(f,B,l,e,c,u,t,d,q){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);return function(){function m(){}m.getProfile=function(a,h,n){if(null===a)return t.default.publish("globalMessage",[{message:m.i18n.noUser,type:"error",duration:0}]),null;a="".concat(e.default.restBaseUrl,"community/users/").concat(a);c.default.getJson(a,h)};m.getProfileThumbnailUrl=function(a,h){if(null!==a.thumbnail){var n=c.default.getToken();
n=null===n||0===n.length?"":"?token\x3d".concat(n);return h?(h=e.default.restBaseUrl,e.default.useDefaultIdentityStore&&(h=!1!==e.default.useSSL?c.default.getSecureUrl(h):h),"".concat(h,"community/users/").concat(a.username,"/info/").concat(a.thumbnail).concat(n)):"".concat(e.default.restBaseUrl,"community/users/").concat(a.username,"/info/").concat(a.thumbnail).concat(n)}return null};m.updateProfile=function(a,h,n){n=c.default.getUser();null===n&&t.default.publish("globalMessage",[{message:this.i18n.mustLogIn,
type:"error",duration:0}]);n=n.username||n.email;n="".concat(c.default.getSecureUrl(e.default.restBaseUrl),"community/users/").concat(n,"/update");c.default.postForm(a,n,h)};m.updateProfileByUser=function(a,h,n){null!==c.default.getUser()&&(n="".concat(c.default.getSecureUrl(e.default.restBaseUrl),"community/users/").concat(a.username.value,"/update"),c.default.postForm(a,n,h))};m.getUserGroups=function(a,h){var n=c.default.getUser();(n=n&&(n.username||n.email))?a=m.getUserGroupsByUser(n,a,h):(a=
new u.default,a.resolve());return a};m.getUserGroupsByUser=function(a,h,n){a="".concat(e.default.restBaseUrl,"community/users/").concat(a);var r=new u.default;c.default.request({url:a}).then(function(k){r.resolve(k);h&&h(k)},function(k){r.reject(k);n&&n(k)});return r};m.getGroup=function(a,h,n){a="".concat(e.default.restBaseUrl,"community/groups/").concat(a);c.default.getJson(a,h,n)};m.createGroup=function(a,h,n){if(null!==c.default.getUser()){var r="".concat(e.default.restBaseUrl,"community/createGroup");
c.default.postForm(a,r,h,n)}};m.updateGroup=function(a,h,n,r){null!==c.default.getUser()&&(a="".concat(e.default.restBaseUrl,"community/groups/").concat(a,"/update"),c.default.postForm(h,a,n,r))};m.deleteGroup=function(a,h,n){null!==c.default.getUser()&&(a="".concat(e.default.restBaseUrl,"community/groups/").concat(a.id,"/delete"),c.default.postJson("",a,h,n))};m.reassignGroup=function(a,h,n,r){null!==c.default.getUser()&&(h={targetUsername:h},a="".concat(e.default.restBaseUrl,"community/groups/").concat(a.id,
"/reassign"),c.default.postJson(h,a,n,r))};m.leaveGroup=function(a,h,n){a="".concat(e.default.restBaseUrl,"community/groups/").concat(a.id,"/leave");c.default.postJson("",a,h,n)};m.inviteToGroup=function(a,h,n){c.default.getUser()};m.searchGroups=function(a,h,n){a="".concat(e.default.restBaseUrl,"community/groups?q\x3d").concat(a);c.default.getJson(a,h)};m.searchToStore=function(a){var h=[];(a.results||[]).forEach(function(n,r){n={id:r,title:m._getGroupTitleLink(n),owner:n.owner,description:n.description,
imageUrl:n.imageUrl,tags:n.keywords,created:n.created};h[r]=n});return new d.default({data:{identifier:"id",label:"item",items:h},url:void 0})};m._getGroupTitleLink=function(a){var h=encodeURIComponent(a.title);return'\x3ca href\x3d"group.html?owner\x3d'.concat(a.owner,"\x26title\x3d").concat(h,'" class\x3d"esriGroupTitle" alt\x3d"').concat(m.i18n.viewGroupDetails,'" title\x3d"').concat(m.i18n.viewGroupDetails,"\x3e").concat(a.title,"\x3c/a\x3e")};m.getNotificationsCount=function(){var a=c.default.getUser();
if(null!==a){a=a.username||a.email;a="".concat(e.default.restBaseUrl,"community/users/").concat(a,"/notifications");var h;c.default.getJson(a).then(function(n){h=((null===n||void 0===n?void 0:n.notifications)||[]).filter(function(r){return r&&"message_received"!==r.type});t.default.publish("onNotificationCount",[h.length])})}};m.deleteNotifictation=function(a){var h=c.default.getUser();null!==h&&(h=h.username||h.email,a="".concat(e.default.restBaseUrl,"community/users/").concat(h,"/notifications/").concat(a,
"/delete"),c.default.postJson("",a,function(n,r){t.default.publish("onNotificationDelete",[""])}.bind(this)))};m.updateUserSecure=function(a,h,n,r){r=e.default.restBaseUrl;e.default.useDefaultIdentityStore&&(r=!1!==e.default.useSSL?c.default.getSecureUrl(r):r);a="".concat(r,"community/users/").concat(a,"/update");c.default.postForm(h,a,n)};m.getProvisionedListings=function(a,h,n){a="".concat(e.default.restBaseUrl,"community/users/").concat(a,"/provisionedListings");return c.default.request({url:a,
content:{start:h||1,num:n||100}})};m.i18n=l.__assign(l.__assign({},q.default.common),q.default.community);return m}()})},"arcgisonline/sharing/geow/Content":function(){define("require exports tslib ../../esriGeowConfig ../../pages/utils/arrays ../util dojo/dom-construct dojo/_base/lang dojo/data/ItemFileReadStore dojo/data/ItemFileWriteStore dojo/topic esri/arcgis/Portal esri/config dojo/i18n!../../nls/arcgisonline ../../pages/utils/queryHandler".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k){e=
l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);n=l.__importDefault(n);r=l.__importDefault(r);k=l.__importStar(k);return function(){function g(){}g.getUserInfo=function(b,w){var x=u.default.getUser();null!==x&&(x=x.username||x.email,x="".concat(e.default.restBaseUrl,"content/users/").concat(x),u.default.getJson(x,b,w))};g.getUserItems=function(b,
w,x){var z=u.default.getUser();null!==z&&(z=z.username||z.email,z="".concat(e.default.restBaseUrl,"content/users/").concat(z),null!==b&&""!==b&&(z="".concat(z,"/").concat(b)),u.default.getJson(z,w,x))};g.getUserItemsByUser=function(b,w,x,z){null!==u.default.getUser()&&(b="".concat(e.default.restBaseUrl,"content/users/").concat(b),null!=w&&""!==w&&(b="".concat(b,"/").concat(w)),u.default.getJson(b,x,z))};g.getUserServers=function(b){void 0!==g._userServers&&b(g._userServers);u.default.getJson(e.default.serversRestBaseUrl,
function(w){b(g._userServers=w.servers)},function(){b(null)})};g.addItem=function(b,w,x,z){var D=u.default.getUser();if(null!==D){D=D.username||D.email;D="".concat(e.default.restBaseUrl,"content/users/").concat(D);null!==b&&(D="".concat(D,"/").concat(b));D="".concat(D,"/addItem");b=!1;for(var E=0;E<w.childNodes.length;E++){var C=w.childNodes[E];if("async"===C.name&&"true"===C.value){b=!0;break}}b?u.default.postForm(w,D,g.addItemAsyncHandler.bind(g,x,z),z):u.default.postForm(w,D,x,z)}};g.addItemByUser=
function(b,w,x,z,D){if(null!==u.default.getUser()){b="".concat(e.default.restBaseUrl,"content/users/").concat(b);null!=w&&(b="".concat(b,"/").concat(w));b="".concat(b,"/addItem");w=!1;for(var E=0;E<x.childNodes.length;E++){var C=x.childNodes[E];if("async"===C.name&&"true"===C.value){w=!0;break}}w?u.default.postForm(x,b,g.addItemByUserAsyncHandler.bind(g,z,D),D):u.default.postForm(x,b,z,D)}};g.addItemAsyncHandler=function(b,w,x,z){(null===x||void 0===x?0:x.success)&&!0===x.success?g.itemStatus(x,g.itemStatusHandler.bind(g,
0,x,b,w),w):w(x,z)};g.addItemByUserAsyncHandler=function(b,w,x,z){(null===x||void 0===x?0:x.success)&&!0===x.success?g.itemStatus(x,g.itemStatusByUserHandler.bind(g,0,x,b,w),w):w(x,z)};g.deleteService=function(b,w){this.getUserServers(function(x){if((null===x||void 0===x?0:x.length)&&-1<b.indexOf("".concat(e.default.featuresRestBaseUrl).concat(x[0].id,"/"))){x="".concat(e.default.serversRestBaseUrl).concat(x[0].id,"/arcgis/admin/services/");x+="".concat(b.substr(b.indexOf(w)).replace("/","."),"/delete");
n.default.defaults.io.proxyUrl=e.default.proxyServer;var z=function(){n.default.defaults.io.proxyUrl=null};u.default.postJson("",x,z,z)}})};g.publishService=function(b,w,x,z){b=u.default.getUser();null!==b&&(b=b.username||b.email,b="".concat(e.default.restBaseUrl,"content/users/").concat(b,"/publish"),u.default.postJson(w.params,b,function(D){var E;D=D.services[0];D.success=D.success||0<(null===(E=D.serviceurl)||void 0===E?void 0:E.length);D.success&&(D.id=D.serviceItemId);x(D)},function(){x({success:!1})}))};
g.itemStatus=function(b,w,x){var z,D=u.default.getUser();if(null!==D){var E=D.username||D.email;D=b.folder;E="".concat(e.default.restBaseUrl,"content/users/").concat(b.overrideUser||E);0<(null===D||void 0===D?void 0:D.length)&&"/"!==D&&(E+="/".concat(D));E="".concat(E,"/items/").concat(b.id,"/status");b.jobid&&(E+="?jobid\x3d".concat(b.jobid));"image service"===(null===(z=b.type)||void 0===z?void 0:z.toLowerCase())&&(E+="\x26jobType\x3dPublishImageService");u.default.getJson(E,w,x)}};g.itemStatusByUser=
function(b,w,x){if(null!==u.default.getUser()){var z=b.folder,D="".concat(e.default.restBaseUrl,"content/users/").concat(b.owner);0<(null===z||void 0===z?void 0:z.length)&&"/"!==z&&(D+="/".concat(z));D="".concat(D,"/items/").concat(b.id,"/status");u.default.getJson(D,w,x)}};g.itemStatusHandler=function(b,w,x,z,D,E){(null===D||void 0===D?0:D.status)&&"processing"===D.status?(b++,setTimeout(function(){g.itemStatus(w,g.itemStatusHandler.bind(g,b,w,x,z),z)},Math.min(1E3*Math.pow(2,b),6E4))):(D=l.__assign(l.__assign({},
D),w),x(D,E))};g.itemStatusByUserHandler=function(b,w,x,z,D,E){(null===D||void 0===D?0:D.status)&&"processing"===D.status?(b++,setTimeout(function(){g.itemStatusByUser(w,g.itemStatusByUserHandler.bind(g,b,w,x,z),z)},Math.min(1E3*Math.pow(2,b),6E4))):(D=l.__assign(l.__assign({},D),w),x(D,E))};g.deleteItems=function(b,w,x){var z=u.default.getUser();if(null!==z){z=z.username||z.email;if(1===b.length)return b=b[0],z="".concat(e.default.restBaseUrl,"content/users/").concat(z),null!=b.folderId&&""!==b.folderId&&
"/"!==b.folderId&&(z+="/".concat(b.folderId)),z="".concat(z,"/items/").concat(b.id,"/delete"),u.default.postJson("",z,w,x);if(1<b.length){var D="",E="";b.forEach(function(C){D+="".concat(E).concat(C.id);E=","});b={items:D};z="".concat(e.default.restBaseUrl,"content/users/").concat(z,"/deleteItems");return u.default.postJson(b,z,w,x)}}};g.deleteItemsByUser=function(b,w,x,z){if(null!==u.default.getUser()){if(1===w.length)return w=w[0],b="".concat(e.default.restBaseUrl,"content/users/").concat(b),null!==
w.folderId&&""!==w.folderId&&"/"!==w.folderId&&(b+="/".concat(w.folderId)),b="".concat(b,"/items/").concat(w.id,"/delete"),u.default.postJson("",b,x,z);if(1<w.length){var D="",E="";w.forEach(function(C){D+="".concat(E).concat(C.id);E=","},this);w={items:D};b="".concat(e.default.restBaseUrl,"content/users/").concat(b,"/deleteItems");return u.default.postJson(w,b,x,z)}}};g.getApplicationCode=function(b,w,x){var z=null,D="WMA2Code";d.default.isObject(b)?(z=b.id,"Mobile Application"===b.type&&(D="MobileApp2Code")):
z=b;b="".concat(e.default.restBaseUrl,"content/items/").concat(z,"/relatedItems?relationshipType\x3d").concat(D);u.default.getJson(b,w,x)};g.addApplicationCodeRelate=function(b,w,x,z){var D=u.default.getUser();if(null===D)a.default.publish("globalMessage",[{message:this.i18n.mustLogIn,type:"error",duration:0}]);else{var E=null,C="WMA2Code";d.default.isObject(b)?(E=b.id,"Mobile Application"===b.type&&(C="MobileApp2Code")):E=b;b=D.username||D.email;b="".concat(e.default.restBaseUrl,"content/users/").concat(b,
"/addRelationship?relationshipType\x3d").concat(C,"\x26originItem\x3d").concat(E,"\x26destinationItemId\x3d").concat(w);u.default.postJson({relationshipType:C,originItemId:E,desinationItemId:w},b,x,z)}};g.getComments=function(b,w,x,z){b="".concat(e.default.restBaseUrl,"content/items/").concat(b,"/comments");u.default.getJson(b,x,z)};g.addComment=function(b,w,x,z){null===u.default.getUser()?a.default.publish("globalMessage",[{message:this.i18n.mustLogIn,type:"error",duration:0}]):(b="".concat(e.default.restBaseUrl,
"content/items/").concat(b,"/addComment"),u.default.postJson({comment:w},b,x,z))};g.deleteComment=function(b,w,x,z){null===u.default.getUser()?a.default.publish("globalMessage",[{message:this.i18n.mustLogIn,type:"error",duration:0}]):(b="".concat(e.default.restBaseUrl,"content/items/").concat(b,"/comments/").concat(w,"/delete"),u.default.postJson({},b,x,z))};g.addRating=function(b,w,x,z){null===u.default.getUser()?a.default.publish("globalMessage",[{message:this.i18n.mustLogIn,type:"error",duration:0}]):
(b="".concat(e.default.restBaseUrl,"content/items/").concat(b,"/addRating"),u.default.postJson({rating:w},b,x,z))};g.getRating=function(b,w,x){null!=u.default.getUser()&&(b="".concat(e.default.restBaseUrl,"content/items/").concat(b,"/rating"),u.default.postJson({},b,w,x))};g.deleteItem=function(b,w,x){var z=u.default.getUser();if(null!==z){z=z.username||z.email;z="".concat(e.default.restBaseUrl,"content/users/").concat(b.owner||z);var D=b.ownerFolder||b.folderId;D&&"/"!==D&&(z="".concat(z,"/").concat(D));
z="".concat(z,"/items/").concat(b.id,"/delete");u.default.postJson("",z,w,x)}};g.deleteItemByUser=function(b,w,x){if(null!==u.default.getUser()){var z="".concat(e.default.restBaseUrl,"content/users/").concat(b.owner);null!=b.folderId&&(z="".concat(z,"/").concat(b.folderId));z="".concat(z,"/items/").concat(b.id,"/delete");u.default.postJson("",z,w,x)}};g.updateItem=function(b,w,x,z){var D=u.default.getUser();null!==D&&(D=D.username||D.email,D="".concat(e.default.restBaseUrl,"content/users/").concat(b.owner||
D),null!=b.folderId&&(D="".concat(D,"/").concat(b.folderId)),D="".concat(D,"/items/").concat(b.id,"/update"),u.default.postForm(w,D,x,z))};g.updateItemByUser=function(b,w,x,z){if(null!==u.default.getUser()){var D="".concat(e.default.restBaseUrl,"content/users/").concat(b.owner);null!==b.folderId&&(D="".concat(D,"/").concat(b.folderId));D="".concat(D,"/items/").concat(b.id,"/update");u.default.postForm(w,D,x,z)}};g.updateItemJson=function(b,w,x,z){var D=u.default.getUser();null!==D&&(D=D.username||
D.email,D="".concat(e.default.restBaseUrl,"content/users/").concat(b.overrideUser||D),null!==b.folderId&&(D="".concat(D,"/").concat(b.folderId)),D="".concat(D,"/items/").concat(b.id,"/update"),u.default.postJson(w,D,x,z))};g.updateItemJsonByUser=function(b,w,x,z){null!==u.default.getUser()&&(b="".concat(e.default.restBaseUrl,"content/users/").concat(b),null!==w.folderId&&(b="".concat(b,"/").concat(w.folderId)),b="".concat(b,"/items/").concat(w.id,"/update"),u.default.postJson(x,b,z))};g.filterErrors=
function(b){b=null===b||void 0===b?void 0:b.results;if(null===b||void 0===b?0:b.length)if(b=b.filter(function(w){return w.error}),null===b||void 0===b?0:b.length)return u.default.checkError(b[0].error),b;return!1};g.shareItems=function(b,w,x){var z=u.default.getUser();z&&(z=z.username||z.email,z="".concat(e.default.restBaseUrl,"content/users/").concat(b.owner||z,"/shareItems"),u.default.postJson(b,z,function(D){var E=g.filterErrors(D);E?x(E):w(D)},x))};g.shareItemsByUser=function(b,w,x,z){null!==
u.default.getUser()&&(b="".concat(e.default.restBaseUrl,"content/users/").concat(b,"/shareItems"),u.default.postJson(w,b,x,z))};g.shareItem=function(b,w,x,z){var D=u.default.getUser();null!==D&&(D=D.username||D.email,D="".concat(e.default.restBaseUrl,"content/users/").concat(D),null!=b.folderId&&(D="".concat(D,"/").concat(b.folderId)),D="".concat(D,"/items/").concat(b.id,"/share"),u.default.postJson(w,D,x,z))};g.shareItemByID=function(b,w,x,z){null!==u.default.getUser()&&(b="".concat(e.default.restBaseUrl,
"content/items/").concat(b.id,"/share"),u.default.postJson(w,b,x,z))};g.unshareItems=function(b,w,x){var z=u.default.getUser();null!==z&&(z=z.username||z.email,z="".concat(e.default.restBaseUrl,"content/users/").concat(b.owner||z,"/unshareItems"),u.default.postJson(b,z,function(D){var E=g.filterErrors(D);E?x(E):w(D)},x))};g.unshareItemsByUser=function(b,w,x,z){null!==u.default.getUser()&&(b="".concat(e.default.restBaseUrl,"content/users/").concat(b,"/unshareItems"),u.default.postJson(w,b,x,z))};g.unshareItem=
function(b,w,x,z){var D=u.default.getUser();null!==D&&(D=D.username||D.email,D="".concat(e.default.restBaseUrl,"content/users/").concat(D),null!=b.folderId&&(D="".concat(D,"/").concat(b.folderId)),D="".concat(D,"/items/").concat(b.id,"/unshare"),u.default.postJson(w,D,x,z))};g.unshareItemByID=function(b,w,x,z){null!==u.default.getUser()&&(b="".concat(e.default.restBaseUrl,"content/items/").concat(b.id,"/unshare"),u.default.postJson(w,b,x,z))};g.moveItems=function(b,w,x,z){var D=u.default.getUser();
if(null!==D){var E="",C="";(b||[]).forEach(function(y){E+="".concat(C).concat(y.id);C=","});w.items=E;b=D.username||D.email;b="".concat(e.default.restBaseUrl,"content/users/").concat(b,"/moveItems");u.default.postJson(w,b,x,z)}};g.moveItemsByUser=function(b,w,x,z,D){if(null!==u.default.getUser()){var E="",C="";(w||[]).forEach(function(y){E+="".concat(C).concat(y.id);C=","});x.items=E;b="".concat(e.default.restBaseUrl,"content/users/").concat(b,"/moveItems");u.default.postJson(x,b,z,D)}};g.reassignItem=
function(b,w,x,z,D){if(null!==u.default.getUser()){var E="".concat(e.default.restBaseUrl,"content/users/").concat(b.owner);null!==b.folderId&&(E="".concat(E,"/").concat(b.folderId));E="".concat(E,"/items/").concat(b.id,"/reassign");u.default.postJson({targetUsername:w,targetFolderName:x},E,z,D)}};g.moveItem=function(b,w,x,z){var D=u.default.getUser();null!==D&&(D=D.username||D.email,D="".concat(e.default.restBaseUrl,"content/users/").concat(D),null!=b.folderId&&(D="".concat(D,"/").concat(b.folderId)),
D="".concat(D,"/items/").concat(b.id,"/move"),u.default.postJson(w,D,x,z))};g.moveItemByUser=function(b,w,x,z){if(null!==u.default.getUser()){var D="".concat(e.default.restBaseUrl,"content/users/").concat(b.owner);null!=b.folderId&&(D="".concat(D,"/").concat(b.folderId));D="".concat(D,"/items/").concat(b.id,"/move");u.default.postJson(w,D,x,z)}};g.search=function(b,w,x,z){var D,E;if(b){z="";if(0>b.indexOf("community/groups")){var C=u.default.userPreferences(null,"contentModePrefs"),y=k.queryToObject(window.location.search.slice(1));
"all"===(null===(D=y.content)||void 0===D?void 0:D.toLowerCase())?C.contentMode="GIS":"web"===(null===(E=y.content)||void 0===E?void 0:E.toLowerCase())&&(C.contentMode="Web");z=(null===C||void 0===C?0:C.contentMode)&&"GIS"===C.contentMode?e.default.viewQueries.gis:z+e.default.viewQueries.web;z+=e.default.viewQueries.none}w.q+=z;u.default.getJsonWithContent(b,w,x)}};g.getFeaturedItems=function(b,w,x){b="".concat(e.default.restBaseUrl,"content/items/").concat(b,"/relatedItems?relationshipType\x3dFeaturedItems2Item\x26direction\x3dforward");
u.default.getJson(b,w)};g.getUserItem=function(b,w,x){x=u.default.getUser();null!==x&&(x=x.username||x.email,x="".concat(e.default.restBaseUrl,"content/users/").concat(x),null!=b.folderId&&(x="".concat(x,"/").concat(b.folderId)),x="".concat(x,"/items/").concat(b.id),u.default.getJson(x,w))};g.getItem=function(b,w,x){b="".concat(e.default.restBaseUrl,"content/items/").concat(b);u.default.getJson(b,w,x)};g.getItemData=function(b,w,x){b="".concat(e.default.restBaseUrl,"content/items/").concat(b,"/data");
u.default.getJson(b,w,x)};g.getItemFolder=function(b,w){var x=u.default.getUser();if(null!==x){var z=x.username||x.email;x="".concat(e.default.restBaseUrl,"content/users/").concat(z);u.default.getJson(x,function(D){for(var E=null,C=0;C<D.items.length;C++)if(D.items[C].id===b){E="";break}if(null!==E)w(E);else{var y=function(v){for(var A=v.currentFolder.id,G=0;G<v.items.length;G++)if(v.items[G].id===b){E=A;w(E);break}};D.folders.forEach(function(v){v=v.folderName;v="".concat(e.default.restBaseUrl,"content/users/").concat(z,
"/").concat(v);u.default.getJson(v,y)})}})}};g.itemsToStore=function(b){var w,x=(null===(w=b.currentFolder)||void 0===w?void 0:w.id)||"",z=[];(b.items||[]).forEach(function(D,E){var C,y;D.folderId=x;D.imageUrl=g._getItemIconUrl(D);D.selected=!1;D.item=D.name||D.url||D.title;0<(null===(C=D.snippet)||void 0===C?void 0:C.length)&&"null"!==D.snippet?D.snippet=D.snippet:0<(null===(y=D.description)||void 0===y?void 0:y.length)&&"null"!==D.description?(C=u.default.removeHTMLTags(D.description),D.snippet=
150<C.length?"".concat(C.substring(0,150),"..."):C):D.snippet="";delete D.listingProperties;delete D.properties;z[E]=D});return new m.default({data:{identifier:"id",label:"item",items:z},url:void 0})};g.searchToStore=function(b){var w=[];(b.items||b.results||[]).forEach(function(x,z){var D,E=x.id,C=x.owner,y=x.title,v=x.description,A=x.created,G=x.modified,F=(null===(D=x.tags)||void 0===D?void 0:D.join(","))||[];x=g._getItemImageUrl(x);w[z]={id:E,owner:C,title:y,description:v,tags:F,imageUrl:x,created:A,
modified:G}});return new q.default({data:{identifier:"id",label:"item",items:w},url:void 0})};g._getPremiumItemNode=function(b){var w,x,z=(new h.default.PortalItem(l.__assign(l.__assign({},b),{portal:{isPortal:null===(w=e.default.self)||void 0===w?void 0:w.isPortal}}))).getTypeInfo();w=(null===(x=e.default.self)||void 0===x?0:x.isPortal)?"portal":"";b=c.default.includes(b.typeKeywords,"Requires Credits");return z.isPremiumContent?(b=t.default.create("div",{className:"esri-premium-content",title:b?
this.i18n["premiumcontentcreditstitle"+w]:this.i18n["premiumcontenttitle"+w],innerHTML:b?this.i18n.premiumcontent:this.i18n.subscriptioncontent}),t.default.create("img",{className:"esri-premium-icon",src:z.premiumIconUrl},b,"first"),b):!1};g._getItemIconUrl=function(b){var w;return(new h.default.PortalItem(l.__assign(l.__assign({},b),{portal:{isPortal:null===(w=e.default.self)||void 0===w?void 0:w.isPortal}}))).iconUrl};g._getItemImageUrl=function(b,w){var x;b=(null===(x=b.type)||void 0===x?void 0:
x.toLowerCase())||"";return u.default.relativeToExplicitUrl("geocoding service"===b||"network analysis service"===b||"geoprocessing service"===b||"geodata service"===b||"geometry service"===b||"workflow manager service"===b?w?"images/tool_16x16.png":"images/tool_32x32.png":"wms"===b||"kml"===b||"globe service"===b||"map service"===b||"image service"===b||"feature service"===b||"scene service"===b||"stream service"===b?w?"images/layer_16x16.png":"images/layer_32x32.png":"web mapping application"===
b||"mobile application"===b||"web map"===b?w?"images/map_16x16.png":"images/map_32x32.png":"layer"===b||"layer package"===b||"tile package"===b||"vector tile package"===b||"scene package"===b||"image collection"===b||"explorer layer"===b||"cad drawing"===b?w?"images/layer-download_16x16.png":"images/layer-download_32x32.png":"explorer add in"===b||"desktop add in"===b||"geoprocessing package"===b||"locator package"===b?w?"images/tool-download_16x16.png":"images/tool-download_32x32.png":"map document"===
b||"globe document"===b||"scene document"===b?w?"images/map-download_16x16.png":"images/map-download_32x32.png":"task file"===b?w?"images/taskfile16.png":"images/taskfile32.png":w?"images/noimage_16.png":"images/noimage.gif")};g.changeTypename=function(b,w,x){var z,D,E=new h.default.PortalItem(l.__assign(l.__assign({},b),{portal:{isPortal:null===(z=e.default.self)||void 0===z?void 0:z.isPortal}})),C=E.getTypeInfo();z=-1<(null===(D=b.type)||void 0===D?void 0:D.toLowerCase().indexOf("add in"))?E.displayName:
E.type;D=c.default.includes(b.typeKeywords,"Hosted Service");E=c.default.includes(b.typeKeywords,"View Service");var y=c.default.includes(b.typeKeywords,"ArcGIS Server"),v="Feature Service"===b.type;b="Feature Collection"===b.type;C=C.displayName;x&&(C=D?C+" (".concat(E?this.i18n.viewsWidget.hostedView:v?this.i18n.viewsWidget.hostedData:this.i18n.viewsWidget.hostedService,")"):C+" (".concat(this.i18n.viewsWidget.locatorView,")"));x=y||b?"".concat(this.i18n.source," "):"";return w?'\x3cspan title\x3d"'.concat(x).concat(z,
'"\x3e').concat(C,"\x3c/span\x3e"):C};g.getFavorites=function(){var b=e.default.self.user.favGroupId;b="".concat(e.default.restBaseUrl,"content/groups/").concat(b);var w,x={};return u.default.request({url:b}).then(function(z){w=z.items||[];w.forEach(function(D){x[D.id]=!0});return x})};g.addToFavorites=function(b){var w,x,z=u.default.getUser().favGroupId,D="".concat(e.default.restBaseUrl,"content/items/").concat(b.id,"/share"),E=b.access&&"public"===b.access||(null===(w=b.sharing)||void 0===w?void 0:
w.access)&&"public"===b.sharing.access;w=b.access&&"org"===b.access||(null===(x=b.sharing)||void 0===x?void 0:x.access)&&"org"===b.sharing.access;return u.default.request({url:D,content:{f:"json",everyone:E||!1,org:w||!1,groups:[z],items:[b.id]}},{usePost:!0})};g.removeFromFavorites=function(b){var w=u.default.getUser().favGroupId,x="".concat(e.default.restBaseUrl,"content/items/").concat(b.id,"/unshare");return u.default.request({url:x,content:{f:"json",everyone:!1,org:!1,groups:[w],items:[b.id]}},
{usePost:!0})};g.i18n=l.__assign(l.__assign({},r.default.common),{source:r.default.itemProperties.source,viewsWidget:r.default.viewsWidget});return g}()})},"dojo/data/ItemFileWriteStore":function(){define("../_base/lang ../_base/declare ../_base/array ../_base/json ../_base/kernel ./ItemFileReadStore ../date/stamp".split(" "),function(f,B,l,e,c,u,t){return B("dojo.data.ItemFileWriteStore",u,{constructor:function(d){this._features["dojo.data.api.Write"]=!0;this._features["dojo.data.api.Notification"]=
!0;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};this._datatypeMap.Date.serialize||(this._datatypeMap.Date.serialize=function(q){return t.toISOString(q,{zulu:!0})});d&&!1===d.referenceIntegrity&&(this.referenceIntegrity=!1);this._saveInProgress=!1},referenceIntegrity:!0,_assert:function(d){if(!d)throw Error("assertion failed in ItemFileWriteStore");},_getIdentifierAttribute:function(){return this.getFeatures()["dojo.data.api.Identity"]},newItem:function(d,q){this._assert(!this._saveInProgress);
this._loadFinished||this._forceLoad();if("object"!=typeof d&&"undefined"!=typeof d)throw Error("newItem() was passed something other than an object");var m=null,a=this._getIdentifierAttribute();if(a===Number)m=this._arrayOfAllItems.length;else{m=d[a];if("undefined"===typeof m)throw Error("newItem() was not passed an identity for the new item");if(f.isArray(m))throw Error("newItem() was not passed an single-valued identity");}this._itemsByIdentity&&this._assert("undefined"===typeof this._itemsByIdentity[m]);
this._assert("undefined"===typeof this._pending._newItems[m]);this._assert("undefined"===typeof this._pending._deletedItems[m]);var h={};h[this._storeRefPropName]=this;h[this._itemNumPropName]=this._arrayOfAllItems.length;this._itemsByIdentity&&(this._itemsByIdentity[m]=h,h[a]=[m]);this._arrayOfAllItems.push(h);a=null;if(q&&q.parent&&q.attribute){a={item:q.parent,attribute:q.attribute,oldValue:void 0};var n=this.getValues(q.parent,q.attribute);if(n&&0<n.length){var r=n.slice(0,n.length);a.oldValue=
1===n.length?n[0]:n.slice(0,n.length);r.push(h);this._setValueOrValues(q.parent,q.attribute,r,!1);a.newValue=this.getValues(q.parent,q.attribute)}else this._setValueOrValues(q.parent,q.attribute,h,!1),a.newValue=h}else h[this._rootItemPropName]=!0,this._arrayOfTopLevelItems.push(h);this._pending._newItems[m]=h;for(var k in d){if(k===this._storeRefPropName||k===this._itemNumPropName)throw Error("encountered bug in ItemFileWriteStore.newItem");q=d[k];f.isArray(q)||(q=[q]);h[k]=q;if(this.referenceIntegrity)for(m=
0;m<q.length;m++)n=q[m],this.isItem(n)&&this._addReferenceToMap(n,h,k)}this.onNew(h,a);return h},_removeArrayElement:function(d,q){q=l.indexOf(d,q);return-1!=q?(d.splice(q,1),!0):!1},deleteItem:function(d){this._assert(!this._saveInProgress);this._assertIsItem(d);var q=d[this._itemNumPropName],m=this.getIdentity(d);if(this.referenceIntegrity){var a=this.getAttributes(d);d[this._reverseRefMap]&&(d["backup_"+this._reverseRefMap]=f.clone(d[this._reverseRefMap]));l.forEach(a,function(b){l.forEach(this.getValues(d,
b),function(w){this.isItem(w)&&(d["backupRefs_"+this._reverseRefMap]||(d["backupRefs_"+this._reverseRefMap]=[]),d["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(w),attr:b}),this._removeReferenceFromMap(w,d,b))},this)},this);if(a=d[this._reverseRefMap])for(var h in a){var n=null;if(n=this._itemsByIdentity?this._itemsByIdentity[h]:this._arrayOfAllItems[h])for(var r in a[h]){var k=this.getValues(n,r)||[],g=l.filter(k,function(b){return!(this.isItem(b)&&this.getIdentity(b)==m)},this);this._removeReferenceFromMap(d,
n,r);g.length<k.length&&this._setValueOrValues(n,r,g,!0)}}}this._arrayOfAllItems[q]=null;d[this._storeRefPropName]=null;this._itemsByIdentity&&delete this._itemsByIdentity[m];this._pending._deletedItems[m]=d;d[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,d);this.onDelete(d);return!0},setValue:function(d,q,m){return this._setValueOrValues(d,q,m,!0)},setValues:function(d,q,m){return this._setValueOrValues(d,q,m,!0)},unsetAttribute:function(d,q){return this._setValueOrValues(d,
q,[],!0)},_setValueOrValues:function(d,q,m,a){this._assert(!this._saveInProgress);this._assertIsItem(d);this._assert(f.isString(q));this._assert("undefined"!==typeof m);var h=this._getIdentifierAttribute();if(q==h)throw Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");h=this._getValueOrValues(d,q);var n=this.getIdentity(d);if(!this._pending._modifiedItems[n]){var r={};for(k in d)r[k]=k===this._storeRefPropName||k===this._itemNumPropName||k===this._rootItemPropName?
d[k]:k===this._reverseRefMap?f.clone(d[k]):d[k].slice(0,d[k].length);this._pending._modifiedItems[n]=r}n=!1;if(f.isArray(m)&&0===m.length){if(n=delete d[q],m=void 0,this.referenceIntegrity&&h){var k=h;f.isArray(k)||(k=[k]);for(var g=0;g<k.length;g++)r=k[g],this.isItem(r)&&this._removeReferenceFromMap(r,d,q)}}else{n=f.isArray(m)?m.slice(0,m.length):[m];if(this.referenceIntegrity)if(h){k=h;f.isArray(k)||(k=[k]);var b={};l.forEach(k,function(w){this.isItem(w)&&(w=this.getIdentity(w),b[w.toString()]=
!0)},this);l.forEach(n,function(w){if(this.isItem(w)){var x=this.getIdentity(w);b[x.toString()]?delete b[x.toString()]:this._addReferenceToMap(w,d,q)}},this);for(g in b)this._removeReferenceFromMap(this._itemsByIdentity?this._itemsByIdentity[g]:this._arrayOfAllItems[g],d,q)}else for(g=0;g<n.length;g++)r=n[g],this.isItem(r)&&this._addReferenceToMap(r,d,q);d[q]=n;n=!0}if(a)this.onSet(d,q,h,m);return n},_addReferenceToMap:function(d,q,m){q=this.getIdentity(q);var a=d[this._reverseRefMap];a||(a=d[this._reverseRefMap]=
{});(d=a[q])||(d=a[q]={});d[m]=!0},_removeReferenceFromMap:function(d,q,m){q=this.getIdentity(q);var a=d[this._reverseRefMap],h;if(a){for(h in a)h==q&&(delete a[h][m],this._isEmpty(a[h])&&delete a[h]);this._isEmpty(a)&&delete d[this._reverseRefMap]}},_dumpReferenceMap:function(){var d;for(d=0;d<this._arrayOfAllItems.length;d++);},_getValueOrValues:function(d,q){var m=void 0;this.hasAttribute(d,q)&&(d=this.getValues(d,q),m=1==d.length?d[0]:d);return m},_flatten:function(d){if(this.isItem(d))return{_reference:this.getIdentity(d)};
if("object"===typeof d)for(var q in this._datatypeMap){var m=this._datatypeMap[q];if(f.isObject(m)&&!f.isFunction(m)){if(d instanceof m.type){if(!m.serialize)throw Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+q+"]");return{_type:q,_value:m.serialize(d)}}}else if(d instanceof m)return{_type:q,_value:d.toString()}}return d},_getNewFileContentString:function(){var d={},q=this._getIdentifierAttribute();q!==Number&&(d.identifier=q);this._labelAttr&&(d.label=this._labelAttr);d.items=
[];for(q=0;q<this._arrayOfAllItems.length;++q){var m=this._arrayOfAllItems[q];if(null!==m){var a={},h;for(h in m)if(h!==this._storeRefPropName&&h!==this._itemNumPropName&&h!==this._reverseRefMap&&h!==this._rootItemPropName){var n=this.getValues(m,h);if(1==n.length)a[h]=this._flatten(n[0]);else for(var r=[],k=0;k<n.length;++k)r.push(this._flatten(n[k])),a[h]=r}d.items.push(a)}}return e.toJson(d,!0)},_isEmpty:function(d){var q=!0;if(f.isObject(d))for(var m in d){q=!1;break}else f.isArray(d)&&0<d.length&&
(q=!1);return q},save:function(d){this._assert(!this._saveInProgress);this._saveInProgress=!0;var q=this,m=function(){q._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};q._saveInProgress=!1;d&&d.onComplete&&d.onComplete.call(d.scope||c.global)},a=function(n){q._saveInProgress=!1;d&&d.onError&&d.onError.call(d.scope||c.global,n)};if(this._saveEverything){var h=this._getNewFileContentString();this._saveEverything(m,a,h)}this._saveCustom&&this._saveCustom(m,a);this._saveEverything||this._saveCustom||
m()},revert:function(){this._assert(!this._saveInProgress);for(var d in this._pending._modifiedItems){var q=this._pending._modifiedItems[d],m=null;m=this._itemsByIdentity?this._itemsByIdentity[d]:this._arrayOfAllItems[d];q[this._storeRefPropName]=this;for(var a in m)delete m[a];f.mixin(m,q)}for(d in this._pending._deletedItems){var h=this._pending._deletedItems[d];h[this._storeRefPropName]=this;q=h[this._itemNumPropName];h["backup_"+this._reverseRefMap]&&(h[this._reverseRefMap]=h["backup_"+this._reverseRefMap],
delete h["backup_"+this._reverseRefMap]);this._arrayOfAllItems[q]=h;this._itemsByIdentity&&(this._itemsByIdentity[d]=h);h[this._rootItemPropName]&&this._arrayOfTopLevelItems.push(h)}for(d in this._pending._deletedItems)h=this._pending._deletedItems[d],h["backupRefs_"+this._reverseRefMap]&&(l.forEach(h["backupRefs_"+this._reverseRefMap],function(n){this._addReferenceToMap(this._itemsByIdentity?this._itemsByIdentity[n.id]:this._arrayOfAllItems[n.id],h,n.attr)},this),delete h["backupRefs_"+this._reverseRefMap]);
for(d in this._pending._newItems)q=this._pending._newItems[d],q[this._storeRefPropName]=null,this._arrayOfAllItems[q[this._itemNumPropName]]=null,q[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,q),this._itemsByIdentity&&delete this._itemsByIdentity[d];this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return!0},isDirty:function(d){return d?(d=this.getIdentity(d),(new Boolean(this._pending._newItems[d]||this._pending._modifiedItems[d]||this._pending._deletedItems[d])).valueOf()):
!this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems)},onSet:function(d,q,m,a){},onNew:function(d,q){},onDelete:function(d){},close:function(d){if(this.clearOnClose){if(this.isDirty())throw Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");this.inherited(arguments)}}})})},"dojox/data/QueryReadStore":function(){define(["dojo","dojox",
"dojo/data/util/sorter","dojo/string"],function(f,B){return f.declare("dojox.data.QueryReadStore",null,{url:"",requestMethod:"get",_className:"dojox.data.QueryReadStore",_items:[],_lastServerQuery:null,_numRows:-1,lastRequestHash:null,doClientPaging:!1,doClientSorting:!1,_itemsByIdentity:null,_identifier:null,_features:{"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0},_labelAttr:"label",constructor:function(l){f.mixin(this,l)},getValue:function(l,e,c){this._assertIsItem(l);if(!f.isString(e))throw Error(this._className+
".getValue(): Invalid attribute, string expected!");return!this.hasAttribute(l,e)&&c?c:l.i[e]},getValues:function(l,e){this._assertIsItem(l);var c=[];this.hasAttribute(l,e)&&c.push(l.i[e]);return c},getAttributes:function(l){this._assertIsItem(l);var e=[],c;for(c in l.i)e.push(c);return e},hasAttribute:function(l,e){return this.isItem(l)&&"undefined"!=typeof l.i[e]},containsValue:function(l,e,c){l=this.getValues(l,e);e=l.length;for(var u=0;u<e;u++)if(l[u]==c)return!0;return!1},isItem:function(l){return l?
"undefined"!=typeof l.r&&l.r==this:!1},isItemLoaded:function(l){return this.isItem(l)},loadItem:function(l){this.isItemLoaded(l.item)},fetch:function(l){l=l||{};l.store||(l.store=this);var e=this;this._fetchItems(l,function(c,u,t){var d=u.abort||null,q=!1,m=u.start?u.start:0;0==e.doClientPaging&&(m=0);var a=u.count?m+u.count:c.length;u.abort=function(){q=!0;d&&d.call(u)};var h=u.scope||f.global;u.store||(u.store=e);u.onBegin&&u.onBegin.call(h,t,u);u.sort&&e.doClientSorting&&c.sort(f.data.util.sorter.createSortFunction(u.sort,
e));if(u.onItem)for(t=m;t<c.length&&t<a;++t){var n=c[t];q||u.onItem.call(h,n,u)}u.onComplete&&!q&&(t=null,u.onItem||(t=c.slice(m,a)),u.onComplete.call(h,t,u))},function(c,u){u.onError&&u.onError.call(u.scope||f.global,c,u)});return l},getFeatures:function(){return this._features},close:function(l){},getLabel:function(l){if(this._labelAttr&&this.isItem(l))return this.getValue(l,this._labelAttr)},getLabelAttributes:function(l){return this._labelAttr?[this._labelAttr]:null},_xhrFetchHandler:function(l,
e,c,u){l=this._filterResponse(l);l.label&&(this._labelAttr=l.label);u=l.numRows||-1;this._items=[];f.forEach(l.items,function(m){this._items.push({i:m,r:this})},this);l=l.identifier;this._itemsByIdentity={};if(l){this._identifier=l;var t;for(t=0;t<this._items.length;++t){var d=this._items[t].i,q=d[l];if(this._itemsByIdentity[q])throw Error(this._className+":  The json data as specified by: ["+this.url+"] is malformed.  Items within the list have identifier: ["+l+"].  Value collided: ["+q+"]");this._itemsByIdentity[q]=
d}}else for(this._identifier=Number,t=0;t<this._items.length;++t)this._items[t].n=t;u=this._numRows=-1===u?this._items.length:u;c(this._items,e,u);this._numRows=u},_fetchItems:function(l,e,c){var u=l.serverQuery||l.query||{};this.doClientPaging||(u.start=l.start||0,l.count&&(u.count=l.count));if(!this.doClientSorting&&l.sort){var t=[];f.forEach(l.sort,function(q){q&&q.attribute&&t.push((q.descending?"-":"")+q.attribute)});u.sort=t.join(",")}if(this.doClientPaging&&null!==this._lastServerQuery&&f.toJson(u)==
f.toJson(this._lastServerQuery))this._numRows=-1===this._numRows?this._items.length:this._numRows,e(this._items,l,this._numRows);else{var d=("post"==this.requestMethod.toLowerCase()?f.xhrPost:f.xhrGet)({url:this.url,handleAs:"json-comment-optional",content:u,failOk:!0});l.abort=function(){d.cancel()};d.addCallback(f.hitch(this,function(q){this._xhrFetchHandler(q,l,e,c)}));d.addErrback(function(q){c(q,l)});this.lastRequestHash=(new Date).getTime()+"-"+String(Math.random()).substring(2);this._lastServerQuery=
f.mixin({},u)}},_filterResponse:function(l){return l},_assertIsItem:function(l){if(!this.isItem(l))throw Error(this._className+": Invalid item argument.");},_assertIsAttribute:function(l){if("string"!==typeof l)throw Error(this._className+": Invalid attribute argument ('"+l+"').");},fetchItemByIdentity:function(l){if(this._itemsByIdentity){var e=this._itemsByIdentity[l.identity];if(void 0!==e){l.onItem&&l.onItem.call(l.scope?l.scope:f.global,{i:e,r:this});return}}this._fetchItems({serverQuery:{id:l.identity}},
function(c,u){u=l.scope?l.scope:f.global;try{var t=null;c&&1==c.length&&(t=c[0]);l.onItem&&l.onItem.call(u,t)}catch(d){l.onError&&l.onError.call(u,d)}},function(c,u){u=l.scope?l.scope:f.global;l.onError&&l.onError.call(u,c)})},getIdentity:function(l){var e=null;return e=this._identifier===Number?l.n:l.i[this._identifier]},getIdentityAttributes:function(l){return[this._identifier]}})})},"arcgisonline/sharing/geow/Account":function(){define("require exports tslib dijit/registry dojo/_base/kernel dojo/Deferred dojo/json dojo/promise/all dojo/on dojo/request/iframe dojo/sniff dojo/data/util/sorter dojo/when dojo/_base/url esri/config esri/lang esri/request esri/IdentityManager ../../pages/utils/promises ../../pages/utils/signin ../../pages/utils/storage ../../pages/utils/enterprise ../../esriGeowConfig ../util ../dijit/Role ../dijit/dialog/GeneralDlg dojo/i18n!../../nls/arcgisonline".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E,C,y,v,A,G){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);n=l.__importDefault(n);r=l.__importDefault(r);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);w=l.__importDefault(w);x=l.__importDefault(x);z=l.__importDefault(z);D=l.__importDefault(D);E=l.__importDefault(E);
C=l.__importDefault(C);y=l.__importDefault(y);v=l.__importDefault(v);A=l.__importDefault(A);G=l.__importDefault(G);return function(){function F(){}F.loadMapSettings=function(H){this.getSelf(function(L){var M;if(L){L.allSSL&&(C.default.allSSL=L.allSSL);g.default.isDefined(C.default.allSSL)&&C.default.allSSL&&"http:"===location.protocol&&(window.location.href=y.default.getSecureUrl(location.href));L.basemapGalleryGroupQuery&&(C.default.basemapGalleryGroupQuery=L.basemapGalleryGroupQuery);L.templatesGroupQuery&&
(C.default.templatesGroupQuery=L.templatesGroupQuery);L.defaultBasemap&&(C.default.defaultBasemap=L.defaultBasemap);L.defaultExtent&&(C.default.defaultExtent=L.defaultExtent);L.symbolSetsGroupQuery&&(C.default.symbolSetsGroupQuery=L.symbolSetsGroupQuery);L.staticImagesUrl&&(C.default.staticImagesUrl=L.staticImagesUrl);L.layerTemplatesGroupQuery&&(C.default.layerTemplatesGroupQuery=L.layerTemplatesGroupQuery);L.colorSetsGroupQuery&&(C.default.colorSetsGroupQuery=L.colorSetsGroupQuery);L.helpBase&&
(C.default.help=L.helpBase,C.default.helpBase=L.helpBase);L.helpMap&&L.helpMap.m&&(C.default.helpMap=L.helpMap.m);L.urlKey&&(C.default.urlKey=L.urlKey);var Q=void 0;if(L.authorizedCrossOriginDomains&&0<L.authorizedCrossOriginDomains.length)for(Q=0;Q<L.authorizedCrossOriginDomains.length;Q++){var S=L.authorizedCrossOriginDomains[Q];g.default.isDefined(S)&&0<S.length&&k.default.defaults.io.corsEnabledServers.push({host:S,withCredentials:!0})}z.default.checkForOrgUserOnOnlineBaseHostAndRedirect(L);L.isPortal&&
-1===(null===(M=y.default._cookies)||void 0===M?void 0:M.arcgis_auth)&&delete y.default._cookies.arcgis_auth;M=!1===C.default.isMultiTenant;S=(Q=y.default.getUser())?!0:!1;var I=window.location.pathname.toLowerCase(),P=-1!==I.indexOf(C.default.signin),J=-1!==I.indexOf("troubleshoot.html");I=-1!==I.indexOf("setup.html");M||!Q||"account_admin"!==Q.role&&"org_admin"!==Q.role||!L.id||L.urlKey||I||(window.location.href="".concat(C.default.baseUrl,"setup.html"));M?(!L.access||"private"!==L.access||S||P||
J||(window.location.href="".concat(y.default.getSecureUrl()).concat(C.default.signin,"?returnUrl\x3d").concat(encodeURIComponent(window.location.href))),L.isPortal&&"singletenant"===L.portalMode&&("7080"===location.port||"7443"===location.port)&&y.default.checkForIAA().then(function(U){if(null===U||void 0===U?0:U.hasIAA)if(L.portalHostname.match(/:7080\//)&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")&&(window.location.href="".concat(y.default.getHttpUrl(C.default.baseUrl),
"error.html?c\x3dWebAdaptorRequired")),!L.portalHostname.match(/:7080\//)&&80!==C.default.self.httpPort&&443!==C.default.self.httpsPort&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")){U=new r.default(location.href);var Y=U.path.indexOf("/home/");Y=U.path.substring(Y+6);U=g.default.isDefined(U.query)?"?".concat(U.query):"";window.location.href="".concat(y.default.getHttpUrl("http://".concat(L.portalHostname))).concat("/home/").concat(Y).concat(U)}})):L.id||!L.urlKey||S||P||
J||(window.location.href="".concat(C.default.baseUrl.replace("http:","https:")).concat(C.default.signin,"?returnUrl\x3d").concat(encodeURIComponent(window.location.href)))}H&&H(L)})};F.getSelf=function(H,L,M){var Q=this;if(this._isRequestingSelf)setTimeout(this.getSelf.bind(this,H,L),75);else{var S="".concat(C.default.restBaseUrl,"portals/helpmap?culture\x3d").concat(c.default.locale),I="".concat(C.default.restBaseUrl,"portals/self?culture\x3d").concat(c.default.locale);M&&(S+="\x26token\x3d".concat(M),
I+="\x26token\x3d".concat(M));var P="".concat(C.default.restBaseUrl,"community/self");P=(M=w.default.findCredential(C.default.restBaseUrl))?{url:P,content:{returnUserLicensedItems:!0,token:M.token}}:null;S=(null===C.default||void 0===C.default?void 0:C.default.self)||x.default.eachAlways({helpMapResult:y.default._requestWithAppHandlers({url:S}),selfResult:y.default._requestWithAppHandlers({url:I}),communitySelfResult:M?y.default._requestWithAppHandlers(P):x.default.resolve(null)}).then(function(J){var U,
Y,aa;if(null===(U=J.selfResult)||void 0===U?0:U.error)throw J.selfResult.error;var la=J.selfResult.value;if(null===(Y=J.helpMapResult)||void 0===Y?0:Y.value)la.helpMap=J.helpMapResult.value.helpMap;if(null===(aa=J.communitySelfResult)||void 0===aa?0:aa.value)la.communitySelf=J.communitySelfResult.value;return la.user?w.default.checkAppAccess(C.default.restBaseUrl,Q.getAppClientId()).always(function(T){return Q.setupAfterSelf(la,!(null===T||void 0===T||!T.viewOnly)).then(function(N){Q._isRequestingSelf=
!1;10>=(0,a.default)("ie")&&Q.throwawayIEPostFix();return N})}):Q.setupAfterSelf(la).then(function(T){Q._isRequestingSelf=!1;10>=(0,a.default)("ie")&&Q.throwawayIEPostFix();return T})},function(J){throw J;});this._isRequestingSelf=!C.default.self;return(0,n.default)(S,H,L)}};F.getAppClientId=function(){var H=-1<window.location.href.indexOf("webmap/viewer.html")?"arcgisWebApps":"arcgisonline";try{return D.default.getLocalStorageItem("portalAppClientId")||D.default.getSessionStorageItem("portalAppClientId")||
H}catch(L){return H}};F.setupAfterSelf=function(H,L){var M=new u.default;C.default.self=H;this.setupUserRole(H,L);H.isPortal?this.getPortalAppSettings().then(function(Q){if(Q&&!Q.code&&(null===Q||void 0===Q?0:Q.portalConfigProperties)){var S=E.default.copyPortalConfigProperties(Q.portalConfigProperties,C.default);Object.keys(S).forEach(function(I){C.default[I]=S[I]})}M.resolve(H)},function(){M.resolve(H)}):M.resolve(H);return M};F.getPortalAppSettings=function(){return y.default.request({url:"".concat(C.default.restBaseUrl,
"portals/self/settings"),content:{f:"json"}})};F.setupUserRole=function(H,L){var M,Q;C.default.userInfo=H.user&&l.__assign(l.__assign({},C.default.userInfo),H.user);if(null===(M=C.default.userInfo)||void 0===M?0:M.orgId)C.default.userInfo.accountId=C.default.userInfo.orgId;if(null===(Q=H.user)||void 0===Q?0:Q.role)C.default.userRole=new v.default({id:H.user.roleId?H.user.roleId:H.user.role,role:H.user.role,privileges:H.user.privileges?H.user.privileges:void 0,viewOnly:L}),L&&(C.default.self.user.role=
C.default.userInfo.role=H.user.role=C.default.userRole.baseRole,C.default.self.user.roleId=C.default.userInfo.roleId=H.user.roleId=C.default.userRole.id,C.default.self.user.privileges=C.default.userInfo.privileges=H.user.privileges=C.default.userRole.privileges,C.default.self.user.level=C.default.userInfo.level=H.user.level="1");this.normalizeOrgIdAndRole()};F.normalizeOrgIdAndRole=function(){g.default.isDefined(C.default.self.user)&&(g.default.isDefined(C.default.self.user.orgId)&&(C.default.self.user.accountId=
C.default.self.user.orgId),g.default.isDefined(C.default.self.user.role)&&(C.default.self.user.role=y.default.normalizeOrgRole(C.default.self.user.role)));g.default.isDefined(C.default.userInfo)&&(g.default.isDefined(C.default.userInfo.orgId)&&(C.default.userInfo.accountId=C.default.userInfo.orgId),g.default.isDefined(C.default.userInfo.role)&&(C.default.userInfo.role=y.default.normalizeOrgRole(C.default.userInfo.role)))};F.throwawayIEPostFix=function(){var H=document.createElement("form");H.encoding=
"multipart/form-data";H.method="POST";var L=document.createElement("input");L.type="hidden";L.name="f";L.value="json";H.appendChild(L);L=document.createElement("input");L.type="hidden";L.name="q";L.value="*";H.appendChild(L);L=document.createElement("input");L.type="hidden";L.name="callback.html";L.value="textarea";H.appendChild(L);m.default.post("".concat(C.default.restBaseUrl,"community/users"),{form:H,handleAs:"json"}).then(function(){}).otherwise(function(){})};F.updateAccount=function(H,L,M){var Q;
if(null!==y.default.getUser()){var S="";H.defaultBasemap&&(S=t.default.stringify(H.defaultBasemap));var I=0<(null===(Q=H.metadataFormats)||void 0===Q?void 0:Q.length)?H.metadataFormats.join(","):"",P=!!C.default.userRole,J=C.default.userRole.isAdmin(),U=C.default.self&&(C.default.self.canListApps||C.default.self.canListData),Y=P&&(J||C.default.userRole.canManageCredits());Q=P&&(J||C.default.userRole.canManageSecurity());var aa=P&&(J||C.default.userRole.canManageWebsite());U=U&&P&&(J||C.default.userRole.canManageMarketplace());
P=P&&(J||C.default.userRole.canManageUtilityServices());J=aa||Q||P||Y;Y={clearEmptyFields:!0};aa&&(Y.name=H.name,Y.description=H.description,Y.culture=H.culture,Y.cultureFormat=H.cultureFormat,Y.region=H.region,Y.featuredItemsGroupQuery=H.featuredItemsGroupQuery,Y.thumbnail=H.thumbnail,Y.basemapGalleryGroupQuery=H.basemapGalleryGroupQuery,Y.defaultBasemap=S,Y.defaultExtent=H.defaultExtent?t.default.stringify(H.defaultExtent):"",Y.featuredGroups=t.default.stringify(H.featuredGroups),Y.homePageFeaturedContent=
H.homePageFeaturedContent,Y.homePageFeaturedContentCount=H.homePageFeaturedContentCount,Y.rotatorPanels=t.default.stringify(H.rotatorPanels),Y.showHomePageDescription=H.showHomePageDescription,Y.templatesGroupQuery=H.templatesGroupQuery,Y.analysisLayersGroupQuery=H.analysisLayersGroupQuery,Y.galleryTemplatesGroupQuery=H.galleryTemplatesGroupQuery,Y.stylesGroupQuery=H.stylesGroupQuery,Y.bingKey=H.bingKey,Y.canShareBingPublic=H.canShareBingPublic,Y.backgroundImage=H.backgroundImage,Y.units=H.units,
Y.metadataEditable=H.metadataEditable,Y.metadataFormats=I,Y.useVectorBasemaps=H.useVectorBasemaps);P&&H.helperServices&&(Y.geocodeService=t.default.stringify(H.helperServices.geocode),Y.printServiceTask=t.default.stringify(H.helperServices.printTask),Y.geometryService=t.default.stringify(H.helperServices.geometry),Y.routeServiceLayer=t.default.stringify(H.helperServices.route),g.default.isDefined(H.helperServices.asyncRoute)&&(Y.asyncRouteService=t.default.stringify(H.helperServices.asyncRoute)),
g.default.isDefined(H.helperServices.closestFacility)&&(Y.closestFacilityService=t.default.stringify(H.helperServices.closestFacility)),g.default.isDefined(H.helperServices.asyncClosestFacility)&&(Y.asyncClosestFacilityService=t.default.stringify(H.helperServices.asyncClosestFacility)),g.default.isDefined(H.helperServices.serviceArea)&&(Y.serviceAreaService=t.default.stringify(H.helperServices.serviceArea)),g.default.isDefined(H.helperServices.asyncServiceArea)&&(Y.asyncServiceAreaService=t.default.stringify(H.helperServices.asyncServiceArea)),
g.default.isDefined(H.helperServices.syncVRP)&&(Y.syncVRPService=t.default.stringify(H.helperServices.syncVRP)),g.default.isDefined(H.helperServices.asyncVRP)&&(Y.asyncVRPService=t.default.stringify(H.helperServices.asyncVRP)),g.default.isDefined(H.helperServices.asyncLocationAllocation)&&(Y.asyncLocationAllocationService=t.default.stringify(H.helperServices.asyncLocationAllocation)),g.default.isDefined(H.helperServices.routingUtilities)&&(Y.routingUtilitiesService=t.default.stringify(H.helperServices.routingUtilities)),
g.default.isDefined(H.helperServices.traffic)&&(Y.trafficService=t.default.stringify(H.helperServices.traffic)),g.default.isDefined(H.helperServices.asyncODCostMatrix)&&(Y.asyncODCostMatrixService=t.default.stringify(H.helperServices.asyncODCostMatrix)),y.default.isPortal()&&(g.default.isDefined(H.helperServices.analysis)&&(Y.analysisService=t.default.stringify(H.helperServices.analysis)),g.default.isDefined(H.helperServices.asyncGeocode)&&(Y.asyncGeocodeService=t.default.stringify(H.helperServices.asyncGeocode)),
g.default.isDefined(H.helperServices.geoenrichment)&&(Y.geoenrichmentService=t.default.stringify(H.helperServices.geoenrichment)),g.default.isDefined(H.helperServices.hydrology)&&(Y.hydrologyService=t.default.stringify(H.helperServices.hydrology)),g.default.isDefined(H.helperServices.orthomappingElevation)&&(Y.orthomappingElevationService=t.default.stringify(H.helperServices.orthomappingElevation)),g.default.isDefined(H.helperServices.elevation)&&(Y.elevationService=t.default.stringify(H.helperServices.elevation)),
g.default.isDefined(H.helperServices.elevationSync)&&(Y.elevationSyncService=t.default.stringify(H.helperServices.elevationSync)),g.default.isDefined(H.helperServices.defaultElevationLayers)&&(Y.elevation3DService=t.default.stringify(H.helperServices.defaultElevationLayers))));U&&(Y.orgUrl=H.orgUrl,Y.orgEmail=H.orgEmail,Y.orgPhone=H.orgPhone);Q&&(Y.access=H.access,Y.allSSL=H.allSSL,Y.commentsEnabled=H.commentsEnabled,Y.canSharePublic=H.canSharePublic,Y.canSearchPublic=H.canSearchPublic,Y.urlKey=H.urlKey,
Y.canSignInIDP=H.canSignInIDP,Y.canSignInArcGIS=H.canSignInArcGIS,Y.useStandardizedQuery=H.useStandardizedQuery,Y.mfaEnabled=H.mfaEnabled,Y.mfaAdmins=t.default.stringify(H.mfaAdmins),Y.authorizedCrossOriginDomains=t.default.stringify(H.authorizedCrossOriginDomains),Y.allowedOrigins=H.allowedOrigins,Y.allowedRedirectUris=t.default.stringify(H.allowedRedirectUris),Y.updateUserProfileDisabled=H.updateUserProfileDisabled,Y.eueiEnabled=H.eueiEnabled,Y.contacts=t.default.stringify(H.contacts||[]));J&&(Y.portalProperties=
t.default.stringify(H.portalProperties));H=Object.keys(Y);1===H.length&&"clearEmptyFields"===H[0]?null===L||void 0===L?void 0:L():(H="".concat(y.default.getSecureUrl(C.default.restBaseUrl),"portals/self/update"),y.default.request({url:H,content:Y},{usePost:!0}).then(L.bind(this),M.bind(this)))}};F.checkUsernames=function(H,L,M){var Q="";0<(null===H||void 0===H?void 0:H.length)&&(Q=H.join(","));H="".concat(C.default.restBaseUrl,"community/checkUsernames");y.default.request({url:H,content:{usernames:Q}},
{usePost:!0}).then(L,M)};F.getPendingAccountUsers=function(H,L,M){if(null!==y.default.getUser()){var Q=1,S=10;H=g.default.isDefined(L.sortField)?L.sortField:void 0;var I=g.default.isDefined(L.sortOrder)?L.sortOrder:void 0,P=g.default.isDefined(L.type)?L.type:void 0;g.default.isDefined(L.start)&&(Q=L.start);g.default.isDefined(L.num)&&(S=L.num);L="".concat(C.default.restBaseUrl,"portals/self/invitations?start\x3d").concat(Q,"\x26num\x3d").concat(S);H&&(L+="\x26sortField\x3d".concat(H));I&&(L+="\x26sortOrder\x3d".concat(I));
P&&(L+="\x26type\x3d".concat(P));y.default.request({url:L}).then(M,M)}};F.getInvitation=function(H,L,M){null!==y.default.getUser()&&(H="".concat(C.default.restBaseUrl,"community/invitations/").concat(H),y.default.request({url:H}).then(L.bind(this),M))};F.acceptInvitation=function(H,L,M){if(null!==y.default.getUser()){var Q="".concat(C.default.restBaseUrl,"community/invitations/").concat(H,"/accept");y.default.request({url:Q,content:{invitationId:H}},{usePost:!0}).then(L.bind(this),M.bind(this))}};
F.updateUserRole=function(H,L,M,Q){var S=null,I=y.default.getUser();if(null!==I){S=I.accountId;var P=I.username||I.email;if(null!==S)if(P===H&&"account_admin"===I.role&&"account_admin"!==L){var J=new A.default;q.default.once(J._dialog,"hide",function(){J._dialog.destroyRecursive();J.destroyRecursive()});J.onOkClick=function(){e.default.byId("general-dialog").hide();M(null)};J.show(G.default.common.errors.accountAdmin)}else H={user:H,role:L},L="".concat(C.default.restBaseUrl,"portals/self/updateUserRole"),
y.default.request({url:L,content:H},{usePost:!0}).then(M.bind(this),Q.bind(this))}};F.deleteUser=function(H,L,M){null!==y.default.getUser()&&(H="".concat(C.default.restBaseUrl,"community/users/").concat(H,"/delete"),y.default.request({url:H,content:{}},{usePost:!0}).then(L.bind(this),M.bind(this)))};F.caseInsensitiveComparator=function(H,L){H&&(H=H.toLowerCase());L&&(L=L.toLowerCase());return h.default.basicComparator(H,L)};F.lastLoginComparator=function(H,L){var M,Q=0===H||-1===H?void 0:H,S=0===
L||-1===L?void 0:L,I=-1;(null===(M=C.default.self)||void 0===M?0:M.isPortal)||!1===C.default.isMultiTenant?I=h.default.basicComparator(Q,S):Q===S?I=H===L?0:H<L?-1:1:Q&&S&&H>L?I=1:Q&&!S?I=1:!Q&&S&&(I=-1);return I};F.getSupportedLanguages=function(H,L){var M="".concat(C.default.restBaseUrl,"portals/languages");return(0,b.default)({url:M,content:{f:"json"},load:H,callbackParamName:"callback",error:L})};F.getSupportedRegions=function(H,L){var M="".concat(C.default.restBaseUrl,"portals/regions");return(0,b.default)({url:M,
content:{f:"json",culture:c.default.locale},load:H,callbackParamName:"callback",error:L})};F.getSupportedLanguagesAndRegions=function(){var H=new u.default;(0,d.default)({languages:this.getSupportedLanguages(null,null),regions:this.getSupportedRegions(null,null)}).then(function(L){H.resolve({languages:L.languages,regions:L.regions})},function(L){H.resolve(L)});return H};F.displayedPortalNonSSLNotice=!1;return F}()})},"arcgisonline/pages/utils/signin":function(){define("require exports tslib ../../esriGeowConfig ./storage ./queryHandler esri/IdentityManager esri/arcgis/OAuthInfo dojo/_base/kernel dojo/Deferred".split(" "),
function(f,B,l,e,c,u,t,d,q,m){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importStar(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);return function(){function a(){}a.getPortalUrl=function(){var h,n=e.default.restBaseUrl.substring(0,e.default.restBaseUrl.indexOf("/sharing/rest")).replace("http://","https://");if(null===(h=e.default.self)||void 0===h?0:h.portalHostname)n="https://".concat(e.default.self.portalHostname);return n};a.setupOAuthInfo=
function(h){var n={appId:a.getClientId(),portalUrl:a.getPortalUrl(),locale:q.default.locale,popup:!1};h&&(n.forceLogin=h);h=new d.default(n);a.esriId.registerOAuthInfos([h]);a.esriId.useSignInPage=!1};a.checkSignInStatus=function(){var h=new m.default;a.setupOAuthInfo(!1);var n="".concat(a.getPortalUrl(),"/sharing");a.esriId.checkSignInStatus(n).then(function(r){r&&(e.default.userInfo=l.__assign(l.__assign({},e.default.userInfo||{}),{username:r.userId,token:r.token,credential:r}));h.resolve(r)},function(){h.resolve(null)});
return h};a.getCredential=function(h,n){var r=new m.default;a.setupOAuthInfo(h);h="".concat(a.getPortalUrl(),"/sharing");a.esriId.getCredential(h,n).then(function(k){r.resolve(k)},function(){r.resolve(null)});return r};a.isValidReturnUrl=function(h,n){return h?this.isValidPortalReturnUrl(n):this.isValidOnlineReturnUrl(n)};a.isValidOnlineReturnUrl=function(h){var n=decodeURI(h),r=a.getHostName(window.location.href);h=this.getHostName(n);var k=0===n.indexOf("http://")||0===n.indexOf("https://"),g=k&&
h?h.lastIndexOf(".arcgis.com"):-1,b=k&&h?h.lastIndexOf(".esri.com"):-1,w=k&&h?h.lastIndexOf(r):-1;n=-1<n.indexOf("/sharing/proxy");g=-1<g&&g+11-1===h.length-1;b=-1<b&&b+9-1===h.length-1;r=-1<w&&w+r.length-1===h.length-1;return k&&h&&(g||b||r)&&!n};a.isValidPortalReturnUrl=function(h){h=decodeURI(h);var n=a.getDomainName(window.location.hostname),r=a.getDomainName(this.getHostName(h));return(0===h.indexOf("http://")||0===h.indexOf("https://"))&&r&&r===n};a.getHostName=function(h){h=h.match(/:\/\/(.[^/:]+)/i);
return null!==h&&1<h.length&&"string"===typeof h[1]&&0<h[1].length?h[1]:null};a.getDomainName=function(h){return h.substring(h.lastIndexOf(".",h.lastIndexOf(".")-1)+1)};a.getClientId=function(){try{return c.default.getLocalStorageItem(a.clientIdStorageKey)||c.default.getSessionStorageItem(a.clientIdStorageKey)||a.clientIds.ArcGISOnline}catch(h){return a.clientIds.ArcGISOnline}};a.getStoredClientId=function(){return c.default.getLocalStorageItem(a.clientIdStorageKey)||c.default.getSessionStorageItem(a.clientIdStorageKey)};
a.removeStoredCredential=function(){c.default.removeLocalStorageItem(a.credentialStorageKey);c.default.removeSessionStorageItem(a.credentialStorageKey)};a.checkForOrgUserOnOnlineBaseHostAndRedirect=function(h){var n=e.default.isDebug,r=h.isPortal,k=h.user,g=h.urlKey,b=h.customBaseUrl;k=null===k||void 0===k?void 0:k.orgId;h=window.location.host===h.portalHostname;var w=!!g,x=a.getClientId()===a.clientIds.ArcGISOnline;!n&&!r&&k&&h&&w&&x&&(window.location.href=window.location.href.replace(window.location.host,
"".concat(g,".").concat(b)))};a.getFreshToken=function(){return l.__awaiter(this,void 0,void 0,function(){var h;return l.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,t.default._getPlatformSelf(a.getPortalUrl(),a.getClientId())];case 1:return h=n.sent(),[2,null===h||void 0===h?void 0:h.token];case 2:return n.sent(),[3,3];case 3:return[2]}})})};a.authorizeWithoutForcedLogin=function(h,n,r){var k=a.getClientId();h={portalUrl:a.getPortalUrl(),returnUrl:h,useLandingPage:!1,
initialAdmin:!0,clientId:k};r=r||e.default.baseUrl;k={client_id:k,display:"default",response_type:"token",state:JSON.stringify(h),expiration:e.default.expiration||20160,locale:document.documentElement.lang,redirect_uri:"".concat(r.replace("http:","https:"),"accountswitcher-callback.html"),force_login:!1,hideCancel:!0,showSignupOption:!1,canHandleCrossOrgSignIn:!0,signuptype:"esri",redirectToUserOrgUrl:!0};n=n?"".concat(n,"/sharing/rest/"):e.default.restBaseUrl;n="".concat(n.replace(/^http:/i,"https:"),
"oauth2/authorize");n="".concat(n,"?").concat(u.objectToQuery(k));document.location.replace(n)};a.esriId=t.default;a.clientIds={ArcGISOnline:"arcgisonline",ArcGISNotebooks:"arcgisnotebooks",GeoanalyticsEngine:"geoanalyticsengine",IndoorsOnline:"indoorsonline"};a.clientIdStorageKey="portalAppClientId";a.credentialStorageKey="esriJSAPIOAuth";return a}()})},"dojox/widget/AutoRotator":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/on dojo/mouse dojox/widget/Rotator".split(" "),
function(f,B,l,e,c,u){return f("dojox.widget.AutoRotator",u,{suspendOnHover:!1,duration:4E3,autoStart:!0,pauseOnManualChange:!1,cycles:-1,random:!1,reverse:!1,constructor:function(){var t=this;t.cycles-0==t.cycles&&0<t.cycles?t.cycles++:t.cycles=t.cycles?-1:0;t._signals=[e(t._domNode,c.enter,function(){if(t.suspendOnHover&&!t.anim&&!t.wfe){var d=t._endTime,q=t._now();t._suspended=!0;t._resetTimer();t._resumeDuration=d>q?d-q:.01}}),e(t._domNode,c.leave,function(){t.suspendOnHover&&!t.anim&&(t._suspended=
!1,t.playing&&!t.wfe&&t.play(!0))})];t.autoStart&&1<t.panes.length?t.play():t.pause()},destroy:function(){B.forEach(this._signals,function(t){t.remove()});delete this._signals;dojo.forEach(this._connects,dojo.disconnect);this.inherited(arguments)},play:function(t,d){this.playing=!0;this._resetTimer();!0!==t&&0<this.cycles&&this.cycles--;0==this.cycles?this.pause():this._suspended||(this.onUpdate("play"),d?this._cycle():(t=(this._resumeDuration||0)-0,t=(0<t?t:this.panes[this.idx].duration||this.duration)-
0,this._resumeDuration=0,this._endTime=this._now()+t,this._timer=setTimeout(l.hitch(this,"_cycle",!1),t)))},pause:function(){this.playing=this._suspended=!1;this.cycles=-1;this._resetTimer();this.onUpdate("pause")},_now:function(){return(new Date).getTime()},_resetTimer:function(){clearTimeout(this._timer)},_cycle:function(t){var d=this;t=d.idx;if(d.random){do var q=Math.floor(Math.random()*d.panes.length+1);while(q==t)}else q=t+(d.reverse?-1:1);(t=d.go(q))&&t.addCallback(function(m){d.onUpdate("cycle");
d.playing&&d.play(!1,m)})},onManualChange:function(t){this.cycles=-1;"play"!=t&&(this._resetTimer(),this.pauseOnManualChange&&this.pause());this.playing&&this.play()}})})},"dojox/widget/Rotator":function(){define("dojo/aspect dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/fx dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/topic dojo/on dojo/parser dojo/query dojo/fx/easing dojo/NodeList-dom".split(" "),function(f,B,l,e,c,u,t,d,q,
m,a,h,n,r,k){B=B("dojox.widget.Rotator",null,{transition:"dojox.widget.rotator.swap",transitionParams:"duration:500",panes:null,constructor:function(g,b){e.mixin(this,g);var w=this;g=w.transition;var x=w._transitions={};w._idMap={};var z=w.transitionParams=eval("({ "+w.transitionParams+" })");b=w._domNode=t.byId(b);w._domNodeContentBox=m.getContentBox(b);w.id=b.id||(new Date).getTime();"static"==a.get(b,"position")&&a.set(b,"position","relative");x[g]=e.getObject(g);x[g]||(this._transitionWarn(g,
"dojox.widget.rotator.swap"),x[w.transition="dojox.widget.rotator.swap"]=e.getObject("dojox.widget.rotator.swap"));z.duration||(z.duration=500);c.forEach(w.panes,function(D){q.create("div",D,b)});w.panes=[];k("\x3e *",b).forEach(function(D,E){w._initializePane(D,E)});w._controlSub=h.subscribe(w.id+"/rotator/control",e.hitch(w,this.control))},insert:function(g,b){var w=this.panes;null==b&&(b=w.length);b<w.length?(w=w[b],q.place(g,w.node,"before")):q.place(g,this._domNode,"last");this._initializePane(g,
b)},remove:function(g){function b(E){var C=x.splice(E,1)[0];C&&(C.id&&(w._idMap[C.id]=void 0),w._domNode.removeChild(C.node));w.idx>E&&w.idx--}var w=this,x=this.panes;if("number"===typeof g)var z=g;else{for(var D=0;D<x.length;D++)if(x[D].node===g){z=D;break}if(null==z)return}if(z===this.idx&&(g=this.go(this.idx-1)))return g.then(function(){b(z)});b(z)},destroy:function(){c.forEach([this._controlSub,this.wfe],function(g){g&&g.remove()});q.destroy(this._domNode);this.panes=[]},next:function(){return this.go(this.idx+
1)},prev:function(){return this.go(this.idx-1)},go:function(g){var b=this,w=b.idx,x=b.panes,z=x.length,D=b._idMap[g];b._resetWaitForEvent();g=null!=D?D:g||0;g=g<z?0>g?z-1:g:0;if(g==w||b.anim)return null;var E=x[w],C=x[g];a.set(E.node,"zIndex",2);a.set(C.node,"zIndex",1);var y={current:E,next:C,rotator:b};if(w=b.anim=b._transitions[C.trans](e.mixin({rotatorBox:b._domNodeContentBox},y,C.params))){var v=new l,A=C.waitForEvent,G=f.after(w,"onEnd",function(){a.set(E.node,{display:"none",left:0,opacity:1,
top:0,zIndex:0});G.remove();b.anim=null;b.idx=g;if(E.onAfterOut)E.onAfterOut(y);if(C.onAfterIn)C.onAfterIn(y);b.onUpdate("onAfterTransition");A||(b._resetWaitForEvent(),v.callback())},!0);b.wfe=A?h.subscribe(A,function(){b._resetWaitForEvent();v.callback(!0)}):null;b.onUpdate("onBeforeTransition");if(E.onBeforeOut)E.onBeforeOut(y);if(C.onBeforeIn)C.onBeforeIn(y);w.play();return v}},onUpdate:function(g,b){h.publish(this.id+"/rotator/update",g,this,b||{})},_initializePane:function(g,b){var w={node:g,
idx:b,params:e.mixin({},this.transitionParams,eval("({ "+(d.get(g,"transitionParams")||"")+" })"))},x=w.trans=d.get(g,"transition")||this.transition,z=this._transitions,D=this.panes,E={left:0,top:0,position:"absolute",display:"none"};c.forEach(["id","title","duration","waitForEvent"],function(C){w[C]=d.get(g,C)});w.id&&(this._idMap[w.id]=b);z[x]||(z[x]=e.getObject(x))||this._transitionWarn(x,w.trans=this.transition);if(null==this.idx||d.get(g,"selected"))null!=this.idx&&a.set(D[this.idx].node,"display",
"none"),this.idx=b,E.display="";a.set(g,E);k("\x3e script[type^\x3d'dojo/method']",g).orphan().forEach(function(C){var y=d.get(C,"event");y&&(w[y]=r._functionFromScript(C))});D.splice(b,0,w)},_resetWaitForEvent:function(){this.wfe&&(this.wfe.remove(),delete this.wfe)},control:function(g){var b=e._toArray(arguments),w=this;b.shift();w._resetWaitForEvent();w[g]&&((b=w[g].apply(w,b))&&b.addCallback(function(){w.onUpdate(g)}),w.onManualChange(g))},resize:function(g,b){var w=this._domNodeContentBox={w:g,
h:b};m.setContentSize(this._domNode,w);c.forEach(this.panes,function(x){m.setContentSize(x.node,w)})},onManualChange:function(){},_transitionWarn:function(g,b){}});e.setObject("dojox.widget.rotator.swap",function(g){return new u.Animation({play:function(){a.set(g.current.node,"display","none");a.set(g.next.node,"display","");this._fire("onEnd")}})});return B})},"dojo/fx/easing":function(){define(["../_base/lang"],function(f){var B={linear:function(l){return l},quadIn:function(l){return Math.pow(l,
2)},quadOut:function(l){return l*(l-2)*-1},quadInOut:function(l){l*=2;return 1>l?Math.pow(l,2)/2:-1*(--l*(l-2)-1)/2},cubicIn:function(l){return Math.pow(l,3)},cubicOut:function(l){return Math.pow(l-1,3)+1},cubicInOut:function(l){l*=2;return 1>l?Math.pow(l,3)/2:(Math.pow(l-2,3)+2)/2},quartIn:function(l){return Math.pow(l,4)},quartOut:function(l){return-1*(Math.pow(l-1,4)-1)},quartInOut:function(l){l*=2;return 1>l?Math.pow(l,4)/2:-.5*(Math.pow(l-2,4)-2)},quintIn:function(l){return Math.pow(l,5)},quintOut:function(l){return Math.pow(l-
1,5)+1},quintInOut:function(l){l*=2;return 1>l?Math.pow(l,5)/2:(Math.pow(l-2,5)+2)/2},sineIn:function(l){return-1*Math.cos(Math.PI/2*l)+1},sineOut:function(l){return Math.sin(Math.PI/2*l)},sineInOut:function(l){return-1*(Math.cos(Math.PI*l)-1)/2},expoIn:function(l){return 0==l?0:Math.pow(2,10*(l-1))},expoOut:function(l){return 1==l?1:-1*Math.pow(2,-10*l)+1},expoInOut:function(l){if(0==l)return 0;if(1==l)return 1;l*=2;if(1>l)return Math.pow(2,10*(l-1))/2;--l;return(-1*Math.pow(2,-10*l)+2)/2},circIn:function(l){return-1*
(Math.sqrt(1-Math.pow(l,2))-1)},circOut:function(l){return Math.sqrt(1-Math.pow(l-1,2))},circInOut:function(l){l*=2;return 1>l?-.5*(Math.sqrt(1-Math.pow(l,2))-1):.5*(Math.sqrt(1-Math.pow(l-2,2))+1)},backIn:function(l){return Math.pow(l,2)*(2.70158*l-1.70158)},backOut:function(l){--l;return Math.pow(l,2)*(2.70158*l+1.70158)+1},backInOut:function(l){l*=2;if(1>l)return Math.pow(l,2)*(3.5949095*l-2.5949095)/2;l-=2;return(Math.pow(l,2)*(3.5949095*l+2.5949095)+2)/2},elasticIn:function(l){if(0==l||1==l)return l;
--l;return-1*Math.pow(2,10*l)*Math.sin(2*(l-.075)*Math.PI/.3)},elasticOut:function(l){return 0==l||1==l?l:Math.pow(2,-10*l)*Math.sin(2*(l-.075)*Math.PI/.3)+1},elasticInOut:function(l){if(0==l)return 0;l*=2;if(2==l)return 1;var e=.3*1.5,c=e/4;if(1>l)return--l,-.5*Math.pow(2,10*l)*Math.sin(2*(l-c)*Math.PI/e);--l;return.5*Math.pow(2,-10*l)*Math.sin(2*(l-c)*Math.PI/e)+1},bounceIn:function(l){return 1-B.bounceOut(1-l)},bounceOut:function(l){return l=l<1/2.75?7.5625*Math.pow(l,2):l<2/2.75?7.5625*Math.pow(l-
1.5/2.75,2)+.75:l<2.5/2.75?7.5625*Math.pow(l-2.25/2.75,2)+.9375:7.5625*Math.pow(l-2.625/2.75,2)+.984375},bounceInOut:function(l){return.5>l?B.bounceIn(2*l)/2:B.bounceOut(2*l-1)/2+.5}};f.setObject("dojo.fx.easing",B);return B})},"dojox/widget/rotator/Controller":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/event dojo/_base/array dojo/_base/connect dojo/query".split(" "),function(f,B,l,e,c,u,t){return f("dojox.widget.rotator.Controller",null,{rotator:null,commands:"prev,play/pause,info,next",
constructor:function(d,q){B.mixin(this,d);var m=this.rotator;if(m){for(;q.firstChild;)q.removeChild(q.firstChild);var a=this._domNode=l.create("ul",null,q),h=function(n,r,k){l.create("li",{className:r,innerHTML:'\x3ca href\x3d"#"\x3e\x3cspan\x3e'+n+"\x3c/span\x3e\x3c/a\x3e",onclick:function(g){e.stop(g);m&&m.control.apply(m,k)}},a)};c.forEach(this.commands.split(","),function(n,r){switch(n){case "prev":h("Prev","dojoxRotatorPrev dojoxRotatorIcon",["prev"]);break;case "play/pause":h("Play","dojoxRotatorPlay dojoxRotatorIcon",
["play"]);h("Pause","dojoxRotatorPause dojoxRotatorIcon",["pause"]);break;case "info":this._info=l.create("li",{className:"dojoxRotatorInfo",innerHTML:this._buildInfo(m)},a);break;case "next":h("Next","dojoxRotatorNext dojoxRotatorIcon",["next"]);break;case "#":case "titles":for(r=0;r<m.panes.length;r++)h("#"==n?r+1:m.panes[r].title||"Tab "+(r+1),("#"==n?"dojoxRotatorNumber":"dojoxRotatorTab")+" "+(r==m.idx?"dojoxRotatorSelected":"")+" dojoxRotatorPane"+r,["go",r])}},this);t("li:first-child",a).addClass("dojoxRotatorFirst");
t("li:last-child",a).addClass("dojoxRotatorLast");this._togglePlay();this._con=u.connect(m,"onUpdate",this,"_onUpdate")}},destroy:function(){u.disconnect(this._con);l.destroy(this._domNode)},_togglePlay:function(d){d=this.rotator.playing;t(".dojoxRotatorPlay",this._domNode).style("display",d?"none":"");t(".dojoxRotatorPause",this._domNode).style("display",d?"":"none")},_buildInfo:function(d){return"\x3cspan\x3e"+(d.idx+1)+" / "+d.panes.length+"\x3c/span\x3e"},_onUpdate:function(d){var q=this.rotator;
switch(d){case "play":case "pause":this._togglePlay();break;case "onAfterTransition":this._info&&(this._info.innerHTML=this._buildInfo(q)),d=function(m){q.idx<m.length&&l.addClass(m[q.idx],"dojoxRotatorSelected")},d(t(".dojoxRotatorNumber",this._domNode).removeClass("dojoxRotatorSelected")),d(t(".dojoxRotatorTab",this._domNode).removeClass("dojoxRotatorSelected"))}}})})},"arcgisonline/sharing/dijit/SiteHeader":function(){define("require exports tslib ../../agoNav ../../esriGeowConfig ../../pages/utils/signin ../../pages/utils/storage ../util ../geow/Account ../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dojo/Deferred dojo/_base/url dojo/_base/kernel dojo/sniff dojo/topic esri/config esri/lang dojo/i18n!../../nls/arcgisonline dojo/text!./templates/SiteHeaderSimple.html ../../pages/utils/queryHandler".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);n=l.__importDefault(n);r=l.__importDefault(r);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);w=l.__importDefault(w);x=l.__importDefault(x);z=l.__importDefault(z);D=l.__importDefault(D);E=l.__importStar(E);return function(){function C(y,
v){this.declaredClass="arcgisonline.sharing.dijit.SiteHeader";this.templateString=D.default;this.i18n=l.__assign(l.__assign({},z.default.common),z.default.siteHeader)}C.prototype.postMixInProperties=function(){this.inherited(arguments);this.webLabel=this.i18n.webOnly;this.webDescription=this.i18n.webDesc;this.desktopLabel=this.i18n.allContent;this.desktopDescription=this.i18n.allDesc;this.relativePath=c.default.baseUrl||"./"};C.prototype.postCreate=function(){var y=window.location.pathname.toLowerCase();
this.isSignInPage=-1!==y.indexOf(c.default.signin);this.isSignUpPage=-1!==y.indexOf(c.default.signup);this.isJoinPage=-1!==y.indexOf(c.default.join);this.isSetupPage=-1!==y.indexOf(c.default.setup);this.isIEPage=-1!==y.indexOf("ie6.html");this.isTroubleshootPage=-1!==y.indexOf("troubleshoot.html");7>(0,g.default)("ie")&&!this.isIEPage&&(window.location.href="ie6.html");if(y=document.getElementById("page-border"))y.onclick=function(){}};C.prototype.startup=function(){this.inherited(arguments);w.default.defaults.io.corsEnabledServers.push("http://"+
location.host);w.default.defaults.io.corsEnabledServers.push("https://"+location.host);w.default.defaults.io.proxyUrl=c.default.proxyServer;return this._fetchSelf()};C.prototype._generateGlobalNav=function(y){this._agoNavIsLoaded||(this.agoNav=new e.default,this.agoNav.init({config:c.default.self,legacy:this.legacy,relativePath:this.relativePath}),this._agoNavIsLoaded=!0)};C.prototype._logCookieChange=function(y){var v=this.telemetry;y&&(null===v||void 0===v?0:v.logEvent)&&v.logEvent({category:"cookie",
label:"Organization changed",details:"Yes"})};C.prototype._fetchSelf=function(){var y=this,v=new n.default;q.default.getSelf(function(A){y._finishStartup(A);v.resolve(A);b.default.publish("OnFetchSelf",A)},function(A){y._finishStartup();throw A;});return v};C.prototype._finishStartup=function(y){var v;if(y&&!y.code&&!y.message){var A=void 0,G=void 0;y.httpsPort&&(c.default.httpsPort=y.httpsPort,G=w.default.defaults.io.corsEnabledServers.pop());y.httpPort&&(c.default.httpPort=y.httpPort,A=w.default.defaults.io.corsEnabledServers.pop());
A&&w.default.defaults.io.corsEnabledServers.push(d.default.getHttpUrl("http://".concat(location.host)).replace(/:80$/,""));G&&w.default.defaults.io.corsEnabledServers.push(d.default.getSecureUrl("http://".concat(location.host)).replace(/:443$/,""));(y.authorizedCrossOriginDomains||[]).forEach(function(M){x.default.isDefined(M)&&0<M.length&&w.default.defaults.io.corsEnabledServers.push({host:M,withCredentials:!0})});u.default.checkForOrgUserOnOnlineBaseHostAndRedirect(y);this._generateGlobalNav({user:y.user});
this.isLoggedIn=d.default.isLoggedIn();y.isPortal&&d.default._cookies&&-1===d.default._cookies.arcgis_auth&&delete d.default._cookies.arcgis_auth;G=void 0;A=(null===(v=y.user)||void 0===v?void 0:v.culture)||y.culture||k.default.locale;v=d.default.getUser();G=E.queryToObject(window.location.search.substring(1));var F=-1<["hi"].indexOf(A);if(y.culture&&!v)y.culture=y.culture.toLowerCase(),this.updateLocaleCookie(y.culture,y.isPortal,y.allSSL),-1!==y.culture.indexOf("ar")?c.default.isRightToLeft=!0:
c.default.isRightToLeft=!1,k.default.locale.toLowerCase()!==y.culture.toLowerCase()&&window.location.reload();else if(!y.culture&&!v)this.hasLocaleCookie()&&(this.removeLocaleCookie(y.isPortal,y.allSSL),window.location.reload());else if(v&&A&&k.default.locale!==A.toLowerCase()&&!F&&!G.locale&&v.username&&v.username===y.user.username){var H=d.default.getCookie("esri_auth");9>(0,g.default)("ie")&&y.isWebTierAuth&&(G=new Date,H.expires=new Date(G.setSeconds(G.getSeconds()+Number(7200))));!v.culture||
v.culture&&v.culture!==A.toLowerCase()?(v.culture=A.toLowerCase(),this.updateLocaleCookie(v.culture.toLowerCase(),y.isPortal,y.allSSL)):v.culture&&v.culture===A.toLowerCase()&&k.default.locale!==A.toLowerCase()&&this.updateLocaleCookie(A.toLowerCase(),y.isPortal,y.allSSL);window.location.reload()}if(y.isWebTierAuth)if(v&&(v.username=v.username||v.email),(null===v||void 0===v?0:v.culture)&&v.culture.toLowerCase()!==A.toLowerCase()&&!F){var L=d.default.getCookie("esri_auth")||{};9>(0,g.default)("ie")&&
(G=new Date,L.expires=new Date(G.setSeconds(G.getSeconds()+Number(7200))));if(!v.culture||v.culture&&v.culture.toLowerCase()!==(null===A||void 0===A?void 0:A.toLowerCase()))v.culture=A.toLowerCase(),L.culture=v.culture,y.allSSL&&(L.allSSL=!0,L.secure=!0),v=l.__assign(l.__assign({},v),L);window.location.reload()}else(null===(L=null===v||void 0===v?void 0:v.culture)||void 0===L?void 0:L.toLowerCase())!==A.toLowerCase()||k.default.locale.toLowerCase()===A.toLowerCase()||F||window.location.reload();y.allSSL&&
(this.allSSL=c.default.allSSL=y.allSSL);x.default.isDefined(c.default.allSSL)&&c.default.allSSL&&"http:"===location.protocol&&(window.location.href=d.default.getSecureUrl(location.href));y.helpBase&&(c.default.help=y.helpBase,c.default.helpBase=y.helpBase,L=c.default.self&&c.default.self.helpBase||"support.html",d.default.isPortal()&&(L="".concat(location.protocol,"//").concat(location.host).concat(y.helpBase),L=this.allSSL||d.default.usePortalSSL()?d.default.getSecureUrl(L):d.default.getHttpUrl(L)));
y.helpMap&&y.helpMap.m&&(c.default.helpMap=y.helpMap.m);y.portalHostname&&(c.default.portalHostname=y.portalHostname);y.urlKey&&(c.default.urlKey=y.urlKey);y.staticImagesUrl&&(c.default.staticImagesUrl=y.staticImagesUrl);L=!1===c.default.isMultiTenant;L||(A=window.location.host,A===y.portalHostname||-1===A.indexOf(y.customBaseUrl)||y.access||y.name||u.default.getClientId()===u.default.clientIds.GeoanalyticsEngine||(window.location.href=window.location.href.replace(A,y.portalHostname)),!v||"account_admin"!==
v.role&&"org_admin"!==v.role||!y.id||y.urlKey||this.isSetupPage||(window.location.href="".concat(c.default.baseUrl,"setup.html")));L?("private"!==(null===y||void 0===y?void 0:y.access)||this.isLoggedIn||this.isSignInPage||this.isTroubleshootPage||this.isJoinPage||this.isSignUpPage||(window.location.href="".concat(d.default.getSecureUrl()).concat(c.default.signin,"?returnUrl\x3d").concat(encodeURIComponent(window.location.href))),!y.isPortal||"singletenant"!==y.portalMode||"7080"!==location.port&&
"7443"!==location.port||d.default.checkForIAA().then(function(M){if(null===M||void 0===M?0:M.hasIAA)if(y.portalHostname.match(/:7080\//)&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")&&(window.location.href="".concat(d.default.getHttpUrl(c.default.baseUrl),"error.html?c\x3dWebAdaptorRequired")),!y.portalHostname.match(/:7080\//)&&80!==c.default.httpPort&&443!==c.default.httpsPort&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")){M=new r.default(location.href);
var Q=M.path.indexOf("/home/");Q=M.path.substring(Q+6);M=x.default.isDefined(M.query)?"?".concat(M.query):"";window.location.href="".concat(d.default.getHttpUrl("http://".concat(y.portalHostname))).concat("/home/").concat(Q).concat(M)}})):y.id||!y.urlKey||this.isLoggedIn||this.isSignInPage||this.isTroubleshootPage||this.isJoinPage||(window.location.href="".concat(c.default.baseUrl.replace("http:","https:")).concat(c.default.signin,"?returnUrl\x3d").concat(encodeURIComponent(window.location.href)))}};
C.prototype.hasLocaleCookie=function(){return!!t.default.getCookie("arcgisLocale")||!!t.default.getCookie("esri_locale")};C.prototype.removeLocaleCookie=function(y,v){t.default.setCookie("arcgisLocale",null,{expires:-1});t.default.setCookie("esri_locale",null,{path:"/",domain:y?window.location.hostname:".arcgis.com",secure:!y||v,expires:-1})};C.prototype.updateLocaleCookie=function(y,v,A){t.default.setCookie("arcgisLocale",y,{sameSite:"Strict"});t.default.setCookie("esri_locale",y,{path:"/",domain:v?
window.location.hostname:".arcgis.com",secure:!v||A,sameSite:"None"})};C.prototype.updateEsriAccessLinks=function(y){var v=this;c.default.self.user.userType=y;window.require(["arcgisonline/agoNav"],function(A){v.agoNav=A;A.updateHeaderComponent({config:c.default.self})})};return C=l.__decorate([(0,m.default)(a.default,h.default)],C)}()})},"arcgisonline/agoNav":function(){define("require exports tslib arcgis-components/wrappers/InfoBanner ./esriGeowConfig ./pages/components/ConfirmDialog ./pages/components/StatusBanner ./pages/portal/PortalItem ./pages/portal/PortalUser ./pages/portal/LicenseInfo ./pages/organization/widgets/GroupIcon ./pages/utils/a11y ./pages/utils/notifications ./pages/utils/icons ./pages/utils/notebook ./pages/utils/mapViewer ./pages/utils/storage ./pages/utils/organization ./pages/utils/dom ./sharing/geow/Account ./sharing/geow/Geow ./sharing/dijit/Webworker/_AppLauncher ./sharing/util dojo/promise/all dojo/debounce dojo/string dojo/topic dojo/query dojo/_base/kernel dojo/_base/lang dojo/Deferred dojo/on esri/arcgis/Portal esri/request esri/IdentityManager ./pages/utils/queryHandler esri-global-nav/esri-global-nav preact dojo/i18n!./nls/arcgisonline dojo/i18n!./nls/notebooks".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E,C,y,v,A,G,F,H,L,M,Q,S,I,P,J,U,Y,aa,la){Object.defineProperty(B,"__esModule",{value:!0});c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);n=l.__importDefault(n);r=l.__importDefault(r);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);w=l.__importDefault(w);x=l.__importDefault(x);z=l.__importDefault(z);
D=l.__importDefault(D);E=l.__importDefault(E);C=l.__importDefault(C);y=l.__importDefault(y);v=l.__importDefault(v);A=l.__importDefault(A);G=l.__importDefault(G);F=l.__importDefault(F);H=l.__importDefault(H);L=l.__importDefault(L);M=l.__importDefault(M);Q=l.__importDefault(Q);S=l.__importDefault(S);I=l.__importDefault(I);P=l.__importDefault(P);J=l.__importStar(J);aa=l.__importDefault(aa);la=l.__importDefault(la);f=function(){function T(){this.GlobalNavLink={label:void 0,href:void 0,data:void 0,active:void 0,
newContext:void 0,init:function(N,K){this.label=N;N=K.href;var W=K.data,da=K.active;K=K.openInNewTab;this.href=N?"function"===typeof N?N():N:"#";this.data=W||void 0;this.active=da||void 0;this.newContext=K||void 0;return this}}}T.prototype.init=function(N){var K=this;this.legacy=N.legacy;(0,y.default)({orgSettings:this.getOrgSettings(),userProperties:this.getUserProperties()}).then(function(W){K.orgSettings=W.orgSettings;K.userProperties=W.userProperties;K.setup(N)});G.default.subscribe("account-menu/close",
this.closeAccountMenu.bind(this));G.default.subscribe("portal-helpBase/update",this.updateHelpUrl.bind(this));G.default.subscribe("top-nav/update",this.updateMenu.bind(this));G.default.subscribe("mapviewer/user-update",this.updateUserMapViewerPreference.bind(this));G.default.subscribe("mapviewer/org-update",this.updateOrgMapViewerPreference.bind(this))};T.prototype.setup=function(N){var K=this,W,da,fa,ha=this.orgSettings;if(ha&&ha.anonymousAccessNotice&&ha.anonymousAccessNotice.enabled&&!b.default.getCookie("ago_conditions_accepted"))return window.location.href=
"".concat(c.default.baseUrl,"pages/Account/accept_conditions.html#client_id\x3darcgisonline\x26redirect_url\x3d").concat(window.location.href);(null===(W=null===ha||void 0===ha?void 0:ha.informationalBanner)||void 0===W?0:W.enabled)&&this.createClassificationBanner(ha.informationalBanner);W=36E5>=Date.now()-N.config.created;!N.config.isPortal&&0>=(null===(da=N.config.subscriptionInfo)||void 0===da?void 0:da.availableCredits)&&!W&&"suspended"!==N.config.subscriptionInfo.state&&"expired"!==N.config.subscriptionInfo.state&&
("geoanalyticsengine"===this.getAppClientId()?this.createNoCoreHoursBanner():this.createRestrictedStatusBanner(N));this.relativePath=N.relativePath||"./";c.default.self=N.config;this.customNavStructure=N.customNavStructure;this.isOrgUser=null===(fa=c.default.userInfo)||void 0===fa?void 0:fa.orgId;this.userIsSignedIn=!(!c.default.userInfo||!c.default.userInfo.username&&!c.default.userInfo.email);this.defaultNavStructure={header:{theme:"web",brand:{label:"ArcGIS Online",href:"../features/features.html",
brandText:"ArcGIS"},menus:[[{label:"Features",href:"../features/features.html"},{label:"Plans",href:"../features/plans/pricing.html"},{label:"Map",href:"".concat(this.relativePath,"webmap/viewer.html?useExisting\x3d1")},{label:"Scene",href:"webscene/viewer.html"},{label:"Help",href:"http://doc.arcgis.com/en/arcgis-online/"}]],search:{label:aa.default.common.search,hide:"search.html"===window.location.pathname.split("/")[2],inline:!0,dialog:{prefix:"esri-header-search-dialog",action:"".concat(c.default.baseUrl,
"search.html"),label:"ArcGIS Online",submitLabel:aa.default.common.search,cancelLabel:aa.default.common.cancel,queryLabel:aa.default.siteHeader.searchAgo}},account:{label:aa.default.siteHeader.yourProfile,controls:{signin:aa.default.siteHeader.signIn,signout:aa.default.siteHeader.signOut,switch:aa.default.siteHeader.switchAccounts},menus:[{label:"profile \x26 settings",href:"".concat(this.relativePath,"user.html")},{label:"my esri",href:"#",data:{agoMethod:"goMyesri"}},{label:"training",href:"#",
data:{agoMethod:"goTraining"}},{label:"community \x26 forums",href:"#",data:{agoMethod:"goEsriCommunity"}},{label:"help",href:"http://doc.arcgis.com/en/arcgis-online/"}]}}};this.fixMobileBannerHeight();this._updateForNBEditor();this.createPortalInstance().then(function(){var ra=J.queryToObject(window.location.search.slice(1));(-1<window.location.pathname.indexOf("user.html")||-1<window.location.pathname.indexOf("userprofile.html"))&&(null===ra||void 0===ra?0:ra.hideNav)?(document.body.classList.add("is-embedded"),
ra=document.querySelector(".esri-header-barrier"),ra.parentNode.removeChild(ra)):(K.navLinks=K.buildNavLinks(K,c.default),K.createGlobalNav(c.default.userInfo,N.customNavStructure));(ra=window.esri)&&!ra.i18nBundle&&(ra.i18nBundle=aa.default)})};T.prototype._updateForNBEditor=function(){-1<window.location.pathname.indexOf("/notebook.html")&&(this.defaultNavStructure.header.collapseMenus=[!0,!1],this.defaultNavStructure.header.brand.brandText=la.default.notebookViewer.header.untitledNotebook,this.defaultNavStructure.header.brand.href=
"#")};T.prototype.createRestrictedStatusBanner=function(N){var K=this,W,da;if("Developer Subscription"!==(null===(W=N.config.subscriptionInfo)||void 0===W?void 0:W.type)){W=document.createElement("div");var fa="restricted"===N.config.subscriptionInfo.state,ha=aa.default.restrictedOrg;N=ha.title;var ra=ha.titleSoft,za=ha.you,Da=ha.allMembers,va=ha.someMembers,Ga=ha.learnMore;ha=ha.removeRestrictions;var ba="".concat(c.default.self.helpBase).concat(c.default.self.helpMap.m["120001308"]||""),ia="".concat(c.default.self.helpBase).concat(c.default.self.helpMap.m["120004138"]||
""),wa={};wa=(null===(da=c.default.userRole)||void 0===da?0:da.isAdmin())?{strings:{title:fa?N:ra,message:fa?Da:va,action:ha},onAction:function(Aa){K.openRemoveRestrictionsDialog(null===Aa||void 0===Aa?void 0:Aa.target,ba,fa)}}:{strings:{message:za,learnMore:Ga},youLink:ia};document.body.insertBefore(W,document.body.firstChild);(0,Y.render)((0,Y.h)(t.default,wa),W);this.hasStatusBanner=!0}};T.prototype.createNoCoreHoursBanner=function(){var N=document.createElement("div"),K=aa.default.myOrganization.geoAnalyticsEngine.noCoreHours;
K={strings:{title:K.title,message:K.message}};document.body.insertBefore(N,document.body.firstChild);(0,Y.render)((0,Y.h)(t.default,K),N);this.hasStatusBanner=!0};T.prototype.openRemoveRestrictionsDialog=function(N,K,W){var da=aa.default.restrictedOrg.removeRestrictions,fa=w.default.getBuyLink(c.default.self),ha='\x3ca href\x3d"'.concat(fa,'" target\x3d"_blank"\x3e'),ra='\x3ca href\x3d"'.concat("http://www.esri.com/about-esri/offices/",'"\x3e');K='\x3ca href\x3d"'.concat(K,'" target\x3d"_blank"\x3e').concat(aa.default.restrictedOrg.learnMoreLong,
' \x3ccalcite-icon icon\x3d"launch" scale\x3d"s"\x3e\x3c/calcite-icon\x3e\x3c/a\x3e');W='\x3cp class\x3d"leader-half esriItemLinks"\x3e'.concat(W?aa.default.restrictedOrg.noCredits:aa.default.restrictedOrg.titleSoft," ").concat(fa?A.default.substitute(aa.default.restrictedOrg.visitEsriStore,{startLink:ha,endLink:"\x3c/a\x3e"}):A.default.substitute(aa.default.restrictedOrg.contactCS,{startLink:ra,endLink:"\x3c/a\x3e"}),"\x3c/p\x3e").concat(W?'\x3cp class\x3d"esriItemLinks"\x3e'.concat(K,"\x3c/p\x3e"):
"");da={title:da,description:W,ok:aa.default.common.ok};var za=document.createElement("div");W=function(){x.default.removeComponent(za,document.body);null===N||void 0===N?void 0:N.focus()};document.body.appendChild(za);(0,Y.render)((0,Y.h)(u.default,{strings:da,onOk:W,onCancel:W,autoCloseOnOk:!0,hideCancel:!0,renderHtmlDescription:!0,width:"s"}),za)};T.prototype.closeAccountMenu=function(){this.updateComponent("header:menu:close",document.querySelector(".esri-header-wrap"))};T.prototype.updateUserMapViewerPreference=
function(N){var K,W;this.userProperties.mapViewer=N;N=null===(W=null===(K=c.default.self)||void 0===K?void 0:K.portalProperties)||void 0===W?void 0:W.topNav;this.updateMenu(N||{})};T.prototype.updateOrgMapViewerPreference=function(N){var K=c.default.self;K&&(K.portalProperties=K.portalProperties||{},K.portalProperties.mapViewer=N,this.updateMenu(K.portalProperties.topNav||{}))};T.prototype.getMapViewerLink=function(N){return N===g.default.MapViewerType.Classic?"".concat(this.relativePath,"webmap/viewer.html?useExisting\x3d1"):
c.default.newMapViewerUrl};T.prototype.updateHelpUrl=function(N){this.updateHeaderComponent({config:N})};T.prototype.updateMenu=function(N){var K=c.default.self.portalProperties||{};K.topNav=N;c.default.self.portalProperties=K;this.navLinks=this.buildNavLinks(this,c.default);N=this.getNavStructure(c.default.userInfo,this.customNavStructure);this.updateComponent("header:update:menus",document.querySelector("#esri-header-menus-desktop"),N.header.menus);this.updateComponent("header:update:menus",document.querySelector("#esri-header-menus-mobile"),
N.header.menus)};T.prototype.createClassificationBanner=function(N){var K=document.createElement("div"),W=document.createElement("div");document.body.insertBefore(K,document.body.childNodes[0]);document.body.appendChild(W);new e.InfoBanner({bannerConfig:N,topContainer:K,bottomContainer:W});this.hasInfoBanner=!0};T.prototype.getAppClientId=function(){try{return b.default.getLocalStorageItem("portalAppClientId")||b.default.getSessionStorageItem("portalAppClientId")||"arcgisonline"}catch(N){return"arcgisonline"}};
T.prototype.createPortalInstance=function(){var N=this,K=new M.default;(this.portal=c.default&&c.default.portal)?K.resolve(!0):z.default.getSelf(function(W){N.portal=new S.default.Portal({url:c.default.restBaseUrl.replace("http://","https://"),self:L.default.clone(W)});Q.default.once(N.portal,"load",function(){N.portal.portalUser=N.portal.getPortalUser();m.default.isOrgUser=N.isOrgUser;m.default.portal=N.portal;m.default.getLicenseInfo().then(function(){c.default.userInfo&&(c.default.userInfo=l.__assign(l.__assign({},
c.default.userInfo),m.default));N.portal.portalUser?P.default.checkAppAccess(N.portal.portalUrl,N.getAppClientId()).always(function(da){if(da=!(!da||!da.viewOnly))N.portal.user.cookie=N.getUserCookie(),N.portal.user.credential=N.portal.portalUser.credential,N.portal.user.portal=N.portal,N.portal.user.viewOnly=da,N.portal.portalUser=new q.default(N.portal.user);K.resolve(!0)}):K.resolve(!0)})})});return K};T.prototype.fixMobileBannerHeight=function(){var N;this.hasInfoBanner&&!this.hasStatusBanner||
this.hasStatusBanner&&!this.hasInfoBanner?N=56+document.body.childNodes[0].clientHeight:this.hasInfoBanner&&this.hasStatusBanner&&(N=56+document.body.childNodes[0].clientHeight+document.body.childNodes[1].clientHeight);N&&setTimeout(function(){var K=document.getElementById("esri-header-menus-content-mobile");K&&(K.style.height="calc(var(--esri-vh) - ".concat(N,"px)"))},1E3)};T.prototype.createGlobalNav=function(N,K){var W,da,fa,ha;K=this.getNavStructure(N,K);var ra=((null===(da=null===(W=c.default.self)||
void 0===W?void 0:W.portalProperties)||void 0===da?void 0:da.topNav)||{}).search;W=this.isOrgUser&&c.default.self&&c.default.userInfo.orgId===c.default.self.id;"members"!==ra||W||delete K.header.search;(0,U.createHeader)({targetElm:".esri-header-barrier",menuData:K});this.setupInlineSearch();this.userIsSignedIn?(this.setupAccountSwitcherLink(),this.setupSignOutLink(),this.setupNotifications(N),this.isOrgUser&&(c.default.self.isPortal||"active"===(null===(fa=c.default.self.subscriptionInfo)||void 0===
fa?void 0:fa.state)||"restricted"===(null===(ha=c.default.self.subscriptionInfo)||void 0===ha?void 0:ha.state))&&this.createAppSwitcher()):this.setupSignInLink();this.addLegacyClasses()};T.prototype.addLegacyClasses=function(){if(this.legacy){var N=window.location.pathname.toLowerCase();if(-1!==N.indexOf("index.html")||-1===N.indexOf(".html"))(0,F.default)(".siteHeader").addClass("top-nav"),(0,F.default)(".-desktop .esri-header-menus-link,.esri-header-brand-text,.esri-header-menus-toggle,.esri-header-notifications-control,.esri-header-inlineSearch-control,.esri-header-account-control,.esri-header-apps-control").addClass("top-nav-link"),
(0,F.default)(".top-nav-link.-is-active").removeClass("-is-active").addClass("is-active")}};T.prototype.getNavStructure=function(N,K){N=(this.userCookie=this.userIsSignedIn&&this.getUserCookie())?this.getSignedInNavStructure(N,this.userCookie):this.getSignedOutNavStructure();return L.default.mixin(c.default.self.isPortal?this.modifyStructureForPortal(N):N,K||{})};T.prototype.getSignedOutNavStructure=function(){var N=c.default.self.isPortal,K=this.showProductLinks()?["overview","pricing","map","scene",
"help"]:["home_link","gallery","map","scene","groups"].concat(N?["help"]:[]);this.defaultNavStructure.header.menus=[this.filterAndCreateLinks(K,aa.default.siteHeader)];this.defaultNavStructure.header.brand.href="".concat(this.relativePath).concat(N?"index.html":"../features/features.html");return this.defaultNavStructure};T.prototype.isGeode=function(){return"geoanalyticsengine"===this.getAppClientId()};T.prototype.getSignedInNavStructure=function(N,K){var W=this.isGeode();N={name:N.fullName,id:N.username,
group:"",image:this.getUserProfileImage(N.username,N.thumbnail,K.token)};K=W?[]:"myProfile mySettings myEsri training trialDownload esriCommunity arcgisBlog help".split(" ");var da=this.isPublicAccount()?"ArcGIS overview pricing map scene groups myContent".split(" "):"home_link gallery map scene notebook groups myContent myAccount".split(" ");this.defaultNavStructure.header.account.user=N;this.defaultNavStructure.header.menus=W?[[{active:!0,href:"".concat(this.relativePath,"geoanalyticsengine.html#subscription"),
label:aa.default.siteHeader.subscription},{href:"".concat(this.relativePath,"geoanalyticsengine.html#downloads"),label:aa.default.siteHeader.downloads}]]:[this.filterAndCreateLinks(da,aa.default.siteHeader)];this.defaultNavStructure.header.account.menus=this.filterAndCreateLinks(K,aa.default.siteHeader);this.defaultNavStructure.header.brand.href="".concat(this.relativePath).concat(c.default.self.isPortal?"index.html":"../features/features.html");this.userIsSignedIn&&(this.defaultNavStructure.header.notifications=
this._getDefaultNotifications());W&&delete this.defaultNavStructure.header.search;return this.defaultNavStructure};T.prototype.modifyStructureForPortal=function(N){N.header.search.dialog.queryLabel=aa.default.siteHeader.searchAgoEnterprise;return N};T.prototype.getFooterLinks=function(){var N=this,K,W,da,fa;this.i18n=l.__assign(l.__assign(l.__assign({},aa.default.siteFooter),aa.default.common),{helpLabel:aa.default.supportPage.helpLabel});var ha=c.default.footerLinks.reduce(function(ra,za){var Da=
za.title.indexOf("${");Da=-1<Da?N._evalString(za.title,Da):za.title;return"ArcGIS Marketplace"===za.title?c.default.self&&N.userIsSignedIn?ra.concat({label:Da,href:c.default.marketplaceUrl.replace("http://","https://")}):ra:"contactUs"===za.type?ra.concat({label:Da,href:N._constructContactUsUrl(za)}):"reportAbuse"===za.type?ra.concat({label:Da,href:N._constructReportAbuseUrl(za)}):za.url?ra.concat({label:Da,href:za.url}):ra},[]);(null===(fa=null===(da=null===(W=null===(K=c.default.self)||void 0===
K?void 0:K.portalProperties)||void 0===W?void 0:W.links)||void 0===da?void 0:da.contactUs)||void 0===fa?0:fa.visible)&&ha.push({label:this.i18n.customContactUs,href:c.default.self.portalProperties.links.contactUs.url});return ha};T.prototype.updateComponent=function(N,K,W){N=new CustomEvent(N,{detail:W});K.dispatchEvent(N)};T.prototype.updateAppSwitcherComponent=function(){var N,K=this.portal.isPortal&&!1===(null===(N=this.portal.portalProperties)||void 0===N?void 0:N.newMapViewerEnabled);this.updateComponent("header:update:appSwitcher",
document.querySelector(".esri-header-app-switcher"),{portal:this.portal,user:this.portal.portalUser,api:3,newMapViewerEnabled:c.default.newMapViewerEnabled&&!K,showInAppLauncher:c.default.showInAppLauncher,notebookServerEnabled:c.default.notebookServerEnabled&&(!this.portal.isPortal||this.portal.supportsHostedNotebooks),trackViewerEnabled:c.default.trackViewerEnabled})};T.prototype.updateAppLauncherComponent=function(N){this.updateComponent("header:update:apps",document.querySelector(".esri-header-apps"),
this._appsJson(N))};T.prototype.updateHeaderComponent=function(N){c.default.self=N.config;this.navLinks=this.buildNavLinks(this,c.default);N=this.getNavStructure(c.default.userInfo,N.customNavStructure);this.updateComponent("header:update:account",document.querySelector(".esri-header-client").lastChild,N.header.account)};T.prototype.updateNotificationsComponent=function(N){this.defaultNavStructure.header.notifications.messages=N;this.updateComponent("header:update:notifications",document.querySelector(".esri-header-notifications"),
this._getDefaultNotifications(N));0===N.length&&this.updateComponent("header:menu:close",document.querySelector(".esri-header-notifications"))};T.prototype.updateSearchComponent=function(N,K){this.updateComponent("header:search:update:suggestions",document.querySelector(".esri-header-wrap"),this._searchJson(N,K))};T.prototype.createAppLauncher=function(){var N=this,K;this.portal.token=(null===(K=this.userCookie.credential)||void 0===K?void 0:K.token)||this.userCookie.token;this.appLauncher=new E.default(this.portal,
this.userProperties);this.appLauncher.getApps({noStrings:!0}).then(function(W){if(W.primary.length||W.secondary.length)N.fixRelativeAppUrls(W.primary),N.fixRelativeAppUrls(W.secondary),N.updateAppLauncherComponent(W),document.querySelector(".esri-header-barrier").addEventListener("header:apps:reorder",function(da){N.appLauncher.setApps(JSON.stringify(da.detail.icons),!0)}),G.default.subscribe("appLauncher/app/updated",N._restartAppLauncherApp.bind(N)),G.default.subscribe("appLauncher/app/deleted",
N._restartAppLauncherApp.bind(N)),G.default.subscribe("appLauncher/restart",N._restartAppLauncherApp.bind(N,!0)),G.default.subscribe("appLauncher-license/refresh",N._refreshLicenseAndRestartAppLauncher.bind(N)),N.addLegacyClasses()})};T.prototype.createAppSwitcher=function(){G.default.subscribe("appLauncher/app/updated",this.updateAppSwitcherComponent.bind(this));G.default.subscribe("appLauncher/app/deleted",this.updateAppSwitcherComponent.bind(this));G.default.subscribe("appLauncher/restart",this.updateAppSwitcherComponent.bind(this,
!0));G.default.subscribe("appLauncher-license/refresh",this.updateAppSwitcherComponent.bind(this));this.updateAppSwitcherComponent();this.addLegacyClasses()};T.prototype.fixRelativeAppUrls=function(N){if(-1!==window.location.pathname.indexOf("/home/notebook/")){var K="".concat(window.location.protocol,"//").concat(window.location.host).concat(C.default.getHomeAppContext(),"/");(N||[]).forEach(function(W){W.url=(W.url||"").replace("../",K)})}};T.prototype._restartAppLauncherApp=function(N){var K=this;
this.appLauncher&&this.appLauncher.refreshApps(N).then(function(W){return K.updateAppLauncherComponent(W)})};T.prototype._refreshLicenseAndRestartAppLauncher=function(){var N=this;this.appLauncher&&(m.default.licenses={arcgiswebapps:{valid:!1,className:"web-apps-not-licensed"},arcgisinsights:{valid:!1,className:"insights-not-licensed"},hubforarcgis:{valid:!1},orthomaker:{valid:!1,className:"orthomaker-not-licensed"},opsdashboard:{valid:!1,className:"web-dashboard-not-licensed"},workforce:{valid:!1,
className:"workforce-not-licensed"},survey123:{valid:!1,className:"survey123-not-licensed"},arcgisurban:{valid:!1,className:"arcgisUrban-not-licensed"},analytics4iot:{valid:!1,isCapability:!0}},this.appLauncher.fetchAndSetupLicenseInfo().then(function(){return N.appLauncher.refreshApps(!0)}).then(function(K){return N.updateAppLauncherComponent(K)}))};T.prototype._appsJson=function(N){return l.__assign(l.__assign({},{label:aa.default.appSwitcher.appLauncher,disableDragDrop:!1,loading:!N,text:{title:aa.default.appSwitcher.appLauncher,
confirm:aa.default.appSwitcher.gotIt,dragAppsHere:aa.default.appSwitcher.dragAppsHere,intro:aa.default.appSwitcher.dragAndDropIntroText,removed:aa.default.appSwitcher.noLongerAvailable,removedMessage:aa.default.appSwitcher.removedApp,showMore:aa.default.appSwitcher.showMore}}),N)};T.prototype._getAppsLoadingJson=function(N){return{label:aa.default.appSwitcher.appLauncher,disableDragDrop:!1,loading:N}};T.prototype._searchJson=function(N,K){var W;return null!==(W=null===K||void 0===K?void 0:K.results)&&
void 0!==W&&W.length?{minIconWidth:"44",suggestions:[this._generateSuggestionsSection({searchTerm:N,category:"item",data:K.results})]}:{suggestions:[]}};T.prototype._disabledSearchJson=function(){return{minIconWidth:"44",disabled:!0,suggestions:[{hideHR:!0,links:[{text:aa.default.search.error.wildCardSearchError,secondary:null,href:null,htmlIcon:'\x3cspan class\x3d"esri-header-inlineSearch-suggestion-error-icon"\x3e'+r.default["exclamation-mark-circle"]["16"]+"\x3c/span\x3e"}]}]}};T.prototype._generateSuggestionsSection=
function(N){return{hideHR:!0,links:N.data.map(this._generateSuggestionLink.bind(this,N.category))}};T.prototype._generateSuggestionLink=function(N,K){var W={text:K.title,secondary:this._getSecondaryOwnerText(N,K),href:"".concat(this.relativePath).concat(N,".html?id\x3d").concat(K.id),iconSize:"group"===N?"28":"22"};N=K.icon||"group"!==N?{icon:K.icon}:{htmlIcon:this._getGroupIcon(K)};return l.__assign(l.__assign({},W),N)};T.prototype._getGroupIcon=function(N){return(new a.default({portal:this.portal,
group:N,scale:"m"})).domNode.outerHTML};T.prototype._getSecondaryOwnerText=function(N,K){var W=K.owner;return"item"===N?A.default.substitute(aa.default.siteHeader.itemTypeBy,{itemType:K.type,owner:W}):A.default.substitute(aa.default.siteHeader.groupOwner,{owner:W})};T.prototype._generateSearchLink=function(N){return this._constructSecureBaseUrl("search.html?start\x3d1\x26sortOrder\x3dtrue\x26".concat(N))};T.prototype._constructSearchQ=function(N,K){var W;return"".concat(N).concat(K&&(null===(W=c.default.userInfo)||
void 0===W?0:W.orgId)?" orgid:".concat(c.default.userInfo.orgId):"")};T.prototype._getSuggestFilters=function(){return"".concat(c.default.self.id?'accountid:"'.concat(c.default.self.id,'"'):"").concat(c.default.viewQueries.none||"")};T.prototype.fetchSuggestionResults=function(N){N=N.substring(0,409).replace(/(\/)/g,"\\/").replace(/(\?)/g,"\\?");return(0,I.default)({url:"".concat(c.default.restBaseUrl.replace("http://","https://"),"search/suggest"),content:{suggest:N,filters:this._getSuggestFilters(),
searchFields:"title",f:"json"},handleAs:"json",callbackParamName:"callback"})};T.prototype.fetchItemSearchResults=function(N){return(0,I.default)({url:"".concat(c.default.restBaseUrl.replace("http://","https://"),"search"),content:{q:this._constructSearchQ(N,!0),start:1,num:3,f:"json"},handleAs:"json",callbackParamName:"callback"})};T.prototype.fetchGroupSearchResults=function(N){return(0,I.default)({url:"".concat(c.default.restBaseUrl.replace("http://","https://"),"/community/groups"),content:{q:this._constructSearchQ(N,
!1),start:1,num:3,f:"json"},handleAs:"json",callbackParamName:"callback"})};T.prototype.mixinItemIcon=function(N){this.portal.portalUser&&!this.portal.portalUser.userRole&&(this.portal.portalUser.userRole=c.default.userRole);var K=new d.default(l.__assign(l.__assign({},N),{portal:this.portal}));return l.__assign(l.__assign({},N),{type:K.displayName,icon:"".concat(c.default.baseUrl).concat(K.svgIconUrl32)})};T.prototype.mixinGroupIcon=function(N){return l.__assign(l.__assign({},N),{icon:N.thumbnail?
this._constructRestUrlWithToken("community/groups/".concat(N.id,"/info/").concat(N.thumbnail)):null})};T.prototype._constructRestUrlWithToken=function(N){return"".concat(this.portal.portalUrl).concat(N).concat(this.userCookie?"?token\x3d".concat(this.userCookie.token):"")};T.prototype._constructSecureBaseUrl=function(N){return"".concat(c.default.baseUrl.replace("http://","https://")).concat(N)};T.prototype.buildNavLinks=function(N,K){var W,da,fa,ha,ra=!!c.default.self,za=window.location.pathname.toLowerCase(),
Da=ra&&(null===(W=c.default.self.portalProperties)||void 0===W?void 0:W.topNav)||{};W=Da.gallery;var va=Da.map,Ga=Da.scene,ba=Da.groups;ra=this.isOrgUser&&ra&&c.default.userInfo.orgId===c.default.self.id;var ia=c.default.notebookLandingEnabled?"notebookhome.html":"notebook.html",wa=g.default.determineMapViewerSetting(this.userProperties);Da=Da.notebook||"members";return{myProfile:{href:"".concat(this.relativePath,"user.html")},mySettings:{href:"".concat(this.relativePath,"user.html#settings")},pricing:{href:"".concat(this.relativePath,
"../features/plans/pricing.html")},overview:{href:"".concat(this.relativePath,"../features/features.html")},ArcGIS:{href:"".concat(this.relativePath).concat(N.isPublicAccount()?"index.html":"../features/features.html")},groups:{show:!ba||"all"===ba||"members"===ba&&ra,href:"".concat(this.relativePath,"groups.html"),active:-1<za.indexOf("groups.html")},myContent:{href:"".concat(this.relativePath,"content.html"),active:-1<za.indexOf("content.html")},map:{show:m.default.isLicensed("arcgisWebApps")&&
(!va||"all"===va||"members"===va&&ra||"mapCreators"===va&&ra&&(null===(da=c.default.userRole)||void 0===da?void 0:da.canCreateItem())),href:this.getMapViewerLink(wa)},help:{href:N._getHelpUrl.bind(N),openInNewTab:!0},gallery:{show:"noOne"!==W&&(!W||"all"===W||"members"===W&&ra)&&c.default.self.id,href:"".concat(this.relativePath,"gallery.html"),active:-1<za.indexOf("gallery.html")},home_link:{show:!N.isPublicAccount(),href:"".concat(this.relativePath,"index.html"),active:-1<za.indexOf("index.html")||
0>za.indexOf(".html")},scene:{show:K.sceneViewerEnabled&&m.default.isLicensed("arcgisWebApps")&&(!Ga||"all"===Ga||"members"===Ga&&ra||"sceneCreators"===Ga&&ra&&(null===(fa=c.default.userRole)||void 0===fa?void 0:fa.canCreateItem())),href:"".concat(this.relativePath,"webscene/viewer.html")},notebook:{show:k.default.notebookServerConfigured()&&("members"===Da&&ra||"notebookCreators"===Da&&(null===(ha=c.default.userRole)||void 0===ha?void 0:ha.canCreateNotebooks())),href:"".concat(this.relativePath,
"notebook/").concat(ia),openInNewTab:!c.default.notebookLandingEnabled,active:-1<za.indexOf("notebookhome.html")},myAccount:{show:N.orgPageRestrictionsDoNotApply(),href:"".concat(this.relativePath,"organization.html"),active:-1<za.indexOf("organization.html")},marketplace:{show:!N.isPublicAccount(),href:N._getMarketplaceUrl.bind(N)},features:{show:N.isPublicAccount()&&!c.default.self.isPortal,href:"".concat(this.relativePath,"../features/features.html")},esriCommunity:{show:N.showEsriLinks(),href:N._getEsriCommunityUrl.bind(N),
openInNewTab:!0},myEsri:{show:N.showEsriLinks(),href:N._getMyEsriUrl.bind(N),openInNewTab:!0},arcgisBlog:{show:N.showEsriLinks(),href:"https://www.esri.com/arcgis-blog/arcgis-online/",openInNewTab:!0},training:{show:N.showEsriLinks(),href:N._getEsriTrainingUrl.bind(N),openInNewTab:!0},trialDownload:{show:N.subscriptionIsTrial(),href:N._getTrialDownloadUrl.bind(N),openInNewTab:!0}}};T.prototype.filterAndCreateLinks=function(N,K){var W=this,da=[];N.forEach(function(fa){var ha=W.navLinks[fa];!ha||"show"in
ha&&!ha.show||da.push(W.createGlobalNavLink(K[fa]||fa,ha))},this);return da};T.prototype.createGlobalNavLink=function(N,K){return Object.create(this.GlobalNavLink).init(N,K)};T.prototype.getUserProfileImage=function(N,K,W){return K?"".concat(c.default.restBaseUrl.replace("http://","https://"),"community/users/").concat(N,"/info/").concat(K,"?token\x3d").concat(W):this.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg")};T.prototype.getUserCookie=function(){return c.default.userInfo||
null};T.prototype.getOrgSettings=function(){return C.default.request({url:"".concat(c.default.restBaseUrl,"portals/self/settings"),content:{f:"json"}})};T.prototype.getUserProperties=function(){var N,K=new M.default;(null===(N=c.default.userInfo)||void 0===N?0:N.username)?C.default.request({url:"".concat(c.default.restBaseUrl,"community/users/").concat(c.default.userInfo.username,"/properties"),content:{f:"json"}}).then(function(W){K.resolve(W.properties)},function(){K.resolve(null)}):K.resolve(null);
return K};T.prototype.setupSignInLink=function(){var N;if(this.hideSignInLink())return null===(N=document.querySelector(".esri-header-account-control--signin"))||void 0===N?void 0:N.classList.add("hide");(0,F.default)(".esri-header-account-control--signin").on("click",function(){var K="".concat(c.default.baseUrl,"signin.html?");-1<window.location.href.indexOf("item.html")?window.location.href="".concat(K,"useLandingPage\x3dfalse\x26returnUrl\x3d").concat(window.location.href):window.location.href=
"".concat(K,"useLandingPage\x3dtrue")})};T.prototype.setupSignOutAndAccountSwitcherLinks=function(){var N=this,K;c.default.showAccountSwitcher&&(null===(K=document.querySelector(".esri-header-account-signin-control.-switch"))||void 0===K?void 0:K.classList.add("hide"));(0,Q.default)(document.querySelector(".esri-header-account-control-logout"),"click",function(W){N._selectLogOut(W)});(0,Q.default)(document.querySelector(".esri-header-account-control.-switch"),"click",function(){N._openSwitchAccounts()})};
T.prototype.setupSignOutLink=function(){var N=this,K;if(null===(K=this.portal)||void 0===K?0:K.isWebTierAuth)return document.querySelector(".esri-header-account-signin-control.-logout").classList.add("hide");(0,Q.default)(document.querySelector(".esri-header-account-signin-control.-logout"),"click",function(W){N._selectLogOut(W)})};T.prototype.setupAccountSwitcherLink=function(){var N=this,K;if("showAccountSwitcher"in c.default&&!c.default.showAccountSwitcher)return null===(K=document.querySelector(".esri-header-account-signin-control.-switch"))||
void 0===K?void 0:K.classList.add("hide");(0,Q.default)(document.querySelector(".esri-header-account-signin-control.-switch"),"click",function(){N._openSwitchAccounts()})};T.prototype.setupInlineSearch=function(){var N=this;document.querySelector(".esri-header-barrier").addEventListener("header::search:typing",(0,v.default)(function(K){-1<K.detail.indexOf("*")?N.updateComponent("header:search:update:suggestions",document.querySelector(".esri-header-inlineSearch"),N._disabledSearchJson()):2<=K.detail.length&&
N.fetchSuggestionResults(K.detail).then(function(W){W.results=W.results.map(N.mixinItemIcon.bind(N));h.default.postToLiveRegion(A.default.substitute(1===W.results.length?aa.default.searchPage.contentSearchResultLabel:aa.default.searchPage.contentSearchResultsLabel,{resultcount:W.results.length,keyword:K.detail}));N.updateSearchComponent(K.detail,W)})},280))};T.prototype.setupNotifications=function(N){var K=this;n.default.fetchNotifications(N,this.portal).then(this.updateNotificationsComponent.bind(this));
document.addEventListener("header:click:notifications:dismiss",function(W){n.default.deleteNotifications(N,W.detail).then(function(da){var fa=da.filter(function(ha){return ha.success}).map(function(ha){return ha.notificationId});da=(K.defaultNavStructure.header.notifications.messages||[]).filter(function(ha){return 0>fa.indexOf(ha.id)});K.updateNotificationsComponent(da)})})};T.prototype._getDefaultNotifications=function(N){var K=aa.default.notifications;return{label:K.label,dismissAllLabel:K.dismissAllLabel,
dismissLabel:K.dismissLabel,emptyMessage:{image:{path:["M15.5 1A14.5 14.5 0 1 0 30 15.5 14.5 14.5 0 0 0 15.5 1zm0 28.1a13.6 13.6 0 1 1 13.6-13.6 13.615 13.615 0 0 1-13.6 13.6zM8.581 17.276l.637-.636 3.288 3.098 10.073-9.92.637.637-10.71 10.556z"],viewBox:"0 0 32 32"},text:K.noNotifications},messages:N||[]}};T.prototype._evalString=function(N,K){var W=N.indexOf("}",K),da=N.substring(K+2,W);return"".concat(N.substring(0,K)).concat(this[da]).concat(N.substring(W+1,N.length))};T.prototype._constructContactUsUrl=
function(N){var K=c.default.portalName||"ArcGIS.com",W=encodeURIComponent(window.location.href);return"mailto:".concat(N.email,"?subject\x3dA comment about ").concat(K,"\x26body\x3dI have the following comment about the ").concat(K," Web site. %0AReferring page: ").concat(W," %0A %0A(Please provide as much detail as possible. Note: Contact Us is not meant for obtaining technical support or general product information.)")};T.prototype._constructReportAbuseUrl=function(N){var K=encodeURIComponent(window.location.href);
return"mailto:".concat(N.email,"?subject\x3dConcerns about an item\x26body\x3dI have concerns about the following. %0AReferring page: ").concat(K," %0A %0A(Please describe your concerns. If you have concerns about a particular item, it's best to click the 'Report Abuse' link while viewing the item description. Doing so will include the URL to the specific item in this e-mail.)")};T.prototype._selectLogOut=function(N){N.preventDefault();c.default.self.isPortal?this._standardLogOut():this._agolLogOut()};
T.prototype._agolLogOut=function(){b.default.setCookie("esri_webmap","",{expires:-1,path:"/"});var N=c.default.isDebug?c.default.baseUrl:c.default.baseUrl.replace("http://","https://");N="".concat(N,"pages/Account/manage_accounts.html#");N+="client_id\x3d".concat(this.getAppClientId(),"\x26signout\x3dtrue");window.location.href=N};T.prototype._standardLogOut=function(){b.default.setCookie("esri_webmap","",{expires:-1,path:"/"});var N="".concat(C.default.getHttpUrl(),"index.html");"private"===c.default.self.access&&
(N="".concat(C.default.getSecureUrl()).concat(c.default.signin));"public"===c.default.self.access&&(N="".concat(c.default.self.allSSL||this.usePortalSSL()?C.default.getSecureUrl():C.default.getHttpUrl(),"index.html"));D.default.signout(N)};T.prototype._openSwitchAccounts=function(){var N="".concat(c.default.baseUrl,"pages/Account/manage_accounts.html#client_id\x3darcgisonline");window.open(N,"_blank").focus()};T.prototype.relativeToExplicitUrl=function(N){c.default.cdnServerUrl=H.default.baseUrl.substring(0,
H.default.baseUrl.indexOf("/js/"));return c.default.cdnServerUrl.lastIndexOf("/")===c.default.cdnServerUrl.length-1?"".concat(c.default.cdnServerUrl).concat(N):"".concat(c.default.cdnServerUrl,"/").concat(N)};T.prototype._getHelpUrl=function(){var N;return c.default.self.isPortal?this._getPortalHelpUrl():(null===(N=c.default.self)||void 0===N?void 0:N.helpBase)||"support.html"};T.prototype._getPortalHelpUrl=function(){if(-1<c.default.self.helpBase.indexOf("enterprise.arcgis.com"))return"".concat(c.default.self.helpBase,
"portal/");var N=c.default.self.helpBase;"ArcGISEnterpriseOnKubernetes"!==(c.default.self||{}).portalDeploymentType&&(N+="portal/");return c.default.self.allSSL||"https:"===window.location.protocol||this.usePortalSSL()||"7443"===window.location.port?"".concat(C.default.getSecureUrl("".concat(window.location.protocol,"//").concat(window.location.host))).concat(N):N};T.prototype._getEsriTrainingUrl=function(){return this.generateEsriLoginHandlerUrl("".concat(window.location.protocol,"//www.esri.com/training/arcgis-online-training"))};
T.prototype._getMyEsriUrl=function(){return this.generateEsriLoginHandlerUrl(c.default.myEsriLink)};T.prototype._getEsriCommunityUrl=function(){return this.generateEsriLoginHandlerUrl(c.default.esriCommunityLink)};T.prototype._getMarketplaceUrl=function(){var N=this.getDevEnviroment();return"".concat(window.location.protocol,"//marketplace").concat(N?"".concat(N,"ext"):"",".arcgis.com")};T.prototype._getTrialDownloadUrl=function(){var N,K,W={"pt-br":1,"pt-pt":1,"zh-cn":1,"zh-hk":1,"zh-tw":1},da=((null===
(N=c.default.userInfo)||void 0===N?void 0:N.culture)||(null===(K=c.default.self)||void 0===K?void 0:K.culture)||H.default.locale||"en").toLowerCase();N={nl:1}[da]?"en":da in W?da:da.split("-")[0].toLowerCase();return"".concat(c.default.learnArcGIS,"/").concat(N,"/trial")};T.prototype.generateEsriLoginHandlerUrl=function(N){var K=this.getDevEnviroment(),W="https://accounts".concat(K?"dev"===K?"-dev":"-stg":"",".esri.com/");K="\x26authBaseUrl\x3d".concat(C.default.getSecureUrl(c.default.restBaseUrl.replace("/sharing/rest/",
"")));W="".concat(W,"LoginHandler/switchuser?");N="username\x3d".concat(c.default.userInfo.username,"\x26redirect_uri\x3d").concat(N).concat(K);return"".concat(W).concat(N)};T.prototype.getDevEnviroment=function(){var N=c.default.self.portalHostname;return-1!==N.indexOf("dev")?"dev":-1!==N.indexOf("qa")?"qa":null};T.prototype._getOriginOfUrl=function(N){var K=window.location;N=N?"".concat(N,":"):K.protocol;return"".concat(N,"//").concat(K.hostname).concat(K.port?":".concat(K.port):"","/")};T.prototype.hideSignInLink=
function(){return c.default.self.isPortal&&"singletenant"===c.default.self.portalMode&&c.default.self.isWebTierAuth&&"7443"!==window.location.port};T.prototype.showProductLinks=function(){var N=c.default.self,K=N.access,W=N.isPortal;return!N.id&&!K&&!W};T.prototype.isPublicAccount=function(){var N=c.default.self,K=N.isPortal;return!N.urlKey&&!K&&!!c.default.userInfo};T.prototype.canViewOrgUsers=function(){var N;return null===(N=c.default.userRole)||void 0===N?void 0:N.canViewOrgUsers()};T.prototype.orgPageRestrictionsDoNotApply=
function(){var N=c.default.userInfo,K=!N.accountId;N=N.role&&("org_admin"===N.role||"account_admin"===N.role)&&!N.roleId;return!c.default.restrictOrganizationPageToAdmin||K||N};T.prototype.showEsriLinks=function(){var N;return!c.default.self.isPortal&&"both"===(null===(N=c.default.userInfo)||void 0===N?void 0:N.userType)};T.prototype.subscriptionIsTrial=function(){return!c.default.self.isPortal&&c.default.self.subscriptionInfo&&("Trial"===c.default.self.subscriptionInfo.type||"Trial Press"===c.default.self.subscriptionInfo.type)};
T.prototype.usePortalSSL=function(){var N;return(!1===c.default.isMultiTenant||C.default.isPortal())&&(null===(N=c.default.self)||void 0===N?void 0:N.portalHostname)&&!c.default.self.portalHostname.match(/:7080\//)&&80!==c.default.self.httpPort&&443!==c.default.self.httpsPort&&"https:"===window.location.protocol};return T}();B.default=f})},"arcgis-components/wrappers/InfoBanner":function(){define(["../Component","../InfoBanner/index"],function(f,B){return function(l){function e(u){if(c[u])return c[u].exports;
var t=c[u]={i:u,l:!1,exports:{}};return l[u].call(t.exports,t,t.exports,e),t.l=!0,t.exports}var c={};return e.m=l,e.c=c,e.d=function(u,t,d){e.o(u,t)||Object.defineProperty(u,t,{enumerable:!0,get:d})},e.r=function(u){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"});Object.defineProperty(u,"__esModule",{value:!0})},e.t=function(u,t){if((1&t&&(u=e(u)),8&t)||4&t&&"object"==typeof u&&u&&u.__esModule)return u;var d=Object.create(null);if(e.r(d),
Object.defineProperty(d,"default",{enumerable:!0,value:u}),2&t&&"string"!=typeof u)for(var q in u)e.d(d,q,function(m){return u[m]}.bind(null,q));return d},e.n=function(u){var t=u&&u.__esModule?function(){return u.default}:function(){return u};return e.d(t,"a",t),t},e.o=function(u,t){return Object.prototype.hasOwnProperty.call(u,t)},e.p="",e(e.s=945)}({1:function(l,e,c){function u(r,k){function g(){this.constructor=r}if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+
" is not a constructor or null");h(r,k);r.prototype=null===k?Object.create(k):(g.prototype=k.prototype,new g)}function t(r,k){var g={},b;for(b in r)Object.prototype.hasOwnProperty.call(r,b)&&0>k.indexOf(b)&&(g[b]=r[b]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var w=0;for(b=Object.getOwnPropertySymbols(r);w<b.length;w++)0>k.indexOf(b[w])&&Object.prototype.propertyIsEnumerable.call(r,b[w])&&(g[b[w]]=r[b[w]])}return g}function d(r,k,g,b){var w,x=arguments.length,z=3>x?k:null===b?
b=Object.getOwnPropertyDescriptor(k,g):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)z=Reflect.decorate(r,k,g,b);else for(var D=r.length-1;0<=D;D--)(w=r[D])&&(z=(3>x?w(z):3<x?w(k,g,z):w(k,g))||z);return 3<x&&z&&Object.defineProperty(k,g,z),z}function q(r,k,g,b){return new (g||(g=Promise))(function(w,x){function z(C){try{E(b.next(C))}catch(y){x(y)}}function D(C){try{E(b.throw(C))}catch(y){x(y)}}function E(C){var y;C.done?w(C.value):(y=C.value,y instanceof g?y:new g(function(v){v(y)})).then(z,
D)}E((b=b.apply(r,k||[])).next())})}function m(r,k){function g(E){return function(C){return function(y){if(b)throw new TypeError("Generator is already executing.");for(;z&&(z=0,y[0]&&(D=0)),D;)try{if(b=1,w&&(x=2&y[0]?w.return:y[0]?w.throw||((x=w.return)&&x.call(w),0):w.next)&&!(x=x.call(w,y[1])).done)return x;switch(w=0,x&&(y=[2&y[0],x.value]),y[0]){case 0:case 1:x=y;break;case 4:return D.label++,{value:y[1],done:!1};case 5:D.label++;w=y[1];y=[0];continue;case 7:y=D.ops.pop();D.trys.pop();continue;
default:if(!(x=D.trys,(x=0<x.length&&x[x.length-1])||6!==y[0]&&2!==y[0])){D=0;continue}if(3===y[0]&&(!x||y[1]>x[0]&&y[1]<x[3]))D.label=y[1];else if(6===y[0]&&D.label<x[1])D.label=x[1],x=y;else if(x&&D.label<x[2])D.label=x[2],D.ops.push(y);else{x[2]&&D.ops.pop();D.trys.pop();continue}}y=k.call(r,D)}catch(v){y=[6,v],w=0}finally{b=x=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([E,C])}}var b,w,x,z,D={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return z=
{next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(z[Symbol.iterator]=function(){return this}),z}function a(r,k,g){if(g||2===arguments.length)for(var b,w=0,x=k.length;w<x;w++)!b&&w in k||(b||(b=Array.prototype.slice.call(k,0,w)),b[w]=k[w]);return r.concat(b||Array.prototype.slice.call(k))}c.d(e,"d",function(){return u});c.d(e,"a",function(){return n});c.d(e,"f",function(){return t});c.d(e,"c",function(){return d});c.d(e,"b",function(){return q});c.d(e,"e",function(){return m});c.d(e,"g",
function(){return a});var h=function(r,k){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,b){g.__proto__=b}||function(g,b){for(var w in b)Object.prototype.hasOwnProperty.call(b,w)&&(g[w]=b[w])})(r,k)},n=function(){return(n=Object.assign||function(r){for(var k,g=1,b=arguments.length;g<b;g++)for(var w in k=arguments[g])Object.prototype.hasOwnProperty.call(k,w)&&(r[w]=k[w]);return r}).apply(this,arguments)};Object.create;Object.create},165:function(l,e){e=function(){return this}();
try{e=e||(new Function("return this"))()}catch(c){"object"==typeof window&&(e=window)}l.exports=e},17:function(l,e){l.exports=f},189:function(l,e){function c(){throw Error("setTimeout has not been defined");}function u(){throw Error("clearTimeout has not been defined");}function t(w){if(h===setTimeout)return setTimeout(w,0);if((h===c||!h)&&setTimeout)return h=setTimeout,setTimeout(w,0);try{return h(w,0)}catch(x){try{return h.call(null,w,0)}catch(z){return h.call(this,w,0)}}}function d(){g&&r&&(g=
!1,r.length?k=r.concat(k):b=-1,k.length&&q())}function q(){if(!g){var w=t(d);g=!0;for(var x=k.length;x;){r=k;for(k=[];++b<x;)r&&r[b].run();b=-1;x=k.length}r=null;g=!1;(function(z){if(n===clearTimeout)return clearTimeout(z);if((n===u||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(z);try{n(z)}catch(D){try{return n.call(null,z)}catch(E){return n.call(this,z)}}})(w)}}function m(w,x){this.fun=w;this.array=x}function a(){}l=l.exports={};try{var h="function"==typeof setTimeout?setTimeout:c}catch(w){h=
c}try{var n="function"==typeof clearTimeout?clearTimeout:u}catch(w){n=u}!0;var r,k=[],g=!1,b=-1;l.nextTick=function(w){var x=Array(arguments.length-1);if(1<arguments.length)for(var z=1;z<arguments.length;z++)x[z-1]=arguments[z];k.push(new m(w,x));1!==k.length||g||t(q)};m.prototype.run=function(){this.fun.apply(null,this.array)};l.title="browser";l.browser=!0;l.env={};l.argv=[];l.version="";l.versions={};l.on=a;l.addListener=a;l.once=a;l.off=a;l.removeListener=a;l.removeAllListeners=a;l.emit=a;l.prependListener=
a;l.prependOnceListener=a;l.listeners=function(w){return[]};l.binding=function(w){throw Error("process.binding is not supported");};l.cwd=function(){return"/"};l.chdir=function(w){throw Error("process.chdir is not supported");};l.umask=function(){return 0}},28:function(l,e,c){(function(u,t){l.exports=function(){function d(){var T=setTimeout;return function(){return T(q,1)}}function q(){for(var T=0;T<C;T+=2)(0,M[T])(M[T+1]),M[T]=void 0,M[T+1]=void 0;C=0}function m(T,N){var K=this,W=new this.constructor(h);
void 0===W[U]&&D(W);var da=K._state;if(da){var fa=arguments[da-1];A(function(){return z(da,W,fa,K._result)})}else w(K,W,T,N);return W}function a(T){if(T&&"object"==typeof T&&T.constructor===this)return T;var N=new this(h);return r(N,T),N}function h(){}function n(T,N,K){N.constructor===T.constructor&&K===m&&N.constructor.resolve===a?function(W,da){1===da._state?g(W,da._result):2===da._state?b(W,da._result):w(da,void 0,function(fa){return r(W,fa)},function(fa){return b(W,fa)})}(T,N):void 0===K?g(T,
N):"function"==typeof K?function(W,da,fa){A(function(ha){var ra=!1,za=function(Da,va,Ga,ba){try{Da.call(va,Ga,ba)}catch(ia){return ia}}(fa,da,function(Da){ra||(ra=!0,da!==Da?r(ha,Da):g(ha,Da))},function(Da){ra||(ra=!0,b(ha,Da))},ha._label);!ra&&za&&(ra=!0,b(ha,za))},W)}(T,N,K):g(T,N)}function r(T,N){if(T===N)b(T,new TypeError("You cannot resolve a promise with itself"));else if(W=typeof(K=N),null===K||"object"!==W&&"function"!==W)g(T,N);else{K=void 0;try{K=N.then}catch(da){return void b(T,da)}n(T,
N,K)}var K,W}function k(T){T._onerror&&T._onerror(T._result);x(T)}function g(T,N){void 0===T._state&&(T._result=N,T._state=1,0!==T._subscribers.length&&A(x,T))}function b(T,N){void 0===T._state&&(T._state=2,T._result=N,A(k,T))}function w(T,N,K,W){var da=T._subscribers,fa=da.length;T._onerror=null;da[fa]=N;da[fa+1]=K;da[fa+2]=W;0===fa&&T._state&&A(x,T)}function x(T){var N=T._subscribers,K=T._state;if(0!==N.length){for(var W=void 0,da=void 0,fa=T._result,ha=0;ha<N.length;ha+=3)W=N[ha],da=N[ha+K],W?
z(K,W,da,fa):da(fa);T._subscribers.length=0}}function z(T,N,K,W){var da="function"==typeof K,fa=void 0,ha=void 0,ra=!0;if(da){try{fa=K(W)}catch(za){ra=!1,ha=za}if(N===fa)return void b(N,new TypeError("A promises callback cannot return that same promise."))}else fa=W;void 0!==N._state||(da&&ra?r(N,fa):!1===ra?b(N,ha):1===T?g(N,fa):2===T&&b(N,fa))}function D(T){T[U]=Y++;T._state=void 0;T._result=void 0;T._subscribers=[]}var E=Array.isArray?Array.isArray:function(T){return"[object Array]"===Object.prototype.toString.call(T)},
C=0,y=void 0,v=void 0,A=function(T,N){M[C]=T;M[C+1]=N;2===(C+=2)&&(v?v(q):J())},G="undefined"!=typeof window?window:void 0,F=G||{};F=F.MutationObserver||F.WebKitMutationObserver;var H="undefined"==typeof self&&void 0!==u&&"[object process]"==={}.toString.call(u),L="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,M=Array(1E3),Q,S,I,P,J=void 0;H?J=function(){return u.nextTick(q)}:F?(S=0,I=new F(q),P=document.createTextNode(""),I.observe(P,
{characterData:!0}),J=function(){P.data=S=++S%2}):L?((Q=new MessageChannel).port1.onmessage=q,J=function(){return Q.port2.postMessage(0)}):J=void 0===G?function(){try{var T=Function("return this")().require("vertx");return void 0!==(y=T.runOnLoop||T.runOnContext)?function(){y(q)}:d()}catch(N){return d()}}():d();var U=Math.random().toString(36).substring(2),Y=0,aa=function(){function T(N,K){this._instanceConstructor=N;this.promise=new N(h);this.promise[U]||D(this.promise);E(K)?(this.length=K.length,
this._remaining=K.length,this._result=Array(this.length),0===this.length?g(this.promise,this._result):(this.length=this.length||0,this._enumerate(K),0===this._remaining&&g(this.promise,this._result))):b(this.promise,Error("Array Methods must be provided an Array"))}return T.prototype._enumerate=function(N){for(var K=0;void 0===this._state&&K<N.length;K++)this._eachEntry(N[K],K)},T.prototype._eachEntry=function(N,K){var W=this._instanceConstructor,da=W.resolve;if(da===a){var fa=da=void 0,ha=!1;try{da=
N.then}catch(ra){ha=!0,fa=ra}da===m&&void 0!==N._state?this._settledAt(N._state,K,N._result):"function"!=typeof da?(this._remaining--,this._result[K]=N):W===la?(W=new W(h),ha?b(W,fa):n(W,N,da),this._willSettleAt(W,K)):this._willSettleAt(new W(function(ra){return ra(N)}),K)}else this._willSettleAt(da(N),K)},T.prototype._settledAt=function(N,K,W){var da=this.promise;void 0===da._state&&(this._remaining--,2===N?b(da,W):this._result[K]=W);0===this._remaining&&g(da,this._result)},T.prototype._willSettleAt=
function(N,K){var W=this;w(N,void 0,function(da){return W._settledAt(1,K,da)},function(da){return W._settledAt(2,K,da)})},T}(),la=function(){function T(N){this[U]=Y++;this._result=this._state=void 0;this._subscribers=[];if(h!==N){if("function"!=typeof N)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof T)(function(K,W){try{W(function(da){r(K,da)},function(da){b(K,da)})}catch(da){b(K,da)}})(this,N);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}}return T.prototype.catch=function(N){return this.then(null,N)},T.prototype.finally=function(N){var K=this.constructor;return"function"==typeof N?this.then(function(W){return K.resolve(N()).then(function(){return W})},function(W){return K.resolve(N()).then(function(){throw W;})}):this.then(N,N)},T}();return la.prototype.then=m,la.all=function(T){return(new aa(this,T)).promise},la.race=function(T){var N=this;return E(T)?new N(function(K,W){for(var da=T.length,fa=0;fa<da;fa++)N.resolve(T[fa]).then(K,
W)}):new N(function(K,W){return W(new TypeError("You must pass an array to race."))})},la.resolve=a,la.reject=function(T){var N=new this(h);return b(N,T),N},la._setScheduler=function(T){v=T},la._setAsap=function(T){A=T},la._asap=A,la.polyfill=function(){var T=void 0;if(void 0!==t)T=t;else if("undefined"!=typeof self)T=self;else try{T=Function("return this")()}catch(W){throw Error("polyfill failed because global object is unavailable in this environment");}var N=T.Promise;if(N){var K=null;try{K=Object.prototype.toString.call(N.resolve())}catch(W){}if("[object Promise]"===
K&&!N.cast)return}T.Promise=la},la.Promise=la,la}()}).call(this,c(189),c(165))},33:function(l,e,c){function u(M){return M.reduce(function(Q,S){return S&&S.relatedItems?Q.concat(S.relatedItems.map(function(I){return I})):Q},[])}function t(M,Q,S){return M(Q,{query:Object(m.a)({f:"json"},S)}).then(function(I){return I.data})}function d(M,Q){void 0===Q&&(Q=100);for(var S=[],I=0;I<Math.ceil(M.length/Q);I++)S.push(M.slice(I*Q,(I+1)*Q));return S.filter(function(P){return 0<P.length})}function q(M){var Q=
M.itemIds,S=M.request,I=M.groupIds,P="".concat(M.portal.restUrl,"/content/itemsgroups");return new a.Promise(function(J,U){S(P,{method:"get",query:{f:"json",items:Q,groups:I}}).then(function(Y){J(Y.data)},U)})}c.d(e,"u",function(){return h});c.d(e,"n",function(){return n});c.d(e,"h",function(){return r});c.d(e,"e",function(){return k});c.d(e,"f",function(){return g});c.d(e,"j",function(){return b});c.d(e,"o",function(){return w});c.d(e,"l",function(){return x});c.d(e,"k",function(){return z});c.d(e,
"m",function(){return D});c.d(e,"c",function(){return E});c.d(e,"d",function(){return C});c.d(e,"r",function(){return y});c.d(e,"s",function(){return v});c.d(e,"t",function(){return A});c.d(e,"g",function(){return G});c.d(e,"p",function(){return F});c.d(e,"q",function(){return H});c.d(e,"v",function(){return t});c.d(e,"a",function(){return d});c.d(e,"i",function(){return q});c.d(e,"b",function(){return L});var m=c(1),a=c(28),h=function(M){return function(Q,S){return M({url:Q,content:S.query},{usePost:"post"===
S.method}).then(function(I){return{data:I}})}},n=function(M,Q,S){return t(M,"".concat(Q.restUrl,"/portals/self"),{culture:S,default:!0})},r=function(M,Q,S){return t(M,"".concat(Q.restUrl,"/content/items/").concat(S,"/data"))},k=function(M,Q,S,I){return t(M,"".concat(Q.restUrl,"/community/groups"),Object(m.a)({q:S},I))},g=function(M,Q,S){return t(M,"".concat(Q.restUrl,"/community/groups/").concat(S,"/categorySchema"))},b=function(M,Q,S){return t(M,"".concat(Q.restUrl,"/portals/").concat(S||Q.id,"/categorySchema"))},
w=function(M,Q){return t(M,"".concat(Q.restUrl,"/portals/").concat(Q.id,"/servers"))},x=function(M,Q,S,I){return M("".concat(Q.restUrl,"/portals/").concat(S||Q.id,"/collaborationsSummary"),I)},z=function(M,Q,S,I){return M("".concat(Q.restUrl,"/portals/").concat(S||Q.id,"/collaboratedItems"),I)},D=function(M,Q,S){return t(M,"".concat(location.protocol,"//").concat(Q.portalHostname,"/sharing/rest/portals/").concat(S||"self"))},E=function(M,Q,S){return M("".concat(Q.restUrl,"/community/groups"),{query:{f:"json",
q:"orgid:".concat(Q.id," AND access:public"),num:100,start:S||1,sortField:"title",sortOrder:"asc"}}).then(function(I){return I.data.total>I.data.start+I.data.num?E(M,Q,I.data.start+I.data.num).then(function(P){return Object(m.a)(Object(m.a)({},P),{data:Object(m.a)(Object(m.a)({},P.data),{results:I.data.results.concat(P.data.results)})})}):I})},C=function(M,Q,S,I){return M("".concat(Q.restUrl,"/community/users/").concat(S,"/provisionedListings"),{query:{f:"json",num:100,start:I||1}}).then(function(P){var J=
a.Promise.all(P.data.provisionedListings.filter(function(Y){return Y.itemId}).map(function(Y){return(new a.Promise(function(aa,la){M("".concat(Q.restUrl,"/content/items/").concat(Y.itemId),{method:"get",query:{f:"json"}}).then(function(T){aa(T.data)},la)})).catch(function(aa){return 0})})),U=P.data.provisionedListings.map(function(Y){return t(M,"".concat(Q.restUrl,"/content/items/").concat(Y.id||Y.itemId,"/relatedItems?relationshipType\x3dListed2ImplicitlyListed\x26direction\x3dforward")).then(function(aa){return aa},
function(aa){})});return P.data.total>P.data.start+P.data.num?C(M,Q,S,P.data.start+P.data.num).then(function(Y){return a.Promise.all([J].concat(U)).then(function(aa){return aa[0].results.concat(u(aa.slice(1))).concat(Y)})}):a.Promise.all([J].concat(U)).then(function(Y){return Y[0].filter(function(aa){return void 0!==aa}).concat(u(Y.slice(1)))})})},y=function(M,Q,S){return t(M,"".concat(Q.restUrl,"/community/users/").concat(S||Q.user.username))},v=function(M,Q,S){return t(M,"".concat(Q.restUrl,"/content/users/").concat(S||
Q.user.username),{num:1})},A=function(M,Q,S){return t(M,"".concat(Q.restUrl,"/content/groups/").concat(S))},G=function(M,Q,S){return t(M,"".concat(Q.restUrl,"/community/groups"),S)},F=function(M,Q){return t(M,"".concat(Q.restUrl,"/portals/self/settings"))},H=function(M,Q){return t(M,"".concat(Q.restUrl,"/portals/self/trustedOrgs"),{num:100})},L=function(M,Q){return void 0===Q&&(Q=","),M.map(function(S){return S.id}).join(Q)}},679:function(l,e){l.exports=B},945:function(l,e,c){c.r(e);c.d(e,"InfoBanner",
function(){return m});var u=c(1),t=c(17);l=c(679);var d=c.n(l),q=c(33),m=function(){function a(h){var n=this;this.options=h;var r=h.bottomContainer;(this.topContainer=h.topContainer,this.bottomContainer=r,h.bannerConfig)?(h.bannerConfig.text&&(h.bannerConfig.text=this.htmlDecode(h.bannerConfig.text)),this.setupBanners(h.bannerConfig)):h.request&&h.portal&&h.apiVersion&&(r=4===h.apiVersion?h.request:this.shimmedRequest.bind(this),h=4===h.apiVersion?h.portal:Object(u.a)(Object(u.a)({},h.portal),{restUrl:h.portal.portalUrl.slice(0,
-1),credential:h.portal.user&&h.portal.user.credential?h.portal.user.credential:void 0}),Object(q.p)(r,h).then(function(k){n.setupBanners(k.informationalBanner)}))}return a.prototype.destroy=function(){this.topContainer&&(this.topProjector.stop(),this.topContainer.remove?this.topContainer.remove():this.topContainer.parentNode&&this.topContainer.parentNode.removeChild(this.topContainer));this.bottomContainer&&(this.bottomProjector.stop(),this.bottomContainer.remove?this.bottomContainer.remove():this.bottomContainer.parentNode&&
this.bottomContainer.parentNode.removeChild(this.bottomContainer))},a.prototype.htmlDecode=function(h){var n=document.createElement("textarea");return n.innerHTML=h,n.value},a.prototype.setupBanners=function(h){h&&h.enabled&&(this.topContainer&&(this.topProjector=this.createProjector(this.topContainer,"top-info-banner","top",h)),this.bottomContainer&&(this.bottomProjector=this.createProjector(this.bottomContainer,"bottom-info-banner","bottom",h)))},a.prototype.createProjector=function(h,n,r,k){var g=
{key:n,position:r,bannerConfig:k};return this.store=Object(t.createStore)(function(b,w){w.type;w.payload;return Object(u.a)({},g)},g),Object(t.createProjector)(this.store,function(b){return b(d.a,Object(u.a)({},g))},h)},a.prototype.shimmedRequest=function(h,n){var r=Object(u.a)({},n.query);return this.options.portal&&this.options.portal.user&&this.options.portal.user.credential&&-1<h.indexOf(this.options.portal.restUrl)&&(r.token=this.options.portal.user.credential.token),this.options.request({url:h,
content:n.query},{usePost:"post"===n.method}).then(function(k){return{data:k}})},a}()}})})},"arcgis-components/Component":function(){define(function(){return function(f){function B(e){if(l[e])return l[e].exports;var c=l[e]={i:e,l:!1,exports:{}};return f[e].call(c.exports,c,c.exports,B),c.l=!0,c.exports}var l={};return B.m=f,B.c=l,B.d=function(e,c,u){B.o(e,c)||Object.defineProperty(e,c,{enumerable:!0,get:u})},B.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,
{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})},B.t=function(e,c){if((1&c&&(e=B(e)),8&c)||4&c&&"object"==typeof e&&e&&e.__esModule)return e;var u=Object.create(null);if(B.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:e}),2&c&&"string"!=typeof e)for(var t in e)B.d(u,t,function(d){return e[d]}.bind(null,t));return u},B.n=function(e){var c=e&&e.__esModule?function(){return e.default}:function(){return e};return B.d(c,"a",c),c},B.o=function(e,c){return Object.prototype.hasOwnProperty.call(e,
c)},B.p="",B(B.s=772)}({1:function(f,B,l){function e(h,n){function r(){this.constructor=h}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");m(h,n);h.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}function c(h,n){var r={},k;for(k in h)Object.prototype.hasOwnProperty.call(h,k)&&0>n.indexOf(k)&&(r[k]=h[k]);if(null!=h&&"function"==typeof Object.getOwnPropertySymbols){var g=0;for(k=Object.getOwnPropertySymbols(h);g<
k.length;g++)0>n.indexOf(k[g])&&Object.prototype.propertyIsEnumerable.call(h,k[g])&&(r[k[g]]=h[k[g]])}return r}function u(h,n,r,k){var g,b=arguments.length,w=3>b?n:null===k?k=Object.getOwnPropertyDescriptor(n,r):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)w=Reflect.decorate(h,n,r,k);else for(var x=h.length-1;0<=x;x--)(g=h[x])&&(w=(3>b?g(w):3<b?g(n,r,w):g(n,r))||w);return 3<b&&w&&Object.defineProperty(n,r,w),w}function t(h,n,r,k){return new (r||(r=Promise))(function(g,b){function w(D){try{z(k.next(D))}catch(E){b(E)}}
function x(D){try{z(k.throw(D))}catch(E){b(E)}}function z(D){var E;D.done?g(D.value):(E=D.value,E instanceof r?E:new r(function(C){C(E)})).then(w,x)}z((k=k.apply(h,n||[])).next())})}function d(h,n){function r(z){return function(D){return function(E){if(k)throw new TypeError("Generator is already executing.");for(;w&&(w=0,E[0]&&(x=0)),x;)try{if(k=1,g&&(b=2&E[0]?g.return:E[0]?g.throw||((b=g.return)&&b.call(g),0):g.next)&&!(b=b.call(g,E[1])).done)return b;switch(g=0,b&&(E=[2&E[0],b.value]),E[0]){case 0:case 1:b=
E;break;case 4:return x.label++,{value:E[1],done:!1};case 5:x.label++;g=E[1];E=[0];continue;case 7:E=x.ops.pop();x.trys.pop();continue;default:if(!(b=x.trys,(b=0<b.length&&b[b.length-1])||6!==E[0]&&2!==E[0])){x=0;continue}if(3===E[0]&&(!b||E[1]>b[0]&&E[1]<b[3]))x.label=E[1];else if(6===E[0]&&x.label<b[1])x.label=b[1],b=E;else if(b&&x.label<b[2])x.label=b[2],x.ops.push(E);else{b[2]&&x.ops.pop();x.trys.pop();continue}}E=n.call(h,x)}catch(C){E=[6,C],g=0}finally{k=b=0}if(5&E[0])throw E[1];return{value:E[0]?
E[1]:void 0,done:!0}}([z,D])}}var k,g,b,w,x={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return w={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w}function q(h,n,r){if(r||2===arguments.length)for(var k,g=0,b=n.length;g<b;g++)!k&&g in n||(k||(k=Array.prototype.slice.call(n,0,g)),k[g]=n[g]);return h.concat(k||Array.prototype.slice.call(n))}l.d(B,"d",function(){return e});l.d(B,"a",function(){return a});l.d(B,"f",
function(){return c});l.d(B,"c",function(){return u});l.d(B,"b",function(){return t});l.d(B,"e",function(){return d});l.d(B,"g",function(){return q});var m=function(h,n){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,k){r.__proto__=k}||function(r,k){for(var g in k)Object.prototype.hasOwnProperty.call(k,g)&&(r[g]=k[g])})(h,n)},a=function(){return(a=Object.assign||function(h){for(var n,r=1,k=arguments.length;r<k;r++)for(var g in n=arguments[r])Object.prototype.hasOwnProperty.call(n,
g)&&(h[g]=n[g]);return h}).apply(this,arguments)};Object.create;Object.create},15:function(f,B,l){function e(u){return function d(){for(var q=this,m=[],a=0;a<arguments.length;a++)m[a]=arguments[a];return m.length>=u.length?u.call.apply(u,Object(c.g)([this],m,!1)):function(){for(var h=[],n=0;n<arguments.length;n++)h[n]=arguments[n];return d.call.apply(d,Object(c.g)(Object(c.g)([q],m,!1),h,!1))}}}l.d(B,"a",function(){return e});var c=l(1)},423:function(f,B,l){!function(e){var c="".concat("http://www.w3.org/",
"2000/svg"),u="".concat("http://www.w3.org/","1999/xlink"),t=[],d=function(F,H){var L={};return Object.keys(F).forEach(function(M){L[M]=F[M]}),H&&Object.keys(H).forEach(function(M){L[M]=H[M]}),L},q=function(F,H){return F.vnodeSelector===H.vnodeSelector&&(F.properties&&H.properties?F.properties.key===H.properties.key&&F.properties.bind===H.properties.bind:!F.properties&&!H.properties)},m=function(F){if("string"!=typeof F)throw Error("Style values must be strings");},a=function(F,H,L,M){var Q=F[H];
if(""!==Q.vnodeSelector){var S=Q.properties;if(!(S&&(void 0===S.key?S.bind:S.key)))for(S=0;S<F.length;S++)if(S!==H&&q(F[S],Q))throw{error:Error("".concat(L.vnodeSelector," had a ").concat(Q.vnodeSelector," child ").concat("added"===M?M:"removed",", but there is now more than one. You must add unique key properties to make them distinguishable.")),parentNode:L,childNode:Q};}},h=[],n=!1,r=function(F){(F.children||[]).forEach(r);F.properties&&F.properties.afterRemoved&&F.properties.afterRemoved.apply(F.properties.bind||
F.properties,[F.domNode])},k=function(){n=!1;h.forEach(r);h.length=0},g=function(F){h.push(F);n||(n=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(k,{timeout:16}):setTimeout(k,16))},b=function(F){var H=F.domNode;if(F.properties){var L=F.properties.exitAnimation;if(L)return H.style.pointerEvents="none",void L(H,function(){H.parentNode&&(H.parentNode.removeChild(H),g(F))},F.properties)}H.parentNode&&(H.parentNode.removeChild(H),g(F))},w=function(F,H,L){!function(M,
Q,S){if(Q)for(var I=0;I<Q.length;I++)x(Q[I],M,void 0,S)}(F,H.children,L);H.text&&(F.textContent=H.text);(function(M,Q,S){if(Q)for(var I=S.eventHandlerInterceptor,P=Object.keys(Q),J=P.length,U=function(aa){var la,T=P[aa];aa=Q[T];if("className"===T)throw Error('Property "className" is not supported, use "class".');if("class"===T)z(M,aa,!0);else if("classes"===T){var N=Object.keys(aa),K=N.length;for(T=0;T<K;T++){var W=N[T];aa[W]&&M.classList.add(W)}}else if("styles"===T)for(N=Object.keys(aa),K=N.length,
T=0;T<K;T++){W=N[T];var da=aa[W];da&&(m(da),S.styleApplyer(M,W,da))}else"key"!==T&&null!=aa&&(N=typeof aa,"function"===N?(0===T.lastIndexOf("on",0)&&(I&&(aa=I(T,aa,M,Q)),"oninput"===T&&(la=aa,aa=function(fa){la.apply(this,[fa]);fa.target["oninput-value"]=fa.target.value})),M[T]=aa):S.namespace===c?"href"===T?M.setAttributeNS(u,T,aa):M.setAttribute(T,aa):"string"===N&&"value"!==T&&"innerHTML"!==T?M.setAttribute(T,aa):M[T]=aa)},Y=0;Y<J;Y++)U(Y)})(F,H.properties,L);H.properties&&H.properties.afterCreate&&
H.properties.afterCreate.apply(H.properties.bind||H.properties,[F,L,H.vnodeSelector,H.properties,H.children])},x=function(F,H,L,M){var Q,S=0,I=F.vnodeSelector,P=H.ownerDocument;if(""===I)F.domNode?F.domNode.nodeValue=F.text:(Q=F.domNode=P.createTextNode(F.text),void 0!==L?H.insertBefore(Q,L):H.appendChild(Q));else{for(var J=0;J<=I.length;++J){var U=I.charAt(J);if(J===I.length||"."===U||"#"===U)U=I.charAt(S-1),S=I.slice(S,J),"."===U?Q.classList.add(S):"#"===U?Q.id=S:("svg"===S&&(M=d(M,{namespace:c})),
void 0!==M.namespace?Q=F.domNode=P.createElementNS(M.namespace,S):(Q=F.domNode=F.domNode||P.createElement(S),"input"===S&&F.properties&&void 0!==F.properties.type&&Q.setAttribute("type",F.properties.type)),void 0!==L?H.insertBefore(Q,L):Q.parentNode!==H&&H.appendChild(Q)),S=J+1}w(Q,F,M)}},z=function(F,H,L){H&&H.split(" ").forEach(function(M){M&&F.classList.toggle(M,L)})};var D=function(F,H,L){var M=F.domNode,Q=!1;if(F===H)return!1;var S=!1;if(""===H.vnodeSelector){if(H.text!==F.text)return F=M.ownerDocument.createTextNode(H.text),
M.parentNode.replaceChild(F,M),H.domNode=F,Q=!0;H.domNode=M}else 0===H.vnodeSelector.lastIndexOf("svg",0)&&(L=d(L,{namespace:c})),F.text!==H.text&&(S=!0,void 0===H.text?M.removeChild(M.firstChild):M.textContent=H.text),H.domNode=M,S=function(I,P,J,U,Y){if(J===U)return!1;U=U||t;for(var aa,la=(J=J||t).length,T=U.length,N=aa=0,K=!1;N<T;){var W=aa<la?J[aa]:void 0,da=U[N];if(void 0!==W&&q(W,da))K=D(W,da,Y)||K,aa++;else{a:{W=J;var fa=da;if(""!==fa.vnodeSelector)for(var ha=aa+1;ha<W.length;ha++)if(q(W[ha],
fa)){W=ha;break a}W=-1}if(0<=W){for(;aa<W;aa++)b(J[aa]),a(J,aa,I,"removed");K=D(J[W],da,Y)||K;aa=W+1}else x(da,P,aa<la?J[aa].domNode:void 0,Y),da.properties&&(W=da.properties.enterAnimation)&&W(da.domNode,da.properties),a(U,N,I,"added")}N++}if(la>aa)for(;aa<la;aa++)b(J[aa]),a(J,aa,I,"removed");return K}(H,M,F.children,H.children,L)||S,S=function(I,P,J,U){if(J){for(var Y=!1,aa=Object.keys(J),la=aa.length,T=0;T<la;T++){var N=aa[T],K=J[N],W=P[N];if("class"===N)W!==K&&(z(I,W,!1),z(I,K,!0));else if("classes"===
N){var da=I.classList,fa=Object.keys(K),ha=fa.length;for(N=0;N<ha;N++){var ra=fa[N],za=!!K[ra];za!==!!W[ra]&&(Y=!0,za?da.add(ra):da.remove(ra))}}else if("styles"===N)for(da=Object.keys(K),fa=da.length,N=0;N<fa;N++)ha=da[N],ra=K[ha],ra!==W[ha]&&(Y=!0,ra?(m(ra),U.styleApplyer(I,ha,ra)):U.styleApplyer(I,ha,""));else(K||"string"!=typeof W||(K=""),"value"===N)?(da=I[N],da!==K&&(I["oninput-value"]?da===I["oninput-value"]:K!==W)&&(I[N]=K,I["oninput-value"]=void 0),K!==W&&(Y=!0)):K!==W&&(W=typeof K,"function"===
W&&U.eventHandlerInterceptor||(U.namespace===c?"href"===N?I.setAttributeNS(u,N,K):I.setAttribute(N,K):"string"===W&&"innerHTML"!==N?"role"===N&&""===K?I.removeAttribute(N):I.setAttribute(N,K):I[N]!==K&&(I[N]=K),Y=!0))}return Y}}(M,F.properties,H.properties,L)||S,H.properties&&H.properties.afterUpdate&&H.properties.afterUpdate.apply(H.properties.bind||H.properties,[M,L,H.vnodeSelector,H.properties,H.children]);return S&&H.properties&&H.properties.updateAnimation&&H.properties.updateAnimation(M,H.properties,
F.properties),Q};var E=function(F,H){return{getLastRender:function(){return F},update:function(L){if(F.vnodeSelector!==L.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");var M=F;F=L;D(M,L,H)},domNode:F.domNode}},C={namespace:void 0,performanceLogger:function(){},eventHandlerInterceptor:void 0,styleApplyer:function(F,H,L){"-"===H.charAt(0)?F.style.setProperty(H,L):F.style[H]=L}},y={create:function(F,
H){return H=d(C,H),x(F,document.createElement("div"),void 0,H),E(F,H)},append:function(F,H,L){return L=d(C,L),x(H,F,void 0,L),E(H,L)},insertBefore:function(F,H,L){return L=d(C,L),x(H,F.parentNode,F,L),E(H,L)},merge:function(F,H,L){return L=d(C,L),H.domNode=F,w(F,H,L),E(H,L)},replace:function(F,H,L){return L=d(C,L),x(H,F.parentNode,F,L),F.parentNode.removeChild(F),E(H,L)}},v=function(F,H,L){for(var M=0,Q=H.length;M<Q;M++){var S=H[M];Array.isArray(S)?v(F,S,L):null!=S&&!1!==S&&("string"==typeof S&&(S=
{vnodeSelector:"",properties:void 0,children:void 0,text:S.toString(),domNode:null}),L.push(S))}};var A=Array.prototype.find?function(F,H){return F.find(H)}:function(F,H){return F.filter(H)[0]};var G=function(F,H){var L=F;return H.forEach(function(M){L=L&&L.children?A(L.children,function(Q){return Q.domNode===M}):void 0}),L};e.createCache=function(){var F,H;return{invalidate:function(){F=H=void 0},result:function(L,M){if(F)for(var Q=0;Q<L.length;Q++)F[Q]!==L[Q]&&(H=void 0);return H||(H=M(),F=L),H}}};
e.createMapping=function(F,H,L){var M=[],Q=[];return{results:Q,map:function(S){for(var I=S.map(F),P=Q.slice(),J=0,U=0;U<S.length;U++){var Y=S[U],aa=I[U];if(aa===M[J])Q[U]=P[J],L(Y,P[J],U),J++;else{for(var la=!1,T=1;T<M.length+1;T++){var N=(J+T)%M.length;if(M[N]===aa){Q[U]=P[N];L(S[U],P[N],U);J=N+1;la=!0;break}}la||(Q[U]=H(Y,U))}}Q.length=S.length;M=I}}};e.createProjector=function(F){var H,L,M=d(C,F),Q=M.performanceLogger,S=!0,I=!1,P=[],J=[],U=function(aa,la,T){M.eventHandlerInterceptor=function(K,
W,da){function fa(ha){da("domEvent",ha);for(var ra=W(),za=ha.currentTarget,Da=ra.domNode,va=[];za&&za!==Da;)va.push(za),za=za.parentNode;va.reverse();var Ga;ra=G(ra.getLastRender(),va);return K.scheduleRender(),ra&&(Ga=ra.properties["on".concat(ha.type)].apply(ra.properties.bind||this,arguments)),da("domEventProcessed",ha),Ga}return function(ha,ra,za,Da){return fa}}(H,function(){return N},Q);var N=aa(la,T(),M);P.push(N);J.push(T)},Y=function(){if(L=void 0,S){S=!1;Q("renderStart",void 0);for(var aa=
0;aa<P.length;aa++){var la=J[aa]();Q("rendered",void 0);P[aa].update(la);Q("patched",void 0)}Q("renderDone",void 0);S=!0}};return H={renderNow:Y,scheduleRender:function(){L||I||(L=requestAnimationFrame(Y))},stop:function(){L&&(cancelAnimationFrame(L),L=void 0);I=!0},resume:function(){I=!1;S=!0;H.scheduleRender()},append:function(aa,la){U(y.append,aa,la)},insertBefore:function(aa,la){U(y.insertBefore,aa,la)},merge:function(aa,la){U(y.merge,aa,la)},replace:function(aa,la){U(y.replace,aa,la)},detach:function(aa){for(var la=
0;la<J.length;la++)if(J[la]===aa)return J.splice(la,1),P.splice(la,1)[0];throw Error("renderFunction was not found");}}};e.dom=y;e.h=function(F,H,L){if(Array.isArray(H))L=H,H=void 0;else if(H&&("string"==typeof H||H.vnodeSelector)||L&&("string"==typeof L||L.vnodeSelector))throw Error("h called with invalid arguments");var M,Q;return L&&1===L.length&&"string"==typeof L[0]?M=L[0]:L&&(v(F,L,Q=[]),0===Q.length&&(Q=void 0)),{vnodeSelector:F,properties:H,children:Q,text:""===M?void 0:M,domNode:null}};Object.defineProperty(e,
"__esModule",{value:!0})}(B)},64:function(f,B,l){function e(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];return function(t){return c.reduceRight(function(d,q){return q(d)},t)}}l.d(B,"a",function(){return e})},7:function(f,B,l){function e(h){return 0===Object.keys(h).length&&h.constructor===Object}function c(h){return null!=h}function u(h,n){return m.apply(null,arguments)}function t(h,n){return a.apply(null,arguments)}l.d(B,"b",function(){return e});l.d(B,"a",function(){return c});l.d(B,
"e",function(){return q});l.d(B,"c",function(){return u});l.d(B,"d",function(){return t});var d=l(1);f=l(15);var q=Object(f.a)(function(h,n){n=Object(d.a)({},n);return delete n[h],n}),m=Object(f.a)(function(h,n){return Object.keys(n).reduce(function(r,k){return r[k]=h(n[k],k,n),r},{})}),a=Object(f.a)(function(h,n){return Object.keys(n).reduce(function(r,k){return h(n[k],k,n)&&(r[k]=n[k]),r},{})})},772:function(f,B,l){function e(w,x,z,D){var E=new g({key:"root"},x);w&&(E.store=w);var C=Object(h.createProjector)(D);
x=Object(a.a)(Object(a.a)({},C),{append:function(y){return C.append(y,function(){return E.render.bind(E)(E.tsx.bind(E))})}});return x.append(z),w&&w.subscribe(function(){return C.scheduleRender()}),x}function c(w,x){return function(z){return function(D,E){return function(C,y){return E(z,Object(a.a)(Object(a.a)(Object(a.a)({},D),w(y(),D)),x(C,D)))}}}}function u(){for(var w=[],x=0;x<arguments.length;x++)w[x]=arguments[x];return function(z){return function(D,E){var C=z(D,E);D=n.a;var y=C.dispatch;E=
w.map(function(v){return v({dispatch:function(A){return y(A)},getState:C.getState})});return y=D.apply(void 0,E)(C.dispatch),Object(a.a)(Object(a.a)({},C),{dispatch:y})}}}function t(w){return function(x){return function(z,D){return x(function(E,C){if("@@shunt/SETSTATE"===C.type)return C.payload;E=z(E,C);return-1===C.type.indexOf("@@component/INIT")&&w(C,E),E},D)}}}function d(w){return function(x){x.dispatch;var z=x.getState;return function(D){return function(E){var C=D(E);return w(E,z()),C}}}}function q(w){var x=
Object(r.d)(function(z){return"function"==typeof z},w);return function(z,D){return void 0===z&&(z={}),Object(r.c)(function(E,C){return E(z[C],D)},x)}}function m(w,x){var z=x,D=[];x={dispatch:function(E){return z=w(z,E),D.forEach(function(C){return C()}),E},subscribe:function(E){return D.push(E),function(){D.splice(D.indexOf(E),1)}},getState:function(){return z}};return x.dispatch({type:"@@component/INIT"+Math.random().toString(36).substring(7)}),x}l.r(B);l.d(B,"createProjector",function(){return e});
l.d(B,"Component",function(){return k});l.d(B,"RootComponent",function(){return g});l.d(B,"connect",function(){return c});l.d(B,"applyMiddleware",function(){return u});l.d(B,"shunt",function(){return t});l.d(B,"thunk",function(){return b});l.d(B,"addListener",function(){return d});l.d(B,"combineReducers",function(){return q});l.d(B,"createStore",function(){return m});var a=l(1),h=l(423),n=l(64),r=l(7),k=function(){function w(x){this.childComponents={};this.state={};this.props=x}return w.prototype.componentDidConnect=
function(){},w.prototype.componentWillReceiveProps=function(x){},w.prototype.setState=function(x){this.state=Object(a.a)(Object(a.a)({},this.state),x);this.store&&this.store.dispatch({type:"".concat(this.props.key,"_COMPONENT_STATE_UPDATE")})},w.prototype.tsx=function(x,z,D){var E=Array.prototype.slice.call(arguments).slice(2);if("string"==typeof x)var C=h.h.apply(this,[x,z,E]);else if(x.prototype&&x.prototype.constructor.name){var y=x;E=Object(a.a)(Object(a.a)({},z),{children:E});var v=this.childComponents[E.key];
v?(v.componentWillReceiveProps(E),v.props=E,C=v.render(v.tsx.bind(v))):((v=this.childComponents[E.key]=new y(E)).store=this.store,v.componentDidConnect(),C=v.render(v.tsx.bind(v)))}else C=(y=x)(Object(a.a)(Object(a.a)({},z),{children:E}),this.tsx.bind(this));return"function"==typeof C?C(this.store.dispatch,this.store.getState):C},w}(),g=function(w){function x(z,D){z=w.call(this,z)||this;return z.renderRoot=D,z}return Object(a.d)(x,w),x.prototype.render=function(z){var D=this;return z(function(E,C){return D.renderRoot(C)})},
x}(k);void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var w=/function\s([^(]{1,})\(/.exec(this.toString());return w&&1<w.length?w[1].trim():""},set:function(w){}});var b=function(w){var x=w.dispatch,z=w.getState;return function(D){return function(E){return"function"==typeof E?E(x,z):D(E)}}}}})})},"arcgis-components/InfoBanner/index":function(){define(["../Component"],function(f){return function(B){function l(c){if(e[c])return e[c].exports;
var u=e[c]={i:c,l:!1,exports:{}};return B[c].call(u.exports,u,u.exports,l),u.l=!0,u.exports}var e={};return l.m=B,l.c=e,l.d=function(c,u,t){l.o(c,u)||Object.defineProperty(c,u,{enumerable:!0,get:t})},l.r=function(c){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});Object.defineProperty(c,"__esModule",{value:!0})},l.t=function(c,u){if((1&u&&(c=l(c)),8&u)||4&u&&"object"==typeof c&&c&&c.__esModule)return c;var t=Object.create(null);if(l.r(t),
Object.defineProperty(t,"default",{enumerable:!0,value:c}),2&u&&"string"!=typeof c)for(var d in c)l.d(t,d,function(q){return c[q]}.bind(null,d));return t},l.n=function(c){var u=c&&c.__esModule?function(){return c.default}:function(){return c};return l.d(u,"a",u),u},l.o=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)},l.p="",l(l.s=821)}({1:function(B,l,e){function c(n,r){function k(){this.constructor=n}if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+
" is not a constructor or null");a(n,r);n.prototype=null===r?Object.create(r):(k.prototype=r.prototype,new k)}function u(n,r){var k={},g;for(g in n)Object.prototype.hasOwnProperty.call(n,g)&&0>r.indexOf(g)&&(k[g]=n[g]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var b=0;for(g=Object.getOwnPropertySymbols(n);b<g.length;b++)0>r.indexOf(g[b])&&Object.prototype.propertyIsEnumerable.call(n,g[b])&&(k[g[b]]=n[g[b]])}return k}function t(n,r,k,g){var b,w=arguments.length,x=3>w?r:null===g?
g=Object.getOwnPropertyDescriptor(r,k):g;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)x=Reflect.decorate(n,r,k,g);else for(var z=n.length-1;0<=z;z--)(b=n[z])&&(x=(3>w?b(x):3<w?b(r,k,x):b(r,k))||x);return 3<w&&x&&Object.defineProperty(r,k,x),x}function d(n,r,k,g){return new (k||(k=Promise))(function(b,w){function x(E){try{D(g.next(E))}catch(C){w(C)}}function z(E){try{D(g.throw(E))}catch(C){w(C)}}function D(E){var C;E.done?b(E.value):(C=E.value,C instanceof k?C:new k(function(y){y(C)})).then(x,
z)}D((g=g.apply(n,r||[])).next())})}function q(n,r){function k(D){return function(E){return function(C){if(g)throw new TypeError("Generator is already executing.");for(;x&&(x=0,C[0]&&(z=0)),z;)try{if(g=1,b&&(w=2&C[0]?b.return:C[0]?b.throw||((w=b.return)&&w.call(b),0):b.next)&&!(w=w.call(b,C[1])).done)return w;switch(b=0,w&&(C=[2&C[0],w.value]),C[0]){case 0:case 1:w=C;break;case 4:return z.label++,{value:C[1],done:!1};case 5:z.label++;b=C[1];C=[0];continue;case 7:C=z.ops.pop();z.trys.pop();continue;
default:if(!(w=z.trys,(w=0<w.length&&w[w.length-1])||6!==C[0]&&2!==C[0])){z=0;continue}if(3===C[0]&&(!w||C[1]>w[0]&&C[1]<w[3]))z.label=C[1];else if(6===C[0]&&z.label<w[1])z.label=w[1],w=C;else if(w&&z.label<w[2])z.label=w[2],z.ops.push(C);else{w[2]&&z.ops.pop();z.trys.pop();continue}}C=r.call(n,z)}catch(y){C=[6,y],b=0}finally{g=w=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([D,E])}}var g,b,w,x,z={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return x=
{next:k(0),throw:k(1),return:k(2)},"function"==typeof Symbol&&(x[Symbol.iterator]=function(){return this}),x}function m(n,r,k){if(k||2===arguments.length)for(var g,b=0,w=r.length;b<w;b++)!g&&b in r||(g||(g=Array.prototype.slice.call(r,0,b)),g[b]=r[b]);return n.concat(g||Array.prototype.slice.call(r))}e.d(l,"d",function(){return c});e.d(l,"a",function(){return h});e.d(l,"f",function(){return u});e.d(l,"c",function(){return t});e.d(l,"b",function(){return d});e.d(l,"e",function(){return q});e.d(l,"g",
function(){return m});var a=function(n,r){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,g){k.__proto__=g}||function(k,g){for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(k[b]=g[b])})(n,r)},h=function(){return(h=Object.assign||function(n){for(var r,k=1,g=arguments.length;k<g;k++)for(var b in r=arguments[k])Object.prototype.hasOwnProperty.call(r,b)&&(n[b]=r[b]);return n}).apply(this,arguments)};Object.create;Object.create},17:function(B,l){B.exports=f},821:function(B,
l,e){e.r(l);var c=e(1);B=function(u){function t(d){return u.call(this,d)||this}return Object(c.d)(t,u),t.prototype.render=function(d){var q=this.props.position,m=this.props.bannerConfig,a=m.text,h=m.fontColor;return d("div",{classes:{"info-banner":!0,"info-banner--top":"top"===q,"info-banner--bottom":"bottom"===q},style:"background-color: ".concat(m.bgColor,"; color: ").concat(h)},d("p",{class:"info-banner-text"},a))},t}(e(17).Component);l.default=B}})})},"arcgisonline/pages/components/StatusBanner":function(){define(["require",
"exports","preact"],function(f,B,l){Object.defineProperty(B,"__esModule",{value:!0});B.default=function(e){var c=e.strings,u=e.link,t=e.onAction;e=function(d){if(!d.defaultPrevented&&"status-banner__link"===d.target.id)switch(d.key){case "Enter":null===t||void 0===t?void 0:t(d),d.preventDefault()}};return(0,l.h)("div",{class:"status-banner status-banner__danger text-center"},(0,l.h)("div",{class:"status-banner__wrapper leader-half padding-trailer-half grid-container"},(0,l.h)("calcite-icon",{icon:"exclamation-mark-triangle",
class:"status-banner-icon__danger leader-quarter",scale:"s"}),(0,l.h)("span",{class:"status-banner__title margin-left-half margin-right-half"},(0,l.h)("strong",null,c.title)),(0,l.h)("span",{class:"status-banner__message margin-right-half"},c.message),c.learnMore&&u?(0,l.h)("a",{class:"status-banner_link",href:u,target:"_blank",id:"status-banner__link"},c.learnMore," ",(0,l.h)("calcite-icon",{icon:"launch",scale:"s",class:"status-banner__link-icon margin-left-half margin-right-half"})):null,c.action&&
t?(0,l.h)("a",{class:"status-banner_link",onClick:t,onKeyUp:e,id:"status-banner__link",tabIndex:0},c.action):null))}})},"arcgisonline/pages/organization/widgets/GroupIcon":function(){define("require exports tslib dojo/text!./templates/_groupIcon.html dijit/_TemplatedMixin dijit/_WidgetBase ../../portal/PortalGroup ../../utils/dom ../../../tsutils/declareDecorator".split(" "),function(f,B,l,e,c,u,t,d,q){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);
q=l.__importDefault(q);return function(){function m(a,h){this.templateString=e.default;this.scale="l";this._tooltip=null===a||void 0===a?void 0:a.tooltip}m.prototype.postMixInProperties=function(){this.inherited(arguments);this._group=new t.default(l.__assign(l.__assign({},this.group),{portal:this.portal}))};m.prototype.postCreate=function(){var a=d.default.createElement("arcgis-group-thumbnail",{group:this._group,portal:this.portal,scale:this.scale,tooltip:this._tooltip},this.domNode.querySelector(".js-group-thumbnail"));
this.cssClasses&&a.classList.add(this.cssClasses)};return m=l.__decorate([(0,q.default)(u.default,c.default)],m)}()})},"arcgisonline/pages/utils/a11y":function(){define(["require","exports"],function(f,B){function l(c){var u,t,d,q=null!==(u=null===c||void 0===c?void 0:c.parent)&&void 0!==u?u:document.body;u=null!==(t=null===c||void 0===c?void 0:c.id)&&void 0!==t?t:"a11y-live-region";c=null!==(d=null===c||void 0===c?void 0:c.mode)&&void 0!==d?d:"polite";d=q.querySelector("#".concat(u));d||(d=document.createElement("div"),
d.id=u,d.classList.add("screen-readers-only"),d.setAttribute("role","alert"),d.setAttribute("aria-live",c),d.setAttribute("aria-atomic","true"),d.textContent="",q.appendChild(d));window.addEventListener("liveRegionUpdate",function(m){e(m.detail)});return d}function e(c,u){if(u=document.body.querySelector("#".concat(u?u:"a11y-live-region")))u.textContent=c}Object.defineProperty(B,"__esModule",{value:!0});B.postToLiveRegion=B.setupLiveRegion=void 0;B.setupLiveRegion=l;B.postToLiveRegion=e;B.default=
{setupLiveRegion:l,postToLiveRegion:e}})},"arcgisonline/pages/utils/notifications":function(){define("require exports tslib moment/moment dojo/promise/all dojo/Deferred dojo/string dojo/_base/kernel ../../esriGeowConfig ../../sharing/util ./date dojo/i18n!../../nls/arcgisonline".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h){function n(r){r="".concat(q.default.restBaseUrl,"community/users/").concat(r.username,"/notifications/").concat(r.id,"/delete");return m.default.request({url:r},{usePost:!0})}e=
l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);return{fetchNotifications:function(r,k){r=r.username||r.email;if(!r)return r=new u.default,r.resolve([]),r;r="".concat(q.default.restBaseUrl,"community/users/").concat(r,"/notifications");return m.default.request({url:r}).then(function(g){return(g.notifications||[]).map(function(b){var w=b.received,
x=b.id,z=d.default.locale?d.default.locale.substring(0,2):"en";b&&b.received&&b.id?(w={date:"en"===z?(0,e.default)(w).fromNow():a.default.format(new Date(w),"day-short-month-year-short-time"),id:x,text:""},"webapp_not_copied"===b.type&&k.isPortal&&(b.type="webapp_not_copied_portal"),h.default.notifications.types[b.type]&&(b.data.baseUrl=q.default.baseUrl,w.text=t.default.substitute(h.default.notifications.types[b.type],b.data)),"message_received"===b.type&&b.data&&b.data.message&&(w.text=b.data.message),
b=w.text&&w):b=null;return b}).filter(function(b){return b})})},deleteNotifications:function(r,k){k=k.map(function(g){return{username:r.username,id:g}}).map(n);return(0,c.default)(k)}}})},"arcgisonline/pages/utils/notebook":function(){define("require exports tslib ../../esriGeowConfig ../pageUtil ./signin ../../sharing/util ../../sharing/dijit/dialog/GeneralDlg dojo/Deferred dojo/request dojo/promise/all dojo/on dojo/string esri/lang esri/request dojo/i18n!../../nls/arcgisonline dojo/i18n!../../nls/notebooks".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);n=l.__importDefault(n);r=l.__importDefault(r);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);return function(){function w(){}w.notebookServerConfigured=function(){var x,z,D;if(null===(x=e.default.self)||void 0===x?0:x.isPortal)return e.default.notebookServerEnabled&&
e.default.self.supportsHostedNotebooks?!0:!1;x=-1!==["Trial Developer","Trial","Trial Press","Developer Subscription"].indexOf(null===(z=e.default.self.subscriptionInfo)||void 0===z?void 0:z.type);return e.default.notebookServerEnabled&&(!x||-1!==((null===(D=e.default.self)||void 0===D?void 0:D.allowedBetaFeatures)||[]).indexOf("notebooks"))};w.closeNotebook=function(x,z){z=z.split("/");var D=z[z.length-3],E=z[z.length-1].replace(".ipynb","");D&&E&&w.notebookRequest("".concat(x,"/admin/system/containers/").concat(D,
"/notebooks"),"GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(C){var y;if(null===(y=C.notebooks)||void 0===y?0:y.length)C=C.notebooks.filter(function(v){return v.itemId?v.itemId===E:v.filename.split(".")[0]===E}),C.length&&w.closeNotebookRequest(x,D,C[0].id)})};w.closeNotebookRequest=function(x,z,D){return w.notebookRequest("".concat(x,"/admin/system/containers/").concat(z,"/notebooks/").concat(D,"/closeNotebook"),"POST",null,{useJsonFormatParam:!0,useCredentials:!0})};w.getNotebookServer=
function(){var x=new q.default;(e.default.portal||e.default.self).isPortal?e.default.userInfo?e.default.portal.getFederatedServers().then(function(z){var D;r.default.isDefined(null===(D=null===z||void 0===z?void 0:z.servers)||void 0===D?void 0:D.length)?(z=z.servers.filter(function(E){return"ARCGIS_NOTEBOOK_SERVER"===E.serverType&&"NotebookServer"===E.serverFunction}),z.length?(z=z[0],z.adminContext="/admin",x.resolve(z)):x.resolve(null)):x.resolve(null)},function(z){x.resolve(null)}):x.resolve(null):
t.default.request({url:"".concat(e.default.restBaseUrl,"portals/self/urls")}).then(function(z){var D,E;(z=null===(E=null===(D=null===z||void 0===z?void 0:z.urls)||void 0===D?void 0:D.notebooks)||void 0===E?void 0:E.https)?x.resolve({url:"https://".concat(z),adminContext:""}):x.resolve(null)},function(z){x.resolve(null)});return x};w.notebooksBetaFormatter=function(x){return x};w.buildSelfSignedErrorMessage=function(x,z,D){x.messageHTML="\n      \x3ch4\x3e\n        ".concat(D?b.default.notebookViewer.openNotebookServerCertificateError:
b.default.notebookViewer.openNotebookCertificateError,"\n      \x3c/h4\x3e\n      \x3cp\x3e\n        ").concat(b.default.notebookViewer.openNotebookCertificateErrorDescription,"\n      \x3c/p\x3e\n      \x3col\x3e\n        \x3cli\x3e\n          ").concat(b.default.notebookViewer.openNotebookCertificateErrorStep1,'\n          \x3ca href\x3d"').concat("".concat(z.url).concat(z.adminContext),'" target\x3d"_blank" \x3e\n            ').concat("".concat(z.url).concat(z.adminContext),"\n          \x3c/a\x3e\n        \x3c/li\x3e\n        \x3cli\x3e").concat(b.default.notebookViewer.openNotebookCertificateErrorStep2,
"\x3c/li\x3e\n        \x3cli\x3e").concat(b.default.notebookViewer.openNotebookCertificateErrorStep3,"\x3c/li\x3e\n      \x3c/ol\x3e")};w.getNotebookServerMachines=function(x){var z=new q.default,D=[],E={useJsonFormatParam:!0,useCredentials:!0};w.notebookRequest("".concat(x,"/admin/machines/"),"GET",null,E).then(function(C){C=(null===C||void 0===C?void 0:C.machines)||[];C.length?(C.forEach(function(y){var v=new q.default;(0,a.default)({hardware:w.getNotebookServerMachineHardware(x,y,E),health:w.getNotebookServerMachineHealth(x,
y,E)}).then(function(A){v.resolve({machineName:y.machineName,hardware:A.hardware,health:A.health})});D.push(v)}),(0,a.default)(D).then(function(y){z.resolve(y)})):z.resolve([])});return z};w.getNotebookServerMachineHardware=function(x,z,D){var E=new q.default;w.notebookRequest("".concat(x,"/admin/machines/").concat(z.machineName,"/hardware"),"GET",null,D).then(function(C){E.resolve(C)},function(C){E.resolve({error:C})});return E};w.getNotebookServerMachineHealth=function(x,z,D){var E=new q.default;
w.notebookRequest("".concat(x,"/admin/machines/").concat(z.machineName,"/status"),"GET",null,D).then(function(C){E.resolve(C)},function(C){E.resolve({error:C})});return E};w.getNotebookServerOS=function(x){var z=new q.default,D={useJsonFormatParam:!0,useCredentials:!0};w.notebookRequest("".concat(x,"/admin/machines/"),"GET",null,D).then(function(E){((null===E||void 0===E?void 0:E.machines)||[]).length?(E=E.machines[0].machineName,w.notebookRequest("".concat(x,"/admin/machines/").concat(E,"/hardware"),
"GET",null,D).then(function(C){C=-1!==(C.os||"").toLowerCase().indexOf("windows")?"windows":"linux";z.resolve(C)},function(C){z.reject(C)})):z.reject()});return z};w.getNotebookRuntimes=function(x){var z=new q.default;w.getNotebookServer().then(function(D){null!==D?w.getNotebookRuntimesBase(D.url).then(function(E){x?z.resolve({runtimes:E.runtimes,server:D}):z.resolve(E.runtimes)},function(E){z.reject(E)}):z.reject()});return z};w.getNotebookRuntimesBase=function(x){return w.notebookRequest("".concat(x,
"/admin/notebooks/runtimes"),"GET",null,{useJsonFormatParam:!0,useCredentials:!0})};w.getNotebookRuntimeInfo=function(x,z){var D=this,E=new q.default;x&&z?this.getNotebookRuntimes(!0).then(function(C){var y=C.runtimes.filter(function(v){return v.name.toLowerCase()===x.toLowerCase()&&v.version.toLowerCase()===z.toLowerCase()});1!==y.length?E.reject():(y=y[0].id,D.notebookRequest("".concat(C.server.url,"/admin/notebooks/runtimes/").concat(y,"/manifest"),"GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(v){E.resolve(v)},
function(v){E.reject(v)}))},function(C){E.reject(C)}):E.reject();return E};w.startNotebookServerPoller=function(){return window.setInterval(function(){w.getNotebookServerInfo()},6E5)};w.getNotebookServerInfo=function(){var x=new q.default;w.getNotebookServer().then(function(z){null!==z?w.pingNotebookServer(z.url).then(function(D){x.resolve(D)},function(D){x.reject(D)}):x.reject()});return x};w.pingNotebookServer=function(x){var z=new q.default;w.notebookRequest("".concat(x,"/rest/info"),"GET",null,
{useJsonFormatParam:!0,useCredentials:!0}).then(function(D){z.resolve(D)},function(D){z.reject(D)});return z};w.getSampleNotebooksGroup=function(){var x=new q.default,z=e.default.self&&e.default.self.isPortal?"esri sample notebooks":"arcgis sample notebooks",D="".concat(e.default.restBaseUrl,"community/groups"),E={q:"title:(".concat(z,') AND owner:"').concat("esri_notebook",'"')};t.default.request({url:D,content:E}).then(function(C){C=(C.results||[]).filter(function(y){return(y.title||"").toLowerCase()===
z});1===C.length?x.resolve({id:C[0].id}):x.resolve({id:null})},function(C){x.resolve({id:null})});return x};w.getSampleNotebooksUrl=function(){var x=new q.default;w.getSampleNotebooksGroup().then(function(z){z.id&&(z="".concat(e.default.baseUrl,"group.html?id\x3d").concat(z.id,"#content"),x.resolve(z))});return x};w.getSampleNotebooks=function(){var x=new q.default;w.getSampleNotebooksGroup().then(function(z){z.id?(z="".concat(e.default.restBaseUrl,"content/groups/").concat(z.id),t.default.request({url:z}).then(function(D){x.resolve({items:(D.items||
[]).filter(function(E){return"notebook"===(E.type||"").toLowerCase()})})},function(D){x.resolve({items:[]})})):x.resolve({items:[]})});return x};w.getAllNotebooks=function(x){var z=new q.default;w.notebookRequest("".concat(x,"/admin/notebooks"),"GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(D){z.resolve(D)},function(D){z.reject({error:D})});return z};w.getNotebookServerDirectories=function(x){var z=new q.default;w.notebookRequest("".concat(x,"/admin/system/directories"),"GET",
null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(D){z.resolve(D)},function(D){z.resolve({error:D})});return z};w.deleteDataDirectory=function(x,z){var D=new q.default;w.notebookRequest("".concat(x,"/admin/system/directories/").concat(z,"/unregister"),"POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(E){D.resolve(E)},function(E){D.resolve({error:E})});return D};w.deleteNotebookRuntime=function(x,z){var D=new q.default;w.notebookRequest("".concat(x,"/admin/notebooks/runtimes/").concat(z,
"/unregister"),"POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(E){D.resolve(E)},function(E){D.resolve({error:E})});return D};w.getAllContainers=function(x){var z=new q.default,D={allUsers:e.default.userRole.isAdmin()};w.notebookRequest("".concat(x,"/admin/system/containers"),"GET",D,{useJsonFormatParam:!0,useCredentials:!0}).then(function(E){z.resolve(E)},function(E){z.resolve({error:E})});return z};w.terminateContainer=function(x,z){var D=new q.default;w.notebookRequest("".concat(x,
"/admin/system/containers/").concat(z,"/terminateContainer"),"POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(E){D.resolve(E)},function(E){D.resolve({error:E})});return D};w.getNotebookServerLogs=function(x,z){var D=new q.default;w.notebookRequest("".concat(x,"/admin/logs/query"),"GET",z,{useJsonFormatParam:!0,useCredentials:!0}).then(function(E){D.resolve(E)},function(E){D.resolve({error:E})});return D};w.deleteNotebookServerLogs=function(x){var z=new q.default;w.notebookRequest("".concat(x,
"/admin/logs/clean"),"POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(D){z.resolve(D)},function(D){z.reject({error:D})});return z};w.createNotebookRuntimeProperties=function(x,z,D){void 0===D&&(D=null);D=D||z.value;x=x.filter(function(E){return E.id===D})[0];return JSON.stringify({notebookRuntimeName:x.name,notebookRuntimeVersion:x.version})};w.formatNotebookRuntimeVersion=function(x){return{"10.7":"1.0","10.7.0":"1.0","10.7.1":"2.0","10.8":"3.0","10.8.0":"3.0","10.8.1":"4.0"}[x]||
x};w.showRuntimeInfo=function(x,z,D){var E=D.target;"runtime-button"===(null===E||void 0===E?void 0:E.name)&&(E.disabled=!0);D.stopPropagation();D.preventDefault();x=x||D.currentTarget.dataset.runtimeName;z=z||D.currentTarget.dataset.runtimeVersion;var C="".concat(x).concat(z?" - ".concat(w.formatNotebookRuntimeVersion(z)):""),y=c.default.createSpecifiedDialog(d.default);y._dialog.domNode.classList.add("notebook__runtime-info-dialog");w.getNotebookRuntimeInfo(x,z).then(function(v){v=w.buildRuntimeInfoTable(v,
C);y.show({title:C,content:v})},function(v){y.show({title:g.default.generalDlg.errorDlgTitle,message:b.default.notebookViewer.tabContent.info.runtimeInfoError})});h.default.once(y,"hide",function(){y.destroyRecursive();"runtime-button"===(null===E||void 0===E?void 0:E.name)&&(E.disabled=!1)})};w.buildRuntimeInfoTable=function(x,z){var D=document.createElement("div");if((x.libraries||[]).length){var E=document.createElement("p");E.innerHTML=n.default.substitute(b.default.notebookViewer.tabContent.info.runtimeMessage,
[z]);D.appendChild(E);z=document.createElement("table");z.classList.add("table");D.appendChild(z);var C=document.createElement("thead");z.appendChild(C);E=document.createElement("tr");C.appendChild(E);C=document.createElement("th");C.innerHTML=b.default.notebookViewer.tabContent.info.name;E.appendChild(C);C=document.createElement("th");C.innerHTML=b.default.notebookViewer.tabContent.info.version;E.appendChild(C);var y=document.createElement("tbody");z.appendChild(y);x.libraries.forEach(function(v){var A=
document.createElement("tr");y.appendChild(A);var G=document.createElement("td");G.innerHTML=v.name;A.appendChild(G);G=document.createElement("td");G.innerHTML=v.version;A.appendChild(G)})}else x=document.createElement("p"),x.innerHTML=n.default.substitute(b.default.notebookViewer.tabContent.info.runtimeMessageNoManifest,[z]),D.appendChild(x);return D.outerHTML};w.getContainerLogs=function(x,z){return w.notebookRequest("".concat(x,"/admin/system/containers/").concat(z,"/logs"),"POST",null,{useJsonFormatParam:!0,
useCredentials:!0})};w.getContainerInformation=function(x,z){var D=new q.default,E={useJsonFormatParam:!0,useCredentials:!0};(0,a.default)({containerInfo:w.notebookRequest("".concat(x,"/admin/system/containers/").concat(z),"GET",null,E),containerStats:w.notebookRequest("".concat(x,"/admin/system/containers/").concat(z,"/statistics"),"GET",null,E)}).then(function(C){D.resolve(C)},function(C){D.reject(C)});return D};w.createRuntimeSelect=function(x,z,D,E){void 0===E&&(E=!1);x=x||[];x.sort(function(v,
A){return A.esriProvidedRuntime-v.esriProvidedRuntime});var C=e.default.userRole.canCreateAdvancedNotebooks();C||(x=x.filter(function(v){return!v.requiresAdvancedPrivileges}));var y={esriProvided:0,custom:0};x.forEach(function(v){var A={value:E?w.createNotebookRuntimeProperties(x,null,v.id):v.id,innerHTML:"".concat(v.name).concat(v.version?" - ".concat(w.formatNotebookRuntimeVersion(v.version)):"")};if(w.formatNotebookRuntimeVersion(z)===w.formatNotebookRuntimeVersion(v.version)||!v.esriProvidedRuntime){v.esriProvidedRuntime?
(y.esriProvided++,C?v.requiresAdvancedPrivileges&&!v.supportsGPU&&(A.selected=""):A.selected=""):y.custom++;var G=document.createElement("option");Object.keys(A).forEach(function(F){G.setAttribute(F,A[F])});D.appendChild(G)}});return y};w.showNotebookPreview=function(x,z,D){var E=new q.default;z="".concat(e.default.restBaseUrl,"content/items/").concat(z,"/resources/").concat(D);t.default.request({url:z,content:{"request.preventCache":+new Date}},{useProxy:t.default.shouldUseProxy(z)}).then(function(C){if(C.html){var y=
x.contentWindow.document;y.open();y.write(C.html);y.close();E.resolve({success:!0})}else E.resolve({success:!1,error:C.error})},function(C){E.resolve({success:!1,error:C})});return E};w.canScheduleNotebooks=function(x,z){var D=new q.default,E="Notebook"===(null===z||void 0===z?void 0:z.type),C=w.notebookServerConfigured();E&&C&&w.getNotebookRuntimes().then(function(y){var v,A,G,F=null===(v=z.properties)||void 0===v?void 0:v.notebookRuntimeName,H=w.formatNotebookRuntimeVersion(null===(A=z.properties)||
void 0===A?void 0:A.notebookRuntimeVersion);y=(y||[]).some(function(L){return F===L.name&&H===w.formatNotebookRuntimeVersion(L.version)&&"1.0"!==H&&"2.0"!==H});(null===(G=null===x||void 0===x?void 0:x.userRole)||void 0===G?0:G.canScheduleNotebooks())&&(null===z||void 0===z?0:z.isOwner)&&y&&document.body.classList.add("can-schedule-notebooks");D.resolve(!0)},function(y){D.resolve(!1)});return D};w.getNotebooksInContainer=function(x,z){return w.notebookRequest("".concat(z,"/admin/system/containers/").concat(x,
"/notebooks"),"POST",null,{useJsonFormatParam:!0,useCredentials:!0})};w.getNotebookDataAccessUrl=function(x){return t.default.request({url:"".concat(e.default.restBaseUrl,"content/users/").concat(x,"/generateDirectAccessUrl"),content:{storeType:"notebookWorkspace"}},{usePost:!0})};w.getParametersJson=function(x){return new Promise(function(z,D){t.default.request({url:x,content:{ts:Date.now()}}).then(function(E){E=l.__spreadArray(l.__spreadArray([],E.inputs.map(function(C){C.direction="input";return C}),
!0),E.outputs.map(function(C){C.direction="output";return C}),!0);E.forEach(function(C,y){C.idx=y});z({initialized:!0,parameters:E})},function(E){404===E.code?z({initialized:!1,parameters:[]}):D(E)})})};w.checkIfWebToolsPublished=function(x){var z="".concat(e.default.restBaseUrl,"content/items/").concat(x,"/relatedItems?relationshipType\x3dNotebook2WebTool");return new Promise(function(D,E){t.default.request({url:z}).then(function(C){C.error&&E(C.error.message);return 0<C.total?D(C.relatedItems[0]):
D(null)},function(C){E(C)})})};w.publishAsWebtool=function(x,z){return w.notebookRequest("".concat(x,"/admin/services/createService"),"POST",z,{useJsonFormatParam:!0,useCredentials:!0})};w.getOpenNotebookToken=function(){return(0,k.default)({url:t.default.getSecureUrl("".concat(e.default.restBaseUrl,"oauth2/platformSelf")),content:{f:"json"},headers:{"X-Esri-Auth-Client-Id":u.default.clientIds.ArcGISNotebooks,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},withCredentials:!0},
{disableIdentityLookup:!0,usePost:!0}).then(function(x){return x.token},function(){return""})};w.notebookRequest=function(x,z,D,E){E=E||{};var C={},y={"X-Requested-With":null},v=e.default.userInfo?e.default.userInfo.credential.token:null;if(null===D||void 0===D?0:D.token)v=D.token,delete D.token;E.useJsonFormatParam&&(C.f="json");"GET"===z&&(C=l.__assign(l.__assign({},C),D));E.bypassCustomHeaders||(y["X-Esri-Authorization"]="Bearer ".concat(v),E.useJsonBody&&(y["Content-Type"]="application/json"));
E.contentType&&(y["Content-Type"]=E.contentType);C={data:E.useJsonBody?D?JSON.stringify(D):null:D,method:z,handleAs:"json",headers:Object.keys(y).length?y:null,query:Object.keys(C).length?C:null,preventCache:!1===E.preventCache?!1:!0,withCredentials:E.bypassCustomHeaders?!1:!0};y={url:x};"multipart/form-data"===E.contentType?y.form=D:y.content=D;return E.useProxy?t.default.request(y,{usePost:"POST"===z,useProxy:E.useProxy}):(0,m.default)(x,C)};w.formatAsyncJobStructIfKubernetes=function(x){e.default.portal.isKubernetes()&&
(x.results=x.result,x.startTime=x.starttime,x.endTime=x.endtime,x.jobId=x.jobid,x.type=x.name);return x};return w}()})},"arcgisonline/sharing/geow/Geow":function(){define("require exports tslib ../../esriGeowConfig ../../telemetry ../../map/utils/deleteMapStorageNoFeedback ../util ./Community ../../pages/utils/storage dojo/Deferred dojo/dom-construct dojo/topic dojo/_base/window esri/IdentityManager ../../pages/utils/queryHandler".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k){e=l.__importDefault(e);
c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);n=l.__importDefault(n);r=l.__importDefault(r);k=l.__importStar(k);return function(){function g(){}g.generatetoken=function(b,w,x){var z="".concat(e.default.restBaseUrl.replace("http:","https:"),"generatetoken"),D=document.domain,E=D.split(".");1<E.length&&(D="".concat(E[E.length-2],".").concat(E[E.length-1]));b.referer=
D;this._tokenExpiration=b.expiration;t.default.postJson(b,z,w,x)};g.signup=function(b,w,x){var z="".concat(e.default.restBaseUrl,"community/signup"),D=document.domain,E=D.split(".");1<E.length&&(D="".concat(E[E.length-2],".").concat(E[E.length-1]));b.referer=D;t.default.postJson(b,z,w,x)};g.signin=function(b,w,x){this.generatetoken(b,g.signInHandler(b.username,w,x),x)};g.signInHandler=function(b,w,x,z,D){var E=new Date,C=new Date(E.setMinutes(E.getMinutes()+(this._tokenExpiration||120)));b="".concat(e.default.restBaseUrl,
"community/users/").concat(b,"?token\x3d").concat(z.token);t.default.getJson(t.default.useSSL(b),function(y){y.culture&&(y.culture=y.culture.toLowerCase());var v={email:y.username,username:y.username,privacy:y.privacy,token:z.token,ssl:z.ssl,culture:y.culture,region:y.region,expires:C.getTime()};y.orgId&&y.role&&(v.accountId=y.orgId,v.role=y.role);e.default.userInfo=l.__assign(l.__assign({},e.default.userInfo),v);if(y.preferredView&&null!==y.preferredView)t.default.userPreferences({contentMode:y.preferredView},
e.default.contentModeCookieName);else{var A=t.default.userPreferences(null,e.default.contentModeCookieName);if(null===A||void 0===A?0:A.contentMode){var G=a.default.create,F=G("form",{method:"POST"},n.default.body());G("input",{type:"hidden",name:"preferredView",value:A.contentMode},F);G("input",{type:"hidden",name:"clearEmptyFields",value:"false"},F);d.default.updateProfile(F,function(){})}}v=l.__assign(l.__assign({},v),y);w&&w(v,D);h.default.publish("onSignIn",[v])},x)};g.signInHandler2=function(b,
w,x){w="".concat(e.default.restBaseUrl,"community/users/").concat(b.username,"?token\x3d").concat(b.token);x=new Date;var z=Number(b.expires_in),D=new Date(x.setSeconds(x.getSeconds()+Number(z))),E=b&&!!b.ssl;return t.default.getJson(t.default.useSSL(w)).then(g._hasSecurityQuestion.bind(g)).then(function(C){var y,v={email:C.username,username:C.username,privacy:C.privacy,token:b.token,culture:(null===(y=C.culture)||void 0===y?void 0:y.toLowerCase())||"",region:C.region,expires:D&&D.getTime()||null,
persistent:b.persist?!0:void 0,allSSL:E};C.orgId&&C.role&&(v.accountId=C.orgId,v.role=C.role);e.default.userInfo=l.__assign(l.__assign({},e.default.userInfo),v);C.preferredView&&t.default.userPreferences({contentMode:C.preferredView},e.default.contentModeCookieName);v=l.__assign(l.__assign({},v),C);h.default.publish("onSignIn",[v]);return v})};g._hasSecurityQuestion=function(b){var w=new m.default;b.validateUserProfile=!0;if(!b||b.idpUsername||"arcgisonly"!==b.userType&&"both"!==b.userType||!b.validateUserProfile)w.resolve(b);
else return w="".concat(e.default.restBaseUrl,"community/users/").concat(b.username,"/forgotPassword"),t.default.request({url:w,content:{}}).then(function(x){x&&"enterprise"!==x.provider&&-1===x.securityQuestionIdx&&(b.noSecurityQuestion=!0);return b});return w};g.signout=function(b){var w,x,z=null===(w=e.default.userInfo)||void 0===w?void 0:w.token;w=0===window.location.href.indexOf("http://");e.default.userInfo=null;e.default.userPreferences=null;r.default.destroyCredentials();q.default.removeSessionStorageItem("portalAppClientId");
q.default.removeLocalStorageItem("portalAppClientId");(0,u.default)().then(function(){h.default.publish("onSignOut",[])});var D;b&&(D={client_id:"arcgisonline",redirect_uri:b});z&&e.default.self&&w&&(e.default.self.isPortal||"enterprise"===(null===(x=e.default.self.user)||void 0===x?void 0:x.provider))&&(D=l.__assign(l.__assign({},D||{}),{token:z}));b=b||window.location.href;b=t.default.getSecureUrl("".concat(e.default.restBaseUrl,"oauth2/signout"));window.location.href="".concat(b).concat(D?"?".concat(k.objectToQuery(D)):
"")};g.getSharedCookie=function(){var b=r.default,w={};b&&(b=(b._getAllCookies("esri_auth")||[]).map(function(x){return JSON.parse(x)}).filter(function(x){return!x.portalApp}),w=(null===b||void 0===b?0:b.length)?b.shift():{});return w};g._logCookieChange=function(b,w){b=c.default.init({config:b});!this._cookieChangeLogged&&(null===b||void 0===b?0:b.logEvent)&&(this._cookieChangeLogged=!0,b.logEvent({category:"cookie",label:"Organization changed",details:w?"Yes":"No"}))};g.setCookies=function(b,w){b.isPortal||
e.default.isDebug||!b.urlKey||-1!==window.location.hostname.toLowerCase().indexOf(b.urlKey.toLowerCase())||w&&"arcgisonline"!==w||(window.location.href=window.location.href.replace(window.location.hostname,"".concat(b.urlKey,".").concat(b.customBaseUrl)))};return g}()})},"arcgisonline/map/utils/deleteMapStorageNoFeedback":function(){define(["require","exports","tslib","dojo/Deferred"],function(f,B,l,e){Object.defineProperty(B,"__esModule",{value:!0});e=l.__importDefault(e);B.default=function(){var c=
new e.default;sessionStorage.removeItem("Esri_webmap");c.resolve(!0);return c}})},"arcgisonline/sharing/dijit/Webworker/_AppLauncher":function(){define("require exports tslib ../../../esriGeowConfig ../../../pages/components/ManageBlockedApps/blocked-apps-service ../../../pages/portal/LicenseInfo ../../../pages/utils/storage ../../util dojo/_base/lang dojo/Deferred dojo/promise/all dojo/sniff esri/request dojo/i18n!../../../nls/arcgisonline".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h,n,r){e=l.__importDefault(e);
c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);n=l.__importDefault(n);r=l.__importDefault(r);return function(){function k(g,b){var w;this._browserIsEdge=!1;this.appIconPath="/css/images/app-icons/";this.basePath="js/arcgisonline/sharing/dijit";this._portal=g;this._portalUser=this._portal.portalUser||this._portal.user;this._self=e.default.self||g;this._userProperties=
b;this.userToken=(null===(w=g.credential)||void 0===w?void 0:w.token)||g.token;e.default.userInfo&&e.default.userInfo.isLicensed||this.fetchAndSetupLicenseInfo();this.imgDir=d.default.relativeToExplicitUrl("".concat(this.basePath).concat(this.appIconPath));this.appSwitcherInConfig=e.default.appSwitcherConfigItemQuery?!0:null;this.__displayIntro=!1}k.prototype.getApps=function(g){var b=this;g&&g.noStrings||!r.default||(this.i18n=l.__assign({},r.default.appSwitcher),this._clearText=r.default.configAGOLUtilServices.clear);
return this.queryItems().then(function(w){b.appSwitcherConfig=w.results[0];return b.refreshApps()})};k.prototype.refreshApps=function(g){var b=this;return this._queryItemsAndInitApps(this.appSwitcherConfig,null,null,g).then(function(w){return(new m.default).resolve({provisionedListings:w.provisionedListings,willQueryForItems:w.willQueryForItems})}).then(function(w){return b._init(w.provisionedListings,w.willQueryForItems)})};k.prototype.setApps=function(g){if("string"===typeof g)try{g=JSON.parse(g)}catch(w){return(new m.default).resolve({success:!1})}if(this._appArraysAreValid(g.primaryApps,
g.secondaryApps)){var b=g.revisions||{};return this._saveAppOrderToUserProperties(this.populateDataIdAttributes(g.primaryApps,b.targetUid,b.isNew&&"isNew",b.targetValue||!1),this.populateDataIdAttributes(g.secondaryApps))}return(new m.default).resolve({success:!1})};k.prototype._appArraysAreValid=function(g,b){return g&&b&&Array.isArray(g)&&Array.isArray(b)?g.length+b.length>=this._minNumberOfAppsToSave:!1};k.prototype.fetchAndSetupLicenseInfo=function(){var g=this,b=new m.default;u.default.isOrgUser=
this._portalUser&&this._portalUser.orgId;u.default.portal=this._portal;u.default.portal.user=u.default.portal.user||this._portalUser;return u.default.getLicenseInfo().then(function(){g._portalUser&&(e.default.userInfo=q.default.mixin(g._portalUser,u.default));return b.resolve(!0)})};k.prototype.queryItems=function(g,b){return this.portalQueryItems(e.default.appSwitcherConfigItemQuery,1)};k.prototype._queryItemsAndInitApps=function(g,b,w,x){var z=this,D;g.itemDataUrl=this.formatUrlWithToken("".concat(this._portal.portalUrl,
"content/items/").concat(g.id,"/data"));this._browserInUse=this._getBrowserInUse();this.__changedApp=b&&w?b:null;var E=!this._cookieForQueryingItemsExists(),C=new m.default;if(null===(D=this._portalUser)||void 0===D?0:D.orgId)return(0,a.default)({config:(0,n.default)({url:g.itemDataUrl,content:{f:"json"}}),marketplace:this._getMarketPlaceProvisionedListings(x),preferences:this._getUserProperties(),customOrgApps:this._getApprovedApps()}).then(function(y){var v;z.userProperties=y.preferences.properties||
{};z.userApps=y.config.appSwitcher;z._self.isPortal||z.userApps.apps.unshift(z._getAgoApp());z.approvedApps=(null===(v=y.customOrgApps.approvedApps)||void 0===v?void 0:v.filter(function(A){return!A.hideForNonPrivilegedMember}))||[];z.userProperties.appLauncher||(E=!1,z.__displayIntro=!0);return C.resolve({provisionedListings:y.marketplace,willQueryForItems:E})})};k.prototype._filterBlockedApps=function(g){var b=this;return g.filter(function(w){var x;return!(null===(x=b._blockedApps)||void 0===x?0:
x.some(function(z){return w.itemId&&w.itemId===z.itemid||w.title&&w.title===z.title}))})};k.prototype._mapAppTitles=function(g){var b=this._self.isPortal,w={"Map Viewer Beta":{value:"Map Viewer"},"Operations Dashboard for ArcGIS":{value:"ArcGIS Dashboards Classic",isPortal:!0},"Workforce for ArcGIS":{value:"ArcGIS Workforce",isPortal:!0}};g.forEach(function(x){Object.keys(w).forEach(function(z){var D=w[z];D.isPortal&&!b||x.uid!==z||(x.uid=D.value)})})};k.prototype._init=function(g,b,w,x){var z=this;
return this._getBlockedApps().then(function(){return z._getLicensedApps(g,b)}).then(function(D){z._appDictionary=D[1];var E=new m.default;z.userProperties.appLauncher&&(z.userProperties.appLauncher.primary&&z._mapAppTitles(z.userProperties.appLauncher.primary),z.userProperties.appLauncher.secondary&&z._mapAppTitles(z.userProperties.appLauncher.secondary));if(z.userProperties.appLauncher&&z.userProperties.appLauncher.primary&&z.userProperties.appLauncher.secondary)return z._queryAppItemsForChanges(z.approvedApps,
b).then(function(){z._newAppDictionary=q.default.clone(z._appDictionary);z.primaryApps=z.userProperties.appLauncher.primary.reduce(z._populateAppIdentifiers.bind(z),[]);z.secondaryApps=z.userProperties.appLauncher.secondary.reduce(z._populateAppIdentifiers.bind(z),[]);z.primaryApps=z._filterBlockedApps(z.primaryApps);z.secondaryApps=z._filterBlockedApps(z.secondaryApps);for(var C in z._newAppDictionary)z._newAppDictionary[C].canAccess&&(z._newAppDictionary[C].isNew=!0,z._appDictionary[C]=z._newAppDictionary[C],
z.primaryApps.push(z._newAppDictionary[C]));z._minNumberOfAppsToSave=z.primaryApps.concat(z.secondaryApps).filter(function(y){return y.canAccess}).length;return E.resolve(z._getResponseObject())});z.primaryApps=D[0].slice().sort(function(C,y){return C.label<y.label?-1:1});z.primaryApps=z._filterBlockedApps(z.primaryApps);z.secondaryApps=[];z._minNumberOfAppsToSave=z.primaryApps.filter(function(C){return C.canAccess}).length;return E.resolve(z._getResponseObject())})};k.prototype._getResponseObject=
function(){var g=this.i18n?{text:this.getAppLauncherStrings()}:{};return l.__assign(l.__assign({},g),{primary:this.primaryApps,secondary:this.secondaryApps,ieVersion:this._browserInUse,highContrast:(0,h.default)("highcontrast"),displayIntro:this.__displayIntro})};k.prototype.getAppLauncherStrings=function(){return{clear:this._clearText,confirm:this.i18n.gotIt,intro:this.i18n.dragAndDropIntroText,dragAppsHere:this.i18n.dragAppsHere,removed:this.i18n.noLongerAvailable,removedMessage:this.i18n.removedApp,
showMore:this.i18n.showMore}};k.prototype._getBlockedApps=function(){var g=this;return(0,a.default)({blockedApps:c.default.getBlockedApps(),blockableApps:c.default.getBlockableApps()}).then(function(b){if(!b.blockableApps||!b.blockableApps.length)return[];var w=b.blockableApps||[];b=b.blockedApps||[];g._blockedApps=[];b.forEach(function(x){var z=w.filter(function(D){return D.clientid===x})[0];z&&g._blockedApps.push(z)})})};k.prototype._getLicensedApps=function(g,b){for(var w=this,x,z,D={},E={},C=
this._getAppExceptions(),y=this._getExcludedProvisionedListings(),v=[],A=new m.default,G=this.userApps.apps.length,F=function(M){var Q=H.userApps.apps[M];M=Q.itemId||Q.title;var S=!0,I=null===(x=H._blockedApps)||void 0===x?void 0:x.some(function(P){return Q.itemId&&Q.itemId===P.itemid||Q.title&&Q.title===P.title});D[M]=1;E[M]=Q;if(I||d.default.isArcGISEnterpriseOnKubernetes()&&!1===Q.supportsKubernetes||C[Q.title]&&!C[Q.title].hasAccess(Q.title))return"continue";if(!(Q.privileges&&0!==Q.privileges.length||
Q.isLicensed)||H._portalUser.userLicenseTypeId&&"storytellerut"===H._portalUser.userLicenseTypeId.toLowerCase()&&Q.label&&"storymaps"===Q.label.toLowerCase())return E[M].canAccess=!0,v.push(H._modifySystemAppForView(Q,M)),"continue";if(0<(null===(z=Q.privileges)||void 0===z?void 0:z.length)&&H._portalUser.privileges){for(I=0;I<Q.privileges.length;I++)if(0>H._portalUser.privileges.indexOf(Q.privileges[I])){S=!1;break}if(!Q.isLicensed&&S)return E[M].canAccess=!0,v.push(H._modifySystemAppForView(Q,M)),
"continue"}if(Q.isLicensed&&S)for(S=0;S<g.length;S++)if(M===g[S].itemId||M===g[S].title){E[M].canAccess=!0;v.push(H._modifySystemAppForView(Q,M));break}},H=this,L=0;L<G;L++)F(L);g.forEach(function(M){"Web Mapping Application"===M.type&&!y[M.clientId]&&!D[M.itemId]&&M.url&&M.title&&!D[M.title]&&0>M.typeKeywords.indexOf("hideFromAppSwitcher")&&(M=w._modifyPartnerAppForView(M),E[M.itemId]=M,v.push(M))});return A.resolve([this.approvedApps.map(function(M){var Q=l.__assign(l.__assign({},M.appProperties),
{itemId:M.itemId,webMappingApp:!0,approvedApp:!0,canAccess:!b});E[M.itemId]=Q;return w._modifyWebAppForView(Q)}).concat(v),E])};k.prototype._getApprovedApps=function(g){return this.requestWithAuth("".concat(e.default.restBaseUrl.replace("http://","https://"),"portals/").concat(this._portalUser.orgId,"/approvedApps"),{f:"json",returnAllApps:g})};k.prototype._populateAppIdentifiers=function(g,b,w){var x=this;(w=Object.keys(this._appDictionary).map(function(z){return x._appDictionary[z]}).filter(function(z){return z.itemId===
b.uid||z.title===b.uid}).shift())&&!this._appDictionary[b.uid]&&(b.uid=w.itemId||w.title);if(null===w||void 0===w?0:w.hasBeenPopulated)return g;w?((b.hasChanged||w.hasChanged||!w.canAccess&&!w.ignoreNoAccess)&&this._isAdmin()&&(b.hasChanged||b.ignoreNoAccess||(this.__saveOnLoad=!0),this._appDictionary[b.uid].hasChanged=!0,this._appDictionary[b.uid].ignoreNoAccess=b.ignoreNoAccess),b.isNew&&(this._appDictionary[b.uid].isNew=!0),delete this._newAppDictionary[b.uid]):(w=b,w.canAccess=!1,w.itemId=b.uid,
this._appDictionary[b.uid]=w);this._appDictionary[b.uid].hasBeenPopulated=!0;g.push(w);return g};k.prototype.populateDataIdAttributes=function(g,b,w,x){var z=this;return g.map(function(D,E){var C=z._appDictionary[D],y={label:C.label,uid:D};C.isNew&&(y.isNew=!0);C.hasChanged&&!C.ignoreNoAccess&&(y.hasChanged=!0);b&&D===b&&(g[E-1]===D&&(z.__duplicateValueIndex=E),x?(z._appDictionary[D][w]=x,y[w]=x):(delete z._appDictionary[D][w],delete y[w]));C.canAccess&&C.ignoreNoAccess&&delete y.ignoreNoAccess;return y})};
k.prototype._getImgSrcForWebMappingApp=function(g){if(!g.icon){var b="https://".concat(this._self.portalHostname,"/sharing/rest/content/items/").concat(g.itemId,"/resources/");return"".concat(b).concat(g.appSwitcher.image,"?token\x3d").concat(this.userToken)}return"".concat(e.default.restBaseUrl,"portals/self/resources/").concat(g.icon,"?token\x3d").concat(this.userToken)};k.prototype._modifySystemAppForView=function(g,b){var w;g.image?g.image="".concat(this.imgDir).concat(g.image):g.placeHolderIcon=
"".concat(this.imgDir,"svg-app-icon.svg");0===(null===(w=g.url)||void 0===w?void 0:w.indexOf("../"))&&(w=this._portal.urlKey?"".concat(this._portal.urlKey,".").concat(this._portal.customBaseUrl):this._self.portalHostname,g.url="".concat(location.protocol,"//").concat(w).concat(g.url.substring(2,g.url.length)));delete g.isLicensed;delete g.privileges;g.itemId=b;return g};k.prototype._modifyWebAppForView=function(g){var b,w;(null===(b=g.appSwitcher)||void 0===b?0:b.image)||g.icon?g.image=this._getImgSrcForWebMappingApp(g):
g.placeHolderIcon="".concat(this.imgDir,"svg-app-circle.svg");g.abbr=(null===(w=g.appSwitcher)||void 0===w?void 0:w.abbr)||g.abbreviation;delete g.abbreviation;delete g.appSwitcher;delete g.approvedApp;delete g.webMappingApp;return g};k.prototype._modifyPartnerAppForView=function(g){var b,w,x;g.appSwitcher=null===(b=g.properties)||void 0===b?void 0:b.appSwitcher;b=(null===(w=g.appSwitcher)||void 0===w?void 0:w.image)||g.icon;return{abbr:(null===(x=g.appSwitcher)||void 0===x?void 0:x.abbr)||g.abbreviation,
itemId:g.itemId,canAccess:!0,webMappingApp:!0,image:b?this._getImgSrcForWebMappingApp(g):null,label:g.title||g.label,url:g.url,placeHolderIcon:g.placeHolderIcon||"".concat(this.imgDir,"svg-app-circle.svg")}};k.prototype._saveAppOrderToUserProperties=function(g,b){this.userProperties.appLauncher||(this.userProperties.appLauncher={});if(JSON.stringify(this.userProperties.appLauncher.primary)!==JSON.stringify(g)||JSON.stringify(this.userProperties.appLauncher.secondary)!==JSON.stringify(b))return this.userProperties.appLauncher.primary=
g,this.userProperties.appLauncher.secondary=b,this._updateUserProperties(this.userProperties)};k.prototype._getUserProperties=function(){var g=new m.default;return this._userProperties?(this._userProperties.properties||(this._userProperties={properties:this._userProperties}),g.resolve(this._userProperties)):this.requestWithAuth("".concat(e.default.restBaseUrl,"community/users/").concat(this._portalUser.username,"/properties"),{f:"json"})};k.prototype._getMarketPlaceProvisionedListings=function(g){var b,
w=new m.default;return!g&&(null===(b=e.default.userInfo)||void 0===b?0:b.provisionedListings)?(w.resolve(e.default.userInfo.provisionedListings),w):this.fetchAllResources("".concat(this._portal.portalUrl,"community/users/").concat(this._portalUser.username,"/provisionedListings"),{returnAppClientIds:!0,returnAllProvisions:!0},"provisionedListings")};k.prototype._updateUserProperties=function(g){var b="".concat(e.default.restBaseUrl,"community/users/").concat(this._portalUser.username,"/setProperties"),
w=this._portalUser?{token:this.userToken}:{};g=l.__assign({f:"json",properties:JSON.stringify(g)},w);return(0,n.default)({url:b,content:g},{usePost:!0})};k.prototype._getExcludedProvisionedListings=function(){var g={opsdashboard:1,arcgisWebApps:1,Workforce:1,geoplanner:1,webappbuilder:1,HubforArcGIS:1,appstudio:1,survey123:1,storymaps:1,mapsForOffice:1,mapsForO365:1,mapsForSharePoint:1};this._self.isPortal&&(g.arcgisonline=1);return g};k.prototype._getAppExceptions=function(){var g=this;return{"Open Data":{hasAccess:this._userHasAccessToOpenData.bind(this)},
AppStudio:{hasAccess:this._hasLicense.bind(this,"arcgisWebApps")},"ArcGIS Velocity":{hasAccess:this._userHasAccessToAnalyticsForIoT.bind(this)},"ArcGIS Hub":{hasAccess:this._hasLicense.bind(this,"HubforArcGIS")},"ArcGIS Enterprise Sites":{hasAccess:this._userHasAccessToSites.bind(this)},"ArcGIS Experience Builder":{hasAccess:function(b){return g._isInPortalConfig(b)}},"ArcGIS StoryMaps":{hasAccess:function(b){return g._isInPortalConfig(b)}},"ArcGIS QuickCapture Web Designer":{hasAccess:function(b){return g._isInPortalConfig(b)&&
g._hasLicense("arcgisWebApps")}},"ArcGIS Collector":{hasAccess:this._userHasAccessToCollectorWeb.bind(this)},"ArcGIS Field Maps":{hasAccess:this._userHasAccessToCollectorWeb.bind(this)},"ArcGIS Dashboards":{hasAccess:function(b){return e.default.showCreateDashboard&&g._isInPortalConfig(b)&&g._hasLicense("dashboards")}},"ArcGIS Solutions":{hasAccess:function(b){return!g._self.isPortal||g._isInPortalConfig(b)}},"ArcGIS Workforce":{hasAccess:function(b){return!g._self.isPortal||g._isInPortalConfig(b)}},
"Deep Learning Studio":{hasAccess:function(b){return!g._self.isPortal||g._isInPortalConfig(b)}},"Map Viewer":{hasAccess:function(b){return g._userHasAccessToMapViewer()&&g._isInPortalConfig("ArcGIS Map Viewer")}},"Map Viewer Classic":{hasAccess:function(b){return g._hasLicense("arcgisWebApps")&&g._isInPortalConfig("ArcGIS Map Viewer Classic")}},"Operations Dashboard for ArcGIS":{hasAccess:function(){return g._hasLicense("opsdashboard")&&g._isInPortalConfig("ArcGIS Dashboards Classic")}},"ArcGIS Dashboards Classic":{hasAccess:function(b){return g._hasLicense("opsdashboard")&&
g._isInPortalConfig(b)}},"Ortho Maker":{hasAccess:this._userHasAccessToOrthoMaker.bind(this)},Notebook:{hasAccess:this._hasAccessToNotebooks.bind(this)},"Scene Viewer":{hasAccess:this._hasLicense.bind(this,"arcgisWebApps")},"Story Maps":{hasAccess:this._hasLicense.bind(this,"arcgisWebApps")},Survey123:{hasAccess:this._hasLicense.bind(this,"survey123")},"Track Viewer":{hasAccess:this._userHasAccessToTrackViewer.bind(this)}}};k.prototype._hasAccessToNotebooks=function(g){return this._notebookServerConfigured()&&
this._isInPortalConfig(g)&&this._canCreateNotebooks()};k.prototype._notebookServerConfigured=function(){return this._self.isPortal?e.default.notebookServerEnabled&&this._self.supportsHostedNotebooks:e.default.notebookServerEnabled};k.prototype._canCreateNotebooks=function(){return(this._portalUser.privileges||[]).length?this._portalUser.privileges.some(function(g){return"premium:publisher:createNotebooks"===g}):!1};k.prototype._isInPortalConfig=function(g){return!this._self.isPortal||e.default.showInAppLauncher&&
-1!==e.default.showInAppLauncher.indexOf(g)};k.prototype._userHasAccessToMapViewer=function(){var g=this._self.isPortal&&this._self.portalProperties&&!1===this._self.portalProperties.newMapViewerEnabled;return e.default.newMapViewerEnabled&&!g&&this._hasLicense("arcgisWebApps")};k.prototype._userHasAccessToOpenData=function(){var g;return(null===(g=this._self)||void 0===g?0:g.portalProperties)&&(!this._self.portalProperties.openData||this._self.portalProperties.openData&&!this._self.portalProperties.openData.enabled)?
!1:this._hasLicense("HubforArcGIS")};k.prototype._userHasAccessToAnalyticsForIoT=function(){var g=["portal:publisher:publishFeeds","portal:publisher:publishRealTimeAnalytics","portal:publisher:publishBigDataAnalytics"],b=(this._portalUser.privileges||[]).some(function(x){return-1<g.indexOf(x)}),w=this._hasLicense("velocity");return b&&w};k.prototype._userHasAccessToSites=function(g){return this._isInPortalConfig(g)&&this._hasLicense("HubforArcGIS")};k.prototype._userHasAccessToCollectorWeb=function(g){return this._isInPortalConfig(g)};
k.prototype._userHasAccessToOrthoMaker=function(){var g,b;return(null===(b=null===(g=this._self)||void 0===g?void 0:g.helperServices)||void 0===b?void 0:b.rasterAnalytics)&&this._self.helperServices.orthoMapping&&this._isInPortalConfig("Ortho Maker")};k.prototype._userHasAccessToTrackViewer=function(){var g,b;return(null===(b=null===(g=this._self)||void 0===g?void 0:g.helperServices)||void 0===b?void 0:b.locationTracking)&&e.default.trackViewerEnabled&&this._isInPortalConfig("Track Viewer")};k.prototype._hasLicense=
function(g){var b;return(null===(b=e.default.userInfo)||void 0===b?0:b.isLicensed)?e.default.userInfo.isLicensed(g):!0};k.prototype._getAgoApp=function(){return{image:"arcgis-online.png",label:"ArcGIS Online",title:"ArcGIS Online",url:this.userProperties.landingPage?"".concat(e.default.baseUrl).concat(this.userProperties.landingPage.url):this._portalUser.isOrgAdmin?"organization.html":"index.html"}};k.prototype._getOriginOfUrl=function(g){g=window.location;return"".concat(g.protocol,"//").concat(g.hostname).concat(g.port?
":"+g.port:"")};k.prototype._getNewAppIconFromAppIdAndProperties=function(g,b){if(!this._appDictionary[g])return b=l.__assign(l.__assign({},JSON.parse(b)),{itemId:g,webMappingApp:!0,approvedApp:!0,canAccess:!0,isNew:!0}),this._appDictionary[g]=b};k.prototype._queryAppItemsForChanges=function(g,b){var w=this,x=new m.default,z="".concat(e.default.restBaseUrl,"search?");if(!b||!g||!g.length)return x.resolve({success:!0});z=z+"f\x3djson\x26num\x3d100\x26q\x3d id:("+"".concat(g.map(function(D){return'"'.concat(D.itemId,
'"')}).join(" OR "),")");return this.requestWithAuth(z,{f:"json"}).then(function(D){var E;0<(null===(E=D.results)||void 0===E?void 0:E.length)&&D.results.forEach(function(C){var y=w._appDictionary[C.id];y.canAccess=1;y.hasChanged=y.url!==C.url?C.url:0});return x.resolve({success:!0})})};k.prototype._getAppsFromLocalStorage=function(){if(!this.__localStorageIsAvailable)return!1;var g=localStorage.getItem("APSW-primary"),b=localStorage.getItem("APSW-secondary");return g?{primaryApps:g,secondaryApps:b}:
!1};k.prototype._saveAppsToLocalStorage=function(g,b){this.__localStorageIsAvailable&&(localStorage.setItem("APSW-primary",JSON.stringify(g)),localStorage.setItem("APSW-secondary",JSON.stringify(b)))};k.prototype._cookieForQueryingItemsExists=function(){var g=t.default.getCookie("APSW-query",!0);if((null===g||void 0===g?void 0:g.expires)>(new Date).setHours((new Date).getHours()))return!0;g={expires:(new Date).setHours((new Date).getHours()+5)};t.default.setCookie("APSW-query",g,{path:"/",domain:document.domain,
sameSite:"Strict"},!0);return!1};k.prototype.requestWithAuth=function(g,b){b=this.userToken?l.__assign(l.__assign({},b),{token:this.userToken}):b;return(0,n.default)({url:g,content:b})};k.prototype.fetchAllResources=function(g,b,w){var x=new m.default,z=1,D=[],E,C,y,v,A={f:"json",token:this.userToken};b=b?l.__assign(l.__assign({},b),A):A;w=w||"results";b.start=z;b.num||(b.num=100);(0,n.default)({url:g,content:b}).then(function(G){if(G&&G[w]){D=D.concat(G[w]);z=G.nextStart;E=G.total-D.length;C=Math.ceil(E/
100);y=[];for(v=0;v<C;v++)b.start=z+100*v,y.push(d.default.request({url:g,content:b}));(0,a.default)(y).then(function(F){F.forEach(function(H){D=D.concat(H[w])});x.resolve(D)},function(F){x.reject(F)})}else x.resolve(D)},function(G){x.reject(G)});return x};k.prototype._isAdmin=function(){return this._portalUser.role&&("org_admin"===this._portalUser.role||"account_admin"===this._portalUser.role)};k.prototype.portalQueryItems=function(g,b){g={num:b||10,start:0,sortField:"title",sortOrder:"asc",f:"json",
q:g};b="";b=this._portal.urlKey?"https://".concat(this._portal.urlKey,".").concat(this._portal.customBaseUrl,"/sharing/rest/search"):"".concat(this._portal.url,"search");return this.requestWithAuth(b,g)};k.prototype.useSSL=function(g,b){if(this._self.isPortal){var w=this.getLocation(b);if(-1<this._self.portalHostname.toLowerCase().indexOf(w.hostname.toLowerCase())&&w.port&&"80"!==w.port&&"443"!==w.port)return b=w.pathname,b=0===b.indexOf("/")?b:"/".concat(b),this._self.allSSL||-1<g.indexOf("https:")?
"https://".concat(w.hostname).concat(this._self.httpsPort&&"443"!==this._self.httpsPort?":".concat(this._self.httpsPort):"").concat(b).concat(w.search):"http://".concat(w.hostname).concat(this._self.httpPort&&"80"!==this._self.httpPort?":".concat(this._self.httpPort):"").concat(b).concat(w.search)}return-1!==g.indexOf("https:")||this._self.allSSL?b.replace("http:","https:"):b};k.prototype.getLocation=function(g){var b=document.createElement("a");b.href=g;return{protocol:b.protocol,hostname:b.hostname,
port:b.port,pathname:b.pathname,search:b.search,hash:b.hash,host:b.host}};k.prototype.formatUrlWithToken=function(g){var b=this.userToken;return-1!==g.indexOf("null")?null:this.useSSL(window.location.protocol,b?"".concat(g).concat(-1!==g.indexOf("?")?"\x26":"?","token\x3d").concat(b):g)};k.prototype._checkIfLocalStorageIsAvailable=function(){if("object"===typeof localStorage)try{return localStorage.setItem("testLocalStorage","1"),localStorage.removeItem("testLocalStorage"),!0}catch(g){return!1}};
k.prototype._getBrowserInUse=function(){return 10>=(0,h.default)("ie")||6<(0,h.default)("trident")?"ie11":(0,h.default)("edge")?"edge":null};return k}()})},"dojo/debounce":function(){define([],function(){return function(f,B){var l;return function(){l&&clearTimeout(l);var e=this,c=arguments;l=setTimeout(function(){f.apply(e,c)},B)}}})},"arcgisonline/sharing/dijit/SiteFooter":function(){define("require exports tslib ../../esriGeowConfig ../../pages/utils/dom ../../pages/utils/organization ../util ../geow/Account ../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dojo/dom dojo/dom-construct dojo/i18n!../../nls/arcgisonline dojo/string dojo/topic dojo/text!./templates/SiteFooter.html dojo/_base/lang esri/lang".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);n=l.__importDefault(n);r=l.__importDefault(r);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);w=l.__importDefault(w);x=l.__importDefault(x);return function(){function z(D,E){this.templateString=b.default;this.isTroubleshootPage=
this.isSignInPage=!1}z.prototype.postMixInProperties=function(){this.i18n=w.default.mixin({},r.default.common);w.default.mixin(this.i18n,r.default.siteFooter);w.default.mixin(this.i18n,r.default.supportPage.helpLabel)};z.prototype.postCreate=function(){var D=window.location.pathname.toLowerCase();this.isSignInPage=-1!==D.indexOf(e.default.signin);this.isTroubleshootPage=-1!==D.indexOf("troubleshoot.html");this.addEventListeners()};z.prototype.startup=function(){this._loadLinks()};z.prototype.refresh=
function(){n.default.destroy("".concat(this.id,"_links"));n.default.create("span",{id:"".concat(this.id,"_links"),className:"esriItemLinks"},this.domNode);this._loadLinks()};z.prototype.addEventListeners=function(){this.own(g.default.subscribe("contact-us-link/update",this.handleContactUsLinkUpdate.bind(this)))};z.prototype.handleContactUsLinkUpdate=function(D){var E=h.default.byId("".concat(this.id,"_links")),C=window.location.href,y=!1,v=null;-1<C.indexOf("viewer.html")&&!u.default.isMobile()&&
-1===C.indexOf("returnUrl")&&(y=!0);v=y?n.default.create("span",{innerHTML:"\x26nbsp;. "}):n.default.create("span",{innerHTML:""});x.default.isDefined(D)||(D={visible:!1,url:""});(C=h.default.byId("".concat(this.id,"_customContactUs")))?(c.default.showHide(C,D.visible),C.href=D.url):(C=n.default.create("a",{href:D.url,innerHTML:this.i18n.customContactUs,id:"".concat(this.id,"_customContactUs"),class:D.visible?"footer__contact-us":"footer__contact-us hide"}),D=h.default.byId("".concat(this.id,"_contactEsri")),
x.default.isDefined(D)?(n.default.place(C,D,"after"),n.default.place(v,D,"after")):(0<e.default.footerLinks.length&&n.default.place(v,E,"last"),n.default.place(C,E,"last")))};z.prototype._getTitle=function(D){return-1<(null===D||void 0===D?void 0:D.indexOf("${"))&&-1<D.indexOf("}")?k.default.substitute(D,{i18n:this.i18n}):D};z.prototype._loadLinks=function(){var D=this;d.default.getSelf(function(E){var C,y,v,A=t.default.getUser(),G=E.isPortal,F=h.default.byId("".concat(D.id,"_links")),H=window.location.href,
L=!1,M=null;-1<H.indexOf("?useExisting\x3d1")&&(H=H.substring(0,H.length-14));-1<H.indexOf("viewer.html")&&!u.default.isMobile()&&-1===H.indexOf("returnUrl")&&(L=!0);(e.default.footerLinks||[]).forEach(function(S){var I="${i18n.legal}"===(null===S||void 0===S?void 0:S.title),P=!!(I&&x.default.isDefined(A)&&x.default.isDefined(A.accountId)),J="${i18n.help}"===(null===S||void 0===S?void 0:S.title)||"support.html"===(null===S||void 0===S?void 0:S.url),U=!(J&&!x.default.isDefined(A)&&x.default.isDefined(E.access)&&
"public"===E.access&&(G||!G&&x.default.isDefined(E.customBaseUrl)));P=!I&&!J||I&&!P||J&&!U;M&&P&&n.default.place(M,F,"last");I=D._getTitle(S.title);if(S.url){-1===S.url.indexOf("http")&&-1===S.url.indexOf("mailto:")&&L&&(S.url="support.html"===S.url?E.helpBase||e.default.baseUrl+S.url:e.default.baseUrl+S.url);if("${i18n.help}"===S.title||"support.html"===S.url)S.url=E.helpBase;S=n.default.create("a",{href:S.url,target:"_blank",innerHTML:I});P&&n.default.place(S,F,"last")}else G&&"contactUs"===S.type?
(P=e.default.portalName||"ArcGIS.com",J=escape(H),S="mailto:".concat(S.email),S+='?subject\x3d"A comment about '.concat(P,'"'),S+='\x26body\x3d"I have the following comment about the '.concat(P," Web site. %0AReferring page: ").concat(J,' %0A %0A(Please provide as much detail as possible. Note: Contact Us is not meant for obtaining technical support or general product information.)"'),S=n.default.create("a",{id:"".concat(D.id,"_contactEsri"),href:S,innerHTML:I}),n.default.place(S,F,"last")):"reportAbuse"===
S.type&&(J=escape(H),S="mailto:".concat(S.email,'?subject\x3d"Concerns about an item"'),S+='\x26body\x3d"I have concerns about the following. %0AReferring page: '.concat(J," %0A %0A(Please describe your concerns. If you have concerns about a particular item, it's best to click the 'Report Abuse' link while viewing the item description. Doing so will include the URL to the specific item in this e-mail.)\""),S=n.default.create("a",{href:S,innerHTML:I}),n.default.place(S,F,"last"));M=L?n.default.create("span",
{innerHTML:"\x26nbsp;. "}):n.default.create("span",{innerHTML:""})});var Q=null!==(v=null===(y=null===(C=E.portalProperties)||void 0===C?void 0:C.links)||void 0===y?void 0:y.contactUs)&&void 0!==v?v:{visible:!1,url:""};(C=h.default.byId("".concat(D.id,"_customContactUs")))?(c.default.showHide(C,Q.visible),C.href=Q.url):(C=n.default.create("a",{href:Q.url,innerHTML:D.i18n.customContactUs,id:"".concat(D.id,"_customContactUs"),class:Q.visible?"footer__contact-us":"footer__contact-us hide"}),Q=h.default.byId("".concat(D.id,
"_contactEsri")),x.default.isDefined(Q)?(n.default.place(C,Q,"after"),n.default.place(M,Q,"after")):(0<e.default.footerLinks.length&&n.default.place(M,F,"last"),n.default.place(C,F,"last")))})};return z=l.__decorate([(0,q.default)(a.default,m.default)],z)}()})},"arcgisonline/sharing/dijit/SiteFooterMap":function(){define("require exports tslib ./SiteFooter ../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dojo/text!./templates/SiteFooterMap.html".split(" "),function(f,B,l,e,c,
u,t,d){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);return function(){function q(){this.templateString=d.default}return q=l.__decorate([(0,c.default)(t.default,u.default,e.default)],q)}()})},"arcgisonline/sharing/dijit/SignUpInternal":function(){define("require exports tslib ../../esriGeowConfig ../../pages/pageUtil ../../pages/dijit/PasswordStrength ../../pages/portal/Portal ../../pages/utils/dom ../../pages/utils/validation ../geow/Account ../geow/Geow ./Role ../util ../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/dom-attr dojo/dom-construct dojo/_base/kernel dojo/string dojo/i18n!../../nls/arcgisonline dojo/_base/lang dojo/on dojo/text!./templates/SignUpInternal.html dojo/topic esri/config esri/lang esri/request ../../pages/utils/queryHandler".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r,k,g,b,w,x,z,D,E,C,y,v,A,G,F,H,L){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);n=l.__importDefault(n);r=l.__importDefault(r);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);w=l.__importDefault(w);x=l.__importDefault(x);z=l.__importDefault(z);D=l.__importDefault(D);E=l.__importDefault(E);
C=l.__importDefault(C);y=l.__importDefault(y);v=l.__importDefault(v);A=l.__importDefault(A);G=l.__importDefault(G);F=l.__importDefault(F);H=l.__importDefault(H);L=l.__importStar(L);return function(){function M(Q,S){this.templateString=v.default;this.widgetsInTemplate=!0;this.i18n=l.__assign(l.__assign(l.__assign({},E.default.common),E.default.signUpInternalWidget),{securityQuestions:E.default.securityQuestions,passwordTooWeak:E.default.myOrganization.inviteMembers.passwordTooWeak,usernameTooShort:E.default.organizationInvite.step2Create.invalid.usernameTooShort,
usernameTooLong:E.default.organizationInvite.step2Create.invalid.usernameTooLong,usernameInvalidChars:E.default.organizationInvite.step2Create.invalid.usernameInvalidChars,usernameStartEndChars:E.default.organizationInvite.step2Create.invalid.usernameStartEndChars});this.redirectUrl="".concat(e.default.baseUrl.replace("https:","http:"),"index.html");this.orgRedirectUrl="".concat(e.default.baseUrl.replace("https:","http:"),"organization.html");this.isValidUsername=!1;this.accountMode="arcgis"}M.prototype.postCreate=
function(){this.inherited(arguments);this.fetchPasswordPolicy()};M.prototype.startup=function(){var Q=this;this.inherited(arguments);m.default.getSelf(function(S){Q._portal=new t.default({url:e.default.restBaseUrl,self:C.default.clone(S)});Q._portal.on("load",function(){Q.setupPasswordStrength()});G.default.defaults.io.corsEnabledServers.push(e.default.DEPLOY_ROOT);G.default.defaults.io.corsEnabledServers.push("http://".concat(location.host));G.default.defaults.io.corsEnabledServers.push("https://".concat(location.host));
G.default.defaults.io.proxyUrl=e.default.proxyUrl;C.default.mixin(Q,L.queryToObject(window.location.search.slice(1)));Q._svcUrl=e.default.restBaseUrl+(e.default.restBaseUrl.lastIndexOf("/")===e.default.restBaseUrl.length-1?"":"/");Q._communityUri="".concat(Q._svcUrl,"community/");w.default.set("pagetitle","innerHTML",Q.i18n.signUpInternalTitle);Q.setupQuestions();Q.loadConnections();Q.checkInvitation();setTimeout(function(){Q._firstname.focus()},50);A.default.subscribe("registerUser",Q.registerUser.bind(Q));
Q.adjustNameRows()})};M.prototype.loadConnections=function(){this.own((0,y.default)(this._firstname,"change",this.validFirstName.bind(this)),(0,y.default)(this._lastname,"change",this.validLastName.bind(this)),(0,y.default)(this._email,"change",this.validEmail.bind(this)),(0,y.default)(this._confirmEmail,"change",this.validConfirmEmail.bind(this)),(0,y.default)(this._username,"change",this.usernameChange.bind(this)),(0,y.default)(this._pwd,"change",this.validPassword.bind(this)),(0,y.default)(this._pwd,
"keyup",this.validPassword.bind(this)),(0,y.default)(this._verifyPwd,"change",this.validVerifyPassword.bind(this)),(0,y.default)(this._identityQuestion,"change",this.identityQuestionChange.bind(this)),(0,y.default)(this._identityAnswer,"change",this.validIdentityAnswer.bind(this)),(0,y.default)(this._form,"submit",this.initiateSignUp.bind(this)),(0,y.default)(this._cancelBtn,"click",this.cancel.bind(this)))};M.prototype.adjustNameRows=function(){"ja"===z.default.locale&&x.default.place("first-name-block",
"last-name-block","after")};M.prototype.checkInvitation=function(){var Q=this;this.invitation&&this.fetchInvitation().then(function(S){Q.invitationOrgName=S.account.name},this.fetchInvitationError.bind(this))};M.prototype.setupPasswordStrength=function(){this._strengthMeter=new u.default({baseClass:"leader-half",portal:this._portal},this.domNode.querySelector(".js-strength-meter"));this._strengthMeter.update(this._pwd.value)};M.prototype.setupQuestions=function(){var Q=this;this.identityQuestions=
[{id:0,name:this.i18n.securityQLabel},{id:1,name:this.i18n.securityQuestions[1]},{id:2,name:this.i18n.securityQuestions[2]},{id:3,name:this.i18n.securityQuestions[3]},{id:4,name:this.i18n.securityQuestions[4]},{id:5,name:this.i18n.securityQuestions[5]},{id:6,name:this.i18n.securityQuestions[6]},{id:7,name:this.i18n.securityQuestions[7]},{id:8,name:this.i18n.securityQuestions[8]},{id:9,name:this.i18n.securityQuestions[9]},{id:10,name:this.i18n.securityQuestions[10]},{id:11,name:this.i18n.securityQuestions[11]},
{id:12,name:this.i18n.securityQuestions[12]},{id:13,name:this.i18n.securityQuestions[13]},{id:14,name:this.i18n.securityQuestions[14]}];this.identityQuestions.forEach(function(S){x.default.create("option",{value:S.id,innerHTML:S.name},Q._identityQuestion)})};M.prototype.fetchPasswordPolicy=function(){var Q=this,S="".concat(n.default.getSecureUrl(e.default.restBaseUrl),"portals/self/securityPolicy/passwordPolicy");n.default.request({url:S}).then(function(I){Q._passwordPolicy=!I||I.code||I.messageCode?
null:I})};M.prototype.registerUser=function(Q){var S=this;Q=D.default.trim(this._firstname.value);var I=D.default.trim(this._lastname.value),P=D.default.trim(this._email.value),J=n.default.stripHTML(D.default.trim(this._username.value)),U=D.default.trim(this._pwd.value),Y=D.default.trim(this._identityAnswer.value),aa={fullname:"ja"===z.default.locale?"".concat(I," ").concat(Q):"".concat(Q," ").concat(I),firstname:Q,lastname:I,email:P,username:J,password:U,securityQuestionIdx:this._identityQuestionID,
securityAnswer:Y,invitationId:void 0,provider:void 0};this.invitation&&(aa.invitationId=this.invitation,aa.provider=this.accountMode);this.signUp(aa).then(function(la){null!=la.error&&""!==la.error?(d.default.disableNode(S._createAccountBtn,!1),w.default.set(S._createAccountBtn,"innerHTML",S.i18n.createAcc),la.error.messageCode&&"COM_1054"===la.error.messageCode?c.default.createConfirmationDialog({strings:{title:S.i18n.errorTitle,description:S.i18n.error.maxUsers},hideCancel:!0,autoCloseOnOk:!0}):
S.handleError(la)):S.invitation?a.default.signInHandler(aa.username,S.acceptInvitation.bind(S,aa),S.signInError.bind(S),la):a.default.signInHandler(aa.username,S.signIn.bind(S),S.signInError.bind(S),la)},this.signUpError.bind(this))};M.prototype.signUp=function(Q){Q=l.__assign({},Q);var S="".concat(e.default.restBaseUrl,"community/signup"),I=document.domain,P=I.split(".");1<P.length&&(I="".concat(P[P.length-2],".").concat(P[P.length-1]));Q.referer=I;Q.f="json";return(0,H.default)({url:S,content:Q,
headers:{"X-Esri-Auth-Client-Id":"arcgisonline","X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")}},{disableIdentityLookup:!0,usePost:!0})};M.prototype.signIn=function(){e.default.self=null;m.default.getSelf(this.routeUser.bind(this))};M.prototype.routeUser=function(Q){var S=n.default.getUser(),I=new h.default({portalUser:Q.user||{}}),P=L.queryToObject(window.location.search.slice(1)).returnUrl;if(!Q||Q.code||Q.message)null!==P?window.location.href=P:(S="".concat(n.default.getHttpUrl(),
"user.html?newUser\x3dtrue"),window.location.href=n.default.getSecureUrl(S));else{Q=Q.allSSL;var J=n.default.usePortalSSL();this.redirectUrl="".concat(n.default.getHttpUrl(),"index.html");this.orgRedirectUrl="".concat(n.default.getHttpUrl(),"organization.html");P?(J=-1<P.indexOf("https:"),window.location.href=Q||J?n.default.getSecureUrl(P):P):"account_admin"===S.role&&(!e.default.self.restrictOrganizationPageToAdmin&&I.canViewOrgUsers()||e.default.self.restrictOrganizationPageToAdmin&&I.isAdmin())?
window.location.href=Q||J?n.default.getSecureUrl(this.orgRedirectUrl):this.orgRedirectUrl:window.location.href=Q||J?n.default.getSecureUrl(this.redirectUrl):this.redirectUrl}};M.prototype.acceptInvitation=function(Q){var S=this;m.default.acceptInvitation(this.invitation,function(){S.signIn()},this.acceptFail.bind(this))};M.prototype.initiateSignUp=function(Q){var S=this;Q&&Q.preventDefault();this.validates().then(function(I){I&&(d.default.disableNode(S._createAccountBtn,!0),w.default.set(S._createAccountBtn,
"innerHTML",S.i18n.creatingAcc),S.registerUser(!0))})};M.prototype.cancel=function(){var Q="".concat(e.default.baseUrl.replace("http:","https:")).concat(e.default.signin);this.invitation&&(Q+="?invitation\x3d".concat(this.invitation));window.location.href=Q};M.prototype.fetchInvitationError=function(Q){(null===Q||void 0===Q?0:Q.code)&&Q.message&&403===Q.code?(Q="\x3cp\x3e".concat(this.i18n.emailInvitation,"\x3c/p\x3e\x3cp\x3e").concat(this.i18n.clickOkSignIn,"\x3c/p\x3e"),c.default.createConfirmationDialog({strings:{title:this.i18n.notice,
description:Q},hideCancel:!0,autoCloseOnOk:!0,renderHtmlDescription:!0,onOk:function(){window.location.href="".concat(e.default.baseUrl.replace("http:","https:")).concat(e.default.signin)}})):(null===Q||void 0===Q?0:Q.code)&&Q.message&&400===Q.code?(Q="\x3cp\x3e".concat(this.i18n.invitationUsedMsg,"\x3c/p\x3e\x3cp\x3e").concat(this.i18n.clickOkSignIn,"\x3c/p\x3e"),c.default.createConfirmationDialog({strings:{title:this.i18n.notice,description:Q},hideCancel:!0,autoCloseOnOk:!0,renderHtmlDescription:!0,
onOk:function(){window.location.href="".concat(n.default.getSecureUrl()).concat(e.default.signin)}})):(null===Q||void 0===Q?void 0:Q.id)===this.invitation?this.invitationOrgName=Q.account.name:this.invitation=null};M.prototype.acceptFail=function(){var Q=this;c.default.createConfirmationDialog({strings:{title:this.i18n.unableToJoin,description:this.i18n.problemJoining},hideCancel:!0,autoCloseOnOk:!0,onOk:function(){d.default.disableNode(Q._createAccountBtn,!1);w.default.set(Q._createAccountBtn,"innerHTML",
Q.i18n.createAcc)}})};M.prototype.usernameChange=function(){var Q=n.default.stripHTML(D.default.trim(this._username.value)),S=this.handleCheckUsername.bind(this);m.default.checkUsernames([n.default.stripHTML(Q)],S,S)};M.prototype.identityQuestionChange=function(){var Q=this._identityQuestion.value;this._identityQuestionID=Q?parseInt(Q,10):void 0;this.validIdentityQuestion()};M.prototype.handleCheckUsername=function(Q){this.isValidUsername=!1;var S=n.default.stripHTML(D.default.trim(this._username.value));
!Q||Q.code||Q.message?Q.messageCode&&"DB_0006"===Q.messageCode?this.showErrorMessage(this.i18n.error.restrictedCharacters):S?this.showErrorMessage(this.i18n.error.checkingUsername):this.isValidUsername=!0:0<(null===Q||void 0===Q?void 0:Q.usernames.length)&&S===Q.usernames[0].suggested&&(this.isValidUsername=!0);this.validUsername()};M.prototype.signUpError=function(Q){d.default.disableNode(this._createAccountBtn,!1);w.default.set(this._createAccountBtn,"innerHTML",this.i18n.createAccount);var S=this.i18n.unableCreateAccount,
I=this.i18n.contactAdmin;-1<Q.message.indexOf("already registered")&&(I=this.i18n.error.emailInUse);-1<Q.message.indexOf("Username '")&&-1<Q.message.indexOf("' not available.")&&(I=this.i18n.error.usernameInValid);Q='\x3cb style\x3d"font-size:1.2em;line-height:30px;"\x3e'.concat(S,'\x3c/b\x3e\x3cbr\x3e\x3cspan style\x3d"color:#000000;"\x3e').concat(I,"\x3c/span\x3e\x3cbr\x3e\x26nbsp;");this.showErrorMessage(Q)};M.prototype.signInError=function(){d.default.disableNode(this._createAccountBtn,!1);w.default.set(this._createAccountBtn,
"innerHTML",this.i18n.createAccount);var Q='\x3cb style\x3d"font-size:1.2em;line-height:30px;"\x3e'.concat(this.i18n.unableSignAuto,'\x3c/b\x3e\x3cbr\x3e\x3cspan style\x3d"color:#000000;"\x3e').concat(this.i18n.pleaseTrySignManually,"\x3c/span\x3e\x3cbr\x3e\x26nbsp;");this.showErrorMessage(Q)};M.prototype.showErrorMessage=function(Q){c.default.createConfirmationDialog({strings:{title:this.i18n.errorTitle,description:Q},renderHtmlDescription:!0,hideCancel:!0,autoCloseOnOk:!0})};M.prototype.usernameContainsAlphaNumeric=
function(Q){var S=/^[a-zA-Z0-9@_.]+$/g;return Q&&!!S.test(Q)};M.prototype.usernameValidStartEnd=function(Q){var S=/^([a-zA-Z0-9_][a-zA-Z0-9@_\-.]+[a-zA-Z0-9_])?$/g;return Q&&S.test(Q)};M.prototype.validFirstName=function(){var Q=D.default.trim(this._firstname.value);q.default.clearState([this._firstname,this._firstnameError]);if(F.default.isDefined(Q)&&""!==Q)return q.default.setValidState(this._firstname),!0;q.default.setInvalidState(this._firstname,this._firstnameError,this.i18n.error.firstNameReqd);
return!1};M.prototype.validLastName=function(){var Q=D.default.trim(this._lastname.value);q.default.clearState([this._lastname,this._lastnameError]);if(F.default.isDefined(Q)&&""!==Q)return q.default.setValidState(this._lastname),!0;q.default.setInvalidState(this._lastname,this._lastnameError,this.i18n.error.lastNameReqd);return!1};M.prototype.validEmail=function(){var Q=D.default.trim(this._email.value);q.default.clearState([this._email,this._emailError]);if(F.default.isDefined(Q)&&0!==Q.length&&
n.default.isValidEmailAddress(Q))return q.default.setValidState(this._email),!0;q.default.setInvalidState(this._email,this._emailError,this.i18n.error.emailReqd);return!1};M.prototype.validConfirmEmail=function(){var Q=D.default.trim(this._email.value),S=D.default.trim(this._confirmEmail.value);q.default.clearState([this._confirmEmail,this._confirmEmailError]);if(F.default.isDefined(S)&&0!==S.length&&n.default.isValidEmailAddress(S)){if(Q!==S)return q.default.setInvalidState(this._confirmEmail,this._confirmEmailError,
this.i18n.error.confirmEmailNoMatch),!1;q.default.setValidState(this._confirmEmail);return!0}q.default.setInvalidState(this._confirmEmail,this._confirmEmailError,this.i18n.error.confirmEmailReqd);return!1};M.prototype.validUsername=function(){var Q=n.default.stripHTML(D.default.trim(this._username.value));q.default.clearState([this._username,this._usernameError]);if(F.default.isDefined(Q)&&""!==Q){if(6>Q.length)return q.default.setInvalidState(this._username,this._usernameError,this.i18n.usernameTooShort),
!1;if(128<Q.length)return q.default.setInvalidState(this._username,this._usernameError,this.i18n.usernameTooLong),!1;if(this.usernameContainsAlphaNumeric(Q)){if(this.usernameValidStartEnd(Q)){if(this.isValidUsername)return q.default.setValidState(this._username),!0;Q=D.default.substitute(this.i18n.error.usernameInUse,{username:Q,linkStart:'\x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"'.concat(n.default.getSecureUrl(e.default.baseUrl)).concat(e.default.signin).concat(window.location.search,
'"\x3e'),linkEnd:"\x3c/a\x3e\x3c/span\x3e"});q.default.setInvalidState(this._username,this._usernameError,Q);return!1}q.default.setInvalidState(this._username,this._usernameError,this.i18n.usernameStartEndChars)}else return q.default.setInvalidState(this._username,this._usernameError,this.i18n.usernameInvalidChars),!1}else return q.default.setInvalidState(this._username,this._usernameError,this.i18n.error.userReqd),!1};M.prototype.validPassword=function(){var Q=this,S=n.default.stripHTML(D.default.trim(this._username.value)),
I=D.default.trim(this._pwd.value);q.default.clearState([this._pwd,this._pwdError]);return this._strengthMeter.update(I).then(function(P){if(F.default.isDefined(I)&&""!==I){if(Q._passwordPolicy){if(!P.isValidStrength)return q.default.setInvalidState(Q._pwd,Q._pwdError,Q.i18n.passwordTooWeak),!1;if(P.isValid){if(S.toLowerCase()===I.toLowerCase())return q.default.setInvalidState(Q._pwd,Q._pwdError,Q.i18n.passwordNotToPolicy),!1;q.default.setValidState(Q._pwd);return!0}if(!1===P.longEnough)return q.default.setInvalidState(Q._pwd,
Q._pwdError,D.default.substitute(Q.i18n.error.passwordLength,{num:Q._passwordPolicy.minLength})),!1;if(!1===P.enoughLetter)return q.default.setInvalidState(Q._pwd,Q._pwdError,D.default.substitute(Q.i18n.error.passwordLetter,{num:Q._passwordPolicy.minLetter})),!1;if(!1===P.enoughUpper)return q.default.setInvalidState(Q._pwd,Q._pwdError,D.default.substitute(Q.i18n.error.passwordUpper,{num:Q._passwordPolicy.minUpper})),!1;if(!1===P.enoughLower)return q.default.setInvalidState(Q._pwd,Q._pwdError,D.default.substitute(Q.i18n.error.passwordLower,
{num:Q._passwordPolicy.minLower})),!1;if(!1===P.enoughDigit)return q.default.setInvalidState(Q._pwd,Q._pwdError,D.default.substitute(Q.i18n.error.passwordDigit,{num:Q._passwordPolicy.minDigit})),!1;if(!1===P.enoughOther)return q.default.setInvalidState(Q._pwd,Q._pwdError,D.default.substitute(Q.i18n.error.passwordOther,{num:Q._passwordPolicy.minOther})),!1;q.default.setValidState(Q._pwd);return!0}if(P.isValidStrength){if(8>I.length||28<I.length)return q.default.setInvalidState(Q._pwd,Q._pwdError,Q.i18n.error.invalidPassword),
!1;if(S.toLowerCase()===I.toLowerCase())return q.default.setInvalidState(Q._pwd,Q._pwdError,Q.i18n.passwordNotToPolicy),!1;q.default.setValidState(Q._pwd);return!0}q.default.setInvalidState(Q._pwd,Q._pwdError,Q.i18n.passwordTooWeak);return!1}q.default.setInvalidState(Q._pwd,Q._pwdError,Q.i18n.error.passReqd);return!1})};M.prototype.validVerifyPassword=function(){var Q=D.default.trim(this._pwd.value),S=D.default.trim(this._verifyPwd.value);q.default.clearState([this._verifyPwd,this._verifyPwdError]);
if(Q!==S)return q.default.setInvalidState(this._verifyPwd,this._verifyPwdError,this.i18n.error.passwordsNotMatch),!1;q.default.setValidState(this._verifyPwd);return!0};M.prototype.validIdentityQuestion=function(){q.default.clearState([this._identityQuestion,this._identityQuestionError]);if(!this._identityQuestionID||1>this._identityQuestionID)return q.default.setInvalidState(this._identityQuestion,this._identityQuestionError,this.i18n.error.questionSelection),!1;q.default.setValidState(this._identityQuestion);
return!0};M.prototype.validIdentityAnswer=function(){var Q=D.default.trim(this._identityAnswer.value);q.default.clearState([this._identityAnswer,this._identityAnswerError]);if(F.default.isDefined(Q)&&""!==Q){if(60<Q.length)return q.default.setInvalidState(this._identityAnswer,this._identityAnswerError,this.i18n.error.answerTooLong),!1;q.default.setValidState(this._identityAnswer);return!0}q.default.setInvalidState(this._identityAnswer,this._identityAnswerError,this.i18n.error.answerIsBlank);return!1};
M.prototype.validates=function(){var Q=this,S=[this.validFirstName(),this.validLastName(),this.validEmail(),this.validConfirmEmail(),this.validUsername(),this.validVerifyPassword(),this.validIdentityQuestion(),this.validIdentityAnswer()].every(function(I){return!0===I});return this.validPassword().then(function(I){(S=S&&I)||q.default.focusFirstInvalidInput(Q._form.domNode);return S})};M.prototype.fetchInvitation=function(){var Q="".concat(this._communityUri,"invitations/").concat(this.invitation);
return n.default.request({url:Q})};M.prototype.handleError=function(Q){var S,I;Q=Q.error||Q||{};Q.code=Q.code||0;Q=this.i18n.errors[Q.code]||Q;Q.details=(null===(S=Q.details)||void 0===S?0:S.length)?Q.details.filter(function(P){return null!==P}):null;if(null===(I=Q.details)||void 0===I?0:I.length)Q.details=Q.details.join("\x3cbr /\x3e"),Q.message=Q.message?"".concat(Q.message,"\x3cbr\x3e").concat(Q.details):Q.details;Q=l.__assign(l.__assign({},this.i18n.errors.error),Q);this.showErrorMessage(Q.message);
return!0};return M=l.__decorate([(0,r.default)(g.default,k.default,b.default)],M)}()})},"arcgisonline/pages/dijit/PasswordStrength":function(){define("require exports tslib dojo/text!./PasswordStrength/templates/PasswordStrength.html dojo/i18n!../../nls/arcgisonline dojo/Deferred dijit/_TemplatedMixin dijit/_WidgetBase ../utils/icons ../utils/dom ../utils/organization ../../tsutils/declareDecorator".split(" "),function(f,B,l,e,c,u,t,d,q,m,a,h){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);
t=l.__importDefault(t);d=l.__importDefault(d);q=l.__importDefault(q);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);return function(){function n(r,k){this.templateString=e.default;this.i18n=c.default;this.icons=q.default}n.prototype.postCreate=function(){var r,k,g;this.inherited(arguments);var b=null!==(k=null===(r=this.portal.helpMap)||void 0===r?void 0:r.m)&&void 0!==k?k:{};r=this.portal.helpBase+(null!==(g=b["120001688"])&&void 0!==g?g:"");this._moreInfo.href=r};n.prototype.update=
function(r){var k=this,g,b=new u.default;(null===(g=this._previousResult)||void 0===g?void 0:g.password)===r?b.resolve(this._previousResult):r?a.default.checkPasswordStrength(r).then(function(w){var x=w.strength;k._strengthLabel.className="password-strength__label--".concat(x);k._strengthLabel.textContent=k.i18n.passwordStrengthMeter["score".concat(x)];k._strengthMeterFill.className="password-strength-meter__fill password-strength-meter__fill--".concat(x);var z=Object.keys(w).every(function(D){var E=
w[D];return"strength"===D?1<E:!1!==E});z?m.default.hideNode(k._moreInfo):m.default.showNode(k._moreInfo);k._previousResult=l.__assign({password:r,isValidStrength:1<x,isValid:z},w);b.resolve(k._previousResult)}):(this._strengthLabel.className="",this._strengthLabel.textContent=this.i18n.passwordStrengthMeter.none,this._strengthMeterFill.className="password-strength-meter__fill password-strength-meter__fill--unknown",this._previousResult={password:r,isValid:!1,isValidStrength:!1},b.resolve(this._previousResult));
return b};return n=l.__decorate([(0,h.default)(d.default,t.default)],n)}()})},"arcgisonline/pages/utils/validation":function(){define(["require","exports"],function(f,B){return function(){function l(){}l.clearState=function(e){null===e||void 0===e?void 0:e.forEach(function(c){var u,t,d;null===c||void 0===c?void 0:c.removeAttribute("aria-live");null===(u=null===c||void 0===c?void 0:c.classList)||void 0===u?void 0:u.remove("input-success");null===(t=null===c||void 0===c?void 0:c.classList)||void 0===
t?void 0:t.remove("input-error");null===(d=null===c||void 0===c?void 0:c.classList)||void 0===d?void 0:d.remove("is-active")})};l.setValidState=function(e){var c;null===(c=null===e||void 0===e?void 0:e.classList)||void 0===c?void 0:c.add("input-success")};l.setInvalidState=function(e,c,u,t){var d,q,m;null===(d=null===e||void 0===e?void 0:e.classList)||void 0===d?void 0:d.add("input-error");null===(q=null===c||void 0===c?void 0:c.classList)||void 0===q?void 0:q.add("is-active");c&&u&&(null===c||void 0===
c?void 0:c.setAttribute("aria-live","polite"),c.innerHTML='\x3cdiv class\x3d"flex flex-align-center"\x3e\x3ccalcite-icon icon\x3d"exclamation-mark-triangle" scale\x3d"s" class\x3d"margin-right-half"\x3e\x3c/calcite-icon\x3e '.concat(u,"\x3c/div\x3e"));t&&(null===(m=null===e||void 0===e?void 0:e.focus)||void 0===m?void 0:m.call(e))};l.focusFirstInvalidInput=function(e){var c;e=null!==(c=null===e||void 0===e?void 0:e.querySelector(".input-error"))&&void 0!==c?c:void 0;(null===e||void 0===e?0:e.focus)&&
e.focus()};l.toggleError=function(e,c,u,t){u?l.setInvalidState(e,c,t):l.clearState([e,c])};return l}()})},"arcgisonline/sharing/dijit/HelpManager":function(){define("require exports tslib ../../esriGeowConfig ../util ../../tsutils/declareDecorator dijit/_WidgetBase".split(" "),function(f,B,l,e,c,u,t){e=l.__importDefault(e);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);var d=function(){function q(){this.helpTopics=this.helpBaseUrl=null;this._isSingleTenant=!1}q.prototype.postCreate=
function(){this._isSingleTenant=void 0!==e.default.isMultiTenant&&null!==e.default.isMultiTenant&&!1===e.default.isMultiTenant;this.helpBaseUrl=e.default.self.helpBase;this._load()};q.prototype._load=function(){var m=this,a;(null===(a=e.default.self.helpMap)||void 0===a?0:a.m)?(this.helpTopics=e.default.self.helpMap.m,this.onLoad(this.helpBaseUrl,this.helpTopics)):(a="".concat(e.default.restBaseUrl,"portals/helpmap"),c.default.request({url:a}).then(function(h){!h||h.code||h.message||(m.helpTopics=
h.helpMap&&h.helpMap.m||{},m.onLoad(m.helpBaseUrl,m.helpTopics))}))};q.prototype.onLoad=function(m,a){};q.prototype.isLoaded=function(){return!(!this.helpBaseUrl||!this.helpTopics)};q.prototype.getHelpUrl=function(m){return this.isLoaded()?"".concat(this.helpBaseUrl).concat(this.helpTopics[m]):"#"};return q=l.__decorate([(0,u.default)(t.default)],q)}();d.prototype.statics={_instance:null,getInstance:function(){null===this._instance&&(this._instance=new d);return this._instance}};return d})},"dojox/widget/rotator/Fade":function(){define(["dojo/_base/lang",
"dojo/_base/fx","dojo/dom-style","dojo/fx"],function(f,B,l,e){function c(t,d){var q=t.next.node;l.set(q,{display:"",opacity:0});t.node=t.current.node;return e[d]([B.fadeOut(t),B.fadeIn(f.mixin(t,{node:q}))])}var u={fade:function(t){return c(t,"chain")},crossFade:function(t){return c(t,"combine")}};f.mixin(f.getObject("dojox.widget.rotator"),u);return u})},"dijit/layout/StackController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/topic ../focus ../registry ../_Widget ../_TemplatedMixin ../_Container ../form/ToggleButton dojo/touch".split(" "),
function(f,B,l,e,c,u,t,d,q,m,a,h,n,r){e=B("dijit.layout._StackButton",r,{tabIndex:"-1",closeButton:!1,_aria_attr:"aria-selected",buildRendering:function(k){this.inherited(arguments);(this.focusNode||this.domNode).setAttribute("role","tab")}});B=B("dijit.layout.StackController",[a,h,n],{baseClass:"dijitStackController",templateString:"\x3cspan role\x3d'tablist' data-dojo-attach-event\x3d'onkeydown'\x3e\x3c/span\x3e",containerId:"",buttonWidget:e,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(k){return m.byId(this.id+
"_"+k)},postCreate:function(){this.inherited(arguments);this.own(d.subscribe(this.containerId+"-startup",u.hitch(this,"onStartup")),d.subscribe(this.containerId+"-addChild",u.hitch(this,"onAddChild")),d.subscribe(this.containerId+"-removeChild",u.hitch(this,"onRemoveChild")),d.subscribe(this.containerId+"-selectChild",u.hitch(this,"onSelectChild")),d.subscribe(this.containerId+"-containerKeyDown",u.hitch(this,"onContainerKeyDown")));this.containerNode.dojoClick=!0;this.own(t(this.containerNode,"click",
u.hitch(this,function(k){var g=m.getEnclosingWidget(k.target);if(g!=this.containerNode&&!g.disabled&&g.page)for(k=k.target;k!==this.containerNode;k=k.parentNode)if(l.contains(k,this.buttonWidgetCloseClass)){this.onCloseButtonClick(g.page);break}else if(k==g.domNode){this.onButtonClick(g.page);break}})))},onStartup:function(k){this.textDir=k.textDir;f.forEach(k.children,this.onAddChild,this);if(k.selected)this.onSelectChild(k.selected);var g=m.byId(this.containerId).containerNode,b=u.hitch(this,"pane2button");
k={title:"label",showtitle:"showLabel",iconclass:"iconClass",closable:"closeButton",tooltip:"title",disabled:"disabled",textdir:"textdir"};var w=function(z,D){return t(g,"attrmodified-"+z,function(E){var C=b(E.detail&&E.detail.widget&&E.detail.widget.id);C&&C.set(D,E.detail.newValue)})},x;for(x in k)this.own(w(x,k[x]))},destroy:function(k){this.destroyDescendants(k);this.inherited(arguments)},onAddChild:function(k,g){var b=new (u.isString(this.buttonWidget)?u.getObject(this.buttonWidget):this.buttonWidget)({id:this.id+
"_"+k.id,name:this.id+"_"+k.id,label:k.title,disabled:k.disabled,ownerDocument:this.ownerDocument,dir:k.dir,lang:k.lang,textDir:k.textDir||this.textDir,showLabel:k.showTitle,iconClass:k.iconClass,closeButton:k.closable,title:k.tooltip,page:k});this.addChild(b,g);k.controlButton=b;if(!this._currentChild)this.onSelectChild(k);g=k._wrapper.getAttribute("aria-labelledby")?k._wrapper.getAttribute("aria-labelledby")+" "+b.id:b.id;k._wrapper.removeAttribute("aria-label");k._wrapper.setAttribute("aria-labelledby",
g)},onRemoveChild:function(k){this._currentChild===k&&(this._currentChild=null);var g=this.pane2button(k.id);g&&(this.removeChild(g),g.destroy());delete k.controlButton},onSelectChild:function(k){if(k){if(this._currentChild){var g=this.pane2button(this._currentChild.id);g.set("checked",!1);g.focusNode.setAttribute("tabIndex","-1")}g=this.pane2button(k.id);g.set("checked",!0);this._currentChild=k;g.focusNode.setAttribute("tabIndex","0");m.byId(this.containerId)}},onButtonClick:function(k){var g=this.pane2button(k.id);
q.focus(g.focusNode);this._currentChild&&this._currentChild.id===k.id&&g.set("checked",!0);m.byId(this.containerId).selectChild(k)},onCloseButtonClick:function(k){m.byId(this.containerId).closeChild(k);this._currentChild&&(k=this.pane2button(this._currentChild.id))&&q.focus(k.focusNode||k.domNode)},adjacent:function(k){this.isLeftToRight()||this.tabPosition&&!/top|bottom/.test(this.tabPosition)||(k=!k);var g=this.getChildren(),b=f.indexOf(g,this.pane2button(this._currentChild.id)),w=g[b];do{b=(b+
(k?1:g.length-1))%g.length;var x=g[b]}while(x.disabled&&x!=w);return x},onkeydown:function(k,g){if(!this.disabled&&!k.altKey&&(g=null,k.ctrlKey||!k._djpage)){switch(k.keyCode){case c.LEFT_ARROW:case c.UP_ARROW:k._djpage||(g=!1);break;case c.PAGE_UP:k.ctrlKey&&(g=!1);break;case c.RIGHT_ARROW:case c.DOWN_ARROW:k._djpage||(g=!0);break;case c.PAGE_DOWN:k.ctrlKey&&(g=!0);break;case c.HOME:for(var b=this.getChildren(),w=0;w<b.length;w++){var x=b[w];if(!x.disabled){this.onButtonClick(x.page);break}}k.stopPropagation();
k.preventDefault();break;case c.END:b=this.getChildren();for(w=b.length-1;0<=w;w--)if(x=b[w],!x.disabled){this.onButtonClick(x.page);break}k.stopPropagation();k.preventDefault();break;case c.DELETE:case 87:this._currentChild.closable&&(k.keyCode==c.DELETE||k.ctrlKey)&&(this.onCloseButtonClick(this._currentChild),k.stopPropagation(),k.preventDefault());break;case c.TAB:k.ctrlKey&&(this.onButtonClick(this.adjacent(!k.shiftKey).page),k.stopPropagation(),k.preventDefault())}null!==g&&(this.onButtonClick(this.adjacent(g).page),
k.stopPropagation(),k.preventDefault())}},onContainerKeyDown:function(k){k.e._djpage=k.page;this.onkeydown(k.e)}});B.StackButton=e;return B})},"dijit/_base":function(){define("./main ./a11y ./WidgetSet ./_base/focus ./_base/manager ./_base/place ./_base/popup ./_base/scroll ./_base/sniff ./_base/typematic ./_base/wai ./_base/window".split(" "),function(f){return f._base})},"dijit/WidgetSet":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(f,B,l,
e){var c=B("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0},add:function(u){if(this._hash[u.id])throw Error("Tried to register widget with id\x3d\x3d"+u.id+" but that id is already registered");this._hash[u.id]=u;this.length++},remove:function(u){this._hash[u]&&(delete this._hash[u],this.length--)},forEach:function(u,t){t=t||l.global;var d=0,q;for(q in this._hash)u.call(t,this._hash[q],d++,this._hash);return this},filter:function(u,t){t=t||l.global;var d=new c,q=0,m;for(m in this._hash){var a=
this._hash[m];u.call(t,a,q++,this._hash)&&d.add(a)}return d},byId:function(u){return this._hash[u]},byClass:function(u){var t=new c,d;for(d in this._hash){var q=this._hash[d];q.declaredClass==u&&t.add(q)}return t},toArray:function(){var u=[],t;for(t in this._hash)u.push(this._hash[t]);return u},map:function(u,t){return f.map(this.toArray(),u,t)},every:function(u,t){t=t||l.global;var d=0,q;for(q in this._hash)if(!u.call(t,this._hash[q],d++,this._hash))return!1;return!0},some:function(u,t){t=t||l.global;
var d=0,q;for(q in this._hash)if(u.call(t,this._hash[q],d++,this._hash))return!0;return!1}});f.forEach("forEach filter byClass map every some".split(" "),function(u){e[u]=c.prototype[u]});return c})},"dijit/_base/focus":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/topic dojo/_base/window ../focus ../selection ../main".split(" "),function(f,B,l,e,c,u,t,d){u.focus=function(q){if(q){var m="node"in q?q.node:q,a=q.bookmark;q=q.openedForWindow;var h=a?a.isCollapsed:!1;if(m){var n="iframe"==
m.tagName.toLowerCase()?m.contentWindow:m;if(n&&n.focus)try{n.focus()}catch(r){}u._onFocusNode(m)}if(a&&c.withGlobal(q||c.global,d.isCollapsed)&&!h){q&&q.focus();try{c.withGlobal(q||c.global,d.moveToBookmark,null,[a])}catch(r){}}}};u.watch("curNode",function(q,m,a){d._curFocus=a;d._prevFocus=m;a&&e.publish("focusNode",a)});u.watch("activeStack",function(q,m,a){d._activeStack=a});u.on("widget-blur",function(q,m){e.publish("widgetBlur",q,m)});u.on("widget-focus",function(q,m){e.publish("widgetFocus",
q,m)});l.mixin(d,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return d.getBookmark().isCollapsed},getBookmark:function(){return(c.global==window?t:new t.SelectionManager(c.global)).getBookmark()},moveToBookmark:function(q){return(c.global==window?t:new t.SelectionManager(c.global)).moveToBookmark(q)},getFocus:function(q,m){q=!u.curNode||q&&B.isDescendant(u.curNode,q.domNode)?d._prevFocus:u.curNode;return{node:q,bookmark:q&&q==u.curNode&&c.withGlobal(m||c.global,d.getBookmark),openedForWindow:m}},
_activeStack:[],registerIframe:function(q){return u.registerIframe(q)},unregisterIframe:function(q){q&&q.remove()},registerWin:function(q,m){return u.registerWin(q,m)},unregisterWin:function(q){q&&q.remove()}});return d})},"dijit/_base/place":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(f,B,l,e,c){var u={getViewport:function(){return l.getBox()}};u.placeOnScreen=e.at;u.placeOnScreenAroundElement=function(t,d,q,m){if(B.isArray(q))var a=q;else{a=
[];for(var h in q)a.push({aroundCorner:h,corner:q[h]})}return e.around(t,d,a,!0,m)};u.placeOnScreenAroundNode=u.placeOnScreenAroundElement;u.placeOnScreenAroundRectangle=u.placeOnScreenAroundElement;u.getPopupAroundAlignment=function(t,d){var q={};f.forEach(t,function(m){var a=d;switch(m){case "after":q[d?"BR":"BL"]=d?"BL":"BR";break;case "before":q[d?"BL":"BR"]=d?"BR":"BL";break;case "below-alt":a=!a;case "below":q[a?"BL":"BR"]=a?"TL":"TR";q[a?"BR":"BL"]=a?"TR":"TL";break;case "above-alt":a=!a;default:q[a?
"TL":"TR"]=a?"BL":"BR",q[a?"TR":"TL"]=a?"BR":"BL"}});return q};B.mixin(c,u);return c})},"dijit/_base/popup":function(){define(["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(f,B,l){var e=l._createWrapper;l._createWrapper=function(u){u.declaredClass||(u={_popupWrapper:u.parentNode&&f.contains(u.parentNode,"dijitPopup")?u.parentNode:null,domNode:u,destroy:function(){},ownerDocument:u.ownerDocument,ownerDocumentBody:B.body(u.ownerDocument)});return e.call(this,u)};var c=
l.open;l.open=function(u){if(u.orient&&"string"!=typeof u.orient&&!("length"in u.orient)){var t=[],d;for(d in u.orient)t.push({aroundCorner:d,corner:u.orient[d]});u.orient=t}return c.call(this,u)};return l})},"dijit/_base/scroll":function(){define(["dojo/window","../main"],function(f,B){B.scrollIntoView=function(l,e){f.scrollIntoView(l,e)}})},"dijit/_base/sniff":function(){define(["dojo/uacss"],function(){})},"dijit/_base/typematic":function(){define(["../typematic"],function(){})},"dijit/_base/wai":function(){define(["dojo/dom-attr",
"dojo/_base/lang","../main","../hccss"],function(f,B,l){B.mixin(l,{hasWaiRole:function(e,c){e=this.getWaiRole(e);return c?-1<e.indexOf(c):0<e.length},getWaiRole:function(e){return B.trim((f.get(e,"role")||"").replace("wairole:",""))},setWaiRole:function(e,c){f.set(e,"role",c)},removeWaiRole:function(e,c){var u=f.get(e,"role");u&&(c?(c=B.trim((" "+u+" ").replace(" "+c+" "," ")),f.set(e,"role",c)):e.removeAttribute("role"))},hasWaiState:function(e,c){return e.hasAttribute?e.hasAttribute("aria-"+c):
!!e.getAttribute("aria-"+c)},getWaiState:function(e,c){return e.getAttribute("aria-"+c)||""},setWaiState:function(e,c,u){e.setAttribute("aria-"+c,u)},removeWaiState:function(e,c){e.removeAttribute("aria-"+c)}});return l})},"dijit/_base/window":function(){define(["dojo/window","../main"],function(f,B){B.getDocumentWindow=function(l){return f.get(l)}})},"dijit/form/ComboButton":function(){define("dojo/_base/declare dojo/keys ../focus ./DropDownButton dojo/text!./templates/ComboButton.html ../a11yclick".split(" "),
function(f,B,l,e,c){return f("dijit.form.ComboButton",e,{templateString:c,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",titleNode:"dijitButtonContents",_popupStateNode:"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyDown:function(u){u.keyCode==B[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]&&(l.focus(this._popupStateNode),u.stopPropagation(),u.preventDefault())},_onArrowKeyDown:function(u){u.keyCode==
B[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]&&(l.focus(this.titleNode),u.stopPropagation(),u.preventDefault())},focus:function(u){this.disabled||l.focus("start"==u?this.titleNode:this._popupStateNode)}})})},"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(f,B,l){return f("dijit.form.RadioButton",[B,l],{baseClass:"dijitRadio"})})},"dijit/form/_RadioButtonMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/lang dojo/query!css2 ../registry".split(" "),
function(f,B,l,e,c,u){return B("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var t=[];c("input[type\x3dradio]",this.focusNode.form||this.ownerDocument).forEach(e.hitch(this,function(d){d.name==this.name&&d.form==this.focusNode.form&&(d=u.getEnclosingWidget(d))&&t.push(d)}));return t},_setCheckedAttr:function(t){this.inherited(arguments);this._created&&t&&f.forEach(this._getRelatedWidgets(),e.hitch(this,function(d){d!=this&&d.checked&&d.set("checked",!1)}))},_getSubmitValue:function(t){return null==
t?"on":t},_onClick:function(t){if(this.checked||this.disabled)return t.stopPropagation(),t.preventDefault(),!1;if(this.readOnly)return t.stopPropagation(),t.preventDefault(),f.forEach(this._getRelatedWidgets(),e.hitch(this,function(m){l.set(this.focusNode||this.domNode,"checked",m.checked)})),!1;var d=!1,q;f.some(this._getRelatedWidgets(),function(m){return m.checked?(q=m,!0):!1});this.checked=!0;q&&(q.checked=!1);if(!1===this.onClick(t)||t.defaultPrevented)d=!0;this.checked=!1;q&&(q.checked=!0);
d?t.preventDefault():this.set("checked",!0);return!d}})})},"dijit/PopupMenuItem":function(){define("dojo/_base/declare dojo/dom-style dojo/_base/lang dojo/query ./popup ./registry ./MenuItem ./hccss".split(" "),function(f,B,l,e,c,u,t){return f("dijit.PopupMenuItem",t,{baseClass:"dijitMenuItem dijitPopupMenuItem",_fillContent:function(){if(this.srcNodeRef){var d=e("*",this.srcNodeRef);this.inherited(arguments,[d[0]]);this.dropDownContainer=this.srcNodeRef}},_openPopup:function(d,q){var m=this.popup;
c.open(l.delegate(d,{popup:this.popup,around:this.domNode}));q&&m.focus&&m.focus()},_closePopup:function(){c.close(this.popup);this.popup.parentMenu=null},startup:function(){if(!this._started){this.inherited(arguments);if(!this.popup){var d=e("[widgetId]",this.dropDownContainer)[0];this.popup=u.byNode(d)}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id);this.popup.startup();this.popup.domNode.style.display="none";this.arrowWrapper&&
B.set(this.arrowWrapper,"visibility","");this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(d){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(d),delete this.popup);this.inherited(arguments)}})})},"dojo/dnd/AutoSource":function(){define(["../_base/declare","./Source"],function(f,B){return f("dojo.dnd.AutoSource",B,{constructor:function(){this.autoSync=!0}})})},"dojo/dnd/Target":function(){define(["../_base/declare","../dom-class","./Source"],function(f,
B,l){return f("dojo.dnd.Target",l,{constructor:function(){this.isSource=!1;B.remove(this.node,"dojoDndSource")}})})},"dojo/fx/Toggler":function(){define(["../_base/lang","../_base/declare","../_base/fx","../aspect"],function(f,B,l,e){return B("dojo.fx.Toggler",null,{node:null,showFunc:l.fadeIn,hideFunc:l.fadeOut,showDuration:200,hideDuration:200,constructor:function(c){f.mixin(this,c);this.node=c.node;this._showArgs=f.mixin({},c);this._showArgs.node=this.node;this._showArgs.duration=this.showDuration;
this.showAnim=this.showFunc(this._showArgs);this._hideArgs=f.mixin({},c);this._hideArgs.node=this.node;this._hideArgs.duration=this.hideDuration;this.hideAnim=this.hideFunc(this._hideArgs);e.after(this.showAnim,"beforeBegin",f.hitch(this.hideAnim,"stop",!0),!0);e.after(this.hideAnim,"beforeBegin",f.hitch(this.showAnim,"stop",!0),!0)},show:function(c){return this.showAnim.play(c||0)},hide:function(c){return this.hideAnim.play(c||0)}})})},"dijit/MenuSeparator":function(){define("dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),
function(f,B,l,e,c,u){return f("dijit.MenuSeparator",[l,e,c],{templateString:u,buildRendering:function(){this.inherited(arguments);B.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"xstyle/core/load-css":function(){define([],function(){function f(u){if(e.createStyleSheet){var t=e.createStyleSheet();t.cssText=u;return t.owningElement}t=e.createElement("style");t.setAttribute("type","text/css");t.appendChild(e.createTextNode(u));c.appendChild(t);return t}function B(u,t,d){var q=
l[u];if(q)return m=f(q),t(m);var m=e.createElement("link");m.type="text/css";m.rel="stylesheet";m.href=u;var a=!d||!1!==d.wait;u=(u=navigator.userAgent.match(/AppleWebKit\/(\d+\.?\d*)/))&&+u[1];if(null===m.onload&&!(536>u))m.onload=function(){m.onload=null;m.onerror=null;a&&t(m)},m.onerror=function(){a&&t(m)};else if(a)var h=setInterval(function(){m.style&&(clearInterval(h),t(m))},15);(c||e.getElementsByTagName("head")[0]).appendChild(m);a||t(m)}var l="undefined"==typeof _css_cache?{}:_css_cache,
e=document,c=e.head;B.insertCss=f;return B})},"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      if (window.origin !\x3d\x3d "null") {\r\n        return; // page is not in an iframe sandbox\r\n      }\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/GeneralDlg.html":'\x3cdiv class\x3d"widgetContent"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_dialog" id\x3d"general-dialog-${id}" class\x3d"general-dialog" title\x3d"${i18n.notificationDlgTitle}" role\x3d"alertdialog" aria-labelledby\x3d"general-dialog-${id} general-dialog-content"\x3e\r\n    \x3cdiv id\x3d"general-dialog-content" class\x3d"general-dialog-content"\x3e\x3c/div\x3e\r\n    \x3cbr\x3e\r\n    \x3cdiv class\x3d"esriFloatTrailing clearfix right"\x3e\r\n      \x3cbutton id\x3d"button_general-close" data-dojo-attach-point\x3d"_okBtn" data-dojo-attach-event\x3d"onClick:onOkClick" class\x3d"jevent primary right" data-dojo-type\x3d"dijit/form/Button"\x3e${i18n.ok}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n      \x3cbr style\x3d"clear:both;"\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/actionBar.html":'\x3cdiv class\x3d"dijitDialogPaneActionBar esriAlignTrailing right clearfix" data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n  \x3cspan class\x3d"busyMessage hide inline-block padding-leader-quarter padding-right-1 left" data-dojo-attach-point\x3d"busyMessageSpan"\x3e\x3c/span\x3e\r\n  \x3cbutton class\x3d"calcite cancel right" data-dojo-type\x3d"dijit/form/Button" type\x3d"button" data-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"click:onCancel"\x3e\x3c/button\x3e\r\n  \x3cbutton class\x3d"calcite primary right js-submit-button" data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"okButton"\x3e\x3c/button\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/DownloadImageDlg.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"dialog" title\x3d"${_i18nStrings.downloadImageDlg.title}"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"message"\x3e\x3c/div\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv class\x3d"esriFloatTrailing" style\x3d"margin-top: 1em;"\x3e\r\n        \x3cbutton class\x3d"jevent cancel" data-dojo-attach-point\x3d"_cancelBtn" disabled data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-event\x3d"onClick:_handleCancelButtonClick"\x3e${_i18nStrings.common.cancel}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/_Owner.html":'\x3cbutton class\x3d"js-card-item-owner btn-link font-size--1 text-left text-ellipsis flex-1 max-full-width js-action-profilePopup js-owner-section" data-action\x3d"profilePopup" data-owner\x3d"${item.owner}" title\x3d"${i18n.itemProperties.viewProfile}"\x3e${item.owner}\x3c/button\x3e\r\n',"url:arcgisonline/pages/dijit/Card/_OwnerVerified.html":'\x3cbutton class\x3d"flex-1 btn-link btn-link--inherit text-left text-ellipsis flex-1 js-owner-section js-verified-owner-link max-full-width" title\x3d"${i18n.itemProperties.viewOrg}"\x3e${item.verified.name}\x3c/button\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/_Empty.html":'\x3cdiv class\x3d"text-center trailer-half"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 256 256" width\x3d"${width}"\x3e\x3cpath fill\x3d"#ccc" d\x3d"M149.375 182.444l56.463-56.471-25.376-25.376 5.523-14.541-59.827-22.726L110.828 48H56v124h18.365l12.437 4.724 34.182 34.101 15.33-15.294 7.07 2.686 5.164-13.597zm50.806-56.472l-47.34 47.35 26.064-68.626zM112 54.828L141.172 84H112zM60 52h48v36h36v80H60zm60.984 153.17L95.95 180.199l36.263 13.775zm20.081-12.113L85.632 172H148V85.172L133.059 70.23l47.766 18.144-34.628 91.171z"/\x3e\x3c/svg\x3e\r\n  \x3cp class\x3d"leader-0 font-size-1 avenir-regular"\x3e\r\n    \x3cspan\x3e${message}\x3c/span\x3e\r\n  \x3c/p\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/pages/organization/widgets/templates/ProfilePopup.html":'\x3cdiv\x3e\r\n  \x3cspan tabindex\x3d"0" data-dojo-attach-point\x3d"closeIcon" class\x3d"hide popover-close icon-ui-close" tab-index\x3d"0" aria-label\x3d"${i18n.common.close}"\x3e\x3c/span\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"loader" class\x3d"profile-popup__loader loader is-active"\x3e\r\n    \x3cdiv class\x3d"profile-popup__loader-bars loader-bars"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"hide text-left" data-dojo-attach-point\x3d"content"\x3e\r\n    \x3cdiv class\x3d"profile-popup__top-section flex flex-align-center"\x3e\r\n      \x3cdiv class\x3d"flex-1 margin-right-1"\x3e\r\n        \x3cdiv class\x3d"js-member-thumb"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton type\x3d"button" data-dojo-attach-point\x3d"viewProfileBtn" class\x3d"btn-link profile-popup__link font-size--1 flex-0" aria-label\x3d"${i18n.myOrganization.formatters.viewProfile}"\x3e${i18n.myOrganization.formatters.viewProfile} ${!icons.inline-end.launch.16}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"profile-popup__bottom-section" data-dojo-attach-point\x3d"bottomSection"\x3e\r\n      \x3cdiv class\x3d"profile-popup__bio-container" data-dojo-attach-point\x3d"bioContainer"\x3e\r\n        \x3cp class\x3d"profile-popup__bio-section trailer-half" data-dojo-attach-point\x3d"bioEl"\x3e\x3c/p\x3e\r\n        \x3cbutton class\x3d"hide btn-link btn-link-darker-gray profile-popup__more-toggle" data-dojo-attach-point\x3d"bioToggle"\x3e${!icons.chevron-down.24}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"flex flex-align-center profile-popup__groups-section" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n          \x3cdiv class\x3d"avenir-bold"\x3e${i18n.userProfile.groups}\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex" data-dojo-attach-point\x3d"groupIcons"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cbutton class\x3d"btn-link profile-popup__link font-size--1" data-dojo-attach-point\x3d"viewGroupsBtn"\x3e${i18n.userProfile.viewAll} ${!icons.inline-end.launch.16}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"flex flex-align-center profile-popup__items-section hide" data-dojo-attach-point\x3d"itemsSection"\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n          \x3cdiv class\x3d"avenir-bold"\x3e${i18n.userProfile.items}\x3c/div\x3e\r\n          \x3cdiv class\x3d"font-size-4 profile-popup__item-count" data-dojo-attach-point\x3d"itemCountEl"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cbutton class\x3d"btn-link profile-popup__link font-size--1" data-dojo-attach-point\x3d"viewItemsBtn"\x3e${i18n.userProfile.viewAll} ${!icons.inline-end.launch.16}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/TooltipDialog.html":'\x3cdiv role\x3d"alertdialog" tabIndex\x3d"-1"\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"contentsNode" class\x3d"dijitTooltipContents dijitTooltipFocusNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\t\t\t${!actionBarTemplate}\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipConnector" role\x3d"presentation" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/MemberThumb/templates/MemberThumb.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"content" class\x3d"position-relative ${cssClasses}"\x3e\r\n    \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"customContainer"\x3e\r\n      \x3cimg src\x3d"${member.thumbnailUrl}" alt\x3d"" class\x3d"margin-left-0 ${member.thumbnail:hide}" data-dojo-attach-point\x3d"img"\x3e\r\n      \x3cdiv class\x3d"member-thumb__initials ${member.thumbnail:show}" data-dojo-attach-point\x3d"initials"\x3e\r\n        ${member.initials}\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"member-thumb__edit-mask js-mask"\x3e\r\n      ${!icons.plus-circle.32}\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/authoritative.html":'\x3cspan class\x3d"badge badge--authoritative ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cg fill\x3d"#2B622B"\x3e\x3cpath d\x3d"M8 0a8 8 0 1 0 8 8 8.01 8.01 0 0 0-8-8zm0 15a7 7 0 1 1 7-7 7.008 7.008 0 0 1-7 7z"/\x3e\x3cpath d\x3d"M11.834 5.146l-5.646 5.647-2.334-2.334a.5.5 0 0 0-.708.707l3.042 3.041 6.353-6.353a.5.5 0 1 0-.707-.707z"/\x3e\x3c/g\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.authoritative}\x3c/span\x3e\r\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/deprecated.html":'\x3cspan class\x3d"badge badge--deprecated ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath fill\x3d"#8C2907" d\x3d"M8 0a8 8 0 1 0 8 8 8.01 8.01 0 0 0-8-8zM1 8a6.99 6.99 0 0 1 11.577-5.284l-9.861 9.861A6.964 6.964 0 0 1 1 8zm7 7a6.964 6.964 0 0 1-4.577-1.716l9.861-9.861A6.99 6.99 0 0 1 8 15z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.deprecated}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/solution.html":'\x3cspan class\x3d"badge badge--solution ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 32 32"\x3e\r\n    \x3cpath fill\x3d"#312b43" d\x3d"M29.963 7.672a1.586 1.586 0 0 0-1.584-1.585h-5.274a.187.187 0 0 1-.188-.187V3.977A2 2 0 0 0 20.825 2h-9.672A2.095 2.095 0 0 0 9.06 4.093V5.9a.187.187 0 0 1-.187.187H3.598a1.586 1.586 0 0 0-1.584 1.585v4.016a.281.281 0 0 0 .281.28H4.9l.014-.013V9.153a.177.177 0 0 1 .177-.177h21.46a.456.456 0 0 1 .449.45v13.742A1.832 1.832 0 0 1 25.168 25h-8.892a.568.568 0 0 1-.534-.373 3.98 3.98 0 0 0-7.6.373H5.657a.757.757 0 0 1-.757-.757v-3.055A.188.188 0 0 0 4.714 21H2.028l-.014.014v4.58a2.35 2.35 0 0 0 2.347 2.346h4.161a3.963 3.963 0 0 0 6.8.256.569.569 0 0 1 .475-.256h12.065a2.102 2.102 0 0 0 2.101-2.101zM21 5.625a.375.375 0 0 1-.375.375h-9.25A.375.375 0 0 1 11 5.625V4.45a.456.456 0 0 1 .45-.45h9.1a.456.456 0 0 1 .45.45zM12 28a2 2 0 1 1 2-2 2 2 0 0 1-2 2z"/\x3e\r\n    \x3cpath class\x3d"cls-1" d\x3d"M13.273 17.994a.57.57 0 0 1 .479.262A3.73 3.73 0 0 0 17 20a3.74 3.74 0 0 0 3.403-2.006h3.41a.188.188 0 0 0 .187-.188v-2.589a.187.187 0 0 0-.188-.188H20.8A3.8 3.8 0 0 0 17 12a4.058 4.058 0 0 0-3.69 2.647.568.568 0 0 1-.537.383H1.093a.094.094 0 0 0-.093.093V17.9a.094.094 0 0 0 .094.094zM17 13.9a2.1 2.1 0 1 1-2.1 2.1 2.1 2.1 0 0 1 2.1-2.1z"/\x3e\r\n  \x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.solution}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/living-atlas.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cg fill\x3d"#196fa6"\x3e\x3cpath d\x3d"M14.753 4.57a.5.5 0 0 0-.842-.539 5.86 5.86 0 0 1-1.046 1.13A27.861 27.861 0 0 1 8.5 8.199a27.487 27.487 0 0 1-4.814 2.262 5.906 5.906 0 0 1-1.5.34.5.5 0 0 0 .021 1h.023a6.513 6.513 0 0 0 1.46-.304 5.98 5.98 0 0 0 3.81 1.81V15H5a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1H8.5v-1.699A5.953 5.953 0 0 0 13.753 5.7a6.385 6.385 0 0 0 1-1.13zM10.5 11.664a4.999 4.999 0 0 1-5.742-.535A30.772 30.772 0 0 0 9 9.065a30.801 30.801 0 0 0 3.908-2.642 5 5 0 0 1-2.408 5.24zM7.068 2.42a5.007 5.007 0 0 1 4.71 1.638.5.5 0 1 0 .758-.654 6.01 6.01 0 0 0-5.654-1.967.5.5 0 0 0 .186.982zM2.802 9.633a.5.5 0 0 0 .472-.664 4.99 4.99 0 0 1 1.815-5.677l.228.394a.5.5 0 0 0 .866-.5l-1-1.732a.5.5 0 0 0-.866.5l.272.472a5.988 5.988 0 0 0-2.26 6.87.5.5 0 0 0 .473.337z"/\x3e\x3c/g\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.livingAtlas}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/marketplace.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${i18n.badges.marketplaceTooltip}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"#196FA6" d\x3d"M15.939 13L12.832 3h-3.65L8.033 6.68 6.811 3H3.16L.054 13H4.13l.96-3.21L6.192 13h3.594l1.104-3.17.993 3.17h4.056zM3.386 12H1.41l2.486-8h1.881l-2.391 8zm2.196-3.856l.893-2.983 1.048 3.156-.895 2.871-1.046-3.044zM9.075 12H7.422l2.496-8h1.943l-2.786 8zm3.409-6.749L14.583 12h-1.966l-1.176-3.755 1.043-2.994z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.marketplace}\x3c/span\x3e\r\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/open-data.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${i18n.badges.openDataTooltip}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cg fill\x3d"#196fa6"\x3e\x3cpath d\x3d"M8 1C4.58 1 2 2.29 2 4s2.58 3 6 3a8.628 8.628 0 0 0 5-1.297v5.334a.5.5 0 0 0 1 0V4c0-1.71-2.58-3-6-3zm0 5C5.138 6 3 4.944 3 4s2.138-2 5-2 5 1.056 5 2-2.138 2-5 2zM13.5 12.5a.5.5 0 0 0-.5.5v.064C13 13.96 10.816 15 8 15s-5-1.04-5-1.936V8.85a11.968 11.968 0 0 0 5 .984.5.5 0 0 0 0-1A10.146 10.146 0 0 1 2.815 7.62a.484.484 0 0 0-.799.3c-.002.013-.006.025-.007.037C2.007 7.972 2 7.985 2 8v5.064C2 14.902 5.05 16 8 16s6-1.098 6-2.936V13a.5.5 0 0 0-.5-.5z"/\x3e\x3c/g\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.openData}\x3c/span\x3e\r\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/premium.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer tooltip-multiline" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath d\x3d"M8.05 15.5a.497.497 0 0 1-.25-.067C.6 11.275 1.542 2.038 1.552 1.944a.5.5 0 0 1 .259-.382.507.507 0 0 1 .463-.009 5.15 5.15 0 0 0 5.459-.94.5.5 0 0 1 .64.006c1.817 1.54 3.601 1.844 5.457.932a.5.5 0 0 1 .718.394 16.944 16.944 0 0 1-.344 4.965.5.5 0 1 1-.978-.211 16.952 16.952 0 0 0 .367-3.962 5.57 5.57 0 0 1-5.55-1.098A6.178 6.178 0 0 1 2.51 2.706c-.057 2.086.231 8.651 5.79 11.86a.5.5 0 0 1-.25.934z" fill\x3d"#196fa6"/\x3e\x3cpath d\x3d"M12 15.5a4 4 0 1 1 4-4 4.005 4.005 0 0 1-4 4zm0-7a3 3 0 1 0 3 3 3.003 3.003 0 0 0-3-3z" fill\x3d"#196fa6"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.premium}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/retired.html":'\x3cspan class\x3d"badge badge--retired ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"#786d1c" d\x3d"M14.78 14.645L8.255 1.52a.938.938 0 0 0-.84-.52.938.938 0 0 0-.84.522L.092 14.647A.938.938 0 0 0 .932 16h13.009a.937.937 0 0 0 .838-1.355zm-.724.49a.137.137 0 0 1-.115.065H.933a.137.137 0 0 1-.116-.063.139.139 0 0 1-.008-.135L7.293 1.876a.14.14 0 0 1 .123-.076.138.138 0 0 1 .125.077l6.521 13.124a.138.138 0 0 1-.006.135zM7.495 11.5a.988.988 0 0 1 1 .976v.048a1 1 0 0 1-2 0v-.048a.988.988 0 0 1 1-.976zM7.018 6h.977v4h-.977z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.retired}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/registered.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer tooltip-multiline" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath xmlns\x3d"http://www.w3.org/2000/svg" fill\x3d"currentColor" d\x3d"M11 1a5 5 0 0 0-5 5 4.947 4.947 0 0 0 .53 2.197L1 13.727V16h3.222l.022-.01.756-.756V14h1.233L7 13.233V12h1.232l1.258-1.258A4.943 4.943 0 0 0 11 11a5 5 0 0 0 0-10zm0 9a3.95 3.95 0 0 1-1.758-.425L7.818 11H6v1.82l-.18.18H4v1.82l-.18.18H2v-.86l5.784-5.784A3.964 3.964 0 0 1 7 6a4 4 0 1 1 4 4zm1.5-7A1.5 1.5 0 1 0 14 4.5 1.5 1.5 0 0 0 12.5 3zm0 2a.5.5 0 1 1 .5-.5.501.501 0 0 1-.5.5z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.registered}\x3c/span\x3e\r\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/public-data-collection.html":'\x3cspan class\x3d"badge badge--retired ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"#786d1c" d\x3d"M15.721 4.007a.965.965 0 0 0-.03-1.385l-1.413-1.414a.965.965 0 0 0-1.385-.03L2.841 11.23l-1.756 4.097a.371.371 0 0 0 .488.487L5.67 14.06l8.607-8.609zM2.624 14.276l.554-1.294.74.74zm2.338-.924L3.55 11.937l8.007-8.008 1.414 1.415zm8.716-8.716l-1.414-1.414 1.09-1.09a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .434z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.publicDataCollection}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/subscriber.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer tooltip-multiline" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\r\n    \x3cpath d\x3d"M8.054 15.5H8.05a.5.5 0 0 1-.25-.067C.6 11.275 1.542 2.038 1.552 1.944a.5.5 0 0 1 .259-.382.507.507 0 0 1 .463-.009 5.15 5.15 0 0 0 5.459-.94.518.518 0 0 1 .638 0 5.146 5.146 0 0 0 5.458.94.507.507 0 0 1 .463.009.5.5 0 0 1 .26.382c.01.094.952 9.331-6.248 13.49a.5.5 0 0 1-.25.066zm0-.5zM2.51 2.706c-.056 2.054.222 8.455 5.542 11.713 5.32-3.258 5.598-9.66 5.542-11.713a6.177 6.177 0 0 1-5.542-1.074A6.183 6.183 0 0 1 2.51 2.706z" fill\x3d"#196fa6"/\x3e\r\n  \x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.subscriber}\x3c/span\x3e\r\n\x3c/span\x3e\r\n\r\n',
"url:arcgisonline/pages/dijit/Card/badges/collaboration.html":'\x3cspan class\x3d"badge badge--collaboration ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${i18n.badges.collaborationTooltip}"\x3e\r\n    \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\r\n      \x3cg fill\x3d"#196FA6"\x3e\r\n        \x3cpath d\x3d"M5.42,11.36a2.7,2.7,0,0,0-.25-.61A2.31,2.31,0,0,1,5.42,11.36Z" /\x3e\r\n        \x3cpath d\x3d"M12.64,15.42a2.7,2.7,0,0,0,.61-.25A2.31,2.31,0,0,1,12.64,15.42Z" /\x3e\r\n        \x3cpath d\x3d"M11.36,5.42a2.31,2.31,0,0,1-.61-.25A2.7,2.7,0,0,0,11.36,5.42Z" /\x3e\r\n        \x3cpath d\x3d"M13.25.83a2.7,2.7,0,0,0-.61-.25A2.31,2.31,0,0,1,13.25.83Z" /\x3e\r\n        \x3cpath d\x3d"M5.42,11.36a2.7,2.7,0,0,0-.25-.61A2.31,2.31,0,0,1,5.42,11.36Z" /\x3e\r\n        \x3cpath d\x3d"M12.64,15.42a2.7,2.7,0,0,0,.61-.25A2.31,2.31,0,0,1,12.64,15.42Z" /\x3e\r\n        \x3cpath d\x3d"M4.78,13.75A2.62,2.62,0,0,0,5,13.5,2.53,2.53,0,0,0,5.5,12a2.74,2.74,0,0,0-.08-.64,2.7,2.7,0,0,0-.25-.61,2.48,2.48,0,0,0-2.64-1.2A4.93,4.93,0,0,1,2.5,9,5.52,5.52,0,0,1,5.71,4a2.5,2.5,0,0,0,4.58,0A5.52,5.52,0,0,1,13.5,9a4.93,4.93,0,0,1,0,.55,2.48,2.48,0,0,0-2.64,1.2,2.7,2.7,0,0,0-.25.61,2.74,2.74,0,0,0-.08.64,2.53,2.53,0,0,0,.5,1.5,2.62,2.62,0,0,0,.22.25,2.45,2.45,0,0,0,.53.42,2.51,2.51,0,0,0,3.42-.92,2.7,2.7,0,0,0,.25-.61A2.74,2.74,0,0,0,15.5,12a2.53,2.53,0,0,0-.5-1.5,2.62,2.62,0,0,0-.22-.25,2,2,0,0,0-.35-.3A6,6,0,0,0,14.5,9a6.52,6.52,0,0,0-4-6,2.5,2.5,0,0,0-5,0,6.52,6.52,0,0,0-4,6,6,6,0,0,0,.07.95,2,2,0,0,0-.35.3A2.62,2.62,0,0,0,1,10.5,2.53,2.53,0,0,0,.5,12a2.74,2.74,0,0,0,.08.64,2.7,2.7,0,0,0,.25.61,2.51,2.51,0,0,0,3.42.92A2.45,2.45,0,0,0,4.78,13.75Zm8.5-3.22a1.66,1.66,0,0,1,.47.17,1.61,1.61,0,0,1,.42.36,1.51,1.51,0,0,1,.33.94,1.53,1.53,0,0,1-.2.75,1.46,1.46,0,0,1-.91.7A1.5,1.5,0,0,1,11.5,12a1.53,1.53,0,0,1,.2-.75,1.46,1.46,0,0,1,.91-.7A1.38,1.38,0,0,1,13.28,10.53ZM6.5,3a1.19,1.19,0,0,1,0-.33,1.5,1.5,0,0,1,2.92,0A1.19,1.19,0,0,1,9.5,3a1.39,1.39,0,0,1-.17.67,1.48,1.48,0,0,1-2.66,0A1.39,1.39,0,0,1,6.5,3ZM2.61,13.45a1.46,1.46,0,0,1-.91-.7A1.53,1.53,0,0,1,1.5,12a1.51,1.51,0,0,1,.33-.94,1.61,1.61,0,0,1,.42-.36,1.66,1.66,0,0,1,.47-.17,1.38,1.38,0,0,1,.67,0,1.46,1.46,0,0,1,.91.7,1.5,1.5,0,0,1-.55,2.05A1.51,1.51,0,0,1,2.61,13.45Z" /\x3e\r\n        \x3cpath d\x3d"M11.36,5.42a2.31,2.31,0,0,1-.61-.25A2.7,2.7,0,0,0,11.36,5.42Z" /\x3e\r\n        \x3cpath d\x3d"M13.25.83a2.7,2.7,0,0,0-.61-.25A2.31,2.31,0,0,1,13.25.83Z" /\x3e\r\n      \x3c/g\x3e\r\n    \x3c/svg\x3e\r\n    \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.collaboration}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/_groupIcon.html":'\x3cdiv\x3e\r\n  \x3cspan class\x3d"js-group-thumbnail display-block"\x3e\x3c/span\x3e\r\n\x3c/div\x3e\r\n',"url:arcgisonline/sharing/dijit/templates/SiteHeaderSimple.html":'\x3cdiv class\x3d"widgetContent siteHeader" id\x3d"header" data-dojo-attach-point\x3d"containerNode"\x3e\r\n    \x3cdiv class\x3d"esri-header-barrier"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:arcgisonline/sharing/dijit/templates/SiteFooter.html":'\x3cdiv dojoAttachPoint\x3d"containerNode" class\x3d"padding-leader-2 footer text-center padding-trailer-1 font-size--2 text-light-gray" role\x3d"contentinfo"\x3e\r\n\x3c!-- style\x3d"padding-top: 0.5em; margin-bottom: 1em; white-space: nowrap; text-align: center;"\x3e--\x3e\r\n  \x3cspan id\x3d"${id}_links" class\x3d"esriItemLinks"\x3e\x3c/span\x3e\r\n  \x3cdiv class\x3d"esri-footer-barrier"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/SiteFooterMap.html":'\x3cdiv style\x3d"border-top:1px solid #ccc; padding-top: 0.5em; padding-left:2px; margin-bottom: 3em; white-space: nowrap; text-align: center;"\x3e\r\n  \x3cspan id\x3d"${id}_links" class\x3d"esriItemLinks esriFloatLeading esriAlignLeading" style\x3d"color:#777; line-height:14px"\x3e\x3c/span\x3e\r\n\x3c/div\x3e\r\n',"url:arcgisonline/pages/dijit/PasswordStrength/templates/PasswordStrength.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"password-strength-meter"\x3e\r\n        \x3cdiv class\x3d"password-strength-meter__fill" data-dojo-attach-point\x3d"_strengthMeterFill"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"leader-half password-strength-description"\x3e\r\n        ${i18n.passwordStrengthMeter.passwordStrength}: \x3cspan data-dojo-attach-point\x3d"_strengthLabel"\x3e\x3c/span\x3e \x3ca class\x3d"tooltip" target\x3d"_blank" data-dojo-attach-point\x3d"_moreInfo" aria-label\x3d"${i18n.passwordStrengthMeter.learnMore}"\x3e${!icons.inline-end.question.16}\x3c/a\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/SignUpInternal.html":'\x3cdiv class\x3d"widgetContent grid-container"\x3e\r\n  \x3cdiv id\x3d"sign-up-form" class\x3d"leader-1 column-12 tablet-column-12 phone-column-6"\x3e\r\n    \x3cform data-dojo-type\x3d"dijit/form/Form" id\x3d"signup-form" data-dojo-attach-point\x3d"_form" method\x3d"POST" action\x3d""\x3e\r\n      \x3cp\x3e${i18n.enterAccountInfo}\x3c/p\x3e\r\n      \x3cdiv class\x3d"formBlock" id\x3d"first-name-block"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_firstname"\x3e\r\n          ${i18n.firstNameLabel}\r\n          \x3cinput id\x3d"register_firstname" name\x3d"register_firstname" data-dojo-attach-point\x3d"_firstname"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_firstnameError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock" id\x3d"last-name-block"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_lastname"\x3e\r\n          ${i18n.lastNameLabel}\r\n          \x3cinput id\x3d"register_lastname" name\x3d"register_lastname" data-dojo-attach-point\x3d"_lastname"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_lastnameError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_email"\x3e\r\n          ${i18n.currentEmailAdr}\r\n          \x3cinput id\x3d"register_email" name\x3d"register_email" data-dojo-attach-point\x3d"_email"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_emailError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"confirm_register_email"\x3e\r\n          ${i18n.confirmEmailAdr}\r\n          \x3cinput id\x3d"confirm_register_email" name\x3d"confirm_register_email" data-dojo-attach-point\x3d"_confirmEmail"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_confirmEmailError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_username"\x3e\r\n          ${i18n.yourUserName}\r\n          \x3cinput id\x3d"register_username" name\x3d"register_username" data-dojo-attach-point\x3d"_username"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_usernameError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_password"\x3e\r\n          ${i18n.choosePwd}\r\n          \x3cinput id\x3d"register_password" name\x3d"register_password" data-dojo-attach-point\x3d"_pwd" type\x3d"password"/\x3e\r\n          \x3cdiv class\x3d"invite-members__form-password" data-dojo-attach-point\x3d"_pwdStrengthError"\x3e\r\n              \x3cdiv class\x3d"js-strength-meter"\x3e\x3c/div\x3e\r\n              \x3cdiv class\x3d"font-size-0 input-error-message" data-dojo-attach-point\x3d"_pwdError"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_password2"\x3e\r\n          ${i18n.renterPwd}\r\n          \x3cinput id\x3d"register_password2" name\x3d"register_password2" data-dojo-attach-point\x3d"_verifyPwd" type\x3d"password"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_verifyPwdError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"identity_question"\x3e\r\n          ${i18n.identityQLabel}\x3cbr\x3e\r\n          \x3cselect id\x3d"identity_question" data-dojo-attach-point\x3d"_identityQuestion"\x3e\x3c/select\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_identityQuestionError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"identity_answer"\x3e\r\n          ${i18n.identityALabel}\r\n          \x3cinput id\x3d"identity_answer" data-dojo-attach-point\x3d"_identityAnswer" type\x3d"text"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_identityAnswerError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"leader-1 right"\x3e\r\n        \x3cbutton id\x3d"button_create_account" class\x3d"btn btn-blue" type\x3d"submit" data-dojo-attach-point\x3d"_createAccountBtn"\x3e${i18n.createAcc}\x3c/button\x3e\r\n        \x3cbutton id\x3d"button_cancel" class\x3d"btn btn-clear" type\x3d"button" data-dojo-attach-point\x3d"_cancelBtn"\x3e${i18n.cancel}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/form\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/form/templates/ComboButton.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tcellspacing\x3d\'0\' cellpadding\x3d\'0\' role\x3d"presentation"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point\x3d"buttonNode" data-dojo-attach-event\x3d"ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\r\n\t\t\x3e\x3cdiv id\x3d"${id}_button" class\x3d"dijitReset dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitButtonText" id\x3d"${id}_label" data-dojo-attach-point\x3d"containerNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd id\x3d"${id}_arrow" class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\r\n\t\t\tdata-dojo-attach-point\x3d"_popupStateNode,focusNode,_buttonNode"\r\n\t\t\tdata-dojo-attach-event\x3d"onkeydown:_onArrowKeyDown"\r\n\t\t\ttitle\x3d"${optionsTitle}"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonInner" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonChar" role\x3d"presentation"\x3e\x26#9660;\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd style\x3d"display:none !important;"\r\n\t\t\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" data-dojo-attach-point\x3d"valueNode"\r\n\t\t\t\tclass\x3d"dijitOffScreen" aria-hidden\x3d"true" data-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\t/\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n',
"url:dijit/templates/MenuSeparator.html":'\x3ctr class\x3d"dijitMenuSeparator" role\x3d"separator"\x3e\r\n\t\x3ctd class\x3d"dijitMenuSeparatorIconCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd colspan\x3d"3" class\x3d"dijitMenuSeparatorLabelCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop dijitMenuSeparatorLabel"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"*now":function(f){f(['dojo/i18n!*preload*arcgisonline/nls/base*["ar","bg","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("arcgisonline/base",["dojo","dijit","dojox","dojo/i18n!arcgisonline/nls/arcgisonline","dojo/require!esri/main,esri/utils,arcgisonline/init,arcgisonline/sharing/dijit/SiteHeader,arcgisonline/sharing/dijit/SiteFooter,arcgisonline/sharing/dijit/SiteFooterMap,arcgisonline/sharing/dijit/SignUpInternal,dijit/form/Form,arcgisonline/sharing/geow/Account,arcgisonline/sharing/dijit/HelpManager,dojo/date/locale,dojox/widget/Rotator,dojox/widget/AutoRotator,dojox/widget/rotator/Controller,dojox/widget/rotator/Fade,dijit/layout/StackController,dojo/cookie,dojo/json,arcgisonline/sharing/dijit/TextMenu,arcgisonline/sharing/util,dojo/topic,dijit/_base,dijit/form/DropDownButton,dijit/form/ComboButton,dijit/form/ToggleButton,dijit/form/RadioButton,dijit/PopupMenuItem,dijit/_Contained,dijit/_Container,dijit/_WidgetBase,dijit/main,dojo/Stateful,dojo/date/locale,arcgisonline/sharing/dijit/Gallery,arcgisonline/sharing/util,arcgisonline/sharing/dijit/views,dojo/parser,dijit/_base,dojo/dnd/AutoSource,dojo/dnd/Target,dojo/fx/Toggler,dijit/TooltipDialog,dijit/MenuSeparator"],function(f,
B,l){f.provide("arcgisonline.base");f.require("esri.main");f.require("esri.utils");f.require("arcgisonline.init");f.require("arcgisonline.sharing.dijit.SiteHeader");f.require("arcgisonline.sharing.dijit.SiteFooter");f.require("arcgisonline.sharing.dijit.SiteFooterMap");f.require("arcgisonline.sharing.dijit.SignUpInternal");f.require("dijit.form.Form");f.require("arcgisonline.sharing.geow.Account");f.require("arcgisonline.sharing.dijit.HelpManager");f.require("dojo.date.locale");f.require("dojox.widget.Rotator");
f.require("dojox.widget.AutoRotator");f.require("dojox.widget.rotator.Controller");f.require("dojox.widget.rotator.Fade");f.require("dijit.layout.StackController");f.require("dojo.cookie");f.require("dojo.json");f.require("arcgisonline.sharing.dijit.TextMenu");f.require("arcgisonline.sharing.util");f.require("dojo.topic");f.require("dijit._base");f.require("dijit.form.DropDownButton");f.require("dijit.form.ComboButton");f.require("dijit.form.ToggleButton");f.require("dijit.form.RadioButton");f.require("dijit.PopupMenuItem");
f.require("dijit._Contained");f.require("dijit._Container");f.require("dijit._WidgetBase");f.require("dijit.main");f.require("dojo.Stateful");f.require("dojo.date.locale");f.require("arcgisonline.sharing.dijit.Gallery");f.require("arcgisonline.sharing.util");f.require("arcgisonline.sharing.dijit.views");f.require("dojo.parser");f.require("dijit._base");f.require("dojo.dnd.AutoSource");f.require("dojo.dnd.Target");f.require("dojo.fx.Toggler");f.require("dijit.TooltipDialog");f.require("dijit.MenuSeparator");
f.requireLocalization("arcgisonline","arcgisonline")});