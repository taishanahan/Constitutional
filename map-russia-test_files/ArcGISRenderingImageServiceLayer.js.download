//>>built
define("esri/layers/ArcGISRenderingImageServiceLayer","dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/config dojo/has dojox/encoding/digests/_base ../kernel ../config ../request ../deferredUtils ./DynamicMapServiceLayer ./ImageServiceLayerMixin".split(" "),function(d,e,g,h,r,f,k,l,m,n,p,q){d=d([p,q],{declaredClass:"esri.layers.ArcGISRenderingImageServiceLayer",rasterType:{rft:"rft",rasterObject:"rasterObj",url:"url"},constructor:function(a,b){this.type=b.type;var c=this._processRasterParam(b.raster);
c&&(a=a+"?raster\x3d"+c,this._initialize(a,b),this.useMapImage=b&&b.useMapImage||!1)},_processRasterParam:function(a){if(a)return this.type===this.rasterType.rft||this.type===this.rasterType.rasterObject?("object"===typeof a&&(a=JSON.stringify(a)),a=f.stringToWord(a),f.wordToBase64(a)):a},refresh:function(a){if(!0===a)this.inherited(arguments);else{var b=this.disableClientCaching;this.disableClientCaching=!0;this.inherited(arguments);this.disableClientCaching=b}},setRaster:function(a){a=this._processRasterParam(a);
this._url.query.raster=a;this._params.raster=a;this.refresh(!0)},setRenderer:function(a,b){this.renderer=a;this.onRendererChange();b||this.refresh(!0)},exportMapImage:function(a,b){var c=l.defaults.map;a=e.mixin({size:c.width+","+c.height},this._params,a?a.toJson(this.normalization):{},{f:"json"});delete a._ts;this._exportMapImage(this._url.path+"/exportImage",a,b)},getMultidimensionalInfo:function(){var a=this._url.path+"/multiDimensionalInfo",b=new g(n._dfdCanceller);if(this._multidimensionalInfo)return b.resolve(this._multidimensionalInfo),
b;!this.loaded||10.3<=this.version&&this.hasMultidimensions?(b._pendingDfd=m({url:a,content:e.mixin(this._params,{f:"json",token:this._getToken()}),handleAs:"json",callbackParamName:"callback"}),b._pendingDfd.then(e.hitch(this,function(c){this._multidimensionalInfo=c.multidimensionalInfo;b.callback(c.multidimensionalInfo)}),function(c){b.errback(c)})):(a=Error("Layer does not support multidimensional info"),a.log=!!h.isDebug,b.errback(a));return b}});e.setObject("layers.ArcGISRenderingImageServiceLayer",
d,k);return d});