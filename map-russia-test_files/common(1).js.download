//>>built
define("esri/dijit/analysis/mixins/browselayers/configs/Common",["dojo/_base/lang","dojo/has","../../../../../kernel","dojo/i18n!../../../nls/BrowseLayerMixin","../../../ItemTypes"],function(g,f,h,c,e){f={getLAALCustomSection:function(a){var b=this._isCustomAnalysisQuery(a.portal,a.isPortal),d=[{name:c.customeSectionName,baseQuery:this._getLAALBaseQuery(a.customQueryTags,a.portal,a.isPortal),filters:[{fetchGroupIdByQuery:this._getDefaultQueryString(a.isPortal),name:c.Categories,type:"group",path:["categories"],
staticSchema:this._getStaticLAALSchema(a.portal,a.isPortal)}].concat(this._getFilters(a.isPortal)),disableSubResources:!0}];b&&d.push({name:c.customAnalysisGroupName,baseQuery:"",filters:[{id:this._getAnalysisGroupQuery(a.portal,a.isPortal).split(":")[1],name:c.Categories,type:"group",path:["categories"],staticSchema:void 0}].concat(this._getFilters(a.isPortal)),disableSubResources:!1});return d},getAddtoMapActions:function(a){return{allowed:function(b){return b.type!==e.RFT&&b.type!==e.XLS&&b.type!==
e.CSV&&b.type!==e.DLPK},asynchronous:!1,onAction:a,name:c.customActionName}},getEditRFTActions:function(a){return{allowed:function(b){return b.type===e.RFT&&!b.rfxTemplateData},asynchronous:!1,onAction:a,name:c.edit}},getSystemRFTSection:function(a){var b='(group:"'+(a.rftGroupId&&a.rftGroupId.id)+'") -type:"Attachment" -tags:"mature support"';a.isPortal||(b+=' -typekeywords:"categoryname#distance (legacy)system_rft"');return{name:"System",baseQuery:b,filters:[].concat(this._getFilters(a.isPortal)),
addToFront:!1,sortField:"title"}},getStaticFilters:function(a){if((a=a.tags)&&0!==a.length){var b=[];a.forEach(function(d){b.push(c[d]?c[d]:d)});return b}},getBoundaryLayersSection:function(a){return{name:c.boundaryLayers,baseQuery:"("+a.portal.EsriBoundaryLayersGroupQuery.split("AND")[1].trim()+')-type:"Attachment" -tags:"mature support"',filters:this._getFilters(a.isPortal),addToFront:!1,disableSubResources:!1}},getNumberOfPages:function(){return 16},_getLAALBaseQuery:function(a,b,d){d=['typekeywords:"Analysis Ready"'];
(b||b.user||!b.user.demographics)&&d.push('-typekeywords:"Requires Credits"');d.push('-type:"Attachment" -tags:"mature support"');d.push(this._queryTagsForLivingAtlasItemBrowser(a));return d.join(" ")},_queryTagsForLivingAtlasItemBrowser:function(a){a=a.tags;var b=[];if(!a||0===a.length)return"";if(1===a.length)return"tags: ("+a[0]+")";a.forEach(function(d){b.push(d)});return"tags: ("+b.join(" OR ")+")"},_getAnalysisGroupQuery:function(a,b){return this._isCustomAnalysisQuery(a,b)},_getDefaultQueryString:function(a){var b=
'title:"Living Atlas Analysis Layers" AND owner:esri';a&&(b='title:"Living Atlas Analysis Layers" AND owner:esri_livingatlas');return b},_isCustomAnalysisQuery:function(a,b){return a&&a.analysisLayersGroupQuery&&a.analysisLayersGroupQuery!==this._getDefaultQueryString(b)?a.analysisLayersGroupQuery:!1},_getStaticLAALSchema:function(a,b){return[{title:"categories",categories:[{title:"boundaries and places",categories:[{title:"boundaries",categories:[],displayName:c.boundaries},{title:"places",categories:[],
displayName:c.places}],displayName:c.boundariesAndPlaces},{title:"hexbins",categories:[],displayName:c.hexbins},{title:"transportation",categories:[],displayName:c.transportation}]}]},_getFilters:function(a){return["tags"]}};g.setObject("dijit.analysis.mixins.browselayers.configs.Common",f,h);return f});